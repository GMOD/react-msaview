(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{238:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MSAView",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"MSAModel",{enumerable:!0,get:function(){return o.default}});var n=a(r(388)),o=a(r(559));function a(e){return e&&e.__esModule?e:{default:e}}},361:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(234))&&n.__esModule?n:{default:n},a=r(362);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=(0,a.transform)({clustal:{G:"orange",P:"orange",S:"orange",T:"orange",H:"red",K:"red",R:"red",F:"blue",W:"blue",Y:"blue",I:"green",L:"green",M:"green",V:"green"},lesk:{G:"orange",A:"orange",S:"orange",T:"orange",C:"green",V:"green",I:"green",L:"green",P:"green",F:"green",Y:"green",M:"green",W:"green",N:"magenta",Q:"magenta",H:"magenta",D:"red",E:"red",K:"blue",R:"blue"},maeditor:{A:"lightgreen",G:"lightgreen",C:"green",D:"darkgreen",E:"darkgreen",N:"darkgreen",Q:"darkgreen",I:"blue",L:"blue",M:"blue",V:"blue",F:"#c8a2c8",W:"#c8a2c8",Y:"#c8a2c8",H:"darkblue",K:"orange",R:"orange",P:"pink",S:"red",T:"red"},flower:{A:"#b18a51",C:"#ff5701",D:"#01a578",E:"#2da0a1",F:"#fa559d",G:"#b1c23c",H:"#0194f9",I:"#f27663",K:"#7fc3d7",L:"#df6e75",M:"#fe9daf",N:"#0bcec6",P:"#4fa32a",Q:"#7295ae",R:"#83bff1",S:"#b4bd9b",T:"#d2b576",V:"#fd997b",W:"#ff2ded",Y:"#c96ecf"},rainbow_dna:{A:"#3737f5",C:"#37f537",G:"#f5f537",T:"#f53737",U:"#f53737"},clustalx_protein:{A:"#197fe5",C:"#e57f7f",D:"#cc4ccc",E:"#cc4ccc",F:"#197fe5",G:"#e5994c",H:"#19b2b2",I:"#197fe5",K:"#e53319",L:"#197fe5",M:"#197fe5",N:"#19cc19",P:"#cccc00",Q:"#19cc19",R:"#e53319",S:"#19cc19",T:"#19cc19",V:"#197fe5",W:"#197fe5",Y:"#19b2b2"},clustalx_dna:{A:"#e53319",C:"#197fe5",G:"#e5994c",T:"#19cc19",U:"#19cc19"},jalview_buried:{A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},jalview_hydrophobicity:{A:"#ad0052",R:"#0000ff",N:"#0c00f3",D:"#0c00f3",C:"#c2003d",Q:"#0c00f3",E:"#0c00f3",G:"#6a0095",H:"#1500ea",I:"#ff0000",L:"#ea0015",K:"#0000ff",M:"#b0004f",F:"#cb0034",P:"#4600b9",S:"#5e00a1",T:"#61009e",W:"#5b00a4",Y:"#4f00b0",V:"#f60009",B:"#0c00f3",X:"#680097",Z:"#0c00f3"},jalview_prophelix:{A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},jalview_propstrand:{A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},jalview_propturn:{A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},jalview_taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00"},jalview_zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf"},cinema:{H:"blue",K:"blue",R:"blue",D:"red",E:"red",S:"green",T:"green",N:"green",Q:"green",A:"white",V:"white",L:"white",I:"white",M:"white",F:"magenta",W:"magenta",Y:"magenta",P:"brown",G:"brown",C:"yellow",B:"gray",Z:"gray",X:"gray","-":"gray",".":"gray"}},(function(e){var t=l(e,2),r=t[0],n=t[1];return[r,(0,a.transform)(n,(function(e){var t=l(e,2),r=t[0],n=t[1];return[r,(0,o.default)(n).hex()]}))]}));t.default=u},362:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transform=function(e,t){return Object.fromEntries(Object.entries(e).map(t))}},387:function(e,t,r){},388:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=f(r(0)),o=f(r(389)),a=f(r(535)),l=f(r(540)),i=f(r(541)),u=r(29),c=r(37);function f(e){return e&&e.__esModule?e:{default:e}}var s=(0,u.observer)((function(e){var t=e.model,r=t.done;if(t.initialized){if(r){var u=t.height;return n.default.createElement("div",{style:{height:u,overflow:"hidden"}},n.default.createElement(i.default,{model:t}),n.default.createElement("div",{style:{position:"relative",display:"flex"}},n.default.createElement(a.default,{model:t}),n.default.createElement(l.default,{model:t})))}return n.default.createElement(c.Typography,{variant:"h4"},"Loading...")}return n.default.createElement(o.default,{model:t})}));t.default=s},389:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(37),l=r(29),i=r(7),u=r(395),c=r(534);function f(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=(0,l.observer)((function(e){var t=e.model,r=s((0,o.useState)(),2),n=r[0],l=r[1],f=s((0,o.useState)(),2),d=f[0],h=f[1];return o.default.createElement(a.Container,null,o.default.createElement("div",{style:{width:"50%"}},o.default.createElement(a.Typography,null,"Open an MSA file (stockholm or clustal format) and/or a tree file (newick format)."),o.default.createElement(a.Typography,{color:"error"},"Note: you can open up just an MSA or just a tree, both are not required. Some MSA files e.g. stockholm format have an embedded tree also and this is fine, and opening a separate tree file is not required.")),o.default.createElement(a.Grid,{container:!0,spacing:10,justify:"center",alignItems:"center"},o.default.createElement(a.Grid,{item:!0},o.default.createElement(a.Typography,null,"MSA file or URL"),o.default.createElement(u.FileSelector,{location:n,setLocation:l,localFileAllowed:!0}),o.default.createElement(a.Typography,null,"Tree file or URL"),o.default.createElement(u.FileSelector,{location:d,setLocation:h,localFileAllowed:!0})),o.default.createElement(a.Grid,{item:!0},o.default.createElement(a.Button,{onClick:function(){n&&t.setMSAFilehandle(n),d&&t.setTreeFilehandle(d)},variant:"contained",color:"primary",disabled:!n&&!d},"Open")),o.default.createElement(a.Grid,{item:!0},o.default.createElement(a.Typography,null,"Examples"),o.default.createElement("ul",null,o.default.createElement("li",null,o.default.createElement(a.Link,{href:"#",onClick:function(){t.setTreeFilehandle({uri:"https://jbrowse.org/genomes/newick_trees/sarscov2phylo.pub.ft.nh"})}},"230k COVID-19 samples (tree only)")),o.default.createElement("li",null,o.default.createElement(a.Link,{href:"#",onClick:function(){t.setData({msa:c.smallMSA,tree:c.smallTree})}},"Small protein+tree")),o.default.createElement("li",null,o.default.createElement(a.Link,{href:"#",onClick:function(){t.setMSAFilehandle({uri:"https://ihh.github.io/abrowse/build/pfam-cov2.stock"})}},"PFAM SARS-CoV2 multi-stockholm")),o.default.createElement("li",null,o.default.createElement(a.Link,{href:"#",onClick:function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/Lysine.stock"})}},"Lysine stockholm file")),o.default.createElement("li",null,o.default.createElement(a.Link,{href:"#",onClick:function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/PF01601_full.txt"})}},"PF01601 stockholm file (SARS-CoV2 spike protein)")),o.default.createElement("li",null,o.default.createElement(a.Link,{href:"#",onClick:function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/europe_covid.fa"})}},"Europe COVID full genomes (LR883044.1 and 199 other sequences)")),o.default.createElement("li",null,o.default.createElement(a.Link,{href:"#",onClick:function(){(0,i.transaction)((function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.fa"}),t.setTreeFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.nh"})}))}},"MAFFT+VeryFastTree(17.9k samples)"))))))}));t.default=h},442:function(e,t){},534:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.smallTree=t.smallMSA=void 0;t.smallMSA="CLUSTAL O(1.2.3) multiple sequence alignment\nUniProt/Swiss-Prot|P26898|IL2RA_SHEEP      MEPSLLMWRFFVFIVVPGCVTEACHDDPPSLRNA----------MFKVLRYE----VGTM\nUniProt/Swiss-Prot|P01590|IL2RA_MOUSE      MEPRLLMLGFLSLTIVPSCRAELCLYDPPEVPNA----------TFKALSYK----NGTI\nUniProt/Swiss-Prot|P41690|IL2RA_FELCA      MEPSLLLWGILTFVVVHGHVTELCDENPPDIQHA----------TFKALTYK----TGTM\nUniProt/Swiss-Prot|P01589|IL2RA_HUMAN      MDSYLLMWGLLTFIMVPGCQAELCDDDPPEIPHA----------TFKAMAYK----EGTM\nUniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU      MDPYLLMWGLLTFITVPGCQAELCDDDPPKITHA----------TFKAVAYK----EGTM\nUniProt/Swiss-Prot|Q95118|IL2RG_BOVIN      -----------------------------------LLMWGLLT-----------------\nUniProt/Swiss-Prot|P40321|IL2RG_CANFA      MLKPPLPLRSLLFLQLSLLGVGLNSTVPMPNGNEDIT------PDFFLTATPSETLSVSS\nUniProt/Swiss-Prot|P26896|IL2RB_RAT        MATVDLSWRLPLYILLLLLATT--------------------------------WVSAAV\nUniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE       PLPLRSLLFLQLPLLGVGLNP------------------PLPLRSLLFLQLPLLGVGLNP\nUniProt/Swiss-Prot|P36835|IL2_CAPHI        -----------LLGVGLNPKFLTP------------------------------------\nUniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO        MLKPPLPLRSLLFLQLPLLGVGLNPKFLTPSGNEDIGGKPGTGGDFFLTSTPAGTLDVST\nUniProt/Swiss-Prot|Q29416|IL2_CANFA        --------------LFLQLSLLG-------------------------------------\n";t.smallTree="(((UniProt/Swiss-Prot|P26898|IL2RA_SHEEP:0.24036,(UniProt/Swiss-Prot|P41690|IL2RA_FELCA:0.17737,(UniProt/Swiss-Prot|P01589|IL2RA_HUMAN:0.03906,UniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU:0.03787):0.13033):0.04964):0.02189,UniProt/Swiss-Prot|P01590|IL2RA_MOUSE:0.23072):0.06814,(((UniProt/Swiss-Prot|Q95118|IL2RG_BOVIN:0.09600,UniProt/Swiss-Prot|P40321|IL2RG_CANFA:0.09845):0.25333,UniProt/Swiss-Prot|Q29416|IL2_CANFA:-0.35055):0.10231,(UniProt/Swiss-Prot|P26896|IL2RB_RAT:0.33631,UniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO:-0.33631):0.10166):0.01607,(UniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE:0.32378,UniProt/Swiss-Prot|P36835|IL2_CAPHI:-0.32378):0.09999)"},535:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=r(360))&&o.__esModule?o:{default:o},l=r(29),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),u=r(37);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=3.5;var b=(0,l.observer)((function(e){var t=e.model,r=e.offsetY,n=(0,i.useRef)(null),o=(0,i.useRef)(null),a=(0,i.useRef)(null),l=h((0,i.useState)({}),2),c=l[0],f=l[1],d=h((0,i.useState)(),2),m=d[0],b=d[1],y=t.hierarchy,v=t.rowHeight,g=t.scrollY,S=t.treeWidth,E=t.showBranchLen,A=t.collapsed,w=t.margin,P=t.noTree,O=t.blockSize,M=t.drawNodeBubbles;function L(e){var t=e.nativeEvent.offsetX,r=e.nativeEvent.offsetY;if(a.current){var n=a.current.getContext("2d");if(n){var o=n.getImageData(t,r,1,1).data,l=[o[0],o[1],o[2]];return s(s({},c["".concat(l)]),{},{x:t,y:r})}}}function T(){b(void 0)}return(0,i.useEffect)((function(){if(n.current&&a.current){var e=n.current.getContext("2d"),t=a.current.getContext("2d");if(e&&t){var o={};[e,t].forEach((function(e){e.resetTransform(),e.clearRect(0,0,S,O),e.translate(w.left,-r)}));var l=e.font;e.font=l.replace(/\d+px/,"".concat(Math.max(8,v-8),"px")),P||(y.links().forEach((function(t){var n=t.source,o=t.target,a=E?"len":"y",l=n.x,i=n[a],u=o.x,c=o[a],f=Math.min(l,u),s=Math.max(l,u);r+O>=f&&s>=r&&(e.beginPath(),e.moveTo(i,l),e.lineTo(i,u),e.lineTo(c,u),e.stroke())})),M&&y.descendants().forEach((function(n){var a=E?"len":"y",l=n.x,i=n[a],u=n.data,c=u.id,f=void 0===c?"":c,s=u.name,d=void 0===s?"":s;if(l>r-5&&l<r+O+5){e.strokeStyle="black",e.fillStyle=A.includes(f)?"black":"white",e.beginPath(),e.arc(i,l,p,0,2*Math.PI),e.fill(),e.stroke();var m=[Math.floor(255*Math.random()),Math.floor(255*Math.random()),Math.floor(255*Math.random())],b=h(m,3),y=b[0],v=b[1],g=b[2];o["".concat(m)]={id:f,name:d},t.fillStyle="rgb(".concat(y,",").concat(v,",").concat(g,")"),t.fillRect(i-p,l-p,7,7)}}))),v>=10&&(e.fillStyle="black",y.leaves().forEach((function(t){var n=t.x,o=t.y,a=t.data.name,l=t.len;n>r-5&&n<r+O+5&&e.fillText(a,(E?l:o)+7,n+v/4)}))),f(o)}}}),[A,v,w.left,y,r,S,E,P,O,M]),i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{ref:o,style:{position:"absolute",left:(null===m||void 0===m?void 0:m.x)||0,top:g+r+((null===m||void 0===m?void 0:m.y)||0)}}),m&&m.id?i.default.createElement(u.Menu,{anchorEl:o.current,transitionDuration:0,keepMounted:!0,open:Boolean(o.current),onClose:T},i.default.createElement(u.MenuItem,{dense:!0,onClick:function(){t.toggleCollapsed(m.id),T()}},t.collapsed.includes(m.id)?"Expand":"Collapse")):null,i.default.createElement("canvas",{width:S,height:O,style:{width:S,height:O,top:g+r,left:0,position:"absolute"},onMouseMove:function(e){if(n.current){var t=L(e);t&&(t.id?n.current.style.cursor="pointer":n.current.style.cursor="default")}},onClick:function(e){var t=L(e);t&&t.id&&b(t)},ref:n}),i.default.createElement("canvas",{style:{display:"none"},width:S,height:O,ref:a}))})),y=(0,l.observer)((function(e){var t=e.model,r=(0,i.useRef)(null),n=(0,i.useRef)(!1),o=(0,i.useRef)(0),l=t.treeWidth,u=t.height,c=t.blocksY;return(0,i.useEffect)((function(){var e=r.current;if(e)return e.addEventListener("wheel",l),function(){e.removeEventListener("wheel",l)};function l(e){var r=(0,a.default)(e);o.current+=r.pixelY,n.current||(n.current=!0,requestAnimationFrame((function(){t.doScrollY(-o.current),o.current=0,n.current=!1}))),e.preventDefault()}}),[t]),i.default.createElement("div",{ref:r,style:{height:u,position:"relative",overflow:"hidden",width:l}},c.map((function(e){return i.default.createElement(b,{key:e,model:t,offsetY:e})})))}));t.default=y},540:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=h(r(360)),a=h(r(234)),l=h(r(361)),i=r(362),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),c=r(29),f=r(37),s=r(16);function d(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=(0,c.observer)((function(e){var t=e.model,r=e.offsetX,n=e.offsetY,o=t.MSA,c=t.colWidth,f=t.bgColor,d=t.columns,h=t.rowHeight,p=t.scrollY,b=t.scrollX,y=t.hierarchy,v=t.colorSchemeName,g=t.blockSize,S=(0,s.useTheme)(),E=l.default[v],A=(0,u.useMemo)((function(){return(0,i.transform)(E,(function(e){var t=m(e,2),r=t[0],n=t[1];return[r,S.palette.getContrastText((0,a.default)(n).hex())]}))}),[E]),w=(0,u.useRef)(null);return(0,u.useEffect)((function(){if(w.current){var e=w.current.getContext("2d");if(e){e.resetTransform(),e.clearRect(0,0,g,g),e.translate(-r,h/2-n),e.textAlign="center",e.font=e.font.replace(/\d+px/,"".concat(Math.max(8,h-12),"px"));var t=y.leaves(),o=g,a=Math.max(0,Math.floor((n-h)/h)),l=Math.max(0,Math.ceil((n+o+h)/h)),i=Math.max(0,Math.floor(r/c)),u=Math.max(0,Math.ceil((r+o)/c)),s=t.slice(a,l);s.forEach((function(t){for(var n,o=t.x,a=t.data.name,l=null===(n=d[a])||void 0===n?void 0:n.slice(i,u),s=0;s<(null===l||void 0===l?void 0:l.length);s++){var m=l[s],p=E[m.toUpperCase()];if(f){var b=s*c+r-r%c;e.fillStyle=p||"white",e.fillRect(b,o-h,c,h)}}})),h>=10&&c>=h/2&&s.forEach((function(t){for(var n,o=t.x,a=t.data.name,l=null===(n=d[a])||void 0===n?void 0:n.slice(i,u),s=0;s<(null===l||void 0===l?void 0:l.length);s++){var m=l[s],p=E[m.toUpperCase()],b=A[m.toUpperCase()]||"black",y=s*c+r-r%c;e.fillStyle=f?b:p||"black",e.fillText(m,Math.floor(y+c/2),Math.floor(o-h/4))}}))}}}),[o,d,E,A,f,h,c,y,r,n,g]),u.default.createElement("canvas",{ref:w,width:g,height:g,style:{position:"absolute",top:p+n,left:b+r,width:g,height:g}})})),y=(0,c.observer)((function(e){var t=e.model,r=t.MSA,n=t.msaFilehandle,a=t.width,l=t.height,i=t.treeWidth,c=t.blocksX,s=t.blocksY,d=(0,u.useRef)(null),h=(0,u.useRef)(!1),m=(0,u.useRef)(0),p=(0,u.useRef)(0);return(0,u.useEffect)((function(){var e=d.current;if(e)return e.addEventListener("wheel",r),function(){e.removeEventListener("wheel",r)};function r(e){var r=(0,o.default)(e);m.current+=r.pixelX,p.current+=r.pixelY,h.current||(h.current=!0,requestAnimationFrame((function(){t.doScrollX(-m.current),t.doScrollY(-p.current),m.current=0,p.current=0,h.current=!1}))),e.preventDefault()}}),[t]),u.default.createElement("div",{ref:d,style:{position:"relative",height:l,width:a-i,overflow:"hidden"}},r||n?r?u.default.createElement(u.default.Fragment,null,s.map((function(e){return c.map((function(r){return u.default.createElement(b,{key:"".concat(r,"_").concat(e),model:t,offsetX:r,offsetY:e})}))})).flat()):u.default.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"}},u.default.createElement(f.CircularProgress,null),u.default.createElement(f.Typography,null,"Loading...")):null)}));t.default=y},541:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(37),l=r(29),i=m(r(542)),u=m(r(543)),c=m(r(544)),f=m(r(555)),s=m(r(556)),d=m(r(557)),h=m(r(558));function m(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=(0,l.observer)((function(e){var t=e.model,r=b((0,o.useState)(!1),2),n=r[0],l=r[1],m=b((0,o.useState)(!1),2),p=m[0],y=m[1],v=b((0,o.useState)(!1),2),g=v[0],S=v[1],E=t.currentAlignment,A=t.alignmentNames;return o.default.createElement("div",{style:{display:"block"}},o.default.createElement(a.IconButton,{onClick:function(){t.setData({tree:"",msa:""}),t.setTreeFilehandle(void 0),t.setMSAFilehandle(void 0),t.setScrollY(0),t.setScrollX(0),t.setCurrentAlignment(0)}},o.default.createElement(f.default,null)),o.default.createElement(a.IconButton,{onClick:function(){l(!0)}},o.default.createElement(s.default,null)),o.default.createElement(a.IconButton,{onClick:function(){y(!0)}},o.default.createElement(d.default,null)),o.default.createElement(a.IconButton,{onClick:function(){S(!0)}},o.default.createElement(h.default,null)),o.default.createElement(i.default,{open:n,model:t,onClose:function(){return l(!1)}}),o.default.createElement(u.default,{open:p,onClose:function(){return y(!1)}}),o.default.createElement(c.default,{open:g,model:t,onClose:function(){return S(!1)}}),A.length>0?o.default.createElement(a.Select,{native:!0,value:E,onChange:function(e){t.setCurrentAlignment(+e.target.value),t.setScrollX(0),t.setScrollY(0)}},A.map((function(e,t){return o.default.createElement("option",{key:e+"-"+t,value:t},e)}))):null)}));t.default=v},542:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=(o=r(361))&&o.__esModule?o:{default:o},l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),i=r(29),u=r(37);function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=(0,i.observer)((function(e){var t=e.model,r=e.onClose,n=e.open,o=t.rowHeight,i=t.colWidth,c=t.nameWidth,s=t.treeWidth,d=t.colorSchemeName,h=t.noTree,m=f((0,l.useState)(""+o),2),p=m[0],b=m[1],y=f((0,l.useState)(""+i),2),v=y[0],g=y[1],S=f((0,l.useState)(""+c),2),E=S[0],A=S[1],w=f((0,l.useState)(""+s),2),P=w[0],O=w[1];function M(e){return Number.isNaN(+e)||+e<0}var L=M(p),T=M(v),j=M(E),I=M(P);return l.default.createElement(u.Dialog,{onClose:function(){return r()},open:n},l.default.createElement(u.DialogTitle,null,"Settings"),l.default.createElement(u.DialogContent,null,l.default.createElement(u.FormControlLabel,{control:l.default.createElement(u.Checkbox,{checked:t.showBranchLen,onChange:function(){return t.toggleBranchLen()}}),label:"Show branch length"}),l.default.createElement(u.FormControlLabel,{control:l.default.createElement(u.Checkbox,{checked:t.bgColor,onChange:function(){return t.toggleBgColor()}}),label:"Color background"}),l.default.createElement(u.FormControlLabel,{control:l.default.createElement(u.Checkbox,{checked:t.drawNodeBubbles,onChange:function(){return t.toggleNodeBubbles()}}),label:"Draw node bubbles"}),l.default.createElement("br",null),l.default.createElement(u.TextField,{label:"Row height (px)",value:p,error:L,onChange:function(e){return b(e.target.value)}}),l.default.createElement(u.TextField,{label:"Column width (px)",value:v,error:T,onChange:function(e){return g(e.target.value)}}),l.default.createElement("br",null),h?null:l.default.createElement(u.TextField,{label:"Tree width (px)",value:P,error:I,onChange:function(e){return O(e.target.value)}}),l.default.createElement(u.TextField,{label:"Name width (px)",value:E,error:j,onChange:function(e){return A(e.target.value)}}),l.default.createElement("br",null),l.default.createElement(u.TextField,{select:!0,label:"Color scheme",value:d,onChange:function(e){return t.setColorSchemeName(e.target.value)}},Object.keys(a.default).map((function(e){return l.default.createElement(u.MenuItem,{key:e,value:e},e)}))),l.default.createElement("br",null),l.default.createElement("br",null),l.default.createElement("br",null),l.default.createElement(u.Button,{disabled:L||T||j||I,onClick:function(){t.setRowHeight(+p),t.setColWidth(+v),t.setNameWidth(+E),h||t.setTreeWidth(+P),r()},variant:"contained",color:"primary"},"Submit")))}));t.default=d},543:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.onClose,r=e.open,n=(f=(0,o.useState)(!1),s=2,function(e){if(Array.isArray(e))return e}(f)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(n=(l=i.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}(f,s)||function(e,t){if(e){if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(f,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=n[0],c=n[1];var f,s;return o.default.createElement(o.default.Fragment,null,o.default.createElement(u,{onClose:function(){return c(!1)},open:l}),o.default.createElement(a.Dialog,{onClose:function(){return t()},open:r},o.default.createElement(a.DialogTitle,null,"About this plugin"),o.default.createElement(a.DialogContent,null,o.default.createElement(a.Typography,null,"JBrowse 2 MSAView plugin v1.0.0 (",o.default.createElement(a.Link,{href:"https://github.com/gmod/jbrowse-plugin-msaview"},"Github"),")"),o.default.createElement("ul",null,o.default.createElement("li",null,"We use some color schemes from the"," ",o.default.createElement(a.Link,{href:"https://github.com/biotite-dev/biotite"},"biotite")," ","project, and their license is reproduced"," ",o.default.createElement(a.Link,{onClick:function(){return c(!0)}},"here")),o.default.createElement("li",null,"See this page for some information on jalview colorings"," ",o.default.createElement(a.Link,{href:"https://www.jalview.org/help/html/colourSchemes/"},"here")),o.default.createElement("li",null,"See this page for some info on the clustal, cinema, maeditor, and lesk color schemes"," ",o.default.createElement(a.Link,{href:"http://www.bioinformatics.nl/~berndb/aacolour.html"},"here")),o.default.createElement("li",null,"See this paper about the flower color scheme"," ",o.default.createElement(a.Link,{href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7245768/"},"here"))))))};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(37);function l(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){var t=e.onClose,r=e.open;return o.default.createElement(a.Dialog,{onClose:function(){return t()},open:r},o.default.createElement(a.DialogTitle,null,"Settings"),o.default.createElement(a.DialogContent,null,o.default.createElement("pre",{style:{height:100,overflow:"auto"}},'\nCopyright 2017 - 2020, The Biotite contributors\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this\nlist of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice,\nthis list of conditions and the following disclaimer in the documentation and/or\nother materials provided with the distribution.\n\n3. Neither the name of the copyright holder nor the names of its contributors\nmay be used to endorse or promote products derived from this software without\nspecific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n        ')))}},544:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(0))&&n.__esModule?n:{default:n},a=r(29),l=r(37),i=r(545);var u=(0,a.observer)((function(e){var t=e.model,r=e.onClose,n=e.open,a=t.alignmentDetails;return o.default.createElement(l.Dialog,{onClose:function(){return r()},open:n},o.default.createElement(l.DialogTitle,null,"Metadata"),o.default.createElement(l.DialogContent,null,o.default.createElement(i.Attributes,{attributes:a})))}));t.default=u},559:function(e,t,r){"use strict";var n=r(30);function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=v(r(560)),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!==typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var l=n?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(601)),i=r(599),u=r(597),c=v(r(561)),f=v(r(562)),s=r(52),d=r(162),h=r(564),m=r(7),p=["branchset"],b=["data"];function y(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function v(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r,n,o,a,l){try{var i=e[a](l),u=i.value}catch(c){return void r(c)}i.done?t(u):Promise.resolve(u).then(n,o)}function S(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){g(a,n,o,l,i,"next",e)}function i(e){g(a,n,o,l,i,"throw",e)}l(void 0)}))}}function E(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t,r){return t&&O(e.prototype,t),r&&O(e,r),e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=function(){function e(t){P(this,e),L(this,"MSA",void 0),this.MSA=l.parse(t)}return M(e,[{key:"getMSA",value:function(){return this.MSA}},{key:"getRow",value:function(e){var t;return null===(t=this.MSA.alns.find((function(t){return t.id===e})))||void 0===t?void 0:t.seq.split("")}},{key:"getWidth",value:function(){return this.MSA.alns[0].seq.length}},{key:"getDetails",value:function(){return this.MSA.header}},{key:"alignmentNames",get:function(){return[]}},{key:"getTree",value:function(){return{id:"root",noTree:!0,branchset:this.MSA.alns}}}]),e}(),j=function(){function e(t){P(this,e),L(this,"MSA",void 0);var r={},n="",o=/^>(\S+)/;t.split("\n").forEach((function(e){var t=o.exec(e);t?r[n=t[1]]="":n&&(r[n]=r[n]+e.replace(/[ \t]/g,""))})),this.MSA={seqdata:r}}return M(e,[{key:"getMSA",value:function(){return this.MSA}},{key:"getRow",value:function(e){var t,r;return null===(t=this.MSA)||void 0===t||null===(r=t.seqdata[e])||void 0===r?void 0:r.split("")}},{key:"getWidth",value:function(){var e,t=Object.keys(null===(e=this.MSA)||void 0===e?void 0:e.seqdata)[0];return this.getRow(t).length}},{key:"alignmentNames",get:function(){return[]}},{key:"getDetails",value:function(){return{}}},{key:"getTree",value:function(){return{id:"root",noTree:!0,branchset:Object.keys(this.MSA.seqdata).map((function(e){return{id:e}}))}}}]),e}(),I=function(){function e(t,r){P(this,e),L(this,"data",void 0),L(this,"MSA",void 0);var n=f.default.parseAll(t);this.data=n,this.MSA=n[r]}return M(e,[{key:"getMSA",value:function(){return this.MSA}},{key:"getRow",value:function(e){var t,r;return null===(t=this.MSA)||void 0===t||null===(r=t.seqdata[e])||void 0===r?void 0:r.split("")}},{key:"getWidth",value:function(){var e,t=Object.keys(null===(e=this.MSA)||void 0===e?void 0:e.seqdata)[0];return this.getRow(t).length}},{key:"alignmentNames",get:function(){return this.data.map((function(e,t){var r;return(null===(r=e.gf.DE)||void 0===r?void 0:r[0])||"Alignment ".concat(t+1)}))}},{key:"getDetails",value:function(){return this.MSA.gf}},{key:"getTree",value:function(){var e,t,r,n=null===(e=this.MSA)||void 0===e||null===(t=e.gf)||void 0===t||null===(r=t.NH)||void 0===r?void 0:r[0];return n?_((0,c.default)(n)):{id:"root",noTree:!0,branchset:Object.keys(this.MSA.seqdata).map((function(e){return{id:e}}))}}}]),e}();function C(e,t,r){e.len=(t+=Math.max(e.data.length||0,0))*r,e.children&&e.children.forEach((function(e){C(e,t,r)}))}function k(e){return(e.data.length||1)+(e.children?(0,u.max)(e.children,k):0)}function R(e){return(0,i.hierarchy)(e,(function(e){return e.branchset})).sum((function(e){return e.branchset?0:1})).sort((function(e,t){return(0,u.ascending)(e.data.length||1,t.data.length||1)}))}function _(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"node",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o="".concat(r,"-").concat(n);return w(w({},e),{},{id:o,branchset:null===(t=e.branchset)||void 0===t?void 0:t.map((function(e,t){return _(e,o+"-"+t,n+1)}))})}function F(e,t){var r=e.branchset,n=E(e,p);return t.includes(e.id)?n:r?w(w({},n),{},{branchset:r.map((function(e){return F(e,t)}))}):e}function N(e,t,r){return Math.min(Math.max(t,e),r)}var D=s.types.snapshotProcessor(s.types.compose(a.default,s.types.model("MsaView",{id:d.ElementId,type:s.types.literal("MsaView"),height:680,treeAreaWidth:600,nameWidth:200,rowHeight:20,scrollY:0,scrollX:0,blockSize:1e3,colWidth:16,showBranchLen:!0,bgColor:!0,drawNodeBubbles:!0,colorSchemeName:"maeditor",treeFilehandle:s.types.maybe(d.FileLocation),msaFilehandle:s.types.maybe(d.FileLocation),currentAlignment:0,collapsed:s.types.array(s.types.string),data:s.types.optional(s.types.model({tree:s.types.maybe(s.types.string),msa:s.types.maybe(s.types.string)}).actions((function(e){return{setTree:function(t){e.tree=t},setMSA:function(t){e.msa=t}}})),{tree:"",msa:""})}).volatile((function(){return{error:void 0,volatileWidth:0,margin:{left:20,top:20}}})).actions((function(e){return{setError:function(t){e.error=t},setRowHeight:function(t){e.rowHeight=t},setColWidth:function(t){e.colWidth=t},setColorSchemeName:function(t){e.colorSchemeName=t},setScrollY:function(t){e.scrollY=t},setScrollX:function(t){e.scrollX=t},setTreeWidth:function(t){e.treeAreaWidth=t},setNameWidth:function(t){e.nameWidth=t},setCurrentAlignment:function(t){e.currentAlignment=t},toggleCollapsed:function(t){e.collapsed.includes(t)?e.collapsed.remove(t):e.collapsed.push(t)},toggleBranchLen:function(){e.showBranchLen=!e.showBranchLen},toggleBgColor:function(){e.bgColor=!e.bgColor},toggleNodeBubbles:function(){e.drawNodeBubbles=!e.drawNodeBubbles},setData:function(t){e.data=(0,s.cast)(t)},setWidth:function(t){e.volatileWidth=t},setMSAFilehandle:function(t){var r=this;return S(n.mark((function o(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||!("blobId"in t)){n.next=8;break}return n.t0=r,n.next=4,(0,h.openLocation)(t).readFile("utf8");case 4:n.t1=n.sent,n.t0.setMSA.call(n.t0,n.t1),n.next=9;break;case 8:e.msaFilehandle=t;case 9:case"end":return n.stop()}}),o)})))()},setTreeFilehandle:function(t){var r=this;return S(n.mark((function o(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||!("blobId"in t)){n.next=8;break}return n.t0=r,n.next=4,(0,h.openLocation)(t).readFile("utf8");case 4:n.t1=n.sent,n.t0.setTree.call(n.t0,n.t1),n.next=9;break;case 8:e.treeFilehandle=t;case 9:case"end":return n.stop()}}),o)})))()},setMSA:function(t){e.data.setMSA(t)},setTree:function(t){e.data.setTree(t)},afterCreate:function(){var t=this;(0,s.addDisposer)(e,(0,m.autorun)(S(n.mark((function r(){var o;return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(o=e.treeFilehandle)){r.next=7;break}return r.t0=t,r.next=5,(0,h.openLocation)(o).readFile("utf8");case 5:r.t1=r.sent,r.t0.setTree.call(r.t0,r.t1);case 7:case"end":return r.stop()}}),r)}))))),(0,s.addDisposer)(e,(0,m.autorun)(S(n.mark((function r(){var o;return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(o=e.msaFilehandle)){r.next=7;break}return r.t0=t,r.next=5,(0,h.openLocation)(o).readFile("utf8");case 5:r.t1=r.sent,r.t0.setMSA.call(r.t0,r.t1);case 7:case"end":return r.stop()}}),r)})))))}}})).views((function(e){var t=[],r=[],n=0,o=0;return{get initialized(){return e.data.msa||e.data.tree||e.msaFilehandle||e.treeFilehandle},get blocksX(){for(var r=e.scrollX,o=e.blockSize,a=e.colWidth,l=-o*Math.floor(r/o)-o,i=[],u=l;u<l+3*o;u+=o)u+o>0&&i.push(u);return JSON.stringify(i)===JSON.stringify(t)&&a===n||(t=i,n=a),t},get blocksY(){for(var t=e.scrollY,n=e.blockSize,a=e.rowHeight,l=-n*Math.floor(t/n)-2*n,i=[],u=l;u<l+3*n;u+=n)u+n>0&&i.push(u);return JSON.stringify(i)===JSON.stringify(r)&&a===o||(r=i,o=a),r},get done(){return e.volatileWidth>0&&this.initialized&&(e.data.msa||e.data.tree)},get alignmentDetails(){var e;return(null===(e=this.MSA)||void 0===e?void 0:e.getDetails())||{}},get currentAlignmentName(){return this.alignmentNames[e.currentAlignment]},get alignmentNames(){var e;return(null===(e=this.MSA)||void 0===e?void 0:e.alignmentNames)||[]},get noTree(){return!!this.tree.noTree},get menuItems(){return[]},get MSA(){var t=e.data.msa;return t?f.default.sniff(t)?new I(t,e.currentAlignment):t.startsWith(">")?new j(t):new T(t):null},get width(){return e.volatileWidth},get msaWidth(){var t;return(((null===(t=this.MSA)||void 0===t?void 0:t.getWidth())||0)-this.blanks.length)*e.colWidth},get tree(){var t,r=e.data.tree,n=e.collapsed,o=r?_((0,c.default)(r)):null===(t=this.MSA)||void 0===t?void 0:t.getTree();return o?F(o,n):{noTree:!0}},get root(){return R(this.tree)},get treeWidthMinusNames(){return e.treeAreaWidth-e.nameWidth},get treeWidth(){return this.noTree?e.nameWidth:e.treeAreaWidth},get blanks(){for(var e=this,t=[],r=this.hierarchy.leaves().map((function(t){var r,n=t.data;return null===(r=e.MSA)||void 0===r?void 0:r.getRow(n.name)})).filter((function(e){return!!e})),n=0;n<r[0].length;n++){for(var o=0,a=0;a<r.length;a++)"-"===r[a][n]&&o++;o===r.length&&t.push(n)}return t},get columns(){for(var e=this,t=this.hierarchy.leaves().map((function(t){var r,n=t.data;return[n.name,null===(r=e.MSA)||void 0===r?void 0:r.getRow(n.name)]})).filter((function(e){return!!e[1]})),r=t.map((function(e){return e[1]})),n=[],o=0;o<r.length;o++){for(var a="",l=0,i=0;i<r[o].length;i++)i===this.blanks[l]?l++:a+=r[o][i];n.push(a)}return Object.fromEntries(t.map((function(e,t){return[e[0],n[t]]})))},get hierarchy(){var e=R(this.tree);return(0,i.cluster)().size([this.totalHeight,this.treeWidthMinusNames]).separation((function(){return 1}))(e),C(e,e.data.length=0,this.treeWidthMinusNames/k(e)),e},get totalHeight(){return this.root.leaves().length*e.rowHeight}}}))).actions((function(e){return{doScrollY:function(t){e.scrollY=N(10-e.totalHeight,e.scrollY+t,10)},doScrollX:function(t){e.scrollX=N(-e.msaWidth+(e.width-e.treeWidth-20),e.scrollX+t,0)}}})),{postProcessor:function(e){e.data;return E(e,b)}});t.default=D},561:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],r={},n=e.split(/\s*(;|\(|\)|,|:)\s*/),o=0;o<n.length;o++){var a=n[o],l={};switch(a){case"(":r.branchset=[l],t.push(r),r=l;break;case",":t[t.length-1].branchset.push(l),r=l;break;case")":r=t.pop();break;case":":break;default:var i=n[o-1];")"===i||"("===i||","===i?r.name=a:":"===i&&(r.length=parseFloat(a))}}return r}},600:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(17),l=r.n(a),i=(r(387),r(29)),u=r(238),c=r(237),f=r(631),s=r(95);var d=Object(i.observer)((function(){var e=Object(c.createJBrowseTheme)(),t=u.MSAModel.create({id:"".concat(Math.random()),type:"MsaView"});return t.setWidth(1800),Object(s.jsx)(f.a,{theme:e,children:Object(s.jsx)("div",{style:{border:"1px solid black",margin:20},children:Object(s.jsx)(u.MSAView,{model:t})})})})),h=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,643)).then((function(t){var r=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,l=t.getTTFB;r(e),n(e),o(e),a(e),l(e)}))};l.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(d,{})}),document.getElementById("root")),h()}},[[600,1,2]]]);
//# sourceMappingURL=main.1da6b1fd.chunk.js.map