(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{168:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.transform=function(e,t){return Object.fromEntries(Object.entries(e).map(t))},t.generateNodeIds=function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"node",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i="".concat(n,"-").concat(a);return o(o({},t),{},{id:i,branchset:null===(r=t.branchset)||void 0===r?void 0:r.map((function(t,r){return e(t,i+"-"+r,a+1)}))})}},248:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MSAView",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"MSAModel",{enumerable:!0,get:function(){return o.default}});var n=a(r(409)),o=a(r(577));function a(e){return e&&e.__esModule?e:{default:e}}},374:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(239))&&n.__esModule?n:{default:n},a=r(168);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=(0,a.transform)({clustal:{G:"orange",P:"orange",S:"orange",T:"orange",H:"red",K:"red",R:"red",F:"blue",W:"blue",Y:"blue",I:"green",L:"green",M:"green",V:"green"},lesk:{G:"orange",A:"orange",S:"orange",T:"orange",C:"green",V:"green",I:"green",L:"green",P:"green",F:"green",Y:"green",M:"green",W:"green",N:"magenta",Q:"magenta",H:"magenta",D:"red",E:"red",K:"blue",R:"blue"},maeditor:{A:"lightgreen",G:"lightgreen",C:"green",D:"darkgreen",E:"darkgreen",N:"darkgreen",Q:"darkgreen",I:"blue",L:"blue",M:"blue",V:"blue",F:"#c8a2c8",W:"#c8a2c8",Y:"#c8a2c8",H:"darkblue",K:"orange",R:"orange",P:"pink",S:"red",T:"red"},flower:{A:"#b18a51",C:"#ff5701",D:"#01a578",E:"#2da0a1",F:"#fa559d",G:"#b1c23c",H:"#0194f9",I:"#f27663",K:"#7fc3d7",L:"#df6e75",M:"#fe9daf",N:"#0bcec6",P:"#4fa32a",Q:"#7295ae",R:"#83bff1",S:"#b4bd9b",T:"#d2b576",V:"#fd997b",W:"#ff2ded",Y:"#c96ecf"},rainbow_dna:{A:"#3737f5",C:"#37f537",G:"#f5f537",T:"#f53737",U:"#f53737"},clustalx_protein:{A:"#197fe5",C:"#e57f7f",D:"#cc4ccc",E:"#cc4ccc",F:"#197fe5",G:"#e5994c",H:"#19b2b2",I:"#197fe5",K:"#e53319",L:"#197fe5",M:"#197fe5",N:"#19cc19",P:"#cccc00",Q:"#19cc19",R:"#e53319",S:"#19cc19",T:"#19cc19",V:"#197fe5",W:"#197fe5",Y:"#19b2b2"},clustalx_dna:{A:"#e53319",C:"#197fe5",G:"#e5994c",T:"#19cc19",U:"#19cc19"},jalview_buried:{A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},jalview_hydrophobicity:{A:"#ad0052",R:"#0000ff",N:"#0c00f3",D:"#0c00f3",C:"#c2003d",Q:"#0c00f3",E:"#0c00f3",G:"#6a0095",H:"#1500ea",I:"#ff0000",L:"#ea0015",K:"#0000ff",M:"#b0004f",F:"#cb0034",P:"#4600b9",S:"#5e00a1",T:"#61009e",W:"#5b00a4",Y:"#4f00b0",V:"#f60009",B:"#0c00f3",X:"#680097",Z:"#0c00f3"},jalview_prophelix:{A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},jalview_propstrand:{A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},jalview_propturn:{A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},jalview_taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00"},jalview_zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf"},cinema:{H:"blue",K:"blue",R:"blue",D:"red",E:"red",S:"green",T:"green",N:"green",Q:"green",A:"white",V:"white",L:"white",I:"white",M:"white",F:"magenta",W:"magenta",Y:"magenta",P:"brown",G:"brown",C:"yellow",B:"gray",Z:"gray",X:"gray","-":"gray",".":"gray"}},(function(e){var t=i(e,2),r=t[0],n=t[1];return[r,(0,a.transform)(n,(function(e){var t=i(e,2),r=t[0],n=t[1];return[r,(0,o.default)(n).hex()]}))]}));t.default=u},379:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],r={},n=e.split(/\s*(;|\(|\)|,|:)\s*/),o=0;o<n.length;o++){var a=n[o],i={};switch(a){case"(":r.branchset=[i],t.push(r),r=i;break;case",":t[t.length-1].branchset.push(i),r=i;break;case")":r=t.pop();break;case":":break;default:var l=n[o-1];")"===l||"("===l||","===l?r.name=a:":"===l&&(r.length=parseFloat(a))}}return r}},407:function(e,t,r){},409:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(30),i=r(37),l=m(r(415)),u=m(r(552)),c=m(r(558)),f=m(r(559)),s=m(r(560)),d=m(r(561));function m(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=(0,a.observer)((function(e){var t=e.model,r=t.done,n=t.initialized,a=t.treeAreaWidth,m=t.height,p=h((0,o.useState)(!1),2),b=p[0],y=p[1];return(0,o.useEffect)((function(){if(b){var e=function(e){t.setTreeAreaWidth(t.treeAreaWidth+e.movementX)},r=function(){return y(!1)};return document.addEventListener("mousemove",e),document.addEventListener("mouseup",r),function(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",r)}}return function(){}}),[b,t]),n?r?o.default.createElement("div",{style:{height:m,overflow:"hidden"}},o.default.createElement(d.default,{model:t}),o.default.createElement("div",null,o.default.createElement("div",{style:{display:"flex",height:20}},o.default.createElement("div",{style:{overflow:"hidden",width:a}},o.default.createElement(s.default,{model:t})),o.default.createElement("div",{style:{width:5}}),o.default.createElement(f.default,{model:t})),o.default.createElement("div",{style:{display:"flex"}},o.default.createElement("div",{style:{overflow:"hidden",width:a}},o.default.createElement(u.default,{model:t})),o.default.createElement("div",null,o.default.createElement("div",{onMouseDown:function(){y(!0)},style:{cursor:"ew-resize",height:"100%",width:5,background:"rgba(200,200,200)",position:"relative"}})),o.default.createElement(c.default,{model:t})))):o.default.createElement(i.Typography,{variant:"h4"},"Loading..."):o.default.createElement(l.default,{model:t})}));t.default=y},415:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(37),i=r(30),l=r(7),u=r(416),c=r(551);function f(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m=function(e){var t=e.onClick,r=e.children;return o.default.createElement(a.Link,{onClick:t,href:"#"},o.default.createElement(a.Typography,null,r))},p=(0,i.observer)((function(e){var t=e.model,r=s((0,o.useState)(),2),n=r[0],i=r[1],f=s((0,o.useState)(),2),d=f[0],p=f[1];return o.default.createElement(a.Container,null,o.default.createElement("div",{style:{width:"50%"}},o.default.createElement(a.Typography,null,"Open an MSA file (stockholm or clustal format) and/or a tree file (newick format)."),o.default.createElement(a.Typography,{color:"error"},"Note: you can open up just an MSA or just a tree, both are not required. Some MSA files e.g. stockholm format have an embedded tree also and this is fine, and opening a separate tree file is not required.")),o.default.createElement(a.Grid,{container:!0,spacing:10,justify:"center",alignItems:"center"},o.default.createElement(a.Grid,{item:!0},o.default.createElement(a.Typography,null,"MSA file or URL"),o.default.createElement(u.FileSelector,{location:n,setLocation:i}),o.default.createElement(a.Typography,null,"Tree file or URL"),o.default.createElement(u.FileSelector,{location:d,setLocation:p})),o.default.createElement(a.Grid,{item:!0},o.default.createElement(a.Button,{onClick:function(){n&&t.setMSAFilehandle(n),d&&t.setTreeFilehandle(d)},variant:"contained",color:"primary",disabled:!n&&!d},"Open")),o.default.createElement(a.Grid,{item:!0},o.default.createElement(a.Typography,null,"Examples"),o.default.createElement("ul",null,o.default.createElement("li",null,o.default.createElement(m,{onClick:function(){t.setTreeFilehandle({uri:"https://jbrowse.org/genomes/newick_trees/sarscov2phylo.pub.ft.nh"})}},"230k COVID-19 samples (tree only)")),o.default.createElement("li",null,o.default.createElement(m,{onClick:function(){t.setData({msa:c.smallMSA,tree:c.smallTree})}},"Small protein+tree")),o.default.createElement("li",null,o.default.createElement(m,{onClick:function(){t.setMSAFilehandle({uri:"https://ihh.github.io/abrowse/build/pfam-cov2.stock"})}},"PFAM SARS-CoV2 multi-stockholm")),o.default.createElement("li",null,o.default.createElement(m,{onClick:function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/Lysine.stock"})}},"Lysine stockholm file")),o.default.createElement("li",null,o.default.createElement(m,{onClick:function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/PF01601_full.txt"})}},"PF01601 stockholm file (SARS-CoV2 spike protein)")),o.default.createElement("li",null,o.default.createElement(m,{onClick:function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/europe_covid.fa"})}},"Europe COVID full genomes (LR883044.1 and 199 other sequences)")),o.default.createElement("li",null,o.default.createElement(m,{onClick:function(){(0,l.transaction)((function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.fa"}),t.setTreeFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.nh"})}))}},"MAFFT+VeryFastTree(17.9k samples)"))))))}));t.default=p},460:function(e,t){},551:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.smallTree=t.smallMSA=void 0;t.smallMSA="CLUSTAL O(1.2.3) multiple sequence alignment\nUniProt/Swiss-Prot|P26898|IL2RA_SHEEP      MEPSLLMWRFFVFIVVPGCVTEACHDDPPSLRNA----------MFKVLRYE----VGTM\nUniProt/Swiss-Prot|P01590|IL2RA_MOUSE      MEPRLLMLGFLSLTIVPSCRAELCLYDPPEVPNA----------TFKALSYK----NGTI\nUniProt/Swiss-Prot|P41690|IL2RA_FELCA      MEPSLLLWGILTFVVVHGHVTELCDENPPDIQHA----------TFKALTYK----TGTM\nUniProt/Swiss-Prot|P01589|IL2RA_HUMAN      MDSYLLMWGLLTFIMVPGCQAELCDDDPPEIPHA----------TFKAMAYK----EGTM\nUniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU      MDPYLLMWGLLTFITVPGCQAELCDDDPPKITHA----------TFKAVAYK----EGTM\nUniProt/Swiss-Prot|Q95118|IL2RG_BOVIN      -----------------------------------LLMWGLLT-----------------\nUniProt/Swiss-Prot|P40321|IL2RG_CANFA      MLKPPLPLRSLLFLQLSLLGVGLNSTVPMPNGNEDIT------PDFFLTATPSETLSVSS\nUniProt/Swiss-Prot|P26896|IL2RB_RAT        MATVDLSWRLPLYILLLLLATT--------------------------------WVSAAV\nUniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE       PLPLRSLLFLQLPLLGVGLNP------------------PLPLRSLLFLQLPLLGVGLNP\nUniProt/Swiss-Prot|P36835|IL2_CAPHI        -----------LLGVGLNPKFLTP------------------------------------\nUniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO        MLKPPLPLRSLLFLQLPLLGVGLNPKFLTPSGNEDIGGKPGTGGDFFLTSTPAGTLDVST\nUniProt/Swiss-Prot|Q29416|IL2_CANFA        --------------LFLQLSLLG-------------------------------------\n";t.smallTree="(((UniProt/Swiss-Prot|P26898|IL2RA_SHEEP:0.24036,(UniProt/Swiss-Prot|P41690|IL2RA_FELCA:0.17737,(UniProt/Swiss-Prot|P01589|IL2RA_HUMAN:0.03906,UniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU:0.03787):0.13033):0.04964):0.02189,UniProt/Swiss-Prot|P01590|IL2RA_MOUSE:0.23072):0.06814,(((UniProt/Swiss-Prot|Q95118|IL2RG_BOVIN:0.09600,UniProt/Swiss-Prot|P40321|IL2RG_CANFA:0.09845):0.25333,UniProt/Swiss-Prot|Q29416|IL2_CANFA:-0.35055):0.10231,(UniProt/Swiss-Prot|P26896|IL2RB_RAT:0.33631,UniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO:-0.33631):0.10166):0.01607,(UniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE:0.32378,UniProt/Swiss-Prot|P36835|IL2_CAPHI:-0.32378):0.09999)"},552:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(37),i=c(r(372)),l=r(30),u=c(r(373));function c(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var b=3.5;function y(){return[Math.floor(255*Math.random()),Math.floor(255*Math.random()),Math.floor(255*Math.random())]}var v=600,g=(0,l.observer)((function(e){var t,r=e.model,n=e.offsetY,i=(0,o.useRef)(null),l=(0,o.useRef)(null),c=(0,o.useRef)(null),f=(0,o.useRef)(null),s=p((0,o.useState)({}),2),m=s[0],h=s[1],g=p((0,o.useState)({}),2),S=g[0],w=g[1],E=p((0,o.useState)(),2),O=E[0],A=E[1],P=p((0,o.useState)(),2),M=P[0],j=P[1],L=r.hierarchy,T=r.rowHeight,C=r.scrollY,k=r.treeWidth,I=r.showBranchLen,R=r.collapsed,x=r.margin,D=r.labelsAlignRight,_=r.noTree,N=r.blockSize,F=r.drawNodeBubbles,W=r.drawTree,U=r.treeAreaWidth,G=r.structures;function Y(e){var t=e.nativeEvent.offsetX,r=e.nativeEvent.offsetY;if(f.current){var n=f.current.getContext("2d");if(n){var o=n.getImageData(t,r,1,1).data,a=m["".concat([o[0],o[1],o[2]])];if(a)return d(d({},a),{},{x:t,y:r})}}}function V(e){var t=e.nativeEvent.offsetX,r=e.nativeEvent.offsetY;if(f.current){var n=f.current.getContext("2d");if(n){var o=n.getImageData(t,r,1,1).data,a=S["".concat([o[0],o[1],o[2]])];if(a)return d(d({},a),{},{x:t,y:r})}}}function B(){A(void 0)}function H(){j(void 0)}return(0,o.useEffect)((function(){if(i.current&&f.current){var e=i.current.getContext("2d"),t=f.current.getContext("2d");if(e&&t){var r={},o={};[e,t].forEach((function(e){e.resetTransform(),e.clearRect(0,0,k+v,N),e.translate(x.left,-n)}));var a=e.font;e.font=a.replace(/\d+px/,"".concat(Math.max(8,T-8),"px")),!_&&W&&(L.links().forEach((function(t){var r=t.source,o=t.target,a=I?"len":"y",i=r.x,l=r[a],u=o.x,c=o[a],f=Math.min(i,u),s=Math.max(i,u);n+N>=f&&s>=n&&(e.beginPath(),e.moveTo(l,i),e.lineTo(l,u),e.lineTo(c,u),e.stroke())})),F&&L.descendants().forEach((function(o){var a=I?"len":"y",i=o.x,l=o[a],u=o.data,c=u.id,f=void 0===c?"":c,s=u.name,d=void 0===s?"":s;if(i>n-5&&i<n+N+5){e.strokeStyle="black",e.fillStyle=R.includes(f)?"black":"white",e.beginPath(),e.arc(l,i,b,0,2*Math.PI),e.fill(),e.stroke();var m=y();r["".concat(m)]={id:f,name:d},t.fillStyle="rgb(".concat(m,")"),t.fillRect(l-b,i-b,7,7)}}))),T>=10&&(D?(e.textAlign="end",e.setLineDash([3,5])):e.textAlign="start",L.leaves().forEach((function(r){var a=r.x,i=r.y,l=r.data.name,u=r.len;if(a>n-5&&a<n+N+5){var c=a+T/4,f=I?u:i,s=y();o["".concat(s)]={id:l,name:l},t.fillStyle="rgb(".concat(s,")");var d=e.measureText(l).width,m=e.measureText("M").width,p=G[l];if(e.fillStyle=p?"blue":"black",W||D)if(D){if(W){var h=e.measureText(l).width;e.moveTo(f+b+2,a),e.lineTo(U-2*x.left-h-2,a),e.stroke()}e.fillText(l,U-2*x.left,c),p&&t.fillRect(U-30-d,c-m,d,m)}else e.fillText(l,f+7,c),p&&t.fillRect(f+7,c-m,d,m);else e.fillText(l,0,c),p&&t.fillRect(0,c-m,d,m)}})),e.setLineDash([])),h(r),w(o)}}}),[R,T,x.left,L,n,k,I,_,N,F,W,D,U,G]),o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{ref:l,style:{position:"absolute",left:(null===O||void 0===O?void 0:O.x)||0,top:C+n+((null===O||void 0===O?void 0:O.y)||0)}}),o.default.createElement("div",{ref:c,style:{position:"absolute",left:(null===M||void 0===M?void 0:M.x)||0,top:C+n+((null===M||void 0===M?void 0:M.y)||0)}}),null!==O&&void 0!==O&&O.id?o.default.createElement(a.Menu,{anchorEl:l.current,transitionDuration:0,keepMounted:!0,open:Boolean(l.current),onClose:B},o.default.createElement(a.MenuItem,{dense:!0,onClick:function(){r.toggleCollapsed(O.id),B()}},r.collapsed.includes(O.id)?"Expand":"Collapse")):null,null!==M&&void 0!==M&&M.id?o.default.createElement(a.Menu,{anchorEl:c.current,transitionDuration:0,keepMounted:!0,open:Boolean(c.current),onClose:H},null===(t=G[M.id])||void 0===t?void 0:t.map((function(e){return r.selectedStructures.find((function(e){return e.id===M.id}))?o.default.createElement(a.MenuItem,{key:JSON.stringify(e),dense:!0,onClick:function(){r.removeStructureFromSelection({structure:e,id:M.id}),H()}},"Remove ",e.pdb," selection"):o.default.createElement(a.MenuItem,{key:JSON.stringify(e),dense:!0,onClick:function(){r.addStructureToSelection({structure:e,id:M.id}),H()}},"Add ",e.pdb," selection")})),o.default.createElement(a.MenuItem,{dense:!0,onClick:function(){(0,u.default)(M.id),H()}},"Copy name to clipboard")):null,o.default.createElement("canvas",{width:k+v,height:N,style:{width:k+v,height:N,top:C+n,left:0,position:"absolute"},onMouseMove:function(e){i.current&&(Y(e)||V(e)?i.current.style.cursor="pointer":i.current.style.cursor="default")},onClick:function(e){var t=Y(e);null!==t&&void 0!==t&&t.id&&A(t);var r=V(e);null!==r&&void 0!==r&&r.id&&j(r)},ref:i}),o.default.createElement("canvas",{style:{display:"none"},width:k+v,height:N,ref:f}))})),S=(0,l.observer)((function(e){var t=e.model,r=(0,o.useRef)(null),n=(0,o.useRef)(!1),a=(0,o.useRef)(0),l=(0,o.useRef)(0),u=t.treeWidth,c=t.height,f=t.blocksY,s=p((0,o.useState)(!1),2),d=s[0],m=s[1];return(0,o.useEffect)((function(){var e=r.current;if(e)return e.addEventListener("wheel",o),function(){e.removeEventListener("wheel",o)};function o(e){var r=(0,i.default)(e);a.current+=r.pixelY,n.current||(n.current=!0,requestAnimationFrame((function(){t.doScrollY(-a.current),a.current=0,n.current=!1}))),e.preventDefault()}}),[t]),(0,o.useEffect)((function(){var e=function(){};function r(e){e.preventDefault();var r=e.clientY-l.current;r&&(n.current||(n.current=!0,window.requestAnimationFrame((function(){t.doScrollY(r),n.current=!1,l.current=e.clientY}))))}function o(){l.current=0,d&&m(!1)}return d&&(window.addEventListener("mousemove",r,!0),window.addEventListener("mouseup",o,!0),e=function(){window.removeEventListener("mousemove",r,!0),window.removeEventListener("mouseup",o,!0)}),e}),[t,d]),o.default.createElement("div",{ref:r,onMouseDown:function(e){var t=e.target;t.draggable||t.dataset.resizer||0===e.button&&(l.current=e.clientY,m(!0))},onMouseUp:function(e){e.preventDefault(),m(!1)},onMouseLeave:function(e){e.preventDefault()},style:{height:c,position:"relative",overflow:"hidden",width:u+v}},f.map((function(e){return o.default.createElement(g,{key:e,model:t,offsetY:e})})))}));t.default=S},558:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(37),i=s(r(372)),l=s(r(239)),u=r(30),c=s(r(374)),f=r(168);function s(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=(0,u.observer)((function(e){var t=e.model,r=e.offsetX,n=e.offsetY,i=t.MSA,u=t.colWidth,s=t.bgColor,d=t.columns,p=t.rowHeight,h=t.scrollY,b=t.scrollX,y=t.hierarchy,v=t.colorSchemeName,g=t.blockSize,S=t.mouseCol,w=(0,a.useTheme)(),E=c.default[v],O=(0,o.useMemo)((function(){return(0,f.transform)(E,(function(e){var t=m(e,2),r=t[0],n=t[1];return[r,w.palette.getContrastText((0,l.default)(n).hex())]}))}),[E,w.palette]),A=(0,o.useRef)(null),P=(0,o.useRef)(null);return(0,o.useEffect)((function(){if(A.current){var e=A.current.getContext("2d");if(e){e.resetTransform(),e.clearRect(0,0,g,g),e.translate(-r,p/2-n),e.textAlign="center",e.font=e.font.replace(/\d+px/,"".concat(Math.max(8,p-12),"px"));var t=y.leaves(),o=g,a=Math.max(0,Math.floor((n-p)/p)),i=Math.max(0,Math.ceil((n+o+p)/p)),l=Math.max(0,Math.floor(r/u)),c=Math.max(0,Math.ceil((r+o)/u)),f=t.slice(a,i);f.forEach((function(t){for(var n,o=t.x,a=t.data.name,i=null===(n=d[a])||void 0===n?void 0:n.slice(l,c),f=0;f<(null===i||void 0===i?void 0:i.length);f++){var m=i[f],h=E[m.toUpperCase()];if(s){var b=f*u+r-r%u;e.fillStyle=h||"white",e.fillRect(b,o-p,u,p)}}})),p>=10&&u>=p/2&&f.forEach((function(t){for(var n,o=t.x,a=t.data.name,i=null===(n=d[a])||void 0===n?void 0:n.slice(l,c),f=0;f<(null===i||void 0===i?void 0:i.length);f++){var m=i[f],h=E[m.toUpperCase()],b=O[m.toUpperCase()]||"black",y=f*u+r-r%u;e.fillStyle=s?b:h||"black",e.fillText(m,Math.floor(y+u/2),Math.floor(o-p/4))}}))}}}),[i,d,E,O,s,p,u,y,r,n,g]),(0,o.useEffect)((function(){if(P.current){var e=P.current.getContext("2d");if(e&&(e.resetTransform(),e.clearRect(0,0,g,g),e.translate(-r,-n),S&&S>r/u&&S<(r+g)/u)){var t=(S-1)*u;e.fillStyle="rgba(100,100,100,0.5)",e.fillRect(t,0,u,1e3)}}}),[S,g,u,r,n,p]),o.default.createElement("div",{style:{position:"relative"}},o.default.createElement("canvas",{ref:A,onMouseMove:function(e){if(A.current){var o=A.current.getBoundingClientRect(),a=o.left,i=o.top,l=e.clientX-a,c=e.clientY-i;t.setMousePos(Math.floor((l+r)/u)+1,Math.floor((c+n)/p))}},onMouseLeave:function(){return t.setMousePos()},width:g,height:g,style:{position:"absolute",top:h+n,left:b+r,width:g,height:g}}),o.default.createElement("canvas",{ref:P,width:g,height:g,style:{position:"absolute",top:h+n,left:b+r,width:g,height:g,zIndex:1e3,pointerEvents:"none"}}))})),b=(0,u.observer)((function(e){var t=e.model,r=t.MSA,n=t.msaFilehandle,l=t.height,u=t.msaAreaWidth,c=t.blocksX,f=t.blocksY,s=(0,o.useRef)(null),d=(0,o.useRef)(!1),p=(0,o.useRef)(0),b=(0,o.useRef)(0),y=(0,o.useRef)(0),v=(0,o.useRef)(0),g=m((0,o.useState)(!1),2),S=g[0],w=g[1];return(0,o.useEffect)((function(){var e=s.current;if(e)return e.addEventListener("wheel",r),function(){e.removeEventListener("wheel",r)};function r(e){var r=(0,i.default)(e);p.current+=r.pixelX,b.current+=r.pixelY,d.current||(d.current=!0,requestAnimationFrame((function(){t.doScrollX(-p.current),t.doScrollY(-b.current),p.current=0,b.current=0,d.current=!1}))),e.preventDefault()}}),[t]),(0,o.useEffect)((function(){var e=function(){};function r(e){e.preventDefault();var r=e.clientX,n=e.clientY,o=r-y.current,a=n-v.current;(o||a)&&(d.current||(d.current=!0,window.requestAnimationFrame((function(){t.doScrollX(o),t.doScrollY(a),d.current=!1,y.current=e.clientX,v.current=e.clientY}))))}function n(){y.current=0,S&&w(!1)}return S&&(window.addEventListener("mousemove",r,!0),window.addEventListener("mouseup",n,!0),e=function(){window.removeEventListener("mousemove",r,!0),window.removeEventListener("mouseup",n,!0)}),e}),[t,S]),o.default.createElement("div",{ref:s,onMouseDown:function(e){var t=e.target;t.draggable||t.dataset.resizer||0===e.button&&(y.current=e.clientX,v.current=e.clientY,w(!0))},onMouseUp:function(e){e.preventDefault(),w(!1)},onMouseLeave:function(e){e.preventDefault()},style:{position:"relative",height:l,width:u,overflow:"hidden"}},r||n?r?f.map((function(e){return c.map((function(r){return o.default.createElement(h,{key:"".concat(r,"_").concat(e),model:t,offsetX:r,offsetY:e})}))})).flat():o.default.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"}},o.default.createElement(a.CircularProgress,null),o.default.createElement(a.Typography,null,"Loading...")):null)}));t.default=b},559:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chooseGridPitch=l,t.makeTicks=u,t.default=void 0;var n,o=(n=r(0))&&n.__esModule?n:{default:n},a=r(37),i=r(30);function l(e,t,r){for(var n=t*(e=Math.abs(e)),o=parseInt(Number(n).toExponential().split(/e/i)[1],10),a=Math.pow(10,o);a<n&&!((a*=2)>=n);)a*=2.5;var i=(a=Math.max(a,5))/e,l=0;return!(a%10)&&i/10>=r?l=a/10:!(a%5)&&i/5>=r?l=a/5:!(a%2)&&i/2>=r&&(l=a/2),{majorPitch:a,minorPitch:l}}function u(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=l(r,60,15),i=e,u=t;if(null===i||null===u)return[];if(r<0){var c=[u,i];i=c[0],u=c[1]}i-=Math.abs(20*r),u+=Math.abs(20*r)+1;for(var f=a.minorPitch||a.majorPitch,s=0,d=[],m=Math.ceil(i/f)*f;m<u;m+=f)o&&m%(2*a.majorPitch)?(d.push({type:"minor",base:m-1,index:s}),s+=1):!n||m%(2*a.majorPitch)||(d.push({type:"major",base:m-1,index:s}),s+=1);return d}function c(e){return e<999?String(e):"".concat(c(~~(e/1e3)),",").concat("00".concat(~~(e%1e3)).substr(-3,3))}var f=(0,a.makeStyles)((function(){return{majorTickLabel:{fontSize:"11px"},majorTick:{stroke:"#555"},minorTick:{stroke:"#999"}}}));function s(e){var t=e.start,r=e.end,n=e.bpPerPx,a=e.reversed,i=e.major,l=e.minor,s=f(),d=u(t,r,n,i,l);return o.default.createElement(o.default.Fragment,null,d.map((function(e){var i=(a?r-e.base:e.base-t)/n;return o.default.createElement("line",{key:e.base,x1:i,x2:i,y1:11,y2:"major"===e.type?17:15,strokeWidth:1,stroke:"major"===e.type?"#555":"#999",className:"major"===e.type?s.majorTick:s.minorTick,"data-bp":e.base})})),d.filter((function(e){return"major"===e.type})).map((function(e){var i=(a?r-e.base:e.base-t)/n;return o.default.createElement("text",{x:i,y:10,key:"label-".concat(e.base),textAnchor:"middle",style:{fontSize:"11px"},className:s.majorTickLabel},c(e.base+1))})))}var d=(0,i.observer)((function(e){var t=e.model,r=t.MSA,n=t.colWidth,a=t.msaAreaWidth,i=t.scrollX,l=t.blocksX,u=t.blockSize,c=l[0];return r?o.default.createElement("div",{style:{position:"relative",width:a,overflow:"hidden",height:20}},o.default.createElement("svg",{style:{width:l.length*u,position:"absolute",left:i+c}},o.default.createElement(s,{key:c,start:c/n,end:c/n+u*l.length/n,bpPerPx:1/n}))):null}));t.default=d},560:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(0))&&n.__esModule?n:{default:n};var a=(0,r(30).observer)((function(e){var t=e.model.treeWidth;return o.default.createElement("div",{style:{width:t}})}));t.default=a},561:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(37),i=r(30),l=p(r(562)),u=p(r(563)),c=p(r(564)),f=p(r(573)),s=p(r(574)),d=p(r(575)),m=p(r(576));function p(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=(0,i.observer)((function(e){var t=e.model,r=b((0,o.useState)(!1),2),n=r[0],i=r[1],p=b((0,o.useState)(!1),2),h=p[0],y=p[1],v=b((0,o.useState)(!1),2),g=v[0],S=v[1],w=t.currentAlignment,E=t.alignmentNames;return o.default.createElement("div",{style:{display:"block"}},o.default.createElement(a.IconButton,{onClick:function(){t.setData({tree:"",msa:""}),t.setTreeFilehandle(void 0),t.setMSAFilehandle(void 0),t.setScrollY(0),t.setScrollX(0),t.setCurrentAlignment(0)}},o.default.createElement(f.default,null)),o.default.createElement(a.IconButton,{onClick:function(){i(!0)}},o.default.createElement(s.default,null)),o.default.createElement(a.IconButton,{onClick:function(){y(!0)}},o.default.createElement(d.default,null)),o.default.createElement(a.IconButton,{onClick:function(){S(!0)}},o.default.createElement(m.default,null)),n?o.default.createElement(l.default,{open:!0,model:t,onClose:function(){return i(!1)}}):null,h?o.default.createElement(u.default,{open:!0,onClose:function(){return y(!1)}}):null,g?o.default.createElement(c.default,{open:!0,model:t,onClose:function(){return S(!1)}}):null,E.length>0?o.default.createElement(a.Select,{native:!0,value:w,onChange:function(e){t.setCurrentAlignment(+e.target.value),t.setScrollX(0),t.setScrollY(0)}},E.map((function(e,t){return o.default.createElement("option",{key:e+"-"+t,value:t},e)}))):null,o.default.createElement(a.Typography,{display:"inline"},"Row name: ",t.mouseOverRowName),o.default.createElement("span",{style:{marginLeft:10}}),o.default.createElement(a.Typography,{display:"inline"},"Position: ",t.mouseCol))}));t.default=v},562:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),i=r(30),l=r(37),u=(o=r(374))&&o.__esModule?o:{default:o};function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=(0,i.observer)((function(e){var t=e.model,r=e.onClose,n=e.open,o=t.rowHeight,i=t.colWidth,c=t.treeWidth,s=t.colorSchemeName,d=t.noTree,m=f((0,a.useState)(""+o),2),p=m[0],h=m[1],b=f((0,a.useState)(""+i),2),y=b[0],v=b[1],g=f((0,a.useState)(""+c),2),S=g[0],w=g[1];function E(e){return Number.isNaN(+e)||+e<0}var O=E(p),A=E(y),P=E(S);return a.default.createElement(l.Dialog,{onClose:function(){return r()},open:n},a.default.createElement(l.DialogTitle,null,"Settings"),a.default.createElement(l.DialogContent,null,a.default.createElement(l.FormControlLabel,{control:a.default.createElement(l.Checkbox,{checked:t.showBranchLen,onChange:function(){return t.toggleBranchLen()}}),label:"Show branch length"}),a.default.createElement(l.FormControlLabel,{control:a.default.createElement(l.Checkbox,{checked:t.bgColor,onChange:function(){return t.toggleBgColor()}}),label:"Color background"}),a.default.createElement(l.FormControlLabel,{control:a.default.createElement(l.Checkbox,{checked:t.drawNodeBubbles,onChange:function(){return t.toggleNodeBubbles()}}),label:"Draw node bubbles"}),a.default.createElement(l.FormControlLabel,{control:a.default.createElement(l.Checkbox,{checked:t.drawTree,onChange:function(){return t.toggleDrawTree()}}),label:"Draw tree (if available)"}),a.default.createElement(l.FormControlLabel,{control:a.default.createElement(l.Checkbox,{checked:t.labelsAlignRight,onChange:function(){return t.toggleLabelsAlignRight()}}),label:"Labels align right (note: labels may draw over tree, but can adjust tree width or tree area width in UI)"}),a.default.createElement(l.TextField,{label:"Row height (px)",value:p,error:O,onChange:function(e){return h(e.target.value)}}),a.default.createElement(l.TextField,{label:"Column width (px)",value:y,error:A,onChange:function(e){return v(e.target.value)}}),a.default.createElement("br",null),d?null:a.default.createElement(l.TextField,{label:"Tree width (px)",value:S,error:P,onChange:function(e){return w(e.target.value)}}),a.default.createElement("br",null),a.default.createElement(l.TextField,{select:!0,label:"Color scheme",value:s,onChange:function(e){return t.setColorSchemeName(e.target.value)}},Object.keys(u.default).map((function(e){return a.default.createElement(l.MenuItem,{key:e,value:e},e)}))),a.default.createElement("br",null),a.default.createElement("br",null),a.default.createElement("br",null),a.default.createElement(l.Button,{disabled:O||A||P,onClick:function(){t.setRowHeight(+p),t.setColWidth(+y),d||t.setTreeWidth(+S),r()},variant:"contained",color:"primary"},"Submit")))}));t.default=d},563:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.onClose,r=e.open,n=(f=(0,o.useState)(!1),s=2,function(e){if(Array.isArray(e))return e}(f)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}}(f,s)||function(e,t){if(e){if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(f,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=n[0],c=n[1];var f,s;return o.default.createElement(o.default.Fragment,null,o.default.createElement(u,{onClose:function(){return c(!1)},open:i}),o.default.createElement(a.Dialog,{onClose:function(){return t()},open:r},o.default.createElement(a.DialogTitle,null,"About this plugin"),o.default.createElement(a.DialogContent,null,o.default.createElement(a.Typography,null,"JBrowse 2 MSAView plugin v1.0.0 (",o.default.createElement(a.Link,{href:"https://github.com/gmod/jbrowse-plugin-msaview"},"Github"),")"),o.default.createElement("ul",null,o.default.createElement("li",null,o.default.createElement(a.Typography,null,"We use some color schemes from the"," ",o.default.createElement(a.Link,{href:"https://github.com/biotite-dev/biotite"},"biotite")," ","project, and their license is reproduced"," ",o.default.createElement(a.Link,{onClick:function(){return c(!0)}},"here"))),o.default.createElement("li",null,o.default.createElement(a.Typography,null,"See this page for some information on jalview colorings"," ",o.default.createElement(a.Link,{href:"https://www.jalview.org/help/html/colourSchemes/"},"here"))),o.default.createElement("li",null,o.default.createElement(a.Typography,null,"See this page for some info on the clustal, cinema, maeditor, and lesk color schemes"," ",o.default.createElement(a.Link,{href:"http://www.bioinformatics.nl/~berndb/aacolour.html"},"here"))),o.default.createElement("li",null,o.default.createElement(a.Typography,null,"See this paper about the flower color scheme"," ",o.default.createElement(a.Link,{href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7245768/"},"here")))))))};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(37);function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e){var t=e.onClose,r=e.open;return o.default.createElement(a.Dialog,{onClose:function(){return t()},open:r},o.default.createElement(a.DialogTitle,null,"Biotite License"),o.default.createElement(a.DialogContent,null,o.default.createElement("pre",{style:{height:100,overflow:"auto"}},'\nCopyright 2017 - 2020, The Biotite contributors\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this\nlist of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice,\nthis list of conditions and the following disclaimer in the documentation and/or\nother materials provided with the distribution.\n\n3. Neither the name of the copyright holder nor the names of its contributors\nmay be used to endorse or promote products derived from this software without\nspecific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n        ')))}},564:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=(n=r(0))&&n.__esModule?n:{default:n},a=r(37),i=r(30),l=r(565);var u=(0,i.observer)((function(e){var t=e.model,r=e.onClose,n=e.open,i=t.alignmentDetails;return o.default.createElement(a.Dialog,{onClose:function(){return r()},open:n},o.default.createElement(a.DialogTitle,null,"Metadata"),o.default.createElement(a.DialogContent,null,o.default.createElement(l.Attributes,{attributes:i})))}));t.default=u},577:function(e,t,r){"use strict";var n=r(33);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(38),a=r(619),i=r(617),l=r(165),u=r(578),c=r(7),f=g(r(610)),s=g(r(378)),d=g(r(612)),m=g(r(613)),p=g(r(614)),h=g(r(379)),b=r(168),y=["branchset"],v=["data"];function g(e){return e&&e.__esModule?e:{default:e}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t,r,n,o,a,i){try{var l=e[a](i),u=l.value}catch(c){return void r(c)}l.done?t(u):Promise.resolve(u).then(n,o)}function O(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){E(a,n,o,i,l,"next",e)}function l(e){E(a,n,o,i,l,"throw",e)}i(void 0)}))}}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function L(e,t,r){e.len=(t+=Math.max(e.data.length||0,0))*r,e.children&&e.children.forEach((function(e){L(e,t,r)}))}function T(e){return(e.data.length||1)+(e.children?(0,i.max)(e.children,T):0)}function C(e){return(0,a.hierarchy)(e,(function(e){return e.branchset})).sum((function(e){return e.branchset?0:1})).sort((function(e,t){return(0,i.ascending)(e.data.length||1,t.data.length||1)}))}function k(e,t){var r=e.branchset,n=j(e,y);return t.includes(e.id)?n:r?P(P({},n),{},{branchset:r.map((function(e){return k(e,t)}))}):e}function I(e,t,r){return Math.min(Math.max(t,e),r)}var R=o.types.model({id:o.types.identifier,structure:o.types.model({pdb:o.types.string,startPos:o.types.number,endPos:o.types.number}),range:o.types.maybe(o.types.string)}),x=o.types.snapshotProcessor(o.types.compose(f.default,o.types.model("MsaView",{id:l.ElementId,type:o.types.literal("MsaView"),height:o.types.optional(o.types.number,550),treeAreaWidth:o.types.optional(o.types.number,400),treeWidth:o.types.optional(o.types.number,300),rowHeight:20,scrollY:0,scrollX:0,blockSize:1e3,mouseRow:o.types.maybe(o.types.number),mouseCol:o.types.maybe(o.types.number),selectedStructures:o.types.array(R),labelsAlignRight:!1,colWidth:16,showBranchLen:!0,bgColor:!0,drawTree:!0,drawNodeBubbles:!0,colorSchemeName:"maeditor",treeFilehandle:o.types.maybe(l.FileLocation),msaFilehandle:o.types.maybe(l.FileLocation),currentAlignment:0,collapsed:o.types.array(o.types.string),data:o.types.optional(o.types.model({tree:o.types.maybe(o.types.string),msa:o.types.maybe(o.types.string)}).actions((function(e){return{setTree:function(t){e.tree=t},setMSA:function(t){e.msa=t}}})),{tree:"",msa:""})}).volatile((function(){return{error:void 0,margin:{left:20,top:20}}})).actions((function(e){return{addStructureToSelection:function(t){e.selectedStructures.push(t)},removeStructureFromSelection:function(t){var r=e.selectedStructures.find((function(e){return e.id===t.id}));r&&e.selectedStructures.remove(r)},toggleStructureSelection:function(t){var r=e.selectedStructures.find((function(e){return e.id===t.id}));r?e.selectedStructures.remove(r):e.selectedStructures.push(t)},clearSelectedStructures:function(){e.selectedStructures=[]},setError:function(t){e.error=t},setMousePos:function(t,r){e.mouseCol=t,e.mouseRow=r},setRowHeight:function(t){e.rowHeight=t},setColWidth:function(t){e.colWidth=t},setColorSchemeName:function(t){e.colorSchemeName=t},setScrollY:function(t){e.scrollY=t},setScrollX:function(t){e.scrollX=t},setTreeAreaWidth:function(t){e.treeAreaWidth=t},setTreeWidth:function(t){e.treeWidth=t},setCurrentAlignment:function(t){e.currentAlignment=t},toggleLabelsAlignRight:function(){e.labelsAlignRight=!e.labelsAlignRight},toggleDrawTree:function(){e.drawTree=!e.drawTree},toggleCollapsed:function(t){e.collapsed.includes(t)?e.collapsed.remove(t):e.collapsed.push(t)},toggleBranchLen:function(){e.showBranchLen=!e.showBranchLen},toggleBgColor:function(){e.bgColor=!e.bgColor},toggleNodeBubbles:function(){e.drawNodeBubbles=!e.drawNodeBubbles},setData:function(t){e.data=(0,o.cast)(t)},setMSAFilehandle:function(t){var r=this;return O(n.mark((function o(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||!("blobId"in t)){n.next=8;break}return n.t0=r,n.next=4,(0,u.openLocation)(t).readFile("utf8");case 4:n.t1=n.sent,n.t0.setMSA.call(n.t0,n.t1),n.next=9;break;case 8:e.msaFilehandle=t;case 9:case"end":return n.stop()}}),o)})))()},setTreeFilehandle:function(t){var r=this;return O(n.mark((function o(){return n.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||!("blobId"in t)){n.next=8;break}return n.t0=r,n.next=4,(0,u.openLocation)(t).readFile("utf8");case 4:n.t1=n.sent,n.t0.setTree.call(n.t0,n.t1),n.next=9;break;case 8:e.treeFilehandle=t;case 9:case"end":return n.stop()}}),o)})))()},setMSA:function(t){e.data.setMSA(t)},setTree:function(t){e.data.setTree(t)},afterCreate:function(){var t=this;(0,o.addDisposer)(e,(0,c.autorun)(O(n.mark((function r(){var o;return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(o=e.treeFilehandle)){r.next=7;break}return r.t0=t,r.next=5,(0,u.openLocation)(o).readFile("utf8");case 5:r.t1=r.sent,r.t0.setTree.call(r.t0,r.t1);case 7:case"end":return r.stop()}}),r)}))))),(0,o.addDisposer)(e,(0,c.autorun)(O(n.mark((function r(){var o;return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(o=e.msaFilehandle)){r.next=7;break}return r.t0=t,r.next=5,(0,u.openLocation)(o).readFile("utf8");case 5:r.t1=r.sent,r.t0.setMSA.call(r.t0,r.t1);case 7:case"end":return r.stop()}}),r)})))))}}})).views((function(e){var t=[],r=[],n=0,o=0;return{get initialized(){return e.data.msa||e.data.tree||e.msaFilehandle||e.treeFilehandle},get blocksX(){for(var r=e.scrollX,o=e.blockSize,a=e.colWidth,i=-o*Math.floor(r/o)-o,l=[],u=i;u<i+3*o;u+=o)u+o>0&&l.push(u);return JSON.stringify(l)===JSON.stringify(t)&&a===n||(t=l,n=a),t},get blocksY(){for(var t=e.scrollY,n=e.blockSize,a=e.rowHeight,i=-n*Math.floor(t/n)-2*n,l=[],u=i;u<i+3*n;u+=n)u+n>0&&l.push(u);return JSON.stringify(l)===JSON.stringify(r)&&a===o||(r=l,o=a),r},get done(){return this.initialized&&(e.data.msa||e.data.tree)},get alignmentDetails(){var e;return(null===(e=this.MSA)||void 0===e?void 0:e.getDetails())||{}},get currentAlignmentName(){return this.alignmentNames[e.currentAlignment]},get alignmentNames(){var e;return(null===(e=this.MSA)||void 0===e?void 0:e.alignmentNames)||[]},get noTree(){return!!this.tree.noTree},get menuItems(){return[]},get MSA(){var t=e.data.msa;return t?s.default.sniff(t)?new m.default(t,e.currentAlignment):t.startsWith(">")?new p.default(t):new d.default(t):null},get numColumns(){var t;return(((null===(t=this.MSA)||void 0===t?void 0:t.getWidth())||0)-this.blanks.length)*e.colWidth},get tree(){var t,r=e.data.tree,n=e.collapsed,o=r?(0,b.generateNodeIds)((0,h.default)(r)):null===(t=this.MSA)||void 0===t?void 0:t.getTree();return o?k(o,n):{noTree:!0}},get rowNames(){return this.hierarchy.leaves().map((function(e){return e.data.name}))},get mouseOverRowName(){return void 0!==e.mouseRow?this.rowNames[e.mouseRow]:void 0},getMouseOverResidue:function(e){return this.columns[e]},get root(){return C(this.tree)},get structures(){var e;return(null===(e=this.MSA)||void 0===e?void 0:e.getStructures())||{}},get inverseStructures(){return Object.fromEntries(Object.entries(this.structures).map((function(e){var t=S(e,2),r=t[0];return t[1].map((function(e){return[e.pdb,{id:r}]}))})).flat())},get msaAreaWidth(){return e.width-e.treeAreaWidth},get blanks(){for(var e=this,t=[],r=this.hierarchy.leaves().map((function(t){var r,n=t.data;return null===(r=e.MSA)||void 0===r?void 0:r.getRow(n.name)})).filter((function(e){return!!e})),n=0;n<(null===(o=r[0])||void 0===o?void 0:o.length);n++){for(var o,a=0,i=0;i<r.length;i++)"-"===r[i][n]&&a++;a===r.length&&t.push(n)}return t},get columns(){for(var e=this,t=this.hierarchy.leaves().map((function(t){var r,n=t.data;return[n.name,null===(r=e.MSA)||void 0===r?void 0:r.getRow(n.name)]})).filter((function(e){return!!e[1]})),r=t.map((function(e){return e[1]})),n=[],o=0;o<r.length;o++){for(var a="",i=0,l=0;l<r[o].length;l++)l===this.blanks[i]?i++:a+=r[o][l];n.push(a)}return Object.fromEntries(t.map((function(e,t){return[e[0],n[t]]})))},get hierarchy(){var t=C(this.tree);return(0,a.cluster)().size([this.totalHeight,e.treeWidth]).separation((function(){return 1}))(t),L(t,t.data.length=0,e.treeWidth/T(t)),t},get totalHeight(){return this.root.leaves().length*e.rowHeight}}}))).actions((function(e){return{doScrollY:function(t){e.scrollY=I(10-e.totalHeight,e.scrollY+t,10)},doScrollX:function(t){e.scrollX=I(-e.numColumns+(e.msaAreaWidth-100),e.scrollX+t,0)},setMouseoveredColumn:function(t,r,n){var o,a=0,i=0,l=(e.inverseStructures[n.slice(0,-4)]||{}).id,u=null===(o=e.MSA)||void 0===o?void 0:o.getRow(l);if(u){for(i=0;i<u.length&&a<t;i++)"-"!==u[i]&&a++;e.mouseCol=a+1}else e.mouseCol=void 0}}})),{postProcessor:function(e){e.data;return j(e,v)}});t.default=x},612:function(e,t,r){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var l=o?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(r,i,l):r[i]=e[i]}r.default=e,t&&t.set(e,r);return r}(r(622));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){var r,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=void 0,(n="MSA")in(r=this)?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,this.MSA=o.parse(t)}var t,r,n;return t=e,(r=[{key:"getMSA",value:function(){return this.MSA}},{key:"getRow",value:function(e){var t;return null===(t=this.MSA.alns.find((function(t){return t.id===e})))||void 0===t?void 0:t.seq.split("")}},{key:"getWidth",value:function(){return this.MSA.alns[0].seq.length}},{key:"getDetails",value:function(){return this.MSA.header}},{key:"getNames",value:function(){return this.MSA.alns.map((function(e){return e.id}))}},{key:"getStructures",value:function(){return{}}},{key:"alignmentNames",get:function(){return[]}},{key:"getTree",value:function(){return{id:"root",noTree:!0,branchset:this.getNames().map((function(e){return{id:e,name:e}}))}}}])&&i(t.prototype,r),n&&i(t,n),e}();t.default=l},613:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(r(378)),o=l(r(379)),a=r(168),i=["id"];function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"data",void 0),d(this,"MSA",void 0);var o=n.default.parseAll(t);this.data=o,this.MSA=o[r]}var t,r,l;return t=e,(r=[{key:"getMSA",value:function(){return this.MSA}},{key:"getRow",value:function(e){var t,r;return null===(t=this.MSA)||void 0===t||null===(r=t.seqdata[e])||void 0===r?void 0:r.split("")}},{key:"getWidth",value:function(){var e,t=Object.keys(null===(e=this.MSA)||void 0===e?void 0:e.seqdata)[0];return this.getRow(t).length}},{key:"alignmentNames",get:function(){return this.data.map((function(e,t){var r;return(null===(r=e.gf.DE)||void 0===r?void 0:r[0])||"Alignment ".concat(t+1)}))}},{key:"getDetails",value:function(){return this.MSA.gf}},{key:"getNames",value:function(){return Object.keys(this.MSA.seqdata)}},{key:"getSeqCoords",value:function(){}},{key:"getStructures",value:function(){var e,t=/PDB; +(\S+) +(\S); ([0-9]+)-([0-9]+)/,r=this.MSA;return Object.entries((null===(e=r.gs)||void 0===e?void 0:e.DR)||{}).map((function(e){var r=c(e,2),n=r[0],o=r[1];return[n,t.exec(o)]})).filter((function(e){return!!e[1]})).map((function(e){var t=c(e,2),r=t[0],n=t[1];return{id:r,pdb:n[1].toLowerCase(),chain:n[2],startPos:+n[3],endPos:+n[4]}})).reduce((function(e,t){var r=t.id,n=u(t,i);return e[r]||(e[r]=[]),e[r].push(n),e}),{})}},{key:"getTree",value:function(){var e,t,r,n=null===(e=this.MSA)||void 0===e||null===(t=e.gf)||void 0===t||null===(r=t.NH)||void 0===r?void 0:r[0];return n?(0,a.generateNodeIds)((0,o.default)(n)):{id:"root",noTree:!0,branchset:this.getNames().map((function(e){return{id:e,name:e}}))}}}])&&s(t.prototype,r),l&&s(t,l),e}();t.default=m},614:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=void 0,(n="MSA")in(r=this)?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o;var a={},i="",l=/^>(\S+)/;t.split("\n").forEach((function(e){var t=l.exec(e);t?a[i=t[1]]="":i&&(a[i]=a[i]+e.replace(/[ \t]/g,""))})),this.MSA={seqdata:a}}var t,r,o;return t=e,(r=[{key:"getMSA",value:function(){return this.MSA}},{key:"getNames",value:function(){return Object.keys(this.MSA.seqdata)}},{key:"getRow",value:function(e){var t,r;return null===(t=this.MSA)||void 0===t||null===(r=t.seqdata[e])||void 0===r?void 0:r.split("")}},{key:"getWidth",value:function(){var e,t=Object.keys(null===(e=this.MSA)||void 0===e?void 0:e.seqdata)[0];return this.getRow(t).length}},{key:"getStructures",value:function(){return{}}},{key:"alignmentNames",get:function(){return[]}},{key:"getDetails",value:function(){return{}}},{key:"getTree",value:function(){return{id:"root",noTree:!0,branchset:this.getNames().map((function(e){return{id:e,name:e}}))}}}])&&n(t.prototype,r),o&&n(t,o),e}();t.default=o},621:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(18),i=r.n(a),l=(r(407),r(30)),u=r(38),c=r(248),f=r(247),s=r(651),d=r(386),m=r(33),p=r.n(m),h=r(387),b=r(8),y=r(81),v=r(191),g=r(91),S=r(253),w=r(187),E=r(32);w.a.add("data",new w.c("https://files.rcsb.org/download/"));var O=Object(l.observer)((function(e){var t=e.model,r=Object(n.useState)("cartoon"),o=Object(b.a)(r,2),a=o[0],i=o[1],l=Object(n.useState)([]),u=Object(b.a)(l,2),c=u[0],f=u[1],s=Object(n.useState)(),d=Object(b.a)(s,2),m=d[0],O=d[1],A=Object(n.useState)(),P=Object(b.a)(A,2),M=P[0],j=P[1],L=Object(n.useState)(!1),T=Object(b.a)(L,2),C=T[0],k=T[1],I=t.msaview,R=t.nglSelection,x=I.selectedStructures,D=I.mouseCol;console.log(I.getMouseOverResidue(3));var _=Object(n.useCallback)((function(e){if(e){var t=new w.b(e);j(t)}}),[]);return Object(n.useEffect)((function(){return function(){M&&M.dispose()}}),[M]),Object(n.useEffect)((function(){x.length&&M&&Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("resize",(function(){M.handleResize()})),e.next=3,Promise.all(x.map((function(e){return M.loadFile("data://".concat(e.structure.pdb,".pdb"))})));case 3:t=e.sent,f(t),M.signals.hovered.add((function(e){if(e&&(e.atom||e.bond)){var t=e.atom||e.closestBondAtom;I.setMouseoveredColumn(t.resno-x[0].structure.startPos,t.chainname,e.picker.structure.name)}}));case 6:case"end":return e.stop()}}),e)})))()}),[JSON.stringify(x),M]),Object(n.useEffect)((function(){M&&(c.forEach((function(e){e.removeAllRepresentations(),e.addRepresentation(a,{sele:R})})),M.autoView())}),[a,c,M,R]),Object(n.useEffect)((function(){if(!C){var e=[];c.forEach((function(t,r){if(m&&t.removeAnnotation(m[r]),void 0!==D){for(var n,o=x[0].structure.startPos,a=t.structure.residueStore.count,i=t.structure.getResidueProxy(),l=0;l<a;++l)if(i.index=l,i.resno===D+o-1){n=i;break}if(n){var u=t.structure.getAtomProxy();u.index=n.atomOffset,e.push(t.addAnnotation(u.positionToVector3(),n.qualifiedName()))}}M.viewer.requestRender()})),O(e)}}),[t,D,C]),x.length?Object(E.jsxs)("div",{style:{padding:20},children:[Object(E.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(E.jsx)(y.a,{onClick:function(){return I.clearSelection()},variant:"contained",children:"Clear"}),Object(E.jsx)("div",{style:{width:20}}),Object(E.jsxs)(v.a,{value:a,onChange:function(e){return i(e.target.value)},children:[Object(E.jsx)(g.a,{value:"cartoon",children:"cartoon"}),Object(E.jsx)(g.a,{value:"ball+stick",children:"ball+stick"})]}),Object(E.jsx)("div",{style:{width:20}}),Object(E.jsx)(S.a,{variant:"outlined",label:"Selection",value:R,onChange:function(e){return t.setNGLSelection(e.target.value)}})]}),Object(E.jsx)("div",{ref:_,style:{width:600,height:400},onMouseEnter:function(){return k(!0)},onMouseLeave:function(){return k(!1)}})]}):null})),A=new URLSearchParams(window.location.search).get("data"),P=u.types.model({msaview:c.MSAModel,nglSelection:u.types.optional(u.types.string,"")}).actions((function(e){return{setNGLSelection:function(t){e.nglSelection=t}}})).create(A?JSON.parse(A):{msaview:{type:"MsaView"}});P.msaview.setWidth(window.innerWidth),Object(u.onSnapshot)(P,Object(d.throttle)((function(e){var t=new URL(window.document.URL);t.searchParams.set("data",JSON.stringify(e)),window.history.replaceState(null,"",t.toString())}),500)),window.addEventListener("resize",(function(){P.msaview.setWidth(window.innerWidth)}));var M=Object(l.observer)((function(e){var t=e.model,r=t.msaview;return Object(E.jsxs)("div",{children:[Object(E.jsx)("div",{style:{border:"1px solid black",margin:20},children:Object(E.jsx)(c.MSAView,{model:r})}),Object(E.jsx)(O,{model:t})]})})),j=function(){var e=Object(f.createJBrowseTheme)();return Object(E.jsx)(s.a,{theme:e,children:Object(E.jsx)(M,{model:P})})},L=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,663)).then((function(t){var r=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;r(e),n(e),o(e),a(e),i(e)}))};i.a.render(Object(E.jsx)(o.a.StrictMode,{children:Object(E.jsx)(j,{})}),document.getElementById("root")),L()}},[[621,1,2]]]);
//# sourceMappingURL=main.ad00c183.chunk.js.map