(this.webpackJsonpapp2=this.webpackJsonpapp2||[]).push([[0],{382:function(e){e.exports=JSON.parse('{"a":"1.2.9"}')},406:function(e,t,n){},455:function(e,t){},601:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(19),i=n.n(a),l=(n(406),n(14)),c=n(8),s=n(114),u=n(639),f=n(635),d=n(638),m=n(74),h=n(7),v=n(131),p=function(e){var t=e.onClick,n=e.model,r=e.children;return o.a.createElement("li",null,o.a.createElement(u.a,{onClick:function(){n.setError(void 0),t()},href:"#"},o.a.createElement(s.a,null,r)))},b=Object(l.observer)((function(e){var t=e.model,n=Object(r.useState)(),a=n[0],i=n[1],l=Object(r.useState)(),c=l[0],u=l[1],b=t.error;return o.a.createElement(f.a,null,o.a.createElement("div",{style:{width:"50%"}},b?o.a.createElement("div",{style:{padding:20}},o.a.createElement(s.a,{color:"error"},"Error: ",""+b)):null,o.a.createElement(s.a,null,"Open an MSA file (stockholm or clustal format) and/or a tree file (newick format)."),o.a.createElement(s.a,{color:"error"},"Note: you can open up just an MSA or just a tree, both are not required. Some MSA files e.g. stockholm format have an embedded tree also and this is fine, and opening a separate tree file is not required.")),o.a.createElement(d.a,{container:!0,spacing:10,justifyContent:"center",alignItems:"center"},o.a.createElement(d.a,{item:!0},o.a.createElement(s.a,null,"MSA file or URL"),o.a.createElement(v.FileSelector,{location:a,setLocation:i}),o.a.createElement(s.a,null,"Tree file or URL"),o.a.createElement(v.FileSelector,{location:c,setLocation:u})),o.a.createElement(d.a,{item:!0},o.a.createElement(m.a,{onClick:function(){t.setError(void 0),a&&t.setMSAFilehandle(a),c&&t.setTreeFilehandle(c)},variant:"contained",color:"primary",disabled:!a&&!c},"Open")),o.a.createElement(d.a,{item:!0},o.a.createElement(s.a,null,"Examples"),o.a.createElement("ul",null,o.a.createElement(p,{model:t,onClick:function(){t.setTreeFilehandle({uri:"https://jbrowse.org/genomes/newick_trees/sarscov2phylo.pub.ft.nh"})}},"230k COVID-19 samples (tree only)"),o.a.createElement(p,{model:t,onClick:function(){t.setData({msa:"CLUSTAL O(1.2.3) multiple sequence alignment\nUniProt/Swiss-Prot|P26898|IL2RA_SHEEP      MEPSLLMWRFFVFIVVPGCVTEACHDDPPSLRNA----------MFKVLRYE----VGTM\nUniProt/Swiss-Prot|P01590|IL2RA_MOUSE      MEPRLLMLGFLSLTIVPSCRAELCLYDPPEVPNA----------TFKALSYK----NGTI\nUniProt/Swiss-Prot|P41690|IL2RA_FELCA      MEPSLLLWGILTFVVVHGHVTELCDENPPDIQHA----------TFKALTYK----TGTM\nUniProt/Swiss-Prot|P01589|IL2RA_HUMAN      MDSYLLMWGLLTFIMVPGCQAELCDDDPPEIPHA----------TFKAMAYK----EGTM\nUniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU      MDPYLLMWGLLTFITVPGCQAELCDDDPPKITHA----------TFKAVAYK----EGTM\nUniProt/Swiss-Prot|Q95118|IL2RG_BOVIN      -----------------------------------LLMWGLLT-----------------\nUniProt/Swiss-Prot|P40321|IL2RG_CANFA      MLKPPLPLRSLLFLQLSLLGVGLNSTVPMPNGNEDIT------PDFFLTATPSETLSVSS\nUniProt/Swiss-Prot|P26896|IL2RB_RAT        MATVDLSWRLPLYILLLLLATT--------------------------------WVSAAV\nUniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE       PLPLRSLLFLQLPLLGVGLNP------------------PLPLRSLLFLQLPLLGVGLNP\nUniProt/Swiss-Prot|P36835|IL2_CAPHI        -----------LLGVGLNPKFLTP------------------------------------\nUniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO        MLKPPLPLRSLLFLQLPLLGVGLNPKFLTPSGNEDIGGKPGTGGDFFLTSTPAGTLDVST\nUniProt/Swiss-Prot|Q29416|IL2_CANFA        --------------LFLQLSLLG-------------------------------------\n",tree:"(((UniProt/Swiss-Prot|P26898|IL2RA_SHEEP:0.24036,(UniProt/Swiss-Prot|P41690|IL2RA_FELCA:0.17737,(UniProt/Swiss-Prot|P01589|IL2RA_HUMAN:0.03906,UniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU:0.03787):0.13033):0.04964):0.02189,UniProt/Swiss-Prot|P01590|IL2RA_MOUSE:0.23072):0.06814,(((UniProt/Swiss-Prot|Q95118|IL2RG_BOVIN:0.09600,UniProt/Swiss-Prot|P40321|IL2RG_CANFA:0.09845):0.25333,UniProt/Swiss-Prot|Q29416|IL2_CANFA:-0.35055):0.10231,(UniProt/Swiss-Prot|P26896|IL2RB_RAT:0.33631,UniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO:-0.33631):0.10166):0.01607,(UniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE:0.32378,UniProt/Swiss-Prot|P36835|IL2_CAPHI:-0.32378):0.09999)"})}},"Small protein MSA+tree"),o.a.createElement(p,{model:t,onClick:function(){t.setData({msa:"CLUSTAL O(1.2.4) multiple sequence alignment\n\n\nsp|P69905|HBA_HUMAN       MVLSPADKTNVKAAWGKVGAHAGEYGAEALERMFLSFPTTKTYFPHFDLSHGSAQVKGHG\t60\nsp|P01942|HBA_MOUSE       MVLSGEDKSNIKAAWGKIGGHGAEYGAEALERMFASFPTTKTYFPHFDVSHGSAQVKGHG\t60\nsp|P13786|HBAZ_CAPHI      MSLTRTERTIILSLWSKISTQADVIGTETLERLFSCYPQAKTYFPHFDLHSGSAQLRAHG\t60\n                          * *:  ::: : : *.*:. :.   *:*:***:* .:* :********:  ****::.**\n\nsp|P69905|HBA_HUMAN       KKVADALTNAVAHVDDMPNALSALSDLHAHKLRVDPVNFKLLSHCLLVTLAAHLPAEFTP\t120\nsp|P01942|HBA_MOUSE       KKVADALASAAGHLDDLPGALSALSDLHAHKLRVDPVNFKLLSHCLLVTLASHHPADFTP\t120\nsp|P13786|HBAZ_CAPHI      SKVVAAVGDAVKSIDNVTSALSKLSELHAYVLRVDPVNFKFLSHCLLVTLASHFPADFTA\t120\n                          .**. *: .*.  :*:: .*** **:***: *********:**********:* **:**\n\nsp|P69905|HBA_HUMAN       AVHASLDKFLASVSTVLTSKYR\t142\nsp|P01942|HBA_MOUSE       AVHASLDKFLASVSTVLTSKYR\t142\nsp|P13786|HBAZ_CAPHI      DAHAAWDKFLSIVSGVLTEKYR\t142\n                           .**: ****: ** ***.***"})}},"Small MSA only"),o.a.createElement(p,{model:t,onClick:function(){t.setMSAFilehandle({uri:"https://ihh.github.io/abrowse/build/pfam-cov2.stock"})}},"PFAM SARS-CoV2 multi-stockholm"),o.a.createElement(p,{model:t,onClick:function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/Lysine.stock"})}},"Lysine stockholm file"),o.a.createElement(p,{model:t,onClick:function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/PF01601_full.txt"})}},"PF01601 stockholm file (SARS-CoV2 spike protein)"),o.a.createElement(p,{model:t,onClick:function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/europe_covid.fa"})}},"Europe COVID full genomes (LR883044.1 and 199 other sequences)"),o.a.createElement(p,{model:t,onClick:function(){Object(h.transaction)((function(){t.setMSAFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.fa"}),t.setTreeFilehandle({uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.nh"})}))}},"MAFFT+VeryFastTree(17.9k samples)")))))})),g=n(330),E=n(9),S=n(250),y=n(617),w=n(178),O=n.n(w),A=Object(g.a)((function(e){return{rubberband:{height:"100%",background:e.palette.tertiary?Object(E.a)(e.palette.tertiary.main,.7):Object(E.a)(e.palette.primary.main,.7),position:"absolute",zIndex:10,textAlign:"center",overflow:"hidden"},rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8},rubberbandText:{color:e.palette.tertiary?e.palette.tertiary.contrastText:e.palette.primary.contrastText},popover:{mouseEvents:"none",cursor:"crosshair"},paper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",zIndex:10}}})),L=Object(l.observer)((function(e){var t=e.model,n=e.coordX,r=t.treeAreaWidth,a=A();return o.a.createElement(o.a.Fragment,null,o.a.createElement(S.a,{open:!0,placement:"top",title:""+(t.pxToBp(n)+1),arrow:!0},o.a.createElement("div",{style:{left:n+r,position:"absolute",height:1}})),o.a.createElement("div",{className:a.guide,style:{left:n+r,background:"red"}}))}));var j=Object(l.observer)((function(e){var t=e.model,n=e.ControlComponent,a=void 0===n?o.a.createElement("div",null):n,i=t.treeAreaWidth,l=Object(r.useState)(),c=l[0],u=l[1],f=Object(r.useState)(),d=f[0],m=f[1],h=Object(r.useState)(),p=h[0],b=h[1],g=Object(r.useState)(),E=g[0],S=g[1],w=Object(r.useRef)(null),j=Object(r.useRef)(null),C=A(),P=void 0!==c&&void 0===p;function T(e){e.preventDefault(),e.stopPropagation();var t=e.clientX-e.target.getBoundingClientRect().left;u(t),m(t)}function M(e){var t=e.target;S(e.clientX-t.getBoundingClientRect().left)}function R(){S(void 0),t.clearAnnotPos()}function k(){b(void 0),u(void 0),m(void 0)}if(Object(r.useEffect)((function(){function e(e){if(w.current&&P){var t=e.clientX-w.current.getBoundingClientRect().left;m(t)}}function t(e){if(void 0!==c&&w.current){var t=e.clientX,n=e.clientY,r=t-w.current.getBoundingClientRect().left;b({offsetX:r,clientX:t,clientY:n}),S(void 0)}}return P?(window.addEventListener("mousemove",e),window.addEventListener("mouseup",t),function(){window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}):function(){}}),[c,P,p]),Object(r.useEffect)((function(){!P&&void 0!==d&&void 0!==c&&Math.abs(d-c)<=3&&k()}),[P,d,c,t.colWidth]),void 0===c)return o.a.createElement(o.a.Fragment,null,void 0!==E?o.a.createElement(L,{model:t,coordX:E}):null,o.a.createElement("div",{"data-testid":"rubberband_controls",className:C.rubberbandControl,role:"presentation",ref:w,onMouseDown:T,onMouseOut:R,onMouseMove:M},a));var x=p?p.offsetX:d||0,N=x<c?x:c,D=Math.abs(x-c),F=t.pxToBp(N),I=t.pxToBp(N+D),H=Math.ceil(D/t.colWidth),Y=[{label:"Create annotation",icon:O.a,onClick:function(){t.setOffsets(F,I),k()}}];return o.a.createElement(o.a.Fragment,null,j.current?o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{className:C.popover,classes:{paper:C.paper},open:!0,anchorEl:j.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,disableRestoreFocus:!0},o.a.createElement(s.a,null,F+1)),o.a.createElement(y.a,{className:C.popover,classes:{paper:C.paper},open:!0,anchorEl:j.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,disableRestoreFocus:!0},o.a.createElement(s.a,null,I+1))):null,o.a.createElement("div",{ref:j,className:C.rubberband,style:{left:N+i,width:D}},o.a.createElement(s.a,{variant:"h6",className:C.rubberbandText},H.toLocaleString("en-US")," bp")),o.a.createElement("div",{"data-testid":"rubberband_controls",className:C.rubberbandControl,role:"presentation",ref:w,onMouseDown:T,onMouseOut:R,onMouseMove:M},a),p?o.a.createElement(v.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:p.clientX,top:p.clientY},onMenuItemClick:function(e,t){t(),k()},open:Boolean(p),onClose:k,menuItems:Y}):null)})),C=n(376),P=n(71),T=n(111),M=n.n(T),R=n(179),k=n.n(R),x=n(333),N=n(337),D=n(335),F=n(180),I=Object(l.observer)((function(e){var t=e.info,n=e.onClose;return o.a.createElement(x.a,{onClose:function(){return n()},open:!0},o.a.createElement(N.a,null,"Metadata"),o.a.createElement(D.a,null,o.a.createElement(F.Attributes,{attributes:t})))})),H=function(){return(H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Y=3.5,V=600,W=Object(l.observer)((function(e){var t,n,r=e.node,a=e.onClose,i=e.model,l=i.structures,c=r?i.getRowDetails(r.name):void 0;return o.a.createElement(o.a.Fragment,null,o.a.createElement(C.a,{anchorReference:"anchorPosition",anchorPosition:{top:r.y,left:r.x},transitionDuration:0,keepMounted:!0,open:Boolean(r),onClose:a},o.a.createElement(P.a,{dense:!0,disabled:!0},r.name),o.a.createElement(P.a,{dense:!0,onClick:function(){i.setDialogComponent(I,{info:i.getRowDetails(r.name)}),a()}},"More info..."),null===(t=l[r.name])||void 0===t?void 0:t.map((function(e){return i.selectedStructures.find((function(e){return e.id===r.name}))?o.a.createElement(P.a,{key:JSON.stringify(e),dense:!0,onClick:function(){i.removeStructureFromSelection({structure:e,id:r.name}),a()}},"Remove PDB from selection (",e.pdb,")"):o.a.createElement(P.a,{key:JSON.stringify(e),dense:!0,onClick:function(){i.addStructureToSelection({structure:e,id:r.name}),a()}},"Add PDB to selection (",e.pdb,")")})),null===(n=c.accession)||void 0===n?void 0:n.map((function(e){return o.a.createElement(P.a,{dense:!0,key:e,onClick:function(){i.addUniprotTrack({name:c.name,accession:e}),a()}},"Open UniProt track (",e,")")}))))})),G=Object(l.observer)((function(e){var t=e.node,n=e.model,r=e.onClose;return o.a.createElement(C.a,{anchorReference:"anchorPosition",anchorPosition:{left:t.x,top:t.y},transitionDuration:0,keepMounted:!0,open:Boolean(t),onClose:r},o.a.createElement(P.a,{dense:!0,disabled:!0},t.name),o.a.createElement(P.a,{dense:!0,onClick:function(){n.toggleCollapsed(t.id),r()}},n.collapsed.includes(t.id)?"Expand this node":"Collapse this node"),o.a.createElement(P.a,{dense:!0,onClick:function(){n.showOnly===t.id?n.setShowOnly(void 0):n.setShowOnly(t.id),r()}},n.showOnly===t.id?"Disable show only this node":"Show only this node"))})),X=Object(l.observer)((function(e){var t=e.model,n=e.offsetY,a=Object(r.useRef)(null),i=Object(r.useRef)(new k.a),l=Object(r.useRef)(null),c=Object(r.useState)(),s=c[0],u=c[1],f=Object(r.useState)(),d=f[0],m=f[1],h=Object(r.useState)(),v=h[0],p=h[1],b=t.hierarchy,g=t.rowHeight,E=t.scrollY,S=t.treeWidth,y=t.showBranchLen,w=t.collapsed,O=t.margin,A=t.labelsAlignRight,L=t.noTree,j=t.blockSize,C=t.drawNodeBubbles,P=t.drawTree,T=t.treeAreaWidth,M=t.structures,R=t.highResScaleFactor;function x(e){var t=e.nativeEvent.offsetX-O.left,r=e.nativeEvent.offsetY,o=i.current.search({minX:t,maxX:t+1,minY:r+n,maxY:r+1+n})[0];return o&&o.branch?H(H({},o),{x:e.clientX,y:e.clientY}):void 0}function N(e){var t=e.nativeEvent.offsetX-O.left,r=e.nativeEvent.offsetY,o=i.current.search({minX:t,maxX:t+1,minY:r+n,maxY:r+1+n})[0];return o&&!o.branch?H(H({},o),{x:e.clientX,y:e.clientY}):void 0}return Object(r.useEffect)((function(){if(i.current.clear(),a.current){var e=a.current.getContext("2d");if(e){e.resetTransform(),e.scale(R,R),e.clearRect(0,0,S+V,j),e.translate(O.left,-n);var t=e.font;e.font=t.replace(/\d+px/,Math.max(8,g-8)+"px"),!L&&P&&(b.links().forEach((function(t){var r=t.source,o=t.target,a=y?"len":"y",i=r,l=i.x,c=i[a],s=o,u=s.x,f=s[a],d=Math.min(l,u),m=Math.max(l,u);n+j>=d&&m>=n&&(e.beginPath(),e.moveTo(c,l),e.lineTo(c,u),e.lineTo(f,u),e.stroke())})),C&&b.descendants().forEach((function(t){var r=y?"len":"y",o=t,a=o.x,l=o[r],c=o.data,s=c.id,u=void 0===s?"":s,f=c.name,d=void 0===f?"":f;a>n-5&&a<n+j+5&&(e.strokeStyle="black",e.fillStyle=w.includes(u)?"black":"white",e.beginPath(),e.arc(l,a,Y,0,2*Math.PI),e.fill(),e.stroke(),i.current.insert({minX:l-Y,maxX:l-Y+7,minY:a-Y,maxY:a-Y+7,branch:!0,id:u,name:d}))}))),g>=10&&(A?(e.textAlign="right",e.setLineDash([1,3])):e.textAlign="start",b.leaves().forEach((function(t){var r=t.x,o=t.y,a=t.data,l=a.name,c=a.id,s=t.len;if(r>n-5&&r<n+j+5){var u=r+g/4,f=y?s:o,d=e.measureText(l).width,m=e.measureText("M").width,h=M[l];if(e.fillStyle=h?"blue":"black",P||A)if(A){var v=T-2-O.left;if(P&&!L){var p=e.measureText(l).width;e.moveTo(f+Y+2,r),e.lineTo(v-2-p,r),e.stroke()}e.fillText(l,v,u),i.current.insert({minX:T-O.left-d,maxX:T-O.left,minY:u-m,maxY:u,name:l,id:c})}else e.fillText(l,f+7,u),i.current.insert({minX:f+7,maxX:f+7+d,minY:u-m,maxY:u,name:l,id:c});else e.fillText(l,0,u),i.current.insert({minX:0,maxX:d,minY:u-m,maxY:u,name:l,id:c})}})),e.setLineDash([]))}}}),[w,g,O.left,b,n,S,y,L,j,C,P,A,T,M]),Object(r.useEffect)((function(){var e=l.current;if(e){var t=e.getContext("2d");if(t&&(t.resetTransform(),t.clearRect(0,0,S+V,j),t.translate(O.left,-n),v)){var r=v.minX,o=v.maxX,a=v.minY,i=v.maxY;t.fillStyle="rgba(0,0,0,0.1)",t.fillRect(r,a,o-r,i-a)}}}),[v,O.left,n,j,S]),o.a.createElement(o.a.Fragment,null,(null===s||void 0===s?void 0:s.id)?o.a.createElement(G,{node:s,model:t,onClose:function(){return u(void 0)}}):null,(null===d||void 0===d?void 0:d.id)?o.a.createElement(W,{node:d,model:t,onClose:function(){return m(void 0)}}):null,o.a.createElement("canvas",{width:(S+V)*R,height:j*R,style:{width:S+V,height:j,top:E+n,left:0,position:"absolute"},onMouseMove:function(e){if(a.current){var t=N(e)||x(e);a.current.style.cursor=t?"pointer":"default",p(N(e))}},onClick:function(e){var t=e.clientX,n=e.clientY,r=x(e);(null===r||void 0===r?void 0:r.id)&&u(H(H({},r),{x:t,y:n}));var o=N(e);(null===o||void 0===o?void 0:o.id)&&m(H(H({},o),{x:t,y:n}))},ref:a}),o.a.createElement("canvas",{style:{width:S+V,height:j,top:E+n,left:0,position:"absolute",pointerEvents:"none",zIndex:100},width:S+V,height:j,ref:l}))})),B=Object(l.observer)((function(e){var t=e.model,n=Object(r.useRef)(null),a=Object(r.useRef)(!1),i=Object(r.useRef)(0),l=Object(r.useRef)(0),c=t.treeWidth,s=t.height,u=t.blocksY,f=Object(r.useState)(!1),d=f[0],m=f[1];return Object(r.useEffect)((function(){var e=n.current;if(e)return e.addEventListener("wheel",r),function(){e.removeEventListener("wheel",r)};function r(e){var n=M()(e);i.current+=n.pixelY,a.current||(a.current=!0,requestAnimationFrame((function(){t.doScrollY(-i.current),i.current=0,a.current=!1}))),e.preventDefault()}}),[t]),Object(r.useEffect)((function(){var e=function(){};function n(e){e.preventDefault();var n=e.clientY-l.current;n&&(a.current||(a.current=!0,window.requestAnimationFrame((function(){t.doScrollY(n),a.current=!1,l.current=e.clientY}))))}function r(){l.current=0,d&&m(!1)}return d&&(window.addEventListener("mousemove",n,!0),window.addEventListener("mouseup",r,!0),e=function(){window.removeEventListener("mousemove",n,!0),window.removeEventListener("mouseup",r,!0)}),e}),[t,d]),o.a.createElement("div",{ref:n,onMouseDown:function(e){var t=e.target;t.draggable||t.dataset.resizer||0===e.button&&(l.current=e.clientY,m(!0))},onMouseUp:function(e){e.preventDefault(),m(!1)},onMouseLeave:function(e){e.preventDefault()},style:{height:s,position:"relative",overflow:"hidden",width:c+V}},u.map((function(e){return o.a.createElement(X,{key:e,model:t,offsetY:e})})))})),U=n(20),_=n(606),K=n(130),q=n.n(K),z=function(){return(z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Q(e,t){return Object.fromEntries(Object.entries(e).map(t))}function J(e,t,n){var r;void 0===t&&(t="node"),void 0===n&&(n=0);var o=t+"-"+n;return z(z({},e),{id:o,branchset:(null===(r=e.branchset)||void 0===r?void 0:r.map((function(e,t){return J(e,o+"-"+t,n+1)})))||[]})}function Z(e,t){return Q(e,(function(e){var n=e[0],r=e[1];return[n,t.palette.getContrastText(q()(r).hex())]}))}var $=Q({clustal:{G:"orange",P:"orange",S:"orange",T:"orange",H:"red",K:"red",R:"red",F:"blue",W:"blue",Y:"blue",I:"green",L:"green",M:"green",V:"green"},lesk:{G:"orange",A:"orange",S:"orange",T:"orange",C:"green",V:"green",I:"green",L:"green",P:"green",F:"green",Y:"green",M:"green",W:"green",N:"magenta",Q:"magenta",H:"magenta",D:"red",E:"red",K:"blue",R:"blue"},maeditor:{A:"lightgreen",G:"lightgreen",C:"green",D:"darkgreen",E:"darkgreen",N:"darkgreen",Q:"darkgreen",I:"blue",L:"blue",M:"blue",V:"blue",F:"#c8a2c8",W:"#c8a2c8",Y:"#c8a2c8",H:"darkblue",K:"orange",R:"orange",P:"pink",S:"red",T:"red"},percent_identity_dynamic:{},flower:{A:"#b18a51",C:"#ff5701",D:"#01a578",E:"#2da0a1",F:"#fa559d",G:"#b1c23c",H:"#0194f9",I:"#f27663",K:"#7fc3d7",L:"#df6e75",M:"#fe9daf",N:"#0bcec6",P:"#4fa32a",Q:"#7295ae",R:"#83bff1",S:"#b4bd9b",T:"#d2b576",V:"#fd997b",W:"#ff2ded",Y:"#c96ecf"},rainbow_dna:{A:"#3737f5",C:"#37f537",G:"#f5f537",T:"#f53737",U:"#f53737"},clustalx_protein:{A:"#197fe5",C:"#e57f7f",D:"#cc4ccc",E:"#cc4ccc",F:"#197fe5",G:"#e5994c",H:"#19b2b2",I:"#197fe5",K:"#e53319",L:"#197fe5",M:"#197fe5",N:"#19cc19",P:"#cccc00",Q:"#19cc19",R:"#e53319",S:"#19cc19",T:"#19cc19",V:"#197fe5",W:"#197fe5",Y:"#19b2b2"},clustalx_protein_dynamic:{},clustalx_dna:{A:"#e53319",C:"#197fe5",G:"#e5994c",T:"#19cc19",U:"#19cc19"},jalview_buried:{A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},jalview_hydrophobicity:{A:"#ad0052",R:"#0000ff",N:"#0c00f3",D:"#0c00f3",C:"#c2003d",Q:"#0c00f3",E:"#0c00f3",G:"#6a0095",H:"#1500ea",I:"#ff0000",L:"#ea0015",K:"#0000ff",M:"#b0004f",F:"#cb0034",P:"#4600b9",S:"#5e00a1",T:"#61009e",W:"#5b00a4",Y:"#4f00b0",V:"#f60009",B:"#0c00f3",X:"#680097",Z:"#0c00f3"},jalview_prophelix:{A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},jalview_propstrand:{A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},jalview_propturn:{A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},jalview_taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00"},jalview_zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf"},cinema:{H:"blue",K:"blue",R:"blue",D:"red",E:"red",S:"green",T:"green",N:"green",Q:"green",A:"white",V:"white",L:"white",I:"white",M:"white",F:"magenta",W:"magenta",Y:"magenta",P:"brown",G:"brown",C:"yellow",B:"gray",Z:"gray",X:"gray","-":"gray",".":"gray"}},(function(e){return[e[0],Q(e[1],(function(e){var t=e[0],n=e[1];return[t,q()(n).hex()]}))]}));function ee(e,t,n,r){var o=Object.values(e).reduce((function(e,t){return e+t}),0),a=t.columns[n][r],i=e.W,l=void 0===i?0:i,c=e.L,s=void 0===c?0:c,u=e.V,f=void 0===u?0:u,d=e.I,m=void 0===d?0:d,h=e.M,v=void 0===h?0:h,p=e.A,b=void 0===p?0:p,g=e.F,E=void 0===g?0:g,S=e.C,y=void 0===S?0:S,w=e.H,O=void 0===w?0:w,A=e.P,L=void 0===A?0:A,j=e.R,C=void 0===j?0:j,P=e.K,T=void 0===P?0:P,M=e.Q,R=void 0===M?0:M,k=e.E,x=void 0===k?0:k,N=e.D,D=void 0===N?0:N,F=e.T,I=void 0===F?0:F,H=e.S,Y=void 0===H?0:H,V=e.G,W=void 0===V?0:V,G=e.Y,X=void 0===G?0:G,B=e.N,U=l+s+f+m+v+b+E+y+O+L+X,_=T+C,K=R+x;return U/o>.6&&("W"===a||"L"===a||"V"===a||"A"===a||"I"===a||"M"===a||"F"===a||"C"===a)?"rgb(128,179,230)":"K"!==a&&"R"!==a||!(_/o>.6||T/o>.8||C/o>.8||R/o>.8)?"E"===a&&(_/o>.6||K/o>.5||x/o>.8||R/o>.8||D/o>.8)?"rgb(192, 72, 192)":"D"===a&&(_/o>.6||(x+D)/o>.5||T/o>.8||C/o>.8||R/o>.8)?"rgb(204, 77, 204)":"N"===a&&((void 0===B?0:B)/o>.5||X/o>.85)||"Q"===a&&(_/o>.6||K/o>.6||R/o>.85||x/o>.85||T/o>.85||C/o>.85)?"#8f8":"S"!==a&&"T"!==a||!(U/o>.6||(I+Y)/o>.5||Y/o>.85||I/o>.85)?"C"===a&&y/o>.85?"rgb(240, 128, 128)":"G"===a&&W/o>0?"rgb(240, 144, 72)":"P"===a&&L/o>0?"rgb(204, 204, 0)":"H"!==a&&"Y"!==a||!(U/o>.6||l>.85||X>.85||b>.85||y>.85||L>.85||R>.85||E>.85||O>.85||m>.85||s>.85||v>.85||f>.85)?void 0:"rgb(26, 179, 179)":"rgb(26,204,26)":"#d88"}function te(e,t,n,r){for(var o=Object.values(e).reduce((function(e,t){return e+t}),0),a=t.columns[n][r],i=Object.entries(e),l=0,c="",s=0;s<i.length;s++)i[s][1]>l&&"-"!==i[s][0]&&(c=i[s][0],l=i[s][1]);var u=l/o,f="hsl(240, 30%, "+100*Math.max(1-l/o/3,.3)+"%)";if(u>.4&&a===c)return f}var ne=Object(l.observer)((function(e){var t=e.model,n=e.offsetX,a=e.offsetY,i=t.MSA,l=t.colWidth,c=t.bgColor,s=t.columns,u=t.rowHeight,f=t.scrollY,d=t.scrollX,m=t.hierarchy,h=t.colorScheme,v=t.colorSchemeName,p=t.blockSize,b=t.highResScaleFactor,g=t.colStats,E=Object(U.a)(),S=Object(r.useMemo)((function(){return Z(h,E)}),[h,E]),y=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(y.current){var e=y.current.getContext("2d");if(e){e.resetTransform(),e.scale(b,b),e.clearRect(0,0,p,p),e.translate(-n,u/2-a),e.textAlign="center",e.font=e.font.replace(/\d+px/,Math.max(8,u-8)+"px");var r=m.leaves(),o=p,i=Math.max(0,Math.floor((a-u)/u)),f=Math.max(0,Math.ceil((a+o+u)/u)),d=Math.max(0,Math.floor(n/l)),E=Math.max(0,Math.ceil((n+o)/l)),w=r.slice(i,f);w.forEach((function(r){for(var o,a=r.x,i=r.data.name,f=null===(o=s[i])||void 0===o?void 0:o.slice(d,E),m=0;m<(null===f||void 0===f?void 0:f.length);m++){var p=f[m],b="clustalx_protein_dynamic"===v?ee(g[d+m],t,i,d+m):"percent_identity_dynamic"===v?te(g[d+m],t,i,d+m):h[p.toUpperCase()];if(c){var S=m*l+n-n%l;e.fillStyle=b||"white",e.fillRect(S,a-u,l,u)}}})),u>=10&&l>=u/2&&w.forEach((function(t){for(var r,o=t.x,a=t.data.name,i=null===(r=s[a])||void 0===r?void 0:r.slice(d,E),f=0;f<(null===i||void 0===i?void 0:i.length);f++){var m=i[f],v=h[m.toUpperCase()],p=S[m.toUpperCase()]||"black",b=f*l+n-n%l;e.fillStyle=c?p:v||"black",e.fillText(m,b+l/2,o-u/4)}}))}}}),[i,b,s,h,S,c,u,l,m,n,a,p]),o.a.createElement("canvas",{ref:y,onMouseMove:function(e){if(y.current){var r=y.current.getBoundingClientRect(),o=r.left,i=r.top,c=e.clientX-o,s=e.clientY-i;t.setMousePos(Math.floor((c+n)/l)+1,Math.floor((s+a)/u))}},onMouseLeave:function(){return t.setMousePos()},width:p*b,height:p*b,style:{position:"absolute",top:f+a,left:d+n,width:p,height:p}})})),re=Object(l.observer)((function(e){var t=e.model,n=t.MSA,a=t.msaFilehandle,i=t.height,l=t.msaAreaWidth,c=t.blocks2d,u=Object(r.useRef)(null),f=Object(r.useRef)(!1),d=Object(r.useRef)(0),m=Object(r.useRef)(0),h=Object(r.useRef)(0),v=Object(r.useRef)(0),p=Object(r.useState)(!1),b=p[0],g=p[1];return Object(r.useEffect)((function(){var e=u.current;if(e)return e.addEventListener("wheel",n),function(){e.removeEventListener("wheel",n)};function n(e){var n=M()(e);d.current+=n.pixelX,m.current+=n.pixelY,f.current||(f.current=!0,requestAnimationFrame((function(){t.doScrollX(-d.current),t.doScrollY(-m.current),d.current=0,m.current=0,f.current=!1}))),e.preventDefault()}}),[t]),Object(r.useEffect)((function(){var e=function(){};function n(e){e.preventDefault();var n=e.clientX,r=e.clientY,o=n-h.current,a=r-v.current;(o||a)&&(f.current||(f.current=!0,window.requestAnimationFrame((function(){t.doScrollX(o),t.doScrollY(a),f.current=!1,h.current=e.clientX,v.current=e.clientY}))))}function r(){h.current=0,b&&g(!1)}return b&&(window.addEventListener("mousemove",n,!0),window.addEventListener("mouseup",r,!0),e=function(){window.removeEventListener("mousemove",n,!0),window.removeEventListener("mouseup",r,!0)}),e}),[t,b]),o.a.createElement("div",{ref:u,onMouseDown:function(e){var t=e.target;t.draggable||t.dataset.resizer||0===e.button&&(h.current=e.clientX,v.current=e.clientY,g(!0))},onMouseUp:function(e){e.preventDefault(),g(!1)},onMouseLeave:function(e){e.preventDefault()},style:{position:"relative",height:i,width:l,overflow:"hidden"}},n||a?n?c.map((function(e){var n=e[0],r=e[1];return o.a.createElement(ne,{key:n+"_"+r,model:t,offsetX:n,offsetY:r})})):o.a.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"}},o.a.createElement(_.a,null),o.a.createElement(s.a,null,"Loading...")):null)}));function oe(e,t,n,r,o){var a;void 0===r&&(r=!0),void 0===o&&(o=!0);var i=function(e,t,n){for(var r=t*(e=Math.abs(e)),o=parseInt(Number(r).toExponential().split(/e/i)[1],10),a=Math.pow(10,o);a<r&&!((a*=2)>=r);)a*=2.5;var i=(a=Math.max(a,5))/e,l=0;return!(a%10)&&i/10>=n?l=a/10:!(a%5)&&i/5>=n?l=a/5:!(a%2)&&i/2>=n&&(l=a/2),{majorPitch:a,minorPitch:l}}(n,60,15),l=e,c=t;if(null===l||null===c)return[];n<0&&(l=(a=[c,l])[0],c=a[1]),l-=Math.abs(20*n),c+=Math.abs(20*n)+1;for(var s=i.minorPitch||i.majorPitch,u=0,f=[],d=Math.ceil(l/s)*s;d<c;d+=s)o&&d%(2*i.majorPitch)?(f.push({type:"minor",base:d-1,index:u}),u+=1):!r||d%(2*i.majorPitch)||(f.push({type:"major",base:d-1,index:u}),u+=1);return f}function ae(e){return e<999?String(e):ae(~~(e/1e3))+","+("00"+~~(e%1e3)).substr(-3,3)}var ie=Object(g.a)((function(){return{majorTickLabel:{fontSize:"11px"},majorTick:{stroke:"#555"},minorTick:{stroke:"#999"}}}));function le(e){var t=e.start,n=e.end,r=e.bpPerPx,a=e.reversed,i=e.major,l=e.minor,c=ie(),s=oe(t,n,r,i,l);return o.a.createElement(o.a.Fragment,null,s.map((function(e){var i=(a?n-e.base:e.base-t)/r;return o.a.createElement("line",{key:e.base,x1:i,x2:i,y1:11,y2:"major"===e.type?17:15,strokeWidth:1,stroke:"major"===e.type?"#555":"#999",className:"major"===e.type?c.majorTick:c.minorTick,"data-bp":e.base})})),s.filter((function(e){return"major"===e.type})).map((function(e){var i=(a?n-e.base:e.base-t)/r;return o.a.createElement("text",{x:i,y:10,key:"label-"+e.base,textAnchor:"middle",style:{fontSize:"11px"},className:c.majorTickLabel},ae(e.base+1))})))}var ce=Object(l.observer)((function(e){var t=e.model,n=t.MSA,a=t.colWidth,i=t.msaAreaWidth,l=t.resizeHandleWidth,c=t.scrollX,s=t.blocksX,u=t.blockSize,f=Object(r.useRef)(null),d=s[0];return n?o.a.createElement("div",{ref:f,style:{position:"relative",width:i,cursor:"crosshair",overflow:"hidden",height:20,background:"#ccc"}},o.a.createElement("svg",{style:{width:s.length*u,position:"absolute",left:c+d+l,pointerEvents:"none"}},o.a.createElement(le,{key:d,start:d/a,end:d/a+u*s.length/a,bpPerPx:1/a}))):null})),se=Object(l.observer)((function(e){var t=e.model.treeWidth;return o.a.createElement("div",{style:{width:t}})})),ue=n(79),fe=n(138),de=n(611),me=n(395),he=n(249),ve=n(334),pe=Object(l.observer)((function(e){var t=e.model,n=e.onClose,a=e.open,i=t.rowHeight,l=t.colWidth,c=t.treeWidth,s=t.colorSchemeName,u=t.noTree,f=Object(r.useState)(""+i),d=f[0],h=f[1],v=Object(r.useState)(""+l),p=v[0],b=v[1],g=Object(r.useState)(""+c),E=g[0],S=g[1];function y(e){return Number.isNaN(+e)||+e<0}var w=y(d),O=y(p),A=y(E);return o.a.createElement(x.a,{onClose:function(){return n()},open:a},o.a.createElement(N.a,null,"Settings"),o.a.createElement(D.a,null,o.a.createElement(de.a,{control:o.a.createElement(me.a,{checked:t.showBranchLen,onChange:function(){return t.toggleBranchLen()}}),label:"Show branch length"}),o.a.createElement(de.a,{control:o.a.createElement(me.a,{checked:t.bgColor,onChange:function(){return t.toggleBgColor()}}),label:"Color background"}),o.a.createElement(de.a,{control:o.a.createElement(me.a,{checked:t.drawNodeBubbles,onChange:function(){return t.toggleNodeBubbles()}}),label:"Draw node bubbles"}),o.a.createElement(de.a,{control:o.a.createElement(me.a,{checked:t.drawTree,onChange:function(){return t.toggleDrawTree()}}),label:"Draw tree (if available)"}),o.a.createElement(de.a,{control:o.a.createElement(me.a,{checked:t.labelsAlignRight,onChange:function(){return t.toggleLabelsAlignRight()}}),label:"Labels align right (note: labels may draw over tree, but can adjust tree width or tree area width in UI)"}),o.a.createElement(he.a,{label:"Row height (px)",value:d,error:w,onChange:function(e){return h(e.target.value)}}),o.a.createElement(he.a,{label:"Column width (px)",value:p,error:O,onChange:function(e){return b(e.target.value)}}),o.a.createElement("br",null),u?null:o.a.createElement(he.a,{label:"Tree width (px)",value:E,error:A,onChange:function(e){return S(e.target.value)}}),o.a.createElement("br",null),o.a.createElement(he.a,{select:!0,label:"Color scheme",value:s,onChange:function(e){return t.setColorSchemeName(e.target.value)}},Object.keys($).map((function(e){return o.a.createElement(P.a,{key:e,value:e},e)}))),o.a.createElement(ve.a,null,o.a.createElement(m.a,{disabled:w||O||A,onClick:function(){t.setRowHeight(+d),t.setColWidth(+p),u||t.setTreeWidth(+E),n()},variant:"contained",color:"primary"},"Submit"))))})),be=n(382);function ge(e){var t=e.onClose,n=e.open;return o.a.createElement(x.a,{onClose:function(){return t()},open:n},o.a.createElement(N.a,null,"Biotite License"),o.a.createElement(D.a,null,o.a.createElement("pre",{style:{height:100,overflow:"auto"}},'\nCopyright 2017 - 2020, The Biotite contributors\nAll rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n1. Redistributions of source code must retain the above copyright notice, this\nlist of conditions and the following disclaimer.\n\n2. Redistributions in binary form must reproduce the above copyright notice,\nthis list of conditions and the following disclaimer in the documentation and/or\nother materials provided with the distribution.\n\n3. Neither the name of the copyright holder nor the names of its contributors\nmay be used to endorse or promote products derived from this software without\nspecific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n        ')))}function Ee(e){var t=e.onClose,n=e.open,a=Object(r.useState)(!1),i=a[0],l=a[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(ge,{onClose:function(){return l(!1)},open:i}),o.a.createElement(x.a,{onClose:function(){return t()},open:n},o.a.createElement(N.a,null,"About this plugin"),o.a.createElement(D.a,null,o.a.createElement(s.a,null,"JBrowse 2 MSAView plugin ",be.a," (",o.a.createElement(u.a,{href:"https://github.com/gmod/jbrowse-plugin-msaview"},"Github"),")"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(s.a,null,"We use some color schemes from the"," ",o.a.createElement(u.a,{href:"https://github.com/biotite-dev/biotite"},"biotite")," ","project, and their license is reproduced"," ",o.a.createElement(u.a,{onClick:function(){return l(!0)}},"here"))),o.a.createElement("li",null,o.a.createElement(s.a,null,"See this page for some information on jalview colorings"," ",o.a.createElement(u.a,{href:"https://www.jalview.org/help/html/colourSchemes/"},"here"))),o.a.createElement("li",null,o.a.createElement(s.a,null,"See this page for some info on the clustal, cinema, maeditor, and lesk color schemes"," ",o.a.createElement(u.a,{href:"http://www.bioinformatics.nl/~berndb/aacolour.html"},"here"))),o.a.createElement("li",null,o.a.createElement(s.a,null,"See this paper about the flower color scheme"," ",o.a.createElement(u.a,{href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7245768/"},"here")))))))}var Se=Object(l.observer)((function(e){var t=e.model,n=e.onClose,r=e.open,a=t.alignmentDetails;return o.a.createElement(x.a,{onClose:function(){return n()},open:r},o.a.createElement(N.a,null,"Metadata"),o.a.createElement(D.a,null,o.a.createElement(F.Attributes,{attributes:a})))})),ye=n(637),we=Object(l.observer)((function(e){var t=e.model,n=e.onClose,r=e.open,a=t.tracks;return o.a.createElement(x.a,{onClose:function(){return n()},open:r},o.a.createElement(N.a,null,"Add track"),o.a.createElement(D.a,null,o.a.createElement(s.a,null,"Open relevant per-alignment tracks e.g. protein domains"),o.a.createElement(ye.a,null,a.map((function(e){return o.a.createElement(de.a,{key:e.model.id,control:o.a.createElement(me.a,{checked:!t.turnedOffTracks.has(e.model.id),onChange:function(){t.toggleTrack(e.model.id)}}),label:e.model.name})}))),o.a.createElement(ve.a,null,o.a.createElement(m.a,{onClick:function(){return n()},variant:"contained",color:"primary"},"Close"))))})),Oe=n(383),Ae=n.n(Oe),Le=n(384),je=n.n(Le),Ce=n(386),Pe=n.n(Ce),Te=n(385),Me=n.n(Te),Re=Object(l.observer)((function(e){var t=e.model,n=t.mouseOverRowName,r=t.mouseCol;return o.a.createElement("div",null,o.a.createElement(s.a,{display:"inline"},"Row name: ",n),o.a.createElement("span",{style:{marginLeft:10}}),o.a.createElement(s.a,{display:"inline"},"Position: ",r))})),ke=Object(l.observer)((function(e){var t=e.model,n=Object(r.useState)(!1),a=n[0],i=n[1],l=Object(r.useState)(!1),c=l[0],s=l[1],u=Object(r.useState)(!1),f=u[0],d=u[1],m=Object(r.useState)(!1),h=m[0],v=m[1],p=t.currentAlignment,b=t.alignmentNames;return o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(ue.a,{onClick:function(){t.setData({tree:"",msa:""}),t.setTreeFilehandle(void 0),t.setMSAFilehandle(void 0),t.setScrollY(0),t.setScrollX(0),t.setCurrentAlignment(0)}},o.a.createElement(Ae.a,null)),o.a.createElement(ue.a,{onClick:function(){return i(!0)}},o.a.createElement(je.a,null)),o.a.createElement(ue.a,{onClick:function(){return d(!0)}},o.a.createElement(O.a,null)),o.a.createElement(ue.a,{onClick:function(){return v(!0)}},o.a.createElement(Me.a,null)),a?o.a.createElement(pe,{open:!0,model:t,onClose:function(){return i(!1)}}):null,c?o.a.createElement(Ee,{open:!0,onClose:function(){return s(!1)}}):null,f?o.a.createElement(Se,{open:!0,model:t,onClose:function(){return d(!1)}}):null,h?o.a.createElement(we,{open:!0,model:t,onClose:function(){return v(!1)}}):null,b.length>0?o.a.createElement(fe.a,{native:!0,value:p,onChange:function(e){t.setCurrentAlignment(+e.target.value),t.setScrollX(0),t.setScrollY(0)}},b.map((function(e,t){return o.a.createElement("option",{key:e+"-"+t,value:t},e)}))):null,o.a.createElement(Re,{model:t}),o.a.createElement("div",{style:{flex:1}}),o.a.createElement(ue.a,{onClick:function(){return s(!0)}},o.a.createElement(Pe.a,null)))})),xe=n(240),Ne=n.n(xe),De=n(241),Fe=n.n(De),Ie=Object(g.a)((function(e){return{textArea:{padding:e.spacing(2),overflow:"auto",background:"#ddd",wordBreak:"break-word"}}})),He=Object(l.observer)((function(e){var t=e.model,n=e.onClose,a=Object(r.useState)("Copy to clipboard"),i=a[0],l=a[1],c=Ie();return o.a.createElement(x.a,{open:!0,onClose:n,fullWidth:!0,maxWidth:"lg"},o.a.createElement(N.a,null,"Track info - ",t.name),o.a.createElement(D.a,null,o.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){Fe()(t.data),l("Copied!"),setTimeout((function(){l("Copy to clipboard")}),300)}},i),o.a.createElement("pre",{className:c.textArea},t.data)),o.a.createElement(ve.a,null,o.a.createElement(m.a,{variant:"contained",onClick:n,color:"secondary"},"Close")))})),Ye=Object(g.a)((function(){return{button:{padding:0}}})),Ve=Object(l.observer)((function(e){var t=e.model,n=e.track,a=Object(r.useState)(),i=a[0],l=a[1],c=Object(r.useState)(!1),s=c[0],u=c[1],f=t.rowHeight,d=t.treeAreaWidth,m=n.height,h=n.model.name,v=Ye(),p=Math.max(8,f-8);return o.a.createElement("div",{style:{width:d,height:m,flexShrink:0,textAlign:"right",fontSize:p}},h,o.a.createElement(ue.a,{className:v.button,style:{width:p,height:p},onClick:function(e){l(e.target)}},o.a.createElement(Ne.a,null)),i?o.a.createElement(C.a,{anchorEl:i,transitionDuration:0,open:!0,onClose:function(){l(void 0)}},o.a.createElement(P.a,{dense:!0,onClick:function(){t.toggleTrack(n.model.id),l(void 0)}},"Close"),o.a.createElement(P.a,{dense:!0,onClick:function(){u(!0),l(void 0)}},"Get info")):null,s?o.a.createElement(He,{model:n.model,onClose:function(){return u(!1)}}):null)})),We=Object(l.observer)((function(e){var t=e.model,n=e.track,a=t.resizeHandleWidth,i=n.model.height,l=Object(r.useRef)(null),c=Object(r.useRef)(!1),s=Object(r.useRef)(0);return Object(r.useEffect)((function(){var e=l.current;if(e)return e.addEventListener("wheel",n),function(){e.removeEventListener("wheel",n)};function n(e){var n=M()(e);s.current+=n.pixelX,c.current||(c.current=!0,requestAnimationFrame((function(){t.doScrollX(-s.current),s.current=0,c.current=!1}))),e.preventDefault()}}),[t]),o.a.createElement("div",{key:n.id,style:{display:"flex",height:i}},o.a.createElement(Ve,{model:t,track:n}),o.a.createElement("div",{style:{width:a,flexShrink:0}}),o.a.createElement("div",{ref:l},o.a.createElement(n.ReactComponent,{model:t,track:n})))})),Ge=n(239),Xe=n.n(Ge),Be=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Ue=Object(l.observer)((function(e){var t=e.name,n=e.value,r=e.setValue,a=e.setName,i=e.onDelete;return o.a.createElement("div",null,o.a.createElement(ue.a,{onClick:i,style:{margin:10}},o.a.createElement(Xe.a,null)),o.a.createElement(he.a,{value:t,onChange:function(e){return a(e.target.value)},label:"Key"}),o.a.createElement(he.a,{value:n,onChange:function(e){return r(e.target.value)},label:"Value"}))})),_e=Object(l.observer)((function(e){var t=e.onClose,n=e.data,a=e.model,i=a.blanks,l=n.left,c=n.right,u=Object(r.useState)([["Name",""],["ID",""],["Note",""]]),f=u[0],d=u[1];return o.a.createElement(x.a,{onClose:function(){return t()},open:!0},o.a.createElement(N.a,null,"Create new region annotation"),o.a.createElement(D.a,null,o.a.createElement(s.a,null,"Do you want to add an annotation to the MSA at ",l,"..",c," ",i.length?" (gapped "+a.getPos(l)+".."+a.getPos(c):""),f.map((function(e,t){var n=e[0],r=e[1];return o.a.createElement(Ue,{key:t,name:n,value:r,setValue:function(e){var n=Be([],f,!0);n[t][1]=e,d(n)},setName:function(e){var n=Be([],f,!0);n[t][0]=e,d(n)},onDelete:function(){f.splice(t,1),d(Be([],f,!0))}})})),o.a.createElement(m.a,{onClick:function(){d(Be(Be([],f,!0),[["",""]],!1))}},"Add row"),o.a.createElement(ve.a,null,o.a.createElement(m.a,{onClick:function(){a.addAnnotation(l,c,function(e){var t={};return e.forEach((function(e){var n=e[0],r=e[1];t[n]||(t[n]=[]),t[n].push(r)})),t}(f)),t()},variant:"contained",color:"primary"},"Submit"),o.a.createElement(m.a,{variant:"contained",color:"secondary",onClick:function(){return t()}},"Cancel"))))})),Ke=Object(l.observer)((function(e){var t=e.model,n=t.resizeHandleWidth,a=Object(r.useState)(!1),i=a[0],l=a[1],c=Object(r.useRef)(!1),s=Object(r.useRef)(0);return Object(r.useEffect)((function(){function e(e){e.preventDefault();var n=e.clientX;if(0===s.current)s.current=e.clientX;else{var r=n-s.current;r&&(c.current||(c.current=!0,window.requestAnimationFrame((function(){t.setTreeAreaWidth(t.treeAreaWidth+r),c.current=!1,s.current=e.clientX}))))}}function n(){s.current=0,i&&l(!1)}return i?(document.addEventListener("mousemove",e,!0),document.addEventListener("mouseup",n,!0),function(){document.removeEventListener("mousemove",e,!0),document.removeEventListener("mouseup",n,!0)}):function(){}}),[i,t]),o.a.createElement("div",null,o.a.createElement("div",{onMouseDown:function(){return l(!0)},style:{cursor:"ew-resize",height:"100%",width:n,background:"rgba(200,200,200)",position:"relative"}}))})),qe=Object(l.observer)((function(e){var t=e.model,n=t.resizeHandleWidth,a=Object(r.useState)(!1),i=a[0],l=a[1],c=Object(r.useRef)(!1),s=Object(r.useRef)(0);return Object(r.useEffect)((function(){function e(e){e.preventDefault();var n=e.clientY;if(0===s.current)s.current=e.clientY;else{var r=n-s.current;r&&(c.current||(c.current=!0,window.requestAnimationFrame((function(){t.setHeight(t.height+r),c.current=!1,s.current=e.clientY}))))}}function n(){s.current=0,i&&l(!1)}return i?(document.addEventListener("mousemove",e,!0),document.addEventListener("mouseup",n,!0),function(){document.removeEventListener("mousemove",e,!0),document.removeEventListener("mouseup",n,!0)}):function(){}}),[i,t]),o.a.createElement("div",null,o.a.createElement("div",{onMouseDown:function(){return l(!0)},style:{cursor:"ns-resize",width:"100%",height:n,background:"rgba(200,200,200)",position:"relative"}}))})),ze=function(){return(ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Qe=Object(l.observer)((function(e){var t=e.model,n=Object(r.useRef)(null),a=t.height,i=t.width,l=t.treeAreaWidth,c=t.resizeHandleWidth,s=t.scrollX,u=t.mouseCol,f=t.colWidth;return Object(r.useEffect)((function(){if(n.current){var e=n.current.getContext("2d");if(e&&(e.resetTransform(),e.clearRect(0,0,i,a),void 0!==u)){var t=(u-1)*f+s+l+c;e.fillStyle="rgba(100,100,100,0.5)",e.fillRect(t,0,f,a)}}}),[u,f,s,a,c,l,i]),o.a.createElement("canvas",{ref:n,width:i,height:a,style:{position:"absolute",top:0,left:0,width:i,height:a,zIndex:1e3,pointerEvents:"none"}})})),Je=Object(l.observer)((function(e){var t=e.model,n=t.done,r=t.initialized,a=t.treeAreaWidth,i=t.height,l=(t.resizeHandleWidth,t.turnedOnTracks);return o.a.createElement("div",null,r?n?o.a.createElement("div",null,o.a.createElement("div",{style:{height:i,overflow:"hidden"}},o.a.createElement(ke,{model:t}),o.a.createElement("div",null,o.a.createElement("div",{style:{position:"relative"}},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{flexShrink:0,width:a}},o.a.createElement(se,{model:t})),o.a.createElement(j,{model:t,ControlComponent:o.a.createElement(ce,{model:t})})),null===l||void 0===l?void 0:l.map((function(e){return o.a.createElement(We,{key:e.model.id,model:t,track:e})})),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{flexShrink:0,width:a}},o.a.createElement(B,{model:t})),o.a.createElement(Ke,{model:t}),o.a.createElement(re,{model:t}),o.a.createElement(Qe,{model:t}))))),o.a.createElement(qe,{model:t})):o.a.createElement(s.a,{variant:"h4"},"Loading..."):o.a.createElement(b,{model:t}),t.DialogComponent?o.a.createElement(t.DialogComponent,ze({},t.DialogProps||{},{onClose:function(){t.setDialogComponent(void 0,void 0)}})):null,t.annotPos?o.a.createElement(_e,{data:t.annotPos,model:t,onClose:function(){return t.clearAnnotPos()}}):null)})),Ze=n(648),$e=n(647),et=n(645),tt=n(646),nt=n(88),rt=n(186),ot=n(387),at=n.n(ot),it=n(181),lt=n.n(it),ct=n(388),st=function(){function e(e){this.MSA=Object(ct.parse)(e)}return e.prototype.getMSA=function(){return this.MSA},e.prototype.getRow=function(e){var t;return null===(t=this.MSA.alns.find((function(t){return t.id===e})))||void 0===t?void 0:t.seq.split("")},e.prototype.getWidth=function(){return this.MSA.alns[0].seq.length},e.prototype.getDetails=function(){return this.MSA.header},e.prototype.getNames=function(){return this.MSA.alns.map((function(e){return e.id}))},e.prototype.getStructures=function(){return{}},Object.defineProperty(e.prototype,"alignmentNames",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.getTree=function(){return{id:"root",noTree:!0,branchset:this.getNames().map((function(e){return{id:e,name:e}}))}},Object.defineProperty(e.prototype,"seqConsensus",{get:function(){return this.MSA.consensus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondaryStructureConsensus",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tracks",{get:function(){var e;return(null===(e=this.seqConsensus)||void 0===e?void 0:e.trim())?[{id:"seqConsensus",name:"Sequence consensus",data:this.seqConsensus,customColorScheme:{"*":"white",":":"grey",".":"darkgrey"," ":"black"}}]:[]},enumerable:!1,configurable:!0}),e}();function ut(e){for(var t=[],n={},r=e.split(/\s*(;|\(|\)|,|:)\s*/),o=0;o<r.length;o++){var a=r[o],i={};switch(a){case"(":n.branchset=[i],t.push(n),n=i;break;case",":t[t.length-1].branchset.push(i),n=i;break;case")":n=t.pop();break;case":":break;default:var l=r[o-1];")"===l||"("===l||","===l?n.name=a:":"===l&&(n.length=parseFloat(a))}}return n}var ft=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},dt=function(){function e(e,t){var n=lt.a.parseAll(e);this.data=n,this.MSA=n[t]}return e.prototype.getMSA=function(){return this.MSA},e.prototype.getRow=function(e){var t,n;return null===(n=null===(t=this.MSA)||void 0===t?void 0:t.seqdata[e])||void 0===n?void 0:n.split("")},e.prototype.getWidth=function(){var e,t=Object.keys(null===(e=this.MSA)||void 0===e?void 0:e.seqdata)[0];return this.getRow(t).length},Object.defineProperty(e.prototype,"alignmentNames",{get:function(){return this.data.map((function(e,t){var n;return(null===(n=e.gf.DE)||void 0===n?void 0:n[0])||"Alignment "+(t+1)}))},enumerable:!1,configurable:!0}),e.prototype.getDetails=function(){var e,t;return{General:this.MSA.gf,Accessions:null===(e=this.MSA.gs)||void 0===e?void 0:e.AC,Dbxref:null===(t=this.MSA.gs)||void 0===t?void 0:t.DR}},e.prototype.getRowDetails=function(e){var t,n;return{name:e,accession:null===(t=this.MSA.gs)||void 0===t?void 0:t.AC[e],dbxref:null===(n=this.MSA.gs)||void 0===n?void 0:n.DR[e]}},e.prototype.getNames=function(){return Object.keys(this.MSA.seqdata)},e.prototype.getSeqCoords=function(){},e.prototype.getStructures=function(){var e,t=/PDB; +(\S+) +(\S); ([0-9]+)-([0-9]+)/,n=this.MSA;return Object.entries((null===(e=n.gs)||void 0===e?void 0:e.DR)||{}).map((function(e){var n=e[0],r=e[1];return[n,t.exec(r)]})).filter((function(e){return!!e[1]})).map((function(e){var t=e[0],n=e[1];return{id:t,pdb:n[1].toLowerCase(),chain:n[2],startPos:+n[3],endPos:+n[4]}})).reduce((function(e,t){var n=t.id,r=ft(t,["id"]);return e[n]||(e[n]=[]),e[n].push(r),e}),{})},e.prototype.getTree=function(){var e,t,n,r=null===(n=null===(t=null===(e=this.MSA)||void 0===e?void 0:e.gf)||void 0===t?void 0:t.NH)||void 0===n?void 0:n[0];return r?J(ut(r)):{id:"root",noTree:!0,branchset:this.getNames().map((function(e){return{id:e,name:e}}))}},Object.defineProperty(e.prototype,"seqConsensus",{get:function(){var e;return null===(e=this.MSA.gc)||void 0===e?void 0:e.seq_cons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondaryStructureConsensus",{get:function(){var e;return null===(e=this.MSA.gc)||void 0===e?void 0:e.SS_cons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tracks",{get:function(){return[{id:"seqConsensus",name:"Sequence consensus",data:this.seqConsensus,customColorScheme:{}},{id:"secondaryStruct",name:"Secondary-structure",data:this.secondaryStructureConsensus,customColorScheme:{">":"pink","<":"lightblue"}}]},enumerable:!1,configurable:!0}),e}(),mt=function(){function e(e){var t={},n="",r=/^>(\S+)/;e.split("\n").forEach((function(e){var o=r.exec(e);o?t[n=o[1]]="":n&&(t[n]=t[n]+e.replace(/[ \t]/g,""))})),this.MSA={seqdata:t}}return e.prototype.getMSA=function(){return this.MSA},e.prototype.getNames=function(){return Object.keys(this.MSA.seqdata)},e.prototype.getRow=function(e){var t,n;return null===(n=null===(t=this.MSA)||void 0===t?void 0:t.seqdata[e])||void 0===n?void 0:n.split("")},e.prototype.getWidth=function(){var e,t=Object.keys(null===(e=this.MSA)||void 0===e?void 0:e.seqdata)[0];return this.getRow(t).length},e.prototype.getStructures=function(){return{}},Object.defineProperty(e.prototype,"alignmentNames",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.getDetails=function(){return{}},e.prototype.getTree=function(){return{id:"root",noTree:!0,branchset:this.getNames().map((function(e){return{id:e,name:e}}))}},Object.defineProperty(e.prototype,"seqConsensus",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondaryStructureConsensus",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tracks",{get:function(){return[]},enumerable:!1,configurable:!0}),e}(),ht=Object(l.observer)((function(e){var t=e.track,n=e.model,a=e.offsetX,i=n.blockSize,l=n.scrollX,c=n.bgColor,s=n.colorScheme,u=n.colWidth,f=n.rowHeight,d=n.highResScaleFactor,m=t.model,h=m.customColorScheme,v=m.data,p=h||s,b=Object(U.a)(),g=Object(r.useRef)(null),E=Object(r.useMemo)((function(){return Z(p,b)}),[p,b]);return Object(r.useEffect)((function(){if(g.current){var e=g.current.getContext("2d");if(e){e.resetTransform(),e.scale(d,d),e.clearRect(0,0,i,f),e.translate(-a,0),e.textAlign="center",e.font=e.font.replace(/\d+px/,Math.max(8,f-8)+"px");for(var t=Math.max(0,Math.floor(a/u)),n=Math.max(0,Math.ceil((a+i)/u)),r=null===v||void 0===v?void 0:v.slice(t,n),o=0;r&&o<r.length;o++){var l=r[o],s=p[l.toUpperCase()];if(c){var m=o*u+a-a%u;e.fillStyle=s||"white",e.fillRect(m,0,u,f),f>=10&&u>=f/2&&(e.fillStyle=E[l.toUpperCase()]||"black",e.fillText(l,m+u/2,f/2+1))}}}}}),[c,i,u,f,a,E,p,d,v]),o.a.createElement("canvas",{ref:g,height:f*d,width:i*d,style:{position:"absolute",left:l+a,width:i,height:f}})})),vt=Object(l.observer)((function(e){var t=e.track,n=e.model,r=n.blocksX,a=n.msaAreaWidth,i=n.rowHeight;return o.a.createElement("div",{style:{position:"relative",height:i,width:a,overflow:"hidden"}},r.map((function(e){return o.a.createElement(ht,{key:e,track:t,model:n,offsetX:e})})))})),pt=function(){function e(e){var t=(void 0===e?{}:e).maxHeight,n=void 0===t?1e4:t;this.maxHeightReached=!1,this.rbush=new k.a,this.rectangles=new Map,this.maxHeight=Math.ceil(n),this.pTotalHeight=0}return e.prototype.addRect=function(e,t,n,r,o){var a=this.rectangles.get(e);if(a)return a.minY;for(var i=0;this.rbush.collides({minX:t,minY:i,maxX:n,maxY:i+r})&&i<=this.maxHeight;)i+=1;var l={minX:t,minY:i,maxX:n,maxY:i+r,id:e,data:o};return this.rbush.insert(l),this.rectangles.set(e,l),this.pTotalHeight=Math.max(this.pTotalHeight,i),i},Object.defineProperty(e.prototype,"totalHeight",{get:function(){return this.pTotalHeight},enumerable:!1,configurable:!0}),e}(),bt=Object(l.observer)((function(e){var t=e.track,n=e.model,a=e.offsetX,i=n.blockSize,l=n.colWidth,s=n.blanks,u=n.rowHeight,f=n.highResScaleFactor,d=n.scrollX,m=t.model,h=m.height,v=m.features,p=m.associatedRowName,b=Object(c.isStateTreeNode)(v)?Object(c.getSnapshot)(v):v,g=Object(r.useMemo)((function(){var e=new pt;return null===b||void 0===b||b.forEach((function(t,r){var o=t.start,a=t.end;if(p){var i=n.rowSpecificBpToPx(p,o-1),l=n.rowSpecificBpToPx(p,a);e.addRect(""+r,i,l,u,t)}else{i=n.globalBpToPx(o-1),l=n.globalBpToPx(a);e.addRect(""+r,i,l,u,t)}})),e}),[u,b,p,n,s]),E=Object(r.useRef)(null),S=Object(r.useRef)(null),y=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(E.current){var e=E.current.getContext("2d");if(e){e.resetTransform(),e.scale(f,f),e.clearRect(0,0,i,h),e.translate(-a,0),e.textAlign="center",e.font=e.font.replace(/\d+px/,Math.max(8,u-8)+"px");var t=Math.max(0,Math.floor(a/l));e.fillStyle="goldenrod",g.rectangles.forEach((function(n){var r=n.minX,o=n.maxX,i=n.minY,c=n.maxY,s=(r-t)*l+a-a%l,u=(o-t)*l+a-a%l;u-s>0&&e.fillRect(s,i,u-s,(c-i)/2)}))}}}),[p,i,l,g.rectangles,n,u,h,a,f,v,s]),Object(r.useEffect)((function(){if(S.current){var e=S.current.getContext("2d");e&&(e.resetTransform(),e.scale(f,f),e.clearRect(0,0,i,h),e.translate(-a,0),e.textAlign="center",e.font=e.font.replace(/\d+px/,Math.max(8,u-8)+"px"),e.fillStyle="black",e.textAlign="left",g.rectangles.forEach((function(t){var n,r,o,a,i=t.minX,c=t.maxX,s=t.maxY,u=t.minY,f=t.data,m=i*l,h=c*l;if(h-m>0){var v=null===(r=null===(n=f.attributes)||void 0===n?void 0:n.Note)||void 0===r?void 0:r[0],p=null===(a=null===(o=f.attributes)||void 0===o?void 0:o.Name)||void 0===a?void 0:a[0],b=f.type;e.fillText([b,p,v].filter((function(e){return!!e})).join(" - "),Math.max(Math.min(-d,h),m),u+(s-u))}})))}}),[i,l,d,f,h,g.rectangles,a,v,n,u,s]),v?o.a.createElement(o.a.Fragment,null,o.a.createElement("canvas",{ref:E,height:h*f,width:i*f,style:{position:"absolute",left:d+a,width:i,height:h}}),o.a.createElement("canvas",{ref:S,height:h*f,width:i*f,style:{position:"absolute",left:d+a,width:i,height:h}}),o.a.createElement("canvas",{ref:y,height:h*f,width:i*f,style:{position:"absolute",left:d+a,width:i,height:h}})):null})),gt=Object(l.observer)((function(e){var t=e.model,n=e.track,r=t.blocksX,a=t.msaAreaWidth,i=n.model.height;return o.a.createElement("div",{style:{position:"relative",height:i,width:a,overflow:"hidden"}},r.map((function(e){return o.a.createElement(bt,{track:n,key:e,model:t,offsetX:e})})))})),Et=function(){return(Et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},St=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(t){a(t)}}function l(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}c((r=r.apply(e,t||[])).next())}))},yt=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(l){a=[6,l],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},wt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},Ot=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};function At(e,t){for(var n="",r=0,o=0;o<t.length;o++)o===e[r]?r++:n+=t[o];return n}function Lt(e,t,n){var r;e.len=(t+=Math.max(e.data.length||0,0))*n,null===(r=e.children)||void 0===r||r.forEach((function(e){Lt(e,t,n)}))}function jt(e){return(e.data.length||1)+(e.children?Object(et.a)(e.children,jt):0)}function Ct(e){e.children&&(e._children=e.children,e._children.forEach(Ct),e.children=null)}function Pt(e,t,n){return Math.min(Math.max(t,e),n)}var Tt=c.types.model({id:c.types.identifier,structure:c.types.model({pdb:c.types.string,startPos:c.types.number,endPos:c.types.number}),range:c.types.maybe(c.types.string)}),Mt=c.types.model({id:c.types.string,accession:c.types.string,name:c.types.string,associatedRowName:c.types.string,height:c.types.optional(c.types.number,100)}).volatile((function(){return{error:void 0,data:void 0}})).actions((function(e){return{setError:function(t){e.error=t},setData:function(t){e.data=t}}})).actions((function(e){return{afterCreate:function(){var t=this;Object(c.addDisposer)(e,Object(h.autorun)((function(){return St(t,void 0,void 0,(function(){var t,n,r,o,a;return yt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=e.accession,n="https://www.uniprot.org/uniprot/"+t+".gff",[4,fetch(n)];case 1:if(!(r=i.sent()).ok)throw new Error("HTTP "+r.status+" "+r.statusText+" fetching "+n);return[4,r.text()];case 2:return o=i.sent(),e.setData(o),[3,4];case 3:return a=i.sent(),e.setError(a),[3,4];case 4:return[2]}}))}))})))}}})).views((function(e){return{get loading(){return!e.data},get features(){var t;return null===(t=e.data)||void 0===t?void 0:t.split("\n").map((function(e){return e.trim()})).filter((function(e){return!!e})).filter((function(e){return!e.startsWith("#")})).map((function(e){var t=e.split("\t"),n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],l=t[5],c=t[6],s=t[7],u=t[8];return Et({seq_id:n,source:r,type:o,start:+a,end:+i,score:+l,strand:c,phase:s},Object.fromEntries(u.split(";").map((function(e){return e.trim()})).filter((function(e){return!!e})).map((function(e){return e.split("=")})).map((function(e){var t=e[0],n=e[1];return[t.trim(),decodeURIComponent(n).trim().split(",").join(" ")]}))))}))}}})),Rt=c.types.model("MsaView",{id:nt.ElementId,type:c.types.literal("MsaView"),height:c.types.optional(c.types.number,550),treeAreaWidth:c.types.optional(c.types.number,400),treeWidth:c.types.optional(c.types.number,300),rowHeight:20,scrollY:0,scrollX:0,resizeHandleWidth:5,blockSize:1e3,mouseRow:c.types.maybe(c.types.number),mouseCol:c.types.maybe(c.types.number),selectedStructures:c.types.array(Tt),labelsAlignRight:!1,colWidth:16,showBranchLen:!0,bgColor:!0,drawTree:!0,drawNodeBubbles:!0,highResScaleFactor:2,colorSchemeName:"maeditor",treeFilehandle:c.types.maybe(nt.FileLocation),msaFilehandle:c.types.maybe(nt.FileLocation),currentAlignment:0,collapsed:c.types.array(c.types.string),showOnly:c.types.maybe(c.types.string),boxTracks:c.types.array(Mt),turnedOffTracks:c.types.map(c.types.boolean),annotatedRegions:c.types.array(c.types.model({start:c.types.number,end:c.types.number,attributes:c.types.frozen()})),data:c.types.optional(c.types.model({tree:c.types.maybe(c.types.string),msa:c.types.maybe(c.types.string)}).actions((function(e){return{setTree:function(t){e.tree=t},setMSA:function(t){e.msa=t}}})),{tree:"",msa:""})}).volatile((function(){return{error:void 0,margin:{left:20,top:20},DialogComponent:void 0,DialogProps:void 0,annotPos:void 0}})).actions((function(e){return{setDialogComponent:function(t,n){e.DialogComponent=t,e.DialogProps=n},setHeight:function(t){e.height=t},addStructureToSelection:function(t){e.selectedStructures.push(t)},removeStructureFromSelection:function(t){var n=e.selectedStructures.find((function(e){return e.id===t.id}));n&&e.selectedStructures.remove(n)},toggleStructureSelection:function(t){var n=e.selectedStructures.find((function(e){return e.id===t.id}));n?e.selectedStructures.remove(n):e.selectedStructures.push(t)},clearSelectedStructures:function(){e.selectedStructures=[]},setError:function(t){console.error(t),e.error=t},setMousePos:function(t,n){e.mouseCol=t,e.mouseRow=n},setRowHeight:function(t){e.rowHeight=t},setColWidth:function(t){e.colWidth=t},setColorSchemeName:function(t){e.colorSchemeName=t},setScrollY:function(t){e.scrollY=t},setScrollX:function(t){e.scrollX=t},setTreeAreaWidth:function(t){e.treeAreaWidth=t},setTreeWidth:function(t){e.treeWidth=t},setCurrentAlignment:function(t){e.currentAlignment=t},toggleLabelsAlignRight:function(){e.labelsAlignRight=!e.labelsAlignRight},toggleDrawTree:function(){e.drawTree=!e.drawTree},toggleCollapsed:function(t){e.collapsed.includes(t)?e.collapsed.remove(t):e.collapsed.push(t)},setShowOnly:function(t){e.showOnly=t},toggleBranchLen:function(){e.showBranchLen=!e.showBranchLen},toggleBgColor:function(){e.bgColor=!e.bgColor},toggleNodeBubbles:function(){e.drawNodeBubbles=!e.drawNodeBubbles},setData:function(t){e.data=Object(c.cast)(t)},setMSAFilehandle:function(t){return St(this,void 0,void 0,(function(){return yt(this,(function(n){return e.msaFilehandle=t,[2]}))}))},setTreeFilehandle:function(t){return St(this,void 0,void 0,(function(){var n;return yt(this,(function(r){switch(r.label){case 0:return t&&"blobId"in t?[4,Object(rt.openLocation)(t).readFile("utf8")]:[3,2];case 1:return n=r.sent(),this.setTree(n),[3,3];case 2:e.treeFilehandle=t,r.label=3;case 3:return[2]}}))}))},setMSA:function(t){e.data.setMSA(t)},setTree:function(t){e.data.setTree(t)},afterCreate:function(){var t=this;Object(c.addDisposer)(e,Object(h.autorun)((function(){return St(t,void 0,void 0,(function(){var t,n,r;return yt(this,(function(o){switch(o.label){case 0:if(!(t=e.treeFilehandle))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),n=this.setTree,[4,Object(rt.openLocation)(t).readFile("utf8")];case 2:return n.apply(this,[o.sent()]),[3,4];case 3:return r=o.sent(),this.setError(r),[3,4];case 4:return[2]}}))}))}))),Object(c.addDisposer)(e,Object(h.autorun)((function(){return St(t,void 0,void 0,(function(){var t,n,r;return yt(this,(function(o){switch(o.label){case 0:if(!(t=e.msaFilehandle))return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),n=this.setMSA,[4,Object(rt.openLocation)(t).readFile("utf8")];case 2:return n.apply(this,[o.sent()]),[3,4];case 3:return r=o.sent(),this.setError(r),[3,4];case 4:return[2]}}))}))})))}}})).views((function(e){var t=[],n=[],r=0,o=0;return{get initialized(){return(e.data.msa||e.data.tree||e.msaFilehandle||e.treeFilehandle)&&!e.error},get blocksX(){for(var n=e.scrollX,o=e.blockSize,a=e.colWidth,i=-o*Math.floor(n/o)-o,l=[],c=i;c<i+3*o;c+=o)c+o>0&&l.push(c);return JSON.stringify(l)===JSON.stringify(t)&&a===r||(t=l,r=a),t},get blocksY(){for(var t=e.scrollY,r=e.blockSize,a=e.rowHeight,i=-r*Math.floor(t/r)-2*r,l=[],c=i;c<i+3*r;c+=r)c+r>0&&l.push(c);return JSON.stringify(l)===JSON.stringify(n)&&a===o||(n=l,o=a),n}}})).views((function(e){return{get blocks2d(){return e.blocksY.map((function(t){return e.blocksX.map((function(e){return[e,t]}))})).flat()},get done(){return e.initialized&&(e.data.msa||e.data.tree)},get colorScheme(){return $[e.colorSchemeName]},get alignmentDetails(){var e;return(null===(e=this.MSA)||void 0===e?void 0:e.getDetails())||{}},getRowDetails:function(e){var t,n=null===(t=this.MSA)||void 0===t?void 0:t.getRowDetails(e),r=e.match(/\S+\/(\d+)-(\d+)/);return Et(Et({},n),r&&{range:{start:+r[1],end:+r[2]}})},get currentAlignmentName(){return this.alignmentNames[e.currentAlignment]},get alignmentNames(){var e;return(null===(e=this.MSA)||void 0===e?void 0:e.alignmentNames)||[]},get noTree(){return!!this.tree.noTree},get menuItems(){return[]},get MSA(){var t=e.data.msa;return t?lt.a.sniff(t)?new dt(t,e.currentAlignment):t.startsWith(">")?new mt(t):new st(t):null},get numColumns(){var t;return(((null===(t=this.MSA)||void 0===t?void 0:t.getWidth())||0)-this.blanks.length)*e.colWidth},get tree(){var t;return e.data.tree?J(ut(e.data.tree)):(null===(t=this.MSA)||void 0===t?void 0:t.getTree())||{noTree:!0}},get rowNames(){return this.hierarchy.leaves().map((function(e){return e.data.name}))},get mouseOverRowName(){return void 0!==e.mouseRow?this.rowNames[e.mouseRow]:void 0},getMouseOverResidue:function(e){return this.columns[e]},get root(){var t=Object(Ze.a)(this.tree,(function(e){return e.branchset})).sum((function(e){return e.branchset?0:1})).sort((function(e,t){return Object(tt.a)(e.data.length||1,t.data.length||1)}));if(e.showOnly){var n=t.find((function(t){return t.data.id===e.showOnly}));n&&(t=n)}return e.collapsed.length&&e.collapsed.map((function(e){return t.find((function(t){return t.data.id===e}))})).filter((function(e){return!!e})).map((function(e){return Ct(e)})),t},get structures(){var e;return(null===(e=this.MSA)||void 0===e?void 0:e.getStructures())||{}},get inverseStructures(){var e=Object.entries(this.structures).map((function(e){var t=e[0];return e[1].map((function(e){return[e.pdb,{id:t}]}))})).flat();return Object.fromEntries(e)},get msaAreaWidth(){return e.width-e.treeAreaWidth},get blanks(){for(var e,t=this,n=[],r=this.hierarchy.leaves().map((function(e){var n,r=e.data;return null===(n=t.MSA)||void 0===n?void 0:n.getRow(r.name)})).filter((function(e){return!!e})),o=0;o<(null===(e=r[0])||void 0===e?void 0:e.length);o++){for(var a=0,i=0;i<r.length;i++)"-"===r[i][o]&&a++;a===r.length&&n.push(o)}return n},get rows(){var e=this;return this.hierarchy.leaves().map((function(t){var n,r=t.data;return[r.name,null===(n=e.MSA)||void 0===n?void 0:n.getRow(r.name)]})).filter((function(e){return!!e[1]}))},get columns(){var e=this.rows,t=this.columns2d;return Object.fromEntries(e.map((function(e,n){return[e[0],t[n]]})))},get columns2d(){for(var e=this.rows.map((function(e){return e[1]})),t=[],n=0;n<e.length;n++)t.push(At(this.blanks,e[n]));return t},get colStats(){for(var e=[],t=this.columns2d,n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++){var o=e[r]||{};o[t[n][r]]||(o[t[n][r]]=0),o[t[n][r]]++,e[r]=o}return e},get hierarchy(){var t=this.root;return Object($e.a)().size([this.totalHeight,e.treeWidth]).separation((function(){return 1}))(t),Lt(t,t.data.length=0,e.treeWidth/jt(t)),t},get totalHeight(){return this.root.leaves().length*e.rowHeight}}})).actions((function(e){return{addUniprotTrack:function(t){e.boxTracks.find((function(e){return e.name===t.name}))?e.turnedOffTracks.has(t.name)&&this.toggleTrack(t.name):e.boxTracks.push(Et(Et({},t),{id:t.name,associatedRowName:t.name}))},doScrollY:function(t){e.scrollY=Pt(10-e.totalHeight,e.scrollY+t,0)},doScrollX:function(t){e.scrollX=Pt(-e.numColumns+(e.msaAreaWidth-100),e.scrollX+t,0)},setMouseoveredColumn:function(t,n,r){var o,a=0,i=0,l=(e.inverseStructures[r.slice(0,-4)]||{}).id,c=null===(o=e.MSA)||void 0===o?void 0:o.getRow(l);if(c){for(i=0;i<c.length&&a<t;i++)"-"!==c[i]&&a++;e.mouseCol=a+1}else e.mouseCol=void 0},toggleTrack:function(t){e.turnedOffTracks.has(t)?e.turnedOffTracks.delete(t):e.turnedOffTracks.set(t,!0)}}})).views((function(e){return{get secondaryStructureConsensus(){var t;return null===(t=e.MSA)||void 0===t?void 0:t.secondaryStructureConsensus},get seqConsensus(){var t;return null===(t=e.MSA)||void 0===t?void 0:t.seqConsensus},get conservation(){var t=e.columns2d;if(t.length)for(var n=0;n<t[0].length;n++)for(var r=[],o=0;o<t.length;o++)r.push(t[o][n]);return["a"]},get tracks(){var t=e.blanks,n=e.MSA?e.MSA.tracks.map((function(n){var r=n.data;return{model:Et(Et({},n),{data:r?At(t,r):void 0,height:e.rowHeight}),ReactComponent:vt}})):[],r=e.boxTracks.filter((function(t){return!!e.rows.find((function(e){return e[0]===t.name}))})).map((function(e){return{model:e,ReactComponent:gt}})),o=e.annotatedRegions.length>0?[{model:{features:e.annotatedRegions,height:100,id:"annotations",name:"User-created annotations",data:e.annotatedRegions.map((function(e){var t=e.attributes?Object.entries(e.attributes).map((function(e){return e[0]+"="+e[1].join(",")})).join(";"):".";return["MSA_refcoord",".",".",e.start,e.end,".",".",".",t].join("\t")})).join("\n")},ReactComponent:gt}]:[];return Ot(Ot(Ot([],n,!0),r,!0),o,!0)},get turnedOnTracks(){return this.tracks.filter((function(t){return!e.turnedOffTracks.has(t.model.id)}))},pxToBp:function(t){return Math.floor((t-e.scrollX)/e.colWidth)},rowSpecificBpToPx:function(t,n){var r,o=e.rowNames,a=e.rows,i=e.blanks,l=a[o.indexOf(t)][1],c=n-((null===(r=e.getRowDetails(t).range)||void 0===r?void 0:r.start)||0);if(c<0)return 0;for(var s=0,u=0;u<l.length&&("-"===l[u]||s++!==c);u++);for(var f=0,d=0;d<l.length;d++)-1!==i.indexOf(d)&&d<u+1&&f++;return u-f},globalBpToPx:function(t){for(var n,r=0,o=0;o<(null===(n=e.rows[0])||void 0===n?void 0:n[1].length);o++)-1!==e.blanks.indexOf(o)&&o<t+1&&r++;return t-r},relativePxToBp:function(t,n){for(var r=e.rowNames,o=e.rows[r.indexOf(t)][1],a=0,i=0;i<n;i++)if("-"!==o[i])a++;else if(a>=n)break;return a},getPos:function(t){for(var n=0,r=0,o=0;r<t;r++,n++)for(;n===e.blanks[o];)o++,n++;return n}}})).actions((function(e){return{addAnnotation:function(t,n,r){e.annotatedRegions.push({start:e.getPos(t),end:e.getPos(n),attributes:r})},setOffsets:function(t,n){e.annotPos={left:t,right:n}},clearAnnotPos:function(){e.annotPos=void 0}}})),kt=c.types.snapshotProcessor(c.types.compose(at.a,Rt),{postProcessor:function(e){var t=e.data,n=t.tree,r=t.msa,o=wt(e,["data"]);return Et({data:Et(Et({},!e.treeFilehandle&&{tree:n}),!e.msaFilehandle&&{msa:r})},o)}}),xt=n(238),Nt=n(633),Dt=n(389),Ft=c.types.model({msaview:kt,nglSelection:c.types.optional(c.types.string,"")}).actions((function(e){return{setNGLSelection:function(t){e.nglSelection=t}}})),It=n(91),Ht=n.n(It),Yt=n(390),Vt=n(13),Wt=n(187),Gt=n(31);Wt.a.add("data",new Wt.c("https://files.rcsb.org/download/"));var Xt=Object(l.observer)((function(e){var t=e.model,n=Object(r.useRef)([]),o=Object(r.useState)("cartoon"),a=Object(Vt.a)(o,2),i=a[0],l=a[1],s=Object(r.useState)([]),u=Object(Vt.a)(s,2),f=u[0],d=u[1],h=Object(r.useState)(),v=Object(Vt.a)(h,2),p=v[0],b=v[1],g=Object(r.useState)(!1),E=Object(Vt.a)(g,2),S=E[0],y=E[1],w=t.msaview,O=t.nglSelection,A=w.selectedStructures,L=w.mouseCol,j=Object(c.getSnapshot)(A),C=Object(r.useCallback)((function(e){if(e){var t=new Wt.b(e);b(t)}}),[]);return Object(r.useEffect)((function(){return function(){return null===p||void 0===p?void 0:p.dispose()}}),[p]),Object(r.useEffect)((function(){j.length&&p&&Object(Yt.a)(Ht.a.mark((function e(){var t;return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("resize",(function(){p.handleResize()})),e.next=3,Promise.all(j.map((function(e){return p.loadFile("data://".concat(e.structure.pdb,".pdb"))})));case 3:t=e.sent,d(t),p.signals.hovered.add((function(e){if(e&&(e.atom||e.bond)){var t,n=e.atom||e.closestBondAtom;w.setMouseoveredColumn(n.resno-(null===(t=j[0])||void 0===t?void 0:t.structure.startPos),n.chainname,e.picker.structure.name)}}));case 6:case"end":return e.stop()}}),e)})))()}),[w,j,p]),Object(r.useEffect)((function(){p&&(f.forEach((function(e){e.removeAllRepresentations(),e.addRepresentation(i,{sele:O})})),p.autoView())}),[i,f,p,O]),Object(r.useEffect)((function(){j.length&&!S&&f.forEach((function(e,r){if(n.current.length&&e.removeAnnotation(n.current[r]),n.current=[],void 0!==L){var o=function(e,t,n,r,o){for(var a=n.residueStore.count,i=n.getResidueProxy(),l=e.msaview.relativePxToBp(t,r),c=0;c<a;++c)if(i.index=c,i.resno===l+o-1)return i}(t,j[r].id,e.structure,L,j[0].structure.startPos);if(o){var a=e.structure.getAtomProxy();a.index=o.atomOffset,n.current.push(e.addAnnotation(a.positionToVector3(),o.qualifiedName()))}}p.viewer.requestRender()}))}),[t,L,j,null===p||void 0===p?void 0:p.viewer,f,S]),A.length?Object(Gt.jsxs)("div",{style:{padding:20},children:[Object(Gt.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(Gt.jsx)(m.a,{onClick:function(){return w.clearSelectedStructures()},variant:"contained",children:"Clear"}),Object(Gt.jsx)("div",{style:{width:20}}),Object(Gt.jsxs)(fe.a,{value:i,onChange:function(e){return l(e.target.value)},children:[Object(Gt.jsx)(P.a,{value:"cartoon",children:"cartoon"}),Object(Gt.jsx)(P.a,{value:"ball+stick",children:"ball+stick"})]}),Object(Gt.jsx)("div",{style:{width:20}}),Object(Gt.jsx)(he.a,{variant:"outlined",label:"Selection",value:O,onChange:function(e){return t.setNGLSelection(e.target.value)}})]}),Object(Gt.jsx)("div",{ref:C,style:{width:600,height:400},onMouseEnter:function(){return y(!0)},onMouseLeave:function(){return y(!1)}})]}):null})),Bt=new URLSearchParams(window.location.search).get("data"),Ut=Ft.create(Bt?JSON.parse(Bt):{msaview:{type:"MsaView"}});Ut.msaview.setWidth(window.innerWidth),Object(c.onSnapshot)(Ut,Object(Dt.throttle)((function(e){var t=new URL(window.document.URL);t.searchParams.set("data",JSON.stringify(e)),window.history.replaceState(null,"",t.toString())}),500)),window.addEventListener("resize",(function(){Ut.msaview.setWidth(window.innerWidth)}));var _t=Object(l.observer)((function(e){var t=e.model,n=t.msaview;return Object(Gt.jsxs)("div",{children:[Object(Gt.jsx)("div",{style:{border:"1px solid black",margin:20},children:Object(Gt.jsx)(Je,{model:n})}),Object(Gt.jsx)(Xt,{model:t})]})})),Kt=function(){var e=Object(xt.createJBrowseTheme)();return Object(Gt.jsx)(Nt.a,{theme:e,children:Object(Gt.jsx)(_t,{model:Ut})})},qt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,653)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))};i.a.render(Object(Gt.jsx)(o.a.StrictMode,{children:Object(Gt.jsx)(Kt,{})}),document.getElementById("root")),qt()}},[[601,1,2]]]);
//# sourceMappingURL=main.33f08a03.chunk.js.map