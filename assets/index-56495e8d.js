function Pae(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function os(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var IG={exports:{}},oP={},RG={exports:{}},Sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_=Symbol.for("react.element"),Mae=Symbol.for("react.portal"),Eae=Symbol.for("react.fragment"),Tae=Symbol.for("react.strict_mode"),Oae=Symbol.for("react.profiler"),Iae=Symbol.for("react.provider"),Rae=Symbol.for("react.context"),kae=Symbol.for("react.forward_ref"),Lae=Symbol.for("react.suspense"),$ae=Symbol.for("react.memo"),Dae=Symbol.for("react.lazy"),ZN=Symbol.iterator;function Bae(e){return e===null||typeof e!="object"?null:(e=ZN&&e[ZN]||e["@@iterator"],typeof e=="function"?e:null)}var kG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LG=Object.assign,$G={};function Kv(e,t,n){this.props=e,this.context=t,this.refs=$G,this.updater=n||kG}Kv.prototype.isReactComponent={};Kv.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Kv.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function DG(){}DG.prototype=Kv.prototype;function j$(e,t,n){this.props=e,this.context=t,this.refs=$G,this.updater=n||kG}var z$=j$.prototype=new DG;z$.constructor=j$;LG(z$,Kv.prototype);z$.isPureReactComponent=!0;var JN=Array.isArray,BG=Object.prototype.hasOwnProperty,U$={current:null},NG={key:!0,ref:!0,__self:!0,__source:!0};function FG(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)BG.call(t,r)&&!NG.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),c=0;c<s;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:l_,type:e,key:o,ref:a,props:i,_owner:U$.current}}function Nae(e,t){return{$$typeof:l_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function V$(e){return typeof e=="object"&&e!==null&&e.$$typeof===l_}function Fae(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var QN=/\/+/g;function AT(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fae(""+e.key):t.toString(36)}function Y2(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case l_:case Mae:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+AT(a,0):r,JN(i)?(n="",e!=null&&(n=e.replace(QN,"$&/")+"/"),Y2(i,t,n,"",function(c){return c})):i!=null&&(V$(i)&&(i=Nae(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(QN,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",JN(e))for(var s=0;s<e.length;s++){o=e[s];var l=r+AT(o,s);a+=Y2(o,t,n,l,i)}else if(l=Bae(e),typeof l=="function")for(e=l.call(e),s=0;!(o=e.next()).done;)o=o.value,l=r+AT(o,s++),a+=Y2(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Yx(e,t,n){if(e==null)return e;var r=[],i=0;return Y2(e,r,"","",function(o){return t.call(n,o,i++)}),r}function jae(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ko={current:null},K2={transition:null},zae={ReactCurrentDispatcher:Ko,ReactCurrentBatchConfig:K2,ReactCurrentOwner:U$};Sn.Children={map:Yx,forEach:function(e,t,n){Yx(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Yx(e,function(){t++}),t},toArray:function(e){return Yx(e,function(t){return t})||[]},only:function(e){if(!V$(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Sn.Component=Kv;Sn.Fragment=Eae;Sn.Profiler=Oae;Sn.PureComponent=j$;Sn.StrictMode=Tae;Sn.Suspense=Lae;Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zae;Sn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=LG({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=U$.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)BG.call(t,l)&&!NG.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var c=0;c<l;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:l_,type:e.type,key:i,ref:o,props:r,_owner:a}};Sn.createContext=function(e){return e={$$typeof:Rae,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Iae,_context:e},e.Consumer=e};Sn.createElement=FG;Sn.createFactory=function(e){var t=FG.bind(null,e);return t.type=e,t};Sn.createRef=function(){return{current:null}};Sn.forwardRef=function(e){return{$$typeof:kae,render:e}};Sn.isValidElement=V$;Sn.lazy=function(e){return{$$typeof:Dae,_payload:{_status:-1,_result:e},_init:jae}};Sn.memo=function(e,t){return{$$typeof:$ae,type:e,compare:t===void 0?null:t}};Sn.startTransition=function(e){var t=K2.transition;K2.transition={};try{e()}finally{K2.transition=t}};Sn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Sn.useCallback=function(e,t){return Ko.current.useCallback(e,t)};Sn.useContext=function(e){return Ko.current.useContext(e)};Sn.useDebugValue=function(){};Sn.useDeferredValue=function(e){return Ko.current.useDeferredValue(e)};Sn.useEffect=function(e,t){return Ko.current.useEffect(e,t)};Sn.useId=function(){return Ko.current.useId()};Sn.useImperativeHandle=function(e,t,n){return Ko.current.useImperativeHandle(e,t,n)};Sn.useInsertionEffect=function(e,t){return Ko.current.useInsertionEffect(e,t)};Sn.useLayoutEffect=function(e,t){return Ko.current.useLayoutEffect(e,t)};Sn.useMemo=function(e,t){return Ko.current.useMemo(e,t)};Sn.useReducer=function(e,t,n){return Ko.current.useReducer(e,t,n)};Sn.useRef=function(e){return Ko.current.useRef(e)};Sn.useState=function(e){return Ko.current.useState(e)};Sn.useSyncExternalStore=function(e,t,n){return Ko.current.useSyncExternalStore(e,t,n)};Sn.useTransition=function(){return Ko.current.useTransition()};Sn.version="18.2.0";RG.exports=Sn;var $=RG.exports;const Be=xh($),ZS=Pae({__proto__:null,default:Be},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uae=$,Vae=Symbol.for("react.element"),Hae=Symbol.for("react.fragment"),Gae=Object.prototype.hasOwnProperty,Wae=Uae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qae={key:!0,ref:!0,__self:!0,__source:!0};function jG(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Gae.call(t,r)&&!qae.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Vae,type:e,key:o,ref:a,props:i,_owner:Wae.current}}oP.Fragment=Hae;oP.jsx=jG;oP.jsxs=jG;IG.exports=oP;var G=IG.exports,pk={},zG={exports:{}},as={},UG={exports:{}},VG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,H){var J=N.length;N.push(H);e:for(;0<J;){var ne=J-1>>>1,oe=N[ne];if(0<i(oe,H))N[ne]=H,N[J]=oe,J=ne;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var H=N[0],J=N.pop();if(J!==H){N[0]=J;e:for(var ne=0,oe=N.length,Z=oe>>>1;ne<Z;){var ce=2*(ne+1)-1,se=N[ce],Y=ce+1,he=N[Y];if(0>i(se,J))Y<oe&&0>i(he,se)?(N[ne]=he,N[Y]=J,ne=Y):(N[ne]=se,N[ce]=J,ne=ce);else if(Y<oe&&0>i(he,J))N[ne]=he,N[Y]=J,ne=Y;else break e}}return H}function i(N,H){var J=N.sortIndex-H.sortIndex;return J!==0?J:N.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],c=[],u=1,f=null,d=3,p=!1,h=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(N){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=N)r(c),H.sortIndex=H.expirationTime,t(l,H);else break;H=n(c)}}function b(N){if(g=!1,_(N),!h)if(n(l)!==null)h=!0,D(x);else{var H=n(c);H!==null&&z(b,H.startTime-N)}}function x(N,H){h=!1,g&&(g=!1,m(A),A=-1),p=!0;var J=d;try{for(_(H),f=n(l);f!==null&&(!(f.expirationTime>H)||N&&!O());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,d=f.priorityLevel;var oe=ne(f.expirationTime<=H);H=e.unstable_now(),typeof oe=="function"?f.callback=oe:f===n(l)&&r(l),_(H)}else r(l);f=n(l)}if(f!==null)var Z=!0;else{var ce=n(c);ce!==null&&z(b,ce.startTime-H),Z=!1}return Z}finally{f=null,d=J,p=!1}}var w=!1,S=null,A=-1,C=5,k=-1;function O(){return!(e.unstable_now()-k<C)}function T(){if(S!==null){var N=e.unstable_now();k=N;var H=!0;try{H=S(!0,N)}finally{H?B():(w=!1,S=null)}}else w=!1}var B;if(typeof y=="function")B=function(){y(T)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,P=R.port2;R.port1.onmessage=T,B=function(){P.postMessage(null)}}else B=function(){v(T,0)};function D(N){S=N,w||(w=!0,B())}function z(N,H){A=v(function(){N(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){h||p||(h=!0,D(x))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(N){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var J=d;d=H;try{return N()}finally{d=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,H){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var J=d;d=N;try{return H()}finally{d=J}},e.unstable_scheduleCallback=function(N,H,J){var ne=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ne+J:ne):J=ne,N){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=J+oe,N={id:u++,callback:H,priorityLevel:N,startTime:J,expirationTime:oe,sortIndex:-1},J>ne?(N.sortIndex=J,t(c,N),n(l)===null&&N===n(c)&&(g?(m(A),A=-1):g=!0,z(b,J-ne))):(N.sortIndex=oe,t(l,N),h||p||(h=!0,D(x))),N},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(N){var H=d;return function(){var J=d;d=H;try{return N.apply(this,arguments)}finally{d=J}}}})(VG);UG.exports=VG;var Xae=UG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HG=$,Ka=Xae;function gt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var GG=new Set,kb={};function wh(e,t){Bg(e,t),Bg(e+"Capture",t)}function Bg(e,t){for(kb[e]=t,e=0;e<t.length;e++)GG.add(t[e])}var Cu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hk=Object.prototype.hasOwnProperty,Yae=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eF={},tF={};function Kae(e){return hk.call(tF,e)?!0:hk.call(eF,e)?!1:Yae.test(e)?tF[e]=!0:(eF[e]=!0,!1)}function Zae(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Jae(e,t,n,r){if(t===null||typeof t>"u"||Zae(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Zo(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var lo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lo[e]=new Zo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lo[t]=new Zo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lo[e]=new Zo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lo[e]=new Zo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lo[e]=new Zo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lo[e]=new Zo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lo[e]=new Zo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lo[e]=new Zo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lo[e]=new Zo(e,5,!1,e.toLowerCase(),null,!1,!1)});var H$=/[\-:]([a-z])/g;function G$(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(H$,G$);lo[t]=new Zo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(H$,G$);lo[t]=new Zo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(H$,G$);lo[t]=new Zo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lo[e]=new Zo(e,1,!1,e.toLowerCase(),null,!1,!1)});lo.xlinkHref=new Zo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lo[e]=new Zo(e,1,!1,e.toLowerCase(),null,!0,!0)});function W$(e,t,n,r){var i=lo.hasOwnProperty(t)?lo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Jae(t,n,i,r)&&(n=null),r||i===null?Kae(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Vu=HG.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kx=Symbol.for("react.element"),Wm=Symbol.for("react.portal"),qm=Symbol.for("react.fragment"),q$=Symbol.for("react.strict_mode"),mk=Symbol.for("react.profiler"),WG=Symbol.for("react.provider"),qG=Symbol.for("react.context"),X$=Symbol.for("react.forward_ref"),gk=Symbol.for("react.suspense"),vk=Symbol.for("react.suspense_list"),Y$=Symbol.for("react.memo"),Ef=Symbol.for("react.lazy"),XG=Symbol.for("react.offscreen"),nF=Symbol.iterator;function L0(e){return e===null||typeof e!="object"?null:(e=nF&&e[nF]||e["@@iterator"],typeof e=="function"?e:null)}var Hr=Object.assign,PT;function My(e){if(PT===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);PT=t&&t[1]||""}return`
`+PT+e}var MT=!1;function ET(e,t){if(!e||MT)return"";MT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s);break}}}finally{MT=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?My(e):""}function Qae(e){switch(e.tag){case 5:return My(e.type);case 16:return My("Lazy");case 13:return My("Suspense");case 19:return My("SuspenseList");case 0:case 2:case 15:return e=ET(e.type,!1),e;case 11:return e=ET(e.type.render,!1),e;case 1:return e=ET(e.type,!0),e;default:return""}}function yk(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qm:return"Fragment";case Wm:return"Portal";case mk:return"Profiler";case q$:return"StrictMode";case gk:return"Suspense";case vk:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case qG:return(e.displayName||"Context")+".Consumer";case WG:return(e._context.displayName||"Context")+".Provider";case X$:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y$:return t=e.displayName||null,t!==null?t:yk(e.type)||"Memo";case Ef:t=e._payload,e=e._init;try{return yk(e(t))}catch{}}return null}function ese(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yk(t);case 8:return t===q$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function cd(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function YG(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tse(e){var t=YG(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zx(e){e._valueTracker||(e._valueTracker=tse(e))}function KG(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=YG(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function JS(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function bk(e,t){var n=t.checked;return Hr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function rF(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=cd(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ZG(e,t){t=t.checked,t!=null&&W$(e,"checked",t,!1)}function _k(e,t){ZG(e,t);var n=cd(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xk(e,t.type,n):t.hasOwnProperty("defaultValue")&&xk(e,t.type,cd(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function iF(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function xk(e,t,n){(t!=="number"||JS(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ey=Array.isArray;function vg(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+cd(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function wk(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(gt(91));return Hr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oF(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(gt(92));if(Ey(n)){if(1<n.length)throw Error(gt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:cd(n)}}function JG(e,t){var n=cd(t.value),r=cd(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function aF(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function QG(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sk(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?QG(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jx,eW=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jx=Jx||document.createElement("div"),Jx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Lb(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nse=["Webkit","ms","Moz","O"];Object.keys(Jy).forEach(function(e){nse.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jy[t]=Jy[e]})});function tW(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jy.hasOwnProperty(e)&&Jy[e]?(""+t).trim():t+"px"}function nW(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=tW(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var rse=Hr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ck(e,t){if(t){if(rse[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(gt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(gt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(gt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(gt(62))}}function Ak(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pk=null;function K$(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mk=null,yg=null,bg=null;function sF(e){if(e=f_(e)){if(typeof Mk!="function")throw Error(gt(280));var t=e.stateNode;t&&(t=uP(t),Mk(e.stateNode,e.type,t))}}function rW(e){yg?bg?bg.push(e):bg=[e]:yg=e}function iW(){if(yg){var e=yg,t=bg;if(bg=yg=null,sF(e),t)for(e=0;e<t.length;e++)sF(t[e])}}function oW(e,t){return e(t)}function aW(){}var TT=!1;function sW(e,t,n){if(TT)return e(t,n);TT=!0;try{return oW(e,t,n)}finally{TT=!1,(yg!==null||bg!==null)&&(aW(),iW())}}function $b(e,t){var n=e.stateNode;if(n===null)return null;var r=uP(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(gt(231,t,typeof n));return n}var Ek=!1;if(Cu)try{var $0={};Object.defineProperty($0,"passive",{get:function(){Ek=!0}}),window.addEventListener("test",$0,$0),window.removeEventListener("test",$0,$0)}catch{Ek=!1}function ise(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Qy=!1,QS=null,eC=!1,Tk=null,ose={onError:function(e){Qy=!0,QS=e}};function ase(e,t,n,r,i,o,a,s,l){Qy=!1,QS=null,ise.apply(ose,arguments)}function sse(e,t,n,r,i,o,a,s,l){if(ase.apply(this,arguments),Qy){if(Qy){var c=QS;Qy=!1,QS=null}else throw Error(gt(198));eC||(eC=!0,Tk=c)}}function Sh(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function lW(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lF(e){if(Sh(e)!==e)throw Error(gt(188))}function lse(e){var t=e.alternate;if(!t){if(t=Sh(e),t===null)throw Error(gt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return lF(i),e;if(o===r)return lF(i),t;o=o.sibling}throw Error(gt(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(gt(189))}}if(n.alternate!==r)throw Error(gt(190))}if(n.tag!==3)throw Error(gt(188));return n.stateNode.current===n?e:t}function cW(e){return e=lse(e),e!==null?uW(e):null}function uW(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uW(e);if(t!==null)return t;e=e.sibling}return null}var fW=Ka.unstable_scheduleCallback,cF=Ka.unstable_cancelCallback,cse=Ka.unstable_shouldYield,use=Ka.unstable_requestPaint,ri=Ka.unstable_now,fse=Ka.unstable_getCurrentPriorityLevel,Z$=Ka.unstable_ImmediatePriority,dW=Ka.unstable_UserBlockingPriority,tC=Ka.unstable_NormalPriority,dse=Ka.unstable_LowPriority,pW=Ka.unstable_IdlePriority,aP=null,vc=null;function pse(e){if(vc&&typeof vc.onCommitFiberRoot=="function")try{vc.onCommitFiberRoot(aP,e,void 0,(e.current.flags&128)===128)}catch{}}var vl=Math.clz32?Math.clz32:gse,hse=Math.log,mse=Math.LN2;function gse(e){return e>>>=0,e===0?32:31-(hse(e)/mse|0)|0}var Qx=64,ew=4194304;function Ty(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nC(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Ty(s):(o&=a,o!==0&&(r=Ty(o)))}else a=n&~i,a!==0?r=Ty(a):o!==0&&(r=Ty(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vl(t),i=1<<n,r|=e[n],t&=~i;return r}function vse(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yse(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-vl(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=vse(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}function Ok(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hW(){var e=Qx;return Qx<<=1,!(Qx&4194240)&&(Qx=64),e}function OT(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function c_(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vl(t),e[t]=n}function bse(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vl(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function J$(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vl(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var tr=0;function mW(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gW,Q$,vW,yW,bW,Ik=!1,tw=[],Vf=null,Hf=null,Gf=null,Db=new Map,Bb=new Map,If=[],_se="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uF(e,t){switch(e){case"focusin":case"focusout":Vf=null;break;case"dragenter":case"dragleave":Hf=null;break;case"mouseover":case"mouseout":Gf=null;break;case"pointerover":case"pointerout":Db.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bb.delete(t.pointerId)}}function D0(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=f_(t),t!==null&&Q$(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function xse(e,t,n,r,i){switch(t){case"focusin":return Vf=D0(Vf,e,t,n,r,i),!0;case"dragenter":return Hf=D0(Hf,e,t,n,r,i),!0;case"mouseover":return Gf=D0(Gf,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Db.set(o,D0(Db.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Bb.set(o,D0(Bb.get(o)||null,e,t,n,r,i)),!0}return!1}function _W(e){var t=vp(e.target);if(t!==null){var n=Sh(t);if(n!==null){if(t=n.tag,t===13){if(t=lW(n),t!==null){e.blockedOn=t,bW(e.priority,function(){vW(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Z2(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Rk(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Pk=r,n.target.dispatchEvent(r),Pk=null}else return t=f_(n),t!==null&&Q$(t),e.blockedOn=n,!1;t.shift()}return!0}function fF(e,t,n){Z2(e)&&n.delete(t)}function wse(){Ik=!1,Vf!==null&&Z2(Vf)&&(Vf=null),Hf!==null&&Z2(Hf)&&(Hf=null),Gf!==null&&Z2(Gf)&&(Gf=null),Db.forEach(fF),Bb.forEach(fF)}function B0(e,t){e.blockedOn===t&&(e.blockedOn=null,Ik||(Ik=!0,Ka.unstable_scheduleCallback(Ka.unstable_NormalPriority,wse)))}function Nb(e){function t(i){return B0(i,e)}if(0<tw.length){B0(tw[0],e);for(var n=1;n<tw.length;n++){var r=tw[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Vf!==null&&B0(Vf,e),Hf!==null&&B0(Hf,e),Gf!==null&&B0(Gf,e),Db.forEach(t),Bb.forEach(t),n=0;n<If.length;n++)r=If[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<If.length&&(n=If[0],n.blockedOn===null);)_W(n),n.blockedOn===null&&If.shift()}var _g=Vu.ReactCurrentBatchConfig,rC=!0;function Sse(e,t,n,r){var i=tr,o=_g.transition;_g.transition=null;try{tr=1,e4(e,t,n,r)}finally{tr=i,_g.transition=o}}function Cse(e,t,n,r){var i=tr,o=_g.transition;_g.transition=null;try{tr=4,e4(e,t,n,r)}finally{tr=i,_g.transition=o}}function e4(e,t,n,r){if(rC){var i=Rk(e,t,n,r);if(i===null)jT(e,t,r,iC,n),uF(e,r);else if(xse(i,e,t,n,r))r.stopPropagation();else if(uF(e,r),t&4&&-1<_se.indexOf(e)){for(;i!==null;){var o=f_(i);if(o!==null&&gW(o),o=Rk(e,t,n,r),o===null&&jT(e,t,r,iC,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else jT(e,t,r,null,n)}}var iC=null;function Rk(e,t,n,r){if(iC=null,e=K$(r),e=vp(e),e!==null)if(t=Sh(e),t===null)e=null;else if(n=t.tag,n===13){if(e=lW(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return iC=e,null}function xW(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fse()){case Z$:return 1;case dW:return 4;case tC:case dse:return 16;case pW:return 536870912;default:return 16}default:return 16}}var Df=null,t4=null,J2=null;function wW(){if(J2)return J2;var e,t=t4,n=t.length,r,i="value"in Df?Df.value:Df.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return J2=i.slice(e,1<r?1-r:void 0)}function Q2(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nw(){return!0}function dF(){return!1}function ss(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?nw:dF,this.isPropagationStopped=dF,this}return Hr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nw)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nw)},persist:function(){},isPersistent:nw}),t}var Zv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n4=ss(Zv),u_=Hr({},Zv,{view:0,detail:0}),Ase=ss(u_),IT,RT,N0,sP=Hr({},u_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:r4,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==N0&&(N0&&e.type==="mousemove"?(IT=e.screenX-N0.screenX,RT=e.screenY-N0.screenY):RT=IT=0,N0=e),IT)},movementY:function(e){return"movementY"in e?e.movementY:RT}}),pF=ss(sP),Pse=Hr({},sP,{dataTransfer:0}),Mse=ss(Pse),Ese=Hr({},u_,{relatedTarget:0}),kT=ss(Ese),Tse=Hr({},Zv,{animationName:0,elapsedTime:0,pseudoElement:0}),Ose=ss(Tse),Ise=Hr({},Zv,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rse=ss(Ise),kse=Hr({},Zv,{data:0}),hF=ss(kse),Lse={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$se={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dse={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bse(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dse[e])?!!t[e]:!1}function r4(){return Bse}var Nse=Hr({},u_,{key:function(e){if(e.key){var t=Lse[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Q2(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$se[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:r4,charCode:function(e){return e.type==="keypress"?Q2(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Q2(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fse=ss(Nse),jse=Hr({},sP,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mF=ss(jse),zse=Hr({},u_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:r4}),Use=ss(zse),Vse=Hr({},Zv,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hse=ss(Vse),Gse=Hr({},sP,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wse=ss(Gse),qse=[9,13,27,32],i4=Cu&&"CompositionEvent"in window,eb=null;Cu&&"documentMode"in document&&(eb=document.documentMode);var Xse=Cu&&"TextEvent"in window&&!eb,SW=Cu&&(!i4||eb&&8<eb&&11>=eb),gF=String.fromCharCode(32),vF=!1;function CW(e,t){switch(e){case"keyup":return qse.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AW(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xm=!1;function Yse(e,t){switch(e){case"compositionend":return AW(t);case"keypress":return t.which!==32?null:(vF=!0,gF);case"textInput":return e=t.data,e===gF&&vF?null:e;default:return null}}function Kse(e,t){if(Xm)return e==="compositionend"||!i4&&CW(e,t)?(e=wW(),J2=t4=Df=null,Xm=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return SW&&t.locale!=="ko"?null:t.data;default:return null}}var Zse={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yF(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zse[e.type]:t==="textarea"}function PW(e,t,n,r){rW(r),t=oC(t,"onChange"),0<t.length&&(n=new n4("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var tb=null,Fb=null;function Jse(e){BW(e,0)}function lP(e){var t=Zm(e);if(KG(t))return e}function Qse(e,t){if(e==="change")return t}var MW=!1;if(Cu){var LT;if(Cu){var $T="oninput"in document;if(!$T){var bF=document.createElement("div");bF.setAttribute("oninput","return;"),$T=typeof bF.oninput=="function"}LT=$T}else LT=!1;MW=LT&&(!document.documentMode||9<document.documentMode)}function _F(){tb&&(tb.detachEvent("onpropertychange",EW),Fb=tb=null)}function EW(e){if(e.propertyName==="value"&&lP(Fb)){var t=[];PW(t,Fb,e,K$(e)),sW(Jse,t)}}function ele(e,t,n){e==="focusin"?(_F(),tb=t,Fb=n,tb.attachEvent("onpropertychange",EW)):e==="focusout"&&_F()}function tle(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lP(Fb)}function nle(e,t){if(e==="click")return lP(t)}function rle(e,t){if(e==="input"||e==="change")return lP(t)}function ile(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Al=typeof Object.is=="function"?Object.is:ile;function jb(e,t){if(Al(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hk.call(t,i)||!Al(e[i],t[i]))return!1}return!0}function xF(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function wF(e,t){var n=xF(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xF(n)}}function TW(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?TW(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function OW(){for(var e=window,t=JS();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=JS(e.document)}return t}function o4(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ole(e){var t=OW(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&TW(n.ownerDocument.documentElement,n)){if(r!==null&&o4(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=wF(n,o);var a=wF(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ale=Cu&&"documentMode"in document&&11>=document.documentMode,Ym=null,kk=null,nb=null,Lk=!1;function SF(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Lk||Ym==null||Ym!==JS(r)||(r=Ym,"selectionStart"in r&&o4(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nb&&jb(nb,r)||(nb=r,r=oC(kk,"onSelect"),0<r.length&&(t=new n4("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ym)))}function rw(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Km={animationend:rw("Animation","AnimationEnd"),animationiteration:rw("Animation","AnimationIteration"),animationstart:rw("Animation","AnimationStart"),transitionend:rw("Transition","TransitionEnd")},DT={},IW={};Cu&&(IW=document.createElement("div").style,"AnimationEvent"in window||(delete Km.animationend.animation,delete Km.animationiteration.animation,delete Km.animationstart.animation),"TransitionEvent"in window||delete Km.transitionend.transition);function cP(e){if(DT[e])return DT[e];if(!Km[e])return e;var t=Km[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in IW)return DT[e]=t[n];return e}var RW=cP("animationend"),kW=cP("animationiteration"),LW=cP("animationstart"),$W=cP("transitionend"),DW=new Map,CF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wd(e,t){DW.set(e,t),wh(t,[e])}for(var BT=0;BT<CF.length;BT++){var NT=CF[BT],sle=NT.toLowerCase(),lle=NT[0].toUpperCase()+NT.slice(1);wd(sle,"on"+lle)}wd(RW,"onAnimationEnd");wd(kW,"onAnimationIteration");wd(LW,"onAnimationStart");wd("dblclick","onDoubleClick");wd("focusin","onFocus");wd("focusout","onBlur");wd($W,"onTransitionEnd");Bg("onMouseEnter",["mouseout","mouseover"]);Bg("onMouseLeave",["mouseout","mouseover"]);Bg("onPointerEnter",["pointerout","pointerover"]);Bg("onPointerLeave",["pointerout","pointerover"]);wh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wh("onBeforeInput",["compositionend","keypress","textInput","paste"]);wh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oy="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cle=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oy));function AF(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,sse(r,t,void 0,e),e.currentTarget=null}function BW(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;AF(i,s,c),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;AF(i,s,c),o=l}}}if(eC)throw e=Tk,eC=!1,Tk=null,e}function Sr(e,t){var n=t[Fk];n===void 0&&(n=t[Fk]=new Set);var r=e+"__bubble";n.has(r)||(NW(t,e,2,!1),n.add(r))}function FT(e,t,n){var r=0;t&&(r|=4),NW(n,e,r,t)}var iw="_reactListening"+Math.random().toString(36).slice(2);function zb(e){if(!e[iw]){e[iw]=!0,GG.forEach(function(n){n!=="selectionchange"&&(cle.has(n)||FT(n,!1,e),FT(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[iw]||(t[iw]=!0,FT("selectionchange",!1,t))}}function NW(e,t,n,r){switch(xW(t)){case 1:var i=Sse;break;case 4:i=Cse;break;default:i=e4}n=i.bind(null,t,n,e),i=void 0,!Ek||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function jT(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=vp(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}sW(function(){var c=o,u=K$(n),f=[];e:{var d=DW.get(e);if(d!==void 0){var p=n4,h=e;switch(e){case"keypress":if(Q2(n)===0)break e;case"keydown":case"keyup":p=Fse;break;case"focusin":h="focus",p=kT;break;case"focusout":h="blur",p=kT;break;case"beforeblur":case"afterblur":p=kT;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=pF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Mse;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=Use;break;case RW:case kW:case LW:p=Ose;break;case $W:p=Hse;break;case"scroll":p=Ase;break;case"wheel":p=Wse;break;case"copy":case"cut":case"paste":p=Rse;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=mF}var g=(t&4)!==0,v=!g&&e==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var y=c,_;y!==null;){_=y;var b=_.stateNode;if(_.tag===5&&b!==null&&(_=b,m!==null&&(b=$b(y,m),b!=null&&g.push(Ub(y,b,_)))),v)break;y=y.return}0<g.length&&(d=new p(d,h,null,n,u),f.push({event:d,listeners:g}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",d&&n!==Pk&&(h=n.relatedTarget||n.fromElement)&&(vp(h)||h[Au]))break e;if((p||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,p?(h=n.relatedTarget||n.toElement,p=c,h=h?vp(h):null,h!==null&&(v=Sh(h),h!==v||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=c),p!==h)){if(g=pF,b="onMouseLeave",m="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=mF,b="onPointerLeave",m="onPointerEnter",y="pointer"),v=p==null?d:Zm(p),_=h==null?d:Zm(h),d=new g(b,y+"leave",p,n,u),d.target=v,d.relatedTarget=_,b=null,vp(u)===c&&(g=new g(m,y+"enter",h,n,u),g.target=_,g.relatedTarget=v,b=g),v=b,p&&h)t:{for(g=p,m=h,y=0,_=g;_;_=qh(_))y++;for(_=0,b=m;b;b=qh(b))_++;for(;0<y-_;)g=qh(g),y--;for(;0<_-y;)m=qh(m),_--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=qh(g),m=qh(m)}g=null}else g=null;p!==null&&PF(f,d,p,g,!1),h!==null&&v!==null&&PF(f,v,h,g,!0)}}e:{if(d=c?Zm(c):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var x=Qse;else if(yF(d))if(MW)x=rle;else{x=tle;var w=ele}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=nle);if(x&&(x=x(e,c))){PW(f,x,n,u);break e}w&&w(e,d,c),e==="focusout"&&(w=d._wrapperState)&&w.controlled&&d.type==="number"&&xk(d,"number",d.value)}switch(w=c?Zm(c):window,e){case"focusin":(yF(w)||w.contentEditable==="true")&&(Ym=w,kk=c,nb=null);break;case"focusout":nb=kk=Ym=null;break;case"mousedown":Lk=!0;break;case"contextmenu":case"mouseup":case"dragend":Lk=!1,SF(f,n,u);break;case"selectionchange":if(ale)break;case"keydown":case"keyup":SF(f,n,u)}var S;if(i4)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Xm?CW(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(SW&&n.locale!=="ko"&&(Xm||A!=="onCompositionStart"?A==="onCompositionEnd"&&Xm&&(S=wW()):(Df=u,t4="value"in Df?Df.value:Df.textContent,Xm=!0)),w=oC(c,A),0<w.length&&(A=new hF(A,e,null,n,u),f.push({event:A,listeners:w}),S?A.data=S:(S=AW(n),S!==null&&(A.data=S)))),(S=Xse?Yse(e,n):Kse(e,n))&&(c=oC(c,"onBeforeInput"),0<c.length&&(u=new hF("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=S))}BW(f,t)})}function Ub(e,t,n){return{instance:e,listener:t,currentTarget:n}}function oC(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=$b(e,n),o!=null&&r.unshift(Ub(e,o,i)),o=$b(e,t),o!=null&&r.push(Ub(e,o,i))),e=e.return}return r}function qh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function PF(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&c!==null&&(s=c,i?(l=$b(n,o),l!=null&&a.unshift(Ub(n,l,s))):i||(l=$b(n,o),l!=null&&a.push(Ub(n,l,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ule=/\r\n?/g,fle=/\u0000|\uFFFD/g;function MF(e){return(typeof e=="string"?e:""+e).replace(ule,`
`).replace(fle,"")}function ow(e,t,n){if(t=MF(t),MF(e)!==t&&n)throw Error(gt(425))}function aC(){}var $k=null,Dk=null;function Bk(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nk=typeof setTimeout=="function"?setTimeout:void 0,dle=typeof clearTimeout=="function"?clearTimeout:void 0,EF=typeof Promise=="function"?Promise:void 0,ple=typeof queueMicrotask=="function"?queueMicrotask:typeof EF<"u"?function(e){return EF.resolve(null).then(e).catch(hle)}:Nk;function hle(e){setTimeout(function(){throw e})}function zT(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Nb(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Nb(t)}function Wf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function TF(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Jv=Math.random().toString(36).slice(2),lc="__reactFiber$"+Jv,Vb="__reactProps$"+Jv,Au="__reactContainer$"+Jv,Fk="__reactEvents$"+Jv,mle="__reactListeners$"+Jv,gle="__reactHandles$"+Jv;function vp(e){var t=e[lc];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Au]||n[lc]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=TF(e);e!==null;){if(n=e[lc])return n;e=TF(e)}return t}e=n,n=e.parentNode}return null}function f_(e){return e=e[lc]||e[Au],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(gt(33))}function uP(e){return e[Vb]||null}var jk=[],Jm=-1;function Sd(e){return{current:e}}function Cr(e){0>Jm||(e.current=jk[Jm],jk[Jm]=null,Jm--)}function _r(e,t){Jm++,jk[Jm]=e.current,e.current=t}var ud={},Oo=Sd(ud),va=Sd(!1),Fp=ud;function Ng(e,t){var n=e.type.contextTypes;if(!n)return ud;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ya(e){return e=e.childContextTypes,e!=null}function sC(){Cr(va),Cr(Oo)}function OF(e,t,n){if(Oo.current!==ud)throw Error(gt(168));_r(Oo,t),_r(va,n)}function FW(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(gt(108,ese(e)||"Unknown",i));return Hr({},n,r)}function lC(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ud,Fp=Oo.current,_r(Oo,e),_r(va,va.current),!0}function IF(e,t,n){var r=e.stateNode;if(!r)throw Error(gt(169));n?(e=FW(e,t,Fp),r.__reactInternalMemoizedMergedChildContext=e,Cr(va),Cr(Oo),_r(Oo,e)):Cr(va),_r(va,n)}var lu=null,fP=!1,UT=!1;function jW(e){lu===null?lu=[e]:lu.push(e)}function vle(e){fP=!0,jW(e)}function Cd(){if(!UT&&lu!==null){UT=!0;var e=0,t=tr;try{var n=lu;for(tr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}lu=null,fP=!1}catch(i){throw lu!==null&&(lu=lu.slice(e+1)),fW(Z$,Cd),i}finally{tr=t,UT=!1}}return null}var Qm=[],eg=0,cC=null,uC=0,Ms=[],Es=0,jp=null,mu=1,gu="";function ep(e,t){Qm[eg++]=uC,Qm[eg++]=cC,cC=e,uC=t}function zW(e,t,n){Ms[Es++]=mu,Ms[Es++]=gu,Ms[Es++]=jp,jp=e;var r=mu;e=gu;var i=32-vl(r)-1;r&=~(1<<i),n+=1;var o=32-vl(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,mu=1<<32-vl(t)+i|n<<i|r,gu=o+e}else mu=1<<o|n<<i|r,gu=e}function a4(e){e.return!==null&&(ep(e,1),zW(e,1,0))}function s4(e){for(;e===cC;)cC=Qm[--eg],Qm[eg]=null,uC=Qm[--eg],Qm[eg]=null;for(;e===jp;)jp=Ms[--Es],Ms[Es]=null,gu=Ms[--Es],Ms[Es]=null,mu=Ms[--Es],Ms[Es]=null}var Xa=null,Wa=null,kr=!1,pl=null;function UW(e,t){var n=Is(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function RF(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xa=e,Wa=Wf(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xa=e,Wa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=jp!==null?{id:mu,overflow:gu}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Is(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xa=e,Wa=null,!0):!1;default:return!1}}function zk(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Uk(e){if(kr){var t=Wa;if(t){var n=t;if(!RF(e,t)){if(zk(e))throw Error(gt(418));t=Wf(n.nextSibling);var r=Xa;t&&RF(e,t)?UW(r,n):(e.flags=e.flags&-4097|2,kr=!1,Xa=e)}}else{if(zk(e))throw Error(gt(418));e.flags=e.flags&-4097|2,kr=!1,Xa=e}}}function kF(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xa=e}function aw(e){if(e!==Xa)return!1;if(!kr)return kF(e),kr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bk(e.type,e.memoizedProps)),t&&(t=Wa)){if(zk(e))throw VW(),Error(gt(418));for(;t;)UW(e,t),t=Wf(t.nextSibling)}if(kF(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(gt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wa=Wf(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wa=null}}else Wa=Xa?Wf(e.stateNode.nextSibling):null;return!0}function VW(){for(var e=Wa;e;)e=Wf(e.nextSibling)}function Fg(){Wa=Xa=null,kr=!1}function l4(e){pl===null?pl=[e]:pl.push(e)}var yle=Vu.ReactCurrentBatchConfig;function ll(e,t){if(e&&e.defaultProps){t=Hr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var fC=Sd(null),dC=null,tg=null,c4=null;function u4(){c4=tg=dC=null}function f4(e){var t=fC.current;Cr(fC),e._currentValue=t}function Vk(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xg(e,t){dC=e,c4=tg=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ha=!0),e.firstContext=null)}function Fs(e){var t=e._currentValue;if(c4!==e)if(e={context:e,memoizedValue:t,next:null},tg===null){if(dC===null)throw Error(gt(308));tg=e,dC.dependencies={lanes:0,firstContext:e}}else tg=tg.next=e;return t}var yp=null;function d4(e){yp===null?yp=[e]:yp.push(e)}function HW(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,d4(t)):(n.next=i.next,i.next=n),t.interleaved=n,Pu(e,r)}function Pu(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Tf=!1;function p4(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GW(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qf(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Rn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Pu(e,n)}return i=r.interleaved,i===null?(t.next=t,d4(r)):(t.next=i.next,i.next=t),r.interleaved=t,Pu(e,n)}function eS(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,J$(e,n)}}function LF(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pC(e,t,n,r){var i=e.updateQueue;Tf=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,c=l.next;l.next=null,a===null?o=c:a.next=c,a=l;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;a=0,u=c=l=null,s=o;do{var d=s.lane,p=s.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,g=s;switch(d=t,p=n,g.tag){case 1:if(h=g.payload,typeof h=="function"){f=h.call(p,f,d);break e}f=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,d=typeof h=="function"?h.call(p,f,d):h,d==null)break e;f=Hr({},f,d);break e;case 2:Tf=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=p,l=f):u=u.next=p,a|=d;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;d=s,s=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);Up|=a,e.lanes=a,e.memoizedState=f}}function $F(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(gt(191,i));i.call(r)}}}var WW=new HG.Component().refs;function Hk(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Hr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var dP={isMounted:function(e){return(e=e._reactInternals)?Sh(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Go(),i=Yf(e),o=bu(r,i);o.payload=t,n!=null&&(o.callback=n),t=qf(e,o,i),t!==null&&(yl(t,e,i,r),eS(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Go(),i=Yf(e),o=bu(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=qf(e,o,i),t!==null&&(yl(t,e,i,r),eS(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Go(),r=Yf(e),i=bu(n,r);i.tag=2,t!=null&&(i.callback=t),t=qf(e,i,r),t!==null&&(yl(t,e,r,n),eS(t,e,r))}};function DF(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!jb(n,r)||!jb(i,o):!0}function qW(e,t,n){var r=!1,i=ud,o=t.contextType;return typeof o=="object"&&o!==null?o=Fs(o):(i=ya(t)?Fp:Oo.current,r=t.contextTypes,o=(r=r!=null)?Ng(e,i):ud),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dP,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function BF(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&dP.enqueueReplaceState(t,t.state,null)}function Gk(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=WW,p4(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Fs(o):(o=ya(t)?Fp:Oo.current,i.context=Ng(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Hk(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&dP.enqueueReplaceState(i,i.state,null),pC(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function F0(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(gt(309));var r=n.stateNode}if(!r)throw Error(gt(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;s===WW&&(s=i.refs={}),a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(gt(284));if(!n._owner)throw Error(gt(290,e))}return e}function sw(e,t){throw e=Object.prototype.toString.call(t),Error(gt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function NF(e){var t=e._init;return t(e._payload)}function XW(e){function t(m,y){if(e){var _=m.deletions;_===null?(m.deletions=[y],m.flags|=16):_.push(y)}}function n(m,y){if(!e)return null;for(;y!==null;)t(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Kf(m,y),m.index=0,m.sibling=null,m}function o(m,y,_){return m.index=_,e?(_=m.alternate,_!==null?(_=_.index,_<y?(m.flags|=2,y):_):(m.flags|=2,y)):(m.flags|=1048576,y)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function s(m,y,_,b){return y===null||y.tag!==6?(y=YT(_,m.mode,b),y.return=m,y):(y=i(y,_),y.return=m,y)}function l(m,y,_,b){var x=_.type;return x===qm?u(m,y,_.props.children,b,_.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ef&&NF(x)===y.type)?(b=i(y,_.props),b.ref=F0(m,y,_),b.return=m,b):(b=aS(_.type,_.key,_.props,null,m.mode,b),b.ref=F0(m,y,_),b.return=m,b)}function c(m,y,_,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==_.containerInfo||y.stateNode.implementation!==_.implementation?(y=KT(_,m.mode,b),y.return=m,y):(y=i(y,_.children||[]),y.return=m,y)}function u(m,y,_,b,x){return y===null||y.tag!==7?(y=Ap(_,m.mode,b,x),y.return=m,y):(y=i(y,_),y.return=m,y)}function f(m,y,_){if(typeof y=="string"&&y!==""||typeof y=="number")return y=YT(""+y,m.mode,_),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Kx:return _=aS(y.type,y.key,y.props,null,m.mode,_),_.ref=F0(m,null,y),_.return=m,_;case Wm:return y=KT(y,m.mode,_),y.return=m,y;case Ef:var b=y._init;return f(m,b(y._payload),_)}if(Ey(y)||L0(y))return y=Ap(y,m.mode,_,null),y.return=m,y;sw(m,y)}return null}function d(m,y,_,b){var x=y!==null?y.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return x!==null?null:s(m,y,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Kx:return _.key===x?l(m,y,_,b):null;case Wm:return _.key===x?c(m,y,_,b):null;case Ef:return x=_._init,d(m,y,x(_._payload),b)}if(Ey(_)||L0(_))return x!==null?null:u(m,y,_,b,null);sw(m,_)}return null}function p(m,y,_,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return m=m.get(_)||null,s(y,m,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Kx:return m=m.get(b.key===null?_:b.key)||null,l(y,m,b,x);case Wm:return m=m.get(b.key===null?_:b.key)||null,c(y,m,b,x);case Ef:var w=b._init;return p(m,y,_,w(b._payload),x)}if(Ey(b)||L0(b))return m=m.get(_)||null,u(y,m,b,x,null);sw(y,b)}return null}function h(m,y,_,b){for(var x=null,w=null,S=y,A=y=0,C=null;S!==null&&A<_.length;A++){S.index>A?(C=S,S=null):C=S.sibling;var k=d(m,S,_[A],b);if(k===null){S===null&&(S=C);break}e&&S&&k.alternate===null&&t(m,S),y=o(k,y,A),w===null?x=k:w.sibling=k,w=k,S=C}if(A===_.length)return n(m,S),kr&&ep(m,A),x;if(S===null){for(;A<_.length;A++)S=f(m,_[A],b),S!==null&&(y=o(S,y,A),w===null?x=S:w.sibling=S,w=S);return kr&&ep(m,A),x}for(S=r(m,S);A<_.length;A++)C=p(S,m,A,_[A],b),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?A:C.key),y=o(C,y,A),w===null?x=C:w.sibling=C,w=C);return e&&S.forEach(function(O){return t(m,O)}),kr&&ep(m,A),x}function g(m,y,_,b){var x=L0(_);if(typeof x!="function")throw Error(gt(150));if(_=x.call(_),_==null)throw Error(gt(151));for(var w=x=null,S=y,A=y=0,C=null,k=_.next();S!==null&&!k.done;A++,k=_.next()){S.index>A?(C=S,S=null):C=S.sibling;var O=d(m,S,k.value,b);if(O===null){S===null&&(S=C);break}e&&S&&O.alternate===null&&t(m,S),y=o(O,y,A),w===null?x=O:w.sibling=O,w=O,S=C}if(k.done)return n(m,S),kr&&ep(m,A),x;if(S===null){for(;!k.done;A++,k=_.next())k=f(m,k.value,b),k!==null&&(y=o(k,y,A),w===null?x=k:w.sibling=k,w=k);return kr&&ep(m,A),x}for(S=r(m,S);!k.done;A++,k=_.next())k=p(S,m,A,k.value,b),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?A:k.key),y=o(k,y,A),w===null?x=k:w.sibling=k,w=k);return e&&S.forEach(function(T){return t(m,T)}),kr&&ep(m,A),x}function v(m,y,_,b){if(typeof _=="object"&&_!==null&&_.type===qm&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Kx:e:{for(var x=_.key,w=y;w!==null;){if(w.key===x){if(x=_.type,x===qm){if(w.tag===7){n(m,w.sibling),y=i(w,_.props.children),y.return=m,m=y;break e}}else if(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ef&&NF(x)===w.type){n(m,w.sibling),y=i(w,_.props),y.ref=F0(m,w,_),y.return=m,m=y;break e}n(m,w);break}else t(m,w);w=w.sibling}_.type===qm?(y=Ap(_.props.children,m.mode,b,_.key),y.return=m,m=y):(b=aS(_.type,_.key,_.props,null,m.mode,b),b.ref=F0(m,y,_),b.return=m,m=b)}return a(m);case Wm:e:{for(w=_.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===_.containerInfo&&y.stateNode.implementation===_.implementation){n(m,y.sibling),y=i(y,_.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else t(m,y);y=y.sibling}y=KT(_,m.mode,b),y.return=m,m=y}return a(m);case Ef:return w=_._init,v(m,y,w(_._payload),b)}if(Ey(_))return h(m,y,_,b);if(L0(_))return g(m,y,_,b);sw(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,_),y.return=m,m=y):(n(m,y),y=YT(_,m.mode,b),y.return=m,m=y),a(m)):n(m,y)}return v}var jg=XW(!0),YW=XW(!1),d_={},yc=Sd(d_),Hb=Sd(d_),Gb=Sd(d_);function bp(e){if(e===d_)throw Error(gt(174));return e}function h4(e,t){switch(_r(Gb,t),_r(Hb,e),_r(yc,d_),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sk(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sk(t,e)}Cr(yc),_r(yc,t)}function zg(){Cr(yc),Cr(Hb),Cr(Gb)}function KW(e){bp(Gb.current);var t=bp(yc.current),n=Sk(t,e.type);t!==n&&(_r(Hb,e),_r(yc,n))}function m4(e){Hb.current===e&&(Cr(yc),Cr(Hb))}var Br=Sd(0);function hC(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var VT=[];function g4(){for(var e=0;e<VT.length;e++)VT[e]._workInProgressVersionPrimary=null;VT.length=0}var tS=Vu.ReactCurrentDispatcher,HT=Vu.ReactCurrentBatchConfig,zp=0,Ur=null,Si=null,zi=null,mC=!1,rb=!1,Wb=0,ble=0;function yo(){throw Error(gt(321))}function v4(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Al(e[n],t[n]))return!1;return!0}function y4(e,t,n,r,i,o){if(zp=o,Ur=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,tS.current=e===null||e.memoizedState===null?Sle:Cle,e=n(r,i),rb){o=0;do{if(rb=!1,Wb=0,25<=o)throw Error(gt(301));o+=1,zi=Si=null,t.updateQueue=null,tS.current=Ale,e=n(r,i)}while(rb)}if(tS.current=gC,t=Si!==null&&Si.next!==null,zp=0,zi=Si=Ur=null,mC=!1,t)throw Error(gt(300));return e}function b4(){var e=Wb!==0;return Wb=0,e}function ec(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zi===null?Ur.memoizedState=zi=e:zi=zi.next=e,zi}function js(){if(Si===null){var e=Ur.alternate;e=e!==null?e.memoizedState:null}else e=Si.next;var t=zi===null?Ur.memoizedState:zi.next;if(t!==null)zi=t,Si=e;else{if(e===null)throw Error(gt(310));Si=e,e={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},zi===null?Ur.memoizedState=zi=e:zi=zi.next=e}return zi}function qb(e,t){return typeof t=="function"?t(e):t}function GT(e){var t=js(),n=t.queue;if(n===null)throw Error(gt(311));n.lastRenderedReducer=e;var r=Si,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,c=o;do{var u=c.lane;if((zp&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(s=l=f,a=r):l=l.next=f,Ur.lanes|=u,Up|=u}c=c.next}while(c!==null&&c!==o);l===null?a=r:l.next=s,Al(r,t.memoizedState)||(ha=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Ur.lanes|=o,Up|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function WT(e){var t=js(),n=t.queue;if(n===null)throw Error(gt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);Al(o,t.memoizedState)||(ha=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ZW(){}function JW(e,t){var n=Ur,r=js(),i=t(),o=!Al(r.memoizedState,i);if(o&&(r.memoizedState=i,ha=!0),r=r.queue,_4(tq.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||zi!==null&&zi.memoizedState.tag&1){if(n.flags|=2048,Xb(9,eq.bind(null,n,r,i,t),void 0,null),Gi===null)throw Error(gt(349));zp&30||QW(n,t,i)}return i}function QW(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ur.updateQueue,t===null?(t={lastEffect:null,stores:null},Ur.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function eq(e,t,n,r){t.value=n,t.getSnapshot=r,nq(t)&&rq(e)}function tq(e,t,n){return n(function(){nq(t)&&rq(e)})}function nq(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Al(e,n)}catch{return!0}}function rq(e){var t=Pu(e,1);t!==null&&yl(t,e,1,-1)}function FF(e){var t=ec();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qb,lastRenderedState:e},t.queue=e,e=e.dispatch=wle.bind(null,Ur,e),[t.memoizedState,e]}function Xb(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ur.updateQueue,t===null?(t={lastEffect:null,stores:null},Ur.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function iq(){return js().memoizedState}function nS(e,t,n,r){var i=ec();Ur.flags|=e,i.memoizedState=Xb(1|t,n,void 0,r===void 0?null:r)}function pP(e,t,n,r){var i=js();r=r===void 0?null:r;var o=void 0;if(Si!==null){var a=Si.memoizedState;if(o=a.destroy,r!==null&&v4(r,a.deps)){i.memoizedState=Xb(t,n,o,r);return}}Ur.flags|=e,i.memoizedState=Xb(1|t,n,o,r)}function jF(e,t){return nS(8390656,8,e,t)}function _4(e,t){return pP(2048,8,e,t)}function oq(e,t){return pP(4,2,e,t)}function aq(e,t){return pP(4,4,e,t)}function sq(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lq(e,t,n){return n=n!=null?n.concat([e]):null,pP(4,4,sq.bind(null,t,e),n)}function x4(){}function cq(e,t){var n=js();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&v4(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function uq(e,t){var n=js();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&v4(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fq(e,t,n){return zp&21?(Al(n,t)||(n=hW(),Ur.lanes|=n,Up|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ha=!0),e.memoizedState=n)}function _le(e,t){var n=tr;tr=n!==0&&4>n?n:4,e(!0);var r=HT.transition;HT.transition={};try{e(!1),t()}finally{tr=n,HT.transition=r}}function dq(){return js().memoizedState}function xle(e,t,n){var r=Yf(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pq(e))hq(t,n);else if(n=HW(e,t,n,r),n!==null){var i=Go();yl(n,e,r,i),mq(n,t,r)}}function wle(e,t,n){var r=Yf(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pq(e))hq(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Al(s,a)){var l=t.interleaved;l===null?(i.next=i,d4(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=HW(e,t,i,r),n!==null&&(i=Go(),yl(n,e,r,i),mq(n,t,r))}}function pq(e){var t=e.alternate;return e===Ur||t!==null&&t===Ur}function hq(e,t){rb=mC=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mq(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,J$(e,n)}}var gC={readContext:Fs,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},Sle={readContext:Fs,useCallback:function(e,t){return ec().memoizedState=[e,t===void 0?null:t],e},useContext:Fs,useEffect:jF,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,nS(4194308,4,sq.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nS(4194308,4,e,t)},useInsertionEffect:function(e,t){return nS(4,2,e,t)},useMemo:function(e,t){var n=ec();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ec();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xle.bind(null,Ur,e),[r.memoizedState,e]},useRef:function(e){var t=ec();return e={current:e},t.memoizedState=e},useState:FF,useDebugValue:x4,useDeferredValue:function(e){return ec().memoizedState=e},useTransition:function(){var e=FF(!1),t=e[0];return e=_le.bind(null,e[1]),ec().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ur,i=ec();if(kr){if(n===void 0)throw Error(gt(407));n=n()}else{if(n=t(),Gi===null)throw Error(gt(349));zp&30||QW(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,jF(tq.bind(null,r,o,e),[e]),r.flags|=2048,Xb(9,eq.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ec(),t=Gi.identifierPrefix;if(kr){var n=gu,r=mu;n=(r&~(1<<32-vl(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Wb++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ble++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Cle={readContext:Fs,useCallback:cq,useContext:Fs,useEffect:_4,useImperativeHandle:lq,useInsertionEffect:oq,useLayoutEffect:aq,useMemo:uq,useReducer:GT,useRef:iq,useState:function(){return GT(qb)},useDebugValue:x4,useDeferredValue:function(e){var t=js();return fq(t,Si.memoizedState,e)},useTransition:function(){var e=GT(qb)[0],t=js().memoizedState;return[e,t]},useMutableSource:ZW,useSyncExternalStore:JW,useId:dq,unstable_isNewReconciler:!1},Ale={readContext:Fs,useCallback:cq,useContext:Fs,useEffect:_4,useImperativeHandle:lq,useInsertionEffect:oq,useLayoutEffect:aq,useMemo:uq,useReducer:WT,useRef:iq,useState:function(){return WT(qb)},useDebugValue:x4,useDeferredValue:function(e){var t=js();return Si===null?t.memoizedState=e:fq(t,Si.memoizedState,e)},useTransition:function(){var e=WT(qb)[0],t=js().memoizedState;return[e,t]},useMutableSource:ZW,useSyncExternalStore:JW,useId:dq,unstable_isNewReconciler:!1};function Ug(e,t){try{var n="",r=t;do n+=Qae(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function qT(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Wk(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Ple=typeof WeakMap=="function"?WeakMap:Map;function gq(e,t,n){n=bu(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){yC||(yC=!0,n5=r),Wk(e,t)},n}function vq(e,t,n){n=bu(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Wk(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Wk(e,t),typeof r!="function"&&(Xf===null?Xf=new Set([this]):Xf.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function zF(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Ple;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=jle.bind(null,e,t,n),t.then(e,e))}function UF(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function VF(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bu(-1,1),t.tag=2,qf(n,t,1))),n.lanes|=1),e)}var Mle=Vu.ReactCurrentOwner,ha=!1;function zo(e,t,n,r){t.child=e===null?YW(t,null,n,r):jg(t,e.child,n,r)}function HF(e,t,n,r,i){n=n.render;var o=t.ref;return xg(t,i),r=y4(e,t,n,r,o,i),n=b4(),e!==null&&!ha?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Mu(e,t,i)):(kr&&n&&a4(t),t.flags|=1,zo(e,t,r,i),t.child)}function GF(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!T4(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,yq(e,t,o,r,i)):(e=aS(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:jb,n(a,r)&&e.ref===t.ref)return Mu(e,t,i)}return t.flags|=1,e=Kf(o,r),e.ref=t.ref,e.return=t,t.child=e}function yq(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(jb(o,r)&&e.ref===t.ref)if(ha=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(ha=!0);else return t.lanes=e.lanes,Mu(e,t,i)}return qk(e,t,n,r,i)}function bq(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(rg,Fa),Fa|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_r(rg,Fa),Fa|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,_r(rg,Fa),Fa|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,_r(rg,Fa),Fa|=r;return zo(e,t,i,n),t.child}function _q(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function qk(e,t,n,r,i){var o=ya(n)?Fp:Oo.current;return o=Ng(t,o),xg(t,i),n=y4(e,t,n,r,o,i),r=b4(),e!==null&&!ha?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Mu(e,t,i)):(kr&&r&&a4(t),t.flags|=1,zo(e,t,n,i),t.child)}function WF(e,t,n,r,i){if(ya(n)){var o=!0;lC(t)}else o=!1;if(xg(t,i),t.stateNode===null)rS(e,t),qW(t,n,r),Gk(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fs(c):(c=ya(n)?Fp:Oo.current,c=Ng(t,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==c)&&BF(t,a,r,c),Tf=!1;var d=t.memoizedState;a.state=d,pC(t,r,a,i),l=t.memoizedState,s!==r||d!==l||va.current||Tf?(typeof u=="function"&&(Hk(t,n,u,r),l=t.memoizedState),(s=Tf||DF(t,n,s,r,d,l,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,GW(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ll(t.type,s),a.props=c,f=t.pendingProps,d=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fs(l):(l=ya(n)?Fp:Oo.current,l=Ng(t,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==f||d!==l)&&BF(t,a,r,l),Tf=!1,d=t.memoizedState,a.state=d,pC(t,r,a,i);var h=t.memoizedState;s!==f||d!==h||va.current||Tf?(typeof p=="function"&&(Hk(t,n,p,r),h=t.memoizedState),(c=Tf||DF(t,n,c,r,d,h,l)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,h,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,h,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Xk(e,t,n,r,o,i)}function Xk(e,t,n,r,i,o){_q(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&IF(t,n,!1),Mu(e,t,o);r=t.stateNode,Mle.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=jg(t,e.child,null,o),t.child=jg(t,null,s,o)):zo(e,t,s,o),t.memoizedState=r.state,i&&IF(t,n,!0),t.child}function xq(e){var t=e.stateNode;t.pendingContext?OF(e,t.pendingContext,t.pendingContext!==t.context):t.context&&OF(e,t.context,!1),h4(e,t.containerInfo)}function qF(e,t,n,r,i){return Fg(),l4(i),t.flags|=256,zo(e,t,n,r),t.child}var Yk={dehydrated:null,treeContext:null,retryLane:0};function Kk(e){return{baseLanes:e,cachePool:null,transitions:null}}function wq(e,t,n){var r=t.pendingProps,i=Br.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),_r(Br,i&1),e===null)return Uk(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=gP(a,r,0,null),e=Ap(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Kk(n),t.memoizedState=Yk,e):w4(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Ele(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Kf(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Kf(s,o):(o=Ap(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Kk(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Yk,r}return o=e.child,e=o.sibling,r=Kf(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function w4(e,t){return t=gP({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lw(e,t,n,r){return r!==null&&l4(r),jg(t,e.child,null,n),e=w4(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ele(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=qT(Error(gt(422))),lw(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=gP({mode:"visible",children:r.children},i,0,null),o=Ap(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&jg(t,e.child,null,a),t.child.memoizedState=Kk(a),t.memoizedState=Yk,o);if(!(t.mode&1))return lw(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(gt(419)),r=qT(o,r,void 0),lw(e,t,a,r)}if(s=(a&e.childLanes)!==0,ha||s){if(r=Gi,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Pu(e,i),yl(r,e,i,-1))}return E4(),r=qT(Error(gt(421))),lw(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=zle.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Wa=Wf(i.nextSibling),Xa=t,kr=!0,pl=null,e!==null&&(Ms[Es++]=mu,Ms[Es++]=gu,Ms[Es++]=jp,mu=e.id,gu=e.overflow,jp=t),t=w4(t,r.children),t.flags|=4096,t)}function XF(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Vk(e.return,t,n)}function XT(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Sq(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(zo(e,t,r.children,n),r=Br.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&XF(e,n,t);else if(e.tag===19)XF(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_r(Br,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&hC(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),XT(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&hC(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}XT(t,!0,n,null,o);break;case"together":XT(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rS(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mu(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Up|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(gt(153));if(t.child!==null){for(e=t.child,n=Kf(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kf(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Tle(e,t,n){switch(t.tag){case 3:xq(t),Fg();break;case 5:KW(t);break;case 1:ya(t.type)&&lC(t);break;case 4:h4(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;_r(fC,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(_r(Br,Br.current&1),t.flags|=128,null):n&t.child.childLanes?wq(e,t,n):(_r(Br,Br.current&1),e=Mu(e,t,n),e!==null?e.sibling:null);_r(Br,Br.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Sq(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_r(Br,Br.current),r)break;return null;case 22:case 23:return t.lanes=0,bq(e,t,n)}return Mu(e,t,n)}var Cq,Zk,Aq,Pq;Cq=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Zk=function(){};Aq=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,bp(yc.current);var o=null;switch(n){case"input":i=bk(e,i),r=bk(e,r),o=[];break;case"select":i=Hr({},i,{value:void 0}),r=Hr({},r,{value:void 0}),o=[];break;case"textarea":i=wk(e,i),r=wk(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=aC)}Ck(n,r);var a;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var s=i[c];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kb.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(s=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==s&&(l!=null||s!=null))if(c==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(kb.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Sr("scroll",e),o||s===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};Pq=function(e,t,n,r){n!==r&&(t.flags|=4)};function j0(e,t){if(!kr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function bo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ole(e,t,n){var r=t.pendingProps;switch(s4(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bo(t),null;case 1:return ya(t.type)&&sC(),bo(t),null;case 3:return r=t.stateNode,zg(),Cr(va),Cr(Oo),g4(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(aw(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pl!==null&&(o5(pl),pl=null))),Zk(e,t),bo(t),null;case 5:m4(t);var i=bp(Gb.current);if(n=t.type,e!==null&&t.stateNode!=null)Aq(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(gt(166));return bo(t),null}if(e=bp(yc.current),aw(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[lc]=t,r[Vb]=o,e=(t.mode&1)!==0,n){case"dialog":Sr("cancel",r),Sr("close",r);break;case"iframe":case"object":case"embed":Sr("load",r);break;case"video":case"audio":for(i=0;i<Oy.length;i++)Sr(Oy[i],r);break;case"source":Sr("error",r);break;case"img":case"image":case"link":Sr("error",r),Sr("load",r);break;case"details":Sr("toggle",r);break;case"input":rF(r,o),Sr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Sr("invalid",r);break;case"textarea":oF(r,o),Sr("invalid",r)}Ck(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&ow(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&ow(r.textContent,s,e),i=["children",""+s]):kb.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Sr("scroll",r)}switch(n){case"input":Zx(r),iF(r,o,!0);break;case"textarea":Zx(r),aF(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=aC)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=QG(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[lc]=t,e[Vb]=r,Cq(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ak(n,r),n){case"dialog":Sr("cancel",e),Sr("close",e),i=r;break;case"iframe":case"object":case"embed":Sr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Oy.length;i++)Sr(Oy[i],e);i=r;break;case"source":Sr("error",e),i=r;break;case"img":case"image":case"link":Sr("error",e),Sr("load",e),i=r;break;case"details":Sr("toggle",e),i=r;break;case"input":rF(e,r),i=bk(e,r),Sr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Hr({},r,{value:void 0}),Sr("invalid",e);break;case"textarea":oF(e,r),i=wk(e,r),Sr("invalid",e);break;default:i=r}Ck(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?nW(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&eW(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lb(e,l):typeof l=="number"&&Lb(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(kb.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Sr("scroll",e):l!=null&&W$(e,o,l,a))}switch(n){case"input":Zx(e),iF(e,r,!1);break;case"textarea":Zx(e),aF(e);break;case"option":r.value!=null&&e.setAttribute("value",""+cd(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?vg(e,!!r.multiple,o,!1):r.defaultValue!=null&&vg(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=aC)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return bo(t),null;case 6:if(e&&t.stateNode!=null)Pq(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(gt(166));if(n=bp(Gb.current),bp(yc.current),aw(t)){if(r=t.stateNode,n=t.memoizedProps,r[lc]=t,(o=r.nodeValue!==n)&&(e=Xa,e!==null))switch(e.tag){case 3:ow(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ow(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[lc]=t,t.stateNode=r}return bo(t),null;case 13:if(Cr(Br),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kr&&Wa!==null&&t.mode&1&&!(t.flags&128))VW(),Fg(),t.flags|=98560,o=!1;else if(o=aw(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(gt(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(gt(317));o[lc]=t}else Fg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bo(t),o=!1}else pl!==null&&(o5(pl),pl=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Br.current&1?Pi===0&&(Pi=3):E4())),t.updateQueue!==null&&(t.flags|=4),bo(t),null);case 4:return zg(),Zk(e,t),e===null&&zb(t.stateNode.containerInfo),bo(t),null;case 10:return f4(t.type._context),bo(t),null;case 17:return ya(t.type)&&sC(),bo(t),null;case 19:if(Cr(Br),o=t.memoizedState,o===null)return bo(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)j0(o,!1);else{if(Pi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=hC(e),a!==null){for(t.flags|=128,j0(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _r(Br,Br.current&1|2),t.child}e=e.sibling}o.tail!==null&&ri()>Vg&&(t.flags|=128,r=!0,j0(o,!1),t.lanes=4194304)}else{if(!r)if(e=hC(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),j0(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!kr)return bo(t),null}else 2*ri()-o.renderingStartTime>Vg&&n!==1073741824&&(t.flags|=128,r=!0,j0(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ri(),t.sibling=null,n=Br.current,_r(Br,r?n&1|2:n&1),t):(bo(t),null);case 22:case 23:return M4(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Fa&1073741824&&(bo(t),t.subtreeFlags&6&&(t.flags|=8192)):bo(t),null;case 24:return null;case 25:return null}throw Error(gt(156,t.tag))}function Ile(e,t){switch(s4(t),t.tag){case 1:return ya(t.type)&&sC(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zg(),Cr(va),Cr(Oo),g4(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return m4(t),null;case 13:if(Cr(Br),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(gt(340));Fg()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Cr(Br),null;case 4:return zg(),null;case 10:return f4(t.type._context),null;case 22:case 23:return M4(),null;case 24:return null;default:return null}}var cw=!1,Po=!1,Rle=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function ng(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Zr(e,t,r)}else n.current=null}function Jk(e,t,n){try{n()}catch(r){Zr(e,t,r)}}var YF=!1;function kle(e,t){if($k=rC,e=OW(),o4(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,c=0,u=0,f=e,d=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(s=a+i),f!==o||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(s=a),d===o&&++u===r&&(l=a),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dk={focusedElem:e,selectionRange:n},rC=!1,Tt=t;Tt!==null;)if(t=Tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Tt=e;else for(;Tt!==null;){t=Tt;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var g=h.memoizedProps,v=h.memoizedState,m=t.stateNode,y=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:ll(t.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(gt(163))}}catch(b){Zr(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Tt=e;break}Tt=t.return}return h=YF,YF=!1,h}function ib(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&Jk(t,n,o)}i=i.next}while(i!==r)}}function hP(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Qk(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Mq(e){var t=e.alternate;t!==null&&(e.alternate=null,Mq(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[lc],delete t[Vb],delete t[Fk],delete t[mle],delete t[gle])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Eq(e){return e.tag===5||e.tag===3||e.tag===4}function KF(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Eq(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function e5(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=aC));else if(r!==4&&(e=e.child,e!==null))for(e5(e,t,n),e=e.sibling;e!==null;)e5(e,t,n),e=e.sibling}function t5(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(t5(e,t,n),e=e.sibling;e!==null;)t5(e,t,n),e=e.sibling}var Zi=null,ul=!1;function of(e,t,n){for(n=n.child;n!==null;)Tq(e,t,n),n=n.sibling}function Tq(e,t,n){if(vc&&typeof vc.onCommitFiberUnmount=="function")try{vc.onCommitFiberUnmount(aP,n)}catch{}switch(n.tag){case 5:Po||ng(n,t);case 6:var r=Zi,i=ul;Zi=null,of(e,t,n),Zi=r,ul=i,Zi!==null&&(ul?(e=Zi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Zi.removeChild(n.stateNode));break;case 18:Zi!==null&&(ul?(e=Zi,n=n.stateNode,e.nodeType===8?zT(e.parentNode,n):e.nodeType===1&&zT(e,n),Nb(e)):zT(Zi,n.stateNode));break;case 4:r=Zi,i=ul,Zi=n.stateNode.containerInfo,ul=!0,of(e,t,n),Zi=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Po&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Jk(n,t,a),i=i.next}while(i!==r)}of(e,t,n);break;case 1:if(!Po&&(ng(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Zr(n,t,s)}of(e,t,n);break;case 21:of(e,t,n);break;case 22:n.mode&1?(Po=(r=Po)||n.memoizedState!==null,of(e,t,n),Po=r):of(e,t,n);break;default:of(e,t,n)}}function ZF(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Rle),t.forEach(function(r){var i=Ule.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Qs(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:Zi=s.stateNode,ul=!1;break e;case 3:Zi=s.stateNode.containerInfo,ul=!0;break e;case 4:Zi=s.stateNode.containerInfo,ul=!0;break e}s=s.return}if(Zi===null)throw Error(gt(160));Tq(o,a,i),Zi=null,ul=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Zr(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Oq(t,e),t=t.sibling}function Oq(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qs(t,e),jl(e),r&4){try{ib(3,e,e.return),hP(3,e)}catch(g){Zr(e,e.return,g)}try{ib(5,e,e.return)}catch(g){Zr(e,e.return,g)}}break;case 1:Qs(t,e),jl(e),r&512&&n!==null&&ng(n,n.return);break;case 5:if(Qs(t,e),jl(e),r&512&&n!==null&&ng(n,n.return),e.flags&32){var i=e.stateNode;try{Lb(i,"")}catch(g){Zr(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&ZG(i,o),Ak(s,a);var c=Ak(s,o);for(a=0;a<l.length;a+=2){var u=l[a],f=l[a+1];u==="style"?nW(i,f):u==="dangerouslySetInnerHTML"?eW(i,f):u==="children"?Lb(i,f):W$(i,u,f,c)}switch(s){case"input":_k(i,o);break;case"textarea":JG(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;p!=null?vg(i,!!o.multiple,p,!1):d!==!!o.multiple&&(o.defaultValue!=null?vg(i,!!o.multiple,o.defaultValue,!0):vg(i,!!o.multiple,o.multiple?[]:"",!1))}i[Vb]=o}catch(g){Zr(e,e.return,g)}}break;case 6:if(Qs(t,e),jl(e),r&4){if(e.stateNode===null)throw Error(gt(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Zr(e,e.return,g)}}break;case 3:if(Qs(t,e),jl(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nb(t.containerInfo)}catch(g){Zr(e,e.return,g)}break;case 4:Qs(t,e),jl(e);break;case 13:Qs(t,e),jl(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(A4=ri())),r&4&&ZF(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Po=(c=Po)||u,Qs(t,e),Po=c):Qs(t,e),jl(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Tt=e,u=e.child;u!==null;){for(f=Tt=u;Tt!==null;){switch(d=Tt,p=d.child,d.tag){case 0:case 11:case 14:case 15:ib(4,d,d.return);break;case 1:ng(d,d.return);var h=d.stateNode;if(typeof h.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(g){Zr(r,n,g)}}break;case 5:ng(d,d.return);break;case 22:if(d.memoizedState!==null){QF(f);continue}}p!==null?(p.return=d,Tt=p):QF(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=tW("display",a))}catch(g){Zr(e,e.return,g)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Zr(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qs(t,e),jl(e),r&4&&ZF(e);break;case 21:break;default:Qs(t,e),jl(e)}}function jl(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Eq(n)){var r=n;break e}n=n.return}throw Error(gt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lb(i,""),r.flags&=-33);var o=KF(e);t5(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=KF(e);e5(e,s,a);break;default:throw Error(gt(161))}}catch(l){Zr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Lle(e,t,n){Tt=e,Iq(e)}function Iq(e,t,n){for(var r=(e.mode&1)!==0;Tt!==null;){var i=Tt,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||cw;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Po;s=cw;var c=Po;if(cw=a,(Po=l)&&!c)for(Tt=i;Tt!==null;)a=Tt,l=a.child,a.tag===22&&a.memoizedState!==null?e6(i):l!==null?(l.return=a,Tt=l):e6(i);for(;o!==null;)Tt=o,Iq(o),o=o.sibling;Tt=i,cw=s,Po=c}JF(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Tt=o):JF(e)}}function JF(e){for(;Tt!==null;){var t=Tt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Po||hP(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Po)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ll(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&$F(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$F(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Nb(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(gt(163))}Po||t.flags&512&&Qk(t)}catch(d){Zr(t,t.return,d)}}if(t===e){Tt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Tt=n;break}Tt=t.return}}function QF(e){for(;Tt!==null;){var t=Tt;if(t===e){Tt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Tt=n;break}Tt=t.return}}function e6(e){for(;Tt!==null;){var t=Tt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hP(4,t)}catch(l){Zr(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Zr(t,i,l)}}var o=t.return;try{Qk(t)}catch(l){Zr(t,o,l)}break;case 5:var a=t.return;try{Qk(t)}catch(l){Zr(t,a,l)}}}catch(l){Zr(t,t.return,l)}if(t===e){Tt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Tt=s;break}Tt=t.return}}var $le=Math.ceil,vC=Vu.ReactCurrentDispatcher,S4=Vu.ReactCurrentOwner,$s=Vu.ReactCurrentBatchConfig,Rn=0,Gi=null,pi=null,ao=0,Fa=0,rg=Sd(0),Pi=0,Yb=null,Up=0,mP=0,C4=0,ob=null,la=null,A4=0,Vg=1/0,au=null,yC=!1,n5=null,Xf=null,uw=!1,Bf=null,bC=0,ab=0,r5=null,iS=-1,oS=0;function Go(){return Rn&6?ri():iS!==-1?iS:iS=ri()}function Yf(e){return e.mode&1?Rn&2&&ao!==0?ao&-ao:yle.transition!==null?(oS===0&&(oS=hW()),oS):(e=tr,e!==0||(e=window.event,e=e===void 0?16:xW(e.type)),e):1}function yl(e,t,n,r){if(50<ab)throw ab=0,r5=null,Error(gt(185));c_(e,n,r),(!(Rn&2)||e!==Gi)&&(e===Gi&&(!(Rn&2)&&(mP|=n),Pi===4&&Rf(e,ao)),ba(e,r),n===1&&Rn===0&&!(t.mode&1)&&(Vg=ri()+500,fP&&Cd()))}function ba(e,t){var n=e.callbackNode;yse(e,t);var r=nC(e,e===Gi?ao:0);if(r===0)n!==null&&cF(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cF(n),t===1)e.tag===0?vle(t6.bind(null,e)):jW(t6.bind(null,e)),ple(function(){!(Rn&6)&&Cd()}),n=null;else{switch(mW(r)){case 1:n=Z$;break;case 4:n=dW;break;case 16:n=tC;break;case 536870912:n=pW;break;default:n=tC}n=Fq(n,Rq.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Rq(e,t){if(iS=-1,oS=0,Rn&6)throw Error(gt(327));var n=e.callbackNode;if(wg()&&e.callbackNode!==n)return null;var r=nC(e,e===Gi?ao:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=_C(e,r);else{t=r;var i=Rn;Rn|=2;var o=Lq();(Gi!==e||ao!==t)&&(au=null,Vg=ri()+500,Cp(e,t));do try{Nle();break}catch(s){kq(e,s)}while(1);u4(),vC.current=o,Rn=i,pi!==null?t=0:(Gi=null,ao=0,t=Pi)}if(t!==0){if(t===2&&(i=Ok(e),i!==0&&(r=i,t=i5(e,i))),t===1)throw n=Yb,Cp(e,0),Rf(e,r),ba(e,ri()),n;if(t===6)Rf(e,r);else{if(i=e.current.alternate,!(r&30)&&!Dle(i)&&(t=_C(e,r),t===2&&(o=Ok(e),o!==0&&(r=o,t=i5(e,o))),t===1))throw n=Yb,Cp(e,0),Rf(e,r),ba(e,ri()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(gt(345));case 2:tp(e,la,au);break;case 3:if(Rf(e,r),(r&130023424)===r&&(t=A4+500-ri(),10<t)){if(nC(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Go(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Nk(tp.bind(null,e,la,au),t);break}tp(e,la,au);break;case 4:if(Rf(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-vl(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=ri()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$le(r/1960))-r,10<r){e.timeoutHandle=Nk(tp.bind(null,e,la,au),r);break}tp(e,la,au);break;case 5:tp(e,la,au);break;default:throw Error(gt(329))}}}return ba(e,ri()),e.callbackNode===n?Rq.bind(null,e):null}function i5(e,t){var n=ob;return e.current.memoizedState.isDehydrated&&(Cp(e,t).flags|=256),e=_C(e,t),e!==2&&(t=la,la=n,t!==null&&o5(t)),e}function o5(e){la===null?la=e:la.push.apply(la,e)}function Dle(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Al(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rf(e,t){for(t&=~C4,t&=~mP,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vl(t),r=1<<n;e[n]=-1,t&=~r}}function t6(e){if(Rn&6)throw Error(gt(327));wg();var t=nC(e,0);if(!(t&1))return ba(e,ri()),null;var n=_C(e,t);if(e.tag!==0&&n===2){var r=Ok(e);r!==0&&(t=r,n=i5(e,r))}if(n===1)throw n=Yb,Cp(e,0),Rf(e,t),ba(e,ri()),n;if(n===6)throw Error(gt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tp(e,la,au),ba(e,ri()),null}function P4(e,t){var n=Rn;Rn|=1;try{return e(t)}finally{Rn=n,Rn===0&&(Vg=ri()+500,fP&&Cd())}}function Vp(e){Bf!==null&&Bf.tag===0&&!(Rn&6)&&wg();var t=Rn;Rn|=1;var n=$s.transition,r=tr;try{if($s.transition=null,tr=1,e)return e()}finally{tr=r,$s.transition=n,Rn=t,!(Rn&6)&&Cd()}}function M4(){Fa=rg.current,Cr(rg)}function Cp(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,dle(n)),pi!==null)for(n=pi.return;n!==null;){var r=n;switch(s4(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sC();break;case 3:zg(),Cr(va),Cr(Oo),g4();break;case 5:m4(r);break;case 4:zg();break;case 13:Cr(Br);break;case 19:Cr(Br);break;case 10:f4(r.type._context);break;case 22:case 23:M4()}n=n.return}if(Gi=e,pi=e=Kf(e.current,null),ao=Fa=t,Pi=0,Yb=null,C4=mP=Up=0,la=ob=null,yp!==null){for(t=0;t<yp.length;t++)if(n=yp[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}yp=null}return e}function kq(e,t){do{var n=pi;try{if(u4(),tS.current=gC,mC){for(var r=Ur.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mC=!1}if(zp=0,zi=Si=Ur=null,rb=!1,Wb=0,S4.current=null,n===null||n.return===null){Pi=1,Yb=t,pi=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=ao,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=s,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=UF(a);if(p!==null){p.flags&=-257,VF(p,a,s,o,t),p.mode&1&&zF(o,c,t),t=p,l=c;var h=t.updateQueue;if(h===null){var g=new Set;g.add(l),t.updateQueue=g}else h.add(l);break e}else{if(!(t&1)){zF(o,c,t),E4();break e}l=Error(gt(426))}}else if(kr&&s.mode&1){var v=UF(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),VF(v,a,s,o,t),l4(Ug(l,s));break e}}o=l=Ug(l,s),Pi!==4&&(Pi=2),ob===null?ob=[o]:ob.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=gq(o,l,t);LF(o,m);break e;case 1:s=l;var y=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Xf===null||!Xf.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=vq(o,s,t);LF(o,b);break e}}o=o.return}while(o!==null)}Dq(n)}catch(x){t=x,pi===n&&n!==null&&(pi=n=n.return);continue}break}while(1)}function Lq(){var e=vC.current;return vC.current=gC,e===null?gC:e}function E4(){(Pi===0||Pi===3||Pi===2)&&(Pi=4),Gi===null||!(Up&268435455)&&!(mP&268435455)||Rf(Gi,ao)}function _C(e,t){var n=Rn;Rn|=2;var r=Lq();(Gi!==e||ao!==t)&&(au=null,Cp(e,t));do try{Ble();break}catch(i){kq(e,i)}while(1);if(u4(),Rn=n,vC.current=r,pi!==null)throw Error(gt(261));return Gi=null,ao=0,Pi}function Ble(){for(;pi!==null;)$q(pi)}function Nle(){for(;pi!==null&&!cse();)$q(pi)}function $q(e){var t=Nq(e.alternate,e,Fa);e.memoizedProps=e.pendingProps,t===null?Dq(e):pi=t,S4.current=null}function Dq(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ile(n,t),n!==null){n.flags&=32767,pi=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pi=6,pi=null;return}}else if(n=Ole(n,t,Fa),n!==null){pi=n;return}if(t=t.sibling,t!==null){pi=t;return}pi=t=e}while(t!==null);Pi===0&&(Pi=5)}function tp(e,t,n){var r=tr,i=$s.transition;try{$s.transition=null,tr=1,Fle(e,t,n,r)}finally{$s.transition=i,tr=r}return null}function Fle(e,t,n,r){do wg();while(Bf!==null);if(Rn&6)throw Error(gt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(gt(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(bse(e,o),e===Gi&&(pi=Gi=null,ao=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uw||(uw=!0,Fq(tC,function(){return wg(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=$s.transition,$s.transition=null;var a=tr;tr=1;var s=Rn;Rn|=4,S4.current=null,kle(e,n),Oq(n,e),ole(Dk),rC=!!$k,Dk=$k=null,e.current=n,Lle(n),use(),Rn=s,tr=a,$s.transition=o}else e.current=n;if(uw&&(uw=!1,Bf=e,bC=i),o=e.pendingLanes,o===0&&(Xf=null),pse(n.stateNode),ba(e,ri()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yC)throw yC=!1,e=n5,n5=null,e;return bC&1&&e.tag!==0&&wg(),o=e.pendingLanes,o&1?e===r5?ab++:(ab=0,r5=e):ab=0,Cd(),null}function wg(){if(Bf!==null){var e=mW(bC),t=$s.transition,n=tr;try{if($s.transition=null,tr=16>e?16:e,Bf===null)var r=!1;else{if(e=Bf,Bf=null,bC=0,Rn&6)throw Error(gt(331));var i=Rn;for(Rn|=4,Tt=e.current;Tt!==null;){var o=Tt,a=o.child;if(Tt.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var c=s[l];for(Tt=c;Tt!==null;){var u=Tt;switch(u.tag){case 0:case 11:case 15:ib(8,u,o)}var f=u.child;if(f!==null)f.return=u,Tt=f;else for(;Tt!==null;){u=Tt;var d=u.sibling,p=u.return;if(Mq(u),u===c){Tt=null;break}if(d!==null){d.return=p,Tt=d;break}Tt=p}}}var h=o.alternate;if(h!==null){var g=h.child;if(g!==null){h.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Tt=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Tt=a;else e:for(;Tt!==null;){if(o=Tt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ib(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,Tt=m;break e}Tt=o.return}}var y=e.current;for(Tt=y;Tt!==null;){a=Tt;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,Tt=_;else e:for(a=y;Tt!==null;){if(s=Tt,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:hP(9,s)}}catch(x){Zr(s,s.return,x)}if(s===a){Tt=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,Tt=b;break e}Tt=s.return}}if(Rn=i,Cd(),vc&&typeof vc.onPostCommitFiberRoot=="function")try{vc.onPostCommitFiberRoot(aP,e)}catch{}r=!0}return r}finally{tr=n,$s.transition=t}}return!1}function n6(e,t,n){t=Ug(n,t),t=gq(e,t,1),e=qf(e,t,1),t=Go(),e!==null&&(c_(e,1,t),ba(e,t))}function Zr(e,t,n){if(e.tag===3)n6(e,e,n);else for(;t!==null;){if(t.tag===3){n6(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xf===null||!Xf.has(r))){e=Ug(n,e),e=vq(t,e,1),t=qf(t,e,1),e=Go(),t!==null&&(c_(t,1,e),ba(t,e));break}}t=t.return}}function jle(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Go(),e.pingedLanes|=e.suspendedLanes&n,Gi===e&&(ao&n)===n&&(Pi===4||Pi===3&&(ao&130023424)===ao&&500>ri()-A4?Cp(e,0):C4|=n),ba(e,t)}function Bq(e,t){t===0&&(e.mode&1?(t=ew,ew<<=1,!(ew&130023424)&&(ew=4194304)):t=1);var n=Go();e=Pu(e,t),e!==null&&(c_(e,t,n),ba(e,n))}function zle(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Bq(e,n)}function Ule(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(gt(314))}r!==null&&r.delete(t),Bq(e,n)}var Nq;Nq=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||va.current)ha=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ha=!1,Tle(e,t,n);ha=!!(e.flags&131072)}else ha=!1,kr&&t.flags&1048576&&zW(t,uC,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rS(e,t),e=t.pendingProps;var i=Ng(t,Oo.current);xg(t,n),i=y4(null,t,r,e,i,n);var o=b4();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ya(r)?(o=!0,lC(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,p4(t),i.updater=dP,t.stateNode=i,i._reactInternals=t,Gk(t,r,e,n),t=Xk(null,t,r,!0,o,n)):(t.tag=0,kr&&o&&a4(t),zo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rS(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Hle(r),e=ll(r,e),i){case 0:t=qk(null,t,r,e,n);break e;case 1:t=WF(null,t,r,e,n);break e;case 11:t=HF(null,t,r,e,n);break e;case 14:t=GF(null,t,r,ll(r.type,e),n);break e}throw Error(gt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ll(r,i),qk(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ll(r,i),WF(e,t,r,i,n);case 3:e:{if(xq(t),e===null)throw Error(gt(387));r=t.pendingProps,o=t.memoizedState,i=o.element,GW(e,t),pC(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Ug(Error(gt(423)),t),t=qF(e,t,r,n,i);break e}else if(r!==i){i=Ug(Error(gt(424)),t),t=qF(e,t,r,n,i);break e}else for(Wa=Wf(t.stateNode.containerInfo.firstChild),Xa=t,kr=!0,pl=null,n=YW(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fg(),r===i){t=Mu(e,t,n);break e}zo(e,t,r,n)}t=t.child}return t;case 5:return KW(t),e===null&&Uk(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,Bk(r,i)?a=null:o!==null&&Bk(r,o)&&(t.flags|=32),_q(e,t),zo(e,t,a,n),t.child;case 6:return e===null&&Uk(t),null;case 13:return wq(e,t,n);case 4:return h4(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=jg(t,null,r,n):zo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ll(r,i),HF(e,t,r,i,n);case 7:return zo(e,t,t.pendingProps,n),t.child;case 8:return zo(e,t,t.pendingProps.children,n),t.child;case 12:return zo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,_r(fC,r._currentValue),r._currentValue=a,o!==null)if(Al(o.value,a)){if(o.children===i.children&&!va.current){t=Mu(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=bu(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Vk(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(gt(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),Vk(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}zo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,xg(t,n),i=Fs(i),r=r(i),t.flags|=1,zo(e,t,r,n),t.child;case 14:return r=t.type,i=ll(r,t.pendingProps),i=ll(r.type,i),GF(e,t,r,i,n);case 15:return yq(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ll(r,i),rS(e,t),t.tag=1,ya(r)?(e=!0,lC(t)):e=!1,xg(t,n),qW(t,r,i),Gk(t,r,i,n),Xk(null,t,r,!0,e,n);case 19:return Sq(e,t,n);case 22:return bq(e,t,n)}throw Error(gt(156,t.tag))};function Fq(e,t){return fW(e,t)}function Vle(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Is(e,t,n,r){return new Vle(e,t,n,r)}function T4(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hle(e){if(typeof e=="function")return T4(e)?1:0;if(e!=null){if(e=e.$$typeof,e===X$)return 11;if(e===Y$)return 14}return 2}function Kf(e,t){var n=e.alternate;return n===null?(n=Is(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function aS(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")T4(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case qm:return Ap(n.children,i,o,t);case q$:a=8,i|=8;break;case mk:return e=Is(12,n,t,i|2),e.elementType=mk,e.lanes=o,e;case gk:return e=Is(13,n,t,i),e.elementType=gk,e.lanes=o,e;case vk:return e=Is(19,n,t,i),e.elementType=vk,e.lanes=o,e;case XG:return gP(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case WG:a=10;break e;case qG:a=9;break e;case X$:a=11;break e;case Y$:a=14;break e;case Ef:a=16,r=null;break e}throw Error(gt(130,e==null?e:typeof e,""))}return t=Is(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function Ap(e,t,n,r){return e=Is(7,e,r,t),e.lanes=n,e}function gP(e,t,n,r){return e=Is(22,e,r,t),e.elementType=XG,e.lanes=n,e.stateNode={isHidden:!1},e}function YT(e,t,n){return e=Is(6,e,null,t),e.lanes=n,e}function KT(e,t,n){return t=Is(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gle(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=OT(0),this.expirationTimes=OT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=OT(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function O4(e,t,n,r,i,o,a,s,l){return e=new Gle(e,t,n,s,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Is(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},p4(o),e}function Wle(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wm,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function jq(e){if(!e)return ud;e=e._reactInternals;e:{if(Sh(e)!==e||e.tag!==1)throw Error(gt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ya(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(gt(171))}if(e.tag===1){var n=e.type;if(ya(n))return FW(e,n,t)}return t}function zq(e,t,n,r,i,o,a,s,l){return e=O4(n,r,!0,e,i,o,a,s,l),e.context=jq(null),n=e.current,r=Go(),i=Yf(n),o=bu(r,i),o.callback=t??null,qf(n,o,i),e.current.lanes=i,c_(e,i,r),ba(e,r),e}function vP(e,t,n,r){var i=t.current,o=Go(),a=Yf(i);return n=jq(n),t.context===null?t.context=n:t.pendingContext=n,t=bu(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=qf(i,t,a),e!==null&&(yl(e,i,a,o),eS(e,i,a)),a}function xC(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function r6(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function I4(e,t){r6(e,t),(e=e.alternate)&&r6(e,t)}function qle(){return null}var Uq=typeof reportError=="function"?reportError:function(e){console.error(e)};function R4(e){this._internalRoot=e}yP.prototype.render=R4.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(gt(409));vP(e,t,null,null)};yP.prototype.unmount=R4.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vp(function(){vP(null,e,null,null)}),t[Au]=null}};function yP(e){this._internalRoot=e}yP.prototype.unstable_scheduleHydration=function(e){if(e){var t=yW();e={blockedOn:null,target:e,priority:t};for(var n=0;n<If.length&&t!==0&&t<If[n].priority;n++);If.splice(n,0,e),n===0&&_W(e)}};function k4(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function i6(){}function Xle(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=xC(a);o.call(c)}}var a=zq(t,r,e,0,null,!1,!1,"",i6);return e._reactRootContainer=a,e[Au]=a.current,zb(e.nodeType===8?e.parentNode:e),Vp(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var c=xC(l);s.call(c)}}var l=O4(e,0,!1,null,null,!1,!1,"",i6);return e._reactRootContainer=l,e[Au]=l.current,zb(e.nodeType===8?e.parentNode:e),Vp(function(){vP(t,l,n,r)}),l}function _P(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=xC(a);s.call(l)}}vP(t,a,e,i)}else a=Xle(n,t,e,i,r);return xC(a)}gW=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ty(t.pendingLanes);n!==0&&(J$(t,n|1),ba(t,ri()),!(Rn&6)&&(Vg=ri()+500,Cd()))}break;case 13:Vp(function(){var r=Pu(e,1);if(r!==null){var i=Go();yl(r,e,1,i)}}),I4(e,1)}};Q$=function(e){if(e.tag===13){var t=Pu(e,134217728);if(t!==null){var n=Go();yl(t,e,134217728,n)}I4(e,134217728)}};vW=function(e){if(e.tag===13){var t=Yf(e),n=Pu(e,t);if(n!==null){var r=Go();yl(n,e,t,r)}I4(e,t)}};yW=function(){return tr};bW=function(e,t){var n=tr;try{return tr=e,t()}finally{tr=n}};Mk=function(e,t,n){switch(t){case"input":if(_k(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=uP(r);if(!i)throw Error(gt(90));KG(r),_k(r,i)}}}break;case"textarea":JG(e,n);break;case"select":t=n.value,t!=null&&vg(e,!!n.multiple,t,!1)}};oW=P4;aW=Vp;var Yle={usingClientEntryPoint:!1,Events:[f_,Zm,uP,rW,iW,P4]},z0={findFiberByHostInstance:vp,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Kle={bundleType:z0.bundleType,version:z0.version,rendererPackageName:z0.rendererPackageName,rendererConfig:z0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cW(e),e===null?null:e.stateNode},findFiberByHostInstance:z0.findFiberByHostInstance||qle,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fw.isDisabled&&fw.supportsFiber)try{aP=fw.inject(Kle),vc=fw}catch{}}as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yle;as.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!k4(t))throw Error(gt(200));return Wle(e,t,null,n)};as.createRoot=function(e,t){if(!k4(e))throw Error(gt(299));var n=!1,r="",i=Uq;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=O4(e,1,!1,null,null,n,!1,r,i),e[Au]=t.current,zb(e.nodeType===8?e.parentNode:e),new R4(t)};as.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(gt(188)):(e=Object.keys(e).join(","),Error(gt(268,e)));return e=cW(t),e=e===null?null:e.stateNode,e};as.flushSync=function(e){return Vp(e)};as.hydrate=function(e,t,n){if(!bP(t))throw Error(gt(200));return _P(null,e,t,!0,n)};as.hydrateRoot=function(e,t,n){if(!k4(e))throw Error(gt(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=Uq;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=zq(t,null,e,1,n??null,i,!1,o,a),e[Au]=t.current,zb(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new yP(t)};as.render=function(e,t,n){if(!bP(t))throw Error(gt(200));return _P(null,e,t,!1,n)};as.unmountComponentAtNode=function(e){if(!bP(e))throw Error(gt(40));return e._reactRootContainer?(Vp(function(){_P(null,null,e,!1,function(){e._reactRootContainer=null,e[Au]=null})}),!0):!1};as.unstable_batchedUpdates=P4;as.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bP(n))throw Error(gt(200));if(e==null||e._reactInternals===void 0)throw Error(gt(38));return _P(e,t,n,!1,r)};as.version="18.2.0-next-9e3b772b8-20220608";function Vq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vq)}catch(e){console.error(e)}}Vq(),zG.exports=as;var Hp=zG.exports;const dw=xh(Hp);var o6=Hp;pk.createRoot=o6.createRoot,pk.hydrateRoot=o6.hydrateRoot;function dn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var Zle={};function L4(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Zle}var Hq=Object.assign,wC=Object.getOwnPropertyDescriptor,bc=Object.defineProperty,p_=Object.prototype,a5=[];Object.freeze(a5);var $4={};Object.freeze($4);var Jle=typeof Proxy<"u",Qle=Object.toString();function Gq(){Jle||dn("Proxy not available")}function Wq(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var ig=function(){};function Za(e){return typeof e=="function"}function Gp(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function xP(e){return e!==null&&typeof e=="object"}function Eu(e){if(!xP(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n.toString()===Qle}function qq(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function h_(e,t,n){bc(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Xq(e,t,n){bc(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Ad(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(r){return xP(r)&&r[n]===!0}}function Qv(e){return e instanceof Map}function m_(e){return e instanceof Set}var Yq=typeof Object.getOwnPropertySymbols<"u";function ece(e){var t=Object.keys(e);if(!Yq)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter(function(r){return p_.propertyIsEnumerable.call(e,r)})):t}var Hg=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Yq?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Kq(e){return e===null?null:typeof e=="object"?""+e:e}function _u(e,t){return p_.hasOwnProperty.call(e,t)}var tce=Object.getOwnPropertyDescriptors||function(t){var n={};return Hg(t).forEach(function(r){n[r]=wC(t,r)}),n};function a6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ice(r.key),r)}}function D4(e,t,n){return t&&a6(e.prototype,t),n&&a6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wp(){return Wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wp.apply(this,arguments)}function Zq(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s5(e,t)}function s5(e,t){return s5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},s5(e,t)}function ZT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nce(e,t){if(e){if(typeof e=="string")return s6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s6(e,t)}}function s6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function og(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=nce(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rce(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ice(e){var t=rce(e,"string");return typeof t=="symbol"?t:String(t)}var pc=Symbol("mobx-stored-annotations");function bl(e){function t(n,r){g_(n,r,e)}return Object.assign(t,e)}function g_(e,t,n){_u(e,pc)||h_(e,pc,Wp({},e[pc])),pce(n)||(e[pc][t]=n)}function oce(e){return _u(e,pc)||h_(e,pc,Wp({},e[pc])),e[pc]}var Vt=Symbol("mobx administration"),v_=function(){function e(n){n===void 0&&(n="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.batchId_=void 0,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Bn.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n,this.batchId_=dt.inBatch?dt.batchId:NaN}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},t.reportObserved=function(){return _X(this)},t.reportChanged=function(){(!dt.inBatch||this.batchId_!==dt.batchId)&&(dt.stateVersion=dt.stateVersion<Number.MAX_SAFE_INTEGER?dt.stateVersion+1:Number.MIN_SAFE_INTEGER,this.batchId_=NaN),ma(),xX(this),ga()},t.toString=function(){return this.name_},e}(),B4=Ad("Atom",v_);function Kb(e,t,n){t===void 0&&(t=ig),n===void 0&&(n=ig);var r=new v_(e);return t!==ig&&RX(r,t),n!==ig&&j4(r,n),r}function ace(e,t){return e===t}function sce(e,t){return K4(e,t)}function lce(e,t){return K4(e,t,1)}function cce(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var qp={identity:ace,structural:sce,default:cce,shallow:lce};function Gg(e,t,n){return IP(e)?e:Array.isArray(e)?Qn.array(e,{name:n}):Eu(e)?Qn.object(e,void 0,{name:n}):Qv(e)?Qn.map(e,{name:n}):m_(e)?Qn.set(e,{name:n}):typeof e=="function"&&!EP(e)&&!Jb(e)?qq(e)?Yg(e):Wg(n,e):e}function uce(e,t,n){if(e==null||Ti(e)||Lo(e)||Wi(e)||Yo(e))return e;if(Array.isArray(e))return Qn.array(e,{name:n,deep:!1});if(Eu(e))return Qn.object(e,void 0,{name:n,deep:!1});if(Qv(e))return Qn.map(e,{name:n,deep:!1});if(m_(e))return Qn.set(e,{name:n,deep:!1})}function wP(e){return e}function fce(e,t){return K4(e,t)?t:e}var Jq="override",dce=bl({annotationType_:Jq,make_:hce,extend_:mce});function pce(e){return e.annotationType_===Jq}function hce(e,t){return 0}function mce(e,t,n,r){dn("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function y_(e,t){return{annotationType_:e,options_:t,make_:gce,extend_:vce}}function gce(e,t,n,r){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(e,t,n,!1)===null?0:1;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if(EP(n.value))return 1;var o=Qq(e,this,t,n,!1);return bc(r,t,o),2}function vce(e,t,n,r){var i=Qq(e,this,t,n);return e.defineProperty_(t,i,r)}function yce(e,t,n,r){t.annotationType_,r.value}function Qq(e,t,n,r,i){var o,a,s,l,c,u,f;i===void 0&&(i=dt.safeDescriptors),yce(e,t,n,r);var d=r.value;if((o=t.options_)!=null&&o.bound){var p;d=d.bind((p=e.proxy_)!=null?p:e.target_)}return{value:Xp((a=(s=t.options_)==null?void 0:s.name)!=null?a:n.toString(),d,(l=(c=t.options_)==null?void 0:c.autoAction)!=null?l:!1,(u=t.options_)!=null&&u.bound?(f=e.proxy_)!=null?f:e.target_:void 0),configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function eX(e,t){return{annotationType_:e,options_:t,make_:bce,extend_:_ce}}function bce(e,t,n,r){var i;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!_u(e.target_,t)||!Jb(e.target_[t]))&&this.extend_(e,t,n,!1)===null)return 0;if(Jb(n.value))return 1;var o=tX(e,this,t,n,!1,!1);return bc(r,t,o),2}function _ce(e,t,n,r){var i,o=tX(e,this,t,n,(i=this.options_)==null?void 0:i.bound);return e.defineProperty_(t,o,r)}function xce(e,t,n,r){t.annotationType_,r.value}function tX(e,t,n,r,i,o){o===void 0&&(o=dt.safeDescriptors),xce(e,t,n,r);var a=r.value;if(Jb(a)||(a=Yg(a)),i){var s;a=a.bind((s=e.proxy_)!=null?s:e.target_),a.isMobXFlow=!0}return{value:a,configurable:o?e.isPlainObject_:!0,enumerable:!1,writable:!o}}function N4(e,t){return{annotationType_:e,options_:t,make_:wce,extend_:Sce}}function wce(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function Sce(e,t,n,r){return Cce(e,this,t,n),e.defineComputedProperty_(t,Wp({},this.options_,{get:n.get,set:n.set}),r)}function Cce(e,t,n,r){t.annotationType_,r.get}function SP(e,t){return{annotationType_:e,options_:t,make_:Ace,extend_:Pce}}function Ace(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function Pce(e,t,n,r){var i,o;return Mce(e,this),e.defineObservableProperty_(t,n.value,(i=(o=this.options_)==null?void 0:o.enhancer)!=null?i:Gg,r)}function Mce(e,t,n,r){t.annotationType_}var Ece="true",Tce=nX();function nX(e){return{annotationType_:Ece,options_:e,make_:Oce,extend_:Ice}}function Oce(e,t,n,r){var i,o;if(n.get)return Ch.make_(e,t,n,r);if(n.set){var a=Xp(t.toString(),n.set);return r===e.target_?e.defineProperty_(t,{configurable:dt.safeDescriptors?e.isPlainObject_:!0,set:a})===null?0:2:(bc(r,t,{configurable:!0,set:a}),2)}if(r!==e.target_&&typeof n.value=="function"){var s;if(qq(n.value)){var l,c=(l=this.options_)!=null&&l.autoBind?Yg.bound:Yg;return c.make_(e,t,n,r)}var u=(s=this.options_)!=null&&s.autoBind?Wg.bound:Wg;return u.make_(e,t,n,r)}var f=((i=this.options_)==null?void 0:i.deep)===!1?Qn.ref:Qn;if(typeof n.value=="function"&&(o=this.options_)!=null&&o.autoBind){var d;n.value=n.value.bind((d=e.proxy_)!=null?d:e.target_)}return f.make_(e,t,n,r)}function Ice(e,t,n,r){var i,o;if(n.get)return Ch.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:dt.safeDescriptors?e.isPlainObject_:!0,set:Xp(t.toString(),n.set)},r);if(typeof n.value=="function"&&(i=this.options_)!=null&&i.autoBind){var a;n.value=n.value.bind((a=e.proxy_)!=null?a:e.target_)}var s=((o=this.options_)==null?void 0:o.deep)===!1?Qn.ref:Qn;return s.extend_(e,t,n,r)}var Rce="observable",kce="observable.ref",Lce="observable.shallow",$ce="observable.struct",rX={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(rX);function pw(e){return e||rX}var iX=SP(Rce),Dce=SP(kce,{enhancer:wP}),Bce=SP(Lce,{enhancer:uce}),Nce=SP($ce,{enhancer:fce}),oX=bl(iX);function hw(e){return e.deep===!0?Gg:e.deep===!1?wP:jce(e.defaultDecorator)}function Fce(e){var t;return e?(t=e.defaultDecorator)!=null?t:nX(e):void 0}function jce(e){var t,n;return e&&(t=(n=e.options_)==null?void 0:n.enhancer)!=null?t:Gg}function aX(e,t,n){if(Gp(t)){g_(e,t,iX);return}return IP(e)?e:Eu(e)?Qn.object(e,t,n):Array.isArray(e)?Qn.array(e,t):Qv(e)?Qn.map(e,t):m_(e)?Qn.set(e,t):typeof e=="object"&&e!==null?e:Qn.box(e,t)}Hq(aX,oX);var zce={box:function(t,n){var r=pw(n);return new Pp(t,hw(r),r.name,!0,r.equals)},array:function(t,n){var r=pw(n);return(dt.useProxies===!1||r.proxy===!1?que:Bue)(t,hw(r),r.name)},map:function(t,n){var r=pw(n);return new kP(t,hw(r),r.name)},set:function(t,n){var r=pw(n);return new X4(t,hw(r),r.name)},object:function(t,n,r){return Md(function(){return z4(dt.useProxies===!1||(r==null?void 0:r.proxy)===!1?x_({},r):kue({},r),t,n)})},ref:bl(Dce),shallow:bl(Bce),deep:oX,struct:bl(Nce)},Qn=Hq(aX,zce),sX="computed",Uce="computed.struct",lX=N4(sX),Vce=N4(Uce,{equals:qp.structural}),Ch=function(t,n){if(Gp(n))return g_(t,n,lX);if(Eu(t))return bl(N4(sX,t));var r=Eu(n)?n:{};return r.get=t,r.name||(r.name=t.name||""),new Zb(r)};Object.assign(Ch,lX);Ch.struct=bl(Vce);var l6,c6,SC=0,Hce=1,Gce=(l6=(c6=wC(function(){},"name"))==null?void 0:c6.configurable)!=null?l6:!1,u6={value:"action",configurable:!0,writable:!1,enumerable:!1};function Xp(e,t,n,r){n===void 0&&(n=!1);function i(){return cX(e,n,t,r||this,arguments)}return i.isMobxAction=!0,Gce&&(u6.value=e,bc(i,"name",u6)),i}function cX(e,t,n,r,i){var o=uX(e,t);try{return n.apply(r,i)}catch(a){throw o.error_=a,a}finally{fX(o)}}function uX(e,t,n,r){var i=!1,o=0,a=dt.trackingDerivation,s=!t||!a;ma();var l=dt.allowStateChanges;s&&(Ah(),l=AP(!0));var c=MP(!0),u={runAsAction_:s,prevDerivation_:a,prevAllowStateChanges_:l,prevAllowStateReads_:c,notifySpy_:i,startTime_:o,actionId_:Hce++,parentActionId_:SC};return SC=u.actionId_,u}function fX(e){SC!==e.actionId_&&dn(30),SC=e.parentActionId_,e.error_!==void 0&&(dt.suppressReactionErrors=!0),PP(e.prevAllowStateChanges_),Sg(e.prevAllowStateReads_),ga(),e.runAsAction_&&xu(e.prevDerivation_),dt.suppressReactionErrors=!1}function CP(e,t){var n=AP(e);try{return t()}finally{PP(n)}}function AP(e){var t=dt.allowStateChanges;return dt.allowStateChanges=e,t}function PP(e){dt.allowStateChanges=e}var dX;dX=Symbol.toPrimitive;var Pp=function(e){Zq(t,e);function t(r,i,o,a,s){var l;return o===void 0&&(o="ObservableValue"),s===void 0&&(s=qp.default),l=e.call(this,o)||this,l.enhancer=void 0,l.name_=void 0,l.equals=void 0,l.hasUnreportedChange_=!1,l.interceptors_=void 0,l.changeListeners_=void 0,l.value_=void 0,l.dehancer=void 0,l.enhancer=i,l.name_=o,l.equals=s,l.value_=i(r,void 0,o),l}var n=t.prototype;return n.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},n.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==dt.UNCHANGED&&this.setNewValue_(i)},n.prepareNewValue_=function(i){if(Ts(this)){var o=Os(this,{object:this,type:_c,newValue:i});if(!o)return dt.UNCHANGED;i=o.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?dt.UNCHANGED:i},n.setNewValue_=function(i){var o=this.value_;this.value_=i,this.reportChanged(),_l(this)&&xl(this,{type:_c,object:this,newValue:i,oldValue:o})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(i){return b_(this,i)},n.observe_=function(i,o){return o&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:_c,newValue:this.value_,oldValue:void 0}),__(this,i)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return Kq(this.get())},n[dX]=function(){return this.valueOf()},t}(v_),F4=Ad("ObservableValue",Pp),pX;pX=Symbol.toPrimitive;var Zb=function(){function e(n){this.dependenciesState_=Bn.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Bn.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new AC(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=CC.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||dn(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=Xp("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?qp.structural:qp.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){tue(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},t.get=function(){if(this.isComputing_&&dn(32,this.name_,this.derivation),dt.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)l5(this)&&(this.warnAboutUntrackedRead_(),ma(),this.value_=this.computeValue_(!1),ga());else if(_X(this),l5(this)){var r=dt.trackingContext;this.keepAlive_&&!r&&(dt.trackingContext=this),this.trackAndCompute()&&eue(this),dt.trackingContext=r}var i=this.value_;if(sS(i))throw i.cause;return i},t.set=function(r){if(this.setter_){this.isRunningSetter_&&dn(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,r)}finally{this.isRunningSetter_=!1}}else dn(34,this.name_)},t.trackAndCompute=function(){var r=this.value_,i=this.dependenciesState_===Bn.NOT_TRACKING_,o=this.computeValue_(!0),a=i||sS(r)||sS(o)||!this.equals_(r,o);return a&&(this.value_=o),a},t.computeValue_=function(r){this.isComputing_=!0;var i=AP(!1),o;if(r)o=hX(this,this.derivation,this.scope_);else if(dt.disableErrorBoundaries===!0)o=this.derivation.call(this.scope_);else try{o=this.derivation.call(this.scope_)}catch(a){o=new AC(a)}return PP(i),this.isComputing_=!1,o},t.suspend_=function(){this.keepAlive_||(c5(this),this.value_=void 0)},t.observe_=function(r,i){var o=this,a=!0,s=void 0;return Xg(function(){var l=o.get();if(!a||i){var c=Ah();r({observableKind:"computed",debugObjectName:o.name_,type:_c,object:o,newValue:l,oldValue:s}),xu(c)}a=!1,s=l})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return Kq(this.get())},t[pX]=function(){return this.valueOf()},e}(),Yp=Ad("ComputedValue",Zb),Bn;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(Bn||(Bn={}));var CC;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(CC||(CC={}));var AC=function(t){this.cause=void 0,this.cause=t};function sS(e){return e instanceof AC}function l5(e){switch(e.dependenciesState_){case Bn.UP_TO_DATE_:return!1;case Bn.NOT_TRACKING_:case Bn.STALE_:return!0;case Bn.POSSIBLY_STALE_:{for(var t=MP(!0),n=Ah(),r=e.observing_,i=r.length,o=0;o<i;o++){var a=r[o];if(Yp(a)){if(dt.disableErrorBoundaries)a.get();else try{a.get()}catch{return xu(n),Sg(t),!0}if(e.dependenciesState_===Bn.STALE_)return xu(n),Sg(t),!0}}return mX(e),xu(n),Sg(t),!1}}}function Wce(){return dt.trackingDerivation!==null}function hX(e,t,n){var r=MP(!0);mX(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++dt.runId;var i=dt.trackingDerivation;dt.trackingDerivation=e,dt.inBatch++;var o;if(dt.disableErrorBoundaries===!0)o=t.call(n);else try{o=t.call(n)}catch(a){o=new AC(a)}return dt.inBatch--,dt.trackingDerivation=i,qce(e),Sg(r),o}function qce(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Bn.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,a=0;a<o;a++){var s=n[a];s.diffValue_===0&&(s.diffValue_=1,i!==a&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}for(n.length=i,e.newObserving_=null,o=t.length;o--;){var l=t[o];l.diffValue_===0&&yX(l,e),l.diffValue_=0}for(;i--;){var c=n[i];c.diffValue_===1&&(c.diffValue_=0,Qce(c,e))}r!==Bn.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}function c5(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)yX(t[n],e);e.dependenciesState_=Bn.NOT_TRACKING_}function e0(e){var t=Ah();try{return e()}finally{xu(t)}}function Ah(){var e=dt.trackingDerivation;return dt.trackingDerivation=null,e}function xu(e){dt.trackingDerivation=e}function MP(e){var t=dt.allowStateReads;return dt.allowStateReads=e,t}function Sg(e){dt.allowStateReads=e}function mX(e){if(e.dependenciesState_!==Bn.UP_TO_DATE_){e.dependenciesState_=Bn.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Bn.UP_TO_DATE_}}var Xce=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],sb=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.batchId=Number.MIN_SAFE_INTEGER,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0,this.stateVersion=Number.MIN_SAFE_INTEGER},lS=!0,gX=!1,dt=function(){var e=L4();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(lS=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new sb().version&&(lS=!1),lS?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new sb):(setTimeout(function(){gX||dn(35)},1),new sb)}();function Yce(){if((dt.pendingReactions.length||dt.inBatch||dt.isRunningReactions)&&dn(36),gX=!0,lS){var e=L4();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),dt=new sb}}function vX(){return dt}function Kce(){var e=new sb;for(var t in e)Xce.indexOf(t)===-1&&(dt[t]=e[t]);dt.allowStateChanges=!dt.enforceActions}function Zce(e){return e.observers_&&e.observers_.size>0}function Jce(e){return e.observers_}function Qce(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function yX(e,t){e.observers_.delete(t),e.observers_.size===0&&bX(e)}function bX(e){e.isPendingUnobservation_===!1&&(e.isPendingUnobservation_=!0,dt.pendingUnobservations.push(e))}function ma(){dt.inBatch===0&&(dt.batchId=dt.batchId<Number.MAX_SAFE_INTEGER?dt.batchId+1:Number.MIN_SAFE_INTEGER),dt.inBatch++}function ga(){if(--dt.inBatch===0){wX();for(var e=dt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,n.observers_.size===0&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Zb&&n.suspend_())}dt.pendingUnobservations=[]}}function _X(e){var t=dt.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&dt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(e.observers_.size===0&&dt.inBatch>0&&bX(e),!1)}function xX(e){e.lowestObserverState_!==Bn.STALE_&&(e.lowestObserverState_=Bn.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Bn.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=Bn.STALE_}))}function eue(e){e.lowestObserverState_!==Bn.STALE_&&(e.lowestObserverState_=Bn.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Bn.POSSIBLY_STALE_?t.dependenciesState_=Bn.STALE_:t.dependenciesState_===Bn.UP_TO_DATE_&&(e.lowestObserverState_=Bn.UP_TO_DATE_)}))}function tue(e){e.lowestObserverState_===Bn.UP_TO_DATE_&&(e.lowestObserverState_=Bn.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Bn.UP_TO_DATE_&&(t.dependenciesState_=Bn.POSSIBLY_STALE_,t.onBecomeStale_())}))}var Kp=function(){function e(n,r,i,o){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Bn.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=CC.NONE,this.name_=n,this.onInvalidate_=r,this.errorHandler_=i,this.requiresObservable_=o}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,dt.pendingReactions.push(this),wX())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){ma(),this.isScheduled_=!1;var r=dt.trackingContext;if(dt.trackingContext=this,l5(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}dt.trackingContext=r,ga()}},t.track=function(r){if(!this.isDisposed_){ma(),this.isRunning_=!0;var i=dt.trackingContext;dt.trackingContext=this;var o=hX(this,r,void 0);dt.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&c5(this),sS(o)&&this.reportExceptionInDerivation_(o.cause),ga()}},t.reportExceptionInDerivation_=function(r){var i=this;if(this.errorHandler_){this.errorHandler_(r,this);return}if(dt.disableErrorBoundaries)throw r;var o="[mobx] uncaught error in '"+this+"'";dt.suppressReactionErrors||console.error(o,r),dt.globalReactionErrorHandlers.forEach(function(a){return a(r,i)})},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(ma(),c5(this),ga()))},t.getDisposer_=function(r){var i=this,o=function a(){i.dispose(),r==null||r.removeEventListener==null||r.removeEventListener("abort",a)};return r==null||r.addEventListener==null||r.addEventListener("abort",o),o[Vt]=this,o},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(r){},e}();function nue(e){return dt.globalReactionErrorHandlers.push(e),function(){var t=dt.globalReactionErrorHandlers.indexOf(e);t>=0&&dt.globalReactionErrorHandlers.splice(t,1)}}var rue=100,u5=function(t){return t()};function wX(){dt.inBatch>0||dt.isRunningReactions||u5(iue)}function iue(){dt.isRunningReactions=!0;for(var e=dt.pendingReactions,t=0;e.length>0;){++t===rue&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}dt.isRunningReactions=!1}var PC=Ad("Reaction",Kp);function oue(e){var t=u5;u5=function(r){return e(function(){return t(r)})}}function lb(){return!1}function SX(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var CX="action",aue="action.bound",AX="autoAction",sue="autoAction.bound",PX="<unnamed action>",MX=y_(CX),lue=y_(aue,{bound:!0}),EX=y_(AX,{autoAction:!0}),cue=y_(sue,{autoAction:!0,bound:!0});function TX(e){var t=function(r,i){if(Za(r))return Xp(r.name||PX,r,e);if(Za(i))return Xp(r,i,e);if(Gp(i))return g_(r,i,e?EX:MX);if(Gp(r))return bl(y_(e?AX:CX,{name:r,autoAction:e}))};return t}var hi=TX(!1);Object.assign(hi,MX);var Wg=TX(!0);Object.assign(Wg,EX);hi.bound=bl(lue);Wg.bound=bl(cue);function qg(e){return cX(e.name||PX,!1,e,this,void 0)}function EP(e){return Za(e)&&e.isMobxAction===!0}function Xg(e,t){var n,r,i,o,a;t===void 0&&(t=$4);var s=(n=(r=t)==null?void 0:r.name)!=null?n:"Autorun",l=!t.scheduler&&!t.delay,c;if(l)c=new Kp(s,function(){this.track(d)},t.onError,t.requiresObservable);else{var u=OX(t),f=!1;c=new Kp(s,function(){f||(f=!0,u(function(){f=!1,c.isDisposed_||c.track(d)}))},t.onError,t.requiresObservable)}function d(){e(c)}return(i=t)!=null&&(o=i.signal)!=null&&o.aborted||c.schedule_(),c.getDisposer_((a=t)==null?void 0:a.signal)}var uue=function(t){return t()};function OX(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:uue}function IX(e,t,n){var r,i,o,a;n===void 0&&(n=$4);var s=(r=n.name)!=null?r:"Reaction",l=hi(s,n.onError?fue(n.onError,t):t),c=!n.scheduler&&!n.delay,u=OX(n),f=!0,d=!1,p,h,g=n.compareStructural?qp.structural:n.equals||qp.default,v=new Kp(s,function(){f||c?m():d||(d=!0,u(m))},n.onError,n.requiresObservable);function m(){if(d=!1,!v.isDisposed_){var y=!1;v.track(function(){var _=CP(!1,function(){return e(v)});y=f||!g(p,_),h=p,p=_}),(f&&n.fireImmediately||!f&&y)&&l(p,h,v),f=!1}}return(i=n)!=null&&(o=i.signal)!=null&&o.aborted||v.schedule_(),v.getDisposer_((a=n)==null?void 0:a.signal)}function fue(e,t){return function(){try{return t.apply(this,arguments)}catch(n){e.call(this,n)}}}var due="onBO",pue="onBUO";function RX(e,t,n){return kX(due,e,t,n)}function j4(e,t,n){return kX(pue,e,t,n)}function kX(e,t,n,r){var i=typeof r=="function"?Pc(t,n):Pc(t),o=Za(r)?r:n,a=e+"L";return i[a]?i[a].add(o):i[a]=new Set([o]),function(){var s=i[a];s&&(s.delete(o),s.size===0&&delete i[a])}}var hue="never",mw="always",mue="observed";function LX(e){e.isolateGlobalState===!0&&Yce();var t=e.useProxies,n=e.enforceActions;if(t!==void 0&&(dt.useProxies=t===mw?!0:t===hue?!1:typeof Proxy<"u"),t==="ifavailable"&&(dt.verifyProxies=!0),n!==void 0){var r=n===mw?mw:n===mue;dt.enforceActions=r,dt.allowStateChanges=!(r===!0||r===mw)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in e&&(dt[i]=!!e[i])}),dt.allowStateReads=!dt.observableRequiresReaction,e.reactionScheduler&&oue(e.reactionScheduler)}function z4(e,t,n,r){var i=tce(t);return Md(function(){var o=x_(e,r)[Vt];Hg(i).forEach(function(a){o.extend_(a,i[a],n&&a in n?n[a]:!0)})}),e}function $X(e,t){return DX(Pc(e,t))}function DX(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=vue(e.observing_).map(DX)),t}function gue(e,t){return BX(Pc(e,t))}function BX(e){var t={name:e.name_};return Zce(e)&&(t.observers=Array.from(Jce(e)).map(BX)),t}function vue(e){return Array.from(new Set(e))}var yue=0;function TP(){this.message="FLOW_CANCELLED"}TP.prototype=Object.create(Error.prototype);function bue(e){return e instanceof TP}var f6=eX("flow"),_ue=eX("flow.bound",{bound:!0}),Yg=Object.assign(function(t,n){if(Gp(n))return g_(t,n,f6);var r=t,i=r.name||"<unnamed flow>",o=function(){var s=this,l=arguments,c=++yue,u=hi(i+" - runid: "+c+" - init",r).apply(s,l),f,d=void 0,p=new Promise(function(h,g){var v=0;f=g;function m(b){d=void 0;var x;try{x=hi(i+" - runid: "+c+" - yield "+v++,u.next).call(u,b)}catch(w){return g(w)}_(x)}function y(b){d=void 0;var x;try{x=hi(i+" - runid: "+c+" - yield "+v++,u.throw).call(u,b)}catch(w){return g(w)}_(x)}function _(b){if(Za(b==null?void 0:b.then)){b.then(_,g);return}return b.done?h(b.value):(d=Promise.resolve(b.value),d.then(m,y))}m(void 0)});return p.cancel=hi(i+" - runid: "+c+" - cancel",function(){try{d&&d6(d);var h=u.return(void 0),g=Promise.resolve(h.value);g.then(ig,ig),d6(g),f(new TP)}catch(v){f(v)}}),p};return o.isMobXFlow=!0,o},f6);Yg.bound=bl(_ue);function d6(e){Za(e.cancel)&&e.cancel()}function xue(e){return e}function Jb(e){return(e==null?void 0:e.isMobXFlow)===!0}function U4(e,t,n){var r;return Wi(e)||Lo(e)||F4(e)?r=Pl(e):Ti(e)&&(r=Pl(e,t)),r.dehancer=typeof t=="function"?t:n,function(){r.dehancer=void 0}}function OP(e,t,n){return Za(n)?Sue(e,t,n):wue(e,t)}function wue(e,t){return Pl(e).intercept_(t)}function Sue(e,t,n){return Pl(e,t).intercept_(n)}function NX(e,t){if(t===void 0)return Yp(e);if(Ti(e)===!1||!e[Vt].values_.has(t))return!1;var n=Pc(e,t);return Yp(n)}function Cue(e){return NX(e)}function FX(e,t){return NX(e,t)}function jX(e,t){return e?t!==void 0?Ti(e)?e[Vt].values_.has(t):!1:Ti(e)||!!e[Vt]||B4(e)||PC(e)||Yp(e):!1}function IP(e){return jX(e)}function zX(e,t){return jX(e,t)}function Qb(e){if(Ti(e))return e[Vt].keys_();if(Wi(e)||Yo(e))return Array.from(e.keys());if(Lo(e))return e.map(function(t,n){return n});dn(5)}function V4(e){if(Ti(e))return Qb(e).map(function(t){return e[t]});if(Wi(e))return Qb(e).map(function(t){return e.get(t)});if(Yo(e))return Array.from(e.values());if(Lo(e))return e.slice();dn(6)}function UX(e){if(Ti(e))return Qb(e).map(function(t){return[t,e[t]]});if(Wi(e))return Qb(e).map(function(t){return[t,e.get(t)]});if(Yo(e))return Array.from(e.entries());if(Lo(e))return e.map(function(t,n){return[n,t]});dn(7)}function H4(e,t,n){if(arguments.length===2&&!Yo(e)){ma();var r=t;try{for(var i in r)H4(e,i,r[i])}finally{ga()}return}Ti(e)?e[Vt].set_(t,n):Wi(e)?e.set(t,n):Yo(e)?e.add(t):Lo(e)?(typeof t!="number"&&(t=parseInt(t,10)),t<0&&dn("Invalid index: '"+t+"'"),ma(),t>=e.length&&(e.length=t+1),e[t]=n,ga()):dn(8)}function Aue(e,t){Ti(e)?e[Vt].delete_(t):Wi(e)||Yo(e)?e.delete(t):Lo(e)?(typeof t!="number"&&(t=parseInt(t,10)),e.splice(t,1)):dn(9)}function VX(e,t){if(Ti(e))return e[Vt].has_(t);if(Wi(e))return e.has(t);if(Yo(e))return e.has(t);if(Lo(e))return t>=0&&t<e.length;dn(10)}function Pue(e,t){if(VX(e,t)){if(Ti(e))return e[Vt].get_(t);if(Wi(e))return e.get(t);if(Lo(e))return e[t];dn(11)}}function G4(e,t,n){if(Ti(e))return e[Vt].defineProperty_(t,n);dn(39)}function HX(e){if(Ti(e))return e[Vt].ownKeys_();dn(38)}function RP(e,t,n,r){return Za(n)?Eue(e,t,n,r):Mue(e,t,n)}function Mue(e,t,n){return Pl(e).observe_(t,n)}function Eue(e,t,n,r){return Pl(e,t).observe_(n,r)}function gw(e,t,n){return e.set(t,n),n}function Pm(e,t){if(e==null||typeof e!="object"||e instanceof Date||!IP(e))return e;if(F4(e)||Yp(e))return Pm(e.get(),t);if(t.has(e))return t.get(e);if(Lo(e)){var n=gw(t,e,new Array(e.length));return e.forEach(function(a,s){n[s]=Pm(a,t)}),n}if(Yo(e)){var r=gw(t,e,new Set);return e.forEach(function(a){r.add(Pm(a,t))}),r}if(Wi(e)){var i=gw(t,e,new Map);return e.forEach(function(a,s){i.set(s,Pm(a,t))}),i}else{var o=gw(t,e,{});return HX(e).forEach(function(a){p_.propertyIsEnumerable.call(e,a)&&(o[a]=Pm(e[a],t))}),o}}function Tue(e,t){return Pm(e,new Map)}function Oue(){}function cc(e,t){t===void 0&&(t=void 0),ma();try{return e.apply(t)}finally{ga()}}function f5(e,t,n){return arguments.length===1||t&&typeof t=="object"?Iue(e,t):GX(e,t,n||{})}function GX(e,t,n){var r;if(typeof n.timeout=="number"){var i=new Error("WHEN_TIMEOUT");r=setTimeout(function(){if(!a[Vt].isDisposed_)if(a(),n.onError)n.onError(i);else throw i},n.timeout)}n.name="When";var o=Xp("When-effect",t),a=Xg(function(s){var l=CP(!1,e);l&&(s.dispose(),r&&clearTimeout(r),o())},n);return a}function Iue(e,t){var n;if(t!=null&&(n=t.signal)!=null&&n.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var r,i,o=new Promise(function(a,s){var l,c=GX(e,a,Wp({},t,{onError:s}));r=function(){c(),s(new Error("WHEN_CANCELLED"))},i=function(){c(),s(new Error("WHEN_ABORTED"))},t==null||(l=t.signal)==null||l.addEventListener==null||l.addEventListener("abort",i)}).finally(function(){var a;return t==null||(a=t.signal)==null||a.removeEventListener==null?void 0:a.removeEventListener("abort",i)});return o.cancel=r,o}function Xh(e){return e[Vt]}var Rue={has:function(t,n){return Xh(t).has_(n)},get:function(t,n){return Xh(t).get_(n)},set:function(t,n,r){var i;return Gp(n)?(i=Xh(t).set_(n,r,!0))!=null?i:!0:!1},deleteProperty:function(t,n){var r;return Gp(n)?(r=Xh(t).delete_(n,!0))!=null?r:!0:!1},defineProperty:function(t,n,r){var i;return(i=Xh(t).defineProperty_(n,r))!=null?i:!0},ownKeys:function(t){return Xh(t).ownKeys_()},preventExtensions:function(t){dn(13)}};function kue(e,t){var n,r;return Gq(),e=x_(e,t),(r=(n=e[Vt]).proxy_)!=null?r:n.proxy_=new Proxy(e,Rue)}function Ts(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function b_(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),Wq(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function Os(e,t){var n=Ah();try{for(var r=[].concat(e.interceptors_||[]),i=0,o=r.length;i<o&&(t=r[i](t),t&&!t.type&&dn(14),!!t);i++);return t}finally{xu(n)}}function _l(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function __(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),Wq(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function xl(e,t){var n=Ah(),r=e.changeListeners_;if(r){r=r.slice();for(var i=0,o=r.length;i<o;i++)r[i](t);xu(n)}}function W4(e,t,n){return Md(function(){var r,i=x_(e,n)[Vt];(r=t)!=null||(t=oce(e)),Hg(t).forEach(function(o){return i.make_(o,t[o])})}),e}var JT=Symbol("mobx-keys");function Lue(e,t,n){return Eu(e)?z4(e,e,t,n):(Md(function(){var r=x_(e,n)[Vt];if(!e[JT]){var i=Object.getPrototypeOf(e),o=new Set([].concat(Hg(e),Hg(i)));o.delete("constructor"),o.delete(Vt),h_(i,JT,o)}e[JT].forEach(function(a){return r.make_(a,t&&a in t?t[a]:!0)})}),e)}var p6="splice",_c="update",$ue=1e4,Due={get:function(t,n){var r=t[Vt];return n===Vt?r:n==="length"?r.getArrayLength_():typeof n=="string"&&!isNaN(n)?r.get_(parseInt(n)):_u(MC,n)?MC[n]:t[n]},set:function(t,n,r){var i=t[Vt];return n==="length"&&i.setArrayLength_(r),typeof n=="symbol"||isNaN(n)?t[n]=r:i.set_(parseInt(n),r),!0},preventExtensions:function(){dn(15)}},q4=function(){function e(n,r,i,o){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=o,this.atom_=new v_(n),this.enhancer_=function(a,s){return r(a,s,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.dehanceValues_=function(r){return this.dehancer!==void 0&&r.length>0?r.map(this.dehancer):r},t.intercept_=function(r){return b_(this,r)},t.observe_=function(r,i){return i===void 0&&(i=!1),i&&r({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),__(this,r)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(r){(typeof r!="number"||isNaN(r)||r<0)&&dn("Out of range: "+r);var i=this.values_.length;if(r!==i)if(r>i){for(var o=new Array(r-i),a=0;a<r-i;a++)o[a]=void 0;this.spliceWithArray_(i,0,o)}else this.spliceWithArray_(r,i-r)},t.updateArrayLength_=function(r,i){r!==this.lastKnownLength_&&dn(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&eY(r+i+1)},t.spliceWithArray_=function(r,i,o){var a=this;this.atom_;var s=this.values_.length;if(r===void 0?r=0:r>s?r=s:r<0&&(r=Math.max(0,s+r)),arguments.length===1?i=s-r:i==null?i=0:i=Math.max(0,Math.min(i,s-r)),o===void 0&&(o=a5),Ts(this)){var l=Os(this,{object:this.proxy_,type:p6,index:r,removedCount:i,added:o});if(!l)return a5;i=l.removedCount,o=l.added}if(o=o.length===0?o:o.map(function(f){return a.enhancer_(f,void 0)}),this.legacyMode_){var c=o.length-i;this.updateArrayLength_(s,c)}var u=this.spliceItemsIntoValues_(r,i,o);return(i!==0||o.length!==0)&&this.notifyArraySplice_(r,o,u),this.dehanceValues_(u)},t.spliceItemsIntoValues_=function(r,i,o){if(o.length<$ue){var a;return(a=this.values_).splice.apply(a,[r,i].concat(o))}else{var s=this.values_.slice(r,r+i),l=this.values_.slice(r+i);this.values_.length+=o.length-i;for(var c=0;c<o.length;c++)this.values_[r+c]=o[c];for(var u=0;u<l.length;u++)this.values_[r+o.length+u]=l[u];return s}},t.notifyArrayChildUpdate_=function(r,i,o){var a=!this.owned_&&lb(),s=_l(this),l=s||a?{observableKind:"array",object:this.proxy_,type:_c,debugObjectName:this.atom_.name_,index:r,newValue:i,oldValue:o}:null;this.atom_.reportChanged(),s&&xl(this,l)},t.notifyArraySplice_=function(r,i,o){var a=!this.owned_&&lb(),s=_l(this),l=s||a?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:p6,index:r,removed:o,added:i,removedCount:o.length,addedCount:i.length}:null;this.atom_.reportChanged(),s&&xl(this,l)},t.get_=function(r){if(this.legacyMode_&&r>=this.values_.length){console.warn("[mobx] Out of bounds read: "+r);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[r])},t.set_=function(r,i){var o=this.values_;if(this.legacyMode_&&r>o.length&&dn(17,r,o.length),r<o.length){this.atom_;var a=o[r];if(Ts(this)){var s=Os(this,{type:_c,object:this.proxy_,index:r,newValue:i});if(!s)return;i=s.newValue}i=this.enhancer_(i,a);var l=i!==a;l&&(o[r]=i,this.notifyArrayChildUpdate_(r,i,a))}else{for(var c=new Array(r+1-o.length),u=0;u<c.length-1;u++)c[u]=void 0;c[c.length-1]=i,this.spliceWithArray_(o.length,0,c)}},e}();function Bue(e,t,n,r){return n===void 0&&(n="ObservableArray"),r===void 0&&(r=!1),Gq(),Md(function(){var i=new q4(n,t,r,!1);Xq(i.values_,Vt,i);var o=new Proxy(i.values_,Due);return i.proxy_=o,e&&e.length&&i.spliceWithArray_(0,0,e),o})}var MC={clear:function(){return this.splice(0)},replace:function(t){var n=this[Vt];return n.spliceWithArray_(0,n.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a=this[Vt];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(t);case 2:return a.spliceWithArray_(t,n)}return a.spliceWithArray_(t,n,i)},spliceWithArray:function(t,n,r){return this[Vt].spliceWithArray_(t,n,r)},push:function(){for(var t=this[Vt],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.spliceWithArray_(t.values_.length,0,r),t.values_.length},pop:function(){return this.splice(Math.max(this[Vt].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[Vt],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.spliceWithArray_(0,0,r),t.values_.length},reverse:function(){return dt.trackingDerivation&&dn(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){dt.trackingDerivation&&dn(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var n=this[Vt],r=n.dehanceValues_(n.values_).indexOf(t);return r>-1?(this.splice(r,1),!0):!1}};Oi("concat",Hu);Oi("flat",Hu);Oi("includes",Hu);Oi("indexOf",Hu);Oi("join",Hu);Oi("lastIndexOf",Hu);Oi("slice",Hu);Oi("toString",Hu);Oi("toLocaleString",Hu);Oi("every",Pd);Oi("filter",Pd);Oi("find",Pd);Oi("findIndex",Pd);Oi("flatMap",Pd);Oi("forEach",Pd);Oi("map",Pd);Oi("some",Pd);Oi("reduce",WX);Oi("reduceRight",WX);function Oi(e,t){typeof Array.prototype[e]=="function"&&(MC[e]=t(e))}function Hu(e){return function(){var t=this[Vt];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Pd(e){return function(t,n){var r=this,i=this[Vt];i.atom_.reportObserved();var o=i.dehanceValues_(i.values_);return o[e](function(a,s){return t.call(n,a,s,r)})}}function WX(e){return function(){var t=this,n=this[Vt];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(o,a,s){return i(o,a,s,t)},r[e].apply(r,arguments)}}var Nue=Ad("ObservableArrayAdministration",q4);function Lo(e){return xP(e)&&Nue(e[Vt])}var qX,XX,Fue={},Nf="add",EC="delete";qX=Symbol.iterator;XX=Symbol.toStringTag;var kP=function(){function e(n,r,i){var o=this;r===void 0&&(r=Gg),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Vt]=Fue,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=r,this.name_=i,Za(Map)||dn(18),Md(function(){o.keysAtom_=Kb("ObservableMap.keys()"),o.data_=new Map,o.hasMap_=new Map,n&&o.merge(n)})}var t=e.prototype;return t.has_=function(r){return this.data_.has(r)},t.has=function(r){var i=this;if(!dt.trackingDerivation)return this.has_(r);var o=this.hasMap_.get(r);if(!o){var a=o=new Pp(this.has_(r),wP,"ObservableMap.key?",!1);this.hasMap_.set(r,a),j4(a,function(){return i.hasMap_.delete(r)})}return o.get()},t.set=function(r,i){var o=this.has_(r);if(Ts(this)){var a=Os(this,{type:o?_c:Nf,object:this,newValue:i,name:r});if(!a)return this;i=a.newValue}return o?this.updateValue_(r,i):this.addValue_(r,i),this},t.delete=function(r){var i=this;if(this.keysAtom_,Ts(this)){var o=Os(this,{type:EC,object:this,name:r});if(!o)return!1}if(this.has_(r)){var a=lb(),s=_l(this),l=s||a?{observableKind:"map",debugObjectName:this.name_,type:EC,object:this,oldValue:this.data_.get(r).value_,name:r}:null;return cc(function(){var c;i.keysAtom_.reportChanged(),(c=i.hasMap_.get(r))==null||c.setNewValue_(!1);var u=i.data_.get(r);u.setNewValue_(void 0),i.data_.delete(r)}),s&&xl(this,l),!0}return!1},t.updateValue_=function(r,i){var o=this.data_.get(r);if(i=o.prepareNewValue_(i),i!==dt.UNCHANGED){var a=lb(),s=_l(this),l=s||a?{observableKind:"map",debugObjectName:this.name_,type:_c,object:this,oldValue:o.value_,name:r,newValue:i}:null;o.setNewValue_(i),s&&xl(this,l)}},t.addValue_=function(r,i){var o=this;this.keysAtom_,cc(function(){var c,u=new Pp(i,o.enhancer_,"ObservableMap.key",!1);o.data_.set(r,u),i=u.value_,(c=o.hasMap_.get(r))==null||c.setNewValue_(!0),o.keysAtom_.reportChanged()});var a=lb(),s=_l(this),l=s||a?{observableKind:"map",debugObjectName:this.name_,type:Nf,object:this,name:r,newValue:i}:null;s&&xl(this,l)},t.get=function(r){return this.has(r)?this.dehanceValue_(this.data_.get(r).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var r=this,i=this.keys();return e1({next:function(){var a=i.next(),s=a.done,l=a.value;return{done:s,value:s?void 0:r.get(l)}}})},t.entries=function(){var r=this,i=this.keys();return e1({next:function(){var a=i.next(),s=a.done,l=a.value;return{done:s,value:s?void 0:[l,r.get(l)]}}})},t[qX]=function(){return this.entries()},t.forEach=function(r,i){for(var o=og(this),a;!(a=o()).done;){var s=a.value,l=s[0],c=s[1];r.call(i,c,l,this)}},t.merge=function(r){var i=this;return Wi(r)&&(r=new Map(r)),cc(function(){Eu(r)?ece(r).forEach(function(o){return i.set(o,r[o])}):Array.isArray(r)?r.forEach(function(o){var a=o[0],s=o[1];return i.set(a,s)}):Qv(r)?(r.constructor!==Map&&dn(19,r),r.forEach(function(o,a){return i.set(a,o)})):r!=null&&dn(20,r)}),this},t.clear=function(){var r=this;cc(function(){e0(function(){for(var i=og(r.keys()),o;!(o=i()).done;){var a=o.value;r.delete(a)}})})},t.replace=function(r){var i=this;return cc(function(){for(var o=jue(r),a=new Map,s=!1,l=og(i.data_.keys()),c;!(c=l()).done;){var u=c.value;if(!o.has(u)){var f=i.delete(u);if(f)s=!0;else{var d=i.data_.get(u);a.set(u,d)}}}for(var p=og(o.entries()),h;!(h=p()).done;){var g=h.value,v=g[0],m=g[1],y=i.data_.has(v);if(i.set(v,m),i.data_.has(v)){var _=i.data_.get(v);a.set(v,_),y||(s=!0)}}if(!s)if(i.data_.size!==a.size)i.keysAtom_.reportChanged();else for(var b=i.data_.keys(),x=a.keys(),w=b.next(),S=x.next();!w.done;){if(w.value!==S.value){i.keysAtom_.reportChanged();break}w=b.next(),S=x.next()}i.data_=a}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(r,i){return __(this,r)},t.intercept_=function(r){return b_(this,r)},D4(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:XX,get:function(){return"Map"}}]),e}(),Wi=Ad("ObservableMap",kP);function jue(e){if(Qv(e)||Wi(e))return e;if(Array.isArray(e))return new Map(e);if(Eu(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}else return dn(21,e)}var YX,KX,zue={};YX=Symbol.iterator;KX=Symbol.toStringTag;var X4=function(){function e(n,r,i){var o=this;r===void 0&&(r=Gg),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[Vt]=zue,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,Za(Set)||dn(22),this.enhancer_=function(a,s){return r(a,s,i)},Md(function(){o.atom_=Kb(o.name_),n&&o.replace(n)})}var t=e.prototype;return t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.clear=function(){var r=this;cc(function(){e0(function(){for(var i=og(r.data_.values()),o;!(o=i()).done;){var a=o.value;r.delete(a)}})})},t.forEach=function(r,i){for(var o=og(this),a;!(a=o()).done;){var s=a.value;r.call(i,s,s,this)}},t.add=function(r){var i=this;if(this.atom_,Ts(this)){var o=Os(this,{type:Nf,object:this,newValue:r});if(!o)return this}if(!this.has(r)){cc(function(){i.data_.add(i.enhancer_(r,void 0)),i.atom_.reportChanged()});var a=!1,s=_l(this),l=s||a?{observableKind:"set",debugObjectName:this.name_,type:Nf,object:this,newValue:r}:null;s&&xl(this,l)}return this},t.delete=function(r){var i=this;if(Ts(this)){var o=Os(this,{type:EC,object:this,oldValue:r});if(!o)return!1}if(this.has(r)){var a=!1,s=_l(this),l=s||a?{observableKind:"set",debugObjectName:this.name_,type:EC,object:this,oldValue:r}:null;return cc(function(){i.atom_.reportChanged(),i.data_.delete(r)}),s&&xl(this,l),!0}return!1},t.has=function(r){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(r))},t.entries=function(){var r=0,i=Array.from(this.keys()),o=Array.from(this.values());return e1({next:function(){var s=r;return r+=1,s<o.length?{value:[i[s],o[s]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var r=this,i=0,o=Array.from(this.data_.values());return e1({next:function(){return i<o.length?{value:r.dehanceValue_(o[i++]),done:!1}:{done:!0}}})},t.replace=function(r){var i=this;return Yo(r)&&(r=new Set(r)),cc(function(){Array.isArray(r)?(i.clear(),r.forEach(function(o){return i.add(o)})):m_(r)?(i.clear(),r.forEach(function(o){return i.add(o)})):r!=null&&dn("Cannot initialize set from "+r)}),this},t.observe_=function(r,i){return __(this,r)},t.intercept_=function(r){return b_(this,r)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[YX]=function(){return this.values()},D4(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:KX,get:function(){return"Set"}}]),e}(),Yo=Ad("ObservableSet",X4),h6=Object.create(null),m6="remove",ZX=function(){function e(n,r,i,o){r===void 0&&(r=new Map),o===void 0&&(o=Tce),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=r,this.name_=i,this.defaultAnnotation_=o,this.keysAtom_=new v_("ObservableObject.keys"),this.isPlainObject_=Eu(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(r){return this.values_.get(r).get()},t.setObservablePropValue_=function(r,i){var o=this.values_.get(r);if(o instanceof Zb)return o.set(i),!0;if(Ts(this)){var a=Os(this,{type:_c,object:this.proxy_||this.target_,name:r,newValue:i});if(!a)return null;i=a.newValue}if(i=o.prepareNewValue_(i),i!==dt.UNCHANGED){var s=_l(this),l=!1,c=s||l?{type:_c,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:o.value_,name:r,newValue:i}:null;o.setNewValue_(i),s&&xl(this,c)}return!0},t.get_=function(r){return dt.trackingDerivation&&!_u(this.target_,r)&&this.has_(r),this.target_[r]},t.set_=function(r,i,o){return o===void 0&&(o=!1),_u(this.target_,r)?this.values_.has(r)?this.setObservablePropValue_(r,i):o?Reflect.set(this.target_,r,i):(this.target_[r]=i,!0):this.extend_(r,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,o)},t.has_=function(r){if(!dt.trackingDerivation)return r in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(r);return i||(i=new Pp(r in this.target_,wP,"ObservableObject.key?",!1),this.pendingKeys_.set(r,i)),i.get()},t.make_=function(r,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(r in this.target_)){var o;if((o=this.target_[pc])!=null&&o[r])return;dn(1,i.annotationType_,this.name_+"."+r.toString())}for(var a=this.target_;a&&a!==p_;){var s=wC(a,r);if(s){var l=i.make_(this,r,s,a);if(l===0)return;if(l===1)break}a=Object.getPrototypeOf(a)}v6(this,i,r)}},t.extend_=function(r,i,o,a){if(a===void 0&&(a=!1),o===!0&&(o=this.defaultAnnotation_),o===!1)return this.defineProperty_(r,i,a);var s=o.extend_(this,r,i,a);return s&&v6(this,o,r),s},t.defineProperty_=function(r,i,o){o===void 0&&(o=!1),this.keysAtom_;try{ma();var a=this.delete_(r);if(!a)return a;if(Ts(this)){var s=Os(this,{object:this.proxy_||this.target_,name:r,type:Nf,newValue:i.value});if(!s)return null;var l=s.newValue;i.value!==l&&(i=Wp({},i,{value:l}))}if(o){if(!Reflect.defineProperty(this.target_,r,i))return!1}else bc(this.target_,r,i);this.notifyPropertyAddition_(r,i.value)}finally{ga()}return!0},t.defineObservableProperty_=function(r,i,o,a){a===void 0&&(a=!1),this.keysAtom_;try{ma();var s=this.delete_(r);if(!s)return s;if(Ts(this)){var l=Os(this,{object:this.proxy_||this.target_,name:r,type:Nf,newValue:i});if(!l)return null;i=l.newValue}var c=g6(r),u={configurable:dt.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:c.get,set:c.set};if(a){if(!Reflect.defineProperty(this.target_,r,u))return!1}else bc(this.target_,r,u);var f=new Pp(i,o,"ObservableObject.key",!1);this.values_.set(r,f),this.notifyPropertyAddition_(r,f.value_)}finally{ga()}return!0},t.defineComputedProperty_=function(r,i,o){o===void 0&&(o=!1),this.keysAtom_;try{ma();var a=this.delete_(r);if(!a)return a;if(Ts(this)){var s=Os(this,{object:this.proxy_||this.target_,name:r,type:Nf,newValue:void 0});if(!s)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var l=g6(r),c={configurable:dt.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:l.get,set:l.set};if(o){if(!Reflect.defineProperty(this.target_,r,c))return!1}else bc(this.target_,r,c);this.values_.set(r,new Zb(i)),this.notifyPropertyAddition_(r,void 0)}finally{ga()}return!0},t.delete_=function(r,i){if(i===void 0&&(i=!1),this.keysAtom_,!_u(this.target_,r))return!0;if(Ts(this)){var o=Os(this,{object:this.proxy_||this.target_,name:r,type:m6});if(!o)return null}try{var a,s;ma();var l=_l(this),c=!1,u=this.values_.get(r),f=void 0;if(!u&&(l||c)){var d;f=(d=wC(this.target_,r))==null?void 0:d.value}if(i){if(!Reflect.deleteProperty(this.target_,r))return!1}else delete this.target_[r];if(u&&(this.values_.delete(r),u instanceof Pp&&(f=u.value_),xX(u)),this.keysAtom_.reportChanged(),(a=this.pendingKeys_)==null||(s=a.get(r))==null||s.set(r in this.target_),l||c){var p={type:m6,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:f,name:r};l&&xl(this,p)}}finally{ga()}return!0},t.observe_=function(r,i){return __(this,r)},t.intercept_=function(r){return b_(this,r)},t.notifyPropertyAddition_=function(r,i){var o,a,s=_l(this),l=!1;if(s||l){var c=s||l?{type:Nf,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:r,newValue:i}:null;s&&xl(this,c)}(o=this.pendingKeys_)==null||(a=o.get(r))==null||a.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Hg(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function x_(e,t){var n;if(_u(e,Vt))return e;var r=(n=t==null?void 0:t.name)!=null?n:"ObservableObject",i=new ZX(e,new Map,String(r),Fce(t));return h_(e,Vt,i),e}var Uue=Ad("ObservableObjectAdministration",ZX);function g6(e){return h6[e]||(h6[e]={get:function(){return this[Vt].getObservablePropValue_(e)},set:function(n){return this[Vt].setObservablePropValue_(e,n)}})}function Ti(e){return xP(e)?Uue(e[Vt]):!1}function v6(e,t,n){var r;(r=e.target_[pc])==null||delete r[n]}var Vue=QX(0),Hue=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),QT=0,JX=function(){};function Gue(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}Gue(JX,Array.prototype);var Y4=function(e,t,n){Zq(r,e);function r(o,a,s,l){var c;return s===void 0&&(s="ObservableArray"),l===void 0&&(l=!1),c=e.call(this)||this,Md(function(){var u=new q4(s,a,l,!0);u.proxy_=ZT(c),Xq(ZT(c),Vt,u),o&&o.length&&c.spliceWithArray(0,0,o),Hue&&Object.defineProperty(ZT(c),"0",Vue)}),c}var i=r.prototype;return i.concat=function(){this[Vt].atom_.reportObserved();for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return Array.prototype.concat.apply(this.slice(),s.map(function(c){return Lo(c)?c.slice():c}))},i[n]=function(){var o=this,a=0;return e1({next:function(){return a<o.length?{value:o[a++],done:!1}:{done:!0,value:void 0}}})},D4(r,[{key:"length",get:function(){return this[Vt].getArrayLength_()},set:function(a){this[Vt].setArrayLength_(a)}},{key:t,get:function(){return"Array"}}]),r}(JX,Symbol.toStringTag,Symbol.iterator);Object.entries(MC).forEach(function(e){var t=e[0],n=e[1];t!=="concat"&&h_(Y4.prototype,t,n)});function QX(e){return{enumerable:!1,configurable:!0,get:function(){return this[Vt].get_(e)},set:function(n){this[Vt].set_(e,n)}}}function Wue(e){bc(Y4.prototype,""+e,QX(e))}function eY(e){if(e>QT){for(var t=QT;t<e+100;t++)Wue(t);QT=e}}eY(1e3);function que(e,t,n){return new Y4(e,t,n)}function Pc(e,t){if(typeof e=="object"&&e!==null){if(Lo(e))return t!==void 0&&dn(23),e[Vt].atom_;if(Yo(e))return e.atom_;if(Wi(e)){if(t===void 0)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||dn(25,t,TC(e)),n}if(Ti(e)){if(!t)return dn(26);var r=e[Vt].values_.get(t);return r||dn(27,t,TC(e)),r}if(B4(e)||Yp(e)||PC(e))return e}else if(Za(e)&&PC(e[Vt]))return e[Vt];dn(28)}function Pl(e,t){if(e||dn(29),t!==void 0)return Pl(Pc(e,t));if(B4(e)||Yp(e)||PC(e)||Wi(e)||Yo(e))return e;if(e[Vt])return e[Vt];dn(24,e)}function TC(e,t){var n;if(t!==void 0)n=Pc(e,t);else{if(EP(e))return e.name;Ti(e)||Wi(e)||Yo(e)?n=Pl(e):n=Pc(e)}return n.name_}function Md(e){var t=Ah(),n=AP(!0);ma();try{return e()}finally{ga(),PP(n),xu(t)}}var y6=p_.toString;function K4(e,t,n){return n===void 0&&(n=-1),d5(e,t,n)}function d5(e,t,n,r,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;if(o!=="function"&&o!=="object"&&typeof t!="object")return!1;var a=y6.call(e);if(a!==y6.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++;break}e=b6(e),t=b6(t);var s=a==="[object Array]";if(!s){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!(Za(l)&&l instanceof l&&Za(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(n===0)return!1;n<0&&(n=-1),r=r||[],i=i||[];for(var u=r.length;u--;)if(r[u]===e)return i[u]===t;if(r.push(e),i.push(t),s){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!d5(e[u],t[u],n-1,r,i))return!1}else{var f=Object.keys(e),d;if(u=f.length,Object.keys(t).length!==u)return!1;for(;u--;)if(d=f[u],!(_u(t,d)&&d5(e[d],t[d],n-1,r,i)))return!1}return r.pop(),i.pop(),!0}function b6(e){return Lo(e)?e.slice():Qv(e)||Wi(e)||m_(e)||Yo(e)?Array.from(e.entries()):e}function e1(e){return e[Symbol.iterator]=Xue,e}function Xue(){return this}["Symbol","Map","Set"].forEach(function(e){var t=L4();typeof t[e]>"u"&&dn("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:SX,extras:{getDebugName:TC},$mobx:Vt});const Yue=Object.freeze(Object.defineProperty({__proto__:null,$mobx:Vt,FlowCancellationError:TP,ObservableMap:kP,ObservableSet:X4,Reaction:Kp,_allowStateChanges:CP,_allowStateChangesInsideComputed:qg,_allowStateReadsEnd:Sg,_allowStateReadsStart:MP,_autoAction:Wg,_endAction:fX,_getAdministration:Pl,_getGlobalState:vX,_interceptReads:U4,_isComputingDerivation:Wce,_resetGlobalState:Kce,_startAction:uX,action:hi,autorun:Xg,comparer:qp,computed:Ch,configure:LX,createAtom:Kb,defineProperty:G4,entries:UX,extendObservable:z4,flow:Yg,flowResult:xue,get:Pue,getAtom:Pc,getDebugName:TC,getDependencyTree:$X,getObserverTree:gue,has:VX,intercept:OP,isAction:EP,isBoxedObservable:F4,isComputed:Cue,isComputedProp:FX,isFlow:Jb,isFlowCancellationError:bue,isObservable:IP,isObservableArray:Lo,isObservableMap:Wi,isObservableObject:Ti,isObservableProp:zX,isObservableSet:Yo,keys:Qb,makeAutoObservable:Lue,makeObservable:W4,observable:Qn,observe:RP,onBecomeObserved:RX,onBecomeUnobserved:j4,onReactionError:nue,override:dce,ownKeys:HX,reaction:IX,remove:Aue,runInAction:qg,set:H4,spy:SX,toJS:Tue,trace:Oue,transaction:cc,untracked:e0,values:V4,when:f5},Symbol.toStringTag,{value:"Module"}));if(!$.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!W4)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function Kue(e){e()}function tY(e){e||(e=Kue),LX({reactionScheduler:e})}function Zue(e){return $X(e)}var nY=!1;function rY(e){nY=e}function Kg(){return nY}var Jue=1e4,Que=1e4,efe=function(){function e(t){var n=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(r){r===void 0&&(r=Jue),clearTimeout(n.sweepTimeout),n.sweepTimeout=void 0;var i=Date.now();n.registrations.forEach(function(o,a){i-o.registeredAt>=r&&(n.finalize(o.value),n.registrations.delete(a))}),n.registrations.size>0&&n.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,r){this.registrations.set(r,{value:n,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,Que))}}),e}(),tfe=typeof FinalizationRegistry<"u"?FinalizationRegistry:efe,t1=new tfe(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),iY={exports:{}},oY={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg=$;function nfe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rfe=typeof Object.is=="function"?Object.is:nfe,ife=Zg.useState,ofe=Zg.useEffect,afe=Zg.useLayoutEffect,sfe=Zg.useDebugValue;function lfe(e,t){var n=t(),r=ife({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return afe(function(){i.value=n,i.getSnapshot=t,eO(i)&&o({inst:i})},[e,n,t]),ofe(function(){return eO(i)&&o({inst:i}),e(function(){eO(i)&&o({inst:i})})},[e]),sfe(n),n}function eO(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rfe(e,n)}catch{return!0}}function cfe(e,t){return t()}var ufe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cfe:lfe;oY.useSyncExternalStore=Zg.useSyncExternalStore!==void 0?Zg.useSyncExternalStore:ufe;iY.exports=oY;var ffe=iY.exports,dfe=function(){};function _6(e){e.reaction=new Kp("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function Z4(e,t){if(t===void 0&&(t="observed"),Kg())return e();var n=Be.useRef(null);if(!n.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(s){return t1.unregister(r),r.onStoreChange=s,r.reaction||(_6(r),r.stateVersion=Symbol()),function(){var l;r.onStoreChange=null,(l=r.reaction)===null||l===void 0||l.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};n.current=r}var i=n.current;i.reaction||(_6(i),t1.register(n,i,i)),Be.useDebugValue(i.reaction,Zue),ffe.useSyncExternalStore(i.subscribe,i.getSnapshot,dfe);var o,a;if(i.reaction.track(function(){try{o=e()}catch(s){a=s}}),a)throw a;return o}var aY=typeof Symbol=="function"&&Symbol.for,x6=aY?Symbol.for("react.forward_ref"):typeof $.forwardRef=="function"&&$.forwardRef(function(e){return null}).$$typeof,w6=aY?Symbol.for("react.memo"):typeof $.memo=="function"&&$.memo(function(e){return null}).$$typeof;function pfe(e,t){var n;if(w6&&e.$$typeof===w6)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(Kg())return e;var r=(n=t==null?void 0:t.forwardRef)!==null&&n!==void 0?n:!1,i=e,o=e.displayName||e.name;if(x6&&e.$$typeof===x6&&(r=!0,i=e.render,typeof i!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var a=function(s,l){return Z4(function(){return i(s,l)},o)};return a.displayName=e.displayName,Object.defineProperty(a,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(a.contextTypes=e.contextTypes),r&&(a=$.forwardRef(a)),a=$.memo(a),mfe(e,a),a}var hfe={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function mfe(e,t){Object.keys(e).forEach(function(n){hfe[n]||Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}function sY(e){var t=e.children,n=e.render,r=t||n;return typeof r!="function"?null:Z4(r)}sY.displayName="Observer";function gfe(e,t){return $.useState(function(){return Qn(e(),t,{autoBind:!0})})[0]}var vfe=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};function lY(e){var t=vfe($.useState(function(){return Qn(e,{},{deep:!1})}),1),n=t[0];return qg(function(){Object.assign(n,e)}),n}function yfe(e,t){var n=t&&lY(t);return $.useState(function(){return Qn(e(n),void 0,{autoBind:!0})})[0]}var tO;tY(Hp.unstable_batchedUpdates);tO=t1.finalizeAllImmediately;function bfe(e,t){return t===void 0&&(t="observed"),Z4(e,t)}function _fe(e){rY(e)}function xfe(e,t){if(S6(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.hasOwnProperty.call(t,n[i])||!S6(e[n[i]],t[n[i]]))return!1;return!0}function S6(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var wfe={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,displayName:1,propTypes:1};function Sfe(e,t){var n=Object.getOwnPropertyNames(Object.getPrototypeOf(e));Object.getOwnPropertyNames(e).forEach(function(r){!wfe[r]&&n.indexOf(r)===-1&&Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var C6=Symbol("patchMixins"),cY=Symbol("patchedDefinition");function Cfe(e,t){var n=e[C6]=e[C6]||{},r=n[t]=n[t]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}function A6(e,t){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t.locks++;try{var a;return e!=null&&(a=e.apply(this,i)),a}finally{t.locks--,t.locks===0&&t.methods.forEach(function(s){s.apply(n,i)})}}function P6(e,t){var n=function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];A6.call.apply(A6,[this,e,t].concat(o))};return n}function uY(e,t,n){var r=Cfe(e,t);r.methods.indexOf(n)<0&&r.methods.push(n);var i=Object.getOwnPropertyDescriptor(e,t);if(!(i&&i[cY])){var o=e[t],a=fY(e,t,i?i.enumerable:void 0,r,o);Object.defineProperty(e,t,a)}}function fY(e,t,n,r,i){var o,a=P6(i,r);return o={},o[cY]=!0,o.get=function(){return a},o.set=function(l){if(this===e)a=P6(l,r);else{var c=fY(this,t,n,r,l);Object.defineProperty(this,t,c)}},o.configurable=!0,o.enumerable=n,o}var M6=Symbol("ObserverAdministration"),E6=Symbol("isMobXReactObserver");function p5(e){var t;return(t=e[M6])!=null?t:e[M6]={reaction:null,mounted:!1,reactionInvalidatedBeforeMount:!1,forceUpdate:null,name:h5(e.constructor),state:void 0,props:void 0,context:void 0}}function Afe(e){var t=e.prototype;if(e[E6]){var n=h5(e);throw new Error("The provided component class ("+n+") has already been declared as an observer component.")}else e[E6]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==$.PureComponent){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=T6;else if(t.shouldComponentUpdate!==T6)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}var r=t.render;if(typeof r!="function"){var i=h5(e);throw new Error("[mobx-react] class component ("+i+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}t.render=function(){return Object.defineProperty(this,"render",{configurable:!1,writable:!1,value:Kg()?r:Pfe.call(this,r)}),this.render()};var o=t.componentDidMount;return t.componentDidMount=function(){var a=this,s=p5(this);return s.mounted=!0,t1.unregister(s),s.forceUpdate=function(){return a.forceUpdate()},(!s.reaction||s.reactionInvalidatedBeforeMount)&&s.forceUpdate(),o==null?void 0:o.apply(this,arguments)},uY(t,"componentWillUnmount",function(){var a;if(!Kg()){var s=p5(this);(a=s.reaction)==null||a.dispose(),s.reaction=null,s.forceUpdate=null,s.mounted=!1,s.reactionInvalidatedBeforeMount=!1}}),e}function h5(e){return e.displayName||e.name||"<component>"}function Pfe(e){var t=e.bind(this),n=p5(this);function r(){n.reaction||(n.reaction=Mfe(n),n.mounted||t1.register(this,n,this));var i=void 0,o=void 0;if(n.reaction.track(function(){try{o=CP(!1,t)}catch(a){i=a}}),i)throw i;return o}return r}function Mfe(e){return new Kp(e.name+".render()",function(){if(!e.mounted){e.reactionInvalidatedBeforeMount=!0;return}try{e.forceUpdate==null||e.forceUpdate()}catch{var t;(t=e.reaction)==null||t.dispose(),e.reaction=null}})}function T6(e,t){return Kg()&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t?!0:!xfe(this.props,e)}function nr(e){return e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call($.Component,e)||Object.prototype.isPrototypeOf.call($.PureComponent,e)?Afe(e):pfe(e)}function OC(){return OC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OC.apply(this,arguments)}function Efe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var Tfe=["children"],IC=Be.createContext({});function dY(e){var t=e.children,n=Efe(e,Tfe),r=Be.useContext(IC),i=Be.useRef(OC({},r,n)),o=i.current;return Be.createElement(IC.Provider,{value:o},t)}dY.displayName="MobXProvider";function O6(e,t,n,r){var i=Be.forwardRef(function(o,a){var s=OC({},o),l=Be.useContext(IC);return Object.assign(s,e(l||{},s)||{}),a&&(s.ref=a),Be.createElement(t,s)});return r&&(i=nr(i)),i.isMobxInjector=!0,Sfe(t,i),i.wrappedComponent=t,i.displayName=Ofe(t,n),i}function Ofe(e,t){var n,r=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t?n="inject-with-"+t+"("+r+")":n="inject("+r+")",n}function Ife(e){return function(t,n){return e.forEach(function(r){if(!(r in n)){if(!(r in t))throw new Error("MobX injector: Store '"+r+"' is not available! Make sure it is provided by some Provider");n[r]=t[r]}}),n}}function Rfe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(typeof arguments[0]=="function"){var r=arguments[0];return function(i){return O6(r,i,r.name,!0)}}else return function(i){return O6(Ife(t),i,t.join("-"),!1)}}var kfe=Number.parseInt(Be.version.split(".")[0]),I6=!1,cS=Symbol("disposeOnUnmountProto"),uS=Symbol("disposeOnUnmountInst");function Lfe(){var e=this;[].concat(this[cS]||[],this[uS]||[]).forEach(function(t){var n=typeof t=="string"?e[t]:t;n!=null&&(Array.isArray(n)?n.map(function(r){return r()}):n())})}function pY(e,t){if(Array.isArray(t))return t.map(function(l){return pY(e,l)});I6||(kfe>=18?console.error("[mobx-react] disposeOnUnmount is not compatible with React 18 and higher. Don't use it."):console.warn("[mobx-react] disposeOnUnmount is deprecated. It won't work correctly with React 18 and higher."),I6=!0);var n=Object.getPrototypeOf(e).constructor,r=Object.getPrototypeOf(e.constructor),i=Object.getPrototypeOf(Object.getPrototypeOf(e));if(!(n===Be.Component||n===Be.PureComponent||r===Be.Component||r===Be.PureComponent||i===Be.Component||i===Be.PureComponent))throw new Error("[mobx-react] disposeOnUnmount only supports direct subclasses of React.Component or React.PureComponent.");if(typeof t!="string"&&typeof t!="function"&&!Array.isArray(t))throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.");var o=typeof t=="string",a=!!e[cS]||!!e[uS],s=o?e[cS]||(e[cS]=[]):e[uS]||(e[uS]=[]);if(s.push(t),a||uY(e,"componentWillUnmount",Lfe),typeof t!="string")return t}function hY(e){function t(r,i,o,a,s,l){for(var c=arguments.length,u=new Array(c>6?c-6:0),f=6;f<c;f++)u[f-6]=arguments[f];return e0(function(){if(a=a||"<<anonymous>>",l=l||o,i[o]==null){if(r){var d=i[o]===null?"null":"undefined";return new Error("The "+s+" `"+l+"` is marked as required in `"+a+"`, but its value is `"+d+"`.")}return null}else return e.apply(void 0,[i,o,a,s,l].concat(u))})}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function $fe(e,t){return e==="symbol"||t["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&t instanceof Symbol}function mY(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":$fe(t,e)?"symbol":t}function Dfe(e){var t=mY(e);if(t==="object"){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function t0(e,t){return hY(function(n,r,i,o,a){return e0(function(){if(e&&mY(n[r])===t.toLowerCase())return null;var s;switch(t){case"Array":s=Lo;break;case"Object":s=Ti;break;case"Map":s=Wi;break;default:throw new Error("Unexpected mobxType: "+t)}var l=n[r];if(!s(l)){var c=Dfe(l),u=e?" or javascript `"+t.toLowerCase()+"`":"";return new Error("Invalid prop `"+a+"` of type `"+c+"` supplied to `"+i+"`, expected `mobx.Observable"+t+"`"+u+".")}return null})})}function gY(e,t){return hY(function(n,r,i,o,a){for(var s=arguments.length,l=new Array(s>5?s-5:0),c=5;c<s;c++)l[c-5]=arguments[c];return e0(function(){if(typeof t!="function")return new Error("Property `"+a+"` of component `"+i+"` has invalid PropType notation.");var u=t0(e,"Array")(n,r,i,o,a);if(u instanceof Error)return u;for(var f=n[r],d=0;d<f.length;d++)if(u=t.apply(void 0,[f,d,i,o,a+"["+d+"]"].concat(l)),u instanceof Error)return u;return null})})}var Bfe=t0(!1,"Array"),Nfe=gY.bind(null,!1),Ffe=t0(!1,"Map"),jfe=t0(!1,"Object"),zfe=t0(!0,"Array"),Ufe=gY.bind(null,!0),Vfe=t0(!0,"Object"),Hfe={observableArray:Bfe,observableArrayOf:Nfe,observableMap:Ffe,observableObject:jfe,arrayOrObservableArray:zfe,arrayOrObservableArrayOf:Ufe,objectOrObservableObject:Vfe};if(!$.Component)throw new Error("mobx-react requires React to be available");if(!Qn)throw new Error("mobx-react requires mobx to be available");const Gfe=Object.freeze(Object.defineProperty({__proto__:null,MobXProviderContext:IC,Observer:sY,PropTypes:Hfe,Provider:dY,disposeOnUnmount:pY,enableStaticRendering:rY,inject:Rfe,isUsingStaticRendering:Kg,observer:nr,observerBatching:tY,useAsObservableSource:lY,useLocalObservable:gfe,useLocalStore:yfe,useObserver:bfe,useStaticRendering:_fe},Symbol.toStringTag,{value:"Module"}));var vY="warn";function yY(e){vY=e}function bY(){return vY}function Wfe(e){yY(e)}var Ci;(function(e){e.afterCreate="afterCreate",e.afterAttach="afterAttach",e.afterCreationFinalization="afterCreationFinalization",e.beforeDetach="beforeDetach",e.beforeDestroy="beforeDestroy"})(Ci||(Ci={}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var m5=function(e,t){return m5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},m5(e,t)};function Mr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");m5(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Hi=function(){return Hi=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Hi.apply(this,arguments)};function qfe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function _Y(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function cb(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function J4(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function Ed(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(J4(arguments[t]));return e}function w_(e){return kt(e).type}function Xfe(e,t){return kt(e).getChildType(t)}function xY(e,t){return kt(e).onPatch(t)}function wY(e,t){return kt(e).onSnapshot(t)}function Jg(e,t){kt(e).applyPatches(oD(t))}function Yfe(e,t){var n={patches:[],reversedInversePatches:[]},r={},i,o={get recording(){return!!i},get patches(){return r.patches||(r.patches=n.patches.slice()),r.patches},get reversedInversePatches(){return r.reversedInversePatches||(r.reversedInversePatches=n.reversedInversePatches.slice()),r.reversedInversePatches},get inversePatches(){return r.inversePatches||(r.inversePatches=n.reversedInversePatches.slice().reverse()),r.inversePatches},stop:function(){i&&(i(),i=void 0)},resume:function(){i||(i=xY(e,function(a,s){t&&!t(a,s,tD())||(n.patches.push(a),n.reversedInversePatches.unshift(s),r.patches=void 0,r.inversePatches=void 0,r.reversedInversePatches=void 0)}))},replay:function(a){Jg(a||e,n.patches)},undo:function(a){Jg(a||e,n.reversedInversePatches)}};return o.resume(),o}function Kfe(e){var t=kt(e);if(!t.isRoot)throw Mt("`protect` can only be invoked on root nodes");t.isProtectionEnabled=!0}function Zfe(e){var t=kt(e);if(!t.isRoot)throw Mt("`unprotect` can only be invoked on root nodes");t.isProtectionEnabled=!1}function Jfe(e){return kt(e).isProtected}function SY(e,t){return kt(e).applySnapshot(t)}function S_(e,t){t===void 0&&(t=!0);var n=kt(e);return t?n.snapshot:n.type.getSnapshot(n,!1)}function Qfe(e,t){t===void 0&&(t=1);for(var n=kt(e).parent;n;){if(--t===0)return!0;n=n.parent}return!1}function ede(e,t){t===void 0&&(t=1);for(var n=t,r=kt(e).parent;r;){if(--n===0)return r.storedValue;r=r.parent}throw Mt("Failed to find the parent of "+kt(e)+" at depth "+t)}function tde(e,t){for(var n=kt(e).parent;n;){if(t.is(n.storedValue))return!0;n=n.parent}return!1}function nde(e,t){for(var n=kt(e).parent;n;){if(t.is(n.storedValue))return n.storedValue;n=n.parent}throw Mt("Failed to find the parent of "+kt(e)+" of a given type")}function CY(e){return kt(e).root.storedValue}function AY(e){return kt(e).path}function rde(e){return nv(kt(e).path)}function ide(e){return kt(e).isRoot}function ode(e,t){var n=VY(kt(e),t);return n?n.value:void 0}function ade(e,t,n){var r=kt(t).root.identifierCache.resolve(e,n0(n));return r==null?void 0:r.value}function PY(e){return kt(e).identifier}function sde(e,t){t===void 0&&(t=!0);try{var n=e();if(n==null)return;if(Gn(n))return t?Q4(n)?n:void 0:n;throw Mt("The reference to be checked is not one of node, null or undefined")}catch(r){if(r instanceof aD)return;throw r}}function lde(e,t){t===void 0&&(t=!0);try{var n=e();if(n==null)return!1;if(Gn(n))return t?Q4(n):!0;throw Mt("The reference to be checked is not one of node, null or undefined")}catch(r){if(r instanceof aD)return!1;throw r}}function MY(e,t){var n=VY(kt(e),t,!1);if(n!==void 0)try{return n.value}catch{return}}function cde(e,t){return UY(kt(e),kt(t))}function ude(e,t){t===void 0&&(t=!0);var n=kt(e);return n.type.create(n.snapshot,t===!0?n.root.environment:t===!1?void 0:t)}function fde(e){return kt(e).detach(),e}function dde(e){var t=kt(e);t.isRoot?t.die():t.parent.removeChild(t.subpath)}function Q4(e){return kt(e).observableIsAlive}function RC(e,t){var n=kt(e);return n.addDisposer(t),t}function pde(e){var t=kt(e),n=t.root.environment;return n||Zp}function EY(e,t){var n=kt(e);n.getChildren().forEach(function(r){Gn(r.storedValue)&&EY(r.storedValue,t)}),t(n.storedValue)}function TY(e){var t;return Gn(e)?t=w_(e):t=e,{name:t.name,properties:Hi({},t.properties)}}function hde(e){var t=kt(e).type,n=Hi(Hi({},TY(t)),{actions:[],volatile:[],views:[],flowActions:[]}),r=Object.getOwnPropertyNames(e);return r.forEach(function(i){if(!(i in n.properties)){var o=Object.getOwnPropertyDescriptor(e,i);if(o.get){FX(e,i)?n.views.push(i):n.volatile.push(i);return}o.value._isMSTAction===!0&&n.actions.push(i),o.value._isFlowAction===!0?n.flowActions.push(i):zX(e,i)?n.volatile.push(i):n.views.push(i)}}),n}function mde(e){return e}function gde(e){return e}function vde(e){return e}function yde(e){return kt(e).nodeId}var OY=function(){function e(t,n,r,i){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"environment",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_escapedSubpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"storedValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aliveAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:to.INITIALIZING}),Object.defineProperty(this,"_hookSubscribers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pathAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.environment=i,this.baseSetParent(n,r)}return Object.defineProperty(e.prototype,"subpath",{get:function(){return this._subpath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){var n=this.isAlive;this._state=t;var r=this.isAlive;this.aliveAtom&&n!==r&&this.aliveAtom.reportChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fireInternalHook",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this._hookSubscribers&&this._hookSubscribers.emit(t,this,t)}}),Object.defineProperty(e.prototype,"registerHook",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return this._hookSubscribers||(this._hookSubscribers=new XY),this._hookSubscribers.register(t,n)}}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getReconciliationType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type}}),Object.defineProperty(e.prototype,"baseSetParent",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){this._parent=t,this._subpath=n,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()}}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getEscapedPath",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t&&(this.pathAtom||(this.pathAtom=Kb("path")),this.pathAtom.reportObserved()),this.parent?(this._escapedSubpath===void 0&&(this._escapedSubpath=this._subpath?Zf(this._subpath):""),this.parent.getEscapedPath(t)+"/"+this._escapedSubpath):""}}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.parent===null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAlive",{get:function(){return this.state!==to.DEAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDetaching",{get:function(){return this.state===to.DETACHING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=Kb("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseFinalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(this.state===to.CREATED){if(this.parent){if(this.parent.state!==to.FINALIZED)return;this.fireHook(Ci.afterAttach)}this.state=to.FINALIZED,t&&t()}}}),Object.defineProperty(e.prototype,"baseFinalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=to.DEAD}}),Object.defineProperty(e.prototype,"baseAboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.fireHook(Ci.beforeDestroy)}}),e}(),n1=function(e){Mr(t,e);function t(n,r,i,o,a){var s=e.call(this,n,r,i,o)||this;try{s.storedValue=n.createNewInstance(a)}catch(l){throw s.state=to.DEAD,l}return s.state=to.CREATED,s.finalizeCreation(),s}return Object.defineProperty(t.prototype,"root",{get:function(){if(!this.parent)throw Mt("This scalar node is not part of a tree");return this.parent.root},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this.parent!==n,o=this.subpath!==r;!i&&!o||(this.environment=void 0,this.baseSetParent(this.parent,r))}}),Object.defineProperty(t.prototype,"snapshot",{get:function(){return this.getSnapshot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(t.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return this.type.name+"@"+n+(this.isAlive?"":" [dead]")}}),Object.defineProperty(t.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){!this.isAlive||this.state===to.DETACHING||(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(t.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeCreation()}}),Object.defineProperty(t.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseAboutToDie()}}),Object.defineProperty(t.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeDeath()}}),Object.defineProperty(t.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.fireInternalHook(n)}}),t}(OY);n1.prototype.die=hi(n1.prototype.die);var bde=1,_de={onError:function(e){throw e}},Ja=function(e){Mr(t,e);function t(n,r,i,o,a){var s=e.call(this,n,r,i,o)||this;if(Object.defineProperty(s,"nodeId",{enumerable:!0,configurable:!0,writable:!0,value:++bde}),Object.defineProperty(s,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"unnormalizedIdentifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"identifierCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"isProtectionEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(s,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"_applyPatches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"_applySnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"_autoUnbox",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(s,"_isRunningAction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(s,"_hasSnapshotReaction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(s,"_observableInstanceState",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(s,"_childNodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"_initialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"_cachedInitialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"_cachedInitialSnapshotCreated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(s,"_snapshotComputed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"_snapshotUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(s,"_internalEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),s._snapshotComputed=Ch(function(){return s.getSnapshot()}),s.unbox=s.unbox.bind(s),s._initialSnapshot=a,s.identifierAttribute=n.identifierAttribute,r||(s.identifierCache=new jde),s._childNodes=n.initializeChildNodes(s,s._initialSnapshot),s.identifier=null,s.unnormalizedIdentifier=null,s.identifierAttribute&&s._initialSnapshot){var l=s._initialSnapshot[s.identifierAttribute];if(l===void 0){var c=s._childNodes[s.identifierAttribute];c&&(l=c.value)}if(typeof l!="string"&&typeof l!="number")throw Mt("Instance identifier '"+s.identifierAttribute+"' for type '"+s.type.name+"' must be a string or a number");s.identifier=n0(l),s.unnormalizedIdentifier=l}return r?r.root.identifierCache.addNodeToCache(s):s.identifierCache.addNodeToCache(s),s}return Object.defineProperty(t.prototype,"applyPatches",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.createObservableInstanceIfNeeded(),this._applyPatches(n)}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.createObservableInstanceIfNeeded(),this._applySnapshot(n)}}),Object.defineProperty(t.prototype,"createObservableInstanceIfNeeded",{enumerable:!1,configurable:!0,writable:!0,value:function(n){n===void 0&&(n=!0),this._observableInstanceState===0&&this.createObservableInstance(n)}}),Object.defineProperty(t.prototype,"createObservableInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r,i,o,a;n===void 0&&(n=!0),this._observableInstanceState=1;for(var s=[],l=this.parent;l&&l._observableInstanceState===0;)s.unshift(l),l=l.parent;try{for(var c=cb(s),u=c.next();!u.done;u=c.next()){var f=u.value;f.createObservableInstanceIfNeeded(!1)}}catch(g){r={error:g}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}var d=this.type;try{this.storedValue=d.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,d.finalizeNewInstance(this,this.storedValue)}catch(g){throw this.state=to.DEAD,g}finally{this._isRunningAction=!1}if(this._observableInstanceState=2,this._snapshotComputed.trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=Zp,this.state=to.CREATED,n){this.fireHook(Ci.afterCreate),this.finalizeCreation();try{for(var p=cb(s.reverse()),h=p.next();!h.done;h=p.next()){var f=h.value;f.fireHook(Ci.afterCreate),f.finalizeCreation()}}catch(g){o={error:g}}finally{try{h&&!h.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}}}}),Object.defineProperty(t.prototype,"root",{get:function(){var n=this.parent;return n?n.root:this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearParent",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.parent){this.fireHook(Ci.beforeDetach);var n=this.state;this.state=to.DETACHING;var r=this.root,i=r.environment,o=r.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=i,this.identifierCache=o}finally{this.state=n}}}}),Object.defineProperty(t.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=n!==this.parent,o=r!==this.subpath;!i&&!o||(i?(this.environment=void 0,n.root.identifierCache.mergeCache(this),this.baseSetParent(n,r),this.fireHook(Ci.afterAttach)):o&&this.baseSetParent(this.parent,r))}}),Object.defineProperty(t.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this;this.fireInternalHook(n);var i=this.storedValue&&typeof this.storedValue=="object"&&this.storedValue[n];typeof i=="function"&&(qg?qg(function(){i.apply(r.storedValue)}):i.apply(this.storedValue))}}),Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshotComputed.get()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.isAlive?this._observableInstanceState===2?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath}}),Object.defineProperty(t.prototype,"_getActualSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(t.prototype,"_getCachedInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this._cachedInitialSnapshotCreated){var n=this.type,r=this._childNodes,i=this._initialSnapshot;this._cachedInitialSnapshot=n.processInitialSnapshot(r,i),this._cachedInitialSnapshotCreated=!0}return this._cachedInitialSnapshot}}),Object.defineProperty(t.prototype,"isRunningAction",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._isRunningAction?!0:this.isRoot?!1:this.parent.isRunningAction()}}),Object.defineProperty(t.prototype,"assertAlive",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=bY();if(!this.isAlive&&r!=="ignore"){var i=this._getAssertAliveError(n);switch(r){case"error":throw Mt(i);case"warn":Qde(i)}}}}),Object.defineProperty(t.prototype,"_getAssertAliveError",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.getEscapedPath(!1)||this.pathUponDeath||"",i=n.subpath&&Zf(n.subpath)||"",o=n.actionContext||eD();o&&o.type!=="action"&&o.parentActionEvent&&(o=o.parentActionEvent);var a="";if(o&&o.name!=null){var s=o&&o.context&&AY(o.context)||r;a=s+"."+o.name+"()"}return"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '"+this.type.name+"', Path upon death: '"+r+"', Subpath: '"+i+"', Action: '"+a+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree."}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.assertAlive({subpath:n}),this._autoUnbox=!1;try{return this._observableInstanceState===2?this.type.getChildNode(this,n):this._childNodes[n]}finally{this._autoUnbox=!0}}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertAlive(Zp),this._autoUnbox=!1;try{return this._observableInstanceState===2?this.type.getChildren(this):GY(this._childNodes)}finally{this._autoUnbox=!0}}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.type.getChildType(n)}}),Object.defineProperty(t.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assertWritable",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(this.assertAlive(n),!this.isRunningAction()&&this.isProtected)throw Mt("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.type.removeChild(this,n)}}),Object.defineProperty(t.prototype,"unbox",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n&&(this.assertAlive({subpath:n.subpath||n.subpathUponDeath}),this._autoUnbox?n.value:n)}}),Object.defineProperty(t.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=(this.isAlive?this.path:this.pathUponDeath)||"<root>",r=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+n+r+(this.isAlive?"":" [dead]")}}),Object.defineProperty(t.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this;this.baseFinalizeCreation(function(){var r,i;try{for(var o=cb(n.getChildren()),a=o.next();!a.done;a=o.next()){var s=a.value;s.finalizeCreation()}}catch(l){r={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}n.fireInternalHook(Ci.afterCreationFinalization)})}}),Object.defineProperty(t.prototype,"detach",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isAlive)throw Mt("Error while detaching, node is not alive.");this.clearParent()}}),Object.defineProperty(t.prototype,"preboot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this;this._applyPatches=r1(this.storedValue,"@APPLY_PATCHES",function(r){r.forEach(function(i){if(!i.path){n.type.applySnapshot(n,i.value);return}var o=nv(i.path),a=HY(n,o.slice(0,-1));a.applyPatchLocally(o[o.length-1],i)})}),this._applySnapshot=r1(this.storedValue,"@APPLY_SNAPSHOT",function(r){if(r!==n.snapshot)return n.type.applySnapshot(n,r)}),Mp(this.storedValue,"$treenode",this),Mp(this.storedValue,"toJSON",Ude)}}),Object.defineProperty(t.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){!this.isAlive||this.state===to.DETACHING||(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(t.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._observableInstanceState!==0&&(this.getChildren().forEach(function(n){n.aboutToDie()}),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))}}),Object.defineProperty(t.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.getChildren().forEach(function(r){r.finalizeDeath()}),this.root.identifierCache.notifyDied(this);var n=this.snapshot;this._snapshotUponDeath=n,this._internalEventsClearAll(),this.baseFinalizeDeath()}}),Object.defineProperty(t.prototype,"onSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",n)}}),Object.defineProperty(t.prototype,"emitSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this._internalEventsEmit("snapshot",n)}}),Object.defineProperty(t.prototype,"onPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._internalEventsRegister("patch",n)}}),Object.defineProperty(t.prototype,"emitPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(this._internalEventsHasSubscribers("patch")){var i=Kde({},n,{path:r.path.substr(this.path.length)+"/"+n.path}),o=J4(ope(i),2),a=o[0],s=o[1];this._internalEventsEmit("patch",a,s)}this.parent&&this.parent.emitPatch(n,r)}}),Object.defineProperty(t.prototype,"hasDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._internalEventsHas("dispose",n)}}),Object.defineProperty(t.prototype,"addDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(!this.hasDisposer(n)){this._internalEventsRegister("dispose",n,!0);return}throw Mt("cannot add a disposer when it is already registered for execution")}}),Object.defineProperty(t.prototype,"removeDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(!this._internalEventsHas("dispose",n))throw Mt("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",n)}}),Object.defineProperty(t.prototype,"removeMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(this.middlewares){var r=this.middlewares.indexOf(n);r>=0&&this.middlewares.splice(r,1)}}}),Object.defineProperty(t.prototype,"addMiddleWare",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this;r===void 0&&(r=!0);var o={handler:n,includeHooks:r};return this.middlewares?this.middlewares.push(o):this.middlewares=[o],function(){i.removeMiddleware(o)}}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){this.assertWritable({subpath:n}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,n,r)}}),Object.defineProperty(t.prototype,"_addSnapshotReaction",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this;if(!this._hasSnapshotReaction){var r=IX(function(){return n.snapshot},function(i){return n.emitSnapshot(i)},_de);this.addDisposer(r),this._hasSnapshotReaction=!0}}}),Object.defineProperty(t.prototype,"_internalEventsHasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return!!this._internalEvents&&this._internalEvents.hasSubscribers(n)}}),Object.defineProperty(t.prototype,"_internalEventsRegister",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i){return i===void 0&&(i=!1),this._internalEvents||(this._internalEvents=new XY),this._internalEvents.register(n,r,i)}}),Object.defineProperty(t.prototype,"_internalEventsHas",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return!!this._internalEvents&&this._internalEvents.has(n,r)}}),Object.defineProperty(t.prototype,"_internalEventsUnregister",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){this._internalEvents&&this._internalEvents.unregister(n,r)}}),Object.defineProperty(t.prototype,"_internalEventsEmit",{enumerable:!1,configurable:!0,writable:!0,value:function(n){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];this._internalEvents&&(r=this._internalEvents).emit.apply(r,Ed([n],i))}}),Object.defineProperty(t.prototype,"_internalEventsClear",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this._internalEvents&&this._internalEvents.clear(n)}}),Object.defineProperty(t.prototype,"_internalEventsClearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._internalEvents&&this._internalEvents.clearAll()}}),t}(OY);Ja.prototype.createObservableInstance=hi(Ja.prototype.createObservableInstance);Ja.prototype.detach=hi(Ja.prototype.detach);Ja.prototype.die=hi(Ja.prototype.die);var IY,fn;(function(e){e[e.String=1]="String",e[e.Number=2]="Number",e[e.Boolean=4]="Boolean",e[e.Date=8]="Date",e[e.Literal=16]="Literal",e[e.Array=32]="Array",e[e.Map=64]="Map",e[e.Object=128]="Object",e[e.Frozen=256]="Frozen",e[e.Optional=512]="Optional",e[e.Reference=1024]="Reference",e[e.Identifier=2048]="Identifier",e[e.Late=4096]="Late",e[e.Refinement=8192]="Refinement",e[e.Union=16384]="Union",e[e.Null=32768]="Null",e[e.Undefined=65536]="Undefined",e[e.Integer=131072]="Integer",e[e.Custom=262144]="Custom",e[e.SnapshotProcessor=524288]="SnapshotProcessor",e[e.Lazy=1048576]="Lazy",e[e.Finite=2097152]="Finite",e[e.Float=4194304]="Float"})(fn||(fn={}));var RY="cannotDetermine",xde=Symbol("$type"),Tu=function(){function e(t){Object.defineProperty(this,IY,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"C",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"S",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"T",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"N",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isType",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=t}return Object.defineProperty(e.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return wu(this,t),this.instantiate(null,"",n,t).value}}),Object.defineProperty(e.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){throw Mt("unimplemented method")}}),Object.defineProperty(e.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t===this}}),Object.defineProperty(e.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=zY(t);if(r){var i=w_(t);return this.isAssignableFrom(i)?Ca():Ea(n,t)}return this.isValidSnapshot(t,n)}}),Object.defineProperty(e.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this.validate(t,[{path:"",type:this}]).length===0}}),Object.defineProperty(e.prototype,"Type",{get:function(){throw Mt("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TypeWithoutSTN",{get:function(){throw Mt("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SnapshotType",{get:function(){throw Mt("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CreationType",{get:function(){throw Mt("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!1,configurable:!0}),e}();IY=xde;Tu.prototype.create=hi(Tu.prototype.create);var Qg=function(e){Mr(t,e);function t(n){var r=e.call(this,n)||this;return Object.defineProperty(r,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r}return Object.defineProperty(t.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return n===void 0&&(n=this.getDefaultSnapshot()),e.prototype.create.call(this,n,r)}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.createObservableInstanceIfNeeded(),n.storedValue}}),Object.defineProperty(t.prototype,"isMatchingSnapshotId",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return!n.identifierAttribute||n.identifier===n0(r[n.identifierAttribute])}}),Object.defineProperty(t.prototype,"tryToReconcileNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return n.isDetaching?!1:n.snapshot===r||Gn(r)&&kt(r)===n?!0:n.type===this&&WY(r)&&!Gn(r)&&this.isMatchingSnapshotId(n,r)?(n.applySnapshot(r),!0):!1}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=this.tryToReconcileNode(n,r);if(a)return n.setParent(i,o),n;if(n.die(),Gn(r)&&this.isAssignableFrom(w_(r))){var s=kt(r);return s.setParent(i,o),s}return this.instantiate(i,o,void 0,r)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),t}(Tu);Qg.prototype.create=hi(Qg.prototype.create);var Ph=function(e){Mr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.storedValue}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.storedValue}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){if(!n.isDetaching&&n.type===this&&n.storedValue===r)return n;var a=this.instantiate(i,o,void 0,r);return n.die(),a}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),t}(Tu);function Io(e){return typeof e=="object"&&e&&e.isType===!0}var zl=new Map;function wde(e){return function(n,r,i){switch(n.type){case"action":if(!e.filter||e.filter(n)===!0){var o=e.onStart(n);e.onResume(n,o),zl.set(n.id,{call:n,context:o,async:!1});try{var a=r(n);return e.onSuspend(n,o),zl.get(n.id).async===!1&&(zl.delete(n.id),e.onSuccess(n,o,a)),a}catch(l){throw zl.delete(n.id),e.onFail(n,o,l),l}}else return r(n);case"flow_spawn":{var s=zl.get(n.rootId);return s.async=!0,r(n)}case"flow_resume":case"flow_resume_error":{var s=zl.get(n.rootId);e.onResume(n,s.context);try{return r(n)}finally{e.onSuspend(n,s.context)}}case"flow_throw":{var s=zl.get(n.rootId);return zl.delete(n.rootId),e.onFail(n,s.context,n.args[0]),r(n)}case"flow_return":{var s=zl.get(n.rootId);return zl.delete(n.rootId),e.onSuccess(n,s.context,n.args[0]),r(n)}}}}var Sde=function(){function e(t,n){Object.defineProperty(this,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"call",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"flowsPending",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"running",{enumerable:!0,configurable:!0,writable:!0,value:!0}),t&&t.onStart(n)}return Object.defineProperty(e.prototype,"finish",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,t))}}),Object.defineProperty(e.prototype,"incFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending++}}),Object.defineProperty(e.prototype,"decFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending--}}),Object.defineProperty(e.prototype,"hasFlowsPending",{get:function(){return this.flowsPending>0},enumerable:!1,configurable:!0}),e}();function Cde(e){var t=new WeakMap;return function(r,i){var o=r.parentActionEvent?t.get(r.parentActionEvent):void 0;if(r.type==="action"){var a=Hi(Hi({},r),{env:o&&o.call.env,parentCall:o&&o.call}),s=!e.filter||e.filter(a),l=s?e:void 0,c=new Sde(l,a);t.set(r,c);var u=void 0;try{u=i(r)}catch(d){throw c.finish(d),d}return c.hasFlowsPending||c.finish(),u}else{if(!o)return i(r);switch(r.type){case"flow_spawn":return o.incFlowsPending(),i(r);case"flow_resume":case"flow_resume_error":return i(r);case"flow_throw":{var f=r.args[0];try{return i(r)}finally{o.decFlowsPending(),o.hasFlowsPending||o.finish(f)}}case"flow_return":try{return i(r)}finally{o.decFlowsPending(),o.hasFlowsPending||o.finish()}}}}}function Ade(e,t,n,r){if(r instanceof Date)return{$MST_DATE:r.getTime()};if(tv(r))return r;if(Gn(r))return vw("[MSTNode: "+w_(r).name+"]");if(typeof r=="function")return vw("[function]");if(typeof r=="object"&&!_p(r)&&!iD(r))return vw("[object "+(r&&r.constructor&&r.constructor.name||"Complex Object")+"]");try{return JSON.stringify(r),r}catch(i){return vw(""+i)}}function Pde(e,t){return t&&typeof t=="object"&&"$MST_DATE"in t?new Date(t.$MST_DATE):t}function vw(e){return{$MST_UNSERIALIZABLE:!0,type:e}}function kY(e,t){qg(function(){oD(t).forEach(function(n){return Mde(e,n)})})}function Mde(e,t){var n=MY(e,t.path||"");if(!n)throw Mt("Invalid action path: "+(t.path||""));var r=kt(n);if(t.name==="@APPLY_PATCHES")return Jg.call(null,n,t.args[0]);if(t.name==="@APPLY_SNAPSHOT")return SY.call(null,n,t.args[0]);if(typeof n[t.name]!="function")throw Mt("Action '"+t.name+"' does not exist in '"+r.path+"'");return n[t.name].apply(n,t.args?t.args.map(function(i){return Pde(r,i)}):[])}function Ede(e,t){var n=[],r=function(a){var s=t?t(a,tD()):!0;s&&n.push(a)},i,o={actions:n,get recording(){return!!i},stop:function(){i&&(i(),i=void 0)},resume:function(){i||(i=LY(e,r))},replay:function(a){kY(a,n)}};return o.resume(),o}function LY(e,t,n){return n===void 0&&(n=!1),BY(e,function(i,o){if(i.type==="action"&&i.id===i.rootId){var a=kt(i.context),s={name:i.name,path:UY(kt(e),a),args:i.args.map(function(c,u){return Ade(a,i.name,u,c)})};if(n){var l=o(i);return t(s),l}else return t(s),o(i)}else return o(i)})}var Tde=1,ub;function eD(){return ub}function $Y(){return Tde++}function g5(e,t){var n=kt(e.context);e.type==="action"&&n.assertAlive({actionContext:e});var r=n._isRunningAction;n._isRunningAction=!0;var i=ub;ub=e;try{return Rde(n,e,t)}finally{ub=i,n._isRunningAction=r}}function DY(e){if(e)return e.type==="action"?e:e.parentActionEvent}function r1(e,t,n){var r=function(){var i=$Y(),o=ub,a=DY(o);return g5({type:"action",name:t,id:i,args:YY(arguments),context:e,tree:CY(e),rootId:o?o.rootId:i,parentId:o?o.id:0,allParentIds:o?Ed(o.allParentIds,[o.id]):[],parentEvent:o,parentActionEvent:a},n)};return r._isMSTAction=!0,r._isFlowAction=n._isFlowAction,r}function BY(e,t,n){n===void 0&&(n=!0);var r=kt(e);return r.addMiddleWare(t,n)}function Ode(e,t,n){n===void 0&&(n=!0);var r={handler:e,includeHooks:n};return t.$mst_middleware=t.$mst_middleware||[],t.$mst_middleware.push(r),t}var Ide=function(){function e(t,n){Object.defineProperty(this,"arrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"inArrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:[]}),n.$mst_middleware&&this.middlewares.push(n.$mst_middleware);for(var r=t;r;)r.middlewares&&this.middlewares.push(r.middlewares),r=r.parent}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getNextMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this.middlewares[this.arrayIndex];if(t){var n=t[this.inArrayIndex++];return n||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}}}),e}();function Rde(e,t,n){var r=new Ide(e,n);if(r.isEmpty)return hi(n).apply(null,t.args);var i=null;function o(a){var s=r.getNextMiddleware(),l=s&&s.handler;if(!l)return hi(n).apply(null,a.args);if(!s.includeHooks&&Ci[a.name])return o(a);function c(f,d){i=o(f),d&&(i=d(i))}function u(f){i=f}return l(a,c,u),i}return o(t)}function tD(){for(var e=eD();e&&e.type!=="action";)e=e.parentActionEvent;return e}function NY(e,t,n){for(var r=typeof t=="number"?t:t.id,i=n?e:e.parentActionEvent;i;){if(i.id===r)return!0;i=i.parentActionEvent}return!1}function kde(e,t){return NY(e,t,!1)}function Lde(e,t){return NY(e,t,!0)}function $de(e){try{return JSON.stringify(e)}catch(t){return"<Unserializable: "+t+">"}}function FY(e){return typeof e=="function"?"<function"+(e.name?" "+e.name:"")+">":Gn(e)?"<"+e+">":"`"+$de(e)+"`"}function Dde(e){return e.length<280?e:e.substring(0,272)+"......"+e.substring(e.length-8)}function Bde(e){var t=e.value,n=e.context[e.context.length-1].type,r=e.context.map(function(s){var l=s.path;return l}).filter(function(s){return s.length>0}).join("/"),i=r.length>0?'at path "/'+r+'" ':"",o=Gn(t)?"value of type "+kt(t).type.name+":":tv(t)?"value":"snapshot",a=n&&Gn(t)&&n.is(kt(t).snapshot);return""+i+o+" "+FY(t)+" is not assignable "+(n?"to type: `"+n.name+"`":"")+(e.message?" ("+e.message+")":"")+(n?sK(n)||tv(t)?".":", expected an instance of `"+n.name+"` or a snapshot like `"+n.describe()+"` instead."+(a?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function nD(e,t,n){return e.concat([{path:t,type:n}])}function Ca(){return ev}function Ea(e,t,n){return[{context:e,value:t,message:n}]}function LP(e){return e.reduce(function(t,n){return t.concat(n)},[])}function wu(e,t){epe()&&jY(e,t)}function jY(e,t){var n=e.validate(t,[{path:"",type:e}]);if(n.length>0)throw Mt(Nde(e,t,n))}function Nde(e,t,n){if(n.length!==0)return"Error while converting "+Dde(FY(t))+" to `"+e.name+`\`:

    `+n.map(Bde).join(`
    `)}var Fde=0,jde=function(){function e(){Object.defineProperty(this,"cacheId",{enumerable:!0,configurable:!0,writable:!0,value:Fde++}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:Qn.map()}),Object.defineProperty(this,"lastCacheModificationPerId",{enumerable:!0,configurable:!0,writable:!0,value:Qn.map()})}return Object.defineProperty(e.prototype,"updateLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this.lastCacheModificationPerId.get(t);this.lastCacheModificationPerId.set(t,n===void 0?1:n+1)}}),Object.defineProperty(e.prototype,"getLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this.lastCacheModificationPerId.get(t)||0;return this.cacheId+"-"+n}}),Object.defineProperty(e.prototype,"addNodeToCache",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){if(n===void 0&&(n=!0),t.identifierAttribute){var r=t.identifier;this.cache.has(r)||this.cache.set(r,Qn.array([],$P));var i=this.cache.get(r);if(i.indexOf(t)!==-1)throw Mt("Already registered");i.push(t),n&&this.updateLastCacheModificationPerId(r)}}}),Object.defineProperty(e.prototype,"mergeCache",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this;V4(t.identifierCache.cache).forEach(function(r){return r.forEach(function(i){n.addNodeToCache(i)})})}}),Object.defineProperty(e.prototype,"notifyDied",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(t.identifierAttribute){var n=t.identifier,r=this.cache.get(n);r&&(r.remove(t),r.length||this.cache.delete(n),this.updateLastCacheModificationPerId(t.identifier))}}}),Object.defineProperty(e.prototype,"splitCache",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,r=new e,i=t.path+"/";return UX(this.cache).forEach(function(o){for(var a=J4(o,2),s=a[0],l=a[1],c=!1,u=l.length-1;u>=0;u--){var f=l[u];(f===t||f.path.indexOf(i)===0)&&(r.addNodeToCache(f,!1),l.splice(u,1),l.length||n.cache.delete(s),c=!0)}c&&n.updateLastCacheModificationPerId(s)}),r}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=this.cache.get(n);return r?r.some(function(i){return t.isAssignableFrom(i.type)}):!1}}),Object.defineProperty(e.prototype,"resolve",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=this.cache.get(n);if(!r)return null;var i=r.filter(function(o){return t.isAssignableFrom(o.type)});switch(i.length){case 0:return null;case 1:return i[0];default:throw Mt("Cannot resolve a reference to type '"+t.name+"' with id: '"+n+"' unambigously, there are multiple candidates: "+i.map(function(o){return o.path}).join(", "))}}}),e}();function rD(e,t,n,r,i){var o=zY(i);if(o){if(o.parent)throw Mt("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(t?t.path:"")+"/"+n+"', but it lives already at '"+o.path+"'");return t&&o.setParent(t,n),o}return new Ja(e,t,n,r,i)}function Td(e,t,n,r,i){return new n1(e,t,n,r,i)}function zde(e){return e instanceof n1||e instanceof Ja}var to;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CREATED=1]="CREATED",e[e.FINALIZED=2]="FINALIZED",e[e.DETACHING=3]="DETACHING",e[e.DEAD=4]="DEAD"})(to||(to={}));function Gn(e){return!!(e&&e.$treenode)}function kt(e){if(!Gn(e))throw Mt("Value "+e+" is no MST Node");return e.$treenode}function zY(e){return e&&e.$treenode||null}function Ude(){return kt(this).snapshot}var Vde=function(e){return".."};function UY(e,t){if(e.root!==t.root)throw Mt("Cannot calculate relative path: objects '"+e+"' and '"+t+"' are not part of the same object tree");for(var n=nv(e.path),r=nv(t.path),i=0;i<n.length&&n[i]===r[i];i++);return n.slice(i).map(Vde).join("/")+kC(r.slice(i))}function VY(e,t,n){return n===void 0&&(n=!0),HY(e,nv(t),n)}function HY(e,t,n){n===void 0&&(n=!0);for(var r=e,i=0;i<t.length;i++){var o=t[i];if(o===".."){if(r=r.parent,r)continue}else{if(o===".")continue;if(r){if(r instanceof n1)try{var a=r.value;Gn(a)&&(r=kt(a))}catch(l){if(!n)return;throw l}if(r instanceof Ja){var s=r.getChildType(o);if(s&&(r=r.getChildNode(o),r))continue}}}if(n)throw Mt("Could not resolve '"+o+"' in path '"+(kC(t.slice(0,i))||"/")+"' while resolving '"+kC(t)+"'");return}return r}function GY(e){if(!e)return ev;var t=Object.keys(e);if(!t.length)return ev;var n=new Array(t.length);return t.forEach(function(r,i){n[i]=e[r]}),n}function Hde(e){return KY(e)}var Gde=Object.toString(),ev=Object.freeze([]),Zp=Object.freeze({}),$P=vX().useProxies?{deep:!1}:{deep:!1,proxy:!1};Object.freeze($P);function Mt(e){return e===void 0&&(e="Illegal state"),new Error("[mobx-state-tree] "+e)}function Wde(e){return e}var qde=Number.isInteger;function Xde(e){return Number(e)===e&&e%1!==0}function Yde(e){return Number.isFinite(e)}function iD(e){return Array.isArray(e)||Lo(e)}function oD(e){return e?iD(e)?e:[e]:ev}function Kde(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var o in i)e[o]=i[o]}return e}function _p(e){var t;if(e===null||typeof e!="object")return!1;var n=Object.getPrototypeOf(e);return n==null?!0:((t=n.constructor)===null||t===void 0?void 0:t.toString())===Gde}function WY(e){return e!==null&&typeof e=="object"&&!(e instanceof Date)&&!(e instanceof RegExp)}function tv(e,t){return t===void 0&&(t=!0),e==null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"||t&&e instanceof Date}function qY(e){return typeof e!="function"}function Zde(e,t,n){Ti(e)?G4(e,t,n):Object.defineProperty(e,t,n)}function Mp(e,t,n){Zde(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}var Jde=function(){function e(){Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e.prototype,"hasSubscribers",{get:function(){return this.handlers.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=this;return n===void 0&&(n=!1),n?this.handlers.unshift(t):this.handlers.push(t),function(){r.unregister(t)}}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this.handlers.indexOf(t)>=0}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this.handlers.indexOf(t);n>=0&&this.handlers.splice(n,1)}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.handlers.length=0}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.handlers.slice();r.forEach(function(i){return i.apply(void 0,Ed(t))})}}),e}(),XY=function(){function e(){Object.defineProperty(this,"eventHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(e.prototype,"hasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this.eventHandlers&&this.eventHandlers[t];return!!n&&n.hasSubscribers}}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,r){r===void 0&&(r=!1),this.eventHandlers||(this.eventHandlers={});var i=this.eventHandlers[t];return i||(i=this.eventHandlers[t]=new Jde),i.register(n,r)}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=this.eventHandlers&&this.eventHandlers[t];return!!r&&r.has(n)}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=this.eventHandlers&&this.eventHandlers[t];r&&r.unregister(n)}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.eventHandlers&&delete this.eventHandlers[t]}}),Object.defineProperty(e.prototype,"clearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.eventHandlers=void 0}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(t){for(var n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=this.eventHandlers&&this.eventHandlers[t];o&&(n=o).emit.apply(n,Ed(r))}}),e}();function YY(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}function nO(e,t){return e.indexOf(t)===0}function Qde(e){console.warn(new Error("[mobx-state-tree] "+e))}function epe(){return typeof process<"u"&&process.env&&{}.ENABLE_TYPE_CHECK==="true"}function rO(e){typeof queueMicrotask=="function"?queueMicrotask(e):typeof setImmediate=="function"?setImmediate(e):setTimeout(e,1)}function KY(e){return ipe(e.name,e)}function tpe(e){return e}function npe(e){return function(){var t,n=[];for(t=0;t<arguments.length;t++)n[t]=arguments[t];return _Y(this,function(r){switch(r.label){case 0:return[4,e.apply(void 0,Ed(n))];case 1:return[2,r.sent()]}})}}function rpe(e){return _Y(this,function(t){switch(t.label){case 0:return[4,e];case 1:return[2,t.sent()]}})}function ipe(e,t){var n=function(){var i=$Y(),o=eD();if(!o)throw Mt("a mst flow must always have a parent context");var a=DY(o);if(!a)throw Mt("a mst flow must always have a parent action context");var s={name:e,id:i,tree:o.tree,context:o.context,parentId:o.id,allParentIds:Ed(o.allParentIds,[o.id]),rootId:o.rootId,parentEvent:o,parentActionEvent:a},l=arguments;function c(u,f,d){return u.$mst_middleware=n.$mst_middleware,g5(Hi(Hi({},s),{type:f,args:[d]}),u)}return new Promise(function(u,f){var d,p=function(){d=t.apply(null,arguments),h(void 0)};p.$mst_middleware=n.$mst_middleware,g5(Hi(Hi({},s),{type:"flow_spawn",args:YY(l)}),p);function h(m){var y;try{var _=c(function(b){y=d.next(b)},"flow_resume",m);_ instanceof Error&&(y=d.throw(_))}catch(b){rO(function(){c(function(x){f(b)},"flow_throw",b)});return}v(y)}function g(m){var y;try{c(function(_){y=d.throw(_)},"flow_resume_error",m)}catch(_){rO(function(){c(function(b){f(_)},"flow_throw",_)});return}v(y)}function v(m){if(m.done){rO(function(){c(function(y){u(y)},"flow_return",m.value)});return}if(!m.value||typeof m.value.then!="function")throw Mt("Only promises can be yielded to `async`, got: "+m);return m.value.then(h,g)}})};return n._isFlowAction=!0,n}function ope(e){if(!("oldValue"in e))throw Mt("Patches without `oldValue` field cannot be inversed");return[ape(e),spe(e)]}function ape(e){switch(e.op){case"add":return{op:"add",path:e.path,value:e.value};case"remove":return{op:"remove",path:e.path};case"replace":return{op:"replace",path:e.path,value:e.value}}}function spe(e){switch(e.op){case"add":return{op:"remove",path:e.path};case"remove":return{op:"add",path:e.path,value:e.oldValue};case"replace":return{op:"replace",path:e.path,value:e.oldValue}}}function lpe(e){return typeof e=="number"}function Zf(e){return lpe(e)===!0?""+e:e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function ZY(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function kC(e){if(e.length===0)return"";var t=function(n){return n.map(Zf).join("/")};return e[0]==="."||e[0]===".."?t(e):"/"+t(e)}function nv(e){var t=e.split("/").map(ZY),n=e===""||e==="."||e===".."||nO(e,"/")||nO(e,"./")||nO(e,"../");if(!n)throw Mt("a json path must be either rooted, empty or relative, but got '"+e+"'");return t[0]===""&&t.shift(),t}var iO=Symbol("$preProcessorFailed"),cpe=function(e){Mr(t,e);function t(n,r,i){var o=e.call(this,i||n.name)||this;return Object.defineProperty(o,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_processors",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return Object.defineProperty(t.prototype,"flags",{get:function(){return this._subtype.flags|fn.SnapshotProcessor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"snapshotProcessor("+this._subtype.describe()+")"}}),Object.defineProperty(t.prototype,"preProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._processors.preProcessor?this._processors.preProcessor.call(null,n):n}}),Object.defineProperty(t.prototype,"preProcessSnapshotSafe",{enumerable:!1,configurable:!0,writable:!0,value:function(n){try{return this.preProcessSnapshot(n)}catch{return iO}}}),Object.defineProperty(t.prototype,"postProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._processors.postProcessor?this._processors.postProcessor.call(null,n):n}}),Object.defineProperty(t.prototype,"_fixNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this;upe(n.type,this,"create");var i=n.getSnapshot;n.getSnapshot=function(){return r.postProcessSnapshot(i.call(n))},cK(this._subtype)||(n.getReconciliationType=function(){return r})}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=Gn(o)?o:this.preProcessSnapshot(o),s=this._subtype.instantiate(n,r,i,a);return this._fixNode(s),s}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=this._subtype.reconcile(n,Gn(r)?r:this.preProcessSnapshot(r),i,o);return a!==n&&this._fixNode(a),a}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){r===void 0&&(r=!0);var i=this._subtype.getSnapshot(n);return r?this.postProcessSnapshot(i):i}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this.preProcessSnapshotSafe(n);return i===iO?Ea(r,n,"Failed to preprocess value"):this._subtype.validate(i,r)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),Object.defineProperty(t.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=Io(n)?this._subtype:Gn(n)?S_(n,!1):this.preProcessSnapshotSafe(n);return r===iO?!1:this._subtype.validate(r,[{path:"",type:this._subtype}]).length===0}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._subtype.isAssignableFrom(n)}}),Object.defineProperty(t.prototype,"isMatchingSnapshotId",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(!(this._subtype instanceof Qg))return!1;var i=this.preProcessSnapshot(r);return this._subtype.isMatchingSnapshotId(n,i)}}),t}(Tu);function upe(e,t){for(var n,r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];try{for(var a=cb(i),s=a.next();!s.done;s=a.next()){var l=s.value;e[l]=t[l].bind(t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}function fpe(e,t,n){return new cpe(e,t,n)}var R6="Map.put can only be used to store complex values that have an identifier type attribute";function JY(e,t){var n,r,i=e.getSubTypes();if(i===RY)return!1;if(i){var o=oD(i);try{for(var a=cb(o),s=a.next();!s.done;s=a.next()){var l=s.value;if(!JY(l,t))return!1}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}return e instanceof i1&&t.push(e),!0}var kf;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.YES=1]="YES",e[e.NO=2]="NO"})(kf||(kf={}));var dpe=function(e){Mr(t,e);function t(n,r){return e.call(this,n,Qn.ref.enhancer,r)||this}return Object.defineProperty(t.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return e.prototype.get.call(this,""+n)}}),Object.defineProperty(t.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return e.prototype.has.call(this,""+n)}}),Object.defineProperty(t.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return e.prototype.delete.call(this,""+n)}}),Object.defineProperty(t.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return e.prototype.set.call(this,""+n,r)}}),Object.defineProperty(t.prototype,"put",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(!n)throw Mt("Map.put cannot be used to set empty values");if(Gn(n)){var r=kt(n);if(r.identifier===null)throw Mt(R6);return this.set(r.identifier,n),n}else if(WY(n)){var i=kt(this),o=i.type;if(o.identifierMode!==kf.YES)throw Mt(R6);var a=o.mapIdentifierAttribute,s=n[a];if(!sD(s)){var l=this.put(o.getChildType().create(n,i.environment));return this.put(S_(l))}var c=n0(s);return this.set(c,n),this.get(c)}else throw Mt("Map.put can only be used to store complex values")}}),t}(kP),LC=function(e){Mr(t,e);function t(n,r,i){i===void 0&&(i=[]);var o=e.call(this,n)||this;return Object.defineProperty(o,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"identifierMode",{enumerable:!0,configurable:!0,writable:!0,value:kf.UNKNOWN}),Object.defineProperty(o,"mapIdentifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fn.Map}),Object.defineProperty(o,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),o._determineIdentifierMode(),o.hookInitializers=i,o}return Object.defineProperty(t.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.hookInitializers.length>0?this.hookInitializers.concat(n):[n];return new t(this.name,this._subType,r)}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this._determineIdentifierMode(),rD(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"_determineIdentifierMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.identifierMode===kf.UNKNOWN){var n=[];if(JY(this._subType,n)){var r=n.reduce(function(i,o){if(!o.identifierAttribute)return i;if(i&&i!==o.identifierAttribute)throw Mt("The objects in a map should all have the same identifier attribute, expected '"+i+"', but child of type '"+o.name+"' declared attribute '"+o.identifierAttribute+"' as identifier");return o.identifierAttribute},void 0);r?(this.identifierMode=kf.YES,this.mapIdentifierAttribute=r):this.identifierMode=kf.NO}}}}),Object.defineProperty(t.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){r===void 0&&(r={});var i=n.type._subType,o={};return Object.keys(r).forEach(function(a){o[a]=i.instantiate(n,a,void 0,r[a])}),o}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return new dpe(n,this.name)}}),Object.defineProperty(t.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){U4(r,n.unbox);var i=n.type;i.hookInitializers.forEach(function(o){var a=o(r);Object.keys(a).forEach(function(s){var l=a[s],c=r1(r,s,l);Mp(r,s,c)})}),OP(r,this.willChange),RP(r,this.didChange)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return V4(n.storedValue)}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=n.storedValue.get(""+r);if(!i)throw Mt("Not a child "+r);return i}}),Object.defineProperty(t.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=kt(n.object),i=n.name;r.assertWritable({subpath:i});var o=r.type,a=o._subType;switch(n.type){case"update":{var s=n.newValue,l=n.object.get(i);if(s===l)return null;wu(a,s),n.newValue=a.reconcile(r.getChildNode(i),n.newValue,r,i),o.processIdentifier(i,n.newValue)}break;case"add":wu(a,n.newValue),n.newValue=a.instantiate(r,i,void 0,n.newValue),o.processIdentifier(i,n.newValue);break}return n}}),Object.defineProperty(t.prototype,"processIdentifier",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(this.identifierMode===kf.YES&&r instanceof Ja){var i=r.identifier;if(i!==n)throw Mt("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+i+"', but expected: '"+n+"'")}}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r={};return n.getChildren().forEach(function(i){r[i.subpath]=i.snapshot}),r}}),Object.defineProperty(t.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r={};return Object.keys(n).forEach(function(i){r[i]=n[i].getSnapshot()}),r}}),Object.defineProperty(t.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=kt(n.object);switch(n.type){case"update":return void r.emitPatch({op:"replace",path:Zf(n.name),value:n.newValue.snapshot,oldValue:n.oldValue?n.oldValue.snapshot:void 0},r);case"add":return void r.emitPatch({op:"add",path:Zf(n.name),value:n.newValue.snapshot,oldValue:void 0},r);case"delete":var i=n.oldValue.snapshot;return n.oldValue.die(),void r.emitPatch({op:"remove",path:Zf(n.name),oldValue:i},r)}}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i){var o=n.storedValue;switch(i.op){case"add":case"replace":o.set(r,i.value);break;case"remove":o.delete(r);break}}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){wu(this,r);var i=n.storedValue,o={};if(Array.from(i.keys()).forEach(function(s){o[s]=!1}),r)for(var a in r)i.set(a,r[a]),o[""+a]=!0;Object.keys(o).forEach(function(s){o[s]===!1&&i.delete(s)})}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this;return _p(n)?LP(Object.keys(n).map(function(o){return i._subType.validate(n[o],nD(r,o,i._subType))})):Ea(r,n,"Value is not a plain object")}}),Object.defineProperty(t.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Zp}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){n.storedValue.delete(r)}}),t}(Qg);LC.prototype.applySnapshot=hi(LC.prototype.applySnapshot);function ppe(e){return new LC("Map<string, "+e.name+">",e)}function hpe(e){return Io(e)&&(e.flags&fn.Map)>0}var $C=function(e){Mr(t,e);function t(n,r,i){i===void 0&&(i=[]);var o=e.call(this,n)||this;return Object.defineProperty(o,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fn.Array}),Object.defineProperty(o,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),o.hookInitializers=i,o}return Object.defineProperty(t.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.hookInitializers.length>0?this.hookInitializers.concat(n):[n];return new t(this.name,this._subType,r)}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return rD(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){r===void 0&&(r=[]);var i=n.type._subType,o={};return r.forEach(function(a,s){var l=""+s;o[l]=i.instantiate(n,l,void 0,a)}),o}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=Hi(Hi({},$P),{name:this.name});return Qn.array(GY(n),r)}}),Object.defineProperty(t.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){Pl(r).dehancer=n.unbox;var i=n.type;i.hookInitializers.forEach(function(o){var a=o(r);Object.keys(a).forEach(function(s){var l=a[s],c=r1(r,s,l);Mp(r,s,c)})}),OP(r,this.willChange),RP(r,this.didChange)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.storedValue.slice()}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=Number(r);if(i<n.storedValue.length)return n.storedValue[i];throw Mt("Not a child: "+r)}}),Object.defineProperty(t.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=kt(n.object);r.assertWritable({subpath:""+n.index});var i=r.type._subType,o=r.getChildren();switch(n.type){case"update":{if(n.newValue===n.object[n.index])return null;var a=k6(r,i,[o[n.index]],[n.newValue],[n.index]);if(!a)return null;n.newValue=a[0]}break;case"splice":{var s=n.index,l=n.removedCount,c=n.added,u=k6(r,i,o.slice(s,s+l),c,c.map(function(d,p){return s+p}));if(!u)return null;n.added=u;for(var f=s+l;f<o.length;f++)o[f].setParent(r,""+(f+c.length-l))}break}return n}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.getChildren().map(function(r){return r.snapshot})}}),Object.defineProperty(t.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=[];return Object.keys(n).forEach(function(i){r.push(n[i].getSnapshot())}),r}}),Object.defineProperty(t.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=kt(n.object);switch(n.type){case"update":return void r.emitPatch({op:"replace",path:""+n.index,value:n.newValue.snapshot,oldValue:n.oldValue?n.oldValue.snapshot:void 0},r);case"splice":for(var i=n.removedCount-1;i>=0;i--)r.emitPatch({op:"remove",path:""+(n.index+i),oldValue:n.removed[i].snapshot},r);for(var i=0;i<n.addedCount;i++)r.emitPatch({op:"add",path:""+(n.index+i),value:r.getChildNode(""+(n.index+i)).snapshot,oldValue:void 0},r);return}}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i){var o=n.storedValue,a=r==="-"?o.length:Number(r);switch(i.op){case"replace":o[a]=i.value;break;case"add":o.splice(a,0,i.value);break;case"remove":o.splice(a,1);break}}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){wu(this,r);var i=n.storedValue;i.replace(r)}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this;return iD(n)?LP(n.map(function(o,a){return i._subType.validate(o,nD(r,""+a,i._subType))})):Ea(r,n,"Value is not an array")}}),Object.defineProperty(t.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return ev}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){n.storedValue.splice(Number(r),1)}}),t}(Qg);$C.prototype.applySnapshot=hi($C.prototype.applySnapshot);function mpe(e){return new $C(e.name+"[]",e)}function k6(e,t,n,r,i){for(var o=!0,a=0;;a++){var s=a<=r.length-1,l=n[a],c=s?r[a]:void 0,u=""+i[a];if(zde(c)&&(c=c.storedValue),!l&&!s)break;if(!s)o=!1,n.splice(a,1),l instanceof Ja&&l.createObservableInstanceIfNeeded(),l.die(),a--;else if(l)if(L6(l,c))n[a]=oO(t,e,u,c,l);else{for(var d=void 0,p=a;p<n.length;p++)if(L6(n[p],c)){d=n.splice(p,1)[0];break}o=!1;var f=oO(t,e,u,c,d);n.splice(a,0,f)}else{if(Gn(c)&&kt(c).parent===e)throw Mt("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+e.path+"/"+u+"', but it lives already at '"+kt(c).path+"'");o=!1;var f=oO(t,e,u,c);n.splice(a,0,f)}}return o?null:n}function oO(e,t,n,r,i){wu(e,r);function o(){if(Gn(r)){var s=kt(r);if(s.assertAlive(Zp),s.parent!==null&&s.parent===t)return s.setParent(t,n),s}return i?e.reconcile(i,r,t,n):e.instantiate(t,n,void 0,r)}var a=o();return i&&i!==a&&(i instanceof Ja&&i.createObservableInstanceIfNeeded(),i.die()),a}function L6(e,t){if(!e.isAlive)return!1;if(Gn(t)){var n=kt(t);return n.isAlive&&n===e}if(e.snapshot===t)return!0;if(!(e instanceof Ja))return!1;var r=e.getReconciliationType();return e.identifier!==null&&e.identifierAttribute&&_p(t)&&r.is(t)&&r.isMatchingSnapshotId(e,t)}function gpe(e){return Io(e)&&(e.flags&fn.Array)>0}var $6="preProcessSnapshot",D6="postProcessSnapshot";function vpe(){return kt(this).toString()}var B6={name:"AnonymousModel",properties:{},initializers:ev};function ype(e){var t=Object.keys(e),n={};return t.forEach(function(r){if(n[r])throw Mt(r+" is declared twice in the model. Model should not contain same keys");n[r]=!0}),t.reduce(function(r,i){var o,a,s;if(i in Ci)throw Mt("Hook '"+i+"' was defined as property. Hooks should be defined as part of the actions");var l=Object.getOwnPropertyDescriptor(r,i);if("get"in l)throw Mt("Getters are not supported as properties. Please use views instead");var c=l.value;if(c==null)throw Mt("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(tv(c))return Object.assign({},r,(o={},o[i]=Ep(Cpe(c),c),o));if(c instanceof LC)return Object.assign({},r,(a={},a[i]=Ep(c,{}),a));if(c instanceof $C)return Object.assign({},r,(s={},s[i]=Ep(c,[]),s));if(Io(c))return r;throw Mt("Invalid type definition for property '"+i+"', cannot infer a type from a value like '"+c+"' ("+typeof c+")")},e)}var i1=function(e){Mr(t,e);function t(n){var r=e.call(this,n.name||B6.name)||this;return Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fn.Object}),Object.defineProperty(r,"initializers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"preProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"postProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"propertyNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"named",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return r.cloneAndEnhance({name:i})}}),Object.defineProperty(r,"props",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return r.cloneAndEnhance({properties:i})}}),Object.defineProperty(r,"preProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(i){var o=r.preProcessor;return o?r.cloneAndEnhance({preProcessor:function(a){return o(i(a))}}):r.cloneAndEnhance({preProcessor:i})}}),Object.defineProperty(r,"postProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(i){var o=r.postProcessor;return o?r.cloneAndEnhance({postProcessor:function(a){return i(o(a))}}):r.cloneAndEnhance({postProcessor:i})}}),Object.assign(r,B6,n),r.properties=ype(r.properties),r.properties,r.propertyNames=Object.keys(r.properties),r.identifierAttribute=r._getIdentifierAttribute(),r}return Object.defineProperty(t.prototype,"_getIdentifierAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=void 0;return this.forAllProps(function(r,i){if(i.flags&fn.Identifier){if(n)throw Mt("Cannot define property '"+r+"' as object identifier, property '"+n+"' is already defined as identifier property");n=r}}),n}}),Object.defineProperty(t.prototype,"cloneAndEnhance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return new t({name:n.name||this.name,properties:Object.assign({},this.properties,n.properties),initializers:this.initializers.concat(n.initializers||[]),preProcessor:n.preProcessor||this.preProcessor,postProcessor:n.postProcessor||this.postProcessor})}}),Object.defineProperty(t.prototype,"actions",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this,i=function(o){return r.instantiateActions(o,n(o)),o};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(t.prototype,"instantiateActions",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(!_p(r))throw Mt("actions initializer should return a plain object containing actions");Object.keys(r).forEach(function(i){if(i===$6)throw Mt("Cannot define action '"+$6+"', it should be defined using 'type.preProcessSnapshot(fn)' instead");if(i===D6)throw Mt("Cannot define action '"+D6+"', it should be defined using 'type.postProcessSnapshot(fn)' instead");var o=r[i],a=n[i];if(i in Ci&&a){var s=o;o=function(){a.apply(null,arguments),s.apply(null,arguments)}}var l=o.$mst_middleware,c=o.bind(r);c._isFlowAction=o._isFlowAction||!1,c.$mst_middleware=l;var u=r1(n,i,c);r[i]=u,Mp(n,i,u)})}}),Object.defineProperty(t.prototype,"volatile",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this;if(typeof n!="function")throw Mt("You passed an "+typeof n+" to volatile state as an argument, when function is expected");var i=function(o){return r.instantiateVolatileState(o,n(o)),o};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(t.prototype,"instantiateVolatileState",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(!_p(r))throw Mt("volatile state initializer should return a plain object containing state");H4(n,r)}}),Object.defineProperty(t.prototype,"extend",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this,i=function(o){var a=n(o),s=a.actions,l=a.views,c=a.state,u=qfe(a,["actions","views","state"]);for(var f in u)throw Mt("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+f+"'");return c&&r.instantiateVolatileState(o,c),l&&r.instantiateViews(o,l),s&&r.instantiateActions(o,s),o};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(t.prototype,"views",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this,i=function(o){return r.instantiateViews(o,n(o)),o};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(t.prototype,"instantiateViews",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(!_p(r))throw Mt("views initializer should return a plain object containing views");Object.getOwnPropertyNames(r).forEach(function(i){var o,a=Object.getOwnPropertyDescriptor(r,i);if("get"in a)G4(n,i,a),W4(n,(o={},o[i]=Ch,o));else if(typeof a.value=="function")Mp(n,i,a.value);else throw Mt("A view member should either be a function or getter based property")})}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=Gn(o)?o:this.applySnapshotPreProcessor(o);return rD(this,n,r,i,a)}}),Object.defineProperty(t.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){r===void 0&&(r={});var i=n.type,o={};return i.forAllProps(function(a,s){o[a]=s.instantiate(n,a,void 0,r[a])}),o}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=Hi(Hi({},$P),{name:this.name});return Qn.object(n,Zp,r)}}),Object.defineProperty(t.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){Mp(r,"toString",vpe),this.forAllProps(function(i){U4(r,i,n.unbox)}),this.initializers.reduce(function(i,o){return o(i)},r),OP(r,this.willChange),RP(r,this.didChange)}}),Object.defineProperty(t.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=n,i=kt(r.object),o=r.name;i.assertWritable({subpath:o});var a=i.type.properties[o];return a&&(wu(a,r.newValue),r.newValue=a.reconcile(i.getChildNode(o),r.newValue,i,o)),r}}),Object.defineProperty(t.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=n,i=kt(r.object),o=i.type.properties[r.name];if(o){var a=r.oldValue?r.oldValue.snapshot:void 0;i.emitPatch({op:"replace",path:Zf(r.name),value:r.newValue.snapshot,oldValue:a},i)}}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this,i=[];return this.forAllProps(function(o){i.push(r.getChildNode(n,o))}),i}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i;if(!(r in this.properties))throw Mt("Not a value property: "+r);var o=Pl(n.storedValue,r),a=(i=o.raw)===null||i===void 0?void 0:i.call(o);if(!a)throw Mt("Node not available for property "+r);return a}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this;r===void 0&&(r=!0);var o={};return this.forAllProps(function(a,s){try{var l=Pc(n.storedValue,a);l.reportObserved()}catch{throw Mt(a+" property is declared twice")}o[a]=i.getChildNode(n,a).snapshot}),r?this.applySnapshotPostProcessor(o):o}}),Object.defineProperty(t.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r={};return Object.keys(n).forEach(function(i){r[i]=n[i].getSnapshot()}),this.applySnapshotPostProcessor(r)}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i){if(!(i.op==="replace"||i.op==="add"))throw Mt("object does not support operation "+i.op);n.storedValue[r]=i.value}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){wu(this,r);var i=this.applySnapshotPreProcessor(r);this.forAllProps(function(o){n.storedValue[o]=i[o]})}}),Object.defineProperty(t.prototype,"applySnapshotPreProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.preProcessor;return r?r.call(null,n):n}}),Object.defineProperty(t.prototype,"applySnapshotPostProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.postProcessor;return r?r.call(null,n):n}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.properties[n]}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this,o=this.applySnapshotPreProcessor(n);return _p(o)?LP(this.propertyNames.map(function(a){return i.properties[a].validate(o[a],nD(r,a,i.properties[a]))})):Ea(r,o,"Value is not a plain object")}}),Object.defineProperty(t.prototype,"forAllProps",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this;this.propertyNames.forEach(function(i){return n(i,r.properties[i])})}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this;return"{ "+this.propertyNames.map(function(r){return r+": "+n.properties[r].describe()}).join("; ")+" }"}}),Object.defineProperty(t.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Zp}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){n.storedValue[r]=void 0}}),t}(Qg);i1.prototype.applySnapshot=hi(i1.prototype.applySnapshot);function bpe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=typeof e[0]=="string"?e.shift():"AnonymousModel",r=e.shift()||{};return new i1({name:n,properties:r})}function _pe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=typeof e[0]=="string",r=n?e[0]:"AnonymousModel";return n&&e.shift(),e.reduce(function(i,o){return i.cloneAndEnhance({name:i.name+"_"+o.name,properties:o.properties,initializers:o.initializers,preProcessor:function(a){return o.applySnapshotPreProcessor(i.applySnapshotPreProcessor(a))},postProcessor:function(a){return o.applySnapshotPostProcessor(i.applySnapshotPostProcessor(a))}})}).named(r)}function QY(e){return Io(e)&&(e.flags&fn.Object)>0}var Gu=function(e){Mr(t,e);function t(n,r,i,o){o===void 0&&(o=Wde);var a=e.call(this,n)||this;return Object.defineProperty(a,"flags",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"checker",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(a,"initializer",{enumerable:!0,configurable:!0,writable:!0,value:o}),a.flags=r,a}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return Td(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.initializer(n)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(tv(n)&&this.checker(n))return Ca();var i=this.name==="Date"?"Date or a unix milliseconds timestamp":this.name;return Ea(r,n,"Value is not a "+i)}}),t}(Ph),eK=new Gu("string",fn.String,function(e){return typeof e=="string"}),tK=new Gu("number",fn.Number,function(e){return typeof e=="number"}),xpe=new Gu("integer",fn.Integer,function(e){return qde(e)}),wpe=new Gu("float",fn.Float,function(e){return Xde(e)}),Spe=new Gu("finite",fn.Finite,function(e){return Yde(e)}),nK=new Gu("boolean",fn.Boolean,function(e){return typeof e=="boolean"}),rK=new Gu("null",fn.Null,function(e){return e===null}),iK=new Gu("undefined",fn.Undefined,function(e){return e===void 0}),oK=new Gu("Date",fn.Date,function(e){return typeof e=="number"||e instanceof Date},function(e){return e instanceof Date?e:new Date(e)});oK.getSnapshot=function(e){return e.storedValue.getTime()};var aK=oK;function Cpe(e){switch(typeof e){case"string":return eK;case"number":return tK;case"boolean":return nK;case"object":if(e instanceof Date)return aK}throw Mt("Cannot determine primitive type from value "+e)}function sK(e){return Io(e)&&(e.flags&(fn.String|fn.Number|fn.Integer|fn.Boolean|fn.Date))>0}var Ape=function(e){Mr(t,e);function t(n){var r=e.call(this,JSON.stringify(n))||this;return Object.defineProperty(r,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fn.Literal}),r.value=n,r}return Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return Td(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return JSON.stringify(this.value)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return tv(n)&&n===this.value?Ca():Ea(r,n,"Value is not a literal "+JSON.stringify(this.value))}}),t}(Ph);function lK(e){return new Ape(e)}function Ppe(e){return Io(e)&&(e.flags&fn.Literal)>0}var Mpe=function(e){Mr(t,e);function t(n,r,i,o){var a=e.call(this,n)||this;return Object.defineProperty(a,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(a,"_predicate",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(a,"_message",{enumerable:!0,configurable:!0,writable:!0,value:o}),a}return Object.defineProperty(t.prototype,"flags",{get:function(){return this._subtype.flags|fn.Refinement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this._subtype.instantiate(n,r,i,o)}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._subtype.isAssignableFrom(n)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this._subtype.validate(n,r);if(i.length>0)return i;var o=Gn(n)?kt(n).snapshot:n;return this._predicate(o)?Ca():Ea(r,n,this._message(n))}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this._subtype.reconcile(n,r,i,o)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),t}(Tu);function Epe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=typeof e[0]=="string"?e.shift():Io(e[0])?e[0].name:null,r=e[0],i=e[1],o=e[2]?e[2]:function(a){return"Value does not respect the refinement predicate"};return new Mpe(n,r,i,o)}function Tpe(e){return(e.flags&fn.Refinement)>0}function Ope(e,t){var n=typeof e=="string"?t:e,r=DP.apply(void 0,Ed(n.map(function(i){return lK(""+i)})));return typeof e=="string"&&(r.name=e),r}var Ipe=function(e){Mr(t,e);function t(n,r,i){var o=e.call(this,n)||this;return Object.defineProperty(o,"_types",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"_dispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_eager",{enumerable:!0,configurable:!0,writable:!0,value:!0}),i=Hi({eager:!0,dispatcher:void 0},i),o._dispatcher=i.dispatcher,i.eager||(o._eager=!1),o}return Object.defineProperty(t.prototype,"flags",{get:function(){var n=fn.Union;return this._types.forEach(function(r){n|=r.flags}),n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._types.some(function(r){return r.isAssignableFrom(n)})}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"("+this._types.map(function(n){return n.describe()}).join(" | ")+")"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=this.determineType(o,void 0);if(!a)throw Mt("No matching type for union "+this.describe());return a.instantiate(n,r,i,o)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=this.determineType(r,n.getReconciliationType());if(!a)throw Mt("No matching type for union "+this.describe());return a.reconcile(n,r,i,o)}}),Object.defineProperty(t.prototype,"determineType",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return this._dispatcher?this._dispatcher(n):r?r.is(n)?r:this._types.filter(function(i){return i!==r}).find(function(i){return i.is(n)}):this._types.find(function(i){return i.is(n)})}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(this._dispatcher)return this._dispatcher(n).validate(n,r);for(var i=[],o=0,a=0;a<this._types.length;a++){var s=this._types[a],l=s.validate(n,r);if(l.length===0){if(this._eager)return Ca();o++}else i.push(l)}return o===1?Ca():Ea(r,n,"No type is applicable for the union").concat(LP(i))}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._types}}),t}(Tu);function DP(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Io(e)?void 0:e,i=Io(e)?Ed([e],t):t,o="("+i.map(function(a){return a.name}).join(" | ")+")";return new Ipe(o,i,r)}function cK(e){return(e.flags&fn.Union)>0}var Rpe=function(e){Mr(t,e);function t(n,r,i){var o=e.call(this,n.name)||this;return Object.defineProperty(o,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_defaultValue",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"optionalValues",{enumerable:!0,configurable:!0,writable:!0,value:i}),o}return Object.defineProperty(t.prototype,"flags",{get:function(){return this._subtype.flags|fn.Optional},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype.describe()+"?"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){if(this.optionalValues.indexOf(o)>=0){var a=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(n,r,i,a)}return this._subtype.instantiate(n,r,i,o)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this._subtype.reconcile(n,this.optionalValues.indexOf(r)<0&&this._subtype.is(r)?r:this.getDefaultInstanceOrSnapshot(),i,o)}}),Object.defineProperty(t.prototype,"getDefaultInstanceOrSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=typeof this._defaultValue=="function"?this._defaultValue():this._defaultValue;return typeof this._defaultValue=="function"&&wu(this,n),n}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return this.optionalValues.indexOf(n)>=0?Ca():this._subtype.validate(n,r)}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._subtype.isAssignableFrom(n)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),t}(Tu);function kpe(e,t){if(typeof t!="function"&&Gn(t))throw Mt("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead")}function Ep(e,t,n){return kpe(e,t),new Rpe(e,t,n||Lpe)}var Lpe=[void 0];function $pe(e){return Io(e)&&(e.flags&fn.Optional)>0}var Dpe=Ep(iK,void 0),Bpe=Ep(rK,null);function uK(e){return DP(e,Dpe)}function Npe(e){return DP(e,Bpe)}var Fpe=function(e){Mr(t,e);function t(n,r){var i=e.call(this,n)||this;return Object.defineProperty(i,"_definition",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i}return Object.defineProperty(t.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|fn.Late},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSubType",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(!this._subType){var r=void 0;try{r=this._definition()}catch(i){if(i instanceof ReferenceError)r=void 0;else throw i}if(n&&r===void 0)throw Mt("Late type seems to be used too early, the definition (still) returns undefined");r&&(this._subType=r)}return this._subType}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this.getSubType(!0).instantiate(n,r,i,o)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this.getSubType(!0).reconcile(n,r,i,o)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this.getSubType(!1);return n?n.name:"<uknown late type>"}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this.getSubType(!1);return i?i.validate(n,r):Ca()}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.getSubType(!1);return r?r.isAssignableFrom(n):!1}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this.getSubType(!1);return n||RY}}),t}(Tu);function jpe(e,t){var n=typeof e=="string"?e:"late("+e.toString()+")",r=typeof e=="string"?t:e;return new Fpe(n,r)}function zpe(e){return Io(e)&&(e.flags&fn.Late)>0}function Upe(e,t){return new Vpe(e,t)}var Vpe=function(e){Mr(t,e);function t(n,r){var i=e.call(this,n)||this;return Object.defineProperty(i,"options",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fn.Lazy}),Object.defineProperty(i,"loadedType",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"pendingNodeList",{enumerable:!0,configurable:!0,writable:!0,value:Qn.array()}),f5(function(){return i.pendingNodeList.length>0&&i.pendingNodeList.some(function(o){return o.isAlive&&i.options.shouldLoadPredicate(o.parent?o.parent.value:null)})},function(){i.options.loadType().then(hi(function(o){i.loadedType=o,i.pendingNodeList.forEach(function(a){a.parent&&i.loadedType&&a.parent.applyPatches([{op:"replace",path:"/"+a.subpath,value:a.snapshot}])})}))}),i}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"<lazy "+this.name+">"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=this;if(this.loadedType)return this.loadedType.instantiate(n,r,i,o);var s=Td(this,n,r,i,o);return this.pendingNodeList.push(s),f5(function(){return!s.isAlive},function(){return a.pendingNodeList.splice(a.pendingNodeList.indexOf(s),1)}),s}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return this.loadedType?this.loadedType.validate(n,r):qY(n)?Ca():Ea(r,n,"Value is not serializable and cannot be lazy")}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this.loadedType?(n.die(),this.loadedType.instantiate(i,o,i.environment,r)):e.prototype.reconcile.call(this,n,r,i,o)}}),t}(Ph),fK=function(e){Mr(t,e);function t(n){var r=e.call(this,n?"frozen("+n.name+")":"frozen")||this;return Object.defineProperty(r,"subType",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fn.Frozen}),r}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"<any immutable value>"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return Td(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return qY(n)?this.subType?this.subType.validate(n,r):Ca():Ea(r,n,"Value is not serializable and cannot be frozen")}}),t}(Ph),N6=new fK;function Hpe(e){return arguments.length===0?N6:Io(e)?new fK(e):Ep(N6,e)}function Gpe(e){return Io(e)&&(e.flags&fn.Frozen)>0}function Wpe(e){switch(e){case Ci.beforeDestroy:return"destroy";case Ci.beforeDetach:return"detach";default:return}}var qpe=function(){function e(t,n){if(Object.defineProperty(this,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolvedReference",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),sD(t))this.identifier=t;else if(Gn(t)){var r=kt(t);if(!r.identifierAttribute)throw Mt("Can only store references with a defined identifier attribute.");var i=r.unnormalizedIdentifier;if(i==null)throw Mt("Can only store references to tree nodes with a defined identifier.");this.identifier=i}else throw Mt("Can only store references to tree nodes or identifiers, got: '"+t+"'")}return Object.defineProperty(e.prototype,"updateResolvedReference",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=n0(this.identifier),r=t.root,i=r.identifierCache.getLastCacheModificationPerId(n);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==i){var o=this.targetType,a=r.identifierCache.resolve(o,n);if(!a)throw new aD("[mobx-state-tree] Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+t.path+")");this.resolvedReference={node:a,lastCacheModification:i}}}}),Object.defineProperty(e.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!1,configurable:!0}),e}(),aD=function(e){Mr(t,e);function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return t}(Error),dK=function(e){Mr(t,e);function t(n,r){var i=e.call(this,"reference("+n.name+")")||this;return Object.defineProperty(i,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"onInvalidated",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fn.Reference}),i}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.targetType.isAssignableFrom(n)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return sD(n)?Ca():Ea(r,n,"Value is not a valid identifier, which is a string or a number")}}),Object.defineProperty(t.prototype,"fireInvalidated",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=r.parent;if(!(!a||!a.isAlive)){var s=a.storedValue;s&&this.onInvalidated({cause:n,parent:s,invalidTarget:o?o.storedValue:void 0,invalidId:i,replaceRef:function(l){Jg(r.root.storedValue,{op:"replace",value:l,path:r.path})},removeRef:function(){QY(a.type)?this.replaceRef(void 0):Jg(r.root.storedValue,{op:"remove",path:r.path})}})}}}),Object.defineProperty(t.prototype,"addTargetNodeWatcher",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this,o=this.getValue(n);if(o){var a=kt(o),s=function(u,f){var d=Wpe(f);d&&i.fireInvalidated(d,n,r,a)},l=a.registerHook(Ci.beforeDetach,s),c=a.registerHook(Ci.beforeDestroy,s);return function(){l(),c()}}}}),Object.defineProperty(t.prototype,"watchTargetNodeForInvalidations",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i){var o=this;if(this.onInvalidated){var a;n.registerHook(Ci.beforeDestroy,function(){a&&a()});var s=function(l){a&&a();var c=n.parent,u=c&&c.storedValue;if(c&&c.isAlive&&u){var f=void 0;i?f=!!i.get(r,u):f=n.root.identifierCache.has(o.targetType,n0(r)),f?a=o.addTargetNodeWatcher(n,r):l||o.fireInvalidated("invalidSnapshotReference",n,r,null)}};n.state===to.FINALIZED?s(!0):(n.isRoot||n.root.registerHook(Ci.afterCreationFinalization,function(){n.parent&&n.parent.createObservableInstanceIfNeeded()}),n.registerHook(Ci.afterAttach,function(){s(!1)}))}}}),t}(Ph),Xpe=function(e){Mr(t,e);function t(n,r){return e.call(this,n,r)||this}return Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(n.isAlive){var r=n.storedValue;return r.resolvedValue}}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=n.storedValue;return r.identifier}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=Gn(o)?PY(o):o,s=new qpe(o,this.targetType),l=Td(this,n,r,i,s);return s.node=l,this.watchTargetNodeForInvalidations(l,a,void 0),l}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){if(!n.isDetaching&&n.type===this){var a=Gn(r),s=n.storedValue;if(!a&&s.identifier===r||a&&s.resolvedValue===r)return n.setParent(i,o),n}var l=this.instantiate(i,o,void 0,r);return n.die(),l}}),t}(dK),Ype=function(e){Mr(t,e);function t(n,r,i){var o=e.call(this,n,i)||this;return Object.defineProperty(o,"options",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(n.isAlive){var r=this.options.get(n.storedValue,n.parent?n.parent.storedValue:null);return r}}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.storedValue}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=Gn(o)?this.options.set(o,n?n.storedValue:null):o,s=Td(this,n,r,i,a);return this.watchTargetNodeForInvalidations(s,a,this.options),s}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=Gn(r)?this.options.set(r,n?n.storedValue:null):r;if(!n.isDetaching&&n.type===this&&n.storedValue===a)return n.setParent(i,o),n;var s=this.instantiate(i,o,void 0,a);return n.die(),s}}),t}(dK);function pK(e,t){var n=t||void 0,r=t?t.onInvalidated:void 0;return n&&(n.get||n.set)?new Ype(e,{get:n.get,set:n.set},r):new Xpe(e,r)}function Kpe(e){return(e.flags&fn.Reference)>0}function Zpe(e,t){var n=pK(e,Hi(Hi({},t),{onInvalidated:function(r){t&&t.onInvalidated&&t.onInvalidated(r),r.removeRef()}}));return t&&t.acceptsUndefined===!1?n:uK(n)}var hK=function(e){Mr(t,e);function t(n,r){var i=e.call(this,n)||this;return Object.defineProperty(i,"validType",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fn.Identifier}),i}return Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){if(!n||!(n.type instanceof i1))throw Mt("Identifier types can only be instantiated as direct child of a model type");return Td(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){if(n.storedValue!==r)throw Mt("Tried to change identifier from '"+n.storedValue+"' to '"+r+"'. Changing identifiers is not allowed.");return n.setParent(i,o),n}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return typeof n!==this.validType?Ea(r,n,"Value is not a valid "+this.describe()+", expected a "+this.validType):Ca()}}),t}(Ph),Jpe=function(e){Mr(t,e);function t(){var n=e.call(this,"identifier","string")||this;return Object.defineProperty(n,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fn.Identifier}),n}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifier"}}),t}(hK),Qpe=function(e){Mr(t,e);function t(){return e.call(this,"identifierNumber","number")||this}return Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.storedValue}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifierNumber"}}),t}(hK),ehe=new Jpe,the=new Qpe;function nhe(e){return Io(e)&&(e.flags&fn.Identifier)>0}function n0(e){return""+e}function sD(e){return typeof e=="string"||typeof e=="number"}function rhe(e){return new ihe(e)}var ihe=function(e){Mr(t,e);function t(n){var r=e.call(this,n.name)||this;return Object.defineProperty(r,"options",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:fn.Custom}),r}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(this.options.isTargetType(n))return Ca();var i=this.options.getValidationMessage(n);return i?Ea(r,n,"Invalid value for type '"+this.name+"': "+i):Ca()}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.options.toSnapshot(n.storedValue)}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=this.options.isTargetType(o)?o:this.options.fromSnapshot(o,n&&n.root.environment);return Td(this,n,r,i,a)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var a=!this.options.isTargetType(r);if(!n.isDetaching){var s=n.type===this&&(a?r===n.snapshot:r===n.storedValue);if(s)return n.setParent(i,o),n}var l=a?this.options.fromSnapshot(r,i.root.environment):r,c=this.instantiate(i,o,void 0,l);return n.die(),c}}),t}(Ph),Ut={enumeration:Ope,model:bpe,compose:_pe,custom:rhe,reference:pK,safeReference:Zpe,union:DP,optional:Ep,literal:lK,maybe:uK,maybeNull:Npe,refinement:Epe,string:eK,boolean:nK,number:tK,integer:xpe,float:wpe,finite:Spe,Date:aK,map:ppe,array:mpe,frozen:Hpe,identifier:ehe,identifierNumber:the,late:jpe,lazy:Upe,undefined:iK,null:rK,snapshotProcessor:fpe};const ohe=Object.freeze(Object.defineProperty({__proto__:null,addDisposer:RC,addMiddleware:BY,applyAction:kY,applyPatch:Jg,applySnapshot:SY,cast:mde,castFlowReturn:tpe,castToReferenceSnapshot:vde,castToSnapshot:gde,clone:ude,createActionTrackingMiddleware:wde,createActionTrackingMiddleware2:Cde,decorate:Ode,destroy:dde,detach:fde,escapeJsonPath:Zf,flow:KY,getChildType:Xfe,getEnv:pde,getIdentifier:PY,getLivelinessChecking:bY,getMembers:hde,getNodeId:yde,getParent:ede,getParentOfType:nde,getPath:AY,getPathParts:rde,getPropertyMembers:TY,getRelativePath:cde,getRoot:CY,getRunningActionContext:tD,getSnapshot:S_,getType:w_,hasParent:Qfe,hasParentOfType:tde,isActionContextChildOf:kde,isActionContextThisOrChildOf:Lde,isAlive:Q4,isArrayType:gpe,isFrozenType:Gpe,isIdentifierType:nhe,isLateType:zpe,isLiteralType:Ppe,isMapType:hpe,isModelType:QY,isOptionalType:$pe,isPrimitiveType:sK,isProtected:Jfe,isReferenceType:Kpe,isRefinementType:Tpe,isRoot:ide,isStateTreeNode:Gn,isType:Io,isUnionType:cK,isValidReference:lde,joinJsonPath:kC,onAction:LY,onPatch:xY,onSnapshot:wY,process:Hde,protect:Kfe,recordActions:Ede,recordPatches:Yfe,resolveIdentifier:ade,resolvePath:ode,setLivelinessChecking:yY,setLivelynessChecking:Wfe,splitJsonPath:nv,toGenerator:rpe,toGeneratorFunction:npe,tryReference:sde,tryResolve:MY,typecheck:jY,types:Ut,unescapeJsonPath:ZY,unprotect:Zfe,walk:EY},Symbol.toStringTag,{value:"Module"})),ahe="modulepreload",she=function(e,t){return new URL(e,t).href},F6={},Mh=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=she(o,r),o in F6)return;F6[o]=!0;const a=o.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const f=i[u];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":ahe,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},lhe={black:"#000",white:"#fff"},rv=lhe,che={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},np=che,uhe={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},fhe=uhe,dhe={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},rp=dhe,phe={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},hhe=phe,mhe={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},ghe=mhe,vhe={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},ip=vhe,yhe={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},op=yhe,bhe={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4"},_he=bhe,xhe={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5"},whe=xhe,She={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},ap=She,Che={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17"},Ahe=Che,Phe={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"},Mhe=Phe,Ehe={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"},The=Ehe,Ohe={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},Ihe=Ohe,Rhe={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Mm=Rhe,khe={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"},Lhe=khe,$he={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037"},Dhe=$he,Bhe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},mK=Bhe,Nhe={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"},Fhe=Nhe,gK=Object.freeze(Object.defineProperty({__proto__:null,amber:Ihe,blue:ip,blueGrey:Fhe,brown:Dhe,common:rv,cyan:_he,deepOrange:Lhe,deepPurple:hhe,green:ap,grey:mK,indigo:ghe,lightBlue:op,lightGreen:Ahe,lime:Mhe,orange:Mm,pink:fhe,purple:rp,red:np,teal:whe,yellow:The},Symbol.toStringTag,{value:"Module"}));function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}const jhe=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));function fu(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function vK(e){if(!fu(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=vK(e[n])}),t}function Jr(e,t,n={clone:!0}){const r=n.clone?I({},e):e;return fu(e)&&fu(t)&&Object.keys(t).forEach(i=>{i!=="__proto__"&&(fu(t[i])&&i in e&&fu(e[i])?r[i]=Jr(e[i],t[i],n):n.clone?r[i]=fu(t[i])?vK(t[i]):t[i]:r[i]=t[i])}),r}var yK={exports:{}},zhe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Uhe=zhe,Vhe=Uhe;function bK(){}function _K(){}_K.resetWarningCache=bK;var Hhe=function(){function e(r,i,o,a,s,l){if(l!==Vhe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:_K,resetWarningCache:bK};return n.PropTypes=n,n};yK.exports=Hhe();var xK=yK.exports;const Sut=xh(xK);function Aa(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}var ur={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lD=Symbol.for("react.element"),cD=Symbol.for("react.portal"),BP=Symbol.for("react.fragment"),NP=Symbol.for("react.strict_mode"),FP=Symbol.for("react.profiler"),jP=Symbol.for("react.provider"),zP=Symbol.for("react.context"),Ghe=Symbol.for("react.server_context"),UP=Symbol.for("react.forward_ref"),VP=Symbol.for("react.suspense"),HP=Symbol.for("react.suspense_list"),GP=Symbol.for("react.memo"),WP=Symbol.for("react.lazy"),Whe=Symbol.for("react.offscreen"),wK;wK=Symbol.for("react.module.reference");function qs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case lD:switch(e=e.type,e){case BP:case FP:case NP:case VP:case HP:return e;default:switch(e=e&&e.$$typeof,e){case Ghe:case zP:case UP:case WP:case GP:case jP:return e;default:return t}}case cD:return t}}}ur.ContextConsumer=zP;ur.ContextProvider=jP;ur.Element=lD;ur.ForwardRef=UP;ur.Fragment=BP;ur.Lazy=WP;ur.Memo=GP;ur.Portal=cD;ur.Profiler=FP;ur.StrictMode=NP;ur.Suspense=VP;ur.SuspenseList=HP;ur.isAsyncMode=function(){return!1};ur.isConcurrentMode=function(){return!1};ur.isContextConsumer=function(e){return qs(e)===zP};ur.isContextProvider=function(e){return qs(e)===jP};ur.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===lD};ur.isForwardRef=function(e){return qs(e)===UP};ur.isFragment=function(e){return qs(e)===BP};ur.isLazy=function(e){return qs(e)===WP};ur.isMemo=function(e){return qs(e)===GP};ur.isPortal=function(e){return qs(e)===cD};ur.isProfiler=function(e){return qs(e)===FP};ur.isStrictMode=function(e){return qs(e)===NP};ur.isSuspense=function(e){return qs(e)===VP};ur.isSuspenseList=function(e){return qs(e)===HP};ur.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===BP||e===FP||e===NP||e===VP||e===HP||e===Whe||typeof e=="object"&&e!==null&&(e.$$typeof===WP||e.$$typeof===GP||e.$$typeof===jP||e.$$typeof===zP||e.$$typeof===UP||e.$$typeof===wK||e.getModuleId!==void 0)};ur.typeOf=qs;function De(e){if(typeof e!="string")throw new Error(Aa(7));return e.charAt(0).toUpperCase()+e.slice(1)}function o1(...e){return e.reduce((t,n)=>n==null?t:function(...i){t.apply(this,i),n.apply(this,i)},()=>{})}function Eh(e,t=166){let n;function r(...i){const o=()=>{e.apply(this,i)};clearTimeout(n),n=setTimeout(o,t)}return r.clear=()=>{clearTimeout(n)},r}function SK(e,t){return()=>null}function xc(e,t){var n,r;return $.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(r=e.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function er(e){return e&&e.ownerDocument||document}function so(e){return er(e).defaultView||window}function CK(e,t){return()=>null}function iv(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const qhe=typeof window<"u"?$.useLayoutEffect:$.useEffect,vi=qhe;let j6=0;function Xhe(e){const[t,n]=$.useState(e),r=e||t;return $.useEffect(()=>{t==null&&(j6+=1,n(`mui-${j6}`))},[t]),r}const z6=ZS["useId".toString()];function zs(e){if(z6!==void 0){const t=z6();return e??t}return Xhe(e)}function AK(e,t,n,r,i){return null}function Wo({controlled:e,default:t,name:n,state:r="value"}){const{current:i}=$.useRef(e!==void 0),[o,a]=$.useState(t),s=i?e:o,l=$.useCallback(c=>{i||a(c)},[]);return[s,l]}function Ar(e){const t=$.useRef(e);return vi(()=>{t.current=e}),$.useCallback((...n)=>(0,t.current)(...n),[])}function En(...e){return $.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{iv(n,t)})},e)}let qP=!0,v5=!1,U6;const Yhe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Khe(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&Yhe[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function Zhe(e){e.metaKey||e.altKey||e.ctrlKey||(qP=!0)}function aO(){qP=!1}function Jhe(){this.visibilityState==="hidden"&&v5&&(qP=!0)}function Qhe(e){e.addEventListener("keydown",Zhe,!0),e.addEventListener("mousedown",aO,!0),e.addEventListener("pointerdown",aO,!0),e.addEventListener("touchstart",aO,!0),e.addEventListener("visibilitychange",Jhe,!0)}function eme(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return qP||Khe(t)}function Th(){const e=$.useCallback(i=>{i!=null&&Qhe(i.ownerDocument)},[]),t=$.useRef(!1);function n(){return t.current?(v5=!0,window.clearTimeout(U6),U6=window.setTimeout(()=>{v5=!1},100),t.current=!1,!0):!1}function r(i){return eme(i)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:n,ref:e}}function PK(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}let Yh;function MK(){if(Yh)return Yh;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),Yh="reverse",e.scrollLeft>0?Yh="default":(e.scrollLeft=1,e.scrollLeft===0&&(Yh="negative")),document.body.removeChild(e),Yh}function tme(e,t){const n=e.scrollLeft;if(t!=="rtl")return n;switch(MK()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}const nme=e=>{const t=$.useRef({});return $.useEffect(()=>{t.current=e}),t.current},uD=nme;function rme(e){return $.Children.toArray(e).filter(t=>$.isValidElement(t))}const ime={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},EK=ime;function fD(e,t){const n=I({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=I({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},o=t[r];n[r]={},!o||!Object.keys(o)?n[r]=i:!i||!Object.keys(i)?n[r]=o:(n[r]=I({},o),Object.keys(i).forEach(a=>{n[r][a]=fD(i[a],o[a])}))}else n[r]===void 0&&(n[r]=e[r])}),n}function ot(e,t,n=void 0){const r={};return Object.keys(e).forEach(i=>{r[i]=e[i].reduce((o,a)=>{if(a){const s=t(a);s!==""&&o.push(s),n&&n[a]&&o.push(n[a])}return o},[]).join(" ")}),r}const V6=e=>e,ome=()=>{let e=V6;return{configure(t){e=t},generate(t){return e(t)},reset(){e=V6}}},ame=ome(),dD=ame,sme={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function it(e,t,n="Mui"){const r=sme[t];return r?`${n}-${r}`:`${dD.generate(e)}-${t}`}function at(e,t,n="Mui"){const r={};return t.forEach(i=>{r[i]=it(e,i,n)}),r}const Mc="$$material";function We(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function TK(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var lme=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,cme=TK(function(e){return lme.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function ume(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function fme(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var dme=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(fme(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=ume(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),_o="-ms-",DC="-moz-",Nn="-webkit-",OK="comm",pD="rule",hD="decl",pme="@import",IK="@keyframes",hme="@layer",mme=Math.abs,XP=String.fromCharCode,gme=Object.assign;function vme(e,t){return no(e,0)^45?(((t<<2^no(e,0))<<2^no(e,1))<<2^no(e,2))<<2^no(e,3):0}function RK(e){return e.trim()}function yme(e,t){return(e=t.exec(e))?e[0]:e}function Fn(e,t,n){return e.replace(t,n)}function y5(e,t){return e.indexOf(t)}function no(e,t){return e.charCodeAt(t)|0}function a1(e,t,n){return e.slice(t,n)}function oc(e){return e.length}function mD(e){return e.length}function yw(e,t){return t.push(e),e}function bme(e,t){return e.map(t).join("")}var YP=1,ov=1,kK=0,Pa=0,ui=0,r0="";function KP(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:YP,column:ov,length:a,return:""}}function U0(e,t){return gme(KP("",null,null,"",null,null,0),e,{length:-e.length},t)}function _me(){return ui}function xme(){return ui=Pa>0?no(r0,--Pa):0,ov--,ui===10&&(ov=1,YP--),ui}function Ya(){return ui=Pa<kK?no(r0,Pa++):0,ov++,ui===10&&(ov=1,YP++),ui}function wc(){return no(r0,Pa)}function fS(){return Pa}function C_(e,t){return a1(r0,e,t)}function s1(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function LK(e){return YP=ov=1,kK=oc(r0=e),Pa=0,[]}function $K(e){return r0="",e}function dS(e){return RK(C_(Pa-1,b5(e===91?e+2:e===40?e+1:e)))}function wme(e){for(;(ui=wc())&&ui<33;)Ya();return s1(e)>2||s1(ui)>3?"":" "}function Sme(e,t){for(;--t&&Ya()&&!(ui<48||ui>102||ui>57&&ui<65||ui>70&&ui<97););return C_(e,fS()+(t<6&&wc()==32&&Ya()==32))}function b5(e){for(;Ya();)switch(ui){case e:return Pa;case 34:case 39:e!==34&&e!==39&&b5(ui);break;case 40:e===41&&b5(e);break;case 92:Ya();break}return Pa}function Cme(e,t){for(;Ya()&&e+ui!==47+10;)if(e+ui===42+42&&wc()===47)break;return"/*"+C_(t,Pa-1)+"*"+XP(e===47?e:Ya())}function Ame(e){for(;!s1(wc());)Ya();return C_(e,Pa)}function Pme(e){return $K(pS("",null,null,null,[""],e=LK(e),0,[0],e))}function pS(e,t,n,r,i,o,a,s,l){for(var c=0,u=0,f=a,d=0,p=0,h=0,g=1,v=1,m=1,y=0,_="",b=i,x=o,w=r,S=_;v;)switch(h=y,y=Ya()){case 40:if(h!=108&&no(S,f-1)==58){y5(S+=Fn(dS(y),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:S+=dS(y);break;case 9:case 10:case 13:case 32:S+=wme(h);break;case 92:S+=Sme(fS()-1,7);continue;case 47:switch(wc()){case 42:case 47:yw(Mme(Cme(Ya(),fS()),t,n),l);break;default:S+="/"}break;case 123*g:s[c++]=oc(S)*m;case 125*g:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+u:m==-1&&(S=Fn(S,/\f/g,"")),p>0&&oc(S)-f&&yw(p>32?G6(S+";",r,n,f-1):G6(Fn(S," ","")+";",r,n,f-2),l);break;case 59:S+=";";default:if(yw(w=H6(S,t,n,c,u,i,s,_,b=[],x=[],f),o),y===123)if(u===0)pS(S,t,w,w,b,o,f,s,x);else switch(d===99&&no(S,3)===110?100:d){case 100:case 108:case 109:case 115:pS(e,w,w,r&&yw(H6(e,w,w,0,0,i,s,_,i,b=[],f),x),i,x,f,s,r?b:x);break;default:pS(S,w,w,w,[""],x,0,s,x)}}c=u=p=0,g=m=1,_=S="",f=a;break;case 58:f=1+oc(S),p=h;default:if(g<1){if(y==123)--g;else if(y==125&&g++==0&&xme()==125)continue}switch(S+=XP(y),y*g){case 38:m=u>0?1:(S+="\f",-1);break;case 44:s[c++]=(oc(S)-1)*m,m=1;break;case 64:wc()===45&&(S+=dS(Ya())),d=wc(),u=f=oc(_=S+=Ame(fS())),y++;break;case 45:h===45&&oc(S)==2&&(g=0)}}return o}function H6(e,t,n,r,i,o,a,s,l,c,u){for(var f=i-1,d=i===0?o:[""],p=mD(d),h=0,g=0,v=0;h<r;++h)for(var m=0,y=a1(e,f+1,f=mme(g=a[h])),_=e;m<p;++m)(_=RK(g>0?d[m]+" "+y:Fn(y,/&\f/g,d[m])))&&(l[v++]=_);return KP(e,t,n,i===0?pD:s,l,c,u)}function Mme(e,t,n){return KP(e,t,n,OK,XP(_me()),a1(e,2,-2),0)}function G6(e,t,n,r){return KP(e,t,n,hD,a1(e,0,r),a1(e,r+1,-1),r)}function Cg(e,t){for(var n="",r=mD(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Eme(e,t,n,r){switch(e.type){case hme:if(e.children.length)break;case pme:case hD:return e.return=e.return||e.value;case OK:return"";case IK:return e.return=e.value+"{"+Cg(e.children,r)+"}";case pD:e.value=e.props.join(",")}return oc(n=Cg(e.children,r))?e.return=e.value+"{"+n+"}":""}function Tme(e){var t=mD(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}function Ome(e){return function(t){t.root||(t=t.return)&&e(t)}}var Ime=function(t,n,r){for(var i=0,o=0;i=o,o=wc(),i===38&&o===12&&(n[r]=1),!s1(o);)Ya();return C_(t,Pa)},Rme=function(t,n){var r=-1,i=44;do switch(s1(i)){case 0:i===38&&wc()===12&&(n[r]=1),t[r]+=Ime(Pa-1,n,r);break;case 2:t[r]+=dS(i);break;case 4:if(i===44){t[++r]=wc()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=XP(i)}while(i=Ya());return t},kme=function(t,n){return $K(Rme(LK(t),n))},W6=new WeakMap,Lme=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!W6.get(r))&&!i){W6.set(t,!0);for(var o=[],a=kme(n,o),s=r.props,l=0,c=0;l<a.length;l++)for(var u=0;u<s.length;u++,c++)t.props[c]=o[l]?a[l].replace(/&\f/g,s[u]):s[u]+" "+a[l]}}},$me=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function DK(e,t){switch(vme(e,t)){case 5103:return Nn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Nn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Nn+e+DC+e+_o+e+e;case 6828:case 4268:return Nn+e+_o+e+e;case 6165:return Nn+e+_o+"flex-"+e+e;case 5187:return Nn+e+Fn(e,/(\w+).+(:[^]+)/,Nn+"box-$1$2"+_o+"flex-$1$2")+e;case 5443:return Nn+e+_o+"flex-item-"+Fn(e,/flex-|-self/,"")+e;case 4675:return Nn+e+_o+"flex-line-pack"+Fn(e,/align-content|flex-|-self/,"")+e;case 5548:return Nn+e+_o+Fn(e,"shrink","negative")+e;case 5292:return Nn+e+_o+Fn(e,"basis","preferred-size")+e;case 6060:return Nn+"box-"+Fn(e,"-grow","")+Nn+e+_o+Fn(e,"grow","positive")+e;case 4554:return Nn+Fn(e,/([^-])(transform)/g,"$1"+Nn+"$2")+e;case 6187:return Fn(Fn(Fn(e,/(zoom-|grab)/,Nn+"$1"),/(image-set)/,Nn+"$1"),e,"")+e;case 5495:case 3959:return Fn(e,/(image-set\([^]*)/,Nn+"$1$`$1");case 4968:return Fn(Fn(e,/(.+:)(flex-)?(.*)/,Nn+"box-pack:$3"+_o+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Nn+e+e;case 4095:case 3583:case 4068:case 2532:return Fn(e,/(.+)-inline(.+)/,Nn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(oc(e)-1-t>6)switch(no(e,t+1)){case 109:if(no(e,t+4)!==45)break;case 102:return Fn(e,/(.+:)(.+)-([^]+)/,"$1"+Nn+"$2-$3$1"+DC+(no(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~y5(e,"stretch")?DK(Fn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(no(e,t+1)!==115)break;case 6444:switch(no(e,oc(e)-3-(~y5(e,"!important")&&10))){case 107:return Fn(e,":",":"+Nn)+e;case 101:return Fn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Nn+(no(e,14)===45?"inline-":"")+"box$3$1"+Nn+"$2$3$1"+_o+"$2box$3")+e}break;case 5936:switch(no(e,t+11)){case 114:return Nn+e+_o+Fn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Nn+e+_o+Fn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Nn+e+_o+Fn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Nn+e+_o+e+e}return e}var Dme=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case hD:t.return=DK(t.value,t.length);break;case IK:return Cg([U0(t,{value:Fn(t.value,"@","@"+Nn)})],i);case pD:if(t.length)return bme(t.props,function(o){switch(yme(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Cg([U0(t,{props:[Fn(o,/:(read-\w+)/,":"+DC+"$1")]})],i);case"::placeholder":return Cg([U0(t,{props:[Fn(o,/:(plac\w+)/,":"+Nn+"input-$1")]}),U0(t,{props:[Fn(o,/:(plac\w+)/,":"+DC+"$1")]}),U0(t,{props:[Fn(o,/:(plac\w+)/,_o+"input-$1")]})],i)}return""})}},Bme=[Dme],BK=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var v=g.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||Bme,o={},a,s=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var v=g.getAttribute("data-emotion").split(" "),m=1;m<v.length;m++)o[v[m]]=!0;s.push(g)});var l,c=[Lme,$me];{var u,f=[Eme,Ome(function(g){u.insert(g)})],d=Tme(c.concat(i,f)),p=function(v){return Cg(Pme(v),d)};l=function(v,m,y,_){u=y,p(v?v+"{"+m.styles+"}":m.styles),_&&(h.inserted[m.name]=!0)}}var h={key:n,sheet:new dme({key:n,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return h.sheet.hydrate(s),h},NK={exports:{}},rr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qi=typeof Symbol=="function"&&Symbol.for,gD=qi?Symbol.for("react.element"):60103,vD=qi?Symbol.for("react.portal"):60106,ZP=qi?Symbol.for("react.fragment"):60107,JP=qi?Symbol.for("react.strict_mode"):60108,QP=qi?Symbol.for("react.profiler"):60114,eM=qi?Symbol.for("react.provider"):60109,tM=qi?Symbol.for("react.context"):60110,yD=qi?Symbol.for("react.async_mode"):60111,nM=qi?Symbol.for("react.concurrent_mode"):60111,rM=qi?Symbol.for("react.forward_ref"):60112,iM=qi?Symbol.for("react.suspense"):60113,Nme=qi?Symbol.for("react.suspense_list"):60120,oM=qi?Symbol.for("react.memo"):60115,aM=qi?Symbol.for("react.lazy"):60116,Fme=qi?Symbol.for("react.block"):60121,jme=qi?Symbol.for("react.fundamental"):60117,zme=qi?Symbol.for("react.responder"):60118,Ume=qi?Symbol.for("react.scope"):60119;function ls(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gD:switch(e=e.type,e){case yD:case nM:case ZP:case QP:case JP:case iM:return e;default:switch(e=e&&e.$$typeof,e){case tM:case rM:case aM:case oM:case eM:return e;default:return t}}case vD:return t}}}function FK(e){return ls(e)===nM}rr.AsyncMode=yD;rr.ConcurrentMode=nM;rr.ContextConsumer=tM;rr.ContextProvider=eM;rr.Element=gD;rr.ForwardRef=rM;rr.Fragment=ZP;rr.Lazy=aM;rr.Memo=oM;rr.Portal=vD;rr.Profiler=QP;rr.StrictMode=JP;rr.Suspense=iM;rr.isAsyncMode=function(e){return FK(e)||ls(e)===yD};rr.isConcurrentMode=FK;rr.isContextConsumer=function(e){return ls(e)===tM};rr.isContextProvider=function(e){return ls(e)===eM};rr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gD};rr.isForwardRef=function(e){return ls(e)===rM};rr.isFragment=function(e){return ls(e)===ZP};rr.isLazy=function(e){return ls(e)===aM};rr.isMemo=function(e){return ls(e)===oM};rr.isPortal=function(e){return ls(e)===vD};rr.isProfiler=function(e){return ls(e)===QP};rr.isStrictMode=function(e){return ls(e)===JP};rr.isSuspense=function(e){return ls(e)===iM};rr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ZP||e===nM||e===QP||e===JP||e===iM||e===Nme||typeof e=="object"&&e!==null&&(e.$$typeof===aM||e.$$typeof===oM||e.$$typeof===eM||e.$$typeof===tM||e.$$typeof===rM||e.$$typeof===jme||e.$$typeof===zme||e.$$typeof===Ume||e.$$typeof===Fme)};rr.typeOf=ls;NK.exports=rr;var Vme=NK.exports,jK=Vme,Hme={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Gme={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},zK={};zK[jK.ForwardRef]=Hme;zK[jK.Memo]=Gme;var Wme=!0;function UK(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var VK=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||Wme===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},bD=function(t,n,r){VK(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function qme(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Xme={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Yme=/[A-Z]|^ms/g,Kme=/_EMO_([^_]+?)_([^]*?)_EMO_/g,HK=function(t){return t.charCodeAt(1)===45},q6=function(t){return t!=null&&typeof t!="boolean"},sO=TK(function(e){return HK(e)?e:e.replace(Yme,"-$&").toLowerCase()}),X6=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Kme,function(r,i,o){return ac={name:i,styles:o,next:ac},i})}return Xme[t]!==1&&!HK(t)&&typeof n=="number"&&n!==0?n+"px":n};function l1(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return ac={name:n.name,styles:n.styles,next:ac},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)ac={name:r.name,styles:r.styles,next:ac},r=r.next;var i=n.styles+";";return i}return Zme(e,t,n)}case"function":{if(e!==void 0){var o=ac,a=n(e);return ac=o,l1(e,t,a)}break}}if(t==null)return n;var s=t[n];return s!==void 0?s:n}function Zme(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=l1(e,t,n[i])+";";else for(var o in n){var a=n[o];if(typeof a!="object")t!=null&&t[a]!==void 0?r+=o+"{"+t[a]+"}":q6(a)&&(r+=sO(o)+":"+X6(o,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var s=0;s<a.length;s++)q6(a[s])&&(r+=sO(o)+":"+X6(o,a[s])+";");else{var l=l1(e,t,a);switch(o){case"animation":case"animationName":{r+=sO(o)+":"+l+";";break}default:r+=o+"{"+l+"}"}}}return r}var Y6=/label:\s*([^\s;\n{]+)\s*(;|$)/g,ac,sM=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,o="";ac=void 0;var a=t[0];a==null||a.raw===void 0?(i=!1,o+=l1(r,n,a)):o+=a[0];for(var s=1;s<t.length;s++)o+=l1(r,n,t[s]),i&&(o+=a[s]);Y6.lastIndex=0;for(var l="",c;(c=Y6.exec(o))!==null;)l+="-"+c[1];var u=qme(o)+l;return{name:u,styles:o,next:ac}},Jme=function(t){return t()},GK=ZS["useInsertionEffect"]?ZS["useInsertionEffect"]:!1,Qme=GK||Jme,K6=GK||$.useLayoutEffect,_D=$.createContext(typeof HTMLElement<"u"?BK({key:"css"}):null),ege=_D.Provider,tge=function(){return $.useContext(_D)},WK=function(t){return $.forwardRef(function(n,r){var i=$.useContext(_D);return t(n,i,r)})},lM=$.createContext({}),qK=WK(function(e,t){var n=e.styles,r=sM([n],void 0,$.useContext(lM)),i=$.useRef();return K6(function(){var o=t.key+"-global",a=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return t.sheet.tags.length&&(a.before=t.sheet.tags[0]),l!==null&&(s=!0,l.setAttribute("data-emotion",o),a.hydrate([l])),i.current=[a,s],function(){a.flush()}},[t]),K6(function(){var o=i.current,a=o[0],s=o[1];if(s){o[1]=!1;return}if(r.next!==void 0&&bD(t,r.next,!0),a.tags.length){var l=a.tags[a.tags.length-1].nextElementSibling;a.before=l,a.flush()}t.insert("",r,a,!1)},[t,r.name]),null});function Ml(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return sM(t)}var cs=function(){var t=Ml.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},nge=cme,rge=function(t){return t!=="theme"},Z6=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?nge:rge},J6=function(t,n,r){var i;if(n){var o=n.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(a){return t.__emotion_forwardProp(a)&&o(a)}:o}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},ige=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return VK(n,r,i),Qme(function(){return bD(n,r,i)}),null},oge=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,o,a;n!==void 0&&(o=n.label,a=n.target);var s=J6(t,n,r),l=s||Z6(i),c=!l("as");return function(){var u=arguments,f=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&f.push("label:"+o+";"),u[0]==null||u[0].raw===void 0)f.push.apply(f,u);else{f.push(u[0][0]);for(var d=u.length,p=1;p<d;p++)f.push(u[p],u[0][p])}var h=WK(function(g,v,m){var y=c&&g.as||i,_="",b=[],x=g;if(g.theme==null){x={};for(var w in g)x[w]=g[w];x.theme=$.useContext(lM)}typeof g.className=="string"?_=UK(v.registered,b,g.className):g.className!=null&&(_=g.className+" ");var S=sM(f.concat(b),v.registered,x);_+=v.key+"-"+S.name,a!==void 0&&(_+=" "+a);var A=c&&s===void 0?Z6(y):l,C={};for(var k in g)c&&k==="as"||A(k)&&(C[k]=g[k]);return C.className=_,C.ref=m,$.createElement($.Fragment,null,$.createElement(ige,{cache:v,serialized:S,isStringTag:typeof y=="string"}),$.createElement(y,C))});return h.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",h.defaultProps=t.defaultProps,h.__emotion_real=h,h.__emotion_base=i,h.__emotion_styles=f,h.__emotion_forwardProp=s,Object.defineProperty(h,"toString",{value:function(){return"."+a}}),h.withComponent=function(g,v){return e(g,I({},n,v,{shouldForwardProp:J6(h,v,!0)})).apply(void 0,f)},h}},age=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],_5=oge.bind();age.forEach(function(e){_5[e]=_5(e)});let x5;typeof document=="object"&&(x5=BK({key:"css",prepend:!0}));function XK(e){const{injectFirst:t,children:n}=e;return t&&x5?G.jsx(ege,{value:x5,children:n}):n}function sge(e){return e==null||Object.keys(e).length===0}function hS(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?i=>t(sge(i)?n:i):t;return G.jsx(qK,{styles:r})}/**
 * @mui/styled-engine v5.14.13
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function YK(e,t){return _5(e,t)}const lge=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},cge=["values","unit","step"],uge=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>I({},n,{[r.key]:r.val}),{})};function KK(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=We(e,cge),o=uge(t),a=Object.keys(o);function s(d){return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${n})`}function l(d){return`@media (max-width:${(typeof t[d]=="number"?t[d]:d)-r/100}${n})`}function c(d,p){const h=a.indexOf(p);return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${n}) and (max-width:${(h!==-1&&typeof t[a[h]]=="number"?t[a[h]]:p)-r/100}${n})`}function u(d){return a.indexOf(d)+1<a.length?c(d,a[a.indexOf(d)+1]):s(d)}function f(d){const p=a.indexOf(d);return p===0?s(a[1]):p===a.length-1?l(a[p]):c(d,a[a.indexOf(d)+1]).replace("@media","@media not all and")}return I({keys:a,values:o,up:s,down:l,between:c,only:u,not:f,unit:n},i)}const fge={borderRadius:4},dge=fge;function fb(e,t){return t?Jr(e,t,{clone:!1}):e}const xD={xs:0,sm:600,md:900,lg:1200,xl:1536},Q6={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${xD[e]}px)`};function Ma(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const o=r.breakpoints||Q6;return t.reduce((a,s,l)=>(a[o.up(o.keys[l])]=n(t[l]),a),{})}if(typeof t=="object"){const o=r.breakpoints||Q6;return Object.keys(t).reduce((a,s)=>{if(Object.keys(o.values||xD).indexOf(s)!==-1){const l=o.up(s);a[l]=n(t[s],s)}else{const l=s;a[l]=t[l]}return a},{})}return n(t)}function ZK(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,i)=>{const o=e.up(i);return r[o]={},r},{}))||{}}function JK(e,t){return e.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},t)}function pge(e,...t){const n=ZK(e),r=[n,...t].reduce((i,o)=>Jr(i,o),{});return JK(Object.keys(n),r)}function hge(e,t){if(typeof e!="object")return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((i,o)=>{o<e.length&&(n[i]=!0)}):r.forEach(i=>{e[i]!=null&&(n[i]=!0)}),n}function Tp({values:e,breakpoints:t,base:n}){const r=n||hge(e,t),i=Object.keys(r);if(i.length===0)return e;let o;return i.reduce((a,s,l)=>(Array.isArray(e)?(a[s]=e[l]!=null?e[l]:e[o],o=l):typeof e=="object"?(a[s]=e[s]!=null?e[s]:e[o],o=s):a[s]=e,a),{})}function av(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(r!=null)return r}return t.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,e)}function BC(e,t,n,r=n){let i;return typeof e=="function"?i=e(n):Array.isArray(e)?i=e[n]||r:i=av(e,n)||r,t&&(i=t(i,r,e)),i}function Wn(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=a=>{if(a[t]==null)return null;const s=a[t],l=a.theme,c=av(l,r)||{};return Ma(a,s,f=>{let d=BC(c,i,f);return f===d&&typeof f=="string"&&(d=BC(c,i,`${t}${f==="default"?"":De(f)}`,f)),n===!1?d:{[n]:d}})};return o.propTypes={},o.filterProps=[t],o}function mge(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const gge={m:"margin",p:"padding"},vge={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ej={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},yge=mge(e=>{if(e.length>2)if(ej[e])e=ej[e];else return[e];const[t,n]=e.split(""),r=gge[t],i=vge[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),wD=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],SD=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...wD,...SD];function A_(e,t,n,r){var i;const o=(i=av(e,t,!1))!=null?i:n;return typeof o=="number"?a=>typeof a=="string"?a:o*a:Array.isArray(o)?a=>typeof a=="string"?a:o[a]:typeof o=="function"?o:()=>{}}function CD(e){return A_(e,"spacing",8)}function Jp(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),r=e(n);return t>=0?r:typeof r=="number"?-r:`-${r}`}function bge(e,t){return n=>e.reduce((r,i)=>(r[i]=Jp(t,n),r),{})}function _ge(e,t,n,r){if(t.indexOf(n)===-1)return null;const i=yge(n),o=bge(i,r),a=e[n];return Ma(e,a,o)}function QK(e,t){const n=CD(e.theme);return Object.keys(e).map(r=>_ge(e,t,r,n)).reduce(fb,{})}function Yr(e){return QK(e,wD)}Yr.propTypes={};Yr.filterProps=wD;function Kr(e){return QK(e,SD)}Kr.propTypes={};Kr.filterProps=SD;function eZ(e=8){if(e.mui)return e;const t=CD({spacing:e}),n=(...r)=>(r.length===0?[1]:r).map(o=>{const a=t(o);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function cM(...e){const t=e.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>t[o]?fb(i,t[o](r)):i,{});return n.propTypes={},n.filterProps=e.reduce((r,i)=>r.concat(i.filterProps),[]),n}function uc(e){return typeof e!="number"?e:`${e}px solid`}const xge=Wn({prop:"border",themeKey:"borders",transform:uc}),wge=Wn({prop:"borderTop",themeKey:"borders",transform:uc}),Sge=Wn({prop:"borderRight",themeKey:"borders",transform:uc}),Cge=Wn({prop:"borderBottom",themeKey:"borders",transform:uc}),Age=Wn({prop:"borderLeft",themeKey:"borders",transform:uc}),Pge=Wn({prop:"borderColor",themeKey:"palette"}),Mge=Wn({prop:"borderTopColor",themeKey:"palette"}),Ege=Wn({prop:"borderRightColor",themeKey:"palette"}),Tge=Wn({prop:"borderBottomColor",themeKey:"palette"}),Oge=Wn({prop:"borderLeftColor",themeKey:"palette"}),uM=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=A_(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:Jp(t,r)});return Ma(e,e.borderRadius,n)}return null};uM.propTypes={};uM.filterProps=["borderRadius"];cM(xge,wge,Sge,Cge,Age,Pge,Mge,Ege,Tge,Oge,uM);const fM=e=>{if(e.gap!==void 0&&e.gap!==null){const t=A_(e.theme,"spacing",8),n=r=>({gap:Jp(t,r)});return Ma(e,e.gap,n)}return null};fM.propTypes={};fM.filterProps=["gap"];const dM=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=A_(e.theme,"spacing",8),n=r=>({columnGap:Jp(t,r)});return Ma(e,e.columnGap,n)}return null};dM.propTypes={};dM.filterProps=["columnGap"];const pM=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=A_(e.theme,"spacing",8),n=r=>({rowGap:Jp(t,r)});return Ma(e,e.rowGap,n)}return null};pM.propTypes={};pM.filterProps=["rowGap"];const Ige=Wn({prop:"gridColumn"}),Rge=Wn({prop:"gridRow"}),kge=Wn({prop:"gridAutoFlow"}),Lge=Wn({prop:"gridAutoColumns"}),$ge=Wn({prop:"gridAutoRows"}),Dge=Wn({prop:"gridTemplateColumns"}),Bge=Wn({prop:"gridTemplateRows"}),Nge=Wn({prop:"gridTemplateAreas"}),Fge=Wn({prop:"gridArea"});cM(fM,dM,pM,Ige,Rge,kge,Lge,$ge,Dge,Bge,Nge,Fge);function Ag(e,t){return t==="grey"?t:e}const jge=Wn({prop:"color",themeKey:"palette",transform:Ag}),zge=Wn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Ag}),Uge=Wn({prop:"backgroundColor",themeKey:"palette",transform:Ag});cM(jge,zge,Uge);function Ha(e){return e<=1&&e!==0?`${e*100}%`:e}const Vge=Wn({prop:"width",transform:Ha}),AD=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var r,i;const o=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||xD[n];return o?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${o}${e.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:Ha(n)}};return Ma(e,e.maxWidth,t)}return null};AD.filterProps=["maxWidth"];const Hge=Wn({prop:"minWidth",transform:Ha}),Gge=Wn({prop:"height",transform:Ha}),Wge=Wn({prop:"maxHeight",transform:Ha}),qge=Wn({prop:"minHeight",transform:Ha});Wn({prop:"size",cssProperty:"width",transform:Ha});Wn({prop:"size",cssProperty:"height",transform:Ha});const Xge=Wn({prop:"boxSizing"});cM(Vge,AD,Hge,Gge,Wge,qge,Xge);const Yge={border:{themeKey:"borders",transform:uc},borderTop:{themeKey:"borders",transform:uc},borderRight:{themeKey:"borders",transform:uc},borderBottom:{themeKey:"borders",transform:uc},borderLeft:{themeKey:"borders",transform:uc},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:uM},color:{themeKey:"palette",transform:Ag},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Ag},backgroundColor:{themeKey:"palette",transform:Ag},p:{style:Kr},pt:{style:Kr},pr:{style:Kr},pb:{style:Kr},pl:{style:Kr},px:{style:Kr},py:{style:Kr},padding:{style:Kr},paddingTop:{style:Kr},paddingRight:{style:Kr},paddingBottom:{style:Kr},paddingLeft:{style:Kr},paddingX:{style:Kr},paddingY:{style:Kr},paddingInline:{style:Kr},paddingInlineStart:{style:Kr},paddingInlineEnd:{style:Kr},paddingBlock:{style:Kr},paddingBlockStart:{style:Kr},paddingBlockEnd:{style:Kr},m:{style:Yr},mt:{style:Yr},mr:{style:Yr},mb:{style:Yr},ml:{style:Yr},mx:{style:Yr},my:{style:Yr},margin:{style:Yr},marginTop:{style:Yr},marginRight:{style:Yr},marginBottom:{style:Yr},marginLeft:{style:Yr},marginX:{style:Yr},marginY:{style:Yr},marginInline:{style:Yr},marginInlineStart:{style:Yr},marginInlineEnd:{style:Yr},marginBlock:{style:Yr},marginBlockStart:{style:Yr},marginBlockEnd:{style:Yr},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:fM},rowGap:{style:pM},columnGap:{style:dM},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ha},maxWidth:{style:AD},minWidth:{transform:Ha},height:{transform:Ha},maxHeight:{transform:Ha},minHeight:{transform:Ha},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},P_=Yge;function Kge(...e){const t=e.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function Zge(e,t){return typeof e=="function"?e(t):e}function Jge(){function e(n,r,i,o){const a={[n]:r,theme:i},s=o[n];if(!s)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:f}=s;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const d=av(i,c)||{};return f?f(a):Ma(a,r,h=>{let g=BC(d,u,h);return h===g&&typeof h=="string"&&(g=BC(d,u,`${n}${h==="default"?"":De(h)}`,h)),l===!1?g:{[l]:g}})}function t(n){var r;const{sx:i,theme:o={}}=n||{};if(!i)return null;const a=(r=o.unstable_sxConfig)!=null?r:P_;function s(l){let c=l;if(typeof l=="function")c=l(o);else if(typeof l!="object")return l;if(!c)return null;const u=ZK(o.breakpoints),f=Object.keys(u);let d=u;return Object.keys(c).forEach(p=>{const h=Zge(c[p],o);if(h!=null)if(typeof h=="object")if(a[p])d=fb(d,e(p,h,o,a));else{const g=Ma({theme:o},h,v=>({[p]:v}));Kge(g,h)?d[p]=t({sx:h,theme:o}):d=fb(d,g)}else d=fb(d,e(p,h,o,a))}),JK(f,d)}return Array.isArray(i)?i.map(s):s(i)}return t}const tZ=Jge();tZ.filterProps=["sx"];const i0=tZ,Qge=["breakpoints","palette","spacing","shape"];function o0(e={},...t){const{breakpoints:n={},palette:r={},spacing:i,shape:o={}}=e,a=We(e,Qge),s=KK(n),l=eZ(i);let c=Jr({breakpoints:s,direction:"ltr",components:{},palette:I({mode:"light"},r),spacing:l,shape:I({},dge,o)},a);return c=t.reduce((u,f)=>Jr(u,f),c),c.unstable_sxConfig=I({},P_,a==null?void 0:a.unstable_sxConfig),c.unstable_sx=function(f){return i0({sx:f,theme:this})},c}function eve(e){return Object.keys(e).length===0}function hM(e=null){const t=$.useContext(lM);return!t||eve(t)?e:t}const tve=o0();function M_(e=tve){return hM(e)}function nve({styles:e,themeId:t,defaultTheme:n={}}){const r=M_(n),i=typeof e=="function"?e(t&&r[t]||r):e;return G.jsx(hS,{styles:i})}const rve=["sx"],ive=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:P_;return Object.keys(e).forEach(o=>{i[o]?r.systemProps[o]=e[o]:r.otherProps[o]=e[o]}),r};function E_(e){const{sx:t}=e,n=We(e,rve),{systemProps:r,otherProps:i}=ive(n);let o;return Array.isArray(t)?o=[r,...t]:typeof t=="function"?o=(...a)=>{const s=t(...a);return fu(s)?I({},r,s):r}:o=I({},r,t),I({},i,{sx:o})}function nZ(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=nZ(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function je(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=nZ(e))&&(r&&(r+=" "),r+=t);return r}const ove=["className","component"];function ave(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=e,o=YK("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(i0);return $.forwardRef(function(l,c){const u=M_(n),f=E_(l),{className:d,component:p="div"}=f,h=We(f,ove);return G.jsx(o,I({as:p,ref:c,className:je(d,i?i(r):r),theme:t&&u[t]||u},h))})}const sve=["variant"];function tj(e){return e.length===0}function rZ(e){const{variant:t}=e,n=We(e,sve);let r=t||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=tj(r)?e[i]:De(e[i]):r+=`${tj(r)?i:De(i)}${De(e[i].toString())}`}),r}const lve=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function cve(e){return Object.keys(e).length===0}function uve(e){return typeof e=="string"&&e.charCodeAt(0)>96}const fve=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,NC=e=>{const t={};return e&&e.forEach(n=>{const r=rZ(n.props);t[r]=n.style}),t},dve=(e,t)=>{let n=[];return t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants),NC(n)},FC=(e,t,n)=>{const{ownerState:r={}}=e,i=[];return n&&n.forEach(o=>{let a=!0;Object.keys(o.props).forEach(s=>{r[s]!==o.props[s]&&e[s]!==o.props[s]&&(a=!1)}),a&&i.push(t[rZ(o.props)])}),i},pve=(e,t,n,r)=>{var i;const o=n==null||(i=n.components)==null||(i=i[r])==null?void 0:i.variants;return FC(e,t,o)};function db(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const hve=o0(),mve=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function mS({defaultTheme:e,theme:t,themeId:n}){return cve(t)?e:t[n]||t}function gve(e){return e?(t,n)=>n[e]:null}const nj=({styledArg:e,props:t,defaultTheme:n,themeId:r})=>{const i=e(I({},t,{theme:mS(I({},t,{defaultTheme:n,themeId:r}))}));let o;if(i&&i.variants&&(o=i.variants,delete i.variants),o){const a=FC(t,NC(o),o);return[i,...a]}return i};function iZ(e={}){const{themeId:t,defaultTheme:n=hve,rootShouldForwardProp:r=db,slotShouldForwardProp:i=db}=e,o=a=>i0(I({},a,{theme:mS(I({},a,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,(a,s={})=>{lge(a,b=>b.filter(x=>!(x!=null&&x.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:f,overridesResolver:d=gve(mve(c))}=s,p=We(s,lve),h=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,g=f||!1;let v,m=db;c==="Root"||c==="root"?m=r:c?m=i:uve(a)&&(m=void 0);const y=YK(a,I({shouldForwardProp:m,label:v},p)),_=(b,...x)=>{const w=x?x.map(k=>{if(typeof k=="function"&&k.__emotion_real!==k)return O=>nj({styledArg:k,props:O,defaultTheme:n,themeId:t});if(fu(k)){let O=k,T;return k&&k.variants&&(T=k.variants,delete O.variants,O=B=>{let R=k;return FC(B,NC(T),T).forEach(D=>{R=Jr(R,D)}),R}),O}return k}):[];let S=b;if(fu(b)){let k;b&&b.variants&&(k=b.variants,delete S.variants,S=O=>{let T=b;return FC(O,NC(k),k).forEach(R=>{T=Jr(T,R)}),T})}else typeof b=="function"&&b.__emotion_real!==b&&(S=k=>nj({styledArg:b,props:k,defaultTheme:n,themeId:t}));l&&d&&w.push(k=>{const O=mS(I({},k,{defaultTheme:n,themeId:t})),T=fve(l,O);if(T){const B={};return Object.entries(T).forEach(([R,P])=>{B[R]=typeof P=="function"?P(I({},k,{theme:O})):P}),d(k,B)}return null}),l&&!h&&w.push(k=>{const O=mS(I({},k,{defaultTheme:n,themeId:t}));return pve(k,dve(l,O),O,l)}),g||w.push(o);const A=w.length-x.length;if(Array.isArray(b)&&A>0){const k=new Array(A).fill("");S=[...b,...k],S.raw=[...b.raw,...k]}const C=y(S,...w);return a.muiName&&(C.muiName=a.muiName),C};return y.withConfig&&(_.withConfig=y.withConfig),_}}const vve=iZ(),PD=vve;function MD(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:fD(t.components[n].defaultProps,r)}function T_({props:e,name:t,defaultTheme:n,themeId:r}){let i=M_(n);return r&&(i=i[r]||i),MD({theme:i,name:t,props:e})}function ED(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function TD(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function yve(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function El(e){if(e.type)return e;if(e.charAt(0)==="#")return El(TD(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Aa(9,e));let r=e.substring(t+1,e.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(Aa(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const bve=e=>{const t=El(e);return t.values.slice(0,3).map((n,r)=>t.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")},Iy=(e,t)=>{try{return bve(e)}catch{return e}};function a0(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((i,o)=>o<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function oZ(e){if(e.indexOf("#")===0)return e;const{values:t}=El(e);return`#${t.map((n,r)=>yve(r===3?Math.round(255*n):n)).join("")}`}function OD(e){e=El(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=(c,u=(c+n/30)%12)=>i-o*Math.max(Math.min(u-3,9-u,1),-1);let s="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return e.type==="hsla"&&(s+="a",l.push(t[3])),a0({type:s,values:l})}function c1(e){e=El(e);let t=e.type==="hsl"||e.type==="hsla"?El(OD(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function ID(e,t){const n=c1(e),r=c1(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Ot(e,t){return e=El(e),t=ED(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,a0(e)}function bw(e,t,n){try{return Ot(e,t)}catch{return e}}function Tl(e,t){if(e=El(e),t=ED(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return a0(e)}function dr(e,t,n){try{return Tl(e,t)}catch{return e}}function Ol(e,t){if(e=El(e),t=ED(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return a0(e)}function pr(e,t,n){try{return Ol(e,t)}catch{return e}}function sv(e,t=.15){return c1(e)>.5?Tl(e,t):Ol(e,t)}function Ry(e,t,n){try{return Ry(e,t)}catch{return e}}const _ve=$.createContext(null),aZ=_ve;function RD(){return $.useContext(aZ)}const xve=typeof Symbol=="function"&&Symbol.for,wve=xve?Symbol.for("mui.nested"):"__THEME_NESTED__";function Sve(e,t){return typeof t=="function"?t(e):I({},e,t)}function Cve(e){const{children:t,theme:n}=e,r=RD(),i=$.useMemo(()=>{const o=r===null?n:Sve(r,n);return o!=null&&(o[wve]=r!==null),o},[n,r]);return G.jsx(aZ.Provider,{value:i,children:t})}const rj={};function ij(e,t,n,r=!1){return $.useMemo(()=>{const i=e&&t[e]||t;if(typeof n=="function"){const o=n(i),a=e?I({},t,{[e]:o}):o;return r?()=>a:a}return e?I({},t,{[e]:n}):I({},t,n)},[e,t,n,r])}function sZ(e){const{children:t,theme:n,themeId:r}=e,i=hM(rj),o=RD()||rj,a=ij(r,i,n),s=ij(r,o,n,!0);return G.jsx(Cve,{theme:s,children:G.jsx(lM.Provider,{value:a,children:t})})}const kD="mode",LD="color-scheme",lZ="data-color-scheme";function Ave(e){const{defaultMode:t="light",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=kD,colorSchemeStorageKey:o=LD,attribute:a=lZ,colorSchemeNode:s="document.documentElement"}=e||{};return G.jsx("script",{dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${i}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${o}-dark') || '${r}';
    } else {
      colorScheme = localStorage.getItem('${o}-light') || '${n}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${o}-light') || '${n}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${o}-dark') || '${r}';
  }
  if (colorScheme) {
    ${s}.setAttribute('${a}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function oj(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function cZ(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function Pve(e){return cZ(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function lO(e,t){if(typeof window>"u")return;let n;try{n=localStorage.getItem(e)||void 0,n||localStorage.setItem(e,t)}catch{}return n||t}function Mve(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:o=kD,colorSchemeStorageKey:a=LD,storageWindow:s=typeof window>"u"?void 0:window}=e,l=i.join(","),[c,u]=$.useState(()=>{const v=lO(o,t),m=lO(`${a}-light`,n),y=lO(`${a}-dark`,r);return{mode:v,systemMode:oj(v),lightColorScheme:m,darkColorScheme:y}}),f=Pve(c),d=$.useCallback(v=>{u(m=>{if(v===m.mode)return m;const y=v||t;try{localStorage.setItem(o,y)}catch{}return I({},m,{mode:y,systemMode:oj(y)})})},[o,t]),p=$.useCallback(v=>{v?typeof v=="string"?v&&!l.includes(v)?console.error(`\`${v}\` does not exist in \`theme.colorSchemes\`.`):u(m=>{const y=I({},m);return cZ(m,_=>{try{localStorage.setItem(`${a}-${_}`,v)}catch{}_==="light"&&(y.lightColorScheme=v),_==="dark"&&(y.darkColorScheme=v)}),y}):u(m=>{const y=I({},m),_=v.light===null?n:v.light,b=v.dark===null?r:v.dark;if(_)if(!l.includes(_))console.error(`\`${_}\` does not exist in \`theme.colorSchemes\`.`);else{y.lightColorScheme=_;try{localStorage.setItem(`${a}-light`,_)}catch{}}if(b)if(!l.includes(b))console.error(`\`${b}\` does not exist in \`theme.colorSchemes\`.`);else{y.darkColorScheme=b;try{localStorage.setItem(`${a}-dark`,b)}catch{}}return y}):u(m=>{try{localStorage.setItem(`${a}-light`,n),localStorage.setItem(`${a}-dark`,r)}catch{}return I({},m,{lightColorScheme:n,darkColorScheme:r})})},[l,a,n,r]),h=$.useCallback(v=>{c.mode==="system"&&u(m=>I({},m,{systemMode:v!=null&&v.matches?"dark":"light"}))},[c.mode]),g=$.useRef(h);return g.current=h,$.useEffect(()=>{const v=(...y)=>g.current(...y),m=window.matchMedia("(prefers-color-scheme: dark)");return m.addListener(v),v(m),()=>m.removeListener(v)},[]),$.useEffect(()=>{const v=m=>{const y=m.newValue;typeof m.key=="string"&&m.key.startsWith(a)&&(!y||l.match(y))&&(m.key.endsWith("light")&&p({light:y}),m.key.endsWith("dark")&&p({dark:y})),m.key===o&&(!y||["light","dark","system"].includes(y))&&d(y||t)};if(s)return s.addEventListener("storage",v),()=>s.removeEventListener("storage",v)},[p,d,o,a,l,t,s]),I({},c,{colorScheme:f,setMode:d,setColorScheme:p})}const Eve=["colorSchemes","components","generateCssVars","cssVarPrefix"],Tve="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Ove(e){const{themeId:t,theme:n={},attribute:r=lZ,modeStorageKey:i=kD,colorSchemeStorageKey:o=LD,defaultMode:a="light",defaultColorScheme:s,disableTransitionOnChange:l=!1,resolveTheme:c,excludeVariablesFromRoot:u}=e;(!n.colorSchemes||typeof s=="string"&&!n.colorSchemes[s]||typeof s=="object"&&!n.colorSchemes[s==null?void 0:s.light]||typeof s=="object"&&!n.colorSchemes[s==null?void 0:s.dark])&&console.error(`MUI: \`${s}\` does not exist in \`theme.colorSchemes\`.`);const f=$.createContext(void 0),d=()=>{const m=$.useContext(f);if(!m)throw new Error(Aa(19));return m};function p({children:m,theme:y=n,modeStorageKey:_=i,colorSchemeStorageKey:b=o,attribute:x=r,defaultMode:w=a,defaultColorScheme:S=s,disableTransitionOnChange:A=l,storageWindow:C=typeof window>"u"?void 0:window,documentNode:k=typeof document>"u"?void 0:document,colorSchemeNode:O=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:T=":root",disableNestedContext:B=!1,disableStyleSheetGeneration:R=!1}){const P=$.useRef(!1),D=RD(),z=$.useContext(f),N=!!z&&!B,H=y[t],J=H||y,{colorSchemes:ne={},components:oe={},generateCssVars:Z=()=>({vars:{},css:{}}),cssVarPrefix:ce}=J,se=We(J,Eve),Y=Object.keys(ne),he=typeof S=="string"?S:S.light,ae=typeof S=="string"?S:S.dark,{mode:ye,setMode:re,systemMode:te,lightColorScheme:le,darkColorScheme:de,colorScheme:_e,setColorScheme:be}=Mve({supportedColorSchemes:Y,defaultLightColorScheme:he,defaultDarkColorScheme:ae,modeStorageKey:_,colorSchemeStorageKey:b,defaultMode:w,storageWindow:C});let ke=ye,W=_e;N&&(ke=z.mode,W=z.colorScheme);const ee=(()=>ke||(w==="system"?a:w))(),Ee=(()=>W||(ee==="dark"?ae:he))(),{css:ge,vars:pe}=Z(),ve=I({},se,{components:oe,colorSchemes:ne,cssVarPrefix:ce,vars:pe,getColorSchemeSelector:M=>`[${x}="${M}"] &`}),$e={},Ne={};Object.entries(ne).forEach(([M,L])=>{const{css:q,vars:me}=Z(M);ve.vars=Jr(ve.vars,me),M===Ee&&(Object.keys(L).forEach(Pe=>{L[Pe]&&typeof L[Pe]=="object"?ve[Pe]=I({},ve[Pe],L[Pe]):ve[Pe]=L[Pe]}),ve.palette&&(ve.palette.colorScheme=M));const Te=(()=>typeof S=="string"?S:w==="dark"?S.dark:S.light)();if(M===Te){if(u){const Pe={};u(ce).forEach(Xe=>{Pe[Xe]=q[Xe],delete q[Xe]}),$e[`[${x}="${M}"]`]=Pe}$e[`${T}, [${x}="${M}"]`]=q}else Ne[`${T===":root"?"":T}[${x}="${M}"]`]=q}),ve.vars=Jr(ve.vars,pe),$.useEffect(()=>{W&&O&&O.setAttribute(x,W)},[W,x,O]),$.useEffect(()=>{let M;if(A&&P.current&&k){const L=k.createElement("style");L.appendChild(k.createTextNode(Tve)),k.head.appendChild(L),window.getComputedStyle(k.body),M=setTimeout(()=>{k.head.removeChild(L)},1)}return()=>{clearTimeout(M)}},[W,A,k]),$.useEffect(()=>(P.current=!0,()=>{P.current=!1}),[]);const Ae=$.useMemo(()=>({mode:ke,systemMode:te,setMode:re,lightColorScheme:le,darkColorScheme:de,colorScheme:W,setColorScheme:be,allColorSchemes:Y}),[Y,W,de,le,ke,be,re,te]);let Oe=!0;(R||N&&(D==null?void 0:D.cssVarPrefix)===ce)&&(Oe=!1);const j=G.jsxs($.Fragment,{children:[Oe&&G.jsxs($.Fragment,{children:[G.jsx(hS,{styles:{[T]:ge}}),G.jsx(hS,{styles:$e}),G.jsx(hS,{styles:Ne})]}),G.jsx(sZ,{themeId:H?t:void 0,theme:c?c(ve):ve,children:m})]});return N?j:G.jsx(f.Provider,{value:Ae,children:j})}const h=typeof s=="string"?s:s.light,g=typeof s=="string"?s:s.dark;return{CssVarsProvider:p,useColorScheme:d,getInitColorSchemeScript:m=>Ave(I({attribute:r,colorSchemeStorageKey:o,defaultMode:a,defaultLightColorScheme:h,defaultDarkColorScheme:g,modeStorageKey:i},m))}}function Ive(e=""){function t(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${e?`${e}-`:""}${r}${t(...i)})`}const aj=(e,t,n,r=[])=>{let i=e;t.forEach((o,a)=>{a===t.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},Rve=(e,t,n)=>{function r(i,o=[],a=[]){Object.entries(i).forEach(([s,l])=>{(!n||n&&!n([...o,s]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...o,s],Array.isArray(l)?[...a,s]:a):t([...o,s],l,a))})}r(e)},kve=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function cO(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},a={};return Rve(e,(s,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(s,l))){const u=`--${n?`${n}-`:""}${s.join("-")}`;Object.assign(i,{[u]:kve(s,l)}),aj(o,s,`var(${u})`,c),aj(a,s,`var(${u}, ${l})`,c)}},s=>s[0]==="vars"),{css:i,vars:o,varsWithDefaults:a}}const Lve=["colorSchemes","components"],$ve=["light"];function Dve(e,t){const{colorSchemes:n={}}=e,r=We(e,Lve),{vars:i,css:o,varsWithDefaults:a}=cO(r,t);let s=a;const l={},{light:c}=n,u=We(n,$ve);if(Object.entries(u||{}).forEach(([d,p])=>{const{vars:h,css:g,varsWithDefaults:v}=cO(p,t);s=Jr(s,v),l[d]={css:g,vars:h}}),c){const{css:d,vars:p,varsWithDefaults:h}=cO(c,t);s=Jr(s,h),l.light={css:d,vars:p}}return{vars:s,generateCssVars:d=>d?{css:I({},l[d].css),vars:l[d].vars}:{css:I({},o),vars:i}}}const Bve=["className","component","disableGutters","fixed","maxWidth","classes"],Nve=o0(),Fve=PD("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${De(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),jve=e=>T_({props:e,name:"MuiContainer",defaultTheme:Nve}),zve=(e,t)=>{const n=l=>it(t,l),{classes:r,fixed:i,disableGutters:o,maxWidth:a}=e,s={root:["root",a&&`maxWidth${De(String(a))}`,i&&"fixed",o&&"disableGutters"]};return ot(s,n,r)};function Uve(e={}){const{createStyledComponent:t=Fve,useThemeProps:n=jve,componentName:r="MuiContainer"}=e,i=t(({theme:a,ownerState:s})=>I({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!s.disableGutters&&{paddingLeft:a.spacing(2),paddingRight:a.spacing(2),[a.breakpoints.up("sm")]:{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}}),({theme:a,ownerState:s})=>s.fixed&&Object.keys(a.breakpoints.values).reduce((l,c)=>{const u=c,f=a.breakpoints.values[u];return f!==0&&(l[a.breakpoints.up(u)]={maxWidth:`${f}${a.breakpoints.unit}`}),l},{}),({theme:a,ownerState:s})=>I({},s.maxWidth==="xs"&&{[a.breakpoints.up("xs")]:{maxWidth:Math.max(a.breakpoints.values.xs,444)}},s.maxWidth&&s.maxWidth!=="xs"&&{[a.breakpoints.up(s.maxWidth)]:{maxWidth:`${a.breakpoints.values[s.maxWidth]}${a.breakpoints.unit}`}}));return $.forwardRef(function(s,l){const c=n(s),{className:u,component:f="div",disableGutters:d=!1,fixed:p=!1,maxWidth:h="lg"}=c,g=We(c,Bve),v=I({},c,{component:f,disableGutters:d,fixed:p,maxWidth:h}),m=zve(v,r);return G.jsx(i,I({as:f,ownerState:v,className:je(m.root,u),ref:l},g))})}const Vve=(e,t)=>e.filter(n=>t.includes(n)),s0=(e,t,n)=>{const r=e.keys[0];Array.isArray(t)?t.forEach((i,o)=>{n((a,s)=>{o<=e.keys.length-1&&(o===0?Object.assign(a,s):a[e.up(e.keys[o])]=s)},i)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:Vve(e.keys,Object.keys(t))).forEach(o=>{if(e.keys.indexOf(o)!==-1){const a=t[o];a!==void 0&&n((s,l)=>{r===o?Object.assign(s,l):s[e.up(o)]=l},a)}}):(typeof t=="number"||typeof t=="string")&&n((i,o)=>{Object.assign(i,o)},t)};function Ou(e){return e?`Level${e}`:""}function O_(e){return e.unstable_level>0&&e.container}function uZ(e){return function(n){return`var(--Grid-${n}Spacing${Ou(e.unstable_level)})`}}function $D(e){return function(n){return e.unstable_level===0?`var(--Grid-${n}Spacing)`:`var(--Grid-${n}Spacing${Ou(e.unstable_level-1)})`}}function DD(e){return e.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${Ou(e.unstable_level-1)})`}const Hve=({theme:e,ownerState:t})=>{const n=uZ(t),r={};return s0(e.breakpoints,t.gridSize,(i,o)=>{let a={};o===!0&&(a={flexBasis:0,flexGrow:1,maxWidth:"100%"}),o==="auto"&&(a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof o=="number"&&(a={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${o} / ${DD(t)}${O_(t)?` + ${n("column")}`:""})`}),i(r,a)}),r},Gve=({theme:e,ownerState:t})=>{const n={};return s0(e.breakpoints,t.gridOffset,(r,i)=>{let o={};i==="auto"&&(o={marginLeft:"auto"}),typeof i=="number"&&(o={marginLeft:i===0?"0px":`calc(100% * ${i} / ${DD(t)})`}),r(n,o)}),n},Wve=({theme:e,ownerState:t})=>{if(!t.container)return{};const n=O_(t)?{[`--Grid-columns${Ou(t.unstable_level)}`]:DD(t)}:{"--Grid-columns":12};return s0(e.breakpoints,t.columns,(r,i)=>{r(n,{[`--Grid-columns${Ou(t.unstable_level)}`]:i})}),n},qve=({theme:e,ownerState:t})=>{if(!t.container)return{};const n=$D(t),r=O_(t)?{[`--Grid-rowSpacing${Ou(t.unstable_level)}`]:n("row")}:{};return s0(e.breakpoints,t.rowSpacing,(i,o)=>{var a;i(r,{[`--Grid-rowSpacing${Ou(t.unstable_level)}`]:typeof o=="string"?o:(a=e.spacing)==null?void 0:a.call(e,o)})}),r},Xve=({theme:e,ownerState:t})=>{if(!t.container)return{};const n=$D(t),r=O_(t)?{[`--Grid-columnSpacing${Ou(t.unstable_level)}`]:n("column")}:{};return s0(e.breakpoints,t.columnSpacing,(i,o)=>{var a;i(r,{[`--Grid-columnSpacing${Ou(t.unstable_level)}`]:typeof o=="string"?o:(a=e.spacing)==null?void 0:a.call(e,o)})}),r},Yve=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return s0(e.breakpoints,t.direction,(r,i)=>{r(n,{flexDirection:i})}),n},Kve=({ownerState:e})=>{const t=uZ(e),n=$D(e);return I({minWidth:0,boxSizing:"border-box"},e.container&&I({display:"flex",flexWrap:"wrap"},e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},{margin:`calc(${t("row")} / -2) calc(${t("column")} / -2)`},e.disableEqualOverflow&&{margin:`calc(${t("row")} * -1) 0px 0px calc(${t("column")} * -1)`}),(!e.container||O_(e))&&I({padding:`calc(${n("row")} / 2) calc(${n("column")} / 2)`},(e.disableEqualOverflow||e.parentDisableEqualOverflow)&&{padding:`${n("row")} 0px 0px ${n("column")}`}))},Zve=e=>{const t=[];return Object.entries(e).forEach(([n,r])=>{r!==!1&&r!==void 0&&t.push(`grid-${n}-${String(r)}`)}),t},Jve=(e,t="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const r=[];return Object.entries(e).forEach(([i,o])=>{n(o)&&r.push(`spacing-${i}-${String(o)}`)}),r}return[]},Qve=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(e)}`],e0e=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],t0e=o0(),n0e=PD("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>t.root});function r0e(e){return T_({props:e,name:"MuiGrid",defaultTheme:t0e})}function i0e(e={}){const{createStyledComponent:t=n0e,useThemeProps:n=r0e,componentName:r="MuiGrid"}=e,i=$.createContext(void 0),o=(l,c)=>{const{container:u,direction:f,spacing:d,wrap:p,gridSize:h}=l,g={root:["root",u&&"container",p!=="wrap"&&`wrap-xs-${String(p)}`,...Qve(f),...Zve(h),...u?Jve(d,c.breakpoints.keys[0]):[]]};return ot(g,v=>it(r,v),{})},a=t(Wve,Xve,qve,Hve,Yve,Kve,Gve),s=$.forwardRef(function(c,u){var f,d,p,h,g,v,m,y;const _=M_(),b=n(c),x=E_(b),w=$.useContext(i),{className:S,children:A,columns:C=12,container:k=!1,component:O="div",direction:T="row",wrap:B="wrap",spacing:R=0,rowSpacing:P=R,columnSpacing:D=R,disableEqualOverflow:z,unstable_level:N=0}=x,H=We(x,e0e);let J=z;N&&z!==void 0&&(J=c.disableEqualOverflow);const ne={},oe={},Z={};Object.entries(H).forEach(([te,le])=>{_.breakpoints.values[te]!==void 0?ne[te]=le:_.breakpoints.values[te.replace("Offset","")]!==void 0?oe[te.replace("Offset","")]=le:Z[te]=le});const ce=(f=c.columns)!=null?f:N?void 0:C,se=(d=c.spacing)!=null?d:N?void 0:R,Y=(p=(h=c.rowSpacing)!=null?h:c.spacing)!=null?p:N?void 0:P,he=(g=(v=c.columnSpacing)!=null?v:c.spacing)!=null?g:N?void 0:D,ae=I({},x,{level:N,columns:ce,container:k,direction:T,wrap:B,spacing:se,rowSpacing:Y,columnSpacing:he,gridSize:ne,gridOffset:oe,disableEqualOverflow:(m=(y=J)!=null?y:w)!=null?m:!1,parentDisableEqualOverflow:w}),ye=o(ae,_);let re=G.jsx(a,I({ref:u,as:O,ownerState:ae,className:je(ye.root,S)},Z,{children:$.Children.map(A,te=>{if($.isValidElement(te)&&xc(te,["Grid"])){var le;return $.cloneElement(te,{unstable_level:(le=te.props.unstable_level)!=null?le:N+1})}return te})}));return J!==void 0&&J!==(w??!1)&&(re=G.jsx(i.Provider,{value:J,children:re})),re});return s.muiName="Grid",s}const o0e=["component","direction","spacing","divider","children","className","useFlexGap"],a0e=o0(),s0e=PD("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function l0e(e){return T_({props:e,name:"MuiStack",defaultTheme:a0e})}function c0e(e,t){const n=$.Children.toArray(e).filter(Boolean);return n.reduce((r,i,o)=>(r.push(i),o<n.length-1&&r.push($.cloneElement(t,{key:`separator-${o}`})),r),[])}const u0e=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],f0e=({ownerState:e,theme:t})=>{let n=I({display:"flex",flexDirection:"column"},Ma({theme:t},Tp({values:e.direction,breakpoints:t.breakpoints.values}),r=>({flexDirection:r})));if(e.spacing){const r=CD(t),i=Object.keys(t.breakpoints.values).reduce((l,c)=>((typeof e.spacing=="object"&&e.spacing[c]!=null||typeof e.direction=="object"&&e.direction[c]!=null)&&(l[c]=!0),l),{}),o=Tp({values:e.direction,base:i}),a=Tp({values:e.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((l,c,u)=>{if(!o[l]){const d=c>0?o[u[c-1]]:"column";o[l]=d}}),n=Jr(n,Ma({theme:t},a,(l,c)=>e.useFlexGap?{gap:Jp(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${u0e(c?o[c]:e.direction)}`]:Jp(r,l)}}))}return n=pge(t.breakpoints,n),n};function d0e(e={}){const{createStyledComponent:t=s0e,useThemeProps:n=l0e,componentName:r="MuiStack"}=e,i=()=>ot({root:["root"]},l=>it(r,l),{}),o=t(f0e);return $.forwardRef(function(l,c){const u=n(l),f=E_(u),{component:d="div",direction:p="column",spacing:h=0,divider:g,children:v,className:m,useFlexGap:y=!1}=f,_=We(f,o0e),b={direction:p,spacing:h,useFlexGap:y},x=i();return G.jsx(o,I({as:d,ownerState:b,ref:c,className:je(x.root,m)},_,{children:g?c0e(v,g):v}))})}const p0e=["defaultProps","mixins","overrides","palette","props","styleOverrides"],h0e=["type","mode"];function fZ(e){const{defaultProps:t={},mixins:n={},overrides:r={},palette:i={},props:o={},styleOverrides:a={}}=e,s=We(e,p0e),l=I({},s,{components:{}});Object.keys(t).forEach(g=>{const v=l.components[g]||{};v.defaultProps=t[g],l.components[g]=v}),Object.keys(o).forEach(g=>{const v=l.components[g]||{};v.defaultProps=o[g],l.components[g]=v}),Object.keys(a).forEach(g=>{const v=l.components[g]||{};v.styleOverrides=a[g],l.components[g]=v}),Object.keys(r).forEach(g=>{const v=l.components[g]||{};v.styleOverrides=r[g],l.components[g]=v}),l.spacing=eZ(e.spacing);const c=KK(e.breakpoints||{}),u=l.spacing;l.mixins=I({gutters:(g={})=>I({paddingLeft:u(2),paddingRight:u(2)},g,{[c.up("sm")]:I({paddingLeft:u(3),paddingRight:u(3)},g[c.up("sm")])})},n);const{type:f,mode:d}=i,p=We(i,h0e),h=d||f||"light";return l.palette=I({text:{hint:h==="dark"?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.38)"},mode:h,type:h},p),l}function m0e(e,t){return I({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const g0e=["mode","contrastThreshold","tonalOffset"],sj={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:rv.white,default:rv.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},uO={text:{primary:rv.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:rv.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function lj(e,t,n,r){const i=r.light||r,o=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=Ol(e.main,i):t==="dark"&&(e.dark=Tl(e.main,o)))}function v0e(e="light"){return e==="dark"?{main:ip[200],light:ip[50],dark:ip[400]}:{main:ip[700],light:ip[400],dark:ip[800]}}function y0e(e="light"){return e==="dark"?{main:rp[200],light:rp[50],dark:rp[400]}:{main:rp[500],light:rp[300],dark:rp[700]}}function b0e(e="light"){return e==="dark"?{main:np[500],light:np[300],dark:np[700]}:{main:np[700],light:np[400],dark:np[800]}}function _0e(e="light"){return e==="dark"?{main:op[400],light:op[300],dark:op[700]}:{main:op[700],light:op[500],dark:op[900]}}function x0e(e="light"){return e==="dark"?{main:ap[400],light:ap[300],dark:ap[700]}:{main:ap[800],light:ap[500],dark:ap[900]}}function w0e(e="light"){return e==="dark"?{main:Mm[400],light:Mm[300],dark:Mm[700]}:{main:"#ed6c02",light:Mm[500],dark:Mm[900]}}function S0e(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=We(e,g0e),o=e.primary||v0e(t),a=e.secondary||y0e(t),s=e.error||b0e(t),l=e.info||_0e(t),c=e.success||x0e(t),u=e.warning||w0e(t);function f(g){return ID(g,uO.text.primary)>=n?uO.text.primary:sj.text.primary}const d=({color:g,name:v,mainShade:m=500,lightShade:y=300,darkShade:_=700})=>{if(g=I({},g),!g.main&&g[m]&&(g.main=g[m]),!g.hasOwnProperty("main"))throw new Error(Aa(11,v?` (${v})`:"",m));if(typeof g.main!="string")throw new Error(Aa(12,v?` (${v})`:"",JSON.stringify(g.main)));return lj(g,"light",y,r),lj(g,"dark",_,r),g.contrastText||(g.contrastText=f(g.main)),g},p={dark:uO,light:sj};return Jr(I({common:I({},rv),mode:t,primary:d({color:o,name:"primary"}),secondary:d({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:s,name:"error"}),warning:d({color:u,name:"warning"}),info:d({color:l,name:"info"}),success:d({color:c,name:"success"}),grey:mK,contrastThreshold:n,getContrastText:f,augmentColor:d,tonalOffset:r},p[t]),i)}const C0e=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function A0e(e){return Math.round(e*1e5)/1e5}const cj={textTransform:"uppercase"},uj='"Roboto", "Helvetica", "Arial", sans-serif';function mM(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:r=uj,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:a=400,fontWeightMedium:s=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:f}=n,d=We(n,C0e),p=i/14,h=f||(m=>`${m/c*p}rem`),g=(m,y,_,b,x)=>I({fontFamily:r,fontWeight:m,fontSize:h(y),lineHeight:_},r===uj?{letterSpacing:`${A0e(b/y)}em`}:{},x,u),v={h1:g(o,96,1.167,-1.5),h2:g(o,60,1.2,-.5),h3:g(a,48,1.167,0),h4:g(a,34,1.235,.25),h5:g(a,24,1.334,0),h6:g(s,20,1.6,.15),subtitle1:g(a,16,1.75,.15),subtitle2:g(s,14,1.57,.1),body1:g(a,16,1.5,.15),body2:g(a,14,1.43,.15),button:g(s,14,1.75,.4,cj),caption:g(a,12,1.66,.4),overline:g(a,12,2.66,1,cj),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Jr(I({htmlFontSize:c,pxToRem:h,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:a,fontWeightMedium:s,fontWeightBold:l},v),d,{clone:!1})}const P0e=.2,M0e=.14,E0e=.12;function Tr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${P0e})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${M0e})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${E0e})`].join(",")}const T0e=["none",Tr(0,2,1,-1,0,1,1,0,0,1,3,0),Tr(0,3,1,-2,0,2,2,0,0,1,5,0),Tr(0,3,3,-2,0,3,4,0,0,1,8,0),Tr(0,2,4,-1,0,4,5,0,0,1,10,0),Tr(0,3,5,-1,0,5,8,0,0,1,14,0),Tr(0,3,5,-1,0,6,10,0,0,1,18,0),Tr(0,4,5,-2,0,7,10,1,0,2,16,1),Tr(0,5,5,-3,0,8,10,1,0,3,14,2),Tr(0,5,6,-3,0,9,12,1,0,3,16,2),Tr(0,6,6,-3,0,10,14,1,0,4,18,3),Tr(0,6,7,-4,0,11,15,1,0,4,20,3),Tr(0,7,8,-4,0,12,17,2,0,5,22,4),Tr(0,7,8,-4,0,13,19,2,0,5,24,4),Tr(0,7,9,-4,0,14,21,2,0,5,26,4),Tr(0,8,9,-5,0,15,22,2,0,6,28,5),Tr(0,8,10,-5,0,16,24,2,0,6,30,5),Tr(0,8,11,-5,0,17,26,2,0,6,32,5),Tr(0,9,11,-5,0,18,28,2,0,7,34,6),Tr(0,9,12,-6,0,19,29,2,0,7,36,6),Tr(0,10,13,-6,0,20,31,3,0,8,38,7),Tr(0,10,13,-6,0,21,33,3,0,8,40,7),Tr(0,10,14,-6,0,22,35,3,0,8,42,7),Tr(0,11,14,-7,0,23,36,3,0,9,44,8),Tr(0,11,15,-7,0,24,38,3,0,9,46,8)],O0e=T0e,I0e=["duration","easing","delay"],BD={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},gM={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function fj(e){return`${Math.round(e)}ms`}function R0e(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function k0e(e){const t=I({},BD,e.easing),n=I({},gM,e.duration);return I({getAutoHeightDuration:R0e,create:(i=["all"],o={})=>{const{duration:a=n.standard,easing:s=t.easeInOut,delay:l=0}=o;return We(o,I0e),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof a=="string"?a:fj(a)} ${s} ${typeof l=="string"?l:fj(l)}`).join(",")}},e,{easing:t,duration:n})}const L0e={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},$0e=L0e,D0e=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function fd(e={},...t){const{mixins:n={},palette:r={},transitions:i={},typography:o={}}=e,a=We(e,D0e);if(e.vars)throw new Error(Aa(18));const s=S0e(r),l=o0(e);let c=Jr(l,{mixins:m0e(l.breakpoints,n),palette:s,shadows:O0e.slice(),typography:mM(s,o),transitions:k0e(i),zIndex:I({},$0e)});return c=Jr(c,a),c=t.reduce((u,f)=>Jr(u,f),c),c.unstable_sxConfig=I({},P_,a==null?void 0:a.unstable_sxConfig),c.unstable_sx=function(f){return i0({sx:f,theme:this})},c}function dZ(...e){return fd(...e)}function pZ(e,...t){return fd(Jr({unstable_strictMode:!0},e),...t)}let dj=!1;function hZ(e){return dj||(console.warn(["MUI: createStyles from @mui/material/styles is deprecated.","Please use @mui/styles/createStyles"].join(`
`)),dj=!0),e}function pj(e){return String(parseFloat(e)).length===String(e).length}function vM(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function ic(e){return parseFloat(e)}function B0e(e){return(t,n)=>{const r=vM(t);if(r===n)return t;let i=ic(t);r!=="px"&&(r==="em"||r==="rem")&&(i=ic(t)*ic(e));let o=i;if(n!=="px")if(n==="em")o=i/ic(e);else if(n==="rem")o=i/ic(e);else return t;return parseFloat(o.toFixed(5))+n}}function N0e({size:e,grid:t}){const n=e-e%t,r=n+t;return e-n<r-e?n:r}function F0e({lineHeight:e,pixels:t,htmlFontSize:n}){return t/(e*n)}function j0e({cssProperty:e,min:t,max:n,unit:r="rem",breakpoints:i=[600,900,1200],transform:o=null}){const a={[e]:`${t}${r}`},s=(n-t)/i[i.length-1];return i.forEach(l=>{let c=t+s*l;o!==null&&(c=o(c)),a[`@media (min-width:${l}px)`]={[e]:`${Math.round(c*1e4)/1e4}${r}`}}),a}function mZ(e,t={}){const{breakpoints:n=["sm","md","lg"],disableAlign:r=!1,factor:i=2,variants:o=["h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","caption","button","overline"]}=t,a=I({},e);a.typography=I({},a.typography);const s=a.typography,l=B0e(s.htmlFontSize),c=n.map(u=>a.breakpoints.values[u]);return o.forEach(u=>{const f=s[u],d=parseFloat(l(f.fontSize,"rem"));if(d<=1)return;const p=d,h=1+(p-1)/i;let{lineHeight:g}=f;if(!pj(g)&&!r)throw new Error(Aa(6));pj(g)||(g=parseFloat(l(g,"rem"))/parseFloat(d));let v=null;r||(v=m=>N0e({size:m,grid:F0e({pixels:4,lineHeight:g,htmlFontSize:s.htmlFontSize})})),s[u]=I({},f,j0e({cssProperty:"fontSize",min:h,max:p,unit:"rem",breakpoints:c,transform:v}))}),a}const z0e=fd(),yM=z0e;function ir(){const e=M_(yM);return e[Mc]||e}function st({props:e,name:t}){return T_({props:e,name:t,defaultTheme:yM,themeId:Mc})}const $o=e=>db(e)&&e!=="classes",I_=db,U0e=iZ({themeId:Mc,defaultTheme:yM,rootShouldForwardProp:$o}),Ie=U0e,V0e=["theme"];function ND(e){let{theme:t}=e,n=We(e,V0e);const r=t[Mc];return G.jsx(sZ,I({},n,{themeId:r?Mc:void 0,theme:r||t}))}function gZ(){throw new Error(Aa(14))}function vZ(){throw new Error(Aa(15))}function yZ(){throw new Error(Aa(16))}function FD(e){var t;return!!e[0].match(/(cssVarPrefix|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const H0e=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},u1=H0e,G0e=["colorSchemes","cssVarPrefix","shouldSkipGeneratingVar"],W0e=["palette"],q0e=[...Array(25)].map((e,t)=>{if(t===0)return;const n=u1(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function X0e(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function Qe(e,t,n){!e[t]&&n&&(e[t]=n)}function af(e,t){`${t}Channel`in e||(e[`${t}Channel`]=Iy(e[t],`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, e.g. "12 12 12") or undefined if you want to remove the channel token.`))}const Ul=e=>{try{return e()}catch{}},Y0e=(e="mui")=>Ive(e);function jD(e={},...t){var n,r,i,o,a,s;const{colorSchemes:l={},cssVarPrefix:c="mui",shouldSkipGeneratingVar:u=FD}=e,f=We(e,G0e),d=Y0e(c),p=fd(I({},f,l.light&&{palette:(n=l.light)==null?void 0:n.palette})),{palette:h}=p,g=We(p,W0e),{palette:v}=fd({palette:I({mode:"dark"},(r=l.dark)==null?void 0:r.palette)});let m=I({},g,{cssVarPrefix:c,getCssVar:d,colorSchemes:I({},l,{light:I({},l.light,{palette:h,opacity:I({inputPlaceholder:.42,inputUnderline:.42,switchTrackDisabled:.12,switchTrack:.38},(i=l.light)==null?void 0:i.opacity),overlays:((o=l.light)==null?void 0:o.overlays)||[]}),dark:I({},l.dark,{palette:v,opacity:I({inputPlaceholder:.5,inputUnderline:.7,switchTrackDisabled:.2,switchTrack:.3},(a=l.dark)==null?void 0:a.opacity),overlays:((s=l.dark)==null?void 0:s.overlays)||q0e})})});Object.keys(m.colorSchemes).forEach(x=>{const w=m.colorSchemes[x].palette,S=A=>{const C=A.split("-"),k=C[1],O=C[2];return d(A,w[k][O])};if(x==="light"?(Qe(w.common,"background","#fff"),Qe(w.common,"onBackground","#000")):(Qe(w.common,"background","#000"),Qe(w.common,"onBackground","#fff")),X0e(w,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),x==="light"){Qe(w.Alert,"errorColor",dr(w.error.light,.6)),Qe(w.Alert,"infoColor",dr(w.info.light,.6)),Qe(w.Alert,"successColor",dr(w.success.light,.6)),Qe(w.Alert,"warningColor",dr(w.warning.light,.6)),Qe(w.Alert,"errorFilledBg",S("palette-error-main")),Qe(w.Alert,"infoFilledBg",S("palette-info-main")),Qe(w.Alert,"successFilledBg",S("palette-success-main")),Qe(w.Alert,"warningFilledBg",S("palette-warning-main")),Qe(w.Alert,"errorFilledColor",Ul(()=>h.getContrastText(w.error.main))),Qe(w.Alert,"infoFilledColor",Ul(()=>h.getContrastText(w.info.main))),Qe(w.Alert,"successFilledColor",Ul(()=>h.getContrastText(w.success.main))),Qe(w.Alert,"warningFilledColor",Ul(()=>h.getContrastText(w.warning.main))),Qe(w.Alert,"errorStandardBg",pr(w.error.light,.9)),Qe(w.Alert,"infoStandardBg",pr(w.info.light,.9)),Qe(w.Alert,"successStandardBg",pr(w.success.light,.9)),Qe(w.Alert,"warningStandardBg",pr(w.warning.light,.9)),Qe(w.Alert,"errorIconColor",S("palette-error-main")),Qe(w.Alert,"infoIconColor",S("palette-info-main")),Qe(w.Alert,"successIconColor",S("palette-success-main")),Qe(w.Alert,"warningIconColor",S("palette-warning-main")),Qe(w.AppBar,"defaultBg",S("palette-grey-100")),Qe(w.Avatar,"defaultBg",S("palette-grey-400")),Qe(w.Button,"inheritContainedBg",S("palette-grey-300")),Qe(w.Button,"inheritContainedHoverBg",S("palette-grey-A100")),Qe(w.Chip,"defaultBorder",S("palette-grey-400")),Qe(w.Chip,"defaultAvatarColor",S("palette-grey-700")),Qe(w.Chip,"defaultIconColor",S("palette-grey-700")),Qe(w.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Qe(w.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Qe(w.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Qe(w.LinearProgress,"primaryBg",pr(w.primary.main,.62)),Qe(w.LinearProgress,"secondaryBg",pr(w.secondary.main,.62)),Qe(w.LinearProgress,"errorBg",pr(w.error.main,.62)),Qe(w.LinearProgress,"infoBg",pr(w.info.main,.62)),Qe(w.LinearProgress,"successBg",pr(w.success.main,.62)),Qe(w.LinearProgress,"warningBg",pr(w.warning.main,.62)),Qe(w.Skeleton,"bg",`rgba(${S("palette-text-primaryChannel")} / 0.11)`),Qe(w.Slider,"primaryTrack",pr(w.primary.main,.62)),Qe(w.Slider,"secondaryTrack",pr(w.secondary.main,.62)),Qe(w.Slider,"errorTrack",pr(w.error.main,.62)),Qe(w.Slider,"infoTrack",pr(w.info.main,.62)),Qe(w.Slider,"successTrack",pr(w.success.main,.62)),Qe(w.Slider,"warningTrack",pr(w.warning.main,.62));const A=Ry(w.background.default,.8);Qe(w.SnackbarContent,"bg",A),Qe(w.SnackbarContent,"color",Ul(()=>h.getContrastText(A))),Qe(w.SpeedDialAction,"fabHoverBg",Ry(w.background.paper,.15)),Qe(w.StepConnector,"border",S("palette-grey-400")),Qe(w.StepContent,"border",S("palette-grey-400")),Qe(w.Switch,"defaultColor",S("palette-common-white")),Qe(w.Switch,"defaultDisabledColor",S("palette-grey-100")),Qe(w.Switch,"primaryDisabledColor",pr(w.primary.main,.62)),Qe(w.Switch,"secondaryDisabledColor",pr(w.secondary.main,.62)),Qe(w.Switch,"errorDisabledColor",pr(w.error.main,.62)),Qe(w.Switch,"infoDisabledColor",pr(w.info.main,.62)),Qe(w.Switch,"successDisabledColor",pr(w.success.main,.62)),Qe(w.Switch,"warningDisabledColor",pr(w.warning.main,.62)),Qe(w.TableCell,"border",pr(bw(w.divider,1),.88)),Qe(w.Tooltip,"bg",bw(w.grey[700],.92))}else{Qe(w.Alert,"errorColor",pr(w.error.light,.6)),Qe(w.Alert,"infoColor",pr(w.info.light,.6)),Qe(w.Alert,"successColor",pr(w.success.light,.6)),Qe(w.Alert,"warningColor",pr(w.warning.light,.6)),Qe(w.Alert,"errorFilledBg",S("palette-error-dark")),Qe(w.Alert,"infoFilledBg",S("palette-info-dark")),Qe(w.Alert,"successFilledBg",S("palette-success-dark")),Qe(w.Alert,"warningFilledBg",S("palette-warning-dark")),Qe(w.Alert,"errorFilledColor",Ul(()=>v.getContrastText(w.error.dark))),Qe(w.Alert,"infoFilledColor",Ul(()=>v.getContrastText(w.info.dark))),Qe(w.Alert,"successFilledColor",Ul(()=>v.getContrastText(w.success.dark))),Qe(w.Alert,"warningFilledColor",Ul(()=>v.getContrastText(w.warning.dark))),Qe(w.Alert,"errorStandardBg",dr(w.error.light,.9)),Qe(w.Alert,"infoStandardBg",dr(w.info.light,.9)),Qe(w.Alert,"successStandardBg",dr(w.success.light,.9)),Qe(w.Alert,"warningStandardBg",dr(w.warning.light,.9)),Qe(w.Alert,"errorIconColor",S("palette-error-main")),Qe(w.Alert,"infoIconColor",S("palette-info-main")),Qe(w.Alert,"successIconColor",S("palette-success-main")),Qe(w.Alert,"warningIconColor",S("palette-warning-main")),Qe(w.AppBar,"defaultBg",S("palette-grey-900")),Qe(w.AppBar,"darkBg",S("palette-background-paper")),Qe(w.AppBar,"darkColor",S("palette-text-primary")),Qe(w.Avatar,"defaultBg",S("palette-grey-600")),Qe(w.Button,"inheritContainedBg",S("palette-grey-800")),Qe(w.Button,"inheritContainedHoverBg",S("palette-grey-700")),Qe(w.Chip,"defaultBorder",S("palette-grey-700")),Qe(w.Chip,"defaultAvatarColor",S("palette-grey-300")),Qe(w.Chip,"defaultIconColor",S("palette-grey-300")),Qe(w.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Qe(w.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Qe(w.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Qe(w.LinearProgress,"primaryBg",dr(w.primary.main,.5)),Qe(w.LinearProgress,"secondaryBg",dr(w.secondary.main,.5)),Qe(w.LinearProgress,"errorBg",dr(w.error.main,.5)),Qe(w.LinearProgress,"infoBg",dr(w.info.main,.5)),Qe(w.LinearProgress,"successBg",dr(w.success.main,.5)),Qe(w.LinearProgress,"warningBg",dr(w.warning.main,.5)),Qe(w.Skeleton,"bg",`rgba(${S("palette-text-primaryChannel")} / 0.13)`),Qe(w.Slider,"primaryTrack",dr(w.primary.main,.5)),Qe(w.Slider,"secondaryTrack",dr(w.secondary.main,.5)),Qe(w.Slider,"errorTrack",dr(w.error.main,.5)),Qe(w.Slider,"infoTrack",dr(w.info.main,.5)),Qe(w.Slider,"successTrack",dr(w.success.main,.5)),Qe(w.Slider,"warningTrack",dr(w.warning.main,.5));const A=Ry(w.background.default,.98);Qe(w.SnackbarContent,"bg",A),Qe(w.SnackbarContent,"color",Ul(()=>v.getContrastText(A))),Qe(w.SpeedDialAction,"fabHoverBg",Ry(w.background.paper,.15)),Qe(w.StepConnector,"border",S("palette-grey-600")),Qe(w.StepContent,"border",S("palette-grey-600")),Qe(w.Switch,"defaultColor",S("palette-grey-300")),Qe(w.Switch,"defaultDisabledColor",S("palette-grey-600")),Qe(w.Switch,"primaryDisabledColor",dr(w.primary.main,.55)),Qe(w.Switch,"secondaryDisabledColor",dr(w.secondary.main,.55)),Qe(w.Switch,"errorDisabledColor",dr(w.error.main,.55)),Qe(w.Switch,"infoDisabledColor",dr(w.info.main,.55)),Qe(w.Switch,"successDisabledColor",dr(w.success.main,.55)),Qe(w.Switch,"warningDisabledColor",dr(w.warning.main,.55)),Qe(w.TableCell,"border",dr(bw(w.divider,1),.68)),Qe(w.Tooltip,"bg",bw(w.grey[700],.92))}af(w.background,"default"),af(w.common,"background"),af(w.common,"onBackground"),af(w,"divider"),Object.keys(w).forEach(A=>{const C=w[A];C&&typeof C=="object"&&(C.main&&Qe(w[A],"mainChannel",Iy(C.main)),C.light&&Qe(w[A],"lightChannel",Iy(C.light)),C.dark&&Qe(w[A],"darkChannel",Iy(C.dark)),C.contrastText&&Qe(w[A],"contrastTextChannel",Iy(C.contrastText)),A==="text"&&(af(w[A],"primary"),af(w[A],"secondary")),A==="action"&&(C.active&&af(w[A],"active"),C.selected&&af(w[A],"selected")))})}),m=t.reduce((x,w)=>Jr(x,w),m);const y={prefix:c,shouldSkipGeneratingVar:u},{vars:_,generateCssVars:b}=Dve(m,y);return m.vars=_,m.generateCssVars=b,m.shouldSkipGeneratingVar=u,m.unstable_sxConfig=I({},P_,f==null?void 0:f.unstable_sxConfig),m.unstable_sx=function(w){return i0({sx:w,theme:this})},m}const K0e=e=>[...[...Array(24)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n+1}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],zD=K0e,Z0e=jD(),{CssVarsProvider:bZ,useColorScheme:_Z,getInitColorSchemeScript:xZ}=Ove({themeId:Mc,theme:Z0e,attribute:"data-mui-color-scheme",modeStorageKey:"mui-mode",colorSchemeStorageKey:"mui-color-scheme",defaultColorScheme:{light:"light",dark:"dark"},resolveTheme:e=>{const t=I({},e,{typography:mM(e.palette,e.typography)});return t.unstable_sx=function(r){return i0({sx:r,theme:this})},t},excludeVariablesFromRoot:zD});function wZ(){throw new Error(Aa(20))}const J0e=Object.freeze(Object.defineProperty({__proto__:null,Experimental_CssVarsProvider:bZ,StyledEngineProvider:XK,THEME_ID:Mc,ThemeProvider:ND,adaptV4Theme:fZ,alpha:Ot,createMuiTheme:dZ,createStyles:hZ,createTheme:fd,css:Ml,darken:Tl,decomposeColor:El,duration:gM,easing:BD,emphasize:sv,experimentalStyled:Ie,experimental_extendTheme:jD,experimental_sx:wZ,getContrastRatio:ID,getInitColorSchemeScript:xZ,getLuminance:c1,getOverlayAlpha:u1,hexToRgb:TD,hslToRgb:OD,keyframes:cs,lighten:Ol,makeStyles:gZ,private_createTypography:mM,private_excludeVariablesFromRoot:zD,recomposeColor:a0,responsiveFontSizes:mZ,rgbToHex:oZ,shouldSkipGeneratingVar:FD,styled:Ie,unstable_createMuiStrictModeTheme:pZ,unstable_getUnit:vM,unstable_toUnitless:ic,useColorScheme:_Z,useTheme:ir,useThemeProps:st,withStyles:vZ,withTheme:yZ},Symbol.toStringTag,{value:"Module"}));function SZ(e){return it("MuiSvgIcon",e)}const Q0e=at("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]),eye=Q0e,tye=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],nye=e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root",t!=="inherit"&&`color${De(t)}`,`fontSize${De(n)}`]};return ot(i,SZ,r)},rye=Ie("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${De(n.color)}`],t[`fontSize${De(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,r,i,o,a,s,l,c,u,f,d,p,h;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=e.typography)==null||(a=o.pxToRem)==null?void 0:a.call(o,20))||"1.25rem",medium:((s=e.typography)==null||(l=s.pxToRem)==null?void 0:l.call(s,24))||"1.5rem",large:((c=e.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[t.fontSize],color:(f=(d=(e.vars||e).palette)==null||(d=d[t.color])==null?void 0:d.main)!=null?f:{action:(p=(e.vars||e).palette)==null||(p=p.action)==null?void 0:p.active,disabled:(h=(e.vars||e).palette)==null||(h=h.action)==null?void 0:h.disabled,inherit:void 0}[t.color]}}),CZ=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:a="inherit",component:s="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:f,viewBox:d="0 0 24 24"}=r,p=We(r,tye),h=$.isValidElement(i)&&i.type==="svg",g=I({},r,{color:a,component:s,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:u,viewBox:d,hasSvgAsChild:h}),v={};u||(v.viewBox=d);const m=nye(g);return G.jsxs(rye,I({as:s,className:je(m.root,o),focusable:"false",color:c,"aria-hidden":f?void 0:!0,role:f?"img":void 0,ref:n},v,p,h&&i.props,{ownerState:g,children:[h?i.props.children:i,f?G.jsx("title",{children:f}):null]}))});CZ.muiName="SvgIcon";const jC=CZ;function fr(e,t){function n(r,i){return G.jsx(jC,I({"data-testid":`${t}Icon`,ref:i},r,{children:e}))}return n.muiName=jC.muiName,$.memo($.forwardRef(n))}const AZ={configure:e=>{dD.configure(e)}},iye=Object.freeze(Object.defineProperty({__proto__:null,capitalize:De,createChainedFunction:o1,createSvgIcon:fr,debounce:Eh,deprecatedPropType:SK,isMuiElement:xc,ownerDocument:er,ownerWindow:so,requirePropFactory:CK,setRef:iv,unstable_ClassNameGenerator:AZ,unstable_useEnhancedEffect:vi,unstable_useId:zs,unsupportedProp:AK,useControlled:Wo,useEventCallback:Ar,useForkRef:En,useIsFocusVisible:Th},Symbol.toStringTag,{value:"Module"}));function w5(e,t){return w5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},w5(e,t)}function PZ(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,w5(e,t)}const hj={disabled:!1},zC=Be.createContext(null);var oye=function(t){return t.scrollTop},ky="unmounted",sp="exited",lp="entering",Em="entered",S5="exiting",Wu=function(e){PZ(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var a=i,s=a&&!a.isMounting?r.enter:r.appear,l;return o.appearStatus=null,r.in?s?(l=sp,o.appearStatus=lp):l=Em:r.unmountOnExit||r.mountOnEnter?l=ky:l=sp,o.state={status:l},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var a=i.in;return a&&o.status===ky?{status:sp}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var a=this.state.status;this.props.in?a!==lp&&a!==Em&&(o=lp):(a===lp||a===Em)&&(o=S5)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,a,s;return o=a=s=i,i!=null&&typeof i!="number"&&(o=i.exit,a=i.enter,s=i.appear!==void 0?i.appear:a),{exit:o,enter:a,appear:s}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===lp){if(this.props.unmountOnExit||this.props.mountOnEnter){var a=this.props.nodeRef?this.props.nodeRef.current:dw.findDOMNode(this);a&&oye(a)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===sp&&this.setState({status:ky})},n.performEnter=function(i){var o=this,a=this.props.enter,s=this.context?this.context.isMounting:i,l=this.props.nodeRef?[s]:[dw.findDOMNode(this),s],c=l[0],u=l[1],f=this.getTimeouts(),d=s?f.appear:f.enter;if(!i&&!a||hj.disabled){this.safeSetState({status:Em},function(){o.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:lp},function(){o.props.onEntering(c,u),o.onTransitionEnd(d,function(){o.safeSetState({status:Em},function(){o.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,o=this.props.exit,a=this.getTimeouts(),s=this.props.nodeRef?void 0:dw.findDOMNode(this);if(!o||hj.disabled){this.safeSetState({status:sp},function(){i.props.onExited(s)});return}this.props.onExit(s),this.safeSetState({status:S5},function(){i.props.onExiting(s),i.onTransitionEnd(a.exit,function(){i.safeSetState({status:sp},function(){i.props.onExited(s)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,a=!0;return this.nextCallback=function(s){a&&(a=!1,o.nextCallback=null,i(s))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var a=this.props.nodeRef?this.props.nodeRef.current:dw.findDOMNode(this),s=i==null&&!this.props.addEndListener;if(!a||s){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[a,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===ky)return null;var o=this.props,a=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var s=We(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Be.createElement(zC.Provider,{value:null},typeof a=="function"?a(i,s):Be.cloneElement(Be.Children.only(a),s))},t}(Be.Component);Wu.contextType=zC;Wu.propTypes={};function Kh(){}Wu.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Kh,onEntering:Kh,onEntered:Kh,onExit:Kh,onExiting:Kh,onExited:Kh};Wu.UNMOUNTED=ky;Wu.EXITED=sp;Wu.ENTERING=lp;Wu.ENTERED=Em;Wu.EXITING=S5;const R_=Wu;function aye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UD(e,t){var n=function(o){return t&&$.isValidElement(o)?t(o):o},r=Object.create(null);return e&&$.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function sye(e,t){e=e||{},t=t||{};function n(u){return u in t?t[u]:e[u]}var r=Object.create(null),i=[];for(var o in e)o in t?i.length&&(r[o]=i,i=[]):i.push(o);var a,s={};for(var l in t){if(r[l])for(a=0;a<r[l].length;a++){var c=r[l][a];s[r[l][a]]=n(c)}s[l]=n(l)}for(a=0;a<i.length;a++)s[i[a]]=n(i[a]);return s}function xp(e,t,n){return n[t]!=null?n[t]:e.props[t]}function lye(e,t){return UD(e.children,function(n){return $.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:xp(n,"appear",e),enter:xp(n,"enter",e),exit:xp(n,"exit",e)})})}function cye(e,t,n){var r=UD(e.children),i=sye(t,r);return Object.keys(i).forEach(function(o){var a=i[o];if($.isValidElement(a)){var s=o in t,l=o in r,c=t[o],u=$.isValidElement(c)&&!c.props.in;l&&(!s||u)?i[o]=$.cloneElement(a,{onExited:n.bind(null,a),in:!0,exit:xp(a,"exit",e),enter:xp(a,"enter",e)}):!l&&s&&!u?i[o]=$.cloneElement(a,{in:!1}):l&&s&&$.isValidElement(c)&&(i[o]=$.cloneElement(a,{onExited:n.bind(null,a),in:c.props.in,exit:xp(a,"exit",e),enter:xp(a,"enter",e)}))}}),i}var uye=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},fye={component:"div",childFactory:function(t){return t}},VD=function(e){PZ(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var a=o.handleExited.bind(aye(o));return o.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},o}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var a=o.children,s=o.handleExited,l=o.firstRender;return{children:l?lye(i,s):cye(i,a,s),firstRender:!1}},n.handleExited=function(i,o){var a=UD(this.props.children);i.key in a||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(s){var l=I({},s.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,o=i.component,a=i.childFactory,s=We(i,["component","childFactory"]),l=this.state.contextValue,c=uye(this.state.children).map(a);return delete s.appear,delete s.enter,delete s.exit,o===null?Be.createElement(zC.Provider,{value:l},c):Be.createElement(zC.Provider,{value:l},Be.createElement(o,s,c))},t}(Be.Component);VD.propTypes={};VD.defaultProps=fye;const dye=VD,bM=e=>e.scrollTop;function Il(e,t){var n,r;const{timeout:i,easing:o,style:a={}}=e;return{duration:(n=a.transitionDuration)!=null?n:typeof i=="number"?i:i[t.mode]||0,easing:(r=a.transitionTimingFunction)!=null?r:typeof o=="object"?o[t.mode]:o,delay:a.transitionDelay}}function MZ(e){return it("MuiCollapse",e)}const pye=at("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]),hye=pye,mye=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],gye=e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return ot(r,MZ,n)},vye=Ie("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.state==="entered"&&t.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>I({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&I({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),yye=Ie("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>I({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),bye=Ie("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>I({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),EZ=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiCollapse"}),{addEndListener:i,children:o,className:a,collapsedSize:s="0px",component:l,easing:c,in:u,onEnter:f,onEntered:d,onEntering:p,onExit:h,onExited:g,onExiting:v,orientation:m="vertical",style:y,timeout:_=gM.standard,TransitionComponent:b=R_}=r,x=We(r,mye),w=I({},r,{orientation:m,collapsedSize:s}),S=gye(w),A=ir(),C=$.useRef(),k=$.useRef(null),O=$.useRef(),T=typeof s=="number"?`${s}px`:s,B=m==="horizontal",R=B?"width":"height";$.useEffect(()=>()=>{clearTimeout(C.current)},[]);const P=$.useRef(null),D=En(n,P),z=Y=>he=>{if(Y){const ae=P.current;he===void 0?Y(ae):Y(ae,he)}},N=()=>k.current?k.current[B?"clientWidth":"clientHeight"]:0,H=z((Y,he)=>{k.current&&B&&(k.current.style.position="absolute"),Y.style[R]=T,f&&f(Y,he)}),J=z((Y,he)=>{const ae=N();k.current&&B&&(k.current.style.position="");const{duration:ye,easing:re}=Il({style:y,timeout:_,easing:c},{mode:"enter"});if(_==="auto"){const te=A.transitions.getAutoHeightDuration(ae);Y.style.transitionDuration=`${te}ms`,O.current=te}else Y.style.transitionDuration=typeof ye=="string"?ye:`${ye}ms`;Y.style[R]=`${ae}px`,Y.style.transitionTimingFunction=re,p&&p(Y,he)}),ne=z((Y,he)=>{Y.style[R]="auto",d&&d(Y,he)}),oe=z(Y=>{Y.style[R]=`${N()}px`,h&&h(Y)}),Z=z(g),ce=z(Y=>{const he=N(),{duration:ae,easing:ye}=Il({style:y,timeout:_,easing:c},{mode:"exit"});if(_==="auto"){const re=A.transitions.getAutoHeightDuration(he);Y.style.transitionDuration=`${re}ms`,O.current=re}else Y.style.transitionDuration=typeof ae=="string"?ae:`${ae}ms`;Y.style[R]=T,Y.style.transitionTimingFunction=ye,v&&v(Y)}),se=Y=>{_==="auto"&&(C.current=setTimeout(Y,O.current||0)),i&&i(P.current,Y)};return G.jsx(b,I({in:u,onEnter:H,onEntered:ne,onEntering:J,onExit:oe,onExited:Z,onExiting:ce,addEndListener:se,nodeRef:P,timeout:_==="auto"?null:_},x,{children:(Y,he)=>G.jsx(vye,I({as:l,className:je(S.root,a,{entered:S.entered,exited:!u&&T==="0px"&&S.hidden}[Y]),style:I({[B?"minWidth":"minHeight"]:T},y),ownerState:I({},w,{state:Y}),ref:D},he,{children:G.jsx(yye,{ownerState:I({},w,{state:Y}),className:S.wrapper,ref:k,children:G.jsx(bye,{ownerState:I({},w,{state:Y}),className:S.wrapperInner,children:o})})}))}))});EZ.muiSupportAuto=!0;const _M=EZ;function TZ(e){return it("MuiPaper",e)}const _ye=at("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]),xye=_ye,wye=["className","component","elevation","square","variant"],Sye=e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return ot(o,TZ,i)},Cye=Ie("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return I({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&I({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Ot("#fff",u1(t.elevation))}, ${Ot("#fff",u1(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),Aye=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiPaper"}),{className:i,component:o="div",elevation:a=1,square:s=!1,variant:l="elevation"}=r,c=We(r,wye),u=I({},r,{component:o,elevation:a,square:s,variant:l}),f=Sye(u);return G.jsx(Cye,I({as:o,ownerState:u,className:je(f.root,i),ref:n},c))}),us=Aye,Pye=$.createContext({}),OZ=Pye;function IZ(e){return it("MuiAccordion",e)}const Mye=at("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),Ly=Mye,Eye=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],Tye=e=>{const{classes:t,square:n,expanded:r,disabled:i,disableGutters:o}=e;return ot({root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]},IZ,t)},Oye=Ie(us,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Ly.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&:before":{display:"none"}},[`&.${Ly.expanded}`]:{"&:before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&:before":{display:"none"}}},[`&.${Ly.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e,ownerState:t})=>I({},!t.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!t.disableGutters&&{[`&.${Ly.expanded}`]:{margin:"16px 0"}})),Iye=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:a=!1,disabled:s=!1,disableGutters:l=!1,expanded:c,onChange:u,square:f=!1,TransitionComponent:d=_M,TransitionProps:p}=r,h=We(r,Eye),[g,v]=Wo({controlled:c,default:a,name:"Accordion",state:"expanded"}),m=$.useCallback(S=>{v(!g),u&&u(S,!g)},[g,u,v]),[y,..._]=$.Children.toArray(i),b=$.useMemo(()=>({expanded:g,disabled:s,disableGutters:l,toggle:m}),[g,s,l,m]),x=I({},r,{square:f,disabled:s,disableGutters:l,expanded:g}),w=Tye(x);return G.jsxs(Oye,I({className:je(w.root,o),ref:n,ownerState:x,square:f},h,{children:[G.jsx(OZ.Provider,{value:b,children:y}),G.jsx(d,I({in:g,timeout:"auto"},p,{children:G.jsx("div",{"aria-labelledby":y.props.id,id:y.props["aria-controls"],role:"region",className:w.region,children:_})}))]}))}),Rye=Iye;function RZ(e){return it("MuiAccordionActions",e)}const kye=at("MuiAccordionActions",["root","spacing"]),Lye=kye,$ye=["className","disableSpacing"],Dye=e=>{const{classes:t,disableSpacing:n}=e;return ot({root:["root",!n&&"spacing"]},RZ,t)},Bye=Ie("div",{name:"MuiAccordionActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>I({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),Nye=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiAccordionActions"}),{className:i,disableSpacing:o=!1}=r,a=We(r,$ye),s=I({},r,{disableSpacing:o}),l=Dye(s);return G.jsx(Bye,I({className:je(l.root,i),ref:n,ownerState:s},a))}),Fye=Nye;function kZ(e){return it("MuiAccordionDetails",e)}const jye=at("MuiAccordionDetails",["root"]),zye=jye,Uye=["className"],Vye=e=>{const{classes:t}=e;return ot({root:["root"]},kZ,t)},Hye=Ie("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),Gye=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiAccordionDetails"}),{className:i}=r,o=We(r,Uye),a=r,s=Vye(a);return G.jsx(Hye,I({className:je(s.root,i),ref:n,ownerState:a},o))}),Wye=Gye;function qye(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:a,in:s,onExited:l,timeout:c}=e,[u,f]=$.useState(!1),d=je(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),p={width:a,height:a,top:-(a/2)+o,left:-(a/2)+i},h=je(n.child,u&&n.childLeaving,r&&n.childPulsate);return!s&&!u&&f(!0),$.useEffect(()=>{if(!s&&l!=null){const g=setTimeout(l,c);return()=>{clearTimeout(g)}}},[l,s,c]),G.jsx("span",{className:d,style:p,children:G.jsx("span",{className:h})})}function Xye(e){return it("MuiTouchRipple",e)}const Yye=at("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),za=Yye,Kye=["center","classes","className"];let xM=e=>e,mj,gj,vj,yj;const C5=550,Zye=80,Jye=cs(mj||(mj=xM`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Qye=cs(gj||(gj=xM`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),ebe=cs(vj||(vj=xM`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),tbe=Ie("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),nbe=Ie(qye,{name:"MuiTouchRipple",slot:"Ripple"})(yj||(yj=xM`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),za.rippleVisible,Jye,C5,({theme:e})=>e.transitions.easing.easeInOut,za.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,za.child,za.childLeaving,Qye,C5,({theme:e})=>e.transitions.easing.easeInOut,za.childPulsate,ebe,({theme:e})=>e.transitions.easing.easeInOut),rbe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:a}=r,s=We(r,Kye),[l,c]=$.useState([]),u=$.useRef(0),f=$.useRef(null);$.useEffect(()=>{f.current&&(f.current(),f.current=null)},[l]);const d=$.useRef(!1),p=$.useRef(0),h=$.useRef(null),g=$.useRef(null);$.useEffect(()=>()=>{p.current&&clearTimeout(p.current)},[]);const v=$.useCallback(b=>{const{pulsate:x,rippleX:w,rippleY:S,rippleSize:A,cb:C}=b;c(k=>[...k,G.jsx(nbe,{classes:{ripple:je(o.ripple,za.ripple),rippleVisible:je(o.rippleVisible,za.rippleVisible),ripplePulsate:je(o.ripplePulsate,za.ripplePulsate),child:je(o.child,za.child),childLeaving:je(o.childLeaving,za.childLeaving),childPulsate:je(o.childPulsate,za.childPulsate)},timeout:C5,pulsate:x,rippleX:w,rippleY:S,rippleSize:A},u.current)]),u.current+=1,f.current=C},[o]),m=$.useCallback((b={},x={},w=()=>{})=>{const{pulsate:S=!1,center:A=i||x.pulsate,fakeElement:C=!1}=x;if((b==null?void 0:b.type)==="mousedown"&&d.current){d.current=!1;return}(b==null?void 0:b.type)==="touchstart"&&(d.current=!0);const k=C?null:g.current,O=k?k.getBoundingClientRect():{width:0,height:0,left:0,top:0};let T,B,R;if(A||b===void 0||b.clientX===0&&b.clientY===0||!b.clientX&&!b.touches)T=Math.round(O.width/2),B=Math.round(O.height/2);else{const{clientX:P,clientY:D}=b.touches&&b.touches.length>0?b.touches[0]:b;T=Math.round(P-O.left),B=Math.round(D-O.top)}if(A)R=Math.sqrt((2*O.width**2+O.height**2)/3),R%2===0&&(R+=1);else{const P=Math.max(Math.abs((k?k.clientWidth:0)-T),T)*2+2,D=Math.max(Math.abs((k?k.clientHeight:0)-B),B)*2+2;R=Math.sqrt(P**2+D**2)}b!=null&&b.touches?h.current===null&&(h.current=()=>{v({pulsate:S,rippleX:T,rippleY:B,rippleSize:R,cb:w})},p.current=setTimeout(()=>{h.current&&(h.current(),h.current=null)},Zye)):v({pulsate:S,rippleX:T,rippleY:B,rippleSize:R,cb:w})},[i,v]),y=$.useCallback(()=>{m({},{pulsate:!0})},[m]),_=$.useCallback((b,x)=>{if(clearTimeout(p.current),(b==null?void 0:b.type)==="touchend"&&h.current){h.current(),h.current=null,p.current=setTimeout(()=>{_(b,x)});return}h.current=null,c(w=>w.length>0?w.slice(1):w),f.current=x},[]);return $.useImperativeHandle(n,()=>({pulsate:y,start:m,stop:_}),[y,m,_]),G.jsx(tbe,I({className:je(za.root,o.root,a),ref:g},s,{children:G.jsx(dye,{component:null,exit:!0,children:l})}))}),ibe=rbe;function LZ(e){return it("MuiButtonBase",e)}const obe=at("MuiButtonBase",["root","disabled","focusVisible"]),$Z=obe,abe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],sbe=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,a=ot({root:["root",t&&"disabled",n&&"focusVisible"]},LZ,i);return n&&r&&(a.root+=` ${r}`),a},lbe=Ie("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${$Z.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),cbe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:a,className:s,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:f=!1,focusRipple:d=!1,LinkComponent:p="a",onBlur:h,onClick:g,onContextMenu:v,onDragLeave:m,onFocus:y,onFocusVisible:_,onKeyDown:b,onKeyUp:x,onMouseDown:w,onMouseLeave:S,onMouseUp:A,onTouchEnd:C,onTouchMove:k,onTouchStart:O,tabIndex:T=0,TouchRippleProps:B,touchRippleRef:R,type:P}=r,D=We(r,abe),z=$.useRef(null),N=$.useRef(null),H=En(N,R),{isFocusVisibleRef:J,onFocus:ne,onBlur:oe,ref:Z}=Th(),[ce,se]=$.useState(!1);c&&ce&&se(!1),$.useImperativeHandle(i,()=>({focusVisible:()=>{se(!0),z.current.focus()}}),[]);const[Y,he]=$.useState(!1);$.useEffect(()=>{he(!0)},[]);const ae=Y&&!u&&!c;$.useEffect(()=>{ce&&d&&!u&&Y&&N.current.pulsate()},[u,d,ce,Y]);function ye(L,q,me=f){return Ar(Te=>(q&&q(Te),!me&&N.current&&N.current[L](Te),!0))}const re=ye("start",w),te=ye("stop",v),le=ye("stop",m),de=ye("stop",A),_e=ye("stop",L=>{ce&&L.preventDefault(),S&&S(L)}),be=ye("start",O),ke=ye("stop",C),W=ye("stop",k),ee=ye("stop",L=>{oe(L),J.current===!1&&se(!1),h&&h(L)},!1),Ee=Ar(L=>{z.current||(z.current=L.currentTarget),ne(L),J.current===!0&&(se(!0),_&&_(L)),y&&y(L)}),ge=()=>{const L=z.current;return l&&l!=="button"&&!(L.tagName==="A"&&L.href)},pe=$.useRef(!1),ve=Ar(L=>{d&&!pe.current&&ce&&N.current&&L.key===" "&&(pe.current=!0,N.current.stop(L,()=>{N.current.start(L)})),L.target===L.currentTarget&&ge()&&L.key===" "&&L.preventDefault(),b&&b(L),L.target===L.currentTarget&&ge()&&L.key==="Enter"&&!c&&(L.preventDefault(),g&&g(L))}),$e=Ar(L=>{d&&L.key===" "&&N.current&&ce&&!L.defaultPrevented&&(pe.current=!1,N.current.stop(L,()=>{N.current.pulsate(L)})),x&&x(L),g&&L.target===L.currentTarget&&ge()&&L.key===" "&&!L.defaultPrevented&&g(L)});let Ne=l;Ne==="button"&&(D.href||D.to)&&(Ne=p);const Ae={};Ne==="button"?(Ae.type=P===void 0?"button":P,Ae.disabled=c):(!D.href&&!D.to&&(Ae.role="button"),c&&(Ae["aria-disabled"]=c));const Oe=En(n,Z,z),j=I({},r,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:f,focusRipple:d,tabIndex:T,focusVisible:ce}),M=sbe(j);return G.jsxs(lbe,I({as:Ne,className:je(M.root,s),ownerState:j,onBlur:ee,onClick:g,onContextMenu:te,onFocus:Ee,onKeyDown:ve,onKeyUp:$e,onMouseDown:re,onMouseLeave:_e,onMouseUp:de,onDragLeave:le,onTouchEnd:ke,onTouchMove:W,onTouchStart:be,ref:Oe,tabIndex:c?-1:T,type:P},Ae,D,{children:[a,ae?G.jsx(ibe,I({ref:H,center:o},B)):null]}))}),yi=cbe;function DZ(e){return it("MuiAccordionSummary",e)}const ube=at("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),wp=ube,fbe=["children","className","expandIcon","focusVisibleClassName","onClick"],dbe=e=>{const{classes:t,expanded:n,disabled:r,disableGutters:i}=e;return ot({root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},DZ,t)},pbe=Ie(yi,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{const n={duration:e.transitions.duration.shortest};return I({display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],n),[`&.${wp.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${wp.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${wp.disabled})`]:{cursor:"pointer"}},!t.disableGutters&&{[`&.${wp.expanded}`]:{minHeight:64}})}),hbe=Ie("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>I({display:"flex",flexGrow:1,margin:"12px 0"},!t.disableGutters&&{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${wp.expanded}`]:{margin:"20px 0"}})),mbe=Ie("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${wp.expanded}`]:{transform:"rotate(180deg)"}})),gbe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:a,focusVisibleClassName:s,onClick:l}=r,c=We(r,fbe),{disabled:u=!1,disableGutters:f,expanded:d,toggle:p}=$.useContext(OZ),h=m=>{p&&p(m),l&&l(m)},g=I({},r,{expanded:d,disabled:u,disableGutters:f}),v=dbe(g);return G.jsxs(pbe,I({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":d,className:je(v.root,o),focusVisibleClassName:je(v.focusVisible,s),onClick:h,ref:n,ownerState:g},c,{children:[G.jsx(hbe,{className:v.content,ownerState:g,children:i}),a&&G.jsx(mbe,{className:v.expandIconWrapper,ownerState:g,children:a})]}))}),vbe=gbe;function BZ(e){return it("MuiAlert",e)}const ybe=at("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),A5=ybe;function NZ(e){return it("MuiIconButton",e)}const bbe=at("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),FZ=bbe,_be=["edge","children","className","color","disabled","disableFocusRipple","size"],xbe=e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,a={root:["root",n&&"disabled",r!=="default"&&`color${De(r)}`,i&&`edge${De(i)}`,`size${De(o)}`]};return ot(a,NZ,t)},wbe=Ie(yi,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${De(n.color)}`],n.edge&&t[`edge${De(n.edge)}`],t[`size${De(n.size)}`]]}})(({theme:e,ownerState:t})=>I({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const r=(n=(e.vars||e).palette)==null?void 0:n[t.color];return I({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&I({color:r==null?void 0:r.main},!t.disableRipple&&{"&:hover":I({},r&&{backgroundColor:e.vars?`rgba(${r.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${FZ.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),Sbe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiIconButton"}),{edge:i=!1,children:o,className:a,color:s="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=r,f=We(r,_be),d=I({},r,{edge:i,color:s,disabled:l,disableFocusRipple:c,size:u}),p=xbe(d);return G.jsx(wbe,I({className:je(p.root,a),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,ownerState:d},f,{children:o}))}),Eo=Sbe,Cbe=fr(G.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),Abe=fr(G.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),Pbe=fr(G.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Mbe=fr(G.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),jZ=fr(G.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Ebe=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],Tbe=e=>{const{variant:t,color:n,severity:r,classes:i}=e,o={root:["root",`${t}${De(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return ot(o,BZ,i)},Obe=Ie(us,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${De(n.color||n.severity)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?Tl:Ol,r=e.palette.mode==="light"?Ol:Tl,i=t.color||t.severity;return I({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},i&&t.variant==="standard"&&{color:e.vars?e.vars.palette.Alert[`${i}Color`]:n(e.palette[i].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${i}StandardBg`]:r(e.palette[i].light,.9),[`& .${A5.icon}`]:e.vars?{color:e.vars.palette.Alert[`${i}IconColor`]}:{color:e.palette[i].main}},i&&t.variant==="outlined"&&{color:e.vars?e.vars.palette.Alert[`${i}Color`]:n(e.palette[i].light,.6),border:`1px solid ${(e.vars||e).palette[i].light}`,[`& .${A5.icon}`]:e.vars?{color:e.vars.palette.Alert[`${i}IconColor`]}:{color:e.palette[i].main}},i&&t.variant==="filled"&&I({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${i}FilledColor`],backgroundColor:e.vars.palette.Alert[`${i}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[i].dark:e.palette[i].main,color:e.palette.getContrastText(e.palette[i].main)}))}),Ibe=Ie("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),Rbe=Ie("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),bj=Ie("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),_j={success:G.jsx(Cbe,{fontSize:"inherit"}),warning:G.jsx(Abe,{fontSize:"inherit"}),error:G.jsx(Pbe,{fontSize:"inherit"}),info:G.jsx(Mbe,{fontSize:"inherit"})},kbe=$.forwardRef(function(t,n){var r,i,o,a,s,l;const c=st({props:t,name:"MuiAlert"}),{action:u,children:f,className:d,closeText:p="Close",color:h,components:g={},componentsProps:v={},icon:m,iconMapping:y=_j,onClose:_,role:b="alert",severity:x="success",slotProps:w={},slots:S={},variant:A="standard"}=c,C=We(c,Ebe),k=I({},c,{color:h,severity:x,variant:A}),O=Tbe(k),T=(r=(i=S.closeButton)!=null?i:g.CloseButton)!=null?r:Eo,B=(o=(a=S.closeIcon)!=null?a:g.CloseIcon)!=null?o:jZ,R=(s=w.closeButton)!=null?s:v.closeButton,P=(l=w.closeIcon)!=null?l:v.closeIcon;return G.jsxs(Obe,I({role:b,elevation:0,ownerState:k,className:je(O.root,d),ref:n},C,{children:[m!==!1?G.jsx(Ibe,{ownerState:k,className:O.icon,children:m||y[x]||_j[x]}):null,G.jsx(Rbe,{ownerState:k,className:O.message,children:f}),u!=null?G.jsx(bj,{ownerState:k,className:O.action,children:u}):null,u==null&&_?G.jsx(bj,{ownerState:k,className:O.action,children:G.jsx(T,I({size:"small","aria-label":p,title:p,color:"inherit",onClick:_},R,{children:G.jsx(B,I({fontSize:"small"},P))}))}):null]}))}),Lbe=kbe;function zZ(e){return it("MuiTypography",e)}const $be=at("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Dbe=$be,Bbe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Nbe=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:a}=e,s={root:["root",o,e.align!=="inherit"&&`align${De(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return ot(s,zZ,a)},Fbe=Ie("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${De(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>I({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),xj={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},jbe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},zbe=e=>jbe[e]||e,Ube=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTypography"}),i=zbe(r.color),o=E_(I({},r,{color:i})),{align:a="inherit",className:s,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:f=!1,variant:d="body1",variantMapping:p=xj}=o,h=We(o,Bbe),g=I({},o,{align:a,color:i,className:s,component:l,gutterBottom:c,noWrap:u,paragraph:f,variant:d,variantMapping:p}),v=l||(f?"p":p[d]||xj[d])||"span",m=Nbe(g);return G.jsx(Fbe,I({as:v,ref:n,ownerState:g,className:je(m.root,s)},h))}),jn=Ube;function UZ(e){return it("MuiAlertTitle",e)}const Vbe=at("MuiAlertTitle",["root"]),Hbe=Vbe,Gbe=["className"],Wbe=e=>{const{classes:t}=e;return ot({root:["root"]},UZ,t)},qbe=Ie(jn,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,marginTop:-2})),Xbe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiAlertTitle"}),{className:i}=r,o=We(r,Gbe),a=r,s=Wbe(a);return G.jsx(qbe,I({gutterBottom:!0,component:"div",ownerState:a,ref:n,className:je(s.root,i)},o))}),Ybe=Xbe;function VZ(e){return it("MuiAppBar",e)}const Kbe=at("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]),Zbe=Kbe,Jbe=["className","color","enableColorOnDark","position"],Qbe=e=>{const{color:t,position:n,classes:r}=e,i={root:["root",`color${De(t)}`,`position${De(n)}`]};return ot(i,VZ,r)},_w=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,e1e=Ie(us,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${De(n.position)}`],t[`color${De(n.color)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900];return I({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},t.position==="fixed"&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},t.position==="absolute"&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="sticky"&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="static"&&{position:"static"},t.position==="relative"&&{position:"relative"},!e.vars&&I({},t.color==="default"&&{backgroundColor:n,color:e.palette.getContrastText(n)},t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},t.color==="inherit"&&{color:"inherit"},e.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:null,color:null},t.color==="transparent"&&I({backgroundColor:"transparent",color:"inherit"},e.palette.mode==="dark"&&{backgroundImage:"none"})),e.vars&&I({},t.color==="default"&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette.AppBar.defaultBg:_w(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?e.vars.palette.text.primary:_w(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette[t.color].main:_w(e.vars.palette.AppBar.darkBg,e.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?e.vars.palette[t.color].contrastText:_w(e.vars.palette.AppBar.darkColor,e.vars.palette[t.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:t.color==="inherit"?"inherit":"var(--AppBar-color)"},t.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),t1e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:a=!1,position:s="fixed"}=r,l=We(r,Jbe),c=I({},r,{color:o,position:s,enableColorOnDark:a}),u=Qbe(c);return G.jsx(e1e,I({square:!0,component:"header",ownerState:c,elevation:4,className:je(u.root,i,s==="fixed"&&"mui-fixed"),ref:n},l))}),n1e=t1e;function wl(e){return typeof e=="string"}function $y(e,t,n){return e===void 0||wl(e)?t:I({},t,{ownerState:I({},t.ownerState,n)})}function r1e(e,t,n=(r,i)=>r===i){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}const i1e={disableDefaultClasses:!1},o1e=$.createContext(i1e);function a1e(e){const{disableDefaultClasses:t}=$.useContext(o1e);return n=>t?"":e(n)}function Op(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function s1e(e,t,n){return typeof e=="function"?e(t,n):e}function wj(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function l1e(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const p=je(i==null?void 0:i.className,r==null?void 0:r.className,o,n==null?void 0:n.className),h=I({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),g=I({},n,i,r);return p.length>0&&(g.className=p),Object.keys(h).length>0&&(g.style=h),{props:g,internalRef:void 0}}const a=Op(I({},i,r)),s=wj(r),l=wj(i),c=t(a),u=je(c==null?void 0:c.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),f=I({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),d=I({},c,n,l,s);return u.length>0&&(d.className=u),Object.keys(f).length>0&&(d.style=f),{props:d,internalRef:c.ref}}const c1e=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Nr(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,a=We(e,c1e),s=o?{}:s1e(r,i),{props:l,internalRef:c}=l1e(I({},a,{externalSlotProps:s})),u=En(c,s==null?void 0:s.ref,(t=e.additionalProps)==null?void 0:t.ref);return $y(n,I({},l,{ref:u}),i)}function u1e(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,o=uD({badgeContent:t,max:r});let a=n;n===!1&&t===0&&!i&&(a=!0);const{badgeContent:s,max:l=r}=a?o:e,c=s&&Number(s)>l?`${l}+`:s;return{badgeContent:s,invisible:a,max:l,displayValue:c}}function Sj(e){return e.substring(2).toLowerCase()}function f1e(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function HZ(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,a=$.useRef(!1),s=$.useRef(null),l=$.useRef(!1),c=$.useRef(!1);$.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const u=En(t.ref,s),f=Ar(h=>{const g=c.current;c.current=!1;const v=er(s.current);if(!l.current||!s.current||"clientX"in h&&f1e(h,v))return;if(a.current){a.current=!1;return}let m;h.composedPath?m=h.composedPath().indexOf(s.current)>-1:m=!v.documentElement.contains(h.target)||s.current.contains(h.target),!m&&(n||!g)&&i(h)}),d=h=>g=>{c.current=!0;const v=t.props[h];v&&v(g)},p={ref:u};return o!==!1&&(p[o]=d(o)),$.useEffect(()=>{if(o!==!1){const h=Sj(o),g=er(s.current),v=()=>{a.current=!0};return g.addEventListener(h,f),g.addEventListener("touchmove",v),()=>{g.removeEventListener(h,f),g.removeEventListener("touchmove",v)}}},[f,o]),r!==!1&&(p[r]=d(r)),$.useEffect(()=>{if(r!==!1){const h=Sj(r),g=er(s.current);return g.addEventListener(h,f),()=>{g.removeEventListener(h,f)}}},[f,r]),G.jsx($.Fragment,{children:$.cloneElement(t,p)})}const d1e=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function p1e(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function h1e(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function m1e(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||h1e(e))}function g1e(e){const t=[],n=[];return Array.from(e.querySelectorAll(d1e)).forEach((r,i)=>{const o=p1e(r);o===-1||!m1e(r)||(o===0?t.push(r):n.push({documentOrder:i,tabIndex:o,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(t)}function v1e(){return!0}function GZ(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=g1e,isEnabled:a=v1e,open:s}=e,l=$.useRef(!1),c=$.useRef(null),u=$.useRef(null),f=$.useRef(null),d=$.useRef(null),p=$.useRef(!1),h=$.useRef(null),g=En(t.ref,h),v=$.useRef(null);$.useEffect(()=>{!s||!h.current||(p.current=!n)},[n,s]),$.useEffect(()=>{if(!s||!h.current)return;const _=er(h.current);return h.current.contains(_.activeElement)||(h.current.hasAttribute("tabIndex")||h.current.setAttribute("tabIndex","-1"),p.current&&h.current.focus()),()=>{i||(f.current&&f.current.focus&&(l.current=!0,f.current.focus()),f.current=null)}},[s]),$.useEffect(()=>{if(!s||!h.current)return;const _=er(h.current),b=S=>{v.current=S,!(r||!a()||S.key!=="Tab")&&_.activeElement===h.current&&S.shiftKey&&(l.current=!0,u.current&&u.current.focus())},x=()=>{const S=h.current;if(S===null)return;if(!_.hasFocus()||!a()||l.current){l.current=!1;return}if(S.contains(_.activeElement)||r&&_.activeElement!==c.current&&_.activeElement!==u.current)return;if(_.activeElement!==d.current)d.current=null;else if(d.current!==null)return;if(!p.current)return;let A=[];if((_.activeElement===c.current||_.activeElement===u.current)&&(A=o(h.current)),A.length>0){var C,k;const O=!!((C=v.current)!=null&&C.shiftKey&&((k=v.current)==null?void 0:k.key)==="Tab"),T=A[0],B=A[A.length-1];typeof T!="string"&&typeof B!="string"&&(O?B.focus():T.focus())}else S.focus()};_.addEventListener("focusin",x),_.addEventListener("keydown",b,!0);const w=setInterval(()=>{_.activeElement&&_.activeElement.tagName==="BODY"&&x()},50);return()=>{clearInterval(w),_.removeEventListener("focusin",x),_.removeEventListener("keydown",b,!0)}},[n,r,i,a,s,o]);const m=_=>{f.current===null&&(f.current=_.relatedTarget),p.current=!0,d.current=_.target;const b=t.props.onFocus;b&&b(_)},y=_=>{f.current===null&&(f.current=_.relatedTarget),p.current=!0};return G.jsxs($.Fragment,{children:[G.jsx("div",{tabIndex:s?0:-1,onFocus:y,ref:c,"data-testid":"sentinelStart"}),$.cloneElement(t,{ref:g,onFocus:m}),G.jsx("div",{tabIndex:s?0:-1,onFocus:y,ref:u,"data-testid":"sentinelEnd"})]})}var _a="top",Us="bottom",Vs="right",xa="left",HD="auto",k_=[_a,Us,Vs,xa],lv="start",f1="end",y1e="clippingParents",WZ="viewport",V0="popper",b1e="reference",Cj=k_.reduce(function(e,t){return e.concat([t+"-"+lv,t+"-"+f1])},[]),qZ=[].concat(k_,[HD]).reduce(function(e,t){return e.concat([t,t+"-"+lv,t+"-"+f1])},[]),_1e="beforeRead",x1e="read",w1e="afterRead",S1e="beforeMain",C1e="main",A1e="afterMain",P1e="beforeWrite",M1e="write",E1e="afterWrite",T1e=[_1e,x1e,w1e,S1e,C1e,A1e,P1e,M1e,E1e];function Ec(e){return e?(e.nodeName||"").toLowerCase():null}function Qa(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Qp(e){var t=Qa(e).Element;return e instanceof t||e instanceof Element}function Ds(e){var t=Qa(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function GD(e){if(typeof ShadowRoot>"u")return!1;var t=Qa(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function O1e(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},o=t.elements[n];!Ds(o)||!Ec(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(a){var s=i[a];s===!1?o.removeAttribute(a):o.setAttribute(a,s===!0?"":s)}))})}function I1e(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],o=t.attributes[r]||{},a=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),s=a.reduce(function(l,c){return l[c]="",l},{});!Ds(i)||!Ec(i)||(Object.assign(i.style,s),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const R1e={name:"applyStyles",enabled:!0,phase:"write",fn:O1e,effect:I1e,requires:["computeStyles"]};function Sc(e){return e.split("-")[0]}var Ip=Math.max,UC=Math.min,cv=Math.round;function P5(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function XZ(){return!/^((?!chrome|android).)*safari/i.test(P5())}function uv(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&Ds(e)&&(i=e.offsetWidth>0&&cv(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&cv(r.height)/e.offsetHeight||1);var a=Qp(e)?Qa(e):window,s=a.visualViewport,l=!XZ()&&n,c=(r.left+(l&&s?s.offsetLeft:0))/i,u=(r.top+(l&&s?s.offsetTop:0))/o,f=r.width/i,d=r.height/o;return{width:f,height:d,top:u,right:c+f,bottom:u+d,left:c,x:c,y:u}}function WD(e){var t=uv(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function YZ(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&GD(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Iu(e){return Qa(e).getComputedStyle(e)}function k1e(e){return["table","td","th"].indexOf(Ec(e))>=0}function Od(e){return((Qp(e)?e.ownerDocument:e.document)||window.document).documentElement}function wM(e){return Ec(e)==="html"?e:e.assignedSlot||e.parentNode||(GD(e)?e.host:null)||Od(e)}function Aj(e){return!Ds(e)||Iu(e).position==="fixed"?null:e.offsetParent}function L1e(e){var t=/firefox/i.test(P5()),n=/Trident/i.test(P5());if(n&&Ds(e)){var r=Iu(e);if(r.position==="fixed")return null}var i=wM(e);for(GD(i)&&(i=i.host);Ds(i)&&["html","body"].indexOf(Ec(i))<0;){var o=Iu(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function L_(e){for(var t=Qa(e),n=Aj(e);n&&k1e(n)&&Iu(n).position==="static";)n=Aj(n);return n&&(Ec(n)==="html"||Ec(n)==="body"&&Iu(n).position==="static")?t:n||L1e(e)||t}function qD(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function pb(e,t,n){return Ip(e,UC(t,n))}function $1e(e,t,n){var r=pb(e,t,n);return r>n?n:r}function KZ(){return{top:0,right:0,bottom:0,left:0}}function ZZ(e){return Object.assign({},KZ(),e)}function JZ(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var D1e=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,ZZ(typeof t!="number"?t:JZ(t,k_))};function B1e(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=Sc(n.placement),l=qD(s),c=[xa,Vs].indexOf(s)>=0,u=c?"height":"width";if(!(!o||!a)){var f=D1e(i.padding,n),d=WD(o),p=l==="y"?_a:xa,h=l==="y"?Us:Vs,g=n.rects.reference[u]+n.rects.reference[l]-a[l]-n.rects.popper[u],v=a[l]-n.rects.reference[l],m=L_(o),y=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,_=g/2-v/2,b=f[p],x=y-d[u]-f[h],w=y/2-d[u]/2+_,S=pb(b,w,x),A=l;n.modifiersData[r]=(t={},t[A]=S,t.centerOffset=S-w,t)}}function N1e(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||YZ(t.elements.popper,i)&&(t.elements.arrow=i))}const F1e={name:"arrow",enabled:!0,phase:"main",fn:B1e,effect:N1e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fv(e){return e.split("-")[1]}var j1e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function z1e(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:cv(n*i)/i||0,y:cv(r*i)/i||0}}function Pj(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,a=e.offsets,s=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,f=e.isFixed,d=a.x,p=d===void 0?0:d,h=a.y,g=h===void 0?0:h,v=typeof u=="function"?u({x:p,y:g}):{x:p,y:g};p=v.x,g=v.y;var m=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),_=xa,b=_a,x=window;if(c){var w=L_(n),S="clientHeight",A="clientWidth";if(w===Qa(n)&&(w=Od(n),Iu(w).position!=="static"&&s==="absolute"&&(S="scrollHeight",A="scrollWidth")),w=w,i===_a||(i===xa||i===Vs)&&o===f1){b=Us;var C=f&&w===x&&x.visualViewport?x.visualViewport.height:w[S];g-=C-r.height,g*=l?1:-1}if(i===xa||(i===_a||i===Us)&&o===f1){_=Vs;var k=f&&w===x&&x.visualViewport?x.visualViewport.width:w[A];p-=k-r.width,p*=l?1:-1}}var O=Object.assign({position:s},c&&j1e),T=u===!0?z1e({x:p,y:g},Qa(n)):{x:p,y:g};if(p=T.x,g=T.y,l){var B;return Object.assign({},O,(B={},B[b]=y?"0":"",B[_]=m?"0":"",B.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",B))}return Object.assign({},O,(t={},t[b]=y?g+"px":"",t[_]=m?p+"px":"",t.transform="",t))}function U1e(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,a=o===void 0?!0:o,s=n.roundOffsets,l=s===void 0?!0:s,c={placement:Sc(t.placement),variation:fv(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Pj(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Pj(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const V1e={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:U1e,data:{}};var xw={passive:!0};function H1e(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=i===void 0?!0:i,a=r.resize,s=a===void 0?!0:a,l=Qa(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,xw)}),s&&l.addEventListener("resize",n.update,xw),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,xw)}),s&&l.removeEventListener("resize",n.update,xw)}}const G1e={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:H1e,data:{}};var W1e={left:"right",right:"left",bottom:"top",top:"bottom"};function gS(e){return e.replace(/left|right|bottom|top/g,function(t){return W1e[t]})}var q1e={start:"end",end:"start"};function Mj(e){return e.replace(/start|end/g,function(t){return q1e[t]})}function XD(e){var t=Qa(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function YD(e){return uv(Od(e)).left+XD(e).scrollLeft}function X1e(e,t){var n=Qa(e),r=Od(e),i=n.visualViewport,o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;var c=XZ();(c||!c&&t==="fixed")&&(s=i.offsetLeft,l=i.offsetTop)}return{width:o,height:a,x:s+YD(e),y:l}}function Y1e(e){var t,n=Od(e),r=XD(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=Ip(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),a=Ip(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),s=-r.scrollLeft+YD(e),l=-r.scrollTop;return Iu(i||n).direction==="rtl"&&(s+=Ip(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}function KD(e){var t=Iu(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function QZ(e){return["html","body","#document"].indexOf(Ec(e))>=0?e.ownerDocument.body:Ds(e)&&KD(e)?e:QZ(wM(e))}function hb(e,t){var n;t===void 0&&(t=[]);var r=QZ(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=Qa(r),a=i?[o].concat(o.visualViewport||[],KD(r)?r:[]):r,s=t.concat(a);return i?s:s.concat(hb(wM(a)))}function M5(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function K1e(e,t){var n=uv(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Ej(e,t,n){return t===WZ?M5(X1e(e,n)):Qp(t)?K1e(t,n):M5(Y1e(Od(e)))}function Z1e(e){var t=hb(wM(e)),n=["absolute","fixed"].indexOf(Iu(e).position)>=0,r=n&&Ds(e)?L_(e):e;return Qp(r)?t.filter(function(i){return Qp(i)&&YZ(i,r)&&Ec(i)!=="body"}):[]}function J1e(e,t,n,r){var i=t==="clippingParents"?Z1e(e):[].concat(t),o=[].concat(i,[n]),a=o[0],s=o.reduce(function(l,c){var u=Ej(e,c,r);return l.top=Ip(u.top,l.top),l.right=UC(u.right,l.right),l.bottom=UC(u.bottom,l.bottom),l.left=Ip(u.left,l.left),l},Ej(e,a,r));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function eJ(e){var t=e.reference,n=e.element,r=e.placement,i=r?Sc(r):null,o=r?fv(r):null,a=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,l;switch(i){case _a:l={x:a,y:t.y-n.height};break;case Us:l={x:a,y:t.y+t.height};break;case Vs:l={x:t.x+t.width,y:s};break;case xa:l={x:t.x-n.width,y:s};break;default:l={x:t.x,y:t.y}}var c=i?qD(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case lv:l[c]=l[c]-(t[u]/2-n[u]/2);break;case f1:l[c]=l[c]+(t[u]/2-n[u]/2);break}}return l}function d1(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,o=n.strategy,a=o===void 0?e.strategy:o,s=n.boundary,l=s===void 0?y1e:s,c=n.rootBoundary,u=c===void 0?WZ:c,f=n.elementContext,d=f===void 0?V0:f,p=n.altBoundary,h=p===void 0?!1:p,g=n.padding,v=g===void 0?0:g,m=ZZ(typeof v!="number"?v:JZ(v,k_)),y=d===V0?b1e:V0,_=e.rects.popper,b=e.elements[h?y:d],x=J1e(Qp(b)?b:b.contextElement||Od(e.elements.popper),l,u,a),w=uv(e.elements.reference),S=eJ({reference:w,element:_,strategy:"absolute",placement:i}),A=M5(Object.assign({},_,S)),C=d===V0?A:w,k={top:x.top-C.top+m.top,bottom:C.bottom-x.bottom+m.bottom,left:x.left-C.left+m.left,right:C.right-x.right+m.right},O=e.modifiersData.offset;if(d===V0&&O){var T=O[i];Object.keys(k).forEach(function(B){var R=[Vs,Us].indexOf(B)>=0?1:-1,P=[_a,Us].indexOf(B)>=0?"y":"x";k[B]+=T[P]*R})}return k}function Q1e(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?qZ:l,u=fv(r),f=u?s?Cj:Cj.filter(function(h){return fv(h)===u}):k_,d=f.filter(function(h){return c.indexOf(h)>=0});d.length===0&&(d=f);var p=d.reduce(function(h,g){return h[g]=d1(e,{placement:g,boundary:i,rootBoundary:o,padding:a})[Sc(g)],h},{});return Object.keys(p).sort(function(h,g){return p[h]-p[g]})}function e_e(e){if(Sc(e)===HD)return[];var t=gS(e);return[Mj(e),t,Mj(t)]}function t_e(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!0:a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,h=p===void 0?!0:p,g=n.allowedAutoPlacements,v=t.options.placement,m=Sc(v),y=m===v,_=l||(y||!h?[gS(v)]:e_e(v)),b=[v].concat(_).reduce(function(ce,se){return ce.concat(Sc(se)===HD?Q1e(t,{placement:se,boundary:u,rootBoundary:f,padding:c,flipVariations:h,allowedAutoPlacements:g}):se)},[]),x=t.rects.reference,w=t.rects.popper,S=new Map,A=!0,C=b[0],k=0;k<b.length;k++){var O=b[k],T=Sc(O),B=fv(O)===lv,R=[_a,Us].indexOf(T)>=0,P=R?"width":"height",D=d1(t,{placement:O,boundary:u,rootBoundary:f,altBoundary:d,padding:c}),z=R?B?Vs:xa:B?Us:_a;x[P]>w[P]&&(z=gS(z));var N=gS(z),H=[];if(o&&H.push(D[T]<=0),s&&H.push(D[z]<=0,D[N]<=0),H.every(function(ce){return ce})){C=O,A=!1;break}S.set(O,H)}if(A)for(var J=h?3:1,ne=function(se){var Y=b.find(function(he){var ae=S.get(he);if(ae)return ae.slice(0,se).every(function(ye){return ye})});if(Y)return C=Y,"break"},oe=J;oe>0;oe--){var Z=ne(oe);if(Z==="break")break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}}const n_e={name:"flip",enabled:!0,phase:"main",fn:t_e,requiresIfExists:["offset"],data:{_skip:!1}};function Tj(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Oj(e){return[_a,Vs,Us,xa].some(function(t){return e[t]>=0})}function r_e(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,a=d1(t,{elementContext:"reference"}),s=d1(t,{altBoundary:!0}),l=Tj(a,r),c=Tj(s,i,o),u=Oj(l),f=Oj(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const i_e={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:r_e};function o_e(e,t,n){var r=Sc(e),i=[xa,_a].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*i,[xa,Vs].indexOf(r)>=0?{x:s,y:a}:{x:a,y:s}}function a_e(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=i===void 0?[0,0]:i,a=qZ.reduce(function(u,f){return u[f]=o_e(f,t.rects,o),u},{}),s=a[t.placement],l=s.x,c=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=a}const s_e={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:a_e};function l_e(e){var t=e.state,n=e.name;t.modifiersData[n]=eJ({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const c_e={name:"popperOffsets",enabled:!0,phase:"read",fn:l_e,data:{}};function u_e(e){return e==="x"?"y":"x"}function f_e(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=i===void 0?!0:i,a=n.altAxis,s=a===void 0?!1:a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,d=n.tether,p=d===void 0?!0:d,h=n.tetherOffset,g=h===void 0?0:h,v=d1(t,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),m=Sc(t.placement),y=fv(t.placement),_=!y,b=qD(m),x=u_e(b),w=t.modifiersData.popperOffsets,S=t.rects.reference,A=t.rects.popper,C=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,k=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),O=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,T={x:0,y:0};if(w){if(o){var B,R=b==="y"?_a:xa,P=b==="y"?Us:Vs,D=b==="y"?"height":"width",z=w[b],N=z+v[R],H=z-v[P],J=p?-A[D]/2:0,ne=y===lv?S[D]:A[D],oe=y===lv?-A[D]:-S[D],Z=t.elements.arrow,ce=p&&Z?WD(Z):{width:0,height:0},se=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:KZ(),Y=se[R],he=se[P],ae=pb(0,S[D],ce[D]),ye=_?S[D]/2-J-ae-Y-k.mainAxis:ne-ae-Y-k.mainAxis,re=_?-S[D]/2+J+ae+he+k.mainAxis:oe+ae+he+k.mainAxis,te=t.elements.arrow&&L_(t.elements.arrow),le=te?b==="y"?te.clientTop||0:te.clientLeft||0:0,de=(B=O==null?void 0:O[b])!=null?B:0,_e=z+ye-de-le,be=z+re-de,ke=pb(p?UC(N,_e):N,z,p?Ip(H,be):H);w[b]=ke,T[b]=ke-z}if(s){var W,ee=b==="x"?_a:xa,Ee=b==="x"?Us:Vs,ge=w[x],pe=x==="y"?"height":"width",ve=ge+v[ee],$e=ge-v[Ee],Ne=[_a,xa].indexOf(m)!==-1,Ae=(W=O==null?void 0:O[x])!=null?W:0,Oe=Ne?ve:ge-S[pe]-A[pe]-Ae+k.altAxis,j=Ne?ge+S[pe]+A[pe]-Ae-k.altAxis:$e,M=p&&Ne?$1e(Oe,ge,j):pb(p?Oe:ve,ge,p?j:$e);w[x]=M,T[x]=M-ge}t.modifiersData[r]=T}}const d_e={name:"preventOverflow",enabled:!0,phase:"main",fn:f_e,requiresIfExists:["offset"]};function p_e(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function h_e(e){return e===Qa(e)||!Ds(e)?XD(e):p_e(e)}function m_e(e){var t=e.getBoundingClientRect(),n=cv(t.width)/e.offsetWidth||1,r=cv(t.height)/e.offsetHeight||1;return n!==1||r!==1}function g_e(e,t,n){n===void 0&&(n=!1);var r=Ds(t),i=Ds(t)&&m_e(t),o=Od(t),a=uv(e,i,n),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Ec(t)!=="body"||KD(o))&&(s=h_e(t)),Ds(t)?(l=uv(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=YD(o))),{x:a.left+s.scrollLeft-l.x,y:a.top+s.scrollTop-l.y,width:a.width,height:a.height}}function v_e(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function i(o){n.add(o.name);var a=[].concat(o.requires||[],o.requiresIfExists||[]);a.forEach(function(s){if(!n.has(s)){var l=t.get(s);l&&i(l)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||i(o)}),r}function y_e(e){var t=v_e(e);return T1e.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function b_e(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function __e(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var Ij={placement:"bottom",modifiers:[],strategy:"absolute"};function Rj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function x_e(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,o=i===void 0?Ij:i;return function(s,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ij,o),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},f=[],d=!1,p={state:u,setOptions:function(m){var y=typeof m=="function"?m(u.options):m;g(),u.options=Object.assign({},o,u.options,y),u.scrollParents={reference:Qp(s)?hb(s):s.contextElement?hb(s.contextElement):[],popper:hb(l)};var _=y_e(__e([].concat(r,u.options.modifiers)));return u.orderedModifiers=_.filter(function(b){return b.enabled}),h(),p.update()},forceUpdate:function(){if(!d){var m=u.elements,y=m.reference,_=m.popper;if(Rj(y,_)){u.rects={reference:g_e(y,L_(_),u.options.strategy==="fixed"),popper:WD(_)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(k){return u.modifiersData[k.name]=Object.assign({},k.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var x=u.orderedModifiers[b],w=x.fn,S=x.options,A=S===void 0?{}:S,C=x.name;typeof w=="function"&&(u=w({state:u,options:A,name:C,instance:p})||u)}}}},update:b_e(function(){return new Promise(function(v){p.forceUpdate(),v(u)})}),destroy:function(){g(),d=!0}};if(!Rj(s,l))return p;p.setOptions(c).then(function(v){!d&&c.onFirstUpdate&&c.onFirstUpdate(v)});function h(){u.orderedModifiers.forEach(function(v){var m=v.name,y=v.options,_=y===void 0?{}:y,b=v.effect;if(typeof b=="function"){var x=b({state:u,name:m,instance:p,options:_}),w=function(){};f.push(x||w)}})}function g(){f.forEach(function(v){return v()}),f=[]}return p}}var w_e=[G1e,c_e,V1e,R1e,s_e,n_e,d_e,F1e,i_e],S_e=x_e({defaultModifiers:w_e});function C_e(e){return typeof e=="function"?e():e}const ZD=$.forwardRef(function(t,n){const{children:r,container:i,disablePortal:o=!1}=t,[a,s]=$.useState(null),l=En($.isValidElement(r)?r.ref:null,n);if(vi(()=>{o||s(C_e(i)||document.body)},[i,o]),vi(()=>{if(a&&!o)return iv(n,a),()=>{iv(n,null)}},[n,a,o]),o){if($.isValidElement(r)){const c={ref:l};return $.cloneElement(r,c)}return G.jsx($.Fragment,{children:r})}return G.jsx($.Fragment,{children:a&&Hp.createPortal(r,a)})});function A_e(e){return it("MuiPopper",e)}at("MuiPopper",["root"]);const P_e=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],M_e=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function E_e(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function E5(e){return typeof e=="function"?e():e}function T_e(e){return e.nodeType!==void 0}const O_e=()=>ot({root:["root"]},a1e(A_e)),I_e={},R_e=$.forwardRef(function(t,n){var r;const{anchorEl:i,children:o,direction:a,disablePortal:s,modifiers:l,open:c,placement:u,popperOptions:f,popperRef:d,slotProps:p={},slots:h={},TransitionProps:g}=t,v=We(t,P_e),m=$.useRef(null),y=En(m,n),_=$.useRef(null),b=En(_,d),x=$.useRef(b);vi(()=>{x.current=b},[b]),$.useImperativeHandle(d,()=>_.current,[]);const w=E_e(u,a),[S,A]=$.useState(w),[C,k]=$.useState(E5(i));$.useEffect(()=>{_.current&&_.current.forceUpdate()}),$.useEffect(()=>{i&&k(E5(i))},[i]),vi(()=>{if(!C||!c)return;const P=N=>{A(N.placement)};let D=[{name:"preventOverflow",options:{altBoundary:s}},{name:"flip",options:{altBoundary:s}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:N})=>{P(N)}}];l!=null&&(D=D.concat(l)),f&&f.modifiers!=null&&(D=D.concat(f.modifiers));const z=S_e(C,m.current,I({placement:w},f,{modifiers:D}));return x.current(z),()=>{z.destroy(),x.current(null)}},[C,s,l,c,f,w]);const O={placement:S};g!==null&&(O.TransitionProps=g);const T=O_e(),B=(r=h.root)!=null?r:"div",R=Nr({elementType:B,externalSlotProps:p.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:y},ownerState:t,className:T.root});return G.jsx(B,I({},R,{children:typeof o=="function"?o(O):o}))}),k_e=$.forwardRef(function(t,n){const{anchorEl:r,children:i,container:o,direction:a="ltr",disablePortal:s=!1,keepMounted:l=!1,modifiers:c,open:u,placement:f="bottom",popperOptions:d=I_e,popperRef:p,style:h,transition:g=!1,slotProps:v={},slots:m={}}=t,y=We(t,M_e),[_,b]=$.useState(!0),x=()=>{b(!1)},w=()=>{b(!0)};if(!l&&!u&&(!g||_))return null;let S;if(o)S=o;else if(r){const k=E5(r);S=k&&T_e(k)?er(k).body:er(null).body}const A=!u&&l&&(!g||_)?"none":void 0,C=g?{in:u,onEnter:x,onExited:w}:void 0;return G.jsx(ZD,{disablePortal:s,container:S,children:G.jsx(R_e,I({anchorEl:r,direction:a,disablePortal:s,modifiers:c,ref:n,open:g?!_:u,placement:f,popperOptions:d,popperRef:p,slotProps:v,slots:m},y,{style:I({position:"fixed",top:0,left:0,display:A},h),TransitionProps:C,children:i}))})});function L_e(e){const t=er(e);return t.body===e?so(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function mb(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function kj(e){return parseInt(so(e).getComputedStyle(e).paddingRight,10)||0}function $_e(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function Lj(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,a=>{const s=o.indexOf(a)===-1,l=!$_e(a);s&&l&&mb(a,i)})}function fO(e,t){let n=-1;return e.some((r,i)=>t(r)?(n=i,!0):!1),n}function D_e(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(L_e(r)){const a=PK(er(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${kj(r)+a}px`;const s=er(r).querySelectorAll(".mui-fixed");[].forEach.call(s,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${kj(l)+a}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=er(r).body;else{const a=r.parentElement,s=so(r);o=(a==null?void 0:a.nodeName)==="HTML"&&s.getComputedStyle(a).overflowY==="scroll"?a:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:a,property:s})=>{o?a.style.setProperty(s,o):a.style.removeProperty(s)})}}function B_e(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class tJ{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&mb(t.modalRef,!1);const i=B_e(n);Lj(n,t.mount,t.modalRef,i,!0);const o=fO(this.containers,a=>a.container===n);return o!==-1?(this.containers[o].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:i}),r)}mount(t,n){const r=fO(this.containers,o=>o.modals.indexOf(t)!==-1),i=this.containers[r];i.restore||(i.restore=D_e(i,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const i=fO(this.containers,a=>a.modals.indexOf(t)!==-1),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&mb(t.modalRef,n),Lj(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const a=o.modals[o.modals.length-1];a.modalRef&&mb(a.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function N_e(e){return typeof e=="function"?e():e}function F_e(e){return e?e.props.hasOwnProperty("in"):!1}const j_e=new tJ;function z_e(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=j_e,closeAfterTransition:o=!1,onTransitionEnter:a,onTransitionExited:s,children:l,onClose:c,open:u,rootRef:f}=e,d=$.useRef({}),p=$.useRef(null),h=$.useRef(null),g=En(h,f),[v,m]=$.useState(!u),y=F_e(l);let _=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(_=!1);const b=()=>er(p.current),x=()=>(d.current.modalRef=h.current,d.current.mount=p.current,d.current),w=()=>{i.mount(x(),{disableScrollLock:r}),h.current&&(h.current.scrollTop=0)},S=Ar(()=>{const D=N_e(t)||b().body;i.add(x(),D),h.current&&w()}),A=$.useCallback(()=>i.isTopModal(x()),[i]),C=Ar(D=>{p.current=D,D&&(u&&A()?w():h.current&&mb(h.current,_))}),k=$.useCallback(()=>{i.remove(x(),_)},[_,i]);$.useEffect(()=>()=>{k()},[k]),$.useEffect(()=>{u?S():(!y||!o)&&k()},[u,k,y,o,S]);const O=D=>z=>{var N;(N=D.onKeyDown)==null||N.call(D,z),!(z.key!=="Escape"||!A())&&(n||(z.stopPropagation(),c&&c(z,"escapeKeyDown")))},T=D=>z=>{var N;(N=D.onClick)==null||N.call(D,z),z.target===z.currentTarget&&c&&c(z,"backdropClick")};return{getRootProps:(D={})=>{const z=Op(e);delete z.onTransitionEnter,delete z.onTransitionExited;const N=I({},z,D);return I({role:"presentation"},N,{onKeyDown:O(N),ref:g})},getBackdropProps:(D={})=>{const z=D;return I({"aria-hidden":!0},z,{onClick:T(z),open:u})},getTransitionProps:()=>{const D=()=>{m(!1),a&&a()},z=()=>{m(!0),s&&s(),o&&k()};return{onEnter:o1(D,l==null?void 0:l.props.onEnter),onExited:o1(z,l==null?void 0:l.props.onExited)}},rootRef:g,portalRef:C,isTopModal:A,exited:v,hasTransition:y}}function nJ(e){const{children:t,defer:n=!1,fallback:r=null}=e,[i,o]=$.useState(!1);return vi(()=>{n||o(!0)},[n]),$.useEffect(()=>{n&&o(!0)},[n]),G.jsx($.Fragment,{children:i?t:r})}const U_e=2;function rJ(e,t){return e-t}function H0(e,t,n){return e==null?t:Math.min(Math.max(t,e),n)}function $j(e,t){var n;const{index:r}=(n=e.reduce((i,o,a)=>{const s=Math.abs(t-o);return i===null||s<i.distance||s===i.distance?{distance:s,index:a}:i},null))!=null?n:{};return r}function ww(e,t){if(t.current!==void 0&&e.changedTouches){const n=e;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===t.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function VC(e,t,n){return(e-t)*100/(n-t)}function V_e(e,t,n){return(n-t)*e+t}function H_e(e){if(Math.abs(e)<1){const n=e.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function G_e(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(H_e(t)))}function Dj({values:e,newValue:t,index:n}){const r=e.slice();return r[n]=t,r.sort(rJ)}function Sw({sliderRef:e,activeIndex:t,setActive:n}){var r,i;const o=er(e.current);if(!((r=e.current)!=null&&r.contains(o.activeElement))||Number(o==null||(i=o.activeElement)==null?void 0:i.getAttribute("data-index"))!==t){var a;(a=e.current)==null||a.querySelector(`[type="range"][data-index="${t}"]`).focus()}n&&n(t)}function Cw(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?r1e(e,t):!1}const W_e={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},q_e=e=>e;let Aw;function dO(){return Aw===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Aw=CSS.supports("touch-action","none"):Aw=!0),Aw}function X_e(e){const{"aria-labelledby":t,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:o=!1,marks:a=!1,max:s=100,min:l=0,name:c,onChange:u,onChangeCommitted:f,orientation:d="horizontal",rootRef:p,scale:h=q_e,step:g=1,tabIndex:v,value:m}=e,y=$.useRef(),[_,b]=$.useState(-1),[x,w]=$.useState(-1),[S,A]=$.useState(!1),C=$.useRef(0),[k,O]=Wo({controlled:m,default:n??l,name:"Slider"}),T=u&&((Ae,Oe,j)=>{const M=Ae.nativeEvent||Ae,L=new M.constructor(M.type,M);Object.defineProperty(L,"target",{writable:!0,value:{value:Oe,name:c}}),u(L,Oe,j)}),B=Array.isArray(k);let R=B?k.slice().sort(rJ):[k];R=R.map(Ae=>H0(Ae,l,s));const P=a===!0&&g!==null?[...Array(Math.floor((s-l)/g)+1)].map((Ae,Oe)=>({value:l+g*Oe})):a||[],D=P.map(Ae=>Ae.value),{isFocusVisibleRef:z,onBlur:N,onFocus:H,ref:J}=Th(),[ne,oe]=$.useState(-1),Z=$.useRef(),ce=En(J,Z),se=En(p,ce),Y=Ae=>Oe=>{var j;const M=Number(Oe.currentTarget.getAttribute("data-index"));H(Oe),z.current===!0&&oe(M),w(M),Ae==null||(j=Ae.onFocus)==null||j.call(Ae,Oe)},he=Ae=>Oe=>{var j;N(Oe),z.current===!1&&oe(-1),w(-1),Ae==null||(j=Ae.onBlur)==null||j.call(Ae,Oe)};vi(()=>{if(r&&Z.current.contains(document.activeElement)){var Ae;(Ae=document.activeElement)==null||Ae.blur()}},[r]),r&&_!==-1&&b(-1),r&&ne!==-1&&oe(-1);const ae=Ae=>Oe=>{var j;(j=Ae.onChange)==null||j.call(Ae,Oe);const M=Number(Oe.currentTarget.getAttribute("data-index")),L=R[M],q=D.indexOf(L);let me=Oe.target.valueAsNumber;if(P&&g==null){const Te=D[D.length-1];me>Te?me=Te:me<D[0]?me=D[0]:me=me<L?D[q-1]:D[q+1]}if(me=H0(me,l,s),B){i&&(me=H0(me,R[M-1]||-1/0,R[M+1]||1/0));const Te=me;me=Dj({values:R,newValue:me,index:M});let Pe=M;i||(Pe=me.indexOf(Te)),Sw({sliderRef:Z,activeIndex:Pe})}O(me),oe(M),T&&!Cw(me,k)&&T(Oe,me,M),f&&f(Oe,me)},ye=$.useRef();let re=d;o&&d==="horizontal"&&(re+="-reverse");const te=({finger:Ae,move:Oe=!1})=>{const{current:j}=Z,{width:M,height:L,bottom:q,left:me}=j.getBoundingClientRect();let Te;re.indexOf("vertical")===0?Te=(q-Ae.y)/L:Te=(Ae.x-me)/M,re.indexOf("-reverse")!==-1&&(Te=1-Te);let Pe;if(Pe=V_e(Te,l,s),g)Pe=G_e(Pe,g,l);else{const He=$j(D,Pe);Pe=D[He]}Pe=H0(Pe,l,s);let Xe=0;if(B){Oe?Xe=ye.current:Xe=$j(R,Pe),i&&(Pe=H0(Pe,R[Xe-1]||-1/0,R[Xe+1]||1/0));const He=Pe;Pe=Dj({values:R,newValue:Pe,index:Xe}),i&&Oe||(Xe=Pe.indexOf(He),ye.current=Xe)}return{newValue:Pe,activeIndex:Xe}},le=Ar(Ae=>{const Oe=ww(Ae,y);if(!Oe)return;if(C.current+=1,Ae.type==="mousemove"&&Ae.buttons===0){de(Ae);return}const{newValue:j,activeIndex:M}=te({finger:Oe,move:!0});Sw({sliderRef:Z,activeIndex:M,setActive:b}),O(j),!S&&C.current>U_e&&A(!0),T&&!Cw(j,k)&&T(Ae,j,M)}),de=Ar(Ae=>{const Oe=ww(Ae,y);if(A(!1),!Oe)return;const{newValue:j}=te({finger:Oe,move:!0});b(-1),Ae.type==="touchend"&&w(-1),f&&f(Ae,j),y.current=void 0,be()}),_e=Ar(Ae=>{if(r)return;dO()||Ae.preventDefault();const Oe=Ae.changedTouches[0];Oe!=null&&(y.current=Oe.identifier);const j=ww(Ae,y);if(j!==!1){const{newValue:L,activeIndex:q}=te({finger:j});Sw({sliderRef:Z,activeIndex:q,setActive:b}),O(L),T&&!Cw(L,k)&&T(Ae,L,q)}C.current=0;const M=er(Z.current);M.addEventListener("touchmove",le),M.addEventListener("touchend",de)}),be=$.useCallback(()=>{const Ae=er(Z.current);Ae.removeEventListener("mousemove",le),Ae.removeEventListener("mouseup",de),Ae.removeEventListener("touchmove",le),Ae.removeEventListener("touchend",de)},[de,le]);$.useEffect(()=>{const{current:Ae}=Z;return Ae.addEventListener("touchstart",_e,{passive:dO()}),()=>{Ae.removeEventListener("touchstart",_e,{passive:dO()}),be()}},[be,_e]),$.useEffect(()=>{r&&be()},[r,be]);const ke=Ae=>Oe=>{var j;if((j=Ae.onMouseDown)==null||j.call(Ae,Oe),r||Oe.defaultPrevented||Oe.button!==0)return;Oe.preventDefault();const M=ww(Oe,y);if(M!==!1){const{newValue:q,activeIndex:me}=te({finger:M});Sw({sliderRef:Z,activeIndex:me,setActive:b}),O(q),T&&!Cw(q,k)&&T(Oe,q,me)}C.current=0;const L=er(Z.current);L.addEventListener("mousemove",le),L.addEventListener("mouseup",de)},W=VC(B?R[0]:l,l,s),ee=VC(R[R.length-1],l,s)-W,Ee=(Ae={})=>{const Oe=Op(Ae),j={onMouseDown:ke(Oe||{})},M=I({},Oe,j);return I({},Ae,{ref:se},M)},ge=Ae=>Oe=>{var j;(j=Ae.onMouseOver)==null||j.call(Ae,Oe);const M=Number(Oe.currentTarget.getAttribute("data-index"));w(M)},pe=Ae=>Oe=>{var j;(j=Ae.onMouseLeave)==null||j.call(Ae,Oe),w(-1)};return{active:_,axis:re,axisProps:W_e,dragging:S,focusedThumbIndex:ne,getHiddenInputProps:(Ae={})=>{var Oe;const j=Op(Ae),M={onChange:ae(j||{}),onFocus:Y(j||{}),onBlur:he(j||{})},L=I({},j,M);return I({tabIndex:v,"aria-labelledby":t,"aria-orientation":d,"aria-valuemax":h(s),"aria-valuemin":h(l),name:c,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":(Oe=e.step)!=null?Oe:void 0,disabled:r},Ae,L,{style:I({},EK,{direction:o?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:Ee,getThumbProps:(Ae={})=>{const Oe=Op(Ae),j={onMouseOver:ge(Oe||{}),onMouseLeave:pe(Oe||{})};return I({},Ae,Oe,j)},marks:P,open:x,range:B,rootRef:se,trackLeap:ee,trackOffset:W,values:R,getThumbStyle:Ae=>({pointerEvents:_!==-1&&_!==Ae?"none":void 0})}}function Y_e(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:o}=e,a=$.useRef();$.useEffect(()=>{if(!i)return;function m(y){y.defaultPrevented||(y.key==="Escape"||y.key==="Esc")&&(r==null||r(y,"escapeKeyDown"))}return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[i,r]);const s=Ar((m,y)=>{r==null||r(m,y)}),l=Ar(m=>{!r||m==null||(clearTimeout(a.current),a.current=setTimeout(()=>{s(null,"timeout")},m))});$.useEffect(()=>(i&&l(t),()=>{clearTimeout(a.current)}),[i,t,l]);const c=m=>{r==null||r(m,"clickaway")},u=()=>{clearTimeout(a.current)},f=$.useCallback(()=>{t!=null&&l(o??t*.5)},[t,o,l]),d=m=>y=>{const _=m.onBlur;_==null||_(y),f()},p=m=>y=>{const _=m.onFocus;_==null||_(y),u()},h=m=>y=>{const _=m.onMouseEnter;_==null||_(y),u()},g=m=>y=>{const _=m.onMouseLeave;_==null||_(y),f()};return $.useEffect(()=>{if(!n&&i)return window.addEventListener("focus",f),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",f),window.removeEventListener("blur",u)}},[n,f,i]),{getRootProps:(m={})=>{const y=I({},Op(e),Op(m));return I({role:"presentation"},m,y,{onBlur:d(y),onFocus:p(y),onMouseEnter:h(y),onMouseLeave:g(y)})},onClickAway:c}}const K_e=["onChange","maxRows","minRows","style","value"];function Pw(e){return parseInt(e,10)||0}const Z_e={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Bj(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const iJ=$.forwardRef(function(t,n){const{onChange:r,maxRows:i,minRows:o=1,style:a,value:s}=t,l=We(t,K_e),{current:c}=$.useRef(s!=null),u=$.useRef(null),f=En(n,u),d=$.useRef(null),p=$.useRef(0),[h,g]=$.useState({outerHeightStyle:0}),v=$.useCallback(()=>{const b=u.current,w=so(b).getComputedStyle(b);if(w.width==="0px")return{outerHeightStyle:0};const S=d.current;S.style.width=w.width,S.value=b.value||t.placeholder||"x",S.value.slice(-1)===`
`&&(S.value+=" ");const A=w.boxSizing,C=Pw(w.paddingBottom)+Pw(w.paddingTop),k=Pw(w.borderBottomWidth)+Pw(w.borderTopWidth),O=S.scrollHeight;S.value="x";const T=S.scrollHeight;let B=O;o&&(B=Math.max(Number(o)*T,B)),i&&(B=Math.min(Number(i)*T,B)),B=Math.max(B,T);const R=B+(A==="border-box"?C+k:0),P=Math.abs(B-O)<=1;return{outerHeightStyle:R,overflow:P}},[i,o,t.placeholder]),m=(b,x)=>{const{outerHeightStyle:w,overflow:S}=x;return p.current<20&&(w>0&&Math.abs((b.outerHeightStyle||0)-w)>1||b.overflow!==S)?(p.current+=1,{overflow:S,outerHeightStyle:w}):b},y=$.useCallback(()=>{const b=v();Bj(b)||g(x=>m(x,b))},[v]);vi(()=>{const b=()=>{const O=v();Bj(O)||Hp.flushSync(()=>{g(T=>m(T,O))})},x=()=>{p.current=0,b()};let w;const S=Eh(x),A=u.current,C=so(A);C.addEventListener("resize",S);let k;return typeof ResizeObserver<"u"&&(k=new ResizeObserver(x),k.observe(A)),()=>{S.clear(),cancelAnimationFrame(w),C.removeEventListener("resize",S),k&&k.disconnect()}},[v]),vi(()=>{y()}),$.useEffect(()=>{p.current=0},[s]);const _=b=>{p.current=0,c||y(),r&&r(b)};return G.jsxs($.Fragment,{children:[G.jsx("textarea",I({value:s,onChange:_,ref:f,rows:o,style:I({height:h.outerHeightStyle,overflow:h.overflow?"hidden":void 0},a)},l)),G.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:d,tabIndex:-1,style:I({},Z_e.shadow,a,{paddingTop:0,paddingBottom:0})})]})});function Nj(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function oJ(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:a=!1}=e;return(s,{inputValue:l,getOptionLabel:c})=>{let u=a?l.trim():l;n&&(u=u.toLowerCase()),t&&(u=Nj(u));const f=u?s.filter(d=>{let p=(o||c)(d);return n&&(p=p.toLowerCase()),t&&(p=Nj(p)),i==="start"?p.indexOf(u)===0:p.indexOf(u)>-1}):s;return typeof r=="number"?f.slice(0,r):f}}function pO(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const J_e=oJ(),Fj=5,Q_e=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function aJ(e){const{unstable_isActiveElementInListbox:t=Q_e,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:i=!1,autoSelect:o=!1,blurOnSelect:a=!1,clearOnBlur:s=!e.freeSolo,clearOnEscape:l=!1,componentName:c="useAutocomplete",defaultValue:u=e.multiple?[]:null,disableClearable:f=!1,disableCloseOnSelect:d=!1,disabled:p,disabledItemsFocusable:h=!1,disableListWrap:g=!1,filterOptions:v=J_e,filterSelectedOptions:m=!1,freeSolo:y=!1,getOptionDisabled:_,getOptionLabel:b=Le=>{var Me;return(Me=Le.label)!=null?Me:Le},groupBy:x,handleHomeEndKeys:w=!e.freeSolo,id:S,includeInputInList:A=!1,inputValue:C,isOptionEqualToValue:k=(Le,Me)=>Le===Me,multiple:O=!1,onChange:T,onClose:B,onHighlightChange:R,onInputChange:P,onOpen:D,open:z,openOnFocus:N=!1,options:H,readOnly:J=!1,selectOnFocus:ne=!e.freeSolo,value:oe}=e,Z=zs(S);let ce=b;ce=Le=>{const Me=b(Le);return typeof Me!="string"?String(Me):Me};const se=$.useRef(!1),Y=$.useRef(!0),he=$.useRef(null),ae=$.useRef(null),[ye,re]=$.useState(null),[te,le]=$.useState(-1),de=i?0:-1,_e=$.useRef(de),[be,ke]=Wo({controlled:oe,default:u,name:c}),[W,ee]=Wo({controlled:C,default:"",name:c,state:"inputValue"}),[Ee,ge]=$.useState(!1),pe=$.useCallback((Le,Me)=>{if(!(O?be.length<Me.length:Me!==null)&&!s)return;let qe;if(O)qe="";else if(Me==null)qe="";else{const nt=ce(Me);qe=typeof nt=="string"?nt:""}W!==qe&&(ee(qe),P&&P(Le,qe,"reset"))},[ce,W,O,P,ee,s,be]),[ve,$e]=Wo({controlled:z,default:!1,name:c,state:"open"}),[Ne,Ae]=$.useState(!0),Oe=!O&&be!=null&&W===ce(be),j=ve&&!J,M=j?v(H.filter(Le=>!(m&&(O?be:[be]).some(Me=>Me!==null&&k(Le,Me)))),{inputValue:Oe&&Ne?"":W,getOptionLabel:ce}):[],L=uD({filteredOptions:M,value:be,inputValue:W});$.useEffect(()=>{const Le=be!==L.value;Ee&&!Le||y&&!Le||pe(null,be)},[be,pe,Ee,L.value,y]);const q=ve&&M.length>0&&!J,me=Ar(Le=>{Le===-1?he.current.focus():ye.querySelector(`[data-tag-index="${Le}"]`).focus()});$.useEffect(()=>{O&&te>be.length-1&&(le(-1),me(-1))},[be,O,te,me]);function Te(Le,Me){if(!ae.current||Le===-1)return-1;let Re=Le;for(;;){if(Me==="next"&&Re===M.length||Me==="previous"&&Re===-1)return-1;const qe=ae.current.querySelector(`[data-option-index="${Re}"]`),nt=h?!1:!qe||qe.disabled||qe.getAttribute("aria-disabled")==="true";if(qe&&!qe.hasAttribute("tabindex")||nt)Re+=Me==="next"?1:-1;else return Re}}const Pe=Ar(({event:Le,index:Me,reason:Re="auto"})=>{if(_e.current=Me,Me===-1?he.current.removeAttribute("aria-activedescendant"):he.current.setAttribute("aria-activedescendant",`${Z}-option-${Me}`),R&&R(Le,Me===-1?null:M[Me],Re),!ae.current)return;const qe=ae.current.querySelector(`[role="option"].${n}-focused`);qe&&(qe.classList.remove(`${n}-focused`),qe.classList.remove(`${n}-focusVisible`));let nt=ae.current;if(ae.current.getAttribute("role")!=="listbox"&&(nt=ae.current.parentElement.querySelector('[role="listbox"]')),!nt)return;if(Me===-1){nt.scrollTop=0;return}const ft=ae.current.querySelector(`[data-option-index="${Me}"]`);if(ft&&(ft.classList.add(`${n}-focused`),Re==="keyboard"&&ft.classList.add(`${n}-focusVisible`),nt.scrollHeight>nt.clientHeight&&Re!=="mouse"&&Re!=="touch")){const pt=ft,Gt=nt.clientHeight+nt.scrollTop,bt=pt.offsetTop+pt.offsetHeight;bt>Gt?nt.scrollTop=bt-nt.clientHeight:pt.offsetTop-pt.offsetHeight*(x?1.3:0)<nt.scrollTop&&(nt.scrollTop=pt.offsetTop-pt.offsetHeight*(x?1.3:0))}}),Xe=Ar(({event:Le,diff:Me,direction:Re="next",reason:qe="auto"})=>{if(!j)return;const ft=Te((()=>{const pt=M.length-1;if(Me==="reset")return de;if(Me==="start")return 0;if(Me==="end")return pt;const Gt=_e.current+Me;return Gt<0?Gt===-1&&A?-1:g&&_e.current!==-1||Math.abs(Me)>1?0:pt:Gt>pt?Gt===pt+1&&A?-1:g||Math.abs(Me)>1?pt:0:Gt})(),Re);if(Pe({index:ft,reason:qe,event:Le}),r&&Me!=="reset")if(ft===-1)he.current.value=W;else{const pt=ce(M[ft]);he.current.value=pt,pt.toLowerCase().indexOf(W.toLowerCase())===0&&W.length>0&&he.current.setSelectionRange(W.length,pt.length)}}),He=()=>{const Le=(Me,Re)=>{const qe=Me?ce(Me):"",nt=Re?ce(Re):"";return qe===nt};if(_e.current!==-1&&L.filteredOptions&&L.filteredOptions.length!==M.length&&L.inputValue===W&&(O?be.length===L.value.length&&L.value.every((Me,Re)=>ce(be[Re])===ce(Me)):Le(L.value,be))){const Me=L.filteredOptions[_e.current];if(Me&&M.some(qe=>ce(qe)===ce(Me)))return!0}return!1},Ve=$.useCallback(()=>{if(!j||He())return;const Le=O?be[0]:be;if(M.length===0||Le==null){Xe({diff:"reset"});return}if(ae.current){if(Le!=null){const Me=M[_e.current];if(O&&Me&&pO(be,qe=>k(Me,qe))!==-1)return;const Re=pO(M,qe=>k(qe,Le));Re===-1?Xe({diff:"reset"}):Pe({index:Re});return}if(_e.current>=M.length-1){Pe({index:M.length-1});return}Pe({index:_e.current})}},[M.length,O?!1:be,m,Xe,Pe,j,W,O]),Je=Ar(Le=>{iv(ae,Le),Le&&Ve()});$.useEffect(()=>{Ve()},[Ve]);const Ye=Le=>{ve||($e(!0),Ae(!0),D&&D(Le))},yt=(Le,Me)=>{ve&&($e(!1),B&&B(Le,Me))},mt=(Le,Me,Re,qe)=>{if(O){if(be.length===Me.length&&be.every((nt,ft)=>nt===Me[ft]))return}else if(be===Me)return;T&&T(Le,Me,Re,qe),ke(Me)},ut=$.useRef(!1),Et=(Le,Me,Re="selectOption",qe="options")=>{let nt=Re,ft=Me;if(O){ft=Array.isArray(be)?be.slice():[];const pt=pO(ft,Gt=>k(Me,Gt));pt===-1?ft.push(Me):qe!=="freeSolo"&&(ft.splice(pt,1),nt="removeOption")}pe(Le,ft),mt(Le,ft,nt,{option:Me}),!d&&(!Le||!Le.ctrlKey&&!Le.metaKey)&&yt(Le,nt),(a===!0||a==="touch"&&ut.current||a==="mouse"&&!ut.current)&&he.current.blur()};function et(Le,Me){if(Le===-1)return-1;let Re=Le;for(;;){if(Me==="next"&&Re===be.length||Me==="previous"&&Re===-1)return-1;const qe=ye.querySelector(`[data-tag-index="${Re}"]`);if(!qe||!qe.hasAttribute("tabindex")||qe.disabled||qe.getAttribute("aria-disabled")==="true")Re+=Me==="next"?1:-1;else return Re}}const ct=(Le,Me)=>{if(!O)return;W===""&&yt(Le,"toggleInput");let Re=te;te===-1?W===""&&Me==="previous"&&(Re=be.length-1):(Re+=Me==="next"?1:-1,Re<0&&(Re=0),Re===be.length&&(Re=-1)),Re=et(Re,Me),le(Re),me(Re)},_t=Le=>{se.current=!0,ee(""),P&&P(Le,"","clear"),mt(Le,O?[]:null,"clear")},xe=Le=>Me=>{if(Le.onKeyDown&&Le.onKeyDown(Me),!Me.defaultMuiPrevented&&(te!==-1&&["ArrowLeft","ArrowRight"].indexOf(Me.key)===-1&&(le(-1),me(-1)),Me.which!==229))switch(Me.key){case"Home":j&&w&&(Me.preventDefault(),Xe({diff:"start",direction:"next",reason:"keyboard",event:Me}));break;case"End":j&&w&&(Me.preventDefault(),Xe({diff:"end",direction:"previous",reason:"keyboard",event:Me}));break;case"PageUp":Me.preventDefault(),Xe({diff:-Fj,direction:"previous",reason:"keyboard",event:Me}),Ye(Me);break;case"PageDown":Me.preventDefault(),Xe({diff:Fj,direction:"next",reason:"keyboard",event:Me}),Ye(Me);break;case"ArrowDown":Me.preventDefault(),Xe({diff:1,direction:"next",reason:"keyboard",event:Me}),Ye(Me);break;case"ArrowUp":Me.preventDefault(),Xe({diff:-1,direction:"previous",reason:"keyboard",event:Me}),Ye(Me);break;case"ArrowLeft":ct(Me,"previous");break;case"ArrowRight":ct(Me,"next");break;case"Enter":if(_e.current!==-1&&j){const Re=M[_e.current],qe=_?_(Re):!1;if(Me.preventDefault(),qe)return;Et(Me,Re,"selectOption"),r&&he.current.setSelectionRange(he.current.value.length,he.current.value.length)}else y&&W!==""&&Oe===!1&&(O&&Me.preventDefault(),Et(Me,W,"createOption","freeSolo"));break;case"Escape":j?(Me.preventDefault(),Me.stopPropagation(),yt(Me,"escape")):l&&(W!==""||O&&be.length>0)&&(Me.preventDefault(),Me.stopPropagation(),_t(Me));break;case"Backspace":if(O&&!J&&W===""&&be.length>0){const Re=te===-1?be.length-1:te,qe=be.slice();qe.splice(Re,1),mt(Me,qe,"removeOption",{option:be[Re]})}break;case"Delete":if(O&&!J&&W===""&&be.length>0&&te!==-1){const Re=te,qe=be.slice();qe.splice(Re,1),mt(Me,qe,"removeOption",{option:be[Re]})}break}},ie=Le=>{ge(!0),N&&!se.current&&Ye(Le)},ue=Le=>{if(t(ae)){he.current.focus();return}ge(!1),Y.current=!0,se.current=!1,o&&_e.current!==-1&&j?Et(Le,M[_e.current],"blur"):o&&y&&W!==""?Et(Le,W,"blur","freeSolo"):s&&pe(Le,be),yt(Le,"blur")},E=Le=>{const Me=Le.target.value;W!==Me&&(ee(Me),Ae(!1),P&&P(Le,Me,"input")),Me===""?!f&&!O&&mt(Le,null,"clear"):Ye(Le)},F=Le=>{const Me=Number(Le.currentTarget.getAttribute("data-option-index"));_e.current!==Me&&Pe({event:Le,index:Me,reason:"mouse"})},U=Le=>{Pe({event:Le,index:Number(Le.currentTarget.getAttribute("data-option-index")),reason:"touch"}),ut.current=!0},X=Le=>{const Me=Number(Le.currentTarget.getAttribute("data-option-index"));Et(Le,M[Me],"selectOption"),ut.current=!1},Q=Le=>Me=>{const Re=be.slice();Re.splice(Le,1),mt(Me,Re,"removeOption",{option:be[Le]})},fe=Le=>{ve?yt(Le,"toggleInput"):Ye(Le)},we=Le=>{Le.currentTarget.contains(Le.target)&&Le.target.getAttribute("id")!==Z&&Le.preventDefault()},Se=Le=>{Le.currentTarget.contains(Le.target)&&(he.current.focus(),ne&&Y.current&&he.current.selectionEnd-he.current.selectionStart===0&&he.current.select(),Y.current=!1)},ze=Le=>{!p&&(W===""||!ve)&&fe(Le)};let Fe=y&&W.length>0;Fe=Fe||(O?be.length>0:be!==null);let Ke=M;return x&&(Ke=M.reduce((Le,Me,Re)=>{const qe=x(Me);return Le.length>0&&Le[Le.length-1].group===qe?Le[Le.length-1].options.push(Me):Le.push({key:Re,index:Re,group:qe,options:[Me]}),Le},[])),p&&Ee&&ue(),{getRootProps:(Le={})=>I({"aria-owns":q?`${Z}-listbox`:null},Le,{onKeyDown:xe(Le),onMouseDown:we,onClick:Se}),getInputLabelProps:()=>({id:`${Z}-label`,htmlFor:Z}),getInputProps:()=>({id:Z,value:W,onBlur:ue,onFocus:ie,onChange:E,onMouseDown:ze,"aria-activedescendant":j?"":null,"aria-autocomplete":r?"both":"list","aria-controls":q?`${Z}-listbox`:void 0,"aria-expanded":q,autoComplete:"off",ref:he,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:p}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:_t}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:fe}),getTagProps:({index:Le})=>I({key:Le,"data-tag-index":Le,tabIndex:-1},!J&&{onDelete:Q(Le)}),getListboxProps:()=>({role:"listbox",id:`${Z}-listbox`,"aria-labelledby":`${Z}-label`,ref:Je,onMouseDown:Le=>{Le.preventDefault()}}),getOptionProps:({index:Le,option:Me})=>{const Re=(O?be:[be]).some(nt=>nt!=null&&k(Me,nt)),qe=_?_(Me):!1;return{key:ce(Me),tabIndex:-1,role:"option",id:`${Z}-option-${Le}`,onMouseMove:F,onClick:X,onTouchStart:U,"data-option-index":Le,"aria-disabled":qe,"aria-selected":Re}},id:Z,inputValue:W,value:be,dirty:Fe,expanded:j&&ye,popupOpen:j,focused:Ee||te!==-1,anchorEl:ye,setAnchorEl:re,focusedTag:te,groupedOptions:Ke}}const exe=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],txe=Ie(k_e,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),nxe=$.forwardRef(function(t,n){var r;const i=hM(),o=st({props:t,name:"MuiPopper"}),{anchorEl:a,component:s,components:l,componentsProps:c,container:u,disablePortal:f,keepMounted:d,modifiers:p,open:h,placement:g,popperOptions:v,popperRef:m,transition:y,slots:_,slotProps:b}=o,x=We(o,exe),w=(r=_==null?void 0:_.root)!=null?r:l==null?void 0:l.Root,S=I({anchorEl:a,container:u,disablePortal:f,keepMounted:d,modifiers:p,open:h,placement:g,popperOptions:v,popperRef:m,transition:y},x);return G.jsx(txe,I({as:s,direction:i==null?void 0:i.direction,slots:{root:w},slotProps:b??c},S,{ref:n}))}),$_=nxe;function sJ(e){return it("MuiListSubheader",e)}const rxe=at("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]),ixe=rxe,oxe=["className","color","component","disableGutters","disableSticky","inset"],axe=e=>{const{classes:t,color:n,disableGutters:r,inset:i,disableSticky:o}=e,a={root:["root",n!=="default"&&`color${De(n)}`,!r&&"gutters",i&&"inset",!o&&"sticky"]};return ot(a,sJ,t)},sxe=Ie("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${De(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>I({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),lJ=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiListSubheader"}),{className:i,color:o="default",component:a="li",disableGutters:s=!1,disableSticky:l=!1,inset:c=!1}=r,u=We(r,oxe),f=I({},r,{color:o,component:a,disableGutters:s,disableSticky:l,inset:c}),d=axe(f);return G.jsx(sxe,I({as:a,className:je(d.root,i),ref:n,ownerState:f},u))});lJ.muiSkipListHighlight=!0;const cJ=lJ,lxe=fr(G.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function uJ(e){return it("MuiChip",e)}const cxe=at("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),In=cxe,uxe=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],fxe=e=>{const{classes:t,disabled:n,size:r,color:i,iconColor:o,onDelete:a,clickable:s,variant:l}=e,c={root:["root",l,n&&"disabled",`size${De(r)}`,`color${De(i)}`,s&&"clickable",s&&`clickableColor${De(i)}`,a&&"deletable",a&&`deletableColor${De(i)}`,`${l}${De(i)}`],label:["label",`label${De(r)}`],avatar:["avatar",`avatar${De(r)}`,`avatarColor${De(i)}`],icon:["icon",`icon${De(r)}`,`iconColor${De(o)}`],deleteIcon:["deleteIcon",`deleteIcon${De(r)}`,`deleteIconColor${De(i)}`,`deleteIcon${De(l)}Color${De(i)}`]};return ot(c,uJ,t)},dxe=Ie("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:i,clickable:o,onDelete:a,size:s,variant:l}=n;return[{[`& .${In.avatar}`]:t.avatar},{[`& .${In.avatar}`]:t[`avatar${De(s)}`]},{[`& .${In.avatar}`]:t[`avatarColor${De(r)}`]},{[`& .${In.icon}`]:t.icon},{[`& .${In.icon}`]:t[`icon${De(s)}`]},{[`& .${In.icon}`]:t[`iconColor${De(i)}`]},{[`& .${In.deleteIcon}`]:t.deleteIcon},{[`& .${In.deleteIcon}`]:t[`deleteIcon${De(s)}`]},{[`& .${In.deleteIcon}`]:t[`deleteIconColor${De(r)}`]},{[`& .${In.deleteIcon}`]:t[`deleteIcon${De(l)}Color${De(r)}`]},t.root,t[`size${De(s)}`],t[`color${De(r)}`],o&&t.clickable,o&&r!=="default"&&t[`clickableColor${De(r)})`],a&&t.deletable,a&&r!=="default"&&t[`deletableColor${De(r)}`],t[l],t[`${l}${De(r)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return I({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${In.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${In.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${In.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${In.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${In.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${In.icon}`]:I({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&I({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},t.color!=="default"&&{color:"inherit"})),[`& .${In.deleteIcon}`]:I({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:Ot(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Ot(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:Ot(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${In.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Ot(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${In.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>I({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Ot(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${In.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Ot(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${In.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>I({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${In.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${In.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${In.avatar}`]:{marginLeft:4},[`& .${In.avatarSmall}`]:{marginLeft:2},[`& .${In.icon}`]:{marginLeft:4},[`& .${In.iconSmall}`]:{marginLeft:2},[`& .${In.deleteIcon}`]:{marginRight:5},[`& .${In.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Ot(e.palette[t.color].main,.7)}`,[`&.${In.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${In.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Ot(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${In.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Ot(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),pxe=Ie("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${De(r)}`]]}})(({ownerState:e})=>I({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.variant==="outlined"&&{paddingLeft:11,paddingRight:11},e.size==="small"&&{paddingLeft:8,paddingRight:8},e.size==="small"&&e.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function jj(e){return e.key==="Backspace"||e.key==="Delete"}const hxe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiChip"}),{avatar:i,className:o,clickable:a,color:s="default",component:l,deleteIcon:c,disabled:u=!1,icon:f,label:d,onClick:p,onDelete:h,onKeyDown:g,onKeyUp:v,size:m="medium",variant:y="filled",tabIndex:_,skipFocusWhenDisabled:b=!1}=r,x=We(r,uxe),w=$.useRef(null),S=En(w,n),A=H=>{H.stopPropagation(),h&&h(H)},C=H=>{H.currentTarget===H.target&&jj(H)&&H.preventDefault(),g&&g(H)},k=H=>{H.currentTarget===H.target&&(h&&jj(H)?h(H):H.key==="Escape"&&w.current&&w.current.blur()),v&&v(H)},O=a!==!1&&p?!0:a,T=O||h?yi:l||"div",B=I({},r,{component:T,disabled:u,size:m,color:s,iconColor:$.isValidElement(f)&&f.props.color||s,onDelete:!!h,clickable:O,variant:y}),R=fxe(B),P=T===yi?I({component:l||"div",focusVisibleClassName:R.focusVisible},h&&{disableRipple:!0}):{};let D=null;h&&(D=c&&$.isValidElement(c)?$.cloneElement(c,{className:je(c.props.className,R.deleteIcon),onClick:A}):G.jsx(lxe,{className:je(R.deleteIcon),onClick:A}));let z=null;i&&$.isValidElement(i)&&(z=$.cloneElement(i,{className:je(R.avatar,i.props.className)}));let N=null;return f&&$.isValidElement(f)&&(N=$.cloneElement(f,{className:je(R.icon,f.props.className)})),G.jsxs(dxe,I({as:T,className:je(R.root,o),disabled:O&&u?!0:void 0,onClick:p,onKeyDown:C,onKeyUp:k,ref:S,tabIndex:b&&u?-1:_,ownerState:B},P,x,{children:[z||N,G.jsx(pxe,{className:je(R.label),ownerState:B,children:d}),D]}))}),fJ=hxe;function qu({props:e,states:t,muiFormControl:n}){return t.reduce((r,i)=>(r[i]=e[i],n&&typeof e[i]>"u"&&(r[i]=n[i]),r),{})}const mxe=$.createContext(void 0),SM=mxe;function Xs(){return $.useContext(SM)}function JD(e){return G.jsx(nve,I({},e,{defaultTheme:yM,themeId:Mc}))}function zj(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function HC(e,t=!1){return e&&(zj(e.value)&&e.value!==""||t&&zj(e.defaultValue)&&e.defaultValue!=="")}function gxe(e){return e.startAdornment}function dJ(e){return it("MuiInputBase",e)}const vxe=at("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),aa=vxe,yxe=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],CM=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${De(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},AM=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},bxe=e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:a,formControl:s,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:f,size:d,startAdornment:p,type:h}=e,g={root:["root",`color${De(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",a&&"focused",s&&"formControl",d&&d!=="medium"&&`size${De(d)}`,u&&"multiline",p&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",f&&"readOnly"],input:["input",r&&"disabled",h==="search"&&"inputTypeSearch",u&&"inputMultiline",d==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",p&&"inputAdornedStart",o&&"inputAdornedEnd",f&&"readOnly"]};return ot(g,dJ,t)},PM=Ie("div",{name:"MuiInputBase",slot:"Root",overridesResolver:CM})(({theme:e,ownerState:t})=>I({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${aa.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&I({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),MM=Ie("input",{name:"MuiInputBase",slot:"Input",overridesResolver:AM})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",r=I({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),i={opacity:"0 !important"},o=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return I({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${aa.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${aa.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),_xe=G.jsx(JD,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),xxe=$.forwardRef(function(t,n){var r;const i=st({props:t,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:a,autoFocus:s,className:l,components:c={},componentsProps:u={},defaultValue:f,disabled:d,disableInjectingGlobalStyles:p,endAdornment:h,fullWidth:g=!1,id:v,inputComponent:m="input",inputProps:y={},inputRef:_,maxRows:b,minRows:x,multiline:w=!1,name:S,onBlur:A,onChange:C,onClick:k,onFocus:O,onKeyDown:T,onKeyUp:B,placeholder:R,readOnly:P,renderSuffix:D,rows:z,slotProps:N={},slots:H={},startAdornment:J,type:ne="text",value:oe}=i,Z=We(i,yxe),ce=y.value!=null?y.value:oe,{current:se}=$.useRef(ce!=null),Y=$.useRef(),he=$.useCallback(M=>{},[]),ae=En(Y,_,y.ref,he),[ye,re]=$.useState(!1),te=Xs(),le=qu({props:i,muiFormControl:te,states:["color","disabled","error","hiddenLabel","size","required","filled"]});le.focused=te?te.focused:ye,$.useEffect(()=>{!te&&d&&ye&&(re(!1),A&&A())},[te,d,ye,A]);const de=te&&te.onFilled,_e=te&&te.onEmpty,be=$.useCallback(M=>{HC(M)?de&&de():_e&&_e()},[de,_e]);vi(()=>{se&&be({value:ce})},[ce,be,se]);const ke=M=>{if(le.disabled){M.stopPropagation();return}O&&O(M),y.onFocus&&y.onFocus(M),te&&te.onFocus?te.onFocus(M):re(!0)},W=M=>{A&&A(M),y.onBlur&&y.onBlur(M),te&&te.onBlur?te.onBlur(M):re(!1)},ee=(M,...L)=>{if(!se){const q=M.target||Y.current;if(q==null)throw new Error(Aa(1));be({value:q.value})}y.onChange&&y.onChange(M,...L),C&&C(M,...L)};$.useEffect(()=>{be(Y.current)},[]);const Ee=M=>{Y.current&&M.currentTarget===M.target&&Y.current.focus(),k&&k(M)};let ge=m,pe=y;w&&ge==="input"&&(z?pe=I({type:void 0,minRows:z,maxRows:z},pe):pe=I({type:void 0,maxRows:b,minRows:x},pe),ge=iJ);const ve=M=>{be(M.animationName==="mui-auto-fill-cancel"?Y.current:{value:"x"})};$.useEffect(()=>{te&&te.setAdornedStart(!!J)},[te,J]);const $e=I({},i,{color:le.color||"primary",disabled:le.disabled,endAdornment:h,error:le.error,focused:le.focused,formControl:te,fullWidth:g,hiddenLabel:le.hiddenLabel,multiline:w,size:le.size,startAdornment:J,type:ne}),Ne=bxe($e),Ae=H.root||c.Root||PM,Oe=N.root||u.root||{},j=H.input||c.Input||MM;return pe=I({},pe,(r=N.input)!=null?r:u.input),G.jsxs($.Fragment,{children:[!p&&_xe,G.jsxs(Ae,I({},Oe,!wl(Ae)&&{ownerState:I({},$e,Oe.ownerState)},{ref:n,onClick:Ee},Z,{className:je(Ne.root,Oe.className,l,P&&"MuiInputBase-readOnly"),children:[J,G.jsx(SM.Provider,{value:null,children:G.jsx(j,I({ownerState:$e,"aria-invalid":le.error,"aria-describedby":o,autoComplete:a,autoFocus:s,defaultValue:f,disabled:le.disabled,id:v,onAnimationStart:ve,name:S,placeholder:R,readOnly:P,required:le.required,rows:z,value:ce,onKeyDown:T,onKeyUp:B,type:ne},pe,!wl(j)&&{as:ge,ownerState:I({},$e,pe.ownerState)},{ref:ae,className:je(Ne.input,pe.className,P&&"MuiInputBase-readOnly"),onBlur:W,onChange:ee,onFocus:ke}))}),h,D?D(I({},le,{startAdornment:J})):null]}))]})}),D_=xxe;function pJ(e){return it("MuiInput",e)}const wxe=I({},aa,at("MuiInput",["root","underline","input"])),du=wxe;function hJ(e){return it("MuiOutlinedInput",e)}const Sxe=I({},aa,at("MuiOutlinedInput",["root","notchedOutline","input"])),cl=Sxe;function mJ(e){return it("MuiFilledInput",e)}const Cxe=I({},aa,at("MuiFilledInput",["root","underline","input"])),sa=Cxe,QD=fr(G.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function gJ(e){return it("MuiAutocomplete",e)}const Axe=at("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),gn=Axe;var Uj,Vj;const Pxe=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],Mxe=["ref"],Exe=e=>{const{classes:t,disablePortal:n,expanded:r,focused:i,fullWidth:o,hasClearIcon:a,hasPopupIcon:s,inputFocused:l,popupOpen:c,size:u}=e,f={root:["root",r&&"expanded",i&&"focused",o&&"fullWidth",a&&"hasClearIcon",s&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${De(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return ot(f,gJ,t)},Txe=Ie("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:i,hasPopupIcon:o,inputFocused:a,size:s}=n;return[{[`& .${gn.tag}`]:t.tag},{[`& .${gn.tag}`]:t[`tagSize${De(s)}`]},{[`& .${gn.inputRoot}`]:t.inputRoot},{[`& .${gn.input}`]:t.input},{[`& .${gn.input}`]:a&&t.inputFocused},t.root,r&&t.fullWidth,o&&t.hasPopupIcon,i&&t.hasClearIcon]}})(({ownerState:e})=>I({[`&.${gn.focused} .${gn.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${gn.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${gn.tag}`]:I({margin:3,maxWidth:"calc(100% - 6px)"},e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${gn.inputRoot}`]:{flexWrap:"wrap",[`.${gn.hasPopupIcon}&, .${gn.hasClearIcon}&`]:{paddingRight:26+4},[`.${gn.hasPopupIcon}.${gn.hasClearIcon}&`]:{paddingRight:52+4},[`& .${gn.input}`]:{width:0,minWidth:30}},[`& .${du.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${du.root}.${aa.sizeSmall}`]:{[`& .${du.input}`]:{padding:"2px 4px 3px 0"}},[`& .${cl.root}`]:{padding:9,[`.${gn.hasPopupIcon}&, .${gn.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${gn.hasPopupIcon}.${gn.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${gn.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${gn.endAdornment}`]:{right:9}},[`& .${cl.root}.${aa.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${gn.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${sa.root}`]:{paddingTop:19,paddingLeft:8,[`.${gn.hasPopupIcon}&, .${gn.hasClearIcon}&`]:{paddingRight:26+4+9},[`.${gn.hasPopupIcon}.${gn.hasClearIcon}&`]:{paddingRight:52+4+9},[`& .${sa.input}`]:{padding:"7px 4px"},[`& .${gn.endAdornment}`]:{right:9}},[`& .${sa.root}.${aa.sizeSmall}`]:{paddingBottom:1,[`& .${sa.input}`]:{padding:"2.5px 4px"}},[`& .${aa.hiddenLabel}`]:{paddingTop:8},[`& .${sa.root}.${aa.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${gn.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${sa.root}.${aa.hiddenLabel}.${aa.sizeSmall}`]:{[`& .${gn.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${gn.input}`]:I({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})})),Oxe=Ie("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),Ixe=Ie(Eo,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),Rxe=Ie(Eo,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>I({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})(({ownerState:e})=>I({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})),kxe=Ie($_,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${gn.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})(({theme:e,ownerState:t})=>I({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"})),Lxe=Ie(us,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>I({},e.typography.body1,{overflow:"auto"})),$xe=Ie("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Dxe=Ie("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),Bxe=Ie("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${gn.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${gn.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${gn.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${gn.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${gn.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),Nxe=Ie(cJ,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),Fxe=Ie("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${gn.option}`]:{paddingLeft:24}}),jxe=$.forwardRef(function(t,n){var r,i,o,a;const s=st({props:t,name:"MuiAutocomplete"}),{autoComplete:l=!1,autoHighlight:c=!1,autoSelect:u=!1,blurOnSelect:f=!1,ChipProps:d,className:p,clearIcon:h=Uj||(Uj=G.jsx(jZ,{fontSize:"small"})),clearOnBlur:g=!s.freeSolo,clearOnEscape:v=!1,clearText:m="Clear",closeText:y="Close",componentsProps:_={},defaultValue:b=s.multiple?[]:null,disableClearable:x=!1,disableCloseOnSelect:w=!1,disabled:S=!1,disabledItemsFocusable:A=!1,disableListWrap:C=!1,disablePortal:k=!1,filterSelectedOptions:O=!1,forcePopupIcon:T="auto",freeSolo:B=!1,fullWidth:R=!1,getLimitTagsText:P=Re=>`+${Re}`,getOptionLabel:D,groupBy:z,handleHomeEndKeys:N=!s.freeSolo,includeInputInList:H=!1,limitTags:J=-1,ListboxComponent:ne="ul",ListboxProps:oe,loading:Z=!1,loadingText:ce="Loading",multiple:se=!1,noOptionsText:Y="No options",openOnFocus:he=!1,openText:ae="Open",PaperComponent:ye=us,PopperComponent:re=$_,popupIcon:te=Vj||(Vj=G.jsx(QD,{})),readOnly:le=!1,renderGroup:de,renderInput:_e,renderOption:be,renderTags:ke,selectOnFocus:W=!s.freeSolo,size:ee="medium",slotProps:Ee={}}=s,ge=We(s,Pxe),{getRootProps:pe,getInputProps:ve,getInputLabelProps:$e,getPopupIndicatorProps:Ne,getClearProps:Ae,getTagProps:Oe,getListboxProps:j,getOptionProps:M,value:L,dirty:q,expanded:me,id:Te,popupOpen:Pe,focused:Xe,focusedTag:He,anchorEl:Ve,setAnchorEl:Je,inputValue:Ye,groupedOptions:yt}=aJ(I({},s,{componentName:"Autocomplete"})),mt=!x&&!S&&q&&!le,ut=(!B||T===!0)&&T!==!1,{onMouseDown:Et}=ve(),{ref:et}=oe??{},ct=j(),{ref:_t}=ct,xe=We(ct,Mxe),ie=En(_t,et),E=D||(Re=>{var qe;return(qe=Re.label)!=null?qe:Re}),F=I({},s,{disablePortal:k,expanded:me,focused:Xe,fullWidth:R,getOptionLabel:E,hasClearIcon:mt,hasPopupIcon:ut,inputFocused:He===-1,popupOpen:Pe,size:ee}),U=Exe(F);let X;if(se&&L.length>0){const Re=qe=>I({className:U.tag,disabled:S},Oe(qe));ke?X=ke(L,Re,F):X=L.map((qe,nt)=>G.jsx(fJ,I({label:E(qe),size:ee},Re({index:nt}),d)))}if(J>-1&&Array.isArray(X)){const Re=X.length-J;!Xe&&Re>0&&(X=X.splice(0,J),X.push(G.jsx("span",{className:U.tag,children:P(Re)},X.length)))}const fe=de||(Re=>G.jsxs("li",{children:[G.jsx(Nxe,{className:U.groupLabel,ownerState:F,component:"div",children:Re.group}),G.jsx(Fxe,{className:U.groupUl,ownerState:F,children:Re.children})]},Re.key)),Se=be||((Re,qe)=>G.jsx("li",I({},Re,{children:E(qe)}))),ze=(Re,qe)=>{const nt=M({option:Re,index:qe});return Se(I({},nt,{className:U.option}),Re,{selected:nt["aria-selected"],index:qe,inputValue:Ye},F)},Fe=(r=Ee.clearIndicator)!=null?r:_.clearIndicator,Ke=(i=Ee.paper)!=null?i:_.paper,Le=(o=Ee.popper)!=null?o:_.popper,Me=(a=Ee.popupIndicator)!=null?a:_.popupIndicator;return G.jsxs($.Fragment,{children:[G.jsx(Txe,I({ref:n,className:je(U.root,p),ownerState:F},pe(ge),{children:_e({id:Te,disabled:S,fullWidth:!0,size:ee==="small"?"small":void 0,InputLabelProps:$e(),InputProps:I({ref:Je,className:U.inputRoot,startAdornment:X,onClick:Re=>{Re.target===Re.currentTarget&&Et(Re)}},(mt||ut)&&{endAdornment:G.jsxs(Oxe,{className:U.endAdornment,ownerState:F,children:[mt?G.jsx(Ixe,I({},Ae(),{"aria-label":m,title:m,ownerState:F},Fe,{className:je(U.clearIndicator,Fe==null?void 0:Fe.className),children:h})):null,ut?G.jsx(Rxe,I({},Ne(),{disabled:S,"aria-label":Pe?y:ae,title:Pe?y:ae,ownerState:F},Me,{className:je(U.popupIndicator,Me==null?void 0:Me.className),children:te})):null]})}),inputProps:I({className:U.input,disabled:S,readOnly:le},ve())})})),Ve?G.jsx(kxe,I({as:re,disablePortal:k,style:{width:Ve?Ve.clientWidth:null},ownerState:F,role:"presentation",anchorEl:Ve,open:Pe},Le,{className:je(U.popper,Le==null?void 0:Le.className),children:G.jsxs(Lxe,I({ownerState:F,as:ye},Ke,{className:je(U.paper,Ke==null?void 0:Ke.className),children:[Z&&yt.length===0?G.jsx($xe,{className:U.loading,ownerState:F,children:ce}):null,yt.length===0&&!B&&!Z?G.jsx(Dxe,{className:U.noOptions,ownerState:F,role:"presentation",onMouseDown:Re=>{Re.preventDefault()},children:Y}):null,yt.length>0?G.jsx(Bxe,I({as:ne,className:U.listbox,ownerState:F},xe,oe,{ref:ie,children:yt.map((Re,qe)=>z?fe({key:Re.key,group:Re.group,children:Re.options.map((nt,ft)=>ze(nt,Re.index+ft))}):ze(Re,qe))})):null]}))})):null]})}),zxe=jxe,Uxe=fr(G.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function vJ(e){return it("MuiAvatar",e)}const Vxe=at("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]),yJ=Vxe,Hxe=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],Gxe=e=>{const{classes:t,variant:n,colorDefault:r}=e;return ot({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},vJ,t)},Wxe=Ie("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>I({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.variant==="square"&&{borderRadius:0},t.colorDefault&&I({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}))),qxe=Ie("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Xxe=Ie(Uxe,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Yxe({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){const[i,o]=$.useState(!1);return $.useEffect(()=>{if(!n&&!r)return;o(!1);let a=!0;const s=new Image;return s.onload=()=>{a&&o("loaded")},s.onerror=()=>{a&&o("error")},s.crossOrigin=e,s.referrerPolicy=t,s.src=n,r&&(s.srcset=r),()=>{a=!1}},[e,t,n,r]),i}const Kxe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiAvatar"}),{alt:i,children:o,className:a,component:s="div",imgProps:l,sizes:c,src:u,srcSet:f,variant:d="circular"}=r,p=We(r,Hxe);let h=null;const g=Yxe(I({},l,{src:u,srcSet:f})),v=u||f,m=v&&g!=="error",y=I({},r,{colorDefault:!m,component:s,variant:d}),_=Gxe(y);return m?h=G.jsx(qxe,I({alt:i,srcSet:f,src:u,sizes:c,ownerState:y,className:_.img},l)):o!=null?h=o:v&&i?h=i[0]:h=G.jsx(Xxe,{ownerState:y,className:_.fallback}),G.jsx(Wxe,I({as:s,ownerState:y,className:je(_.root,a),ref:n},p,{children:h}))}),bJ=Kxe;function _J(e){return it("MuiAvatarGroup",e)}const Zxe=at("MuiAvatarGroup",["root","avatar"]),xJ=Zxe,Jxe=["children","className","component","componentsProps","max","slotProps","spacing","total","variant"],Hj={small:-16,medium:null},Qxe=e=>{const{classes:t}=e;return ot({root:["root"],avatar:["avatar"]},_J,t)},ewe=Ie("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,t)=>I({[`& .${xJ.avatar}`]:t.avatar},t.root)})(({theme:e})=>({[`& .${yJ.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"})),twe=Ie(bJ,{name:"MuiAvatarGroup",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})(({theme:e})=>({border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}})),nwe=$.forwardRef(function(t,n){var r;const i=st({props:t,name:"MuiAvatarGroup"}),{children:o,className:a,component:s="div",componentsProps:l={},max:c=5,slotProps:u={},spacing:f="medium",total:d,variant:p="circular"}=i,h=We(i,Jxe);let g=c<2?2:c;const v=I({},i,{max:c,spacing:f,component:s,variant:p}),m=Qxe(v),y=$.Children.toArray(o).filter(A=>$.isValidElement(A)),_=d||y.length;_===g&&(g+=1),g=Math.min(_+1,g);const b=Math.min(y.length,g-1),x=Math.max(_-g,_-b,0),w=f&&Hj[f]!==void 0?Hj[f]:-f,S=(r=u.additionalAvatar)!=null?r:l.additionalAvatar;return G.jsxs(ewe,I({as:s,ownerState:v,className:je(m.root,a),ref:n},h,{children:[x?G.jsxs(twe,I({ownerState:v,variant:p},S,{className:je(m.avatar,S==null?void 0:S.className),style:I({marginLeft:w},S==null?void 0:S.style),children:["+",x]})):null,y.slice(0,b).reverse().map((A,C)=>$.cloneElement(A,{className:je(A.props.className,m.avatar),style:I({marginLeft:C===b-1?void 0:w},A.props.style),variant:A.props.variant||p}))]}))}),rwe=nwe,iwe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],owe={entering:{opacity:1},entered:{opacity:1}},awe=$.forwardRef(function(t,n){const r=ir(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:s,easing:l,in:c,onEnter:u,onEntered:f,onEntering:d,onExit:p,onExited:h,onExiting:g,style:v,timeout:m=i,TransitionComponent:y=R_}=t,_=We(t,iwe),b=$.useRef(null),x=En(b,s.ref,n),w=R=>P=>{if(R){const D=b.current;P===void 0?R(D):R(D,P)}},S=w(d),A=w((R,P)=>{bM(R);const D=Il({style:v,timeout:m,easing:l},{mode:"enter"});R.style.webkitTransition=r.transitions.create("opacity",D),R.style.transition=r.transitions.create("opacity",D),u&&u(R,P)}),C=w(f),k=w(g),O=w(R=>{const P=Il({style:v,timeout:m,easing:l},{mode:"exit"});R.style.webkitTransition=r.transitions.create("opacity",P),R.style.transition=r.transitions.create("opacity",P),p&&p(R)}),T=w(h),B=R=>{o&&o(b.current,R)};return G.jsx(y,I({appear:a,in:c,nodeRef:b,onEnter:A,onEntered:C,onEntering:S,onExit:O,onExited:T,onExiting:k,addEndListener:B,timeout:m},_,{children:(R,P)=>$.cloneElement(s,I({style:I({opacity:0,visibility:R==="exited"&&!c?"hidden":void 0},owe[R],v,s.props.style),ref:x},P))}))}),eB=awe;function wJ(e){return it("MuiBackdrop",e)}const swe=at("MuiBackdrop",["root","invisible"]),lwe=swe,cwe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],uwe=e=>{const{classes:t,invisible:n}=e;return ot({root:["root",n&&"invisible"]},wJ,t)},fwe=Ie("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>I({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),dwe=$.forwardRef(function(t,n){var r,i,o;const a=st({props:t,name:"MuiBackdrop"}),{children:s,className:l,component:c="div",components:u={},componentsProps:f={},invisible:d=!1,open:p,slotProps:h={},slots:g={},TransitionComponent:v=eB,transitionDuration:m}=a,y=We(a,cwe),_=I({},a,{component:c,invisible:d}),b=uwe(_),x=(r=h.root)!=null?r:f.root;return G.jsx(v,I({in:p,timeout:m},y,{children:G.jsx(fwe,I({"aria-hidden":!0},x,{as:(i=(o=g.root)!=null?o:u.Root)!=null?i:c,className:je(b.root,l,x==null?void 0:x.className),ownerState:I({},_,x==null?void 0:x.ownerState),classes:b,ref:n,children:s}))}))}),tB=dwe;function SJ(e){return it("MuiBadge",e)}const pwe=at("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),ru=pwe,hwe=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],hO=10,mO=4,mwe=e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:a={}}=e,s={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${De(n.vertical)}${De(n.horizontal)}`,`anchorOrigin${De(n.vertical)}${De(n.horizontal)}${De(i)}`,`overlap${De(i)}`,t!=="default"&&`color${De(t)}`]};return ot(s,SJ,a)},gwe=Ie("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),vwe=Ie("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${De(n.anchorOrigin.vertical)}${De(n.anchorOrigin.horizontal)}${De(n.overlap)}`],n.color!=="default"&&t[`color${De(n.color)}`],n.invisible&&t.invisible]}})(({theme:e,ownerState:t})=>I({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:hO*2,lineHeight:1,padding:"0 6px",height:hO*2,borderRadius:hO,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.variant==="dot"&&{borderRadius:mO,height:mO*2,minWidth:mO*2,padding:0},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ru.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular"&&{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ru.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ru.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular"&&{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ru.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ru.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular"&&{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ru.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}},t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ru.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}},t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular"&&{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ru.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}},t.invisible&&{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})})),ywe=$.forwardRef(function(t,n){var r,i,o,a,s,l;const c=st({props:t,name:"MuiBadge"}),{anchorOrigin:u={vertical:"top",horizontal:"right"},className:f,component:d,components:p={},componentsProps:h={},children:g,overlap:v="rectangular",color:m="default",invisible:y=!1,max:_=99,badgeContent:b,slots:x,slotProps:w,showZero:S=!1,variant:A="standard"}=c,C=We(c,hwe),{badgeContent:k,invisible:O,max:T,displayValue:B}=u1e({max:_,invisible:y,badgeContent:b,showZero:S}),R=uD({anchorOrigin:u,color:m,overlap:v,variant:A,badgeContent:b}),P=O||k==null&&A!=="dot",{color:D=m,overlap:z=v,anchorOrigin:N=u,variant:H=A}=P?R:c,J=H!=="dot"?B:void 0,ne=I({},c,{badgeContent:k,invisible:P,max:T,displayValue:J,showZero:S,anchorOrigin:N,color:D,overlap:z,variant:H}),oe=mwe(ne),Z=(r=(i=x==null?void 0:x.root)!=null?i:p.Root)!=null?r:gwe,ce=(o=(a=x==null?void 0:x.badge)!=null?a:p.Badge)!=null?o:vwe,se=(s=w==null?void 0:w.root)!=null?s:h.root,Y=(l=w==null?void 0:w.badge)!=null?l:h.badge,he=Nr({elementType:Z,externalSlotProps:se,externalForwardedProps:C,additionalProps:{ref:n,as:d},ownerState:ne,className:je(se==null?void 0:se.className,oe.root,f)}),ae=Nr({elementType:ce,externalSlotProps:Y,ownerState:ne,className:je(oe.badge,Y==null?void 0:Y.className)});return G.jsxs(Z,I({},he,{children:[g,G.jsx(ce,I({},ae,{children:J}))]}))}),bwe=ywe;function CJ(e){return it("MuiBottomNavigation",e)}const _we=at("MuiBottomNavigation",["root"]),xwe=_we,wwe=["children","className","component","onChange","showLabels","value"],Swe=e=>{const{classes:t}=e;return ot({root:["root"]},CJ,t)},Cwe=Ie("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(e.vars||e).palette.background.paper})),Awe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiBottomNavigation"}),{children:i,className:o,component:a="div",onChange:s,showLabels:l=!1,value:c}=r,u=We(r,wwe),f=I({},r,{component:a,showLabels:l}),d=Swe(f);return G.jsx(Cwe,I({as:a,className:je(d.root,o),ref:n,ownerState:f},u,{children:$.Children.map(i,(p,h)=>{if(!$.isValidElement(p))return null;const g=p.props.value===void 0?h:p.props.value;return $.cloneElement(p,{selected:g===c,showLabel:p.props.showLabel!==void 0?p.props.showLabel:l,value:g,onChange:s})})}))}),Pwe=Awe;function AJ(e){return it("MuiBottomNavigationAction",e)}const Mwe=at("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),nB=Mwe,Ewe=["className","icon","label","onChange","onClick","selected","showLabel","value"],Twe=e=>{const{classes:t,showLabel:n,selected:r}=e;return ot({root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]},AJ,t)},Owe=Ie(yi,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})(({theme:e,ownerState:t})=>I({transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(e.vars||e).palette.text.secondary,flexDirection:"column",flex:"1"},!t.showLabel&&!t.selected&&{paddingTop:14},!t.showLabel&&!t.selected&&!t.label&&{paddingTop:0},{[`&.${nB.selected}`]:{color:(e.vars||e).palette.primary.main}})),Iwe=Ie("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e,ownerState:t})=>I({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!t.showLabel&&!t.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${nB.selected}`]:{fontSize:e.typography.pxToRem(14)}})),Rwe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiBottomNavigationAction"}),{className:i,icon:o,label:a,onChange:s,onClick:l,value:c}=r,u=We(r,Ewe),f=r,d=Twe(f),p=h=>{s&&s(h,c),l&&l(h)};return G.jsxs(Owe,I({ref:n,className:je(d.root,i),focusRipple:!0,onClick:p,ownerState:f},u,{children:[o,G.jsx(Iwe,{className:d.label,ownerState:f,children:a})]}))}),kwe=Rwe,Lwe=fd(),$we=ave({themeId:Mc,defaultTheme:Lwe,defaultClassName:"MuiBox-root",generateClassName:dD.generate}),Dwe=$we,Bwe=fr(G.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),Nwe=["slots","slotProps"],Fwe=Ie(yi)(({theme:e})=>I({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`},e.palette.mode==="light"?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":I({},e.palette.mode==="light"?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}),"&:active":I({boxShadow:e.shadows[0]},e.palette.mode==="light"?{backgroundColor:sv(e.palette.grey[200],.12)}:{backgroundColor:sv(e.palette.grey[600],.12)})})),jwe=Ie(Bwe)({width:24,height:16});function zwe(e){const{slots:t={},slotProps:n={}}=e,r=We(e,Nwe),i=e;return G.jsx("li",{children:G.jsx(Fwe,I({focusRipple:!0},r,{ownerState:i,children:G.jsx(jwe,I({as:t.CollapsedIcon,ownerState:i},n.collapsedIcon))}))})}function PJ(e){return it("MuiBreadcrumbs",e)}const Uwe=at("MuiBreadcrumbs",["root","ol","li","separator"]),MJ=Uwe,Vwe=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],Hwe=e=>{const{classes:t}=e;return ot({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},PJ,t)},Gwe=Ie(jn,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${MJ.li}`]:t.li},t.root]})({}),Wwe=Ie("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),qwe=Ie("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function Xwe(e,t,n,r){return e.reduce((i,o,a)=>(a<e.length-1?i=i.concat(o,G.jsx(qwe,{"aria-hidden":!0,className:t,ownerState:r,children:n},`separator-${a}`)):i.push(o),i),[])}const Ywe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiBreadcrumbs"}),{children:i,className:o,component:a="nav",slots:s={},slotProps:l={},expandText:c="Show path",itemsAfterCollapse:u=1,itemsBeforeCollapse:f=1,maxItems:d=8,separator:p="/"}=r,h=We(r,Vwe),[g,v]=$.useState(!1),m=I({},r,{component:a,expanded:g,expandText:c,itemsAfterCollapse:u,itemsBeforeCollapse:f,maxItems:d,separator:p}),y=Hwe(m),_=Nr({elementType:s.CollapsedIcon,externalSlotProps:l.collapsedIcon,ownerState:m}),b=$.useRef(null),x=S=>{const A=()=>{v(!0);const C=b.current.querySelector("a[href],button,[tabindex]");C&&C.focus()};return f+u>=S.length?S:[...S.slice(0,f),G.jsx(zwe,{"aria-label":c,slots:{CollapsedIcon:s.CollapsedIcon},slotProps:{collapsedIcon:_},onClick:A},"ellipsis"),...S.slice(S.length-u,S.length)]},w=$.Children.toArray(i).filter(S=>$.isValidElement(S)).map((S,A)=>G.jsx("li",{className:y.li,children:S},`child-${A}`));return G.jsx(Gwe,I({ref:n,component:a,color:"text.secondary",className:je(y.root,o),ownerState:m},h,{children:G.jsx(Wwe,{className:y.ol,ref:b,ownerState:m,children:Xwe(g||d&&w.length<=d?w:x(w),y.separator,p,m)})}))}),Kwe=Ywe;function EJ(e){return it("MuiButton",e)}const Zwe=at("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),Dy=Zwe,Jwe=$.createContext({}),TJ=Jwe,Qwe=$.createContext(void 0),OJ=Qwe,e2e=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],t2e=e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:a}=e,s={root:["root",o,`${o}${De(t)}`,`size${De(i)}`,`${o}Size${De(i)}`,t==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${De(i)}`],endIcon:["endIcon",`iconSize${De(i)}`]},l=ot(s,EJ,a);return I({},a,l)},IJ=e=>I({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),n2e=Ie(yi,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${De(n.color)}`],t[`size${De(n.size)}`],t[`${n.variant}Size${De(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,r;const i=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],o=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return I({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":I({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":I({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${Dy.focusVisible}`]:I({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${Dy.disabled}`]:I({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${Ot(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(r=e.palette).getContrastText)==null?void 0:n.call(r,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:i,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Dy.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Dy.disabled}`]:{boxShadow:"none"}}),r2e=Ie("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${De(n.size)}`]]}})(({ownerState:e})=>I({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},IJ(e))),i2e=Ie("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${De(n.size)}`]]}})(({ownerState:e})=>I({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},IJ(e))),o2e=$.forwardRef(function(t,n){const r=$.useContext(TJ),i=$.useContext(OJ),o=fD(r,t),a=st({props:o,name:"MuiButton"}),{children:s,color:l="primary",component:c="button",className:u,disabled:f=!1,disableElevation:d=!1,disableFocusRipple:p=!1,endIcon:h,focusVisibleClassName:g,fullWidth:v=!1,size:m="medium",startIcon:y,type:_,variant:b="text"}=a,x=We(a,e2e),w=I({},a,{color:l,component:c,disabled:f,disableElevation:d,disableFocusRipple:p,fullWidth:v,size:m,type:_,variant:b}),S=t2e(w),A=y&&G.jsx(r2e,{className:S.startIcon,ownerState:w,children:y}),C=h&&G.jsx(i2e,{className:S.endIcon,ownerState:w,children:h}),k=i||"";return G.jsxs(n2e,I({ownerState:w,className:je(r.className,S.root,u,k),component:c,disabled:f,focusRipple:!p,focusVisibleClassName:je(S.focusVisible,g),ref:n,type:_},x,{classes:S,children:[A,s,C]}))}),rB=o2e;function RJ(e){return it("MuiButtonGroup",e)}const a2e=at("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),ji=a2e,s2e=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],l2e=(e,t)=>{const{ownerState:n}=e;return[{[`& .${ji.grouped}`]:t.grouped},{[`& .${ji.grouped}`]:t[`grouped${De(n.orientation)}`]},{[`& .${ji.grouped}`]:t[`grouped${De(n.variant)}`]},{[`& .${ji.grouped}`]:t[`grouped${De(n.variant)}${De(n.orientation)}`]},{[`& .${ji.grouped}`]:t[`grouped${De(n.variant)}${De(n.color)}`]},{[`& .${ji.firstButton}`]:t.firstButton},{[`& .${ji.lastButton}`]:t.lastButton},{[`& .${ji.middleButton}`]:t.middleButton},t.root,t[n.variant],n.disableElevation===!0&&t.disableElevation,n.fullWidth&&t.fullWidth,n.orientation==="vertical"&&t.vertical]},c2e=e=>{const{classes:t,color:n,disabled:r,disableElevation:i,fullWidth:o,orientation:a,variant:s}=e,l={root:["root",s,a==="vertical"&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${De(a)}`,`grouped${De(s)}`,`grouped${De(s)}${De(a)}`,`grouped${De(s)}${De(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ot(l,RJ,t)},u2e=Ie("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:l2e})(({theme:e,ownerState:t})=>I({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},t.orientation==="vertical"&&{flexDirection:"column"},{[`& .${ji.grouped}`]:I({minWidth:40,"&:hover":I({},t.variant==="contained"&&{boxShadow:"none"})},t.variant==="contained"&&{boxShadow:"none"}),[`& .${ji.firstButton},& .${ji.middleButton}`]:I({},t.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},t.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},t.variant==="text"&&t.orientation==="horizontal"&&{borderRight:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ji.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="text"&&t.orientation==="vertical"&&{borderBottom:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ji.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="text"&&t.color!=="inherit"&&{borderColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:Ot(e.palette[t.color].main,.5)},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"transparent"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"transparent"},t.variant==="contained"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${ji.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="contained"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${ji.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="contained"&&t.color!=="inherit"&&{borderColor:(e.vars||e).palette[t.color].dark},{"&:hover":I({},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"currentColor"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${ji.lastButton},& .${ji.middleButton}`]:I({},t.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},t.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},t.variant==="outlined"&&t.orientation==="horizontal"&&{marginLeft:-1},t.variant==="outlined"&&t.orientation==="vertical"&&{marginTop:-1})})),f2e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiButtonGroup"}),{children:i,className:o,color:a="primary",component:s="div",disabled:l=!1,disableElevation:c=!1,disableFocusRipple:u=!1,disableRipple:f=!1,fullWidth:d=!1,orientation:p="horizontal",size:h="medium",variant:g="outlined"}=r,v=We(r,s2e),m=I({},r,{color:a,component:s,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:f,fullWidth:d,orientation:p,size:h,variant:g}),y=c2e(m),_=$.useMemo(()=>({className:y.grouped,color:a,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:f,fullWidth:d,size:h,variant:g}),[a,l,c,u,f,d,h,g,y.grouped]),b=rme(i),x=b.length,w=S=>{const A=S===0,C=S===x-1;return A&&C?"":A?y.firstButton:C?y.lastButton:y.middleButton};return G.jsx(u2e,I({as:s,role:"group",className:je(y.root,o),ref:n,ownerState:m},v,{children:G.jsx(TJ.Provider,{value:_,children:b.map((S,A)=>G.jsx(OJ.Provider,{value:w(A),children:S},A))})}))}),d2e=f2e;function kJ(e){return it("MuiCard",e)}const p2e=at("MuiCard",["root"]),h2e=p2e,m2e=["className","raised"],g2e=e=>{const{classes:t}=e;return ot({root:["root"]},kJ,t)},v2e=Ie(us,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),y2e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiCard"}),{className:i,raised:o=!1}=r,a=We(r,m2e),s=I({},r,{raised:o}),l=g2e(s);return G.jsx(v2e,I({className:je(l.root,i),elevation:o?8:void 0,ref:n,ownerState:s},a))}),b2e=y2e;function LJ(e){return it("MuiCardActionArea",e)}const _2e=at("MuiCardActionArea",["root","focusVisible","focusHighlight"]),vS=_2e,x2e=["children","className","focusVisibleClassName"],w2e=e=>{const{classes:t}=e;return ot({root:["root"],focusHighlight:["focusHighlight"]},LJ,t)},S2e=Ie(yi,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${vS.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${vS.focusVisible} .${vS.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}})),C2e=Ie("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,t)=>t.focusHighlight})(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})})),A2e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiCardActionArea"}),{children:i,className:o,focusVisibleClassName:a}=r,s=We(r,x2e),l=r,c=w2e(l);return G.jsxs(S2e,I({className:je(c.root,o),focusVisibleClassName:je(a,c.focusVisible),ref:n,ownerState:l},s,{children:[i,G.jsx(C2e,{className:c.focusHighlight,ownerState:l})]}))}),P2e=A2e;function $J(e){return it("MuiCardActions",e)}const M2e=at("MuiCardActions",["root","spacing"]),E2e=M2e,T2e=["disableSpacing","className"],O2e=e=>{const{classes:t,disableSpacing:n}=e;return ot({root:["root",!n&&"spacing"]},$J,t)},I2e=Ie("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>I({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),R2e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiCardActions"}),{disableSpacing:i=!1,className:o}=r,a=We(r,T2e),s=I({},r,{disableSpacing:i}),l=O2e(s);return G.jsx(I2e,I({className:je(l.root,o),ownerState:s,ref:n},a))}),k2e=R2e;function DJ(e){return it("MuiCardContent",e)}const L2e=at("MuiCardContent",["root"]),$2e=L2e,D2e=["className","component"],B2e=e=>{const{classes:t}=e;return ot({root:["root"]},DJ,t)},N2e=Ie("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),F2e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiCardContent"}),{className:i,component:o="div"}=r,a=We(r,D2e),s=I({},r,{component:o}),l=B2e(s);return G.jsx(N2e,I({as:o,className:je(l.root,i),ownerState:s,ref:n},a))}),j2e=F2e;function BJ(e){return it("MuiCardHeader",e)}const z2e=at("MuiCardHeader",["root","avatar","action","content","title","subheader"]),T5=z2e,U2e=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],V2e=e=>{const{classes:t}=e;return ot({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},BJ,t)},H2e=Ie("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>I({[`& .${T5.title}`]:t.title,[`& .${T5.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),G2e=Ie("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),W2e=Ie("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),q2e=Ie("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),X2e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiCardHeader"}),{action:i,avatar:o,className:a,component:s="div",disableTypography:l=!1,subheader:c,subheaderTypographyProps:u,title:f,titleTypographyProps:d}=r,p=We(r,U2e),h=I({},r,{component:s,disableTypography:l}),g=V2e(h);let v=f;v!=null&&v.type!==jn&&!l&&(v=G.jsx(jn,I({variant:o?"body2":"h5",className:g.title,component:"span",display:"block"},d,{children:v})));let m=c;return m!=null&&m.type!==jn&&!l&&(m=G.jsx(jn,I({variant:o?"body2":"body1",className:g.subheader,color:"text.secondary",component:"span",display:"block"},u,{children:m}))),G.jsxs(H2e,I({className:je(g.root,a),as:s,ref:n,ownerState:h},p,{children:[o&&G.jsx(G2e,{className:g.avatar,ownerState:h,children:o}),G.jsxs(q2e,{className:g.content,ownerState:h,children:[v,m]}),i&&G.jsx(W2e,{className:g.action,ownerState:h,children:i})]}))}),Y2e=X2e;function NJ(e){return it("MuiCardMedia",e)}const K2e=at("MuiCardMedia",["root","media","img"]),Z2e=K2e,J2e=["children","className","component","image","src","style"],Q2e=e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e;return ot({root:["root",n&&"media",r&&"img"]},NJ,t)},eSe=Ie("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})(({ownerState:e})=>I({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),tSe=["video","audio","picture","iframe","img"],nSe=["picture","img"],rSe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiCardMedia"}),{children:i,className:o,component:a="div",image:s,src:l,style:c}=r,u=We(r,J2e),f=tSe.indexOf(a)!==-1,d=!f&&s?I({backgroundImage:`url("${s}")`},c):c,p=I({},r,{component:a,isMediaComponent:f,isImageComponent:nSe.indexOf(a)!==-1}),h=Q2e(p);return G.jsx(eSe,I({className:je(h.root,o),as:a,role:!f&&s?"img":void 0,ref:n,style:d,ownerState:p,src:f?s||l:void 0},u,{children:i}))}),iSe=rSe;function oSe(e){return it("PrivateSwitchBase",e)}at("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const aSe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],sSe=e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${De(i)}`],input:["input"]};return ot(o,oSe,t)},lSe=Ie(yi)(({ownerState:e})=>I({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),cSe=Ie("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),uSe=$.forwardRef(function(t,n){const{autoFocus:r,checked:i,checkedIcon:o,className:a,defaultChecked:s,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:f,id:d,inputProps:p,inputRef:h,name:g,onBlur:v,onChange:m,onFocus:y,readOnly:_,required:b=!1,tabIndex:x,type:w,value:S}=t,A=We(t,aSe),[C,k]=Wo({controlled:i,default:!!s,name:"SwitchBase",state:"checked"}),O=Xs(),T=H=>{y&&y(H),O&&O.onFocus&&O.onFocus(H)},B=H=>{v&&v(H),O&&O.onBlur&&O.onBlur(H)},R=H=>{if(H.nativeEvent.defaultPrevented)return;const J=H.target.checked;k(J),m&&m(H,J)};let P=l;O&&typeof P>"u"&&(P=O.disabled);const D=w==="checkbox"||w==="radio",z=I({},t,{checked:C,disabled:P,disableFocusRipple:c,edge:u}),N=sSe(z);return G.jsxs(lSe,I({component:"span",className:je(N.root,a),centerRipple:!0,focusRipple:!c,disabled:P,tabIndex:null,role:void 0,onFocus:T,onBlur:B,ownerState:z,ref:n},A,{children:[G.jsx(cSe,I({autoFocus:r,checked:i,defaultChecked:s,className:N.input,disabled:P,id:D?d:void 0,name:g,onChange:R,readOnly:_,ref:h,required:b,ownerState:z,tabIndex:x,type:w},w==="checkbox"&&S===void 0?{}:{value:S},p)),C?o:f]}))}),iB=uSe,fSe=fr(G.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),dSe=fr(G.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),pSe=fr(G.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function FJ(e){return it("MuiCheckbox",e)}const hSe=at("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),yS=hSe,mSe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],gSe=e=>{const{classes:t,indeterminate:n,color:r,size:i}=e,o={root:["root",n&&"indeterminate",`color${De(r)}`,`size${De(i)}`]},a=ot(o,FJ,t);return I({},t,a)},vSe=Ie(iB,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,n.color!=="default"&&t[`color${De(n.color)}`]]}})(({theme:e,ownerState:t})=>I({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${yS.checked}, &.${yS.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${yS.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),ySe=G.jsx(dSe,{}),bSe=G.jsx(fSe,{}),_Se=G.jsx(pSe,{}),xSe=$.forwardRef(function(t,n){var r,i;const o=st({props:t,name:"MuiCheckbox"}),{checkedIcon:a=ySe,color:s="primary",icon:l=bSe,indeterminate:c=!1,indeterminateIcon:u=_Se,inputProps:f,size:d="medium",className:p}=o,h=We(o,mSe),g=c?u:l,v=c?u:a,m=I({},o,{color:s,indeterminate:c,size:d}),y=gSe(m);return G.jsx(vSe,I({type:"checkbox",inputProps:I({"data-indeterminate":c},f),icon:$.cloneElement(g,{fontSize:(r=g.props.fontSize)!=null?r:d}),checkedIcon:$.cloneElement(v,{fontSize:(i=v.props.fontSize)!=null?i:d}),ownerState:m,ref:n,className:je(y.root,p)},h,{classes:y}))}),wSe=xSe;function jJ(e){return it("MuiCircularProgress",e)}const SSe=at("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]),CSe=SSe,ASe=["className","color","disableShrink","size","style","thickness","value","variant"];let EM=e=>e,Gj,Wj,qj,Xj;const sf=44,PSe=cs(Gj||(Gj=EM`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),MSe=cs(Wj||(Wj=EM`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),ESe=e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,o={root:["root",n,`color${De(r)}`],svg:["svg"],circle:["circle",`circle${De(n)}`,i&&"circleDisableShrink"]};return ot(o,jJ,t)},TSe=Ie("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${De(n.color)}`]]}})(({ownerState:e,theme:t})=>I({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&Ml(qj||(qj=EM`
      animation: ${0} 1.4s linear infinite;
    `),PSe)),OSe=Ie("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),ISe=Ie("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${De(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>I({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&Ml(Xj||(Xj=EM`
      animation: ${0} 1.4s ease-in-out infinite;
    `),MSe)),RSe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:a=!1,size:s=40,style:l,thickness:c=3.6,value:u=0,variant:f="indeterminate"}=r,d=We(r,ASe),p=I({},r,{color:o,disableShrink:a,size:s,thickness:c,value:u,variant:f}),h=ESe(p),g={},v={},m={};if(f==="determinate"){const y=2*Math.PI*((sf-c)/2);g.strokeDasharray=y.toFixed(3),m["aria-valuenow"]=Math.round(u),g.strokeDashoffset=`${((100-u)/100*y).toFixed(3)}px`,v.transform="rotate(-90deg)"}return G.jsx(TSe,I({className:je(h.root,i),style:I({width:s,height:s},v,l),ownerState:p,ref:n,role:"progressbar"},m,d,{children:G.jsx(OSe,{className:h.svg,ownerState:p,viewBox:`${sf/2} ${sf/2} ${sf} ${sf}`,children:G.jsx(ISe,{className:h.circle,style:g,ownerState:p,cx:sf,cy:sf,r:(sf-c)/2,fill:"none",strokeWidth:c})})}))}),zJ=RSe,kSe=Uve({createStyledComponent:Ie("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${De(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>st({props:e,name:"MuiContainer"})}),UJ=kSe;function LSe(e){return it("MuiContainer",e)}const $Se=at("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]),DSe=$Se,VJ=(e,t)=>I({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),HJ=e=>I({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),BSe=(e,t=!1)=>{var n;const r={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([a,s])=>{var l;r[e.getColorSchemeSelector(a).replace(/\s*&/,"")]={colorScheme:(l=s.palette)==null?void 0:l.mode}});let i=I({html:VJ(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:I({margin:0},HJ(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const o=(n=e.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return o&&(i=[i,o]),i};function NSe(e){const t=st({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=t;return G.jsxs($.Fragment,{children:[G.jsx(JD,{styles:i=>BSe(i,r)}),n]})}const FSe={track:"#2b2b2b",thumb:"#6b6b6b",active:"#959595"};function jSe(e=FSe){return{scrollbarColor:`${e.thumb} ${e.track}`,"&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:e.track},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:e.thumb,minHeight:24,border:`3px solid ${e.track}`},"&::-webkit-scrollbar-thumb:focus, & *::-webkit-scrollbar-thumb:focus":{backgroundColor:e.active},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:e.active},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:e.active},"&::-webkit-scrollbar-corner, & *::-webkit-scrollbar-corner":{backgroundColor:e.track}}}function GJ(e){return it("MuiModal",e)}const zSe=at("MuiModal",["root","hidden","backdrop"]),USe=zSe,VSe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],HSe=e=>{const{open:t,exited:n,classes:r}=e;return ot({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},GJ,r)},GSe=Ie("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>I({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),WSe=Ie(tB,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),qSe=$.forwardRef(function(t,n){var r,i,o,a,s,l;const c=st({name:"MuiModal",props:t}),{BackdropComponent:u=WSe,BackdropProps:f,className:d,closeAfterTransition:p=!1,children:h,container:g,component:v,components:m={},componentsProps:y={},disableAutoFocus:_=!1,disableEnforceFocus:b=!1,disableEscapeKeyDown:x=!1,disablePortal:w=!1,disableRestoreFocus:S=!1,disableScrollLock:A=!1,hideBackdrop:C=!1,keepMounted:k=!1,onBackdropClick:O,open:T,slotProps:B,slots:R}=c,P=We(c,VSe),D=I({},c,{closeAfterTransition:p,disableAutoFocus:_,disableEnforceFocus:b,disableEscapeKeyDown:x,disablePortal:w,disableRestoreFocus:S,disableScrollLock:A,hideBackdrop:C,keepMounted:k}),{getRootProps:z,getBackdropProps:N,getTransitionProps:H,portalRef:J,isTopModal:ne,exited:oe,hasTransition:Z}=z_e(I({},D,{rootRef:n})),ce=I({},D,{exited:oe}),se=HSe(ce),Y={};if(h.props.tabIndex===void 0&&(Y.tabIndex="-1"),Z){const{onEnter:de,onExited:_e}=H();Y.onEnter=de,Y.onExited=_e}const he=(r=(i=R==null?void 0:R.root)!=null?i:m.Root)!=null?r:GSe,ae=(o=(a=R==null?void 0:R.backdrop)!=null?a:m.Backdrop)!=null?o:u,ye=(s=B==null?void 0:B.root)!=null?s:y.root,re=(l=B==null?void 0:B.backdrop)!=null?l:y.backdrop,te=Nr({elementType:he,externalSlotProps:ye,externalForwardedProps:P,getSlotProps:z,additionalProps:{ref:n,as:v},ownerState:ce,className:je(d,ye==null?void 0:ye.className,se==null?void 0:se.root,!ce.open&&ce.exited&&(se==null?void 0:se.hidden))}),le=Nr({elementType:ae,externalSlotProps:re,additionalProps:f,getSlotProps:de=>N(I({},de,{onClick:_e=>{O&&O(_e),de!=null&&de.onClick&&de.onClick(_e)}})),className:je(re==null?void 0:re.className,f==null?void 0:f.className,se==null?void 0:se.backdrop),ownerState:ce});return!k&&!T&&(!Z||oe)?null:G.jsx(ZD,{ref:J,container:g,disablePortal:w,children:G.jsxs(he,I({},te,{children:[!C&&u?G.jsx(ae,I({},le)):null,G.jsx(GZ,{disableEnforceFocus:b,disableAutoFocus:_,disableRestoreFocus:S,isEnabled:ne,open:T,children:$.cloneElement(h,Y)})]}))})}),TM=qSe;function WJ(e){return it("MuiDialog",e)}const XSe=at("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),bS=XSe,YSe=$.createContext({}),qJ=YSe,KSe=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],ZSe=Ie(tB,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),JSe=e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e,a={root:["root"],container:["container",`scroll${De(n)}`],paper:["paper",`paperScroll${De(n)}`,`paperWidth${De(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return ot(a,WJ,t)},QSe=Ie(TM,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),eCe=Ie("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${De(n.scroll)}`]]}})(({ownerState:e})=>I({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),tCe=Ie(us,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${De(n.scroll)}`],t[`paperWidth${De(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>I({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${bS.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${bS.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${bS.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),nCe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiDialog"}),i=ir(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":a,"aria-labelledby":s,BackdropComponent:l,BackdropProps:c,children:u,className:f,disableEscapeKeyDown:d=!1,fullScreen:p=!1,fullWidth:h=!1,maxWidth:g="sm",onBackdropClick:v,onClose:m,open:y,PaperComponent:_=us,PaperProps:b={},scroll:x="paper",TransitionComponent:w=eB,transitionDuration:S=o,TransitionProps:A}=r,C=We(r,KSe),k=I({},r,{disableEscapeKeyDown:d,fullScreen:p,fullWidth:h,maxWidth:g,scroll:x}),O=JSe(k),T=$.useRef(),B=z=>{T.current=z.target===z.currentTarget},R=z=>{T.current&&(T.current=null,v&&v(z),m&&m(z,"backdropClick"))},P=zs(s),D=$.useMemo(()=>({titleId:P}),[P]);return G.jsx(QSe,I({className:je(O.root,f),closeAfterTransition:!0,components:{Backdrop:ZSe},componentsProps:{backdrop:I({transitionDuration:S,as:l},c)},disableEscapeKeyDown:d,onClose:m,open:y,ref:n,onClick:R,ownerState:k},C,{children:G.jsx(w,I({appear:!0,in:y,timeout:S,role:"presentation"},A,{children:G.jsx(eCe,{className:je(O.container),onMouseDown:B,ownerState:k,children:G.jsx(tCe,I({as:_,elevation:24,role:"dialog","aria-describedby":a,"aria-labelledby":P},b,{className:je(O.paper,b.className),ownerState:k,children:G.jsx(qJ.Provider,{value:D,children:u})}))})}))}))}),rCe=nCe;function XJ(e){return it("MuiDialogActions",e)}const iCe=at("MuiDialogActions",["root","spacing"]),oCe=iCe,aCe=["className","disableSpacing"],sCe=e=>{const{classes:t,disableSpacing:n}=e;return ot({root:["root",!n&&"spacing"]},XJ,t)},lCe=Ie("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>I({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),cCe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiDialogActions"}),{className:i,disableSpacing:o=!1}=r,a=We(r,aCe),s=I({},r,{disableSpacing:o}),l=sCe(s);return G.jsx(lCe,I({className:je(l.root,i),ownerState:s,ref:n},a))}),uCe=cCe;function YJ(e){return it("MuiDialogContent",e)}const fCe=at("MuiDialogContent",["root","dividers"]),dCe=fCe;function KJ(e){return it("MuiDialogTitle",e)}const pCe=at("MuiDialogTitle",["root"]),ZJ=pCe,hCe=["className","dividers"],mCe=e=>{const{classes:t,dividers:n}=e;return ot({root:["root",n&&"dividers"]},YJ,t)},gCe=Ie("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>I({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${ZJ.root} + &`]:{paddingTop:0}})),vCe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiDialogContent"}),{className:i,dividers:o=!1}=r,a=We(r,hCe),s=I({},r,{dividers:o}),l=mCe(s);return G.jsx(gCe,I({className:je(l.root,i),ownerState:s,ref:n},a))}),yCe=vCe;function JJ(e){return it("MuiDialogContentText",e)}const bCe=at("MuiDialogContentText",["root"]),_Ce=bCe,xCe=["children","className"],wCe=e=>{const{classes:t}=e,r=ot({root:["root"]},JJ,t);return I({},t,r)},SCe=Ie(jn,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),CCe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiDialogContentText"}),{className:i}=r,o=We(r,xCe),a=wCe(o);return G.jsx(SCe,I({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:o,className:je(a.root,i)},r,{classes:a}))}),ACe=CCe,PCe=["className","id"],MCe=e=>{const{classes:t}=e;return ot({root:["root"]},KJ,t)},ECe=Ie(jn,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),TCe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiDialogTitle"}),{className:i,id:o}=r,a=We(r,PCe),s=r,l=MCe(s),{titleId:c=o}=$.useContext(qJ);return G.jsx(ECe,I({component:"h2",className:je(l.root,i),ownerState:s,ref:n,variant:"h6",id:o??c},a))}),OCe=TCe;function QJ(e){return it("MuiDivider",e)}const ICe=at("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),O5=ICe,RCe=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],kCe=e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:o,orientation:a,textAlign:s,variant:l}=e;return ot({root:["root",t&&"absolute",l,o&&"light",a==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&a==="vertical"&&"withChildrenVertical",s==="right"&&a!=="vertical"&&"textAlignRight",s==="left"&&a!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",a==="vertical"&&"wrapperVertical"]},QJ,r)},LCe=Ie("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>I({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Ot(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:e})=>I({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:e,ownerState:t})=>I({},t.children&&t.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}}),({theme:e,ownerState:t})=>I({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}}),({ownerState:e})=>I({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),$Ce=Ie("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>I({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),eQ=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiDivider"}),{absolute:i=!1,children:o,className:a,component:s=o?"div":"hr",flexItem:l=!1,light:c=!1,orientation:u="horizontal",role:f=s!=="hr"?"separator":void 0,textAlign:d="center",variant:p="fullWidth"}=r,h=We(r,RCe),g=I({},r,{absolute:i,component:s,flexItem:l,light:c,orientation:u,role:f,textAlign:d,variant:p}),v=kCe(g);return G.jsx(LCe,I({as:s,className:je(v.root,a),role:f,ref:n,ownerState:g},h,{children:o?G.jsx($Ce,{className:v.wrapper,ownerState:g,children:o}):null}))});eQ.muiSkipListHighlight=!0;const DCe=eQ,BCe=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function NCe(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=so(t);let a;if(t.fakeTransform)a=t.fakeTransform;else{const c=o.getComputedStyle(t);a=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let s=0,l=0;if(a&&a!=="none"&&typeof a=="string"){const c=a.split("(")[1].split(")")[0].split(",");s=parseInt(c[4],10),l=parseInt(c[5],10)}return e==="left"?i?`translateX(${i.right+s-r.left}px)`:`translateX(${o.innerWidth+s-r.left}px)`:e==="right"?i?`translateX(-${r.right-i.left-s}px)`:`translateX(-${r.left+r.width-s}px)`:e==="up"?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${o.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}function FCe(e){return typeof e=="function"?e():e}function Mw(e,t,n){const r=FCe(n),i=NCe(e,t,r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const jCe=$.forwardRef(function(t,n){const r=ir(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:a,appear:s=!0,children:l,container:c,direction:u="down",easing:f=i,in:d,onEnter:p,onEntered:h,onEntering:g,onExit:v,onExited:m,onExiting:y,style:_,timeout:b=o,TransitionComponent:x=R_}=t,w=We(t,BCe),S=$.useRef(null),A=En(l.ref,S,n),C=N=>H=>{N&&(H===void 0?N(S.current):N(S.current,H))},k=C((N,H)=>{Mw(u,N,c),bM(N),p&&p(N,H)}),O=C((N,H)=>{const J=Il({timeout:b,style:_,easing:f},{mode:"enter"});N.style.webkitTransition=r.transitions.create("-webkit-transform",I({},J)),N.style.transition=r.transitions.create("transform",I({},J)),N.style.webkitTransform="none",N.style.transform="none",g&&g(N,H)}),T=C(h),B=C(y),R=C(N=>{const H=Il({timeout:b,style:_,easing:f},{mode:"exit"});N.style.webkitTransition=r.transitions.create("-webkit-transform",H),N.style.transition=r.transitions.create("transform",H),Mw(u,N,c),v&&v(N)}),P=C(N=>{N.style.webkitTransition="",N.style.transition="",m&&m(N)}),D=N=>{a&&a(S.current,N)},z=$.useCallback(()=>{S.current&&Mw(u,S.current,c)},[u,c]);return $.useEffect(()=>{if(d||u==="down"||u==="right")return;const N=Eh(()=>{S.current&&Mw(u,S.current,c)}),H=so(S.current);return H.addEventListener("resize",N),()=>{N.clear(),H.removeEventListener("resize",N)}},[u,d,c]),$.useEffect(()=>{d||z()},[d,z]),G.jsx(x,I({nodeRef:S,onEnter:k,onEntered:T,onEntering:O,onExit:R,onExited:P,onExiting:B,addEndListener:D,appear:s,in:d,timeout:b},w,{children:(N,H)=>$.cloneElement(l,I({ref:A,style:I({visibility:N==="exited"&&!d?"hidden":void 0},_,l.props.style)},H))}))}),tQ=jCe;function nQ(e){return it("MuiDrawer",e)}const zCe=at("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]),UCe=zCe,VCe=["BackdropProps"],HCe=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],rQ=(e,t)=>{const{ownerState:n}=e;return[t.root,(n.variant==="permanent"||n.variant==="persistent")&&t.docked,t.modal]},GCe=e=>{const{classes:t,anchor:n,variant:r}=e,i={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${De(n)}`,r!=="temporary"&&`paperAnchorDocked${De(n)}`]};return ot(i,nQ,t)},WCe=Ie(TM,{name:"MuiDrawer",slot:"Root",overridesResolver:rQ})(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer})),Yj=Ie("div",{shouldForwardProp:$o,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:rQ})({flex:"0 0 auto"}),qCe=Ie(us,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${De(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${De(n.anchor)}`]]}})(({theme:e,ownerState:t})=>I({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},t.anchor==="left"&&{left:0},t.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="right"&&{right:0},t.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="left"&&t.variant!=="temporary"&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="top"&&t.variant!=="temporary"&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="right"&&t.variant!=="temporary"&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="bottom"&&t.variant!=="temporary"&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`})),iQ={left:"right",right:"left",top:"down",bottom:"up"};function dp(e){return["left","right"].indexOf(e)!==-1}function By(e,t){return e.direction==="rtl"&&dp(t)?iQ[t]:t}const XCe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiDrawer"}),i=ir(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:s,children:l,className:c,elevation:u=16,hideBackdrop:f=!1,ModalProps:{BackdropProps:d}={},onClose:p,open:h=!1,PaperProps:g={},SlideProps:v,TransitionComponent:m=tQ,transitionDuration:y=o,variant:_="temporary"}=r,b=We(r.ModalProps,VCe),x=We(r,HCe),w=$.useRef(!1);$.useEffect(()=>{w.current=!0},[]);const S=By(i,a),C=I({},r,{anchor:a,elevation:u,open:h,variant:_},x),k=GCe(C),O=G.jsx(qCe,I({elevation:_==="temporary"?u:0,square:!0},g,{className:je(k.paper,g.className),ownerState:C,children:l}));if(_==="permanent")return G.jsx(Yj,I({className:je(k.root,k.docked,c),ownerState:C,ref:n},x,{children:O}));const T=G.jsx(m,I({in:h,direction:iQ[S],timeout:y,appear:w.current},v,{children:O}));return _==="persistent"?G.jsx(Yj,I({className:je(k.root,k.docked,c),ownerState:C,ref:n},x,{children:T})):G.jsx(WCe,I({BackdropProps:I({},s,d,{transitionDuration:y}),className:je(k.root,k.modal,c),open:h,ownerState:C,onClose:p,hideBackdrop:f,ref:n},x,b,{children:T}))}),oQ=XCe;function aQ(e){return it("MuiFab",e)}const YCe=at("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),I5=YCe,KCe=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],ZCe=e=>{const{color:t,variant:n,classes:r,size:i}=e,o={root:["root",n,`size${De(i)}`,t==="inherit"?"colorInherit":t]},a=ot(o,aQ,r);return I({},r,a)},JCe=Ie(yi,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>$o(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${De(n.size)}`],n.color==="inherit"&&t.colorInherit,t[De(n.size)],t[n.color]]}})(({theme:e,ownerState:t})=>{var n,r;return I({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:(n=(r=e.palette).getContrastText)==null?void 0:n.call(r,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${I5.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},t.size==="small"&&{width:40,height:40},t.size==="medium"&&{width:48,height:48},t.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},t.variant==="extended"&&t.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},t.variant==="extended"&&t.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},t.color==="inherit"&&{color:"inherit"})},({theme:e,ownerState:t})=>I({},t.color!=="inherit"&&t.color!=="default"&&(e.vars||e).palette[t.color]!=null&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}}),({theme:e})=>({[`&.${I5.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),QCe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiFab"}),{children:i,className:o,color:a="default",component:s="button",disabled:l=!1,disableFocusRipple:c=!1,focusVisibleClassName:u,size:f="large",variant:d="circular"}=r,p=We(r,KCe),h=I({},r,{color:a,component:s,disabled:l,disableFocusRipple:c,size:f,variant:d}),g=ZCe(h);return G.jsx(JCe,I({className:je(g.root,o),component:s,disabled:l,focusRipple:!c,focusVisibleClassName:je(g.focusVisible,u),ownerState:h,ref:n},p,{classes:g,children:i}))}),oB=QCe,eAe=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],tAe=e=>{const{classes:t,disableUnderline:n}=e,i=ot({root:["root",!n&&"underline"],input:["input"]},mJ,t);return I({},t,i)},nAe=Ie(PM,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...CM(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const r=e.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",s=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return I({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o}},[`&.${sa.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o},[`&.${sa.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:s}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${sa.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${sa.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${sa.disabled}, .${sa.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${sa.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&I({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17}))}),rAe=Ie(MM,{name:"MuiFilledInput",slot:"Input",overridesResolver:AM})(({theme:e,ownerState:t})=>I({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9})),sQ=$.forwardRef(function(t,n){var r,i,o,a;const s=st({props:t,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:f="input",multiline:d=!1,slotProps:p,slots:h={},type:g="text"}=s,v=We(s,eAe),m=I({},s,{fullWidth:u,inputComponent:f,multiline:d,type:g}),y=tAe(s),_={root:{ownerState:m},input:{ownerState:m}},b=p??c?Jr(p??c,_):_,x=(r=(i=h.root)!=null?i:l.Root)!=null?r:nAe,w=(o=(a=h.input)!=null?a:l.Input)!=null?o:rAe;return G.jsx(D_,I({slots:{root:x,input:w},componentsProps:b,fullWidth:u,inputComponent:f,multiline:d,ref:n,type:g},v,{classes:y}))});sQ.muiName="Input";const aB=sQ;function lQ(e){return it("MuiFormControl",e)}const iAe=at("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]),oAe=iAe,aAe=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],sAe=e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root",n!=="none"&&`margin${De(n)}`,r&&"fullWidth"]};return ot(i,lQ,t)},lAe=Ie("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>I({},t.root,t[`margin${De(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>I({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),cAe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiFormControl"}),{children:i,className:o,color:a="primary",component:s="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:f=!1,hiddenLabel:d=!1,margin:p="none",required:h=!1,size:g="medium",variant:v="outlined"}=r,m=We(r,aAe),y=I({},r,{color:a,component:s,disabled:l,error:c,fullWidth:f,hiddenLabel:d,margin:p,required:h,size:g,variant:v}),_=sAe(y),[b,x]=$.useState(()=>{let B=!1;return i&&$.Children.forEach(i,R=>{if(!xc(R,["Input","Select"]))return;const P=xc(R,["Select"])?R.props.input:R;P&&gxe(P.props)&&(B=!0)}),B}),[w,S]=$.useState(()=>{let B=!1;return i&&$.Children.forEach(i,R=>{xc(R,["Input","Select"])&&(HC(R.props,!0)||HC(R.props.inputProps,!0))&&(B=!0)}),B}),[A,C]=$.useState(!1);l&&A&&C(!1);const k=u!==void 0&&!l?u:A;let O;const T=$.useMemo(()=>({adornedStart:b,setAdornedStart:x,color:a,disabled:l,error:c,filled:w,focused:k,fullWidth:f,hiddenLabel:d,size:g,onBlur:()=>{C(!1)},onEmpty:()=>{S(!1)},onFilled:()=>{S(!0)},onFocus:()=>{C(!0)},registerEffect:O,required:h,variant:v}),[b,a,l,c,w,k,f,d,O,h,g,v]);return G.jsx(SM.Provider,{value:T,children:G.jsx(lAe,I({as:s,ownerState:y,className:je(_.root,o),ref:n},m,{children:i}))})}),cQ=cAe,uAe=d0e({createStyledComponent:Ie("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>st({props:e,name:"MuiStack"})}),uQ=uAe,fAe=at("MuiStack",["root"]),dAe=fAe;function fQ(e){return it("MuiFormControlLabel",e)}const pAe=at("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),ag=pAe,hAe=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],mAe=e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:o}=e,a={root:["root",n&&"disabled",`labelPlacement${De(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return ot(a,fQ,t)},gAe=Ie("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${ag.label}`]:t.label},t.root,t[`labelPlacement${De(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>I({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${ag.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${ag.label}`]:{[`&.${ag.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),vAe=Ie("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${ag.error}`]:{color:(e.vars||e).palette.error.main}})),yAe=$.forwardRef(function(t,n){var r,i;const o=st({props:t,name:"MuiFormControlLabel"}),{className:a,componentsProps:s={},control:l,disabled:c,disableTypography:u,label:f,labelPlacement:d="end",required:p,slotProps:h={}}=o,g=We(o,hAe),v=Xs(),m=(r=c??l.props.disabled)!=null?r:v==null?void 0:v.disabled,y=p??l.props.required,_={disabled:m,required:y};["checked","name","onChange","value","inputRef"].forEach(C=>{typeof l.props[C]>"u"&&typeof o[C]<"u"&&(_[C]=o[C])});const b=qu({props:o,muiFormControl:v,states:["error"]}),x=I({},o,{disabled:m,labelPlacement:d,required:y,error:b.error}),w=mAe(x),S=(i=h.typography)!=null?i:s.typography;let A=f;return A!=null&&A.type!==jn&&!u&&(A=G.jsx(jn,I({component:"span"},S,{className:je(w.label,S==null?void 0:S.className),children:A}))),G.jsxs(gAe,I({className:je(w.root,a),ownerState:x,ref:n},g,{children:[$.cloneElement(l,_),y?G.jsxs(uQ,{direction:"row",alignItems:"center",children:[A,G.jsxs(vAe,{ownerState:x,"aria-hidden":!0,className:w.asterisk,children:["","*"]})]}):A]}))}),bAe=yAe;function dQ(e){return it("MuiFormGroup",e)}const _Ae=at("MuiFormGroup",["root","row","error"]),xAe=_Ae,wAe=["className","row"],SAe=e=>{const{classes:t,row:n,error:r}=e;return ot({root:["root",n&&"row",r&&"error"]},dQ,t)},CAe=Ie("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(({ownerState:e})=>I({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),AAe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiFormGroup"}),{className:i,row:o=!1}=r,a=We(r,wAe),s=Xs(),l=qu({props:r,muiFormControl:s,states:["error"]}),c=I({},r,{row:o,error:l.error}),u=SAe(c);return G.jsx(CAe,I({className:je(u.root,i),ownerState:c,ref:n},a))}),pQ=AAe;function hQ(e){return it("MuiFormHelperText",e)}const PAe=at("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),R5=PAe;var Kj;const MAe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],EAe=e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:a,focused:s,required:l}=e,c={root:["root",i&&"disabled",o&&"error",r&&`size${De(r)}`,n&&"contained",s&&"focused",a&&"filled",l&&"required"]};return ot(c,hQ,t)},TAe=Ie("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${De(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>I({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${R5.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${R5.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),OAe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiFormHelperText"}),{children:i,className:o,component:a="p"}=r,s=We(r,MAe),l=Xs(),c=qu({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),u=I({},r,{component:a,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),f=EAe(u);return G.jsx(TAe,I({as:a,ownerState:u,className:je(f.root,o),ref:n},s,{children:i===" "?Kj||(Kj=G.jsx("span",{className:"notranslate",children:""})):i}))}),mQ=OAe;function gQ(e){return it("MuiFormLabel",e)}const IAe=at("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),Pg=IAe,RAe=["children","className","color","component","disabled","error","filled","focused","required"],kAe=e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:a,required:s}=e,l={root:["root",`color${De(n)}`,i&&"disabled",o&&"error",a&&"filled",r&&"focused",s&&"required"],asterisk:["asterisk",o&&"error"]};return ot(l,gQ,t)},vQ=Ie("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>I({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>I({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${Pg.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${Pg.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Pg.error}`]:{color:(e.vars||e).palette.error.main}})),LAe=Ie("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Pg.error}`]:{color:(e.vars||e).palette.error.main}})),$Ae=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiFormLabel"}),{children:i,className:o,component:a="label"}=r,s=We(r,RAe),l=Xs(),c=qu({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),u=I({},r,{color:c.color||"primary",component:a,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),f=kAe(u);return G.jsxs(vQ,I({as:a,ownerState:u,className:je(f.root,o),ref:n},s,{children:[i,c.required&&G.jsxs(LAe,{ownerState:u,"aria-hidden":!0,className:f.asterisk,children:["","*"]})]}))}),yQ=$Ae,DAe=$.createContext(),Zj=DAe;function bQ(e){return it("MuiGrid",e)}const BAe=[0,1,2,3,4,5,6,7,8,9,10],NAe=["column-reverse","column","row-reverse","row"],FAe=["nowrap","wrap-reverse","wrap"],G0=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],jAe=at("MuiGrid",["root","container","item","zeroMinWidth",...BAe.map(e=>`spacing-xs-${e}`),...NAe.map(e=>`direction-xs-${e}`),...FAe.map(e=>`wrap-xs-${e}`),...G0.map(e=>`grid-xs-${e}`),...G0.map(e=>`grid-sm-${e}`),...G0.map(e=>`grid-md-${e}`),...G0.map(e=>`grid-lg-${e}`),...G0.map(e=>`grid-xl-${e}`)]),dv=jAe,zAe=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function Mg(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function UAe({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((r,i)=>{let o={};if(t[i]&&(n=t[i]),!n)return r;if(n===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const a=Tp({values:t.columns,breakpoints:e.breakpoints.values}),s=typeof a=="object"?a[i]:a;if(s==null)return r;const l=`${Math.round(n/s*1e8)/1e6}%`;let c={};if(t.container&&t.item&&t.columnSpacing!==0){const u=e.spacing(t.columnSpacing);if(u!=="0px"){const f=`calc(${l} + ${Mg(u)})`;c={flexBasis:f,maxWidth:f}}}o=I({flexBasis:l,flexGrow:0,maxWidth:l},c)}return e.breakpoints.values[i]===0?Object.assign(r,o):r[e.breakpoints.up(i)]=o,r},{})}function VAe({theme:e,ownerState:t}){const n=Tp({values:t.direction,breakpoints:e.breakpoints.values});return Ma({theme:e},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${dv.item}`]={maxWidth:"none"}),i})}function _Q({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(i=>{n===""&&t[i]!==0&&(n=i)});const r=Object.keys(e).sort((i,o)=>e[i]-e[o]);return r.slice(0,r.indexOf(n))}function HAe({theme:e,ownerState:t}){const{container:n,rowSpacing:r}=t;let i={};if(n&&r!==0){const o=Tp({values:r,breakpoints:e.breakpoints.values});let a;typeof o=="object"&&(a=_Q({breakpoints:e.breakpoints.values,values:o})),i=Ma({theme:e},o,(s,l)=>{var c;const u=e.spacing(s);return u!=="0px"?{marginTop:`-${Mg(u)}`,[`& > .${dv.item}`]:{paddingTop:Mg(u)}}:(c=a)!=null&&c.includes(l)?{}:{marginTop:0,[`& > .${dv.item}`]:{paddingTop:0}}})}return i}function GAe({theme:e,ownerState:t}){const{container:n,columnSpacing:r}=t;let i={};if(n&&r!==0){const o=Tp({values:r,breakpoints:e.breakpoints.values});let a;typeof o=="object"&&(a=_Q({breakpoints:e.breakpoints.values,values:o})),i=Ma({theme:e},o,(s,l)=>{var c;const u=e.spacing(s);return u!=="0px"?{width:`calc(100% + ${Mg(u)})`,marginLeft:`-${Mg(u)}`,[`& > .${dv.item}`]:{paddingLeft:Mg(u)}}:(c=a)!=null&&c.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${dv.item}`]:{paddingLeft:0}}})}return i}function WAe(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach(i=>{const o=e[i];Number(o)>0&&r.push(n[`spacing-${i}-${String(o)}`])}),r}const qAe=Ie("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:a,wrap:s,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=WAe(a,c,t));const f=[];return c.forEach(d=>{const p=n[d];p&&f.push(t[`grid-${d}-${String(p)}`])}),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth,...u,i!=="row"&&t[`direction-xs-${String(i)}`],s!=="wrap"&&t[`wrap-xs-${String(s)}`],...f]}})(({ownerState:e})=>I({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),VAe,HAe,GAe,UAe);function XAe(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(r=>{const i=e[r];if(Number(i)>0){const o=`spacing-${r}-${String(i)}`;n.push(o)}}),n}const YAe=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:a,zeroMinWidth:s,breakpoints:l}=e;let c=[];n&&(c=XAe(o,l));const u=[];l.forEach(d=>{const p=e[d];p&&u.push(`grid-${d}-${String(p)}`)});const f={root:["root",n&&"container",i&&"item",s&&"zeroMinWidth",...c,r!=="row"&&`direction-xs-${String(r)}`,a!=="wrap"&&`wrap-xs-${String(a)}`,...u]};return ot(f,bQ,t)},KAe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiGrid"}),{breakpoints:i}=ir(),o=E_(r),{className:a,columns:s,columnSpacing:l,component:c="div",container:u=!1,direction:f="row",item:d=!1,rowSpacing:p,spacing:h=0,wrap:g="wrap",zeroMinWidth:v=!1}=o,m=We(o,zAe),y=p||h,_=l||h,b=$.useContext(Zj),x=u?s||12:b,w={},S=I({},m);i.keys.forEach(k=>{m[k]!=null&&(w[k]=m[k],delete S[k])});const A=I({},o,{columns:x,container:u,direction:f,item:d,rowSpacing:y,columnSpacing:_,wrap:g,zeroMinWidth:v,spacing:h},w,{breakpoints:i.keys}),C=YAe(A);return G.jsx(Zj.Provider,{value:x,children:G.jsx(qAe,I({ownerState:A,className:je(C.root,a),as:c,ref:n},S))})}),Ny=KAe,ZAe=i0e({createStyledComponent:Ie("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,t)=>t.root}),componentName:"MuiGrid2",useThemeProps:e=>st({props:e,name:"MuiGrid2"})}),JAe=ZAe;function QAe(e){return it("MuiGrid2",e)}const ePe=[0,1,2,3,4,5,6,7,8,9,10],tPe=["column-reverse","column","row-reverse","row"],nPe=["nowrap","wrap-reverse","wrap"],W0=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],rPe=at("MuiGrid2",["root","container","item","zeroMinWidth",...ePe.map(e=>`spacing-xs-${e}`),...tPe.map(e=>`direction-xs-${e}`),...nPe.map(e=>`wrap-xs-${e}`),...W0.map(e=>`grid-xs-${e}`),...W0.map(e=>`grid-sm-${e}`),...W0.map(e=>`grid-md-${e}`),...W0.map(e=>`grid-lg-${e}`),...W0.map(e=>`grid-xl-${e}`)]),iPe=rPe,oPe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function k5(e){return`scale(${e}, ${e**2})`}const aPe={entering:{opacity:1,transform:k5(1)},entered:{opacity:1,transform:"none"}},gO=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),xQ=$.forwardRef(function(t,n){const{addEndListener:r,appear:i=!0,children:o,easing:a,in:s,onEnter:l,onEntered:c,onEntering:u,onExit:f,onExited:d,onExiting:p,style:h,timeout:g="auto",TransitionComponent:v=R_}=t,m=We(t,oPe),y=$.useRef(),_=$.useRef(),b=ir(),x=$.useRef(null),w=En(x,o.ref,n),S=P=>D=>{if(P){const z=x.current;D===void 0?P(z):P(z,D)}},A=S(u),C=S((P,D)=>{bM(P);const{duration:z,delay:N,easing:H}=Il({style:h,timeout:g,easing:a},{mode:"enter"});let J;g==="auto"?(J=b.transitions.getAutoHeightDuration(P.clientHeight),_.current=J):J=z,P.style.transition=[b.transitions.create("opacity",{duration:J,delay:N}),b.transitions.create("transform",{duration:gO?J:J*.666,delay:N,easing:H})].join(","),l&&l(P,D)}),k=S(c),O=S(p),T=S(P=>{const{duration:D,delay:z,easing:N}=Il({style:h,timeout:g,easing:a},{mode:"exit"});let H;g==="auto"?(H=b.transitions.getAutoHeightDuration(P.clientHeight),_.current=H):H=D,P.style.transition=[b.transitions.create("opacity",{duration:H,delay:z}),b.transitions.create("transform",{duration:gO?H:H*.666,delay:gO?z:z||H*.333,easing:N})].join(","),P.style.opacity=0,P.style.transform=k5(.75),f&&f(P)}),B=S(d),R=P=>{g==="auto"&&(y.current=setTimeout(P,_.current||0)),r&&r(x.current,P)};return $.useEffect(()=>()=>{clearTimeout(y.current)},[]),G.jsx(v,I({appear:i,in:s,nodeRef:x,onEnter:C,onEntered:k,onEntering:A,onExit:T,onExited:B,onExiting:O,addEndListener:R,timeout:g==="auto"?null:g},m,{children:(P,D)=>$.cloneElement(o,I({style:I({opacity:0,transform:k5(.75),visibility:P==="exited"&&!s?"hidden":void 0},aPe[P],h,o.props.style),ref:w},D))}))});xQ.muiSupportAuto=!0;const p1=xQ;function sPe(e,t,n,r,i){const[o,a]=$.useState(()=>i&&n?n(e).matches:r?r(e).matches:t);return vi(()=>{let s=!0;if(!n)return;const l=n(e),c=()=>{s&&a(l.matches)};return c(),l.addListener(c),()=>{s=!1,l.removeListener(c)}},[e,n]),o}const wQ=ZS["useSyncExternalStore"];function lPe(e,t,n,r,i){const o=$.useCallback(()=>t,[t]),a=$.useMemo(()=>{if(i&&n)return()=>n(e).matches;if(r!==null){const{matches:u}=r(e);return()=>u}return o},[o,e,r,i,n]),[s,l]=$.useMemo(()=>{if(n===null)return[o,()=>()=>{}];const u=n(e);return[()=>u.matches,f=>(u.addListener(f),()=>{u.removeListener(f)})]},[o,n,e]);return wQ(l,s,a)}function SQ(e,t={}){const n=hM(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:o=r?window.matchMedia:null,ssrMatchMedia:a=null,noSsr:s=!1}=MD({name:"MuiUseMediaQuery",props:t,theme:n});let l=typeof e=="function"?e(n):e;return l=l.replace(/^@media( ?)/m,""),(wQ!==void 0?lPe:sPe)(l,i,o,a,s)}const cPe=["initialWidth","width"],Ff=["xs","sm","md","lg","xl"],uPe=(e,t,n=!0)=>n?Ff.indexOf(e)<=Ff.indexOf(t):Ff.indexOf(e)<Ff.indexOf(t),fPe=(e,t,n=!1)=>n?Ff.indexOf(t)<=Ff.indexOf(e):Ff.indexOf(t)<Ff.indexOf(e),dPe=(e={})=>t=>{const{withTheme:n=!1,noSSR:r=!1,initialWidth:i}=e;function o(a){const s=ir(),l=a.theme||s,c=MD({theme:l,name:"MuiWithWidth",props:a}),{initialWidth:u,width:f}=c,d=We(c,cPe),[p,h]=$.useState(!1);vi(()=>{h(!0)},[]);const v=l.breakpoints.keys.slice().reverse().reduce((y,_)=>{const b=SQ(l.breakpoints.up(_));return!y&&b?_:y},null),m=I({width:f||(p||r?v:void 0)||u||i},n?{theme:l}:{},d);return m.width===void 0?null:G.jsx(t,I({},m))}return o},pPe=dPe;function hPe(e){const{children:t,only:n,width:r}=e,i=ir();let o=!0;if(n)if(Array.isArray(n))for(let a=0;a<n.length;a+=1){const s=n[a];if(r===s){o=!1;break}}else n&&r===n&&(o=!1);if(o)for(let a=0;a<i.breakpoints.keys.length;a+=1){const s=i.breakpoints.keys[a],l=e[`${s}Up`],c=e[`${s}Down`];if(l&&uPe(s,r)||c&&fPe(s,r)){o=!1;break}}return o?G.jsx($.Fragment,{children:t}):null}const mPe=pPe()(hPe);function gPe(e){return it("PrivateHiddenCss",e)}at("PrivateHiddenCss",["root","xlDown","xlUp","onlyXl","lgDown","lgUp","onlyLg","mdDown","mdUp","onlyMd","smDown","smUp","onlySm","xsDown","xsUp","onlyXs"]);const vPe=["children","className","only"],yPe=e=>{const{classes:t,breakpoints:n}=e,r={root:["root",...n.map(({breakpoint:i,dir:o})=>o==="only"?`${o}${De(i)}`:`${i}${De(o)}`)]};return ot(r,gPe,t)},bPe=Ie("div",{name:"PrivateHiddenCss",slot:"Root"})(({theme:e,ownerState:t})=>{const n={display:"none"};return I({},t.breakpoints.map(({breakpoint:r,dir:i})=>i==="only"?{[e.breakpoints.only(r)]:n}:i==="up"?{[e.breakpoints.up(r)]:n}:{[e.breakpoints.down(r)]:n}).reduce((r,i)=>(Object.keys(i).forEach(o=>{r[o]=i[o]}),r),{}))});function _Pe(e){const{children:t,className:n,only:r}=e,i=We(e,vPe),o=ir(),a=[];for(let c=0;c<o.breakpoints.keys.length;c+=1){const u=o.breakpoints.keys[c],f=i[`${u}Up`],d=i[`${u}Down`];f&&a.push({breakpoint:u,dir:"up"}),d&&a.push({breakpoint:u,dir:"down"})}r&&(Array.isArray(r)?r:[r]).forEach(u=>{a.push({breakpoint:u,dir:"only"})});const s=I({},e,{breakpoints:a}),l=yPe(s);return G.jsx(bPe,{className:je(l.root,n),ownerState:s,children:t})}const xPe=["implementation","lgDown","lgUp","mdDown","mdUp","smDown","smUp","xlDown","xlUp","xsDown","xsUp"];function wPe(e){const{implementation:t="js",lgDown:n=!1,lgUp:r=!1,mdDown:i=!1,mdUp:o=!1,smDown:a=!1,smUp:s=!1,xlDown:l=!1,xlUp:c=!1,xsDown:u=!1,xsUp:f=!1}=e,d=We(e,xPe);return t==="js"?G.jsx(mPe,I({lgDown:n,lgUp:r,mdDown:i,mdUp:o,smDown:a,smUp:s,xlDown:l,xlUp:c,xsDown:u,xsUp:f},d)):G.jsx(_Pe,I({lgDown:n,lgUp:r,mdDown:i,mdUp:o,smDown:a,smUp:s,xlDown:l,xlUp:c,xsDown:u,xsUp:f},d))}function CQ(e){return it("MuiIcon",e)}const SPe=at("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]),CPe=SPe,APe=["baseClassName","className","color","component","fontSize"],PPe=e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root",t!=="inherit"&&`color${De(t)}`,`fontSize${De(n)}`]};return ot(i,CQ,r)},MPe=Ie("span",{name:"MuiIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${De(n.color)}`],t[`fontSize${De(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:e.typography.pxToRem(20),medium:e.typography.pxToRem(24),large:e.typography.pxToRem(36)}[t.fontSize],color:{primary:(e.vars||e).palette.primary.main,secondary:(e.vars||e).palette.secondary.main,info:(e.vars||e).palette.info.main,success:(e.vars||e).palette.success.main,warning:(e.vars||e).palette.warning.main,action:(e.vars||e).palette.action.active,error:(e.vars||e).palette.error.main,disabled:(e.vars||e).palette.action.disabled,inherit:void 0}[t.color]})),AQ=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiIcon"}),{baseClassName:i="material-icons",className:o,color:a="inherit",component:s="span",fontSize:l="medium"}=r,c=We(r,APe),u=I({},r,{baseClassName:i,color:a,component:s,fontSize:l}),f=PPe(u);return G.jsx(MPe,I({as:s,className:je(i,"notranslate",f.root,o),ownerState:u,"aria-hidden":!0,ref:n},c))});AQ.muiName="Icon";const EPe=AQ;function PQ(e){return it("MuiImageList",e)}const TPe=at("MuiImageList",["root","masonry","quilted","standard","woven"]),OPe=TPe,IPe=$.createContext({}),MQ=IPe,RPe=["children","className","cols","component","rowHeight","gap","style","variant"],kPe=e=>{const{classes:t,variant:n}=e;return ot({root:["root",n]},PQ,t)},LPe=Ie("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})(({ownerState:e})=>I({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},e.variant==="masonry"&&{display:"block"})),$Pe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiImageList"}),{children:i,className:o,cols:a=2,component:s="ul",rowHeight:l="auto",gap:c=4,style:u,variant:f="standard"}=r,d=We(r,RPe),p=$.useMemo(()=>({rowHeight:l,gap:c,variant:f}),[l,c,f]);$.useEffect(()=>{},[]);const h=I(f==="masonry"?{columnCount:a,columnGap:c}:{gridTemplateColumns:`repeat(${a}, 1fr)`,gap:c},u),g=I({},r,{component:s,gap:c,rowHeight:l,variant:f}),v=kPe(g);return G.jsx(LPe,I({as:s,className:je(v.root,v[f],o),ref:n,style:h,ownerState:g},d,{children:G.jsx(MQ.Provider,{value:p,children:i})}))}),DPe=$Pe;function EQ(e){return it("MuiImageListItem",e)}const BPe=at("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),L5=BPe,NPe=["children","className","cols","component","rows","style"],FPe=e=>{const{classes:t,variant:n}=e;return ot({root:["root",n],img:["img"]},EQ,t)},jPe=Ie("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${L5.img}`]:t.img},t.root,t[n.variant]]}})(({ownerState:e})=>I({display:"block",position:"relative"},e.variant==="standard"&&{display:"flex",flexDirection:"column"},e.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${L5.img}`]:I({objectFit:"cover",width:"100%",height:"100%",display:"block"},e.variant==="standard"&&{height:"auto",flexGrow:1})})),zPe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiImageListItem"}),{children:i,className:o,cols:a=1,component:s="li",rows:l=1,style:c}=r,u=We(r,NPe),{rowHeight:f="auto",gap:d,variant:p}=$.useContext(MQ);let h="auto";p==="woven"?h=void 0:f!=="auto"&&(h=f*l+d*(l-1));const g=I({},r,{cols:a,component:s,gap:d,rowHeight:f,rows:l,variant:p}),v=FPe(g);return G.jsx(jPe,I({as:s,className:je(v.root,v[p],o),ref:n,style:I({height:h,gridColumnEnd:p!=="masonry"?`span ${a}`:void 0,gridRowEnd:p!=="masonry"?`span ${l}`:void 0,marginBottom:p==="masonry"?d:void 0,breakInside:p==="masonry"?"avoid":void 0},c),ownerState:g},u,{children:$.Children.map(i,m=>$.isValidElement(m)?m.type==="img"||xc(m,["Image"])?$.cloneElement(m,{className:je(v.img,m.props.className)}):m:null)}))}),UPe=zPe;function TQ(e){return it("MuiImageListItemBar",e)}const VPe=at("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]),HPe=VPe,GPe=["actionIcon","actionPosition","className","subtitle","title","position"],WPe=e=>{const{classes:t,position:n,actionIcon:r,actionPosition:i}=e,o={root:["root",`position${De(n)}`],titleWrap:["titleWrap",`titleWrap${De(n)}`,r&&`titleWrapActionPos${De(i)}`],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon",`actionIconActionPos${De(i)}`]};return ot(o,TQ,t)},qPe=Ie("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${De(n.position)}`]]}})(({theme:e,ownerState:t})=>I({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:e.typography.fontFamily},t.position==="bottom"&&{bottom:0},t.position==="top"&&{top:0},t.position==="below"&&{position:"relative",background:"transparent",alignItems:"normal"})),XPe=Ie("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.titleWrap,t[`titleWrap${De(n.position)}`],n.actionIcon&&t[`titleWrapActionPos${De(n.actionPosition)}`]]}})(({theme:e,ownerState:t})=>I({flexGrow:1,padding:"12px 16px",color:(e.vars||e).palette.common.white,overflow:"hidden"},t.position==="below"&&{padding:"6px 0 12px",color:"inherit"},t.actionIcon&&t.actionPosition==="left"&&{paddingLeft:0},t.actionIcon&&t.actionPosition==="right"&&{paddingRight:0})),YPe=Ie("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(e,t)=>t.title})(({theme:e})=>({fontSize:e.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})),KPe=Ie("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(e,t)=>t.subtitle})(({theme:e})=>({fontSize:e.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})),ZPe=Ie("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.actionIcon,t[`actionIconActionPos${De(n.actionPosition)}`]]}})(({ownerState:e})=>I({},e.actionPosition==="left"&&{order:-1})),JPe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiImageListItemBar"}),{actionIcon:i,actionPosition:o="right",className:a,subtitle:s,title:l,position:c="bottom"}=r,u=We(r,GPe),f=I({},r,{position:c,actionPosition:o}),d=WPe(f);return G.jsxs(qPe,I({ownerState:f,className:je(d.root,a),ref:n},u,{children:[G.jsxs(XPe,{ownerState:f,className:d.titleWrap,children:[G.jsx(YPe,{className:d.title,children:l}),s?G.jsx(KPe,{className:d.subtitle,children:s}):null]}),i?G.jsx(ZPe,{ownerState:f,className:d.actionIcon,children:i}):null]}))}),QPe=JPe,eMe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],tMe=e=>{const{classes:t,disableUnderline:n}=e,i=ot({root:["root",!n&&"underline"],input:["input"]},pJ,t);return I({},t,i)},nMe=Ie(PM,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...CM(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),I({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&:after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${du.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${du.error}`]:{"&:before, &:after":{borderBottomColor:(e.vars||e).palette.error.main}},"&:before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${du.disabled}, .${du.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${du.disabled}:before`]:{borderBottomStyle:"dotted"}})}),rMe=Ie(MM,{name:"MuiInput",slot:"Input",overridesResolver:AM})({}),OQ=$.forwardRef(function(t,n){var r,i,o,a;const s=st({props:t,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:u,fullWidth:f=!1,inputComponent:d="input",multiline:p=!1,slotProps:h,slots:g={},type:v="text"}=s,m=We(s,eMe),y=tMe(s),b={root:{ownerState:{disableUnderline:l}}},x=h??u?Jr(h??u,b):b,w=(r=(i=g.root)!=null?i:c.Root)!=null?r:nMe,S=(o=(a=g.input)!=null?a:c.Input)!=null?o:rMe;return G.jsx(D_,I({slots:{root:w,input:S},slotProps:x,fullWidth:f,inputComponent:d,multiline:p,ref:n,type:v},m,{classes:y}))});OQ.muiName="Input";const OM=OQ;function IQ(e){return it("MuiInputAdornment",e)}const iMe=at("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),$5=iMe;var Jj;const oMe=["children","className","component","disablePointerEvents","disableTypography","position","variant"],aMe=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${De(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},sMe=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:a}=e,s={root:["root",n&&"disablePointerEvents",i&&`position${De(i)}`,a,r&&"hiddenLabel",o&&`size${De(o)}`]};return ot(s,IQ,t)},lMe=Ie("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:aMe})(({theme:e,ownerState:t})=>I({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},t.variant==="filled"&&{[`&.${$5.positionStart}&:not(.${$5.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),cMe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiInputAdornment"}),{children:i,className:o,component:a="div",disablePointerEvents:s=!1,disableTypography:l=!1,position:c,variant:u}=r,f=We(r,oMe),d=Xs()||{};let p=u;u&&d.variant,d&&!p&&(p=d.variant);const h=I({},r,{hiddenLabel:d.hiddenLabel,size:d.size,disablePointerEvents:s,position:c,variant:p}),g=sMe(h);return G.jsx(SM.Provider,{value:null,children:G.jsx(lMe,I({as:a,ownerState:h,className:je(g.root,o),ref:n},f,{children:typeof i=="string"&&!l?G.jsx(jn,{color:"text.secondary",children:i}):G.jsxs($.Fragment,{children:[c==="start"?Jj||(Jj=G.jsx("span",{className:"notranslate",children:""})):null,i]})}))})}),uMe=cMe;function RQ(e){return it("MuiInputLabel",e)}const fMe=at("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]),dMe=fMe,pMe=["disableAnimation","margin","shrink","variant","className"],hMe=e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:a,required:s}=e,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&r!=="normal"&&`size${De(r)}`,a],asterisk:[s&&"asterisk"]},c=ot(l,RQ,t);return I({},t,c)},mMe=Ie(yQ,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Pg.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,t[n.variant]]}})(({theme:e,ownerState:t})=>I({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&I({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&I({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&I({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),gMe=$.forwardRef(function(t,n){const r=st({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,shrink:o,className:a}=r,s=We(r,pMe),l=Xs();let c=o;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const u=qu({props:r,muiFormControl:l,states:["size","variant","required"]}),f=I({},r,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required}),d=hMe(f);return G.jsx(mMe,I({"data-shrink":c,ownerState:f,ref:n,className:je(d.root,a)},s,{classes:d}))}),kQ=gMe;function LQ(e){return it("MuiLinearProgress",e)}const vMe=at("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]),yMe=vMe,bMe=["className","color","value","valueBuffer","variant"];let l0=e=>e,Qj,e8,t8,n8,r8,i8;const D5=4,_Me=cs(Qj||(Qj=l0`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),xMe=cs(e8||(e8=l0`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),wMe=cs(t8||(t8=l0`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),SMe=e=>{const{classes:t,variant:n,color:r}=e,i={root:["root",`color${De(r)}`,n],dashed:["dashed",`dashedColor${De(r)}`],bar1:["bar",`barColor${De(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${De(r)}`,n==="buffer"&&`color${De(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return ot(i,LQ,t)},sB=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?Ol(e.palette[t].main,.62):Tl(e.palette[t].main,.5),CMe=Ie("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${De(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>I({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:sB(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),AMe=Ie("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${De(n.color)}`]]}})(({ownerState:e,theme:t})=>{const n=sB(t,e.color);return I({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},Ml(n8||(n8=l0`
    animation: ${0} 3s infinite linear;
  `),wMe)),PMe=Ie("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${De(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>I({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${D5}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${D5}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&Ml(r8||(r8=l0`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),_Me)),MMe=Ie("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${De(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>I({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:sB(t,e.color),transition:`transform .${D5}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&Ml(i8||(i8=l0`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),xMe)),EMe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiLinearProgress"}),{className:i,color:o="primary",value:a,valueBuffer:s,variant:l="indeterminate"}=r,c=We(r,bMe),u=I({},r,{color:o,variant:l}),f=SMe(u),d=ir(),p={},h={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&a!==void 0){p["aria-valuenow"]=Math.round(a),p["aria-valuemin"]=0,p["aria-valuemax"]=100;let g=a-100;d.direction==="rtl"&&(g=-g),h.bar1.transform=`translateX(${g}%)`}if(l==="buffer"&&s!==void 0){let g=(s||0)-100;d.direction==="rtl"&&(g=-g),h.bar2.transform=`translateX(${g}%)`}return G.jsxs(CMe,I({className:je(f.root,i),ownerState:u,role:"progressbar"},p,{ref:n},c,{children:[l==="buffer"?G.jsx(AMe,{className:f.dashed,ownerState:u}):null,G.jsx(PMe,{className:f.bar1,ownerState:u,style:h.bar1}),l==="determinate"?null:G.jsx(MMe,{className:f.bar2,ownerState:u,style:h.bar2})]}))}),$Q=EMe;function DQ(e){return it("MuiLink",e)}const TMe=at("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),BQ=TMe,NQ={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},OMe=e=>NQ[e]||e,IMe=({theme:e,ownerState:t})=>{const n=OMe(t.color),r=av(e,`palette.${n}`,!1)||t.color,i=av(e,`palette.${n}Channel`);return"vars"in e&&i?`rgba(${i} / 0.4)`:Ot(r,.4)},RMe=IMe,kMe=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],LMe=e=>{const{classes:t,component:n,focusVisible:r,underline:i}=e,o={root:["root",`underline${De(i)}`,n==="button"&&"button",r&&"focusVisible"]};return ot(o,DQ,t)},$Me=Ie(jn,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${De(n.underline)}`],n.component==="button"&&t.button]}})(({theme:e,ownerState:t})=>I({},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},t.underline==="always"&&I({textDecoration:"underline"},t.color!=="inherit"&&{textDecorationColor:RMe({theme:e,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${BQ.focusVisible}`]:{outline:"auto"}})),DMe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiLink"}),{className:i,color:o="primary",component:a="a",onBlur:s,onFocus:l,TypographyClasses:c,underline:u="always",variant:f="inherit",sx:d}=r,p=We(r,kMe),{isFocusVisibleRef:h,onBlur:g,onFocus:v,ref:m}=Th(),[y,_]=$.useState(!1),b=En(n,m),x=C=>{g(C),h.current===!1&&_(!1),s&&s(C)},w=C=>{v(C),h.current===!0&&_(!0),l&&l(C)},S=I({},r,{color:o,component:a,focusVisible:y,underline:u,variant:f}),A=LMe(S);return G.jsx($Me,I({color:o,className:je(A.root,i),classes:c,component:a,onBlur:x,onFocus:w,ref:b,ownerState:S,variant:f,sx:[...Object.keys(NQ).includes(o)?[]:[{color:o}],...Array.isArray(d)?d:[d]]},p))}),FQ=DMe,BMe=$.createContext({}),Bs=BMe;function jQ(e){return it("MuiList",e)}const NMe=at("MuiList",["root","padding","dense","subheader"]),FMe=NMe,jMe=["children","className","component","dense","disablePadding","subheader"],zMe=e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return ot({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},jQ,t)},UMe=Ie("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>I({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),VMe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiList"}),{children:i,className:o,component:a="ul",dense:s=!1,disablePadding:l=!1,subheader:c}=r,u=We(r,jMe),f=$.useMemo(()=>({dense:s}),[s]),d=I({},r,{component:a,dense:s,disablePadding:l}),p=zMe(d);return G.jsx(Bs.Provider,{value:f,children:G.jsxs(UMe,I({as:a,className:je(p.root,o),ref:n,ownerState:d},u,{children:[c,i]}))})}),zQ=VMe;function UQ(e){return it("MuiListItem",e)}const HMe=at("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),pp=HMe;function VQ(e){return it("MuiListItemButton",e)}const GMe=at("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),hp=GMe,WMe=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],qMe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},XMe=e=>{const{alignItems:t,classes:n,dense:r,disabled:i,disableGutters:o,divider:a,selected:s}=e,c=ot({root:["root",r&&"dense",!o&&"gutters",a&&"divider",i&&"disabled",t==="flex-start"&&"alignItemsFlexStart",s&&"selected"]},VQ,n);return I({},n,c)},YMe=Ie(yi,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:qMe})(({theme:e,ownerState:t})=>I({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${hp.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${hp.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${hp.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${hp.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${hp.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.alignItems==="flex-start"&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4})),KMe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:a="div",children:s,dense:l=!1,disableGutters:c=!1,divider:u=!1,focusVisibleClassName:f,selected:d=!1,className:p}=r,h=We(r,WMe),g=$.useContext(Bs),v=$.useMemo(()=>({dense:l||g.dense||!1,alignItems:i,disableGutters:c}),[i,g.dense,l,c]),m=$.useRef(null);vi(()=>{o&&m.current&&m.current.focus()},[o]);const y=I({},r,{alignItems:i,dense:v.dense,disableGutters:c,divider:u,selected:d}),_=XMe(y),b=En(m,n);return G.jsx(Bs.Provider,{value:v,children:G.jsx(YMe,I({ref:b,href:h.href||h.to,component:(h.href||h.to)&&a==="div"?"button":a,focusVisibleClassName:je(_.focusVisible,f),ownerState:y,className:je(_.root,p)},h,{classes:_,children:s}))})}),ZMe=KMe;function HQ(e){return it("MuiListItemSecondaryAction",e)}const JMe=at("MuiListItemSecondaryAction",["root","disableGutters"]),QMe=JMe,eEe=["className"],tEe=e=>{const{disableGutters:t,classes:n}=e;return ot({root:["root",t&&"disableGutters"]},HQ,n)},nEe=Ie("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>I({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),GQ=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiListItemSecondaryAction"}),{className:i}=r,o=We(r,eEe),a=$.useContext(Bs),s=I({},r,{disableGutters:a.disableGutters}),l=tEe(s);return G.jsx(nEe,I({className:je(l.root,i),ownerState:s,ref:n},o))});GQ.muiName="ListItemSecondaryAction";const WQ=GQ,rEe=["className"],iEe=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],oEe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]},aEe=e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:o,disableGutters:a,disablePadding:s,divider:l,hasSecondaryAction:c,selected:u}=e;return ot({root:["root",i&&"dense",!a&&"gutters",!s&&"padding",l&&"divider",o&&"disabled",n&&"button",t==="flex-start"&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]},UQ,r)},sEe=Ie("div",{name:"MuiListItem",slot:"Root",overridesResolver:oEe})(({theme:e,ownerState:t})=>I({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&I({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${hp.root}`]:{paddingRight:48}},{[`&.${pp.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${pp.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${pp.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${pp.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${pp.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),lEe=Ie("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),cEe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiListItem"}),{alignItems:i="center",autoFocus:o=!1,button:a=!1,children:s,className:l,component:c,components:u={},componentsProps:f={},ContainerComponent:d="li",ContainerProps:{className:p}={},dense:h=!1,disabled:g=!1,disableGutters:v=!1,disablePadding:m=!1,divider:y=!1,focusVisibleClassName:_,secondaryAction:b,selected:x=!1,slotProps:w={},slots:S={}}=r,A=We(r.ContainerProps,rEe),C=We(r,iEe),k=$.useContext(Bs),O=$.useMemo(()=>({dense:h||k.dense||!1,alignItems:i,disableGutters:v}),[i,k.dense,h,v]),T=$.useRef(null);vi(()=>{o&&T.current&&T.current.focus()},[o]);const B=$.Children.toArray(s),R=B.length&&xc(B[B.length-1],["ListItemSecondaryAction"]),P=I({},r,{alignItems:i,autoFocus:o,button:a,dense:O.dense,disabled:g,disableGutters:v,disablePadding:m,divider:y,hasSecondaryAction:R,selected:x}),D=aEe(P),z=En(T,n),N=S.root||u.Root||sEe,H=w.root||f.root||{},J=I({className:je(D.root,H.className,l),disabled:g},C);let ne=c||"li";return a&&(J.component=c||"div",J.focusVisibleClassName=je(pp.focusVisible,_),ne=yi),R?(ne=!J.component&&!c?"div":ne,d==="li"&&(ne==="li"?ne="div":J.component==="li"&&(J.component="div")),G.jsx(Bs.Provider,{value:O,children:G.jsxs(lEe,I({as:d,className:je(D.container,p),ref:z,ownerState:P},A,{children:[G.jsx(N,I({},H,!wl(N)&&{as:ne,ownerState:I({},P,H.ownerState)},J,{children:B})),B.pop()]}))})):G.jsx(Bs.Provider,{value:O,children:G.jsxs(N,I({},H,{as:ne,ref:z},!wl(N)&&{ownerState:I({},P,H.ownerState)},J,{children:[B,b&&G.jsx(WQ,{children:b})]}))})}),uEe=cEe;function qQ(e){return it("MuiListItemAvatar",e)}const fEe=at("MuiListItemAvatar",["root","alignItemsFlexStart"]),dEe=fEe,pEe=["className"],hEe=e=>{const{alignItems:t,classes:n}=e;return ot({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},qQ,n)},mEe=Ie("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({ownerState:e})=>I({minWidth:56,flexShrink:0},e.alignItems==="flex-start"&&{marginTop:8})),gEe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiListItemAvatar"}),{className:i}=r,o=We(r,pEe),a=$.useContext(Bs),s=I({},r,{alignItems:a.alignItems}),l=hEe(s);return G.jsx(mEe,I({className:je(l.root,i),ownerState:s,ref:n},o))}),vEe=gEe;function XQ(e){return it("MuiListItemIcon",e)}const yEe=at("MuiListItemIcon",["root","alignItemsFlexStart"]),B5=yEe,bEe=["className"],_Ee=e=>{const{alignItems:t,classes:n}=e;return ot({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},XQ,n)},xEe=Ie("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>I({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},t.alignItems==="flex-start"&&{marginTop:8})),wEe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiListItemIcon"}),{className:i}=r,o=We(r,bEe),a=$.useContext(Bs),s=I({},r,{alignItems:a.alignItems}),l=_Ee(s);return G.jsx(xEe,I({className:je(l.root,i),ownerState:s,ref:n},o))}),SEe=wEe;function YQ(e){return it("MuiListItemText",e)}const CEe=at("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),h1=CEe,AEe=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],PEe=e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:o}=e;return ot({root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},YQ,t)},MEe=Ie("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${h1.primary}`]:t.primary},{[`& .${h1.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>I({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),EEe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiListItemText"}),{children:i,className:o,disableTypography:a=!1,inset:s=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:f}=r,d=We(r,AEe),{dense:p}=$.useContext(Bs);let h=l??i,g=u;const v=I({},r,{disableTypography:a,inset:s,primary:!!h,secondary:!!g,dense:p}),m=PEe(v);return h!=null&&h.type!==jn&&!a&&(h=G.jsx(jn,I({variant:p?"body2":"body1",className:m.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:h}))),g!=null&&g.type!==jn&&!a&&(g=G.jsx(jn,I({variant:"body2",className:m.secondary,color:"text.secondary",display:"block"},f,{children:g}))),G.jsxs(MEe,I({className:je(m.root,o),ownerState:v,ref:n},d,{children:[h,g]}))}),TEe=EEe,OEe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function vO(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function o8(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function KQ(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function q0(e,t,n,r,i,o){let a=!1,s=i(e,t,t?n:!1);for(;s;){if(s===e.firstChild){if(a)return!1;a=!0}const l=r?!1:s.disabled||s.getAttribute("aria-disabled")==="true";if(!s.hasAttribute("tabindex")||!KQ(s,o)||l)s=i(e,s,n);else return s.focus(),!0}return!1}const IEe=$.forwardRef(function(t,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:a,className:s,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:f="selectedMenu"}=t,d=We(t,OEe),p=$.useRef(null),h=$.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});vi(()=>{i&&p.current.focus()},[i]),$.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(_,b)=>{const x=!p.current.style.width;if(_.clientHeight<p.current.clientHeight&&x){const w=`${PK(er(_))}px`;p.current.style[b.direction==="rtl"?"paddingLeft":"paddingRight"]=w,p.current.style.width=`calc(100% + ${w})`}return p.current}}),[]);const g=_=>{const b=p.current,x=_.key,w=er(b).activeElement;if(x==="ArrowDown")_.preventDefault(),q0(b,w,c,l,vO);else if(x==="ArrowUp")_.preventDefault(),q0(b,w,c,l,o8);else if(x==="Home")_.preventDefault(),q0(b,null,c,l,vO);else if(x==="End")_.preventDefault(),q0(b,null,c,l,o8);else if(x.length===1){const S=h.current,A=x.toLowerCase(),C=performance.now();S.keys.length>0&&(C-S.lastTime>500?(S.keys=[],S.repeating=!0,S.previousKeyMatched=!0):S.repeating&&A!==S.keys[0]&&(S.repeating=!1)),S.lastTime=C,S.keys.push(A);const k=w&&!S.repeating&&KQ(w,S);S.previousKeyMatched&&(k||q0(b,w,!1,l,vO,S))?_.preventDefault():S.previousKeyMatched=!1}u&&u(_)},v=En(p,n);let m=-1;$.Children.forEach(a,(_,b)=>{if(!$.isValidElement(_)){m===b&&(m+=1,m>=a.length&&(m=-1));return}_.props.disabled||(f==="selectedMenu"&&_.props.selected||m===-1)&&(m=b),m===b&&(_.props.disabled||_.props.muiSkipListHighlight||_.type.muiSkipListHighlight)&&(m+=1,m>=a.length&&(m=-1))});const y=$.Children.map(a,(_,b)=>{if(b===m){const x={};return o&&(x.autoFocus=!0),_.props.tabIndex===void 0&&f==="selectedMenu"&&(x.tabIndex=0),$.cloneElement(_,x)}return _});return G.jsx(zQ,I({role:"menu",ref:v,className:s,onKeyDown:g,tabIndex:i?0:-1},d,{children:y}))}),ZQ=IEe;function JQ(e){return it("MuiPopover",e)}const REe=at("MuiPopover",["root","paper"]),kEe=REe,LEe=["onEntering"],$Ee=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],DEe=["slotProps"];function N5(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function F5(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function a8(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function yO(e){return typeof e=="function"?e():e}const BEe=e=>{const{classes:t}=e;return ot({root:["root"],paper:["paper"]},JQ,t)},QQ=Ie(TM,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),lB=Ie(us,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),NEe=$.forwardRef(function(t,n){var r,i,o;const a=st({props:t,name:"MuiPopover"}),{action:s,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:f="anchorEl",children:d,className:p,container:h,elevation:g=8,marginThreshold:v=16,open:m,PaperProps:y={},slots:_,slotProps:b,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:w=p1,transitionDuration:S="auto",TransitionProps:{onEntering:A}={},disableScrollLock:C=!1}=a,k=We(a.TransitionProps,LEe),O=We(a,$Ee),T=(r=b==null?void 0:b.paper)!=null?r:y,B=$.useRef(),R=En(B,T.ref),P=I({},a,{anchorOrigin:c,anchorReference:f,elevation:g,marginThreshold:v,externalPaperSlotProps:T,transformOrigin:x,TransitionComponent:w,transitionDuration:S,TransitionProps:k}),D=BEe(P),z=$.useCallback(()=>{if(f==="anchorPosition")return u;const de=yO(l),be=(de&&de.nodeType===1?de:er(B.current).body).getBoundingClientRect();return{top:be.top+N5(be,c.vertical),left:be.left+F5(be,c.horizontal)}},[l,c.horizontal,c.vertical,u,f]),N=$.useCallback(de=>({vertical:N5(de,x.vertical),horizontal:F5(de,x.horizontal)}),[x.horizontal,x.vertical]),H=$.useCallback(de=>{const _e={width:de.offsetWidth,height:de.offsetHeight},be=N(_e);if(f==="none")return{top:null,left:null,transformOrigin:a8(be)};const ke=z();let W=ke.top-be.vertical,ee=ke.left-be.horizontal;const Ee=W+_e.height,ge=ee+_e.width,pe=so(yO(l)),ve=pe.innerHeight-v,$e=pe.innerWidth-v;if(v!==null&&W<v){const Ne=W-v;W-=Ne,be.vertical+=Ne}else if(v!==null&&Ee>ve){const Ne=Ee-ve;W-=Ne,be.vertical+=Ne}if(v!==null&&ee<v){const Ne=ee-v;ee-=Ne,be.horizontal+=Ne}else if(ge>$e){const Ne=ge-$e;ee-=Ne,be.horizontal+=Ne}return{top:`${Math.round(W)}px`,left:`${Math.round(ee)}px`,transformOrigin:a8(be)}},[l,f,z,N,v]),[J,ne]=$.useState(m),oe=$.useCallback(()=>{const de=B.current;if(!de)return;const _e=H(de);_e.top!==null&&(de.style.top=_e.top),_e.left!==null&&(de.style.left=_e.left),de.style.transformOrigin=_e.transformOrigin,ne(!0)},[H]);$.useEffect(()=>(C&&window.addEventListener("scroll",oe),()=>window.removeEventListener("scroll",oe)),[l,C,oe]);const Z=(de,_e)=>{A&&A(de,_e),oe()},ce=()=>{ne(!1)};$.useEffect(()=>{m&&oe()}),$.useImperativeHandle(s,()=>m?{updatePosition:()=>{oe()}}:null,[m,oe]),$.useEffect(()=>{if(!m)return;const de=Eh(()=>{oe()}),_e=so(l);return _e.addEventListener("resize",de),()=>{de.clear(),_e.removeEventListener("resize",de)}},[l,m,oe]);let se=S;S==="auto"&&!w.muiSupportAuto&&(se=void 0);const Y=h||(l?er(yO(l)).body:void 0),he=(i=_==null?void 0:_.root)!=null?i:QQ,ae=(o=_==null?void 0:_.paper)!=null?o:lB,ye=Nr({elementType:ae,externalSlotProps:I({},T,{style:J?T.style:I({},T.style,{opacity:0})}),additionalProps:{elevation:g,ref:R},ownerState:P,className:je(D.paper,T==null?void 0:T.className)}),re=Nr({elementType:he,externalSlotProps:(b==null?void 0:b.root)||{},externalForwardedProps:O,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:Y,open:m},ownerState:P,className:je(D.root,p)}),{slotProps:te}=re,le=We(re,DEe);return G.jsx(he,I({},le,!wl(he)&&{slotProps:te,disableScrollLock:C},{children:G.jsx(w,I({appear:!0,in:m,onEntering:Z,onExited:ce,timeout:se},k,{children:G.jsx(ae,I({},ye,{children:d}))}))}))}),GC=NEe;function eee(e){return it("MuiMenu",e)}const FEe=at("MuiMenu",["root","paper","list"]),jEe=FEe,zEe=["onEntering"],UEe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],VEe={vertical:"top",horizontal:"right"},HEe={vertical:"top",horizontal:"left"},GEe=e=>{const{classes:t}=e;return ot({root:["root"],paper:["paper"],list:["list"]},eee,t)},WEe=Ie(GC,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),qEe=Ie(lB,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),XEe=Ie(ZQ,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),YEe=$.forwardRef(function(t,n){var r,i;const o=st({props:t,name:"MuiMenu"}),{autoFocus:a=!0,children:s,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:f,open:d,PaperProps:p={},PopoverClasses:h,transitionDuration:g="auto",TransitionProps:{onEntering:v}={},variant:m="selectedMenu",slots:y={},slotProps:_={}}=o,b=We(o.TransitionProps,zEe),x=We(o,UEe),w=ir(),S=w.direction==="rtl",A=I({},o,{autoFocus:a,disableAutoFocusItem:c,MenuListProps:u,onEntering:v,PaperProps:p,transitionDuration:g,TransitionProps:b,variant:m}),C=GEe(A),k=a&&!c&&d,O=$.useRef(null),T=(H,J)=>{O.current&&O.current.adjustStyleForScrollbar(H,w),v&&v(H,J)},B=H=>{H.key==="Tab"&&(H.preventDefault(),f&&f(H,"tabKeyDown"))};let R=-1;$.Children.map(s,(H,J)=>{$.isValidElement(H)&&(H.props.disabled||(m==="selectedMenu"&&H.props.selected||R===-1)&&(R=J))});const P=(r=y.paper)!=null?r:qEe,D=(i=_.paper)!=null?i:p,z=Nr({elementType:y.root,externalSlotProps:_.root,ownerState:A,className:[C.root,l]}),N=Nr({elementType:P,externalSlotProps:D,ownerState:A,className:C.paper});return G.jsx(WEe,I({onClose:f,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?VEe:HEe,slots:{paper:P,root:y.root},slotProps:{root:z,paper:N},open:d,ref:n,transitionDuration:g,TransitionProps:I({onEntering:T},b),ownerState:A},x,{classes:h,children:G.jsx(XEe,I({onKeyDown:B,actions:O,autoFocus:a&&(R===-1||c),autoFocusItem:k,variant:m},u,{className:je(C.list,u.className),children:s}))}))}),B_=YEe;function tee(e){return it("MuiMenuItem",e)}const KEe=at("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Tm=KEe,ZEe=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],JEe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},QEe=e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:a}=e,l=ot({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},tee,a);return I({},a,l)},e3e=Ie(yi,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:JEe})(({theme:e,ownerState:t})=>I({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Tm.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Tm.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Tm.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Tm.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Tm.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${O5.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${O5.inset}`]:{marginLeft:52},[`& .${h1.root}`]:{marginTop:0,marginBottom:0},[`& .${h1.inset}`]:{paddingLeft:36},[`& .${B5.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&I({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${B5.root} svg`]:{fontSize:"1.25rem"}}))),t3e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:a=!1,divider:s=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:f,className:d}=r,p=We(r,ZEe),h=$.useContext(Bs),g=$.useMemo(()=>({dense:a||h.dense||!1,disableGutters:l}),[h.dense,a,l]),v=$.useRef(null);vi(()=>{i&&v.current&&v.current.focus()},[i]);const m=I({},r,{dense:g.dense,divider:s,disableGutters:l}),y=QEe(r),_=En(v,n);let b;return r.disabled||(b=f!==void 0?f:-1),G.jsx(Bs.Provider,{value:g,children:G.jsx(e3e,I({ref:_,role:u,tabIndex:b,component:o,focusVisibleClassName:je(y.focusVisible,c),className:je(y.root,d)},p,{ownerState:m,classes:y}))})}),fa=t3e;function nee(e){return it("MuiMobileStepper",e)}const n3e=at("MuiMobileStepper",["root","positionBottom","positionTop","positionStatic","dots","dot","dotActive","progress"]),r3e=n3e,i3e=["activeStep","backButton","className","LinearProgressProps","nextButton","position","steps","variant"],o3e=e=>{const{classes:t,position:n}=e,r={root:["root",`position${De(n)}`],dots:["dots"],dot:["dot"],dotActive:["dotActive"],progress:["progress"]};return ot(r,nee,t)},a3e=Ie(us,{name:"MuiMobileStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${De(n.position)}`]]}})(({theme:e,ownerState:t})=>I({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:(e.vars||e).palette.background.default,padding:8},t.position==="bottom"&&{position:"fixed",bottom:0,left:0,right:0,zIndex:(e.vars||e).zIndex.mobileStepper},t.position==="top"&&{position:"fixed",top:0,left:0,right:0,zIndex:(e.vars||e).zIndex.mobileStepper})),s3e=Ie("div",{name:"MuiMobileStepper",slot:"Dots",overridesResolver:(e,t)=>t.dots})(({ownerState:e})=>I({},e.variant==="dots"&&{display:"flex",flexDirection:"row"})),l3e=Ie("div",{name:"MuiMobileStepper",slot:"Dot",shouldForwardProp:e=>I_(e)&&e!=="dotActive",overridesResolver:(e,t)=>{const{dotActive:n}=e;return[t.dot,n&&t.dotActive]}})(({theme:e,ownerState:t,dotActive:n})=>I({},t.variant==="dots"&&I({transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),backgroundColor:(e.vars||e).palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},n&&{backgroundColor:(e.vars||e).palette.primary.main}))),c3e=Ie($Q,{name:"MuiMobileStepper",slot:"Progress",overridesResolver:(e,t)=>t.progress})(({ownerState:e})=>I({},e.variant==="progress"&&{width:"50%"})),u3e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiMobileStepper"}),{activeStep:i=0,backButton:o,className:a,LinearProgressProps:s,nextButton:l,position:c="bottom",steps:u,variant:f="dots"}=r,d=We(r,i3e),p=I({},r,{activeStep:i,position:c,variant:f});let h;f==="progress"&&(u===1?h=100:h=Math.ceil(i/(u-1)*100));const g=o3e(p);return G.jsxs(a3e,I({square:!0,elevation:0,className:je(g.root,a),ref:n,ownerState:p},d,{children:[o,f==="text"&&G.jsxs($.Fragment,{children:[i+1," / ",u]}),f==="dots"&&G.jsx(s3e,{ownerState:p,className:g.dots,children:[...new Array(u)].map((v,m)=>G.jsx(l3e,{className:je(g.dot,m===i&&g.dotActive),ownerState:p,dotActive:m===i},m))}),f==="progress"&&G.jsx(c3e,I({ownerState:p,className:g.progress,variant:"determinate",value:h},s)),l]}))}),f3e=u3e;function cB(e){return it("MuiNativeSelect",e)}const d3e=at("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),IM=d3e,p3e=["className","disabled","error","IconComponent","inputRef","variant"],h3e=e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${De(n)}`,o&&"iconOpen",r&&"disabled"]};return ot(s,cB,t)},ree=({ownerState:e,theme:t})=>I({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":I({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${IM.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),m3e=Ie("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:$o,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${IM.multiple}`]:t.multiple}]}})(ree),iee=({ownerState:e,theme:t})=>I({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${IM.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),g3e=Ie("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${De(n.variant)}`],n.open&&t.iconOpen]}})(iee),v3e=$.forwardRef(function(t,n){const{className:r,disabled:i,error:o,IconComponent:a,inputRef:s,variant:l="standard"}=t,c=We(t,p3e),u=I({},t,{disabled:i,variant:l,error:o}),f=h3e(u);return G.jsxs($.Fragment,{children:[G.jsx(m3e,I({ownerState:u,className:je(f.select,r),disabled:i,ref:s||n},c)),t.multiple?null:G.jsx(g3e,{as:a,ownerState:u,className:f.icon})]})}),oee=v3e,y3e=["className","children","classes","IconComponent","input","inputProps","variant"],b3e=["root"],_3e=e=>{const{classes:t}=e;return ot({root:["root"]},cB,t)},x3e=G.jsx(OM,{}),aee=$.forwardRef(function(t,n){const r=st({name:"MuiNativeSelect",props:t}),{className:i,children:o,classes:a={},IconComponent:s=QD,input:l=x3e,inputProps:c}=r,u=We(r,y3e),f=Xs(),d=qu({props:r,muiFormControl:f,states:["variant"]}),p=I({},r,{classes:a}),h=_3e(p),g=We(a,b3e);return G.jsx($.Fragment,{children:$.cloneElement(l,I({inputComponent:oee,inputProps:I({children:o,classes:g,IconComponent:s,variant:d.variant,type:void 0},c,l?l.props.inputProps:{}),ref:n},u,{className:je(h.root,l.props.className,i)}))})});aee.muiName="Select";const w3e=aee;var s8;const S3e=["children","classes","className","label","notched"],C3e=Ie("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),A3e=Ie("legend")(({ownerState:e,theme:t})=>I({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&I({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function P3e(e){const{className:t,label:n,notched:r}=e,i=We(e,S3e),o=n!=null&&n!=="",a=I({},e,{notched:r,withLabel:o});return G.jsx(C3e,I({"aria-hidden":!0,className:t,ownerState:a},i,{children:G.jsx(A3e,{ownerState:a,children:o?G.jsx("span",{children:n}):s8||(s8=G.jsx("span",{className:"notranslate",children:""}))})}))}const M3e=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],E3e=e=>{const{classes:t}=e,r=ot({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},hJ,t);return I({},t,r)},T3e=Ie(PM,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:CM})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return I({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${cl.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${cl.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${cl.focused} .${cl.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${cl.error} .${cl.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${cl.disabled} .${cl.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&I({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),O3e=Ie(P3e,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),I3e=Ie(MM,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:AM})(({theme:e,ownerState:t})=>I({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),see=$.forwardRef(function(t,n){var r,i,o,a,s;const l=st({props:t,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:f="input",label:d,multiline:p=!1,notched:h,slots:g={},type:v="text"}=l,m=We(l,M3e),y=E3e(l),_=Xs(),b=qu({props:l,muiFormControl:_,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x=I({},l,{color:b.color||"primary",disabled:b.disabled,error:b.error,focused:b.focused,formControl:_,fullWidth:u,hiddenLabel:b.hiddenLabel,multiline:p,size:b.size,type:v}),w=(r=(i=g.root)!=null?i:c.Root)!=null?r:T3e,S=(o=(a=g.input)!=null?a:c.Input)!=null?o:I3e;return G.jsx(D_,I({slots:{root:w,input:S},renderSuffix:A=>G.jsx(O3e,{ownerState:x,className:y.notchedOutline,label:d!=null&&d!==""&&b.required?s||(s=G.jsxs($.Fragment,{children:[d,"","*"]})):d,notched:typeof h<"u"?h:!!(A.startAdornment||A.filled||A.focused)}),fullWidth:u,inputComponent:f,multiline:p,ref:n,type:v},m,{classes:I({},y,{notchedOutline:null})}))});see.muiName="Input";const uB=see;function lee(e){return it("MuiPagination",e)}const R3e=at("MuiPagination",["root","ul","outlined","text"]),k3e=R3e,L3e=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function cee(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:r=1,defaultPage:i=1,disabled:o=!1,hideNextButton:a=!1,hidePrevButton:s=!1,onChange:l,page:c,showFirstButton:u=!1,showLastButton:f=!1,siblingCount:d=1}=e,p=We(e,L3e),[h,g]=Wo({controlled:c,default:i,name:n,state:"page"}),v=(C,k)=>{c||g(k),l&&l(C,k)},m=(C,k)=>{const O=k-C+1;return Array.from({length:O},(T,B)=>C+B)},y=m(1,Math.min(t,r)),_=m(Math.max(r-t+1,t+1),r),b=Math.max(Math.min(h-d,r-t-d*2-1),t+2),x=Math.min(Math.max(h+d,t+d*2+2),_.length>0?_[0]-2:r-1),w=[...u?["first"]:[],...s?[]:["previous"],...y,...b>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...m(b,x),...x<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],..._,...a?[]:["next"],...f?["last"]:[]],S=C=>{switch(C){case"first":return 1;case"previous":return h-1;case"next":return h+1;case"last":return r;default:return null}},A=w.map(C=>typeof C=="number"?{onClick:k=>{v(k,C)},type:"page",page:C,selected:C===h,disabled:o,"aria-current":C===h?"true":void 0}:{onClick:k=>{v(k,S(C))},type:C,page:S(C),selected:!1,disabled:o||C.indexOf("ellipsis")===-1&&(C==="next"||C==="last"?h>=r:h<=1)});return I({items:A},p)}function uee(e){return it("MuiPaginationItem",e)}const $3e=at("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),Da=$3e,WC=fr(G.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),qC=fr(G.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),l8=fr(G.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),c8=fr(G.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),D3e=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],fee=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${De(n.size)}`],n.variant==="text"&&t[`text${De(n.color)}`],n.variant==="outlined"&&t[`outlined${De(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},B3e=e=>{const{classes:t,color:n,disabled:r,selected:i,size:o,shape:a,type:s,variant:l}=e,c={root:["root",`size${De(o)}`,l,a,n!=="standard"&&`${l}${De(n)}`,r&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]};return ot(c,uee,t)},N3e=Ie("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:fee})(({theme:e,ownerState:t})=>I({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Da.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),F3e=Ie(yi,{name:"MuiPaginationItem",slot:"Root",overridesResolver:fee})(({theme:e,ownerState:t})=>I({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Da.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Da.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Da.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Ot(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Da.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Ot(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Da.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>I({},t.variant==="text"&&{[`&.${Da.selected}`]:I({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${Da.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${Da.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Da.selected}`]:I({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:Ot(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:Ot(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Ot(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Da.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Ot(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${Da.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),j3e=Ie("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>I({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),z3e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiPaginationItem"}),{className:i,color:o="standard",component:a,components:s={},disabled:l=!1,page:c,selected:u=!1,shape:f="circular",size:d="medium",slots:p={},type:h="page",variant:g="text"}=r,v=We(r,D3e),m=I({},r,{color:o,disabled:l,selected:u,shape:f,size:d,type:h,variant:g}),y=ir(),_=B3e(m),x=(y.direction==="rtl"?{previous:p.next||s.next||c8,next:p.previous||s.previous||l8,last:p.first||s.first||WC,first:p.last||s.last||qC}:{previous:p.previous||s.previous||l8,next:p.next||s.next||c8,first:p.first||s.first||WC,last:p.last||s.last||qC})[h];return h==="start-ellipsis"||h==="end-ellipsis"?G.jsx(N3e,{ref:n,ownerState:m,className:je(_.root,i),children:""}):G.jsxs(F3e,I({ref:n,ownerState:m,component:a,disabled:l,className:je(_.root,i)},v,{children:[h==="page"&&c,x?G.jsx(j3e,{as:x,ownerState:m,className:_.icon}):null]}))}),dee=z3e,U3e=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],V3e=e=>{const{classes:t,variant:n}=e;return ot({root:["root",n],ul:["ul"]},lee,t)},H3e=Ie("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),G3e=Ie("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function W3e(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const q3e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiPagination"}),{boundaryCount:i=1,className:o,color:a="standard",count:s=1,defaultPage:l=1,disabled:c=!1,getItemAriaLabel:u=W3e,hideNextButton:f=!1,hidePrevButton:d=!1,renderItem:p=A=>G.jsx(dee,I({},A)),shape:h="circular",showFirstButton:g=!1,showLastButton:v=!1,siblingCount:m=1,size:y="medium",variant:_="text"}=r,b=We(r,U3e),{items:x}=cee(I({},r,{componentName:"Pagination"})),w=I({},r,{boundaryCount:i,color:a,count:s,defaultPage:l,disabled:c,getItemAriaLabel:u,hideNextButton:f,hidePrevButton:d,renderItem:p,shape:h,showFirstButton:g,showLastButton:v,siblingCount:m,size:y,variant:_}),S=V3e(w);return G.jsx(H3e,I({"aria-label":"pagination navigation",className:je(S.root,o),ownerState:w,ref:n},b,{children:G.jsx(G3e,{className:S.ul,ownerState:w,children:x.map((A,C)=>G.jsx("li",{children:p(I({},A,{color:a,"aria-label":u(A.type,A.page,A.selected),shape:h,size:y,variant:_}))},C))})}))}),X3e=q3e,Y3e=fr(G.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),K3e=fr(G.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Z3e=Ie("span")({position:"relative",display:"flex"}),J3e=Ie(Y3e)({transform:"scale(1)"}),Q3e=Ie(K3e)(({theme:e,ownerState:t})=>I({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function pee(e){const{checked:t=!1,classes:n={},fontSize:r}=e,i=I({},e,{checked:t});return G.jsxs(Z3e,{className:n.root,ownerState:i,children:[G.jsx(J3e,{fontSize:r,className:n.background,ownerState:i}),G.jsx(Q3e,{fontSize:r,className:n.dot,ownerState:i})]})}const eTe=$.createContext(void 0),hee=eTe;function mee(){return $.useContext(hee)}function gee(e){return it("MuiRadio",e)}const tTe=at("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),j5=tTe,nTe=["checked","checkedIcon","color","icon","name","onChange","size","className"],rTe=e=>{const{classes:t,color:n,size:r}=e,i={root:["root",`color${De(n)}`,r!=="medium"&&`size${De(r)}`]};return I({},t,ot(i,gee,t))},iTe=Ie(iB,{shouldForwardProp:e=>$o(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${De(n.color)}`]]}})(({theme:e,ownerState:t})=>I({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${j5.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${j5.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function oTe(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const u8=G.jsx(pee,{checked:!0}),f8=G.jsx(pee,{}),aTe=$.forwardRef(function(t,n){var r,i;const o=st({props:t,name:"MuiRadio"}),{checked:a,checkedIcon:s=u8,color:l="primary",icon:c=f8,name:u,onChange:f,size:d="medium",className:p}=o,h=We(o,nTe),g=I({},o,{color:l,size:d}),v=rTe(g),m=mee();let y=a;const _=o1(f,m&&m.onChange);let b=u;return m&&(typeof y>"u"&&(y=oTe(m.value,o.value)),typeof b>"u"&&(b=m.name)),G.jsx(iTe,I({type:"radio",icon:$.cloneElement(c,{fontSize:(r=f8.props.fontSize)!=null?r:d}),checkedIcon:$.cloneElement(s,{fontSize:(i=u8.props.fontSize)!=null?i:d}),ownerState:g,classes:v,name:b,checked:y,onChange:_,ref:n,className:je(v.root,p)},h))}),sTe=aTe,lTe=["actions","children","defaultValue","name","onChange","value"],cTe=$.forwardRef(function(t,n){const{actions:r,children:i,defaultValue:o,name:a,onChange:s,value:l}=t,c=We(t,lTe),u=$.useRef(null),[f,d]=Wo({controlled:l,default:o,name:"RadioGroup"});$.useImperativeHandle(r,()=>({focus:()=>{let v=u.current.querySelector("input:not(:disabled):checked");v||(v=u.current.querySelector("input:not(:disabled)")),v&&v.focus()}}),[]);const p=En(n,u),h=zs(a),g=$.useMemo(()=>({name:h,onChange(v){d(v.target.value),s&&s(v,v.target.value)},value:f}),[h,s,d,f]);return G.jsx(hee.Provider,{value:g,children:G.jsx(pQ,I({role:"radiogroup",ref:p},c,{children:i}))})}),uTe=cTe,fTe=fr(G.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),dTe=fr(G.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function vee(e){return it("MuiRating",e)}const pTe=at("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),Om=pTe,hTe=["value"],mTe=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function gTe(e,t,n){return e<t?t:e>n?n:e}function vTe(e){const t=e.toString().split(".")[1];return t?t.length:0}function bO(e,t){if(e==null)return e;const n=Math.round(e/t)*t;return Number(n.toFixed(vTe(t)))}const yTe=e=>{const{classes:t,size:n,readOnly:r,disabled:i,emptyValueFocused:o,focusVisible:a}=e,s={root:["root",`size${De(n)}`,i&&"disabled",a&&"focusVisible",r&&"readOnly"],label:["label","pristine"],labelEmptyValue:[o&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return ot(s,vee,t)},bTe=Ie("span",{name:"MuiRating",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Om.visuallyHidden}`]:t.visuallyHidden},t.root,t[`size${De(n.size)}`],n.readOnly&&t.readOnly]}})(({theme:e,ownerState:t})=>I({display:"inline-flex",position:"relative",fontSize:e.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent",[`&.${Om.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Om.focusVisible} .${Om.iconActive}`]:{outline:"1px solid #999"},[`& .${Om.visuallyHidden}`]:EK},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(30)},t.readOnly&&{pointerEvents:"none"})),yee=Ie("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:e},t)=>[t.label,e.emptyValueFocused&&t.labelEmptyValueActive]})(({ownerState:e})=>I({cursor:"inherit"},e.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})),_Te=Ie("span",{name:"MuiRating",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.iconEmpty&&t.iconEmpty,n.iconFilled&&t.iconFilled,n.iconHover&&t.iconHover,n.iconFocus&&t.iconFocus,n.iconActive&&t.iconActive]}})(({theme:e,ownerState:t})=>I({display:"flex",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),pointerEvents:"none"},t.iconActive&&{transform:"scale(1.2)"},t.iconEmpty&&{color:(e.vars||e).palette.action.disabled})),xTe=Ie("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:e=>I_(e)&&e!=="iconActive",overridesResolver:(e,t)=>{const{iconActive:n}=e;return[t.decimal,n&&t.iconActive]}})(({iconActive:e})=>I({position:"relative"},e&&{transform:"scale(1.2)"}));function wTe(e){const t=We(e,hTe);return G.jsx("span",I({},t))}function d8(e){const{classes:t,disabled:n,emptyIcon:r,focus:i,getLabelText:o,highlightSelectedOnly:a,hover:s,icon:l,IconContainerComponent:c,isActive:u,itemValue:f,labelProps:d,name:p,onBlur:h,onChange:g,onClick:v,onFocus:m,readOnly:y,ownerState:_,ratingValue:b,ratingValueRounded:x}=e,w=a?f===b:f<=b,S=f<=s,A=f<=i,C=f===x,k=zs(),O=G.jsx(_Te,{as:c,value:f,className:je(t.icon,w?t.iconFilled:t.iconEmpty,S&&t.iconHover,A&&t.iconFocus,u&&t.iconActive),ownerState:I({},_,{iconEmpty:!w,iconFilled:w,iconHover:S,iconFocus:A,iconActive:u}),children:r&&!w?r:l});return y?G.jsx("span",I({},d,{children:O})):G.jsxs($.Fragment,{children:[G.jsxs(yee,I({ownerState:I({},_,{emptyValueFocused:void 0}),htmlFor:k},d,{children:[O,G.jsx("span",{className:t.visuallyHidden,children:o(f)})]})),G.jsx("input",{className:t.visuallyHidden,onFocus:m,onBlur:h,onChange:g,onClick:v,disabled:n,value:f,id:k,type:"radio",name:p,checked:C})]})}const STe=G.jsx(fTe,{fontSize:"inherit"}),CTe=G.jsx(dTe,{fontSize:"inherit"});function ATe(e){return`${e} Star${e!==1?"s":""}`}const PTe=$.forwardRef(function(t,n){const r=st({name:"MuiRating",props:t}),{className:i,defaultValue:o=null,disabled:a=!1,emptyIcon:s=CTe,emptyLabelText:l="Empty",getLabelText:c=ATe,highlightSelectedOnly:u=!1,icon:f=STe,IconContainerComponent:d=wTe,max:p=5,name:h,onChange:g,onChangeActive:v,onMouseLeave:m,onMouseMove:y,precision:_=1,readOnly:b=!1,size:x="medium",value:w}=r,S=We(r,mTe),A=zs(h),[C,k]=Wo({controlled:w,default:o,name:"Rating"}),O=bO(C,_),T=ir(),[{hover:B,focus:R},P]=$.useState({hover:-1,focus:-1});let D=O;B!==-1&&(D=B),R!==-1&&(D=R);const{isFocusVisibleRef:z,onBlur:N,onFocus:H,ref:J}=Th(),[ne,oe]=$.useState(!1),Z=$.useRef(),ce=En(J,Z,n),se=be=>{y&&y(be);const ke=Z.current,{right:W,left:ee}=ke.getBoundingClientRect(),{width:Ee}=ke.firstChild.getBoundingClientRect();let ge;T.direction==="rtl"?ge=(W-be.clientX)/(Ee*p):ge=(be.clientX-ee)/(Ee*p);let pe=bO(p*ge+_/2,_);pe=gTe(pe,_,p),P(ve=>ve.hover===pe&&ve.focus===pe?ve:{hover:pe,focus:pe}),oe(!1),v&&B!==pe&&v(be,pe)},Y=be=>{m&&m(be);const ke=-1;P({hover:ke,focus:ke}),v&&B!==ke&&v(be,ke)},he=be=>{let ke=be.target.value===""?null:parseFloat(be.target.value);B!==-1&&(ke=B),k(ke),g&&g(be,ke)},ae=be=>{be.clientX===0&&be.clientY===0||(P({hover:-1,focus:-1}),k(null),g&&parseFloat(be.target.value)===O&&g(be,null))},ye=be=>{H(be),z.current===!0&&oe(!0);const ke=parseFloat(be.target.value);P(W=>({hover:W.hover,focus:ke}))},re=be=>{if(B!==-1)return;N(be),z.current===!1&&oe(!1);const ke=-1;P(W=>({hover:W.hover,focus:ke}))},[te,le]=$.useState(!1),de=I({},r,{defaultValue:o,disabled:a,emptyIcon:s,emptyLabelText:l,emptyValueFocused:te,focusVisible:ne,getLabelText:c,icon:f,IconContainerComponent:d,max:p,precision:_,readOnly:b,size:x}),_e=yTe(de);return G.jsxs(bTe,I({ref:ce,onMouseMove:se,onMouseLeave:Y,className:je(_e.root,i,b&&"MuiRating-readOnly"),ownerState:de,role:b?"img":null,"aria-label":b?c(D):null},S,{children:[Array.from(new Array(p)).map((be,ke)=>{const W=ke+1,ee={classes:_e,disabled:a,emptyIcon:s,focus:R,getLabelText:c,highlightSelectedOnly:u,hover:B,icon:f,IconContainerComponent:d,name:A,onBlur:re,onChange:he,onClick:ae,onFocus:ye,ratingValue:D,ratingValueRounded:O,readOnly:b,ownerState:de},Ee=W===Math.ceil(D)&&(B!==-1||R!==-1);if(_<1){const ge=Array.from(new Array(1/_));return G.jsx(xTe,{className:je(_e.decimal,Ee&&_e.iconActive),ownerState:de,iconActive:Ee,children:ge.map((pe,ve)=>{const $e=bO(W-1+(ve+1)*_,_);return G.jsx(d8,I({},ee,{isActive:!1,itemValue:$e,labelProps:{style:ge.length-1===ve?{}:{width:$e===D?`${(ve+1)*_*100}%`:"0%",overflow:"hidden",position:"absolute"}}}),$e)})},W)}return G.jsx(d8,I({},ee,{isActive:Ee,itemValue:W}),W)}),!b&&!a&&G.jsxs(yee,{className:je(_e.label,_e.labelEmptyValue),ownerState:de,children:[G.jsx("input",{className:_e.visuallyHidden,value:"",id:`${A}-empty`,type:"radio",name:A,checked:O==null,onFocus:()=>le(!0),onBlur:()=>le(!1),onChange:he}),G.jsx("span",{className:_e.visuallyHidden,children:l})]})]}))}),MTe=PTe;function bee(e){return it("MuiScopedCssBaseline",e)}const ETe=at("MuiScopedCssBaseline",["root"]),TTe=ETe,OTe=["className","component","enableColorScheme"],ITe=e=>{const{classes:t}=e;return ot({root:["root"]},bee,t)},RTe=Ie("div",{name:"MuiScopedCssBaseline",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{const n={};return t.enableColorScheme&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([r,i])=>{var o;n[`&${e.getColorSchemeSelector(r).replace(/\s*&/,"")}`]={colorScheme:(o=i.palette)==null?void 0:o.mode}}),I({},VJ(e,t.enableColorScheme),HJ(e),{"& *, & *::before, & *::after":{boxSizing:"inherit"},"& strong, & b":{fontWeight:e.typography.fontWeightBold}},n)}),kTe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiScopedCssBaseline"}),{className:i,component:o="div"}=r,a=We(r,OTe),s=I({},r,{component:o}),l=ITe(s);return G.jsx(RTe,I({as:o,className:je(l.root,i),ref:n,ownerState:s},a))}),LTe=kTe;function _ee(e){return it("MuiSelect",e)}const $Te=at("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Im=$Te;var p8;const DTe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],BTe=Ie("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Im.select}`]:t.select},{[`&.${Im.select}`]:t[n.variant]},{[`&.${Im.error}`]:t.error},{[`&.${Im.multiple}`]:t.multiple}]}})(ree,{[`&.${Im.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),NTe=Ie("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${De(n.variant)}`],n.open&&t.iconOpen]}})(iee),FTe=Ie("input",{shouldForwardProp:e=>I_(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function h8(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function jTe(e){return e==null||typeof e=="string"&&!e.trim()}const zTe=e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:a}=e,s={select:["select",n,r&&"disabled",i&&"multiple",a&&"error"],icon:["icon",`icon${De(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return ot(s,_ee,t)},UTe=$.forwardRef(function(t,n){var r;const{"aria-describedby":i,"aria-label":o,autoFocus:a,autoWidth:s,children:l,className:c,defaultOpen:u,defaultValue:f,disabled:d,displayEmpty:p,error:h=!1,IconComponent:g,inputRef:v,labelId:m,MenuProps:y={},multiple:_,name:b,onBlur:x,onChange:w,onClose:S,onFocus:A,onOpen:C,open:k,readOnly:O,renderValue:T,SelectDisplayProps:B={},tabIndex:R,value:P,variant:D="standard"}=t,z=We(t,DTe),[N,H]=Wo({controlled:P,default:f,name:"Select"}),[J,ne]=Wo({controlled:k,default:u,name:"Select"}),oe=$.useRef(null),Z=$.useRef(null),[ce,se]=$.useState(null),{current:Y}=$.useRef(k!=null),[he,ae]=$.useState(),ye=En(n,v),re=$.useCallback(Pe=>{Z.current=Pe,Pe&&se(Pe)},[]),te=ce==null?void 0:ce.parentNode;$.useImperativeHandle(ye,()=>({focus:()=>{Z.current.focus()},node:oe.current,value:N}),[N]),$.useEffect(()=>{u&&J&&ce&&!Y&&(ae(s?null:te.clientWidth),Z.current.focus())},[ce,s]),$.useEffect(()=>{a&&Z.current.focus()},[a]),$.useEffect(()=>{if(!m)return;const Pe=er(Z.current).getElementById(m);if(Pe){const Xe=()=>{getSelection().isCollapsed&&Z.current.focus()};return Pe.addEventListener("click",Xe),()=>{Pe.removeEventListener("click",Xe)}}},[m]);const le=(Pe,Xe)=>{Pe?C&&C(Xe):S&&S(Xe),Y||(ae(s?null:te.clientWidth),ne(Pe))},de=Pe=>{Pe.button===0&&(Pe.preventDefault(),Z.current.focus(),le(!0,Pe))},_e=Pe=>{le(!1,Pe)},be=$.Children.toArray(l),ke=Pe=>{const Xe=be.find(He=>He.props.value===Pe.target.value);Xe!==void 0&&(H(Xe.props.value),w&&w(Pe,Xe))},W=Pe=>Xe=>{let He;if(Xe.currentTarget.hasAttribute("tabindex")){if(_){He=Array.isArray(N)?N.slice():[];const Ve=N.indexOf(Pe.props.value);Ve===-1?He.push(Pe.props.value):He.splice(Ve,1)}else He=Pe.props.value;if(Pe.props.onClick&&Pe.props.onClick(Xe),N!==He&&(H(He),w)){const Ve=Xe.nativeEvent||Xe,Je=new Ve.constructor(Ve.type,Ve);Object.defineProperty(Je,"target",{writable:!0,value:{value:He,name:b}}),w(Je,Pe)}_||le(!1,Xe)}},ee=Pe=>{O||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Pe.key)!==-1&&(Pe.preventDefault(),le(!0,Pe))},Ee=ce!==null&&J,ge=Pe=>{!Ee&&x&&(Object.defineProperty(Pe,"target",{writable:!0,value:{value:N,name:b}}),x(Pe))};delete z["aria-invalid"];let pe,ve;const $e=[];let Ne=!1;(HC({value:N})||p)&&(T?pe=T(N):Ne=!0);const Ae=be.map(Pe=>{if(!$.isValidElement(Pe))return null;let Xe;if(_){if(!Array.isArray(N))throw new Error(Aa(2));Xe=N.some(He=>h8(He,Pe.props.value)),Xe&&Ne&&$e.push(Pe.props.children)}else Xe=h8(N,Pe.props.value),Xe&&Ne&&(ve=Pe.props.children);return $.cloneElement(Pe,{"aria-selected":Xe?"true":"false",onClick:W(Pe),onKeyUp:He=>{He.key===" "&&He.preventDefault(),Pe.props.onKeyUp&&Pe.props.onKeyUp(He)},role:"option",selected:Xe,value:void 0,"data-value":Pe.props.value})});Ne&&(_?$e.length===0?pe=null:pe=$e.reduce((Pe,Xe,He)=>(Pe.push(Xe),He<$e.length-1&&Pe.push(", "),Pe),[]):pe=ve);let Oe=he;!s&&Y&&ce&&(Oe=te.clientWidth);let j;typeof R<"u"?j=R:j=d?null:0;const M=B.id||(b?`mui-component-select-${b}`:void 0),L=I({},t,{variant:D,value:N,open:Ee,error:h}),q=zTe(L),me=I({},y.PaperProps,(r=y.slotProps)==null?void 0:r.paper),Te=zs();return G.jsxs($.Fragment,{children:[G.jsx(BTe,I({ref:re,tabIndex:j,role:"combobox","aria-controls":Te,"aria-disabled":d?"true":void 0,"aria-expanded":Ee?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[m,M].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:ee,onMouseDown:d||O?null:de,onBlur:ge,onFocus:A},B,{ownerState:L,className:je(B.className,q.select,c),id:M,children:jTe(pe)?p8||(p8=G.jsx("span",{className:"notranslate",children:""})):pe})),G.jsx(FTe,I({"aria-invalid":h,value:Array.isArray(N)?N.join(","):N,name:b,ref:oe,"aria-hidden":!0,onChange:ke,tabIndex:-1,disabled:d,className:q.nativeInput,autoFocus:a,ownerState:L},z)),G.jsx(NTe,{as:g,className:q.icon,ownerState:L}),G.jsx(B_,I({id:`menu-${b||""}`,anchorEl:te,open:Ee,onClose:_e,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:I({"aria-labelledby":m,role:"listbox","aria-multiselectable":_?"true":void 0,disableListWrap:!0,id:Te},y.MenuListProps),slotProps:I({},y.slotProps,{paper:I({},me,{style:I({minWidth:Oe},me!=null?me.style:null)})}),children:Ae}))]})}),VTe=UTe,HTe=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],GTe=["root"],WTe=e=>{const{classes:t}=e;return t},fB={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>$o(e)&&e!=="variant",slot:"Root"},qTe=Ie(OM,fB)(""),XTe=Ie(uB,fB)(""),YTe=Ie(aB,fB)(""),xee=$.forwardRef(function(t,n){const r=st({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:o,classes:a={},className:s,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=QD,id:f,input:d,inputProps:p,label:h,labelId:g,MenuProps:v,multiple:m=!1,native:y=!1,onClose:_,onOpen:b,open:x,renderValue:w,SelectDisplayProps:S,variant:A="outlined"}=r,C=We(r,HTe),k=y?oee:VTe,O=Xs(),T=qu({props:r,muiFormControl:O,states:["variant","error"]}),B=T.variant||A,R=I({},r,{variant:B,classes:a}),P=WTe(R),D=We(P,GTe),z=d||{standard:G.jsx(qTe,{ownerState:R}),outlined:G.jsx(XTe,{label:h,ownerState:R}),filled:G.jsx(YTe,{ownerState:R})}[B],N=En(n,z.ref);return G.jsx($.Fragment,{children:$.cloneElement(z,I({inputComponent:k,inputProps:I({children:o,error:T.error,IconComponent:u,variant:B,type:void 0,multiple:m},y?{id:f}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:v,onClose:_,onOpen:b,open:x,renderValue:w,SelectDisplayProps:I({id:f},S)},p,{classes:p?Jr(D,p.classes):D},d?d.props.inputProps:{})},m&&y&&B==="outlined"?{notched:!0}:{},{ref:N,className:je(z.props.className,s,P.root)},!d&&{variant:B},C))})});xee.muiName="Select";const N_=xee;function wee(e){return it("MuiSkeleton",e)}const KTe=at("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]),ZTe=KTe,JTe=["animation","className","component","height","style","variant","width"];let XC=e=>e,m8,g8,v8,y8;const QTe=e=>{const{classes:t,variant:n,animation:r,hasChildren:i,width:o,height:a}=e;return ot({root:["root",n,r,i&&"withChildren",i&&!o&&"fitContent",i&&!a&&"heightAuto"]},wee,t)},eOe=cs(m8||(m8=XC`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),tOe=cs(g8||(g8=XC`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),nOe=Ie("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.animation!==!1&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})(({theme:e,ownerState:t})=>{const n=vM(e.shape.borderRadius)||"px",r=ic(e.shape.borderRadius);return I({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:Ot(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em"},t.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${n}/${Math.round(r/.6*10)/10}${n}`,"&:empty:before":{content:'"\\00a0"'}},t.variant==="circular"&&{borderRadius:"50%"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})},({ownerState:e})=>e.animation==="pulse"&&Ml(v8||(v8=XC`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),eOe),({ownerState:e,theme:t})=>e.animation==="wave"&&Ml(y8||(y8=XC`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),tOe,(t.vars||t).palette.action.hover)),rOe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiSkeleton"}),{animation:i="pulse",className:o,component:a="span",height:s,style:l,variant:c="text",width:u}=r,f=We(r,JTe),d=I({},r,{animation:i,component:a,variant:c,hasChildren:!!f.children}),p=QTe(d);return G.jsx(nOe,I({as:a,ref:n,className:je(p.root,o),ownerState:d},f,{style:I({width:u,height:s},l)}))}),iOe=rOe,oOe=e=>!e||!wl(e),aOe=oOe;function See(e){return it("MuiSlider",e)}const sOe=at("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),Rs=sOe,lOe=e=>{const{open:t}=e;return{offset:je(t&&Rs.valueLabelOpen),circle:Rs.valueLabelCircle,label:Rs.valueLabelLabel}};function cOe(e){const{children:t,className:n,value:r}=e,i=lOe(e);return t?$.cloneElement(t,{className:je(t.props.className)},G.jsxs($.Fragment,{children:[t.props.children,G.jsx("span",{className:je(i.offset,n),"aria-hidden":!0,children:G.jsx("span",{className:i.circle,children:G.jsx("span",{className:i.label,children:r})})})]})):null}const uOe=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function b8(e){return e}const Cee=Ie("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${De(n.color)}`],n.size!=="medium"&&t[`size${De(n.size)}`],n.marked&&t.marked,n.orientation==="vertical"&&t.vertical,n.track==="inverted"&&t.trackInverted,n.track===!1&&t.trackFalse]}})(({theme:e,ownerState:t})=>I({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(e.vars||e).palette[t.color].main,WebkitTapHighlightColor:"transparent"},t.orientation==="horizontal"&&I({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},t.size==="small"&&{height:2},t.marked&&{marginBottom:20}),t.orientation==="vertical"&&I({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},t.size==="small"&&{width:2},t.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${Rs.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${Rs.dragging}`]:{[`& .${Rs.thumb}, & .${Rs.track}`]:{transition:"none"}}})),Aee=Ie("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})(({ownerState:e})=>I({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},e.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track==="inverted"&&{opacity:1})),Pee=Ie("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?Ol(e.palette[t.color].main,.62):Tl(e.palette[t.color].main,.5);return I({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{border:"none"},t.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track===!1&&{display:"none"},t.track==="inverted"&&{backgroundColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n,borderColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n})}),Mee=Ie("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${De(n.color)}`],n.size!=="medium"&&t[`thumbSize${De(n.size)}`]]}})(({theme:e,ownerState:t})=>I({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{width:12,height:12},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&:before":I({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},t.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${Rs.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:Ot(e.palette[t.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Rs.active}`]:{boxShadow:`0px 0px 0px 14px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:Ot(e.palette[t.color].main,.16)}`},[`&.${Rs.disabled}`]:{"&:hover":{boxShadow:"none"}}})),Eee=Ie(cOe,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e,ownerState:t})=>I({[`&.${Rs.valueLabelOpen}`]:{transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(1)`},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(0)`,position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},t.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},t.orientation==="vertical"&&{right:t.size==="small"?"20px":"30px",top:"50%",transformOrigin:"right center","&:before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"}},t.size==="small"&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),Tee=Ie("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>I_(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})(({theme:e,ownerState:t,markActive:n})=>I({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8})),Oee=Ie("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>I_(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e,ownerState:t,markLabelActive:n})=>I({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},t.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},t.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(e.vars||e).palette.text.primary})),fOe=e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:o,classes:a,color:s,size:l}=e,c={root:["root",t&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",s&&`color${De(s)}`,l&&`size${De(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",l&&`thumbSize${De(l)}`,s&&`thumbColor${De(s)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return ot(c,See,a)},dOe=({children:e})=>e,pOe=$.forwardRef(function(t,n){var r,i,o,a,s,l,c,u,f,d,p,h,g,v,m,y,_,b,x,w,S,A,C,k;const O=st({props:t,name:"MuiSlider"}),B=ir().direction==="rtl",{"aria-label":R,"aria-valuetext":P,"aria-labelledby":D,component:z="span",components:N={},componentsProps:H={},color:J="primary",classes:ne,className:oe,disableSwap:Z=!1,disabled:ce=!1,getAriaLabel:se,getAriaValueText:Y,marks:he=!1,max:ae=100,min:ye=0,orientation:re="horizontal",size:te="medium",step:le=1,scale:de=b8,slotProps:_e,slots:be,track:ke="normal",valueLabelDisplay:W="off",valueLabelFormat:ee=b8}=O,Ee=We(O,uOe),ge=I({},O,{isRtl:B,max:ae,min:ye,classes:ne,disabled:ce,disableSwap:Z,orientation:re,marks:he,color:J,size:te,step:le,scale:de,track:ke,valueLabelDisplay:W,valueLabelFormat:ee}),{axisProps:pe,getRootProps:ve,getHiddenInputProps:$e,getThumbProps:Ne,open:Ae,active:Oe,axis:j,focusedThumbIndex:M,range:L,dragging:q,marks:me,values:Te,trackOffset:Pe,trackLeap:Xe,getThumbStyle:He}=X_e(I({},ge,{rootRef:n}));ge.marked=me.length>0&&me.some(Me=>Me.label),ge.dragging=q,ge.focusedThumbIndex=M;const Ve=fOe(ge),Je=(r=(i=be==null?void 0:be.root)!=null?i:N.Root)!=null?r:Cee,Ye=(o=(a=be==null?void 0:be.rail)!=null?a:N.Rail)!=null?o:Aee,yt=(s=(l=be==null?void 0:be.track)!=null?l:N.Track)!=null?s:Pee,mt=(c=(u=be==null?void 0:be.thumb)!=null?u:N.Thumb)!=null?c:Mee,ut=(f=(d=be==null?void 0:be.valueLabel)!=null?d:N.ValueLabel)!=null?f:Eee,Et=(p=(h=be==null?void 0:be.mark)!=null?h:N.Mark)!=null?p:Tee,et=(g=(v=be==null?void 0:be.markLabel)!=null?v:N.MarkLabel)!=null?g:Oee,ct=(m=(y=be==null?void 0:be.input)!=null?y:N.Input)!=null?m:"input",_t=(_=_e==null?void 0:_e.root)!=null?_:H.root,xe=(b=_e==null?void 0:_e.rail)!=null?b:H.rail,ie=(x=_e==null?void 0:_e.track)!=null?x:H.track,ue=(w=_e==null?void 0:_e.thumb)!=null?w:H.thumb,E=(S=_e==null?void 0:_e.valueLabel)!=null?S:H.valueLabel,F=(A=_e==null?void 0:_e.mark)!=null?A:H.mark,U=(C=_e==null?void 0:_e.markLabel)!=null?C:H.markLabel,X=(k=_e==null?void 0:_e.input)!=null?k:H.input,Q=Nr({elementType:Je,getSlotProps:ve,externalSlotProps:_t,externalForwardedProps:Ee,additionalProps:I({},aOe(Je)&&{as:z}),ownerState:I({},ge,_t==null?void 0:_t.ownerState),className:[Ve.root,oe]}),fe=Nr({elementType:Ye,externalSlotProps:xe,ownerState:ge,className:Ve.rail}),we=Nr({elementType:yt,externalSlotProps:ie,additionalProps:{style:I({},pe[j].offset(Pe),pe[j].leap(Xe))},ownerState:I({},ge,ie==null?void 0:ie.ownerState),className:Ve.track}),Se=Nr({elementType:mt,getSlotProps:Ne,externalSlotProps:ue,ownerState:I({},ge,ue==null?void 0:ue.ownerState),className:Ve.thumb}),ze=Nr({elementType:ut,externalSlotProps:E,ownerState:I({},ge,E==null?void 0:E.ownerState),className:Ve.valueLabel}),Fe=Nr({elementType:Et,externalSlotProps:F,ownerState:ge,className:Ve.mark}),Ke=Nr({elementType:et,externalSlotProps:U,ownerState:ge,className:Ve.markLabel}),Le=Nr({elementType:ct,getSlotProps:$e,externalSlotProps:X,ownerState:ge});return G.jsxs(Je,I({},Q,{children:[G.jsx(Ye,I({},fe)),G.jsx(yt,I({},we)),me.filter(Me=>Me.value>=ye&&Me.value<=ae).map((Me,Re)=>{const qe=VC(Me.value,ye,ae),nt=pe[j].offset(qe);let ft;return ke===!1?ft=Te.indexOf(Me.value)!==-1:ft=ke==="normal"&&(L?Me.value>=Te[0]&&Me.value<=Te[Te.length-1]:Me.value<=Te[0])||ke==="inverted"&&(L?Me.value<=Te[0]||Me.value>=Te[Te.length-1]:Me.value>=Te[0]),G.jsxs($.Fragment,{children:[G.jsx(Et,I({"data-index":Re},Fe,!wl(Et)&&{markActive:ft},{style:I({},nt,Fe.style),className:je(Fe.className,ft&&Ve.markActive)})),Me.label!=null?G.jsx(et,I({"aria-hidden":!0,"data-index":Re},Ke,!wl(et)&&{markLabelActive:ft},{style:I({},nt,Ke.style),className:je(Ve.markLabel,Ke.className,ft&&Ve.markLabelActive),children:Me.label})):null]},Re)}),Te.map((Me,Re)=>{const qe=VC(Me,ye,ae),nt=pe[j].offset(qe),ft=W==="off"?dOe:ut;return G.jsx(ft,I({},!wl(ft)&&{valueLabelFormat:ee,valueLabelDisplay:W,value:typeof ee=="function"?ee(de(Me),Re):ee,index:Re,open:Ae===Re||Oe===Re||W==="on",disabled:ce},ze,{children:G.jsx(mt,I({"data-index":Re},Se,{className:je(Ve.thumb,Se.className,Oe===Re&&Ve.active,M===Re&&Ve.focusVisible),style:I({},nt,He(Re),Se.style),children:G.jsx(ct,I({"data-index":Re,"aria-label":se?se(Re):R,"aria-valuenow":de(Me),"aria-labelledby":D,"aria-valuetext":Y?Y(de(Me),Re):P,value:Te[Re]},Le))}))}),Re)})]}))}),hOe=pOe;function Iee(e){return it("MuiSnackbarContent",e)}const mOe=at("MuiSnackbarContent",["root","message","action"]),gOe=mOe,vOe=["action","className","message","role"],yOe=e=>{const{classes:t}=e;return ot({root:["root"],action:["action"],message:["message"]},Iee,t)},bOe=Ie(us,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,n=sv(e.palette.background.default,t);return I({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(n),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),_Oe=Ie("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),xOe=Ie("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),wOe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiSnackbarContent"}),{action:i,className:o,message:a,role:s="alert"}=r,l=We(r,vOe),c=r,u=yOe(c);return G.jsxs(bOe,I({role:s,square:!0,elevation:6,className:je(u.root,o),ownerState:c,ref:n},l,{children:[G.jsx(_Oe,{className:u.message,ownerState:c,children:a}),i?G.jsx(xOe,{className:u.action,ownerState:c,children:i}):null]}))}),Ree=wOe;function kee(e){return it("MuiSnackbar",e)}const SOe=at("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]),COe=SOe,AOe=["onEnter","onExited"],POe=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],MOe=e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${De(n.vertical)}${De(n.horizontal)}`]};return ot(r,kee,t)},_8=Ie("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${De(n.anchorOrigin.vertical)}${De(n.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return I({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:I({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&n,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),EOe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiSnackbar"}),i=ir(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:a,anchorOrigin:{vertical:s,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:f,ClickAwayListenerProps:d,ContentProps:p,disableWindowBlurListener:h=!1,message:g,open:v,TransitionComponent:m=p1,transitionDuration:y=o,TransitionProps:{onEnter:_,onExited:b}={}}=r,x=We(r.TransitionProps,AOe),w=We(r,POe),S=I({},r,{anchorOrigin:{vertical:s,horizontal:l},autoHideDuration:c,disableWindowBlurListener:h,TransitionComponent:m,transitionDuration:y}),A=MOe(S),{getRootProps:C,onClickAway:k}=Y_e(I({},S)),[O,T]=$.useState(!0),B=Nr({elementType:_8,getSlotProps:C,externalForwardedProps:w,ownerState:S,additionalProps:{ref:n},className:[A.root,f]}),R=D=>{T(!0),b&&b(D)},P=(D,z)=>{T(!1),_&&_(D,z)};return!v&&O?null:G.jsx(HZ,I({onClickAway:k},d,{children:G.jsx(_8,I({},B,{children:G.jsx(m,I({appear:!0,in:v,timeout:y,direction:s==="top"?"down":"up",onEnter:P,onExited:R},x,{children:u||G.jsx(Ree,I({message:g,action:a},p))}))}))}))}),TOe=EOe,OOe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],IOe={entering:{transform:"none"},entered:{transform:"none"}},ROe=$.forwardRef(function(t,n){const r=ir(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:a=!0,children:s,easing:l,in:c,onEnter:u,onEntered:f,onEntering:d,onExit:p,onExited:h,onExiting:g,style:v,timeout:m=i,TransitionComponent:y=R_}=t,_=We(t,OOe),b=$.useRef(null),x=En(b,s.ref,n),w=R=>P=>{if(R){const D=b.current;P===void 0?R(D):R(D,P)}},S=w(d),A=w((R,P)=>{bM(R);const D=Il({style:v,timeout:m,easing:l},{mode:"enter"});R.style.webkitTransition=r.transitions.create("transform",D),R.style.transition=r.transitions.create("transform",D),u&&u(R,P)}),C=w(f),k=w(g),O=w(R=>{const P=Il({style:v,timeout:m,easing:l},{mode:"exit"});R.style.webkitTransition=r.transitions.create("transform",P),R.style.transition=r.transitions.create("transform",P),p&&p(R)}),T=w(h),B=R=>{o&&o(b.current,R)};return G.jsx(y,I({appear:a,in:c,nodeRef:b,onEnter:A,onEntered:C,onEntering:S,onExit:O,onExited:T,onExiting:k,addEndListener:B,timeout:m},_,{children:(R,P)=>$.cloneElement(s,I({style:I({transform:"scale(0)",visibility:R==="exited"&&!c?"hidden":void 0},IOe[R],v,s.props.style),ref:x},P))}))}),Lee=ROe;function $ee(e){return it("MuiSpeedDial",e)}const kOe=at("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),Fy=kOe,LOe=["ref"],$Oe=["ariaLabel","FabProps","children","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"],DOe=["ref"],BOe=e=>{const{classes:t,open:n,direction:r}=e,i={root:["root",`direction${De(r)}`],fab:["fab"],actions:["actions",!n&&"actionsClosed"]};return ot(i,$ee,t)};function X0(e){if(e==="up"||e==="down")return"vertical";if(e==="right"||e==="left")return"horizontal"}function NOe(e,t,n){return e<t?t:e>n?n:e}const lf=32,Ew=16,FOe=Ie("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`direction${De(n.direction)}`]]}})(({theme:e,ownerState:t})=>I({zIndex:(e.vars||e).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},t.direction==="up"&&{flexDirection:"column-reverse",[`& .${Fy.actions}`]:{flexDirection:"column-reverse",marginBottom:-lf,paddingBottom:Ew+lf}},t.direction==="down"&&{flexDirection:"column",[`& .${Fy.actions}`]:{flexDirection:"column",marginTop:-lf,paddingTop:Ew+lf}},t.direction==="left"&&{flexDirection:"row-reverse",[`& .${Fy.actions}`]:{flexDirection:"row-reverse",marginRight:-lf,paddingRight:Ew+lf}},t.direction==="right"&&{flexDirection:"row",[`& .${Fy.actions}`]:{flexDirection:"row",marginLeft:-lf,paddingLeft:Ew+lf}})),jOe=Ie(oB,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(e,t)=>t.fab})(()=>({pointerEvents:"auto"})),zOe=Ie("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.actions,!n.open&&t.actionsClosed]}})(({ownerState:e})=>I({display:"flex",pointerEvents:"auto"},!e.open&&{transition:"top 0s linear 0.2s",pointerEvents:"none"})),UOe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiSpeedDial"}),i=ir(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{ariaLabel:a,FabProps:{ref:s}={},children:l,className:c,direction:u="up",hidden:f=!1,icon:d,onBlur:p,onClose:h,onFocus:g,onKeyDown:v,onMouseEnter:m,onMouseLeave:y,onOpen:_,open:b,TransitionComponent:x=Lee,transitionDuration:w=o,TransitionProps:S}=r,A=We(r.FabProps,LOe),C=We(r,$Oe),[k,O]=Wo({controlled:b,default:!1,name:"SpeedDial",state:"open"}),T=I({},r,{open:k,direction:u}),B=BOe(T),R=$.useRef();$.useEffect(()=>()=>{clearTimeout(R.current)},[]);const P=$.useRef(0),D=$.useRef(),z=$.useRef([]);z.current=[z.current[0]];const N=$.useCallback(ae=>{z.current[0]=ae},[]),H=En(s,N),J=(ae,ye)=>re=>{z.current[ae+1]=re,ye&&ye(re)},ne=ae=>{v&&v(ae);const ye=ae.key.replace("Arrow","").toLowerCase(),{current:re=ye}=D;if(ae.key==="Escape"){O(!1),z.current[0].focus(),h&&h(ae,"escapeKeyDown");return}if(X0(ye)===X0(re)&&X0(ye)!==void 0){ae.preventDefault();const te=ye===re?1:-1,le=NOe(P.current+te,0,z.current.length-1);z.current[le].focus(),P.current=le,D.current=re}};$.useEffect(()=>{k||(P.current=0,D.current=void 0)},[k]);const oe=ae=>{ae.type==="mouseleave"&&y&&y(ae),ae.type==="blur"&&p&&p(ae),clearTimeout(R.current),ae.type==="blur"?R.current=setTimeout(()=>{O(!1),h&&h(ae,"blur")}):(O(!1),h&&h(ae,"mouseLeave"))},Z=ae=>{A.onClick&&A.onClick(ae),clearTimeout(R.current),k?(O(!1),h&&h(ae,"toggle")):(O(!0),_&&_(ae,"toggle"))},ce=ae=>{ae.type==="mouseenter"&&m&&m(ae),ae.type==="focus"&&g&&g(ae),clearTimeout(R.current),k||(R.current=setTimeout(()=>{O(!0),_&&_(ae,{focus:"focus",mouseenter:"mouseEnter"}[ae.type])}))},se=a.replace(/^[^a-z]+|[^\w:.-]+/gi,""),Y=$.Children.toArray(l).filter(ae=>$.isValidElement(ae)),he=Y.map((ae,ye)=>{const re=ae.props,{FabProps:{ref:te}={},tooltipPlacement:le}=re,de=We(re.FabProps,DOe),_e=le||(X0(u)==="vertical"?"left":"top");return $.cloneElement(ae,{FabProps:I({},de,{ref:J(ye,te)}),delay:30*(k?ye:Y.length-ye),open:k,tooltipPlacement:_e,id:`${se}-action-${ye}`})});return G.jsxs(FOe,I({className:je(B.root,c),ref:n,role:"presentation",onKeyDown:ne,onBlur:oe,onFocus:ce,onMouseEnter:ce,onMouseLeave:oe,ownerState:T},C,{children:[G.jsx(x,I({in:!f,timeout:w,unmountOnExit:!0},S,{children:G.jsx(jOe,I({color:"primary","aria-label":a,"aria-haspopup":"true","aria-expanded":k,"aria-controls":`${se}-actions`},A,{onClick:Z,className:je(B.fab,A.className),ref:H,ownerState:T,children:$.isValidElement(d)&&xc(d,["SpeedDialIcon"])?$.cloneElement(d,{open:k}):d}))})),G.jsx(zOe,{id:`${se}-actions`,role:"menu","aria-orientation":X0(u),className:je(B.actions,!k&&B.actionsClosed),ownerState:T,children:he})]}))}),VOe=UOe;function Dee(e){return it("MuiTooltip",e)}const HOe=at("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),vu=HOe,GOe=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function WOe(e){return Math.round(e*1e5)/1e5}const qOe=e=>{const{classes:t,disableInteractive:n,arrow:r,touch:i,placement:o}=e,a={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${De(o.split("-")[0])}`],arrow:["arrow"]};return ot(a,Dee,t)},XOe=Ie($_,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(({theme:e,ownerState:t,open:n})=>I({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${vu.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${vu.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${vu.arrow}`]:I({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${vu.arrow}`]:I({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),YOe=Ie("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${De(n.placement.split("-")[0])}`]]}})(({theme:e,ownerState:t})=>I({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:Ot(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${WOe(16/14)}em`,fontWeight:e.typography.fontWeightRegular},{[`.${vu.popper}[data-popper-placement*="left"] &`]:I({transformOrigin:"right center"},t.isRtl?I({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):I({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${vu.popper}[data-popper-placement*="right"] &`]:I({transformOrigin:"left center"},t.isRtl?I({marginRight:"14px"},t.touch&&{marginRight:"24px"}):I({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${vu.popper}[data-popper-placement*="top"] &`]:I({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${vu.popper}[data-popper-placement*="bottom"] &`]:I({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})})),KOe=Ie("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:Ot(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let Tw=!1,_O=null,Y0={x:0,y:0};function Ow(e,t){return n=>{t&&t(n),e(n)}}const ZOe=$.forwardRef(function(t,n){var r,i,o,a,s,l,c,u,f,d,p,h,g,v,m,y,_,b,x;const w=st({props:t,name:"MuiTooltip"}),{arrow:S=!1,children:A,components:C={},componentsProps:k={},describeChild:O=!1,disableFocusListener:T=!1,disableHoverListener:B=!1,disableInteractive:R=!1,disableTouchListener:P=!1,enterDelay:D=100,enterNextDelay:z=0,enterTouchDelay:N=700,followCursor:H=!1,id:J,leaveDelay:ne=0,leaveTouchDelay:oe=1500,onClose:Z,onOpen:ce,open:se,placement:Y="bottom",PopperComponent:he,PopperProps:ae={},slotProps:ye={},slots:re={},title:te,TransitionComponent:le=p1,TransitionProps:de}=w,_e=We(w,GOe),be=$.isValidElement(A)?A:G.jsx("span",{children:A}),ke=ir(),W=ke.direction==="rtl",[ee,Ee]=$.useState(),[ge,pe]=$.useState(null),ve=$.useRef(!1),$e=R||H,Ne=$.useRef(),Ae=$.useRef(),Oe=$.useRef(),j=$.useRef(),[M,L]=Wo({controlled:se,default:!1,name:"Tooltip",state:"open"});let q=M;const me=zs(J),Te=$.useRef(),Pe=$.useCallback(()=>{Te.current!==void 0&&(document.body.style.WebkitUserSelect=Te.current,Te.current=void 0),clearTimeout(j.current)},[]);$.useEffect(()=>()=>{clearTimeout(Ne.current),clearTimeout(Ae.current),clearTimeout(Oe.current),Pe()},[Pe]);const Xe=bt=>{clearTimeout(_O),Tw=!0,L(!0),ce&&!q&&ce(bt)},He=Ar(bt=>{clearTimeout(_O),_O=setTimeout(()=>{Tw=!1},800+ne),L(!1),Z&&q&&Z(bt),clearTimeout(Ne.current),Ne.current=setTimeout(()=>{ve.current=!1},ke.transitions.duration.shortest)}),Ve=bt=>{ve.current&&bt.type!=="touchstart"||(ee&&ee.removeAttribute("title"),clearTimeout(Ae.current),clearTimeout(Oe.current),D||Tw&&z?Ae.current=setTimeout(()=>{Xe(bt)},Tw?z:D):Xe(bt))},Je=bt=>{clearTimeout(Ae.current),clearTimeout(Oe.current),Oe.current=setTimeout(()=>{He(bt)},ne)},{isFocusVisibleRef:Ye,onBlur:yt,onFocus:mt,ref:ut}=Th(),[,Et]=$.useState(!1),et=bt=>{yt(bt),Ye.current===!1&&(Et(!1),Je(bt))},ct=bt=>{ee||Ee(bt.currentTarget),mt(bt),Ye.current===!0&&(Et(!0),Ve(bt))},_t=bt=>{ve.current=!0;const hn=be.props;hn.onTouchStart&&hn.onTouchStart(bt)},xe=Ve,ie=Je,ue=bt=>{_t(bt),clearTimeout(Oe.current),clearTimeout(Ne.current),Pe(),Te.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",j.current=setTimeout(()=>{document.body.style.WebkitUserSelect=Te.current,Ve(bt)},N)},E=bt=>{be.props.onTouchEnd&&be.props.onTouchEnd(bt),Pe(),clearTimeout(Oe.current),Oe.current=setTimeout(()=>{He(bt)},oe)};$.useEffect(()=>{if(!q)return;function bt(hn){(hn.key==="Escape"||hn.key==="Esc")&&He(hn)}return document.addEventListener("keydown",bt),()=>{document.removeEventListener("keydown",bt)}},[He,q]);const F=En(be.ref,ut,Ee,n);!te&&te!==0&&(q=!1);const U=$.useRef(),X=bt=>{const hn=be.props;hn.onMouseMove&&hn.onMouseMove(bt),Y0={x:bt.clientX,y:bt.clientY},U.current&&U.current.update()},Q={},fe=typeof te=="string";O?(Q.title=!q&&fe&&!B?te:null,Q["aria-describedby"]=q?me:null):(Q["aria-label"]=fe?te:null,Q["aria-labelledby"]=q&&!fe?me:null);const we=I({},Q,_e,be.props,{className:je(_e.className,be.props.className),onTouchStart:_t,ref:F},H?{onMouseMove:X}:{}),Se={};P||(we.onTouchStart=ue,we.onTouchEnd=E),B||(we.onMouseOver=Ow(xe,we.onMouseOver),we.onMouseLeave=Ow(ie,we.onMouseLeave),$e||(Se.onMouseOver=xe,Se.onMouseLeave=ie)),T||(we.onFocus=Ow(ct,we.onFocus),we.onBlur=Ow(et,we.onBlur),$e||(Se.onFocus=ct,Se.onBlur=et));const ze=$.useMemo(()=>{var bt;let hn=[{name:"arrow",enabled:!!ge,options:{element:ge,padding:4}}];return(bt=ae.popperOptions)!=null&&bt.modifiers&&(hn=hn.concat(ae.popperOptions.modifiers)),I({},ae.popperOptions,{modifiers:hn})},[ge,ae]),Fe=I({},w,{isRtl:W,arrow:S,disableInteractive:$e,placement:Y,PopperComponentProp:he,touch:ve.current}),Ke=qOe(Fe),Le=(r=(i=re.popper)!=null?i:C.Popper)!=null?r:XOe,Me=(o=(a=(s=re.transition)!=null?s:C.Transition)!=null?a:le)!=null?o:p1,Re=(l=(c=re.tooltip)!=null?c:C.Tooltip)!=null?l:YOe,qe=(u=(f=re.arrow)!=null?f:C.Arrow)!=null?u:KOe,nt=$y(Le,I({},ae,(d=ye.popper)!=null?d:k.popper,{className:je(Ke.popper,ae==null?void 0:ae.className,(p=(h=ye.popper)!=null?h:k.popper)==null?void 0:p.className)}),Fe),ft=$y(Me,I({},de,(g=ye.transition)!=null?g:k.transition),Fe),pt=$y(Re,I({},(v=ye.tooltip)!=null?v:k.tooltip,{className:je(Ke.tooltip,(m=(y=ye.tooltip)!=null?y:k.tooltip)==null?void 0:m.className)}),Fe),Gt=$y(qe,I({},(_=ye.arrow)!=null?_:k.arrow,{className:je(Ke.arrow,(b=(x=ye.arrow)!=null?x:k.arrow)==null?void 0:b.className)}),Fe);return G.jsxs($.Fragment,{children:[$.cloneElement(be,we),G.jsx(Le,I({as:he??$_,placement:Y,anchorEl:H?{getBoundingClientRect:()=>({top:Y0.y,left:Y0.x,right:Y0.x,bottom:Y0.y,width:0,height:0})}:ee,popperRef:U,open:ee?q:!1,id:me,transition:!0},Se,nt,{popperOptions:ze,children:({TransitionProps:bt})=>G.jsx(Me,I({timeout:ke.transitions.duration.shorter},bt,ft,{children:G.jsxs(Re,I({},pt,{children:[te,S?G.jsx(qe,I({},Gt,{ref:pe})):null]}))}))}))]})}),dB=ZOe;function Bee(e){return it("MuiSpeedDialAction",e)}const JOe=at("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),Nee=JOe,QOe=["className","delay","FabProps","icon","id","open","TooltipClasses","tooltipOpen","tooltipPlacement","tooltipTitle"],eIe=e=>{const{open:t,tooltipPlacement:n,classes:r}=e,i={fab:["fab",!t&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${De(n)}`,!t&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return ot(i,Bee,r)},tIe=Ie(oB,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.fab,!n.open&&t.fabClosed]}})(({theme:e,ownerState:t})=>I({margin:8,color:(e.vars||e).palette.text.secondary,backgroundColor:(e.vars||e).palette.background.paper,"&:hover":{backgroundColor:e.vars?e.vars.palette.SpeedDialAction.fabHoverBg:sv(e.palette.background.paper,.15)},transition:`${e.transitions.create("transform",{duration:e.transitions.duration.shorter})}, opacity 0.8s`,opacity:1},!t.open&&{opacity:0,transform:"scale(0)"})),nIe=Ie("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.staticTooltip,!n.open&&t.staticTooltipClosed,t[`tooltipPlacement${De(n.tooltipPlacement)}`]]}})(({theme:e,ownerState:t})=>({position:"relative",display:"flex",alignItems:"center",[`& .${Nee.staticTooltipLabel}`]:I({transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.shorter}),opacity:1},!t.open&&{opacity:0,transform:"scale(0.5)"},t.tooltipPlacement==="left"&&{transformOrigin:"100% 50%",right:"100%",marginRight:8},t.tooltipPlacement==="right"&&{transformOrigin:"0% 50%",left:"100%",marginLeft:8})})),rIe=Ie("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(e,t)=>t.staticTooltipLabel})(({theme:e})=>I({position:"absolute"},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.paper,borderRadius:(e.vars||e).shape.borderRadius,boxShadow:(e.vars||e).shadows[1],color:(e.vars||e).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"})),iIe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiSpeedDialAction"}),{className:i,delay:o=0,FabProps:a={},icon:s,id:l,open:c,TooltipClasses:u,tooltipOpen:f=!1,tooltipPlacement:d="left",tooltipTitle:p}=r,h=We(r,QOe),g=I({},r,{tooltipPlacement:d}),v=eIe(g),[m,y]=$.useState(f),_=()=>{y(!1)},b=()=>{y(!0)},x={transitionDelay:`${o}ms`},w=G.jsx(tIe,I({size:"small",className:je(v.fab,i),tabIndex:-1,role:"menuitem",ownerState:g},a,{style:I({},x,a.style),children:s}));return f?G.jsxs(nIe,I({id:l,ref:n,className:v.staticTooltip,ownerState:g},h,{children:[G.jsx(rIe,{style:x,id:`${l}-label`,className:v.staticTooltipLabel,ownerState:g,children:p}),$.cloneElement(w,{"aria-labelledby":`${l}-label`})]})):(!c&&m&&y(!1),G.jsx(dB,I({id:l,ref:n,title:p,placement:d,onClose:_,onOpen:b,open:c&&m,classes:u},h,{children:w})))}),oIe=iIe,aIe=fr(G.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");function Fee(e){return it("MuiSpeedDialIcon",e)}const sIe=at("MuiSpeedDialIcon",["root","icon","iconOpen","iconWithOpenIconOpen","openIcon","openIconOpen"]),Sf=sIe,lIe=["className","icon","open","openIcon"],cIe=e=>{const{classes:t,open:n,openIcon:r}=e;return ot({root:["root"],icon:["icon",n&&"iconOpen",r&&n&&"iconWithOpenIconOpen"],openIcon:["openIcon",n&&"openIconOpen"]},Fee,t)},uIe=Ie("span",{name:"MuiSpeedDialIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Sf.icon}`]:t.icon},{[`& .${Sf.icon}`]:n.open&&t.iconOpen},{[`& .${Sf.icon}`]:n.open&&n.openIcon&&t.iconWithOpenIconOpen},{[`& .${Sf.openIcon}`]:t.openIcon},{[`& .${Sf.openIcon}`]:n.open&&t.openIconOpen},t.root]}})(({theme:e,ownerState:t})=>({height:24,[`& .${Sf.icon}`]:I({transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.short})},t.open&&I({transform:"rotate(45deg)"},t.openIcon&&{opacity:0})),[`& .${Sf.openIcon}`]:I({position:"absolute",transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.short}),opacity:0,transform:"rotate(-45deg)"},t.open&&{transform:"rotate(0deg)",opacity:1})})),jee=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiSpeedDialIcon"}),{className:i,icon:o,openIcon:a}=r,s=We(r,lIe),l=r,c=cIe(l);function u(f,d){return $.isValidElement(f)?$.cloneElement(f,{className:d}):f}return G.jsxs(uIe,I({className:je(c.root,i),ref:n,ownerState:l},s,{children:[a?u(a,c.openIcon):null,o?u(o,c.icon):G.jsx(aIe,{className:c.icon})]}))});jee.muiName="SpeedDialIcon";const fIe=jee,zee=$.createContext({});function dIe(){return $.useContext(zee)}const Oh=zee,Uee=$.createContext({});function pIe(){return $.useContext(Uee)}const c0=Uee;function Vee(e){return it("MuiStep",e)}const hIe=at("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]),mIe=hIe,gIe=["active","children","className","component","completed","disabled","expanded","index","last"],vIe=e=>{const{classes:t,orientation:n,alternativeLabel:r,completed:i}=e;return ot({root:["root",n,r&&"alternativeLabel",i&&"completed"]},Vee,t)},yIe=Ie("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>I({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),bIe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiStep"}),{active:i,children:o,className:a,component:s="div",completed:l,disabled:c,expanded:u=!1,index:f,last:d}=r,p=We(r,gIe),{activeStep:h,connector:g,alternativeLabel:v,orientation:m,nonLinear:y}=$.useContext(Oh);let[_=!1,b=!1,x=!1]=[i,l,c];h===f?_=i!==void 0?i:!0:!y&&h>f?b=l!==void 0?l:!0:!y&&h<f&&(x=c!==void 0?c:!0);const w=$.useMemo(()=>({index:f,last:d,expanded:u,icon:f+1,active:_,completed:b,disabled:x}),[f,d,u,_,b,x]),S=I({},r,{active:_,orientation:m,alternativeLabel:v,completed:b,disabled:x,expanded:u,component:s}),A=vIe(S),C=G.jsxs(yIe,I({as:s,className:je(A.root,a),ref:n,ownerState:S},p,{children:[g&&v&&f!==0?g:null,o]}));return G.jsx(c0.Provider,{value:w,children:g&&!v&&f!==0?G.jsxs($.Fragment,{children:[g,C]}):C})}),_Ie=bIe,xIe=fr(G.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),wIe=fr(G.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Hee(e){return it("MuiStepIcon",e)}const SIe=at("MuiStepIcon",["root","active","completed","error","text"]),_S=SIe;var x8;const CIe=["active","className","completed","error","icon"],AIe=e=>{const{classes:t,active:n,completed:r,error:i}=e;return ot({root:["root",n&&"active",r&&"completed",i&&"error"],text:["text"]},Hee,t)},xO=Ie(jC,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${_S.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${_S.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${_S.error}`]:{color:(e.vars||e).palette.error.main}})),PIe=Ie("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),MIe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiStepIcon"}),{active:i=!1,className:o,completed:a=!1,error:s=!1,icon:l}=r,c=We(r,CIe),u=I({},r,{active:i,completed:a,error:s}),f=AIe(u);if(typeof l=="number"||typeof l=="string"){const d=je(o,f.root);return s?G.jsx(xO,I({as:wIe,className:d,ref:n,ownerState:u},c)):a?G.jsx(xO,I({as:xIe,className:d,ref:n,ownerState:u},c)):G.jsxs(xO,I({className:d,ref:n,ownerState:u},c,{children:[x8||(x8=G.jsx("circle",{cx:"12",cy:"12",r:"12"})),G.jsx(PIe,{className:f.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:l})]}))}return l}),Gee=MIe;function Wee(e){return it("MuiStepLabel",e)}const EIe=at("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),yu=EIe,TIe=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],OIe=e=>{const{classes:t,orientation:n,active:r,completed:i,error:o,disabled:a,alternativeLabel:s}=e;return ot({root:["root",n,o&&"error",a&&"disabled",s&&"alternativeLabel"],label:["label",r&&"active",i&&"completed",o&&"error",a&&"disabled",s&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",i&&"completed",o&&"error",a&&"disabled",s&&"alternativeLabel"],labelContainer:["labelContainer",s&&"alternativeLabel"]},Wee,t)},IIe=Ie("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})(({ownerState:e})=>I({display:"flex",alignItems:"center",[`&.${yu.alternativeLabel}`]:{flexDirection:"column"},[`&.${yu.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),RIe=Ie("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>I({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${yu.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${yu.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${yu.alternativeLabel}`]:{marginTop:16},[`&.${yu.error}`]:{color:(e.vars||e).palette.error.main}})),kIe=Ie("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${yu.alternativeLabel}`]:{paddingRight:0}})),LIe=Ie("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${yu.alternativeLabel}`]:{textAlign:"center"}})),qee=$.forwardRef(function(t,n){var r;const i=st({props:t,name:"MuiStepLabel"}),{children:o,className:a,componentsProps:s={},error:l=!1,icon:c,optional:u,slotProps:f={},StepIconComponent:d,StepIconProps:p}=i,h=We(i,TIe),{alternativeLabel:g,orientation:v}=$.useContext(Oh),{active:m,disabled:y,completed:_,icon:b}=$.useContext(c0),x=c||b;let w=d;x&&!w&&(w=Gee);const S=I({},i,{active:m,alternativeLabel:g,completed:_,disabled:y,error:l,orientation:v}),A=OIe(S),C=(r=f.label)!=null?r:s.label;return G.jsxs(IIe,I({className:je(A.root,a),ref:n,ownerState:S},h,{children:[x||w?G.jsx(kIe,{className:A.iconContainer,ownerState:S,children:G.jsx(w,I({completed:_,active:m,error:l,icon:x},p))}):null,G.jsxs(LIe,{className:A.labelContainer,ownerState:S,children:[o?G.jsx(RIe,I({ownerState:S},C,{className:je(A.label,C==null?void 0:C.className),children:o})):null,u]})]}))});qee.muiName="StepLabel";const Xee=qee;function Yee(e){return it("MuiStepButton",e)}const $Ie=at("MuiStepButton",["root","horizontal","vertical","touchRipple"]),z5=$Ie,DIe=["children","className","icon","optional"],BIe=e=>{const{classes:t,orientation:n}=e;return ot({root:["root",n],touchRipple:["touchRipple"]},Yee,t)},NIe=Ie(yi,{name:"MuiStepButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${z5.touchRipple}`]:t.touchRipple},t.root,t[n.orientation]]}})(({ownerState:e})=>I({width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},e.orientation==="vertical"&&{justifyContent:"flex-start",padding:"8px",margin:"-8px"},{[`& .${z5.touchRipple}`]:{color:"rgba(0, 0, 0, 0.3)"}})),FIe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiStepButton"}),{children:i,className:o,icon:a,optional:s}=r,l=We(r,DIe),{disabled:c,active:u}=$.useContext(c0),{orientation:f}=$.useContext(Oh),d=I({},r,{orientation:f}),p=BIe(d),h={icon:a,optional:s},g=xc(i,["StepLabel"])?$.cloneElement(i,h):G.jsx(Xee,I({},h,{children:i}));return G.jsx(NIe,I({focusRipple:!0,disabled:c,TouchRippleProps:{className:p.touchRipple},className:je(p.root,o),ref:n,ownerState:d,"aria-current":u?"step":void 0},l,{children:g}))}),jIe=FIe;function Kee(e){return it("MuiStepConnector",e)}const zIe=at("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]),UIe=zIe,VIe=["className"],HIe=e=>{const{classes:t,orientation:n,alternativeLabel:r,active:i,completed:o,disabled:a}=e,s={root:["root",n,r&&"alternativeLabel",i&&"active",o&&"completed",a&&"disabled"],line:["line",`line${De(n)}`]};return ot(s,Kee,t)},GIe=Ie("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>I({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:8+4,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),WIe=Ie("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t[`line${De(n.orientation)}`]]}})(({ownerState:e,theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return I({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:n},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),qIe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiStepConnector"}),{className:i}=r,o=We(r,VIe),{alternativeLabel:a,orientation:s="horizontal"}=$.useContext(Oh),{active:l,disabled:c,completed:u}=$.useContext(c0),f=I({},r,{alternativeLabel:a,orientation:s,active:l,completed:u,disabled:c}),d=HIe(f);return G.jsx(GIe,I({className:je(d.root,i),ref:n,ownerState:f},o,{children:G.jsx(WIe,{className:d.line,ownerState:f})}))}),Zee=qIe;function Jee(e){return it("MuiStepContent",e)}const XIe=at("MuiStepContent",["root","last","transition"]),YIe=XIe,KIe=["children","className","TransitionComponent","transitionDuration","TransitionProps"],ZIe=e=>{const{classes:t,last:n}=e;return ot({root:["root",n&&"last"],transition:["transition"]},Jee,t)},JIe=Ie("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.last&&t.last]}})(({ownerState:e,theme:t})=>I({marginLeft:12,paddingLeft:8+12,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600]}`},e.last&&{borderLeft:"none"})),QIe=Ie(_M,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,t)=>t.transition})({}),eRe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiStepContent"}),{children:i,className:o,TransitionComponent:a=_M,transitionDuration:s="auto",TransitionProps:l}=r,c=We(r,KIe);$.useContext(Oh);const{active:u,last:f,expanded:d}=$.useContext(c0),p=I({},r,{last:f}),h=ZIe(p);let g=s;return s==="auto"&&!a.muiSupportAuto&&(g=void 0),G.jsx(JIe,I({className:je(h.root,o),ref:n,ownerState:p},c,{children:G.jsx(QIe,I({as:a,in:u||d,className:h.transition,ownerState:p,timeout:g,unmountOnExit:!0},l,{children:i}))}))}),tRe=eRe;function Qee(e){return it("MuiStepper",e)}const nRe=at("MuiStepper",["root","horizontal","vertical","alternativeLabel"]),rRe=nRe,iRe=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],oRe=e=>{const{orientation:t,alternativeLabel:n,classes:r}=e;return ot({root:["root",t,n&&"alternativeLabel"]},Qee,r)},aRe=Ie("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel]}})(({ownerState:e})=>I({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),sRe=G.jsx(Zee,{}),lRe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:o=!1,children:a,className:s,component:l="div",connector:c=sRe,nonLinear:u=!1,orientation:f="horizontal"}=r,d=We(r,iRe),p=I({},r,{alternativeLabel:o,orientation:f,component:l}),h=oRe(p),g=$.Children.toArray(a).filter(Boolean),v=g.map((y,_)=>$.cloneElement(y,I({index:_,last:_+1===g.length},y.props))),m=$.useMemo(()=>({activeStep:i,alternativeLabel:o,connector:c,nonLinear:u,orientation:f}),[i,o,c,u,f]);return G.jsx(Oh.Provider,{value:m,children:G.jsx(aRe,I({as:l,ownerState:p,className:je(h.root,s),ref:n},d,{children:v}))})}),cRe=lRe,uRe=["anchor","classes","className","width","style"],fRe=Ie("div")(({theme:e,ownerState:t})=>I({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1},t.anchor==="left"&&{right:"auto"},t.anchor==="right"&&{left:"auto",right:0},t.anchor==="top"&&{bottom:"auto",right:0},t.anchor==="bottom"&&{top:"auto",bottom:0,right:0})),dRe=$.forwardRef(function(t,n){const{anchor:r,classes:i={},className:o,width:a,style:s}=t,l=We(t,uRe),c=t;return G.jsx(fRe,I({className:je("PrivateSwipeArea-root",i.root,i[`anchor${De(r)}`],o),ref:n,style:I({[dp(r)?"width":"height"]:a},s),ownerState:c},l))}),pRe=dRe,hRe=["BackdropProps"],mRe=["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","allowSwipeInChildren","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"],Iw=3,wO=20;let Hc=null;function SO(e,t,n){return e==="right"?n.body.offsetWidth-t[0].pageX:t[0].pageX}function CO(e,t,n){return e==="bottom"?n.innerHeight-t[0].clientY:t[0].clientY}function K0(e,t){return e?t.clientWidth:t.clientHeight}function w8(e,t,n,r){return Math.min(Math.max(n?t-e:r+t-e,0),r)}function gRe(e,t){const n=[];for(;e&&e!==t.parentElement;){const r=so(t).getComputedStyle(e);r.getPropertyValue("position")==="absolute"||r.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push(e),e=e.parentElement}return n}function vRe({domTreeShapes:e,start:t,current:n,anchor:r}){const i={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(o=>{let a=n>=t;(r==="top"||r==="left")&&(a=!a);const s=r==="left"||r==="right"?"x":"y",l=Math.round(o[i.scrollPosition[s]]),c=l>0,u=l+o[i.clientLength[s]]<o[i.scrollLength[s]];return!!(a&&u||!a&&c)})}const yRe=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),bRe=$.forwardRef(function(t,n){const r=T_({name:"MuiSwipeableDrawer",props:t}),i=ir(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:a="left",disableBackdropTransition:s=!1,disableDiscovery:l=!1,disableSwipeToOpen:c=yRe,hideBackdrop:u,hysteresis:f=.52,allowSwipeInChildren:d=!1,minFlingVelocity:p=450,ModalProps:{BackdropProps:h}={},onClose:g,onOpen:v,open:m=!1,PaperProps:y={},SwipeAreaProps:_,swipeAreaWidth:b=20,transitionDuration:x=o,variant:w="temporary"}=r,S=We(r.ModalProps,hRe),A=We(r,mRe),[C,k]=$.useState(!1),O=$.useRef({isSwiping:null}),T=$.useRef(),B=$.useRef(),R=$.useRef(),P=En(y.ref,R),D=$.useRef(!1),z=$.useRef();vi(()=>{z.current=null},[m]);const N=$.useCallback((Z,ce={})=>{const{mode:se=null,changeTransition:Y=!0}=ce,he=By(i,a),ae=["right","bottom"].indexOf(he)!==-1?1:-1,ye=dp(a),re=ye?`translate(${ae*Z}px, 0)`:`translate(0, ${ae*Z}px)`,te=R.current.style;te.webkitTransform=re,te.transform=re;let le="";if(se&&(le=i.transitions.create("all",Il({easing:void 0,style:void 0,timeout:x},{mode:se}))),Y&&(te.webkitTransition=le,te.transition=le),!s&&!u){const de=B.current.style;de.opacity=1-Z/K0(ye,R.current),Y&&(de.webkitTransition=le,de.transition=le)}},[a,s,u,i,x]),H=Ar(Z=>{if(!D.current)return;if(Hc=null,D.current=!1,Hp.flushSync(()=>{k(!1)}),!O.current.isSwiping){O.current.isSwiping=null;return}O.current.isSwiping=null;const ce=By(i,a),se=dp(a);let Y;se?Y=SO(ce,Z.changedTouches,er(Z.currentTarget)):Y=CO(ce,Z.changedTouches,so(Z.currentTarget));const he=se?O.current.startX:O.current.startY,ae=K0(se,R.current),ye=w8(Y,he,m,ae),re=ye/ae;if(Math.abs(O.current.velocity)>p&&(z.current=Math.abs((ae-ye)/O.current.velocity)*1e3),m){O.current.velocity>p||re>f?g():N(0,{mode:"exit"});return}O.current.velocity<-p||1-re>f?v():N(K0(se,R.current),{mode:"enter"})}),J=(Z=!1)=>{if(!C){(Z||!(l&&d))&&Hp.flushSync(()=>{k(!0)});const ce=dp(a);!m&&R.current&&N(K0(ce,R.current)+(l?15:-wO),{changeTransition:!1}),O.current.velocity=0,O.current.lastTime=null,O.current.lastTranslate=null,O.current.paperHit=!1,D.current=!0}},ne=Ar(Z=>{if(!R.current||!D.current||Hc!==null&&Hc!==O.current)return;J(!0);const ce=By(i,a),se=dp(a),Y=SO(ce,Z.touches,er(Z.currentTarget)),he=CO(ce,Z.touches,so(Z.currentTarget));if(m&&R.current.contains(Z.target)&&Hc===null){const le=gRe(Z.target,R.current);if(vRe({domTreeShapes:le,start:se?O.current.startX:O.current.startY,current:se?Y:he,anchor:a})){Hc=!0;return}Hc=O.current}if(O.current.isSwiping==null){const le=Math.abs(Y-O.current.startX),de=Math.abs(he-O.current.startY),_e=se?le>de&&le>Iw:de>le&&de>Iw;if(_e&&Z.cancelable&&Z.preventDefault(),_e===!0||(se?de>Iw:le>Iw)){if(O.current.isSwiping=_e,!_e){H(Z);return}O.current.startX=Y,O.current.startY=he,!l&&!m&&(se?O.current.startX-=wO:O.current.startY-=wO)}}if(!O.current.isSwiping)return;const ae=K0(se,R.current);let ye=se?O.current.startX:O.current.startY;m&&!O.current.paperHit&&(ye=Math.min(ye,ae));const re=w8(se?Y:he,ye,m,ae);if(m)if(O.current.paperHit)re===0&&(O.current.startX=Y,O.current.startY=he);else if(se?Y<ae:he<ae)O.current.paperHit=!0,O.current.startX=Y,O.current.startY=he;else return;O.current.lastTranslate===null&&(O.current.lastTranslate=re,O.current.lastTime=performance.now()+1);const te=(re-O.current.lastTranslate)/(performance.now()-O.current.lastTime)*1e3;O.current.velocity=O.current.velocity*.4+te*.6,O.current.lastTranslate=re,O.current.lastTime=performance.now(),Z.cancelable&&Z.preventDefault(),N(re)}),oe=Ar(Z=>{if(Z.defaultPrevented||Z.defaultMuiPrevented||m&&(u||!B.current.contains(Z.target))&&!R.current.contains(Z.target))return;const ce=By(i,a),se=dp(a),Y=SO(ce,Z.touches,er(Z.currentTarget)),he=CO(ce,Z.touches,so(Z.currentTarget));if(!m){var ae;if(c||!(Z.target===T.current||(ae=R.current)!=null&&ae.contains(Z.target)&&(typeof d=="function"?d(Z,T.current,R.current):d)))return;if(se){if(Y>b)return}else if(he>b)return}Z.defaultMuiPrevented=!0,Hc=null,O.current.startX=Y,O.current.startY=he,J()});return $.useEffect(()=>{if(w==="temporary"){const Z=er(R.current);return Z.addEventListener("touchstart",oe),Z.addEventListener("touchmove",ne,{passive:!m}),Z.addEventListener("touchend",H),()=>{Z.removeEventListener("touchstart",oe),Z.removeEventListener("touchmove",ne,{passive:!m}),Z.removeEventListener("touchend",H)}}},[w,m,oe,ne,H]),$.useEffect(()=>()=>{Hc===O.current&&(Hc=null)},[]),$.useEffect(()=>{m||k(!1)},[m]),G.jsxs($.Fragment,{children:[G.jsx(oQ,I({open:w==="temporary"&&C?!0:m,variant:w,ModalProps:I({BackdropProps:I({},h,{ref:B})},w==="temporary"&&{keepMounted:!0},S),hideBackdrop:u,PaperProps:I({},y,{style:I({pointerEvents:w==="temporary"&&!m&&!d?"none":""},y.style),ref:P}),anchor:a,transitionDuration:z.current||x,onClose:g,ref:n},A)),!c&&w==="temporary"&&G.jsx(nJ,{children:G.jsx(pRe,I({anchor:a,ref:T,width:b},_))})]})}),_Re=bRe;function ete(e){return it("MuiSwitch",e)}const xRe=at("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),Co=xRe,wRe=["className","color","edge","size","sx"],SRe=e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:a}=e,s={root:["root",n&&`edge${De(n)}`,`size${De(r)}`],switchBase:["switchBase",`color${De(i)}`,o&&"checked",a&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=ot(s,ete,t);return I({},t,l)},CRe=Ie("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${De(n.edge)}`],t[`size${De(n.size)}`]]}})(({ownerState:e})=>I({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${Co.thumb}`]:{width:16,height:16},[`& .${Co.switchBase}`]:{padding:4,[`&.${Co.checked}`]:{transform:"translateX(16px)"}}})),ARe=Ie(iB,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${Co.input}`]:t.input},n.color!=="default"&&t[`color${De(n.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${Co.checked}`]:{transform:"translateX(20px)"},[`&.${Co.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${Co.checked} + .${Co.track}`]:{opacity:.5},[`&.${Co.disabled} + .${Co.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${Co.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:t})=>I({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${Co.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Co.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${e.palette.mode==="light"?Ol(e.palette[t.color].main,.62):Tl(e.palette[t.color].main,.55)}`}},[`&.${Co.checked} + .${Co.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}})),PRe=Ie("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),MRe=Ie("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),ERe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiSwitch"}),{className:i,color:o="primary",edge:a=!1,size:s="medium",sx:l}=r,c=We(r,wRe),u=I({},r,{color:o,edge:a,size:s}),f=SRe(u),d=G.jsx(MRe,{className:f.thumb,ownerState:u});return G.jsxs(CRe,{className:je(f.root,i),sx:l,ownerState:u,children:[G.jsx(ARe,I({type:"checkbox",icon:d,checkedIcon:d,ref:n,ownerState:u},c,{classes:I({},f,{root:f.switchBase})})),G.jsx(PRe,{className:f.track,ownerState:u})]})}),TRe=ERe;function tte(e){return it("MuiTab",e)}const ORe=at("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Cf=ORe,IRe=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],RRe=e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:o,label:a,selected:s,disabled:l}=e,c={root:["root",o&&a&&"labelIcon",`textColor${De(n)}`,r&&"fullWidth",i&&"wrapped",s&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return ot(c,tte,t)},kRe=Ie(yi,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${De(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>I({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${Cf.iconWrapper}`]:I({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${Cf.selected}`]:{opacity:1},[`&.${Cf.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${Cf.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${Cf.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${Cf.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${Cf.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),LRe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:a=!1,fullWidth:s,icon:l,iconPosition:c="top",indicator:u,label:f,onChange:d,onClick:p,onFocus:h,selected:g,selectionFollowsFocus:v,textColor:m="inherit",value:y,wrapped:_=!1}=r,b=We(r,IRe),x=I({},r,{disabled:o,disableFocusRipple:a,selected:g,icon:!!l,iconPosition:c,label:!!f,fullWidth:s,textColor:m,wrapped:_}),w=RRe(x),S=l&&f&&$.isValidElement(l)?$.cloneElement(l,{className:je(w.iconWrapper,l.props.className)}):l,A=k=>{!g&&d&&d(k,y),p&&p(k)},C=k=>{v&&!g&&d&&d(k,y),h&&h(k)};return G.jsxs(kRe,I({focusRipple:!a,className:je(w.root,i),ref:n,role:"tab","aria-selected":g,disabled:o,onClick:A,onFocus:C,ownerState:x,tabIndex:g?0:-1},b,{children:[c==="top"||c==="start"?G.jsxs($.Fragment,{children:[S,f]}):G.jsxs($.Fragment,{children:[f,S]}),u]}))}),$Re=LRe,DRe=$.createContext(),nte=DRe;function rte(e){return it("MuiTable",e)}const BRe=at("MuiTable",["root","stickyHeader"]),NRe=BRe,FRe=["className","component","padding","size","stickyHeader"],jRe=e=>{const{classes:t,stickyHeader:n}=e;return ot({root:["root",n&&"stickyHeader"]},rte,t)},zRe=Ie("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>I({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":I({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),S8="table",URe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTable"}),{className:i,component:o=S8,padding:a="normal",size:s="medium",stickyHeader:l=!1}=r,c=We(r,FRe),u=I({},r,{component:o,padding:a,size:s,stickyHeader:l}),f=jRe(u),d=$.useMemo(()=>({padding:a,size:s,stickyHeader:l}),[a,s,l]);return G.jsx(nte.Provider,{value:d,children:G.jsx(zRe,I({as:o,role:o===S8?null:"table",ref:n,className:je(f.root,i),ownerState:u},c))})}),VRe=URe,HRe=$.createContext(),F_=HRe;function ite(e){return it("MuiTableBody",e)}const GRe=at("MuiTableBody",["root"]),WRe=GRe,qRe=["className","component"],XRe=e=>{const{classes:t}=e;return ot({root:["root"]},ite,t)},YRe=Ie("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),KRe={variant:"body"},C8="tbody",ZRe=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTableBody"}),{className:i,component:o=C8}=r,a=We(r,qRe),s=I({},r,{component:o}),l=XRe(s);return G.jsx(F_.Provider,{value:KRe,children:G.jsx(YRe,I({className:je(l.root,i),as:o,ref:n,role:o===C8?null:"rowgroup",ownerState:s},a))})}),JRe=ZRe;function ote(e){return it("MuiTableCell",e)}const QRe=at("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),ate=QRe,eke=["align","className","component","padding","scope","size","sortDirection","variant"],tke=e=>{const{classes:t,variant:n,align:r,padding:i,size:o,stickyHeader:a}=e,s={root:["root",n,a&&"stickyHeader",r!=="inherit"&&`align${De(r)}`,i!=="normal"&&`padding${De(i)}`,`size${De(o)}`]};return ot(s,ote,t)},nke=Ie("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${De(n.size)}`],n.padding!=="normal"&&t[`padding${De(n.padding)}`],n.align!=="inherit"&&t[`align${De(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>I({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?Ol(Ot(e.palette.divider,1),.88):Tl(Ot(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${ate.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),rke=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTableCell"}),{align:i="inherit",className:o,component:a,padding:s,scope:l,size:c,sortDirection:u,variant:f}=r,d=We(r,eke),p=$.useContext(nte),h=$.useContext(F_),g=h&&h.variant==="head";let v;a?v=a:v=g?"th":"td";let m=l;v==="td"?m=void 0:!m&&g&&(m="col");const y=f||h&&h.variant,_=I({},r,{align:i,component:v,padding:s||(p&&p.padding?p.padding:"normal"),size:c||(p&&p.size?p.size:"medium"),sortDirection:u,stickyHeader:y==="head"&&p&&p.stickyHeader,variant:y}),b=tke(_);let x=null;return u&&(x=u==="asc"?"ascending":"descending"),G.jsx(nke,I({as:v,ref:n,className:je(b.root,o),"aria-sort":x,scope:m,ownerState:_},d))}),YC=rke;function ste(e){return it("MuiTableContainer",e)}const ike=at("MuiTableContainer",["root"]),oke=ike,ake=["className","component"],ske=e=>{const{classes:t}=e;return ot({root:["root"]},ste,t)},lke=Ie("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),cke=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTableContainer"}),{className:i,component:o="div"}=r,a=We(r,ake),s=I({},r,{component:o}),l=ske(s);return G.jsx(lke,I({ref:n,as:o,className:je(l.root,i),ownerState:s},a))}),uke=cke;function lte(e){return it("MuiTableFooter",e)}const fke=at("MuiTableFooter",["root"]),dke=fke,pke=["className","component"],hke=e=>{const{classes:t}=e;return ot({root:["root"]},lte,t)},mke=Ie("tfoot",{name:"MuiTableFooter",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-footer-group"}),gke={variant:"footer"},A8="tfoot",vke=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTableFooter"}),{className:i,component:o=A8}=r,a=We(r,pke),s=I({},r,{component:o}),l=hke(s);return G.jsx(F_.Provider,{value:gke,children:G.jsx(mke,I({as:o,className:je(l.root,i),ref:n,role:o===A8?null:"rowgroup",ownerState:s},a))})}),yke=vke;function cte(e){return it("MuiTableHead",e)}const bke=at("MuiTableHead",["root"]),_ke=bke,xke=["className","component"],wke=e=>{const{classes:t}=e;return ot({root:["root"]},cte,t)},Ske=Ie("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),Cke={variant:"head"},P8="thead",Ake=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTableHead"}),{className:i,component:o=P8}=r,a=We(r,xke),s=I({},r,{component:o}),l=wke(s);return G.jsx(F_.Provider,{value:Cke,children:G.jsx(Ske,I({as:o,className:je(l.root,i),ref:n,role:o===P8?null:"rowgroup",ownerState:s},a))})}),Pke=Ake;function ute(e){return it("MuiToolbar",e)}const Mke=at("MuiToolbar",["root","gutters","regular","dense"]),Eke=Mke,Tke=["className","component","disableGutters","variant"],Oke=e=>{const{classes:t,disableGutters:n,variant:r}=e;return ot({root:["root",!n&&"gutters",r]},ute,t)},Ike=Ie("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(({theme:e,ownerState:t})=>I({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},t.variant==="dense"&&{minHeight:48}),({theme:e,ownerState:t})=>t.variant==="regular"&&e.mixins.toolbar),Rke=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:a=!1,variant:s="regular"}=r,l=We(r,Tke),c=I({},r,{component:o,disableGutters:a,variant:s}),u=Oke(c);return G.jsx(Ike,I({as:o,className:je(u.root,i),ref:n,ownerState:c},l))}),fte=Rke,U5=fr(G.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),V5=fr(G.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");var M8,E8,T8,O8,I8,R8,k8,L8;const kke=["backIconButtonProps","count","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton"],Lke=$.forwardRef(function(t,n){const{backIconButtonProps:r,count:i,getItemAriaLabel:o,nextIconButtonProps:a,onPageChange:s,page:l,rowsPerPage:c,showFirstButton:u,showLastButton:f}=t,d=We(t,kke),p=ir(),h=y=>{s(y,0)},g=y=>{s(y,l-1)},v=y=>{s(y,l+1)},m=y=>{s(y,Math.max(0,Math.ceil(i/c)-1))};return G.jsxs("div",I({ref:n},d,{children:[u&&G.jsx(Eo,{onClick:h,disabled:l===0,"aria-label":o("first",l),title:o("first",l),children:p.direction==="rtl"?M8||(M8=G.jsx(qC,{})):E8||(E8=G.jsx(WC,{}))}),G.jsx(Eo,I({onClick:g,disabled:l===0,color:"inherit","aria-label":o("previous",l),title:o("previous",l)},r,{children:p.direction==="rtl"?T8||(T8=G.jsx(V5,{})):O8||(O8=G.jsx(U5,{}))})),G.jsx(Eo,I({onClick:v,disabled:i!==-1?l>=Math.ceil(i/c)-1:!1,color:"inherit","aria-label":o("next",l),title:o("next",l)},a,{children:p.direction==="rtl"?I8||(I8=G.jsx(U5,{})):R8||(R8=G.jsx(V5,{}))})),f&&G.jsx(Eo,{onClick:m,disabled:l>=Math.ceil(i/c)-1,"aria-label":o("last",l),title:o("last",l),children:p.direction==="rtl"?k8||(k8=G.jsx(WC,{})):L8||(L8=G.jsx(qC,{}))})]}))}),$ke=Lke;function dte(e){return it("MuiTablePagination",e)}const Dke=at("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),Eg=Dke;var $8;const Bke=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton"],Nke=Ie(YC,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}})),Fke=Ie(fte,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>I({[`& .${Eg.actions}`]:t.actions},t.toolbar)})(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${Eg.actions}`]:{flexShrink:0,marginLeft:20}})),jke=Ie("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),zke=Ie("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})(({theme:e})=>I({},e.typography.body2,{flexShrink:0})),Uke=Ie(N_,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>I({[`& .${Eg.selectIcon}`]:t.selectIcon,[`& .${Eg.select}`]:t.select},t.input,t.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${Eg.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),Vke=Ie(fa,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),Hke=Ie("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})(({theme:e})=>I({},e.typography.body2,{flexShrink:0}));function Gke({from:e,to:t,count:n}){return`${e}${t} of ${n!==-1?n:`more than ${t}`}`}function Wke(e){return`Go to ${e} page`}const qke=e=>{const{classes:t}=e;return ot({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},dte,t)},Xke=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTablePagination"}),{ActionsComponent:i=$ke,backIconButtonProps:o,className:a,colSpan:s,component:l=YC,count:c,getItemAriaLabel:u=Wke,labelDisplayedRows:f=Gke,labelRowsPerPage:d="Rows per page:",nextIconButtonProps:p,onPageChange:h,onRowsPerPageChange:g,page:v,rowsPerPage:m,rowsPerPageOptions:y=[10,25,50,100],SelectProps:_={},showFirstButton:b=!1,showLastButton:x=!1}=r,w=We(r,Bke),S=r,A=qke(S),C=_.native?"option":Vke;let k;(l===YC||l==="td")&&(k=s||1e3);const O=zs(_.id),T=zs(_.labelId),B=()=>c===-1?(v+1)*m:m===-1?c:Math.min(c,(v+1)*m);return G.jsx(Nke,I({colSpan:k,ref:n,as:l,ownerState:S,className:je(A.root,a)},w,{children:G.jsxs(Fke,{className:A.toolbar,children:[G.jsx(jke,{className:A.spacer}),y.length>1&&G.jsx(zke,{className:A.selectLabel,id:T,children:d}),y.length>1&&G.jsx(Uke,I({variant:"standard"},!_.variant&&{input:$8||($8=G.jsx(D_,{}))},{value:m,onChange:g,id:O,labelId:T},_,{classes:I({},_.classes,{root:je(A.input,A.selectRoot,(_.classes||{}).root),select:je(A.select,(_.classes||{}).select),icon:je(A.selectIcon,(_.classes||{}).icon)}),children:y.map(R=>$.createElement(C,I({},!wl(C)&&{ownerState:S},{className:A.menuItem,key:R.label?R.label:R,value:R.value?R.value:R}),R.label?R.label:R))})),G.jsx(Hke,{className:A.displayedRows,children:f({from:c===0?0:v*m+1,to:B(),count:c===-1?-1:c,page:v})}),G.jsx(i,{className:A.actions,backIconButtonProps:o,count:c,nextIconButtonProps:p,onPageChange:h,page:v,rowsPerPage:m,showFirstButton:b,showLastButton:x,getItemAriaLabel:u})]})}))}),Yke=Xke;function pte(e){return it("MuiTableRow",e)}const Kke=at("MuiTableRow",["root","selected","hover","head","footer"]),H5=Kke,Zke=["className","component","hover","selected"],Jke=e=>{const{classes:t,selected:n,hover:r,head:i,footer:o}=e;return ot({root:["root",n&&"selected",r&&"hover",i&&"head",o&&"footer"]},pte,t)},Qke=Ie("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${H5.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${H5.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Ot(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),D8="tr",e5e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTableRow"}),{className:i,component:o=D8,hover:a=!1,selected:s=!1}=r,l=We(r,Zke),c=$.useContext(F_),u=I({},r,{component:o,hover:a,selected:s,head:c&&c.variant==="head",footer:c&&c.variant==="footer"}),f=Jke(u);return G.jsx(Qke,I({as:o,ref:n,className:je(f.root,i),role:o===D8?null:"row",ownerState:u},l))}),t5e=e5e,n5e=fr(G.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function hte(e){return it("MuiTableSortLabel",e)}const r5e=at("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),xS=r5e,i5e=["active","children","className","direction","hideSortIcon","IconComponent"],o5e=e=>{const{classes:t,direction:n,active:r}=e,i={root:["root",r&&"active"],icon:["icon",`iconDirection${De(n)}`]};return ot(i,hte,t)},a5e=Ie(yi,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.active&&t.active]}})(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${xS.icon}`]:{opacity:.5}},[`&.${xS.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${xS.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}})),s5e=Ie("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,t[`iconDirection${De(n.direction)}`]]}})(({theme:e,ownerState:t})=>I({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},t.direction==="desc"&&{transform:"rotate(0deg)"},t.direction==="asc"&&{transform:"rotate(180deg)"})),l5e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTableSortLabel"}),{active:i=!1,children:o,className:a,direction:s="asc",hideSortIcon:l=!1,IconComponent:c=n5e}=r,u=We(r,i5e),f=I({},r,{active:i,direction:s,hideSortIcon:l,IconComponent:c}),d=o5e(f);return G.jsxs(a5e,I({className:je(d.root,a),component:"span",disableRipple:!0,ownerState:f,ref:n},u,{children:[o,l&&!i?null:G.jsx(s5e,{as:c,className:je(d.icon),ownerState:f})]}))}),c5e=l5e;function u5e(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function f5e(e,t,n,r={},i=()=>{}){const{ease:o=u5e,duration:a=300}=r;let s=null;const l=t[e];let c=!1;const u=()=>{c=!0},f=d=>{if(c){i(new Error("Animation cancelled"));return}s===null&&(s=d);const p=Math.min(1,(d-s)/a);if(t[e]=o(p)*(n-l)+l,p>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(f)};return l===n?(i(new Error("Element already at target position")),u):(requestAnimationFrame(f),u)}const d5e=["onChange"],p5e={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function h5e(e){const{onChange:t}=e,n=We(e,d5e),r=$.useRef(),i=$.useRef(null),o=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return vi(()=>{const a=Eh(()=>{const l=r.current;o(),l!==r.current&&t(r.current)}),s=so(i.current);return s.addEventListener("resize",a),()=>{a.clear(),s.removeEventListener("resize",a)}},[t]),$.useEffect(()=>{o(),t(r.current)},[t]),G.jsx("div",I({style:p5e,ref:i},n))}function mte(e){return it("MuiTabScrollButton",e)}const m5e=at("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),gte=m5e,g5e=["className","slots","slotProps","direction","orientation","disabled"],v5e=e=>{const{classes:t,orientation:n,disabled:r}=e;return ot({root:["root",n,r&&"disabled"]},mte,t)},y5e=Ie(yi,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})(({ownerState:e})=>I({width:40,flexShrink:0,opacity:.8,[`&.${gte.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),b5e=$.forwardRef(function(t,n){var r,i;const o=st({props:t,name:"MuiTabScrollButton"}),{className:a,slots:s={},slotProps:l={},direction:c}=o,u=We(o,g5e),d=ir().direction==="rtl",p=I({isRtl:d},o),h=v5e(p),g=(r=s.StartScrollButtonIcon)!=null?r:U5,v=(i=s.EndScrollButtonIcon)!=null?i:V5,m=Nr({elementType:g,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p}),y=Nr({elementType:v,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:p});return G.jsx(y5e,I({component:"div",className:je(h.root,a),ref:n,role:null,ownerState:p,tabIndex:null},u,{children:c==="left"?G.jsx(g,I({},m)):G.jsx(v,I({},y))}))}),vte=b5e;function yte(e){return it("MuiTabs",e)}const _5e=at("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),wS=_5e,x5e=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],B8=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,N8=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,Rw=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const o=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||o)i=n(e,i);else{i.focus();return}}},w5e=e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:a,scrollButtonsHideMobile:s,classes:l}=e;return ot({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",a&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},yte,l)},S5e=Ie("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${wS.scrollButtons}`]:t.scrollButtons},{[`& .${wS.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>I({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${wS.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),C5e=Ie("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})(({ownerState:e})=>I({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),A5e=Ie("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})(({ownerState:e})=>I({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),P5e=Ie("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>I({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),M5e=Ie(h5e)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),F8={},E5e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTabs"}),i=ir(),o=i.direction==="rtl",{"aria-label":a,"aria-labelledby":s,action:l,centered:c=!1,children:u,className:f,component:d="div",allowScrollButtonsMobile:p=!1,indicatorColor:h="primary",onChange:g,orientation:v="horizontal",ScrollButtonComponent:m=vte,scrollButtons:y="auto",selectionFollowsFocus:_,slots:b={},slotProps:x={},TabIndicatorProps:w={},TabScrollButtonProps:S={},textColor:A="primary",value:C,variant:k="standard",visibleScrollbar:O=!1}=r,T=We(r,x5e),B=k==="scrollable",R=v==="vertical",P=R?"scrollTop":"scrollLeft",D=R?"top":"left",z=R?"bottom":"right",N=R?"clientHeight":"clientWidth",H=R?"height":"width",J=I({},r,{component:d,allowScrollButtonsMobile:p,indicatorColor:h,orientation:v,vertical:R,scrollButtons:y,textColor:A,variant:k,visibleScrollbar:O,fixed:!B,hideScrollbar:B&&!O,scrollableX:B&&!R,scrollableY:B&&R,centered:c&&!B,scrollButtonsHideMobile:!p}),ne=w5e(J),oe=Nr({elementType:b.StartScrollButtonIcon,externalSlotProps:x.startScrollButtonIcon,ownerState:J}),Z=Nr({elementType:b.EndScrollButtonIcon,externalSlotProps:x.endScrollButtonIcon,ownerState:J}),[ce,se]=$.useState(!1),[Y,he]=$.useState(F8),[ae,ye]=$.useState(!1),[re,te]=$.useState(!1),[le,de]=$.useState(!1),[_e,be]=$.useState({overflow:"hidden",scrollbarWidth:0}),ke=new Map,W=$.useRef(null),ee=$.useRef(null),Ee=()=>{const He=W.current;let Ve;if(He){const Ye=He.getBoundingClientRect();Ve={clientWidth:He.clientWidth,scrollLeft:He.scrollLeft,scrollTop:He.scrollTop,scrollLeftNormalized:tme(He,i.direction),scrollWidth:He.scrollWidth,top:Ye.top,bottom:Ye.bottom,left:Ye.left,right:Ye.right}}let Je;if(He&&C!==!1){const Ye=ee.current.children;if(Ye.length>0){const yt=Ye[ke.get(C)];Je=yt?yt.getBoundingClientRect():null}}return{tabsMeta:Ve,tabMeta:Je}},ge=Ar(()=>{const{tabsMeta:He,tabMeta:Ve}=Ee();let Je=0,Ye;if(R)Ye="top",Ve&&He&&(Je=Ve.top-He.top+He.scrollTop);else if(Ye=o?"right":"left",Ve&&He){const mt=o?He.scrollLeftNormalized+He.clientWidth-He.scrollWidth:He.scrollLeft;Je=(o?-1:1)*(Ve[Ye]-He[Ye]+mt)}const yt={[Ye]:Je,[H]:Ve?Ve[H]:0};if(isNaN(Y[Ye])||isNaN(Y[H]))he(yt);else{const mt=Math.abs(Y[Ye]-yt[Ye]),ut=Math.abs(Y[H]-yt[H]);(mt>=1||ut>=1)&&he(yt)}}),pe=(He,{animation:Ve=!0}={})=>{Ve?f5e(P,W.current,He,{duration:i.transitions.duration.standard}):W.current[P]=He},ve=He=>{let Ve=W.current[P];R?Ve+=He:(Ve+=He*(o?-1:1),Ve*=o&&MK()==="reverse"?-1:1),pe(Ve)},$e=()=>{const He=W.current[N];let Ve=0;const Je=Array.from(ee.current.children);for(let Ye=0;Ye<Je.length;Ye+=1){const yt=Je[Ye];if(Ve+yt[N]>He){Ye===0&&(Ve=He);break}Ve+=yt[N]}return Ve},Ne=()=>{ve(-1*$e())},Ae=()=>{ve($e())},Oe=$.useCallback(He=>{be({overflow:null,scrollbarWidth:He})},[]),j=()=>{const He={};He.scrollbarSizeListener=B?G.jsx(M5e,{onChange:Oe,className:je(ne.scrollableX,ne.hideScrollbar)}):null;const Je=B&&(y==="auto"&&(ae||re)||y===!0);return He.scrollButtonStart=Je?G.jsx(m,I({slots:{StartScrollButtonIcon:b.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:oe},orientation:v,direction:o?"right":"left",onClick:Ne,disabled:!ae},S,{className:je(ne.scrollButtons,S.className)})):null,He.scrollButtonEnd=Je?G.jsx(m,I({slots:{EndScrollButtonIcon:b.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:Z},orientation:v,direction:o?"left":"right",onClick:Ae,disabled:!re},S,{className:je(ne.scrollButtons,S.className)})):null,He},M=Ar(He=>{const{tabsMeta:Ve,tabMeta:Je}=Ee();if(!(!Je||!Ve)){if(Je[D]<Ve[D]){const Ye=Ve[P]+(Je[D]-Ve[D]);pe(Ye,{animation:He})}else if(Je[z]>Ve[z]){const Ye=Ve[P]+(Je[z]-Ve[z]);pe(Ye,{animation:He})}}}),L=Ar(()=>{B&&y!==!1&&de(!le)});$.useEffect(()=>{const He=Eh(()=>{W.current&&ge()}),Ve=so(W.current);Ve.addEventListener("resize",He);let Je;return typeof ResizeObserver<"u"&&(Je=new ResizeObserver(He),Array.from(ee.current.children).forEach(Ye=>{Je.observe(Ye)})),()=>{He.clear(),Ve.removeEventListener("resize",He),Je&&Je.disconnect()}},[ge]),$.useEffect(()=>{const He=Array.from(ee.current.children),Ve=He.length;if(typeof IntersectionObserver<"u"&&Ve>0&&B&&y!==!1){const Je=He[0],Ye=He[Ve-1],yt={root:W.current,threshold:.99},mt=ct=>{ye(!ct[0].isIntersecting)},ut=new IntersectionObserver(mt,yt);ut.observe(Je);const Et=ct=>{te(!ct[0].isIntersecting)},et=new IntersectionObserver(Et,yt);return et.observe(Ye),()=>{ut.disconnect(),et.disconnect()}}},[B,y,le,u==null?void 0:u.length]),$.useEffect(()=>{se(!0)},[]),$.useEffect(()=>{ge()}),$.useEffect(()=>{M(F8!==Y)},[M,Y]),$.useImperativeHandle(l,()=>({updateIndicator:ge,updateScrollButtons:L}),[ge,L]);const q=G.jsx(P5e,I({},w,{className:je(ne.indicator,w.className),ownerState:J,style:I({},Y,w.style)}));let me=0;const Te=$.Children.map(u,He=>{if(!$.isValidElement(He))return null;const Ve=He.props.value===void 0?me:He.props.value;ke.set(Ve,me);const Je=Ve===C;return me+=1,$.cloneElement(He,I({fullWidth:k==="fullWidth",indicator:Je&&!ce&&q,selected:Je,selectionFollowsFocus:_,onChange:g,textColor:A,value:Ve},me===1&&C===!1&&!He.props.tabIndex?{tabIndex:0}:{}))}),Pe=He=>{const Ve=ee.current,Je=er(Ve).activeElement;if(Je.getAttribute("role")!=="tab")return;let yt=v==="horizontal"?"ArrowLeft":"ArrowUp",mt=v==="horizontal"?"ArrowRight":"ArrowDown";switch(v==="horizontal"&&o&&(yt="ArrowRight",mt="ArrowLeft"),He.key){case yt:He.preventDefault(),Rw(Ve,Je,N8);break;case mt:He.preventDefault(),Rw(Ve,Je,B8);break;case"Home":He.preventDefault(),Rw(Ve,null,B8);break;case"End":He.preventDefault(),Rw(Ve,null,N8);break}},Xe=j();return G.jsxs(S5e,I({className:je(ne.root,f),ownerState:J,ref:n,as:d},T,{children:[Xe.scrollButtonStart,Xe.scrollbarSizeListener,G.jsxs(C5e,{className:ne.scroller,ownerState:J,style:{overflow:_e.overflow,[R?`margin${o?"Left":"Right"}`:"marginBottom"]:O?void 0:-_e.scrollbarWidth},ref:W,children:[G.jsx(A5e,{"aria-label":a,"aria-labelledby":s,"aria-orientation":v==="vertical"?"vertical":null,className:ne.flexContainer,ownerState:J,onKeyDown:Pe,ref:ee,role:"tablist",children:Te}),ce&&q]}),Xe.scrollButtonEnd]}))}),T5e=E5e;function bte(e){return it("MuiTextField",e)}const O5e=at("MuiTextField",["root"]),I5e=O5e,R5e=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],k5e={standard:OM,filled:aB,outlined:uB},L5e=e=>{const{classes:t}=e;return ot({root:["root"]},bte,t)},$5e=Ie(cQ,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),D5e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:a,className:s,color:l="primary",defaultValue:c,disabled:u=!1,error:f=!1,FormHelperTextProps:d,fullWidth:p=!1,helperText:h,id:g,InputLabelProps:v,inputProps:m,InputProps:y,inputRef:_,label:b,maxRows:x,minRows:w,multiline:S=!1,name:A,onBlur:C,onChange:k,onFocus:O,placeholder:T,required:B=!1,rows:R,select:P=!1,SelectProps:D,type:z,value:N,variant:H="outlined"}=r,J=We(r,R5e),ne=I({},r,{autoFocus:o,color:l,disabled:u,error:f,fullWidth:p,multiline:S,required:B,select:P,variant:H}),oe=L5e(ne),Z={};H==="outlined"&&(v&&typeof v.shrink<"u"&&(Z.notched=v.shrink),Z.label=b),P&&((!D||!D.native)&&(Z.id=void 0),Z["aria-describedby"]=void 0);const ce=zs(g),se=h&&ce?`${ce}-helper-text`:void 0,Y=b&&ce?`${ce}-label`:void 0,he=k5e[H],ae=G.jsx(he,I({"aria-describedby":se,autoComplete:i,autoFocus:o,defaultValue:c,fullWidth:p,multiline:S,name:A,rows:R,maxRows:x,minRows:w,type:z,value:N,id:ce,inputRef:_,onBlur:C,onChange:k,onFocus:O,placeholder:T,inputProps:m},Z,y));return G.jsxs($5e,I({className:je(oe.root,s),disabled:u,error:f,fullWidth:p,ref:n,required:B,color:l,variant:H,ownerState:ne},J,{children:[b!=null&&b!==""&&G.jsx(kQ,I({htmlFor:ce,id:Y},v,{children:b})),P?G.jsx(N_,I({"aria-describedby":se,id:ce,labelId:Y,value:N,input:ae},D,{children:a})):ae,h&&G.jsx(mQ,I({id:se},d,{children:h}))]}))}),_te=D5e;function xte(e){return it("MuiToggleButton",e)}const B5e=at("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),G5=B5e,N5e=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],F5e=e=>{const{classes:t,fullWidth:n,selected:r,disabled:i,size:o,color:a}=e,s={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${De(o)}`,a]};return ot(s,xte,t)},j5e=Ie(yi,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`size${De(n.size)}`]]}})(({theme:e,ownerState:t})=>{let n=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,r;return e.vars&&(n=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,r=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),I({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${G5.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Ot(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${G5.selected}`]:{color:n,backgroundColor:e.vars?`rgba(${r} / ${e.vars.palette.action.selectedOpacity})`:Ot(n,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${r} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Ot(n,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${r} / ${e.vars.palette.action.selectedOpacity})`:Ot(n,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),z5e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiToggleButton"}),{children:i,className:o,color:a="standard",disabled:s=!1,disableFocusRipple:l=!1,fullWidth:c=!1,onChange:u,onClick:f,selected:d,size:p="medium",value:h}=r,g=We(r,N5e),v=I({},r,{color:a,disabled:s,disableFocusRipple:l,fullWidth:c,size:p}),m=F5e(v),y=_=>{f&&(f(_,h),_.defaultPrevented)||u&&u(_,h)};return G.jsx(j5e,I({className:je(m.root,o),disabled:s,focusRipple:!l,ref:n,onClick:y,onChange:u,value:h,ownerState:v,"aria-pressed":d},g,{children:i}))}),U5e=z5e;function V5e(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}function wte(e){return it("MuiToggleButtonGroup",e)}const H5e=at("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]),Xl=H5e,G5e=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],W5e=e=>{const{classes:t,orientation:n,fullWidth:r,disabled:i}=e,o={root:["root",n==="vertical"&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${De(n)}`,i&&"disabled"]};return ot(o,wte,t)},q5e=Ie("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Xl.grouped}`]:t.grouped},{[`& .${Xl.grouped}`]:t[`grouped${De(n.orientation)}`]},t.root,n.orientation==="vertical"&&t.vertical,n.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>I({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${Xl.grouped}`]:I({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${Xl.selected} + .${Xl.grouped}.${Xl.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${Xl.selected} + .${Xl.grouped}.${Xl.selected}`]:{borderTop:0,marginTop:0}})})),X5e=$.forwardRef(function(t,n){const r=st({props:t,name:"MuiToggleButtonGroup"}),{children:i,className:o,color:a="standard",disabled:s=!1,exclusive:l=!1,fullWidth:c=!1,onChange:u,orientation:f="horizontal",size:d="medium",value:p}=r,h=We(r,G5e),g=I({},r,{disabled:s,fullWidth:c,orientation:f,size:d}),v=W5e(g),m=(_,b)=>{if(!u)return;const x=p&&p.indexOf(b);let w;p&&x>=0?(w=p.slice(),w.splice(x,1)):w=p?p.concat(b):[b],u(_,w)},y=(_,b)=>{u&&u(_,p===b?null:b)};return G.jsx(q5e,I({role:"group",className:je(v.root,o),ref:n,ownerState:g},h,{children:$.Children.map(i,_=>$.isValidElement(_)?$.cloneElement(_,{className:je(v.grouped,_.props.className),onChange:l?y:m,selected:_.props.selected===void 0?V5e(_.props.value,p):_.props.selected,size:_.props.size||d,fullWidth:c,color:_.props.color||a,disabled:_.props.disabled||s}):null)}))}),Y5e=X5e,K5e=["getTrigger","target"];function Z5e(e,t){const{disableHysteresis:n=!1,threshold:r=100,target:i}=t,o=e.current;return i&&(e.current=i.pageYOffset!==void 0?i.pageYOffset:i.scrollTop),!n&&o!==void 0&&e.current<o?!1:e.current>r}const J5e=typeof window<"u"?window:null;function Q5e(e={}){const{getTrigger:t=Z5e,target:n=J5e}=e,r=We(e,K5e),i=$.useRef(),[o,a]=$.useState(()=>t(i,r));return $.useEffect(()=>{const s=()=>{a(t(i,I({target:n},r)))};return s(),n.addEventListener("scroll",s,{passive:!0}),()=>{n.removeEventListener("scroll",s,{passive:!0})}},[n,t,JSON.stringify(r)]),o}/**
 * @mui/material v5.14.13
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const eLe=Object.freeze(Object.defineProperty({__proto__:null,Accordion:Rye,AccordionActions:Fye,AccordionDetails:Wye,AccordionSummary:vbe,Alert:Lbe,AlertTitle:Ybe,AppBar:n1e,Autocomplete:zxe,Avatar:bJ,AvatarGroup:rwe,Backdrop:tB,Badge:bwe,BottomNavigation:Pwe,BottomNavigationAction:kwe,Box:Dwe,Breadcrumbs:Kwe,Button:rB,ButtonBase:yi,ButtonGroup:d2e,Card:b2e,CardActionArea:P2e,CardActions:k2e,CardContent:j2e,CardHeader:Y2e,CardMedia:iSe,Checkbox:wSe,Chip:fJ,CircularProgress:zJ,ClickAwayListener:HZ,Collapse:_M,Container:UJ,CssBaseline:NSe,Dialog:rCe,DialogActions:uCe,DialogContent:yCe,DialogContentText:ACe,DialogTitle:OCe,Divider:DCe,Drawer:oQ,Experimental_CssVarsProvider:bZ,Fab:oB,Fade:eB,FilledInput:aB,FormControl:cQ,FormControlLabel:bAe,FormGroup:pQ,FormHelperText:mQ,FormLabel:yQ,FormLabelRoot:vQ,GlobalStyles:JD,Grid:Ny,Grow:p1,Hidden:wPe,Icon:EPe,IconButton:Eo,ImageList:DPe,ImageListItem:UPe,ImageListItemBar:QPe,Input:OM,InputAdornment:uMe,InputBase:D_,InputLabel:kQ,LinearProgress:$Q,Link:FQ,List:zQ,ListItem:uEe,ListItemAvatar:vEe,ListItemButton:ZMe,ListItemIcon:SEe,ListItemSecondaryAction:WQ,ListItemText:TEe,ListSubheader:cJ,Menu:B_,MenuItem:fa,MenuList:ZQ,MobileStepper:f3e,Modal:TM,ModalManager:tJ,NativeSelect:w3e,NoSsr:nJ,OutlinedInput:uB,Pagination:X3e,PaginationItem:dee,Paper:us,Popover:GC,PopoverPaper:lB,PopoverRoot:QQ,Popper:$_,Portal:ZD,Radio:sTe,RadioGroup:uTe,Rating:MTe,ScopedCssBaseline:LTe,Select:N_,Skeleton:iOe,Slide:tQ,Slider:hOe,SliderMark:Tee,SliderMarkLabel:Oee,SliderRail:Aee,SliderRoot:Cee,SliderThumb:Mee,SliderTrack:Pee,SliderValueLabel:Eee,Snackbar:TOe,SnackbarContent:Ree,SpeedDial:VOe,SpeedDialAction:oIe,SpeedDialIcon:fIe,Stack:uQ,Step:_Ie,StepButton:jIe,StepConnector:Zee,StepContent:tRe,StepContext:c0,StepIcon:Gee,StepLabel:Xee,Stepper:cRe,StepperContext:Oh,StyledEngineProvider:XK,SvgIcon:jC,SwipeableDrawer:_Re,Switch:TRe,THEME_ID:Mc,Tab:$Re,TabScrollButton:vte,Table:VRe,TableBody:JRe,TableCell:YC,TableContainer:uke,TableFooter:yke,TableHead:Pke,TablePagination:Yke,TableRow:t5e,TableSortLabel:c5e,Tabs:T5e,TextField:_te,TextareaAutosize:iJ,ThemeProvider:ND,ToggleButton:U5e,ToggleButtonGroup:Y5e,Toolbar:fte,Tooltip:dB,Typography:jn,Unstable_Grid2:JAe,Unstable_TrapFocus:GZ,Zoom:Lee,accordionActionsClasses:Lye,accordionClasses:Ly,accordionDetailsClasses:zye,accordionSummaryClasses:wp,adaptV4Theme:fZ,alertClasses:A5,alertTitleClasses:Hbe,alpha:Ot,appBarClasses:Zbe,autocompleteClasses:gn,avatarClasses:yJ,avatarGroupClasses:xJ,backdropClasses:lwe,badgeClasses:ru,bottomNavigationActionClasses:nB,bottomNavigationClasses:xwe,breadcrumbsClasses:MJ,buttonBaseClasses:$Z,buttonClasses:Dy,buttonGroupClasses:ji,capitalize:De,cardActionAreaClasses:vS,cardActionsClasses:E2e,cardClasses:h2e,cardContentClasses:$2e,cardHeaderClasses:T5,cardMediaClasses:Z2e,checkboxClasses:yS,chipClasses:In,circularProgressClasses:CSe,collapseClasses:hye,colors:gK,containerClasses:DSe,createChainedFunction:o1,createFilterOptions:oJ,createMuiTheme:dZ,createStyles:hZ,createSvgIcon:fr,createTheme:fd,css:Ml,darkScrollbar:jSe,darken:Tl,debounce:Eh,decomposeColor:El,deprecatedPropType:SK,dialogActionsClasses:oCe,dialogClasses:bS,dialogContentClasses:dCe,dialogContentTextClasses:_Ce,dialogTitleClasses:ZJ,dividerClasses:O5,drawerClasses:UCe,duration:gM,easing:BD,emphasize:sv,experimentalStyled:Ie,experimental_extendTheme:jD,experimental_sx:wZ,fabClasses:I5,filledInputClasses:sa,formControlClasses:oAe,formControlLabelClasses:ag,formGroupClasses:xAe,formHelperTextClasses:R5,formLabelClasses:Pg,generateUtilityClass:it,generateUtilityClasses:at,getAccordionActionsUtilityClass:RZ,getAccordionDetailsUtilityClass:kZ,getAccordionSummaryUtilityClass:DZ,getAccordionUtilityClass:IZ,getAlertTitleUtilityClass:UZ,getAlertUtilityClass:BZ,getAppBarUtilityClass:VZ,getAutocompleteUtilityClass:gJ,getAvatarGroupUtilityClass:_J,getAvatarUtilityClass:vJ,getBackdropUtilityClass:wJ,getBadgeUtilityClass:SJ,getBottomNavigationActionUtilityClass:AJ,getBottomNavigationUtilityClass:CJ,getBreadcrumbsUtilityClass:PJ,getButtonBaseUtilityClass:LZ,getButtonGroupUtilityClass:RJ,getButtonUtilityClass:EJ,getCardActionAreaUtilityClass:LJ,getCardActionsUtilityClass:$J,getCardContentUtilityClass:DJ,getCardHeaderUtilityClass:BJ,getCardMediaUtilityClass:NJ,getCardUtilityClass:kJ,getCheckboxUtilityClass:FJ,getChipUtilityClass:uJ,getCircularProgressUtilityClass:jJ,getCollapseUtilityClass:MZ,getContainerUtilityClass:LSe,getContrastRatio:ID,getDialogActionsUtilityClass:XJ,getDialogContentTextUtilityClass:JJ,getDialogContentUtilityClass:YJ,getDialogTitleUtilityClass:KJ,getDialogUtilityClass:WJ,getDividerUtilityClass:QJ,getDrawerUtilityClass:nQ,getFabUtilityClass:aQ,getFilledInputUtilityClass:mJ,getFormControlLabelUtilityClasses:fQ,getFormControlUtilityClasses:lQ,getFormGroupUtilityClass:dQ,getFormHelperTextUtilityClasses:hQ,getFormLabelUtilityClasses:gQ,getGrid2UtilityClass:QAe,getGridUtilityClass:bQ,getIconButtonUtilityClass:NZ,getIconUtilityClass:CQ,getImageListItemBarUtilityClass:TQ,getImageListItemUtilityClass:EQ,getImageListUtilityClass:PQ,getInitColorSchemeScript:xZ,getInputAdornmentUtilityClass:IQ,getInputBaseUtilityClass:dJ,getInputLabelUtilityClasses:RQ,getInputUtilityClass:pJ,getLinearProgressUtilityClass:LQ,getLinkUtilityClass:DQ,getListItemAvatarUtilityClass:qQ,getListItemButtonUtilityClass:VQ,getListItemIconUtilityClass:XQ,getListItemSecondaryActionClassesUtilityClass:HQ,getListItemTextUtilityClass:YQ,getListItemUtilityClass:UQ,getListSubheaderUtilityClass:sJ,getListUtilityClass:jQ,getLuminance:c1,getMenuItemUtilityClass:tee,getMenuUtilityClass:eee,getMobileStepperUtilityClass:nee,getModalUtilityClass:GJ,getNativeSelectUtilityClasses:cB,getOffsetLeft:F5,getOffsetTop:N5,getOutlinedInputUtilityClass:hJ,getOverlayAlpha:u1,getPaginationItemUtilityClass:uee,getPaginationUtilityClass:lee,getPaperUtilityClass:TZ,getPopoverUtilityClass:JQ,getRadioUtilityClass:gee,getRatingUtilityClass:vee,getScopedCssBaselineUtilityClass:bee,getSelectUtilityClasses:_ee,getSkeletonUtilityClass:wee,getSliderUtilityClass:See,getSnackbarContentUtilityClass:Iee,getSnackbarUtilityClass:kee,getSpeedDialActionUtilityClass:Bee,getSpeedDialIconUtilityClass:Fee,getSpeedDialUtilityClass:$ee,getStepButtonUtilityClass:Yee,getStepConnectorUtilityClass:Kee,getStepContentUtilityClass:Jee,getStepIconUtilityClass:Hee,getStepLabelUtilityClass:Wee,getStepUtilityClass:Vee,getStepperUtilityClass:Qee,getSvgIconUtilityClass:SZ,getSwitchUtilityClass:ete,getTabScrollButtonUtilityClass:mte,getTabUtilityClass:tte,getTableBodyUtilityClass:ite,getTableCellUtilityClass:ote,getTableContainerUtilityClass:ste,getTableFooterUtilityClass:lte,getTableHeadUtilityClass:cte,getTablePaginationUtilityClass:dte,getTableRowUtilityClass:pte,getTableSortLabelUtilityClass:hte,getTableUtilityClass:rte,getTabsUtilityClass:yte,getTextFieldUtilityClass:bte,getToggleButtonGroupUtilityClass:wte,getToggleButtonUtilityClass:xte,getToolbarUtilityClass:ute,getTooltipUtilityClass:Dee,getTouchRippleUtilityClass:Xye,getTypographyUtilityClass:zZ,grid2Classes:iPe,gridClasses:dv,hexToRgb:TD,hslToRgb:OD,iconButtonClasses:FZ,iconClasses:CPe,imageListClasses:OPe,imageListItemBarClasses:HPe,imageListItemClasses:L5,inputAdornmentClasses:$5,inputBaseClasses:aa,inputClasses:du,inputLabelClasses:dMe,isMuiElement:xc,keyframes:cs,lighten:Ol,linearProgressClasses:yMe,linkClasses:BQ,listClasses:FMe,listItemAvatarClasses:dEe,listItemButtonClasses:hp,listItemClasses:pp,listItemIconClasses:B5,listItemSecondaryActionClasses:QMe,listItemTextClasses:h1,listSubheaderClasses:ixe,makeStyles:gZ,menuClasses:jEe,menuItemClasses:Tm,mobileStepperClasses:r3e,modalClasses:USe,nativeSelectClasses:IM,outlinedInputClasses:cl,ownerDocument:er,ownerWindow:so,paginationClasses:k3e,paginationItemClasses:Da,paperClasses:xye,popoverClasses:kEe,private_createTypography:mM,private_excludeVariablesFromRoot:zD,radioClasses:j5,ratingClasses:Om,recomposeColor:a0,requirePropFactory:CK,responsiveFontSizes:mZ,rgbToHex:oZ,scopedCssBaselineClasses:TTe,selectClasses:Im,setRef:iv,shouldSkipGeneratingVar:FD,skeletonClasses:ZTe,sliderClasses:Rs,snackbarClasses:COe,snackbarContentClasses:gOe,speedDialActionClasses:Nee,speedDialClasses:Fy,speedDialIconClasses:Sf,stackClasses:dAe,stepButtonClasses:z5,stepClasses:mIe,stepConnectorClasses:UIe,stepContentClasses:YIe,stepIconClasses:_S,stepLabelClasses:yu,stepperClasses:rRe,styled:Ie,svgIconClasses:eye,switchClasses:Co,tabClasses:Cf,tabScrollButtonClasses:gte,tableBodyClasses:WRe,tableCellClasses:ate,tableClasses:NRe,tableContainerClasses:oke,tableFooterClasses:dke,tableHeadClasses:_ke,tablePaginationClasses:Eg,tableRowClasses:H5,tableSortLabelClasses:xS,tabsClasses:wS,textFieldClasses:I5e,toggleButtonClasses:G5,toggleButtonGroupClasses:Xl,toolbarClasses:Eke,tooltipClasses:vu,touchRippleClasses:za,typographyClasses:Dbe,unstable_ClassNameGenerator:AZ,unstable_composeClasses:ot,unstable_createMuiStrictModeTheme:pZ,unstable_getUnit:vM,unstable_toUnitless:ic,unstable_useEnhancedEffect:vi,unstable_useId:zs,unsupportedProp:AK,useAutocomplete:aJ,useColorScheme:_Z,useControlled:Wo,useEventCallback:Ar,useForkRef:En,useFormControl:Xs,useIsFocusVisible:Th,useMediaQuery:SQ,usePagination:cee,useRadioGroup:mee,useScrollTrigger:Q5e,useStepContext:pIe,useStepperContext:dIe,useTheme:ir,useThemeProps:st,withStyles:vZ,withTheme:yZ},Symbol.toStringTag,{value:"Module"}));var KC={},pB={};const tLe=os(gK),nLe=os(J0e);var rLe=function(t){return iLe(t)&&!oLe(t)};function iLe(e){return!!e&&typeof e=="object"}function oLe(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||lLe(e)}var aLe=typeof Symbol=="function"&&Symbol.for,sLe=aLe?Symbol.for("react.element"):60103;function lLe(e){return e.$$typeof===sLe}function cLe(e){return Array.isArray(e)?[]:{}}function m1(e,t){return t.clone!==!1&&t.isMergeableObject(e)?pv(cLe(e),e,t):e}function uLe(e,t,n){return e.concat(t).map(function(r){return m1(r,n)})}function fLe(e,t){if(!t.customMerge)return pv;var n=t.customMerge(e);return typeof n=="function"?n:pv}function dLe(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function j8(e){return Object.keys(e).concat(dLe(e))}function Ste(e,t){try{return t in e}catch{return!1}}function pLe(e,t){return Ste(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function hLe(e,t,n){var r={};return n.isMergeableObject(e)&&j8(e).forEach(function(i){r[i]=m1(e[i],n)}),j8(t).forEach(function(i){pLe(e,i)||(Ste(e,i)&&n.isMergeableObject(t[i])?r[i]=fLe(i,n)(e[i],t[i],n):r[i]=m1(t[i],n))}),r}function pv(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||uLe,n.isMergeableObject=n.isMergeableObject||rLe,n.cloneUnlessOtherwiseSpecified=m1;var r=Array.isArray(t),i=Array.isArray(e),o=r===i;return o?r?n.arrayMerge(e,t,n):hLe(e,t,n):m1(t,n)}pv.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,i){return pv(r,i,n)},{})};var mLe=pv,gLe=mLe;(function(e){var t=Ce&&Ce.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.createJBrowseTheme=e.createJBrowseBaseTheme=e.defaultThemes=void 0;const n=tLe,r=nLe,i=t(gLe),o="#0D233F",a="#721E63",s="#135560",l="#FFB11D",c=(0,r.createTheme)();function u(){return{palette:{mode:void 0,primary:{main:o},secondary:{main:a},tertiary:c.palette.augmentColor({color:{main:s}}),quaternary:c.palette.augmentColor({color:{main:l}}),stopCodon:"#e22",startCodon:"#3e3",bases:{A:c.palette.augmentColor({color:n.green}),C:c.palette.augmentColor({color:n.blue}),G:c.palette.augmentColor({color:n.orange}),T:c.palette.augmentColor({color:n.red})}},components:{MuiLink:{styleOverrides:{root:({theme:x})=>({color:x.palette.tertiary.main})}}}}}function f(){return{name:"Default (from config)",...u()}}function d(){return{name:"Light (stock)",...u()}}function p(){return{name:"Dark (stock)",palette:{mode:"dark",primary:{main:o},secondary:{main:a},tertiary:c.palette.augmentColor({color:{main:s}}),quaternary:c.palette.augmentColor({color:{main:l}}),stopCodon:"#e22",startCodon:"#3e3",bases:{A:c.palette.augmentColor({color:n.green}),C:c.palette.augmentColor({color:n.blue}),G:c.palette.augmentColor({color:n.orange}),T:c.palette.augmentColor({color:n.red})}},components:{MuiAppBar:{defaultProps:{enableColorOnDark:!0},styleOverrides:{primary:x=>x.theme.palette.primary.main}}}}}function h(){return{name:"Dark (minimal)",palette:{mode:"dark",primary:{main:n.grey[700]},secondary:{main:n.grey[800]},tertiary:c.palette.augmentColor({color:{main:n.grey[900]}}),quaternary:c.palette.augmentColor({color:{main:l}}),stopCodon:"#e22",startCodon:"#3e3",bases:{A:c.palette.augmentColor({color:n.green}),C:c.palette.augmentColor({color:n.blue}),G:c.palette.augmentColor({color:n.orange}),T:c.palette.augmentColor({color:n.red})}}}}function g(){return{name:"Light (minimal)",palette:{primary:{main:n.grey[900]},secondary:{main:n.grey[800]},tertiary:c.palette.augmentColor({color:{main:n.grey[900]}}),quaternary:c.palette.augmentColor({color:{main:l}}),stopCodon:"#e22",startCodon:"#3e3",bases:{A:c.palette.augmentColor({color:n.green}),C:c.palette.augmentColor({color:n.blue}),G:c.palette.augmentColor({color:n.orange}),T:c.palette.augmentColor({color:n.red})}}}}e.defaultThemes={default:f(),lightStock:d(),lightMinimal:g(),darkMinimal:h(),darkStock:p()};function v(x){var w,S,A,C,k,O;return{components:{MuiButton:{defaultProps:{size:"small"},styleOverrides:{root:T=>{const{theme:B}=T;return B.palette.mode==="dark"?{color:B.palette.text.primary}:void 0}}},MuiAccordion:{defaultProps:{disableGutters:!0,TransitionProps:{timeout:150}}},MuiFilledInput:{defaultProps:{margin:"dense"}},MuiFormControl:{defaultProps:{margin:"dense",size:"small"}},MuiFormHelperText:{defaultProps:{margin:"dense"}},MuiIconButton:{defaultProps:{size:"small"}},MuiInputBase:{defaultProps:{margin:"dense"}},MuiAutocomplete:{defaultProps:{size:"small"}},MuiInputLabel:{defaultProps:{margin:"dense"}},MuiToolbar:{defaultProps:{variant:"dense"}},MuiListItem:{defaultProps:{dense:!0}},MuiOutlinedInput:{defaultProps:{margin:"dense"}},MuiFab:{defaultProps:{size:"small"},styleOverrides:{secondary:{backgroundColor:(S=(w=x==null?void 0:x.palette)===null||w===void 0?void 0:w.quaternary)===null||S===void 0?void 0:S.main}}},MuiTable:{defaultProps:{size:"small"}},MuiPopover:{defaultProps:{transitionDuration:0}},MuiMenu:{defaultProps:{transitionDuration:0}},MuiMenuItem:{defaultProps:{dense:!0}},MuiTextField:{defaultProps:{margin:"dense",variant:"standard"}},MuiLink:{styleOverrides:{root:({theme:T})=>({color:T.palette.text.secondary})}},MuiCheckbox:{styleOverrides:{root:({theme:T})=>T.palette.mode==="dark"?{color:T.palette.text.secondary,"&.Mui-checked":{color:T.palette.text.secondary}}:void 0}},MuiRadio:{styleOverrides:{root:({theme:T})=>T.palette.mode==="dark"?{color:T.palette.text.secondary,"&.Mui-checked":{color:T.palette.text.secondary}}:void 0}},MuiFormLabel:{styleOverrides:{root:({theme:T})=>T.palette.mode==="dark"?{color:T.palette.text.secondary,"&.Mui-focused":{color:T.palette.text.secondary}}:void 0}},MuiAccordionSummary:{styleOverrides:{root:{backgroundColor:(C=(A=x==null?void 0:x.palette)===null||A===void 0?void 0:A.tertiary)===null||C===void 0?void 0:C.main},content:{color:(O=(k=x==null?void 0:x.palette)===null||k===void 0?void 0:k.tertiary)===null||O===void 0?void 0:O.contrastText}}},MuiToggleButtonGroup:{defaultProps:{size:"small"}}}}}function m(x){return(0,i.default)({palette:x==null?void 0:x.palette,typography:{fontSize:12},spacing:4,...v(x)},x||{})}e.createJBrowseBaseTheme=m;function y(x={},w=e.defaultThemes,S="default"){return(0,r.createTheme)(m(S==="default"?(0,i.default)(w.default,_(x)):b(w[S])||w.default))}e.createJBrowseTheme=y;function _(x={}){var w,S;return!((w=x==null?void 0:x.palette)===null||w===void 0)&&w.tertiary&&(x=(0,i.default)(x,{palette:{tertiary:c.palette.augmentColor("color"in x.palette.tertiary?x.palette.tertiary:{color:x.palette.tertiary})}})),!((S=x==null?void 0:x.palette)===null||S===void 0)&&S.quaternary&&(x=(0,i.default)(x,{palette:{quaternary:c.palette.augmentColor("color"in x.palette.quaternary?x.palette.quaternary:{color:x.palette.quaternary})}})),x}function b(x={}){var w,S;return x=_(x),!((w=x==null?void 0:x.palette)===null||w===void 0)&&w.quaternary||(x=(0,i.default)(x,{palette:{quaternary:c.palette.augmentColor({color:{main:"#aaa"}})}})),!((S=x==null?void 0:x.palette)===null||S===void 0)&&S.tertiary||(x=(0,i.default)(x,{palette:{tertiary:c.palette.augmentColor({color:{main:"#aaa"}})}})),x}})(pB);var hv={},vLe=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hv,"__esModule",{value:!0});hv.LogoFull=hv.Logomark=void 0;const ci=vLe($);function Cte(e){return e==="black"?{midnight:"#808080",forrest:"#666666",grape:"#4d4d4d",mandarin:"#333333",gray:"#1a1a1a"}:e==="white"?{midnight:"#ffffff",forrest:"#e6e6e6",grape:"#cccccc",mandarin:"#b3b3b3",gray:"#999999"}:{midnight:"#0d233f",forrest:"#135560",grape:"#721e63",mandarin:"#ffb11d",gray:"#dadada"}}function yLe({variant:e}){return ci.default.createElement("svg",{viewBox:"0 0 175 175"},ci.default.createElement(Ate,{variant:e}))}hv.Logomark=yLe;function bLe({variant:e}){return ci.default.createElement("svg",{viewBox:"0 0 641 175"},ci.default.createElement(_Le,{variant:e}),ci.default.createElement(Ate,{variant:e}))}hv.LogoFull=bLe;function Ate({variant:e}){const t=Cte(e);return ci.default.createElement(ci.default.Fragment,null,ci.default.createElement("path",{style:{fill:t.midnight},d:"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z"}),ci.default.createElement("path",{style:{fill:t.forrest},d:"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z"}),ci.default.createElement("path",{style:{fill:t.grape},d:"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z"}),ci.default.createElement("path",{style:{fill:t.mandarin},d:"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z"}),ci.default.createElement("path",{style:{fill:t.gray},d:"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z"}))}function _Le({variant:e}){const t=Cte(e);return ci.default.createElement("g",{"aria-label":"JBrowse",transform:"translate(213.084 144.241)",style:{fill:t.midnight}},ci.default.createElement("path",{d:"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z"}),ci.default.createElement("path",{d:"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z"}),ci.default.createElement("path",{d:"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z"}),ci.default.createElement("path",{d:"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z"}),ci.default.createElement("path",{d:"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z"}),ci.default.createElement("path",{d:"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z"}),ci.default.createElement("path",{d:"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z"}))}var hB={};const Ta=os(eLe),Id=os(Gfe),Pte=Object.fromEntries?Object.fromEntries:e=>{if(!e||!e[Symbol.iterator])throw new Error("Object.fromEntries() requires a single iterable argument");const t={};return Object.keys(e).forEach(n=>{const[r,i]=e[n];t[r]=i}),t};function mv(e){return Object.keys(e)}function mB(e,t){if(!e)throw new Error(t)}function gB(e,t){return t}const vB=e=>{const t=e.length;let n=0,r="";for(;n<t;n++){const i=e[n];if(i==null)continue;let o;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))o=vB(i);else{mB(!gB(i,!1)),o="";for(const a in i)i[a]&&a&&(o&&(o+=" "),o+=a)}break}default:o=i}o&&(r&&(r+=" "),r+=o)}return r};function xLe(e,t){const n=$.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}function wLe(e){return e instanceof Object&&!("styles"in e)&&!("length"in e)&&!("__emotion_styles"in e)}const{createCssAndCx:SLe}=(()=>{function e(n,r,i){const o=[],a=UK(n,o,i);return o.length<2?i:a+r(o)}function t(n){const{cache:r}=n,i=(...a)=>{const s=sM(a,r.registered);bD(r,s,!1);const l=`${r.key}-${s.name}`;e:{const c=a[0];if(!wLe(c))break e;z8.saveClassNameCSSObjectMapping(r,l,c)}return l};return{css:i,cx:(...a)=>{const s=vB(a),l=z8.fixClassName(r,s,i);return e(r.registered,i,l)}}}return{createCssAndCx:t}})();function Mte(e){const{useCache:t}=e;function n(){const r=t(),{css:i,cx:o}=xLe(()=>SLe({cache:r}),[r]);return{css:i,cx:o}}return{useCssAndCx:n}}const z8=(()=>{const e=new WeakMap;return{saveClassNameCSSObjectMapping:(t,n,r)=>{let i=e.get(t);i===void 0&&(i=new Map,e.set(t,i)),i.set(n,r)},fixClassName:(()=>{function t(n){let r=!1;return n.map(([i,o])=>{if(o===void 0)return i;let a;if(r)a={"&&":o};else{a=i;for(const s in o)if(s.startsWith("@media")){r=!0;break}}return a})}return(n,r,i)=>{const o=e.get(n);return vB(t(r.split(" ").map(a=>[a,o==null?void 0:o.get(a)])).map(a=>typeof a=="string"?a:i(a)))}})()}})();function gv(e){if(!(e instanceof Object)||typeof e=="function")return e;const t=[];for(const n in e){const r=e[n],i=typeof r;if(!(i==="string"||i==="number"&&!isNaN(r)||i==="boolean"||r===void 0||r===null))return e;t.push(`${n}:${i}_${r}`)}return"xSqLiJdLMd9s"+t.join("|")}function yB(e,t,n){if(!(t instanceof Object))return e;const r={};return mv(e).forEach(i=>r[i]=n(e[i],t[i])),mv(t).forEach(i=>{if(i in e)return;const o=t[i];typeof o=="string"&&(r[i]=o)}),r}const bB=({classes:e,theme:t,muiStyleOverridesParams:n,css:r,cx:i,name:o})=>{var a,s;e:{if(o==="makeStyle no name"){o=void 0;break e}if(n!==void 0&&o===void 0)throw new Error("To use muiStyleOverridesParams, you must specify a name using .withName('MyComponent')")}let l;try{l=o===void 0?void 0:((s=(a=t.components)===null||a===void 0?void 0:a[o])===null||s===void 0?void 0:s.styleOverrides)||void 0}catch{}const c=$.useMemo(()=>{if(l===void 0)return;const u={};for(const f in l){const d=l[f];d instanceof Object&&(u[f]=r(typeof d=="function"?d(Object.assign({theme:t,ownerState:n==null?void 0:n.ownerState},n==null?void 0:n.props)):d))}return u},[l,gv(n==null?void 0:n.props),gv(n==null?void 0:n.ownerState),r]);return e=$.useMemo(()=>yB(e,c,i),[e,c,i]),{classes:e}};let CLe=0;function _B(e){const{useTheme:t,cache:n}=e,{useCache:r}=Tte({cacheProvidedAtInception:n}),{useCssAndCx:i}=Mte({useCache:r});function o(s){const{name:l,uniqId:c=`${CLe++}`}=s??{},u=typeof l!="object"?l:Object.keys(l)[0];return function(f){const d=typeof f=="function"?f:()=>f;return function(h,g){const v=t();let{css:m,cx:y}=i();const _=r();let b=$.useMemo(()=>{const x={},w=typeof Proxy<"u"&&new Proxy({},{get:(C,k)=>(typeof k=="symbol"&&mB(!1),x[k]=`${_.key}-${c}${u!==void 0?`-${u}`:""}-${k}-ref`)}),S=d(v,h,w||{}),A=Pte(mv(S).map(C=>{const k=S[C];return k.label||(k.label=`${u!==void 0?`${u}-`:""}${C}`),[C,`${m(k)}${gB(C,C in x)?` ${x[C]}`:""}`]}));return mv(x).forEach(C=>{C in A||(A[C]=x[C])}),A},[_,m,y,v,gv(h)]);{const x=g==null?void 0:g.props.classes;b=$.useMemo(()=>yB(b,x,y),[b,gv(x),y])}{const x=bB({classes:b,css:m,cx:y,name:u??"makeStyle no name",idOfUseStyles:c,muiStyleOverridesParams:g,theme:v});x.classes!==void 0&&(b=x.classes),x.css!==void 0&&(m=x.css),x.cx!==void 0&&(y=x.cx)}return{classes:b,theme:v,css:m,cx:y}}}}function a(){const s=t(),{css:l,cx:c}=i();return{theme:s,css:l,cx:c}}return{makeStyles:o,useStyles:a}}const Ete=$.createContext(void 0);function ALe(e){const{children:t,value:n}=e;return Be.createElement(Ete.Provider,{value:n},t)}const{createUseCache:Tte}=(()=>{function e(){return $.useContext(Ete)}function t(n){const{cacheProvidedAtInception:r}=n;function i(){var o;const a=tge(),s=e(),l=(o=r??s)!==null&&o!==void 0?o:a;if(l===null)throw new Error(["In order to get SSR working with tss-react you need to explicitly provide an Emotion cache.","MUI users be aware: This is not an error strictly related to tss-react, with or without tss-react,","MUI needs an Emotion cache to be provided for SSR to work.","Here is the MUI documentation related to SSR setup: https://mui.com/material-ui/guides/server-rendering/","TSS provides helper that makes the process of setting up SSR easier: https://docs.tss-react.dev/ssr"].join(`
`));return l}return{useCache:i}}return{createUseCache:t}})();function U8(e){return e.charAt(0).toUpperCase()+e.slice(1)}var V8=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Ote(e){const{useTheme:t,cache:n}=e,{makeStyles:r}=_B({useTheme:t,cache:n});function i(o,a,s){const l=typeof o=="string"?(()=>{const p=o,h=function(g){var{children:v}=g,m=V8(g,["children"]);return $.createElement(p,m,v)};return Object.defineProperty(h,"name",{value:U8(p)}),h})():o,c=(()=>{{const{name:p}=s??{};if(p!==void 0)return typeof p!="object"?p:Object.keys(p)[0]}{const p=l.displayName;if(typeof p=="string"&&p!=="")return p}{const{name:p}=l;if(p)return p}})(),u=r(Object.assign(Object.assign({},s),{name:c}))(typeof a=="function"?(p,h,g)=>G8(a(p,h,g)):G8(a));function f(p){for(const h in p)if(h!=="root")return!0;return!1}const d=$.forwardRef(function(p,h){const{className:g,classes:v}=p,m=V8(p,["className","classes"]),{classes:y,cx:_}=u(p,{props:p}),b=_(y.root,g);return Ite.set(y,Object.assign(Object.assign({},y),{root:b})),Be.createElement(l,Object.assign({ref:h,className:f(y)?g:b},typeof o=="string"?{}:{classes:y},m))});return c!==void 0&&(d.displayName=`${U8(c)}WithStyles`,Object.defineProperty(d,"name",{value:d.displayName})),d}return i.getClasses=PLe,{withStyles:i}}const Ite=new WeakMap,H8="getClasses should only be used in conjunction with withStyles";function PLe(e){const t=e.classes;if(t===void 0)throw new Error(H8);const n=Ite.get(t);if(n===void 0)throw new Error(H8);return n}function G8(e){const t={},n={};return Object.keys(e).forEach(r=>(r.startsWith("@media")?n:t)[r]=e[r]),Object.keys(n).forEach(r=>{const i=n[r];Object.keys(i).forEach(o=>{var a;return t[o]=Object.assign(Object.assign({},(a=t[o])!==null&&a!==void 0?a:{}),{[r]:i[o]})})}),t}const MLe=(()=>!(typeof document=="object"&&typeof(document==null?void 0:document.getElementById)=="function")&&!(typeof jest<"u")&&!(typeof mocha<"u")&&!(typeof __vitest_worker__<"u"))();var ELe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function xB(e){const{useContext:t,usePlugin:n,cache:r}=e,{useCache:i}=Tte({cacheProvidedAtInception:r}),{useCssAndCx:o}=Mte({useCache:i});return{tss:SS({useContext:t,useCache:i,useCssAndCx:o,usePlugin:n??(({classes:l,cx:c,css:u})=>({classes:l,cx:c,css:u})),name:void 0,doesUseNestedSelectors:!1})}}let TLe=0;const AO=[];function SS(e){const{useContext:t,useCache:n,useCssAndCx:r,usePlugin:i,name:o,doesUseNestedSelectors:a}=e;return{withParams:()=>SS(Object.assign({},e)),withName:s=>SS(Object.assign(Object.assign({},e),{name:typeof s!="object"?s:Object.keys(s)[0]})),withNestedSelectors:()=>SS(Object.assign(Object.assign({},e),{doesUseNestedSelectors:!0})),create:s=>{const l=`x${TLe++}`,c=typeof s=="function"?s:()=>s;return function(f){var d,p,h;const g=f??{},{classesOverrides:v}=g,m=ELe(g,["classesOverrides"]),y=t(),{css:_,cx:b}=r(),x=n();let w=$.useMemo(()=>{const A={},C=c(Object.assign(Object.assign(Object.assign({},f),y),a?{classes:typeof Proxy>"u"?{}:new Proxy({},{get:(O,T)=>{if(typeof T=="symbol"&&mB(!1),MLe){{let B=AO.find(R=>R.name===o&&R.idOfUseStyles===l);B===void 0&&(B={name:o,idOfUseStyles:l,nestedSelectorRuleNames:new Set},AO.push(B)),B.nestedSelectorRuleNames.add(T)}if(AO.find(B=>B.name===o&&B.idOfUseStyles!==l&&B.nestedSelectorRuleNames.has(T))!==void 0)throw new Error([`tss-react: Duplicate nested selector "${T}" detected in ${o===void 0?`useStyles named "${o}"`:"anonymous useStyles function"}.`,"In SSR setups, this may lead to CSS class name collisions, causing nested selectors to target elements outside of the intended scope.",'Solution: Ensure each useStyles using nested selectors has a unique name. Use tss.withName("UniqueName").withNestedSelectors<...>()... to set a name.'].join(`
`))}return A[T]=`${x.key}-${l}${o!==void 0?`-${o}`:""}-${T}-ref`}})}:{})),k=Pte(mv(C).map(O=>{const T=C[O];return T.label||(T.label=`${o!==void 0?`${o}-`:""}${O}`),[O,`${_(T)}${gB(O,O in A)?` ${A[O]}`:""}`]}));return mv(A).forEach(O=>{O in k||(k[O]=A[O])}),k},[x,_,b,gv(f),...Object.values(y)]);w=$.useMemo(()=>yB(w,v,b),[w,gv(v),b]);const S=i(Object.assign(Object.assign({classes:w,css:_,cx:b,idOfUseStyles:l,name:o},y),m));return Object.assign({classes:(d=S.classes)!==null&&d!==void 0?d:w,css:(p=S.css)!==null&&p!==void 0?p:_,cx:(h=S.cx)!==null&&h!==void 0?h:b},y)}}}}function OLe(e){const{styles:t}=e;return Be.createElement(qK,{styles:Ml(t)})}function Rte(e){return Object.assign(Object.assign({},_B(e)),Ote(e))}const{tss:kte}=xB({useContext:()=>({})}),ILe=kte.create({}),RLe=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:OLe,TssCacheProvider:ALe,createMakeAndWithStyles:Rte,createMakeStyles:_B,createTss:xB,createWithStyles:Ote,keyframes:cs,tss:kte,useStyles:ILe},Symbol.toStringTag,{value:"Module"})),{makeStyles:j_,withStyles:kLe}=Rte({useTheme:ir}),{tss:Lte}=xB({useContext:function(){return{theme:ir()}},usePlugin:bB}),LLe=Lte.create({}),$Le=Object.freeze(Object.defineProperty({__proto__:null,makeStyles:j_,tss:Lte,useMuiThemeStyleOverridesPlugin:bB,useStyles:LLe,withStyles:kLe},Symbol.toStringTag,{value:"Module"})),Rd=os($Le);var RM={},vv={};const Xu=os(ohe);var Jf={},$te={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.nanoid=e.customAlphabet=e.customRandom=e.random=e.urlAlphabet=void 0,e.urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let t=o=>crypto.getRandomValues(new Uint8Array(o));e.random=t;let n=(o,a,s)=>{let l=(2<<Math.log(o.length-1)/Math.LN2)-1,c=-~(1.6*l*a/o.length);return(u=a)=>{let f="";for(;;){let d=s(c),p=c;for(;p--;)if(f+=o[d[p]&l]||"",f.length===u)return f}}};e.customRandom=n;let r=(o,a=21)=>(0,e.customRandom)(o,a,e.random);e.customAlphabet=r;let i=(o=21)=>crypto.getRandomValues(new Uint8Array(o)).reduce((a,s)=>(s&=63,s<36?a+=s.toString(36):s<62?a+=(s-26).toString(36).toUpperCase():s>62?a+="-":a+="_",a),"");e.nanoid=i})($te);(function(e){var t=Ce&&Ce.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.FileLocation=e.UriLocation=e.UriLocationRaw=e.BlobLocation=e.LocalPathLocation=e.Region=e.NoAssemblyRegion=e.PropTypes=e.ElementId=void 0;const n=Xu,r=t(xK),i=Id,o=$te;e.ElementId=n.types.optional(n.types.identifier,()=>(0,o.nanoid)()),e.PropTypes={Region:r.default.shape({refName:r.default.string.isRequired,start:r.default.number.isRequired,end:r.default.number.isRequired}),ConfigSchema:i.PropTypes.objectOrObservableObject,Feature:r.default.shape({get:r.default.func.isRequired,id:r.default.func.isRequired})},e.NoAssemblyRegion=n.types.model("NoAssemblyRegion",{refName:n.types.string,start:n.types.number,end:n.types.number,reversed:n.types.optional(n.types.boolean,!1)}).actions(a=>({setRefName(s){a.refName=s}})),e.Region=n.types.compose("Region",e.NoAssemblyRegion,n.types.model({assemblyName:n.types.string})),e.LocalPathLocation=n.types.model("LocalPathLocation",{locationType:n.types.literal("LocalPathLocation"),localPath:n.types.string}),e.BlobLocation=n.types.model("BlobLocation",{locationType:n.types.literal("BlobLocation"),name:n.types.string,blobId:n.types.string}),e.UriLocationRaw=n.types.model("UriLocation",{locationType:n.types.literal("UriLocation"),uri:n.types.string,baseUri:n.types.maybe(n.types.string),internetAccountId:n.types.maybe(n.types.string),internetAccountPreAuthorization:n.types.maybe(n.types.model("InternetAccountPreAuthorization",{internetAccountType:n.types.string,authInfo:n.types.frozen()}))}),e.UriLocation=n.types.snapshotProcessor(e.UriLocationRaw,{postProcessor:a=>{const{baseUri:s,...l}=a;return s?a:l}}),e.FileLocation=n.types.snapshotProcessor(n.types.union(e.LocalPathLocation,e.UriLocation,e.BlobLocation),{preProcessor(a){if(!a)return;const{locationType:s,...l}=a;if(!s){const{uri:c,localPath:u,blob:f}=l;let d="";return c!==void 0?d="UriLocation":u!==void 0?d="LocalPathLocation":f!==void 0&&(d="BlobLocation"),{...l,locationType:d}}return a}})})(Jf);var wB={},kM={},SB={},CB={exports:{}},Dte={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Dte);var Er=Dte.exports,PO={exports:{}},MO={exports:{}},Bte={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(Bte);var LM=Bte.exports,EO={exports:{}},W8;function DLe(){return W8||(W8=1,function(e){var t=LM.default;function n(r,i){if(t(r)!=="object"||r===null)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var a=o.call(r,i||"default");if(t(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(EO)),EO.exports}var q8;function Nte(){return q8||(q8=1,function(e){var t=LM.default,n=DLe();function r(i){var o=n(i,"string");return t(o)==="symbol"?o:String(o)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(MO)),MO.exports}var X8;function AB(){return X8||(X8=1,function(e){var t=Nte();function n(r,i,o){return i=t(i),i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(PO)),PO.exports}var TO={exports:{}},Y8;function u0(){return Y8||(Y8=1,function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(TO)),TO.exports}var OO={exports:{}},K8;function f0(){return K8||(K8=1,function(e){var t=Nte();function n(i,o){for(var a=0;a<o.length;a++){var s=o[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,t(s.key),s)}}function r(i,o,a){return o&&n(i.prototype,o),a&&n(i,a),Object.defineProperty(i,"prototype",{writable:!1}),i}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(OO)),OO.exports}var el={},IO={exports:{}},RO={exports:{}},kO={exports:{}},Z8;function Fte(){return Z8||(Z8=1,function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=n[i];return o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(kO)),kO.exports}var J8;function BLe(){return J8||(J8=1,function(e){var t=Fte();function n(r){if(Array.isArray(r))return t(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(RO)),RO.exports}var LO={exports:{}},Q8;function NLe(){return Q8||(Q8=1,function(e){function t(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(LO)),LO.exports}var $O={exports:{}},ez;function jte(){return ez||(ez=1,function(e){var t=Fte();function n(r,i){if(r){if(typeof r=="string")return t(r,i);var o=Object.prototype.toString.call(r).slice(8,-1);if(o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set")return Array.from(r);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(r,i)}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}($O)),$O.exports}var DO={exports:{}},tz;function FLe(){return tz||(tz=1,function(e){function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(DO)),DO.exports}var nz;function jLe(){return nz||(nz=1,function(e){var t=BLe(),n=NLe(),r=jte(),i=FLe();function o(a){return t(a)||n(a)||r(a)||i()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(IO)),IO.exports}var rz;function zLe(){if(rz)return el;rz=1;var e=Er,t=e(jLe()),n={functions:"Jexl Function",transforms:"Transform"};return el.ArrayLiteral=function(r){return this.evalArray(r.value)},el.BinaryExpression=function(r){var i=this,o=this._grammar.elements[r.operator];if(o.evalOnDemand){var a=function(l){return{eval:function(){return i.eval(l)}}};return o.evalOnDemand(a(r.left),a(r.right))}return this.Promise.all([this.eval(r.left),this.eval(r.right)]).then(function(s){return o.eval(s[0],s[1])})},el.ConditionalExpression=function(r){var i=this;return this.eval(r.test).then(function(o){return o?r.consequent?i.eval(r.consequent):o:i.eval(r.alternate)})},el.FilterExpression=function(r){var i=this;return this.eval(r.subject).then(function(o){return r.relative?i._filterRelative(o,r.expr):i._filterStatic(o,r.expr)})},el.Identifier=function(r){return r.from?this.eval(r.from).then(function(i){if(i!=null)return Array.isArray(i)&&(i=i[0]),i[r.value]}):r.relative?this._relContext[r.value]:this._context[r.value]},el.Literal=function(r){return r.value},el.ObjectLiteral=function(r){return this.evalMap(r.value)},el.FunctionCall=function(r){var i=n[r.pool];if(!i)throw new Error("Corrupt AST: Pool '".concat(r.pool,"' not found"));var o=this._grammar[r.pool],a=o[r.name];if(!a)throw new Error("".concat(i," ").concat(r.name," is not defined."));return this.evalArray(r.args||[]).then(function(s){return a.apply(void 0,(0,t.default)(s))})},el.UnaryExpression=function(r){var i=this;return this.eval(r.right).then(function(o){return i._grammar.elements[r.operator].eval(o)})},el}var BO,iz;function ULe(){if(iz)return BO;iz=1;var e=Er,t=e(u0()),n=e(f0()),r=zLe(),i=function(){function o(a,s,l){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Promise;(0,t.default)(this,o),this._grammar=a,this._context=s||{},this._relContext=l||this._context,this.Promise=c}return(0,n.default)(o,[{key:"eval",value:function(s){var l=this;return this.Promise.resolve().then(function(){return r[s.type].call(l,s)})}},{key:"evalArray",value:function(s){var l=this;return this.Promise.all(s.map(function(c){return l.eval(c)}))}},{key:"evalMap",value:function(s){var l=this,c=Object.keys(s),u={},f=c.map(function(d){return l.eval(s[d])});return this.Promise.all(f).then(function(d){return d.forEach(function(p,h){u[c[h]]=p}),u})}},{key:"_filterRelative",value:function(s,l){var c=this,u=[];return Array.isArray(s)||(s=s===void 0?[]:[s]),s.forEach(function(f){var d=new o(c._grammar,c._context,f,c.Promise);u.push(d.eval(l))}),this.Promise.all(u).then(function(f){var d=[];return f.forEach(function(p,h){p&&d.push(s[h])}),d})}},{key:"_filterStatic",value:function(s,l){return this.eval(l).then(function(c){return typeof c=="boolean"?c?s:void 0:s[c]})}}]),o}();return BO=i,BO}var NO,oz;function VLe(){if(oz)return NO;oz=1;var e=Er,t=e(u0()),n=e(f0()),r=/^-?(?:(?:[0-9]*\.[0-9]+)|[0-9]+)$/,i=/^[a-zA-Z--_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$][a-zA-Z--0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$]*$/,o=/\\\\/,a=/^\s*$/,s=["'(?:(?:\\\\')|[^'])*'",'"(?:(?:\\\\")|[^"])*"',"\\s+","\\btrue\\b","\\bfalse\\b"],l=["[a-zA-Z--_---\\$][a-zA-Z0-9--_---\\$]*","(?:(?:[0-9]*\\.[0-9]+)|[0-9]+)"],c=["binaryOp","unaryOp","openParen","openBracket","question","colon"],u=function(){function f(d){(0,t.default)(this,f),this._grammar=d}return(0,n.default)(f,[{key:"getElements",value:function(p){var h=this._getSplitRegex();return p.split(h).filter(function(g){return g})}},{key:"getTokens",value:function(p){for(var h=[],g=!1,v=0;v<p.length;v++)this._isWhitespace(p[v])?h.length&&(h[h.length-1].raw+=p[v]):p[v]==="-"&&this._isNegative(h)?g=!0:(g&&(p[v]="-"+p[v],g=!1),h.push(this._createToken(p[v])));return g&&h.push(this._createToken("-")),h}},{key:"tokenize",value:function(p){var h=this.getElements(p);return this.getTokens(h)}},{key:"_createToken",value:function(p){var h={type:"literal",value:p,raw:p};if(p[0]==='"'||p[0]==="'")h.value=this._unquote(p);else if(p.match(r))h.value=parseFloat(p);else if(p==="true"||p==="false")h.value=p==="true";else if(this._grammar.elements[p])h.type=this._grammar.elements[p].type;else if(p.match(i))h.type="identifier";else throw new Error("Invalid expression token: ".concat(p));return h}},{key:"_escapeRegExp",value:function(p){return p=p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),p.match(i)&&(p="\\b"+p+"\\b"),p}},{key:"_getSplitRegex",value:function(){var p=this;if(!this._splitRegex){var h=Object.keys(this._grammar.elements).sort(function(g,v){return v.length-g.length}).map(function(g){return p._escapeRegExp(g)},this);this._splitRegex=new RegExp("("+[s.join("|"),h.join("|"),l.join("|")].join("|")+")")}return this._splitRegex}},{key:"_isNegative",value:function(p){return p.length?c.some(function(h){return h===p[p.length-1].type}):!0}},{key:"_isWhitespace",value:function(p){return!!p.match(a)}},{key:"_unquote",value:function(p){var h=p[0],g=new RegExp("\\\\"+h,"g");return p.substr(1,p.length-2).replace(g,h).replace(o,"\\")}}]),f}();return NO=u,NO}var si={},az;function zte(){return az||(az=1,si.argVal=function(e){e&&this._cursor.args.push(e)},si.arrayStart=function(){this._placeAtCursor({type:"ArrayLiteral",value:[]})},si.arrayVal=function(e){e&&this._cursor.value.push(e)},si.binaryOp=function(e){for(var t=this._grammar.elements[e.value].precedence||0,n=this._cursor._parent;n&&n.operator&&this._grammar.elements[n.operator].precedence>=t;)this._cursor=n,n=n._parent;var r={type:"BinaryExpression",operator:e.value,left:this._cursor};this._setParent(this._cursor,r),this._cursor=n,this._placeAtCursor(r)},si.dot=function(){this._nextIdentEncapsulate=this._cursor&&this._cursor.type!=="UnaryExpression"&&(this._cursor.type!=="BinaryExpression"||this._cursor.type==="BinaryExpression"&&this._cursor.right),this._nextIdentRelative=!this._cursor||this._cursor&&!this._nextIdentEncapsulate,this._nextIdentRelative&&(this._relative=!0)},si.filter=function(e){this._placeBeforeCursor({type:"FilterExpression",expr:e,relative:this._subParser.isRelative(),subject:this._cursor})},si.functionCall=function(){this._placeBeforeCursor({type:"FunctionCall",name:this._cursor.value,args:[],pool:"functions"})},si.identifier=function(e){var t={type:"Identifier",value:e.value};this._nextIdentEncapsulate?(t.from=this._cursor,this._placeBeforeCursor(t),this._nextIdentEncapsulate=!1):(this._nextIdentRelative&&(t.relative=!0,this._nextIdentRelative=!1),this._placeAtCursor(t))},si.literal=function(e){this._placeAtCursor({type:"Literal",value:e.value})},si.objKey=function(e){this._curObjKey=e.value},si.objStart=function(){this._placeAtCursor({type:"ObjectLiteral",value:{}})},si.objVal=function(e){this._cursor.value[this._curObjKey]=e},si.subExpression=function(e){this._placeAtCursor(e)},si.ternaryEnd=function(e){this._cursor.alternate=e},si.ternaryMid=function(e){this._cursor.consequent=e},si.ternaryStart=function(){this._tree={type:"ConditionalExpression",test:this._tree},this._cursor=this._tree},si.transform=function(e){this._placeBeforeCursor({type:"FunctionCall",name:e.value,args:[this._cursor],pool:"transforms"})},si.unaryOp=function(e){this._placeAtCursor({type:"UnaryExpression",operator:e.value})}),si}var FO={},sz;function HLe(){if(sz)return FO;sz=1;var e=zte();return FO.states={expectOperand:{tokenTypes:{literal:{toState:"expectBinOp"},identifier:{toState:"identifier"},unaryOp:{},openParen:{toState:"subExpression"},openCurl:{toState:"expectObjKey",handler:e.objStart},dot:{toState:"traverse"},openBracket:{toState:"arrayVal",handler:e.arrayStart}}},expectBinOp:{tokenTypes:{binaryOp:{toState:"expectOperand"},pipe:{toState:"expectTransform"},dot:{toState:"traverse"},question:{toState:"ternaryMid",handler:e.ternaryStart}},completable:!0},expectTransform:{tokenTypes:{identifier:{toState:"postTransform",handler:e.transform}}},expectObjKey:{tokenTypes:{identifier:{toState:"expectKeyValSep",handler:e.objKey},closeCurl:{toState:"expectBinOp"}}},expectKeyValSep:{tokenTypes:{colon:{toState:"objVal"}}},postTransform:{tokenTypes:{openParen:{toState:"argVal"},binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},pipe:{toState:"expectTransform"}},completable:!0},postArgs:{tokenTypes:{binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},pipe:{toState:"expectTransform"}},completable:!0},identifier:{tokenTypes:{binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},openParen:{toState:"argVal",handler:e.functionCall},pipe:{toState:"expectTransform"},question:{toState:"ternaryMid",handler:e.ternaryStart}},completable:!0},traverse:{tokenTypes:{identifier:{toState:"identifier"}}},filter:{subHandler:e.filter,endStates:{closeBracket:"identifier"}},subExpression:{subHandler:e.subExpression,endStates:{closeParen:"expectBinOp"}},argVal:{subHandler:e.argVal,endStates:{comma:"argVal",closeParen:"postArgs"}},objVal:{subHandler:e.objVal,endStates:{comma:"expectObjKey",closeCurl:"expectBinOp"}},arrayVal:{subHandler:e.arrayVal,endStates:{comma:"arrayVal",closeBracket:"expectBinOp"}},ternaryMid:{subHandler:e.ternaryMid,endStates:{colon:"ternaryEnd"}},ternaryEnd:{subHandler:e.ternaryEnd,completable:!0}},FO}var jO,lz;function GLe(){if(lz)return jO;lz=1;var e=Er,t=e(u0()),n=e(f0()),r=zte(),i=HLe().states,o=function(){function a(s,l,c){(0,t.default)(this,a),this._grammar=s,this._state="expectOperand",this._tree=null,this._exprStr=l||"",this._relative=!1,this._stopMap=c||{}}return(0,n.default)(a,[{key:"addToken",value:function(l){if(this._state==="complete")throw new Error("Cannot add a new token to a completed Parser");var c=i[this._state],u=this._exprStr;if(this._exprStr+=l.raw,c.subHandler){this._subParser||this._startSubExpression(u);var f=this._subParser.addToken(l);if(f){if(this._endSubExpression(),this._parentStop)return f;this._state=f}}else if(c.tokenTypes[l.type]){var d=c.tokenTypes[l.type],p=r[l.type];d.handler&&(p=d.handler),p&&p.call(this,l),d.toState&&(this._state=d.toState)}else{if(this._stopMap[l.type])return this._stopMap[l.type];throw new Error("Token ".concat(l.raw," (").concat(l.type,") unexpected in expression: ").concat(this._exprStr))}return!1}},{key:"addTokens",value:function(l){l.forEach(this.addToken,this)}},{key:"complete",value:function(){if(this._cursor&&!i[this._state].completable)throw new Error("Unexpected end of expression: ".concat(this._exprStr));return this._subParser&&this._endSubExpression(),this._state="complete",this._cursor?this._tree:null}},{key:"isRelative",value:function(){return this._relative}},{key:"_endSubExpression",value:function(){i[this._state].subHandler.call(this,this._subParser.complete()),this._subParser=null}},{key:"_placeAtCursor",value:function(l){this._cursor?(this._cursor.right=l,this._setParent(l,this._cursor)):this._tree=l,this._cursor=l}},{key:"_placeBeforeCursor",value:function(l){this._cursor=this._cursor._parent,this._placeAtCursor(l)}},{key:"_setParent",value:function(l,c){Object.defineProperty(l,"_parent",{value:c,writable:!0})}},{key:"_startSubExpression",value:function(l){var c=i[this._state].endStates;c||(this._parentStop=!0,c=this._stopMap),this._subParser=new a(this._grammar,l,c)}}]),a}();return jO=o,jO}var zO,cz;function WLe(){if(cz)return zO;cz=1;var e=Er,t=e(u0()),n=e(f0()),r=function(){function i(o){(0,t.default)(this,i),o(this._resolve.bind(this),this._reject.bind(this))}return(0,n.default)(i,[{key:"catch",value:function(a){if(this.error)try{this._resolve(a(this.error))}catch(s){this._reject(s)}return this}},{key:"then",value:function(a,s){if(!this.error)try{this._resolve(a(this.value))}catch(l){this._reject(l)}return s&&this.catch(s),this}},{key:"_reject",value:function(a){this.value=void 0,this.error=a}},{key:"_resolve",value:function(a){a instanceof i?a.error?this._reject(a.error):this._resolve(a.value):(this.value=a,this.error=void 0)}}]),i}();return r.all=function(i){return new r(function(o){var a=i.map(function(s){for(;s instanceof r;){if(s.error)throw Error(s.error);s=s.value}return s});o(a)})},r.resolve=function(i){return new r(function(o){return o(i)})},r.reject=function(i){return new r(function(o,a){return a(i)})},zO=r,zO}var UO,uz;function qLe(){if(uz)return UO;uz=1;var e=Er,t=e(u0()),n=e(f0()),r=ULe(),i=VLe(),o=GLe(),a=WLe(),s=function(){function l(c,u){(0,t.default)(this,l),this._grammar=c,this._exprStr=u,this._ast=null}return(0,n.default)(l,[{key:"compile",value:function(){var u=new i(this._grammar),f=new o(this._grammar),d=u.tokenize(this._exprStr);return f.addTokens(d),this._ast=f.complete(),this}},{key:"eval",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._eval(u,Promise)}},{key:"evalSync",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=this._eval(u,a);if(f.error)throw f.error;return f.value}},{key:"_eval",value:function(u,f){var d=this;return f.resolve().then(function(){var p=d._getAst(),h=new r(d._grammar,u,void 0,f);return h.eval(p)})}},{key:"_getAst",value:function(){return this._ast||this.compile(),this._ast}}]),l}();return UO=s,UO}var VO={},fz;function XLe(){return fz||(fz=1,VO.getGrammar=function(){return{elements:{".":{type:"dot"},"[":{type:"openBracket"},"]":{type:"closeBracket"},"|":{type:"pipe"},"{":{type:"openCurl"},"}":{type:"closeCurl"},":":{type:"colon"},",":{type:"comma"},"(":{type:"openParen"},")":{type:"closeParen"},"?":{type:"question"},"+":{type:"binaryOp",precedence:30,eval:function(t,n){return t+n}},"-":{type:"binaryOp",precedence:30,eval:function(t,n){return t-n}},"*":{type:"binaryOp",precedence:40,eval:function(t,n){return t*n}},"/":{type:"binaryOp",precedence:40,eval:function(t,n){return t/n}},"//":{type:"binaryOp",precedence:40,eval:function(t,n){return Math.floor(t/n)}},"%":{type:"binaryOp",precedence:50,eval:function(t,n){return t%n}},"^":{type:"binaryOp",precedence:50,eval:function(t,n){return Math.pow(t,n)}},"==":{type:"binaryOp",precedence:20,eval:function(t,n){return t==n}},"!=":{type:"binaryOp",precedence:20,eval:function(t,n){return t!=n}},">":{type:"binaryOp",precedence:20,eval:function(t,n){return t>n}},">=":{type:"binaryOp",precedence:20,eval:function(t,n){return t>=n}},"<":{type:"binaryOp",precedence:20,eval:function(t,n){return t<n}},"<=":{type:"binaryOp",precedence:20,eval:function(t,n){return t<=n}},"&&":{type:"binaryOp",precedence:10,evalOnDemand:function(t,n){return t.eval().then(function(r){return r&&n.eval()})}},"||":{type:"binaryOp",precedence:10,evalOnDemand:function(t,n){return t.eval().then(function(r){return r||n.eval()})}},in:{type:"binaryOp",precedence:20,eval:function(t,n){return typeof n=="string"?n.indexOf(t)!==-1:Array.isArray(n)?n.some(function(r){return r===t}):!1}},"!":{type:"unaryOp",precedence:1/0,eval:function(t){return!t}}},functions:{},transforms:{}}}),VO}var PB=Er,YLe=PB(AB()),KLe=PB(u0()),ZLe=PB(f0()),JLe=qLe(),QLe=XLe(),e$e=QLe.getGrammar,Ute=function(){function e(){(0,KLe.default)(this,e),this.expr=this.expr.bind(this),this._grammar=e$e()}return(0,ZLe.default)(e,[{key:"addBinaryOp",value:function(n,r,i,o){this._addGrammarElement(n,(0,YLe.default)({type:"binaryOp",precedence:r},o?"evalOnDemand":"eval",i))}},{key:"addFunction",value:function(n,r){this._grammar.functions[n]=r}},{key:"addFunctions",value:function(n){for(var r in n)this._grammar.functions[r]=n[r]}},{key:"addUnaryOp",value:function(n,r){this._addGrammarElement(n,{type:"unaryOp",weight:1/0,eval:r})}},{key:"addTransform",value:function(n,r){this._grammar.transforms[n]=r}},{key:"addTransforms",value:function(n){for(var r in n)this._grammar.transforms[r]=n[r]}},{key:"compile",value:function(n){var r=this.createExpression(n);return r.compile()}},{key:"createExpression",value:function(n){return new JLe(this._grammar,n)}},{key:"getFunction",value:function(n){return this._grammar.functions[n]}},{key:"getTransform",value:function(n){return this._grammar.transforms[n]}},{key:"eval",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.createExpression(n);return i.eval(r)}},{key:"evalSync",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.createExpression(n);return i.evalSync(r)}},{key:"expr",value:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=n.reduce(function(s,l,c){var u=c<i.length?i[c]:"";return s+=l+u,s},"");return this.createExpression(a)}},{key:"removeOp",value:function(n){this._grammar.elements[n]&&(this._grammar.elements[n].type==="binaryOp"||this._grammar.elements[n].type==="unaryOp")&&delete this._grammar.elements[n]}},{key:"_addGrammarElement",value:function(n,r){this._grammar.elements[n]=r}}]),e}();CB.exports=new Ute;CB.exports.Jexl=Ute;var t$e=CB.exports,n$e=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(SB,"__esModule",{value:!0});const r$e=n$e(t$e);function i$e(){const e=new r$e.default.Jexl;return e.addFunction("get",(t,n)=>t.get(n)),e.addFunction("parent",t=>t.parent()),e.addFunction("id",t=>t.id()),e.addFunction("cast",t=>t),e.addFunction("log",t=>(console.log(t),t)),e.addFunction("max",Math.max),e.addFunction("min",Math.min),e.addFunction("sqrt",Math.sqrt),e.addFunction("ceil",Math.ceil),e.addFunction("floor",Math.floor),e.addFunction("round",Math.round),e.addFunction("abs",Math.abs),e.addFunction("log10",Math.log10),e.addFunction("parseInt",Number.parseInt),e.addFunction("parseFloat",Number.parseFloat),e.addFunction("split",(t,n)=>t.split(n)),e.addFunction("charAt",(t,n)=>t.charAt(n)),e.addFunction("charCodeAt",(t,n)=>t.charCodeAt(n)),e.addFunction("codePointAt",(t,n)=>t.codePointAt(n)),e.addFunction("startsWith",(t,n,r)=>t.startsWith(n,r)),e.addFunction("endsWith",(t,n,r)=>t.endsWith(n,r)),e.addFunction("padEnd",(t,n,r)=>t.padEnd(n,r)),e.addFunction("padStart",(t,n,r)=>t.padStart(n,r)),e.addFunction("repeat",(t,n)=>t.repeat(n)),e.addFunction("replace",(t,n,r)=>t.replace(n,r)),e.addFunction("replaceAll",(t,n,r)=>t.replaceAll(n,r)),e.addFunction("slice",(t,n,r)=>t.slice(n,r)),e.addFunction("startsWith",(t,n,r)=>t.startsWith(n,r)),e.addFunction("substring",(t,n,r)=>t.substring(n,r)),e.addFunction("toLowerCase",t=>t.toLowerCase()),e.addFunction("toUpperCase",t=>t.toUpperCase()),e.addFunction("trim",t=>t.trim()),e.addFunction("trimEnd",t=>t.trimEnd()),e.addFunction("trimStart",t=>t.trimStart()),e.addFunction("getTag",(t,n)=>{const r=t.get("tags");return r?r[n]:t.get(n)}),e.addBinaryOp("&",15,(t,n)=>t&n),e}SB.default=i$e;var o$e=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kM,"__esModule",{value:!0});kM.stringToJexlExpression=void 0;const a$e=o$e(SB),HO={};function s$e(e,t){const n=`nosig|${e}`;if(!HO[n]){if(!e.startsWith("jexl:"))throw new Error("string does not appear to be in jexl format");const i=e.split("jexl:")[1],o=t?t.compile(`${i}`):(0,a$e.default)().compile(`${i}`);HO[n]=o}return HO[n]}kM.stringToJexlExpression=s$e;var GO={},l$e=function(t){return typeof t=="object"&&t!==null};const Vte=os(Yue);var Rp={},Hte={};Object.defineProperty(Hte,"__esModule",{value:!0});(function(e){var t=Ce&&Ce.__createBinding||(Object.create?function(T,B,R,P){P===void 0&&(P=R);var D=Object.getOwnPropertyDescriptor(B,R);(!D||("get"in D?!B.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return B[R]}}),Object.defineProperty(T,P,D)}:function(T,B,R,P){P===void 0&&(P=R),T[P]=B[R]}),n=Ce&&Ce.__exportStar||function(T,B){for(var R in T)R!=="default"&&!Object.prototype.hasOwnProperty.call(B,R)&&t(B,T,R)};Object.defineProperty(e,"__esModule",{value:!0}),e.isRetryException=e.isAuthNeededException=e.RetryError=e.AuthNeededError=e.isBlobLocation=e.isLocalPathLocation=e.isUriLocation=e.isAbstractMenuManager=e.isRootModelWithInternetAccounts=e.isAppRootModel=e.isTrackViewModel=e.isDisplayModel=e.isTrackModel=e.isViewModel=e.isSelectionContainer=e.isSessionWithSessionPlugins=e.isSessionModelWithConnectionEditing=e.isSessionModelWithConnections=e.isSessionModelWithWidgets=e.isSessionWithShareURL=e.isSessionWithAddTracks=e.isSessionModelWithConfigEditing=e.isSessionModel=e.isViewContainer=void 0;const r=Xu;n(Hte,e);function i(T){return(0,r.isStateTreeNode)(T)&&"removeView"in T&&"addView"in T&&"views"in T}e.isViewContainer=i;function o(T){return typeof T=="object"&&T!==null&&"rpcManager"in T&&"configuration"in T}e.isSessionModel=o;function a(T){return o(T)&&"editConfiguration"in T}e.isSessionModelWithConfigEditing=a;function s(T){return o(T)&&"addTrackConf"in T&&!T.disableAddTracks}e.isSessionWithAddTracks=s;function l(T){return o(T)&&"shareURL"in T&&!!T.shareURL}e.isSessionWithShareURL=l;function c(T){return o(T)&&"widgets"in T}e.isSessionModelWithWidgets=c;function u(T){return o(T)&&"makeConnection"in T}e.isSessionModelWithConnections=u;function f(T){return o(T)&&"addConnectionConf"in T}e.isSessionModelWithConnectionEditing=f;function d(T){return o(T)&&"sessionPlugins"in T}e.isSessionWithSessionPlugins=d;function p(T){return typeof T=="object"&&T!==null&&"selection"in T&&"setSelection"in T}e.isSelectionContainer=p;function h(T){return typeof T=="object"&&T!==null&&"width"in T&&"setWidth"in T}e.isViewModel=h;function g(T){return typeof T=="object"&&T!==null&&"configuration"in T&&T.configuration.trackId}e.isTrackModel=g;function v(T){return typeof T=="object"&&T!==null&&"configuration"in T&&T.configuration.displayId}e.isDisplayModel=v;function m(T){return typeof T=="object"&&T!==null&&"showTrack"in T&&"hideTrack"in T}e.isTrackViewModel=m;function y(T){return typeof T=="object"&&T!==null&&"isAssemblyEditing"in T&&"findAppropriateInternetAccount"in T}e.isAppRootModel=y;function _(T){return typeof T=="object"&&T!==null&&"internetAccounts"in T&&"findAppropriateInternetAccount"in T}e.isRootModelWithInternetAccounts=_;function b(T){return typeof T=="object"&&T!==null&&"appendMenu"in T&&"appendToSubMenu"in T}e.isAbstractMenuManager=b;function x(T){return typeof T=="object"&&T!==null&&"uri"in T&&!!T.uri}e.isUriLocation=x;function w(T){return typeof T=="object"&&T!==null&&"localPath"in T&&!!T.localPath}e.isLocalPathLocation=w;function S(T){return typeof T=="object"&&T!==null&&"blobId"in T&&!!T.blobId}e.isBlobLocation=S;class A extends Error{constructor(B,R){super(B),this.message=B,this.url=R,this.name="AuthNeededError",Object.setPrototypeOf(this,A.prototype)}}e.AuthNeededError=A;class C extends Error{constructor(B,R){super(B),this.message=B,this.internetAccountId=R,this.name="RetryError"}}e.RetryError=C;function k(T){return T instanceof Error&&(T.name==="AuthNeededError"||T.url!==void 0)}e.isAuthNeededException=k;function O(T){return T.name==="RetryError"||T.internetAccountId!==void 0}e.isRetryException=O})(Rp);var da={},Gte={},qn={},d0={},Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.isFunction=void 0;function c$e(e){return typeof e=="function"}Vn.isFunction=c$e;var Mi={},z_={},Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.createErrorClass=void 0;function u$e(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}Dc.createErrorClass=u$e;Object.defineProperty(z_,"__esModule",{value:!0});z_.UnsubscriptionError=void 0;var f$e=Dc;z_.UnsubscriptionError=f$e.createErrorClass(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});var Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.arrRemove=void 0;function d$e(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}Ll.arrRemove=d$e;var dz=Ce&&Ce.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},pz=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},hz=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.isSubscription=Mi.EMPTY_SUBSCRIPTION=Mi.Subscription=void 0;var gb=Vn,WO=z_,mz=Ll,MB=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var s=dz(a),l=s.next();!l.done;l=s.next()){var c=l.value;c.remove(this)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}else a.remove(this);var u=this.initialTeardown;if(gb.isFunction(u))try{u()}catch(g){o=g instanceof WO.UnsubscriptionError?g.errors:[g]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=dz(f),p=d.next();!p.done;p=d.next()){var h=p.value;try{gz(h)}catch(g){o=o??[],g instanceof WO.UnsubscriptionError?o=hz(hz([],pz(o)),pz(g.errors)):o.push(g)}}}catch(g){r={error:g}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}}if(o)throw new WO.UnsubscriptionError(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)gz(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&mz.arrRemove(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&mz.arrRemove(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();Mi.Subscription=MB;Mi.EMPTY_SUBSCRIPTION=MB.EMPTY;function p$e(e){return e instanceof MB||e&&"closed"in e&&gb.isFunction(e.remove)&&gb.isFunction(e.add)&&gb.isFunction(e.unsubscribe)}Mi.isSubscription=p$e;function gz(e){gb.isFunction(e)?e():e.unsubscribe()}var kd={};Object.defineProperty(kd,"__esModule",{value:!0});kd.config=void 0;kd.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var U_={},EB={};(function(e){var t=Ce&&Ce.__read||function(r,i){var o=typeof Symbol=="function"&&r[Symbol.iterator];if(!o)return r;var a=o.call(r),s,l=[],c;try{for(;(i===void 0||i-- >0)&&!(s=a.next()).done;)l.push(s.value)}catch(u){c={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(c)throw c.error}}return l},n=Ce&&Ce.__spreadArray||function(r,i){for(var o=0,a=i.length,s=r.length;o<a;o++,s++)r[s]=i[o];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(r,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=e.timeoutProvider.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,n([r,i],t(o))):setTimeout.apply(void 0,n([r,i],t(o)))},clearTimeout:function(r){var i=e.timeoutProvider.delegate;return((i==null?void 0:i.clearTimeout)||clearTimeout)(r)},delegate:void 0}})(EB);Object.defineProperty(U_,"__esModule",{value:!0});U_.reportUnhandledError=void 0;var h$e=kd,m$e=EB;function g$e(e){m$e.timeoutProvider.setTimeout(function(){var t=h$e.config.onUnhandledError;if(t)t(e);else throw e})}U_.reportUnhandledError=g$e;var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.noop=void 0;function v$e(){}Ii.noop=v$e;var hc={};Object.defineProperty(hc,"__esModule",{value:!0});hc.createNotification=hc.nextNotification=hc.errorNotification=hc.COMPLETE_NOTIFICATION=void 0;hc.COMPLETE_NOTIFICATION=function(){return $M("C",void 0,void 0)}();function y$e(e){return $M("E",void 0,e)}hc.errorNotification=y$e;function b$e(e){return $M("N",e,void 0)}hc.nextNotification=b$e;function $M(e,t,n){return{kind:e,value:t,error:n}}hc.createNotification=$M;var dd={};Object.defineProperty(dd,"__esModule",{value:!0});dd.captureError=dd.errorContext=void 0;var Wte=kd,Sp=null;function _$e(e){if(Wte.config.useDeprecatedSynchronousErrorHandling){var t=!Sp;if(t&&(Sp={errorThrown:!1,error:null}),e(),t){var n=Sp,r=n.errorThrown,i=n.error;if(Sp=null,r)throw i}}else e()}dd.errorContext=_$e;function x$e(e){Wte.config.useDeprecatedSynchronousErrorHandling&&Sp&&(Sp.errorThrown=!0,Sp.error=e)}dd.captureError=x$e;(function(e){var t=Ce&&Ce.__extends||function(){var y=function(_,b){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(x[S]=w[S])},y(_,b)};return function(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");y(_,b);function x(){this.constructor=_}_.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var n=Vn,r=Mi,i=kd,o=U_,a=Ii,s=hc,l=EB,c=dd,u=function(y){t(_,y);function _(b){var x=y.call(this)||this;return x.isStopped=!1,b?(x.destination=b,r.isSubscription(b)&&b.add(x)):x.destination=e.EMPTY_OBSERVER,x}return _.create=function(b,x,w){return new h(b,x,w)},_.prototype.next=function(b){this.isStopped?m(s.nextNotification(b),this):this._next(b)},_.prototype.error=function(b){this.isStopped?m(s.errorNotification(b),this):(this.isStopped=!0,this._error(b))},_.prototype.complete=function(){this.isStopped?m(s.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},_.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,y.prototype.unsubscribe.call(this),this.destination=null)},_.prototype._next=function(b){this.destination.next(b)},_.prototype._error=function(b){try{this.destination.error(b)}finally{this.unsubscribe()}},_.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},_}(r.Subscription);e.Subscriber=u;var f=Function.prototype.bind;function d(y,_){return f.call(y,_)}var p=function(){function y(_){this.partialObserver=_}return y.prototype.next=function(_){var b=this.partialObserver;if(b.next)try{b.next(_)}catch(x){g(x)}},y.prototype.error=function(_){var b=this.partialObserver;if(b.error)try{b.error(_)}catch(x){g(x)}else g(_)},y.prototype.complete=function(){var _=this.partialObserver;if(_.complete)try{_.complete()}catch(b){g(b)}},y}(),h=function(y){t(_,y);function _(b,x,w){var S=y.call(this)||this,A;if(n.isFunction(b)||!b)A={next:b??void 0,error:x??void 0,complete:w??void 0};else{var C;S&&i.config.useDeprecatedNextContext?(C=Object.create(b),C.unsubscribe=function(){return S.unsubscribe()},A={next:b.next&&d(b.next,C),error:b.error&&d(b.error,C),complete:b.complete&&d(b.complete,C)}):A=b}return S.destination=new p(A),S}return _}(u);e.SafeSubscriber=h;function g(y){i.config.useDeprecatedSynchronousErrorHandling?c.captureError(y):o.reportUnhandledError(y)}function v(y){throw y}function m(y,_){var b=i.config.onStoppedNotification;b&&l.timeoutProvider.setTimeout(function(){return b(y,_)})}e.EMPTY_OBSERVER={closed:!0,next:a.noop,error:v,complete:a.noop}})(d0);var Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});Ih.observable=void 0;Ih.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var Ru={},Ri={};Object.defineProperty(Ri,"__esModule",{value:!0});Ri.identity=void 0;function w$e(e){return e}Ri.identity=w$e;Object.defineProperty(Ru,"__esModule",{value:!0});Ru.pipeFromArray=Ru.pipe=void 0;var S$e=Ri;function C$e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qte(e)}Ru.pipe=C$e;function qte(e){return e.length===0?S$e.identity:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}Ru.pipeFromArray=qte;Object.defineProperty(qn,"__esModule",{value:!0});qn.Observable=void 0;var W5=d0,A$e=Mi,P$e=Ih,M$e=Ru,E$e=kd,qO=Vn,T$e=dd,O$e=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=R$e(t)?t:new W5.SafeSubscriber(t,n,r);return T$e.errorContext(function(){var a=i,s=a.operator,l=a.source;o.add(s?s.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=vz(n),new n(function(i,o){var a=new W5.SafeSubscriber({next:function(s){try{t(s)}catch(l){o(l),a.unsubscribe()}},error:o,complete:i});r.subscribe(a)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[P$e.observable]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return M$e.pipeFromArray(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=vz(t),new t(function(r,i){var o;n.subscribe(function(a){return o=a},function(a){return i(a)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();qn.Observable=O$e;function vz(e){var t;return(t=e??E$e.config.Promise)!==null&&t!==void 0?t:Promise}function I$e(e){return e&&qO.isFunction(e.next)&&qO.isFunction(e.error)&&qO.isFunction(e.complete)}function R$e(e){return e&&e instanceof W5.Subscriber||I$e(e)&&A$e.isSubscription(e)}var Rh={},V_={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.operate=xt.hasLift=void 0;var k$e=Vn;function Xte(e){return k$e.isFunction(e==null?void 0:e.lift)}xt.hasLift=Xte;function L$e(e){return function(t){if(Xte(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}xt.operate=L$e;var It={},$$e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(It,"__esModule",{value:!0});It.OperatorSubscriber=It.createOperatorSubscriber=void 0;var D$e=d0;function B$e(e,t,n,r,i){return new Yte(e,t,n,r,i)}It.createOperatorSubscriber=B$e;var Yte=function(e){$$e(t,e);function t(n,r,i,o,a,s){var l=e.call(this,n)||this;return l.onFinalize=a,l.shouldUnsubscribe=s,l._next=r?function(c){try{r(c)}catch(u){n.error(u)}}:e.prototype._next,l._error=o?function(c){try{o(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(D$e.Subscriber);It.OperatorSubscriber=Yte;Object.defineProperty(V_,"__esModule",{value:!0});V_.refCount=void 0;var N$e=xt,F$e=It;function j$e(){return N$e.operate(function(e,t){var n=null;e._refCount++;var r=F$e.createOperatorSubscriber(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){n=null;return}var i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}V_.refCount=j$e;var z$e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Rh,"__esModule",{value:!0});Rh.ConnectableObservable=void 0;var U$e=qn,yz=Mi,V$e=V_,H$e=It,G$e=xt,W$e=function(e){z$e(t,e);function t(n,r){var i=e.call(this)||this;return i.source=n,i.subjectFactory=r,i._subject=null,i._refCount=0,i._connection=null,G$e.hasLift(n)&&(i.lift=n.lift),i}return t.prototype._subscribe=function(n){return this.getSubject().subscribe(n)},t.prototype.getSubject=function(){var n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var n=this._connection;this._subject=this._connection=null,n==null||n.unsubscribe()},t.prototype.connect=function(){var n=this,r=this._connection;if(!r){r=this._connection=new yz.Subscription;var i=this.getSubject();r.add(this.source.subscribe(H$e.createOperatorSubscriber(i,void 0,function(){n._teardown(),i.complete()},function(o){n._teardown(),i.error(o)},function(){return n._teardown()}))),r.closed&&(this._connection=null,r=yz.Subscription.EMPTY)}return r},t.prototype.refCount=function(){return V$e.refCount()(this)},t}(U$e.Observable);Rh.ConnectableObservable=W$e;var DM={},Kte={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(Kte);var TB={};(function(e){var t=Ce&&Ce.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s=a.call(i),l,c=[],u;try{for(;(o===void 0||o-- >0)&&!(l=s.next()).done;)c.push(l.value)}catch(f){u={error:f}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(u)throw u.error}}return c},n=Ce&&Ce.__spreadArray||function(i,o){for(var a=0,s=o.length,l=i.length;a<s;a++,l++)i[l]=o[a];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var r=Mi;e.animationFrameProvider={schedule:function(i){var o=requestAnimationFrame,a=cancelAnimationFrame,s=e.animationFrameProvider.delegate;s&&(o=s.requestAnimationFrame,a=s.cancelAnimationFrame);var l=o(function(c){a=void 0,i(c)});return new r.Subscription(function(){return a==null?void 0:a(l)})},requestAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.requestAnimationFrame)||requestAnimationFrame).apply(void 0,n([],t(i)))},cancelAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e.animationFrameProvider.delegate;return((a==null?void 0:a.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,n([],t(i)))},delegate:void 0}})(TB);Object.defineProperty(DM,"__esModule",{value:!0});DM.animationFrames=void 0;var q$e=qn,X$e=Kte,bz=TB;function Y$e(e){return e?Zte(e):K$e}DM.animationFrames=Y$e;function Zte(e){return new q$e.Observable(function(t){var n=e||X$e.performanceTimestampProvider,r=n.now(),i=0,o=function(){t.closed||(i=bz.animationFrameProvider.requestAnimationFrame(function(a){i=0;var s=n.now();t.next({timestamp:e?s:a,elapsed:s-r}),o()}))};return o(),function(){i&&bz.animationFrameProvider.cancelAnimationFrame(i)}})}var K$e=Zte(),ii={},H_={};Object.defineProperty(H_,"__esModule",{value:!0});H_.ObjectUnsubscribedError=void 0;var Z$e=Dc;H_.ObjectUnsubscribedError=Z$e.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var Jte=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),J$e=Ce&&Ce.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ii,"__esModule",{value:!0});ii.AnonymousSubject=ii.Subject=void 0;var _z=qn,q5=Mi,Q$e=H_,e4e=Ll,XO=dd,Qte=function(e){Jte(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new X5(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new Q$e.ObjectUnsubscribedError},t.prototype.next=function(n){var r=this;XO.errorContext(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var a=J$e(r.currentObservers),s=a.next();!s.done;s=a.next()){var l=s.value;l.next(n)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;XO.errorContext(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;XO.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,a=i.isStopped,s=i.observers;return o||a?q5.EMPTY_SUBSCRIPTION:(this.currentObservers=null,s.push(n),new q5.Subscription(function(){r.currentObservers=null,e4e.arrRemove(s,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,a=r.isStopped;i?n.error(o):a&&n.complete()},t.prototype.asObservable=function(){var n=new _z.Observable;return n.source=this,n},t.create=function(n,r){return new X5(n,r)},t}(_z.Observable);ii.Subject=Qte;var X5=function(e){Jte(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:q5.EMPTY_SUBSCRIPTION},t}(Qte);ii.AnonymousSubject=X5;var G_={},t4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(G_,"__esModule",{value:!0});G_.BehaviorSubject=void 0;var n4e=ii,r4e=function(e){t4e(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(n4e.Subject);G_.BehaviorSubject=r4e;var p0={},BM={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(BM);var i4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(p0,"__esModule",{value:!0});p0.ReplaySubject=void 0;var o4e=ii,a4e=BM,s4e=function(e){i4e(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=a4e.dateTimestampProvider);var o=e.call(this)||this;return o._bufferSize=n,o._windowTime=r,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,n),o._windowTime=Math.max(1,r),o}return t.prototype.next=function(n){var r=this,i=r.isStopped,o=r._buffer,a=r._infiniteTimeWindow,s=r._timestampProvider,l=r._windowTime;i||(o.push(n),!a&&o.push(s.now()+l)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,o=i._infiniteTimeWindow,a=i._buffer,s=a.slice(),l=0;l<s.length&&!n.closed;l+=o?1:2)n.next(s[l]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,o=n._buffer,a=n._infiniteTimeWindow,s=(a?1:2)*r;if(r<1/0&&s<o.length&&o.splice(0,o.length-s),!a){for(var l=i.now(),c=0,u=1;u<o.length&&o[u]<=l;u+=2)c=u;c&&o.splice(0,c+1)}},t}(o4e.Subject);p0.ReplaySubject=s4e;var h0={},l4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(h0,"__esModule",{value:!0});h0.AsyncSubject=void 0;var c4e=ii,u4e=function(e){l4e(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._value=null,n._hasValue=!1,n._isComplete=!1,n}return t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r._hasValue,a=r._value,s=r.thrownError,l=r.isStopped,c=r._isComplete;i?n.error(s):(l||c)&&(o&&n.next(a),n.complete())},t.prototype.next=function(n){this.isStopped||(this._value=n,this._hasValue=!0)},t.prototype.complete=function(){var n=this,r=n._hasValue,i=n._value,o=n._isComplete;o||(this._isComplete=!0,r&&e.prototype.next.call(this,i),e.prototype.complete.call(this))},t}(c4e.Subject);h0.AsyncSubject=u4e;var ene={},NM={},Ld={},FM={},f4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(FM,"__esModule",{value:!0});FM.Action=void 0;var d4e=Mi,p4e=function(e){f4e(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(d4e.Subscription);FM.Action=p4e;var tne={};(function(e){var t=Ce&&Ce.__read||function(r,i){var o=typeof Symbol=="function"&&r[Symbol.iterator];if(!o)return r;var a=o.call(r),s,l=[],c;try{for(;(i===void 0||i-- >0)&&!(s=a.next()).done;)l.push(s.value)}catch(u){c={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(c)throw c.error}}return l},n=Ce&&Ce.__spreadArray||function(r,i){for(var o=0,a=i.length,s=r.length;o<a;o++,s++)r[s]=i[o];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(r,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=e.intervalProvider.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,n([r,i],t(o))):setInterval.apply(void 0,n([r,i],t(o)))},clearInterval:function(r){var i=e.intervalProvider.delegate;return((i==null?void 0:i.clearInterval)||clearInterval)(r)},delegate:void 0}})(tne);var h4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ld,"__esModule",{value:!0});Ld.AsyncAction=void 0;var m4e=FM,xz=tne,g4e=Ll,v4e=function(e){h4e(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,a=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(a,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(a,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),xz.intervalProvider.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&xz.intervalProvider.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(a){i=!0,o=a||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,g4e.arrRemove(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(m4e.Action);Ld.AsyncAction=v4e;var nne={},yv={};Object.defineProperty(yv,"__esModule",{value:!0});yv.TestTools=yv.Immediate=void 0;var y4e=1,YO,ZC={};function wz(e){return e in ZC?(delete ZC[e],!0):!1}yv.Immediate={setImmediate:function(e){var t=y4e++;return ZC[t]=!0,YO||(YO=Promise.resolve()),YO.then(function(){return wz(t)&&e()}),t},clearImmediate:function(e){wz(e)}};yv.TestTools={pending:function(){return Object.keys(ZC).length}};(function(e){var t=Ce&&Ce.__read||function(a,s){var l=typeof Symbol=="function"&&a[Symbol.iterator];if(!l)return a;var c=l.call(a),u,f=[],d;try{for(;(s===void 0||s-- >0)&&!(u=c.next()).done;)f.push(u.value)}catch(p){d={error:p}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(d)throw d.error}}return f},n=Ce&&Ce.__spreadArray||function(a,s){for(var l=0,c=s.length,u=a.length;l<c;l++,u++)a[u]=s[l];return a};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var r=yv,i=r.Immediate.setImmediate,o=r.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var l=e.immediateProvider.delegate;return((l==null?void 0:l.setImmediate)||i).apply(void 0,n([],t(a)))},clearImmediate:function(a){var s=e.immediateProvider.delegate;return((s==null?void 0:s.clearImmediate)||o)(a)},delegate:void 0}})(nne);var b4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(NM,"__esModule",{value:!0});NM.AsapAction=void 0;var _4e=Ld,Sz=nne,x4e=function(e){b4e(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n._scheduled||(n._scheduled=Sz.immediateProvider.setImmediate(n.flush.bind(n,void 0))))},t.prototype.recycleAsyncId=function(n,r,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,n,r,i);var a=n.actions;r!=null&&((o=a[a.length-1])===null||o===void 0?void 0:o.id)!==r&&(Sz.immediateProvider.clearImmediate(r),n._scheduled===r&&(n._scheduled=void 0))},t}(_4e.AsyncAction);NM.AsapAction=x4e;var jM={},$d={},W_={};Object.defineProperty(W_,"__esModule",{value:!0});W_.Scheduler=void 0;var w4e=BM,S4e=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=w4e.dateTimestampProvider.now,e}();W_.Scheduler=S4e;var C4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty($d,"__esModule",{value:!0});$d.AsyncScheduler=void 0;var Cz=W_,A4e=function(e){C4e(t,e);function t(n,r){r===void 0&&(r=Cz.Scheduler.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Cz.Scheduler);$d.AsyncScheduler=A4e;var P4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(jM,"__esModule",{value:!0});jM.AsapScheduler=void 0;var M4e=$d,E4e=function(e){P4e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(n){this._active=!0;var r=this._scheduled;this._scheduled=void 0;var i=this.actions,o;n=n||i.shift();do if(o=n.execute(n.state,n.delay))break;while((n=i[0])&&n.id===r&&i.shift());if(this._active=!1,o){for(;(n=i[0])&&n.id===r&&i.shift();)n.unsubscribe();throw o}},t}(M4e.AsyncScheduler);jM.AsapScheduler=E4e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var t=NM,n=jM;e.asapScheduler=new n.AsapScheduler(t.AsapAction),e.asap=e.asapScheduler})(ene);var Oa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var t=Ld,n=$d;e.asyncScheduler=new n.AsyncScheduler(t.AsyncAction),e.async=e.asyncScheduler})(Oa);var rne={},zM={},T4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(zM,"__esModule",{value:!0});zM.QueueAction=void 0;var O4e=Ld,I4e=function(e){T4e(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.schedule=function(n,r){return r===void 0&&(r=0),r>0?e.prototype.schedule.call(this,n,r):(this.delay=r,this.state=n,this.scheduler.flush(this),this)},t.prototype.execute=function(n,r){return r>0||this.closed?e.prototype.execute.call(this,n,r):this._execute(n,r)},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.flush(this),0)},t}(O4e.AsyncAction);zM.QueueAction=I4e;var UM={},R4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(UM,"__esModule",{value:!0});UM.QueueScheduler=void 0;var k4e=$d,L4e=function(e){R4e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(k4e.AsyncScheduler);UM.QueueScheduler=L4e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var t=zM,n=UM;e.queueScheduler=new n.QueueScheduler(t.QueueAction),e.queue=e.queueScheduler})(rne);var ine={},VM={},$4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(VM,"__esModule",{value:!0});VM.AnimationFrameAction=void 0;var D4e=Ld,Az=TB,B4e=function(e){$4e(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n._scheduled||(n._scheduled=Az.animationFrameProvider.requestAnimationFrame(function(){return n.flush(void 0)})))},t.prototype.recycleAsyncId=function(n,r,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,n,r,i);var a=n.actions;r!=null&&((o=a[a.length-1])===null||o===void 0?void 0:o.id)!==r&&(Az.animationFrameProvider.cancelAnimationFrame(r),n._scheduled=void 0)},t}(D4e.AsyncAction);VM.AnimationFrameAction=B4e;var HM={},N4e=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(HM,"__esModule",{value:!0});HM.AnimationFrameScheduler=void 0;var F4e=$d,j4e=function(e){N4e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(n){this._active=!0;var r=this._scheduled;this._scheduled=void 0;var i=this.actions,o;n=n||i.shift();do if(o=n.execute(n.state,n.delay))break;while((n=i[0])&&n.id===r&&i.shift());if(this._active=!1,o){for(;(n=i[0])&&n.id===r&&i.shift();)n.unsubscribe();throw o}},t}(F4e.AsyncScheduler);HM.AnimationFrameScheduler=j4e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var t=VM,n=HM;e.animationFrameScheduler=new n.AnimationFrameScheduler(t.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(ine);var bv={},one=Ce&&Ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(bv,"__esModule",{value:!0});bv.VirtualAction=bv.VirtualTimeScheduler=void 0;var z4e=Ld,U4e=Mi,V4e=$d,H4e=function(e){one(t,e);function t(n,r){n===void 0&&(n=ane),r===void 0&&(r=1/0);var i=e.call(this,n,function(){return i.frame})||this;return i.maxFrames=r,i.frame=0,i.index=-1,i}return t.prototype.flush=function(){for(var n=this,r=n.actions,i=n.maxFrames,o,a;(a=r[0])&&a.delay<=i&&(r.shift(),this.frame=a.delay,!(o=a.execute(a.state,a.delay))););if(o){for(;a=r.shift();)a.unsubscribe();throw o}},t.frameTimeFactor=10,t}(V4e.AsyncScheduler);bv.VirtualTimeScheduler=H4e;var ane=function(e){one(t,e);function t(n,r,i){i===void 0&&(i=n.index+=1);var o=e.call(this,n,r)||this;return o.scheduler=n,o.work=r,o.index=i,o.active=!0,o.index=n.index=i,o}return t.prototype.schedule=function(n,r){if(r===void 0&&(r=0),Number.isFinite(r)){if(!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)}else return U4e.Subscription.EMPTY},t.prototype.requestAsyncId=function(n,r,i){i===void 0&&(i=0),this.delay=n.frame+i;var o=n.actions;return o.push(this),o.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(n,r,i){},t.prototype._execute=function(n,r){if(this.active===!0)return e.prototype._execute.call(this,n,r)},t.sortActions=function(n,r){return n.delay===r.delay?n.index===r.index?0:n.index>r.index?1:-1:n.delay>r.delay?1:-1},t}(z4e.AsyncAction);bv.VirtualAction=ane;var GM={},Rl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var t=qn;e.EMPTY=new t.Observable(function(i){return i.complete()});function n(i){return i?r(i):e.EMPTY}e.empty=n;function r(i){return new t.Observable(function(o){return i.schedule(function(){return o.complete()})})}})(Rl);var m0={},gi={},kh={};Object.defineProperty(kh,"__esModule",{value:!0});kh.isScheduler=void 0;var G4e=Vn;function W4e(e){return e&&G4e.isFunction(e.schedule)}kh.isScheduler=W4e;Object.defineProperty(gi,"__esModule",{value:!0});gi.popNumber=gi.popScheduler=gi.popResultSelector=void 0;var q4e=Vn,X4e=kh;function OB(e){return e[e.length-1]}function Y4e(e){return q4e.isFunction(OB(e))?e.pop():void 0}gi.popResultSelector=Y4e;function K4e(e){return X4e.isScheduler(OB(e))?e.pop():void 0}gi.popScheduler=K4e;function Z4e(e,t){return typeof OB(e)=="number"?e.pop():t}gi.popNumber=Z4e;var $l={},q_={},WM={},jt={},g0={};Object.defineProperty(g0,"__esModule",{value:!0});g0.isArrayLike=void 0;g0.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var X_={};Object.defineProperty(X_,"__esModule",{value:!0});X_.isPromise=void 0;var J4e=Vn;function Q4e(e){return J4e.isFunction(e==null?void 0:e.then)}X_.isPromise=Q4e;var Y_={};Object.defineProperty(Y_,"__esModule",{value:!0});Y_.isInteropObservable=void 0;var eDe=Ih,tDe=Vn;function nDe(e){return tDe.isFunction(e[eDe.observable])}Y_.isInteropObservable=nDe;var K_={};Object.defineProperty(K_,"__esModule",{value:!0});K_.isAsyncIterable=void 0;var rDe=Vn;function iDe(e){return Symbol.asyncIterator&&rDe.isFunction(e==null?void 0:e[Symbol.asyncIterator])}K_.isAsyncIterable=iDe;var Z_={};Object.defineProperty(Z_,"__esModule",{value:!0});Z_.createInvalidObservableTypeError=void 0;function oDe(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}Z_.createInvalidObservableTypeError=oDe;var J_={},eh={};Object.defineProperty(eh,"__esModule",{value:!0});eh.iterator=eh.getSymbolIterator=void 0;function sne(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}eh.getSymbolIterator=sne;eh.iterator=sne();Object.defineProperty(J_,"__esModule",{value:!0});J_.isIterable=void 0;var aDe=eh,sDe=Vn;function lDe(e){return sDe.isFunction(e==null?void 0:e[aDe.iterator])}J_.isIterable=lDe;var pd={},cDe=Ce&&Ce.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Tg=Ce&&Ce.__await||function(e){return this instanceof Tg?(this.v=e,this):new Tg(e)},uDe=Ce&&Ce.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(d){r[d]&&(i[d]=function(p){return new Promise(function(h,g){o.push([d,p,h,g])>1||s(d,p)})})}function s(d,p){try{l(r[d](p))}catch(h){f(o[0][3],h)}}function l(d){d.value instanceof Tg?Promise.resolve(d.value.v).then(c,u):f(o[0][2],d)}function c(d){s("next",d)}function u(d){s("throw",d)}function f(d,p){d(p),o.shift(),o.length&&s(o[0][0],o[0][1])}};Object.defineProperty(pd,"__esModule",{value:!0});pd.isReadableStreamLike=pd.readableStreamLikeToAsyncGenerator=void 0;var fDe=Vn;function dDe(e){return uDe(this,arguments,function(){var n,r,i,o;return cDe(this,function(a){switch(a.label){case 0:n=e.getReader(),a.label=1;case 1:a.trys.push([1,,9,10]),a.label=2;case 2:return[4,Tg(n.read())];case 3:return r=a.sent(),i=r.value,o=r.done,o?[4,Tg(void 0)]:[3,5];case 4:return[2,a.sent()];case 5:return[4,Tg(i)];case 6:return[4,a.sent()];case 7:return a.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}pd.readableStreamLikeToAsyncGenerator=dDe;function pDe(e){return fDe.isFunction(e==null?void 0:e.getReader)}pd.isReadableStreamLike=pDe;var hDe=Ce&&Ce.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):i(u.value).then(s,l)}c((r=r.apply(e,t||[])).next())})},mDe=Ce&&Ce.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},gDe=Ce&&Ce.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Y5=="function"?Y5(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(a){return new Promise(function(s,l){a=e[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(c){o({value:c,done:s})},a)}},Y5=Ce&&Ce.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(jt,"__esModule",{value:!0});jt.fromReadableStreamLike=jt.fromAsyncIterable=jt.fromIterable=jt.fromPromise=jt.fromArrayLike=jt.fromInteropObservable=jt.innerFrom=void 0;var vDe=g0,yDe=X_,v0=qn,bDe=Y_,_De=K_,xDe=Z_,wDe=J_,lne=pd,SDe=Vn,CDe=U_,ADe=Ih;function PDe(e){if(e instanceof v0.Observable)return e;if(e!=null){if(bDe.isInteropObservable(e))return cne(e);if(vDe.isArrayLike(e))return une(e);if(yDe.isPromise(e))return fne(e);if(_De.isAsyncIterable(e))return IB(e);if(wDe.isIterable(e))return dne(e);if(lne.isReadableStreamLike(e))return pne(e)}throw xDe.createInvalidObservableTypeError(e)}jt.innerFrom=PDe;function cne(e){return new v0.Observable(function(t){var n=e[ADe.observable]();if(SDe.isFunction(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}jt.fromInteropObservable=cne;function une(e){return new v0.Observable(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}jt.fromArrayLike=une;function fne(e){return new v0.Observable(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,CDe.reportUnhandledError)})}jt.fromPromise=fne;function dne(e){return new v0.Observable(function(t){var n,r;try{for(var i=Y5(e),o=i.next();!o.done;o=i.next()){var a=o.value;if(t.next(a),t.closed)return}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}jt.fromIterable=dne;function IB(e){return new v0.Observable(function(t){MDe(e,t).catch(function(n){return t.error(n)})})}jt.fromAsyncIterable=IB;function pne(e){return IB(lne.readableStreamLikeToAsyncGenerator(e))}jt.fromReadableStreamLike=pne;function MDe(e,t){var n,r,i,o;return hDe(this,void 0,void 0,function(){var a,s;return mDe(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=gDe(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=l.sent(),i={error:s},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}var Lh={},Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.executeSchedule=void 0;function EDe(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}Dl.executeSchedule=EDe;Object.defineProperty(Lh,"__esModule",{value:!0});Lh.observeOn=void 0;var KO=Dl,TDe=xt,ODe=It;function IDe(e,t){return t===void 0&&(t=0),TDe.operate(function(n,r){n.subscribe(ODe.createOperatorSubscriber(r,function(i){return KO.executeSchedule(r,e,function(){return r.next(i)},t)},function(){return KO.executeSchedule(r,e,function(){return r.complete()},t)},function(i){return KO.executeSchedule(r,e,function(){return r.error(i)},t)}))})}Lh.observeOn=IDe;var $h={};Object.defineProperty($h,"__esModule",{value:!0});$h.subscribeOn=void 0;var RDe=xt;function kDe(e,t){return t===void 0&&(t=0),RDe.operate(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}$h.subscribeOn=kDe;Object.defineProperty(WM,"__esModule",{value:!0});WM.scheduleObservable=void 0;var LDe=jt,$De=Lh,DDe=$h;function BDe(e,t){return LDe.innerFrom(e).pipe(DDe.subscribeOn(t),$De.observeOn(t))}WM.scheduleObservable=BDe;var qM={};Object.defineProperty(qM,"__esModule",{value:!0});qM.schedulePromise=void 0;var NDe=jt,FDe=Lh,jDe=$h;function zDe(e,t){return NDe.innerFrom(e).pipe(jDe.subscribeOn(t),FDe.observeOn(t))}qM.schedulePromise=zDe;var XM={};Object.defineProperty(XM,"__esModule",{value:!0});XM.scheduleArray=void 0;var UDe=qn;function VDe(e,t){return new UDe.Observable(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}XM.scheduleArray=VDe;var Q_={};Object.defineProperty(Q_,"__esModule",{value:!0});Q_.scheduleIterable=void 0;var HDe=qn,GDe=eh,WDe=Vn,Pz=Dl;function qDe(e,t){return new HDe.Observable(function(n){var r;return Pz.executeSchedule(n,t,function(){r=e[GDe.iterator](),Pz.executeSchedule(n,t,function(){var i,o,a;try{i=r.next(),o=i.value,a=i.done}catch(s){n.error(s);return}a?n.complete():n.next(o)},0,!0)}),function(){return WDe.isFunction(r==null?void 0:r.return)&&r.return()}})}Q_.scheduleIterable=qDe;var ex={};Object.defineProperty(ex,"__esModule",{value:!0});ex.scheduleAsyncIterable=void 0;var XDe=qn,Mz=Dl;function YDe(e,t){if(!e)throw new Error("Iterable cannot be null");return new XDe.Observable(function(n){Mz.executeSchedule(n,t,function(){var r=e[Symbol.asyncIterator]();Mz.executeSchedule(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}ex.scheduleAsyncIterable=YDe;var YM={};Object.defineProperty(YM,"__esModule",{value:!0});YM.scheduleReadableStreamLike=void 0;var KDe=ex,ZDe=pd;function JDe(e,t){return KDe.scheduleAsyncIterable(ZDe.readableStreamLikeToAsyncGenerator(e),t)}YM.scheduleReadableStreamLike=JDe;Object.defineProperty(q_,"__esModule",{value:!0});q_.scheduled=void 0;var QDe=WM,eBe=qM,tBe=XM,nBe=Q_,rBe=ex,iBe=Y_,oBe=X_,aBe=g0,sBe=J_,lBe=K_,cBe=Z_,uBe=pd,fBe=YM;function dBe(e,t){if(e!=null){if(iBe.isInteropObservable(e))return QDe.scheduleObservable(e,t);if(aBe.isArrayLike(e))return tBe.scheduleArray(e,t);if(oBe.isPromise(e))return eBe.schedulePromise(e,t);if(lBe.isAsyncIterable(e))return rBe.scheduleAsyncIterable(e,t);if(sBe.isIterable(e))return nBe.scheduleIterable(e,t);if(uBe.isReadableStreamLike(e))return fBe.scheduleReadableStreamLike(e,t)}throw cBe.createInvalidObservableTypeError(e)}q_.scheduled=dBe;Object.defineProperty($l,"__esModule",{value:!0});$l.from=void 0;var pBe=q_,hBe=jt;function mBe(e,t){return t?pBe.scheduled(e,t):hBe.innerFrom(e)}$l.from=mBe;Object.defineProperty(m0,"__esModule",{value:!0});m0.of=void 0;var gBe=gi,vBe=$l;function yBe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=gBe.popScheduler(e);return vBe.from(e,n)}m0.of=yBe;var tx={};Object.defineProperty(tx,"__esModule",{value:!0});tx.throwError=void 0;var bBe=qn,_Be=Vn;function xBe(e,t){var n=_Be.isFunction(e)?e:function(){return e},r=function(i){return i.error(n())};return new bBe.Observable(t?function(i){return t.schedule(r,0,i)}:r)}tx.throwError=xBe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var t=Rl,n=m0,r=tx,i=Vn;(function(s){s.NEXT="N",s.ERROR="E",s.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var o=function(){function s(l,c,u){this.kind=l,this.value=c,this.error=u,this.hasValue=l==="N"}return s.prototype.observe=function(l){return a(this,l)},s.prototype.do=function(l,c,u){var f=this,d=f.kind,p=f.value,h=f.error;return d==="N"?l==null?void 0:l(p):d==="E"?c==null?void 0:c(h):u==null?void 0:u()},s.prototype.accept=function(l,c,u){var f;return i.isFunction((f=l)===null||f===void 0?void 0:f.next)?this.observe(l):this.do(l,c,u)},s.prototype.toObservable=function(){var l=this,c=l.kind,u=l.value,f=l.error,d=c==="N"?n.of(u):c==="E"?r.throwError(function(){return f}):c==="C"?t.EMPTY:0;if(!d)throw new TypeError("Unexpected notification kind "+c);return d},s.createNext=function(l){return new s("N",l)},s.createError=function(l){return new s("E",void 0,l)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s}();e.Notification=o;function a(s,l){var c,u,f,d=s,p=d.kind,h=d.value,g=d.error;if(typeof p!="string")throw new TypeError('Invalid notification, missing "kind"');p==="N"?(c=l.next)===null||c===void 0||c.call(l,h):p==="E"?(u=l.error)===null||u===void 0||u.call(l,g):(f=l.complete)===null||f===void 0||f.call(l)}e.observeNotification=a})(GM);var KM={};Object.defineProperty(KM,"__esModule",{value:!0});KM.isObservable=void 0;var wBe=qn,Ez=Vn;function SBe(e){return!!e&&(e instanceof wBe.Observable||Ez.isFunction(e.lift)&&Ez.isFunction(e.subscribe))}KM.isObservable=SBe;var ZM={},Bc={};Object.defineProperty(Bc,"__esModule",{value:!0});Bc.EmptyError=void 0;var CBe=Dc;Bc.EmptyError=CBe.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(ZM,"__esModule",{value:!0});ZM.lastValueFrom=void 0;var ABe=Bc;function PBe(e,t){var n=typeof t=="object";return new Promise(function(r,i){var o=!1,a;e.subscribe({next:function(s){a=s,o=!0},error:i,complete:function(){o?r(a):n?r(t.defaultValue):i(new ABe.EmptyError)}})})}ZM.lastValueFrom=PBe;var JM={};Object.defineProperty(JM,"__esModule",{value:!0});JM.firstValueFrom=void 0;var MBe=Bc,EBe=d0;function TBe(e,t){var n=typeof t=="object";return new Promise(function(r,i){var o=new EBe.SafeSubscriber({next:function(a){r(a),o.unsubscribe()},error:i,complete:function(){n?r(t.defaultValue):i(new MBe.EmptyError)}});e.subscribe(o)})}JM.firstValueFrom=TBe;var nx={};Object.defineProperty(nx,"__esModule",{value:!0});nx.ArgumentOutOfRangeError=void 0;var OBe=Dc;nx.ArgumentOutOfRangeError=OBe.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var rx={};Object.defineProperty(rx,"__esModule",{value:!0});rx.NotFoundError=void 0;var IBe=Dc;rx.NotFoundError=IBe.createErrorClass(function(e){return function(n){e(this),this.name="NotFoundError",this.message=n}});var ix={};Object.defineProperty(ix,"__esModule",{value:!0});ix.SequenceError=void 0;var RBe=Dc;ix.SequenceError=RBe.createErrorClass(function(e){return function(n){e(this),this.name="SequenceError",this.message=n}});var JC={},y0={};Object.defineProperty(y0,"__esModule",{value:!0});y0.isValidDate=void 0;function kBe(e){return e instanceof Date&&!isNaN(e)}y0.isValidDate=kBe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var t=Oa,n=y0,r=xt,i=jt,o=Dc,a=It,s=Dl;e.TimeoutError=o.createErrorClass(function(u){return function(d){d===void 0&&(d=null),u(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=d}});function l(u,f){var d=n.isValidDate(u)?{first:u}:typeof u=="number"?{each:u}:u,p=d.first,h=d.each,g=d.with,v=g===void 0?c:g,m=d.scheduler,y=m===void 0?f??t.asyncScheduler:m,_=d.meta,b=_===void 0?null:_;if(p==null&&h==null)throw new TypeError("No timeout provided.");return r.operate(function(x,w){var S,A,C=null,k=0,O=function(T){A=s.executeSchedule(w,y,function(){try{S.unsubscribe(),i.innerFrom(v({meta:b,lastValue:C,seen:k})).subscribe(w)}catch(B){w.error(B)}},T)};S=x.subscribe(a.createOperatorSubscriber(w,function(T){A==null||A.unsubscribe(),k++,w.next(C=T),h>0&&O(h)},void 0,void 0,function(){A!=null&&A.closed||A==null||A.unsubscribe(),C=null})),!k&&O(p!=null?typeof p=="number"?p:+p-y.now():h)})}e.timeout=l;function c(u){throw new e.TimeoutError(u)}})(JC);var QM={},ox={},Nc={},Fc={};Object.defineProperty(Fc,"__esModule",{value:!0});Fc.map=void 0;var LBe=xt,$Be=It;function DBe(e,t){return LBe.operate(function(n,r){var i=0;n.subscribe($Be.createOperatorSubscriber(r,function(o){r.next(e.call(t,o,i++))}))})}Fc.map=DBe;var BBe=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},NBe=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.mapOneOrManyArgs=void 0;var FBe=Fc,jBe=Array.isArray;function zBe(e,t){return jBe(t)?e.apply(void 0,NBe([],BBe(t))):e(t)}function UBe(e){return FBe.map(function(t){return zBe(e,t)})}Nc.mapOneOrManyArgs=UBe;var VBe=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Tz=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(ox,"__esModule",{value:!0});ox.bindCallbackInternals=void 0;var HBe=kh,GBe=qn,WBe=$h,qBe=Nc,XBe=Lh,YBe=h0;function K5(e,t,n,r){if(n)if(HBe.isScheduler(n))r=n;else return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return K5(e,t,r).apply(this,i).pipe(qBe.mapOneOrManyArgs(n))};return r?function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return K5(e,t).apply(this,i).pipe(WBe.subscribeOn(r),XBe.observeOn(r))}:function(){for(var i=this,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=new YBe.AsyncSubject,l=!0;return new GBe.Observable(function(c){var u=s.subscribe(c);if(l){l=!1;var f=!1,d=!1;t.apply(i,Tz(Tz([],VBe(o)),[function(){for(var p=[],h=0;h<arguments.length;h++)p[h]=arguments[h];if(e){var g=p.shift();if(g!=null){s.error(g);return}}s.next(1<p.length?p:p[0]),d=!0,f&&s.complete()}])),d&&s.complete(),f=!0}return u})}}ox.bindCallbackInternals=K5;Object.defineProperty(QM,"__esModule",{value:!0});QM.bindCallback=void 0;var KBe=ox;function ZBe(e,t,n){return KBe.bindCallbackInternals(!1,e,t,n)}QM.bindCallback=ZBe;var eE={};Object.defineProperty(eE,"__esModule",{value:!0});eE.bindNodeCallback=void 0;var JBe=ox;function QBe(e,t,n){return JBe.bindCallbackInternals(!0,e,t,n)}eE.bindNodeCallback=QBe;var hd={},ax={};Object.defineProperty(ax,"__esModule",{value:!0});ax.argsArgArrayOrObject=void 0;var eNe=Array.isArray,tNe=Object.getPrototypeOf,nNe=Object.prototype,rNe=Object.keys;function iNe(e){if(e.length===1){var t=e[0];if(eNe(t))return{args:t,keys:null};if(oNe(t)){var n=rNe(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}ax.argsArgArrayOrObject=iNe;function oNe(e){return e&&typeof e=="object"&&tNe(e)===nNe}var sx={};Object.defineProperty(sx,"__esModule",{value:!0});sx.createObject=void 0;function aNe(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}sx.createObject=aNe;Object.defineProperty(hd,"__esModule",{value:!0});hd.combineLatestInit=hd.combineLatest=void 0;var sNe=qn,lNe=ax,hne=$l,mne=Ri,cNe=Nc,Oz=gi,uNe=sx,fNe=It,dNe=Dl;function pNe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Oz.popScheduler(e),r=Oz.popResultSelector(e),i=lNe.argsArgArrayOrObject(e),o=i.args,a=i.keys;if(o.length===0)return hne.from([],n);var s=new sNe.Observable(gne(o,n,a?function(l){return uNe.createObject(a,l)}:mne.identity));return r?s.pipe(cNe.mapOneOrManyArgs(r)):s}hd.combineLatest=pNe;function gne(e,t,n){return n===void 0&&(n=mne.identity),function(r){Iz(t,function(){for(var i=e.length,o=new Array(i),a=i,s=i,l=function(u){Iz(t,function(){var f=hne.from(e[u],t),d=!1;f.subscribe(fNe.createOperatorSubscriber(r,function(p){o[u]=p,d||(d=!0,s--),s||r.next(n(o.slice()))},function(){--a||r.complete()}))},r)},c=0;c<i;c++)l(c)},r)}}hd.combineLatestInit=gne;function Iz(e,t,n){e?dNe.executeSchedule(n,e,t):t()}var Dh={},b0={},Bh={},Bl={},_0={};Object.defineProperty(_0,"__esModule",{value:!0});_0.mergeInternals=void 0;var hNe=jt,mNe=Dl,Rz=It;function gNe(e,t,n,r,i,o,a,s){var l=[],c=0,u=0,f=!1,d=function(){f&&!l.length&&!c&&t.complete()},p=function(g){return c<r?h(g):l.push(g)},h=function(g){o&&t.next(g),c++;var v=!1;hNe.innerFrom(n(g,u++)).subscribe(Rz.createOperatorSubscriber(t,function(m){i==null||i(m),o?p(m):t.next(m)},function(){v=!0},void 0,function(){if(v)try{c--;for(var m=function(){var y=l.shift();a?mNe.executeSchedule(t,a,function(){return h(y)}):h(y)};l.length&&c<r;)m();d()}catch(y){t.error(y)}}))};return e.subscribe(Rz.createOperatorSubscriber(t,p,function(){f=!0,d()})),function(){s==null||s()}}_0.mergeInternals=gNe;Object.defineProperty(Bl,"__esModule",{value:!0});Bl.mergeMap=void 0;var vNe=Fc,yNe=jt,bNe=xt,_Ne=_0,xNe=Vn;function vne(e,t,n){return n===void 0&&(n=1/0),xNe.isFunction(t)?vne(function(r,i){return vNe.map(function(o,a){return t(r,o,i,a)})(yNe.innerFrom(e(r,i)))},n):(typeof t=="number"&&(n=t),bNe.operate(function(r,i){return _Ne.mergeInternals(r,i,e,n)}))}Bl.mergeMap=vne;Object.defineProperty(Bh,"__esModule",{value:!0});Bh.mergeAll=void 0;var wNe=Bl,SNe=Ri;function CNe(e){return e===void 0&&(e=1/0),wNe.mergeMap(SNe.identity,e)}Bh.mergeAll=CNe;Object.defineProperty(b0,"__esModule",{value:!0});b0.concatAll=void 0;var ANe=Bh;function PNe(){return ANe.mergeAll(1)}b0.concatAll=PNe;Object.defineProperty(Dh,"__esModule",{value:!0});Dh.concat=void 0;var MNe=b0,ENe=gi,TNe=$l;function ONe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return MNe.concatAll()(TNe.from(e,ENe.popScheduler(e)))}Dh.concat=ONe;var tE={},Nh={};Object.defineProperty(Nh,"__esModule",{value:!0});Nh.defer=void 0;var INe=qn,RNe=jt;function kNe(e){return new INe.Observable(function(t){RNe.innerFrom(e()).subscribe(t)})}Nh.defer=kNe;Object.defineProperty(tE,"__esModule",{value:!0});tE.connectable=void 0;var LNe=ii,$Ne=qn,DNe=Nh,BNe={connector:function(){return new LNe.Subject},resetOnDisconnect:!0};function NNe(e,t){t===void 0&&(t=BNe);var n=null,r=t.connector,i=t.resetOnDisconnect,o=i===void 0?!0:i,a=r(),s=new $Ne.Observable(function(l){return a.subscribe(l)});return s.connect=function(){return(!n||n.closed)&&(n=DNe.defer(function(){return e}).subscribe(a),o&&n.add(function(){return a=r()})),n},s}tE.connectable=NNe;var nE={};Object.defineProperty(nE,"__esModule",{value:!0});nE.forkJoin=void 0;var FNe=qn,jNe=ax,zNe=jt,UNe=gi,VNe=It,HNe=Nc,GNe=sx;function WNe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=UNe.popResultSelector(e),r=jNe.argsArgArrayOrObject(e),i=r.args,o=r.keys,a=new FNe.Observable(function(s){var l=i.length;if(!l){s.complete();return}for(var c=new Array(l),u=l,f=l,d=function(h){var g=!1;zNe.innerFrom(i[h]).subscribe(VNe.createOperatorSubscriber(s,function(v){g||(g=!0,f--),c[h]=v},function(){return u--},void 0,function(){(!u||!g)&&(f||s.next(o?GNe.createObject(o,c):c),s.complete())}))},p=0;p<l;p++)d(p)});return n?a.pipe(HNe.mapOneOrManyArgs(n)):a}nE.forkJoin=WNe;var rE={},qNe=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o};Object.defineProperty(rE,"__esModule",{value:!0});rE.fromEvent=void 0;var XNe=jt,YNe=qn,KNe=Bl,ZNe=g0,th=Vn,JNe=Nc,QNe=["addListener","removeListener"],eFe=["addEventListener","removeEventListener"],tFe=["on","off"];function Z5(e,t,n,r){if(th.isFunction(n)&&(r=n,n=void 0),r)return Z5(e,t,n).pipe(JNe.mapOneOrManyArgs(r));var i=qNe(iFe(e)?eFe.map(function(s){return function(l){return e[s](t,l,n)}}):nFe(e)?QNe.map(kz(e,t)):rFe(e)?tFe.map(kz(e,t)):[],2),o=i[0],a=i[1];if(!o&&ZNe.isArrayLike(e))return KNe.mergeMap(function(s){return Z5(s,t,n)})(XNe.innerFrom(e));if(!o)throw new TypeError("Invalid event target");return new YNe.Observable(function(s){var l=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return s.next(1<c.length?c:c[0])};return o(l),function(){return a(l)}})}rE.fromEvent=Z5;function kz(e,t){return function(n){return function(r){return e[n](t,r)}}}function nFe(e){return th.isFunction(e.addListener)&&th.isFunction(e.removeListener)}function rFe(e){return th.isFunction(e.on)&&th.isFunction(e.off)}function iFe(e){return th.isFunction(e.addEventListener)&&th.isFunction(e.removeEventListener)}var iE={};Object.defineProperty(iE,"__esModule",{value:!0});iE.fromEventPattern=void 0;var oFe=qn,aFe=Vn,sFe=Nc;function yne(e,t,n){return n?yne(e,t).pipe(sFe.mapOneOrManyArgs(n)):new oFe.Observable(function(r){var i=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return r.next(a.length===1?a[0]:a)},o=e(i);return aFe.isFunction(t)?function(){return t(i,o)}:void 0})}iE.fromEventPattern=yne;var oE={},lFe=Ce&&Ce.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(oE,"__esModule",{value:!0});oE.generate=void 0;var Lz=Ri,cFe=kh,uFe=Nh,fFe=Q_;function dFe(e,t,n,r,i){var o,a,s,l;arguments.length===1?(o=e,l=o.initialState,t=o.condition,n=o.iterate,a=o.resultSelector,s=a===void 0?Lz.identity:a,i=o.scheduler):(l=e,!r||cFe.isScheduler(r)?(s=Lz.identity,i=r):s=r);function c(){var u;return lFe(this,function(f){switch(f.label){case 0:u=l,f.label=1;case 1:return!t||t(u)?[4,s(u)]:[3,4];case 2:f.sent(),f.label=3;case 3:return u=n(u),[3,1];case 4:return[2]}})}return uFe.defer(i?function(){return fFe.scheduleIterable(c(),i)}:c)}oE.generate=dFe;var aE={};Object.defineProperty(aE,"__esModule",{value:!0});aE.iif=void 0;var pFe=Nh;function hFe(e,t,n){return pFe.defer(function(){return e()?t:n})}aE.iif=hFe;var lx={},jc={};Object.defineProperty(jc,"__esModule",{value:!0});jc.timer=void 0;var mFe=qn,gFe=Oa,vFe=kh,yFe=y0;function bFe(e,t,n){e===void 0&&(e=0),n===void 0&&(n=gFe.async);var r=-1;return t!=null&&(vFe.isScheduler(t)?n=t:r=t),new mFe.Observable(function(i){var o=yFe.isValidDate(e)?+e-n.now():e;o<0&&(o=0);var a=0;return n.schedule(function(){i.closed||(i.next(a++),0<=r?this.schedule(void 0,r):i.complete())},o)})}jc.timer=bFe;Object.defineProperty(lx,"__esModule",{value:!0});lx.interval=void 0;var _Fe=Oa,xFe=jc;function wFe(e,t){return e===void 0&&(e=0),t===void 0&&(t=_Fe.asyncScheduler),e<0&&(e=0),xFe.timer(e,e,t)}lx.interval=wFe;var sE={};Object.defineProperty(sE,"__esModule",{value:!0});sE.merge=void 0;var SFe=Bh,CFe=jt,AFe=Rl,$z=gi,PFe=$l;function MFe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=$z.popScheduler(e),r=$z.popNumber(e,1/0),i=e;return i.length?i.length===1?CFe.innerFrom(i[0]):SFe.mergeAll(r)(PFe.from(i,n)):AFe.EMPTY}sE.merge=MFe;var J5={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var t=qn,n=Ii;e.NEVER=new t.Observable(n.noop);function r(){return e.NEVER}e.never=r})(J5);var cx={},Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.argsOrArgArray=void 0;var EFe=Array.isArray;function TFe(e){return e.length===1&&EFe(e[0])?e[0]:e}Yu.argsOrArgArray=TFe;Object.defineProperty(cx,"__esModule",{value:!0});cx.onErrorResumeNext=void 0;var OFe=qn,IFe=Yu,RFe=It,Dz=Ii,kFe=jt;function LFe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=IFe.argsOrArgArray(e);return new OFe.Observable(function(r){var i=0,o=function(){if(i<n.length){var a=void 0;try{a=kFe.innerFrom(n[i++])}catch{o();return}var s=new RFe.OperatorSubscriber(r,void 0,Dz.noop,Dz.noop);a.subscribe(s),s.add(o)}else r.complete()};o()})}cx.onErrorResumeNext=LFe;var lE={};Object.defineProperty(lE,"__esModule",{value:!0});lE.pairs=void 0;var $Fe=$l;function DFe(e,t){return $Fe.from(Object.entries(e),t)}lE.pairs=DFe;var cE={},uE={};Object.defineProperty(uE,"__esModule",{value:!0});uE.not=void 0;function BFe(e,t){return function(n,r){return!e.call(t,n,r)}}uE.not=BFe;var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.filter=void 0;var NFe=xt,FFe=It;function jFe(e,t){return NFe.operate(function(n,r){var i=0;n.subscribe(FFe.createOperatorSubscriber(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}Ku.filter=jFe;Object.defineProperty(cE,"__esModule",{value:!0});cE.partition=void 0;var zFe=uE,Bz=Ku,Nz=jt;function UFe(e,t,n){return[Bz.filter(t,n)(Nz.innerFrom(e)),Bz.filter(zFe.not(t,n))(Nz.innerFrom(e))]}cE.partition=UFe;var nh={};Object.defineProperty(nh,"__esModule",{value:!0});nh.raceInit=nh.race=void 0;var VFe=qn,bne=jt,HFe=Yu,GFe=It;function WFe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=HFe.argsOrArgArray(e),e.length===1?bne.innerFrom(e[0]):new VFe.Observable(_ne(e))}nh.race=WFe;function _ne(e){return function(t){for(var n=[],r=function(o){n.push(bne.innerFrom(e[o]).subscribe(GFe.createOperatorSubscriber(t,function(a){if(n){for(var s=0;s<n.length;s++)s!==o&&n[s].unsubscribe();n=null}t.next(a)})))},i=0;n&&!t.closed&&i<e.length;i++)r(i)}}nh.raceInit=_ne;var fE={};Object.defineProperty(fE,"__esModule",{value:!0});fE.range=void 0;var qFe=qn,XFe=Rl;function YFe(e,t,n){if(t==null&&(t=e,e=0),t<=0)return XFe.EMPTY;var r=t+e;return new qFe.Observable(n?function(i){var o=e;return n.schedule(function(){o<r?(i.next(o++),this.schedule()):i.complete()})}:function(i){for(var o=e;o<r&&!i.closed;)i.next(o++);i.complete()})}fE.range=YFe;var dE={};Object.defineProperty(dE,"__esModule",{value:!0});dE.using=void 0;var KFe=qn,ZFe=jt,JFe=Rl;function QFe(e,t){return new KFe.Observable(function(n){var r=e(),i=t(r),o=i?ZFe.innerFrom(i):JFe.EMPTY;return o.subscribe(n),function(){r&&r.unsubscribe()}})}dE.using=QFe;var x0={},e6e=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},t6e=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(x0,"__esModule",{value:!0});x0.zip=void 0;var n6e=qn,r6e=jt,i6e=Yu,o6e=Rl,a6e=It,s6e=gi;function l6e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=s6e.popResultSelector(e),r=i6e.argsOrArgArray(e);return r.length?new n6e.Observable(function(i){var o=r.map(function(){return[]}),a=r.map(function(){return!1});i.add(function(){o=a=null});for(var s=function(c){r6e.innerFrom(r[c]).subscribe(a6e.createOperatorSubscriber(i,function(u){if(o[c].push(u),o.every(function(d){return d.length})){var f=o.map(function(d){return d.shift()});i.next(n?n.apply(void 0,t6e([],e6e(f))):f),o.some(function(d,p){return!d.length&&a[p]})&&i.complete()}},function(){a[c]=!0,!o[c].length&&i.complete()}))},l=0;!i.closed&&l<r.length;l++)s(l);return function(){o=a=null}}):o6e.EMPTY}x0.zip=l6e;var xne={};Object.defineProperty(xne,"__esModule",{value:!0});var ux={};Object.defineProperty(ux,"__esModule",{value:!0});ux.audit=void 0;var c6e=xt,u6e=jt,Fz=It;function f6e(e){return c6e.operate(function(t,n){var r=!1,i=null,o=null,a=!1,s=function(){if(o==null||o.unsubscribe(),o=null,r){r=!1;var c=i;i=null,n.next(c)}a&&n.complete()},l=function(){o=null,a&&n.complete()};t.subscribe(Fz.createOperatorSubscriber(n,function(c){r=!0,i=c,o||u6e.innerFrom(e(c)).subscribe(o=Fz.createOperatorSubscriber(n,s,l))},function(){a=!0,(!r||!o||o.closed)&&n.complete()}))})}ux.audit=f6e;var pE={};Object.defineProperty(pE,"__esModule",{value:!0});pE.auditTime=void 0;var d6e=Oa,p6e=ux,h6e=jc;function m6e(e,t){return t===void 0&&(t=d6e.asyncScheduler),p6e.audit(function(){return h6e.timer(e,t)})}pE.auditTime=m6e;var hE={};Object.defineProperty(hE,"__esModule",{value:!0});hE.buffer=void 0;var g6e=xt,v6e=Ii,jz=It,y6e=jt;function b6e(e){return g6e.operate(function(t,n){var r=[];return t.subscribe(jz.createOperatorSubscriber(n,function(i){return r.push(i)},function(){n.next(r),n.complete()})),y6e.innerFrom(e).subscribe(jz.createOperatorSubscriber(n,function(){var i=r;r=[],n.next(i)},v6e.noop)),function(){r=null}})}hE.buffer=b6e;var mE={},ZO=Ce&&Ce.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mE,"__esModule",{value:!0});mE.bufferCount=void 0;var _6e=xt,x6e=It,w6e=Ll;function S6e(e,t){return t===void 0&&(t=null),t=t??e,_6e.operate(function(n,r){var i=[],o=0;n.subscribe(x6e.createOperatorSubscriber(r,function(a){var s,l,c,u,f=null;o++%t===0&&i.push([]);try{for(var d=ZO(i),p=d.next();!p.done;p=d.next()){var h=p.value;h.push(a),e<=h.length&&(f=f??[],f.push(h))}}catch(m){s={error:m}}finally{try{p&&!p.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}if(f)try{for(var g=ZO(f),v=g.next();!v.done;v=g.next()){var h=v.value;w6e.arrRemove(i,h),r.next(h)}}catch(m){c={error:m}}finally{try{v&&!v.done&&(u=g.return)&&u.call(g)}finally{if(c)throw c.error}}},function(){var a,s;try{for(var l=ZO(i),c=l.next();!c.done;c=l.next()){var u=c.value;r.next(u)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}r.complete()},void 0,function(){i=null}))})}mE.bufferCount=S6e;var gE={},C6e=Ce&&Ce.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(gE,"__esModule",{value:!0});gE.bufferTime=void 0;var A6e=Mi,P6e=xt,M6e=It,E6e=Ll,T6e=Oa,O6e=gi,zz=Dl;function I6e(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=(t=O6e.popScheduler(r))!==null&&t!==void 0?t:T6e.asyncScheduler,a=(n=r[0])!==null&&n!==void 0?n:null,s=r[1]||1/0;return P6e.operate(function(l,c){var u=[],f=!1,d=function(g){var v=g.buffer,m=g.subs;m.unsubscribe(),E6e.arrRemove(u,g),c.next(v),f&&p()},p=function(){if(u){var g=new A6e.Subscription;c.add(g);var v=[],m={buffer:v,subs:g};u.push(m),zz.executeSchedule(g,o,function(){return d(m)},e)}};a!==null&&a>=0?zz.executeSchedule(c,o,p,a,!0):f=!0,p();var h=M6e.createOperatorSubscriber(c,function(g){var v,m,y=u.slice();try{for(var _=C6e(y),b=_.next();!b.done;b=_.next()){var x=b.value,w=x.buffer;w.push(g),s<=w.length&&d(x)}}catch(S){v={error:S}}finally{try{b&&!b.done&&(m=_.return)&&m.call(_)}finally{if(v)throw v.error}}},function(){for(;u!=null&&u.length;)c.next(u.shift().buffer);h==null||h.unsubscribe(),c.complete(),c.unsubscribe()},void 0,function(){return u=null});l.subscribe(h)})}gE.bufferTime=I6e;var vE={},R6e=Ce&&Ce.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(vE,"__esModule",{value:!0});vE.bufferToggle=void 0;var k6e=Mi,L6e=xt,Uz=jt,JO=It,Vz=Ii,$6e=Ll;function D6e(e,t){return L6e.operate(function(n,r){var i=[];Uz.innerFrom(e).subscribe(JO.createOperatorSubscriber(r,function(o){var a=[];i.push(a);var s=new k6e.Subscription,l=function(){$6e.arrRemove(i,a),r.next(a),s.unsubscribe()};s.add(Uz.innerFrom(t(o)).subscribe(JO.createOperatorSubscriber(r,l,Vz.noop)))},Vz.noop)),n.subscribe(JO.createOperatorSubscriber(r,function(o){var a,s;try{for(var l=R6e(i),c=l.next();!c.done;c=l.next()){var u=c.value;u.push(o)}}catch(f){a={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}},function(){for(;i.length>0;)r.next(i.shift());r.complete()}))})}vE.bufferToggle=D6e;var yE={};Object.defineProperty(yE,"__esModule",{value:!0});yE.bufferWhen=void 0;var B6e=xt,N6e=Ii,Hz=It,F6e=jt;function j6e(e){return B6e.operate(function(t,n){var r=null,i=null,o=function(){i==null||i.unsubscribe();var a=r;r=[],a&&n.next(a),F6e.innerFrom(e()).subscribe(i=Hz.createOperatorSubscriber(n,o,N6e.noop))};o(),t.subscribe(Hz.createOperatorSubscriber(n,function(a){return r==null?void 0:r.push(a)},function(){r&&n.next(r),n.complete()},void 0,function(){return r=i=null}))})}yE.bufferWhen=j6e;var bE={};Object.defineProperty(bE,"__esModule",{value:!0});bE.catchError=void 0;var z6e=jt,U6e=It,V6e=xt;function wne(e){return V6e.operate(function(t,n){var r=null,i=!1,o;r=t.subscribe(U6e.createOperatorSubscriber(n,void 0,void 0,function(a){o=z6e.innerFrom(e(a,wne(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}bE.catchError=wne;var _E={},fx={},dx={},px={},Dd={},hx={};Object.defineProperty(hx,"__esModule",{value:!0});hx.scanInternals=void 0;var H6e=It;function G6e(e,t,n,r,i){return function(o,a){var s=n,l=t,c=0;o.subscribe(H6e.createOperatorSubscriber(a,function(u){var f=c++;l=s?e(l,u,f):(s=!0,u),r&&a.next(l)},i&&function(){s&&a.next(l),a.complete()}))}}hx.scanInternals=G6e;Object.defineProperty(Dd,"__esModule",{value:!0});Dd.reduce=void 0;var W6e=hx,q6e=xt;function X6e(e,t){return q6e.operate(W6e.scanInternals(e,t,arguments.length>=2,!1,!0))}Dd.reduce=X6e;Object.defineProperty(px,"__esModule",{value:!0});px.toArray=void 0;var Y6e=Dd,K6e=xt,Z6e=function(e,t){return e.push(t),e};function J6e(){return K6e.operate(function(e,t){Y6e.reduce(Z6e,[])(e).subscribe(t)})}px.toArray=J6e;Object.defineProperty(dx,"__esModule",{value:!0});dx.joinAllInternals=void 0;var Q6e=Ri,eje=Nc,tje=Ru,nje=Bl,rje=px;function ije(e,t){return tje.pipe(rje.toArray(),nje.mergeMap(function(n){return e(n)}),t?eje.mapOneOrManyArgs(t):Q6e.identity)}dx.joinAllInternals=ije;Object.defineProperty(fx,"__esModule",{value:!0});fx.combineLatestAll=void 0;var oje=hd,aje=dx;function sje(e){return aje.joinAllInternals(oje.combineLatest,e)}fx.combineLatestAll=sje;Object.defineProperty(_E,"__esModule",{value:!0});_E.combineAll=void 0;var lje=fx;_E.combineAll=lje.combineLatestAll;var xE={},wE={},Gz=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Wz=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(wE,"__esModule",{value:!0});wE.combineLatest=void 0;var cje=hd,uje=xt,fje=Yu,dje=Nc,pje=Ru,hje=gi;function Sne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=hje.popResultSelector(e);return n?pje.pipe(Sne.apply(void 0,Wz([],Gz(e))),dje.mapOneOrManyArgs(n)):uje.operate(function(r,i){cje.combineLatestInit(Wz([r],Gz(fje.argsOrArgArray(e))))(i)})}wE.combineLatest=Sne;var mje=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},gje=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(xE,"__esModule",{value:!0});xE.combineLatestWith=void 0;var vje=wE;function yje(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return vje.combineLatest.apply(void 0,gje([],mje(e)))}xE.combineLatestWith=yje;var mx={};Object.defineProperty(mx,"__esModule",{value:!0});mx.concatMap=void 0;var qz=Bl,bje=Vn;function _je(e,t){return bje.isFunction(t)?qz.mergeMap(e,t,1):qz.mergeMap(e,1)}mx.concatMap=_je;var SE={};Object.defineProperty(SE,"__esModule",{value:!0});SE.concatMapTo=void 0;var Xz=mx,xje=Vn;function wje(e,t){return xje.isFunction(t)?Xz.concatMap(function(){return e},t):Xz.concatMap(function(){return e})}SE.concatMapTo=wje;var CE={},AE={},Sje=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Cje=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(AE,"__esModule",{value:!0});AE.concat=void 0;var Aje=xt,Pje=b0,Mje=gi,Eje=$l;function Tje(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Mje.popScheduler(e);return Aje.operate(function(r,i){Pje.concatAll()(Eje.from(Cje([r],Sje(e)),n)).subscribe(i)})}AE.concat=Tje;var Oje=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},Ije=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(CE,"__esModule",{value:!0});CE.concatWith=void 0;var Rje=AE;function kje(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Rje.concat.apply(void 0,Ije([],Oje(e)))}CE.concatWith=kje;var w0={},PE={};Object.defineProperty(PE,"__esModule",{value:!0});PE.fromSubscribable=void 0;var Lje=qn;function $je(e){return new Lje.Observable(function(t){return e.subscribe(t)})}PE.fromSubscribable=$je;Object.defineProperty(w0,"__esModule",{value:!0});w0.connect=void 0;var Dje=ii,Bje=jt,Nje=xt,Fje=PE,jje={connector:function(){return new Dje.Subject}};function zje(e,t){t===void 0&&(t=jje);var n=t.connector;return Nje.operate(function(r,i){var o=n();Bje.innerFrom(e(Fje.fromSubscribable(o))).subscribe(i),i.add(r.subscribe(o))})}w0.connect=zje;var ME={};Object.defineProperty(ME,"__esModule",{value:!0});ME.count=void 0;var Uje=Dd;function Vje(e){return Uje.reduce(function(t,n,r){return!e||e(n,r)?t+1:t},0)}ME.count=Vje;var EE={};Object.defineProperty(EE,"__esModule",{value:!0});EE.debounce=void 0;var Hje=xt,Gje=Ii,Yz=It,Wje=jt;function qje(e){return Hje.operate(function(t,n){var r=!1,i=null,o=null,a=function(){if(o==null||o.unsubscribe(),o=null,r){r=!1;var s=i;i=null,n.next(s)}};t.subscribe(Yz.createOperatorSubscriber(n,function(s){o==null||o.unsubscribe(),r=!0,i=s,o=Yz.createOperatorSubscriber(n,a,Gje.noop),Wje.innerFrom(e(s)).subscribe(o)},function(){a(),n.complete()},void 0,function(){i=o=null}))})}EE.debounce=qje;var TE={};Object.defineProperty(TE,"__esModule",{value:!0});TE.debounceTime=void 0;var Xje=Oa,Yje=xt,Kje=It;function Zje(e,t){return t===void 0&&(t=Xje.asyncScheduler),Yje.operate(function(n,r){var i=null,o=null,a=null,s=function(){if(i){i.unsubscribe(),i=null;var c=o;o=null,r.next(c)}};function l(){var c=a+e,u=t.now();if(u<c){i=this.schedule(void 0,c-u),r.add(i);return}s()}n.subscribe(Kje.createOperatorSubscriber(r,function(c){o=c,a=t.now(),i||(i=t.schedule(l,e),r.add(i))},function(){s(),r.complete()},void 0,function(){o=i=null}))})}TE.debounceTime=Zje;var Fh={};Object.defineProperty(Fh,"__esModule",{value:!0});Fh.defaultIfEmpty=void 0;var Jje=xt,Qje=It;function e8e(e){return Jje.operate(function(t,n){var r=!1;t.subscribe(Qje.createOperatorSubscriber(n,function(i){r=!0,n.next(i)},function(){r||n.next(e),n.complete()}))})}Fh.defaultIfEmpty=e8e;var OE={},gx={},jh={};Object.defineProperty(jh,"__esModule",{value:!0});jh.take=void 0;var t8e=Rl,n8e=xt,r8e=It;function i8e(e){return e<=0?function(){return t8e.EMPTY}:n8e.operate(function(t,n){var r=0;t.subscribe(r8e.createOperatorSubscriber(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}jh.take=i8e;var vx={};Object.defineProperty(vx,"__esModule",{value:!0});vx.ignoreElements=void 0;var o8e=xt,a8e=It,s8e=Ii;function l8e(){return o8e.operate(function(e,t){e.subscribe(a8e.createOperatorSubscriber(t,s8e.noop))})}vx.ignoreElements=l8e;var yx={};Object.defineProperty(yx,"__esModule",{value:!0});yx.mapTo=void 0;var c8e=Fc;function u8e(e){return c8e.map(function(){return e})}yx.mapTo=u8e;Object.defineProperty(gx,"__esModule",{value:!0});gx.delayWhen=void 0;var f8e=Dh,Kz=jh,d8e=vx,p8e=yx,h8e=Bl,m8e=jt;function Cne(e,t){return t?function(n){return f8e.concat(t.pipe(Kz.take(1),d8e.ignoreElements()),n.pipe(Cne(e)))}:h8e.mergeMap(function(n,r){return m8e.innerFrom(e(n,r)).pipe(Kz.take(1),p8e.mapTo(n))})}gx.delayWhen=Cne;Object.defineProperty(OE,"__esModule",{value:!0});OE.delay=void 0;var g8e=Oa,v8e=gx,y8e=jc;function b8e(e,t){t===void 0&&(t=g8e.asyncScheduler);var n=y8e.timer(e,t);return v8e.delayWhen(function(){return n})}OE.delay=b8e;var IE={};Object.defineProperty(IE,"__esModule",{value:!0});IE.dematerialize=void 0;var _8e=GM,x8e=xt,w8e=It;function S8e(){return x8e.operate(function(e,t){e.subscribe(w8e.createOperatorSubscriber(t,function(n){return _8e.observeNotification(n,t)}))})}IE.dematerialize=S8e;var RE={};Object.defineProperty(RE,"__esModule",{value:!0});RE.distinct=void 0;var C8e=xt,Zz=It,A8e=Ii,P8e=jt;function M8e(e,t){return C8e.operate(function(n,r){var i=new Set;n.subscribe(Zz.createOperatorSubscriber(r,function(o){var a=e?e(o):o;i.has(a)||(i.add(a),r.next(o))})),t&&P8e.innerFrom(t).subscribe(Zz.createOperatorSubscriber(r,function(){return i.clear()},A8e.noop))})}RE.distinct=M8e;var bx={};Object.defineProperty(bx,"__esModule",{value:!0});bx.distinctUntilChanged=void 0;var E8e=Ri,T8e=xt,O8e=It;function I8e(e,t){return t===void 0&&(t=E8e.identity),e=e??R8e,T8e.operate(function(n,r){var i,o=!0;n.subscribe(O8e.createOperatorSubscriber(r,function(a){var s=t(a);(o||!e(i,s))&&(o=!1,i=s,r.next(a))}))})}bx.distinctUntilChanged=I8e;function R8e(e,t){return e===t}var kE={};Object.defineProperty(kE,"__esModule",{value:!0});kE.distinctUntilKeyChanged=void 0;var k8e=bx;function L8e(e,t){return k8e.distinctUntilChanged(function(n,r){return t?t(n[e],r[e]):n[e]===r[e]})}kE.distinctUntilKeyChanged=L8e;var LE={},zh={};Object.defineProperty(zh,"__esModule",{value:!0});zh.throwIfEmpty=void 0;var $8e=Bc,D8e=xt,B8e=It;function N8e(e){return e===void 0&&(e=F8e),D8e.operate(function(t,n){var r=!1;t.subscribe(B8e.createOperatorSubscriber(n,function(i){r=!0,n.next(i)},function(){return r?n.complete():n.error(e())}))})}zh.throwIfEmpty=N8e;function F8e(){return new $8e.EmptyError}Object.defineProperty(LE,"__esModule",{value:!0});LE.elementAt=void 0;var Jz=nx,j8e=Ku,z8e=zh,U8e=Fh,V8e=jh;function H8e(e,t){if(e<0)throw new Jz.ArgumentOutOfRangeError;var n=arguments.length>=2;return function(r){return r.pipe(j8e.filter(function(i,o){return o===e}),V8e.take(1),n?U8e.defaultIfEmpty(t):z8e.throwIfEmpty(function(){return new Jz.ArgumentOutOfRangeError}))}}LE.elementAt=H8e;var $E={},G8e=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},W8e=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty($E,"__esModule",{value:!0});$E.endWith=void 0;var q8e=Dh,X8e=m0;function Y8e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return q8e.concat(n,X8e.of.apply(void 0,W8e([],G8e(e))))}}$E.endWith=Y8e;var DE={};Object.defineProperty(DE,"__esModule",{value:!0});DE.every=void 0;var K8e=xt,Z8e=It;function J8e(e,t){return K8e.operate(function(n,r){var i=0;n.subscribe(Z8e.createOperatorSubscriber(r,function(o){e.call(t,o,i++,n)||(r.next(!1),r.complete())},function(){r.next(!0),r.complete()}))})}DE.every=J8e;var BE={},_x={},xx={};Object.defineProperty(xx,"__esModule",{value:!0});xx.exhaustMap=void 0;var Q8e=Fc,Qz=jt,eze=xt,eU=It;function Ane(e,t){return t?function(n){return n.pipe(Ane(function(r,i){return Qz.innerFrom(e(r,i)).pipe(Q8e.map(function(o,a){return t(r,o,i,a)}))}))}:eze.operate(function(n,r){var i=0,o=null,a=!1;n.subscribe(eU.createOperatorSubscriber(r,function(s){o||(o=eU.createOperatorSubscriber(r,void 0,function(){o=null,a&&r.complete()}),Qz.innerFrom(e(s,i++)).subscribe(o))},function(){a=!0,!o&&r.complete()}))})}xx.exhaustMap=Ane;Object.defineProperty(_x,"__esModule",{value:!0});_x.exhaustAll=void 0;var tze=xx,nze=Ri;function rze(){return tze.exhaustMap(nze.identity)}_x.exhaustAll=rze;Object.defineProperty(BE,"__esModule",{value:!0});BE.exhaust=void 0;var ize=_x;BE.exhaust=ize.exhaustAll;var NE={};Object.defineProperty(NE,"__esModule",{value:!0});NE.expand=void 0;var oze=xt,aze=_0;function sze(e,t,n){return t===void 0&&(t=1/0),t=(t||0)<1?1/0:t,oze.operate(function(r,i){return aze.mergeInternals(r,i,e,t,void 0,!0,n)})}NE.expand=sze;var FE={};Object.defineProperty(FE,"__esModule",{value:!0});FE.finalize=void 0;var lze=xt;function cze(e){return lze.operate(function(t,n){try{t.subscribe(n)}finally{n.add(e)}})}FE.finalize=cze;var rh={};Object.defineProperty(rh,"__esModule",{value:!0});rh.createFind=rh.find=void 0;var uze=xt,fze=It;function dze(e,t){return uze.operate(Pne(e,t,"value"))}rh.find=dze;function Pne(e,t,n){var r=n==="index";return function(i,o){var a=0;i.subscribe(fze.createOperatorSubscriber(o,function(s){var l=a++;e.call(t,s,l,i)&&(o.next(r?l:s),o.complete())},function(){o.next(r?-1:void 0),o.complete()}))}}rh.createFind=Pne;var jE={};Object.defineProperty(jE,"__esModule",{value:!0});jE.findIndex=void 0;var pze=xt,hze=rh;function mze(e,t){return pze.operate(hze.createFind(e,t,"index"))}jE.findIndex=mze;var zE={};Object.defineProperty(zE,"__esModule",{value:!0});zE.first=void 0;var gze=Bc,vze=Ku,yze=jh,bze=Fh,_ze=zh,xze=Ri;function wze(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?vze.filter(function(i,o){return e(i,o,r)}):xze.identity,yze.take(1),n?bze.defaultIfEmpty(t):_ze.throwIfEmpty(function(){return new gze.EmptyError}))}}zE.first=wze;var UE={};Object.defineProperty(UE,"__esModule",{value:!0});UE.groupBy=void 0;var Sze=qn,Cze=jt,Aze=ii,Pze=xt,tU=It;function Mze(e,t,n,r){return Pze.operate(function(i,o){var a;!t||typeof t=="function"?a=t:(n=t.duration,a=t.element,r=t.connector);var s=new Map,l=function(h){s.forEach(h),h(o)},c=function(h){return l(function(g){return g.error(h)})},u=0,f=!1,d=new tU.OperatorSubscriber(o,function(h){try{var g=e(h),v=s.get(g);if(!v){s.set(g,v=r?r():new Aze.Subject);var m=p(g,v);if(o.next(m),n){var y=tU.createOperatorSubscriber(v,function(){v.complete(),y==null||y.unsubscribe()},void 0,void 0,function(){return s.delete(g)});d.add(Cze.innerFrom(n(m)).subscribe(y))}}v.next(a?a(h):h)}catch(_){c(_)}},function(){return l(function(h){return h.complete()})},c,function(){return s.clear()},function(){return f=!0,u===0});i.subscribe(d);function p(h,g){var v=new Sze.Observable(function(m){u++;var y=g.subscribe(m);return function(){y.unsubscribe(),--u===0&&f&&d.unsubscribe()}});return v.key=h,v}})}UE.groupBy=Mze;var VE={};Object.defineProperty(VE,"__esModule",{value:!0});VE.isEmpty=void 0;var Eze=xt,Tze=It;function Oze(){return Eze.operate(function(e,t){e.subscribe(Tze.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}VE.isEmpty=Oze;var HE={},wx={},Ize=Ce&&Ce.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(wx,"__esModule",{value:!0});wx.takeLast=void 0;var Rze=Rl,kze=xt,Lze=It;function $ze(e){return e<=0?function(){return Rze.EMPTY}:kze.operate(function(t,n){var r=[];t.subscribe(Lze.createOperatorSubscriber(n,function(i){r.push(i),e<r.length&&r.shift()},function(){var i,o;try{for(var a=Ize(r),s=a.next();!s.done;s=a.next()){var l=s.value;n.next(l)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}n.complete()},void 0,function(){r=null}))})}wx.takeLast=$ze;Object.defineProperty(HE,"__esModule",{value:!0});HE.last=void 0;var Dze=Bc,Bze=Ku,Nze=wx,Fze=zh,jze=Fh,zze=Ri;function Uze(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Bze.filter(function(i,o){return e(i,o,r)}):zze.identity,Nze.takeLast(1),n?jze.defaultIfEmpty(t):Fze.throwIfEmpty(function(){return new Dze.EmptyError}))}}HE.last=Uze;var GE={};Object.defineProperty(GE,"__esModule",{value:!0});GE.materialize=void 0;var QO=GM,Vze=xt,Hze=It;function Gze(){return Vze.operate(function(e,t){e.subscribe(Hze.createOperatorSubscriber(t,function(n){t.next(QO.Notification.createNext(n))},function(){t.next(QO.Notification.createComplete()),t.complete()},function(n){t.next(QO.Notification.createError(n)),t.complete()}))})}GE.materialize=Gze;var WE={};Object.defineProperty(WE,"__esModule",{value:!0});WE.max=void 0;var Wze=Dd,qze=Vn;function Xze(e){return Wze.reduce(qze.isFunction(e)?function(t,n){return e(t,n)>0?t:n}:function(t,n){return t>n?t:n})}WE.max=Xze;var qE={};Object.defineProperty(qE,"__esModule",{value:!0});qE.flatMap=void 0;var Yze=Bl;qE.flatMap=Yze.mergeMap;var XE={};Object.defineProperty(XE,"__esModule",{value:!0});XE.mergeMapTo=void 0;var nU=Bl,Kze=Vn;function Zze(e,t,n){return n===void 0&&(n=1/0),Kze.isFunction(t)?nU.mergeMap(function(){return e},t,n):(typeof t=="number"&&(n=t),nU.mergeMap(function(){return e},n))}XE.mergeMapTo=Zze;var YE={};Object.defineProperty(YE,"__esModule",{value:!0});YE.mergeScan=void 0;var Jze=xt,Qze=_0;function eUe(e,t,n){return n===void 0&&(n=1/0),Jze.operate(function(r,i){var o=t;return Qze.mergeInternals(r,i,function(a,s){return e(o,a,s)},n,function(a){o=a},!1,void 0,function(){return o=null})})}YE.mergeScan=eUe;var KE={},ZE={},tUe=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},nUe=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(ZE,"__esModule",{value:!0});ZE.merge=void 0;var rUe=xt,iUe=Yu,oUe=Bh,rU=gi,aUe=$l;function sUe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=rU.popScheduler(e),r=rU.popNumber(e,1/0);return e=iUe.argsOrArgArray(e),rUe.operate(function(i,o){oUe.mergeAll(r)(aUe.from(nUe([i],tUe(e)),n)).subscribe(o)})}ZE.merge=sUe;var lUe=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},cUe=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(KE,"__esModule",{value:!0});KE.mergeWith=void 0;var uUe=ZE;function fUe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return uUe.merge.apply(void 0,cUe([],lUe(e)))}KE.mergeWith=fUe;var JE={};Object.defineProperty(JE,"__esModule",{value:!0});JE.min=void 0;var dUe=Dd,pUe=Vn;function hUe(e){return dUe.reduce(pUe.isFunction(e)?function(t,n){return e(t,n)<0?t:n}:function(t,n){return t<n?t:n})}JE.min=hUe;var S0={};Object.defineProperty(S0,"__esModule",{value:!0});S0.multicast=void 0;var mUe=Rh,iU=Vn,gUe=w0;function vUe(e,t){var n=iU.isFunction(e)?e:function(){return e};return iU.isFunction(t)?gUe.connect(t,{connector:n}):function(r){return new mUe.ConnectableObservable(r,n)}}S0.multicast=vUe;var _v={},yUe=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},bUe=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(_v,"__esModule",{value:!0});_v.onErrorResumeNext=_v.onErrorResumeNextWith=void 0;var _Ue=Yu,xUe=cx;function Mne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=_Ue.argsOrArgArray(e);return function(r){return xUe.onErrorResumeNext.apply(void 0,bUe([r],yUe(n)))}}_v.onErrorResumeNextWith=Mne;_v.onErrorResumeNext=Mne;var QE={};Object.defineProperty(QE,"__esModule",{value:!0});QE.pairwise=void 0;var wUe=xt,SUe=It;function CUe(){return wUe.operate(function(e,t){var n,r=!1;e.subscribe(SUe.createOperatorSubscriber(t,function(i){var o=n;n=i,r&&t.next([o,i]),r=!0}))})}QE.pairwise=CUe;var e3={};Object.defineProperty(e3,"__esModule",{value:!0});e3.pluck=void 0;var AUe=Fc;function PUe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(n===0)throw new Error("list of properties cannot be empty.");return AUe.map(function(r){for(var i=r,o=0;o<n;o++){var a=i==null?void 0:i[e[o]];if(typeof a<"u")i=a;else return}return i})}e3.pluck=PUe;var t3={};Object.defineProperty(t3,"__esModule",{value:!0});t3.publish=void 0;var MUe=ii,EUe=S0,TUe=w0;function OUe(e){return e?function(t){return TUe.connect(e)(t)}:function(t){return EUe.multicast(new MUe.Subject)(t)}}t3.publish=OUe;var n3={};Object.defineProperty(n3,"__esModule",{value:!0});n3.publishBehavior=void 0;var IUe=G_,RUe=Rh;function kUe(e){return function(t){var n=new IUe.BehaviorSubject(e);return new RUe.ConnectableObservable(t,function(){return n})}}n3.publishBehavior=kUe;var r3={};Object.defineProperty(r3,"__esModule",{value:!0});r3.publishLast=void 0;var LUe=h0,$Ue=Rh;function DUe(){return function(e){var t=new LUe.AsyncSubject;return new $Ue.ConnectableObservable(e,function(){return t})}}r3.publishLast=DUe;var i3={};Object.defineProperty(i3,"__esModule",{value:!0});i3.publishReplay=void 0;var BUe=p0,NUe=S0,oU=Vn;function FUe(e,t,n,r){n&&!oU.isFunction(n)&&(r=n);var i=oU.isFunction(n)?n:void 0;return function(o){return NUe.multicast(new BUe.ReplaySubject(e,t,r),i)(o)}}i3.publishReplay=FUe;var o3={},jUe=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},zUe=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(o3,"__esModule",{value:!0});o3.raceWith=void 0;var UUe=nh,VUe=xt,HUe=Ri;function GUe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?VUe.operate(function(n,r){UUe.raceInit(zUe([n],jUe(e)))(r)}):HUe.identity}o3.raceWith=GUe;var a3={};Object.defineProperty(a3,"__esModule",{value:!0});a3.repeat=void 0;var WUe=Rl,qUe=xt,aU=It,XUe=jt,YUe=jc;function KUe(e){var t,n=1/0,r;return e!=null&&(typeof e=="object"?(t=e.count,n=t===void 0?1/0:t,r=e.delay):n=e),n<=0?function(){return WUe.EMPTY}:qUe.operate(function(i,o){var a=0,s,l=function(){if(s==null||s.unsubscribe(),s=null,r!=null){var u=typeof r=="number"?YUe.timer(r):XUe.innerFrom(r(a)),f=aU.createOperatorSubscriber(o,function(){f.unsubscribe(),c()});u.subscribe(f)}else c()},c=function(){var u=!1;s=i.subscribe(aU.createOperatorSubscriber(o,void 0,function(){++a<n?s?l():u=!0:o.complete()})),u&&l()};c()})}a3.repeat=KUe;var s3={};Object.defineProperty(s3,"__esModule",{value:!0});s3.repeatWhen=void 0;var ZUe=jt,JUe=ii,QUe=xt,sU=It;function e9e(e){return QUe.operate(function(t,n){var r,i=!1,o,a=!1,s=!1,l=function(){return s&&a&&(n.complete(),!0)},c=function(){return o||(o=new JUe.Subject,ZUe.innerFrom(e(o)).subscribe(sU.createOperatorSubscriber(n,function(){r?u():i=!0},function(){a=!0,l()}))),o},u=function(){s=!1,r=t.subscribe(sU.createOperatorSubscriber(n,void 0,function(){s=!0,!l()&&c().next()})),i&&(r.unsubscribe(),r=null,i=!1,u())};u()})}s3.repeatWhen=e9e;var l3={};Object.defineProperty(l3,"__esModule",{value:!0});l3.retry=void 0;var t9e=xt,lU=It,n9e=Ri,r9e=jc,i9e=jt;function o9e(e){e===void 0&&(e=1/0);var t;e&&typeof e=="object"?t=e:t={count:e};var n=t.count,r=n===void 0?1/0:n,i=t.delay,o=t.resetOnSuccess,a=o===void 0?!1:o;return r<=0?n9e.identity:t9e.operate(function(s,l){var c=0,u,f=function(){var d=!1;u=s.subscribe(lU.createOperatorSubscriber(l,function(p){a&&(c=0),l.next(p)},void 0,function(p){if(c++<r){var h=function(){u?(u.unsubscribe(),u=null,f()):d=!0};if(i!=null){var g=typeof i=="number"?r9e.timer(i):i9e.innerFrom(i(p,c)),v=lU.createOperatorSubscriber(l,function(){v.unsubscribe(),h()},function(){l.complete()});g.subscribe(v)}else h()}else l.error(p)})),d&&(u.unsubscribe(),u=null,f())};f()})}l3.retry=o9e;var c3={};Object.defineProperty(c3,"__esModule",{value:!0});c3.retryWhen=void 0;var a9e=jt,s9e=ii,l9e=xt,cU=It;function c9e(e){return l9e.operate(function(t,n){var r,i=!1,o,a=function(){r=t.subscribe(cU.createOperatorSubscriber(n,void 0,void 0,function(s){o||(o=new s9e.Subject,a9e.innerFrom(e(o)).subscribe(cU.createOperatorSubscriber(n,function(){return r?a():i=!0}))),o&&o.next(s)})),i&&(r.unsubscribe(),r=null,i=!1,a())};a()})}c3.retryWhen=c9e;var Sx={};Object.defineProperty(Sx,"__esModule",{value:!0});Sx.sample=void 0;var u9e=jt,f9e=xt,d9e=Ii,uU=It;function p9e(e){return f9e.operate(function(t,n){var r=!1,i=null;t.subscribe(uU.createOperatorSubscriber(n,function(o){r=!0,i=o})),u9e.innerFrom(e).subscribe(uU.createOperatorSubscriber(n,function(){if(r){r=!1;var o=i;i=null,n.next(o)}},d9e.noop))})}Sx.sample=p9e;var u3={};Object.defineProperty(u3,"__esModule",{value:!0});u3.sampleTime=void 0;var h9e=Oa,m9e=Sx,g9e=lx;function v9e(e,t){return t===void 0&&(t=h9e.asyncScheduler),m9e.sample(g9e.interval(e,t))}u3.sampleTime=v9e;var f3={};Object.defineProperty(f3,"__esModule",{value:!0});f3.scan=void 0;var y9e=xt,b9e=hx;function _9e(e,t){return y9e.operate(b9e.scanInternals(e,t,arguments.length>=2,!0))}f3.scan=_9e;var d3={};Object.defineProperty(d3,"__esModule",{value:!0});d3.sequenceEqual=void 0;var x9e=xt,w9e=It,S9e=jt;function C9e(e,t){return t===void 0&&(t=function(n,r){return n===r}),x9e.operate(function(n,r){var i=fU(),o=fU(),a=function(l){r.next(l),r.complete()},s=function(l,c){var u=w9e.createOperatorSubscriber(r,function(f){var d=c.buffer,p=c.complete;d.length===0?p?a(!1):l.buffer.push(f):!t(f,d.shift())&&a(!1)},function(){l.complete=!0;var f=c.complete,d=c.buffer;f&&a(d.length===0),u==null||u.unsubscribe()});return u};n.subscribe(s(i,o)),S9e.innerFrom(e).subscribe(s(o,i))})}d3.sequenceEqual=C9e;function fU(){return{buffer:[],complete:!1}}var Cx={},A9e=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},P9e=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(Cx,"__esModule",{value:!0});Cx.share=void 0;var Ene=jt,M9e=ii,Tne=d0,E9e=xt;function T9e(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new M9e.Subject}:t,r=e.resetOnError,i=r===void 0?!0:r,o=e.resetOnComplete,a=o===void 0?!0:o,s=e.resetOnRefCountZero,l=s===void 0?!0:s;return function(c){var u,f,d,p=0,h=!1,g=!1,v=function(){f==null||f.unsubscribe(),f=void 0},m=function(){v(),u=d=void 0,h=g=!1},y=function(){var _=u;m(),_==null||_.unsubscribe()};return E9e.operate(function(_,b){p++,!g&&!h&&v();var x=d=d??n();b.add(function(){p--,p===0&&!g&&!h&&(f=eI(y,l))}),x.subscribe(b),!u&&p>0&&(u=new Tne.SafeSubscriber({next:function(w){return x.next(w)},error:function(w){g=!0,v(),f=eI(m,i,w),x.error(w)},complete:function(){h=!0,v(),f=eI(m,a),x.complete()}}),Ene.innerFrom(_).subscribe(u))})(c)}}Cx.share=T9e;function eI(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new Tne.SafeSubscriber({next:function(){i.unsubscribe(),e()}});return Ene.innerFrom(t.apply(void 0,P9e([],A9e(n)))).subscribe(i)}}var p3={};Object.defineProperty(p3,"__esModule",{value:!0});p3.shareReplay=void 0;var O9e=p0,I9e=Cx;function R9e(e,t,n){var r,i,o,a,s=!1;return e&&typeof e=="object"?(r=e.bufferSize,a=r===void 0?1/0:r,i=e.windowTime,t=i===void 0?1/0:i,o=e.refCount,s=o===void 0?!1:o,n=e.scheduler):a=e??1/0,I9e.share({connector:function(){return new O9e.ReplaySubject(a,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}p3.shareReplay=R9e;var h3={};Object.defineProperty(h3,"__esModule",{value:!0});h3.single=void 0;var k9e=Bc,L9e=ix,$9e=rx,D9e=xt,B9e=It;function N9e(e){return D9e.operate(function(t,n){var r=!1,i,o=!1,a=0;t.subscribe(B9e.createOperatorSubscriber(n,function(s){o=!0,(!e||e(s,a++,t))&&(r&&n.error(new L9e.SequenceError("Too many matching values")),r=!0,i=s)},function(){r?(n.next(i),n.complete()):n.error(o?new $9e.NotFoundError("No matching values"):new k9e.EmptyError)}))})}h3.single=N9e;var m3={};Object.defineProperty(m3,"__esModule",{value:!0});m3.skip=void 0;var F9e=Ku;function j9e(e){return F9e.filter(function(t,n){return e<=n})}m3.skip=j9e;var g3={};Object.defineProperty(g3,"__esModule",{value:!0});g3.skipLast=void 0;var z9e=Ri,U9e=xt,V9e=It;function H9e(e){return e<=0?z9e.identity:U9e.operate(function(t,n){var r=new Array(e),i=0;return t.subscribe(V9e.createOperatorSubscriber(n,function(o){var a=i++;if(a<e)r[a]=o;else{var s=a%e,l=r[s];r[s]=o,n.next(l)}})),function(){r=null}})}g3.skipLast=H9e;var v3={};Object.defineProperty(v3,"__esModule",{value:!0});v3.skipUntil=void 0;var G9e=xt,dU=It,W9e=jt,q9e=Ii;function X9e(e){return G9e.operate(function(t,n){var r=!1,i=dU.createOperatorSubscriber(n,function(){i==null||i.unsubscribe(),r=!0},q9e.noop);W9e.innerFrom(e).subscribe(i),t.subscribe(dU.createOperatorSubscriber(n,function(o){return r&&n.next(o)}))})}v3.skipUntil=X9e;var y3={};Object.defineProperty(y3,"__esModule",{value:!0});y3.skipWhile=void 0;var Y9e=xt,K9e=It;function Z9e(e){return Y9e.operate(function(t,n){var r=!1,i=0;t.subscribe(K9e.createOperatorSubscriber(n,function(o){return(r||(r=!e(o,i++)))&&n.next(o)}))})}y3.skipWhile=Z9e;var b3={};Object.defineProperty(b3,"__esModule",{value:!0});b3.startWith=void 0;var pU=Dh,J9e=gi,Q9e=xt;function e7e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=J9e.popScheduler(e);return Q9e.operate(function(r,i){(n?pU.concat(e,r,n):pU.concat(e,r)).subscribe(i)})}b3.startWith=e7e;var _3={},Uh={};Object.defineProperty(Uh,"__esModule",{value:!0});Uh.switchMap=void 0;var t7e=jt,n7e=xt,hU=It;function r7e(e,t){return n7e.operate(function(n,r){var i=null,o=0,a=!1,s=function(){return a&&!i&&r.complete()};n.subscribe(hU.createOperatorSubscriber(r,function(l){i==null||i.unsubscribe();var c=0,u=o++;t7e.innerFrom(e(l,u)).subscribe(i=hU.createOperatorSubscriber(r,function(f){return r.next(t?t(l,f,u,c++):f)},function(){i=null,s()}))},function(){a=!0,s()}))})}Uh.switchMap=r7e;Object.defineProperty(_3,"__esModule",{value:!0});_3.switchAll=void 0;var i7e=Uh,o7e=Ri;function a7e(){return i7e.switchMap(o7e.identity)}_3.switchAll=a7e;var x3={};Object.defineProperty(x3,"__esModule",{value:!0});x3.switchMapTo=void 0;var mU=Uh,s7e=Vn;function l7e(e,t){return s7e.isFunction(t)?mU.switchMap(function(){return e},t):mU.switchMap(function(){return e})}x3.switchMapTo=l7e;var w3={};Object.defineProperty(w3,"__esModule",{value:!0});w3.switchScan=void 0;var c7e=Uh,u7e=xt;function f7e(e,t){return u7e.operate(function(n,r){var i=t;return c7e.switchMap(function(o,a){return e(i,o,a)},function(o,a){return i=a,a})(n).subscribe(r),function(){i=null}})}w3.switchScan=f7e;var S3={};Object.defineProperty(S3,"__esModule",{value:!0});S3.takeUntil=void 0;var d7e=xt,p7e=It,h7e=jt,m7e=Ii;function g7e(e){return d7e.operate(function(t,n){h7e.innerFrom(e).subscribe(p7e.createOperatorSubscriber(n,function(){return n.complete()},m7e.noop)),!n.closed&&t.subscribe(n)})}S3.takeUntil=g7e;var C3={};Object.defineProperty(C3,"__esModule",{value:!0});C3.takeWhile=void 0;var v7e=xt,y7e=It;function b7e(e,t){return t===void 0&&(t=!1),v7e.operate(function(n,r){var i=0;n.subscribe(y7e.createOperatorSubscriber(r,function(o){var a=e(o,i++);(a||t)&&r.next(o),!a&&r.complete()}))})}C3.takeWhile=b7e;var A3={};Object.defineProperty(A3,"__esModule",{value:!0});A3.tap=void 0;var _7e=Vn,x7e=xt,w7e=It,S7e=Ri;function C7e(e,t,n){var r=_7e.isFunction(e)||t||n?{next:e,error:t,complete:n}:e;return r?x7e.operate(function(i,o){var a;(a=r.subscribe)===null||a===void 0||a.call(r);var s=!0;i.subscribe(w7e.createOperatorSubscriber(o,function(l){var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},function(){var l;s=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},function(l){var c;s=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},function(){var l,c;s&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):S7e.identity}A3.tap=C7e;var Ax={};Object.defineProperty(Ax,"__esModule",{value:!0});Ax.throttle=void 0;var A7e=xt,gU=It,P7e=jt;function M7e(e,t){return A7e.operate(function(n,r){var i=t??{},o=i.leading,a=o===void 0?!0:o,s=i.trailing,l=s===void 0?!1:s,c=!1,u=null,f=null,d=!1,p=function(){f==null||f.unsubscribe(),f=null,l&&(v(),d&&r.complete())},h=function(){f=null,d&&r.complete()},g=function(m){return f=P7e.innerFrom(e(m)).subscribe(gU.createOperatorSubscriber(r,p,h))},v=function(){if(c){c=!1;var m=u;u=null,r.next(m),!d&&g(m)}};n.subscribe(gU.createOperatorSubscriber(r,function(m){c=!0,u=m,!(f&&!f.closed)&&(a?v():g(m))},function(){d=!0,!(l&&c&&f&&!f.closed)&&r.complete()}))})}Ax.throttle=M7e;var P3={};Object.defineProperty(P3,"__esModule",{value:!0});P3.throttleTime=void 0;var E7e=Oa,T7e=Ax,O7e=jc;function I7e(e,t,n){t===void 0&&(t=E7e.asyncScheduler);var r=O7e.timer(e,t);return T7e.throttle(function(){return r},n)}P3.throttleTime=I7e;var xv={};Object.defineProperty(xv,"__esModule",{value:!0});xv.TimeInterval=xv.timeInterval=void 0;var R7e=Oa,k7e=xt,L7e=It;function $7e(e){return e===void 0&&(e=R7e.asyncScheduler),k7e.operate(function(t,n){var r=e.now();t.subscribe(L7e.createOperatorSubscriber(n,function(i){var o=e.now(),a=o-r;r=o,n.next(new One(i,a))}))})}xv.timeInterval=$7e;var One=function(){function e(t,n){this.value=t,this.interval=n}return e}();xv.TimeInterval=One;var M3={};Object.defineProperty(M3,"__esModule",{value:!0});M3.timeoutWith=void 0;var D7e=Oa,B7e=y0,N7e=JC;function F7e(e,t,n){var r,i,o;if(n=n??D7e.async,B7e.isValidDate(e)?r=e:typeof e=="number"&&(i=e),t)o=function(){return t};else throw new TypeError("No observable provided to switch to");if(r==null&&i==null)throw new TypeError("No timeout provided.");return N7e.timeout({first:r,each:i,scheduler:n,with:o})}M3.timeoutWith=F7e;var E3={};Object.defineProperty(E3,"__esModule",{value:!0});E3.timestamp=void 0;var j7e=BM,z7e=Fc;function U7e(e){return e===void 0&&(e=j7e.dateTimestampProvider),z7e.map(function(t){return{value:t,timestamp:e.now()}})}E3.timestamp=U7e;var T3={};Object.defineProperty(T3,"__esModule",{value:!0});T3.window=void 0;var vU=ii,V7e=xt,yU=It,H7e=Ii,G7e=jt;function W7e(e){return V7e.operate(function(t,n){var r=new vU.Subject;n.next(r.asObservable());var i=function(o){r.error(o),n.error(o)};return t.subscribe(yU.createOperatorSubscriber(n,function(o){return r==null?void 0:r.next(o)},function(){r.complete(),n.complete()},i)),G7e.innerFrom(e).subscribe(yU.createOperatorSubscriber(n,function(){r.complete(),n.next(r=new vU.Subject)},H7e.noop,i)),function(){r==null||r.unsubscribe(),r=null}})}T3.window=W7e;var O3={},q7e=Ce&&Ce.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(O3,"__esModule",{value:!0});O3.windowCount=void 0;var bU=ii,X7e=xt,Y7e=It;function K7e(e,t){t===void 0&&(t=0);var n=t>0?t:e;return X7e.operate(function(r,i){var o=[new bU.Subject],a=0;i.next(o[0].asObservable()),r.subscribe(Y7e.createOperatorSubscriber(i,function(s){var l,c;try{for(var u=q7e(o),f=u.next();!f.done;f=u.next()){var d=f.value;d.next(s)}}catch(g){l={error:g}}finally{try{f&&!f.done&&(c=u.return)&&c.call(u)}finally{if(l)throw l.error}}var p=a-e+1;if(p>=0&&p%n===0&&o.shift().complete(),++a%n===0){var h=new bU.Subject;o.push(h),i.next(h.asObservable())}},function(){for(;o.length>0;)o.shift().complete();i.complete()},function(s){for(;o.length>0;)o.shift().error(s);i.error(s)},function(){o=null}))})}O3.windowCount=K7e;var I3={};Object.defineProperty(I3,"__esModule",{value:!0});I3.windowTime=void 0;var Z7e=ii,J7e=Oa,Q7e=Mi,eVe=xt,tVe=It,nVe=Ll,rVe=gi,_U=Dl;function iVe(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=(t=rVe.popScheduler(r))!==null&&t!==void 0?t:J7e.asyncScheduler,a=(n=r[0])!==null&&n!==void 0?n:null,s=r[1]||1/0;return eVe.operate(function(l,c){var u=[],f=!1,d=function(v){var m=v.window,y=v.subs;m.complete(),y.unsubscribe(),nVe.arrRemove(u,v),f&&p()},p=function(){if(u){var v=new Q7e.Subscription;c.add(v);var m=new Z7e.Subject,y={window:m,subs:v,seen:0};u.push(y),c.next(m.asObservable()),_U.executeSchedule(v,o,function(){return d(y)},e)}};a!==null&&a>=0?_U.executeSchedule(c,o,p,a,!0):f=!0,p();var h=function(v){return u.slice().forEach(v)},g=function(v){h(function(m){var y=m.window;return v(y)}),v(c),c.unsubscribe()};return l.subscribe(tVe.createOperatorSubscriber(c,function(v){h(function(m){m.window.next(v),s<=++m.seen&&d(m)})},function(){return g(function(v){return v.complete()})},function(v){return g(function(m){return m.error(v)})})),function(){u=null}})}I3.windowTime=iVe;var R3={},oVe=Ce&&Ce.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(R3,"__esModule",{value:!0});R3.windowToggle=void 0;var aVe=ii,sVe=Mi,lVe=xt,xU=jt,tI=It,wU=Ii,cVe=Ll;function uVe(e,t){return lVe.operate(function(n,r){var i=[],o=function(a){for(;0<i.length;)i.shift().error(a);r.error(a)};xU.innerFrom(e).subscribe(tI.createOperatorSubscriber(r,function(a){var s=new aVe.Subject;i.push(s);var l=new sVe.Subscription,c=function(){cVe.arrRemove(i,s),s.complete(),l.unsubscribe()},u;try{u=xU.innerFrom(t(a))}catch(f){o(f);return}r.next(s.asObservable()),l.add(u.subscribe(tI.createOperatorSubscriber(r,c,wU.noop,o)))},wU.noop)),n.subscribe(tI.createOperatorSubscriber(r,function(a){var s,l,c=i.slice();try{for(var u=oVe(c),f=u.next();!f.done;f=u.next()){var d=f.value;d.next(a)}}catch(p){s={error:p}}finally{try{f&&!f.done&&(l=u.return)&&l.call(u)}finally{if(s)throw s.error}}},function(){for(;0<i.length;)i.shift().complete();r.complete()},o,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}R3.windowToggle=uVe;var k3={};Object.defineProperty(k3,"__esModule",{value:!0});k3.windowWhen=void 0;var fVe=ii,dVe=xt,SU=It,pVe=jt;function hVe(e){return dVe.operate(function(t,n){var r,i,o=function(s){r.error(s),n.error(s)},a=function(){i==null||i.unsubscribe(),r==null||r.complete(),r=new fVe.Subject,n.next(r.asObservable());var s;try{s=pVe.innerFrom(e())}catch(l){o(l);return}s.subscribe(i=SU.createOperatorSubscriber(n,a,a,o))};a(),t.subscribe(SU.createOperatorSubscriber(n,function(s){return r.next(s)},function(){r.complete(),n.complete()},o,function(){i==null||i.unsubscribe(),r=null}))})}k3.windowWhen=hVe;var L3={},CU=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},AU=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(L3,"__esModule",{value:!0});L3.withLatestFrom=void 0;var mVe=xt,PU=It,gVe=jt,vVe=Ri,yVe=Ii,bVe=gi;function _Ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=bVe.popResultSelector(e);return mVe.operate(function(r,i){for(var o=e.length,a=new Array(o),s=e.map(function(){return!1}),l=!1,c=function(f){gVe.innerFrom(e[f]).subscribe(PU.createOperatorSubscriber(i,function(d){a[f]=d,!l&&!s[f]&&(s[f]=!0,(l=s.every(vVe.identity))&&(s=null))},yVe.noop))},u=0;u<o;u++)c(u);r.subscribe(PU.createOperatorSubscriber(i,function(f){if(l){var d=AU([f],CU(a));i.next(n?n.apply(void 0,AU([],CU(d))):d)}}))})}L3.withLatestFrom=_Ve;var $3={};Object.defineProperty($3,"__esModule",{value:!0});$3.zipAll=void 0;var xVe=x0,wVe=dx;function SVe(e){return wVe.joinAllInternals(xVe.zip,e)}$3.zipAll=SVe;var D3={},B3={},CVe=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},AVe=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(B3,"__esModule",{value:!0});B3.zip=void 0;var PVe=x0,MVe=xt;function EVe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return MVe.operate(function(n,r){PVe.zip.apply(void 0,AVe([n],CVe(e))).subscribe(r)})}B3.zip=EVe;var TVe=Ce&&Ce.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o},OVe=Ce&&Ce.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(D3,"__esModule",{value:!0});D3.zipWith=void 0;var IVe=B3;function RVe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return IVe.zip.apply(void 0,OVe([],TVe(e)))}D3.zipWith=RVe;(function(e){var t=Ce&&Ce.__createBinding||(Object.create?function(Gh,Wh,Vc,zd){zd===void 0&&(zd=Vc),Object.defineProperty(Gh,zd,{enumerable:!0,get:function(){return Wh[Vc]}})}:function(Gh,Wh,Vc,zd){zd===void 0&&(zd=Vc),Gh[zd]=Wh[Vc]}),n=Ce&&Ce.__exportStar||function(Gh,Wh){for(var Vc in Gh)Vc!=="default"&&!Object.prototype.hasOwnProperty.call(Wh,Vc)&&t(Wh,Gh,Vc)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var r=qn;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return r.Observable}});var i=Rh;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return i.ConnectableObservable}});var o=Ih;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return o.observable}});var a=DM;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return a.animationFrames}});var s=ii;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return s.Subject}});var l=G_;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return l.BehaviorSubject}});var c=p0;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return c.ReplaySubject}});var u=h0;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return u.AsyncSubject}});var f=ene;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return f.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return f.asapScheduler}});var d=Oa;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return d.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return d.asyncScheduler}});var p=rne;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return p.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return p.queueScheduler}});var h=ine;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return h.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return h.animationFrameScheduler}});var g=bv;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return g.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return g.VirtualAction}});var v=W_;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return v.Scheduler}});var m=Mi;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return m.Subscription}});var y=d0;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return y.Subscriber}});var _=GM;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return _.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return _.NotificationKind}});var b=Ru;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return b.pipe}});var x=Ii;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return x.noop}});var w=Ri;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return w.identity}});var S=KM;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return S.isObservable}});var A=ZM;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return A.lastValueFrom}});var C=JM;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return C.firstValueFrom}});var k=nx;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return k.ArgumentOutOfRangeError}});var O=Bc;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return O.EmptyError}});var T=rx;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return T.NotFoundError}});var B=H_;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return B.ObjectUnsubscribedError}});var R=ix;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return R.SequenceError}});var P=JC;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return P.TimeoutError}});var D=z_;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return D.UnsubscriptionError}});var z=QM;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return z.bindCallback}});var N=eE;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return N.bindNodeCallback}});var H=hd;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return H.combineLatest}});var J=Dh;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return J.concat}});var ne=tE;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return ne.connectable}});var oe=Nh;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return oe.defer}});var Z=Rl;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return Z.empty}});var ce=nE;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return ce.forkJoin}});var se=$l;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return se.from}});var Y=rE;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return Y.fromEvent}});var he=iE;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return he.fromEventPattern}});var ae=oE;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return ae.generate}});var ye=aE;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return ye.iif}});var re=lx;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return re.interval}});var te=sE;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return te.merge}});var le=J5;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return le.never}});var de=m0;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return de.of}});var _e=cx;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return _e.onErrorResumeNext}});var be=lE;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return be.pairs}});var ke=cE;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return ke.partition}});var W=nh;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return W.race}});var ee=fE;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return ee.range}});var Ee=tx;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Ee.throwError}});var ge=jc;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return ge.timer}});var pe=dE;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return pe.using}});var ve=x0;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return ve.zip}});var $e=q_;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return $e.scheduled}});var Ne=Rl;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return Ne.EMPTY}});var Ae=J5;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Ae.NEVER}}),n(xne,e);var Oe=kd;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Oe.config}});var j=ux;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return j.audit}});var M=pE;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return M.auditTime}});var L=hE;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return L.buffer}});var q=mE;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return q.bufferCount}});var me=gE;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return me.bufferTime}});var Te=vE;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return Te.bufferToggle}});var Pe=yE;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return Pe.bufferWhen}});var Xe=bE;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return Xe.catchError}});var He=_E;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return He.combineAll}});var Ve=fx;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return Ve.combineLatestAll}});var Je=xE;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return Je.combineLatestWith}});var Ye=b0;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return Ye.concatAll}});var yt=mx;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return yt.concatMap}});var mt=SE;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return mt.concatMapTo}});var ut=CE;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return ut.concatWith}});var Et=w0;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return Et.connect}});var et=ME;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return et.count}});var ct=EE;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return ct.debounce}});var _t=TE;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return _t.debounceTime}});var xe=Fh;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return xe.defaultIfEmpty}});var ie=OE;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return ie.delay}});var ue=gx;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return ue.delayWhen}});var E=IE;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return E.dematerialize}});var F=RE;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return F.distinct}});var U=bx;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return U.distinctUntilChanged}});var X=kE;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return X.distinctUntilKeyChanged}});var Q=LE;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Q.elementAt}});var fe=$E;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return fe.endWith}});var we=DE;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return we.every}});var Se=BE;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Se.exhaust}});var ze=_x;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return ze.exhaustAll}});var Fe=xx;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Fe.exhaustMap}});var Ke=NE;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Ke.expand}});var Le=Ku;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Le.filter}});var Me=FE;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Me.finalize}});var Re=rh;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return Re.find}});var qe=jE;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return qe.findIndex}});var nt=zE;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return nt.first}});var ft=UE;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return ft.groupBy}});var pt=vx;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return pt.ignoreElements}});var Gt=VE;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Gt.isEmpty}});var bt=HE;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return bt.last}});var hn=Fc;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return hn.map}});var ki=yx;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return ki.mapTo}});var Yt=GE;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Yt.materialize}});var tt=WE;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return tt.max}});var wt=Bh;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return wt.mergeAll}});var zt=qE;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return zt.flatMap}});var nn=Bl;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return nn.mergeMap}});var $t=XE;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return $t.mergeMapTo}});var ln=YE;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return ln.mergeScan}});var rn=KE;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return rn.mergeWith}});var _n=JE;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return _n.min}});var gr=S0;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return gr.multicast}});var Zt=Lh;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Zt.observeOn}});var Tn=_v;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Tn.onErrorResumeNextWith}});var fo=QE;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return fo.pairwise}});var Lr=e3;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Lr.pluck}});var Xi=t3;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Xi.publish}});var po=n3;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return po.publishBehavior}});var ho=r3;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return ho.publishLast}});var Qo=i3;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return Qo.publishReplay}});var ai=o3;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return ai.raceWith}});var ps=Dd;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return ps.reduce}});var hs=a3;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return hs.repeat}});var vr=s3;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return vr.repeatWhen}});var mo=l3;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return mo.retry}});var Ks=c3;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Ks.retryWhen}});var ms=V_;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return ms.refCount}});var Ia=Sx;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Ia.sample}});var Bo=u3;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Bo.sampleTime}});var Nl=f3;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Nl.scan}});var zc=d3;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return zc.sequenceEqual}});var gs=Cx;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return gs.share}});var Zs=p3;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return Zs.shareReplay}});var vs=h3;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return vs.single}});var ea=m3;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return ea.skip}});var nf=g3;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return nf.skipLast}});var No=v3;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return No.skipUntil}});var Fl=y3;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Fl.skipWhile}});var Fd=b3;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return Fd.startWith}});var rf=$h;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return rf.subscribeOn}});var Js=_3;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Js.switchAll}});var Vx=Uh;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return Vx.switchMap}});var Hx=x3;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Hx.switchMapTo}});var Gx=w3;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return Gx.switchScan}});var Wx=jh;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Wx.take}});var CT=wx;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return CT.takeLast}});var Bt=S3;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Bt.takeUntil}});var Ue=C3;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Ue.takeWhile}});var vt=A3;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return vt.tap}});var Rt=Ax;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Rt.throttle}});var ar=P3;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return ar.throttleTime}});var Li=zh;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Li.throwIfEmpty}});var $i=xv;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return $i.timeInterval}});var go=JC;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return go.timeout}});var Uc=M3;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Uc.timeoutWith}});var jd=E3;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return jd.timestamp}});var vo=px;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return vo.toArray}});var qx=T3;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return qx.window}});var Xx=O3;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Xx.windowCount}});var _ae=I3;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return _ae.windowTime}});var xae=R3;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return xae.windowToggle}});var wae=k3;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return wae.windowWhen}});var Sae=L3;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Sae.withLatestFrom}});var Cae=$3;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Cae.zipAll}});var Aae=D3;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Aae.zipWith}})})(Gte);Object.defineProperty(da,"__esModule",{value:!0});da.isAbortException=da.observeAbortSignal=da.makeAbortError=da.abortBreakPoint=da.checkAbortSignal=void 0;const MU=Gte;class kVe extends Error{}function Ine(e){if(e){if(!(e instanceof AbortSignal))throw new TypeError("must pass an AbortSignal");if(e.aborted)throw Rne()}}da.checkAbortSignal=Ine;function LVe(e){return new Promise(t=>setTimeout(t,e))}async function $Ve(e){await LVe(1),Ine(e)}da.abortBreakPoint=$Ve;function Rne(){if(typeof DOMException<"u")return new DOMException("aborted","AbortError");const e=new kVe("aborted");return e.code="ERR_ABORTED",e}da.makeAbortError=Rne;function DVe(e){return e?(0,MU.fromEvent)(e,"abort"):MU.Observable.create()}da.observeAbortSignal=DVe;function BVe(e){return e instanceof Error&&(e.name==="AbortError"||e.code==="ERR_ABORTED"||!!/\b(aborted|aborterror)\b/i.test(e.message))}da.isAbortException=BVe;var N3={};Object.defineProperty(N3,"__esModule",{value:!0});const nI=$;function NVe(){const e=(0,nI.useRef)(null),[t,n]=(0,nI.useState)({width:void 0,height:void 0});return(0,nI.useEffect)(()=>{if(!e.current)return;const r=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:void 0;if(!r)return;const i=new r(o=>{n({width:o[0].contentRect.width,height:o[0].contentRect.height})});return i.observe(e.current),()=>{i.disconnect()}},[]),[e,t]}N3.default=NVe;var kne={},Lf={};Object.defineProperty(Lf,"__esModule",{value:!0});var FVe={grad:.9,turn:360,rad:360/(2*Math.PI)},Gc=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Ui=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},ks=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e>t?e:t},Lne=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},EU=function(e){return{r:ks(e.r,0,255),g:ks(e.g,0,255),b:ks(e.b,0,255),a:ks(e.a)}},rI=function(e){return{r:Ui(e.r),g:Ui(e.g),b:Ui(e.b),a:Ui(e.a,3)}},jVe=/^#([0-9a-f]{3,8})$/i,kw=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},$ne=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),a=o-Math.min(t,n,r),s=a?o===t?(n-r)/a:o===n?2+(r-t)/a:4+(t-n)/a:0;return{h:60*(s<0?s+6:s),s:o?a/o*100:0,v:o/255*100,a:i}},Dne=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),a=r*(1-n),s=r*(1-(t-o)*n),l=r*(1-(1-t+o)*n),c=o%6;return{r:255*[r,s,a,a,l,r][c],g:255*[l,r,r,s,a,a][c],b:255*[a,a,l,r,r,s][c],a:i}},TU=function(e){return{h:Lne(e.h),s:ks(e.s,0,100),l:ks(e.l,0,100),a:ks(e.a)}},OU=function(e){return{h:Ui(e.h),s:Ui(e.s),l:Ui(e.l),a:Ui(e.a,3)}},IU=function(e){return Dne((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},vb=function(e){return{h:(t=$ne(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},zVe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,UVe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,VVe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,HVe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Q5={string:[[function(e){var t=jVe.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Ui(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Ui(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=VVe.exec(e)||HVe.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:EU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=zVe.exec(e)||UVe.exec(e);if(!t)return null;var n,r,i=TU({h:(n=t[1],r=t[2],r===void 0&&(r="deg"),Number(n)*(FVe[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return IU(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=i===void 0?1:i;return Gc(t)&&Gc(n)&&Gc(r)?EU({r:Number(t),g:Number(n),b:Number(r),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,o=i===void 0?1:i;if(!Gc(t)||!Gc(n)||!Gc(r))return null;var a=TU({h:Number(t),s:Number(n),l:Number(r),a:Number(o)});return IU(a)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,o=i===void 0?1:i;if(!Gc(t)||!Gc(n)||!Gc(r))return null;var a=function(s){return{h:Lne(s.h),s:ks(s.s,0,100),v:ks(s.v,0,100),a:ks(s.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(o)});return Dne(a)},"hsv"]]},RU=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},Bne=function(e){return typeof e=="string"?RU(e.trim(),Q5.string):typeof e=="object"&&e!==null?RU(e,Q5.object):[null,void 0]},iI=function(e,t){var n=vb(e);return{h:n.h,s:ks(n.s+100*t,0,100),l:n.l,a:n.a}},oI=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},kU=function(e,t){var n=vb(e);return{h:n.h,s:n.s,l:ks(n.l+100*t,0,100),a:n.a}},yb=function(){function e(t){this.parsed=Bne(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Ui(oI(this.rgba),2)},e.prototype.isDark=function(){return oI(this.rgba)<.5},e.prototype.isLight=function(){return oI(this.rgba)>=.5},e.prototype.toHex=function(){return t=rI(this.rgba),n=t.r,r=t.g,i=t.b,a=(o=t.a)<1?kw(Ui(255*o)):"","#"+kw(n)+kw(r)+kw(i)+a;var t,n,r,i,o,a},e.prototype.toRgb=function(){return rI(this.rgba)},e.prototype.toRgbString=function(){return t=rI(this.rgba),n=t.r,r=t.g,i=t.b,(o=t.a)<1?"rgba("+n+", "+r+", "+i+", "+o+")":"rgb("+n+", "+r+", "+i+")";var t,n,r,i,o},e.prototype.toHsl=function(){return OU(vb(this.rgba))},e.prototype.toHslString=function(){return t=OU(vb(this.rgba)),n=t.h,r=t.s,i=t.l,(o=t.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+o+")":"hsl("+n+", "+r+"%, "+i+"%)";var t,n,r,i,o},e.prototype.toHsv=function(){return t=$ne(this.rgba),{h:Ui(t.h),s:Ui(t.s),v:Ui(t.v),a:Ui(t.a,3)};var t},e.prototype.invert=function(){return Yl({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Yl(iI(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Yl(iI(this.rgba,-t))},e.prototype.grayscale=function(){return Yl(iI(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Yl(kU(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Yl(kU(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Yl({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):Ui(this.rgba.a,3);var n},e.prototype.hue=function(t){var n=vb(this.rgba);return typeof t=="number"?Yl({h:t,s:n.s,l:n.l,a:n.a}):Ui(n.h)},e.prototype.isEqual=function(t){return this.toHex()===Yl(t).toHex()},e}(),Yl=function(e){return e instanceof yb?e:new yb(e)},LU=[];Lf.Colord=yb,Lf.colord=Yl,Lf.extend=function(e){e.forEach(function(t){LU.indexOf(t)<0&&(t(yb,Q5),LU.push(t))})},Lf.getFormat=function(e){return Bne(e)[1]},Lf.random=function(){return new yb({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};var mc=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e>t?e:t},aI=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},sI=function(e){return 255*(e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e)},RB=96.422,kB=100,LB=82.521,GVe=function(e){var t,n,r={x:.9555766*(t=e).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return n={r:sI(.032404542*r.x-.015371385*r.y-.004985314*r.z),g:sI(-.00969266*r.x+.018760108*r.y+41556e-8*r.z),b:sI(556434e-9*r.x-.002040259*r.y+.010572252*r.z),a:e.a},{r:mc(n.r,0,255),g:mc(n.g,0,255),b:mc(n.b,0,255),a:mc(n.a)}},WVe=function(e){var t=aI(e.r),n=aI(e.g),r=aI(e.b);return function(i){return{x:mc(i.x,0,RB),y:mc(i.y,0,kB),z:mc(i.z,0,LB),a:mc(i.a)}}(function(i){return{x:1.0478112*i.x+.0228866*i.y+-.050127*i.z,y:.0295424*i.x+.9904844*i.y+-.0170491*i.z,z:-.0092345*i.x+.0150436*i.y+.7521316*i.z,a:i.a}}({x:100*(.4124564*t+.3575761*n+.1804375*r),y:100*(.2126729*t+.7151522*n+.072175*r),z:100*(.0193339*t+.119192*n+.9503041*r),a:e.a}))},bb=216/24389,Og=24389/27,$U=function(e){var t=WVe(e),n=t.x/RB,r=t.y/kB,i=t.z/LB;return n=n>bb?Math.cbrt(n):(Og*n+16)/116,{l:116*(r=r>bb?Math.cbrt(r):(Og*r+16)/116)-16,a:500*(n-r),b:200*(r-(i=i>bb?Math.cbrt(i):(Og*i+16)/116)),alpha:t.a}},qVe=function(e,t,n){var r,i=$U(e),o=$U(t);return function(a){var s=(a.l+16)/116,l=a.a/500+s,c=s-a.b/200;return GVe({x:(Math.pow(l,3)>bb?Math.pow(l,3):(116*l-16)/Og)*RB,y:(a.l>8?Math.pow((a.l+16)/116,3):a.l/Og)*kB,z:(Math.pow(c,3)>bb?Math.pow(c,3):(116*c-16)/Og)*LB,a:a.alpha})}({l:mc((r={l:i.l*(1-n)+o.l*n,a:i.a*(1-n)+o.a*n,b:i.b*(1-n)+o.b*n,alpha:i.alpha*(1-n)+o.alpha*n}).l,0,400),a:r.a,b:r.b,alpha:mc(r.alpha)})},XVe=function(e){function t(n,r,i){i===void 0&&(i=5);for(var o=[],a=1/(i-1),s=0;s<=i-1;s++)o.push(n.mix(r,a*s));return o}e.prototype.mix=function(n,r){r===void 0&&(r=.5);var i=n instanceof e?n:new e(n),o=qVe(this.toRgb(),i.toRgb(),r);return new e(o)},e.prototype.tints=function(n){return t(this,"#fff",n)},e.prototype.shades=function(n){return t(this,"#000",n)},e.prototype.tones=function(n){return t(this,"#808080",n)}},YVe=function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var o={};e.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var s,l,c=r[this.toHex()];if(c)return c;if(a!=null&&a.closest){var u=this.toRgb(),f=1/0,d="black";if(!o.length)for(var p in n)o[p]=new e(n[p]).toRgb();for(var h in n){var g=(s=u,l=o[h],Math.pow(s.r-l.r,2)+Math.pow(s.g-l.g,2)+Math.pow(s.b-l.b,2));g<f&&(f=g,d=h)}return d}},t.string.push([function(a){var s=a.toLowerCase(),l=s==="transparent"?"#0000":n[s];return l?new e(l).toRgb():null},"name"])};(function(e){var t=Ce&&Ce.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.colord=e.Colord=void 0;const n=Lf,r=t(XVe),i=t(YVe);(0,n.extend)([r.default,i.default]);var o=Lf;Object.defineProperty(e,"Colord",{enumerable:!0,get:function(){return o.Colord}}),Object.defineProperty(e,"colord",{enumerable:!0,get:function(){return o.colord}})})(kne);var wv={};Object.defineProperty(wv,"__esModule",{value:!0});wv.whenPresent=wv.when=void 0;const KVe=Vte,ZVe=da;function Nne(e,{timeout:t,signal:n,name:r}={}){return new Promise((i,o)=>{let a=!1;const s=(0,KVe.when)(e);let l,c=()=>{};t&&(l=setTimeout(()=>{a||(a=!0,s.cancel(),o(new Error(`timed out waiting for ${r||"whenPresent"}`)))},t),c=()=>l&&clearTimeout(l)),n&&n.addEventListener("abort",()=>{a||(a=!0,s.cancel(),c(),o((0,ZVe.makeAbortError)()))}),s.then(()=>{a||(a=!0,c(),i(!0))}).catch(u=>{a||(a=!0,c(),o(u))})})}wv.when=Nne;async function JVe(e,t={}){return await Nne(()=>{const n=e();return n!=null},t),e()}wv.whenPresent=JVe;var Qf={};Object.defineProperty(Qf,"__esModule",{value:!0});Qf.isContainedWithin=Qf.doesIntersect2=Qf.intersection2=void 0;function QVe(e,t,n,r){return t>n&&e<r&&r-n&&t-e?e>n?t<r?[e,t]:[e,r]:t<r?[n,t]:[n,r]:[]}Qf.intersection2=QVe;function eHe(e,t,n,r){return t>n&&e<r}Qf.doesIntersect2=eHe;function tHe(e,t,n,r){return n<=e&&r>=t}Qf.isContainedWithin=tHe;var F3={};Object.defineProperty(F3,"__esModule",{value:!0});F3.dedupe=void 0;function nHe(e,t=JSON.stringify){const n=[],r=new Set;for(const i of e){const o=t(i);r.has(o)||(n.push(i),r.add(o))}return n}F3.dedupe=nHe;var eo={},Fne=!1,QC={},j3={};const g1={METHOD:"method",PROPERTY:"property"};class jne{constructor(t,n){this.inst=t,this.args=n}}class rHe extends jne{constructor(t,n){super(t,n),this.type=g1.METHOD}execute(t){t[this.inst](...this.args)}}class iHe extends jne{constructor(t,n){super(t,n),this.type=g1.PROPERTY}execute(t){t[this.inst]=this.args[0]}}const oHe={[g1.METHOD]:rHe,[g1.PROPERTY]:iHe};class zne{constructor(t,n,r){return new oHe[t](n,r)}}Object.entries(g1).forEach(([e,t])=>{Object.defineProperty(zne,e,{value:t,configurable:!1,enumerable:!0,writable:!1})});j3=zne;const Une=Object.freeze({METHODS:["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearHitRegions","clearRect","clip","closePath","drawFocusIfNeeded","drawImage","ellipse","fill","fillRect","fillText","lineTo","moveTo","putImageData","quadraticCurveTo","rect","removeHitRegion","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],PROPERTIES:["direction","fillStyle","filter","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline"]}),tc=Object.freeze({sequence:Symbol.for("sequence"),push:Symbol.for("push"),fromJSON:Symbol.for("fromJSON")});class $B{constructor(t=null){this[tc.sequence]=[],t&&this[tc.fromJSON](t)}[tc.fromJSON](t={sequence:[]}){t.sequence.forEach(({type:n,inst:r,args:i})=>{this[tc.push](n,r,i)})}[tc.push](t,n,r){this[tc.sequence].push(new j3(t,n,r))}execute(t){t.save(),this[tc.sequence].forEach(n=>n.execute(t)),t.restore()}toJSON(){return{sequence:this[tc.sequence]}}}Une.METHODS.forEach(e=>{Object.defineProperty($B.prototype,e,{value:function(...n){this[tc.push](j3.METHOD,e,n)},writable:!1,enumerable:!0,configurable:!1})});Une.PROPERTIES.forEach(e=>{Object.defineProperty($B.prototype,e,{get(){throw`Invalid canvas sequencer interaction, cannot get ${e}.`},set(t){this[tc.push](j3.PROPERTY,e,[t])},enumerable:!0,configurable:!1})});QC=$B;var Vne={};const DU=Object.freeze({sequence:Symbol.for("sequence"),push:Symbol.for("push")});function aHe(e,t){const n=e.replace(/^\{|\}$/gu,"");return n!==e?t.hasOwnProperty(n)?t[n]:n:e}class sHe extends QC{build(t={}){const n=new QC;return this[DU.sequence].forEach(({type:r,inst:i,args:o})=>{const a=o.map(s=>typeof s=="string"?aHe(s,t):s);n[DU.push](r,i,a)}),n}execute(){throw new TypeError("Cannot execute a blueprint.")}}Vne=sHe;var Hne={CanvasSequence:QC,CanvasBlueprint:Vne},lHe=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eo,"__esModule",{value:!0});eo.drawImageOntoCanvasContext=eo.ImageBitmapType=eo.createImageBitmap=eo.createCanvas=void 0;const cHe=lHe(Fne),Gne=Hne;function uHe(e,t){e.serializedCommands?new Gne.CanvasSequence(e.serializedCommands).execute(t):t.drawImage(e,0,0)}eo.drawImageOntoCanvasContext=uHe;const BU={realOffscreenCanvas:typeof OffscreenCanvas=="function",node:cHe.default};BU.realOffscreenCanvas?(eo.createCanvas=(e,t)=>new OffscreenCanvas(e,t),eo.createImageBitmap=window.createImageBitmap||self.createImageBitmap,eo.ImageBitmapType=window.ImageBitmap||self.ImageBitmap):BU.node?(eo.createCanvas=(...e)=>nodeCreateCanvas(...e),eo.createImageBitmap=async(e,...t)=>{if(t.length>0)throw new Error("only one-argument uses of createImageBitmap are supported by the node offscreencanvas ponyfill");const n=e.toDataURL(),r=new nodeImage;return new Promise((i,o)=>{r.onload=()=>i(r),r.onerror=o,r.src=n})}):(eo.createCanvas=(e,t)=>{const n=new Gne.CanvasSequence;return{width:e,height:t,getContext(){return n}}},eo.createImageBitmap=async e=>{const t=e.getContext("2d");return{height:e.height,width:e.width,serializedCommands:t.toJSON(),containsNoTransferables:!0}},eo.ImageBitmapType=String);var Wc={},lI={exports:{}};/*!!
 *  Canvas 2 Svg v1.0.15
 *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
 *
 *  Licensed under the MIT license:
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Author:
 *  Kerry Liu
 *
 *  Copyright (c) 2014 Gliffy Inc.
 */var NU;function fHe(){return NU||(NU=1,function(e){(function(){var t,n,r,i,o;function a(d,p){var h=Object.keys(p),g;for(g=0;g<h.length;g++)d=d.replace(new RegExp("\\{"+h[g]+"\\}","gi"),p[h[g]]);return d}function s(d){var p,h,g;if(!d)throw new Error("cannot create a random attribute name for an undefined object");p="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",h="";do for(h="",g=0;g<12;g++)h+=p[Math.floor(Math.random()*p.length)];while(d[h]);return h}function l(d,p){var h,g,v={},m;for(d=d.split(","),p=p||10,h=0;h<d.length;h+=2)g="&"+d[h+1]+";",m=parseInt(d[h],p),v[g]="&#"+m+";";return v["\\xa0"]="&#160;",v}function c(d){var p={left:"start",right:"end",center:"middle",start:"start",end:"end"};return p[d]||p.start}function u(d){var p={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return p[d]||p.alphabetic}o=l("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"}},r=function(d,p){this.__root=d,this.__ctx=p},r.prototype.addColorStop=function(d,p){var h=this.__ctx.__createElement("stop"),g,v;h.setAttribute("offset",d),p.indexOf("rgba")!==-1?(g=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,v=g.exec(p),h.setAttribute("stop-color",a("rgb({r},{g},{b})",{r:v[1],g:v[2],b:v[3]})),h.setAttribute("stop-opacity",v[4])):h.setAttribute("stop-color",p),this.__root.appendChild(h)},i=function(d,p){this.__root=d,this.__ctx=p},n=function(d){var p={width:500,height:500,enableMirroring:!1},h;if(arguments.length>1?(h=p,h.width=arguments[0],h.height=arguments[1]):d?h=d:h=p,!(this instanceof n))return new n(h);this.width=h.width||p.width,this.height=h.height||p.height,this.enableMirroring=h.enableMirroring!==void 0?h.enableMirroring:p.enableMirroring,this.canvas=this,this.__document=h.document||document,this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d"),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)},n.prototype.__createElement=function(d,p,h){typeof p>"u"&&(p={});var g=this.__document.createElementNS("http://www.w3.org/2000/svg",d),v=Object.keys(p),m,y;for(h&&(g.setAttribute("fill","none"),g.setAttribute("stroke","none")),m=0;m<v.length;m++)y=v[m],g.setAttribute(y,p[y]);return g},n.prototype.__setDefaultStyles=function(){var d=Object.keys(t),p,h;for(p=0;p<d.length;p++)h=d[p],this[h]=t[h].canvas},n.prototype.__applyStyleState=function(d){var p=Object.keys(d),h,g;for(h=0;h<p.length;h++)g=p[h],this[g]=d[g]},n.prototype.__getStyleState=function(){var d,p={},h=Object.keys(t),g;for(d=0;d<h.length;d++)g=h[d],p[g]=this[g];return p},n.prototype.__applyStyleToCurrentElement=function(d){var p=Object.keys(t),h,g,v,m,y,_;for(h=0;h<p.length;h++)if(g=t[p[h]],v=this[p[h]],g.apply)if(g.apply.indexOf("fill")!==-1&&v instanceof i){if(v.__ctx)for(;v.__ctx.__defs.childNodes.length;)m=v.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[m]=m,this.__defs.appendChild(v.__ctx.__defs.childNodes[0]);this.__currentElement.setAttribute("fill",a("url(#{id})",{id:v.__root.getAttribute("id")}))}else g.apply.indexOf("fill")!==-1&&v instanceof r?this.__currentElement.setAttribute("fill",a("url(#{id})",{id:v.__root.getAttribute("id")})):g.apply.indexOf(d)!==-1&&g.svg!==v&&((g.svgAttr==="stroke"||g.svgAttr==="fill")&&v.indexOf("rgba")!==-1?(y=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,_=y.exec(v),this.__currentElement.setAttribute(g.svgAttr,a("rgb({r},{g},{b})",{r:_[1],g:_[2],b:_[3]})),this.__currentElement.setAttribute(g.svgAttr+"-opacity",_[4])):this.__currentElement.setAttribute(g.svgAttr,v))},n.prototype.__closestGroupOrSvg=function(d){return d=d||this.__currentElement,d.nodeName==="g"||d.nodeName==="svg"?d:this.__closestGroupOrSvg(d.parentNode)},n.prototype.getSerializedSvg=function(d){var p=new XMLSerializer().serializeToString(this.__root),h,g,v,m,y,_;if(_=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,_.test(p)&&(p=p.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),d)for(h=Object.keys(o),g=0;g<h.length;g++)v=h[g],m=o[v],y=new RegExp(v,"gi"),y.test(p)&&(p=p.replace(y,m));return p},n.prototype.getSvg=function(){return this.__root},n.prototype.save=function(){var d=this.__createElement("g"),p=this.__closestGroupOrSvg();this.__groupStack.push(p),p.appendChild(d),this.__currentElement=d,this.__stack.push(this.__getStyleState())},n.prototype.restore=function(){this.__currentElement=this.__groupStack.pop();var d=this.__stack.pop();this.__applyStyleState(d)},n.prototype.__addTransform=function(d){var p=this.__closestGroupOrSvg();if(p.childNodes.length>0){var h=this.__createElement("g");p.appendChild(h),this.__currentElement=h}var g=this.__currentElement.getAttribute("transform");g?g+=" ":g="",g+=d,this.__currentElement.setAttribute("transform",g)},n.prototype.scale=function(d,p){p===void 0&&(p=d),this.__addTransform(a("scale({x},{y})",{x:d,y:p}))},n.prototype.rotate=function(d){var p=d*180/Math.PI;this.__addTransform(a("rotate({angle},{cx},{cy})",{angle:p,cx:0,cy:0}))},n.prototype.translate=function(d,p){this.__addTransform(a("translate({x},{y})",{x:d,y:p}))},n.prototype.transform=function(d,p,h,g,v,m){this.__addTransform(a("matrix({a},{b},{c},{d},{e},{f})",{a:d,b:p,c:h,d:g,e:v,f:m}))},n.prototype.beginPath=function(){var d,p;this.__currentDefaultPath="",this.__currentPosition={},d=this.__createElement("path",{},!0),p=this.__closestGroupOrSvg(),p.appendChild(d),this.__currentElement=d},n.prototype.__applyCurrentDefaultPath=function(){if(this.__currentElement.nodeName==="path"){var d=this.__currentDefaultPath;this.__currentElement.setAttribute("d",d)}else throw new Error("Attempted to apply path command to node "+this.__currentElement.nodeName)},n.prototype.__addPathCommand=function(d){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=d},n.prototype.moveTo=function(d,p){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:d,y:p},this.__addPathCommand(a("M {x} {y}",{x:d,y:p}))},n.prototype.closePath=function(){this.__addPathCommand("Z")},n.prototype.lineTo=function(d,p){this.__currentPosition={x:d,y:p},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(a("L {x} {y}",{x:d,y:p})):this.__addPathCommand(a("M {x} {y}",{x:d,y:p}))},n.prototype.bezierCurveTo=function(d,p,h,g,v,m){this.__currentPosition={x:v,y:m},this.__addPathCommand(a("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:d,cp1y:p,cp2x:h,cp2y:g,x:v,y:m}))},n.prototype.quadraticCurveTo=function(d,p,h,g){this.__currentPosition={x:h,y:g},this.__addPathCommand(a("Q {cpx} {cpy} {x} {y}",{cpx:d,cpy:p,x:h,y:g}))};var f=function(d){var p=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return[d[0]/p,d[1]/p]};n.prototype.arcTo=function(d,p,h,g,v){var m=this.__currentPosition&&this.__currentPosition.x,y=this.__currentPosition&&this.__currentPosition.y;if(!(typeof m>"u"||typeof y>"u")){if(v<0)throw new Error("IndexSizeError: The radius provided ("+v+") is negative.");if(m===d&&y===p||d===h&&p===g||v===0){this.lineTo(d,p);return}var _=f([m-d,y-p]),b=f([h-d,g-p]);if(_[0]*b[1]===_[1]*b[0]){this.lineTo(d,p);return}var x=_[0]*b[0]+_[1]*b[1],w=Math.acos(Math.abs(x)),S=f([_[0]+b[0],_[1]+b[1]]),A=v/Math.sin(w/2),C=d+A*S[0],k=p+A*S[1],O=[-_[1],_[0]],T=[b[1],-b[0]],B=function(D){var z=D[0],N=D[1];return N>=0?Math.acos(z):-Math.acos(z)},R=B(O),P=B(T);this.lineTo(C+O[0]*v,k+O[1]*v),this.arc(C,k,v,R,P)}},n.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},n.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},n.prototype.rect=function(d,p,h,g){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(d,p),this.lineTo(d+h,p),this.lineTo(d+h,p+g),this.lineTo(d,p+g),this.lineTo(d,p),this.closePath()},n.prototype.fillRect=function(d,p,h,g){var v,m;v=this.__createElement("rect",{x:d,y:p,width:h,height:g},!0),m=this.__closestGroupOrSvg(),m.appendChild(v),this.__currentElement=v,this.__applyStyleToCurrentElement("fill")},n.prototype.strokeRect=function(d,p,h,g){var v,m;v=this.__createElement("rect",{x:d,y:p,width:h,height:g},!0),m=this.__closestGroupOrSvg(),m.appendChild(v),this.__currentElement=v,this.__applyStyleToCurrentElement("stroke")},n.prototype.clearRect=function(d,p,h,g){var v,m=this.__closestGroupOrSvg();v=this.__createElement("rect",{x:d,y:p,width:h,height:g,fill:"#FFFFFF"},!0),m.appendChild(v)},n.prototype.createLinearGradient=function(d,p,h,g){var v=this.__createElement("linearGradient",{id:s(this.__ids),x1:d+"px",x2:h+"px",y1:p+"px",y2:g+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(v),new r(v,this)},n.prototype.createRadialGradient=function(d,p,h,g,v,m){var y=this.__createElement("radialGradient",{id:s(this.__ids),cx:g+"px",cy:v+"px",r:m+"px",fx:d+"px",fy:p+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(y),new r(y,this)},n.prototype.__parseFont=function(){var d=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\"\sa-z]+?)\s*$/i,p=d.exec(this.font),h={style:p[1]||"normal",size:p[4]||"10px",family:p[6]||"sans-serif",weight:p[3]||"normal",decoration:p[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(h.decoration="underline"),this.__fontHref&&(h.href=this.__fontHref),h},n.prototype.__wrapTextLink=function(d,p){if(d.href){var h=this.__createElement("a");return h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d.href),h.appendChild(p),h}return p},n.prototype.__applyText=function(d,p,h,g){var v=this.__parseFont(),m=this.__closestGroupOrSvg(),y=this.__createElement("text",{"font-family":v.family,"font-size":v.size,"font-style":v.style,"font-weight":v.weight,"text-decoration":v.decoration,x:p,y:h,"text-anchor":c(this.textAlign),"dominant-baseline":u(this.textBaseline)},!0);y.appendChild(this.__document.createTextNode(d)),this.__currentElement=y,this.__applyStyleToCurrentElement(g),m.appendChild(this.__wrapTextLink(v,y))},n.prototype.fillText=function(d,p,h){this.__applyText(d,p,h,"fill")},n.prototype.strokeText=function(d,p,h){this.__applyText(d,p,h,"stroke")},n.prototype.measureText=function(d){return this.__ctx.font=this.font,this.__ctx.measureText(d)},n.prototype.arc=function(d,p,h,g,v,m){if(g!==v){g=g%(2*Math.PI),v=v%(2*Math.PI),g===v&&(v=(v+2*Math.PI-.001*(m?-1:1))%(2*Math.PI));var y=d+h*Math.cos(v),_=p+h*Math.sin(v),b=d+h*Math.cos(g),x=p+h*Math.sin(g),w=m?0:1,S=0,A=v-g;A<0&&(A+=2*Math.PI),m?S=A>Math.PI?0:1:S=A>Math.PI?1:0,this.lineTo(b,x),this.__addPathCommand(a("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:h,ry:h,xAxisRotation:0,largeArcFlag:S,sweepFlag:w,endX:y,endY:_})),this.__currentPosition={x:y,y:_}}},n.prototype.clip=function(){var d=this.__closestGroupOrSvg(),p=this.__createElement("clipPath"),h=s(this.__ids),g=this.__createElement("g");d.removeChild(this.__currentElement),p.setAttribute("id",h),p.appendChild(this.__currentElement),this.__defs.appendChild(p),d.setAttribute("clip-path",a("url(#{id})",{id:h})),d.appendChild(g),this.__currentElement=g},n.prototype.drawImage=function(){var d=Array.prototype.slice.call(arguments),p=d[0],h,g,v,m,y=0,_=0,b,x,w,S,A,C,k,O,T,B,R;if(d.length===3)h=d[1],g=d[2],b=p.width,x=p.height,v=b,m=x;else if(d.length===5)h=d[1],g=d[2],v=d[3],m=d[4],b=p.width,x=p.height;else if(d.length===9)y=d[1],_=d[2],b=d[3],x=d[4],h=d[5],g=d[6],v=d[7],m=d[8];else throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);if(w=this.__closestGroupOrSvg(),k=this.__currentElement,p instanceof n){for(S=p.getSvg(),A=S.childNodes[0];A.childNodes.length;)R=A.childNodes[0].getAttribute("id"),this.__ids[R]=R,this.__defs.appendChild(A.childNodes[0]);C=S.childNodes[1],w.appendChild(C),this.__currentElement=C,this.translate(h,g),this.__currentElement=k}else(p.nodeName==="CANVAS"||p.nodeName==="IMG")&&(O=this.__createElement("image"),O.setAttribute("width",v),O.setAttribute("height",m),O.setAttribute("preserveAspectRatio","none"),(y||_||b!==p.width||x!==p.height)&&(T=this.__document.createElement("canvas"),T.width=v,T.height=m,B=T.getContext("2d"),B.drawImage(p,y,_,b,x,0,0,v,m),p=T),O.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p.nodeName==="CANVAS"?p.toDataURL():p.getAttribute("src")),w.appendChild(O),this.__currentElement=O,this.translate(h,g),this.__currentElement=k)},n.prototype.createPattern=function(d,p){var h=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),g=s(this.__ids),v;return h.setAttribute("id",g),h.setAttribute("width",d.width),h.setAttribute("height",d.height),d.nodeName==="CANVAS"||d.nodeName==="IMG"?(v=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),v.setAttribute("width",d.width),v.setAttribute("height",d.height),v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d.nodeName==="CANVAS"?d.toDataURL():d.getAttribute("src")),h.appendChild(v),this.__defs.appendChild(h)):d instanceof n&&(h.appendChild(d.__root.childNodes[1]),this.__defs.appendChild(h)),new i(h,this)},n.prototype.drawFocusRing=function(){},n.prototype.createImageData=function(){},n.prototype.getImageData=function(){},n.prototype.putImageData=function(){},n.prototype.globalCompositeOperation=function(){},n.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=n),e.exports=n})()}(lI)),lI.exports}var FU;function dHe(){if(FU)return Wc;FU=1;var e=Ce&&Ce.__createBinding||(Object.create?function(f,d,p,h){h===void 0&&(h=p);var g=Object.getOwnPropertyDescriptor(d,p);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[p]}}),Object.defineProperty(f,h,g)}:function(f,d,p,h){h===void 0&&(h=p),f[h]=d[p]}),t=Ce&&Ce.__setModuleDefault||(Object.create?function(f,d){Object.defineProperty(f,"default",{enumerable:!0,value:d})}:function(f,d){f.default=d}),n=Ce&&Ce.__importStar||function(f){if(f&&f.__esModule)return f;var d={};if(f!=null)for(var p in f)p!=="default"&&Object.prototype.hasOwnProperty.call(f,p)&&e(d,f,p);return t(d,f),d},r=Ce&&Ce.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.ReactRendering=Wc.getSerializedSvg=Wc.renderToAbstractCanvas=void 0;const i=r($),o=Hne,a=eo,s=Zu();async function l(f,d,p,h){const{exportSVG:g,highResolutionScaling:v=1}=p;if(g)if(g.rasterizeLayers){const m=g.scale||v,y=(0,a.createCanvas)(Math.ceil(f*m),d*m),_=y.getContext("2d");if(!_)throw new Error("2d canvas rendering not supported on this platform");return _.scale(m,m),{...await h(_),reactElement:i.default.createElement("image",{width:f,height:d,xlinkHref:"convertToBlob"in y?await(0,s.blobToDataURL)(await y.convertToBlob({type:"image/png"})):y.toDataURL("image/png")})}}else{const m=new o.CanvasSequence;return{...await h(m),canvasRecordedData:m.toJSON()}}else{const m=v,y=(0,a.createCanvas)(Math.ceil(f*m),d*m),_=y.getContext("2d");if(!_)throw new Error("2d canvas rendering not supported on this platform");return _.scale(m,m),{...await h(_),imageData:await(0,a.createImageBitmap)(y)}}}Wc.renderToAbstractCanvas=l;async function c(f){const{width:d,height:p,canvasRecordedData:h}=f,g=await Promise.resolve().then(()=>n(fHe())),v=new g.default(d,p);return new o.CanvasSequence(h).execute(v),v.getSvg().innerHTML}Wc.getSerializedSvg=c;function u({rendering:f}){return i.default.createElement(i.default.Fragment,null,i.default.isValidElement(f.reactElement)?f.reactElement:i.default.createElement("g",{dangerouslySetInnerHTML:{__html:f.html||""}}))}return Wc.ReactRendering=u,Wc}var Px={};Object.defineProperty(Px,"__esModule",{value:!0});Px.isFeature=void 0;function pHe(e){return typeof e=="object"&&e!==null&&typeof e.get=="function"&&typeof e.id=="function"}Px.isFeature=pHe;function jU(e){return"uniqueId"in e&&typeof e.data!="object"}class eA{constructor(t){var n;jU(t)?this.data=t:(this.data=t.data||{},this.parentHandle=t.parent);const r=jU(t)?t.uniqueId:t.id;if(r==null)throw new Error("SimpleFeature requires a unique `id` or `data.uniqueId` attribute");if(this.uniqueId=String(r),!(this.data.aliases||this.data.end-this.data.start>=0))throw new Error(`invalid feature data, end less than start. end: ${this.data.end} start: ${this.data.start}`);this.data.subfeatures&&(this.subfeatures=(n=this.data.subfeatures)===null||n===void 0?void 0:n.map((i,o)=>typeof i.get!="function"?new eA({id:i.uniqueId||`${r}-${o}`,data:{strand:this.data.strand,...i},parent:this}):i))}get(t){return t==="subfeatures"?this.subfeatures:t==="parent"?this.parent():this.data[t]}set(t,n){this.data[t]=n}tags(){return Object.keys(this.data)}id(){return this.uniqueId}parent(){return this.parentHandle}children(){return this.get("subfeatures")}toJSON(){const t={...this.data,uniqueId:this.id()},n=this.parent();n&&(t.parentId=n.id());const r=this.children();return r&&(t.subfeatures=r.map(i=>i.toJSON())),t}static fromJSON(t){return new eA({...t})}}Px.default=eA;var zU;function Zu(){return zU||(zU=1,function(e){var t=Ce&&Ce.__createBinding||(Object.create?function(ie,ue,E,F){F===void 0&&(F=E);var U=Object.getOwnPropertyDescriptor(ue,E);(!U||("get"in U?!ue.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return ue[E]}}),Object.defineProperty(ie,F,U)}:function(ie,ue,E,F){F===void 0&&(F=E),ie[F]=ue[E]}),n=Ce&&Ce.__exportStar||function(ie,ue){for(var E in ie)E!=="default"&&!Object.prototype.hasOwnProperty.call(ue,E)&&t(ue,ie,E)},r=Ce&&Ce.__importDefault||function(ie){return ie&&ie.__esModule?ie:{default:ie}};Object.defineProperty(e,"__esModule",{value:!0}),e.bytesForRegions=e.objectHash=e.hashCode=e.updateStatus=e.generateCodonTable=e.defaultCodonTable=e.defaultStops=e.defaultStarts=e.measureText=e.rIC=e.blobToDataURL=e.complement=e.reverse=e.revcom=e.isElectron=e.stringify=e.shorten=e.minmax=e.renameRegionsIfNeeded=e.renameRegionIfNeeded=e.makeAbortableReaction=e.findLast=e.findLastIndex=e.iterMap=e.bpSpanPx=e.featureSpanPx=e.cartesianToPolar=e.polarToCartesian=e.degToRad=e.radToDeg=e.bpToPx=e.clamp=e.compareLocStrings=e.compareLocs=e.parseLocString=e.parseLocStringOneBased=e.assembleLocStringFast=e.assembleLocString=e.getContainingDisplay=e.getContainingTrack=e.getContainingView=e.getSession=e.findParentThatIs=e.springAnimate=e.findParentThat=e.useDebouncedCallback=e.useWidthSetter=e.useDebounce=e.inProduction=e.inDevelopment=void 0,e.stripAlpha=e.isFeature=e.SimpleFeature=e.gatherOverlaps=e.mergeIntervals=e.notEmpty=e.groupBy=e.avg=e.sum=e.min=e.max=e.localStorageSetItem=e.localStorageGetItem=e.getEnv=e.measureGridWidth=e.getStr=e.getUriLink=e.useLocalStorage=e.getLayoutId=e.getViewParams=e.getTickDisplayStr=e.toLocale=e.getBpDisplayStr=e.isSupportedIndexingAdapter=void 0;const i=$,o=r(l$e),a=Xu,s=Vte,l=Rp,c=da,u=Rp,f=r(N3),d=kne;n(Rp,e),n(da,e),n(wv,e),n(Qf,e),n(F3,e),n(eo,e),n(dHe(),e),e.inDevelopment=typeof process=="object"&&process.env&&!1,e.inProduction=!e.inDevelopment;function p(ie,ue){const[E,F]=(0,i.useState)(ie);return(0,i.useEffect)(()=>{const U=setTimeout(()=>{F(ie)},ue);return()=>{clearTimeout(U)}},[ie,ue]),E}e.useDebounce=p;function h(ie,ue){const[E,{width:F}]=(0,f.default)();return(0,i.useEffect)(()=>{F&&(0,a.isAlive)(ie)&&requestAnimationFrame(()=>ie.setWidth(F-Number.parseInt(ue,10)*2))},[ue,ie,F]),E}e.useWidthSetter=h;function g(ie,ue=400){const E=(0,i.useRef)(),F=(0,i.useRef)();function U(){F.current&&clearTimeout(F.current)}return(0,i.useEffect)(()=>U,[]),function(...Q){E.current=Q,U(),F.current=setTimeout(()=>{E.current&&ie(...E.current)},ue)}}e.useDebouncedCallback=g;function v(ie,ue){if(!(0,a.hasParent)(ie))throw new Error("node does not have parent");let E=(0,a.getParent)(ie);for(;E&&(0,a.isAlive)(E);){if(ue(E))return E;if((0,a.hasParent)(E))E=(0,a.getParent)(E);else break}throw new Error("no matching node found")}e.findParentThat=v;function m(ie,ue,E,F=()=>{},U=0,X=170,Q=26){U||(U=Math.abs(ue-ie)/1e3);let we;function Se(ze){const Fe=Date.now();let Ke=ze.lastPosition,Le=ze.lastTime||Fe,Me=ze.lastVelocity||0;Fe>Le+64&&(Le=Fe);const Re=Math.floor(Fe-Le);for(let pt=0;pt<Re;++pt){const Gt=-X*(Ke-ue),bt=-Q*Me,hn=(Gt+bt)/1;Me+=hn*1/1e3,Ke+=Me*1/1e3}const qe=Math.abs(Me)<=U,nt=X!==0?Math.abs(ue-Ke)<=U:!0;qe&&nt?(E(ue),F()):(E(Ke),we=requestAnimationFrame(()=>Se({lastPosition:Ke,lastTime:Fe,lastVelocity:Me})))}return[()=>Se({lastPosition:ie}),()=>cancelAnimationFrame(we)]}e.springAnimate=m;function y(ie,ue){return v(ie,ue)}e.findParentThatIs=y;function _(ie){try{return y(ie,l.isSessionModel)}catch{throw new Error("no session model found!")}}e.getSession=_;function b(ie){try{return y(ie,l.isViewModel)}catch{throw new Error("no containing view found")}}e.getContainingView=b;function x(ie){try{return y(ie,l.isTrackModel)}catch{throw new Error("no containing track found")}}e.getContainingTrack=x;function w(ie){try{return y(ie,l.isDisplayModel)}catch{throw new Error("no containing display found")}}e.getContainingDisplay=w;function S(ie){return A(ie,Ae)}e.assembleLocString=S;function A(ie,ue=E=>E){const{assemblyName:E,refName:F,start:U,end:X,reversed:Q}=ie,fe=E?`{${E}}`:"";let we;U!==void 0?we=`:${ue(U+1)}`:X!==void 0?we=":1":we="";let Se;X!==void 0?Se=U!==void 0&&U+1===X?"":`..${ue(X)}`:Se=U!==void 0?"..":"";let ze="";return Q&&(ze="[rev]"),`${fe}${F}${we}${Se}${ze}`}e.assembleLocStringFast=A;function C(ie,ue){if(!ie)throw new Error("no location string provided, could not parse");let E=!1;ie.endsWith("[rev]")&&(E=!0,ie=ie.replace(/\[rev]$/,"")),ie=ie.replace(/\s/,"");const F=ie.match(/({(.+)})?(.+)/);if(!F)throw new Error(`invalid location string: "${ie}"`);const[,,U,X]=F;if(!U&&X.startsWith("{}"))throw new Error(`no assembly name was provided in location "${X}"`);const Q=X.lastIndexOf(":");if(Q===-1){if(ue(X,U))return{assemblyName:U,refName:X,reversed:E};throw new Error(`Unknown reference sequence "${X}"`)}const fe=X.slice(0,Q),we=X.slice(Q+1);if(ue(fe,U)&&ue(X,U))throw new Error(`ambiguous location string: "${ie}"`);if(ue(fe,U))if(we){const Se=we.match(/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)(-?(\d+|\d{1,3}(,\d{3})*))$/),ze=we.match(/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)?$/);if(Se){const[,Fe,,,,Ke]=Se;if(Fe!==void 0&&Ke!==void 0)return{assemblyName:U,refName:fe,start:+Fe.replaceAll(",",""),end:+Ke.replaceAll(",",""),reversed:E}}else if(ze){const[,Fe,,,Ke]=ze;if(Fe!==void 0)return Ke?{assemblyName:U,refName:fe,start:+Fe.replaceAll(",",""),reversed:E}:{assemblyName:U,refName:fe,start:+Fe.replaceAll(",",""),end:+Fe.replaceAll(",",""),reversed:E}}else throw new Error(`could not parse range "${we}" on location "${ie}"`)}else return{assemblyName:U,refName:fe,reversed:E};else if(ue(X,U))return{assemblyName:U,refName:X,reversed:E};throw new Error(`unknown reference sequence name in location "${ie}"`)}e.parseLocStringOneBased=C;function k(ie,ue){const E=C(ie,ue);return typeof E.start=="number"&&(E.start-=1),E}e.parseLocString=k;function O(ie,ue){const E=ie.assemblyName||ue.assemblyName?(ie.assemblyName||"").localeCompare(ue.assemblyName||""):0;if(E)return E;const F=ie.refName||ue.refName?(ie.refName||"").localeCompare(ue.refName||""):0;if(F)return F;if(ie.start!==void 0&&ue.start!==void 0){const U=ie.start-ue.start;if(U)return U}if(ie.end!==void 0&&ue.end!==void 0){const U=ie.end-ue.end;if(U)return U}return 0}e.compareLocs=O;function T(ie,ue,E){const F=k(ie,E),U=k(ue,E);return O(F,U)}e.compareLocStrings=T;function B(ie,ue,E){return ie<ue?ue:ie>E?E:ie}e.clamp=B;function R(ie){return Math.round(ie*10)/10}function P(ie,{reversed:ue,end:E=0,start:F=0},U){return R((ue?E-ie:ie-F)/U)}e.bpToPx=P;const D=180/Math.PI,z=Math.PI/180;function N(ie){return ie*D%360}e.radToDeg=N;function H(ie){return ie*z%(2*Math.PI)}e.degToRad=H;function J(ie,ue){return[ie*Math.cos(ue),ie*Math.sin(ue)]}e.polarToCartesian=J;function ne(ie,ue){const E=Math.sqrt(ie*ie+ue*ue),F=Math.atan(ue/ie);return[E,F]}e.cartesianToPolar=ne;function oe(ie,ue,E){return Z(ie.get("start"),ie.get("end"),ue,E)}e.featureSpanPx=oe;function Z(ie,ue,E,F){const U=P(ie,E,F),X=P(ue,E,F);return E.reversed?[X,U]:[U,X]}e.bpSpanPx=Z;function ce(ie,ue,E){const F=Array.from({length:E||0});let U=0;for(const X of ie)F[U]=ue(X),U+=1;return F}e.iterMap=ce;function se(ie,ue){let E=ie.length;for(;E--;)if(ue(ie[E],E,ie))return E;return-1}e.findLastIndex=se;function Y(ie,ue){let E=ie.length;for(;E--;)if(ue(ie[E],E,ie))return ie[E]}e.findLast=Y;function he(ie,ue,E,F,U,X,Q){let fe;function we(Se){(0,c.isAbortException)(Se)||((0,a.isAlive)(ie)?Q(Se):console.error(Se))}(0,a.addDisposer)(ie,(0,s.reaction)(()=>{try{return ue(ie)}catch(Se){we(Se);return}},async(Se,ze)=>{if(fe&&!fe.signal.aborted&&fe.abort(),!(0,a.isAlive)(ie))return;fe=new AbortController;const Fe=fe;U(Fe);try{const Ke=await E(Se,Fe.signal,ie,ze);(0,c.checkAbortSignal)(Fe.signal),(0,a.isAlive)(ie)&&X(Ke)}catch(Ke){Fe&&!Fe.signal.aborted&&Fe.abort(),we(Ke)}},F)),(0,a.addDisposer)(ie,()=>{fe&&!fe.signal.aborted&&fe.abort()})}e.makeAbortableReaction=he;function ae(ie,ue){if((0,a.isStateTreeNode)(ue)&&!(0,a.isAlive)(ue))return ue;if(ue&&(ie!=null&&ie[ue.refName])){ue=(0,a.isStateTreeNode)(ue)?{...(0,a.getSnapshot)(ue)}:{...ue};const E=ie[ue.refName];if(E)return{...ue,refName:E,originalRefName:ue.refName}}return ue}e.renameRegionIfNeeded=ae;async function ye(ie,ue){const{regions:E=[],adapterConfig:F}=ue;if(!ue.sessionId)throw new Error("sessionId is required");const U=E.map(Q=>Q.assemblyName),X=Object.fromEntries(await Promise.all([...new Set(U)].map(async Q=>[Q,await ie.getRefNameMapForAdapter(F,Q,ue)])));return{...ue,regions:E.map((Q,fe)=>ae(X[U[fe]],Q))}}e.renameRegionsIfNeeded=ye;function re(ie,ue){return[Math.min(ie,ue),Math.max(ie,ue)]}e.minmax=re;function te(ie,ue=70,E=30){return ie.length>ue?ie.slice(0,E)+"..."+ie.slice(-E):ie}e.shorten=te;function le({refName:ie,coord:ue,assemblyName:E,oob:F},U){return[E&&U?`{${E}}`:"",ie?`${te(ie)}:${Ae(ue)}${F?" (out of bounds)":""}`:""].join("")}e.stringify=le,e.isElectron=/electron/i.test(typeof navigator<"u"?navigator.userAgent:"");function de(ie){return _e((0,e.complement)(ie))}e.revcom=de;function _e(ie){return ie.split("").reverse().join("")}e.reverse=_e,e.complement=(()=>{const ie=/[ACGT]/gi,ue={S:"S",w:"w",T:"A",r:"y",a:"t",N:"N",K:"M",x:"x",d:"h",Y:"R",V:"B",y:"r",M:"K",h:"d",k:"m",C:"G",g:"c",t:"a",A:"T",n:"n",W:"W",X:"X",m:"k",v:"b",B:"V",s:"s",H:"D",c:"g",D:"H",b:"v",R:"Y",G:"C"};return E=>E.replaceAll(ie,F=>ue[F]||"")})();function be(ie){const ue=new FileReader;return new Promise((E,F)=>{ue.onload=U=>{U.target?E(U.target.result):F(new Error("unknown result reading blob from canvas"))},ue.readAsDataURL(ie)})}e.blobToDataURL=be,e.rIC=typeof jest>"u"?typeof window<"u"&&window.requestIdleCallback?window.requestIdleCallback:ie=>setTimeout(()=>ie(),1):ie=>ie();const ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625];function W(ie,ue=10){var E;const F=.5279276315789471,U=String(ie);let X=0;for(let Q=0;Q<U.length;Q++){const fe=U.charCodeAt(Q);X+=(E=ke[fe])!==null&&E!==void 0?E:F}return X*ue}e.measureText=W,e.defaultStarts=["ATG"],e.defaultStops=["TAA","TAG","TGA"],e.defaultCodonTable={TCA:"S",TCC:"S",TCG:"S",TCT:"S",TTC:"F",TTT:"F",TTA:"L",TTG:"L",TAC:"Y",TAT:"Y",TAA:"*",TAG:"*",TGC:"C",TGT:"C",TGA:"*",TGG:"W",CTA:"L",CTC:"L",CTG:"L",CTT:"L",CCA:"P",CCC:"P",CCG:"P",CCT:"P",CAC:"H",CAT:"H",CAA:"Q",CAG:"Q",CGA:"R",CGC:"R",CGG:"R",CGT:"R",ATA:"I",ATC:"I",ATT:"I",ATG:"M",ACA:"T",ACC:"T",ACG:"T",ACT:"T",AAC:"N",AAT:"N",AAA:"K",AAG:"K",AGC:"S",AGT:"S",AGA:"R",AGG:"R",GTA:"V",GTC:"V",GTG:"V",GTT:"V",GCA:"A",GCC:"A",GCG:"A",GCT:"A",GAC:"D",GAT:"D",GAA:"E",GAG:"E",GGA:"G",GGC:"G",GGG:"G",GGT:"G"};function ee(ie){const ue={};return Object.keys(ie).forEach(E=>{const F=ie[E],U=[];for(let X=0;X<3;X++){const Q=E.charAt(X);U[X]=[],U[X][0]=Q.toUpperCase(),U[X][1]=Q.toLowerCase()}for(let X=0;X<2;X++){const Q=U[0][X];for(let fe=0;fe<2;fe++){const we=U[1][fe];for(let Se=0;Se<2;Se++){const ze=U[2][Se],Fe=Q+we+ze;ue[Fe]=F}}}}),ue}e.generateCodonTable=ee;async function Ee(ie,ue,E){ue(ie);const F=await E();return ue(""),F}e.updateStatus=Ee;function ge(ie){let ue=0;if(ie.length===0)return ue;for(let E=0;E<ie.length;E++){const F=ie.charCodeAt(E);ue=(ue<<5)-ue+F,ue|=0}return ue}e.hashCode=ge;function pe(ie){return`${ge(JSON.stringify(ie))}`}e.objectHash=pe;async function ve(ie,ue){return(await Promise.all(ie.map(F=>ue.blocksForRange(F.refName,F.start,F.end)))).flat().map(F=>({start:F.minv.blockPosition,end:F.maxv.blockPosition+65535})).reduce((F,U)=>F+U.end-U.start,0)}e.bytesForRegions=ve;function $e(ie){return["Gff3TabixAdapter","VcfTabixAdapter","Gff3Adapter","VcfAdapter"].includes(ie)}e.isSupportedIndexingAdapter=$e;function Ne(ie){let ue;return Math.floor(ie/1e6)>0?ue=`${Number.parseFloat((ie/1e6).toPrecision(3))}Mbp`:Math.floor(ie/1e3)>0?ue=`${Number.parseFloat((ie/1e3).toPrecision(3))}Kbp`:ue=`${Ae(Math.floor(ie))}bp`,ue}e.getBpDisplayStr=Ne;function Ae(ie){return ie.toLocaleString("en-US")}e.toLocale=Ae;function Oe(ie,ue){return Math.floor(ue/1e3)>0?`${Ae(Number.parseFloat((ie/1e6).toFixed(2)))}M`:`${Ae(Math.floor(ie))}`}e.getTickDisplayStr=Oe;function j(ie,ue){const{dynamicBlocks:E,staticBlocks:F,offsetPx:U}=b(ie),X=(E==null?void 0:E.contentBlocks[0])||{},Q=(F==null?void 0:F.contentBlocks[0])||{},fe=(F==null?void 0:F.contentBlocks[1])||{};return{offsetPx:ue?0:U-Q.offsetPx,offsetPx1:ue?0:U-fe.offsetPx,start:X.start,end:X.end}}e.getViewParams=j;function M({sessionId:ie,layoutId:ue}){return ie+"-"+ue}e.getLayoutId=M;function L(ie,ue){const[E,F]=(0,i.useState)(()=>{if(typeof window>"u")return ue;try{const X=window.localStorage.getItem(ie);return X?JSON.parse(X):ue}catch(X){return console.error(X),ue}});return[E,X=>{try{const Q=X instanceof Function?X(E):X;F(Q),typeof window<"u"&&window.localStorage.setItem(ie,JSON.stringify(Q))}catch(Q){console.error(Q)}}]}e.useLocalStorage=L;function q(ie){const{uri:ue,baseUri:E=""}=ie;let F;try{F=new URL(ue,E).href}catch{F=ue}return F}e.getUriLink=q;function me(ie){return(0,o.default)(ie)?(0,u.isUriLocation)(ie)?q(ie):JSON.stringify(ie):String(ie)}e.getStr=me;function Te(ie){return ie.replaceAll(/(<([^>]+)>)/gi,"")}function Pe(ie,ue){const{padding:E=30,minWidth:F=80,fontSize:U=12,maxWidth:X=1e3,stripHTML:Q=!1}=ue||{};return Je(ie.map(fe=>me(fe)).map(fe=>Q?Te(fe):fe).map(fe=>W(fe,U)).map(fe=>Math.min(Math.max(fe+E,F),X)))}e.measureGridWidth=Pe;function Xe(ie){return(0,a.getEnv)(ie)}e.getEnv=Xe;function He(ie){return typeof localStorage<"u"?localStorage.getItem(ie):void 0}e.localStorageGetItem=He;function Ve(ie,ue){return typeof localStorage<"u"?localStorage.setItem(ie,ue):void 0}e.localStorageSetItem=Ve;function Je(ie,ue=-1/0){let E=ue;for(const F of ie)E=F>E?F:E;return E}e.max=Je;function Ye(ie,ue=1/0){let E=ue;for(const F of ie)E=F<E?F:E;return E}e.min=Ye;function yt(ie){let ue=0;for(const E of ie)ue+=E;return ue}e.sum=yt;function mt(ie){return yt(ie)/ie.length}e.avg=mt;function ut(ie,ue){var E;const F={};for(const U of ie)(F[E=ue(U)]||(F[E]=[])).push(U);return F}e.groupBy=ut;function Et(ie){return ie!=null}e.notEmpty=Et;function et(ie,ue=5e3){if(ie.length<=1)return ie;const E=[];let F=null;ie=ie.sort((U,X)=>U.start-X.start),E.push(ie[0]);for(let U=1;U<ie.length;U++)F=E.at(-1),F.end+ue<ie[U].start-ue?E.push(ie[U]):F.end<ie[U].end&&(F.end=Math.max(F.end,ie[U].end),E.pop(),E.push(F));return E}e.mergeIntervals=et;function ct(ie){const ue={};for(const E of ie)ue[E.refName]||(ue[E.refName]=[]),ue[E.refName].push(E);return Object.values(ue).flatMap(E=>et(E.sort((F,U)=>F.start-U.start)))}e.gatherOverlaps=ct;var _t=Px;Object.defineProperty(e,"SimpleFeature",{enumerable:!0,get:function(){return r(_t).default}}),Object.defineProperty(e,"isFeature",{enumerable:!0,get:function(){return _t.isFeature}});function xe(ie){return(0,d.colord)(ie).alpha(1).toHex()}e.stripAlpha=xe}(GO)),GO}Object.defineProperty(wB,"__esModule",{value:!0});const Ir=Xu,hHe=kM,mHe=Jf,gHe=Zu();function vHe(){return!0}const yHe={stringArray:Ir.types.array(Ir.types.string),stringArrayMap:Ir.types.map(Ir.types.array(Ir.types.string)),numberMap:Ir.types.map(Ir.types.number),boolean:Ir.types.boolean,color:Ir.types.refinement("Color",Ir.types.string,vHe),integer:Ir.types.integer,number:Ir.types.number,string:Ir.types.string,text:Ir.types.string,fileLocation:mHe.FileLocation,frozen:Ir.types.frozen()},UU={stringArray:[],stringArrayMap:{},numberMap:{},boolean:!0,color:"black",integer:1,number:1,string:"",text:"",fileLocation:{uri:"/path/to/resource.txt",locationType:"UriLocation"},frozen:{}},cI=e=>({views:{get valueJSON(){return e.value}}}),VU=e=>({views:{get valueJSON(){return JSON.stringify(e.value)}}}),HU={fileLocation:VU,number:cI,integer:cI,boolean:cI,frozen:VU,stringArray:e=>({views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add(t){e.value.push(t)},removeAtIndex(t){e.value.splice(t,1)},setAtIndex(t,n){e.value[t]=n}}}),stringArrayMap:e=>({views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add(t,n){e.value.set(t,n)},remove(t){e.value.delete(t)},addToKey(t,n){const r=e.value.get(t);if(!r)throw new Error(`${t} not found`);r.push(n)},removeAtKeyIndex(t,n){const r=e.value.get(t);if(!r)throw new Error(`${t} not found`);r.splice(n,1)},setAtKeyIndex(t,n,r){const i=e.value.get(t);if(!i)throw new Error(`${t} not found`);i[n]=r}}}),numberMap:e=>({views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add(t,n){e.value.set(t,n)},remove(t){e.value.delete(t)}}})},bHe=Ir.types.refinement("JexlString",Ir.types.string,e=>e.startsWith("jexl:"));function _He(e){return e!=null&&e.toJSON?e.toJSON():`"${e}"`}function xHe(e,{description:t="",model:n,type:r,defaultValue:i,contextVariable:o=[]}){if(!r)throw new Error("type name required");if(n||(n=yHe[r]),!n)throw new Error(`no builtin config slot type "${r}", and no 'model' param provided`);if(i===void 0)throw new Error("no 'defaultValue' provided");const a=`${e.charAt(0).toUpperCase()}${e.slice(1)}ConfigSlot`;let s=Ir.types.model(a,{name:Ir.types.literal(e),description:Ir.types.literal(t),type:Ir.types.literal(r),value:Ir.types.optional(Ir.types.union(bHe,n),i)}).volatile(()=>({contextVariable:o})).views(u=>({get isCallback(){return String(u.value).startsWith("jexl:")}})).views(u=>({get expr(){if(u.isCallback){const{pluginManager:f}=(0,gHe.getEnv)(u);return!f&&typeof jest>"u"&&console.warn("no pluginManager detected on config env (if you dynamically instantiate a config, for example in renderProps for your display model, check that you add the env argument)"),(0,hHe.stringToJexlExpression)(String(u.value),f==null?void 0:f.jexl)}return{evalSync:()=>u.value}},get valueJSON(){if(!u.isCallback)return _He(u.value)}})).preProcessSnapshot(u=>typeof u=="object"&&u.name===e?u:{name:e,description:t,type:r,value:u}).postProcessSnapshot(u=>typeof u.value=="object"?JSON.stringify(u.value)!==JSON.stringify(i)?u.value:void 0:u.value!==i?u.value:void 0).actions(u=>({set(f){u.value=f},reset(){u.value=i},convertToCallback(){u.isCallback||(u.value=`jexl:${u.valueJSON||"''"}`)},convertToValue(){if(u.isCallback){try{const f=u.expr.evalSync();if(f!==void 0){u.value=f;return}}catch{}if(u.value=i,u.isCallback){if(!(r in UU))throw new Error(`no fallbackDefault defined for type ${r}`);u.value=UU[r]}}}}));HU[r]&&(s=s.extend(HU[r]));const c=Ir.types.optional(s,{name:e,type:r,description:t,value:i});return Object.defineProperty(c,"isJBrowseConfigurationSlot",{value:!0}),c}wB.default=xHe;var ro={},ca={};Object.defineProperty(ca,"__esModule",{value:!0});ca.resolveLateType=ca.getEnumerationValues=ca.getDefaultValue=ca.getPropertyType=ca.getUnionSubTypes=ca.getSubType=void 0;const ed=Xu;function eL(e){let t;if((0,ed.isOptionalType)(e))t=e._subtype||e.type;else if((0,ed.isArrayType)(e)||(0,ed.isMapType)(e))t=e._subtype||e._subType||e.subType;else{if(typeof e.getSubType=="function")return e.getSubType();throw new TypeError("unsupported mst type")}if(!t)throw new Error("failed to get subtype");return t}ca.getSubType=eL;function Wne(e){if(!(0,ed.isUnionType)(e))throw new TypeError("not an MST union type");const t=e._types||e.types||eL(e)._types||eL(e).types;if(!t)throw new Error("failed to extract subtypes from mst union");return t}ca.getUnionSubTypes=Wne;function wHe(e,t){return e.properties[t]}ca.getPropertyType=wHe;function SHe(e){if(!(0,ed.isOptionalType)(e))throw new TypeError("type must be an optional type");return e._defaultValue||e.defaultValue}ca.getDefaultValue=SHe;function CHe(e){return Wne(e).map(n=>n.value)}ca.getEnumerationValues=CHe;function AHe(e){return!(0,ed.isUnionType)(e)&&!(0,ed.isArrayType)(e)&&(0,ed.isLateType)(e)?e.getSubType():e}ca.resolveLateType=AHe;Object.defineProperty(ro,"__esModule",{value:!0});ro.isConfigurationSlotType=ro.isConfigurationModel=ro.isConfigurationSchemaType=ro.isBareConfigurationSchemaType=ro.getTypeNamesFromExplicitlyTypedUnion=ro.getConf=ro.readConfObject=void 0;const $r=Xu,jf=ca;function tA(e,t,n={}){if(!e)throw new TypeError("must provide conf object to read");if(!t)return JSON.parse(JSON.stringify((0,$r.getSnapshot)(e)));if(typeof t=="string"){let r=e[t];if(!r&&(0,$r.isStateTreeNode)(e)&&(0,$r.isMapType)((0,$r.getType)(e))&&(r=e.get(t)),!r)return;if(r.expr){const i=r.expr.evalSync(n);return(0,$r.isStateTreeNode)(i)?JSON.parse(JSON.stringify((0,$r.getSnapshot)(i))):i}return(0,$r.isStateTreeNode)(r)?JSON.parse(JSON.stringify((0,$r.getSnapshot)(r))):r}if(Array.isArray(t)){const r=t[0];if(t.length>1){const i=t.slice(1);let o=e[r];return!o&&(0,$r.isStateTreeNode)(e)&&(0,$r.isMapType)((0,$r.getType)(e))&&(o=e.get(r)),o?tA(o,i,n):void 0}return tA(e,r,n)}throw new TypeError("slotPath must be a string or array")}ro.readConfObject=tA;function PHe(e,t,n){if(!e)throw new TypeError("must provide a model object");const{configuration:r}=e;if(Yne(r))return tA(r,t,n);throw new TypeError("cannot getConf on this model, it has no configuration")}ro.getConf=PHe;function qne(e){if((0,$r.isType)(e)&&(e=(0,jf.resolveLateType)(e),(0,$r.isUnionType)(e))){const t=[];return(0,jf.getUnionSubTypes)(e).forEach(n=>{n=(0,jf.resolveLateType)(n);let r=qne(n);if(r.length||(r=[(0,jf.getDefaultValue)(n).type]),!r[0])throw new Error(`invalid config schema type ${n}`);t.push(...r)}),t}return[]}ro.getTypeNamesFromExplicitlyTypedUnion=qne;function Xne(e){return!!((0,$r.isType)(e)&&((0,$r.isModelType)(e)&&("isJBrowseConfigurationSchema"in e||e.name.includes("ConfigurationSchema"))||(0,$r.isLateType)(e)))}ro.isBareConfigurationSchemaType=Xne;function sg(e){return(0,$r.isType)(e)?Xne(e)?!0:(0,$r.isUnionType)(e)?(0,jf.getUnionSubTypes)(e).every(t=>sg(t)||t.name==="undefined"):!!((0,$r.isOptionalType)(e)&&sg((0,jf.getSubType)(e))||(0,$r.isArrayType)(e)&&sg((0,jf.getSubType)(e))||(0,$r.isMapType)(e)&&sg((0,jf.getSubType)(e))):!1}ro.isConfigurationSchemaType=sg;function Yne(e){return(0,$r.isStateTreeNode)(e)&&sg((0,$r.getType)(e))}ro.isConfigurationModel=Yne;function MHe(e){return typeof e=="object"&&e!==null&&"isJBrowseConfigurationSlot"in e}ro.isConfigurationSlotType=MHe;var EHe=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vv,"__esModule",{value:!0});vv.ConfigurationReference=vv.ConfigurationSchema=void 0;const ws=Xu,GU=Jf,THe=EHe(wB),WU=ro;function OHe(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null&&Object.keys(e).length===0}function IHe(e){return Array.isArray(e)&&e.length===0}function RHe(e,t,n={}){var r;if(typeof e!="string")throw new Error("first arg must be string name of the model that this config schema goes with");let i=t,o=n;return!((r=n.baseConfiguration)===null||r===void 0)&&r.jbrowseSchemaDefinition&&(i={...n.baseConfiguration.jbrowseSchemaDefinition,...i},o={...n.baseConfiguration.jbrowseSchemaOptions,...n},delete o.baseConfiguration),{schemaDefinition:i,options:o}}function kHe(e,t,n){const r={};let i;if(n.explicitlyTyped&&(r.type=ws.types.optional(ws.types.literal(e),e)),n.explicitIdentifier&&n.implicitIdentifier)throw new Error(`Cannot have both explicit and implicit identifiers in ${e}`);n.explicitIdentifier?typeof n.explicitIdentifier=="string"?(r[n.explicitIdentifier]=ws.types.identifier,i=n.explicitIdentifier):(r.id=ws.types.identifier,i="id"):n.implicitIdentifier&&(typeof n.implicitIdentifier=="string"?(r[n.implicitIdentifier]=GU.ElementId,i=n.implicitIdentifier):(r.id=GU.ElementId,i="id"));const o={isJBrowseConfigurationSchema:!0,jbrowseSchema:{modelName:e,definition:t,options:n}};Object.entries(t).forEach(([u,f])=>{if((0,ws.isType)(f)&&(0,ws.isLateType)(f)||(0,WU.isConfigurationSchemaType)(f))r[u]=f;else if(typeof f=="string"||typeof f=="number")o[u]=f;else if(typeof f=="object"){if(!f.type)throw new Error(`no type set for config slot ${e}.${u}`);try{r[u]=(0,THe.default)(u,f)}catch(d){throw new Error(`invalid config slot definition for ${e}.${u}: ${d}`)}}else throw new Error(`invalid configuration schema definition, "${u}" must be either a valid configuration slot definition, a constant, or a nested configuration schema`)});let a=ws.types.model(`${e}ConfigurationSchema`,r).actions(u=>({setSubschema(f,d){if(!(0,WU.isConfigurationSchemaType)(r[f]))throw new Error(`${f} is not a subschema, cannot replace`);const p=(0,ws.isStateTreeNode)(d)?d:r[f].create(d);return u[f]=p,p}}));Object.keys(o).length&&(a=a.volatile(()=>o)),n.actions&&(a=a.actions(n.actions)),n.views&&(a=a.views(n.views)),n.extend&&(a=a.extend(n.extend));const s=i?{[i]:"placeholderId"}:{},l=n.explicitlyTyped?{type:e,...s}:s,c=(0,ws.getSnapshot)(a.create(l));return a=a.postProcessSnapshot(u=>{const f={};let d=!0;for(const[p,h]of Object.entries(u))d&&(typeof c[p]=="object"&&typeof h=="object"?JSON.stringify(c[p])!==JSON.stringify(h)&&(d=!1):c[p]!==h&&(d=!1)),h!==void 0&&o[p]===void 0&&!OHe(h)&&!IHe(h)&&(f[p]=h);return d?{}:f}),n.preProcessSnapshot&&(a=a.preProcessSnapshot(n.preProcessSnapshot)),ws.types.optional(a,l)}function LHe(e,t,n){const{schemaDefinition:r,options:i}=RHe(e,t,n),o=kHe(e,r,i);return o.isJBrowseConfigurationSchema=!0,o.jbrowseSchemaDefinition=r,o.jbrowseSchemaOptions=i,o}vv.ConfigurationSchema=LHe;function $He(e){return ws.types.union(ws.types.reference(e),e)}vv.ConfigurationReference=$He;(function(e){var t=Ce&&Ce.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(i,s,l)}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),n=Ce&&Ce.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationReference=e.ConfigurationSchema=void 0;var r=vv;Object.defineProperty(e,"ConfigurationSchema",{enumerable:!0,get:function(){return r.ConfigurationSchema}}),Object.defineProperty(e,"ConfigurationReference",{enumerable:!0,get:function(){return r.ConfigurationReference}}),n(ro,e)})(RM);var DHe=Ce&&Ce.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),BHe=Ce&&Ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),NHe=Ce&&Ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&DHe(t,e,n);return BHe(t,e),t};Object.defineProperty(hB,"__esModule",{value:!0});const Lw=NHe($),qU=Ta,FHe=Id,jHe=Rd,zHe=RM,UHe=Zu(),VHe=(0,jHe.makeStyles)()({importFormEntry:{minWidth:180}}),HHe=(0,FHe.observer)(function({session:e,onChange:t,selected:n,InputProps:r,TextFieldProps:i,localStorageKey:o,helperText:a="Select assembly to view"}){const{classes:s}=VHe(),{assemblyNames:l,assemblyManager:c}=e,u=new URLSearchParams(window.location.search).get("config"),[f,d]=typeof jest>"u"&&o?(0,UHe.useLocalStorage)(`lastAssembly-${[window.location.host+window.location.pathname,u,o].join("-")}`,n):(0,Lw.useState)(n),p=l.includes(f||"")?f:n;(0,Lw.useEffect)(()=>{p&&p!==n&&t(p)},[p,t,n]);const h=l.length?"":"No configured assemblies";return Lw.default.createElement(qU.TextField,{select:!0,label:"Assembly",variant:"outlined",helperText:h||a,value:p||"",inputProps:{"data-testid":"assembly-selector"},onChange:g=>d(g.target.value),error:!!h,InputProps:r,disabled:!!h,className:s.importFormEntry,...i},l.map(g=>{const v=c.get(g),m=v?(0,zHe.getConf)(v,"displayName"):"";return Lw.default.createElement(qU.MenuItem,{key:g,value:g},m||g)}))});hB.default=HHe;var z3={},ih={},U3={},uI={};const GHe=os(iye);var XU;function Do(){return XU||(XU=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=GHe}(uI)),uI}var WHe=Er;Object.defineProperty(U3,"__esModule",{value:!0});U3.default=void 0;var qHe=WHe(Do()),XHe=G,YHe=(0,qHe.default)((0,XHe.jsx)("path",{d:"m10 17 5-5-5-5v10z"}),"ArrowRight");U3.default=YHe;var V3={},KHe=Er;Object.defineProperty(V3,"__esModule",{value:!0});V3.default=void 0;var ZHe=KHe(Do()),JHe=G,QHe=(0,ZHe.default)((0,JHe.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");V3.default=QHe;var H3={},eGe=Er;Object.defineProperty(H3,"__esModule",{value:!0});H3.default=void 0;var tGe=eGe(Do()),nGe=G,rGe=(0,tGe.default)((0,nGe.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");H3.default=rGe;var G3={},iGe=Er;Object.defineProperty(G3,"__esModule",{value:!0});G3.default=void 0;var oGe=iGe(Do()),aGe=G,sGe=(0,oGe.default)((0,aGe.jsx)("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonChecked");G3.default=sGe;var W3={},lGe=Er;Object.defineProperty(W3,"__esModule",{value:!0});W3.default=void 0;var cGe=lGe(Do()),uGe=G,fGe=(0,cGe.default)((0,uGe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked");W3.default=fGe;var dGe=Ce&&Ce.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),pGe=Ce&&Ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hGe=Ce&&Ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&dGe(t,e,n);return pGe(t,e),t},Mx=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ih,"__esModule",{value:!0});ih.MenuItemEndDecoration=void 0;const Ln=hGe($),iu=Ta,mGe=Rd,gGe=Mx(U3),vGe=Mx(V3),yGe=Mx(H3),bGe=Mx(G3),_Ge=Mx(W3),xGe=Zu(),Kne=(0,mGe.makeStyles)()({paper:{position:"fixed",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",top:0,left:0,outline:0},menuItemEndDecoration:{padding:0,margin:0,height:16}});function tL(e){const{classes:t}=Kne(),{type:n}=e;let r,i;"checked"in e&&({checked:r,disabled:i}=e);let o;switch(n){case"subMenu":{o=Ln.default.createElement(gGe.default,{color:"action"});break}case"checkbox":{if(r){const a=i?"inherit":void 0;o=Ln.default.createElement(vGe.default,{color:a})}else o=Ln.default.createElement(yGe.default,{color:"action"});break}case"radio":{if(r){const a=i?"inherit":void 0;o=Ln.default.createElement(bGe.default,{color:a})}else o=Ln.default.createElement(_Ge.default,{color:"action"});break}}return Ln.default.createElement("div",{className:t.menuItemEndDecoration},o)}ih.MenuItemEndDecoration=tL;function wGe(e,t){const n=e.slice(t+1).findIndex(r=>r.type!=="divider"&&r.type!=="subHeader"&&!r.disabled);return n===-1?n:t+1+n}function SGe(e,t){return(0,xGe.findLastIndex)(e.slice(0,t),n=>n.type!=="divider"&&n.type!=="subHeader"&&!n.disabled)}const Zne=Ln.default.forwardRef(function(t,n){const[r,i]=(0,Ln.useState)(),[o,a]=(0,Ln.useState)(),[s,l]=(0,Ln.useState)(!1),[c,u]=(0,Ln.useState)(),[f,d]=(0,Ln.useState)(),p=(0,Ln.useRef)(null),{classes:h}=Kne(),{menuItems:g,onMenuItemClick:v,open:m,onClose:y,anchorEl:_,top:b=!1}=t;(0,Ln.useEffect)(()=>{m||(i(void 0),a(void 0))},[m]),(0,Ln.useEffect)(()=>{const C=m&&!!r;let k;return C&&!s?k=setTimeout(()=>{l(!0)},300):!C&&s&&(k=setTimeout(()=>{l(!1)},300)),()=>{clearTimeout(k)}},[s,m,r]),(0,Ln.useEffect)(()=>{if(_){const C=_.getBoundingClientRect();f?(C.top!==f.top||C.left+C.width!==f.left)&&d({top:C.top,left:C.left+C.width}):d({top:C.top,left:C.left+C.width})}else f||d({})},[f,_]);const x=g.some(C=>"icon"in C&&C.icon),w={};function S(C){return k=>{v(k,C)}}const A=Ln.default.createElement(Ln.default.Fragment,null,Ln.default.createElement(iu.MenuList,{autoFocusItem:m&&!s,dense:!0},g.sort((C,k)=>(k.priority||0)-(C.priority||0)).map((C,k)=>{if(C.type==="divider")return Ln.default.createElement(iu.Divider,{key:`divider-${k}`,component:"li"});if(C.type==="subHeader")return Ln.default.createElement(iu.ListSubheader,{key:`subHeader-${C.label}-${k}`},C.label);let O=null,T=null;if(C.icon){const R=C.icon;O=Ln.default.createElement(iu.ListItemIcon,null,Ln.default.createElement(R,null))}"subMenu"in C?T=Ln.default.createElement(tL,{type:"subMenu"}):(C.type==="checkbox"||C.type==="radio")&&(T=Ln.default.createElement(tL,{type:C.type,checked:C.checked,disabled:C.disabled}));const B="onClick"in C?S(C.onClick):void 0;return Ln.default.createElement(iu.MenuItem,{key:C.label,style:w,selected:k===c,onClick:B,onMouseMove:R=>{R.currentTarget!==document.activeElement&&(R.currentTarget.focus(),u(k)),"subMenu"in C?o!==k&&(i(R.currentTarget),a(k)):(i(void 0),a(void 0))},onKeyDown:R=>{switch(R.key){case"ArrowLeft":case"Escape":{y&&y(R,"escapeKeyDown");break}case"ArrowUp":{u(SGe(g,k));break}case"ArrowDown":{const P=wGe(g,k);u(P);break}default:"subMenu"in C&&(R.key==="ArrowRight"||R.key==="Enter")&&(i(R.currentTarget),a(k),l(!0))}},disabled:!!C.disabled},O,Ln.default.createElement(iu.ListItemText,{primary:C.label,secondary:C.subLabel,inset:x&&!C.icon}),T)})),g.map((C,k)=>{let O=null;return"subMenu"in C&&(O=Ln.default.createElement(Zne,{key:C.label,anchorEl:r,open:s&&o===k,onClose:()=>{l(!1),i(void 0)},onMenuItemClick:v,menuItems:C.subMenu})),O}));return b?A:Ln.default.createElement(iu.Grow,{in:m,style:{transformOrigin:"0 0 0"},ref:n},Ln.default.createElement(iu.Paper,{elevation:8,ref:p,className:h.paper,style:{...f}},A))});function CGe(e){const{open:t,onClose:n,menuItems:r,onMenuItemClick:i,...o}=e;return Ln.default.createElement(iu.Popover,{open:t,onClose:n,BackdropProps:{invisible:!0},anchorOrigin:{vertical:"bottom",horizontal:"right",...o.anchorOrigin},transformOrigin:{vertical:"top",horizontal:"left",...o.transformOrigin},...o},Ln.default.createElement(Zne,{open:t,onClose:n,menuItems:r,onMenuItemClick:i,top:!0}))}ih.default=CGe;var co={},fI={exports:{}},dI={exports:{}},YU;function AGe(){return YU||(YU=1,function(e){function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(dI)),dI.exports}var pI={exports:{}},KU;function PGe(){return KU||(KU=1,function(e){function t(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,a,s,l,c=[],u=!0,f=!1;try{if(s=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(o=s.call(i)).done)&&(c.push(o.value),c.length!==r);u=!0);}catch(d){f=!0,a=d}finally{try{if(!u&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(f)throw a}}return c}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(pI)),pI.exports}var hI={exports:{}},ZU;function MGe(){return ZU||(ZU=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(hI)),hI.exports}var JU;function EGe(){return JU||(JU=1,function(e){var t=AGe(),n=PGe(),r=jte(),i=MGe();function o(a,s){return t(a)||n(a,s)||r(a,s)||i()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(fI)),fI.exports}var $w={},QU;function TGe(){if(QU)return $w;QU=1;var e=LM;Object.defineProperty($w,"__esModule",{value:!0}),$w.useEvent=i;var t=r($);function n(o){if(typeof WeakMap!="function")return null;var a=new WeakMap,s=new WeakMap;return(n=function(c){return c?s:a})(o)}function r(o,a){if(!a&&o&&o.__esModule)return o;if(o===null||e(o)!=="object"&&typeof o!="function")return{default:o};var s=n(a);if(s&&s.has(o))return s.get(o);var l={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in o)if(u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)){var f=c?Object.getOwnPropertyDescriptor(o,u):null;f&&(f.get||f.set)?Object.defineProperty(l,u,f):l[u]=o[u]}return l.default=o,s&&s.set(o,l),l}function i(o){if(typeof window>"u")return o;var a=t.useRef(null);return t.useLayoutEffect(function(){a.current=o}),t.useCallback(function(){for(var s,l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];(s=a.current)===null||s===void 0||s.call.apply(s,[a].concat(c))},[])}return $w}var Jne=Er;Object.defineProperty(co,"__esModule",{value:!0});co.anchorRef=kGe;co.bindContextMenu=$Ge;co.bindDialog=VGe;co.bindDoubleClick=FGe;co.bindFocus=NGe;co.bindHover=BGe;co.bindMenu=zGe;co.bindPopover=jGe;co.bindPopper=UGe;co.bindToggle=DGe;co.bindTrigger=LGe;co.initCoreState=void 0;co.usePopupState=RGe;var CS=Jne(AB()),OGe=Jne(EGe()),Ud=$,Z0=TGe();function e9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e9(Object(n),!0).forEach(function(r){(0,CS.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var t9={};function IGe(e,t){t9[e]||(t9[e]=!0,console.error("[material-ui-popup-state] WARNING",t))}var Qne={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1};co.initCoreState=Qne;function RGe(e){var t=e.parentPopupState,n=e.popupId,r=e.variant,i=e.disableAutoFocus,o=(0,Ud.useRef)(!0);(0,Ud.useEffect)(function(){return o.current=!0,function(){o.current=!1}},[]);var a=(0,Ud.useState)(Qne),s=(0,OGe.default)(a,2),l=s[0],c=s[1],u=(0,Ud.useCallback)(function(x){o.current&&c(x)},[]),f=(0,Ud.useCallback)(function(x){return u(function(w){return Pn(Pn({},w),{},{setAnchorElUsed:!0,anchorEl:x??void 0})})},[]),d=(0,Z0.useEvent)(function(x){return l.isOpen?g(x):p(x),l}),p=(0,Z0.useEvent)(function(x){var w=x instanceof Element?void 0:x,S=x instanceof Element?x:(x==null?void 0:x.currentTarget)instanceof Element?x.currentTarget:void 0;if((w==null?void 0:w.type)==="touchstart"){u(function(T){return Pn(Pn({},T),{},{_deferNextOpen:!0})});return}var A=w==null?void 0:w.clientX,C=w==null?void 0:w.clientY,k=typeof A=="number"&&typeof C=="number"?{left:A,top:C}:void 0,O=function(B){if(!x&&!B.setAnchorElUsed&&r!=="dialog"&&IGe("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),t){if(!t.isOpen)return B;setTimeout(function(){return t._setChildPopupState(b)})}var R=Pn(Pn({},B),{},{isOpen:!0,anchorPosition:k,hovered:(w==null?void 0:w.type)==="mouseover"||B.hovered,focused:(w==null?void 0:w.type)==="focus"||B.focused,_openEventType:w==null?void 0:w.type});return w!=null&&w.currentTarget?B.setAnchorElUsed||(R.anchorEl=w==null?void 0:w.currentTarget):S&&(R.anchorEl=S),R};u(function(T){return T._deferNextOpen?(setTimeout(function(){return u(O)},0),Pn(Pn({},T),{},{_deferNextOpen:!1})):O(T)})}),h=function(w){var S=w._childPopupState;return setTimeout(function(){S==null||S.close(),t==null||t._setChildPopupState(null)}),Pn(Pn({},w),{},{isOpen:!1,hovered:!1,focused:!1})},g=(0,Z0.useEvent)(function(x){var w=x instanceof Element?void 0:x;if((w==null?void 0:w.type)==="touchstart"){u(function(S){return Pn(Pn({},S),{},{_deferNextClose:!0})});return}u(function(S){return S._deferNextClose?(setTimeout(function(){return u(h)},0),Pn(Pn({},S),{},{_deferNextClose:!1})):h(S)})}),v=(0,Ud.useCallback)(function(x,w){x?p(w):g(w)},[]),m=(0,Z0.useEvent)(function(x){var w=x.relatedTarget;u(function(S){return S.hovered&&!(w instanceof Element&&nL(w,b))?S.focused?Pn(Pn({},S),{},{hovered:!1}):h(S):S})}),y=(0,Z0.useEvent)(function(x){if(x){var w=x.relatedTarget;u(function(S){return S.focused&&!(w instanceof Element&&nL(w,b))?S.hovered?Pn(Pn({},S),{},{focused:!1}):h(S):S})}}),_=(0,Ud.useCallback)(function(x){return u(function(w){return Pn(Pn({},w),{},{_childPopupState:x})})},[]),b=Pn(Pn({},l),{},{setAnchorEl:f,popupId:n,variant:r,open:p,close:g,toggle:d,setOpen:v,onBlur:y,onMouseLeave:m,disableAutoFocus:i??!!(l.hovered||l.focused),_setChildPopupState:_});return b}function kGe(e){var t=e.setAnchorEl;return t}function Ex(e){var t=e.isOpen,n=e.popupId,r=e.variant;return Pn({},r==="popover"?{"aria-haspopup":!0,"aria-controls":t&&n!=null?n:void 0}:r==="popper"?{"aria-describedby":t&&n!=null?n:void 0}:void 0)}function LGe(e){return Pn(Pn({},Ex(e)),{},{onClick:e.open,onTouchStart:e.open})}function $Ge(e){return Pn(Pn({},Ex(e)),{},{onContextMenu:function(n){n.preventDefault(),e.open(n)}})}function DGe(e){return Pn(Pn({},Ex(e)),{},{onClick:e.toggle,onTouchStart:e.toggle})}function BGe(e){var t=e.open,n=e.onMouseLeave;return Pn(Pn({},Ex(e)),{},{onTouchStart:t,onMouseOver:t,onMouseLeave:n})}function NGe(e){var t=e.open,n=e.onBlur;return Pn(Pn({},Ex(e)),{},{onFocus:t,onBlur:n})}function FGe(e){var t,n=e.isOpen,r=e.open,i=e.popupId,o=e.variant;return t={},(0,CS.default)(t,o==="popover"?"aria-controls":"aria-describedby",n?i:null),(0,CS.default)(t,"aria-haspopup",o==="popover"?!0:void 0),(0,CS.default)(t,"onDoubleClick",r),t}function jGe(e){var t=e.isOpen,n=e.anchorEl,r=e.anchorPosition,i=e.close,o=e.popupId,a=e.onMouseLeave,s=e.disableAutoFocus,l=e._openEventType,c=l==="contextmenu";return Pn({id:o,anchorEl:n,anchorPosition:r,anchorReference:c?"anchorPosition":"anchorEl",open:t,onClose:i,onMouseLeave:a},s&&{disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0})}function zGe(e){var t=e.isOpen,n=e.anchorEl,r=e.anchorPosition,i=e.close,o=e.popupId,a=e.onMouseLeave,s=e.disableAutoFocus,l=e._openEventType,c=l==="contextmenu";return Pn({id:o,anchorEl:n,anchorPosition:r,anchorReference:c?"anchorPosition":"anchorEl",open:t,onClose:i,onMouseLeave:a},s&&{autoFocus:!1,disableAutoFocusItem:!0,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0})}function UGe(e){var t=e.isOpen,n=e.anchorEl,r=e.popupId,i=e.onMouseLeave;return{id:r,anchorEl:n,open:t,onMouseLeave:i}}function VGe(e){var t=e.isOpen,n=e.close;return{open:t,onClose:n}}function HGe(e,t){var n=t.popupId;if(!n)return null;var r=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof r.getElementById=="function"?r.getElementById(n):null}function nL(e,t){var n=t.anchorEl,r=t._childPopupState;return n9(n,e)||n9(HGe(e,t),e)||r!=null&&nL(e,r)}function n9(e,t){if(!e)return!1;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}var ere={};const GGe=os(jhe);(function(e){var t=Er,n=LM;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=t(GGe),i=t(AB()),o=l($),a=Ta;function s(p){if(typeof WeakMap!="function")return null;var h=new WeakMap,g=new WeakMap;return(s=function(m){return m?g:h})(p)}function l(p,h){if(!h&&p&&p.__esModule)return p;if(p===null||n(p)!=="object"&&typeof p!="function")return{default:p};var g=s(h);if(g&&g.has(p))return g.get(p);var v={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var y in p)if(y!=="default"&&Object.prototype.hasOwnProperty.call(p,y)){var _=m?Object.getOwnPropertyDescriptor(p,y):null;_&&(_.get||_.set)?Object.defineProperty(v,y,_):v[y]=p[y]}return v.default=p,g&&g.set(p,v),v}function c(p,h){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(p);h&&(v=v.filter(function(m){return Object.getOwnPropertyDescriptor(p,m).enumerable})),g.push.apply(g,v)}return g}function u(p){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?c(Object(g),!0).forEach(function(v){(0,i.default)(p,v,g[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):c(Object(g)).forEach(function(v){Object.defineProperty(p,v,Object.getOwnPropertyDescriptor(g,v))})}return p}var f=o.forwardRef(function(h,g){var v;return o.createElement(a.Menu,(0,r.default)({},h,{ref:g,style:u({pointerEvents:"none"},h.style),PaperProps:u(u({},h.PaperProps),{},{style:u({pointerEvents:"auto"},(v=h.PaperProps)===null||v===void 0?void 0:v.style)})}))}),d=f;e.default=d})(ere);var q3={},WGe=Er;Object.defineProperty(q3,"__esModule",{value:!0});q3.default=void 0;var qGe=WGe(Do()),XGe=G,YGe=(0,qGe.default)((0,XGe.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");q3.default=YGe;var KGe=Ce&&Ce.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),ZGe=Ce&&Ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),JGe=Ce&&Ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&KGe(t,e,n);return ZGe(t,e),t},tre=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(z3,"__esModule",{value:!0});const Mn=JGe($),zf=Ta,r9=ih,_b=co,QGe=tre(ere),eWe=tre(q3),Sv=Mn.default.createContext({parentPopupState:null,rootPopupState:null});function tWe({onClick:e,...t}){const{rootPopupState:n}=(0,Mn.useContext)(Sv);if(!n)throw new Error("must be used inside a CascadingMenu");const r=(0,Mn.useCallback)(i=>{n.close(),e==null||e(i)},[n,e]);return Mn.default.createElement(zf.MenuItem,{...t,onClick:r})}function nWe({title:e,inset:t,popupId:n,...r}){const{parentPopupState:i}=Mn.default.useContext(Sv),o=(0,_b.usePopupState)({popupId:n,variant:"popover",parentPopupState:i});return Mn.default.createElement(Mn.default.Fragment,null,Mn.default.createElement(zf.MenuItem,{...(0,_b.bindHover)(o),...(0,_b.bindFocus)(o)},Mn.default.createElement(zf.ListItemText,{primary:e,inset:t}),Mn.default.createElement(eWe.default,null)),Mn.default.createElement(rWe,{...r,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},popupState:o}))}function rWe({popupState:e,onMenuItemClick:t,menuItems:n,classes:r,...i}){const{rootPopupState:o}=(0,Mn.useContext)(Sv),a=(0,Mn.useMemo)(()=>({rootPopupState:o||e,parentPopupState:e}),[o,e]);return Mn.default.createElement(Sv.Provider,{value:a},Mn.default.createElement(QGe.default,{...i,...(0,_b.bindMenu)(e)}))}function iWe({popupState:e,onMenuItemClick:t,menuItems:n,...r}){const{rootPopupState:i}=Mn.default.useContext(Sv),o=Mn.default.useMemo(()=>({rootPopupState:i||e,parentPopupState:e}),[i,e]);return Mn.default.createElement(Sv.Provider,{value:o},Mn.default.createElement(zf.Menu,{...r,...(0,_b.bindMenu)(e)}))}function oWe({item:e}){return"subMenu"in e?Mn.default.createElement(r9.MenuItemEndDecoration,{type:"subMenu"}):e.type==="checkbox"||e.type==="radio"?Mn.default.createElement(r9.MenuItemEndDecoration,{type:e.type,checked:e.checked,disabled:e.disabled}):null}function nre({onMenuItemClick:e,menuItems:t,...n}){function r(o){return a=>{e(a,o)}}const i=t.some(o=>"icon"in o&&o.icon);return Mn.default.createElement(Mn.default.Fragment,null,t.map((o,a)=>"subMenu"in o?Mn.default.createElement(nWe,{key:`subMenu-${o.label}-${a}`,popupId:`subMenu-${o.label}`,title:o.label,inset:i,onMenuItemClick:e,menuItems:o.subMenu},Mn.default.createElement(nre,{...n,onMenuItemClick:e,menuItems:o.subMenu})):o.type==="divider"?Mn.default.createElement(zf.Divider,{key:`divider-${a}`,component:"li"}):o.type==="subHeader"?Mn.default.createElement(zf.ListSubheader,{key:`subHeader-${o.label}-${a}`},o.label):Mn.default.createElement(tWe,{key:`${o.label}-${a}`,onClick:"onClick"in o?r(o.onClick):void 0,disabled:!!o.disabled},o.icon?Mn.default.createElement(zf.ListItemIcon,null,Mn.default.createElement(o.icon,null)):null," ",Mn.default.createElement(zf.ListItemText,{primary:o.label,secondary:o.subLabel,inset:i&&!o.icon}),Mn.default.createElement("div",{style:{flexGrow:1,minWidth:10}}),Mn.default.createElement(oWe,{item:o}))))}function aWe(e){return Mn.default.createElement(iWe,{...e},Mn.default.createElement(nre,{...e}))}z3.default=aWe;var Tx={};const DB=$.createContext(null),mI={didCatch:!1,error:null};class rre extends $.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=mI}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:o,reason:"imperative-api"}),this.setState(mI)}}componentDidCatch(t,n){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&n.error!==null&&sWe(t.resetKeys,i)){var o,a;(o=(a=this.props).onReset)===null||o===void 0||o.call(a,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(mI)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:i}=this.props,{didCatch:o,error:a}=this.state;let s=t;if(o){const l={error:a,resetErrorBoundary:this.resetErrorBoundary};if($.isValidElement(i))s=i;else if(typeof n=="function")s=n(l);else if(r)s=$.createElement(r,l);else throw a}return $.createElement(DB.Provider,{value:{didCatch:o,error:a,resetErrorBoundary:this.resetErrorBoundary}},s)}}function sWe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}function lWe(e){if(e==null||typeof e.didCatch!="boolean"||typeof e.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found");return!0}function cWe(){const e=$.useContext(DB);lWe(e);const[t,n]=$.useState({error:null,hasError:!1}),r=$.useMemo(()=>({resetBoundary:()=>{e==null||e.resetErrorBoundary(),n({error:null,hasError:!1})},showBoundary:i=>n({error:i,hasError:!0})}),[e==null?void 0:e.resetErrorBoundary]);if(t.hasError)throw t.error;return r}function uWe(e,t){const n=$.forwardRef((i,o)=>$.createElement(rre,t,$.createElement(e,{...i,ref:o}))),r=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary(".concat(r,")"),n}const fWe=Object.freeze(Object.defineProperty({__proto__:null,ErrorBoundary:rre,ErrorBoundaryContext:DB,useErrorBoundary:cWe,withErrorBoundary:uWe},Symbol.toStringTag,{value:"Module"})),dWe=os(fWe);var X3={},pWe=Er;Object.defineProperty(X3,"__esModule",{value:!0});X3.default=void 0;var hWe=pWe(Do()),mWe=G,gWe=(0,hWe.default)((0,mWe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");X3.default=gWe;var Ox={},vWe=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ox,"__esModule",{value:!0});const i9=vWe($);function yWe(e){let t="";const n="is not assignable",r=e.indexOf(n);if(r!==-1){const i=e.slice(0,r+n.length),o=i.match(/.*at path "(.*)" snapshot `(.*)` is not assignable/m);o&&(e=`Failed to load element at ${o[1]}...Failed element had snapshot`,t=o[2]);const a=i.match(/.*snapshot `(.*)` is not assignable/);a&&(e="Failed to load element...Failed element had snapshot",t=a[1])}return t}const bWe=({error:e})=>{const t=`${e}`,n=yWe(t);return i9.default.createElement("div",{style:{padding:4,margin:4,overflow:"auto",maxHeight:200,background:"#f88",border:"1px solid black"}},t.slice(0,1e4),n?i9.default.createElement("pre",{style:{background:"lightgrey",border:"1px solid black",margin:20}},JSON.stringify(JSON.parse(n),null,2)):null)};Ox.default=bWe;var BB=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tx,"__esModule",{value:!0});const Ba=BB($),cf=Ta,_We=Id,xWe=Rd,wWe=dWe,SWe=BB(X3),CWe=BB(Ox),AWe=(0,xWe.makeStyles)()(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}));function PWe({error:e}){return Ba.default.createElement("div",{style:{width:800,margin:40}},Ba.default.createElement(CWe.default,{error:e}))}const MWe=(0,_We.observer)(function(e){const{classes:t}=AWe(),{title:n,header:r,children:i,onClose:o}=e,a=(0,cf.useTheme)();return Ba.default.createElement(cf.Dialog,{...e},Ba.default.createElement(cf.ScopedCssBaseline,null,Ba.default.isValidElement(r)?Ba.default.createElement(Ba.default.Fragment,null,r):Ba.default.createElement(cf.DialogTitle,null,n,o?Ba.default.createElement(cf.IconButton,{className:t.closeButton,onClick:()=>{o()}},Ba.default.createElement(SWe.default,null)):null),Ba.default.createElement(cf.Divider,null),Ba.default.createElement(wWe.ErrorBoundary,{FallbackComponent:PWe},Ba.default.createElement(cf.ThemeProvider,{theme:(0,cf.createTheme)(a,{components:{MuiInputBase:{styleOverrides:{input:{boxSizing:"content-box!important"}}}}})},i))))});Tx.default=MWe;var NB={},EWe=Ce&&Ce.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),TWe=Ce&&Ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),OWe=Ce&&Ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&EWe(t,e,n);return TWe(t,e),t},IWe=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(NB,"__esModule",{value:!0});const qc=OWe($),gI=Ta,RWe=Rd,kWe=IWe(N3),LWe=(0,RWe.makeStyles)()(e=>({input:{},inputBase:{},typography:{top:6,left:2,position:"absolute",whiteSpace:"nowrap",visibility:"hidden"},inputRoot:{padding:e.spacing(.5)},inputFocused:{borderStyle:"solid",borderWidth:2}})),$We=qc.default.forwardRef(function(t,n){const{value:r,setValue:i,variant:o,...a}=t,[s,{width:l}]=(0,kWe.default)(),[c,u]=(0,qc.useState)(),[f,d]=(0,qc.useState)(null),[p,h]=(0,qc.useState)(!1);(0,qc.useEffect)(()=>{p&&(f==null||f.blur(),h(!1))},[p,f]);const{classes:g}=LWe(t,{props:t}),v=(0,gI.useTheme)(),m=c===void 0?r:c;return qc.default.createElement("div",{...a,ref:n},qc.default.createElement("div",{style:{position:"relative"}},qc.default.createElement(gI.Typography,{ref:s,component:"span",variant:o,className:g.typography},m)),qc.default.createElement(gI.InputBase,{inputRef:y=>d(y),className:g.inputBase,inputProps:{style:{width:l,...o&&o!=="inherit"?v.typography[o]:{}}},classes:{input:g.input,root:g.inputRoot,focused:g.inputFocused},value:m,onChange:y=>u(y.target.value),onKeyDown:y=>{y.key==="Enter"?f==null||f.blur():y.key==="Escape"&&(u(void 0),h(!0))},onBlur:()=>{i(c||r||""),u(void 0)}}))});NB.default=$We;var Y3={},ire=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Y3,"__esModule",{value:!0});const Zh=ire($),J0=Ta,DWe=ire(Tx);function BWe({onClose:e,open:t,onFactoryReset:n}){function r(i){i==="reset"&&n(),e()}return Zh.default.createElement(DWe.default,{title:"Reset",onClose:()=>r(),open:t},Zh.default.createElement(J0.DialogContent,null,Zh.default.createElement(J0.DialogContentText,null,"Are you sure you want to reset? This will restore the default configuration.")),Zh.default.createElement(J0.DialogActions,null,Zh.default.createElement(J0.Button,{onClick:()=>r(),color:"primary"},"Cancel"),Zh.default.createElement(J0.Button,{onClick:()=>r("reset"),color:"primary",variant:"contained"},"OK")))}Y3.default=BWe;var FB={},NWe=Ce&&Ce.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),FWe=Ce&&Ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),jWe=Ce&&Ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&NWe(t,e,n);return FWe(t,e),t},ore=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(FB,"__esModule",{value:!0});const ja=jWe($),Rm=Ta,zWe=ore(Y3),UWe=ore(Ox),VWe=({onFactoryReset:e,resetButtonText:t})=>{const[n,r]=(0,ja.useState)(!1);return ja.default.createElement(ja.default.Fragment,null,ja.default.createElement(Rm.Button,{"data-testid":"fatal-error",color:"primary",variant:"contained",onClick:()=>r(!0)},t),ja.default.createElement(zWe.default,{onClose:()=>r(!1),open:n,onFactoryReset:e}))};function HWe({componentStack:e,error:t="No error message provided",onFactoryReset:n,resetButtonText:r="Factory Reset"}){return ja.default.createElement(Rm.Dialog,{maxWidth:"xl",open:!0},ja.default.createElement(Rm.DialogTitle,null,"Fatal error"),ja.default.createElement(Rm.DialogContent,null,ja.default.createElement(UWe.default,{error:t}),ja.default.createElement("pre",null,e)),ja.default.createElement(Rm.DialogActions,null,ja.default.createElement(Rm.Button,{color:"secondary",variant:"contained",onClick:()=>window.location.reload()},"Refresh"),ja.default.createElement(VWe,{onFactoryReset:n,resetButtonText:r})))}FB.default=HWe;var are={},jB={},zB={},UB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTrackName=e.generateUnknownTrackConf=e.generateUnsupportedTrackConf=e.guessTrackType=e.guessAdapter=e.getFileName=e.makeIndexType=e.makeIndex=e.storeBlobLocation=e.setBlobMap=e.getBlobMap=e.getBlob=e.UNSUPPORTED=e.UNKNOWN=e.getParentRenderProps=e.getRpcSessionId=e.getTrackAssemblyNames=void 0;const t=Xu,n=Zu(),r=RM;function i(x){const w=(0,r.getConf)(x,"assemblyNames");if(!w){const S=(0,t.getParent)(x.configuration);if("sequence"in S)return[(0,r.readConfObject)(S,"name")]}return w}e.getTrackAssemblyNames=i;function o(x){let w;for(let S=x;!(0,t.isRoot)(S);S=(0,t.getParent)(S))"rpcSessionId"in S&&(w=S.rpcSessionId);if(!w)throw new Error("getRpcSessionId failed, no parent node in the state tree has an `rpcSessionId` attribute");return w}e.getRpcSessionId=o;function a(x){for(let w=(0,t.getParent)(x);!(0,t.isRoot)(w);w=(0,t.getParent)(w))if("renderProps"in w)return w.renderProps();return{}}e.getParentRenderProps=a,e.UNKNOWN="UNKNOWN",e.UNSUPPORTED="UNSUPPORTED";let s={};function l(x){return s[x]}e.getBlob=l;function c(){return s}e.getBlobMap=c;function u(x){s=x}e.setBlobMap=u;let f=0;function d(x){if(x&&"blob"in x){const w=`b${+Date.now()}-${f++}`;return s[w]=x.blob,{name:x==null?void 0:x.blob.name,blobId:w,locationType:"BlobLocation"}}return x}e.storeBlobLocation=d;function p(x,w){return"uri"in x?{uri:x.uri+w,locationType:"UriLocation"}:"localPath"in x?{localPath:x.localPath+w,locationType:"LocalPathLocation"}:x}e.makeIndex=p;function h(x,w,S){return x!=null&&x.toUpperCase().endsWith(w)?w:S}e.makeIndexType=h;function g(x){const w="uri"in x?x.uri:void 0,S="localPath"in x?x.localPath:void 0,A="blobId"in x?x:void 0;return(A==null?void 0:A.name)||(w==null?void 0:w.slice(w.lastIndexOf("/")+1))||(S==null?void 0:S.slice(S.lastIndexOf("/")+1))||""}e.getFileName=g;function v(x,w,S,A){if(A){const{pluginManager:C}=(0,n.getEnv)(A),O=C.evaluateExtensionPoint("Core-guessAdapterForLocation",(T,B,R)=>{})(x,w,S);if(O)return O}return{type:e.UNKNOWN}}e.guessAdapter=v;function m(x,w){if(w){const S=(0,n.getSession)(w),C=(0,n.getEnv)(S).pluginManager.evaluateExtensionPoint("Core-guessTrackTypeForLocation",k=>{})(x);if(C)return C}return"FeatureTrack"}e.guessTrackType=m;function y(x,w,S){const A={type:"FeatureTrack",name:`${x} (Unsupported)`,description:`Support not yet implemented for "${w}"`,category:S,trackId:""};return A.trackId=(0,n.objectHash)(A),A}e.generateUnsupportedTrackConf=y;function _(x,w,S){const A={type:"FeatureTrack",name:`${x} (Unknown)`,description:`Could not determine track type for "${w}"`,category:S,trackId:""};return A.trackId=(0,n.objectHash)(A),A}e.generateUnknownTrackConf=_;function b(x,w){const S=(0,r.readConfObject)(x,"name");if(!S&&(0,r.readConfObject)(x,"type")==="ReferenceSequenceTrack"){const A=w.assemblies.find(C=>C.sequence===x);return A?`Reference sequence (${(0,r.readConfObject)(A,"displayName")||(0,r.readConfObject)(A,"name")})`:"Reference sequence"}return S}e.getTrackName=b})(UB);var GWe=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zB,"__esModule",{value:!0});const uf=GWe($),Vd=Ta,WWe=Rd,qWe=Zu(),o9=UB;function XWe(e){return"localPath"in e}function a9(e){return"blobId"in e}const YWe=(0,WWe.makeStyles)()(e=>({filename:{marginLeft:e.spacing(1)}}));function KWe({location:e,setLocation:t}){const{classes:n}=YWe(),r=e&&(a9(e)&&e.name||XWe(e)&&e.localPath),i=e&&a9(e)&&!(0,o9.getBlob)(e.blobId);return uf.default.createElement(Vd.Box,{display:"flex",flexDirection:"row",alignItems:"center"},uf.default.createElement(Vd.Box,null,uf.default.createElement(Vd.FormControl,{fullWidth:!0},uf.default.createElement(Vd.Button,{variant:"outlined",component:"label"},"Choose File",uf.default.createElement("input",{type:"file",hidden:!0,onChange:({target:o})=>{var a;const s=(a=o==null?void 0:o.files)===null||a===void 0?void 0:a[0];s&&(qWe.isElectron?t({localPath:s.path,locationType:"LocalPathLocation"}):t((0,o9.storeBlobLocation)({blob:s})))}})))),uf.default.createElement(Vd.Box,null,uf.default.createElement(Vd.Typography,{component:"span",className:n.filename,color:r?"initial":"textSecondary"},r||"No file chosen"),i?uf.default.createElement(Vd.Typography,{color:"error"},"(need to reload)"):null))}zB.default=KWe;var VB={},ZWe=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(VB,"__esModule",{value:!0});const JWe=ZWe($),QWe=Ta,eqe=Id,tqe=Rp,nqe=(0,eqe.observer)(function({location:e,setLocation:t,label:n}){return JWe.default.createElement(QWe.TextField,{fullWidth:!0,variant:"outlined",inputProps:{"data-testid":"urlInput"},defaultValue:e&&(0,tqe.isUriLocation)(e)?e.uri:"",label:n||"Enter URL",onChange:r=>{t({uri:r.target.value.trim(),locationType:"UriLocation"})}})});VB.default=nqe;var K3={},rqe=Er;Object.defineProperty(K3,"__esModule",{value:!0});var sre=K3.default=void 0,iqe=rqe(Do()),oqe=G,aqe=(0,iqe.default)((0,oqe.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");sre=K3.default=aqe;var sqe=Ce&&Ce.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),lqe=Ce&&Ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),cqe=Ce&&Ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&sqe(t,e,n);return lqe(t,e),t},HB=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(jB,"__esModule",{value:!0});const br=cqe($),uqe=Id,Na=Ta,Q0=Rp,fqe=HB(zB),dqe=HB(VB),pqe=HB(K3),hqe=Zu();function mqe(e){const{title:t,children:n,...r}=e;return br.default.createElement(Na.Tooltip,{title:t||""},br.default.createElement(Na.ToggleButton,{...r},n))}function s9(e,t){return typeof e=="string"&&e.length>t?`${e.slice(0,Math.max(0,t))}`:e}const gqe=(0,uqe.observer)(function(e){const{location:t,name:n,description:r,rootModel:i,setLocation:o}=e,a=!t||(0,Q0.isUriLocation)(t)?"url":"file",[s,l]=(0,br.useState)(t&&"internetAccountId"in t&&t.internetAccountId?t.internetAccountId:a),c=(0,Q0.isAppRootModel)(i)?[...i.internetAccounts]:[],u=2,[f,d]=(0,br.useState)(c.slice(0,u)),[p,h]=(0,br.useState)(c.slice(u)),[g,v]=(0,br.useState)(null),m=c.find(b=>b.internetAccountId===s),y=(0,br.useCallback)(b=>{o({...b,...(0,Q0.isUriLocation)(b)?{internetAccountId:m==null?void 0:m.internetAccountId}:{}})},[o,m]);(0,br.useEffect)(()=>{m&&(0,Q0.isUriLocation)(t)&&t.internetAccountId!==m.internetAccountId&&y(t)},[t,m,y]);let _=br.default.createElement(dqe.default,{...e,setLocation:y,label:m==null?void 0:m.selectorLabel});if(s==="file"&&(_=br.default.createElement(fqe.default,{...e})),m!=null&&m.SelectorComponent){const{SelectorComponent:b}=m;_=br.default.createElement(b,{...e,setLocation:y})}return br.default.createElement(br.default.Fragment,null,br.default.createElement(Na.Box,{display:"flex"},br.default.createElement(Na.InputLabel,{shrink:!0},n)),br.default.createElement(Na.Box,{display:"flex",flexDirection:"row"},br.default.createElement(Na.Box,null,br.default.createElement(Na.ToggleButtonGroup,{value:s,exclusive:!0,onChange:(b,x)=>{x&&l(x),(0,Q0.isUriLocation)(t)&&y(t)},"aria-label":"file, url, or account picker"},new URLSearchParams(window.location.search).get("adminKey")?null:br.default.createElement(Na.ToggleButton,{value:"file","aria-label":"local file"},"File"),br.default.createElement(Na.ToggleButton,{value:"url","aria-label":"url"},"URL"),f.map(({internetAccountId:b,toggleContents:x,name:w})=>br.default.createElement(mqe,{key:b,value:b,"aria-label":w,title:w},typeof x=="string"?s9(x,5):x||s9(w,5))),p.length>0?br.default.createElement(Na.ToggleButton,{onClick:b=>v(b.target),selected:!1},"More",br.default.createElement(pqe.default,null)):null),br.default.createElement(Na.Menu,{open:!!g,anchorEl:g,onClose:()=>v(null),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},p==null?void 0:p.map((b,x)=>br.default.createElement(Na.MenuItem,{key:b.internetAccountId,value:b.internetAccountId,onClick:()=>{const w=f.at(-1);d([...f.slice(0,-1),b]),h([w,...p.slice(0,x),...p.slice(x+1)].filter(hqe.notEmpty)),l(b.internetAccountId),v(null)}},b.name))))),_,br.default.createElement(Na.FormHelperText,null,r))});jB.default=gqe;(function(e){var t=Ce&&Ce.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=jB;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(are);var GB={};const vqe=os(RLe);var yqe=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(GB,"__esModule",{value:!0});const bqe=yqe($),_qe=Ta,xqe=Rd,wqe=vqe,Sqe=(0,xqe.makeStyles)()({dots:{"&::after":{display:"inline-block",content:'""',width:"1em",textAlign:"left",animation:`${(0,wqe.keyframes)`
      0% {
        content: '';
      }
      25% {
          content: '.';
      }
      50% {
        content: '..';
      }
      75% {
        content: '...';
      }
      `} 1.2s infinite ease-in-out`}}});function Cqe({message:e,variant:t="body2",...n}){const{classes:r}=Sqe();return bqe.default.createElement(_qe.Typography,{className:r.dots,...n,variant:t},`${e||"Loading"}`)}GB.default=Cqe;var WB={},Aqe=Ce&&Ce.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Pqe=Ce&&Ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Mqe=Ce&&Ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Aqe(t,e,n);return Pqe(t,e),t};Object.defineProperty(WB,"__esModule",{value:!0});const Dw=Mqe($),Eqe=eo;function Tqe(e){const{width:t,height:n,highResolutionScaling:r=1,style:i={},imageData:o,blockKey:a,showSoftClip:s}=e,[l,c]=(0,Dw.useState)(!1),u=(0,Dw.useRef)(null);(0,Dw.useEffect)(()=>{if(!o)return;const h=u.current;if(!h)return;const g=h.getContext("2d");g&&((0,Eqe.drawImageOntoCanvasContext)(o,g),c(!0))},[o]);const f=s?"_softclipped":"",d=a?"_"+a:"",p=`prerendered_canvas${f}${d}${l?"_done":""}`;return Dw.default.createElement("canvas",{"data-testid":p,ref:u,width:t*r,height:n*r,style:{width:t,height:n,...i}})}WB.default=Tqe;var qB={},Oqe=Ce&&Ce.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Iqe=Ce&&Ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Rqe=Ce&&Ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Oqe(t,e,n);return Iqe(t,e),t};Object.defineProperty(qB,"__esModule",{value:!0});const vI=Rqe($),kqe=Rd,Lqe=Id,$qe=RM,Dqe=(0,kqe.makeStyles)()({hoverLabel:{border:"1px solid black",position:"absolute",background:"#fffa",pointerEvents:"none",zIndex:1e4}}),Bqe=(0,Lqe.observer)(function({offsetX:e,offsetY:t,configuration:n,feature:r,timeout:i=300}){const{classes:o}=Dqe(),[a,s]=(0,vI.useState)(!1);if((0,vI.useEffect)(()=>{const l=setTimeout(()=>s(!0),i);return()=>clearTimeout(l)}),r&&a){const l=(0,$qe.readConfObject)(n,"mouseover",{feature:r});return vI.default.createElement("div",{className:o.hoverLabel,style:{left:e,top:t}},l)}return null});qB.default=Bqe;var XB={},lre=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(XB,"__esModule",{value:!0});const Jh=lre($),Nqe=Id,ey=Ta,Fqe=lre(Tx),jqe=(0,Nqe.observer)(function({model:e,handleClose:t}){return Jh.default.createElement(Fqe.default,{maxWidth:"xl",open:!0,onClose:t,title:"Reference sequence"},Jh.default.createElement(ey.DialogContent,null,Jh.default.createElement(ey.Typography,null,"Are you sure you want to return to the import form? This will lose your current view")),Jh.default.createElement(ey.DialogActions,null,Jh.default.createElement(ey.Button,{onClick:()=>{e.clearView(),t()},variant:"contained",color:"primary",autoFocus:!0},"OK"),Jh.default.createElement(ey.Button,{onClick:()=>t(),color:"secondary",variant:"contained"},"Cancel")))});XB.default=jqe;var YB={},zqe=Ce&&Ce.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Uqe=Ce&&Ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Vqe=Ce&&Ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&zqe(t,e,n);return Uqe(t,e),t};Object.defineProperty(YB,"__esModule",{value:!0});const ty=Vqe($),Hqe=Rd,Gqe=(0,Hqe.makeStyles)()({horizontalHandle:{cursor:"row-resize",width:"100%"},verticalHandle:{cursor:"col-resize",height:"100%"},flexbox_verticalHandle:{cursor:"col-resize",alignSelf:"stretch"},flexbox_horizontalHandle:{cursor:"row-resize",alignSelf:"stretch"}});function Wqe({onDrag:e,vertical:t=!1,flexbox:n=!1,className:r,onMouseDown:i,...o}){const[a,s]=(0,ty.useState)(!1),l=(0,ty.useRef)(0),c=(0,ty.useRef)(0),{classes:u,cx:f}=Gqe();(0,ty.useEffect)(()=>{function p(g){g.preventDefault();const v=t?g.clientX:g.clientY,m=l.current-v,y=v-c.current;c.current=v,e(y,m)}function h(){s(!1)}return a?(window.addEventListener("mousemove",p,!0),window.addEventListener("mouseup",h,!0),()=>{window.removeEventListener("mousemove",p,!0),window.removeEventListener("mouseup",h,!0)}):()=>{}},[a,e,t]);let d;return n?d=t?u.flexbox_verticalHandle:u.flexbox_horizontalHandle:t?d=u.verticalHandle:d=u.horizontalHandle,ty.default.createElement("div",{"data-resizer":"true",onMouseDown:p=>{p.preventDefault();const h=t?p.clientX:p.clientY;l.current=h,c.current=h,s(!0),i==null||i(p)},className:f(d,r),...o})}YB.default=Wqe;var KB={};/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var qqe=/["'&<>]/,Xqe=Yqe;function Yqe(e){var t=""+e,n=qqe.exec(t);if(!n)return t;var r,i="",o=0,a=0;for(o=n.index;o<t.length;o++){switch(t.charCodeAt(o)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#39;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}a!==o&&(i+=t.substring(a,o)),a=o+1,i+=r}return a!==o?i+t.substring(a,o):i}var cre={exports:{}};/*! @license DOMPurify 3.0.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.6/LICENSE */(function(e,t){(function(n,r){e.exports=r()})(Ce,function(){const{entries:n,setPrototypeOf:r,isFrozen:i,getPrototypeOf:o,getOwnPropertyDescriptor:a}=Object;let{freeze:s,seal:l,create:c}=Object,{apply:u,construct:f}=typeof Reflect<"u"&&Reflect;s||(s=function(ee){return ee}),l||(l=function(ee){return ee}),u||(u=function(ee,Ee,ge){return ee.apply(Ee,ge)}),f||(f=function(ee,Ee){return new ee(...Ee)});const d=S(Array.prototype.forEach),p=S(Array.prototype.pop),h=S(Array.prototype.push),g=S(String.prototype.toLowerCase),v=S(String.prototype.toString),m=S(String.prototype.match),y=S(String.prototype.replace),_=S(String.prototype.indexOf),b=S(String.prototype.trim),x=S(RegExp.prototype.test),w=A(TypeError);function S(W){return function(ee){for(var Ee=arguments.length,ge=new Array(Ee>1?Ee-1:0),pe=1;pe<Ee;pe++)ge[pe-1]=arguments[pe];return u(W,ee,ge)}}function A(W){return function(){for(var ee=arguments.length,Ee=new Array(ee),ge=0;ge<ee;ge++)Ee[ge]=arguments[ge];return f(W,Ee)}}function C(W,ee){let Ee=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g;r&&r(W,null);let ge=ee.length;for(;ge--;){let pe=ee[ge];if(typeof pe=="string"){const ve=Ee(pe);ve!==pe&&(i(ee)||(ee[ge]=ve),pe=ve)}W[pe]=!0}return W}function k(W){const ee=c(null);for(const[Ee,ge]of n(W))a(W,Ee)!==void 0&&(ee[Ee]=ge);return ee}function O(W,ee){for(;W!==null;){const ge=a(W,ee);if(ge){if(ge.get)return S(ge.get);if(typeof ge.value=="function")return S(ge.value)}W=o(W)}function Ee(ge){return console.warn("fallback value for",ge),null}return Ee}const T=s(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),B=s(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),R=s(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),P=s(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),D=s(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),z=s(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),N=s(["#text"]),H=s(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),J=s(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ne=s(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),oe=s(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Z=l(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ce=l(/<%[\w\W]*|[\w\W]*%>/gm),se=l(/\${[\w\W]*}/gm),Y=l(/^data-[\-\w.\u00B7-\uFFFF]/),he=l(/^aria-[\-\w]+$/),ae=l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ye=l(/^(?:\w+script|data):/i),re=l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),te=l(/^html$/i);var le=Object.freeze({__proto__:null,MUSTACHE_EXPR:Z,ERB_EXPR:ce,TMPLIT_EXPR:se,DATA_ATTR:Y,ARIA_ATTR:he,IS_ALLOWED_URI:ae,IS_SCRIPT_OR_DATA:ye,ATTR_WHITESPACE:re,DOCTYPE_NAME:te});const de=function(){return typeof window>"u"?null:window},_e=function(ee,Ee){if(typeof ee!="object"||typeof ee.createPolicy!="function")return null;let ge=null;const pe="data-tt-policy-suffix";Ee&&Ee.hasAttribute(pe)&&(ge=Ee.getAttribute(pe));const ve="dompurify"+(ge?"#"+ge:"");try{return ee.createPolicy(ve,{createHTML($e){return $e},createScriptURL($e){return $e}})}catch{return console.warn("TrustedTypes policy "+ve+" could not be created."),null}};function be(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:de();const ee=Bt=>be(Bt);if(ee.version="3.0.6",ee.removed=[],!W||!W.document||W.document.nodeType!==9)return ee.isSupported=!1,ee;let{document:Ee}=W;const ge=Ee,pe=ge.currentScript,{DocumentFragment:ve,HTMLTemplateElement:$e,Node:Ne,Element:Ae,NodeFilter:Oe,NamedNodeMap:j=W.NamedNodeMap||W.MozNamedAttrMap,HTMLFormElement:M,DOMParser:L,trustedTypes:q}=W,me=Ae.prototype,Te=O(me,"cloneNode"),Pe=O(me,"nextSibling"),Xe=O(me,"childNodes"),He=O(me,"parentNode");if(typeof $e=="function"){const Bt=Ee.createElement("template");Bt.content&&Bt.content.ownerDocument&&(Ee=Bt.content.ownerDocument)}let Ve,Je="";const{implementation:Ye,createNodeIterator:yt,createDocumentFragment:mt,getElementsByTagName:ut}=Ee,{importNode:Et}=ge;let et={};ee.isSupported=typeof n=="function"&&typeof He=="function"&&Ye&&Ye.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ct,ERB_EXPR:_t,TMPLIT_EXPR:xe,DATA_ATTR:ie,ARIA_ATTR:ue,IS_SCRIPT_OR_DATA:E,ATTR_WHITESPACE:F}=le;let{IS_ALLOWED_URI:U}=le,X=null;const Q=C({},[...T,...B,...R,...D,...N]);let fe=null;const we=C({},[...H,...J,...ne,...oe]);let Se=Object.seal(c(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ze=null,Fe=null,Ke=!0,Le=!0,Me=!1,Re=!0,qe=!1,nt=!1,ft=!1,pt=!1,Gt=!1,bt=!1,hn=!1,ki=!0,Yt=!1;const tt="user-content-";let wt=!0,zt=!1,nn={},$t=null;const ln=C({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let rn=null;const _n=C({},["audio","video","img","source","image","track"]);let gr=null;const Zt=C({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Tn="http://www.w3.org/1998/Math/MathML",fo="http://www.w3.org/2000/svg",Lr="http://www.w3.org/1999/xhtml";let Xi=Lr,po=!1,ho=null;const Qo=C({},[Tn,fo,Lr],v);let ai=null;const ps=["application/xhtml+xml","text/html"],hs="text/html";let vr=null,mo=null;const Ks=Ee.createElement("form"),ms=function(Ue){return Ue instanceof RegExp||Ue instanceof Function},Ia=function(){let Ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(mo&&mo===Ue)){if((!Ue||typeof Ue!="object")&&(Ue={}),Ue=k(Ue),ai=ps.indexOf(Ue.PARSER_MEDIA_TYPE)===-1?ai=hs:ai=Ue.PARSER_MEDIA_TYPE,vr=ai==="application/xhtml+xml"?v:g,X="ALLOWED_TAGS"in Ue?C({},Ue.ALLOWED_TAGS,vr):Q,fe="ALLOWED_ATTR"in Ue?C({},Ue.ALLOWED_ATTR,vr):we,ho="ALLOWED_NAMESPACES"in Ue?C({},Ue.ALLOWED_NAMESPACES,v):Qo,gr="ADD_URI_SAFE_ATTR"in Ue?C(k(Zt),Ue.ADD_URI_SAFE_ATTR,vr):Zt,rn="ADD_DATA_URI_TAGS"in Ue?C(k(_n),Ue.ADD_DATA_URI_TAGS,vr):_n,$t="FORBID_CONTENTS"in Ue?C({},Ue.FORBID_CONTENTS,vr):ln,ze="FORBID_TAGS"in Ue?C({},Ue.FORBID_TAGS,vr):{},Fe="FORBID_ATTR"in Ue?C({},Ue.FORBID_ATTR,vr):{},nn="USE_PROFILES"in Ue?Ue.USE_PROFILES:!1,Ke=Ue.ALLOW_ARIA_ATTR!==!1,Le=Ue.ALLOW_DATA_ATTR!==!1,Me=Ue.ALLOW_UNKNOWN_PROTOCOLS||!1,Re=Ue.ALLOW_SELF_CLOSE_IN_ATTR!==!1,qe=Ue.SAFE_FOR_TEMPLATES||!1,nt=Ue.WHOLE_DOCUMENT||!1,Gt=Ue.RETURN_DOM||!1,bt=Ue.RETURN_DOM_FRAGMENT||!1,hn=Ue.RETURN_TRUSTED_TYPE||!1,pt=Ue.FORCE_BODY||!1,ki=Ue.SANITIZE_DOM!==!1,Yt=Ue.SANITIZE_NAMED_PROPS||!1,wt=Ue.KEEP_CONTENT!==!1,zt=Ue.IN_PLACE||!1,U=Ue.ALLOWED_URI_REGEXP||ae,Xi=Ue.NAMESPACE||Lr,Se=Ue.CUSTOM_ELEMENT_HANDLING||{},Ue.CUSTOM_ELEMENT_HANDLING&&ms(Ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Se.tagNameCheck=Ue.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ue.CUSTOM_ELEMENT_HANDLING&&ms(Ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Se.attributeNameCheck=Ue.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ue.CUSTOM_ELEMENT_HANDLING&&typeof Ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Se.allowCustomizedBuiltInElements=Ue.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),qe&&(Le=!1),bt&&(Gt=!0),nn&&(X=C({},[...N]),fe=[],nn.html===!0&&(C(X,T),C(fe,H)),nn.svg===!0&&(C(X,B),C(fe,J),C(fe,oe)),nn.svgFilters===!0&&(C(X,R),C(fe,J),C(fe,oe)),nn.mathMl===!0&&(C(X,D),C(fe,ne),C(fe,oe))),Ue.ADD_TAGS&&(X===Q&&(X=k(X)),C(X,Ue.ADD_TAGS,vr)),Ue.ADD_ATTR&&(fe===we&&(fe=k(fe)),C(fe,Ue.ADD_ATTR,vr)),Ue.ADD_URI_SAFE_ATTR&&C(gr,Ue.ADD_URI_SAFE_ATTR,vr),Ue.FORBID_CONTENTS&&($t===ln&&($t=k($t)),C($t,Ue.FORBID_CONTENTS,vr)),wt&&(X["#text"]=!0),nt&&C(X,["html","head","body"]),X.table&&(C(X,["tbody"]),delete ze.tbody),Ue.TRUSTED_TYPES_POLICY){if(typeof Ue.TRUSTED_TYPES_POLICY.createHTML!="function")throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ue.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw w('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ve=Ue.TRUSTED_TYPES_POLICY,Je=Ve.createHTML("")}else Ve===void 0&&(Ve=_e(q,pe)),Ve!==null&&typeof Je=="string"&&(Je=Ve.createHTML(""));s&&s(Ue),mo=Ue}},Bo=C({},["mi","mo","mn","ms","mtext"]),Nl=C({},["foreignobject","desc","title","annotation-xml"]),zc=C({},["title","style","font","a","script"]),gs=C({},B);C(gs,R),C(gs,P);const Zs=C({},D);C(Zs,z);const vs=function(Ue){let vt=He(Ue);(!vt||!vt.tagName)&&(vt={namespaceURI:Xi,tagName:"template"});const Rt=g(Ue.tagName),ar=g(vt.tagName);return ho[Ue.namespaceURI]?Ue.namespaceURI===fo?vt.namespaceURI===Lr?Rt==="svg":vt.namespaceURI===Tn?Rt==="svg"&&(ar==="annotation-xml"||Bo[ar]):!!gs[Rt]:Ue.namespaceURI===Tn?vt.namespaceURI===Lr?Rt==="math":vt.namespaceURI===fo?Rt==="math"&&Nl[ar]:!!Zs[Rt]:Ue.namespaceURI===Lr?vt.namespaceURI===fo&&!Nl[ar]||vt.namespaceURI===Tn&&!Bo[ar]?!1:!Zs[Rt]&&(zc[Rt]||!gs[Rt]):!!(ai==="application/xhtml+xml"&&ho[Ue.namespaceURI]):!1},ea=function(Ue){h(ee.removed,{element:Ue});try{Ue.parentNode.removeChild(Ue)}catch{Ue.remove()}},nf=function(Ue,vt){try{h(ee.removed,{attribute:vt.getAttributeNode(Ue),from:vt})}catch{h(ee.removed,{attribute:null,from:vt})}if(vt.removeAttribute(Ue),Ue==="is"&&!fe[Ue])if(Gt||bt)try{ea(vt)}catch{}else try{vt.setAttribute(Ue,"")}catch{}},No=function(Ue){let vt=null,Rt=null;if(pt)Ue="<remove></remove>"+Ue;else{const $i=m(Ue,/^[\r\n\t ]+/);Rt=$i&&$i[0]}ai==="application/xhtml+xml"&&Xi===Lr&&(Ue='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ue+"</body></html>");const ar=Ve?Ve.createHTML(Ue):Ue;if(Xi===Lr)try{vt=new L().parseFromString(ar,ai)}catch{}if(!vt||!vt.documentElement){vt=Ye.createDocument(Xi,"template",null);try{vt.documentElement.innerHTML=po?Je:ar}catch{}}const Li=vt.body||vt.documentElement;return Ue&&Rt&&Li.insertBefore(Ee.createTextNode(Rt),Li.childNodes[0]||null),Xi===Lr?ut.call(vt,nt?"html":"body")[0]:nt?vt.documentElement:Li},Fl=function(Ue){return yt.call(Ue.ownerDocument||Ue,Ue,Oe.SHOW_ELEMENT|Oe.SHOW_COMMENT|Oe.SHOW_TEXT,null)},Fd=function(Ue){return Ue instanceof M&&(typeof Ue.nodeName!="string"||typeof Ue.textContent!="string"||typeof Ue.removeChild!="function"||!(Ue.attributes instanceof j)||typeof Ue.removeAttribute!="function"||typeof Ue.setAttribute!="function"||typeof Ue.namespaceURI!="string"||typeof Ue.insertBefore!="function"||typeof Ue.hasChildNodes!="function")},rf=function(Ue){return typeof Ne=="function"&&Ue instanceof Ne},Js=function(Ue,vt,Rt){et[Ue]&&d(et[Ue],ar=>{ar.call(ee,vt,Rt,mo)})},Vx=function(Ue){let vt=null;if(Js("beforeSanitizeElements",Ue,null),Fd(Ue))return ea(Ue),!0;const Rt=vr(Ue.nodeName);if(Js("uponSanitizeElement",Ue,{tagName:Rt,allowedTags:X}),Ue.hasChildNodes()&&!rf(Ue.firstElementChild)&&x(/<[/\w]/g,Ue.innerHTML)&&x(/<[/\w]/g,Ue.textContent))return ea(Ue),!0;if(!X[Rt]||ze[Rt]){if(!ze[Rt]&&Gx(Rt)&&(Se.tagNameCheck instanceof RegExp&&x(Se.tagNameCheck,Rt)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(Rt)))return!1;if(wt&&!$t[Rt]){const ar=He(Ue)||Ue.parentNode,Li=Xe(Ue)||Ue.childNodes;if(Li&&ar){const $i=Li.length;for(let go=$i-1;go>=0;--go)ar.insertBefore(Te(Li[go],!0),Pe(Ue))}}return ea(Ue),!0}return Ue instanceof Ae&&!vs(Ue)||(Rt==="noscript"||Rt==="noembed"||Rt==="noframes")&&x(/<\/no(script|embed|frames)/i,Ue.innerHTML)?(ea(Ue),!0):(qe&&Ue.nodeType===3&&(vt=Ue.textContent,d([ct,_t,xe],ar=>{vt=y(vt,ar," ")}),Ue.textContent!==vt&&(h(ee.removed,{element:Ue.cloneNode()}),Ue.textContent=vt)),Js("afterSanitizeElements",Ue,null),!1)},Hx=function(Ue,vt,Rt){if(ki&&(vt==="id"||vt==="name")&&(Rt in Ee||Rt in Ks))return!1;if(!(Le&&!Fe[vt]&&x(ie,vt))){if(!(Ke&&x(ue,vt))){if(!fe[vt]||Fe[vt]){if(!(Gx(Ue)&&(Se.tagNameCheck instanceof RegExp&&x(Se.tagNameCheck,Ue)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(Ue))&&(Se.attributeNameCheck instanceof RegExp&&x(Se.attributeNameCheck,vt)||Se.attributeNameCheck instanceof Function&&Se.attributeNameCheck(vt))||vt==="is"&&Se.allowCustomizedBuiltInElements&&(Se.tagNameCheck instanceof RegExp&&x(Se.tagNameCheck,Rt)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(Rt))))return!1}else if(!gr[vt]){if(!x(U,y(Rt,F,""))){if(!((vt==="src"||vt==="xlink:href"||vt==="href")&&Ue!=="script"&&_(Rt,"data:")===0&&rn[Ue])){if(!(Me&&!x(E,y(Rt,F,"")))){if(Rt)return!1}}}}}}return!0},Gx=function(Ue){return Ue.indexOf("-")>0},Wx=function(Ue){Js("beforeSanitizeAttributes",Ue,null);const{attributes:vt}=Ue;if(!vt)return;const Rt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:fe};let ar=vt.length;for(;ar--;){const Li=vt[ar],{name:$i,namespaceURI:go,value:Uc}=Li,jd=vr($i);let vo=$i==="value"?Uc:b(Uc);if(Rt.attrName=jd,Rt.attrValue=vo,Rt.keepAttr=!0,Rt.forceKeepAttr=void 0,Js("uponSanitizeAttribute",Ue,Rt),vo=Rt.attrValue,Rt.forceKeepAttr||(nf($i,Ue),!Rt.keepAttr))continue;if(!Re&&x(/\/>/i,vo)){nf($i,Ue);continue}qe&&d([ct,_t,xe],Xx=>{vo=y(vo,Xx," ")});const qx=vr(Ue.nodeName);if(Hx(qx,jd,vo)){if(Yt&&(jd==="id"||jd==="name")&&(nf($i,Ue),vo=tt+vo),Ve&&typeof q=="object"&&typeof q.getAttributeType=="function"&&!go)switch(q.getAttributeType(qx,jd)){case"TrustedHTML":{vo=Ve.createHTML(vo);break}case"TrustedScriptURL":{vo=Ve.createScriptURL(vo);break}}try{go?Ue.setAttributeNS(go,$i,vo):Ue.setAttribute($i,vo),p(ee.removed)}catch{}}}Js("afterSanitizeAttributes",Ue,null)},CT=function Bt(Ue){let vt=null;const Rt=Fl(Ue);for(Js("beforeSanitizeShadowDOM",Ue,null);vt=Rt.nextNode();)Js("uponSanitizeShadowNode",vt,null),!Vx(vt)&&(vt.content instanceof ve&&Bt(vt.content),Wx(vt));Js("afterSanitizeShadowDOM",Ue,null)};return ee.sanitize=function(Bt){let Ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},vt=null,Rt=null,ar=null,Li=null;if(po=!Bt,po&&(Bt="<!-->"),typeof Bt!="string"&&!rf(Bt))if(typeof Bt.toString=="function"){if(Bt=Bt.toString(),typeof Bt!="string")throw w("dirty is not a string, aborting")}else throw w("toString is not a function");if(!ee.isSupported)return Bt;if(ft||Ia(Ue),ee.removed=[],typeof Bt=="string"&&(zt=!1),zt){if(Bt.nodeName){const Uc=vr(Bt.nodeName);if(!X[Uc]||ze[Uc])throw w("root node is forbidden and cannot be sanitized in-place")}}else if(Bt instanceof Ne)vt=No("<!---->"),Rt=vt.ownerDocument.importNode(Bt,!0),Rt.nodeType===1&&Rt.nodeName==="BODY"||Rt.nodeName==="HTML"?vt=Rt:vt.appendChild(Rt);else{if(!Gt&&!qe&&!nt&&Bt.indexOf("<")===-1)return Ve&&hn?Ve.createHTML(Bt):Bt;if(vt=No(Bt),!vt)return Gt?null:hn?Je:""}vt&&pt&&ea(vt.firstChild);const $i=Fl(zt?Bt:vt);for(;ar=$i.nextNode();)Vx(ar)||(ar.content instanceof ve&&CT(ar.content),Wx(ar));if(zt)return Bt;if(Gt){if(bt)for(Li=mt.call(vt.ownerDocument);vt.firstChild;)Li.appendChild(vt.firstChild);else Li=vt;return(fe.shadowroot||fe.shadowrootmode)&&(Li=Et.call(ge,Li,!0)),Li}let go=nt?vt.outerHTML:vt.innerHTML;return nt&&X["!doctype"]&&vt.ownerDocument&&vt.ownerDocument.doctype&&vt.ownerDocument.doctype.name&&x(te,vt.ownerDocument.doctype.name)&&(go="<!DOCTYPE "+vt.ownerDocument.doctype.name+`>
`+go),qe&&d([ct,_t,xe],Uc=>{go=y(go,Uc," ")}),Ve&&hn?Ve.createHTML(go):go},ee.setConfig=function(){let Bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ia(Bt),ft=!0},ee.clearConfig=function(){mo=null,ft=!1},ee.isValidAttribute=function(Bt,Ue,vt){mo||Ia({});const Rt=vr(Bt),ar=vr(Ue);return Hx(Rt,ar,vt)},ee.addHook=function(Bt,Ue){typeof Ue=="function"&&(et[Bt]=et[Bt]||[],h(et[Bt],Ue))},ee.removeHook=function(Bt){if(et[Bt])return p(et[Bt])},ee.removeHooks=function(Bt){et[Bt]&&(et[Bt]=[])},ee.removeAllHooks=function(){et={}},ee}var ke=be();return ke})})(cre);var Kqe=cre.exports,ZB=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(KB,"__esModule",{value:!0});const Zqe=ZB($),Jqe=ZB(Xqe),l9=ZB(Kqe),Qqe=["a","b","br","code","div","em","h1","h2","h3","h4","h5","h6","i","img","li","p","pre","span","small","strong","table","tbody","sup","sub","td","tfoot","th","thead","tr","u","ul"];let c9=!1;const eXe=new RegExp(Qqe.map(e=>`<${e}\\b[^>]*>`).join("|"),"i");function tXe(e){return eXe.test(e)}function nXe({html:e}){const t=tXe(e)?e:(0,Jqe.default)(e);return c9||(c9=!0,l9.default.addHook("afterSanitizeAttributes",n=>{n.tagName==="A"&&(n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"))})),Zqe.default.createElement("span",{dangerouslySetInnerHTML:{__html:l9.default.sanitize(t)}})}KB.default=nXe;(function(e){var t=Ce&&Ce.__createBinding||(Object.create?function(b,x,w,S){S===void 0&&(S=w);var A=Object.getOwnPropertyDescriptor(x,w);(!A||("get"in A?!x.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return x[w]}}),Object.defineProperty(b,S,A)}:function(b,x,w,S){S===void 0&&(S=w),b[S]=x[w]}),n=Ce&&Ce.__exportStar||function(b,x){for(var w in b)w!=="default"&&!Object.prototype.hasOwnProperty.call(x,w)&&t(x,b,w)},r=Ce&&Ce.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(e,"__esModule",{value:!0}),e.SanitizedHTML=e.ResizeHandle=e.ReturnToImportFormDialog=e.Tooltip=e.PrerenderedCanvas=e.Menu=e.LoadingEllipses=e.FileSelector=e.FatalErrorDialog=e.FactoryResetDialog=e.ErrorMessage=e.EditableTypography=e.Dialog=e.CascadingMenu=e.AssemblySelector=e.Logomark=e.LogoFull=void 0,n(pB,e);var i=hv;Object.defineProperty(e,"LogoFull",{enumerable:!0,get:function(){return i.LogoFull}}),Object.defineProperty(e,"Logomark",{enumerable:!0,get:function(){return i.Logomark}});var o=hB;Object.defineProperty(e,"AssemblySelector",{enumerable:!0,get:function(){return r(o).default}});var a=z3;Object.defineProperty(e,"CascadingMenu",{enumerable:!0,get:function(){return r(a).default}});var s=Tx;Object.defineProperty(e,"Dialog",{enumerable:!0,get:function(){return r(s).default}});var l=NB;Object.defineProperty(e,"EditableTypography",{enumerable:!0,get:function(){return r(l).default}});var c=Ox;Object.defineProperty(e,"ErrorMessage",{enumerable:!0,get:function(){return r(c).default}});var u=Y3;Object.defineProperty(e,"FactoryResetDialog",{enumerable:!0,get:function(){return r(u).default}});var f=FB;Object.defineProperty(e,"FatalErrorDialog",{enumerable:!0,get:function(){return r(f).default}});var d=are;Object.defineProperty(e,"FileSelector",{enumerable:!0,get:function(){return r(d).default}});var p=GB;Object.defineProperty(e,"LoadingEllipses",{enumerable:!0,get:function(){return r(p).default}});var h=ih;Object.defineProperty(e,"Menu",{enumerable:!0,get:function(){return r(h).default}});var g=WB;Object.defineProperty(e,"PrerenderedCanvas",{enumerable:!0,get:function(){return r(g).default}});var v=qB;Object.defineProperty(e,"Tooltip",{enumerable:!0,get:function(){return r(v).default}});var m=XB;Object.defineProperty(e,"ReturnToImportFormDialog",{enumerable:!0,get:function(){return r(m).default}});var y=YB;Object.defineProperty(e,"ResizeHandle",{enumerable:!0,get:function(){return r(y).default}});var _=KB;Object.defineProperty(e,"SanitizedHTML",{enumerable:!0,get:function(){return r(_).default}}),n(ih,e)})(KC);const rXe=`CLUSTAL O(1.2.3) multiple sequence alignment
UniProt/Swiss-Prot|P26898|IL2RA_SHEEP      MEPSLLMWRFFVFIVVPGCVTEACHDDPPSLRNA----------MFKVLRYE----VGTM
UniProt/Swiss-Prot|P01590|IL2RA_MOUSE      MEPRLLMLGFLSLTIVPSCRAELCLYDPPEVPNA----------TFKALSYK----NGTI
UniProt/Swiss-Prot|P41690|IL2RA_FELCA      MEPSLLLWGILTFVVVHGHVTELCDENPPDIQHA----------TFKALTYK----TGTM
UniProt/Swiss-Prot|P01589|IL2RA_HUMAN      MDSYLLMWGLLTFIMVPGCQAELCDDDPPEIPHA----------TFKAMAYK----EGTM
UniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU      MDPYLLMWGLLTFITVPGCQAELCDDDPPKITHA----------TFKAVAYK----EGTM
UniProt/Swiss-Prot|Q95118|IL2RG_BOVIN      -----------------------------------LLMWGLLT-----------------
UniProt/Swiss-Prot|P40321|IL2RG_CANFA      MLKPPLPLRSLLFLQLSLLGVGLNSTVPMPNGNEDIT------PDFFLTATPSETLSVSS
UniProt/Swiss-Prot|P26896|IL2RB_RAT        MATVDLSWRLPLYILLLLLATT--------------------------------WVSAAV
UniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE       PLPLRSLLFLQLPLLGVGLNP------------------PLPLRSLLFLQLPLLGVGLNP
UniProt/Swiss-Prot|P36835|IL2_CAPHI        -----------LLGVGLNPKFLTP------------------------------------
UniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO        MLKPPLPLRSLLFLQLPLLGVGLNPKFLTPSGNEDIGGKPGTGGDFFLTSTPAGTLDVST
UniProt/Swiss-Prot|Q29416|IL2_CANFA        --------------LFLQLSLLG-------------------------------------
`,iXe=`CLUSTAL O(1.2.4) multiple sequence alignment


sp|P69905|HBA_HUMAN       MVLSPADKTNVKAAWGKVGAHAGEYGAEALERMFLSFPTTKTYFPHFDLSHGSAQVKGHG	60
sp|P01942|HBA_MOUSE       MVLSGEDKSNIKAAWGKIGGHGAEYGAEALERMFASFPTTKTYFPHFDVSHGSAQVKGHG	60
sp|P13786|HBAZ_CAPHI      MSLTRTERTIILSLWSKISTQADVIGTETLERLFSCYPQAKTYFPHFDLHSGSAQLRAHG	60
                          * *:  ::: : : *.*:. :.   *:*:***:* .:* :********:  ****::.**

sp|P69905|HBA_HUMAN       KKVADALTNAVAHVDDMPNALSALSDLHAHKLRVDPVNFKLLSHCLLVTLAAHLPAEFTP	120
sp|P01942|HBA_MOUSE       KKVADALASAAGHLDDLPGALSALSDLHAHKLRVDPVNFKLLSHCLLVTLASHHPADFTP	120
sp|P13786|HBAZ_CAPHI      SKVVAAVGDAVKSIDNVTSALSKLSELHAYVLRVDPVNFKFLSHCLLVTLASHFPADFTA	120
                          .**. *: .*.  :*:: .*** **:***: *********:**********:* **:**

sp|P69905|HBA_HUMAN       AVHASLDKFLASVSTVLTSKYR	142
sp|P01942|HBA_MOUSE       AVHASLDKFLASVSTVLTSKYR	142
sp|P13786|HBAZ_CAPHI      DAHAAWDKFLSIVSGVLTEKYR	142
                           .**: ****: ** ***.***`,oXe="(((UniProt/Swiss-Prot|P26898|IL2RA_SHEEP:0.24036,(UniProt/Swiss-Prot|P41690|IL2RA_FELCA:0.17737,(UniProt/Swiss-Prot|P01589|IL2RA_HUMAN:0.03906,UniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU:0.03787):0.13033):0.04964):0.02189,UniProt/Swiss-Prot|P01590|IL2RA_MOUSE:0.23072):0.06814,(((UniProt/Swiss-Prot|Q95118|IL2RG_BOVIN:0.09600,UniProt/Swiss-Prot|P40321|IL2RG_CANFA:0.09845):0.25333,UniProt/Swiss-Prot|Q29416|IL2_CANFA:-0.35055):0.10231,(UniProt/Swiss-Prot|P26896|IL2RB_RAT:0.33631,UniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO:-0.33631):0.10166):0.01607,(UniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE:0.32378,UniProt/Swiss-Prot|P36835|IL2_CAPHI:-0.32378):0.09999)";async function Hd(e,t,n){e.setError(void 0);try{t&&await e.setMSAFilehandle(t),n&&await e.setTreeFilehandle(n)}catch(r){e.setError(r)}}const ff=({onClick:e,model:t,children:n})=>Be.createElement("li",null,Be.createElement(FQ,{onClick:r=>{t.setError(void 0),r.preventDefault(),e()},href:"#"},Be.createElement(jn,{display:"inline"},n))),aXe=nr(({model:e})=>{const[t,n]=$.useState(),[r,i]=$.useState(),{error:o}=e;return Be.createElement(UJ,null,Be.createElement("div",{style:{width:"50%"}},o?Be.createElement("div",{style:{padding:20}},Be.createElement(jn,{color:"error"},"Error: ",`${o}`)):null,Be.createElement(jn,null,"Open an MSA file (stockholm or clustal format) and/or a tree file (newick format)."),Be.createElement(jn,{color:"error"},"Note: you can open up just an MSA or just a tree, both are not required. Some MSA files e.g. stockholm format have an embedded tree also and this is fine, and opening a separate tree file is not required.")),Be.createElement(Ny,{container:!0,spacing:10,justifyContent:"center",alignItems:"center"},Be.createElement(Ny,{item:!0},Be.createElement(jn,null,"MSA file or URL"),Be.createElement(KC.FileSelector,{location:t,setLocation:n}),Be.createElement(jn,null,"Tree file or URL"),Be.createElement(KC.FileSelector,{location:r,setLocation:i})),Be.createElement(Ny,{item:!0},Be.createElement(rB,{onClick:()=>Hd(e,t,r),variant:"contained",color:"primary",disabled:!t&&!r},"Open")),Be.createElement(Ny,{item:!0},Be.createElement(jn,null,"Examples"),Be.createElement("ul",null,Be.createElement(ff,{model:e,onClick:()=>Hd(e,void 0,{uri:"https://jbrowse.org/genomes/newick_trees/sarscov2phylo.pub.ft.nh",locationType:"UriLocation"})},"230k COVID-19 samples (tree only)"),Be.createElement(ff,{model:e,onClick:()=>{e.setData({msa:rXe,tree:oXe})}},"Small protein MSA+tree"),Be.createElement(ff,{model:e,onClick:()=>{e.setData({msa:iXe})}},"Small MSA only"),Be.createElement(ff,{model:e,onClick:()=>Hd(e,{uri:"https://ihh.github.io/abrowse/build/pfam-cov2.stock",locationType:"UriLocation"})},"PFAM SARS-CoV2 multi-stockholm"),Be.createElement(ff,{model:e,onClick:()=>Hd(e,{uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/Lysine.stock",locationType:"UriLocation"})},"Lysine stockholm file"),Be.createElement(ff,{model:e,onClick:()=>Hd(e,{uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/PF01601_full.txt",locationType:"UriLocation"})},"PF01601 stockholm file (SARS-CoV2 spike protein)"),Be.createElement(ff,{model:e,onClick:()=>Hd(e,{uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/europe_covid.fa",locationType:"UriLocation"})},"Europe COVID full genomes (LR883044.1 and 199 other sequences)"),Be.createElement(ff,{model:e,onClick:()=>Hd(e,{uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.fa",locationType:"UriLocation"},{uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.nh",locationType:"UriLocation"})},"MAFFT+VeryFastTree(17.9k samples)")))))});var JB={},sXe=Er;Object.defineProperty(JB,"__esModule",{value:!0});var QB=JB.default=void 0,lXe=sXe(Do()),cXe=G,uXe=(0,lXe.default)((0,cXe.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),"Assignment");QB=JB.default=uXe;const fXe=j_()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",zIndex:10}}),dXe=nr(function({model:e,coordX:t}){const{treeAreaWidth:n}=e,{classes:r}=fXe();return Be.createElement(Be.Fragment,null,Be.createElement(dB,{open:!0,placement:"top",title:`${e.pxToBp(t)+1}`,arrow:!0},Be.createElement("div",{style:{left:t+n,position:"absolute",height:1}})),Be.createElement("div",{className:r.guide,style:{left:t+n,background:"red"}}))}),pXe=j_()(e=>({rubberband:{height:"100%",background:"tertiary"in e.palette&&e.palette.tertiary?Ot(e.palette.tertiary.main,.7):Ot(e.palette.primary.main,.7),position:"absolute",zIndex:10,textAlign:"center",overflow:"hidden"},rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8},rubberbandText:{color:e.palette.tertiary?e.palette.tertiary.contrastText:e.palette.primary.contrastText},popover:{mouseEvents:"none",cursor:"crosshair"},paper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}));function hXe({model:e,ControlComponent:t=Be.createElement("div",null)}){const{treeAreaWidth:n}=e,[r,i]=$.useState(),[o,a]=$.useState(),[s,l]=$.useState(),[c,u]=$.useState(),f=$.useRef(null),d=$.useRef(null),{classes:p}=pXe(),h=r!==void 0&&s===void 0;$.useEffect(()=>{function O(B){if(f.current&&h){const R=B.clientX-f.current.getBoundingClientRect().left;a(R)}}function T(B){if(r!==void 0&&f.current){const{clientX:R,clientY:P}=B,D=f.current,z=R-D.getBoundingClientRect().left;l({offsetX:z,clientX:R,clientY:P}),u(void 0)}}return h?(window.addEventListener("mousemove",O),window.addEventListener("mouseup",T),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",T)}):()=>{}},[r,h,s]),$.useEffect(()=>{!h&&o!==void 0&&r!==void 0&&Math.abs(o-r)<=3&&y()},[h,o,r,e.colWidth]);function g(O){O.preventDefault(),O.stopPropagation();const T=O.clientX-O.target.getBoundingClientRect().left;i(T),a(T)}function v(O){const T=O.target;u(O.clientX-T.getBoundingClientRect().left)}function m(){u(void 0),e.clearAnnotPos()}function y(){l(void 0),i(void 0),a(void 0)}function _(O,T){T(),y()}if(r===void 0)return Be.createElement(Be.Fragment,null,c!==void 0?Be.createElement(dXe,{model:e,coordX:c}):null,Be.createElement("div",{"data-testid":"rubberband_controls",className:p.rubberbandControl,role:"presentation",ref:f,onMouseDown:g,onMouseOut:m,onMouseMove:v},t));const b=s?s.offsetX:o||0,x=b<r?b:r,w=Math.abs(b-r),S=e.pxToBp(x),A=e.pxToBp(x+w),C=Math.ceil(w/e.colWidth),k=[{label:"Create annotation",icon:QB,onClick:()=>{e.setOffsets(S,A),y()}}];return Be.createElement(Be.Fragment,null,d.current?Be.createElement(Be.Fragment,null,Be.createElement(GC,{className:p.popover,classes:{paper:p.paper},open:!0,anchorEl:d.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,disableRestoreFocus:!0},Be.createElement(jn,null,S+1)),Be.createElement(GC,{className:p.popover,classes:{paper:p.paper},open:!0,anchorEl:d.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,disableRestoreFocus:!0},Be.createElement(jn,null,A+1))):null,Be.createElement("div",{ref:d,className:p.rubberband,style:{left:x+n,width:w}},Be.createElement(jn,{variant:"h6",className:p.rubberbandText},C.toLocaleString("en-US")," bp")),Be.createElement("div",{"data-testid":"rubberband_controls",className:p.rubberbandControl,role:"presentation",ref:f,onMouseDown:g,onMouseOut:m,onMouseMove:v},t),s?Be.createElement(KC.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:s.clientX,top:s.clientY},onMenuItemClick:_,open:!!s,onClose:y,menuItems:k}):null)}const mXe=nr(hXe);var u9=!1,mp,rL,iL,AS,PS,ure,MS,oL,aL,sL,fre,lL,cL,dre,pre;function ta(){if(!u9){u9=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(lL=/\b(iPhone|iP[ao]d)/.exec(e),cL=/\b(iP[ao]d)/.exec(e),sL=/Android/i.exec(e),dre=/FBAN\/\w+;/i.exec(e),pre=/Mobile/i.exec(e),fre=!!/Win64/.exec(e),t){mp=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,mp&&document&&document.documentMode&&(mp=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(e);ure=r?parseFloat(r[1])+4:mp,rL=t[2]?parseFloat(t[2]):NaN,iL=t[3]?parseFloat(t[3]):NaN,AS=t[4]?parseFloat(t[4]):NaN,AS?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),PS=t&&t[1]?parseFloat(t[1]):NaN):PS=NaN}else mp=rL=iL=PS=AS=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);MS=i?parseFloat(i[1].replace("_",".")):!0}else MS=!1;oL=!!n[2],aL=!!n[3]}else MS=oL=aL=!1}}var uL={ie:function(){return ta()||mp},ieCompatibilityMode:function(){return ta()||ure>mp},ie64:function(){return uL.ie()&&fre},firefox:function(){return ta()||rL},opera:function(){return ta()||iL},webkit:function(){return ta()||AS},safari:function(){return uL.webkit()},chrome:function(){return ta()||PS},windows:function(){return ta()||oL},osx:function(){return ta()||MS},linux:function(){return ta()||aL},iphone:function(){return ta()||lL},mobile:function(){return ta()||lL||cL||sL||pre},nativeApp:function(){return ta()||dre},android:function(){return ta()||sL},ipad:function(){return ta()||cL}},gXe=uL,Bw=!!(typeof window<"u"&&window.document&&window.document.createElement),vXe={canUseDOM:Bw,canUseWorkers:typeof Worker<"u",canUseEventListeners:Bw&&!!(window.addEventListener||window.attachEvent),canUseViewport:Bw&&!!window.screen,isInWorker:!Bw},yXe=vXe,hre=yXe,mre;hre.canUseDOM&&(mre=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function bXe(e,t){if(!hre.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&mre&&e==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var _Xe=bXe,xXe=gXe,wXe=_Xe,f9=10,d9=40,p9=800;function gre(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*f9,i=n*f9,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(e.deltaMode==1?(r*=d9,i*=d9):(r*=p9,i*=p9)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}}gre.getEventType=function(){return xXe.firefox()?"DOMMouseScroll":wXe("wheel")?"wheel":"mousewheel"};var SXe=gre,CXe=SXe;const eN=xh(CXe);function AXe(e,t,n,r,i){vre(e,t,n||0,r||e.length-1,i||PXe)}function vre(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1),u=Math.max(n,Math.floor(t-a*l/o+c)),f=Math.min(r,Math.floor(t+(o-a)*l/o+c));vre(e,t,u,f,i)}var d=e[t],p=n,h=r;for(ny(e,n,t),i(e[r],d)>0&&ny(e,n,r);p<h;){for(ny(e,p,h),p++,h--;i(e[p],d)<0;)p++;for(;i(e[h],d)>0;)h--}i(e[n],d)===0?ny(e,n,h):(h++,ny(e,h,r)),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function ny(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function PXe(e,t){return e<t?-1:e>t?1:0}class yre{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const r=[];if(!Fw(t,n))return r;const i=this.toBBox,o=[];for(;n;){for(let a=0;a<n.children.length;a++){const s=n.children[a],l=n.leaf?i(s):s;Fw(t,l)&&(n.leaf?r.push(s):bI(t,l)?this._all(s,r):o.push(s))}n=o.pop()}return r}collides(t){let n=this.data;if(!Fw(t,n))return!1;const r=[];for(;n;){for(let i=0;i<n.children.length;i++){const o=n.children[i],a=n.leaf?this.toBBox(o):o;if(Fw(t,a)){if(n.leaf||bI(t,a))return!0;r.push(o)}}n=r.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let r=0;r<t.length;r++)this.insert(t[r]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=km([]),this}remove(t,n){if(!t)return this;let r=this.data;const i=this.toBBox(t),o=[],a=[];let s,l,c;for(;r||o.length;){if(r||(r=o.pop(),l=o[o.length-1],s=a.pop(),c=!0),r.leaf){const u=MXe(t,r.children,n);if(u!==-1)return r.children.splice(u,1),o.push(r),this._condense(o),this}!c&&!r.leaf&&bI(r,i)?(o.push(r),a.push(s),s=0,l=r,r=r.children[0]):l?(s++,r=l.children[s],c=!1):r=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const r=[];for(;t;)t.leaf?n.push(...t.children):r.push(...t.children),t=r.pop();return n}_build(t,n,r,i){const o=r-n+1;let a=this._maxEntries,s;if(o<=a)return s=km(t.slice(n,r+1)),Qh(s,this.toBBox),s;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),s=km([]),s.leaf=!1,s.height=i;const l=Math.ceil(o/a),c=l*Math.ceil(Math.sqrt(a));h9(t,n,r,c,this.compareMinX);for(let u=n;u<=r;u+=c){const f=Math.min(u+c-1,r);h9(t,u,f,l,this.compareMinY);for(let d=u;d<=f;d+=l){const p=Math.min(d+l-1,f);s.children.push(this._build(t,d,p,i-1))}}return Qh(s,this.toBBox),s}_chooseSubtree(t,n,r,i){for(;i.push(n),!(n.leaf||i.length-1===r);){let o=1/0,a=1/0,s;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=yI(c),f=OXe(t,c)-u;f<a?(a=f,o=u<o?u:o,s=c):f===a&&u<o&&(o=u,s=c)}n=s||n.children[0]}return n}_insert(t,n,r){const i=r?t:this.toBBox(t),o=[],a=this._chooseSubtree(i,this.data,n,o);for(a.children.push(t),zy(a,i);n>=0&&o[n].children.length>this._maxEntries;)this._split(o,n),n--;this._adjustParentBBoxes(i,o,n)}_split(t,n){const r=t[n],i=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,i);const a=this._chooseSplitIndex(r,o,i),s=km(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,Qh(r,this.toBBox),Qh(s,this.toBBox),n?t[n-1].children.push(s):this._splitRoot(r,s)}_splitRoot(t,n){this.data=km([t,n]),this.data.height=t.height+1,this.data.leaf=!1,Qh(this.data,this.toBBox)}_chooseSplitIndex(t,n,r){let i,o=1/0,a=1/0;for(let s=n;s<=r-n;s++){const l=jy(t,0,s,this.toBBox),c=jy(t,s,r,this.toBBox),u=IXe(l,c),f=yI(l)+yI(c);u<o?(o=u,i=s,a=f<a?f:a):u===o&&f<a&&(a=f,i=s)}return i||r-n}_chooseSplitAxis(t,n,r){const i=t.leaf?this.compareMinX:EXe,o=t.leaf?this.compareMinY:TXe,a=this._allDistMargin(t,n,r,i),s=this._allDistMargin(t,n,r,o);a<s&&t.children.sort(i)}_allDistMargin(t,n,r,i){t.children.sort(i);const o=this.toBBox,a=jy(t,0,n,o),s=jy(t,r-n,r,o);let l=Nw(a)+Nw(s);for(let c=n;c<r-n;c++){const u=t.children[c];zy(a,t.leaf?o(u):u),l+=Nw(a)}for(let c=r-n-1;c>=n;c--){const u=t.children[c];zy(s,t.leaf?o(u):u),l+=Nw(s)}return l}_adjustParentBBoxes(t,n,r){for(let i=r;i>=0;i--)zy(n[i],t)}_condense(t){for(let n=t.length-1,r;n>=0;n--)t[n].children.length===0?n>0?(r=t[n-1].children,r.splice(r.indexOf(t[n]),1)):this.clear():Qh(t[n],this.toBBox)}}function MXe(e,t,n){if(!n)return t.indexOf(e);for(let r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function Qh(e,t){jy(e,0,e.children.length,t,e)}function jy(e,t,n,r,i){i||(i=km(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=t;o<n;o++){const a=e.children[o];zy(i,e.leaf?r(a):a)}return i}function zy(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function EXe(e,t){return e.minX-t.minX}function TXe(e,t){return e.minY-t.minY}function yI(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Nw(e){return e.maxX-e.minX+(e.maxY-e.minY)}function OXe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function IXe(e,t){const n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function bI(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Fw(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function km(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function h9(e,t,n,r,i){const o=[t,n];for(;o.length;){if(n=o.pop(),t=o.pop(),n-t<=r)continue;const a=t+Math.ceil((n-t)/r/2)*r;AXe(e,a,t,n,i),o.push(t,a,a,n)}}const RXe=$.lazy(()=>Mh(()=>import("./MoreInfoDlg-35ba1eeb.js"),["./MoreInfoDlg-35ba1eeb.js","./index-95699cbd.js","./index-93f78a20.js"],import.meta.url)),kXe=nr(function({node:e,onClose:t,model:n}){var r,i;const{structures:o}=n,a=e?n.getRowData(e.name):void 0;return Be.createElement(Be.Fragment,null,Be.createElement(B_,{anchorReference:"anchorPosition",anchorPosition:{top:e.y,left:e.x},transitionDuration:0,keepMounted:!0,open:!!e,onClose:t},Be.createElement(fa,{dense:!0,disabled:!0},e.name),Be.createElement(fa,{dense:!0,onClick:()=>{n.setDialogComponent(RXe,{info:n.getRowData(e.name)}),t()}},"More info..."),(r=o[e.name])===null||r===void 0?void 0:r.map(s=>n.selectedStructures.some(l=>l.id===e.name)?Be.createElement(fa,{key:JSON.stringify(s),dense:!0,onClick:()=>{n.removeStructureFromSelection({structure:s,id:e.name}),t()}},"Remove PDB from selection (",s.pdb,")"):Be.createElement(fa,{key:JSON.stringify(s),dense:!0,onClick:()=>{n.addStructureToSelection({structure:s,id:e.name}),t()}},"Add PDB to selection (",s.pdb,")")),(i=a==null?void 0:a.data.accession)===null||i===void 0?void 0:i.map(s=>Be.createElement(fa,{dense:!0,key:s,onClick:()=>{n.addUniprotTrack({name:a==null?void 0:a.data.name,accession:s}),t()}},"Open UniProt track (",s,")"))))}),LXe=nr(function({node:e,model:t,onClose:n}){return Be.createElement(B_,{anchorReference:"anchorPosition",anchorPosition:{left:e.x,top:e.y},transitionDuration:0,keepMounted:!0,open:!!e,onClose:n},Be.createElement(fa,{dense:!0,disabled:!0},e.name),Be.createElement(fa,{dense:!0,onClick:()=>{t.toggleCollapsed(e.id),n()}},t.collapsed.includes(e.id)?"Expand this node":"Collapse this node"),Be.createElement(fa,{dense:!0,onClick:()=>{t.showOnly===e.id?t.setShowOnly(void 0):t.setShowOnly(e.id),n()}},t.showOnly===e.id?"Disable show only this node":"Show only this node"))}),jw=5,cp=3.5,ry=cp*2,em=600,$Xe=nr(function({model:e,offsetY:t}){const n=$.useRef(null),r=$.useRef(new yre),i=$.useRef(null),[o,a]=$.useState(),[s,l]=$.useState(),[c,u]=$.useState(),{hierarchy:f,rowHeight:d,scrollY:p,treeWidth:h,showBranchLen:g,collapsed:v,margin:m,labelsAlignRight:y,noTree:_,blockSize:b,drawNodeBubbles:x,drawTree:w,treeAreaWidth:S,structures:A,highResScaleFactor:C}=e;$.useEffect(()=>{if(r.current.clear(),!n.current)return;const T=n.current.getContext("2d");if(!T)return;T.resetTransform(),T.scale(C,C),T.clearRect(0,0,h+em,b),T.translate(m.left,-t);const B=T.font;if(T.font=B.replace(/\d+px/,`${Math.max(8,d-8)}px`),!_&&w){for(const{source:R,target:P}of f.links()){const D=g?"len":"y",{x:z,[D]:N}=R,{x:H,[D]:J}=P,ne=Math.min(z,H),oe=Math.max(z,H);t+b>=ne&&oe>=t&&(T.beginPath(),T.moveTo(N,z),T.lineTo(N,H),T.lineTo(J,H),T.stroke())}if(x)for(const R of f.descendants()){const P=g?"len":"y",{x:D,[P]:z,data:N}=R,{id:H="",name:J=""}=N;D>t-jw&&D<t+b+jw&&(T.strokeStyle="black",T.fillStyle=v.includes(H)?"black":"white",T.beginPath(),T.arc(z,D,cp,0,2*Math.PI),T.fill(),T.stroke(),r.current.insert({minX:z-cp,maxX:z-cp+ry,minY:D-cp,maxY:D-cp+ry,branch:!0,id:H,name:J}))}}if(d>=5){y?(T.textAlign="right",T.setLineDash([1,3])):T.textAlign="start";for(const R of f.leaves()){const{x:P,y:D,data:{name:z,id:N},len:H}=R;if(P>t-jw&&P<t+b+jw){const J=P+d/4,ne=g?H:D,{width:oe}=T.measureText(z),Z=T.measureText("M").width,ce=A[z];if(T.fillStyle=ce?"blue":"black",!w&&!y)T.fillText(z,0,J),r.current.insert({minX:0,maxX:oe,minY:J-Z,maxY:J,name:z,id:N});else if(y){const Y=S-2-m.left;if(w&&!_){const{width:he}=T.measureText(z);T.moveTo(ne+cp+2,P),T.lineTo(Y-2-he,P),T.stroke()}T.fillText(z,Y,J),r.current.insert({minX:S-m.left-oe,maxX:S-m.left,minY:J-Z,maxY:J,name:z,id:N})}else T.fillText(z,ne+ry,J),r.current.insert({minX:ne+ry,maxX:ne+ry+oe,minY:J-Z,maxY:J,name:z,id:N})}}T.setLineDash([])}},[v,d,m.left,f,t,h,g,_,b,x,w,y,S,A,C]),$.useEffect(()=>{const T=i.current;if(!T)return;const B=T.getContext("2d");if(B&&(B.resetTransform(),B.clearRect(0,0,h+em,b),B.translate(m.left,-t),c)){const{minX:R,maxX:P,minY:D,maxY:z}=c;B.fillStyle="rgba(0,0,0,0.1)",B.fillRect(R,D,P-R,z-D)}},[c,m.left,t,b,h]);function k(T){const B=T.nativeEvent.offsetX-m.left,R=T.nativeEvent.offsetY,[P]=r.current.search({minX:B,maxX:B+1,minY:R+t,maxY:R+1+t});return P&&P.branch?{...P,x:T.clientX,y:T.clientY}:void 0}function O(T){const B=T.nativeEvent.offsetX-m.left,R=T.nativeEvent.offsetY,[P]=r.current.search({minX:B,maxX:B+1,minY:R+t,maxY:R+1+t});return P&&!P.branch?{...P,x:T.clientX,y:T.clientY}:void 0}return Be.createElement(Be.Fragment,null,o!=null&&o.id?Be.createElement(LXe,{node:o,model:e,onClose:()=>a(void 0)}):null,s!=null&&s.id?Be.createElement(kXe,{node:s,model:e,onClose:()=>l(void 0)}):null,Be.createElement("canvas",{width:(h+em)*C,height:b*C,style:{width:h+em,height:b,top:p+t,left:0,position:"absolute"},onMouseMove:T=>{if(!n.current)return;const B=O(T)||k(T);n.current.style.cursor=B?"pointer":"default",u(O(T))},onClick:T=>{const{clientX:B,clientY:R}=T,P=k(T);P!=null&&P.id&&a({...P,x:B,y:R});const D=O(T);D!=null&&D.id&&l({...D,x:B,y:R})},ref:n}),Be.createElement("canvas",{style:{width:h+em,height:b,top:p+t,left:0,position:"absolute",pointerEvents:"none",zIndex:100},width:h+em,height:b,ref:i}))}),DXe=600,BXe=nr(function({model:e}){const t=$.useRef(null),n=$.useRef(!1),r=$.useRef(0),i=$.useRef(0),{treeWidth:o,height:a,blocksY:s}=e,[l,c]=$.useState(!1);$.useEffect(()=>{const p=t.current;if(!p)return;function h(g){const v=eN(g);r.current+=v.pixelY,n.current||(n.current=!0,requestAnimationFrame(()=>{e.doScrollY(-r.current),r.current=0,n.current=!1})),g.preventDefault()}return p.addEventListener("wheel",h),()=>{p.removeEventListener("wheel",h)}},[e]),$.useEffect(()=>{let p=()=>{};function h(v){v.preventDefault();const y=v.clientY-i.current;y&&(n.current||(n.current=!0,window.requestAnimationFrame(()=>{e.doScrollY(y),n.current=!1,i.current=v.clientY})))}function g(){i.current=0,l&&c(!1)}return l&&(window.addEventListener("mousemove",h,!0),window.addEventListener("mouseup",g,!0),p=()=>{window.removeEventListener("mousemove",h,!0),window.removeEventListener("mouseup",g,!0)}),p},[e,l]);function u(p){const h=p.target;h.draggable||h.dataset.resizer||p.button===0&&(i.current=p.clientY,c(!0))}function f(p){p.preventDefault(),c(!1)}function d(p){p.preventDefault()}return Be.createElement("div",{ref:t,onMouseDown:u,onMouseUp:f,onMouseLeave:d,style:{height:a,position:"relative",overflow:"hidden",width:o+DXe}},s.map(p=>Be.createElement($Xe,{key:p,model:e,offsetY:p})))});var bre={exports:{}},_re={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},xre={exports:{}},NXe=function(t){return!t||typeof t=="string"?!1:t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&t.constructor.name!=="String")},FXe=NXe,jXe=Array.prototype.concat,zXe=Array.prototype.slice,m9=xre.exports=function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];FXe(o)?n=jXe.call(n,zXe.call(o)):n.push(o)}return n};m9.wrap=function(e){return function(){return e(m9(arguments))}};var UXe=xre.exports,xb=_re,Ix=UXe,wre=Object.hasOwnProperty,Sre=Object.create(null);for(var _I in xb)wre.call(xb,_I)&&(Sre[xb[_I]]=_I);var qa=bre.exports={to:{},get:{}};qa.get=function(e){var t=e.substring(0,3).toLowerCase(),n,r;switch(t){case"hsl":n=qa.get.hsl(e),r="hsl";break;case"hwb":n=qa.get.hwb(e),r="hwb";break;default:n=qa.get.rgb(e),r="rgb";break}return n?{model:r,value:n}:null};qa.get.rgb=function(e){if(!e)return null;var t=/^#([a-f0-9]{3,4})$/i,n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,o=/^(\w+)$/,a=[0,0,0,1],s,l,c;if(s=e.match(n)){for(c=s[2],s=s[1],l=0;l<3;l++){var u=l*2;a[l]=parseInt(s.slice(u,u+2),16)}c&&(a[3]=parseInt(c,16)/255)}else if(s=e.match(t)){for(s=s[1],c=s[3],l=0;l<3;l++)a[l]=parseInt(s[l]+s[l],16);c&&(a[3]=parseInt(c+c,16)/255)}else if(s=e.match(r)){for(l=0;l<3;l++)a[l]=parseInt(s[l+1],0);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else if(s=e.match(i)){for(l=0;l<3;l++)a[l]=Math.round(parseFloat(s[l+1])*2.55);s[4]&&(s[5]?a[3]=parseFloat(s[4])*.01:a[3]=parseFloat(s[4]))}else return(s=e.match(o))?s[1]==="transparent"?[0,0,0,0]:wre.call(xb,s[1])?(a=xb[s[1]],a[3]=1,a):null:null;for(l=0;l<3;l++)a[l]=td(a[l],0,255);return a[3]=td(a[3],0,1),a};qa.get.hsl=function(e){if(!e)return null;var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=td(parseFloat(n[2]),0,100),a=td(parseFloat(n[3]),0,100),s=td(isNaN(r)?1:r,0,1);return[i,o,a,s]}return null};qa.get.hwb=function(e){if(!e)return null;var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){var r=parseFloat(n[4]),i=(parseFloat(n[1])%360+360)%360,o=td(parseFloat(n[2]),0,100),a=td(parseFloat(n[3]),0,100),s=td(isNaN(r)?1:r,0,1);return[i,o,a,s]}return null};qa.to.hex=function(){var e=Ix(arguments);return"#"+zw(e[0])+zw(e[1])+zw(e[2])+(e[3]<1?zw(Math.round(e[3]*255)):"")};qa.to.rgb=function(){var e=Ix(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};qa.to.rgb.percent=function(){var e=Ix(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"};qa.to.hsl=function(){var e=Ix(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};qa.to.hwb=function(){var e=Ix(arguments),t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};qa.to.keyword=function(e){return Sre[e.slice(0,3)]};function td(e,t,n){return Math.min(Math.max(t,e),n)}function zw(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}var VXe=bre.exports;const v1=_re,Cre={};for(const e of Object.keys(v1))Cre[v1[e]]=e;const Lt={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var Are=Lt;for(const e of Object.keys(Lt)){if(!("channels"in Lt[e]))throw new Error("missing channels property: "+e);if(!("labels"in Lt[e]))throw new Error("missing channel labels property: "+e);if(Lt[e].labels.length!==Lt[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=Lt[e];delete Lt[e].channels,delete Lt[e].labels,Object.defineProperty(Lt[e],"channels",{value:t}),Object.defineProperty(Lt[e],"labels",{value:n})}Lt.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=o-i;let s,l;o===i?s=0:t===o?s=(n-r)/a:n===o?s=2+(r-t)/a:r===o&&(s=4+(t-n)/a),s=Math.min(s*60,360),s<0&&(s+=360);const c=(i+o)/2;return o===i?l=0:c<=.5?l=a/(o+i):l=a/(2-o-i),[s,l*100,c*100]};Lt.rgb.hsv=function(e){let t,n,r,i,o;const a=e[0]/255,s=e[1]/255,l=e[2]/255,c=Math.max(a,s,l),u=c-Math.min(a,s,l),f=function(d){return(c-d)/6/u+1/2};return u===0?(i=0,o=0):(o=u/c,t=f(a),n=f(s),r=f(l),a===c?i=r-n:s===c?i=1/3+t-r:l===c&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[i*360,o*100,c*100]};Lt.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const i=Lt.rgb.hsl(e)[0],o=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[i,o*100,r*100]};Lt.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(1-t,1-n,1-r),o=(1-t-i)/(1-i)||0,a=(1-n-i)/(1-i)||0,s=(1-r-i)/(1-i)||0;return[o*100,a*100,s*100,i*100]};function HXe(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}Lt.rgb.keyword=function(e){const t=Cre[e];if(t)return t;let n=1/0,r;for(const i of Object.keys(v1)){const o=v1[i],a=HXe(e,o);a<n&&(n=a,r=i)}return r};Lt.keyword.rgb=function(e){return v1[e]};Lt.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const i=t*.4124+n*.3576+r*.1805,o=t*.2126+n*.7152+r*.0722,a=t*.0193+n*.1192+r*.9505;return[i*100,o*100,a*100]};Lt.rgb.lab=function(e){const t=Lt.rgb.xyz(e);let n=t[0],r=t[1],i=t[2];n/=95.047,r/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;const o=116*r-16,a=500*(n-r),s=200*(r-i);return[o,a,s]};Lt.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let i,o,a;if(n===0)return a=r*255,[a,a,a];r<.5?i=r*(1+n):i=r+n-r*n;const s=2*r-i,l=[0,0,0];for(let c=0;c<3;c++)o=t+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?a=s+(i-s)*6*o:2*o<1?a=i:3*o<2?a=s+(i-s)*(2/3-o)*6:a=s,l[c]=a*255;return l};Lt.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,i=n;const o=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o;const a=(r+n)/2,s=r===0?2*i/(o+i):2*n/(r+n);return[t,s*100,a*100]};Lt.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}};Lt.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,i=Math.max(r,.01);let o,a;a=(2-n)*r;const s=(2-n)*i;return o=n*i,o/=s<=1?s:2-s,o=o||0,a/=2,[t,o*100,a*100]};Lt.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const i=n+r;let o;i>1&&(n/=i,r/=i);const a=Math.floor(6*t),s=1-r;o=6*t-a,a&1&&(o=1-o);const l=n+o*(s-n);let c,u,f;switch(a){default:case 6:case 0:c=s,u=l,f=n;break;case 1:c=l,u=s,f=n;break;case 2:c=n,u=s,f=l;break;case 3:c=n,u=l,f=s;break;case 4:c=l,u=n,f=s;break;case 5:c=s,u=n,f=l;break}return[c*255,u*255,f*255]};Lt.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100,o=1-Math.min(1,t*(1-i)+i),a=1-Math.min(1,n*(1-i)+i),s=1-Math.min(1,r*(1-i)+i);return[o*255,a*255,s*255]};Lt.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let i,o,a;return i=t*3.2406+n*-1.5372+r*-.4986,o=t*-.9689+n*1.8758+r*.0415,a=t*.0557+n*-.204+r*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[i*255,o*255,a*255]};Lt.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const i=116*n-16,o=500*(t-n),a=200*(n-r);return[i,o,a]};Lt.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let i,o,a;o=(t+16)/116,i=n/500+o,a=o-r/200;const s=o**3,l=i**3,c=a**3;return o=s>.008856?s:(o-16/116)/7.787,i=l>.008856?l:(i-16/116)/7.787,a=c>.008856?c:(a-16/116)/7.787,i*=95.047,o*=100,a*=108.883,[i,o,a]};Lt.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let i;i=Math.atan2(r,n)*360/2/Math.PI,i<0&&(i+=360);const a=Math.sqrt(n*n+r*r);return[t,a,i]};Lt.lch.lab=function(e){const t=e[0],n=e[1],i=e[2]/360*2*Math.PI,o=n*Math.cos(i),a=n*Math.sin(i);return[t,o,a]};Lt.rgb.ansi16=function(e,t=null){const[n,r,i]=e;let o=t===null?Lt.rgb.hsv(e)[2]:t;if(o=Math.round(o/50),o===0)return 30;let a=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return o===2&&(a+=60),a};Lt.hsv.ansi16=function(e){return Lt.rgb.ansi16(Lt.hsv.rgb(e),e[2])};Lt.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};Lt.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(~~(e>50)+1)*.5,r=(t&1)*n*255,i=(t>>1&1)*n*255,o=(t>>2&1)*n*255;return[r,i,o]};Lt.ansi256.rgb=function(e){if(e>=232){const o=(e-232)*10+8;return[o,o,o]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,i=t%6/5*255;return[n,r,i]};Lt.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(n.length)+n};Lt.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=n.split("").map(s=>s+s).join(""));const r=parseInt(n,16),i=r>>16&255,o=r>>8&255,a=r&255;return[i,o,a]};Lt.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,n),r),o=Math.min(Math.min(t,n),r),a=i-o;let s,l;return a<1?s=o/(1-a):s=0,a<=0?l=0:i===t?l=(n-r)/a%6:i===n?l=2+(r-t)/a:l=4+(t-n)/a,l/=6,l%=1,[l*360,a*100,s*100]};Lt.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[e[0],r*100,i*100]};Lt.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],r*100,i*100]};Lt.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const i=[0,0,0],o=t%1*6,a=o%1,s=1-a;let l=0;switch(Math.floor(o)){case 0:i[0]=1,i[1]=a,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=a;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=a,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return l=(1-n)*r,[(n*i[0]+l)*255,(n*i[1]+l)*255,(n*i[2]+l)*255]};Lt.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let i=0;return r>0&&(i=t/r),[e[0],i*100,r*100]};Lt.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let i=0;return r>0&&r<.5?i=t/(2*r):r>=.5&&r<1&&(i=t/(2*(1-r))),[e[0],i*100,r*100]};Lt.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]};Lt.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,i=r-t;let o=0;return i<1&&(o=(r-i)/(1-i)),[e[0],i*100,o*100]};Lt.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};Lt.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};Lt.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};Lt.gray.hsl=function(e){return[0,0,e[0]]};Lt.gray.hsv=Lt.gray.hsl;Lt.gray.hwb=function(e){return[0,100,e[0]]};Lt.gray.cmyk=function(e){return[0,0,0,e[0]]};Lt.gray.lab=function(e){return[e[0],0,0]};Lt.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r};Lt.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const nA=Are;function GXe(){const e={},t=Object.keys(nA);for(let n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function WXe(e){const t=GXe(),n=[e];for(t[e].distance=0;n.length;){const r=n.pop(),i=Object.keys(nA[r]);for(let o=i.length,a=0;a<o;a++){const s=i[a],l=t[s];l.distance===-1&&(l.distance=t[r].distance+1,l.parent=r,n.unshift(s))}}return t}function qXe(e,t){return function(n){return t(e(n))}}function XXe(e,t){const n=[t[e].parent,e];let r=nA[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)n.unshift(t[i].parent),r=qXe(nA[t[i].parent][i],r),i=t[i].parent;return r.conversion=n,r}var YXe=function(e){const t=WXe(e),n={},r=Object.keys(t);for(let i=r.length,o=0;o<i;o++){const a=r[o];t[a].parent!==null&&(n[a]=XXe(a,t))}return n};const fL=Are,KXe=YXe,Lm={},ZXe=Object.keys(fL);function JXe(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function QXe(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const i=e(n);if(typeof i=="object")for(let o=i.length,a=0;a<o;a++)i[a]=Math.round(i[a]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}ZXe.forEach(e=>{Lm[e]={},Object.defineProperty(Lm[e],"channels",{value:fL[e].channels}),Object.defineProperty(Lm[e],"labels",{value:fL[e].labels});const t=KXe(e);Object.keys(t).forEach(r=>{const i=t[r];Lm[e][r]=QXe(i),Lm[e][r].raw=JXe(i)})});var eYe=Lm;const $m=VXe,Ga=eYe,Pre=["keyword","gray","hex"],dL={};for(const e of Object.keys(Ga))dL[[...Ga[e].labels].sort().join("")]=e;const rA={};function Vi(e,t){if(!(this instanceof Vi))return new Vi(e,t);if(t&&t in Pre&&(t=null),t&&!(t in Ga))throw new Error("Unknown model: "+t);let n,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Vi)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const i=$m.get(e);if(i===null)throw new Error("Unable to parse color from string: "+e);this.model=i.model,r=Ga[this.model].channels,this.color=i.value.slice(0,r),this.valpha=typeof i.value[r]=="number"?i.value[r]:1}else if(e.length>0){this.model=t||"rgb",r=Ga[this.model].channels;const i=Array.prototype.slice.call(e,0,r);this.color=pL(i,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const i=Object.keys(e);"alpha"in e&&(i.splice(i.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const o=i.sort().join("");if(!(o in dL))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=dL[o];const{labels:a}=Ga[this.model],s=[];for(n=0;n<a.length;n++)s.push(e[a[n]]);this.color=pL(s)}if(rA[this.model])for(r=Ga[this.model].channels,n=0;n<r;n++){const i=rA[this.model][n];i&&(this.color[n]=i(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Vi.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in $m.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const n=t.valpha===1?t.color:[...t.color,this.valpha];return $m.to[t.model](n)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:[...t.color,this.valpha];return $m.to.rgb.percent(n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=Ga[this.model],{labels:n}=Ga[this.model];for(let r=0;r<t;r++)e[n[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new Vi([...this.color.map(nYe(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new Vi([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:Wr("rgb",0,bi(255)),green:Wr("rgb",1,bi(255)),blue:Wr("rgb",2,bi(255)),hue:Wr(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:Wr("hsl",1,bi(100)),lightness:Wr("hsl",2,bi(100)),saturationv:Wr("hsv",1,bi(100)),value:Wr("hsv",2,bi(100)),chroma:Wr("hcg",1,bi(100)),gray:Wr("hcg",2,bi(100)),white:Wr("hwb",1,bi(100)),wblack:Wr("hwb",2,bi(100)),cyan:Wr("cmyk",0,bi(100)),magenta:Wr("cmyk",1,bi(100)),yellow:Wr("cmyk",2,bi(100)),black:Wr("cmyk",3,bi(100)),x:Wr("xyz",0,bi(95.047)),y:Wr("xyz",1,bi(100)),z:Wr("xyz",2,bi(108.833)),l:Wr("lab",0,bi(100)),a:Wr("lab",1),b:Wr("lab",2),keyword(e){return e!==void 0?new Vi(e):Ga[this.model].keyword(this.color)},hex(e){return e!==void 0?new Vi(e):$m.to.hex(this.rgb().round().color)},hexa(e){if(e!==void 0)return new Vi(e);const t=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),$m.to.hex(t)+n},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[n,r]of e.entries()){const i=r/255;t[n]=i<=.04045?i/12.92:((i+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return Vi.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),r=this.rgb(),i=t===void 0?.5:t,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a===-1?o:(o+a)/(1+o*a))+1)/2,l=1-s;return Vi.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue(),n.alpha()*i+r.alpha()*(1-i))}};for(const e of Object.keys(Ga)){if(Pre.includes(e))continue;const{channels:t}=Ga[e];Vi.prototype[e]=function(...n){return this.model===e?new Vi(this):n.length>0?new Vi(n,e):new Vi([...rYe(Ga[this.model][e].raw(this.color)),this.valpha],e)},Vi[e]=function(...n){let r=n[0];return typeof r=="number"&&(r=pL(n,t)),new Vi(r,e)}}function tYe(e,t){return Number(e.toFixed(t))}function nYe(e){return function(t){return tYe(t,e)}}function Wr(e,t,n){e=Array.isArray(e)?e:[e];for(const r of e)(rA[r]||(rA[r]=[]))[t]=n;return e=e[0],function(r){let i;return r!==void 0?(n&&(r=n(r)),i=this[e](),i.color[t]=r,i):(i=this[e]().color[t],n&&(i=n(i)),i)}}function bi(e){return function(t){return Math.max(0,Math.min(e,t))}}function rYe(e){return Array.isArray(e)?e:[e]}function pL(e,t){for(let n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}var iYe=Vi;const Mre=xh(iYe);function oYe(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function aYe(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function hL(e,t){return Object.fromEntries(Object.entries(e).map(t))}function tN(e,t="node",n=0){var r;const i=`${t}-${n}`;return{...e,id:i,name:e.name||i,branchset:((r=e.branchset)===null||r===void 0?void 0:r.map((o,a)=>tN(o,`${i}-${a}`,n+1)))||[]}}function Ere(e,t){return hL(e,([n,r])=>[n,t.palette.getContrastText(Mre(r).hex())])}function sYe(e){return e==null?void 0:e.split(`
`).map(t=>t.trim()).filter(t=>!!t&&!t.startsWith("#")).map(t=>{const[n,r,i,o,a,s,l,c,u]=t.split("	");return{seq_id:n,source:r,type:i,start:+o,end:+a,score:+s,strand:l,phase:c,...Object.fromEntries(u.split(";").map(f=>f.trim()).filter(f=>!!f).map(f=>f.split("=")).map(([f,d])=>[f.trim(),decodeURIComponent(d).trim().split(",").join(" ")]))}})}function g9(e,t){let n="",r=0;for(let i=0;i<t.length;i++)i===e[r]?r++:n+=t[i];return n}function Tre(e,t,n){var r;e.len=(t+=Math.max(e.data.length||0,0))*n,(r=e.children)===null||r===void 0||r.forEach(i=>{Tre(i,t,n)})}function Ore(e){return(e.data.length||1)+(e.children&&aYe(e.children,Ore)||0)}function Ire(e){e.children&&(e._children=e.children,e._children.forEach(Ire),e.children=null)}function v9(e,t,n){return Math.min(Math.max(t,e),n)}const lYe={clustal:{G:"orange",P:"orange",S:"orange",T:"orange",H:"red",K:"red",R:"red",F:"blue",W:"blue",Y:"blue",I:"green",L:"green",M:"green",V:"green"},lesk:{G:"orange",A:"orange",S:"orange",T:"orange",C:"green",V:"green",I:"green",L:"green",P:"green",F:"green",Y:"green",M:"green",W:"green",N:"magenta",Q:"magenta",H:"magenta",D:"red",E:"red",K:"blue",R:"blue"},maeditor:{A:"lightgreen",G:"lightgreen",C:"green",D:"darkgreen",E:"darkgreen",N:"darkgreen",Q:"darkgreen",I:"blue",L:"blue",M:"blue",V:"blue",F:"#c8a2c8",W:"#c8a2c8",Y:"#c8a2c8",H:"darkblue",K:"orange",R:"orange",P:"pink",S:"red",T:"red"},percent_identity_dynamic:{},flower:{A:"#b18a51",C:"#ff5701",D:"#01a578",E:"#2da0a1",F:"#fa559d",G:"#b1c23c",H:"#0194f9",I:"#f27663",K:"#7fc3d7",L:"#df6e75",M:"#fe9daf",N:"#0bcec6",P:"#4fa32a",Q:"#7295ae",R:"#83bff1",S:"#b4bd9b",T:"#d2b576",V:"#fd997b",W:"#ff2ded",Y:"#c96ecf"},rainbow_dna:{A:"#3737f5",C:"#37f537",G:"#f5f537",T:"#f53737",U:"#f53737"},clustalx_protein:{A:"#197fe5",C:"#e57f7f",D:"#cc4ccc",E:"#cc4ccc",F:"#197fe5",G:"#e5994c",H:"#19b2b2",I:"#197fe5",K:"#e53319",L:"#197fe5",M:"#197fe5",N:"#19cc19",P:"#cccc00",Q:"#19cc19",R:"#e53319",S:"#19cc19",T:"#19cc19",V:"#197fe5",W:"#197fe5",Y:"#19b2b2"},clustalx_protein_dynamic:{},clustalx_dna:{A:"#e53319",C:"#197fe5",G:"#e5994c",T:"#19cc19",U:"#19cc19"},jalview_buried:{A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},jalview_hydrophobicity:{A:"#ad0052",R:"#0000ff",N:"#0c00f3",D:"#0c00f3",C:"#c2003d",Q:"#0c00f3",E:"#0c00f3",G:"#6a0095",H:"#1500ea",I:"#ff0000",L:"#ea0015",K:"#0000ff",M:"#b0004f",F:"#cb0034",P:"#4600b9",S:"#5e00a1",T:"#61009e",W:"#5b00a4",Y:"#4f00b0",V:"#f60009",B:"#0c00f3",X:"#680097",Z:"#0c00f3"},jalview_prophelix:{A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},jalview_propstrand:{A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},jalview_propturn:{A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},jalview_taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00"},jalview_zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf"},cinema:{H:"blue",K:"blue",R:"blue",D:"red",E:"red",S:"green",T:"green",N:"green",Q:"green",A:"white",V:"white",L:"white",I:"white",M:"white",F:"magenta",W:"magenta",Y:"magenta",P:"brown",G:"brown",C:"yellow",B:"gray",Z:"gray",X:"gray","-":"gray",".":"gray"}},cYe=hL(lYe,([e,t])=>[e,hL(t,([n,r])=>[n,Mre(r).hex()])]);function uYe(e,t,n,r){const i=Object.values(e).reduce((P,D)=>P+D,0),o=t.columns[n][r],{W:a=0,L:s=0,V:l=0,I:c=0,M:u=0,A:f=0,F:d=0,C:p=0,H:h=0,P:g=0,R:v=0,K:m=0,Q:y=0,E:_=0,D:b=0,T:x=0,S:w=0,G:S=0,Y:A=0,N:C=0}=e,k=a+s+l+c+u+f+d+p+h+g+A,O=m+v,T=y+_,B=_+b,R=x+w;if(k/i>.6&&(o==="W"||o==="L"||o==="V"||o==="A"||o==="I"||o==="M"||o==="F"||o==="C"))return"rgb(128,179,230)";if((o==="K"||o==="R")&&(O/i>.6||m/i>.8||v/i>.8||y/i>.8))return"#d88";if(o==="E"&&(O/i>.6||T/i>.5||_/i>.8||y/i>.8||b/i>.8))return"rgb(192, 72, 192)";if(o==="D"&&(O/i>.6||B/i>.5||m/i>.8||v/i>.8||y/i>.8))return"rgb(204, 77, 204)";if(o==="N"&&(C/i>.5||A/i>.85)||o==="Q"&&(O/i>.6||T/i>.6||y/i>.85||_/i>.85||m/i>.85||v/i>.85))return"#8f8";if((o==="S"||o==="T")&&(k/i>.6||R/i>.5||w/i>.85||x/i>.85))return"rgb(26,204,26)";if(o==="C"&&p/i>.85)return"rgb(240, 128, 128)";if(o==="G"&&S/i>0)return"rgb(240, 144, 72)";if(o==="P"&&g/i>0)return"rgb(204, 204, 0)";if((o==="H"||o==="Y")&&(k/i>.6||a>.85||A>.85||f>.85||p>.85||g>.85||y>.85||d>.85||h>.85||c>.85||s>.85||u>.85||l>.85))return"rgb(26, 179, 179)"}function fYe(e,t,n,r){const i=Object.values(e).reduce((f,d)=>f+d,0),o=t.columns[n][r],a=Object.entries(e);let s=0,l="";for(const f of a)f[1]>s&&f[0]!=="-"&&(l=f[0],s=f[1]);const c=s/i,u=`hsl(240, 30%, ${100*Math.max(1-s/i/3,.3)}%)`;if(c>.4&&o===l)return u}const dYe=nr(function({model:e,offsetX:t,offsetY:n}){const{MSA:r,colWidth:i,bgColor:o,columns:a,rowHeight:s,scrollY:l,scrollX:c,hierarchy:u,colorScheme:f,colorSchemeName:d,blockSize:p,highResScaleFactor:h,colStats:g}=e,v=ir(),m=$.useMemo(()=>Ere(f,v),[f,v]),y=$.useRef(null);return $.useEffect(()=>{var _,b;if(!y.current)return;const x=y.current.getContext("2d");if(!x)return;x.resetTransform(),x.scale(h,h),x.clearRect(0,0,p,p),x.translate(-t,s/2-n),x.textAlign="center",x.font=x.font.replace(/\d+px/,`${Math.max(8,s-8)}px`);const w=u.leaves(),S=p,A=Math.max(0,Math.floor((n-s)/s)),C=Math.max(0,Math.ceil((n+S+s)/s)),k=Math.max(0,Math.floor(t/i)),O=Math.max(0,Math.ceil((t+S)/i)),T=w.slice(A,C);for(const B of T){const{x:R,data:{name:P}}=B,D=(_=a[P])===null||_===void 0?void 0:_.slice(k,O);for(let z=0;z<(D==null?void 0:D.length);z++){const N=D[z],H=d==="clustalx_protein_dynamic"?uYe(g[k+z],e,P,k+z):d==="percent_identity_dynamic"?fYe(g[k+z],e,P,k+z):f[N.toUpperCase()];if(o){const J=z*i+t-t%i;x.fillStyle=H||"white",x.fillRect(J,R-s,i,s)}}}if(s>=5&&i>s/2)for(const B of T){const{x:R,data:{name:P}}=B,D=(b=a[P])===null||b===void 0?void 0:b.slice(k,O);for(let z=0;z<(D==null?void 0:D.length);z++){const N=D[z],H=f[N.toUpperCase()],J=m[N.toUpperCase()]||"black",ne=z*i+t-t%i;x.fillStyle=o?J:H||"black",x.fillText(N,ne+i/2,R-s/4)}}},[r,h,a,f,m,o,s,i,u,t,n,p]),Be.createElement("canvas",{ref:y,onMouseMove:_=>{if(!y.current)return;const{left:b,top:x}=y.current.getBoundingClientRect(),w=_.clientX-b+t,S=_.clientY-x+n;e.setMousePos(Math.floor(w/i)+1,Math.floor(S/s))},onMouseLeave:()=>e.setMousePos(),width:p*h,height:p*h,style:{position:"absolute",top:l+n,left:c+t,width:p,height:p}})}),pYe=nr(function({model:e}){const{MSA:t,msaFilehandle:n,height:r,msaAreaWidth:i,blocks2d:o}=e,a=$.useRef(null),s=$.useRef(!1),l=$.useRef(0),c=$.useRef(0),u=$.useRef(0),f=$.useRef(0),[d,p]=$.useState(!1);return $.useEffect(()=>{const h=a.current;if(!h)return;function g(v){const m=eN(v);l.current+=m.pixelX,c.current+=m.pixelY,s.current||(s.current=!0,requestAnimationFrame(()=>{e.doScrollX(-l.current),e.doScrollY(-c.current),l.current=0,c.current=0,s.current=!1})),v.preventDefault()}return h.addEventListener("wheel",g),()=>{h.removeEventListener("wheel",g)}},[e]),$.useEffect(()=>{let h=()=>{};function g(m){m.preventDefault();const y=m.clientX,_=m.clientY,b=y-u.current,x=_-f.current;(b||x)&&(s.current||(s.current=!0,window.requestAnimationFrame(()=>{e.doScrollX(b),e.doScrollY(x),s.current=!1,u.current=m.clientX,f.current=m.clientY})))}function v(){u.current=0,d&&p(!1)}return d&&(window.addEventListener("mousemove",g,!0),window.addEventListener("mouseup",v,!0),h=()=>{window.removeEventListener("mousemove",g,!0),window.removeEventListener("mouseup",v,!0)}),h},[e,d]),Be.createElement("div",{ref:a,onMouseDown:h=>{const g=h.target;g.draggable||g.dataset.resizer||h.button===0&&(u.current=h.clientX,f.current=h.clientY,p(!0))},onMouseUp:h=>{h.preventDefault(),p(!1)},onMouseLeave:h=>{h.preventDefault()},style:{position:"relative",height:r,width:i,overflow:"hidden"}},!t&&!n?null:t?o.map(([h,g])=>Be.createElement(dYe,{key:`${h}_${g}`,model:e,offsetX:h,offsetY:g})):Be.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"}},Be.createElement(zJ,null),Be.createElement(jn,null,"Loading...")))});function hYe(e,t,n){e=Math.abs(e);const r=t*e;let o=10**parseInt(Number(r).toExponential().split(/e/i)[1],10);for(;o<r&&(o*=2,!(o>=r));)o*=2.5;o=Math.max(o,5);const a=o/e;let s=0;return!(o%10)&&a/10>=n?s=o/10:!(o%5)&&a/5>=n?s=o/5:!(o%2)&&a/2>=n&&(s=o/2),{majorPitch:o,minorPitch:s}}function mYe(e,t,n,r=!0,i=!0){const o=hYe(n,60,15);let a=e,s=t;if(a===null||s===null)return[];n<0&&([a,s]=[s,a]),a-=Math.abs(20*n),s+=Math.abs(20*n)+1;const l=o.minorPitch||o.majorPitch;let c=0;const u=[];for(let f=Math.ceil(a/l)*l;f<s;f+=l)i&&f%(o.majorPitch*2)?(u.push({type:"minor",base:f-1,index:c}),c+=1):r&&!(f%(o.majorPitch*2))&&(u.push({type:"major",base:f-1,index:c}),c+=1);return u}function Rre(e){return e<999?String(e):`${Rre(~~(e/1e3))},${`00${~~(e%1e3)}`.slice(-3,-3+3)}`}const gYe=j_()({majorTickLabel:{fontSize:"11px"},majorTick:{stroke:"#555"},minorTick:{stroke:"#999"}});function vYe({start:e,end:t,bpPerPx:n,reversed:r,major:i,minor:o}){const{classes:a}=gYe(),s=mYe(e,t,n,i,o);return Be.createElement(Be.Fragment,null,s.map(l=>{const c=(r?t-l.base:l.base-e)/n;return Be.createElement("line",{key:l.base,x1:c,x2:c,y1:11,y2:l.type==="major"?11+6:11+4,strokeWidth:1,stroke:l.type==="major"?"#555":"#999",className:l.type==="major"?a.majorTick:a.minorTick,"data-bp":l.base})}),s.filter(l=>l.type==="major").map(l=>{const c=(r?t-l.base:l.base-e)/n;return Be.createElement("text",{x:c,y:10,key:`label-${l.base}`,textAnchor:"middle",style:{fontSize:"11px"},className:a.majorTickLabel},Rre(l.base+1))}))}const yYe=nr(function({model:e}){const{MSA:t,colWidth:n,msaAreaWidth:r,rulerHeight:i,resizeHandleWidth:o,scrollX:a,blocksX:s,blockSize:l}=e,c=$.useRef(null),u=s[0];return t?Be.createElement("div",{ref:c,style:{position:"relative",width:r,cursor:"crosshair",overflow:"hidden",height:i,background:"#ccc"}},Be.createElement("svg",{style:{width:s.length*l,position:"absolute",left:a+u+o,pointerEvents:"none"}},Be.createElement(vYe,{key:u,start:u/n,end:u/n+l*s.length/n,bpPerPx:1/n}))):null}),bYe=nr(({model:e})=>{const{treeWidth:t}=e;return Be.createElement("div",{style:{width:t}})});var nN={},_Ye=Er;Object.defineProperty(nN,"__esModule",{value:!0});var kre=nN.default=void 0,xYe=_Ye(Do()),wYe=G,SYe=(0,xYe.default)((0,wYe.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"}),"FolderOpen");kre=nN.default=SYe;var rN={},CYe=Er;Object.defineProperty(rN,"__esModule",{value:!0});var Lre=rN.default=void 0,AYe=CYe(Do()),PYe=G,MYe=(0,AYe.default)((0,PYe.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");Lre=rN.default=MYe;var iN={},EYe=Er;Object.defineProperty(iN,"__esModule",{value:!0});var $re=iN.default=void 0,TYe=EYe(Do()),OYe=G,IYe=(0,TYe.default)((0,OYe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"Help");$re=iN.default=IYe;var oN={},RYe=Er;Object.defineProperty(oN,"__esModule",{value:!0});var Dre=oN.default=void 0,kYe=RYe(Do()),LYe=G,$Ye=(0,kYe.default)((0,LYe.jsx)("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),"List");Dre=oN.default=$Ye;var Bre={},Nre=Ce&&Ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bre,"__esModule",{value:!0});const Uw=Nre($),DYe=Nre(z3),BYe=Ta,NYe=Id,xI=co,FYe=(0,NYe.observer)(function({children:t,menuItems:n,...r}){const i=(0,xI.usePopupState)({popupId:"viewMenu",variant:"popover"});return Uw.default.createElement(Uw.default.Fragment,null,Uw.default.createElement(BYe.IconButton,{...(0,xI.bindTrigger)(i),...r,disabled:n.length===0},t),Uw.default.createElement(DYe.default,{...(0,xI.bindPopover)(i),onMenuItemClick:(o,a)=>a(),menuItems:n,popupState:i}))});var jYe=Bre.default=FYe,aN={},zYe=Er;Object.defineProperty(aN,"__esModule",{value:!0});var Fre=aN.default=void 0,UYe=zYe(Do()),VYe=G,HYe=(0,UYe.default)((0,VYe.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");Fre=aN.default=HYe;var sN={},GYe=Er;Object.defineProperty(sN,"__esModule",{value:!0});var jre=sN.default=void 0,WYe=GYe(Do()),y9=G,qYe=(0,WYe.default)([(0,y9.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},"0"),(0,y9.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"},"1")],"ZoomIn");jre=sN.default=qYe;var lN={},XYe=Er;Object.defineProperty(lN,"__esModule",{value:!0});var zre=lN.default=void 0,YYe=XYe(Do()),KYe=G,ZYe=(0,YYe.default)((0,KYe.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}),"ZoomOut");zre=lN.default=ZYe;const JYe=nr(function({model:t}){const{colWidth:n,rowHeight:r}=t;return Be.createElement(Be.Fragment,null,Be.createElement(Eo,{onClick:()=>{t.setColWidth(Math.ceil(n*1.5)),t.setRowHeight(Math.ceil(r*1.5))}},Be.createElement(jre,null)),Be.createElement(Eo,{onClick:()=>{t.setColWidth(Math.max(1,Math.floor(n*.75))),t.setRowHeight(Math.max(1.5,Math.floor(r*.75)))}},Be.createElement(zre,null)),Be.createElement(jYe,{menuItems:[{label:"Decrease row height",onClick:()=>{t.setRowHeight(Math.max(1.5,r*.75))}},{label:"Increase row height",onClick:()=>{t.setRowHeight(r*1.5)}},{label:"Decrease col width",onClick:()=>{t.setColWidth(Math.max(1,n*.75))}},{label:"Increase col width",onClick:()=>{t.setColWidth(n*1.5)}},{label:"Reset zoom to default",onClick:()=>{t.setColWidth(16),t.setRowHeight(20)}}]},Be.createElement(Fre,null)))}),QYe=nr(function({model:e}){const{currentAlignment:t,alignmentNames:n}=e;return n.length>0?Be.createElement(N_,{native:!0,value:t,size:"small",onChange:r=>{e.setCurrentAlignment(+r.target.value),e.setScrollX(0),e.setScrollY(0)}},n.map((r,i)=>Be.createElement("option",{key:`${r}-${i}`,value:i},r))):null}),eKe=$.lazy(()=>Mh(()=>import("./SettingsDlg-0c26f77f.js"),[],import.meta.url)),tKe=$.lazy(()=>Mh(()=>import("./AboutDlg-c197faa0.js"),[],import.meta.url)),nKe=$.lazy(()=>Mh(()=>import("./DetailsDlg-072160e1.js"),["./DetailsDlg-072160e1.js","./index-95699cbd.js","./index-93f78a20.js"],import.meta.url)),rKe=$.lazy(()=>Mh(()=>import("./TracklistDlg-ae1a5609.js"),[],import.meta.url)),iKe=nr(({model:e})=>{const{mouseOverRowName:t,mouseCol:n}=e;return Be.createElement("div",null,Be.createElement(jn,{display:"inline"},"Row name: ",t),Be.createElement("span",{style:{marginLeft:10}}),Be.createElement(jn,{display:"inline"},"Position: ",n))}),oKe=nr(({model:e})=>{const[t,n]=$.useState(!1),[r,i]=$.useState(!1),[o,a]=$.useState(!1),[s,l]=$.useState(!1);return Be.createElement("div",{style:{display:"flex"}},Be.createElement(Eo,{onClick:async()=>{try{e.setData({tree:"",msa:""}),await e.setTreeFilehandle(void 0),await e.setMSAFilehandle(void 0),e.setScrollY(0),e.setScrollX(0),e.setCurrentAlignment(0)}catch(c){console.error(c),e.setError(c)}}},Be.createElement(kre,null)),Be.createElement(Eo,{onClick:()=>n(!0)},Be.createElement(Lre,null)),Be.createElement(Eo,{onClick:()=>a(!0)},Be.createElement(QB,null)),Be.createElement(Eo,{onClick:()=>l(!0)},Be.createElement(Dre,null)),Be.createElement($.Suspense,{fallback:null},t?Be.createElement(eKe,{model:e,onClose:()=>n(!1)}):null,r?Be.createElement(tKe,{onClose:()=>i(!1)}):null,o?Be.createElement(nKe,{model:e,onClose:()=>a(!1)}):null,s?Be.createElement(rKe,{model:e,onClose:()=>l(!1)}):null),Be.createElement(QYe,{model:e}),Be.createElement(JYe,{model:e}),Be.createElement(iKe,{model:e}),Be.createElement(aKe,null),Be.createElement(Eo,{onClick:()=>i(!0)},Be.createElement($re,null)))});function aKe(){return Be.createElement("div",{style:{flex:1}})}const sKe=$.lazy(()=>Mh(()=>import("./TrackInfoDlg-8bd6ccbf.js"),["./TrackInfoDlg-8bd6ccbf.js","./index-93f78a20.js"],import.meta.url)),lKe=j_()({button:{padding:0}}),cKe=nr(function({model:e,track:t}){const[n,r]=$.useState(),[i,o]=$.useState(!1),{rowHeight:a,treeAreaWidth:s}=e,{height:l,model:{name:c}}=t,{classes:u}=lKe(),f=Math.max(8,a-8);return Be.createElement("div",{style:{width:s,height:l,flexShrink:0,textAlign:"right",fontSize:f}},c," ",Be.createElement(Eo,{className:u.button,style:{width:f,height:f},onClick:d=>r(d.currentTarget)},Be.createElement(sre,null)),n?Be.createElement(B_,{anchorEl:n,transitionDuration:0,open:!0,onClose:()=>r(void 0)},Be.createElement(fa,{dense:!0,onClick:()=>{e.toggleTrack(t.model.id),r(void 0)}},"Close"),Be.createElement(fa,{dense:!0,onClick:()=>{o(!0),r(void 0)}},"Get info")):null,i?Be.createElement($.Suspense,{fallback:null},Be.createElement(sKe,{model:t.model,onClose:()=>o(!1)})):null)}),uKe=nr(function({model:e,track:t}){const{resizeHandleWidth:n}=e,{model:{height:r,error:i}}=t,o=$.useRef(null),a=$.useRef(!1),s=$.useRef(0);return $.useEffect(()=>{const l=o.current;if(!l)return;function c(u){const f=eN(u);s.current+=f.pixelX,a.current||(a.current=!0,requestAnimationFrame(()=>{e.doScrollX(-s.current),s.current=0,a.current=!1})),u.preventDefault()}return l.addEventListener("wheel",c),()=>{l.removeEventListener("wheel",c)}},[e]),Be.createElement("div",{key:t.id,style:{display:"flex",height:r}},Be.createElement(cKe,{model:e,track:t}),Be.createElement("div",{style:{width:n,flexShrink:0}}),Be.createElement("div",{ref:o},i?Be.createElement("div",{style:{color:"red",fontSize:10}},`${i}`):Be.createElement(t.ReactComponent,{model:e,track:t})))}),fKe=nr(function({model:e}){const{resizeHandleWidth:t}=e,[n,r]=$.useState(!1),i=$.useRef(!1),o=$.useRef(0);return $.useEffect(()=>{function a(l){l.preventDefault();const c=l.clientX;if(o.current===0)o.current=l.clientX;else{const u=c-o.current;u&&(i.current||(i.current=!0,window.requestAnimationFrame(()=>{e.setTreeAreaWidth(e.treeAreaWidth+u),i.current=!1,o.current=l.clientX})))}}function s(){o.current=0,n&&r(!1)}return n?(document.addEventListener("mousemove",a,!0),document.addEventListener("mouseup",s,!0),()=>{document.removeEventListener("mousemove",a,!0),document.removeEventListener("mouseup",s,!0)}):()=>{}},[n,e]),Be.createElement("div",null,Be.createElement("div",{onMouseDown:()=>r(!0),style:{cursor:"ew-resize",height:"100%",width:t,background:"rgba(200,200,200)",position:"relative"}}))}),dKe=nr(function({model:e}){const{resizeHandleWidth:t}=e,[n,r]=$.useState(!1),i=$.useRef(!1),o=$.useRef(0);return $.useEffect(()=>{function a(l){l.preventDefault();const c=l.clientY;if(o.current===0)o.current=l.clientY;else{const u=c-o.current;u&&(i.current||(i.current=!0,window.requestAnimationFrame(()=>{e.setHeight(e.height+u),i.current=!1,o.current=l.clientY})))}}function s(){o.current=0,n&&r(!1)}return n?(document.addEventListener("mousemove",a,!0),document.addEventListener("mouseup",s,!0),()=>{document.removeEventListener("mousemove",a,!0),document.removeEventListener("mouseup",s,!0)}):()=>{}},[n,e]),Be.createElement("div",null,Be.createElement("div",{onMouseDown:()=>r(!0),style:{cursor:"ns-resize",width:"100%",height:t,background:"rgba(200,200,200)",position:"relative"}}))});var pKe=Zu();const hKe=nr(function({model:e}){const t=$.useRef(null),{height:n,width:r,treeAreaWidth:i,resizeHandleWidth:o,rulerHeight:a,turnedOnTracks:s,scrollX:l,scrollY:c,mouseCol:u,mouseRow:f,rowHeight:d,colWidth:p}=e,h=pKe.sum(s.map(g=>g.model.height));return $.useEffect(()=>{if(!t.current)return;const g=t.current.getContext("2d");if(g){if(g.resetTransform(),g.clearRect(0,0,r,n),g.fillStyle="rgba(0,0,0,0.15)",u!==void 0){const v=(u-1)*p+l+i+o;g.fillRect(v,0,p,n)}if(f!==void 0){const v=f*d+c+a+h;g.fillRect(i+o,v,r,d)}}},[u,p,c,h,f,d,a,l,n,o,i,r]),Be.createElement("canvas",{ref:t,width:r,height:n,style:{position:"absolute",top:0,left:0,width:r,height:n,zIndex:1e3,pointerEvents:"none"}})}),mKe=$.lazy(()=>Mh(()=>import("./AnnotationDlg-853ec1db.js"),[],import.meta.url)),gKe=nr(function({model:e}){const{done:t,initialized:n,treeAreaWidth:r,height:i,turnedOnTracks:o}=e;return Be.createElement("div",null,n?t?Be.createElement("div",null,Be.createElement("div",{style:{height:i,overflow:"hidden"}},Be.createElement(oKe,{model:e}),Be.createElement("div",null,Be.createElement("div",{style:{position:"relative"}},Be.createElement("div",{style:{display:"flex"}},Be.createElement("div",{style:{flexShrink:0,width:r}},Be.createElement(bYe,{model:e})),Be.createElement(mXe,{model:e,ControlComponent:Be.createElement(yYe,{model:e})})),o==null?void 0:o.map(a=>Be.createElement(uKe,{key:a.model.id,model:e,track:a})),Be.createElement("div",{style:{display:"flex"}},Be.createElement("div",{style:{flexShrink:0,width:r}},Be.createElement(BXe,{model:e})),Be.createElement(fKe,{model:e}),Be.createElement(pYe,{model:e}),Be.createElement(hKe,{model:e}))))),Be.createElement(dKe,{model:e})):Be.createElement(jn,{variant:"h4"},"Loading..."):Be.createElement(aXe,{model:e}),e.DialogComponent?Be.createElement($.Suspense,{fallback:null},Be.createElement(e.DialogComponent,{...e.DialogProps||{},onClose:()=>{e.setDialogComponent(void 0,void 0)}})):null,e.annotPos?Be.createElement($.Suspense,{fallback:null},Be.createElement(mKe,{data:e.annotPos,model:e,onClose:()=>e.clearAnnotPos()})):null)});function vKe(e,t){return e.parent===t.parent?1:2}function yKe(e){return e.reduce(bKe,0)/e.length}function bKe(e,t){return e+t.x}function _Ke(e){return 1+e.reduce(xKe,0)}function xKe(e,t){return Math.max(e,t.y)}function wKe(e){for(var t;t=e.children;)e=t[0];return e}function SKe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function CKe(){var e=vKe,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(d){var p=d.children;p?(d.x=yKe(p),d.y=_Ke(p)):(d.x=a?s+=e(d,a):0,d.y=0,a=d)});var l=wKe(o),c=SKe(o),u=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return o.eachAfter(r?function(d){d.x=(d.x-o.x)*t,d.y=(o.y-d.y)*n}:function(d){d.x=(d.x-u)/(f-u)*t,d.y=(1-(o.y?d.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function AKe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function PKe(){return this.eachAfter(AKe)}function MKe(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function EKe(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function TKe(e,t){for(var n=this,r=[n],i=[],o,a,s,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function OKe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function IKe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function RKe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function kKe(e){for(var t=this,n=LKe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function LKe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function $Ke(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function DKe(){return Array.from(this)}function BKe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function NKe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*FKe(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function cN(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=UKe)):t===void 0&&(t=zKe);for(var n=new iA(e),r,i=[n],o,a,s,l;r=i.pop();)if((a=t(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,s=l-1;s>=0;--s)i.push(o=a[s]=new iA(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(HKe)}function jKe(){return cN(this).eachBefore(VKe)}function zKe(e){return e.children}function UKe(e){return Array.isArray(e)?e[1]:null}function VKe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function HKe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function iA(e){this.data=e,this.depth=this.height=0,this.parent=null}iA.prototype=cN.prototype={constructor:iA,count:PKe,each:MKe,eachAfter:TKe,eachBefore:EKe,find:OKe,sum:IKe,sort:RKe,path:kKe,ancestors:$Ke,descendants:DKe,leaves:BKe,links:NKe,copy:jKe,[Symbol.iterator]:FKe};var ES={};const Ure={};var Cv={},Z3={};Z3.byteLength=qKe;Z3.toByteArray=YKe;Z3.fromByteArray=JKe;var fc=[],As=[],GKe=typeof Uint8Array<"u"?Uint8Array:Array,wI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var tm=0,WKe=wI.length;tm<WKe;++tm)fc[tm]=wI[tm],As[wI.charCodeAt(tm)]=tm;As["-".charCodeAt(0)]=62;As["_".charCodeAt(0)]=63;function Vre(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function qKe(e){var t=Vre(e),n=t[0],r=t[1];return(n+r)*3/4-r}function XKe(e,t,n){return(t+n)*3/4-n}function YKe(e){var t,n=Vre(e),r=n[0],i=n[1],o=new GKe(XKe(e,r,i)),a=0,s=i>0?r-4:r,l;for(l=0;l<s;l+=4)t=As[e.charCodeAt(l)]<<18|As[e.charCodeAt(l+1)]<<12|As[e.charCodeAt(l+2)]<<6|As[e.charCodeAt(l+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=t&255;return i===2&&(t=As[e.charCodeAt(l)]<<2|As[e.charCodeAt(l+1)]>>4,o[a++]=t&255),i===1&&(t=As[e.charCodeAt(l)]<<10|As[e.charCodeAt(l+1)]<<4|As[e.charCodeAt(l+2)]>>2,o[a++]=t>>8&255,o[a++]=t&255),o}function KKe(e){return fc[e>>18&63]+fc[e>>12&63]+fc[e>>6&63]+fc[e&63]}function ZKe(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(KKe(r));return i.join("")}function JKe(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(ZKe(e,a,a+o>s?s:a+o));return r===1?(t=e[n-1],i.push(fc[t>>2]+fc[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(fc[t>>10]+fc[t>>4&63]+fc[t<<2&63]+"=")),i.join("")}var uN={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */uN.read=function(e,t,n,r,i){var o,a,s=i*8-r-1,l=(1<<s)-1,c=l>>1,u=-7,f=n?i-1:0,d=n?-1:1,p=e[t+f];for(f+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=o*256+e[t+f],f+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=a*256+e[t+f],f+=d,u-=8);if(o===0)o=1-c;else{if(o===l)return a?NaN:(p?-1:1)*(1/0);a=a+Math.pow(2,r),o=o-c}return(p?-1:1)*a*Math.pow(2,o-r)};uN.write=function(e,t,n,r,i,o){var a,s,l,c=o*8-i-1,u=(1<<c)-1,f=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+f>=1?t+=d/l:t+=d*Math.pow(2,1-f),t*l>=2&&(a++,l/=2),a+f>=u?(s=0,a=u):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a=a+f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=s&255,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=a&255,p+=h,a/=256,c-=8);e[n+p-h]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Z3,n=uN,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=o(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const j=new Uint8Array(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,Uint8Array.prototype),Object.setPrototypeOf(j,M),j.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function a(j){if(j>i)throw new RangeError('The value "'+j+'" is invalid for option "size"');const M=new Uint8Array(j);return Object.setPrototypeOf(M,s.prototype),M}function s(j,M,L){if(typeof j=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(j)}return l(j,M,L)}s.poolSize=8192;function l(j,M,L){if(typeof j=="string")return d(j,M);if(ArrayBuffer.isView(j))return h(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(ve(j,ArrayBuffer)||j&&ve(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ve(j,SharedArrayBuffer)||j&&ve(j.buffer,SharedArrayBuffer)))return g(j,M,L);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const q=j.valueOf&&j.valueOf();if(q!=null&&q!==j)return s.from(q,M,L);const me=v(j);if(me)return me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return s.from(j[Symbol.toPrimitive]("string"),M,L);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}s.from=function(j,M,L){return l(j,M,L)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function c(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function u(j,M,L){return c(j),j<=0?a(j):M!==void 0?typeof L=="string"?a(j).fill(M,L):a(j).fill(M):a(j)}s.alloc=function(j,M,L){return u(j,M,L)};function f(j){return c(j),a(j<0?0:m(j)|0)}s.allocUnsafe=function(j){return f(j)},s.allocUnsafeSlow=function(j){return f(j)};function d(j,M){if((typeof M!="string"||M==="")&&(M="utf8"),!s.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const L=_(j,M)|0;let q=a(L);const me=q.write(j,M);return me!==L&&(q=q.slice(0,me)),q}function p(j){const M=j.length<0?0:m(j.length)|0,L=a(M);for(let q=0;q<M;q+=1)L[q]=j[q]&255;return L}function h(j){if(ve(j,Uint8Array)){const M=new Uint8Array(j);return g(M.buffer,M.byteOffset,M.byteLength)}return p(j)}function g(j,M,L){if(M<0||j.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<M+(L||0))throw new RangeError('"length" is outside of buffer bounds');let q;return M===void 0&&L===void 0?q=new Uint8Array(j):L===void 0?q=new Uint8Array(j,M):q=new Uint8Array(j,M,L),Object.setPrototypeOf(q,s.prototype),q}function v(j){if(s.isBuffer(j)){const M=m(j.length)|0,L=a(M);return L.length===0||j.copy(L,0,0,M),L}if(j.length!==void 0)return typeof j.length!="number"||$e(j.length)?a(0):p(j);if(j.type==="Buffer"&&Array.isArray(j.data))return p(j.data)}function m(j){if(j>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return j|0}function y(j){return+j!=j&&(j=0),s.alloc(+j)}s.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==s.prototype},s.compare=function(M,L){if(ve(M,Uint8Array)&&(M=s.from(M,M.offset,M.byteLength)),ve(L,Uint8Array)&&(L=s.from(L,L.offset,L.byteLength)),!s.isBuffer(M)||!s.isBuffer(L))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===L)return 0;let q=M.length,me=L.length;for(let Te=0,Pe=Math.min(q,me);Te<Pe;++Te)if(M[Te]!==L[Te]){q=M[Te],me=L[Te];break}return q<me?-1:me<q?1:0},s.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(M,L){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return s.alloc(0);let q;if(L===void 0)for(L=0,q=0;q<M.length;++q)L+=M[q].length;const me=s.allocUnsafe(L);let Te=0;for(q=0;q<M.length;++q){let Pe=M[q];if(ve(Pe,Uint8Array))Te+Pe.length>me.length?(s.isBuffer(Pe)||(Pe=s.from(Pe)),Pe.copy(me,Te)):Uint8Array.prototype.set.call(me,Pe,Te);else if(s.isBuffer(Pe))Pe.copy(me,Te);else throw new TypeError('"list" argument must be an Array of Buffers');Te+=Pe.length}return me};function _(j,M){if(s.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||ve(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const L=j.length,q=arguments.length>2&&arguments[2]===!0;if(!q&&L===0)return 0;let me=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return L;case"utf8":case"utf-8":return W(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L*2;case"hex":return L>>>1;case"base64":return ge(j).length;default:if(me)return q?-1:W(j).length;M=(""+M).toLowerCase(),me=!0}}s.byteLength=_;function b(j,M,L){let q=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((L===void 0||L>this.length)&&(L=this.length),L<=0)||(L>>>=0,M>>>=0,L<=M))return"";for(j||(j="utf8");;)switch(j){case"hex":return H(this,M,L);case"utf8":case"utf-8":return R(this,M,L);case"ascii":return z(this,M,L);case"latin1":case"binary":return N(this,M,L);case"base64":return B(this,M,L);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,M,L);default:if(q)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),q=!0}}s.prototype._isBuffer=!0;function x(j,M,L){const q=j[M];j[M]=j[L],j[L]=q}s.prototype.swap16=function(){const M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let L=0;L<M;L+=2)x(this,L,L+1);return this},s.prototype.swap32=function(){const M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let L=0;L<M;L+=4)x(this,L,L+3),x(this,L+1,L+2);return this},s.prototype.swap64=function(){const M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let L=0;L<M;L+=8)x(this,L,L+7),x(this,L+1,L+6),x(this,L+2,L+5),x(this,L+3,L+4);return this},s.prototype.toString=function(){const M=this.length;return M===0?"":arguments.length===0?R(this,0,M):b.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(M){if(!s.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:s.compare(this,M)===0},s.prototype.inspect=function(){let M="";const L=e.INSPECT_MAX_BYTES;return M=this.toString("hex",0,L).replace(/(.{2})/g,"$1 ").trim(),this.length>L&&(M+=" ... "),"<Buffer "+M+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(M,L,q,me,Te){if(ve(M,Uint8Array)&&(M=s.from(M,M.offset,M.byteLength)),!s.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(L===void 0&&(L=0),q===void 0&&(q=M?M.length:0),me===void 0&&(me=0),Te===void 0&&(Te=this.length),L<0||q>M.length||me<0||Te>this.length)throw new RangeError("out of range index");if(me>=Te&&L>=q)return 0;if(me>=Te)return-1;if(L>=q)return 1;if(L>>>=0,q>>>=0,me>>>=0,Te>>>=0,this===M)return 0;let Pe=Te-me,Xe=q-L;const He=Math.min(Pe,Xe),Ve=this.slice(me,Te),Je=M.slice(L,q);for(let Ye=0;Ye<He;++Ye)if(Ve[Ye]!==Je[Ye]){Pe=Ve[Ye],Xe=Je[Ye];break}return Pe<Xe?-1:Xe<Pe?1:0};function w(j,M,L,q,me){if(j.length===0)return-1;if(typeof L=="string"?(q=L,L=0):L>2147483647?L=2147483647:L<-2147483648&&(L=-2147483648),L=+L,$e(L)&&(L=me?0:j.length-1),L<0&&(L=j.length+L),L>=j.length){if(me)return-1;L=j.length-1}else if(L<0)if(me)L=0;else return-1;if(typeof M=="string"&&(M=s.from(M,q)),s.isBuffer(M))return M.length===0?-1:S(j,M,L,q,me);if(typeof M=="number")return M=M&255,typeof Uint8Array.prototype.indexOf=="function"?me?Uint8Array.prototype.indexOf.call(j,M,L):Uint8Array.prototype.lastIndexOf.call(j,M,L):S(j,[M],L,q,me);throw new TypeError("val must be string, number or Buffer")}function S(j,M,L,q,me){let Te=1,Pe=j.length,Xe=M.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(j.length<2||M.length<2)return-1;Te=2,Pe/=2,Xe/=2,L/=2}function He(Je,Ye){return Te===1?Je[Ye]:Je.readUInt16BE(Ye*Te)}let Ve;if(me){let Je=-1;for(Ve=L;Ve<Pe;Ve++)if(He(j,Ve)===He(M,Je===-1?0:Ve-Je)){if(Je===-1&&(Je=Ve),Ve-Je+1===Xe)return Je*Te}else Je!==-1&&(Ve-=Ve-Je),Je=-1}else for(L+Xe>Pe&&(L=Pe-Xe),Ve=L;Ve>=0;Ve--){let Je=!0;for(let Ye=0;Ye<Xe;Ye++)if(He(j,Ve+Ye)!==He(M,Ye)){Je=!1;break}if(Je)return Ve}return-1}s.prototype.includes=function(M,L,q){return this.indexOf(M,L,q)!==-1},s.prototype.indexOf=function(M,L,q){return w(this,M,L,q,!0)},s.prototype.lastIndexOf=function(M,L,q){return w(this,M,L,q,!1)};function A(j,M,L,q){L=Number(L)||0;const me=j.length-L;q?(q=Number(q),q>me&&(q=me)):q=me;const Te=M.length;q>Te/2&&(q=Te/2);let Pe;for(Pe=0;Pe<q;++Pe){const Xe=parseInt(M.substr(Pe*2,2),16);if($e(Xe))return Pe;j[L+Pe]=Xe}return Pe}function C(j,M,L,q){return pe(W(M,j.length-L),j,L,q)}function k(j,M,L,q){return pe(ee(M),j,L,q)}function O(j,M,L,q){return pe(ge(M),j,L,q)}function T(j,M,L,q){return pe(Ee(M,j.length-L),j,L,q)}s.prototype.write=function(M,L,q,me){if(L===void 0)me="utf8",q=this.length,L=0;else if(q===void 0&&typeof L=="string")me=L,q=this.length,L=0;else if(isFinite(L))L=L>>>0,isFinite(q)?(q=q>>>0,me===void 0&&(me="utf8")):(me=q,q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Te=this.length-L;if((q===void 0||q>Te)&&(q=Te),M.length>0&&(q<0||L<0)||L>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");let Pe=!1;for(;;)switch(me){case"hex":return A(this,M,L,q);case"utf8":case"utf-8":return C(this,M,L,q);case"ascii":case"latin1":case"binary":return k(this,M,L,q);case"base64":return O(this,M,L,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,M,L,q);default:if(Pe)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),Pe=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(j,M,L){return M===0&&L===j.length?t.fromByteArray(j):t.fromByteArray(j.slice(M,L))}function R(j,M,L){L=Math.min(j.length,L);const q=[];let me=M;for(;me<L;){const Te=j[me];let Pe=null,Xe=Te>239?4:Te>223?3:Te>191?2:1;if(me+Xe<=L){let He,Ve,Je,Ye;switch(Xe){case 1:Te<128&&(Pe=Te);break;case 2:He=j[me+1],(He&192)===128&&(Ye=(Te&31)<<6|He&63,Ye>127&&(Pe=Ye));break;case 3:He=j[me+1],Ve=j[me+2],(He&192)===128&&(Ve&192)===128&&(Ye=(Te&15)<<12|(He&63)<<6|Ve&63,Ye>2047&&(Ye<55296||Ye>57343)&&(Pe=Ye));break;case 4:He=j[me+1],Ve=j[me+2],Je=j[me+3],(He&192)===128&&(Ve&192)===128&&(Je&192)===128&&(Ye=(Te&15)<<18|(He&63)<<12|(Ve&63)<<6|Je&63,Ye>65535&&Ye<1114112&&(Pe=Ye))}}Pe===null?(Pe=65533,Xe=1):Pe>65535&&(Pe-=65536,q.push(Pe>>>10&1023|55296),Pe=56320|Pe&1023),q.push(Pe),me+=Xe}return D(q)}const P=4096;function D(j){const M=j.length;if(M<=P)return String.fromCharCode.apply(String,j);let L="",q=0;for(;q<M;)L+=String.fromCharCode.apply(String,j.slice(q,q+=P));return L}function z(j,M,L){let q="";L=Math.min(j.length,L);for(let me=M;me<L;++me)q+=String.fromCharCode(j[me]&127);return q}function N(j,M,L){let q="";L=Math.min(j.length,L);for(let me=M;me<L;++me)q+=String.fromCharCode(j[me]);return q}function H(j,M,L){const q=j.length;(!M||M<0)&&(M=0),(!L||L<0||L>q)&&(L=q);let me="";for(let Te=M;Te<L;++Te)me+=Ne[j[Te]];return me}function J(j,M,L){const q=j.slice(M,L);let me="";for(let Te=0;Te<q.length-1;Te+=2)me+=String.fromCharCode(q[Te]+q[Te+1]*256);return me}s.prototype.slice=function(M,L){const q=this.length;M=~~M,L=L===void 0?q:~~L,M<0?(M+=q,M<0&&(M=0)):M>q&&(M=q),L<0?(L+=q,L<0&&(L=0)):L>q&&(L=q),L<M&&(L=M);const me=this.subarray(M,L);return Object.setPrototypeOf(me,s.prototype),me};function ne(j,M,L){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+M>L)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(M,L,q){M=M>>>0,L=L>>>0,q||ne(M,L,this.length);let me=this[M],Te=1,Pe=0;for(;++Pe<L&&(Te*=256);)me+=this[M+Pe]*Te;return me},s.prototype.readUintBE=s.prototype.readUIntBE=function(M,L,q){M=M>>>0,L=L>>>0,q||ne(M,L,this.length);let me=this[M+--L],Te=1;for(;L>0&&(Te*=256);)me+=this[M+--L]*Te;return me},s.prototype.readUint8=s.prototype.readUInt8=function(M,L){return M=M>>>0,L||ne(M,1,this.length),this[M]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(M,L){return M=M>>>0,L||ne(M,2,this.length),this[M]|this[M+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(M,L){return M=M>>>0,L||ne(M,2,this.length),this[M]<<8|this[M+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(M,L){return M=M>>>0,L||ne(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(M,L){return M=M>>>0,L||ne(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},s.prototype.readBigUInt64LE=Ae(function(M){M=M>>>0,de(M,"offset");const L=this[M],q=this[M+7];(L===void 0||q===void 0)&&_e(M,this.length-8);const me=L+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24,Te=this[++M]+this[++M]*2**8+this[++M]*2**16+q*2**24;return BigInt(me)+(BigInt(Te)<<BigInt(32))}),s.prototype.readBigUInt64BE=Ae(function(M){M=M>>>0,de(M,"offset");const L=this[M],q=this[M+7];(L===void 0||q===void 0)&&_e(M,this.length-8);const me=L*2**24+this[++M]*2**16+this[++M]*2**8+this[++M],Te=this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+q;return(BigInt(me)<<BigInt(32))+BigInt(Te)}),s.prototype.readIntLE=function(M,L,q){M=M>>>0,L=L>>>0,q||ne(M,L,this.length);let me=this[M],Te=1,Pe=0;for(;++Pe<L&&(Te*=256);)me+=this[M+Pe]*Te;return Te*=128,me>=Te&&(me-=Math.pow(2,8*L)),me},s.prototype.readIntBE=function(M,L,q){M=M>>>0,L=L>>>0,q||ne(M,L,this.length);let me=L,Te=1,Pe=this[M+--me];for(;me>0&&(Te*=256);)Pe+=this[M+--me]*Te;return Te*=128,Pe>=Te&&(Pe-=Math.pow(2,8*L)),Pe},s.prototype.readInt8=function(M,L){return M=M>>>0,L||ne(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},s.prototype.readInt16LE=function(M,L){M=M>>>0,L||ne(M,2,this.length);const q=this[M]|this[M+1]<<8;return q&32768?q|4294901760:q},s.prototype.readInt16BE=function(M,L){M=M>>>0,L||ne(M,2,this.length);const q=this[M+1]|this[M]<<8;return q&32768?q|4294901760:q},s.prototype.readInt32LE=function(M,L){return M=M>>>0,L||ne(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},s.prototype.readInt32BE=function(M,L){return M=M>>>0,L||ne(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},s.prototype.readBigInt64LE=Ae(function(M){M=M>>>0,de(M,"offset");const L=this[M],q=this[M+7];(L===void 0||q===void 0)&&_e(M,this.length-8);const me=this[M+4]+this[M+5]*2**8+this[M+6]*2**16+(q<<24);return(BigInt(me)<<BigInt(32))+BigInt(L+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24)}),s.prototype.readBigInt64BE=Ae(function(M){M=M>>>0,de(M,"offset");const L=this[M],q=this[M+7];(L===void 0||q===void 0)&&_e(M,this.length-8);const me=(L<<24)+this[++M]*2**16+this[++M]*2**8+this[++M];return(BigInt(me)<<BigInt(32))+BigInt(this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+q)}),s.prototype.readFloatLE=function(M,L){return M=M>>>0,L||ne(M,4,this.length),n.read(this,M,!0,23,4)},s.prototype.readFloatBE=function(M,L){return M=M>>>0,L||ne(M,4,this.length),n.read(this,M,!1,23,4)},s.prototype.readDoubleLE=function(M,L){return M=M>>>0,L||ne(M,8,this.length),n.read(this,M,!0,52,8)},s.prototype.readDoubleBE=function(M,L){return M=M>>>0,L||ne(M,8,this.length),n.read(this,M,!1,52,8)};function oe(j,M,L,q,me,Te){if(!s.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>me||M<Te)throw new RangeError('"value" argument is out of bounds');if(L+q>j.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(M,L,q,me){if(M=+M,L=L>>>0,q=q>>>0,!me){const Xe=Math.pow(2,8*q)-1;oe(this,M,L,q,Xe,0)}let Te=1,Pe=0;for(this[L]=M&255;++Pe<q&&(Te*=256);)this[L+Pe]=M/Te&255;return L+q},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(M,L,q,me){if(M=+M,L=L>>>0,q=q>>>0,!me){const Xe=Math.pow(2,8*q)-1;oe(this,M,L,q,Xe,0)}let Te=q-1,Pe=1;for(this[L+Te]=M&255;--Te>=0&&(Pe*=256);)this[L+Te]=M/Pe&255;return L+q},s.prototype.writeUint8=s.prototype.writeUInt8=function(M,L,q){return M=+M,L=L>>>0,q||oe(this,M,L,1,255,0),this[L]=M&255,L+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(M,L,q){return M=+M,L=L>>>0,q||oe(this,M,L,2,65535,0),this[L]=M&255,this[L+1]=M>>>8,L+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(M,L,q){return M=+M,L=L>>>0,q||oe(this,M,L,2,65535,0),this[L]=M>>>8,this[L+1]=M&255,L+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(M,L,q){return M=+M,L=L>>>0,q||oe(this,M,L,4,4294967295,0),this[L+3]=M>>>24,this[L+2]=M>>>16,this[L+1]=M>>>8,this[L]=M&255,L+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(M,L,q){return M=+M,L=L>>>0,q||oe(this,M,L,4,4294967295,0),this[L]=M>>>24,this[L+1]=M>>>16,this[L+2]=M>>>8,this[L+3]=M&255,L+4};function Z(j,M,L,q,me){le(M,q,me,j,L,7);let Te=Number(M&BigInt(4294967295));j[L++]=Te,Te=Te>>8,j[L++]=Te,Te=Te>>8,j[L++]=Te,Te=Te>>8,j[L++]=Te;let Pe=Number(M>>BigInt(32)&BigInt(4294967295));return j[L++]=Pe,Pe=Pe>>8,j[L++]=Pe,Pe=Pe>>8,j[L++]=Pe,Pe=Pe>>8,j[L++]=Pe,L}function ce(j,M,L,q,me){le(M,q,me,j,L,7);let Te=Number(M&BigInt(4294967295));j[L+7]=Te,Te=Te>>8,j[L+6]=Te,Te=Te>>8,j[L+5]=Te,Te=Te>>8,j[L+4]=Te;let Pe=Number(M>>BigInt(32)&BigInt(4294967295));return j[L+3]=Pe,Pe=Pe>>8,j[L+2]=Pe,Pe=Pe>>8,j[L+1]=Pe,Pe=Pe>>8,j[L]=Pe,L+8}s.prototype.writeBigUInt64LE=Ae(function(M,L=0){return Z(this,M,L,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=Ae(function(M,L=0){return ce(this,M,L,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(M,L,q,me){if(M=+M,L=L>>>0,!me){const He=Math.pow(2,8*q-1);oe(this,M,L,q,He-1,-He)}let Te=0,Pe=1,Xe=0;for(this[L]=M&255;++Te<q&&(Pe*=256);)M<0&&Xe===0&&this[L+Te-1]!==0&&(Xe=1),this[L+Te]=(M/Pe>>0)-Xe&255;return L+q},s.prototype.writeIntBE=function(M,L,q,me){if(M=+M,L=L>>>0,!me){const He=Math.pow(2,8*q-1);oe(this,M,L,q,He-1,-He)}let Te=q-1,Pe=1,Xe=0;for(this[L+Te]=M&255;--Te>=0&&(Pe*=256);)M<0&&Xe===0&&this[L+Te+1]!==0&&(Xe=1),this[L+Te]=(M/Pe>>0)-Xe&255;return L+q},s.prototype.writeInt8=function(M,L,q){return M=+M,L=L>>>0,q||oe(this,M,L,1,127,-128),M<0&&(M=255+M+1),this[L]=M&255,L+1},s.prototype.writeInt16LE=function(M,L,q){return M=+M,L=L>>>0,q||oe(this,M,L,2,32767,-32768),this[L]=M&255,this[L+1]=M>>>8,L+2},s.prototype.writeInt16BE=function(M,L,q){return M=+M,L=L>>>0,q||oe(this,M,L,2,32767,-32768),this[L]=M>>>8,this[L+1]=M&255,L+2},s.prototype.writeInt32LE=function(M,L,q){return M=+M,L=L>>>0,q||oe(this,M,L,4,2147483647,-2147483648),this[L]=M&255,this[L+1]=M>>>8,this[L+2]=M>>>16,this[L+3]=M>>>24,L+4},s.prototype.writeInt32BE=function(M,L,q){return M=+M,L=L>>>0,q||oe(this,M,L,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[L]=M>>>24,this[L+1]=M>>>16,this[L+2]=M>>>8,this[L+3]=M&255,L+4},s.prototype.writeBigInt64LE=Ae(function(M,L=0){return Z(this,M,L,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=Ae(function(M,L=0){return ce(this,M,L,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(j,M,L,q,me,Te){if(L+q>j.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("Index out of range")}function Y(j,M,L,q,me){return M=+M,L=L>>>0,me||se(j,M,L,4),n.write(j,M,L,q,23,4),L+4}s.prototype.writeFloatLE=function(M,L,q){return Y(this,M,L,!0,q)},s.prototype.writeFloatBE=function(M,L,q){return Y(this,M,L,!1,q)};function he(j,M,L,q,me){return M=+M,L=L>>>0,me||se(j,M,L,8),n.write(j,M,L,q,52,8),L+8}s.prototype.writeDoubleLE=function(M,L,q){return he(this,M,L,!0,q)},s.prototype.writeDoubleBE=function(M,L,q){return he(this,M,L,!1,q)},s.prototype.copy=function(M,L,q,me){if(!s.isBuffer(M))throw new TypeError("argument should be a Buffer");if(q||(q=0),!me&&me!==0&&(me=this.length),L>=M.length&&(L=M.length),L||(L=0),me>0&&me<q&&(me=q),me===q||M.length===0||this.length===0)return 0;if(L<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),M.length-L<me-q&&(me=M.length-L+q);const Te=me-q;return this===M&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(L,q,me):Uint8Array.prototype.set.call(M,this.subarray(q,me),L),Te},s.prototype.fill=function(M,L,q,me){if(typeof M=="string"){if(typeof L=="string"?(me=L,L=0,q=this.length):typeof q=="string"&&(me=q,q=this.length),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!s.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(M.length===1){const Pe=M.charCodeAt(0);(me==="utf8"&&Pe<128||me==="latin1")&&(M=Pe)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(L<0||this.length<L||this.length<q)throw new RangeError("Out of range index");if(q<=L)return this;L=L>>>0,q=q===void 0?this.length:q>>>0,M||(M=0);let Te;if(typeof M=="number")for(Te=L;Te<q;++Te)this[Te]=M;else{const Pe=s.isBuffer(M)?M:s.from(M,me),Xe=Pe.length;if(Xe===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(Te=0;Te<q-L;++Te)this[Te+L]=Pe[Te%Xe]}return this};const ae={};function ye(j,M,L){ae[j]=class extends L{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(me){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:me,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(j,M){return`The "${j}" argument must be of type number. Received type ${typeof M}`},TypeError),ye("ERR_OUT_OF_RANGE",function(j,M,L){let q=`The value of "${j}" is out of range.`,me=L;return Number.isInteger(L)&&Math.abs(L)>2**32?me=re(String(L)):typeof L=="bigint"&&(me=String(L),(L>BigInt(2)**BigInt(32)||L<-(BigInt(2)**BigInt(32)))&&(me=re(me)),me+="n"),q+=` It must be ${M}. Received ${me}`,q},RangeError);function re(j){let M="",L=j.length;const q=j[0]==="-"?1:0;for(;L>=q+4;L-=3)M=`_${j.slice(L-3,L)}${M}`;return`${j.slice(0,L)}${M}`}function te(j,M,L){de(M,"offset"),(j[M]===void 0||j[M+L]===void 0)&&_e(M,j.length-(L+1))}function le(j,M,L,q,me,Te){if(j>L||j<M){const Pe=typeof M=="bigint"?"n":"";let Xe;throw Te>3?M===0||M===BigInt(0)?Xe=`>= 0${Pe} and < 2${Pe} ** ${(Te+1)*8}${Pe}`:Xe=`>= -(2${Pe} ** ${(Te+1)*8-1}${Pe}) and < 2 ** ${(Te+1)*8-1}${Pe}`:Xe=`>= ${M}${Pe} and <= ${L}${Pe}`,new ae.ERR_OUT_OF_RANGE("value",Xe,j)}te(q,me,Te)}function de(j,M){if(typeof j!="number")throw new ae.ERR_INVALID_ARG_TYPE(M,"number",j)}function _e(j,M,L){throw Math.floor(j)!==j?(de(j,L),new ae.ERR_OUT_OF_RANGE(L||"offset","an integer",j)):M<0?new ae.ERR_BUFFER_OUT_OF_BOUNDS:new ae.ERR_OUT_OF_RANGE(L||"offset",`>= ${L?1:0} and <= ${M}`,j)}const be=/[^+/0-9A-Za-z-_]/g;function ke(j){if(j=j.split("=")[0],j=j.trim().replace(be,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function W(j,M){M=M||1/0;let L;const q=j.length;let me=null;const Te=[];for(let Pe=0;Pe<q;++Pe){if(L=j.charCodeAt(Pe),L>55295&&L<57344){if(!me){if(L>56319){(M-=3)>-1&&Te.push(239,191,189);continue}else if(Pe+1===q){(M-=3)>-1&&Te.push(239,191,189);continue}me=L;continue}if(L<56320){(M-=3)>-1&&Te.push(239,191,189),me=L;continue}L=(me-55296<<10|L-56320)+65536}else me&&(M-=3)>-1&&Te.push(239,191,189);if(me=null,L<128){if((M-=1)<0)break;Te.push(L)}else if(L<2048){if((M-=2)<0)break;Te.push(L>>6|192,L&63|128)}else if(L<65536){if((M-=3)<0)break;Te.push(L>>12|224,L>>6&63|128,L&63|128)}else if(L<1114112){if((M-=4)<0)break;Te.push(L>>18|240,L>>12&63|128,L>>6&63|128,L&63|128)}else throw new Error("Invalid code point")}return Te}function ee(j){const M=[];for(let L=0;L<j.length;++L)M.push(j.charCodeAt(L)&255);return M}function Ee(j,M){let L,q,me;const Te=[];for(let Pe=0;Pe<j.length&&!((M-=2)<0);++Pe)L=j.charCodeAt(Pe),q=L>>8,me=L%256,Te.push(me),Te.push(q);return Te}function ge(j){return t.toByteArray(ke(j))}function pe(j,M,L,q){let me;for(me=0;me<q&&!(me+L>=M.length||me>=j.length);++me)M[me+L]=j[me];return me}function ve(j,M){return j instanceof M||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===M.name}function $e(j){return j!==j}const Ne=function(){const j="0123456789abcdef",M=new Array(256);for(let L=0;L<16;++L){const q=L*16;for(let me=0;me<16;++me)M[q+me]=j[L]+j[me]}return M}();function Ae(j){return typeof BigInt>"u"?Oe:j}function Oe(){throw new Error("BigInt not supported")}})(Cv);class Hre{async getBufferFromResponse(t){if(typeof t.buffer=="function")return t.buffer();if(typeof t.arrayBuffer=="function"){const n=await t.arrayBuffer();return Cv.Buffer.from(n)}else throw new TypeError("invalid HTTP response object, has no buffer method, and no arrayBuffer method")}constructor(t,n={}){this.baseOverrides={},this.url=t;const r=n.fetch||globalThis.fetch.bind(globalThis);if(!r)throw new TypeError("no fetch function supplied, and none found in global environment");n.overrides&&(this.baseOverrides=n.overrides),this.fetchImplementation=r}async fetch(t,n){let r;try{r=await this.fetchImplementation(t,n)}catch(i){if(`${i}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${t} to attempt to work around chrome CORS header caching bug`),r=await this.fetchImplementation(t,{...n,cache:"reload"});else throw i}return r}async read(t,n=0,r,i=0,o={}){const{headers:a={},signal:s,overrides:l={}}=o;r<1/0?a.range=`bytes=${i}-${i+r}`:r===1/0&&i!==0&&(a.range=`bytes=${i}-`);const c={...this.baseOverrides,...l,headers:{...a,...l.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:s},u=await this.fetch(this.url,c);if(!u.ok)throw new Error(`HTTP ${u.status} ${u.statusText} ${this.url}`);if(u.status===200&&i===0||u.status===206){const f=await this.getBufferFromResponse(u),d=f.copy(t,n,0,Math.min(r,f.length)),p=u.headers.get("content-range"),h=/\/(\d+)$/.exec(p||"");return h&&h[1]&&(this._stat={size:parseInt(h[1],10)}),{bytesRead:d,buffer:t}}throw u.status===200?new Error("${this.url} fetch returned status 200, expected 206"):new Error(`HTTP ${u.status} fetching ${this.url}`)}async readFile(t={}){let n,r;typeof t=="string"?(n=t,r={}):(n=t.encoding,r=t,delete r.encoding);const{headers:i={},signal:o,overrides:a={}}=r,s={headers:i,method:"GET",redirect:"follow",mode:"cors",signal:o,...this.baseOverrides,...a},l=await this.fetch(this.url,s);if(!l)throw new Error("generic-filehandle failed to fetch");if(l.status!==200)throw Object.assign(new Error(`HTTP ${l.status} fetching ${this.url}`),{status:l.status});if(n==="utf8")return l.text();if(n)throw new Error(`unsupported encoding: ${n}`);return this.getBufferFromResponse(l)}async stat(){if(!this._stat){const t=Cv.Buffer.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}}function b9(e){const t=new FileReader;return new Promise((n,r)=>{t.onerror=()=>{t.abort(),r(new Error("problem reading blob"))},t.onabort=()=>{r(new Error("blob reading was aborted"))},t.onload=()=>{t.result&&typeof t.result!="string"?n(t.result):r(new Error("unknown error reading blob"))},t.readAsArrayBuffer(e)})}function QKe(e){const t=new FileReader;return new Promise((n,r)=>{t.onerror=()=>{t.abort(),r(new Error("problem reading blob"))},t.onabort=()=>{r(new Error("blob reading was aborted"))},t.onload=()=>{t.result&&typeof t.result=="string"?n(t.result):r(new Error("unknown error reading blob"))},t.readAsText(e)})}class eZe{constructor(t){this.blob=t,this.size=t.size}async read(t,n=0,r,i=0){if(!r)return{bytesRead:0,buffer:t};const o=i,a=o+r,s=await b9(this.blob.slice(o,a)),l=Cv.Buffer.from(s);return{bytesRead:l.copy(t,n),buffer:l}}async readFile(t){let n;if(typeof t=="string"?n=t:n=t&&t.encoding,n==="utf8")return QKe(this.blob);if(n)throw new Error(`unsupported encoding: ${n}`);const r=await b9(this.blob);return Cv.Buffer.from(r)}async stat(){return{size:this.size}}async close(){}}function Gre(e,t={}){return new Hre(e,t)}function tZe(e,t,n,r={}){if(n!==void 0)return n;if(e!==void 0)return Gre(e,r);if(t!==void 0)return new Ure(t,r);throw new Error("no url, path, or filehandle provided, cannot open")}const nZe=Object.freeze(Object.defineProperty({__proto__:null,BlobFile:eZe,LocalFile:Ure,RemoteFile:Hre,fromUrl:Gre,open:tZe},Symbol.toStringTag,{value:"Module"})),Wre=os(nZe);var oh={};class rZe{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,n){this.cache.set(t,n),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){const n=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,n),n}}set(t,n){return this.cache.has(t)?this.cache.set(t,n):this._set(t,n),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){const n=this.cache.delete(t);return n&&this._size--,this.oldCache.delete(t)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache)yield t;for(const t of this.oldCache){const[n]=t;this.cache.has(n)||(yield t)}}get size(){let t=0;for(const n of this.oldCache.keys())this.cache.has(n)||t++;return this._size+t}}var iZe=rZe;const _9=xh(iZe);function oZe(e){if(typeof e!="string")return{};const t={};return e.toLowerCase().replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,i,o,a)=>{const s=o||a;return t[i]=s?s.toLowerCase():!0,""})?{}:(Object.keys(t).forEach(r=>{if(/^[\d]+$/.test(t[r]))try{const i=parseInt(t[r],10);Number.isNaN(i)||(t[r]=i)}catch{}}),t)}class aZe{constructor({minimumTTL:t}){this.minimumTTL=t}calculateChunkExpirationDate(t){const{headers:n={},requestDate:r,responseDate:i}=t;let o=i||r;if(!o){if(!n.date)return;o=new Date(n.date)}const a=l=>new Date(o.getTime()+l);if(/\bno-cache\b/.test(n.pragma))return a(this.minimumTTL);const s=oZe(n["cache-control"]);if(s["no-cache"]||s["no-store"]||s["must-revalidate"])return a(this.minimumTTL);if(s["max-age"]!==void 0){const l=s["max-age"]*1e3;return a(Math.max(l,this.minimumTTL))}else{if(this._coerceToDate(n.expires))return this._coerceToDate(n.expires);if(this._coerceToDate(n["last-modified"])){const l=this._coerceToDate(n["last-modified"]),c=(o.getTime()-l.getTime())/10;return a(c)}}}_coerceToDate(t){if(t){if(t instanceof Date)return t;if(typeof t=="string"||typeof t=="number")return new Date(t)}}cachedChunkIsValid(t){const n=this.calculateChunkExpirationDate(t);return!n||new Date<=n}chunkIsCacheable(){return!0}}var J3={};Object.defineProperty(J3,"__esModule",{value:!0});function fN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dN(e,t,n){return t&&x9(e.prototype,t),n&&x9(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sZe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mL(e,t)}function Av(e){return Av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Av(e)}function mL(e,t){return mL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mL(e,t)}function lZe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cZe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uy(e)}function uZe(e){var t=lZe();return function(){var r=Av(e),i;if(t){var o=Av(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return cZe(this,i)}}function fZe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Av(e),e!==null););return e}function TS(){return typeof Reflect<"u"&&Reflect.get?TS=Reflect.get.bind():TS=function(t,n,r){var i=fZe(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(arguments.length<3?t:r):o.value}},TS.apply(this,arguments)}var w9=function(){function e(){fN(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return dN(e,[{key:"addEventListener",value:function(n,r,i){n in this.listeners||(this.listeners[n]=[]),this.listeners[n].push({callback:r,options:i})}},{key:"removeEventListener",value:function(n,r){if(n in this.listeners){for(var i=this.listeners[n],o=0,a=i.length;o<a;o++)if(i[o].callback===r){i.splice(o,1);return}}}},{key:"dispatchEvent",value:function(n){if(n.type in this.listeners){for(var r=this.listeners[n.type],i=r.slice(),o=0,a=i.length;o<a;o++){var s=i[o];try{s.callback.call(this,n)}catch(l){Promise.resolve().then(function(){throw l})}s.options&&s.options.once&&this.removeEventListener(n.type,s.callback)}return!n.defaultPrevented}}}]),e}(),pN=function(e){sZe(n,e);var t=uZe(n);function n(){var r;return fN(this,n),r=t.call(this),r.listeners||w9.call(Uy(r)),Object.defineProperty(Uy(r),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(Uy(r),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(Uy(r),"reason",{value:void 0,writable:!0,configurable:!0}),r}return dN(n,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(i){i.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,i)),TS(Av(n.prototype),"dispatchEvent",this).call(this,i)}}]),n}(w9),qre=function(){function e(){fN(this,e),Object.defineProperty(this,"signal",{value:new pN,writable:!0,configurable:!0})}return dN(e,[{key:"abort",value:function(n){var r;try{r=new Event("abort")}catch{typeof document<"u"?document.createEvent?(r=document.createEvent("Event"),r.initEvent("abort",!1,!1)):(r=document.createEventObject(),r.type="abort"):r={type:"abort",bubbles:!1,cancelable:!1}}var i=n;if(i===void 0)if(typeof document>"u")i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch{i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(r)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();typeof Symbol<"u"&&Symbol.toStringTag&&(qre.prototype[Symbol.toStringTag]="AbortController",pN.prototype[Symbol.toStringTag]="AbortSignal");function dZe(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function pZe(e){typeof e=="function"&&(e={fetch:e});var t=e,n=t.fetch,r=t.Request,i=r===void 0?n.Request:r,o=t.AbortController,a=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=a===void 0?!1:a;if(!dZe({fetch:n,Request:i,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:n,Request:l};var l=i;(l&&!l.prototype.hasOwnProperty("signal")||s)&&(l=function(d,p){var h;p&&p.signal&&(h=p.signal,delete p.signal);var g=new i(d,p);return h&&Object.defineProperty(g,"signal",{writable:!1,enumerable:!1,configurable:!0,value:h}),g},l.prototype=i.prototype);var c=n,u=function(d,p){var h=l&&l.prototype.isPrototypeOf(d)?d.signal:p?p.signal:void 0;if(h){var g;try{g=new DOMException("Aborted","AbortError")}catch{g=new Error("Aborted"),g.name="AbortError"}if(h.aborted)return Promise.reject(g);var v=new Promise(function(m,y){h.addEventListener("abort",function(){return y(g)},{once:!0})});return p&&p.signal&&delete p.signal,Promise.race([v,c(d,p)])}return c(d,p)};return{fetch:u,Request:l}}var hZe=J3.AbortController=qre,mZe=J3.AbortSignal=pN;J3.abortableFetch=pZe;var oA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")};let gZe=typeof oA().AbortController>"u"?hZe:oA().AbortController;typeof oA().AbortController>"u"||oA().AbortSignal;class vZe{constructor({frequency:t=100,fetch:n,maxExtraSize:r=32e3,maxFetchSize:i=1e6}){this.requestQueues={},this.fetchCallback=n,this.frequency=t,this.maxExtraSize=r,this.maxFetchSize=i}_canAggregate(t,n){return n.start<=t.end+this.maxExtraSize&&n.end-n.start+t.end-t.start<this.maxFetchSize}_allSignalsFired(t){return new Promise(n=>{let r=t.filter(i=>!i.aborted).length;t.forEach(i=>{i.addEventListener("abort",()=>{r-=1,r||n()})})}).catch(n=>{console.error(n)})}_dispatch({url:t,start:n,end:r,requests:i}){const o=new gZe,a=[];i.forEach(({requestOptions:s})=>{s&&s.signal&&a.push(s.signal)}),a.length===i.length&&this._allSignalsFired(a).then(()=>o.abort()),this.fetchCallback(t,n,r-1,{signal:o.signal}).then(s=>{const l=s.buffer;i.forEach(({start:c,end:u,resolve:f})=>{f({headers:s.headers,buffer:l.slice(c-n,u-n)})})},s=>{i.forEach(({reject:l})=>l(s))})}_aggregateAndDispatch(){Object.entries(this.requestQueues).forEach(([t,n])=>{if(!n||!n.length)return;const r=[];if(n.forEach(o=>{var a;const{requestOptions:s,reject:l}=o;!((a=s==null?void 0:s.signal)===null||a===void 0)&&a.aborted?l(Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})):r.push(o)}),r.sort((o,a)=>o.start-a.start),n.length=0,!r.length)return;let i;for(let o=0;o<r.length;o+=1){const a=r[o];i&&this._canAggregate(i,a)?(i.requests.push(a),i.end=a.end):(i&&this._dispatch(i),i={requests:[a],url:t,start:a.start,end:a.end})}i&&this._dispatch(i)})}_enQueue(t,n){this.requestQueues[t]||(this.requestQueues[t]=[]),this.requestQueues[t].push(n)}fetch(t,n,r,i={}){return new Promise((o,a)=>{this._enQueue(t,{start:n,end:r,resolve:o,reject:a,requestOptions:i}),this.timeout||(this.timeout=setTimeout(()=>{this.timeout=void 0,this._aggregateAndDispatch()},this.frequency||1))})}}async function yZe(e,t,n,r={}){const i=new Date,o=Object.assign({method:"GET",headers:{range:`bytes=${t}-${n}`}},r),a=await fetch(e,o),s=new Date;if(a.status!==206&&a.status!==200)throw new Error(`HTTP ${a.status} when fetching ${e} bytes ${t}-${n}`);if(a.status===200)throw new Error(`HTTP ${a.status} when fetching ${e} bytes ${t}-${n}`);const l=await a.arrayBuffer().then(c=>Buffer.from(c));return{headers:a.headers.map,requestDate:i,responseDate:s,buffer:l}}function bZe(e){return e.name==="AbortError"||e.code==="ERR_ABORTED"||!!e.message.match(/\b(aborted|AbortError)\b/i)}class _Ze{constructor({fetch:t=yZe,size:n=1e7,chunkSize:r=32768,aggregationTime:i=100,minimumTTL:o=1e3,maxFetchSize:a=r*4,maxExtraFetch:s=r}){this.aggregator=new vZe({fetch:t,frequency:i,maxFetchSize:a,maxExtraSize:s}),this.chunkSize=r,this.chunkCache=new _9({maxSize:Math.floor(n/r)||1}),this.cacheSemantics=new aZe({minimumTTL:o}),this.stats=new _9({maxSize:20})}async getRange(t,n=0,r,i={}){let o=r;if(o===void 0){const f=await this.stat(t);if(f.size===void 0)throw new Error("length not specified, and could not determine size of the remote file");o=f.size-n}const a=Math.floor(n/this.chunkSize),s=Math.floor((n+o-1)/this.chunkSize),l=new Array(s-a+1);for(let f=a;f<=s;f+=1)l[f-a]=this._getChunk(t,f,i).then(d=>d&&{headers:d.headers,buffer:d.buffer,chunkNumber:f});let c=await Promise.all(l);if(c=c.filter(f=>!!f),!c.length)return{headers:{},buffer:Buffer.allocUnsafe(0)};const u=n-c[0].chunkNumber*this.chunkSize;return{headers:this._makeHeaders(c[0].headers,n,n+o-1),buffer:this._makeBuffer(c,u,o)}}_makeBuffer(t,n,r){if(t.length===1)return t[0].buffer.slice(n,n+r);if(t.length===0)return Buffer.allocUnsafe(0);const i=t.map(l=>l.buffer),o=i.shift().slice(n);let a=i.pop(),s=o.length+i.reduce((l,c)=>l+c.length,0)+a.length-r;return s<0&&(s=0),a=a.slice(0,a.length-s),Buffer.concat([o,...i,a])}async stat(t){let n=this.stats.get(t);if(!n){const r=await this._getChunk(t,0);if(this._recordStatsIfNecessary(t,r),n=this.stats.get(t),!n)throw new Error(`failed to retrieve file size for ${t}`)}return n}_headersToStats(t){const{headers:n}=t,r={};if(n["content-range"]){const i=n["content-range"].match(/\d+-\d+\/(\d+)/);i&&(r.size=parseInt(i[1],10),Number.isNaN(r.size)&&delete r.size)}return n["last-modified"]&&(r.mtime=new Date(n["last-modified"]),r.mtime.toString()==="Invalid Date"&&delete r.mtime,r.mtime&&(r.mtimeMs=r.mtime.getTime())),r}_makeHeaders(t,n,r){const i=Object.assign({},t||{});i["content-length"]=r-n;const a=(i["content-range"]||"").match(/\d+-\d+\/(\d+)/);return a&&(i["content-range"]=`${n}-${r-1}/${a[1]}`,i["x-resource-length"]=a[1]),i}async _getChunk(t,n,r){const i=`${t}/${n}`,o=this.chunkCache.get(i);if(o){let d,p;try{d=await o}catch(h){if(bZe(h))p=!0;else throw h}return p||!this.cacheSemantics.cachedChunkIsValid(d)?(this._uncacheIfSame(i,o),this._getChunk(t,n,r)):(this._recordStatsIfNecessary(t,d),d)}const a=n*this.chunkSize;let s=a+this.chunkSize;const l=this.stats.get(t);if(l&&l.size){if(a>=l.size)return;s>=l.size&&(s=l.size)}let c=!1;const u=this.aggregator.fetch(t,a,s,r).catch(d=>{throw c=!0,this._uncacheIfSame(i,u),d});c||this.chunkCache.set(i,u);const f=await u;return this._recordStatsIfNecessary(t,f),this.cacheSemantics.chunkIsCacheable(f)||this._uncacheIfSame(i,u),f}_recordStatsIfNecessary(t,n){this.stats.has(t)||this.stats.set(t,this._headersToStats(n))}_uncacheIfSame(t,n){this.chunkCache.get(t)===n&&this.chunkCache.delete(t)}reset(){this.stats.clear(),this.chunkCache.clear()}}const xZe=Object.freeze(Object.defineProperty({__proto__:null,HttpRangeFetcher:_Ze},Symbol.toStringTag,{value:"Module"})),wZe=os(xZe);Object.defineProperty(oh,"__esModule",{value:!0});oh.RemoteFileWithRangeCache=oh.clearCache=void 0;const SZe=wZe,CZe=Cv,AZe=Wre,gL={};function PZe(e,t,n,r={}){const i=gL[e];if(!i)throw new Error(`fetch not registered for ${e}`);return i(e,t,n,r)}const Xre=new SZe.HttpRangeFetcher({fetch:PZe,size:500*1024**2,chunkSize:128*1024,maxFetchSize:100*1024**2,minimumTTL:24*60*60*1e3});function MZe(){Xre.reset()}oh.clearCache=MZe;class EZe extends AZe.RemoteFile{async fetch(t,n){gL[String(t)]||(gL[String(t)]=this.fetchBinaryRange.bind(this));const r=n==null?void 0:n.headers;let i;if(r&&(r instanceof Headers?i=r.get("range"):Array.isArray(r)?[,i]=r.find(([o])=>o==="range")||[void 0,void 0]:i=r.range),i){const o=/bytes=(\d+)-(\d+)/.exec(i);if(o){const[,a,s]=o,l=Number.parseInt(a,10),c=Number.parseInt(s,10),u=await Xre.getRange(t,l,c-l+1,{signal:n==null?void 0:n.signal}),{headers:f}=u;return new Response(u.buffer,{status:206,headers:f})}}return super.fetch(t,n)}async fetchBinaryRange(t,n,r,i={}){const o=new Date,a={...i.headers,range:`bytes=${n}-${r}`},s=await super.fetch(t,{...i,headers:a}),l=new Date;if(s.status!==206){const f=`HTTP ${s.status} (${s.statusText}) when fetching ${t} bytes ${n}-${r}`,d=" (should be 206 for range requests)";throw new Error(`${f}${s.status===200?d:""}`)}const c={};for(const[f,d]of s.headers.entries())c[f]=d;const u=await s.arrayBuffer();return{headers:c,requestDate:o,responseDate:l,buffer:CZe.Buffer.from(u)}}}oh.RemoteFileWithRangeCache=EZe;(function(e){var t=Ce&&Ce.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteFileWithRangeCache=e.getFetcher=e.openLocation=e.resolveUriLocation=void 0;const n=Wre,r=t(Fne),i=oh,o=Rp,a=UB,s=Zu();function l(v){return"localPath"in v}function c(v){return"blobId"in v}function u(v){return v.baseUri?{...v,uri:new URL(v.uri,v.baseUri).href}:v}e.resolveUriLocation=u;function f(v,m){if(!v)throw new Error("must provide a location to openLocation");if(l(v)){if(!v.localPath)throw new Error("No local path provided");if(r.default||s.isElectron)return new n.LocalFile(v.localPath);throw new Error("can't use local files in the browser")}if(c(v)){const y=(0,a.getBlob)(v.blobId);if(!y)throw new Error(`file ("${v.name}") was opened locally from a previous session. To restore it, go to track settings and reopen the file`);return new n.BlobFile(y)}if((0,o.isUriLocation)(v)){if(!v.uri)throw new Error("No URI provided");const y=u(v);if(m){const _=p(v,m);if(_)return _.openLocation(y)}return new i.RemoteFileWithRangeCache(y.uri,{fetch:h})}throw new Error("invalid fileLocation")}e.openLocation=f;function d(v,m){if(!(0,o.isUriLocation)(v))throw new Error(`Not a valid UriLocation: ${JSON.stringify(v)}`);if(m){const y=p(v,m);if(y)return y.getFetcher(v)}return h}e.getFetcher=d;function p(v,m){const{rootModel:y}=m;if(y&&(0,o.isRootModelWithInternetAccounts)(y))return y.findAppropriateInternetAccount(v);if(v.internetAccountPreAuthorization){if(!v.internetAccountPreAuthorization.authInfo.token)throw new Error("Failed to obtain token from internet account. Try reloading the page");return m.getInternetAccountType(v.internetAccountPreAuthorization.internetAccountType).stateModel.create({type:v.internetAccountPreAuthorization.internetAccountType,configuration:v.internetAccountPreAuthorization.authInfo.configuration})}}async function h(v,m){var y;const _=await fetch(v,m);if(_.status===401&&(!((y=_.headers.get("WWW-Authenticate"))===null||y===void 0)&&y.includes("Basic")))throw new o.AuthNeededError("Accessing HTTPBasic resource without authentication",v.toString());return _}var g=oh;Object.defineProperty(e,"RemoteFileWithRangeCache",{enumerable:!0,get:function(){return g.RemoteFileWithRangeCache}})})(ES);var Q3={};Object.defineProperty(Q3,"__esModule",{value:!0});Q3.BaseViewModelWithDisplayedRegions=void 0;const OS=Xu,TZe=Jf,OZe=Jf,Yre=OS.types.model("BaseView",{id:TZe.ElementId,displayName:OS.types.maybe(OS.types.string),minimized:!1}).volatile(()=>({width:800})).views(()=>({menuItems(){return[]}})).actions(e=>({setDisplayName(t){e.displayName=t},setWidth(t){e.width=t},setMinimized(t){e.minimized=t}}));var IZe=Q3.default=Yre;Q3.BaseViewModelWithDisplayedRegions=Yre.props({displayedRegions:OS.types.array(OZe.Region)});var Kre={exports:{}};(function(e){const t=function(){let P={gf:{},gc:{},gs:{},gr:{},seqname:[],seqdata:{}};return Object.keys(P).forEach(D=>this[D]=P[D]),this},n=/^# STOCKHOLM 1.0/,r=/^\/\/\s*$/,i=/^#=GF\s+(\S+)\s+(.*?)\s*$/,o=/^#=GC\s+(\S+)\s+(.*?)\s*$/,a=/^#=GS\s+(\S+)\s+(\S+)\s+(.*?)\s*$/,s=/^#=GR\s+(\S+)\s+(\S+)\s+(.*?)\s*$/,l=/^\s*(\S+)\s+(\S+)\s*$/,c=/\S/,u="No format header: # STOCKHOLM 1.0",f="No format footer: //",d="Malformed line",p=P=>"(At line "+(P+1)+") ",h=P=>n.test(P),g=P=>{try{y(P,{strict:!0})}catch{return!1}return!0},v=P=>{throw new Error(P)},m=P=>console.warn(P),y=(P,D)=>{D=D||{};const z=D.quiet?()=>null:m,N=D.strict?v:z;let H=[],J=null;return P.split(`
`).forEach((oe,Z)=>{const ce=()=>{J||(N(p(Z)+u),J=new t)};let se;n.test(oe)?(J&&N(p(Z)+f),J=new t):r.test(oe)?(J?H.push(J):N(p(Z)+u),J=null):(se=i.exec(oe))?(ce(),J.gf[se[1]]=J.gf[se[1]]||[],J.gf[se[1]].push(se[2])):(se=o.exec(oe))?(ce(),J.gc[se[1]]=J.gc[se[1]]||"",J.gc[se[1]]+=se[2]):(se=a.exec(oe))?(ce(),J.gs[se[2]]=J.gs[se[2]]||{},J.gs[se[2]][se[1]]=J.gs[se[2]][se[1]]||[],J.gs[se[2]][se[1]].push(se[3])):(se=s.exec(oe))?(ce(),J.gr[se[2]]=J.gr[se[2]]||{},J.gr[se[2]][se[1]]=J.gr[se[2]][se[1]]||"",J.gr[se[2]][se[1]]+=se[3]):(se=l.exec(oe))?(ce(),J.seqdata[se[1]]||(J.seqdata[se[1]]="",J.seqname.push(se[1])),J.seqdata[se[1]]+=se[2]):c.test(oe)&&v(p(Z)+d)}),J&&(N("Warning: no end line //"),H.push(J)),H},_=(P,D)=>{const z=y(P,D);return z.length===0&&v("No alignments found"),z.length>1&&v("More than one alignment found"),z[0]},b=(P,D)=>{let z=new t;return D=D||Object.keys(P),D.forEach(N=>z.addRow(N,P[N])),z},x=P=>{let D=new t;return P.forEach(z=>D.addRow(z[0],z[1])),D};t.prototype.rows=function(){return this.seqname.length},t.prototype.columns=function(){let P=0;return this.seqname.forEach(D=>{P=Math.max(P,this.seqdata[D].length)}),Object.keys(this.gr).forEach(D=>Object.keys(this.gr[D]).forEach(z=>{P=Math.max(P,this.gr[D][z].length)})),P},t.prototype.allNames=function(){let P={},D=[],z=H=>{P[H]||(P[H]=!0,D.push(H))},N=H=>H.forEach(z);return N(this.seqname),N(Object.keys(this.seqdata)),Object.keys(this.gr).forEach(H=>N(Object.keys(this.gr[H]))),Object.keys(this.gs).forEach(H=>N(Object.keys(this.gs[H]))),D},t.prototype.allTags=function(){let P={};const D=z=>Object.keys(z).forEach(N=>P[N]=!0);return D(this.gc),D(this.gf),D(this.gr),D(this.gs),Object.keys(P).sort()},t.prototype.addRow=function(P,D){return this.seqdata[P]&&v("Duplicate row name"),this.seqname.push(P),this.seqdata[P]=D||"",this},t.prototype.deleteRow=function(P){return this.seqdata[P]||v("Row not found"),this.seqname=this.seqname.filter(D=>D!==P),delete this.seqdata[P],Object.keys(this.gr).forEach(D=>delete this.gr[D][P]),Object.keys(this.gs).forEach(D=>delete this.gs[D][P]),this};const w=(P,D)=>{let z={};return Object.keys(P).forEach(N=>z[N]=D(P[N])),z},S=P=>w(P,D=>D.slice(0)),A=P=>w(P,D=>S(D));t.prototype.copy=function(){let P=new t;return P.seqname=this.seqname.slice(0),P.seqdata=S(this.seqdata),P.gf=S(this.gf),P.gc=S(this.gc),P.gs=A(this.gs),P.gr=A(this.gr),P};const C=(P,D)=>D.map(z=>P[z]).join(""),k=(P,D)=>w(P,z=>C(z,D)),O=(P,D)=>w(P,z=>k(z,D));t.prototype.extractColumns=function(P){const D=this.columns(),z=P.filter(H=>H<0||H>=D);z.length&&v("Bad column indices: "+z.join(","));let N=new t;return N.seqname=this.seqname.slice(0),N.seqdata=k(this.seqdata,P),N.gf=S(this.gf),N.gc=k(this.gc,P),N.gs=A(this.gs),N.gr=O(this.gr,P),N},t.prototype.extractColumnRange=function(P,D){return this.extractColumns(new Array(D+1-P).fill(0).map((z,N)=>P+N))},t.prototype.defaultGapChars=".-",t.prototype.seqpos2col=function(P,D){D=D||this.defaultGapChars,this.seqdata[P]||v("Row not found");const z=this.seqdata[P];return z.split("").map((N,H)=>D.indexOf(z[H])<0?H:-1).filter(N=>N>=0)},t.prototype.col2seqpos=function(P,D){D=D||this.defaultGapChars,this.seqdata[P]||v("Row not found");const z=this.seqdata[P];let N=-1;return z.split("").map((H,J)=>D.indexOf(z[J])<0?++N:N+.5)};function T(P,D){for(;P.length<D;)P=" "+P;return P}function B(P,D){for(;P.length<D;)P=P+" ";return P}function R(P){return T("",P)}t.prototype.toString=function(P){P=P||{width:80,indentNames:!1};const D=this.allNames(),z=this.columns(),N=Math.max.apply(null,D.map(se=>se.length).concat([0])),H=Math.max.apply(null,this.allTags().map(se=>se.length).concat([0])),J=H?H+6:0,ne=P.width?Math.max(1,P.width-N-J-1):z,oe=P.indentNames?T:B,Z=P.indentNames?(se,Y)=>T(se,H)+" "+T(Y,N):(se,Y)=>B(se+" "+Y,H+N+1);let ce=[0];for(let se=ne;se<z;se+=ne)ce.push(se);return`# STOCKHOLM 1.0
`+Object.keys(this.gf).sort().map(se=>this.gf[se].map(Y=>"#=GF "+oe(se,H)+" "+Y+`
`).join("")).join("")+Object.keys(this.gs).sort().map(se=>Object.keys(this.gs[se]).map(Y=>this.gs[se][Y].map(he=>"#=GS "+Z(se,Y)+" "+he+`
`).join("")).join("")).join("")+ce.map(se=>Object.keys(this.gc).sort().map(Y=>"#=GC "+oe(Y,H)+R(N+2)+this.gc[Y].substr(se,ne)+`
`).join("")+D.map(Y=>Object.keys(this.gr).filter(he=>this.gr[he][Y]).sort().map(he=>"#=GR "+Z(he,Y)+" "+this.gr[he][Y].substr(se,ne)+`
`).join("")+(this.seqdata[Y]?oe(Y,N+J)+" "+this.seqdata[Y].substr(se,ne)+`
`:"")).join("")).join(`
`)+`//
`},t.prototype.toFasta=function(P){P=P||{width:80};const D=this.columns(),z=P.width||D;let N=[0];for(let H=z;H<D;H+=z)N.push(H);return this.allNames().map(H=>this.seqdata[H]?">"+H+`
`+N.map(J=>this.seqdata[H].substr(J,z)+`
`).join(""):"").join("")},t.prototype.toRowList=function(P){return this.allNames().filter(D=>this.seqdata[D]).map(D=>[D,this.seqdata[D]])},e.exports={sniff:h,validate:g,parse:_,parseAll:y,fromSeqIndex:b,fromRowList:x,Stockholm:t}})(Kre);var RZe=Kre.exports,kZe=RZe;const Zre=xh(kZe),LZe=nr(function({track:e,model:t,offsetX:n}){const{blockSize:r,scrollX:i,bgColor:o,colorScheme:a,colWidth:s,rowHeight:l,highResScaleFactor:c}=t,{model:{customColorScheme:u,data:f}}=e,d=u||a,p=ir(),h=$.useRef(null),g=$.useMemo(()=>Ere(d,p),[d,p]);return $.useEffect(()=>{if(!h.current)return;const v=h.current.getContext("2d");if(!v)return;v.resetTransform(),v.scale(c,c),v.clearRect(0,0,r,l),v.translate(-n,0),v.textAlign="center",v.font=v.font.replace(/\d+px/,`${Math.max(8,l-8)}px`);const m=Math.max(0,Math.floor(n/s)),y=Math.max(0,Math.ceil((n+r)/s)),_=f==null?void 0:f.slice(m,y);for(let b=0;_&&b<_.length;b++){const x=_[b],w=d[x.toUpperCase()];if(o){const S=b*s+n-n%s;v.fillStyle=w||"white",v.fillRect(S,0,s,l),l>=10&&s>=l/2&&(v.fillStyle=g[x.toUpperCase()]||"black",v.fillText(x,S+s/2,l/2+1))}}},[o,r,s,l,n,g,d,c,f]),Be.createElement("canvas",{ref:h,height:l*c,width:r*c,style:{position:"absolute",left:i+n,width:r,height:l}})}),$Ze=nr(function({track:e,model:t}){const{blocksX:n,msaAreaWidth:r,rowHeight:i}=t;return Be.createElement("div",{style:{position:"relative",height:i,width:r,overflow:"hidden"}},n.map(o=>Be.createElement(LZe,{key:o,track:e,model:t,offsetX:o})))});class DZe{constructor({maxHeight:t=1e4}={}){this.maxHeightReached=!1,this.rbush=new yre,this.rectangles=new Map,this.maxHeight=Math.ceil(t),this.pTotalHeight=0}addRect(t,n,r,i,o){const a=this.rectangles.get(t);if(a)return a.minY;let s=0;for(;this.rbush.collides({minX:n,minY:s,maxX:r,maxY:s+i})&&s<=this.maxHeight;)s+=1;const l={minX:n,minY:s,maxX:r,maxY:s+i,id:t,data:o};return this.rbush.insert(l),this.rectangles.set(t,l),this.pTotalHeight=Math.max(this.pTotalHeight,s),s}get totalHeight(){return this.pTotalHeight}}const BZe=nr(function({track:e,model:t,offsetX:n}){const{blockSize:r,colWidth:i,blanks:o,rowHeight:a,highResScaleFactor:s,scrollX:l}=t,{height:c,features:u,associatedRowName:f}=e.model,d=Gn(u)?S_(u):u,p=$.useMemo(()=>{const m=new DZe;return d==null||d.forEach((y,_)=>{const{start:b,end:x}=y;if(f){const w=t.rowSpecificBpToPx(f,b-1),S=t.rowSpecificBpToPx(f,x);m.addRect(`${_}`,w,S,a,y)}else{const w=t.globalBpToPx(b-1),S=t.globalBpToPx(x);m.addRect(`${_}`,w,S,a,y)}}),m},[a,d,f,t,o]),h=$.useRef(null),g=$.useRef(null),v=$.useRef(null);return $.useEffect(()=>{if(!h.current)return;const m=h.current.getContext("2d");if(!m)return;m.resetTransform(),m.scale(s,s),m.clearRect(0,0,r,c),m.translate(-n,0),m.textAlign="center",m.font=m.font.replace(/\d+px/,`${Math.max(8,a-8)}px`);const y=Math.max(0,Math.floor(n/i));m.fillStyle="goldenrod",p.rectangles.forEach(_=>{const{minX:b,maxX:x,minY:w,maxY:S}=_,A=(b-y)*i+n-n%i,C=(x-y)*i+n-n%i;C-A>0&&m.fillRect(A,w,C-A,(S-w)/2)})},[f,r,i,p.rectangles,t,a,c,n,s,u,o]),$.useEffect(()=>{var m,y,_,b;if(!g.current)return;const x=g.current.getContext("2d");if(x){x.resetTransform(),x.scale(s,s),x.clearRect(0,0,r,c),x.translate(-n,0),x.textAlign="center",x.font=x.font.replace(/\d+px/,`${Math.max(8,a-8)}px`),x.fillStyle="black",x.textAlign="left";for(const w of p.rectangles.values()){const{minX:S,maxX:A,maxY:C,minY:k,data:O}=w,T=S*i,B=A*i,R=O;if(B-T>0){const P=(y=(m=R.attributes)===null||m===void 0?void 0:m.Note)===null||y===void 0?void 0:y[0],D=(b=(_=R.attributes)===null||_===void 0?void 0:_.Name)===null||b===void 0?void 0:b[0],z=R.type;x.fillText([z,D,P].filter(N=>!!N).join(" - "),Math.max(Math.min(-l,B),T),k+(C-k))}}}},[r,i,l,s,c,p.rectangles,n,u,t,a,o]),u?Be.createElement(Be.Fragment,null,Be.createElement("canvas",{ref:h,height:c*s,width:r*s,style:{position:"absolute",left:l+n,width:r,height:c}}),Be.createElement("canvas",{ref:g,height:c*s,width:r*s,style:{position:"absolute",left:l+n,width:r,height:c}}),Be.createElement("canvas",{ref:v,height:c*s,width:r*s,style:{position:"absolute",left:l+n,width:r,height:c}})):null}),S9=nr(function({model:e,track:t}){const{blocksX:n,msaAreaWidth:r}=e,{height:i}=t.model;return Be.createElement("div",{style:{position:"relative",height:i,width:r,overflow:"hidden"}},n.map(o=>Be.createElement(BZe,{track:t,key:o,model:e,offsetX:o})))});var y1={},ua={};Object.defineProperty(ua,"__esModule",{value:!0});ua.parseBlocks=ua.parseBlock=ua.getSeqBounds=ua.getFirstNonEmptyLine=ua.parseHeader=ua.parseVersion=void 0;function Jre(e){const t=e.match(/\(?(\d+(\.\d+)+)\)?/);return t&&t.length>1?t[1]:""}ua.parseVersion=Jre;function NZe(e){const t=["CLUSTAL","PROBCONS","MUSCLE","MSAPROBS","Kalign"];t.find(r=>e.startsWith(r))||console.warn(`${e} is not a known CLUSTAL header: ${t.join(",")}, proceeding but could indicate an issue`);const n=Jre(e);return{info:e,version:n}}ua.parseHeader=NZe;function Qre(e){let t=e.next();for(;!t.done&&t.value.trim()==="";)t=e.next();return t.value}ua.getFirstNonEmptyLine=Qre;function eie(e){const t=e.split(/\s+/),n=e.slice(t[0].length),r=t[0].length+n.indexOf(t[1]),i=r+t[1].length;return[r,i]}ua.getSeqBounds=eie;function vL(e){let t=Qre(e);const n=[];let r="";if(!t)return;for(;t;)t[0]!==" "?n.push(t):r=t,t=e.next().value;const[i,o]=eie(n[0]),s=n.map(f=>f.split(/\s+/)).map(f=>f[0]),l=n.map(f=>f.slice(i,o));let c=r.slice(i,o);const u=l[0].length-c.length;return u&&(c+=" ".repeat(u)),{ids:s,seqs:l,consensus:c}}ua.parseBlock=vL;function FZe(e){let t;const n=vL(e);if(n!==void 0)for(;t=vL(e);){for(let r=0;r<t.seqs.length;r++)n.seqs[r]+=t.seqs[r];n.consensus+=t.consensus}return n}ua.parseBlocks=FZe;Object.defineProperty(y1,"__esModule",{value:!0});var tie=y1.parse=y1.parseIter=void 0;const SI=ua;function nie(e){const t=SI.getFirstNonEmptyLine(e);if(!t)throw new Error("Empty file received");const n=SI.parseHeader(t),r=SI.parseBlocks(e);if(r===void 0)throw new Error("No blocks parsed");const i=r.seqs.map((a,s)=>({id:r.ids[s],seq:a})),{consensus:o}=r;if(o.length!=i[0].seq.length)throw new Error(`Consensus length != sequence length. Con ${o.length} seq ${i[0].seq.length}`);return{consensus:o,alns:i,header:n}}y1.parseIter=nie;function jZe(e){const t=e.split(`
`)[Symbol.iterator]();return nie(t)}tie=y1.parse=jZe;class zZe{constructor(t){this.MSA=tie(t)}getMSA(){return this.MSA}getRow(t){var n;return(n=this.MSA.alns.find(r=>r.id===t))===null||n===void 0?void 0:n.seq.split("")}getWidth(){return this.MSA.alns[0].seq.length}getRowData(){}getHeader(){return this.MSA.header}getNames(){return this.MSA.alns.map(t=>t.id)}getStructures(){return{}}get alignmentNames(){return[]}getTree(){return{id:"root",name:"root",noTree:!0,branchset:this.getNames().map(t=>({id:t,name:t,branchset:[]}))}}get seqConsensus(){return this.MSA.consensus}get secondaryStructureConsensus(){}get tracks(){var t;return!((t=this.seqConsensus)===null||t===void 0)&&t.trim()?[{id:"seqConsensus",name:"Sequence consensus",data:this.seqConsensus,customColorScheme:{"*":"white",":":"grey",".":"darkgrey"," ":"black"}}]:[]}}function rie(e){var t;const n=[];let r={};const i=e.split(/\s*(;|\(|\)|,|:)\s*/);for(let o=0;o<i.length;o++){const a=i[o],s={};switch(a){case"(":r.branchset=[s],n.push(r),r=s;break;case",":(t=n.at(-1))===null||t===void 0||t.branchset.push(s),r=s;break;case")":r=n.pop();break;case":":break;default:{const l=i[o-1];l===")"||l==="("||l===","?r.name=a:l===":"&&(r.length=parseFloat(a))}}}return r}class UZe{constructor(t,n){const r=Zre.parseAll(t);this.data=r,this.MSA=r[n]}getMSA(){return this.MSA}getRow(t){var n,r;return(r=(n=this.MSA)===null||n===void 0?void 0:n.seqdata[t])===null||r===void 0?void 0:r.split("")}getWidth(){var t;const n=Object.keys((t=this.MSA)===null||t===void 0?void 0:t.seqdata)[0];return this.getRow(n).length}get alignmentNames(){return this.data.map((t,n)=>{var r;return((r=t.gf.DE)===null||r===void 0?void 0:r[0])||`Alignment ${n+1}`})}getHeader(){var t,n;return{General:this.MSA.gf,Accessions:(t=this.MSA.gs)===null||t===void 0?void 0:t.AC,Dbxref:(n=this.MSA.gs)===null||n===void 0?void 0:n.DR}}getRowData(t){var n,r,i,o;return{name:t,accession:(r=(n=this.MSA.gs)===null||n===void 0?void 0:n.AC)===null||r===void 0?void 0:r[t],dbxref:(o=(i=this.MSA.gs)===null||i===void 0?void 0:i.DR)===null||o===void 0?void 0:o[t]}}getNames(){return Object.keys(this.MSA.seqdata)}getSeqCoords(){}getStructures(){var t;const n=/PDB; +(\S+) +(\S); ([0-9]+)-([0-9]+)/,r=this.MSA,i=Object.entries(((t=r.gs)===null||t===void 0?void 0:t.DR)||{}).map(([a,s])=>[a,n.exec(s)]).filter(a=>!!a[1]).map(([a,s])=>{const l=s[1].toLowerCase(),c=s[2],u=+s[3],f=+s[4];return{id:a,pdb:l,chain:c,startPos:u,endPos:f}}),o={};for(const a of i){const{id:s,...l}=a;o[s]||(o[s]=[]),o[s].push(l)}return o}getTree(){var t,n,r;const i=(r=(n=(t=this.MSA)===null||t===void 0?void 0:t.gf)===null||n===void 0?void 0:n.NH)===null||r===void 0?void 0:r[0];return i?tN(rie(i)):{id:"root",name:"root",noTree:!0,branchset:this.getNames().map(o=>({id:o,branchset:[],name:o}))}}get seqConsensus(){var t;return(t=this.MSA.gc)===null||t===void 0?void 0:t.seq_cons}get secondaryStructureConsensus(){var t;return(t=this.MSA.gc)===null||t===void 0?void 0:t.SS_cons}get tracks(){return[{id:"seqConsensus",name:"Sequence consensus",data:this.seqConsensus,customColorScheme:{}},{id:"secondaryStruct",name:"Secondary-structure",data:this.secondaryStructureConsensus,customColorScheme:{">":"pink","<":"lightblue"}}]}}function VZe(e){return e.split(">").filter(t=>/\S/.test(t)).map(t=>{const[n,...r]=t.split(`
`),[i,...o]=n.split(" "),a=o.join(" "),l=r.join("").replaceAll(/\s/g,"");return{id:i,description:a,sequence:l}})}class HZe{constructor(t){this.MSA={seqdata:Object.fromEntries(VZe(t).map(n=>[`${n.id}`,n.sequence]))}}getMSA(){return this.MSA}getRowData(){}getNames(){return Object.keys(this.MSA.seqdata)}getRow(t){var n,r;return(r=(n=this.MSA)===null||n===void 0?void 0:n.seqdata[t])===null||r===void 0?void 0:r.split("")}getWidth(){var t;const n=Object.keys((t=this.MSA)===null||t===void 0?void 0:t.seqdata)[0];return this.getRow(n).length}getStructures(){return{}}get alignmentNames(){return[]}getHeader(){return{}}getTree(){return{id:"root",name:"root",noTree:!0,branchset:this.getNames().map(t=>({id:t,branchset:[],name:t}))}}get seqConsensus(){}get secondaryStructureConsensus(){}get tracks(){return[]}}const GZe=Ut.model({id:Ut.string,accession:Ut.string,name:Ut.string,associatedRowName:Ut.string,height:Ut.optional(Ut.number,100)}).volatile(()=>({error:void 0,data:void 0})).actions(e=>({setError(t){e.error=t},setData(t){e.data=t}})).actions(e=>({afterCreate(){RC(e,Xg(async()=>{try{const{accession:t}=e,r=`https://rest.uniprot.org/uniprotkb/${t==null?void 0:t.replace(/\.[^/.]+$/,"")}.gff`,i=await fetch(r);if(!i.ok)throw new Error(`HTTP ${i.status} fetching ${r}: ${await i.text()}`);e.setData(await i.text())}catch(t){console.error(t),e.setError(t)}}))}})).views(e=>({get loading(){return!e.data},get features(){return sYe(e.data)}})),WZe=Ut.model({id:Ut.identifier,structure:Ut.model({pdb:Ut.string,startPos:Ut.number,endPos:Ut.number}),range:Ut.maybe(Ut.string)}),qZe=Ut.model("MsaView",{id:Jf.ElementId,type:Ut.literal("MsaView"),height:Ut.optional(Ut.number,550),treeAreaWidth:Ut.optional(Ut.number,400),treeWidth:Ut.optional(Ut.number,300),rowHeight:20,scrollY:0,scrollX:0,resizeHandleWidth:5,blockSize:1e3,mouseRow:Ut.maybe(Ut.number),mouseCol:Ut.maybe(Ut.number),selectedStructures:Ut.array(WZe),labelsAlignRight:!1,colWidth:16,showBranchLen:!0,bgColor:!0,drawTree:!0,drawNodeBubbles:!0,highResScaleFactor:2,colorSchemeName:"maeditor",treeFilehandle:Ut.maybe(Jf.FileLocation),msaFilehandle:Ut.maybe(Jf.FileLocation),currentAlignment:0,collapsed:Ut.array(Ut.string),showOnly:Ut.maybe(Ut.string),boxTracks:Ut.array(GZe),turnedOffTracks:Ut.map(Ut.boolean),annotatedRegions:Ut.array(Ut.model({start:Ut.number,end:Ut.number,attributes:Ut.frozen()})),data:Ut.optional(Ut.model({tree:Ut.maybe(Ut.string),msa:Ut.maybe(Ut.string)}).actions(e=>({setTree(t){e.tree=t},setMSA(t){e.msa=t}})),{tree:"",msa:""})}).volatile(()=>({rulerHeight:20,error:void 0,margin:{left:20,top:20},DialogComponent:void 0,DialogProps:void 0,annotPos:void 0})).actions(e=>({setDialogComponent(t,n){e.DialogComponent=t,e.DialogProps=n},setHeight(t){e.height=t},addStructureToSelection(t){e.selectedStructures.push(t)},removeStructureFromSelection(t){const n=e.selectedStructures.find(r=>r.id===t.id);n&&e.selectedStructures.remove(n)},toggleStructureSelection(t){const n=e.selectedStructures.find(r=>r.id===t.id);n?e.selectedStructures.remove(n):e.selectedStructures.push(t)},clearSelectedStructures(){e.selectedStructures=[]},setError(t){e.error=t},setMousePos(t,n){e.mouseCol=t,e.mouseRow=n},setRowHeight(t){e.rowHeight=t},setColWidth(t){e.colWidth=t},setColorSchemeName(t){e.colorSchemeName=t},setScrollY(t){e.scrollY=t},setScrollX(t){e.scrollX=t},setTreeAreaWidth(t){e.treeAreaWidth=t},setTreeWidth(t){e.treeWidth=t},setCurrentAlignment(t){e.currentAlignment=t},toggleLabelsAlignRight(){e.labelsAlignRight=!e.labelsAlignRight},toggleDrawTree(){e.drawTree=!e.drawTree},toggleCollapsed(t){e.collapsed.includes(t)?e.collapsed.remove(t):e.collapsed.push(t)},setShowOnly(t){e.showOnly=t},toggleBranchLen(){e.showBranchLen=!e.showBranchLen},toggleBgColor(){e.bgColor=!e.bgColor},toggleNodeBubbles(){e.drawNodeBubbles=!e.drawNodeBubbles},setData(t){e.data=t},async setMSAFilehandle(t){e.msaFilehandle=t},async setTreeFilehandle(t){if(t&&"blobId"in t){const n=await ES.openLocation(t).readFile("utf8");this.setTree(n)}else e.treeFilehandle=t},setMSA(t){e.data.setMSA(t)},setTree(t){e.data.setTree(t)},afterCreate(){RC(e,Xg(async()=>{const{treeFilehandle:t}=e;if(t)try{this.setTree(await ES.openLocation(t).readFile("utf8"))}catch(n){console.error(n),this.setError(n)}})),RC(e,Xg(async()=>{const{msaFilehandle:t}=e;if(t)try{this.setMSA(await ES.openLocation(t).readFile("utf8"))}catch(n){console.error(n),this.setError(n)}}))}})).views(e=>{let t=[],n=[],r=0,i=0;return{get initialized(){return(e.data.msa||e.data.tree||e.msaFilehandle||e.treeFilehandle)&&!e.error},get blocksX(){const{scrollX:o,blockSize:a,colWidth:s}=e,l=-(a*Math.floor(o/a))-a,c=[];for(let u=l;u<l+a*3;u+=a)u+a>0&&c.push(u);return(JSON.stringify(c)!==JSON.stringify(t)||s!==r)&&(t=c,r=s),t},get blocksY(){const{scrollY:o,blockSize:a,rowHeight:s}=e,l=-(a*Math.floor(o/a))-2*a,c=[];for(let u=l;u<l+a*3;u+=a)u+a>0&&c.push(u);return(JSON.stringify(c)!==JSON.stringify(n)||s!==i)&&(n=c,i=s),n}}}).views(e=>({get blocks2d(){return e.blocksY.flatMap(t=>e.blocksX.map(n=>[n,t]))},get done(){return e.initialized&&(e.data.msa||e.data.tree)},get colorScheme(){return cYe[e.colorSchemeName]},get header(){var t;return((t=this.MSA)===null||t===void 0?void 0:t.getHeader())||{}},getRowData(t){var n;const r=t.match(/\S+\/(\d+)-(\d+)/);return{data:((n=this.MSA)===null||n===void 0?void 0:n.getRowData(t))||{},...r&&{range:{start:+r[1],end:+r[2]}}}},get currentAlignmentName(){return this.alignmentNames[e.currentAlignment]},get alignmentNames(){var t;return((t=this.MSA)===null||t===void 0?void 0:t.alignmentNames)||[]},get noTree(){return!!this.tree.noTree},get menuItems(){return[]},get MSA(){const t=e.data.msa;return t?Zre.sniff(t)?new UZe(t,e.currentAlignment):t.startsWith(">")?new HZe(t):new zZe(t):null},get numColumns(){var t;return((((t=this.MSA)===null||t===void 0?void 0:t.getWidth())||0)-this.blanks.length)*e.colWidth},get tree(){var t;return e.data.tree?tN(rie(e.data.tree)):((t=this.MSA)===null||t===void 0?void 0:t.getTree())||{noTree:!0,branchset:[],id:"empty",name:"empty"}},get rowNames(){return this.hierarchy.leaves().map(t=>t.data.name)},get mouseOverRowName(){return e.mouseRow!==void 0?this.rowNames[e.mouseRow]:void 0},getMouseOverResidue(t){return this.columns[t]},get root(){let t=cN(this.tree,n=>n.branchset).sum(n=>n.branchset?0:1).sort((n,r)=>oYe(n.data.length||1,r.data.length||1));if(e.showOnly){const n=t.find(r=>r.data.id===e.showOnly);n&&(t=n)}return e.collapsed.length&&e.collapsed.map(n=>t.find(r=>r.data.id===n)).filter(n=>!!n).map(n=>Ire(n)),t},get structures(){var t;return((t=this.MSA)===null||t===void 0?void 0:t.getStructures())||{}},get inverseStructures(){return Object.fromEntries(Object.entries(this.structures).flatMap(([t,n])=>n.map(r=>[r.pdb,{id:t}])))},get msaAreaWidth(){return e.width-e.treeAreaWidth},get blanks(){var t;const n=[],r=this.hierarchy.leaves().map(({data:i})=>{var o;return(o=this.MSA)===null||o===void 0?void 0:o.getRow(i.name)}).filter(i=>!!i);for(let i=0;i<((t=r[0])===null||t===void 0?void 0:t.length);i++){let o=0;for(const a of r)a[i]==="-"&&o++;o===r.length&&n.push(i)}return n},get rows(){return this.hierarchy.leaves().map(({data:t})=>{var n;return[t.name,(n=this.MSA)===null||n===void 0?void 0:n.getRow(t.name)]}).filter(t=>!!t[1])},get columns(){return Object.fromEntries(this.rows.map((t,n)=>[t[0],this.columns2d[n]]))},get columns2d(){return this.rows.map(t=>t[1]).map(t=>g9(this.blanks,t))},get colStats(){const t=[],n=this.columns2d;for(const r of n)for(let i=0;i<r.length;i++){const o=t[i]||{};o[r[i]]||(o[r[i]]=0),o[r[i]]++,t[i]=o}return t},get hierarchy(){const t=this.root;return CKe().size([this.totalHeight,e.treeWidth]).separation(()=>1)(t),Tre(t,t.data.length=0,e.treeWidth/Ore(t)),t},get totalHeight(){return this.root.leaves().length*e.rowHeight}})).actions(e=>({addUniprotTrack(t){e.boxTracks.some(n=>n.name===t.name)?e.turnedOffTracks.has(t.name)&&this.toggleTrack(t.name):e.boxTracks.push({...t,id:t.name,associatedRowName:t.name})},doScrollY(t){e.scrollY=v9(-e.totalHeight+10,e.scrollY+t,0)},doScrollX(t){e.scrollX=v9(-e.numColumns+(e.msaAreaWidth-100),e.scrollX+t,0)},setMouseoveredColumn(t,n,r){var i;let o=0,a=0;const{id:s}=e.inverseStructures[r.slice(0,-4)]||{},l=(i=e.MSA)===null||i===void 0?void 0:i.getRow(s);if(l){for(a=0;a<l.length&&o<t;a++)l[a]!=="-"&&o++;e.mouseCol=o+1}else e.mouseCol=void 0},toggleTrack(t){e.turnedOffTracks.has(t)?e.turnedOffTracks.delete(t):e.turnedOffTracks.set(t,!0)}})).views(e=>({get secondaryStructureConsensus(){var t;return(t=e.MSA)===null||t===void 0?void 0:t.secondaryStructureConsensus},get seqConsensus(){var t;return(t=e.MSA)===null||t===void 0?void 0:t.seqConsensus},get conservation(){if(e.columns2d.length)for(let t=0;t<e.columns2d[0].length;t++){const n=[];for(const r of e.columns2d)n.push(r[t])}return["a"]},get tracks(){const t=e.blanks,n=e.MSA?e.MSA.tracks.map(o=>{const{data:a}=o;return{model:{...o,data:a?g9(t,a):void 0,height:e.rowHeight},ReactComponent:$Ze}}):[],r=e.boxTracks.filter(o=>!!e.rows.some(a=>a[0]===o.name)).map(o=>({model:o,ReactComponent:S9})),i=e.annotatedRegions.length>0?[{model:{features:e.annotatedRegions,height:100,id:"annotations",name:"User-created annotations",data:e.annotatedRegions.map(o=>{const a=o.attributes?Object.entries(o.attributes).map(([s,l])=>`${s}=${l.join(",")}`).join(";"):".";return["MSA_refcoord",".",".",o.start,o.end,".",".",".",a].join("	")}).join(`
`)},ReactComponent:S9}]:[];return[...n,...r,...i]},get turnedOnTracks(){return this.tracks.filter(t=>!e.turnedOffTracks.has(t.model.id))},pxToBp(t){return Math.floor((t-e.scrollX)/e.colWidth)},rowSpecificBpToPx(t,n){var r;const{rowNames:i,rows:o,blanks:a}=e,s=i.indexOf(t),l=o[s][1],u=((r=e.getRowData(t).range)===null||r===void 0?void 0:r.start)||0,f=n-u;if(f<0)return 0;let d=0,p=0;for(;p<l.length&&!(l[p]!=="-"&&d++===f);p++);let h=0;for(let g=0;g<l.length;g++)a.includes(g)&&g<p+1&&h++;return p-h},globalBpToPx(t){var n;let r=0;for(let i=0;i<((n=e.rows[0])===null||n===void 0?void 0:n[1].length);i++)e.blanks.includes(i)&&i<t+1&&r++;return t-r},relativePxToBp(t,n){const{rowNames:r,rows:i}=e,o=r.indexOf(t);if(o!==-1){const a=i[o][1];let s=0;for(let l=0;l<n;l++)if(a[l]!=="-")s++;else if(s>=n)break;return s}return 0},getPos(t){let n=0;for(let r=0,i=0;r<t;r++,n++)for(;n===e.blanks[i];)i++,n++;return n}})).actions(e=>({addAnnotation(t,n,r){e.annotatedRegions.push({start:e.getPos(t),end:e.getPos(n),attributes:r})},setOffsets(t,n){e.annotPos={left:t,right:n}},clearAnnotPos(){e.annotPos=void 0}})),XZe=Ut.snapshotProcessor(Ut.compose(IZe,qZe),{postProcessor(e){const t=e,{data:{tree:n,msa:r},...i}=t;return{data:{...!e.treeFilehandle&&{tree:n},...!e.msaFilehandle&&{msa:r}},...i}}}),YZe=Ut.model({msaview:XZe,nglSelection:Ut.optional(Ut.string,"")}).actions(e=>({setNGLSelection(t){e.nglSelection=t}}));function KZe(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}function ZZe(e){var t=this;return new t(function(n,r){if(!(e&&typeof e.length<"u"))return r(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(i.length===0)return n([]);var o=i.length;function a(l,c){if(c&&(typeof c=="object"||typeof c=="function")){var u=c.then;if(typeof u=="function"){u.call(c,function(f){a(l,f)},function(f){i[l]={status:"rejected",reason:f},--o===0&&n(i)});return}}i[l]={status:"fulfilled",value:c},--o===0&&n(i)}for(var s=0;s<i.length;s++)a(s,i[s])})}function iie(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}iie.prototype=Error.prototype;function JZe(e){var t=this;return new t(function(n,r){if(!(e&&typeof e.length<"u"))return r(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(e);if(i.length===0)return r();for(var o=[],a=0;a<i.length;a++)try{t.resolve(i[a]).then(n).catch(function(s){o.push(s),o.length===i.length&&r(new iie(o,"All promises were rejected"))})}catch(s){r(s)}})}var QZe=setTimeout;function oie(e){return!!(e&&typeof e.length<"u")}function eJe(){}function tJe(e,t){return function(){e.apply(t,arguments)}}function Vr(e){if(!(this instanceof Vr))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],sie(e,this)}function aie(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,Vr._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?yL:b1)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(i){b1(t.promise,i);return}yL(t.promise,r)})}function yL(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&(typeof t=="object"||typeof t=="function")){var n=t.then;if(t instanceof Vr){e._state=3,e._value=t,bL(e);return}else if(typeof n=="function"){sie(tJe(n,t),e);return}}e._state=1,e._value=t,bL(e)}catch(r){b1(e,r)}}function b1(e,t){e._state=2,e._value=t,bL(e)}function bL(e){e._state===2&&e._deferreds.length===0&&Vr._immediateFn(function(){e._handled||Vr._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)aie(e,e._deferreds[t]);e._deferreds=null}function nJe(e,t,n){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=n}function sie(e,t){var n=!1;try{e(function(r){n||(n=!0,yL(t,r))},function(r){n||(n=!0,b1(t,r))})}catch(r){if(n)return;n=!0,b1(t,r)}}Vr.prototype.catch=function(e){return this.then(null,e)};Vr.prototype.then=function(e,t){var n=new this.constructor(eJe);return aie(this,new nJe(e,t,n)),n};Vr.prototype.finally=KZe;Vr.all=function(e){return new Vr(function(t,n){if(!oie(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return t([]);var i=r.length;function o(s,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var c=l.then;if(typeof c=="function"){c.call(l,function(u){o(s,u)},n);return}}r[s]=l,--i===0&&t(r)}catch(u){n(u)}}for(var a=0;a<r.length;a++)o(a,r[a])})};Vr.any=JZe;Vr.allSettled=ZZe;Vr.resolve=function(e){return e&&typeof e=="object"&&e.constructor===Vr?e:new Vr(function(t){t(e)})};Vr.reject=function(e){return new Vr(function(t,n){n(e)})};Vr.race=function(e){return new Vr(function(t,n){if(!oie(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)Vr.resolve(e[r]).then(t,n)})};Vr._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){QZe(e,0)};Vr._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});Math.sign===void 0&&(Math.sign=function(e){return e<0?-1:e>0?1:+e});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let n=1;n<arguments.length;n++){const r=arguments[n];if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t});const rJe="118",iJe=0,C9=1,oJe=2,lie=1,aJe=2,Vy=3,C0=0,wi=1,Rx=2,cie=1,Su=0,nd=1,_L=2,A9=3,P9=4,sJe=5,Dm=100,lJe=101,cJe=102,M9=103,E9=104,uJe=200,fJe=201,dJe=202,pJe=203,uie=204,fie=205,hJe=206,mJe=207,gJe=208,vJe=209,yJe=210,bJe=0,_Je=1,xJe=2,xL=3,wJe=4,SJe=5,CJe=6,AJe=7,eT=0,PJe=1,MJe=2,Ig=0,EJe=1,TJe=2,OJe=3,IJe=4,RJe=5,hN=300,mN=301,gN=302,die=303,vN=304,kx=306,yN=307,aA=1e3,pa=1001,sA=1002,sr=1003,wL=1004,SL=1005,mi=1006,pie=1007,tT=1008,ah=1009,kJe=1010,LJe=1011,lA=1012,$Je=1013,IS=1014,pu=1015,cA=1016,DJe=1017,BJe=1018,NJe=1019,wb=1020,FJe=1021,kp=1022,wa=1023,jJe=1024,zJe=1025,UJe=wa,Rg=1026,_1=1027,VJe=1028,HJe=1029,GJe=1030,WJe=1031,qJe=1032,XJe=1033,T9=33776,O9=33777,I9=33778,R9=33779,k9=35840,L9=35841,$9=35842,D9=35843,YJe=36196,B9=37492,N9=37496,KJe=37808,ZJe=37809,JJe=37810,QJe=37811,eQe=37812,tQe=37813,nQe=37814,rQe=37815,iQe=37816,oQe=37817,aQe=37818,sQe=37819,lQe=37820,cQe=37821,uQe=36492,fQe=37840,dQe=37841,pQe=37842,hQe=37843,mQe=37844,gQe=37845,vQe=37846,yQe=37847,bQe=37848,_Qe=37849,xQe=37850,wQe=37851,SQe=37852,CQe=37853,AQe=2200,PQe=2201,MQe=2202,uA=2300,RS=2301,CI=2302,Pv=2400,lg=2401,fA=2402,bN=2500,hie=2501,EQe=0,Ro=3e3,Lx=3001,_N=3007,xN=3002,TQe=3003,mie=3004,gie=3005,vie=3006,OQe=3200,IQe=3201,A0=0,RQe=1,AI=7680,kQe=519,nT=35044,x1=35048;function Ju(){}Object.assign(Ju.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}},dispatchEvent:function(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let i=0,o=r.length;i<o;i++)r[i].call(this,e)}}});const Yi=[];for(let e=0;e<256;e++)Yi[e]=(e<16?"0":"")+e.toString(16);const un={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Yi[e&255]+Yi[e>>8&255]+Yi[e>>16&255]+Yi[e>>24&255]+"-"+Yi[t&255]+Yi[t>>8&255]+"-"+Yi[t>>16&15|64]+Yi[t>>24&255]+"-"+Yi[n&63|128]+Yi[n>>8&255]+"-"+Yi[n>>16&255]+Yi[n>>24&255]+Yi[r&255]+Yi[r>>8&255]+Yi[r>>16&255]+Yi[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*un.DEG2RAD},radToDeg:function(e){return e*un.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+r)/2),u=a((t+r)/2),f=o((t-r)/2),d=a((t-r)/2),p=o((r-t)/2),h=a((r-t)/2);switch(i){case"XYX":e.set(s*u,l*f,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*f,s*c);break;case"ZXZ":e.set(l*f,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*h,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*h,s*c);break;case"ZYZ":e.set(l*h,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};function rt(e=0,t=0){this.x=e,this.y=t}Object.defineProperties(rt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(rt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function oo(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(oo.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},extractBasis:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],f=n[2],d=n[5],p=n[8],h=r[0],g=r[3],v=r[6],m=r[1],y=r[4],_=r[7],b=r[2],x=r[5],w=r[8];return i[0]=o*h+a*m+s*b,i[3]=o*g+a*y+s*x,i[6]=o*v+a*_+s*w,i[1]=l*h+c*m+u*b,i[4]=l*g+c*y+u*x,i[7]=l*v+c*_+u*w,i[2]=f*h+d*m+p*b,i[5]=f*g+d*y+p*x,i[8]=f*v+d*_+p*w,this},multiplyScalar:function(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s},getInverse:function(e,t){t!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],f=n[7],d=n[8],p=d*l-c*f,h=c*u-d*s,g=f*s-l*u,v=i*p+o*h+a*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/v;return r[0]=p*m,r[1]=(a*f-d*o)*m,r[2]=(c*o-a*l)*m,r[3]=h*m,r[4]=(d*i-a*u)*m,r[5]=(a*s-c*i)*m,r[6]=g*m,r[7]=(o*u-f*i)*m,r[8]=(l*i-o*s)*m,this},transpose:function(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1)},scale:function(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],l=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*l,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*l,r[7]=-n*a+t*c,this},translate:function(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});let nm;const sh={getDataURL:function(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{nm===void 0&&(nm=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),nm.width=e.width,nm.height=e.height;const n=nm.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=nm}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let LQe=0;function mr(e,t,n,r,i,o,a,s,l,c){Object.defineProperty(this,"id",{value:LQe++}),this.uuid=un.generateUUID(),this.name="",this.image=e!==void 0?e:mr.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:mr.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:pa,this.wrapT=r!==void 0?r:pa,this.magFilter=i!==void 0?i:mi,this.minFilter=o!==void 0?o:tT,this.anisotropy=l!==void 0?l:1,this.format=a!==void 0?a:wa,this.internalFormat=null,this.type=s!==void 0?s:ah,this.offset=new rt(0,0),this.repeat=new rt(1,1),this.center=new rt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new oo,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c!==void 0?c:Ro,this.version=0,this.onUpdate=null}mr.DEFAULT_IMAGE=void 0;mr.DEFAULT_MAPPING=hN;mr.prototype=Object.assign(Object.create(Ju.prototype),{constructor:mr,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=un.generateUUID()),!t&&e.images[r.uuid]===void 0){let i;if(Array.isArray(r)){i=[];for(let o=0,a=r.length;o<a;o++)i.push(sh.getDataURL(r[o]))}else i=sh.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==hN)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case aA:e.x=e.x-Math.floor(e.x);break;case pa:e.x=e.x<0?0:1;break;case sA:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case aA:e.y=e.y-Math.floor(e.y);break;case pa:e.y=e.y<0?0:1;break;case sA:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}});Object.defineProperty(mr.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function Jn(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}Object.defineProperties(Jn.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}});Object.assign(Jn.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){let t,n,r,i;const s=e.elements,l=s[0],c=s[4],u=s[8],f=s[1],d=s[5],p=s[9],h=s[2],g=s[6],v=s[10];if(Math.abs(c-f)<.01&&Math.abs(u-h)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+f)<.1&&Math.abs(u+h)<.1&&Math.abs(p+g)<.1&&Math.abs(l+d+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(l+1)/2,_=(d+1)/2,b=(v+1)/2,x=(c+f)/4,w=(u+h)/4,S=(p+g)/4;return y>_&&y>b?y<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(y),r=x/n,i=w/n):_>b?_<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(_),n=x/r,i=S/r):b<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(b),n=w/i,r=S/i),this.set(n,r,i,t),this}let m=Math.sqrt((g-p)*(g-p)+(u-h)*(u-h)+(f-c)*(f-c));return Math.abs(m)<.001&&(m=1),this.x=(g-p)/m,this.y=(u-h)/m,this.z=(f-c)/m,this.w=Math.acos((l+d+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function qo(e,t,n){this.width=e,this.height=t,this.scissor=new Jn(0,0,e,t),this.scissorTest=!1,this.viewport=new Jn(0,0,e,t),n=n||{},this.texture=new mr(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:mi,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!0,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}qo.prototype=Object.assign(Object.create(Ju.prototype),{constructor:qo,isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function F9(e,t,n){qo.call(this,e,t,n),this.samples=4}F9.prototype=Object.assign(Object.create(qo.prototype),{constructor:F9,isWebGLMultisampleRenderTarget:!0,copy:function(e){return qo.prototype.copy.call(this,e),this.samples=e.samples,this}});function lr(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}Object.assign(lr,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const f=i[o+0],d=i[o+1],p=i[o+2],h=i[o+3];if(u!==h||s!==f||l!==d||c!==p){let g=1-a,v=s*f+l*d+c*p+u*h,m=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){const b=Math.sqrt(y),x=Math.atan2(b,v*m);g=Math.sin(g*x)/b,a=Math.sin(a*x)/b}const _=a*m;if(s=s*g+f*_,l=l*g+d*_,c=c*g+p*_,u=u*g+h*_,g===1-a){const b=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=b,l*=b,c*=b,u*=b}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u},multiplyQuaternionsFlat:function(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],f=i[o+1],d=i[o+2],p=i[o+3];return e[t]=a*p+c*u+s*d-l*f,e[t+1]=s*p+c*f+l*u-a*d,e[t+2]=l*p+c*d+a*f-s*u,e[t+3]=c*p-a*u-s*f-l*d,e}});Object.defineProperties(lr.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}});Object.assign(lr.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),f=s(n/2),d=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=f*c*u+l*d*p,this._y=l*d*u-f*c*p,this._z=l*c*p+f*d*u,this._w=l*c*u-f*d*p;break;case"YXZ":this._x=f*c*u+l*d*p,this._y=l*d*u-f*c*p,this._z=l*c*p-f*d*u,this._w=l*c*u+f*d*p;break;case"ZXY":this._x=f*c*u-l*d*p,this._y=l*d*u+f*c*p,this._z=l*c*p+f*d*u,this._w=l*c*u-f*d*p;break;case"ZYX":this._x=f*c*u-l*d*p,this._y=l*d*u+f*c*p,this._z=l*c*p-f*d*u,this._w=l*c*u+f*d*p;break;case"YZX":this._x=f*c*u+l*d*p,this._y=l*d*u+f*c*p,this._z=l*c*p-f*d*u,this._w=l*c*u-f*d*p;break;case"XZY":this._x=f*c*u-l*d*p,this._y=l*d*u-f*c*p,this._z=l*c*p+f*d*u,this._w=l*c*u+f*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],f=n+a+u;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-s)*d,this._y=(i-l)*d,this._z=(o-r)*d}else if(n>a&&n>u){const d=2*Math.sqrt(1+n-a-u);this._w=(c-s)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(i+l)/d}else if(a>u){const d=2*Math.sqrt(1+a-n-u);this._w=(i-l)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(s+c)/d}else{const d=2*Math.sqrt(1+u-n-a);this._w=(o-r)/d,this._x=(i+l)/d,this._y=(s+c)/d,this._z=.25*d}return this._onChangeCallback(),this},setFromUnitVectors:function(e,t){let r=e.dot(t)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(un.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*n+t*this._x,this._y=d*r+t*this._y,this._z=d*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=o*u+this._w*f,this._x=n*u+this._x*f,this._y=r*u+this._y*f,this._z=i*u+this._z*f,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},fromBufferAttribute:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});const PI=new V,j9=new lr;function V(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}Object.assign(V.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(j9.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(j9.setFromAxisAngle(e,t))},applyMatrix3:function(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,f=-i*t-o*n-a*r;return this.x=l*s+f*-i+c*-a-u*-o,this.y=c*s+f*-o+u*-i-l*-a,this.z=u*s+f*-a+l*-o-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this},cross:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)},projectOnPlane:function(e){return PI.copy(this).projectOnVector(e),this.sub(PI)},reflect:function(e){return this.sub(PI.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(un.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,t*3)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});const rm=new V,tl=new lt,$Qe=new V(0,0,0),DQe=new V(1,1,1),df=new V,Vw=new V,Ra=new V;function lt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(lt.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,l,c,u,f,d,p,h,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=c,v[10]=u,v[14]=f,v[3]=d,v[7]=p,v[11]=h,v[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new lt().fromArray(this.elements)},copy:function(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){const t=this.elements,n=e.elements,r=1/rm.setFromMatrixColumn(e,0).length(),i=1/rm.setFromMatrixColumn(e,1).length(),o=1/rm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if(e.order==="XYZ"){const f=o*c,d=o*u,p=a*c,h=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=d+p*l,t[5]=f-h*l,t[9]=-a*s,t[2]=h-f*l,t[6]=p+d*l,t[10]=o*s}else if(e.order==="YXZ"){const f=s*c,d=s*u,p=l*c,h=l*u;t[0]=f+h*a,t[4]=p*a-d,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=d*a-p,t[6]=h+f*a,t[10]=o*s}else if(e.order==="ZXY"){const f=s*c,d=s*u,p=l*c,h=l*u;t[0]=f-h*a,t[4]=-o*u,t[8]=p+d*a,t[1]=d+p*a,t[5]=o*c,t[9]=h-f*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if(e.order==="ZYX"){const f=o*c,d=o*u,p=a*c,h=a*u;t[0]=s*c,t[4]=p*l-d,t[8]=f*l+h,t[1]=s*u,t[5]=h*l+f,t[9]=d*l-p,t[2]=-l,t[6]=a*s,t[10]=o*s}else if(e.order==="YZX"){const f=o*s,d=o*l,p=a*s,h=a*l;t[0]=s*c,t[4]=h-f*u,t[8]=p*u+d,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=d*u+p,t[10]=f-h*u}else if(e.order==="XZY"){const f=o*s,d=o*l,p=a*s,h=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=f*u+h,t[5]=o*c,t[9]=d*u-p,t[2]=p*u-d,t[6]=a*c,t[10]=h*u+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose($Qe,e,DQe)},lookAt:function(e,t,n){const r=this.elements;return Ra.subVectors(e,t),Ra.lengthSq()===0&&(Ra.z=1),Ra.normalize(),df.crossVectors(n,Ra),df.lengthSq()===0&&(Math.abs(n.z)===1?Ra.x+=1e-4:Ra.z+=1e-4,Ra.normalize(),df.crossVectors(n,Ra)),df.normalize(),Vw.crossVectors(Ra,df),r[0]=df.x,r[4]=Vw.x,r[8]=Ra.x,r[1]=df.y,r[5]=Vw.y,r[9]=Ra.y,r[2]=df.z,r[6]=Vw.z,r[10]=Ra.z,this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],f=n[9],d=n[13],p=n[2],h=n[6],g=n[10],v=n[14],m=n[3],y=n[7],_=n[11],b=n[15],x=r[0],w=r[4],S=r[8],A=r[12],C=r[1],k=r[5],O=r[9],T=r[13],B=r[2],R=r[6],P=r[10],D=r[14],z=r[3],N=r[7],H=r[11],J=r[15];return i[0]=o*x+a*C+s*B+l*z,i[4]=o*w+a*k+s*R+l*N,i[8]=o*S+a*O+s*P+l*H,i[12]=o*A+a*T+s*D+l*J,i[1]=c*x+u*C+f*B+d*z,i[5]=c*w+u*k+f*R+d*N,i[9]=c*S+u*O+f*P+d*H,i[13]=c*A+u*T+f*D+d*J,i[2]=p*x+h*C+g*B+v*z,i[6]=p*w+h*k+g*R+v*N,i[10]=p*S+h*O+g*P+v*H,i[14]=p*A+h*T+g*D+v*J,i[3]=m*x+y*C+_*B+b*z,i[7]=m*w+y*k+_*R+b*N,i[11]=m*S+y*O+_*P+b*H,i[15]=m*A+y*T+_*D+b*J,this},multiplyScalar:function(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],f=e[10],d=e[14],p=e[3],h=e[7],g=e[11],v=e[15];return p*(+i*s*u-r*l*u-i*a*f+n*l*f+r*a*d-n*s*d)+h*(+t*s*d-t*l*f+i*o*f-r*o*d+r*l*c-i*s*c)+g*(+t*l*u-t*a*d-i*o*u+n*o*d+i*a*c-n*l*c)+v*(-r*a*c-t*s*u+t*a*f+r*o*u-n*o*f+n*s*c)},transpose:function(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){t!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],c=r[5],u=r[6],f=r[7],d=r[8],p=r[9],h=r[10],g=r[11],v=r[12],m=r[13],y=r[14],_=r[15],b=p*y*f-m*h*f+m*u*g-c*y*g-p*u*_+c*h*_,x=v*h*f-d*y*f-v*u*g+l*y*g+d*u*_-l*h*_,w=d*m*f-v*p*f+v*c*g-l*m*g-d*c*_+l*p*_,S=v*p*u-d*m*u-v*c*h+l*m*h+d*c*y-l*p*y,A=i*b+o*x+a*w+s*S;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/A;return n[0]=b*C,n[1]=(m*h*s-p*y*s-m*a*g+o*y*g+p*a*_-o*h*_)*C,n[2]=(c*y*s-m*u*s+m*a*f-o*y*f-c*a*_+o*u*_)*C,n[3]=(p*u*s-c*h*s-p*a*f+o*h*f+c*a*g-o*u*g)*C,n[4]=x*C,n[5]=(d*y*s-v*h*s+v*a*g-i*y*g-d*a*_+i*h*_)*C,n[6]=(v*u*s-l*y*s-v*a*f+i*y*f+l*a*_-i*u*_)*C,n[7]=(l*h*s-d*u*s+d*a*f-i*h*f-l*a*g+i*u*g)*C,n[8]=w*C,n[9]=(v*p*s-d*m*s-v*o*g+i*m*g+d*o*_-i*p*_)*C,n[10]=(l*m*s-v*c*s+v*o*f-i*m*f-l*o*_+i*c*_)*C,n[11]=(d*c*s-l*p*s-d*o*f+i*p*f+l*o*g-i*c*g)*C,n[12]=S*C,n[13]=(d*m*a-v*p*a+v*o*h-i*m*h-d*o*y+i*p*y)*C,n[14]=(v*c*a-l*m*a-v*o*u+i*m*u+l*o*y-i*c*y)*C,n[15]=(l*p*a-d*c*a+d*o*u-i*p*u-l*o*h+i*c*h)*C,this},scale:function(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,f=i*l,d=i*c,p=i*u,h=o*c,g=o*u,v=a*u,m=s*l,y=s*c,_=s*u,b=n.x,x=n.y,w=n.z;return r[0]=(1-(h+v))*b,r[1]=(d+_)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(d-_)*x,r[5]=(1-(f+v))*x,r[6]=(g+m)*x,r[7]=0,r[8]=(p+y)*w,r[9]=(g-m)*w,r[10]=(1-(f+h))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){const r=this.elements;let i=rm.set(r[0],r[1],r[2]).length(),o=rm.set(r[4],r[5],r[6]).length(),a=rm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],tl.copy(this);const l=1/i,c=1/o,u=1/a;return tl.elements[0]*=l,tl.elements[1]*=l,tl.elements[2]*=l,tl.elements[4]*=c,tl.elements[5]*=c,tl.elements[6]*=c,tl.elements[8]*=u,tl.elements[9]*=u,tl.elements[10]*=u,t.setFromRotationMatrix(tl),n.x=i,n.y=o,n.z=a,this},makePerspective:function(e,t,n,r,i,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),f=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,f=(n+r)*l,d=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});const z9=new lt,U9=new lr;function md(e=0,t=0,n=0,r=md.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}md.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];md.DefaultOrder="XYZ";Object.defineProperties(md.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}});Object.assign(md.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){const r=un.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],l=i[1],c=i[5],u=i[9],f=i[2],d=i[6],p=i[10];switch(t=t||this._order,t){case"XYZ":this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return z9.makeRotationFromQuaternion(e),this.setFromRotationMatrix(z9,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return U9.setFromEuler(this),this.setFromQuaternion(U9,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new V(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});function wN(){this.mask=1}Object.assign(wN.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return(this.mask&e.mask)!==0}});let BQe=0;const V9=new V,im=new lr,Xc=new lt,Hw=new V,iy=new V,NQe=new V,FQe=new lr,H9=new V(1,0,0),G9=new V(0,1,0),W9=new V(0,0,1),jQe={type:"added"},zQe={type:"removed"};function Ct(){Object.defineProperty(this,"id",{value:BQe++}),this.uuid=un.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ct.DefaultUp.clone();const e=new V,t=new md,n=new lr,r=new V(1,1,1);function i(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(i),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new lt},normalMatrix:{value:new oo}}),this.matrix=new lt,this.matrixWorld=new lt,this.matrixAutoUpdate=Ct.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new wN,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Ct.DefaultUp=new V(0,1,0);Ct.DefaultMatrixAutoUpdate=!0;Ct.prototype=Object.assign(Object.create(Ju.prototype),{constructor:Ct,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return im.setFromAxisAngle(e,t),this.quaternion.multiply(im),this},rotateOnWorldAxis:function(e,t){return im.setFromAxisAngle(e,t),this.quaternion.premultiply(im),this},rotateX:function(e){return this.rotateOnAxis(H9,e)},rotateY:function(e){return this.rotateOnAxis(G9,e)},rotateZ:function(e){return this.rotateOnAxis(W9,e)},translateOnAxis:function(e,t){return V9.copy(e).applyQuaternion(this.quaternion),this.position.add(V9.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(H9,e)},translateY:function(e){return this.translateOnAxis(G9,e)},translateZ:function(e){return this.translateOnAxis(W9,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Xc.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?Hw.copy(e):Hw.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),iy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xc.lookAt(iy,Hw,this.up):Xc.lookAt(Hw,iy,this.up),this.quaternion.setFromRotationMatrix(Xc),r&&(Xc.extractRotation(r.matrixWorld),im.setFromRotationMatrix(Xc),this.quaternion.premultiply(im.inverse()))},add:function(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(jQe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(zQe)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Xc.getInverse(this.matrixWorld),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Xc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Xc),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}},getWorldPosition:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new V),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new lr),this.updateMatrixWorld(!0),this.matrixWorld.decompose(iy,e,NQe),e},getWorldScale:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new V),this.updateMatrixWorld(!0),this.matrixWorld.decompose(iy,FQe,e),e},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new V),this.updateMatrixWorld(!0);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON());function i(a,s){return a[s.uuid]===void 0&&(a[s.uuid]=s.toJSON(e)),s.uuid}if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const s=a.shapes;if(Array.isArray(s))for(let l=0,c=s.length;l<c;l++){const u=s[l];i(e.shapes,u)}else i(e.shapes,s)}}if(this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let s=0,l=this.material.length;s<l;s++)a.push(i(e.materials,this.material[s]));r.material=a}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(t){const a=o(e.geometries),s=o(e.materials),l=o(e.textures),c=o(e.images),u=o(e.shapes);a.length>0&&(n.geometries=a),s.length>0&&(n.materials=s),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),u.length>0&&(n.shapes=u)}return n.object=r,n;function o(a){const s=[];for(const l in a){const c=a[l];delete c.metadata,s.push(c)}return s}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(t===void 0&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}});function Mv(){Ct.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Mv.prototype=Object.assign(Object.create(Ct.prototype),{constructor:Mv,isScene:!0,copy:function(e,t){return Ct.prototype.copy.call(this,e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){const t=Ct.prototype.toJSON.call(this,e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.environment!==null&&(t.object.environment=this.environment.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Yc=[new V,new V,new V,new V,new V,new V,new V,new V],oy=new V,MI=new cr,om=new V,am=new V,sm=new V,pf=new V,hf=new V,Gd=new V,ay=new V,Gw=new V,Ww=new V,Wd=new V;function cr(e,t){this.min=e!==void 0?e:new V(1/0,1/0,1/0),this.max=t!==void 0?t:new V(-1/0,-1/0,-1/0)}Object.assign(cr.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.length;s<l;s+=3){const c=e[s],u=e[s+1],f=e[s+2];c<t&&(t=c),u<n&&(n=u),f<r&&(r=f),c>i&&(i=c),u>o&&(o=u),f>a&&(a=f)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,l=e.count;s<l;s++){const c=e.getX(s),u=e.getY(s),f=e.getZ(s);c<t&&(t=c),u<n&&(n=u),f<r&&(r=f),c>i&&(i=c),u>o&&(o=u),f>a&&(a=f)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){const n=oy.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new V),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new V),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),MI.copy(t.boundingBox),MI.applyMatrix4(e.matrixWorld),this.union(MI));const n=e.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return t===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new V),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,oy),oy.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(ay),Gw.subVectors(this.max,ay),om.subVectors(e.a,ay),am.subVectors(e.b,ay),sm.subVectors(e.c,ay),pf.subVectors(am,om),hf.subVectors(sm,am),Gd.subVectors(om,sm);let t=[0,-pf.z,pf.y,0,-hf.z,hf.y,0,-Gd.z,Gd.y,pf.z,0,-pf.x,hf.z,0,-hf.x,Gd.z,0,-Gd.x,-pf.y,pf.x,0,-hf.y,hf.x,0,-Gd.y,Gd.x,0];return!EI(t,om,am,sm,Gw)||(t=[1,0,0,0,1,0,0,0,1],!EI(t,om,am,sm,Gw))?!1:(Ww.crossVectors(pf,hf),t=[Ww.x,Ww.y,Ww.z],EI(t,om,am,sm,Gw))},clampPoint:function(e,t){return t===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new V),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return oy.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(oy).length()*.5,e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()?this:(Yc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Yc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Yc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Yc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Yc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Yc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Yc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Yc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Yc),this)},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function EI(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){Wd.fromArray(e,o);const s=i.x*Math.abs(Wd.x)+i.y*Math.abs(Wd.y)+i.z*Math.abs(Wd.z),l=t.dot(Wd),c=n.dot(Wd),u=r.dot(Wd);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>s)return!1}return!0}const UQe=new cr;function Qu(e,t){this.center=e!==void 0?e:new V,this.radius=t!==void 0?t:-1}Object.assign(Qu.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){const n=this.center;t!==void 0?n.copy(t):UQe.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){const n=this.center.distanceToSquared(e);return t===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new V),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new cr),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});const Kc=new V,TI=new V,qw=new V,mf=new V,OI=new V,Xw=new V,II=new V;function P0(e,t){this.origin=e!==void 0?e:new V,this.direction=t!==void 0?t:new V(0,0,-1)}Object.assign(P0.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return t===void 0&&(console.warn("THREE.Ray: .at() target is now required"),t=new V),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Kc)),this},closestPointToPoint:function(e,t){t===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new V),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){const t=Kc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Kc.copy(this.direction).multiplyScalar(t).add(this.origin),Kc.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,r){TI.copy(e).add(t).multiplyScalar(.5),qw.copy(t).sub(e).normalize(),mf.copy(this.origin).sub(TI);const i=e.distanceTo(t)*.5,o=-this.direction.dot(qw),a=mf.dot(this.direction),s=-mf.dot(qw),l=mf.lengthSq(),c=Math.abs(1-o*o);let u,f,d,p;if(c>0)if(u=o*s-a,f=o*a-s,p=i*c,u>=0)if(f>=-p)if(f<=p){const h=1/c;u*=h,f*=h,d=u*(u+o*f+2*a)+f*(o*u+f+2*s)+l}else f=i,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*s)+l;else f=-i,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*s)+l;else f<=-p?(u=Math.max(0,-(-o*i+a)),f=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+f*(f+2*s)+l):f<=p?(u=0,f=Math.min(Math.max(-i,-s),i),d=f*(f+2*s)+l):(u=Math.max(0,-(o*i+a)),f=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+f*(f+2*s)+l);else f=o>0?-i:i,u=Math.max(0,-(o*f+a)),d=-u*u+f*(f+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(qw).multiplyScalar(f).add(TI),d},intersectSphere:function(e,t){Kc.subVectors(e.center,this.origin);const n=Kc.dot(this.direction),r=Kc.dot(Kc)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)},intersectsPlane:function(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,f=this.origin;return l>=0?(n=(e.min.x-f.x)*l,r=(e.max.x-f.x)*l):(n=(e.max.x-f.x)*l,r=(e.min.x-f.x)*l),c>=0?(i=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(i=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),n>o||i>r||((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),u>=0?(a=(e.min.z-f.z)*u,s=(e.max.z-f.z)*u):(a=(e.max.z-f.z)*u,s=(e.min.z-f.z)*u),n>s||a>r)||((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0)?null:this.at(n>=0?n:r,t)},intersectsBox:function(e){return this.intersectBox(e,Kc)!==null},intersectTriangle:function(e,t,n,r,i){OI.subVectors(t,e),Xw.subVectors(n,e),II.crossVectors(OI,Xw);let o=this.direction.dot(II),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;mf.subVectors(this.origin,e);const s=a*this.direction.dot(Xw.crossVectors(mf,Xw));if(s<0)return null;const l=a*this.direction.dot(OI.cross(mf));if(l<0||s+l>o)return null;const c=-a*mf.dot(II);return c<0?null:this.at(c/o,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});const RI=new V,VQe=new V,HQe=new oo;function sc(e,t){this.normal=e!==void 0?e:new V(1,0,0),this.constant=t!==void 0?t:0}Object.assign(sc.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){const r=RI.subVectors(n,t).cross(VQe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return t===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new V),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){t===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new V);const n=e.delta(RI),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):void 0;const i=-(e.start.dot(this.normal)+this.constant)/r;if(!(i<0||i>1))return t.copy(n).multiplyScalar(i).add(e.start)},intersectsLine:function(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new V),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){const n=t||HQe.getNormalMatrix(e),r=this.coplanarPoint(RI).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});const sl=new V,su=new V,kI=new V,Zc=new V,lm=new V,cm=new V,q9=new V,LI=new V,$I=new V,DI=new V;function io(e,t,n){this.a=e!==void 0?e:new V,this.b=t!==void 0?t:new V,this.c=n!==void 0?n:new V}Object.assign(io,{getNormal:function(e,t,n,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new V),r.subVectors(n,t),sl.subVectors(e,t),r.cross(sl);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(e,t,n,r,i){sl.subVectors(r,t),su.subVectors(n,t),kI.subVectors(e,t);const o=sl.dot(sl),a=sl.dot(su),s=sl.dot(kI),l=su.dot(su),c=su.dot(kI),u=o*l-a*a;if(i===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new V),u===0)return i.set(-2,-1,-1);const f=1/u,d=(l*s-a*c)*f,p=(o*c-a*s)*f;return i.set(1-d-p,p,d)},containsPoint:function(e,t,n,r){return io.getBarycoord(e,t,n,r,Zc),Zc.x>=0&&Zc.y>=0&&Zc.x+Zc.y<=1},getUV:function(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,Zc),s.set(0,0),s.addScaledVector(i,Zc.x),s.addScaledVector(o,Zc.y),s.addScaledVector(a,Zc.z),s},isFrontFacing:function(e,t,n,r){return sl.subVectors(n,t),su.subVectors(e,t),sl.cross(su).dot(r)<0}});Object.assign(io.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return sl.subVectors(this.c,this.b),su.subVectors(this.a,this.b),sl.cross(su).length()*.5},getMidpoint:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new V),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return io.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new sc),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return io.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return io.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return io.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return io.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){t===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new V);const n=this.a,r=this.b,i=this.c;let o,a;lm.subVectors(r,n),cm.subVectors(i,n),LI.subVectors(e,n);const s=lm.dot(LI),l=cm.dot(LI);if(s<=0&&l<=0)return t.copy(n);$I.subVectors(e,r);const c=lm.dot($I),u=cm.dot($I);if(c>=0&&u<=c)return t.copy(r);const f=s*u-c*l;if(f<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(lm,o);DI.subVectors(e,i);const d=lm.dot(DI),p=cm.dot(DI);if(p>=0&&d<=p)return t.copy(i);const h=d*l-s*p;if(h<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(cm,a);const g=c*p-d*u;if(g<=0&&u-c>=0&&d-p>=0)return q9.subVectors(i,r),a=(u-c)/(u-c+(d-p)),t.copy(r).addScaledVector(q9,a);const v=1/(g+h+f);return o=h*v,a=f*v,t.copy(n).addScaledVector(lm,o).addScaledVector(cm,a)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});const yie={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},nl={h:0,s:0,l:0},Yw={h:0,s:0,l:0};function ht(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}function BI(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*6*(2/3-n):e}function NI(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function FI(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}Object.assign(ht.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=un.euclideanModulo(e,1),t=un.clamp(t,0,1),n=un.clamp(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=BI(i,r,e+1/3),this.g=BI(i,r,e),this.b=BI(i,r,e-1/3)}return this},setStyle:function(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let r;const i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){const a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,l)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){const r=n[1],i=r.length;if(i===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(i===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){const t=yie[e];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return t===void 0&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){t===void 0&&(t=2);const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=NI(e.r),this.g=NI(e.g),this.b=NI(e.b),this},copyLinearToSRGB:function(e){return this.r=FI(e.r),this.g=FI(e.g),this.b=FI(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);let a,s;const l=(o+i)/2;if(o===i)a=0,s=0;else{const c=i-o;switch(s=l<=.5?c/(i+o):c/(2-i-o),i){case t:a=(n-r)/c+(n<r?6:0);break;case n:a=(r-t)/c+2;break;case r:a=(t-n)/c+4;break}a/=6}return e.h=a,e.s=s,e.l=l,e},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(nl),nl.h+=e,nl.s+=t,nl.l+=n,this.setHSL(nl.h,nl.s,nl.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(nl),e.getHSL(Yw);const n=un.lerp(nl.h,Yw.h,t),r=un.lerp(nl.s,Yw.s,t),i=un.lerp(nl.l,Yw.l,t);return this.setHSL(n,r,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return t===void 0&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},fromBufferAttribute:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}});ht.NAMES=yie;function Lp(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new V,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new ht,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o!==void 0?o:0}Object.assign(Lp.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});let GQe=0;function tn(){Object.defineProperty(this,"id",{value:GQe++}),this.uuid=un.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=nd,this.side=C0,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=uie,this.blendDst=fie,this.blendEquation=Dm,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=xL,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kQe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=AI,this.stencilZFail=AI,this.stencilZPass=AI,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}tn.prototype=Object.assign(Object.create(Ju.prototype),{constructor:tn,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===cie;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}},toJSON:function(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==nd&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==C0&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function r(i){const o=[];for(const a in i){const s=i[a];delete s.metadata,o.push(s)}return o}if(t){const i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(tn.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function kl(e){tn.call(this),this.type="MeshBasicMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}kl.prototype=Object.create(tn.prototype);kl.prototype.constructor=kl;kl.prototype.isMeshBasicMaterial=!0;kl.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const yr=new V,Kw=new rt;function Dt(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=nT,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(Dt.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(Dt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ht),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new rt),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new V),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Jn),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},applyMatrix3:function(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Kw.fromBufferAttribute(this,t),Kw.applyMatrix3(e),this.setXY(t,Kw.x,Kw.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)yr.fromBufferAttribute(this,t),yr.applyMatrix3(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)yr.x=this.getX(t),yr.y=this.getY(t),yr.z=this.getZ(t),yr.applyMatrix4(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)yr.x=this.getX(t),yr.y=this.getY(t),yr.z=this.getZ(t),yr.applyNormalMatrix(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)yr.x=this.getX(t),yr.y=this.getY(t),yr.z=this.getZ(t),yr.transformDirection(e),this.setXYZ(t,yr.x,yr.y,yr.z);return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function CL(e,t,n){Dt.call(this,new Int8Array(e),t,n)}CL.prototype=Object.create(Dt.prototype);CL.prototype.constructor=CL;function AL(e,t,n){Dt.call(this,new Uint8Array(e),t,n)}AL.prototype=Object.create(Dt.prototype);AL.prototype.constructor=AL;function PL(e,t,n){Dt.call(this,new Uint8ClampedArray(e),t,n)}PL.prototype=Object.create(Dt.prototype);PL.prototype.constructor=PL;function ML(e,t,n){Dt.call(this,new Int16Array(e),t,n)}ML.prototype=Object.create(Dt.prototype);ML.prototype.constructor=ML;function w1(e,t,n){Dt.call(this,new Uint16Array(e),t,n)}w1.prototype=Object.create(Dt.prototype);w1.prototype.constructor=w1;function EL(e,t,n){Dt.call(this,new Int32Array(e),t,n)}EL.prototype=Object.create(Dt.prototype);EL.prototype.constructor=EL;function S1(e,t,n){Dt.call(this,new Uint32Array(e),t,n)}S1.prototype=Object.create(Dt.prototype);S1.prototype.constructor=S1;function Pt(e,t,n){Dt.call(this,new Float32Array(e),t,n)}Pt.prototype=Object.create(Dt.prototype);Pt.prototype.constructor=Pt;function TL(e,t,n){Dt.call(this,new Float64Array(e),t,n)}TL.prototype=Object.create(Dt.prototype);TL.prototype.constructor=TL;function bie(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(bie.prototype,{computeGroups:function(e){const t=[];let n,r,i;const o=e.faces;for(r=0;r<o.length;r++){const a=o[r];a.materialIndex!==i&&(i=a.materialIndex,n!==void 0&&(n.count=r*3-n.start,t.push(n)),n={start:r*3,materialIndex:i})}n!==void 0&&(n.count=r*3-n.start,t.push(n)),this.groups=t},fromGeometry:function(e){const t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,a=e.morphTargets,s=a.length;let l;if(s>0){l=[];for(let v=0;v<s;v++)l[v]={name:a[v].name,data:[]};this.morphTargets.position=l}const c=e.morphNormals,u=c.length;let f;if(u>0){f=[];for(let v=0;v<u;v++)f[v]={name:c[v].name,data:[]};this.morphTargets.normal=f}const d=e.skinIndices,p=e.skinWeights,h=d.length===n.length,g=p.length===n.length;n.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let v=0;v<t.length;v++){const m=t[v];this.vertices.push(n[m.a],n[m.b],n[m.c]);const y=m.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{const b=m.normal;this.normals.push(b,b,b)}const _=m.vertexColors;if(_.length===3)this.colors.push(_[0],_[1],_[2]);else{const b=m.color;this.colors.push(b,b,b)}if(i===!0){const b=r[0][v];b!==void 0?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",v),this.uvs.push(new rt,new rt,new rt))}if(o===!0){const b=r[1][v];b!==void 0?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",v),this.uvs2.push(new rt,new rt,new rt))}for(let b=0;b<s;b++){const x=a[b].vertices;l[b].data.push(x[m.a],x[m.b],x[m.c])}for(let b=0;b<u;b++){const x=c[b].vertexNormals[v];f[b].data.push(x.a,x.b,x.c)}h&&this.skinIndices.push(d[m.a],d[m.b],d[m.c]),g&&this.skinWeights.push(p[m.a],p[m.b],p[m.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}});function _ie(e){if(e.length===0)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}let WQe=1;const Vl=new lt,jI=new Ct,um=new V,ka=new cr,sy=new cr,Di=new V;function At(){Object.defineProperty(this,"id",{value:WQe+=2}),this.uuid=un.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}At.prototype=Object.assign(Object.create(Ju.prototype),{constructor:At,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(_ie(e)>65535?S1:w1)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const i=new oo().getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return Vl.makeRotationX(e),this.applyMatrix4(Vl),this},rotateY:function(e){return Vl.makeRotationY(e),this.applyMatrix4(Vl),this},rotateZ:function(e){return Vl.makeRotationZ(e),this.applyMatrix4(Vl),this},translate:function(e,t,n){return Vl.makeTranslation(e,t,n),this.applyMatrix4(Vl),this},scale:function(e,t,n){return Vl.makeScale(e,t,n),this.applyMatrix4(Vl),this},lookAt:function(e){return jI.lookAt(e),jI.updateMatrix(),this.applyMatrix4(jI.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(um).negate(),this.translate(um.x,um.y,um.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const n=new Pt(t.vertices.length*3,3),r=new Pt(t.colors.length*3,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const i=new Pt(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Pt(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}if(t.verticesNeedUpdate===!0){const n=this.attributes.position;n!==void 0&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1}if(t.normalsNeedUpdate===!0){const n=this.attributes.normal;n!==void 0&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1}if(t.colorsNeedUpdate===!0){const n=this.attributes.color;n!==void 0&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const n=this.attributes.uv;n!==void 0&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const n=this.attributes.lineDistance;n!==void 0&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new bie().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(e.vertices.length*3);if(this.setAttribute("position",new Dt(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const n=new Float32Array(e.normals.length*3);this.setAttribute("normal",new Dt(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const n=new Float32Array(e.colors.length*3);this.setAttribute("color",new Dt(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const n=new Float32Array(e.uvs.length*2);this.setAttribute("uv",new Dt(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const n=new Float32Array(e.uvs2.length*2);this.setAttribute("uv2",new Dt(n,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const n in e.morphTargets){const r=[],i=e.morphTargets[n];for(let o=0,a=i.length;o<a;o++){const s=i[o],l=new Pt(s.data.length*3,3);l.name=s.name,r.push(l.copyVector3sArray(s.data))}this.morphAttributes[n]=r}if(e.skinIndices.length>0){const n=new Pt(e.skinIndices.length*4,4);this.setAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const n=new Pt(e.skinWeights.length*4,4);this.setAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new cr);const e=this.attributes.position,t=this.morphAttributes.position;if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const i=t[n];ka.setFromBufferAttribute(i),this.morphTargetsRelative?(Di.addVectors(this.boundingBox.min,ka.min),this.boundingBox.expandByPoint(Di),Di.addVectors(this.boundingBox.max,ka.max),this.boundingBox.expandByPoint(Di)):(this.boundingBox.expandByPoint(ka.min),this.boundingBox.expandByPoint(ka.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Qu);const e=this.attributes.position,t=this.morphAttributes.position;if(e){const n=this.boundingSphere.center;if(ka.setFromBufferAttribute(e),t)for(let i=0,o=t.length;i<o;i++){const a=t[i];sy.setFromBufferAttribute(a),this.morphTargetsRelative?(Di.addVectors(ka.min,sy.min),ka.expandByPoint(Di),Di.addVectors(ka.max,sy.max),ka.expandByPoint(Di)):(ka.expandByPoint(sy.min),ka.expandByPoint(sy.max))}ka.getCenter(n);let r=0;for(let i=0,o=e.count;i<o;i++)Di.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(Di));if(t)for(let i=0,o=t.length;i<o;i++){const a=t[i],s=this.morphTargetsRelative;for(let l=0,c=a.count;l<c;l++)Di.fromBufferAttribute(a,l),s&&(um.fromBufferAttribute(e,l),Di.add(um)),r=Math.max(r,n.distanceToSquared(Di))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Dt(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let f=0,d=n.count;f<d;f++)n.setXYZ(f,0,0,0);const r=new V,i=new V,o=new V,a=new V,s=new V,l=new V,c=new V,u=new V;if(e)for(let f=0,d=e.count;f<d;f+=3){const p=e.getX(f+0),h=e.getX(f+1),g=e.getX(f+2);r.fromBufferAttribute(t,p),i.fromBufferAttribute(t,h),o.fromBufferAttribute(t,g),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,p),s.fromBufferAttribute(n,h),l.fromBufferAttribute(n,g),a.add(c),s.add(c),l.add(c),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(g,l.x,l.y,l.z)}else for(let f=0,d=t.count;f<d;f+=3)r.fromBufferAttribute(t,f+0),i.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(f+0,c.x,c.y,c.z),n.setXYZ(f+1,c.x,c.y,c.z),n.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(e.attributes[r]===void 0)continue;const o=n[r].array,a=e.attributes[r],s=a.array,l=a.itemSize*t,c=Math.min(s.length,o.length-l);for(let u=0,f=l;u<c;u++,f++)o[f]=s[u]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Di.fromBufferAttribute(e,t),Di.normalize(),e.setXYZ(t,Di.x,Di.y,Di.z)},toNonIndexed:function(){function e(a,s){const l=a.array,c=a.itemSize,u=a.normalized,f=new l.constructor(s.length*c);let d=0,p=0;for(let h=0,g=s.length;h<g;h++){d=s[h]*c;for(let v=0;v<c;v++)f[p++]=l[d++]}return new Dt(f,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new At,n=this.index.array,r=this.attributes;for(const a in r){const s=r[a],l=e(s,n);t.setAttribute(a,l)}const i=this.morphAttributes;for(const a in i){const s=[],l=i[a];for(let c=0,u=l.length;c<u;c++){const f=l[c],d=e(f,n);s.push(d)}t.morphAttributes[a]=s}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const l=o[a];t.addGroup(l.start,l.count,l.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const s=this.parameters;for(const l in s)s[l]!==void 0&&(e[l]=s[l]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const l=n[s],c=l.toJSON(e.data);l.name!==""&&(c.name=l.name),e.data.attributes[s]=c}const r={};let i=!1;for(const s in this.morphAttributes){const l=this.morphAttributes[s],c=[];for(let u=0,f=l.length;u<f;u++){const d=l[u],p=d.toJSON(e.data);d.name!==""&&(p.name=d.name),c.push(p)}c.length>0&&(r[s]=c,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e},clone:function(){return new At().copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const c=r[l];this.setAttribute(l,c.clone(t))}const i=e.morphAttributes;for(const l in i){const c=[],u=i[l];for(let f=0,d=u.length;f<d;f++)c.push(u[f].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const u=o[l];this.addGroup(u.start,u.count,u.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const s=e.boundingSphere;return s!==null&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const X9=new lt,qd=new P0,zI=new Qu,gf=new V,vf=new V,yf=new V,UI=new V,VI=new V,HI=new V,Zw=new V,Jw=new V,Qw=new V,cg=new rt,ug=new rt,fg=new rt,Sb=new V,e2=new V;function hr(e,t){Ct.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new At,this.material=t!==void 0?t:new kl,this.updateMorphTargets()}hr.prototype=Object.assign(Object.create(Ct.prototype),{constructor:hr,isMesh:!0,copy:function(e){return Ct.prototype.copy.call(this,e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=r.length;i<o;i++){const a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(r===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),zI.copy(n.boundingSphere),zI.applyMatrix4(i),e.ray.intersectsSphere(zI)===!1)||(X9.getInverse(i),qd.copy(e.ray).applyMatrix4(X9),n.boundingBox!==null&&qd.intersectsBox(n.boundingBox)===!1))return;let o;if(n.isBufferGeometry){const a=n.index,s=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,f=n.attributes.uv2,d=n.groups,p=n.drawRange;if(a!==null)if(Array.isArray(r))for(let h=0,g=d.length;h<g;h++){const v=d[h],m=r[v.materialIndex],y=Math.max(v.start,p.start),_=Math.min(v.start+v.count,p.start+p.count);for(let b=y,x=_;b<x;b+=3){const w=a.getX(b),S=a.getX(b+1),A=a.getX(b+2);o=t2(this,m,e,qd,s,l,c,u,f,w,S,A),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const h=Math.max(0,p.start),g=Math.min(a.count,p.start+p.count);for(let v=h,m=g;v<m;v+=3){const y=a.getX(v),_=a.getX(v+1),b=a.getX(v+2);o=t2(this,r,e,qd,s,l,c,u,f,y,_,b),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}else if(s!==void 0)if(Array.isArray(r))for(let h=0,g=d.length;h<g;h++){const v=d[h],m=r[v.materialIndex],y=Math.max(v.start,p.start),_=Math.min(v.start+v.count,p.start+p.count);for(let b=y,x=_;b<x;b+=3){const w=b,S=b+1,A=b+2;o=t2(this,m,e,qd,s,l,c,u,f,w,S,A),o&&(o.faceIndex=Math.floor(b/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const h=Math.max(0,p.start),g=Math.min(s.count,p.start+p.count);for(let v=h,m=g;v<m;v+=3){const y=v,_=v+1,b=v+2;o=t2(this,r,e,qd,s,l,c,u,f,y,_,b),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}}else if(n.isGeometry){const a=Array.isArray(r),s=n.vertices,l=n.faces;let c;const u=n.faceVertexUvs[0];u.length>0&&(c=u);for(let f=0,d=l.length;f<d;f++){const p=l[f],h=a?r[p.materialIndex]:r;if(h===void 0)continue;const g=s[p.a],v=s[p.b],m=s[p.c];if(o=xie(this,h,e,qd,g,v,m,Sb),o){if(c&&c[f]){const y=c[f];cg.copy(y[0]),ug.copy(y[1]),fg.copy(y[2]),o.uv=io.getUV(Sb,g,v,m,cg,ug,fg,new rt)}o.face=p,o.faceIndex=f,t.push(o)}}}}});function xie(e,t,n,r,i,o,a,s){let l;if(t.side===wi?l=r.intersectTriangle(a,o,i,!0,s):l=r.intersectTriangle(i,o,a,t.side!==Rx,s),l===null)return null;e2.copy(s),e2.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(e2);return c<n.near||c>n.far?null:{distance:c,point:e2.clone(),object:e}}function t2(e,t,n,r,i,o,a,s,l,c,u,f){gf.fromBufferAttribute(i,c),vf.fromBufferAttribute(i,u),yf.fromBufferAttribute(i,f);const d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){Zw.set(0,0,0),Jw.set(0,0,0),Qw.set(0,0,0);for(let h=0,g=o.length;h<g;h++){const v=d[h],m=o[h];v!==0&&(UI.fromBufferAttribute(m,c),VI.fromBufferAttribute(m,u),HI.fromBufferAttribute(m,f),a?(Zw.addScaledVector(UI,v),Jw.addScaledVector(VI,v),Qw.addScaledVector(HI,v)):(Zw.addScaledVector(UI.sub(gf),v),Jw.addScaledVector(VI.sub(vf),v),Qw.addScaledVector(HI.sub(yf),v)))}gf.add(Zw),vf.add(Jw),yf.add(Qw)}e.isSkinnedMesh&&(e.boneTransform(c,gf),e.boneTransform(u,vf),e.boneTransform(f,yf));const p=xie(e,t,n,r,gf,vf,yf,Sb);if(p){s&&(cg.fromBufferAttribute(s,c),ug.fromBufferAttribute(s,u),fg.fromBufferAttribute(s,f),p.uv=io.getUV(Sb,gf,vf,yf,cg,ug,fg,new rt)),l&&(cg.fromBufferAttribute(l,c),ug.fromBufferAttribute(l,u),fg.fromBufferAttribute(l,f),p.uv2=io.getUV(Sb,gf,vf,yf,cg,ug,fg,new rt));const h=new Lp(c,u,f);io.getNormal(gf,vf,yf,h.normal),p.face=h}return p}let qQe=0;const Hl=new lt,GI=new Ct,n2=new V;function Kt(){Object.defineProperty(this,"id",{value:qQe+=2}),this.uuid=un.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Kt.prototype=Object.assign(Object.create(Ju.prototype),{constructor:Kt,isGeometry:!0,applyMatrix4:function(e){const t=new oo().getNormalMatrix(e);for(let n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(let n=0,r=this.faces.length;n<r;n++){const i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(let o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Hl.makeRotationX(e),this.applyMatrix4(Hl),this},rotateY:function(e){return Hl.makeRotationY(e),this.applyMatrix4(Hl),this},rotateZ:function(e){return Hl.makeRotationZ(e),this.applyMatrix4(Hl),this},translate:function(e,t,n){return Hl.makeTranslation(e,t,n),this.applyMatrix4(Hl),this},scale:function(e,t,n){return Hl.makeScale(e,t,n),this.applyMatrix4(Hl),this},lookAt:function(e){return GI.lookAt(e),GI.updateMatrix(),this.applyMatrix4(GI.matrix),this},fromBufferGeometry:function(e){const t=this,n=e.index!==null?e.index:void 0,r=e.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const i=r.position,o=r.normal,a=r.color,s=r.uv,l=r.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let f=0;f<i.count;f++)t.vertices.push(new V().fromBufferAttribute(i,f)),a!==void 0&&t.colors.push(new ht().fromBufferAttribute(a,f));function c(f,d,p,h){const g=a===void 0?[]:[t.colors[f].clone(),t.colors[d].clone(),t.colors[p].clone()],v=o===void 0?[]:[new V().fromBufferAttribute(o,f),new V().fromBufferAttribute(o,d),new V().fromBufferAttribute(o,p)],m=new Lp(f,d,p,v,g,h);t.faces.push(m),s!==void 0&&t.faceVertexUvs[0].push([new rt().fromBufferAttribute(s,f),new rt().fromBufferAttribute(s,d),new rt().fromBufferAttribute(s,p)]),l!==void 0&&t.faceVertexUvs[1].push([new rt().fromBufferAttribute(l,f),new rt().fromBufferAttribute(l,d),new rt().fromBufferAttribute(l,p)])}const u=e.groups;if(u.length>0)for(let f=0;f<u.length;f++){const d=u[f],p=d.start,h=d.count;for(let g=p,v=p+h;g<v;g+=3)n!==void 0?c(n.getX(g),n.getX(g+1),n.getX(g+2),d.materialIndex):c(g,g+1,g+2,d.materialIndex)}else if(n!==void 0)for(let f=0;f<n.count;f+=3)c(n.getX(f),n.getX(f+1),n.getX(f+2));else for(let f=0;f<i.count;f+=3)c(f,f+1,f+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(n2).negate(),this.translate(n2.x,n2.y,n2.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=t===0?1:1/t,r=new lt;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){const e=new V,t=new V;for(let n=0,r=this.faces.length;n<r;n++){const i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);const t=new Array(this.vertices.length);for(let n=0,r=this.vertices.length;n<r;n++)t[n]=new V;if(e){const n=new V,r=new V;for(let i=0,o=this.faces.length;i<o;i++){const a=this.faces[i],s=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c];n.subVectors(c,l),r.subVectors(s,l),n.cross(r),t[a.a].add(n),t[a.b].add(n),t[a.c].add(n)}}else{this.computeFaceNormals();for(let n=0,r=this.faces.length;n<r;n++){const i=this.faces[n];t[i.a].add(i.normal),t[i.b].add(i.normal),t[i.c].add(i.normal)}}for(let n=0,r=this.vertices.length;n<r;n++)t[n].normalize();for(let n=0,r=this.faces.length;n<r;n++){const i=this.faces[n],o=i.vertexNormals;o.length===3?(o[0].copy(t[i.a]),o[1].copy(t[i.b]),o[2].copy(t[i.c])):(o[0]=t[i.a].clone(),o[1]=t[i.b].clone(),o[2]=t[i.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const n=this.faces[e],r=n.vertexNormals;r.length===3?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,n=this.faces.length;t<n;t++){const r=this.faces[t];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(let i=0,o=r.vertexNormals.length;i<o;i++)r.__originalVertexNormals[i]?r.__originalVertexNormals[i].copy(r.vertexNormals[i]):r.__originalVertexNormals[i]=r.vertexNormals[i].clone()}const e=new Kt;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const i=this.morphNormals[t].faceNormals,o=this.morphNormals[t].vertexNormals;for(let a=0,s=this.faces.length;a<s;a++){const l=new V,c={a:new V,b:new V,c:new V};i.push(l),o.push(c)}}const r=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let i=0,o=this.faces.length;i<o;i++){const a=this.faces[i],s=r.faceNormals[i],l=r.vertexNormals[i];s.copy(a.normal),l.a.copy(a.vertexNormals[0]),l.b.copy(a.vertexNormals[1]),l.c.copy(a.vertexNormals[2])}}for(let t=0,n=this.faces.length;t<n;t++){const r=this.faces[t];r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new cr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Qu),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,l=e.faces,c=this.colors,u=e.colors;n===void 0&&(n=0),t!==void 0&&(r=new oo().getNormalMatrix(t));for(let f=0,d=a.length;f<d;f++){const h=a[f].clone();t!==void 0&&h.applyMatrix4(t),o.push(h)}for(let f=0,d=u.length;f<d;f++)c.push(u[f].clone());for(let f=0,d=l.length;f<d;f++){let p=l[f],h,g,v,m=p.vertexNormals,y=p.vertexColors;h=new Lp(p.a+i,p.b+i,p.c+i),h.normal.copy(p.normal),r!==void 0&&h.normal.applyMatrix3(r).normalize();for(let _=0,b=m.length;_<b;_++)g=m[_].clone(),r!==void 0&&g.applyMatrix3(r).normalize(),h.vertexNormals.push(g);h.color.copy(p.color);for(let _=0,b=y.length;_<b;_++)v=y[_],h.vertexColors.push(v.clone());h.materialIndex=p.materialIndex+n,s.push(h)}for(let f=0,d=e.faceVertexUvs.length;f<d;f++){const p=e.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(let h=0,g=p.length;h<g;h++){const v=p[h],m=[];for(let y=0,_=v.length;y<_;y++)m.push(v[y].clone());this.faceVertexUvs[f].push(m)}}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){const e={},t=[],n=[],i=Math.pow(10,4);for(let s=0,l=this.vertices.length;s<l;s++){const c=this.vertices[s],u=Math.round(c.x*i)+"_"+Math.round(c.y*i)+"_"+Math.round(c.z*i);e[u]===void 0?(e[u]=s,t.push(this.vertices[s]),n[s]=t.length-1):n[s]=n[e[u]]}const o=[];for(let s=0,l=this.faces.length;s<l;s++){const c=this.faces[s];c.a=n[c.a],c.b=n[c.b],c.c=n[c.c];const u=[c.a,c.b,c.c];for(let f=0;f<3;f++)if(u[f]===u[(f+1)%3]){o.push(s);break}}for(let s=o.length-1;s>=0;s--){const l=o[s];this.faces.splice(l,1);for(let c=0,u=this.faceVertexUvs.length;c<u;c++)this.faceVertexUvs[c].splice(l,1)}const a=this.vertices.length-t.length;return this.vertices=t,a},setFromPoints:function(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const r=e[t];this.vertices.push(new V(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let s=0;s<t;s++)e[s]._id=s;function n(s,l){return s.materialIndex-l.materialIndex}e.sort(n);const r=this.faceVertexUvs[0],i=this.faceVertexUvs[1];let o,a;r&&r.length===t&&(o=[]),i&&i.length===t&&(a=[]);for(let s=0;s<t;s++){const l=e[s]._id;o&&o.push(r[l]),a&&a.push(i[l])}o&&(this.faceVertexUvs[0]=o),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){const p=this.parameters;for(const h in p)p[h]!==void 0&&(e[h]=p[h]);return e}const t=[];for(let p=0;p<this.vertices.length;p++){const h=this.vertices[p];t.push(h.x,h.y,h.z)}const n=[],r=[],i={},o=[],a={},s=[],l={};for(let p=0;p<this.faces.length;p++){const h=this.faces[p],g=!0,v=!1,m=this.faceVertexUvs[0][p]!==void 0,y=h.normal.length()>0,_=h.vertexNormals.length>0,b=h.color.r!==1||h.color.g!==1||h.color.b!==1,x=h.vertexColors.length>0;let w=0;if(w=c(w,0,0),w=c(w,1,g),w=c(w,2,v),w=c(w,3,m),w=c(w,4,y),w=c(w,5,_),w=c(w,6,b),w=c(w,7,x),n.push(w),n.push(h.a,h.b,h.c),n.push(h.materialIndex),m){const S=this.faceVertexUvs[0][p];n.push(d(S[0]),d(S[1]),d(S[2]))}if(y&&n.push(u(h.normal)),_){const S=h.vertexNormals;n.push(u(S[0]),u(S[1]),u(S[2]))}if(b&&n.push(f(h.color)),x){const S=h.vertexColors;n.push(f(S[0]),f(S[1]),f(S[2]))}}function c(p,h,g){return g?p|1<<h:p&~(1<<h)}function u(p){const h=p.x.toString()+p.y.toString()+p.z.toString();return i[h]!==void 0||(i[h]=r.length/3,r.push(p.x,p.y,p.z)),i[h]}function f(p){const h=p.r.toString()+p.g.toString()+p.b.toString();return a[h]!==void 0||(a[h]=o.length,o.push(p.getHex())),a[h]}function d(p){const h=p.x.toString()+p.y.toString();return l[h]!==void 0||(l[h]=s.length/2,s.push(p.x,p.y)),l[h]}return e.data={},e.data.vertices=t,e.data.normals=r,o.length>0&&(e.data.colors=o),s.length>0&&(e.data.uvs=[s]),e.data.faces=n,e},clone:function(){return new Kt().copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let f=0,d=t.length;f<d;f++)this.vertices.push(t[f].clone());const n=e.colors;for(let f=0,d=n.length;f<d;f++)this.colors.push(n[f].clone());const r=e.faces;for(let f=0,d=r.length;f<d;f++)this.faces.push(r[f].clone());for(let f=0,d=e.faceVertexUvs.length;f<d;f++){const p=e.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(let h=0,g=p.length;h<g;h++){const v=p[h],m=[];for(let y=0,_=v.length;y<_;y++){const b=v[y];m.push(b.clone())}this.faceVertexUvs[f].push(m)}}const i=e.morphTargets;for(let f=0,d=i.length;f<d;f++){const p={};if(p.name=i[f].name,i[f].vertices!==void 0){p.vertices=[];for(let h=0,g=i[f].vertices.length;h<g;h++)p.vertices.push(i[f].vertices[h].clone())}if(i[f].normals!==void 0){p.normals=[];for(let h=0,g=i[f].normals.length;h<g;h++)p.normals.push(i[f].normals[h].clone())}this.morphTargets.push(p)}const o=e.morphNormals;for(let f=0,d=o.length;f<d;f++){const p={};if(o[f].vertexNormals!==void 0){p.vertexNormals=[];for(let h=0,g=o[f].vertexNormals.length;h<g;h++){const v=o[f].vertexNormals[h],m={};m.a=v.a.clone(),m.b=v.b.clone(),m.c=v.c.clone(),p.vertexNormals.push(m)}}if(o[f].faceNormals!==void 0){p.faceNormals=[];for(let h=0,g=o[f].faceNormals.length;h<g;h++)p.faceNormals.push(o[f].faceNormals[h].clone())}this.morphNormals.push(p)}const a=e.skinWeights;for(let f=0,d=a.length;f<d;f++)this.skinWeights.push(a[f].clone());const s=e.skinIndices;for(let f=0,d=s.length;f<d;f++)this.skinIndices.push(s[f].clone());const l=e.lineDistances;for(let f=0,d=l.length;f<d;f++)this.lineDistances.push(l[f]);const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class XQe extends Kt{constructor(t,n,r,i,o,a){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:a},this.fromBufferGeometry(new $x(t,n,r,i,o,a)),this.mergeVertices()}}class $x extends At{constructor(t,n,r,i,o,a){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:a};const s=this;t=t||1,n=n||1,r=r||1,i=Math.floor(i)||1,o=Math.floor(o)||1,a=Math.floor(a)||1;const l=[],c=[],u=[],f=[];let d=0,p=0;h("z","y","x",-1,-1,r,n,t,a,o,0),h("z","y","x",1,-1,r,n,-t,a,o,1),h("x","z","y",1,1,t,r,n,i,a,2),h("x","z","y",1,-1,t,r,-n,i,a,3),h("x","y","z",1,-1,t,n,r,i,o,4),h("x","y","z",-1,-1,t,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new Pt(c,3)),this.setAttribute("normal",new Pt(u,3)),this.setAttribute("uv",new Pt(f,2));function h(g,v,m,y,_,b,x,w,S,A,C){const k=b/S,O=x/A,T=b/2,B=x/2,R=w/2,P=S+1,D=A+1;let z=0,N=0;const H=new V;for(let J=0;J<D;J++){const ne=J*O-B;for(let oe=0;oe<P;oe++){const Z=oe*k-T;H[g]=Z*y,H[v]=ne*_,H[m]=R,c.push(H.x,H.y,H.z),H[g]=0,H[v]=0,H[m]=w>0?1:-1,u.push(H.x,H.y,H.z),f.push(oe/S),f.push(1-J/A),z+=1}}for(let J=0;J<A;J++)for(let ne=0;ne<S;ne++){const oe=d+ne+P*J,Z=d+ne+P*(J+1),ce=d+(ne+1)+P*(J+1),se=d+(ne+1)+P*J;l.push(oe,Z,se),l.push(Z,ce,se),N+=6}s.addGroup(p,N,C),p+=N,d+=z}}}function Ev(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function So(e){const t={};for(let n=0;n<e.length;n++){const r=Ev(e[n]);for(const i in r)t[i]=r[i]}return t}const dA={clone:Ev,merge:So};var YQe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,KQe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function Ei(e){tn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=YQe,this.fragmentShader=KQe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}Ei.prototype=Object.create(tn.prototype);Ei.prototype.constructor=Ei;Ei.prototype.isShaderMaterial=!0;Ei.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ev(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this};Ei.prototype.toJSON=function(e){const t=tn.prototype.toJSON.call(this,e);t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t};function ku(){Ct.call(this),this.type="Camera",this.matrixWorldInverse=new lt,this.projectionMatrix=new lt,this.projectionMatrixInverse=new lt}ku.prototype=Object.assign(Object.create(Ct.prototype),{constructor:ku,isCamera:!0,copy:function(e,t){return Ct.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new V),this.updateMatrixWorld(!0);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Ct.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){Ct.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function fi(e,t,n,r){ku.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=r!==void 0?r:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}fi.prototype=Object.assign(Object.create(ku.prototype),{constructor:fi,isPerspectiveCamera:!0,copy:function(e,t){return ku.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=un.RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(un.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return un.RAD2DEG*2*Math.atan(Math.tan(un.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){let e=this.near,t=e*Math.tan(un.DEG2RAD*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){const s=o.fullWidth,l=o.fullHeight;i+=o.offsetX*r/s,t-=o.offsetY*n/l,r*=o.width/s,n*=o.height/l}const a=this.filmOffset;a!==0&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=Ct.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const fm=90,dm=1;function C1(e,t,n){if(Ct.call(this),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const r=new fi(fm,dm,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new V(1,0,0)),this.add(r);const i=new fi(fm,dm,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new V(-1,0,0)),this.add(i);const o=new fi(fm,dm,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new V(0,1,0)),this.add(o);const a=new fi(fm,dm,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new V(0,-1,0)),this.add(a);const s=new fi(fm,dm,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new V(0,0,1)),this.add(s);const l=new fi(fm,dm,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new V(0,0,-1)),this.add(l),this.update=function(c,u){this.parent===null&&this.updateMatrixWorld();const f=c.xr.enabled,d=c.getRenderTarget();c.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,c.setRenderTarget(n,0),c.render(u,r),c.setRenderTarget(n,1),c.render(u,i),c.setRenderTarget(n,2),c.render(u,o),c.setRenderTarget(n,3),c.render(u,a),c.setRenderTarget(n,4),c.render(u,s),n.texture.generateMipmaps=p,c.setRenderTarget(n,5),c.render(u,l),c.setRenderTarget(d),c.xr.enabled=f},this.clear=function(c,u,f,d){const p=c.getRenderTarget();for(let h=0;h<6;h++)c.setRenderTarget(n,h),c.clear(u,f,d);c.setRenderTarget(p)}}C1.prototype=Object.create(Ct.prototype);C1.prototype.constructor=C1;function A1(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),qo.call(this,e,e,t)}A1.prototype=Object.create(qo.prototype);A1.prototype.constructor=A1;A1.prototype.isWebGLCubeRenderTarget=!0;A1.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;const n=new Mv,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},i=new Ei({name:"CubemapFromEquirect",uniforms:Ev(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:wi,blending:Su});i.uniforms.tEquirect.value=t;const o=new hr(new $x(5,5,5),i);return n.add(o),new C1(1,10,this).update(e,n),o.geometry.dispose(),o.material.dispose(),this};function Lu(e,t,n,r,i,o,a,s,l,c,u,f){mr.call(this,null,o,a,s,l,c,r,i,u,f),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=l!==void 0?l:sr,this.minFilter=c!==void 0?c:sr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Lu.prototype=Object.create(mr.prototype);Lu.prototype.constructor=Lu;Lu.prototype.isDataTexture=!0;const pm=new Qu,r2=new V;function Dx(e,t,n,r,i,o){this.planes=[e!==void 0?e:new sc,t!==void 0?t:new sc,n!==void 0?n:new sc,r!==void 0?r:new sc,i!==void 0?i:new sc,o!==void 0?o:new sc]}Object.assign(Dx.prototype,{set:function(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromProjectionMatrix:function(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],f=n[8],d=n[9],p=n[10],h=n[11],g=n[12],v=n[13],m=n[14],y=n[15];return t[0].setComponents(a-r,u-s,h-f,y-g).normalize(),t[1].setComponents(a+r,u+s,h+f,y+g).normalize(),t[2].setComponents(a+i,u+l,h+d,y+v).normalize(),t[3].setComponents(a-i,u-l,h-d,y-v).normalize(),t[4].setComponents(a-o,u-c,h-p,y-m).normalize(),t[5].setComponents(a+o,u+c,h+p,y+m).normalize(),this},intersectsObject:function(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),pm.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(pm)},intersectsSprite:function(e){return pm.center.set(0,0,0),pm.radius=.7071067811865476,pm.applyMatrix4(e.matrixWorld),this.intersectsSphere(pm)},intersectsSphere:function(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:function(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(r2.x=r.normal.x>0?e.max.x:e.min.x,r2.y=r.normal.y>0?e.max.y:e.min.y,r2.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(r2)<0)return!1}return!0},containsPoint:function(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});const St={common:{diffuse:{value:new ht(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new oo},uv2Transform:{value:new oo},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new rt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ht(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new oo}},sprite:{diffuse:{value:new ht(15658734)},opacity:{value:1},center:{value:new rt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new oo}}};function wie(){let e=null,t=!1,n=null,r=null;function i(o,a){n(o,a),r=e.requestAnimationFrame(i)}return{start:function(){t!==!0&&n!==null&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(o){n=o},setContext:function(o){e=o}}}function ZQe(e,t){const n=t.isWebGL2,r=new WeakMap;function i(c,u){const f=c.array,d=c.usage,p=e.createBuffer();e.bindBuffer(u,p),e.bufferData(u,f,d),c.onUploadCallback();let h=5126;return f instanceof Float32Array?h=5126:f instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):f instanceof Uint16Array?h=5123:f instanceof Int16Array?h=5122:f instanceof Uint32Array?h=5125:f instanceof Int32Array?h=5124:f instanceof Int8Array?h=5120:f instanceof Uint8Array&&(h=5121),{buffer:p,type:h,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function o(c,u,f){const d=u.array,p=u.updateRange;e.bindBuffer(f,c),p.count===-1?e.bufferSubData(f,0,d):(n?e.bufferSubData(f,p.offset*d.BYTES_PER_ELEMENT,d,p.offset,p.count):e.bufferSubData(f,p.offset*d.BYTES_PER_ELEMENT,d.subarray(p.offset,p.offset+p.count)),p.count=-1)}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(e.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){c.isInterleavedBufferAttribute&&(c=c.data);const f=r.get(c);f===void 0?r.set(c,i(c,u)):f.version<c.version&&(o(f.buffer,c,u),f.version=c.version)}return{get:a,remove:s,update:l}}function P1(e,t,n,r){Kt.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Tv(e,t,n,r)),this.mergeVertices()}P1.prototype=Object.create(Kt.prototype);P1.prototype.constructor=P1;function Tv(e,t,n,r){At.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},e=e||1,t=t||1;const i=e/2,o=t/2,a=Math.floor(n)||1,s=Math.floor(r)||1,l=a+1,c=s+1,u=e/a,f=t/s,d=[],p=[],h=[],g=[];for(let v=0;v<c;v++){const m=v*f-o;for(let y=0;y<l;y++){const _=y*u-i;p.push(_,-m,0),h.push(0,0,1),g.push(y/a),g.push(1-v/s)}}for(let v=0;v<s;v++)for(let m=0;m<a;m++){const y=m+l*v,_=m+l*(v+1),b=m+1+l*(v+1),x=m+1+l*v;d.push(y,_,x),d.push(_,b,x)}this.setIndex(d),this.setAttribute("position",new Pt(p,3)),this.setAttribute("normal",new Pt(h,3)),this.setAttribute("uv",new Pt(g,2))}Tv.prototype=Object.create(At.prototype);Tv.prototype.constructor=Tv;var JQe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,QQe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,eet=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,tet=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,net=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ret="vec3 transformed = vec3( position );",iet=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,oet=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,aet=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,set=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,cet=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,uet=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,fet=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,det=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,pet=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,het=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,met=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,get=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,vet=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,yet=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,bet=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_et=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,xet=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,wet=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Cet="gl_FragColor = linearToOutputTexel( gl_FragColor );",Aet=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,Pet=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Met=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Eet=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Tet=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Oet=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Iet=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,Ret=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,ket=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Let=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$et=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Det=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,Bet=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Net=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,Fet=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,jet=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,zet=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Uet=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Vet=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Het=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Get=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,Wet=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,qet=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Xet=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,Yet=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Ket=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Zet=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Jet=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Qet=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,ett=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,ttt=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,ntt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,rtt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,itt=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,ott=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,att=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,stt=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,ltt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,ctt=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,utt=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,ftt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,dtt=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,ptt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,htt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,mtt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,gtt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,vtt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ytt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,btt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,_tt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,xtt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,wtt=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Stt=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Ctt=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Att=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Ptt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Mtt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,Ett=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Ttt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Ott=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Itt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Rtt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ktt=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ltt=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,$tt=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Dtt=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Btt=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Ntt=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Ftt=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,jtt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,ztt=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Utt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Vtt=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Htt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Gtt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Wtt=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,qtt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Xtt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ytt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ktt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ztt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Jtt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qtt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ent=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,tnt=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nnt=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rnt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,int=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,ont=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ant=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,snt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lnt=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cnt=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,unt=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fnt=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,dnt=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,pnt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,hnt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,mnt=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,gnt=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vnt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ynt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const mn={alphamap_fragment:JQe,alphamap_pars_fragment:QQe,alphatest_fragment:eet,aomap_fragment:tet,aomap_pars_fragment:net,begin_vertex:ret,beginnormal_vertex:iet,bsdfs:oet,bumpmap_pars_fragment:aet,clipping_planes_fragment:set,clipping_planes_pars_fragment:cet,clipping_planes_pars_vertex:uet,clipping_planes_vertex:fet,color_fragment:det,color_pars_fragment:pet,color_pars_vertex:het,color_vertex:met,common:get,cube_uv_reflection_fragment:vet,defaultnormal_vertex:yet,displacementmap_pars_vertex:bet,displacementmap_vertex:_et,emissivemap_fragment:xet,emissivemap_pars_fragment:wet,encodings_fragment:Cet,encodings_pars_fragment:Aet,envmap_fragment:Pet,envmap_common_pars_fragment:Met,envmap_pars_fragment:Eet,envmap_pars_vertex:Tet,envmap_physical_pars_fragment:jet,envmap_vertex:Oet,fog_vertex:Iet,fog_pars_vertex:Ret,fog_fragment:ket,fog_pars_fragment:Let,gradientmap_pars_fragment:$et,lightmap_fragment:Det,lightmap_pars_fragment:Bet,lights_lambert_vertex:Net,lights_pars_begin:Fet,lights_toon_fragment:zet,lights_toon_pars_fragment:Uet,lights_phong_fragment:Vet,lights_phong_pars_fragment:Het,lights_physical_fragment:Get,lights_physical_pars_fragment:Wet,lights_fragment_begin:qet,lights_fragment_maps:Xet,lights_fragment_end:Yet,logdepthbuf_fragment:Ket,logdepthbuf_pars_fragment:Zet,logdepthbuf_pars_vertex:Jet,logdepthbuf_vertex:Qet,map_fragment:ett,map_pars_fragment:ttt,map_particle_fragment:ntt,map_particle_pars_fragment:rtt,metalnessmap_fragment:itt,metalnessmap_pars_fragment:ott,morphnormal_vertex:att,morphtarget_pars_vertex:stt,morphtarget_vertex:ltt,normal_fragment_begin:ctt,normal_fragment_maps:utt,normalmap_pars_fragment:ftt,clearcoat_normal_fragment_begin:dtt,clearcoat_normal_fragment_maps:ptt,clearcoat_pars_fragment:htt,packing:mtt,premultiplied_alpha_fragment:gtt,project_vertex:vtt,dithering_fragment:ytt,dithering_pars_fragment:btt,roughnessmap_fragment:_tt,roughnessmap_pars_fragment:xtt,shadowmap_pars_fragment:wtt,shadowmap_pars_vertex:Stt,shadowmap_vertex:Ctt,shadowmask_pars_fragment:Att,skinbase_vertex:Ptt,skinning_pars_vertex:Mtt,skinning_vertex:Ett,skinnormal_vertex:Ttt,specularmap_fragment:Ott,specularmap_pars_fragment:Itt,tonemapping_fragment:Rtt,tonemapping_pars_fragment:ktt,uv_pars_fragment:Ltt,uv_pars_vertex:$tt,uv_vertex:Dtt,uv2_pars_fragment:Btt,uv2_pars_vertex:Ntt,uv2_vertex:Ftt,worldpos_vertex:jtt,background_frag:ztt,background_vert:Utt,cube_frag:Vtt,cube_vert:Htt,depth_frag:Gtt,depth_vert:Wtt,distanceRGBA_frag:qtt,distanceRGBA_vert:Xtt,equirect_frag:Ytt,equirect_vert:Ktt,linedashed_frag:Ztt,linedashed_vert:Jtt,meshbasic_frag:Qtt,meshbasic_vert:ent,meshlambert_frag:tnt,meshlambert_vert:nnt,meshmatcap_frag:rnt,meshmatcap_vert:int,meshtoon_frag:ont,meshtoon_vert:ant,meshphong_frag:snt,meshphong_vert:lnt,meshphysical_frag:cnt,meshphysical_vert:unt,normal_frag:fnt,normal_vert:dnt,points_frag:pnt,points_vert:hnt,shadow_frag:mnt,shadow_vert:gnt,sprite_frag:vnt,sprite_vert:ynt},cu={basic:{uniforms:So([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.fog]),vertexShader:mn.meshbasic_vert,fragmentShader:mn.meshbasic_frag},lambert:{uniforms:So([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.fog,St.lights,{emissive:{value:new ht(0)}}]),vertexShader:mn.meshlambert_vert,fragmentShader:mn.meshlambert_frag},phong:{uniforms:So([St.common,St.specularmap,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.fog,St.lights,{emissive:{value:new ht(0)},specular:{value:new ht(1118481)},shininess:{value:30}}]),vertexShader:mn.meshphong_vert,fragmentShader:mn.meshphong_frag},standard:{uniforms:So([St.common,St.envmap,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.roughnessmap,St.metalnessmap,St.fog,St.lights,{emissive:{value:new ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:mn.meshphysical_vert,fragmentShader:mn.meshphysical_frag},toon:{uniforms:So([St.common,St.aomap,St.lightmap,St.emissivemap,St.bumpmap,St.normalmap,St.displacementmap,St.gradientmap,St.fog,St.lights,{emissive:{value:new ht(0)}}]),vertexShader:mn.meshtoon_vert,fragmentShader:mn.meshtoon_frag},matcap:{uniforms:So([St.common,St.bumpmap,St.normalmap,St.displacementmap,St.fog,{matcap:{value:null}}]),vertexShader:mn.meshmatcap_vert,fragmentShader:mn.meshmatcap_frag},points:{uniforms:So([St.points,St.fog]),vertexShader:mn.points_vert,fragmentShader:mn.points_frag},dashed:{uniforms:So([St.common,St.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:mn.linedashed_vert,fragmentShader:mn.linedashed_frag},depth:{uniforms:So([St.common,St.displacementmap]),vertexShader:mn.depth_vert,fragmentShader:mn.depth_frag},normal:{uniforms:So([St.common,St.bumpmap,St.normalmap,St.displacementmap,{opacity:{value:1}}]),vertexShader:mn.normal_vert,fragmentShader:mn.normal_frag},sprite:{uniforms:So([St.sprite,St.fog]),vertexShader:mn.sprite_vert,fragmentShader:mn.sprite_frag},background:{uniforms:{uvTransform:{value:new oo},t2D:{value:null}},vertexShader:mn.background_vert,fragmentShader:mn.background_frag},cube:{uniforms:So([St.envmap,{opacity:{value:1}}]),vertexShader:mn.cube_vert,fragmentShader:mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:mn.equirect_vert,fragmentShader:mn.equirect_frag},distanceRGBA:{uniforms:So([St.common,St.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:mn.distanceRGBA_vert,fragmentShader:mn.distanceRGBA_frag},shadow:{uniforms:So([St.lights,St.fog,{color:{value:new ht(0)},opacity:{value:1}}]),vertexShader:mn.shadow_vert,fragmentShader:mn.shadow_frag}};cu.physical={uniforms:So([cu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new rt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new ht(0)},transparency:{value:0}}]),vertexShader:mn.meshphysical_vert,fragmentShader:mn.meshphysical_frag};function bnt(e,t,n,r){const i=new ht(0);let o=0,a,s,l=null,c=0,u=null;function f(p,h,g,v){let m=h.isScene===!0?h.background:null;const y=e.xr,_=y.getSession&&y.getSession();if(_&&_.environmentBlendMode==="additive"&&(m=null),m===null?d(i,o):m&&m.isColor&&(d(m,1),v=!0),(e.autoClear||v)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||m.mapping===kx)){s===void 0&&(s=new hr(new $x(1,1,1),new Ei({name:"BackgroundCubeMaterial",uniforms:Ev(cu.cube.uniforms),vertexShader:cu.cube.vertexShader,fragmentShader:cu.cube.fragmentShader,side:wi,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(x,w,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(s));const b=m.isWebGLCubeRenderTarget?m.texture:m;s.material.uniforms.envMap.value=b,s.material.uniforms.flipEnvMap.value=b.isCubeTexture?-1:1,(l!==m||c!==b.version||u!==e.toneMapping)&&(s.material.needsUpdate=!0,l=m,c=b.version,u=e.toneMapping),p.unshift(s,s.geometry,s.material,0,0,null)}else m&&m.isTexture&&(a===void 0&&(a=new hr(new Tv(2,2),new Ei({name:"BackgroundMaterial",uniforms:Ev(cu.background.uniforms),vertexShader:cu.background.vertexShader,fragmentShader:cu.background.fragmentShader,side:C0,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=m,m.matrixAutoUpdate===!0&&m.updateMatrix(),a.material.uniforms.uvTransform.value.copy(m.matrix),(l!==m||c!==m.version||u!==e.toneMapping)&&(a.material.needsUpdate=!0,l=m,c=m.version,u=e.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}function d(p,h){t.buffers.color.setClear(p.r,p.g,p.b,h,r)}return{getClearColor:function(){return i},setClearColor:function(p,h){i.set(p),o=h!==void 0?h:1,d(i,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,d(i,o)},render:f}}function _nt(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||o!==null,s={},l=g(null);let c=l;function u(B,R,P,D,z){let N=!1;if(a){const H=h(D,P,R);c!==H&&(c=H,d(c.object)),N=v(D),N&&m(D)}else{const H=R.wireframe===!0;(c.geometry!==D.id||c.program!==P.id||c.wireframe!==H)&&(c.geometry=D.id,c.program=P.id,c.wireframe=H,N=!0)}B.isInstancedMesh===!0&&(N=!0),z!==null&&n.update(z,34963),N&&(S(B,R,P,D),z!==null&&e.bindBuffer(34963,n.get(z).buffer))}function f(){return r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()}function d(B){return r.isWebGL2?e.bindVertexArray(B):o.bindVertexArrayOES(B)}function p(B){return r.isWebGL2?e.deleteVertexArray(B):o.deleteVertexArrayOES(B)}function h(B,R,P){const D=P.wireframe===!0;let z=s[B.id];z===void 0&&(z={},s[B.id]=z);let N=z[R.id];N===void 0&&(N={},z[R.id]=N);let H=N[D];return H===void 0&&(H=g(f()),N[D]=H),H}function g(B){const R=[],P=[],D=[];for(let z=0;z<i;z++)R[z]=0,P[z]=0,D[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:R,enabledAttributes:P,attributeDivisors:D,object:B,attributes:{}}}function v(B){const R=c.attributes,P=B.attributes;if(Object.keys(R).length!==Object.keys(P).length)return!0;for(const D in P){const z=R[D],N=P[D];if(z.attribute!==N||z.data!==N.data)return!0}return!1}function m(B){const R={},P=B.attributes;for(const D in P){const z=P[D],N={};N.attribute=z,z.data&&(N.data=z.data),R[D]=N}c.attributes=R}function y(){const B=c.newAttributes;for(let R=0,P=B.length;R<P;R++)B[R]=0}function _(B){b(B,0)}function b(B,R){const P=c.newAttributes,D=c.enabledAttributes,z=c.attributeDivisors;P[B]=1,D[B]===0&&(e.enableVertexAttribArray(B),D[B]=1),z[B]!==R&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,R),z[B]=R)}function x(){const B=c.newAttributes,R=c.enabledAttributes;for(let P=0,D=R.length;P<D;P++)R[P]!==B[P]&&(e.disableVertexAttribArray(P),R[P]=0)}function w(B,R,P,D,z,N){r.isWebGL2===!0&&(P===5124||P===5125)?e.vertexAttribIPointer(B,R,P,D,z,N):e.vertexAttribPointer(B,R,P,D,z,N)}function S(B,R,P,D){if(r.isWebGL2===!1&&(B.isInstancedMesh||D.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;y();const z=D.attributes,N=P.getAttributes(),H=R.defaultAttributeValues;for(const J in N){const ne=N[J];if(ne>=0){const oe=z[J];if(oe!==void 0){const Z=oe.normalized,ce=oe.itemSize,se=n.get(oe);if(se===void 0)continue;const Y=se.buffer,he=se.type,ae=se.bytesPerElement;if(oe.isInterleavedBufferAttribute){const ye=oe.data,re=ye.stride,te=oe.offset;ye&&ye.isInstancedInterleavedBuffer?(b(ne,ye.meshPerAttribute),D._maxInstanceCount===void 0&&(D._maxInstanceCount=ye.meshPerAttribute*ye.count)):_(ne),e.bindBuffer(34962,Y),w(ne,ce,he,Z,re*ae,te*ae)}else oe.isInstancedBufferAttribute?(b(ne,oe.meshPerAttribute),D._maxInstanceCount===void 0&&(D._maxInstanceCount=oe.meshPerAttribute*oe.count)):_(ne),e.bindBuffer(34962,Y),w(ne,ce,he,Z,0,0)}else if(J==="instanceMatrix"){const Z=n.get(B.instanceMatrix);if(Z===void 0)continue;const ce=Z.buffer,se=Z.type;b(ne+0,1),b(ne+1,1),b(ne+2,1),b(ne+3,1),e.bindBuffer(34962,ce),e.vertexAttribPointer(ne+0,4,se,!1,64,0),e.vertexAttribPointer(ne+1,4,se,!1,64,16),e.vertexAttribPointer(ne+2,4,se,!1,64,32),e.vertexAttribPointer(ne+3,4,se,!1,64,48)}else if(H!==void 0){const Z=H[J];if(Z!==void 0)switch(Z.length){case 2:e.vertexAttrib2fv(ne,Z);break;case 3:e.vertexAttrib3fv(ne,Z);break;case 4:e.vertexAttrib4fv(ne,Z);break;default:e.vertexAttrib1fv(ne,Z)}}}}x()}function A(){O();for(const B in s){const R=s[B];for(const P in R){const D=R[P];for(const z in D)p(D[z].object),delete D[z];delete R[P]}delete s[B]}}function C(B){if(s[B.id]===void 0)return;const R=s[B.id];for(const P in R){const D=R[P];for(const z in D)p(D[z].object),delete D[z];delete R[P]}delete s[B.id]}function k(B){for(const R in s){const P=s[R];if(P[B.id]===void 0)continue;const D=P[B.id];for(const z in D)p(D[z].object),delete D[z];delete P[B.id]}}function O(){T(),c!==l&&(c=l,d(c.object))}function T(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:O,resetDefaultState:T,dispose:A,releaseStatesOfGeometry:C,releaseStatesOfProgram:k,initAttributes:y,enableAttribute:_,disableUnusedAttributes:x}}function xnt(e,t,n,r){const i=r.isWebGL2;let o;function a(c){o=c}function s(c,u){e.drawArrays(o,c,u),n.update(u,o)}function l(c,u,f,d){if(d===0)return;let p,h;if(i)p=e,h="drawArraysInstanced";else if(p=t.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[h](o,u,f,d),n.update(f,o,d)}this.setMode=a,this.render=s,this.renderInstances=l}function wnt(e,t,n){let r;function i(){if(r!==void 0)return r;const w=t.get("EXT_texture_filter_anisotropic");return w!==null?r=e.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT):r=0,r}function o(w){if(w==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";w="mediump"}return w==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&e instanceof WebGL2ComputeRenderingContext;let s=n.precision!==void 0?n.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const c=n.logarithmicDepthBuffer===!0,u=e.getParameter(34930),f=e.getParameter(35660),d=e.getParameter(3379),p=e.getParameter(34076),h=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),m=e.getParameter(36349),y=f>0,_=a||!!t.get("OES_texture_float"),b=y&&_,x=a?e.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:i,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:p,maxAttributes:h,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:m,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:b,maxSamples:x}}function Snt(){const e=this;let t=null,n=0,r=!1,i=!1;const o=new sc,a=new oo,s={value:null,needsUpdate:!1};this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(u,f,d){const p=u.length!==0||f||n!==0||r;return r=f,t=c(u,d,0),n=u.length,p},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,l()},this.setState=function(u,f,d,p,h,g){if(!r||u===null||u.length===0||i&&!d)i?c(null):l();else{const v=i?0:n,m=v*4;let y=h.clippingState||null;s.value=y,y=c(u,p,m,g);for(let _=0;_!==m;++_)y[_]=t[_];h.clippingState=y,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=v}};function l(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(u,f,d,p){let h=u!==null?u.length:0,g=null;if(h!==0){if(g=s.value,p!==!0||g===null){const v=d+h*4,m=f.matrixWorldInverse;a.getNormalMatrix(m),(g===null||g.length<v)&&(g=new Float32Array(v));for(let y=0,_=d;y!==h;++y,_+=4)o.copy(u[y]).applyMatrix4(m,a),o.normal.toArray(g,_),g[_+3]=o.constant}s.value=g,s.needsUpdate=!0}return e.numPlanes=h,e.numIntersection=0,g}}function Cnt(e){const t={};return{get:function(n){if(t[n]!==void 0)return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function Ant(e,t,n,r){const i=new WeakMap,o=new WeakMap;function a(f){const d=f.target,p=i.get(d);p.index!==null&&t.remove(p.index);for(const g in p.attributes)t.remove(p.attributes[g]);d.removeEventListener("dispose",a),i.delete(d);const h=o.get(p);h&&(t.remove(h),o.delete(p)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,n.memory.geometries--}function s(f,d){let p=i.get(d);return p||(d.addEventListener("dispose",a),d.isBufferGeometry?p=d:d.isGeometry&&(d._bufferGeometry===void 0&&(d._bufferGeometry=new At().setFromObject(f)),p=d._bufferGeometry),i.set(d,p),n.memory.geometries++,p)}function l(f){const d=f.attributes;for(const h in d)t.update(d[h],34962);const p=f.morphAttributes;for(const h in p){const g=p[h];for(let v=0,m=g.length;v<m;v++)t.update(g[v],34962)}}function c(f){const d=[],p=f.index,h=f.attributes.position;let g=0;if(p!==null){const y=p.array;g=p.version;for(let _=0,b=y.length;_<b;_+=3){const x=y[_+0],w=y[_+1],S=y[_+2];d.push(x,w,w,S,S,x)}}else{const y=h.array;g=h.version;for(let _=0,b=y.length/3-1;_<b;_+=3){const x=_+0,w=_+1,S=_+2;d.push(x,w,w,S,S,x)}}const v=new(_ie(d)>65535?S1:w1)(d,1);v.version=g;const m=o.get(f);m&&t.remove(m),o.set(f,v)}function u(f){const d=o.get(f);if(d){const p=f.index;p!==null&&d.version<p.version&&c(f)}else c(f);return o.get(f)}return{get:s,update:l,getWireframeAttribute:u}}function Pnt(e,t,n,r){const i=r.isWebGL2;let o;function a(d){o=d}let s,l;function c(d){s=d.type,l=d.bytesPerElement}function u(d,p){e.drawElements(o,p,s,d*l),n.update(p,o)}function f(d,p,h,g){if(g===0)return;let v,m;if(i)v=e,m="drawElementsInstanced";else if(v=t.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[m](o,h,s,p*l,g),n.update(h,o,g)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=f}function Mnt(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,a,s){switch(s=s||1,n.calls++,a){case 4:n.triangles+=s*(o/3);break;case 1:n.lines+=s*(o/2);break;case 3:n.lines+=s*(o-1);break;case 2:n.lines+=s*o;break;case 0:n.points+=s*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:i,update:r}}function Ent(e,t){return e[0]-t[0]}function Tnt(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ont(e){const t={},n=new Float32Array(8),r=[];for(let o=0;o<8;o++)r[o]=[o,0];function i(o,a,s,l){const c=o.morphTargetInfluences,u=c===void 0?0:c.length;let f=t[a.id];if(f===void 0){f=[];for(let v=0;v<u;v++)f[v]=[v,0];t[a.id]=f}for(let v=0;v<u;v++){const m=f[v];m[0]=v,m[1]=c[v]}f.sort(Tnt);for(let v=0;v<8;v++)v<u&&f[v][1]?(r[v][0]=f[v][0],r[v][1]=f[v][1]):(r[v][0]=Number.MAX_SAFE_INTEGER,r[v][1]=0);r.sort(Ent);const d=s.morphTargets&&a.morphAttributes.position,p=s.morphNormals&&a.morphAttributes.normal;let h=0;for(let v=0;v<8;v++){const m=r[v],y=m[0],_=m[1];y!==Number.MAX_SAFE_INTEGER&&_?(d&&a.getAttribute("morphTarget"+v)!==d[y]&&a.setAttribute("morphTarget"+v,d[y]),p&&a.getAttribute("morphNormal"+v)!==p[y]&&a.setAttribute("morphNormal"+v,p[y]),n[v]=_,h+=_):(d&&a.getAttribute("morphTarget"+v)!==void 0&&a.deleteAttribute("morphTarget"+v),p&&a.getAttribute("morphNormal"+v)!==void 0&&a.deleteAttribute("morphNormal"+v),n[v]=0)}const g=a.morphTargetsRelative?1:1-h;l.getUniforms().setValue(e,"morphTargetBaseInfluence",g),l.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:i}}function Int(e,t,n,r){let i=new WeakMap;function o(s){const l=r.render.frame,c=s.geometry,u=t.get(s,c);return i.get(u)!==l&&(c.isGeometry&&u.updateFromObject(s),t.update(u),i.set(u,l)),s.isInstancedMesh&&n.update(s.instanceMatrix,34962),u}function a(){i=new WeakMap}return{update:o,dispose:a}}function gd(e,t,n,r,i,o,a,s,l,c){e=e!==void 0?e:[],t=t!==void 0?t:mN,a=a!==void 0?a:kp,mr.call(this,e,t,n,r,i,o,a,s,l,c),this.flipY=!1}gd.prototype=Object.create(mr.prototype);gd.prototype.constructor=gd;gd.prototype.isCubeTexture=!0;Object.defineProperty(gd.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});function M1(e,t,n,r){mr.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=sr,this.minFilter=sr,this.wrapR=pa,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}M1.prototype=Object.create(mr.prototype);M1.prototype.constructor=M1;M1.prototype.isDataTexture2DArray=!0;function E1(e,t,n,r){mr.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=sr,this.minFilter=sr,this.wrapR=pa,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}E1.prototype=Object.create(mr.prototype);E1.prototype.constructor=E1;E1.prototype.isDataTexture3D=!0;const Sie=new mr,Rnt=new M1,knt=new E1,Cie=new gd,Y9=[],K9=[],Z9=new Float32Array(16),J9=new Float32Array(9),Q9=new Float32Array(4);function M0(e,t,n){const r=e[0];if(r<=0||r>0)return e;let i=t*n,o=Y9[i];if(o===void 0&&(o=new Float32Array(i),Y9[i]=o),t!==0){r.toArray(o,0);for(let a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Hs(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function es(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Aie(e,t){let n=K9[t];n===void 0&&(n=new Int32Array(t),K9[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Lnt(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function $nt(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Hs(n,t))return;e.uniform2fv(this.addr,t),es(n,t)}}function Dnt(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Hs(n,t))return;e.uniform3fv(this.addr,t),es(n,t)}}function Bnt(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Hs(n,t))return;e.uniform4fv(this.addr,t),es(n,t)}}function Nnt(e,t){const n=this.cache,r=t.elements;if(r===void 0){if(Hs(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),es(n,t)}else{if(Hs(n,r))return;Q9.set(r),e.uniformMatrix2fv(this.addr,!1,Q9),es(n,r)}}function Fnt(e,t){const n=this.cache,r=t.elements;if(r===void 0){if(Hs(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),es(n,t)}else{if(Hs(n,r))return;J9.set(r),e.uniformMatrix3fv(this.addr,!1,J9),es(n,r)}}function jnt(e,t){const n=this.cache,r=t.elements;if(r===void 0){if(Hs(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),es(n,t)}else{if(Hs(n,r))return;Z9.set(r),e.uniformMatrix4fv(this.addr,!1,Z9),es(n,r)}}function znt(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Sie,i)}function Unt(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Rnt,i)}function Vnt(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||knt,i)}function Hnt(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Cie,i)}function Gnt(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Wnt(e,t){const n=this.cache;Hs(n,t)||(e.uniform2iv(this.addr,t),es(n,t))}function qnt(e,t){const n=this.cache;Hs(n,t)||(e.uniform3iv(this.addr,t),es(n,t))}function Xnt(e,t){const n=this.cache;Hs(n,t)||(e.uniform4iv(this.addr,t),es(n,t))}function Ynt(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Knt(e){switch(e){case 5126:return Lnt;case 35664:return $nt;case 35665:return Dnt;case 35666:return Bnt;case 35674:return Nnt;case 35675:return Fnt;case 35676:return jnt;case 5124:case 35670:return Gnt;case 35667:case 35671:return Wnt;case 35668:case 35672:return qnt;case 35669:case 35673:return Xnt;case 5125:return Ynt;case 35678:case 36198:case 36298:case 36306:case 35682:return znt;case 35679:case 36299:case 36307:return Vnt;case 35680:case 36300:case 36308:case 36293:return Hnt;case 36289:case 36303:case 36311:case 36292:return Unt}}function Znt(e,t){e.uniform1fv(this.addr,t)}function Jnt(e,t){e.uniform1iv(this.addr,t)}function Qnt(e,t){e.uniform2iv(this.addr,t)}function ert(e,t){e.uniform3iv(this.addr,t)}function trt(e,t){e.uniform4iv(this.addr,t)}function nrt(e,t){const n=M0(t,this.size,2);e.uniform2fv(this.addr,n)}function rrt(e,t){const n=M0(t,this.size,3);e.uniform3fv(this.addr,n)}function irt(e,t){const n=M0(t,this.size,4);e.uniform4fv(this.addr,n)}function ort(e,t){const n=M0(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function art(e,t){const n=M0(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function srt(e,t){const n=M0(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function lrt(e,t,n){const r=t.length,i=Aie(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTexture2D(t[o]||Sie,i[o])}function crt(e,t,n){const r=t.length,i=Aie(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTextureCube(t[o]||Cie,i[o])}function urt(e){switch(e){case 5126:return Znt;case 35664:return nrt;case 35665:return rrt;case 35666:return irt;case 35674:return ort;case 35675:return art;case 35676:return srt;case 5124:case 35670:return Jnt;case 35667:case 35671:return Qnt;case 35668:case 35672:return ert;case 35669:case 35673:return trt;case 35678:case 36198:case 36298:case 36306:case 35682:return lrt;case 35680:case 36300:case 36308:case 36293:return crt}}function frt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=Knt(t.type)}function Pie(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=urt(t.type)}Pie.prototype.updateCache=function(e){let t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),es(t,e)};function Mie(e){this.id=e,this.seq=[],this.map={}}Mie.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const a=r[i];a.setValue(e,t[a.id],n)}};const WI=/([\w\d_]+)(\])?(\[|\.)?/g;function e7(e,t){e.seq.push(t),e.map[t.id]=t}function drt(e,t,n){const r=e.name,i=r.length;for(WI.lastIndex=0;;){const o=WI.exec(r),a=WI.lastIndex;let s=o[1],l=o[2]==="]",c=o[3];if(l&&(s=s|0),c===void 0||c==="["&&a+2===i){e7(n,c===void 0?new frt(s,e,t):new Pie(s,e,t));break}else{let f=n.map[s];f===void 0&&(f=new Mie(s),e7(n,f)),n=f}}}function rd(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const i=e.getActiveUniform(t,r),o=e.getUniformLocation(t,i.name);drt(i,o,this)}}rd.prototype.setValue=function(e,t,n,r){const i=this.map[t];i!==void 0&&i.setValue(e,n,r)};rd.prototype.setOptional=function(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)};rd.upload=function(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const a=t[i],s=n[a.id];s.needsUpdate!==!1&&a.setValue(e,s.value,r)}};rd.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const o=e[r];o.id in t&&n.push(o)}return n};function t7(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let prt=0;function hrt(e){const t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function Eie(e){switch(e){case Ro:return["Linear","( value )"];case Lx:return["sRGB","( value )"];case xN:return["RGBE","( value )"];case mie:return["RGBM","( value, 7.0 )"];case gie:return["RGBM","( value, 16.0 )"];case vie:return["RGBD","( value, 256.0 )"];case _N:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case TQe:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function n7(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&i==="")return"";const o=e.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+`
`+i+hrt(o)}function ly(e,t){const n=Eie(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function mrt(e,t){const n=Eie(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function grt(e,t){let n;switch(t){case EJe:n="Linear";break;case TJe:n="Reinhard";break;case OJe:n="OptimizedCineon";break;case IJe:n="ACESFilmic";break;case RJe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function vrt(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Hy).join(`
`)}function yrt(e){const t=[];for(const n in e){const r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join(`
`)}function brt(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const a=e.getActiveAttrib(t,i).name;n[a]=e.getAttribLocation(t,a)}return n}function Hy(e){return e!==""}function r7(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function i7(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const _rt=/^[ \t]*#include +<([\w\d./]+)>/gm;function OL(e){return e.replace(_rt,xrt)}function xrt(e,t){const n=mn[t];if(n===void 0)throw new Error("Can not resolve #include <"+t+">");return OL(n)}const wrt=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Srt=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function o7(e){return e.replace(Srt,Tie).replace(wrt,Crt)}function Crt(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Tie(e,t,n,r)}function Tie(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function a7(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Art(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===lie?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===aJe?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Vy&&(t="SHADOWMAP_TYPE_VSM"),t}function Prt(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case mN:case gN:t="ENVMAP_TYPE_CUBE";break;case kx:case yN:t="ENVMAP_TYPE_CUBE_UV";break;case die:case vN:t="ENVMAP_TYPE_EQUIREC";break}return t}function Mrt(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case gN:case vN:t="ENVMAP_MODE_REFRACTION";break}return t}function Ert(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case eT:t="ENVMAP_BLENDING_MULTIPLY";break;case PJe:t="ENVMAP_BLENDING_MIX";break;case MJe:t="ENVMAP_BLENDING_ADD";break}return t}function Trt(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=Art(n),c=Prt(n),u=Mrt(n),f=Ert(n),d=e.gammaFactor>0?e.gammaFactor:1,p=n.isWebGL2?"":vrt(n),h=yrt(o),g=i.createProgram();let v,m;if(n.isRawShaderMaterial?(v=[h].filter(Hy).join(`
`),v.length>0&&(v+=`
`),m=[p,h].filter(Hy).join(`
`),m.length>0&&(m+=`
`)):(v=[a7(n),"#define SHADER_NAME "+n.shaderName,h,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Hy).join(`
`),m=[p,a7(n),"#define SHADER_NAME "+n.shaderName,h,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ig?"#define TONE_MAPPING":"",n.toneMapping!==Ig?mn.tonemapping_pars_fragment:"",n.toneMapping!==Ig?grt("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",mn.encodings_pars_fragment,n.map?ly("mapTexelToLinear",n.mapEncoding):"",n.matcap?ly("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?ly("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?ly("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?ly("lightMapTexelToLinear",n.lightMapEncoding):"",mrt("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Hy).join(`
`)),a=OL(a),a=r7(a,n),a=i7(a,n),s=OL(s),s=r7(s,n),s=i7(s,n),a=o7(a),s=o7(s),n.isWebGL2&&!n.isRawShaderMaterial){let A=!1;const C=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&a.match(C)!==null&&s.match(C)!==null&&(A=!0,a=a.replace(C,""),s=s.replace(C,"")),v=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,m=[`#version 300 es
`,"#define varying in",A?"":"out highp vec4 pc_fragColor;",A?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m}const y=v+a,_=m+s,b=t7(i,35633,y),x=t7(i,35632,_);if(i.attachShader(g,b),i.attachShader(g,x),n.index0AttributeName!==void 0?i.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),e.debug.checkShaderErrors){const A=i.getProgramInfoLog(g).trim(),C=i.getShaderInfoLog(b).trim(),k=i.getShaderInfoLog(x).trim();let O=!0,T=!0;if(i.getProgramParameter(g,35714)===!1){O=!1;const B=n7(i,b,"vertex"),R=n7(i,x,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(g,35715),"gl.getProgramInfoLog",A,B,R)}else A!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A):(C===""||k==="")&&(T=!1);T&&(this.diagnostics={runnable:O,programLog:A,vertexShader:{log:C,prefix:v},fragmentShader:{log:k,prefix:m}})}i.deleteShader(b),i.deleteShader(x);let w;this.getUniforms=function(){return w===void 0&&(w=new rd(i,g)),w};let S;return this.getAttributes=function(){return S===void 0&&(S=brt(i,g)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=prt++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=b,this.fragmentShader=x,this}function Ort(e,t,n,r){const i=[],o=n.isWebGL2,a=n.logarithmicDepthBuffer,s=n.floatVertexTextures,l=n.maxVertexUniforms,c=n.vertexTextures;let u=n.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},d=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function p(b,x){let w;if(x){const S=cu[x];w={name:b.name||b.type,uniforms:dA.clone(S.uniforms),vertexShader:S.vertexShader,fragmentShader:S.fragmentShader}}else w={name:b.name||b.type,uniforms:b.uniforms,vertexShader:b.vertexShader,fragmentShader:b.fragmentShader};return w}function h(b){const w=b.skeleton.bones;if(s)return 1024;{const A=Math.floor((l-20)/4),C=Math.min(A,w.length);return C<w.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+w.length+" bones. This GPU supports "+C+"."),0):C}}function g(b){let x;return b?b.isTexture?x=b.encoding:b.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),x=b.texture.encoding):x=Ro,x}function v(b,x,w,S,A,C,k){const O=S.fog,T=b.isMeshStandardMaterial?S.environment:null,B=b.envMap||T,R=f[b.type],P=k.isSkinnedMesh?h(k):0;b.precision!==null&&(u=n.getMaxPrecision(b.precision),u!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",u,"instead."));const D=p(b,R);b.onBeforeCompile(D,e);const z=e.getRenderTarget();return{isWebGL2:o,shaderID:R,shaderName:D.name,uniforms:D.uniforms,vertexShader:D.vertexShader,fragmentShader:D.fragmentShader,defines:b.defines,isRawShaderMaterial:b.isRawShaderMaterial,isShaderMaterial:b.isShaderMaterial,precision:u,instancing:k.isInstancedMesh===!0,supportsVertexTextures:c,outputEncoding:z!==null?g(z.texture):e.outputEncoding,map:!!b.map,mapEncoding:g(b.map),matcap:!!b.matcap,matcapEncoding:g(b.matcap),envMap:!!B,envMapMode:B&&B.mapping,envMapEncoding:g(B),envMapCubeUV:!!B&&(B.mapping===kx||B.mapping===yN),lightMap:!!b.lightMap,lightMapEncoding:g(b.lightMap),aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:g(b.emissiveMap),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:b.normalMapType===RQe,tangentSpaceNormalMap:b.normalMapType===A0,clearcoatMap:!!b.clearcoatMap,clearcoatRoughnessMap:!!b.clearcoatRoughnessMap,clearcoatNormalMap:!!b.clearcoatNormalMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,alphaMap:!!b.alphaMap,gradientMap:!!b.gradientMap,sheen:!!b.sheen,combine:b.combine,vertexTangents:b.normalMap&&b.vertexTangents,vertexColors:b.vertexColors,vertexUvs:!!b.map||!!b.bumpMap||!!b.normalMap||!!b.specularMap||!!b.alphaMap||!!b.emissiveMap||!!b.roughnessMap||!!b.metalnessMap||!!b.clearcoatMap||!!b.clearcoatRoughnessMap||!!b.clearcoatNormalMap||!!b.displacementMap,uvsVertexOnly:!(b.map||b.bumpMap||b.normalMap||b.specularMap||b.alphaMap||b.emissiveMap||b.roughnessMap||b.metalnessMap||b.clearcoatNormalMap)&&!!b.displacementMap,fog:!!O,useFog:b.fog,fogExp2:O&&O.isFogExp2,flatShading:b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:a,skinning:b.skinning&&P>0,maxBones:P,useVertexTexture:s,morphTargets:b.morphTargets,morphNormals:b.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numClippingPlanes:A,numClipIntersection:C,dithering:b.dithering,shadowMapEnabled:e.shadowMap.enabled&&w.length>0,shadowMapType:e.shadowMap.type,toneMapping:b.toneMapped?e.toneMapping:Ig,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,alphaTest:b.alphaTest,doubleSided:b.side===Rx,flipSided:b.side===wi,depthPacking:b.depthPacking!==void 0?b.depthPacking:!1,index0AttributeName:b.index0AttributeName,extensionDerivatives:b.extensions&&b.extensions.derivatives,extensionFragDepth:b.extensions&&b.extensions.fragDepth,extensionDrawBuffers:b.extensions&&b.extensions.drawBuffers,extensionShaderTextureLOD:b.extensions&&b.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||t.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:o||t.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:o||t.get("EXT_shader_texture_lod")!==null,customProgramCacheKey:b.customProgramCacheKey()}}function m(b){const x=[];if(b.shaderID?x.push(b.shaderID):(x.push(b.fragmentShader),x.push(b.vertexShader)),b.defines!==void 0)for(const w in b.defines)x.push(w),x.push(b.defines[w]);if(b.isRawShaderMaterial===void 0){for(let w=0;w<d.length;w++)x.push(b[d[w]]);x.push(e.outputEncoding),x.push(e.gammaFactor)}return x.push(b.customProgramCacheKey),x.join()}function y(b,x){let w;for(let S=0,A=i.length;S<A;S++){const C=i[S];if(C.cacheKey===x){w=C,++w.usedTimes;break}}return w===void 0&&(w=new Trt(e,x,b,r),i.push(w)),w}function _(b){if(--b.usedTimes===0){const x=i.indexOf(b);i[x]=i[i.length-1],i.pop(),b.destroy()}}return{getParameters:v,getProgramCacheKey:m,acquireProgram:y,releaseProgram:_,programs:i}}function Irt(){let e=new WeakMap;function t(o){let a=e.get(o);return a===void 0&&(a={},e.set(o,a)),a}function n(o){e.delete(o)}function r(o,a,s){e.get(o)[a]=s}function i(){e=new WeakMap}return{get:t,remove:n,update:r,dispose:i}}function Rrt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function krt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function s7(){const e=[];let t=0;const n=[],r=[],i={id:-1};function o(){t=0,n.length=0,r.length=0}function a(f,d,p,h,g,v){let m=e[t];return m===void 0?(m={id:f.id,object:f,geometry:d,material:p,program:p.program||i,groupOrder:h,renderOrder:f.renderOrder,z:g,group:v},e[t]=m):(m.id=f.id,m.object=f,m.geometry=d,m.material=p,m.program=p.program||i,m.groupOrder=h,m.renderOrder=f.renderOrder,m.z=g,m.group=v),t++,m}function s(f,d,p,h,g,v){const m=a(f,d,p,h,g,v);(p.transparent===!0?r:n).push(m)}function l(f,d,p,h,g,v){const m=a(f,d,p,h,g,v);(p.transparent===!0?r:n).unshift(m)}function c(f,d){n.length>1&&n.sort(f||Rrt),r.length>1&&r.sort(d||krt)}function u(){for(let f=t,d=e.length;f<d;f++){const p=e[f];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.program=null,p.group=null}}return{opaque:n,transparent:r,init:o,push:s,unshift:l,finish:u,sort:c}}function Lrt(){let e=new WeakMap;function t(i){const o=i.target;o.removeEventListener("dispose",t),e.delete(o)}function n(i,o){const a=e.get(i);let s;return a===void 0?(s=new s7,e.set(i,new WeakMap),e.get(i).set(o,s),i.addEventListener("dispose",t)):(s=a.get(o),s===void 0&&(s=new s7,a.set(o,s))),s}function r(){e=new WeakMap}return{get:n,dispose:r}}function $rt(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new V,color:new ht};break;case"SpotLight":n={position:new V,direction:new V,color:new ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new V,color:new ht,distance:0,decay:0};break;case"HemisphereLight":n={direction:new V,skyColor:new ht,groundColor:new ht};break;case"RectAreaLight":n={color:new ht,position:new V,halfWidth:new V,halfHeight:new V};break}return e[t.id]=n,n}}}function Drt(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new rt,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let Brt=0;function Nrt(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Frt(){const e=new $rt,t=Drt(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let s=0;s<9;s++)n.probe.push(new V);const r=new V,i=new lt,o=new lt;function a(s,l,c){let u=0,f=0,d=0;for(let S=0;S<9;S++)n.probe[S].set(0,0,0);let p=0,h=0,g=0,v=0,m=0,y=0,_=0,b=0;const x=c.matrixWorldInverse;s.sort(Nrt);for(let S=0,A=s.length;S<A;S++){const C=s[S],k=C.color,O=C.intensity,T=C.distance,B=C.shadow&&C.shadow.map?C.shadow.map.texture:null;if(C.isAmbientLight)u+=k.r*O,f+=k.g*O,d+=k.b*O;else if(C.isLightProbe)for(let R=0;R<9;R++)n.probe[R].addScaledVector(C.sh.coefficients[R],O);else if(C.isDirectionalLight){const R=e.get(C);if(R.color.copy(C.color).multiplyScalar(C.intensity),R.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(x),C.castShadow){const P=C.shadow,D=t.get(C);D.shadowBias=P.bias,D.shadowNormalBias=P.normalBias,D.shadowRadius=P.radius,D.shadowMapSize=P.mapSize,n.directionalShadow[p]=D,n.directionalShadowMap[p]=B,n.directionalShadowMatrix[p]=C.shadow.matrix,y++}n.directional[p]=R,p++}else if(C.isSpotLight){const R=e.get(C);if(R.position.setFromMatrixPosition(C.matrixWorld),R.position.applyMatrix4(x),R.color.copy(k).multiplyScalar(O),R.distance=T,R.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(x),R.coneCos=Math.cos(C.angle),R.penumbraCos=Math.cos(C.angle*(1-C.penumbra)),R.decay=C.decay,C.castShadow){const P=C.shadow,D=t.get(C);D.shadowBias=P.bias,D.shadowNormalBias=P.normalBias,D.shadowRadius=P.radius,D.shadowMapSize=P.mapSize,n.spotShadow[g]=D,n.spotShadowMap[g]=B,n.spotShadowMatrix[g]=C.shadow.matrix,b++}n.spot[g]=R,g++}else if(C.isRectAreaLight){const R=e.get(C);R.color.copy(k).multiplyScalar(O),R.position.setFromMatrixPosition(C.matrixWorld),R.position.applyMatrix4(x),o.identity(),i.copy(C.matrixWorld),i.premultiply(x),o.extractRotation(i),R.halfWidth.set(C.width*.5,0,0),R.halfHeight.set(0,C.height*.5,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),n.rectArea[v]=R,v++}else if(C.isPointLight){const R=e.get(C);if(R.position.setFromMatrixPosition(C.matrixWorld),R.position.applyMatrix4(x),R.color.copy(C.color).multiplyScalar(C.intensity),R.distance=C.distance,R.decay=C.decay,C.castShadow){const P=C.shadow,D=t.get(C);D.shadowBias=P.bias,D.shadowNormalBias=P.normalBias,D.shadowRadius=P.radius,D.shadowMapSize=P.mapSize,D.shadowCameraNear=P.camera.near,D.shadowCameraFar=P.camera.far,n.pointShadow[h]=D,n.pointShadowMap[h]=B,n.pointShadowMatrix[h]=C.shadow.matrix,_++}n.point[h]=R,h++}else if(C.isHemisphereLight){const R=e.get(C);R.direction.setFromMatrixPosition(C.matrixWorld),R.direction.transformDirection(x),R.direction.normalize(),R.skyColor.copy(C.color).multiplyScalar(O),R.groundColor.copy(C.groundColor).multiplyScalar(O),n.hemi[m]=R,m++}}n.ambient[0]=u,n.ambient[1]=f,n.ambient[2]=d;const w=n.hash;(w.directionalLength!==p||w.pointLength!==h||w.spotLength!==g||w.rectAreaLength!==v||w.hemiLength!==m||w.numDirectionalShadows!==y||w.numPointShadows!==_||w.numSpotShadows!==b)&&(n.directional.length=p,n.spot.length=g,n.rectArea.length=v,n.point.length=h,n.hemi.length=m,n.directionalShadow.length=y,n.directionalShadowMap.length=y,n.pointShadow.length=_,n.pointShadowMap.length=_,n.spotShadow.length=b,n.spotShadowMap.length=b,n.directionalShadowMatrix.length=y,n.pointShadowMatrix.length=_,n.spotShadowMatrix.length=b,w.directionalLength=p,w.pointLength=h,w.spotLength=g,w.rectAreaLength=v,w.hemiLength=m,w.numDirectionalShadows=y,w.numPointShadows=_,w.numSpotShadows=b,n.version=Brt++)}return{setup:a,state:n}}function l7(){const e=new Frt,t=[],n=[];function r(){t.length=0,n.length=0}function i(l){t.push(l)}function o(l){n.push(l)}function a(l){e.setup(t,n,l)}return{init:r,state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:a,pushLight:i,pushShadow:o}}function jrt(){let e=new WeakMap;function t(i){const o=i.target;o.removeEventListener("dispose",t),e.delete(o)}function n(i,o){let a;return e.has(i)===!1?(a=new l7,e.set(i,new WeakMap),e.get(i).set(o,a),i.addEventListener("dispose",t)):e.get(i).has(o)===!1?(a=new l7,e.get(i).set(o,a)):a=e.get(i).get(o),a}function r(){e=new WeakMap}return{get:n,dispose:r}}function lh(e){tn.call(this),this.type="MeshDepthMaterial",this.depthPacking=OQe,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}lh.prototype=Object.create(tn.prototype);lh.prototype.constructor=lh;lh.prototype.isMeshDepthMaterial=!0;lh.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};function ch(e){tn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new V,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}ch.prototype=Object.create(tn.prototype);ch.prototype.constructor=ch;ch.prototype.isMeshDistanceMaterial=!0;ch.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var zrt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,Urt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function Oie(e,t,n){let r=new Dx;const i=new rt,o=new rt,a=new Jn,s=[],l=[],c={},u={0:wi,1:C0,2:Rx},f=new Ei({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new rt},radius:{value:4}},vertexShader:Urt,fragmentShader:zrt}),d=f.clone();d.defines.HORIZONAL_PASS=1;const p=new At;p.setAttribute("position",new Dt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const h=new hr(p,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=lie,this.render=function(x,w,S){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||x.length===0)return;const A=e.getRenderTarget(),C=e.getActiveCubeFace(),k=e.getActiveMipmapLevel(),O=e.state;O.setBlending(Su),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);for(let T=0,B=x.length;T<B;T++){const R=x[T],P=R.shadow;if(P.autoUpdate===!1&&P.needsUpdate===!1)continue;if(P===void 0){console.warn("THREE.WebGLShadowMap:",R,"has no shadow.");continue}i.copy(P.mapSize);const D=P.getFrameExtents();if(i.multiply(D),o.copy(P.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(o.x=Math.floor(n/D.x),i.x=o.x*D.x,P.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/D.y),i.y=o.y*D.y,P.mapSize.y=o.y)),P.map===null&&!P.isPointLightShadow&&this.type===Vy){const N={minFilter:mi,magFilter:mi,format:wa};P.map=new qo(i.x,i.y,N),P.map.texture.name=R.name+".shadowMap",P.mapPass=new qo(i.x,i.y,N),P.camera.updateProjectionMatrix()}if(P.map===null){const N={minFilter:sr,magFilter:sr,format:wa};P.map=new qo(i.x,i.y,N),P.map.texture.name=R.name+".shadowMap",P.camera.updateProjectionMatrix()}e.setRenderTarget(P.map),e.clear();const z=P.getViewportCount();for(let N=0;N<z;N++){const H=P.getViewport(N);a.set(o.x*H.x,o.y*H.y,o.x*H.z,o.y*H.w),O.viewport(a),P.updateMatrices(R,N),r=P.getFrustum(),b(w,S,P.camera,R,this.type)}!P.isPointLightShadow&&this.type===Vy&&v(P,S),P.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(A,C,k)};function v(x,w){const S=t.update(h);f.uniforms.shadow_pass.value=x.map.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,e.setRenderTarget(x.mapPass),e.clear(),e.renderBufferDirect(w,null,S,f,h,null),d.uniforms.shadow_pass.value=x.mapPass.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,e.setRenderTarget(x.map),e.clear(),e.renderBufferDirect(w,null,S,d,h,null)}function m(x,w,S){const A=x<<0|w<<1|S<<2;let C=s[A];return C===void 0&&(C=new lh({depthPacking:IQe,morphTargets:x,skinning:w}),s[A]=C),C}function y(x,w,S){const A=x<<0|w<<1|S<<2;let C=l[A];return C===void 0&&(C=new ch({morphTargets:x,skinning:w}),l[A]=C),C}function _(x,w,S,A,C,k,O){let T=null,B=m,R=x.customDepthMaterial;if(A.isPointLight===!0&&(B=y,R=x.customDistanceMaterial),R===void 0){let P=!1;S.morphTargets===!0&&(P=w.morphAttributes&&w.morphAttributes.position&&w.morphAttributes.position.length>0);let D=!1;x.isSkinnedMesh===!0&&(S.skinning===!0?D=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",x));const z=x.isInstancedMesh===!0;T=B(P,D,z)}else T=R;if(e.localClippingEnabled&&S.clipShadows===!0&&S.clippingPlanes.length!==0){const P=T.uuid,D=S.uuid;let z=c[P];z===void 0&&(z={},c[P]=z);let N=z[D];N===void 0&&(N=T.clone(),z[D]=N),T=N}return T.visible=S.visible,T.wireframe=S.wireframe,O===Vy?T.side=S.shadowSide!==null?S.shadowSide:S.side:T.side=S.shadowSide!==null?S.shadowSide:u[S.side],T.clipShadows=S.clipShadows,T.clippingPlanes=S.clippingPlanes,T.clipIntersection=S.clipIntersection,T.wireframeLinewidth=S.wireframeLinewidth,T.linewidth=S.linewidth,A.isPointLight===!0&&T.isMeshDistanceMaterial===!0&&(T.referencePosition.setFromMatrixPosition(A.matrixWorld),T.nearDistance=C,T.farDistance=k),T}function b(x,w,S,A,C){if(x.visible===!1)return;if(x.layers.test(w.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&C===Vy)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,x.matrixWorld);const T=t.update(x),B=x.material;if(Array.isArray(B)){const R=T.groups;for(let P=0,D=R.length;P<D;P++){const z=R[P],N=B[z.materialIndex];if(N&&N.visible){const H=_(x,T,N,A,S.near,S.far,C);e.renderBufferDirect(S,null,T,H,x,z)}}}else if(B.visible){const R=_(x,T,B,A,S.near,S.far,C);e.renderBufferDirect(S,null,T,R,x,null)}}const O=x.children;for(let T=0,B=O.length;T<B;T++)b(O[T],w,S,A,C)}}function Vrt(e,t,n){const r=n.isWebGL2;function i(){let pe=!1;const ve=new Jn;let $e=null;const Ne=new Jn(0,0,0,0);return{setMask:function(Ae){$e!==Ae&&!pe&&(e.colorMask(Ae,Ae,Ae,Ae),$e=Ae)},setLocked:function(Ae){pe=Ae},setClear:function(Ae,Oe,j,M,L){L===!0&&(Ae*=M,Oe*=M,j*=M),ve.set(Ae,Oe,j,M),Ne.equals(ve)===!1&&(e.clearColor(Ae,Oe,j,M),Ne.copy(ve))},reset:function(){pe=!1,$e=null,Ne.set(-1,0,0,0)}}}function o(){let pe=!1,ve=null,$e=null,Ne=null;return{setTest:function(Ae){Ae?J(2929):ne(2929)},setMask:function(Ae){ve!==Ae&&!pe&&(e.depthMask(Ae),ve=Ae)},setFunc:function(Ae){if($e!==Ae){if(Ae)switch(Ae){case bJe:e.depthFunc(512);break;case _Je:e.depthFunc(519);break;case xJe:e.depthFunc(513);break;case xL:e.depthFunc(515);break;case wJe:e.depthFunc(514);break;case SJe:e.depthFunc(518);break;case CJe:e.depthFunc(516);break;case AJe:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);$e=Ae}},setLocked:function(Ae){pe=Ae},setClear:function(Ae){Ne!==Ae&&(e.clearDepth(Ae),Ne=Ae)},reset:function(){pe=!1,ve=null,$e=null,Ne=null}}}function a(){let pe=!1,ve=null,$e=null,Ne=null,Ae=null,Oe=null,j=null,M=null,L=null;return{setTest:function(q){pe||(q?J(2960):ne(2960))},setMask:function(q){ve!==q&&!pe&&(e.stencilMask(q),ve=q)},setFunc:function(q,me,Te){($e!==q||Ne!==me||Ae!==Te)&&(e.stencilFunc(q,me,Te),$e=q,Ne=me,Ae=Te)},setOp:function(q,me,Te){(Oe!==q||j!==me||M!==Te)&&(e.stencilOp(q,me,Te),Oe=q,j=me,M=Te)},setLocked:function(q){pe=q},setClear:function(q){L!==q&&(e.clearStencil(q),L=q)},reset:function(){pe=!1,ve=null,$e=null,Ne=null,Ae=null,Oe=null,j=null,M=null,L=null}}}const s=new i,l=new o,c=new a;let u={},f=null,d=null,p=null,h=null,g=null,v=null,m=null,y=null,_=null,b=!1,x=null,w=null,S=null,A=null,C=null;const k=e.getParameter(35661);let O=!1,T=0;const B=e.getParameter(7938);B.indexOf("WebGL")!==-1?(T=parseFloat(/^WebGL\ ([0-9])/.exec(B)[1]),O=T>=1):B.indexOf("OpenGL ES")!==-1&&(T=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(B)[1]),O=T>=2);let R=null,P={};const D=new Jn,z=new Jn;function N(pe,ve,$e){const Ne=new Uint8Array(4),Ae=e.createTexture();e.bindTexture(pe,Ae),e.texParameteri(pe,10241,9728),e.texParameteri(pe,10240,9728);for(let Oe=0;Oe<$e;Oe++)e.texImage2D(ve+Oe,0,6408,1,1,0,6408,5121,Ne);return Ae}const H={};H[3553]=N(3553,3553,1),H[34067]=N(34067,34069,6),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),J(2929),l.setFunc(xL),he(!1),ae(C9),J(2884),se(Su);function J(pe){u[pe]!==!0&&(e.enable(pe),u[pe]=!0)}function ne(pe){u[pe]!==!1&&(e.disable(pe),u[pe]=!1)}function oe(pe){return f!==pe?(e.useProgram(pe),f=pe,!0):!1}const Z={[Dm]:32774,[lJe]:32778,[cJe]:32779};if(r)Z[M9]=32775,Z[E9]=32776;else{const pe=t.get("EXT_blend_minmax");pe!==null&&(Z[M9]=pe.MIN_EXT,Z[E9]=pe.MAX_EXT)}const ce={[uJe]:0,[fJe]:1,[dJe]:768,[uie]:770,[yJe]:776,[gJe]:774,[hJe]:772,[pJe]:769,[fie]:771,[vJe]:775,[mJe]:773};function se(pe,ve,$e,Ne,Ae,Oe,j,M){if(pe===Su){d&&(ne(3042),d=!1);return}if(d||(J(3042),d=!0),pe!==sJe){if(pe!==p||M!==b){if((h!==Dm||m!==Dm)&&(e.blendEquation(32774),h=Dm,m=Dm),M)switch(pe){case nd:e.blendFuncSeparate(1,771,1,771);break;case _L:e.blendFunc(1,1);break;case A9:e.blendFuncSeparate(0,0,769,771);break;case P9:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}else switch(pe){case nd:e.blendFuncSeparate(770,771,1,771);break;case _L:e.blendFunc(770,1);break;case A9:e.blendFunc(0,769);break;case P9:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",pe);break}g=null,v=null,y=null,_=null,p=pe,b=M}return}Ae=Ae||ve,Oe=Oe||$e,j=j||Ne,(ve!==h||Ae!==m)&&(e.blendEquationSeparate(Z[ve],Z[Ae]),h=ve,m=Ae),($e!==g||Ne!==v||Oe!==y||j!==_)&&(e.blendFuncSeparate(ce[$e],ce[Ne],ce[Oe],ce[j]),g=$e,v=Ne,y=Oe,_=j),p=pe,b=null}function Y(pe,ve){pe.side===Rx?ne(2884):J(2884);let $e=pe.side===wi;ve&&($e=!$e),he($e),pe.blending===nd&&pe.transparent===!1?se(Su):se(pe.blending,pe.blendEquation,pe.blendSrc,pe.blendDst,pe.blendEquationAlpha,pe.blendSrcAlpha,pe.blendDstAlpha,pe.premultipliedAlpha),l.setFunc(pe.depthFunc),l.setTest(pe.depthTest),l.setMask(pe.depthWrite),s.setMask(pe.colorWrite);const Ne=pe.stencilWrite;c.setTest(Ne),Ne&&(c.setMask(pe.stencilWriteMask),c.setFunc(pe.stencilFunc,pe.stencilRef,pe.stencilFuncMask),c.setOp(pe.stencilFail,pe.stencilZFail,pe.stencilZPass)),re(pe.polygonOffset,pe.polygonOffsetFactor,pe.polygonOffsetUnits)}function he(pe){x!==pe&&(pe?e.frontFace(2304):e.frontFace(2305),x=pe)}function ae(pe){pe!==iJe?(J(2884),pe!==w&&(pe===C9?e.cullFace(1029):pe===oJe?e.cullFace(1028):e.cullFace(1032))):ne(2884),w=pe}function ye(pe){pe!==S&&(O&&e.lineWidth(pe),S=pe)}function re(pe,ve,$e){pe?(J(32823),(A!==ve||C!==$e)&&(e.polygonOffset(ve,$e),A=ve,C=$e)):ne(32823)}function te(pe){pe?J(3089):ne(3089)}function le(pe){pe===void 0&&(pe=33984+k-1),R!==pe&&(e.activeTexture(pe),R=pe)}function de(pe,ve){R===null&&le();let $e=P[R];$e===void 0&&($e={type:void 0,texture:void 0},P[R]=$e),($e.type!==pe||$e.texture!==ve)&&(e.bindTexture(pe,ve||H[pe]),$e.type=pe,$e.texture=ve)}function _e(){const pe=P[R];pe!==void 0&&pe.type!==void 0&&(e.bindTexture(pe.type,null),pe.type=void 0,pe.texture=void 0)}function be(){try{e.compressedTexImage2D.apply(e,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ke(){try{e.texImage2D.apply(e,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function W(){try{e.texImage3D.apply(e,arguments)}catch(pe){console.error("THREE.WebGLState:",pe)}}function ee(pe){D.equals(pe)===!1&&(e.scissor(pe.x,pe.y,pe.z,pe.w),D.copy(pe))}function Ee(pe){z.equals(pe)===!1&&(e.viewport(pe.x,pe.y,pe.z,pe.w),z.copy(pe))}function ge(){u={},R=null,P={},f=null,p=null,x=null,w=null,s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:J,disable:ne,useProgram:oe,setBlending:se,setMaterial:Y,setFlipSided:he,setCullFace:ae,setLineWidth:ye,setPolygonOffset:re,setScissorTest:te,activeTexture:le,bindTexture:de,unbindTexture:_e,compressedTexImage2D:be,texImage2D:ke,texImage3D:W,scissor:ee,viewport:Ee,reset:ge}}function Hrt(e,t,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,f=i.maxSamples,d=new WeakMap;let p,h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(W,ee){return h?new OffscreenCanvas(W,ee):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(W,ee,Ee,ge){let pe=1;if((W.width>ge||W.height>ge)&&(pe=ge/Math.max(W.width,W.height)),pe<1||ee===!0)if(typeof HTMLImageElement<"u"&&W instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&W instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&W instanceof ImageBitmap){const ve=ee?un.floorPowerOfTwo:Math.floor,$e=ve(pe*W.width),Ne=ve(pe*W.height);p===void 0&&(p=g($e,Ne));const Ae=Ee?g($e,Ne):p;return Ae.width=$e,Ae.height=Ne,Ae.getContext("2d").drawImage(W,0,0,$e,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+W.width+"x"+W.height+") to ("+$e+"x"+Ne+")."),Ae}else return"data"in W&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+W.width+"x"+W.height+")."),W;return W}function m(W){return un.isPowerOfTwo(W.width)&&un.isPowerOfTwo(W.height)}function y(W){return s?!1:W.wrapS!==pa||W.wrapT!==pa||W.minFilter!==sr&&W.minFilter!==mi}function _(W,ee){return W.generateMipmaps&&ee&&W.minFilter!==sr&&W.minFilter!==mi}function b(W,ee,Ee,ge){e.generateMipmap(W);const pe=r.get(ee);pe.__maxMipLevel=Math.log(Math.max(Ee,ge))*Math.LOG2E}function x(W,ee,Ee){if(s===!1)return ee;if(W!==null){if(e[W]!==void 0)return e[W];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+W+"'")}let ge=ee;return ee===6403&&(Ee===5126&&(ge=33326),Ee===5131&&(ge=33325),Ee===5121&&(ge=33321)),ee===6407&&(Ee===5126&&(ge=34837),Ee===5131&&(ge=34843),Ee===5121&&(ge=32849)),ee===6408&&(Ee===5126&&(ge=34836),Ee===5131&&(ge=34842),Ee===5121&&(ge=32856)),(ge===33325||ge===33326||ge===34842||ge===34836)&&t.get("EXT_color_buffer_float"),ge}function w(W){return W===sr||W===wL||W===SL?9728:9729}function S(W){const ee=W.target;ee.removeEventListener("dispose",S),C(ee),ee.isVideoTexture&&d.delete(ee),a.memory.textures--}function A(W){const ee=W.target;ee.removeEventListener("dispose",A),k(ee),a.memory.textures--}function C(W){const ee=r.get(W);ee.__webglInit!==void 0&&(e.deleteTexture(ee.__webglTexture),r.remove(W))}function k(W){const ee=r.get(W),Ee=r.get(W.texture);if(W){if(Ee.__webglTexture!==void 0&&e.deleteTexture(Ee.__webglTexture),W.depthTexture&&W.depthTexture.dispose(),W.isWebGLCubeRenderTarget)for(let ge=0;ge<6;ge++)e.deleteFramebuffer(ee.__webglFramebuffer[ge]),ee.__webglDepthbuffer&&e.deleteRenderbuffer(ee.__webglDepthbuffer[ge]);else e.deleteFramebuffer(ee.__webglFramebuffer),ee.__webglDepthbuffer&&e.deleteRenderbuffer(ee.__webglDepthbuffer),ee.__webglMultisampledFramebuffer&&e.deleteFramebuffer(ee.__webglMultisampledFramebuffer),ee.__webglColorRenderbuffer&&e.deleteRenderbuffer(ee.__webglColorRenderbuffer),ee.__webglDepthRenderbuffer&&e.deleteRenderbuffer(ee.__webglDepthRenderbuffer);r.remove(W.texture),r.remove(W)}}let O=0;function T(){O=0}function B(){const W=O;return W>=l&&console.warn("THREE.WebGLTextures: Trying to use "+W+" texture units while this GPU supports only "+l),O+=1,W}function R(W,ee){const Ee=r.get(W);if(W.isVideoTexture&&le(W),W.version>0&&Ee.__version!==W.version){const ge=W.image;if(ge===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Z(Ee,W,ee);return}}n.activeTexture(33984+ee),n.bindTexture(3553,Ee.__webglTexture)}function P(W,ee){const Ee=r.get(W);if(W.version>0&&Ee.__version!==W.version){Z(Ee,W,ee);return}n.activeTexture(33984+ee),n.bindTexture(35866,Ee.__webglTexture)}function D(W,ee){const Ee=r.get(W);if(W.version>0&&Ee.__version!==W.version){Z(Ee,W,ee);return}n.activeTexture(33984+ee),n.bindTexture(32879,Ee.__webglTexture)}function z(W,ee){if(W.image.length!==6)return;const Ee=r.get(W);if(W.version>0&&Ee.__version!==W.version){oe(Ee,W),n.activeTexture(33984+ee),n.bindTexture(34067,Ee.__webglTexture),e.pixelStorei(37440,W.flipY);const ge=W&&(W.isCompressedTexture||W.image[0].isCompressedTexture),pe=W.image[0]&&W.image[0].isDataTexture,ve=[];for(let L=0;L<6;L++)!ge&&!pe?ve[L]=v(W.image[L],!1,!0,c):ve[L]=pe?W.image[L].image:W.image[L];const $e=ve[0],Ne=m($e)||s,Ae=o.convert(W.format),Oe=o.convert(W.type),j=x(W.internalFormat,Ae,Oe);ne(34067,W,Ne);let M;if(ge){for(let L=0;L<6;L++){M=ve[L].mipmaps;for(let q=0;q<M.length;q++){const me=M[q];W.format!==wa&&W.format!==kp?Ae!==null?n.compressedTexImage2D(34069+L,q,j,me.width,me.height,0,me.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+L,q,j,me.width,me.height,0,Ae,Oe,me.data)}}Ee.__maxMipLevel=M.length-1}else{M=W.mipmaps;for(let L=0;L<6;L++)if(pe){n.texImage2D(34069+L,0,j,ve[L].width,ve[L].height,0,Ae,Oe,ve[L].data);for(let q=0;q<M.length;q++){const Te=M[q].image[L].image;n.texImage2D(34069+L,q+1,j,Te.width,Te.height,0,Ae,Oe,Te.data)}}else{n.texImage2D(34069+L,0,j,Ae,Oe,ve[L]);for(let q=0;q<M.length;q++){const me=M[q];n.texImage2D(34069+L,q+1,j,Ae,Oe,me.image[L])}}Ee.__maxMipLevel=M.length}_(W,Ne)&&b(34067,W,$e.width,$e.height),Ee.__version=W.version,W.onUpdate&&W.onUpdate(W)}else n.activeTexture(33984+ee),n.bindTexture(34067,Ee.__webglTexture)}function N(W,ee){n.activeTexture(33984+ee),n.bindTexture(34067,r.get(W).__webglTexture)}const H={[aA]:10497,[pa]:33071,[sA]:33648},J={[sr]:9728,[wL]:9984,[SL]:9986,[mi]:9729,[pie]:9985,[tT]:9987};function ne(W,ee,Ee){Ee?(e.texParameteri(W,10242,H[ee.wrapS]),e.texParameteri(W,10243,H[ee.wrapT]),(W===32879||W===35866)&&e.texParameteri(W,32882,H[ee.wrapR]),e.texParameteri(W,10240,J[ee.magFilter]),e.texParameteri(W,10241,J[ee.minFilter])):(e.texParameteri(W,10242,33071),e.texParameteri(W,10243,33071),(W===32879||W===35866)&&e.texParameteri(W,32882,33071),(ee.wrapS!==pa||ee.wrapT!==pa)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(W,10240,w(ee.magFilter)),e.texParameteri(W,10241,w(ee.minFilter)),ee.minFilter!==sr&&ee.minFilter!==mi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const ge=t.get("EXT_texture_filter_anisotropic");if(ge){if(ee.type===pu&&t.get("OES_texture_float_linear")===null||ee.type===cA&&(s||t.get("OES_texture_half_float_linear"))===null)return;(ee.anisotropy>1||r.get(ee).__currentAnisotropy)&&(e.texParameterf(W,ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ee.anisotropy,i.getMaxAnisotropy())),r.get(ee).__currentAnisotropy=ee.anisotropy)}}function oe(W,ee){W.__webglInit===void 0&&(W.__webglInit=!0,ee.addEventListener("dispose",S),W.__webglTexture=e.createTexture(),a.memory.textures++)}function Z(W,ee,Ee){let ge=3553;ee.isDataTexture2DArray&&(ge=35866),ee.isDataTexture3D&&(ge=32879),oe(W,ee),n.activeTexture(33984+Ee),n.bindTexture(ge,W.__webglTexture),e.pixelStorei(37440,ee.flipY),e.pixelStorei(37441,ee.premultiplyAlpha),e.pixelStorei(3317,ee.unpackAlignment);const pe=y(ee)&&m(ee.image)===!1,ve=v(ee.image,pe,!1,u),$e=m(ve)||s,Ne=o.convert(ee.format);let Ae=o.convert(ee.type),Oe=x(ee.internalFormat,Ne,Ae);ne(ge,ee,$e);let j;const M=ee.mipmaps;if(ee.isDepthTexture)Oe=6402,s?ee.type===pu?Oe=36012:ee.type===IS?Oe=33190:ee.type===wb?Oe=35056:Oe=33189:ee.type===pu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ee.format===Rg&&Oe===6402&&ee.type!==lA&&ee.type!==IS&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ee.type=lA,Ae=o.convert(ee.type)),ee.format===_1&&Oe===6402&&(Oe=34041,ee.type!==wb&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ee.type=wb,Ae=o.convert(ee.type))),n.texImage2D(3553,0,Oe,ve.width,ve.height,0,Ne,Ae,null);else if(ee.isDataTexture)if(M.length>0&&$e){for(let L=0,q=M.length;L<q;L++)j=M[L],n.texImage2D(3553,L,Oe,j.width,j.height,0,Ne,Ae,j.data);ee.generateMipmaps=!1,W.__maxMipLevel=M.length-1}else n.texImage2D(3553,0,Oe,ve.width,ve.height,0,Ne,Ae,ve.data),W.__maxMipLevel=0;else if(ee.isCompressedTexture){for(let L=0,q=M.length;L<q;L++)j=M[L],ee.format!==wa&&ee.format!==kp?Ne!==null?n.compressedTexImage2D(3553,L,Oe,j.width,j.height,0,j.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,L,Oe,j.width,j.height,0,Ne,Ae,j.data);W.__maxMipLevel=M.length-1}else if(ee.isDataTexture2DArray)n.texImage3D(35866,0,Oe,ve.width,ve.height,ve.depth,0,Ne,Ae,ve.data),W.__maxMipLevel=0;else if(ee.isDataTexture3D)n.texImage3D(32879,0,Oe,ve.width,ve.height,ve.depth,0,Ne,Ae,ve.data),W.__maxMipLevel=0;else if(M.length>0&&$e){for(let L=0,q=M.length;L<q;L++)j=M[L],n.texImage2D(3553,L,Oe,Ne,Ae,j);ee.generateMipmaps=!1,W.__maxMipLevel=M.length-1}else n.texImage2D(3553,0,Oe,Ne,Ae,ve),W.__maxMipLevel=0;_(ee,$e)&&b(ge,ee,ve.width,ve.height),W.__version=ee.version,ee.onUpdate&&ee.onUpdate(ee)}function ce(W,ee,Ee,ge){const pe=o.convert(ee.texture.format),ve=o.convert(ee.texture.type),$e=x(ee.texture.internalFormat,pe,ve);n.texImage2D(ge,0,$e,ee.width,ee.height,0,pe,ve,null),e.bindFramebuffer(36160,W),e.framebufferTexture2D(36160,Ee,ge,r.get(ee.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function se(W,ee,Ee){if(e.bindRenderbuffer(36161,W),ee.depthBuffer&&!ee.stencilBuffer){let ge=33189;if(Ee){const pe=ee.depthTexture;pe&&pe.isDepthTexture&&(pe.type===pu?ge=36012:pe.type===IS&&(ge=33190));const ve=te(ee);e.renderbufferStorageMultisample(36161,ve,ge,ee.width,ee.height)}else e.renderbufferStorage(36161,ge,ee.width,ee.height);e.framebufferRenderbuffer(36160,36096,36161,W)}else if(ee.depthBuffer&&ee.stencilBuffer){if(Ee){const ge=te(ee);e.renderbufferStorageMultisample(36161,ge,35056,ee.width,ee.height)}else e.renderbufferStorage(36161,34041,ee.width,ee.height);e.framebufferRenderbuffer(36160,33306,36161,W)}else{const ge=o.convert(ee.texture.format),pe=o.convert(ee.texture.type),ve=x(ee.texture.internalFormat,ge,pe);if(Ee){const $e=te(ee);e.renderbufferStorageMultisample(36161,$e,ve,ee.width,ee.height)}else e.renderbufferStorage(36161,ve,ee.width,ee.height)}e.bindRenderbuffer(36161,null)}function Y(W,ee){if(ee&&ee.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,W),!(ee.depthTexture&&ee.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ee.depthTexture).__webglTexture||ee.depthTexture.image.width!==ee.width||ee.depthTexture.image.height!==ee.height)&&(ee.depthTexture.image.width=ee.width,ee.depthTexture.image.height=ee.height,ee.depthTexture.needsUpdate=!0),R(ee.depthTexture,0);const ge=r.get(ee.depthTexture).__webglTexture;if(ee.depthTexture.format===Rg)e.framebufferTexture2D(36160,36096,3553,ge,0);else if(ee.depthTexture.format===_1)e.framebufferTexture2D(36160,33306,3553,ge,0);else throw new Error("Unknown depthTexture format")}function he(W){const ee=r.get(W),Ee=W.isWebGLCubeRenderTarget===!0;if(W.depthTexture){if(Ee)throw new Error("target.depthTexture not supported in Cube render targets");Y(ee.__webglFramebuffer,W)}else if(Ee){ee.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)e.bindFramebuffer(36160,ee.__webglFramebuffer[ge]),ee.__webglDepthbuffer[ge]=e.createRenderbuffer(),se(ee.__webglDepthbuffer[ge],W,!1)}else e.bindFramebuffer(36160,ee.__webglFramebuffer),ee.__webglDepthbuffer=e.createRenderbuffer(),se(ee.__webglDepthbuffer,W,!1);e.bindFramebuffer(36160,null)}function ae(W){const ee=r.get(W),Ee=r.get(W.texture);W.addEventListener("dispose",A),Ee.__webglTexture=e.createTexture(),a.memory.textures++;const ge=W.isWebGLCubeRenderTarget===!0,pe=W.isWebGLMultisampleRenderTarget===!0,ve=m(W)||s;if(s&&W.texture.format===kp&&(W.texture.type===pu||W.texture.type===cA)&&(W.texture.format=wa,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),ge){ee.__webglFramebuffer=[];for(let $e=0;$e<6;$e++)ee.__webglFramebuffer[$e]=e.createFramebuffer()}else if(ee.__webglFramebuffer=e.createFramebuffer(),pe)if(s){ee.__webglMultisampledFramebuffer=e.createFramebuffer(),ee.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,ee.__webglColorRenderbuffer);const $e=o.convert(W.texture.format),Ne=o.convert(W.texture.type),Ae=x(W.texture.internalFormat,$e,Ne),Oe=te(W);e.renderbufferStorageMultisample(36161,Oe,Ae,W.width,W.height),e.bindFramebuffer(36160,ee.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,ee.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),W.depthBuffer&&(ee.__webglDepthRenderbuffer=e.createRenderbuffer(),se(ee.__webglDepthRenderbuffer,W,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(ge){n.bindTexture(34067,Ee.__webglTexture),ne(34067,W.texture,ve);for(let $e=0;$e<6;$e++)ce(ee.__webglFramebuffer[$e],W,36064,34069+$e);_(W.texture,ve)&&b(34067,W.texture,W.width,W.height),n.bindTexture(34067,null)}else n.bindTexture(3553,Ee.__webglTexture),ne(3553,W.texture,ve),ce(ee.__webglFramebuffer,W,36064,3553),_(W.texture,ve)&&b(3553,W.texture,W.width,W.height),n.bindTexture(3553,null);W.depthBuffer&&he(W)}function ye(W){const ee=W.texture,Ee=m(W)||s;if(_(ee,Ee)){const ge=W.isWebGLCubeRenderTarget?34067:3553,pe=r.get(ee).__webglTexture;n.bindTexture(ge,pe),b(ge,ee,W.width,W.height),n.bindTexture(ge,null)}}function re(W){if(W.isWebGLMultisampleRenderTarget)if(s){const ee=r.get(W);e.bindFramebuffer(36008,ee.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,ee.__webglFramebuffer);const Ee=W.width,ge=W.height;let pe=16384;W.depthBuffer&&(pe|=256),W.stencilBuffer&&(pe|=1024),e.blitFramebuffer(0,0,Ee,ge,0,0,Ee,ge,pe,9728),e.bindFramebuffer(36160,ee.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function te(W){return s&&W.isWebGLMultisampleRenderTarget?Math.min(f,W.samples):0}function le(W){const ee=a.render.frame;d.get(W)!==ee&&(d.set(W,ee),W.update())}let de=!1,_e=!1;function be(W,ee){W&&W.isWebGLRenderTarget&&(de===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),de=!0),W=W.texture),R(W,ee)}function ke(W,ee){W&&W.isWebGLCubeRenderTarget&&(_e===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),_e=!0),W=W.texture),W&&W.isCubeTexture||Array.isArray(W.image)&&W.image.length===6?z(W,ee):N(W,ee)}this.allocateTextureUnit=B,this.resetTextureUnits=T,this.setTexture2D=R,this.setTexture2DArray=P,this.setTexture3D=D,this.setTextureCube=z,this.setTextureCubeDynamic=N,this.setupRenderTarget=ae,this.updateRenderTargetMipmap=ye,this.updateMultisampleRenderTarget=re,this.safeSetTexture2D=be,this.safeSetTextureCube=ke}function Grt(e,t,n){const r=n.isWebGL2;function i(o){let a;if(o===ah)return 5121;if(o===DJe)return 32819;if(o===BJe)return 32820;if(o===NJe)return 33635;if(o===kJe)return 5120;if(o===LJe)return 5122;if(o===lA)return 5123;if(o===$Je)return 5124;if(o===IS)return 5125;if(o===pu)return 5126;if(o===cA)return r?5131:(a=t.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===FJe)return 6406;if(o===kp)return 6407;if(o===wa)return 6408;if(o===jJe)return 6409;if(o===zJe)return 6410;if(o===Rg)return 6402;if(o===_1)return 34041;if(o===VJe)return 6403;if(o===HJe)return 36244;if(o===GJe)return 33319;if(o===WJe)return 33320;if(o===qJe)return 36248;if(o===XJe)return 36249;if(o===T9||o===O9||o===I9||o===R9)if(a=t.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===T9)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===O9)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===I9)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===R9)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===k9||o===L9||o===$9||o===D9)if(a=t.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===k9)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===L9)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===$9)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===D9)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===YJe)return a=t.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if((o===B9||o===N9)&&(a=t.get("WEBGL_compressed_texture_etc"),a!==null)){if(o===B9)return a.COMPRESSED_RGB8_ETC2;if(o===N9)return a.COMPRESSED_RGBA8_ETC2_EAC}if(o===KJe||o===ZJe||o===JJe||o===QJe||o===eQe||o===tQe||o===nQe||o===rQe||o===iQe||o===oQe||o===aQe||o===sQe||o===lQe||o===cQe||o===fQe||o===dQe||o===pQe||o===hQe||o===mQe||o===gQe||o===vQe||o===yQe||o===bQe||o===_Qe||o===xQe||o===wQe||o===SQe||o===CQe)return a=t.get("WEBGL_compressed_texture_astc"),a!==null?o:null;if(o===uQe)return a=t.get("EXT_texture_compression_bptc"),a!==null?o:null;if(o===wb)return r?34042:(a=t.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}function IL(e){fi.call(this),this.cameras=e||[]}IL.prototype=Object.assign(Object.create(fi.prototype),{constructor:IL,isArrayCamera:!0});function Kn(){Ct.call(this),this.type="Group"}Kn.prototype=Object.assign(Object.create(Ct.prototype),{constructor:Kn,isGroup:!0});function pA(){this._targetRay=null,this._grip=null}Object.assign(pA.prototype,{constructor:pA,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Kn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Kn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(e,t,n){let r=null,i=null;const o=this._targetRay,a=this._grip;return e&&(o!==null&&(r=t.getPose(e.targetRaySpace,n),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),a!==null&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)))),o!==null&&(o.visible=r!==null),a!==null&&(a.visible=i!==null),this}});function Iie(e,t){const n=this;let r=null,i=1,o=null,a="local-floor",s=null;const l=[],c=new Map,u=new fi;u.layers.enable(1),u.viewport=new Jn;const f=new fi;f.layers.enable(2),f.viewport=new Jn;const d=[u,f],p=new IL;p.layers.enable(1),p.layers.enable(2);let h=null,g=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let T=l[O];return T===void 0&&(T=new pA,l[O]=T),T.getTargetRaySpace()},this.getControllerGrip=function(O){let T=l[O];return T===void 0&&(T=new pA,l[O]=T),T.getGripSpace()};function v(O){const T=c.get(O.inputSource);T&&T.dispatchEvent({type:O.type})}function m(){c.forEach(function(O,T){O.disconnect(T)}),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),k.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(O){o=O,k.setContext(r),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(O){i=O,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){a=O,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return r},this.setSession=function(O){if(r=O,r!==null){r.addEventListener("select",v),r.addEventListener("selectstart",v),r.addEventListener("selectend",v),r.addEventListener("squeeze",v),r.addEventListener("squeezestart",v),r.addEventListener("squeezeend",v),r.addEventListener("end",m);const T=t.getContextAttributes();T.xrCompatible!==!0&&t.makeXRCompatible();const B={antialias:T.antialias,alpha:T.alpha,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:i},R=new XRWebGLLayer(r,t,B);r.updateRenderState({baseLayer:R}),r.requestReferenceSpace(a).then(y),r.addEventListener("inputsourceschange",_)}};function _(O){const T=r.inputSources;for(let B=0;B<l.length;B++)c.set(T[B],l[B]);for(let B=0;B<O.removed.length;B++){const R=O.removed[B],P=c.get(R);P&&(P.dispatchEvent({type:"disconnected",data:R}),c.delete(R))}for(let B=0;B<O.added.length;B++){const R=O.added[B],P=c.get(R);P&&P.dispatchEvent({type:"connected",data:R})}}const b=new V,x=new V;function w(O,T,B){b.setFromMatrixPosition(T.matrixWorld),x.setFromMatrixPosition(B.matrixWorld);const R=b.distanceTo(x),P=T.projectionMatrix.elements,D=B.projectionMatrix.elements,z=P[14]/(P[10]-1),N=P[14]/(P[10]+1),H=(P[9]+1)/P[5],J=(P[9]-1)/P[5],ne=(P[8]-1)/P[0],oe=(D[8]+1)/D[0],Z=z*ne,ce=z*oe,se=R/(-ne+oe),Y=se*-ne;T.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(Y),O.translateZ(se),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.getInverse(O.matrixWorld);const he=z+se,ae=N+se,ye=Z-Y,re=ce+(R-Y),te=H*N/ae*he,le=J*N/ae*he;O.projectionMatrix.makePerspective(ye,re,te,le,he,ae)}function S(O,T){T===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(T.matrixWorld,O.matrix),O.matrixWorldInverse.getInverse(O.matrixWorld)}this.getCamera=function(O){p.near=f.near=u.near=O.near,p.far=f.far=u.far=O.far,(h!==p.near||g!==p.far)&&(r.updateRenderState({depthNear:p.near,depthFar:p.far}),h=p.near,g=p.far);const T=O.parent,B=p.cameras;S(p,T);for(let P=0;P<B.length;P++)S(B[P],T);O.matrixWorld.copy(p.matrixWorld);const R=O.children;for(let P=0,D=R.length;P<D;P++)R[P].updateMatrixWorld(!0);return B.length===2?w(p,u,f):p.projectionMatrix.copy(u.projectionMatrix),p};let A=null;function C(O,T){if(s=T.getViewerPose(o),s!==null){const R=s.views,P=r.renderState.baseLayer;e.setFramebuffer(P.framebuffer);let D=!1;R.length!==p.cameras.length&&(p.cameras.length=0,D=!0);for(let z=0;z<R.length;z++){const N=R[z],H=P.getViewport(N),J=d[z];J.matrix.fromArray(N.transform.matrix),J.projectionMatrix.fromArray(N.projectionMatrix),J.viewport.set(H.x,H.y,H.width,H.height),z===0&&p.matrix.copy(J.matrix),D===!0&&p.cameras.push(J)}}const B=r.inputSources;for(let R=0;R<l.length;R++){const P=l[R],D=B[R];P.update(D,T,o)}A&&A(O,T)}const k=new wie;k.setAnimationLoop(C),this.setAnimationLoop=function(O){A=O},this.dispose=function(){}}Object.assign(Iie.prototype,Ju.prototype);function Wrt(e){function t(m,y){m.fogColor.value.copy(y.color),y.isFog?(m.fogNear.value=y.near,m.fogFar.value=y.far):y.isFogExp2&&(m.fogDensity.value=y.density)}function n(m,y,_,b,x){y.isMeshBasicMaterial?r(m,y):y.isMeshLambertMaterial?(r(m,y),l(m,y)):y.isMeshToonMaterial?(r(m,y),u(m,y)):y.isMeshPhongMaterial?(r(m,y),c(m,y)):y.isMeshStandardMaterial?(r(m,y,_),y.isMeshPhysicalMaterial?d(m,y,_):f(m,y,_)):y.isMeshMatcapMaterial?(r(m,y),p(m,y)):y.isMeshDepthMaterial?(r(m,y),h(m,y)):y.isMeshDistanceMaterial?(r(m,y),g(m,y)):y.isMeshNormalMaterial?(r(m,y),v(m,y)):y.isLineBasicMaterial?(i(m,y),y.isLineDashedMaterial&&o(m,y)):y.isPointsMaterial?a(m,y,b,x):y.isSpriteMaterial?s(m,y):y.isShadowMaterial?(m.color.value.copy(y.color),m.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function r(m,y,_){m.opacity.value=y.opacity,y.color&&m.diffuse.value.copy(y.color),y.emissive&&m.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(m.map.value=y.map),y.alphaMap&&(m.alphaMap.value=y.alphaMap),y.specularMap&&(m.specularMap.value=y.specularMap);const b=y.envMap||_;b&&(m.envMap.value=b,m.flipEnvMap.value=b.isCubeTexture?-1:1,m.reflectivity.value=y.reflectivity,m.refractionRatio.value=y.refractionRatio,m.maxMipLevel.value=e.get(b).__maxMipLevel),y.lightMap&&(m.lightMap.value=y.lightMap,m.lightMapIntensity.value=y.lightMapIntensity),y.aoMap&&(m.aoMap.value=y.aoMap,m.aoMapIntensity.value=y.aoMapIntensity);let x;y.map?x=y.map:y.specularMap?x=y.specularMap:y.displacementMap?x=y.displacementMap:y.normalMap?x=y.normalMap:y.bumpMap?x=y.bumpMap:y.roughnessMap?x=y.roughnessMap:y.metalnessMap?x=y.metalnessMap:y.alphaMap?x=y.alphaMap:y.emissiveMap&&(x=y.emissiveMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix));let w;y.aoMap?w=y.aoMap:y.lightMap&&(w=y.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),m.uv2Transform.value.copy(w.matrix))}function i(m,y){m.diffuse.value.copy(y.color),m.opacity.value=y.opacity}function o(m,y){m.dashSize.value=y.dashSize,m.totalSize.value=y.dashSize+y.gapSize,m.scale.value=y.scale}function a(m,y,_,b){m.diffuse.value.copy(y.color),m.opacity.value=y.opacity,m.size.value=y.size*_,m.scale.value=b*.5,y.map&&(m.map.value=y.map),y.alphaMap&&(m.alphaMap.value=y.alphaMap);let x;y.map?x=y.map:y.alphaMap&&(x=y.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function s(m,y){m.diffuse.value.copy(y.color),m.opacity.value=y.opacity,m.rotation.value=y.rotation,y.map&&(m.map.value=y.map),y.alphaMap&&(m.alphaMap.value=y.alphaMap);let _;y.map?_=y.map:y.alphaMap&&(_=y.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix))}function l(m,y){y.emissiveMap&&(m.emissiveMap.value=y.emissiveMap)}function c(m,y){m.specular.value.copy(y.specular),m.shininess.value=Math.max(y.shininess,1e-4),y.emissiveMap&&(m.emissiveMap.value=y.emissiveMap),y.bumpMap&&(m.bumpMap.value=y.bumpMap,m.bumpScale.value=y.bumpScale,y.side===wi&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,m.normalScale.value.copy(y.normalScale),y.side===wi&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias)}function u(m,y){y.gradientMap&&(m.gradientMap.value=y.gradientMap),y.emissiveMap&&(m.emissiveMap.value=y.emissiveMap),y.bumpMap&&(m.bumpMap.value=y.bumpMap,m.bumpScale.value=y.bumpScale,y.side===wi&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,m.normalScale.value.copy(y.normalScale),y.side===wi&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias)}function f(m,y,_){m.roughness.value=y.roughness,m.metalness.value=y.metalness,y.roughnessMap&&(m.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(m.metalnessMap.value=y.metalnessMap),y.emissiveMap&&(m.emissiveMap.value=y.emissiveMap),y.bumpMap&&(m.bumpMap.value=y.bumpMap,m.bumpScale.value=y.bumpScale,y.side===wi&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,m.normalScale.value.copy(y.normalScale),y.side===wi&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias),(y.envMap||_)&&(m.envMapIntensity.value=y.envMapIntensity)}function d(m,y,_){f(m,y,_),m.reflectivity.value=y.reflectivity,m.clearcoat.value=y.clearcoat,m.clearcoatRoughness.value=y.clearcoatRoughness,y.sheen&&m.sheen.value.copy(y.sheen),y.clearcoatMap&&(m.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),m.clearcoatNormalMap.value=y.clearcoatNormalMap,y.side===wi&&m.clearcoatNormalScale.value.negate()),m.transparency.value=y.transparency}function p(m,y){y.matcap&&(m.matcap.value=y.matcap),y.bumpMap&&(m.bumpMap.value=y.bumpMap,m.bumpScale.value=y.bumpScale,y.side===wi&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,m.normalScale.value.copy(y.normalScale),y.side===wi&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias)}function h(m,y){y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias)}function g(m,y){y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias),m.referencePosition.value.copy(y.referencePosition),m.nearDistance.value=y.nearDistance,m.farDistance.value=y.farDistance}function v(m,y){y.bumpMap&&(m.bumpMap.value=y.bumpMap,m.bumpScale.value=y.bumpScale,y.side===wi&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,m.normalScale.value.copy(y.normalScale),y.side===wi&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function Bx(e){e=e||{};const t=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=e.context!==void 0?e.context:null,r=e.alpha!==void 0?e.alpha:!1,i=e.depth!==void 0?e.depth:!0,o=e.stencil!==void 0?e.stencil:!0,a=e.antialias!==void 0?e.antialias:!1,s=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,l=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,c=e.powerPreference!==void 0?e.powerPreference:"default",u=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1;let f=null,d=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ro,this.physicallyCorrectLights=!1,this.toneMapping=Ig,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let h=!1,g=null,v=0,m=0,y=null,_=null,b=-1,x=null,w=null;const S=new Jn,A=new Jn;let C=null,k=t.width,O=t.height,T=1,B=null,R=null;const P=new Jn(0,0,k,O),D=new Jn(0,0,k,O);let z=!1;const N=new Dx,H=new Snt;let J=!1,ne=!1;const oe=new lt,Z=new V,ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function se(){return y===null?T:1}let Y=n;function he(xe,ie){for(let ue=0;ue<xe.length;ue++){const E=xe[ue],F=t.getContext(E,ie);if(F!==null)return F}return null}try{const xe={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",q,!1),t.addEventListener("webglcontextrestored",me,!1),Y===null){const ie=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&ie.shift(),Y=he(ie,xe),Y===null)throw he(ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Y.getShaderPrecisionFormat===void 0&&(Y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(xe){throw console.error("THREE.WebGLRenderer: "+xe.message),xe}let ae,ye,re,te,le,de,_e,be,ke,W,ee,Ee,ge,pe,ve,$e,Ne,Ae,Oe;function j(){ae=new Cnt(Y),ye=new wnt(Y,ae,e),ye.isWebGL2===!1&&(ae.get("WEBGL_depth_texture"),ae.get("OES_texture_float"),ae.get("OES_texture_half_float"),ae.get("OES_texture_half_float_linear"),ae.get("OES_standard_derivatives"),ae.get("OES_element_index_uint"),ae.get("OES_vertex_array_object"),ae.get("ANGLE_instanced_arrays")),ae.get("OES_texture_float_linear"),Ae=new Grt(Y,ae,ye),re=new Vrt(Y,ae,ye),re.scissor(A.copy(D).multiplyScalar(T).floor()),re.viewport(S.copy(P).multiplyScalar(T).floor()),te=new Mnt,le=new Irt,de=new Hrt(Y,ae,re,le,ye,Ae,te),_e=new ZQe(Y,ye),Oe=new _nt(Y,ae,_e,ye),be=new Ant(Y,_e,te,Oe),ke=new Int(Y,be,_e,te),ve=new Ont(Y),W=new Ort(p,ae,ye,Oe),ee=new Wrt(le),Ee=new Lrt,ge=new jrt,pe=new bnt(p,re,ke,s),$e=new xnt(Y,ae,te,ye),Ne=new Pnt(Y,ae,te,ye),te.programs=W.programs,p.capabilities=ye,p.extensions=ae,p.properties=le,p.renderLists=Ee,p.state=re,p.info=te}j();const M=new Iie(p,Y);this.xr=M;const L=new Oie(p,ke,ye.maxTextureSize);this.shadowMap=L,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){const xe=ae.get("WEBGL_lose_context");xe&&xe.loseContext()},this.forceContextRestore=function(){const xe=ae.get("WEBGL_lose_context");xe&&xe.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(xe){xe!==void 0&&(T=xe,this.setSize(k,O,!1))},this.getSize=function(xe){return xe===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),xe=new rt),xe.set(k,O)},this.setSize=function(xe,ie,ue){if(M.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=xe,O=ie,t.width=Math.floor(xe*T),t.height=Math.floor(ie*T),ue!==!1&&(t.style.width=xe+"px",t.style.height=ie+"px"),this.setViewport(0,0,xe,ie)},this.getDrawingBufferSize=function(xe){return xe===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),xe=new rt),xe.set(k*T,O*T).floor()},this.setDrawingBufferSize=function(xe,ie,ue){k=xe,O=ie,T=ue,t.width=Math.floor(xe*ue),t.height=Math.floor(ie*ue),this.setViewport(0,0,xe,ie)},this.getCurrentViewport=function(xe){return xe===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),xe=new Jn),xe.copy(S)},this.getViewport=function(xe){return xe.copy(P)},this.setViewport=function(xe,ie,ue,E){xe.isVector4?P.set(xe.x,xe.y,xe.z,xe.w):P.set(xe,ie,ue,E),re.viewport(S.copy(P).multiplyScalar(T).floor())},this.getScissor=function(xe){return xe.copy(D)},this.setScissor=function(xe,ie,ue,E){xe.isVector4?D.set(xe.x,xe.y,xe.z,xe.w):D.set(xe,ie,ue,E),re.scissor(A.copy(D).multiplyScalar(T).floor())},this.getScissorTest=function(){return z},this.setScissorTest=function(xe){re.setScissorTest(z=xe)},this.setOpaqueSort=function(xe){B=xe},this.setTransparentSort=function(xe){R=xe},this.getClearColor=function(){return pe.getClearColor()},this.setClearColor=function(){pe.setClearColor.apply(pe,arguments)},this.getClearAlpha=function(){return pe.getClearAlpha()},this.setClearAlpha=function(){pe.setClearAlpha.apply(pe,arguments)},this.clear=function(xe,ie,ue){let E=0;(xe===void 0||xe)&&(E|=16384),(ie===void 0||ie)&&(E|=256),(ue===void 0||ue)&&(E|=1024),Y.clear(E)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",q,!1),t.removeEventListener("webglcontextrestored",me,!1),Ee.dispose(),ge.dispose(),le.dispose(),ke.dispose(),Oe.dispose(),M.dispose(),Ye.stop()};function q(xe){xe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),h=!0}function me(){console.log("THREE.WebGLRenderer: Context Restored."),h=!1,j()}function Te(xe){const ie=xe.target;ie.removeEventListener("dispose",Te),Pe(ie)}function Pe(xe){Xe(xe),le.remove(xe)}function Xe(xe){const ie=le.get(xe).program;xe.program=void 0,ie!==void 0&&W.releaseProgram(ie)}function He(xe,ie){xe.render(function(ue){p.renderBufferImmediate(ue,ie)})}this.renderBufferImmediate=function(xe,ie){Oe.initAttributes();const ue=le.get(xe);xe.hasPositions&&!ue.position&&(ue.position=Y.createBuffer()),xe.hasNormals&&!ue.normal&&(ue.normal=Y.createBuffer()),xe.hasUvs&&!ue.uv&&(ue.uv=Y.createBuffer()),xe.hasColors&&!ue.color&&(ue.color=Y.createBuffer());const E=ie.getAttributes();xe.hasPositions&&(Y.bindBuffer(34962,ue.position),Y.bufferData(34962,xe.positionArray,35048),Oe.enableAttribute(E.position),Y.vertexAttribPointer(E.position,3,5126,!1,0,0)),xe.hasNormals&&(Y.bindBuffer(34962,ue.normal),Y.bufferData(34962,xe.normalArray,35048),Oe.enableAttribute(E.normal),Y.vertexAttribPointer(E.normal,3,5126,!1,0,0)),xe.hasUvs&&(Y.bindBuffer(34962,ue.uv),Y.bufferData(34962,xe.uvArray,35048),Oe.enableAttribute(E.uv),Y.vertexAttribPointer(E.uv,2,5126,!1,0,0)),xe.hasColors&&(Y.bindBuffer(34962,ue.color),Y.bufferData(34962,xe.colorArray,35048),Oe.enableAttribute(E.color),Y.vertexAttribPointer(E.color,3,5126,!1,0,0)),Oe.disableUnusedAttributes(),Y.drawArrays(4,0,xe.count),xe.count=0},this.renderBufferDirect=function(xe,ie,ue,E,F,U){ie===null&&(ie=ce);const X=F.isMesh&&F.matrixWorld.determinant()<0,Q=et(xe,ie,E,F);re.setMaterial(E,X);let fe=ue.index;const we=ue.attributes.position;if(fe===null){if(we===void 0||we.count===0)return}else if(fe.count===0)return;let Se=1;E.wireframe===!0&&(fe=be.getWireframeAttribute(ue),Se=2),(E.morphTargets||E.morphNormals)&&ve.update(F,ue,E,Q),Oe.setup(F,E,Q,ue,fe);let ze,Fe=$e;fe!==null&&(ze=_e.get(fe),Fe=Ne,Fe.setIndex(ze));const Ke=fe!==null?fe.count:we.count,Le=ue.drawRange.start*Se,Me=ue.drawRange.count*Se,Re=U!==null?U.start*Se:0,qe=U!==null?U.count*Se:1/0,nt=Math.max(Le,Re),ft=Math.min(Ke,Le+Me,Re+qe)-1,pt=Math.max(0,ft-nt+1);if(pt!==0){if(F.isMesh)E.wireframe===!0?(re.setLineWidth(E.wireframeLinewidth*se()),Fe.setMode(1)):Fe.setMode(4);else if(F.isLine){let Gt=E.linewidth;Gt===void 0&&(Gt=1),re.setLineWidth(Gt*se()),F.isLineSegments?Fe.setMode(1):F.isLineLoop?Fe.setMode(2):Fe.setMode(3)}else F.isPoints?Fe.setMode(0):F.isSprite&&Fe.setMode(4);if(F.isInstancedMesh)Fe.renderInstances(ue,nt,pt,F.count);else if(ue.isInstancedBufferGeometry){const Gt=Math.min(ue.instanceCount,ue._maxInstanceCount);Fe.renderInstances(ue,nt,pt,Gt)}else Fe.render(nt,pt)}},this.compile=function(xe,ie){d=ge.get(xe,ie),d.init(),xe.traverse(function(E){E.isLight&&(d.pushLight(E),E.castShadow&&d.pushShadow(E))}),d.setupLights(ie);const ue=new WeakMap;xe.traverse(function(E){let F=E.material;if(F)if(Array.isArray(F))for(let U=0;U<F.length;U++){let X=F[U];ue.has(X)===!1&&(Et(X,xe,E),ue.set(X))}else ue.has(F)===!1&&(Et(F,xe,E),ue.set(F))})};let Ve=null;function Je(xe){M.isPresenting||Ve&&Ve(xe)}const Ye=new wie;Ye.setAnimationLoop(Je),typeof window<"u"&&Ye.setContext(window),this.setAnimationLoop=function(xe){Ve=xe,M.setAnimationLoop(xe),xe===null?Ye.stop():Ye.start()},this.render=function(xe,ie){let ue,E;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),ue=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),E=arguments[3]),ie!==void 0&&ie.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(h===!0)return;Oe.resetDefaultState(),b=-1,x=null,xe.autoUpdate===!0&&xe.updateMatrixWorld(),ie.parent===null&&ie.updateMatrixWorld(),M.enabled===!0&&M.isPresenting===!0&&(ie=M.getCamera(ie)),xe.isScene===!0&&xe.onBeforeRender(p,xe,ie,ue||y),d=ge.get(xe,ie),d.init(),oe.multiplyMatrices(ie.projectionMatrix,ie.matrixWorldInverse),N.setFromProjectionMatrix(oe),ne=this.localClippingEnabled,J=H.init(this.clippingPlanes,ne,ie),f=Ee.get(xe,ie),f.init(),yt(xe,ie,0,p.sortObjects),f.finish(),p.sortObjects===!0&&f.sort(B,R),J===!0&&H.beginShadows();const F=d.state.shadowsArray;L.render(F,xe,ie),d.setupLights(ie),J===!0&&H.endShadows(),this.info.autoReset===!0&&this.info.reset(),ue!==void 0&&this.setRenderTarget(ue),pe.render(f,xe,ie,E);const U=f.opaque,X=f.transparent;U.length>0&&mt(U,xe,ie),X.length>0&&mt(X,xe,ie),xe.isScene===!0&&xe.onAfterRender(p,xe,ie),y!==null&&(de.updateRenderTargetMipmap(y),de.updateMultisampleRenderTarget(y)),re.buffers.depth.setTest(!0),re.buffers.depth.setMask(!0),re.buffers.color.setMask(!0),re.setPolygonOffset(!1),f=null,d=null};function yt(xe,ie,ue,E){if(xe.visible===!1)return;if(xe.layers.test(ie.layers)){if(xe.isGroup)ue=xe.renderOrder;else if(xe.isLOD)xe.autoUpdate===!0&&xe.update(ie);else if(xe.isLight)d.pushLight(xe),xe.castShadow&&d.pushShadow(xe);else if(xe.isSprite){if(!xe.frustumCulled||N.intersectsSprite(xe)){E&&Z.setFromMatrixPosition(xe.matrixWorld).applyMatrix4(oe);const X=ke.update(xe),Q=xe.material;Q.visible&&f.push(xe,X,Q,ue,Z.z,null)}}else if(xe.isImmediateRenderObject)E&&Z.setFromMatrixPosition(xe.matrixWorld).applyMatrix4(oe),f.push(xe,null,xe.material,ue,Z.z,null);else if((xe.isMesh||xe.isLine||xe.isPoints)&&(xe.isSkinnedMesh&&xe.skeleton.frame!==te.render.frame&&(xe.skeleton.update(),xe.skeleton.frame=te.render.frame),!xe.frustumCulled||N.intersectsObject(xe))){E&&Z.setFromMatrixPosition(xe.matrixWorld).applyMatrix4(oe);const X=ke.update(xe),Q=xe.material;if(Array.isArray(Q)){const fe=X.groups;for(let we=0,Se=fe.length;we<Se;we++){const ze=fe[we],Fe=Q[ze.materialIndex];Fe&&Fe.visible&&f.push(xe,X,Fe,ue,Z.z,ze)}}else Q.visible&&f.push(xe,X,Q,ue,Z.z,null)}}const U=xe.children;for(let X=0,Q=U.length;X<Q;X++)yt(U[X],ie,ue,E)}function mt(xe,ie,ue){const E=ie.isScene===!0?ie.overrideMaterial:null;for(let F=0,U=xe.length;F<U;F++){const X=xe[F],Q=X.object,fe=X.geometry,we=E===null?X.material:E,Se=X.group;if(ue.isArrayCamera){w=ue;const ze=ue.cameras;for(let Fe=0,Ke=ze.length;Fe<Ke;Fe++){const Le=ze[Fe];Q.layers.test(Le.layers)&&(re.viewport(S.copy(Le.viewport)),d.setupLights(Le),ut(Q,ie,Le,fe,we,Se))}}else w=null,ut(Q,ie,ue,fe,we,Se)}}function ut(xe,ie,ue,E,F,U){if(xe.onBeforeRender(p,ie,ue,E,F,U),d=ge.get(ie,w||ue),xe.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,xe.matrixWorld),xe.normalMatrix.getNormalMatrix(xe.modelViewMatrix),xe.isImmediateRenderObject){const X=et(ue,ie,F,xe);re.setMaterial(F),Oe.reset(),He(xe,X)}else p.renderBufferDirect(ue,ie,E,F,xe,U);xe.onAfterRender(p,ie,ue,E,F,U),d=ge.get(ie,w||ue)}function Et(xe,ie,ue){ie.isScene!==!0&&(ie=ce);const E=le.get(xe),F=d.state.lights,U=d.state.shadowsArray,X=F.state.version,Q=W.getParameters(xe,F.state,U,ie,H.numPlanes,H.numIntersection,ue),fe=W.getProgramCacheKey(Q);let we=E.program,Se=!0;if(we===void 0)xe.addEventListener("dispose",Te);else if(we.cacheKey!==fe)Xe(xe);else if(E.lightsStateVersion!==X)E.lightsStateVersion=X,Se=!1;else{if(Q.shaderID!==void 0)return;Se=!1}Se&&(we=W.acquireProgram(Q,fe),E.program=we,E.uniforms=Q.uniforms,E.outputEncoding=Q.outputEncoding,xe.program=we);const ze=we.getAttributes();if(xe.morphTargets){xe.numSupportedMorphTargets=0;for(let Me=0;Me<p.maxMorphTargets;Me++)ze["morphTarget"+Me]>=0&&xe.numSupportedMorphTargets++}if(xe.morphNormals){xe.numSupportedMorphNormals=0;for(let Me=0;Me<p.maxMorphNormals;Me++)ze["morphNormal"+Me]>=0&&xe.numSupportedMorphNormals++}const Fe=E.uniforms;(!xe.isShaderMaterial&&!xe.isRawShaderMaterial||xe.clipping===!0)&&(E.numClippingPlanes=H.numPlanes,E.numIntersection=H.numIntersection,Fe.clippingPlanes=H.uniform),E.environment=xe.isMeshStandardMaterial?ie.environment:null,E.fog=ie.fog,E.needsLights=_t(xe),E.lightsStateVersion=X,E.needsLights&&(Fe.ambientLightColor.value=F.state.ambient,Fe.lightProbe.value=F.state.probe,Fe.directionalLights.value=F.state.directional,Fe.directionalLightShadows.value=F.state.directionalShadow,Fe.spotLights.value=F.state.spot,Fe.spotLightShadows.value=F.state.spotShadow,Fe.rectAreaLights.value=F.state.rectArea,Fe.pointLights.value=F.state.point,Fe.pointLightShadows.value=F.state.pointShadow,Fe.hemisphereLights.value=F.state.hemi,Fe.directionalShadowMap.value=F.state.directionalShadowMap,Fe.directionalShadowMatrix.value=F.state.directionalShadowMatrix,Fe.spotShadowMap.value=F.state.spotShadowMap,Fe.spotShadowMatrix.value=F.state.spotShadowMatrix,Fe.pointShadowMap.value=F.state.pointShadowMap,Fe.pointShadowMatrix.value=F.state.pointShadowMatrix);const Ke=E.program.getUniforms(),Le=rd.seqWithValue(Ke.seq,Fe);E.uniformsList=Le}function et(xe,ie,ue,E){ie.isScene!==!0&&(ie=ce),de.resetTextureUnits();const F=ie.fog,U=ue.isMeshStandardMaterial?ie.environment:null,X=y===null?p.outputEncoding:y.texture.encoding,Q=le.get(ue),fe=d.state.lights;if(J===!0&&(ne===!0||xe!==x)){const Me=xe===x&&ue.id===b;H.setState(ue.clippingPlanes,ue.clipIntersection,ue.clipShadows,xe,Q,Me)}ue.version===Q.__version?(Q.program===void 0||ue.fog&&Q.fog!==F||Q.environment!==U||Q.needsLights&&Q.lightsStateVersion!==fe.state.version||Q.numClippingPlanes!==void 0&&(Q.numClippingPlanes!==H.numPlanes||Q.numIntersection!==H.numIntersection)||Q.outputEncoding!==X)&&Et(ue,ie,E):(Et(ue,ie,E),Q.__version=ue.version);let we=!1,Se=!1,ze=!1;const Fe=Q.program,Ke=Fe.getUniforms(),Le=Q.uniforms;if(re.useProgram(Fe.program)&&(we=!0,Se=!0,ze=!0),ue.id!==b&&(b=ue.id,Se=!0),we||x!==xe){if(Ke.setValue(Y,"projectionMatrix",xe.projectionMatrix),ye.logarithmicDepthBuffer&&Ke.setValue(Y,"logDepthBufFC",2/(Math.log(xe.far+1)/Math.LN2)),x!==xe&&(x=xe,Se=!0,ze=!0),ue.isShaderMaterial||ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshStandardMaterial||ue.envMap){const Me=Ke.map.cameraPosition;Me!==void 0&&Me.setValue(Y,Z.setFromMatrixPosition(xe.matrixWorld))}(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&Ke.setValue(Y,"isOrthographic",xe.isOrthographicCamera===!0),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial||ue.isShadowMaterial||ue.skinning)&&Ke.setValue(Y,"viewMatrix",xe.matrixWorldInverse)}if(ue.skinning){Ke.setOptional(Y,E,"bindMatrix"),Ke.setOptional(Y,E,"bindMatrixInverse");const Me=E.skeleton;if(Me){const Re=Me.bones;if(ye.floatVertexTextures){if(Me.boneTexture===void 0){let qe=Math.sqrt(Re.length*4);qe=un.ceilPowerOfTwo(qe),qe=Math.max(qe,4);const nt=new Float32Array(qe*qe*4);nt.set(Me.boneMatrices);const ft=new Lu(nt,qe,qe,wa,pu);Me.boneMatrices=nt,Me.boneTexture=ft,Me.boneTextureSize=qe}Ke.setValue(Y,"boneTexture",Me.boneTexture,de),Ke.setValue(Y,"boneTextureSize",Me.boneTextureSize)}else Ke.setOptional(Y,Me,"boneMatrices")}}return(Se||Q.receiveShadow!==E.receiveShadow)&&(Q.receiveShadow=E.receiveShadow,Ke.setValue(Y,"receiveShadow",E.receiveShadow)),Se&&(Ke.setValue(Y,"toneMappingExposure",p.toneMappingExposure),Q.needsLights&&ct(Le,ze),F&&ue.fog&&ee.refreshFogUniforms(Le,F),ee.refreshMaterialUniforms(Le,ue,U,T,O),Le.ltc_1!==void 0&&(Le.ltc_1.value=St.LTC_1),Le.ltc_2!==void 0&&(Le.ltc_2.value=St.LTC_2),rd.upload(Y,Q.uniformsList,Le,de)),ue.isShaderMaterial&&ue.uniformsNeedUpdate===!0&&(rd.upload(Y,Q.uniformsList,Le,de),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&Ke.setValue(Y,"center",E.center),Ke.setValue(Y,"modelViewMatrix",E.modelViewMatrix),Ke.setValue(Y,"normalMatrix",E.normalMatrix),Ke.setValue(Y,"modelMatrix",E.matrixWorld),Fe}function ct(xe,ie){xe.ambientLightColor.needsUpdate=ie,xe.lightProbe.needsUpdate=ie,xe.directionalLights.needsUpdate=ie,xe.directionalLightShadows.needsUpdate=ie,xe.pointLights.needsUpdate=ie,xe.pointLightShadows.needsUpdate=ie,xe.spotLights.needsUpdate=ie,xe.spotLightShadows.needsUpdate=ie,xe.rectAreaLights.needsUpdate=ie,xe.hemisphereLights.needsUpdate=ie}function _t(xe){return xe.isMeshLambertMaterial||xe.isMeshToonMaterial||xe.isMeshPhongMaterial||xe.isMeshStandardMaterial||xe.isShadowMaterial||xe.isShaderMaterial&&xe.lights===!0}this.setFramebuffer=function(xe){g!==xe&&y===null&&Y.bindFramebuffer(36160,xe),g=xe},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return m},this.getRenderTarget=function(){return y},this.setRenderTarget=function(xe,ie,ue){y=xe,v=ie,m=ue,xe&&le.get(xe).__webglFramebuffer===void 0&&de.setupRenderTarget(xe);let E=g,F=!1;if(xe){const U=le.get(xe).__webglFramebuffer;xe.isWebGLCubeRenderTarget?(E=U[ie||0],F=!0):xe.isWebGLMultisampleRenderTarget?E=le.get(xe).__webglMultisampledFramebuffer:E=U,S.copy(xe.viewport),A.copy(xe.scissor),C=xe.scissorTest}else S.copy(P).multiplyScalar(T).floor(),A.copy(D).multiplyScalar(T).floor(),C=z;if(_!==E&&(Y.bindFramebuffer(36160,E),_=E),re.viewport(S),re.scissor(A),re.setScissorTest(C),F){const U=le.get(xe.texture);Y.framebufferTexture2D(36160,36064,34069+(ie||0),U.__webglTexture,ue||0)}},this.readRenderTargetPixels=function(xe,ie,ue,E,F,U,X){if(!(xe&&xe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Q=le.get(xe).__webglFramebuffer;if(xe.isWebGLCubeRenderTarget&&X!==void 0&&(Q=Q[X]),Q){let fe=!1;Q!==_&&(Y.bindFramebuffer(36160,Q),fe=!0);try{const we=xe.texture,Se=we.format,ze=we.type;if(Se!==wa&&Ae.convert(Se)!==Y.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(ze!==ah&&Ae.convert(ze)!==Y.getParameter(35738)&&!(ze===pu&&(ye.isWebGL2||ae.get("OES_texture_float")||ae.get("WEBGL_color_buffer_float")))&&!(ze===cA&&(ye.isWebGL2?ae.get("EXT_color_buffer_float"):ae.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Y.checkFramebufferStatus(36160)===36053?ie>=0&&ie<=xe.width-E&&ue>=0&&ue<=xe.height-F&&Y.readPixels(ie,ue,E,F,Ae.convert(Se),Ae.convert(ze),U):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{fe&&Y.bindFramebuffer(36160,_)}}},this.copyFramebufferToTexture=function(xe,ie,ue){ue===void 0&&(ue=0);const E=Math.pow(2,-ue),F=Math.floor(ie.image.width*E),U=Math.floor(ie.image.height*E),X=Ae.convert(ie.format);de.setTexture2D(ie,0),Y.copyTexImage2D(3553,ue,X,xe.x,xe.y,F,U,0),re.unbindTexture()},this.copyTextureToTexture=function(xe,ie,ue,E){E===void 0&&(E=0);const F=ie.image.width,U=ie.image.height,X=Ae.convert(ue.format),Q=Ae.convert(ue.type);de.setTexture2D(ue,0),Y.pixelStorei(37440,ue.flipY),Y.pixelStorei(37441,ue.premultiplyAlpha),Y.pixelStorei(3317,ue.unpackAlignment),ie.isDataTexture?Y.texSubImage2D(3553,E,xe.x,xe.y,F,U,X,Q,ie.image.data):ie.isCompressedTexture?Y.compressedTexSubImage2D(3553,E,xe.x,xe.y,ie.mipmaps[0].width,ie.mipmaps[0].height,X,ie.mipmaps[0].data):Y.texSubImage2D(3553,E,xe.x,xe.y,X,Q,ie.image),E===0&&ue.generateMipmaps&&Y.generateMipmap(3553),re.unbindTexture()},this.initTexture=function(xe){de.setTexture2D(xe,0),re.unbindTexture()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function c7(e){Bx.call(this,e)}c7.prototype=Object.assign(Object.create(Bx.prototype),{constructor:c7,isWebGL1Renderer:!0});function RL(e,t){this.name="",this.color=new ht(e),this.density=t!==void 0?t:25e-5}Object.assign(RL.prototype,{isFogExp2:!0,clone:function(){return new RL(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function hA(e,t,n){this.name="",this.color=new ht(e),this.near=t!==void 0?t:1,this.far=n!==void 0?n:1e3}Object.assign(hA.prototype,{isFog:!0,clone:function(){return new hA(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function Ls(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=nT,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=un.generateUUID()}Object.defineProperty(Ls.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(Ls.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},clone:function(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=un.generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new Ls(t,this.stride);return n.setUsage(this.usage),n},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=un.generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Xd=new V;function uh(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}Object.defineProperties(uh.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(uh.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)Xd.x=this.getX(t),Xd.y=this.getY(t),Xd.z=this.getZ(t),Xd.applyMatrix4(e),this.setXYZ(t,Xd.x,Xd.y,Xd.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this},clone:function(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return new Dt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new uh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function fh(e){tn.call(this),this.type="SpriteMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}fh.prototype=Object.create(tn.prototype);fh.prototype.constructor=fh;fh.prototype.isSpriteMaterial=!0;fh.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};let hm;const cy=new V,mm=new V,gm=new V,vm=new rt,uy=new rt,Rie=new lt,i2=new V,fy=new V,o2=new V,u7=new rt,qI=new rt,f7=new rt;function kL(e){if(Ct.call(this),this.type="Sprite",hm===void 0){hm=new At;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ls(t,5);hm.setIndex([0,1,2,0,2,3]),hm.setAttribute("position",new uh(n,3,0,!1)),hm.setAttribute("uv",new uh(n,2,3,!1))}this.geometry=hm,this.material=e!==void 0?e:new fh,this.center=new rt(.5,.5)}kL.prototype=Object.assign(Object.create(Ct.prototype),{constructor:kL,isSprite:!0,raycast:function(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),mm.setFromMatrixScale(this.matrixWorld),Rie.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),gm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&mm.multiplyScalar(-gm.z);const n=this.material.rotation;let r,i;n!==0&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;a2(i2.set(-.5,-.5,0),gm,o,mm,r,i),a2(fy.set(.5,-.5,0),gm,o,mm,r,i),a2(o2.set(.5,.5,0),gm,o,mm,r,i),u7.set(0,0),qI.set(1,0),f7.set(1,1);let a=e.ray.intersectTriangle(i2,fy,o2,!1,cy);if(a===null&&(a2(fy.set(-.5,.5,0),gm,o,mm,r,i),qI.set(0,1),a=e.ray.intersectTriangle(i2,o2,fy,!1,cy),a===null))return;const s=e.ray.origin.distanceTo(cy);s<e.near||s>e.far||t.push({distance:s,point:cy.clone(),uv:io.getUV(cy,i2,fy,o2,u7,qI,f7,new rt),face:null,object:this})},copy:function(e){return Ct.prototype.copy.call(this,e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}});function a2(e,t,n,r,i,o){vm.subVectors(e,n).addScalar(.5).multiply(r),i!==void 0?(uy.x=o*vm.x-i*vm.y,uy.y=i*vm.x+o*vm.y):uy.copy(vm),e.copy(t),e.x+=uy.x,e.y+=uy.y,e.applyMatrix4(Rie)}const s2=new V,d7=new V;function mA(){Ct.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}mA.prototype=Object.assign(Object.create(Ct.prototype),{constructor:mA,isLOD:!0,copy:function(e){Ct.prototype.copy.call(this,e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const i=t[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){t===void 0&&(t=0),t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){s2.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(s2);this.getObjectForDistance(r).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){s2.setFromMatrixPosition(e.matrixWorld),d7.setFromMatrixPosition(this.matrixWorld);const n=s2.distanceTo(d7)/e.zoom;t[0].object.visible=!0;let r,i;for(r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}},toJSON:function(e){const t=Ct.prototype.toJSON.call(this,e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}});function LL(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),hr.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new lt,this.bindMatrixInverse=new lt}LL.prototype=Object.assign(Object.create(hr.prototype),{constructor:LL,isSkinnedMesh:!0,copy:function(e){return hr.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new Jn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){hr.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const e=new V,t=new Jn,n=new Jn,r=new V,i=new lt;return function(o,a){const s=this.skeleton,l=this.geometry;t.fromBufferAttribute(l.attributes.skinIndex,o),n.fromBufferAttribute(l.attributes.skinWeight,o),e.fromBufferAttribute(l.attributes.position,o).applyMatrix4(this.bindMatrix),a.set(0,0,0);for(let c=0;c<4;c++){const u=n.getComponent(c);if(u!==0){const f=t.getComponent(c);i.multiplyMatrices(s.bones[f].matrixWorld,s.boneInverses[f]),a.addScaledVector(r.copy(e).applyMatrix4(i),u)}}return a.applyMatrix4(this.bindMatrixInverse)}}()});const p7=new lt,qrt=new lt;function $L(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new lt)}}Object.assign($L.prototype,{calculateInverses:function(){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++){const n=new lt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.getInverse(this.boneInverses[e])}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.getInverse(n.parent.matrixWorld),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=e.length;i<o;i++){const a=e[i]?e[i].matrixWorld:qrt;p7.multiplyMatrices(a,t[i]),p7.toArray(n,i*16)}r!==void 0&&(r.needsUpdate=!0)},clone:function(){return new $L(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function h7(){Ct.call(this),this.type="Bone"}h7.prototype=Object.assign(Object.create(Ct.prototype),{constructor:h7,isBone:!0});const m7=new lt,g7=new lt,l2=[],dy=new hr;function DL(e,t,n){hr.call(this,e,t),this.instanceMatrix=new Dt(new Float32Array(n*16),16),this.count=n,this.frustumCulled=!1}DL.prototype=Object.assign(Object.create(hr.prototype),{constructor:DL,isInstancedMesh:!0,copy:function(e){return hr.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,e*16)},raycast:function(e,t){const n=this.matrixWorld,r=this.count;if(dy.geometry=this.geometry,dy.material=this.material,dy.material!==void 0)for(let i=0;i<r;i++){this.getMatrixAt(i,m7),g7.multiplyMatrices(n,m7),dy.matrixWorld=g7,dy.raycast(e,l2);for(let o=0,a=l2.length;o<a;o++){const s=l2[o];s.instanceId=i,s.object=this,t.push(s)}l2.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,e*16)},updateMorphTargets:function(){}});function oi(e){tn.call(this),this.type="LineBasicMaterial",this.color=new ht(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}oi.prototype=Object.create(tn.prototype);oi.prototype.constructor=oi;oi.prototype.isLineBasicMaterial=!0;oi.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const v7=new V,y7=new V,b7=new lt,c2=new P0,u2=new Qu;function Gs(e,t,n){n===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Ct.call(this),this.type="Line",this.geometry=e!==void 0?e:new At,this.material=t!==void 0?t:new oi,this.updateMorphTargets()}Gs.prototype=Object.assign(Object.create(Ct.prototype),{constructor:Gs,isLine:!0,copy:function(e){return Ct.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,i=t.count;r<i;r++)v7.fromBufferAttribute(t,r-1),y7.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=v7.distanceTo(y7);e.setAttribute("lineDistance",new Pt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;n[0]=0;for(let r=1,i=t.length;r<i;r++)n[r]=n[r-1],n[r]+=t[r-1].distanceTo(t[r])}return this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),u2.copy(n.boundingSphere),u2.applyMatrix4(r),u2.radius+=i,e.ray.intersectsSphere(u2)===!1)return;b7.getInverse(r),c2.copy(e.ray).applyMatrix4(b7);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new V,l=new V,c=new V,u=new V,f=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){const d=n.index,h=n.attributes.position.array;if(d!==null){const g=d.array;for(let v=0,m=g.length-1;v<m;v+=f){const y=g[v],_=g[v+1];if(s.fromArray(h,y*3),l.fromArray(h,_*3),c2.distanceSqToSegment(s,l,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(u);x<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(let g=0,v=h.length/3-1;g<v;g+=f){if(s.fromArray(h,3*g),l.fromArray(h,3*g+3),c2.distanceSqToSegment(s,l,u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const y=e.ray.origin.distanceTo(u);y<e.near||y>e.far||t.push({distance:y,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const d=n.vertices,p=d.length;for(let h=0;h<p-1;h+=f){if(c2.distanceSqToSegment(d[h],d[h+1],u,c)>a)continue;u.applyMatrix4(this.matrixWorld);const v=e.ray.origin.distanceTo(u);v<e.near||v>e.far||t.push({distance:v,point:c.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=r.length;i<o;i++){const a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const f2=new V,d2=new V;function Gr(e,t){Gs.call(this,e,t),this.type="LineSegments"}Gr.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Gr,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,i=t.count;r<i;r+=2)f2.fromBufferAttribute(t,r),d2.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+f2.distanceTo(d2);e.setAttribute("lineDistance",new Pt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;for(let r=0,i=t.length;r<i;r+=2)f2.copy(t[r]),d2.copy(t[r+1]),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+f2.distanceTo(d2)}return this}});function BL(e,t){Gs.call(this,e,t),this.type="LineLoop"}BL.prototype=Object.assign(Object.create(Gs.prototype),{constructor:BL,isLineLoop:!0});function dh(e){tn.call(this),this.type="PointsMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}dh.prototype=Object.create(tn.prototype);dh.prototype.constructor=dh;dh.prototype.isPointsMaterial=!0;dh.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const _7=new lt,NL=new P0,p2=new Qu,h2=new V;function T1(e,t){Ct.call(this),this.type="Points",this.geometry=e!==void 0?e:new At,this.material=t!==void 0?t:new dh,this.updateMorphTargets()}T1.prototype=Object.assign(Object.create(Ct.prototype),{constructor:T1,isPoints:!0,copy:function(e){return Ct.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),p2.copy(n.boundingSphere),p2.applyMatrix4(r),p2.radius+=i,e.ray.intersectsSphere(p2)===!1)return;_7.getInverse(r),NL.copy(e.ray).applyMatrix4(_7);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const s=n.index,c=n.attributes.position.array;if(s!==null){const u=s.array;for(let f=0,d=u.length;f<d;f++){const p=u[f];h2.fromArray(c,p*3),XI(h2,p,a,r,e,t,this)}}else for(let u=0,f=c.length/3;u<f;u++)h2.fromArray(c,u*3),XI(h2,u,a,r,e,t,this)}else{const s=n.vertices;for(let l=0,c=s.length;l<c;l++)XI(s[l],l,a,r,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=r.length;i<o;i++){const a=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function XI(e,t,n,r,i,o,a){const s=NL.distanceSqToPoint(e);if(s<n){const l=new V;NL.closestPointToPoint(e,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:t,face:null,object:a})}}function x7(e,t,n,r,i,o,a,s,l){mr.call(this,e,t,n,r,i,o,a,s,l),this.format=a!==void 0?a:kp,this.minFilter=o!==void 0?o:mi,this.magFilter=i!==void 0?i:mi,this.generateMipmaps=!1}x7.prototype=Object.assign(Object.create(mr.prototype),{constructor:x7,isVideoTexture:!0,update:function(){const e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function O1(e,t,n,r,i,o,a,s,l,c,u,f){mr.call(this,null,o,a,s,l,c,r,i,u,f),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}O1.prototype=Object.create(mr.prototype);O1.prototype.constructor=O1;O1.prototype.isCompressedTexture=!0;function I1(e,t,n,r,i,o,a,s,l){mr.call(this,e,t,n,r,i,o,a,s,l),this.needsUpdate=!0}I1.prototype=Object.create(mr.prototype);I1.prototype.constructor=I1;I1.prototype.isCanvasTexture=!0;function gA(e,t,n,r,i,o,a,s,l,c){if(c=c!==void 0?c:Rg,c!==Rg&&c!==_1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Rg&&(n=lA),n===void 0&&c===_1&&(n=wb),mr.call(this,null,r,i,o,a,s,c,n,l),this.image={width:e,height:t},this.magFilter=a!==void 0?a:sr,this.minFilter=s!==void 0?s:sr,this.flipY=!1,this.generateMipmaps=!1}gA.prototype=Object.create(mr.prototype);gA.prototype.constructor=gA;gA.prototype.isDepthTexture=!0;function vA(e){At.call(this),this.type="WireframeGeometry";const t=[],n=[0,0],r={},i=["a","b","c"];if(e&&e.isGeometry){const o=e.faces;for(let a=0,s=o.length;a<s;a++){const l=o[a];for(let c=0;c<3;c++){const u=l[i[c]],f=l[i[(c+1)%3]];n[0]=Math.min(u,f),n[1]=Math.max(u,f);const d=n[0]+","+n[1];r[d]===void 0&&(r[d]={index1:n[0],index2:n[1]})}}for(const a in r){const s=r[a];let l=e.vertices[s.index1];t.push(l.x,l.y,l.z),l=e.vertices[s.index2],t.push(l.x,l.y,l.z)}}else if(e&&e.isBufferGeometry){let o=new V;if(e.index!==null){const a=e.attributes.position,s=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:s.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],d=f.start,p=f.count;for(let h=d,g=d+p;h<g;h+=3)for(let v=0;v<3;v++){const m=s.getX(h+v),y=s.getX(h+(v+1)%3);n[0]=Math.min(m,y),n[1]=Math.max(m,y);const _=n[0]+","+n[1];r[_]===void 0&&(r[_]={index1:n[0],index2:n[1]})}}for(const c in r){const u=r[c];o.fromBufferAttribute(a,u.index1),t.push(o.x,o.y,o.z),o.fromBufferAttribute(a,u.index2),t.push(o.x,o.y,o.z)}}else{const a=e.attributes.position;for(let s=0,l=a.count/3;s<l;s++)for(let c=0;c<3;c++){const u=3*s+c;o.fromBufferAttribute(a,u),t.push(o.x,o.y,o.z);const f=3*s+(c+1)%3;o.fromBufferAttribute(a,f),t.push(o.x,o.y,o.z)}}}this.setAttribute("position",new Pt(t,3))}vA.prototype=Object.create(At.prototype);vA.prototype.constructor=vA;function yA(e,t,n){Kt.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new R1(e,t,n)),this.mergeVertices()}yA.prototype=Object.create(Kt.prototype);yA.prototype.constructor=yA;function R1(e,t,n){At.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};const r=[],i=[],o=[],a=[],s=1e-5,l=new V,c=new V,u=new V,f=new V,d=new V;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const p=t+1;for(let h=0;h<=n;h++){const g=h/n;for(let v=0;v<=t;v++){const m=v/t;e(m,g,c),i.push(c.x,c.y,c.z),m-s>=0?(e(m-s,g,u),f.subVectors(c,u)):(e(m+s,g,u),f.subVectors(u,c)),g-s>=0?(e(m,g-s,u),d.subVectors(c,u)):(e(m,g+s,u),d.subVectors(u,c)),l.crossVectors(f,d).normalize(),o.push(l.x,l.y,l.z),a.push(m,g)}}for(let h=0;h<n;h++)for(let g=0;g<t;g++){const v=h*p+g,m=h*p+g+1,y=(h+1)*p+g+1,_=(h+1)*p+g;r.push(v,m,_),r.push(m,y,_)}this.setIndex(r),this.setAttribute("position",new Pt(i,3)),this.setAttribute("normal",new Pt(o,3)),this.setAttribute("uv",new Pt(a,2))}R1.prototype=Object.create(At.prototype);R1.prototype.constructor=R1;function bA(e,t,n,r){Kt.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new ts(e,t,n,r)),this.mergeVertices()}bA.prototype=Object.create(Kt.prototype);bA.prototype.constructor=bA;function ts(e,t,n,r){At.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;const i=[],o=[];a(r),l(n),c(),this.setAttribute("position",new Pt(i,3)),this.setAttribute("normal",new Pt(i.slice(),3)),this.setAttribute("uv",new Pt(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(m){const y=new V,_=new V,b=new V;for(let x=0;x<t.length;x+=3)d(t[x+0],y),d(t[x+1],_),d(t[x+2],b),s(y,_,b,m)}function s(m,y,_,b){const x=Math.pow(2,b),w=[];for(let S=0;S<=x;S++){w[S]=[];const A=m.clone().lerp(_,S/x),C=y.clone().lerp(_,S/x),k=x-S;for(let O=0;O<=k;O++)O===0&&S===x?w[S][O]=A:w[S][O]=A.clone().lerp(C,O/k)}for(let S=0;S<x;S++)for(let A=0;A<2*(x-S)-1;A++){const C=Math.floor(A/2);A%2===0?(f(w[S][C+1]),f(w[S+1][C]),f(w[S][C])):(f(w[S][C+1]),f(w[S+1][C+1]),f(w[S+1][C]))}}function l(m){const y=new V;for(let _=0;_<i.length;_+=3)y.x=i[_+0],y.y=i[_+1],y.z=i[_+2],y.normalize().multiplyScalar(m),i[_+0]=y.x,i[_+1]=y.y,i[_+2]=y.z}function c(){const m=new V;for(let y=0;y<i.length;y+=3){m.x=i[y+0],m.y=i[y+1],m.z=i[y+2];const _=g(m)/2/Math.PI+.5,b=v(m)/Math.PI+.5;o.push(_,1-b)}p(),u()}function u(){for(let m=0;m<o.length;m+=6){const y=o[m+0],_=o[m+2],b=o[m+4],x=Math.max(y,_,b),w=Math.min(y,_,b);x>.9&&w<.1&&(y<.2&&(o[m+0]+=1),_<.2&&(o[m+2]+=1),b<.2&&(o[m+4]+=1))}}function f(m){i.push(m.x,m.y,m.z)}function d(m,y){const _=m*3;y.x=e[_+0],y.y=e[_+1],y.z=e[_+2]}function p(){const m=new V,y=new V,_=new V,b=new V,x=new rt,w=new rt,S=new rt;for(let A=0,C=0;A<i.length;A+=9,C+=6){m.set(i[A+0],i[A+1],i[A+2]),y.set(i[A+3],i[A+4],i[A+5]),_.set(i[A+6],i[A+7],i[A+8]),x.set(o[C+0],o[C+1]),w.set(o[C+2],o[C+3]),S.set(o[C+4],o[C+5]),b.copy(m).add(y).add(_).divideScalar(3);const k=g(b);h(x,C+0,m,k),h(w,C+2,y,k),h(S,C+4,_,k)}}function h(m,y,_,b){b<0&&m.x===1&&(o[y]=m.x-1),_.x===0&&_.z===0&&(o[y]=b/2/Math.PI+.5)}function g(m){return Math.atan2(m.z,-m.x)}function v(m){return Math.atan2(-m.y,Math.sqrt(m.x*m.x+m.z*m.z))}}ts.prototype=Object.create(At.prototype);ts.prototype.constructor=ts;function _A(e,t){Kt.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ov(e,t)),this.mergeVertices()}_A.prototype=Object.create(Kt.prototype);_A.prototype.constructor=_A;function Ov(e,t){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];ts.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}Ov.prototype=Object.create(ts.prototype);Ov.prototype.constructor=Ov;function xA(e,t){Kt.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ph(e,t)),this.mergeVertices()}xA.prototype=Object.create(Kt.prototype);xA.prototype.constructor=xA;function ph(e,t){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];ts.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}ph.prototype=Object.create(ts.prototype);ph.prototype.constructor=ph;function wA(e,t){Kt.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new hh(e,t)),this.mergeVertices()}wA.prototype=Object.create(Kt.prototype);wA.prototype.constructor=wA;function hh(e,t){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];ts.call(this,r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}hh.prototype=Object.create(ts.prototype);hh.prototype.constructor=hh;function SA(e,t){Kt.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new k1(e,t)),this.mergeVertices()}SA.prototype=Object.create(Kt.prototype);SA.prototype.constructor=SA;function k1(e,t){const n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];ts.call(this,i,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}k1.prototype=Object.create(ts.prototype);k1.prototype.constructor=k1;function CA(e,t,n,r,i,o){Kt.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},o!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");const a=new Iv(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}CA.prototype=Object.create(Kt.prototype);CA.prototype.constructor=CA;function Iv(e,t,n,r,i){At.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new V,s=new V,l=new rt;let c=new V;const u=[],f=[],d=[],p=[];h(),this.setIndex(p),this.setAttribute("position",new Pt(u,3)),this.setAttribute("normal",new Pt(f,3)),this.setAttribute("uv",new Pt(d,2));function h(){for(let y=0;y<t;y++)g(y);g(i===!1?t:0),m(),v()}function g(y){c=e.getPointAt(y/t,c);const _=o.normals[y],b=o.binormals[y];for(let x=0;x<=r;x++){const w=x/r*Math.PI*2,S=Math.sin(w),A=-Math.cos(w);s.x=A*_.x+S*b.x,s.y=A*_.y+S*b.y,s.z=A*_.z+S*b.z,s.normalize(),f.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}function v(){for(let y=1;y<=t;y++)for(let _=1;_<=r;_++){const b=(r+1)*(y-1)+(_-1),x=(r+1)*y+(_-1),w=(r+1)*y+_,S=(r+1)*(y-1)+_;p.push(b,x,S),p.push(x,w,S)}}function m(){for(let y=0;y<=t;y++)for(let _=0;_<=r;_++)l.x=y/t,l.y=_/r,d.push(l.x,l.y)}}Iv.prototype=Object.create(At.prototype);Iv.prototype.constructor=Iv;Iv.prototype.toJSON=function(){const e=At.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e};function AA(e,t,n,r,i,o,a){Kt.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},a!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new L1(e,t,n,r,i,o)),this.mergeVertices()}AA.prototype=Object.create(Kt.prototype);AA.prototype.constructor=AA;function L1(e,t,n,r,i,o){At.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;const a=[],s=[],l=[],c=[],u=new V,f=new V,d=new V,p=new V,h=new V,g=new V,v=new V;for(let y=0;y<=n;++y){const _=y/n*i*Math.PI*2;m(_,i,o,e,d),m(_+.01,i,o,e,p),g.subVectors(p,d),v.addVectors(p,d),h.crossVectors(g,v),v.crossVectors(h,g),h.normalize(),v.normalize();for(let b=0;b<=r;++b){const x=b/r*Math.PI*2,w=-t*Math.cos(x),S=t*Math.sin(x);u.x=d.x+(w*v.x+S*h.x),u.y=d.y+(w*v.y+S*h.y),u.z=d.z+(w*v.z+S*h.z),s.push(u.x,u.y,u.z),f.subVectors(u,d).normalize(),l.push(f.x,f.y,f.z),c.push(y/n),c.push(b/r)}}for(let y=1;y<=n;y++)for(let _=1;_<=r;_++){const b=(r+1)*(y-1)+(_-1),x=(r+1)*y+(_-1),w=(r+1)*y+_,S=(r+1)*(y-1)+_;a.push(b,x,S),a.push(x,w,S)}this.setIndex(a),this.setAttribute("position",new Pt(s,3)),this.setAttribute("normal",new Pt(l,3)),this.setAttribute("uv",new Pt(c,2));function m(y,_,b,x,w){const S=Math.cos(y),A=Math.sin(y),C=b/_*y,k=Math.cos(C);w.x=x*(2+k)*.5*S,w.y=x*(2+k)*A*.5,w.z=x*Math.sin(C)*.5}}L1.prototype=Object.create(At.prototype);L1.prototype.constructor=L1;function PA(e,t,n,r,i){Kt.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Rv(e,t,n,r,i)),this.mergeVertices()}PA.prototype=Object.create(Kt.prototype);PA.prototype.constructor=PA;function Rv(e,t,n,r,i){At.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||Math.PI*2;const o=[],a=[],s=[],l=[],c=new V,u=new V,f=new V;for(let d=0;d<=n;d++)for(let p=0;p<=r;p++){const h=p/r*i,g=d/n*Math.PI*2;u.x=(e+t*Math.cos(g))*Math.cos(h),u.y=(e+t*Math.cos(g))*Math.sin(h),u.z=t*Math.sin(g),a.push(u.x,u.y,u.z),c.x=e*Math.cos(h),c.y=e*Math.sin(h),f.subVectors(u,c).normalize(),s.push(f.x,f.y,f.z),l.push(p/r),l.push(d/n)}for(let d=1;d<=n;d++)for(let p=1;p<=r;p++){const h=(r+1)*d+p-1,g=(r+1)*(d-1)+p-1,v=(r+1)*(d-1)+p,m=(r+1)*d+p;o.push(h,g,m),o.push(g,v,m)}this.setIndex(o),this.setAttribute("position",new Pt(a,3)),this.setAttribute("normal",new Pt(s,3)),this.setAttribute("uv",new Pt(l,2))}Rv.prototype=Object.create(At.prototype);Rv.prototype.constructor=Rv;const Xrt={triangulate:function(e,t,n){n=n||2;let r=t&&t.length,i=r?t[0]*n:e.length,o=kie(e,0,i,n,!0),a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,f,d,p;if(r&&(o=Qrt(e,t,o,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let h=n;h<i;h+=n)f=e[h],d=e[h+1],f<s&&(s=f),d<l&&(l=d),f>c&&(c=f),d>u&&(u=d);p=Math.max(c-s,u-l),p=p!==0?1/p:0}return $1(o,a,n,s,l,p),a}};function kie(e,t,n,r,i){let o,a;if(i===uit(e,t,n,r)>0)for(o=t;o<n;o+=r)a=w7(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=w7(o,e[o],e[o+1],a);return a&&rT(a,a.next)&&(B1(a),a=a.next),a}function vd(e,t){if(!e)return e;t||(t=e);let n=e,r;do if(r=!1,!n.steiner&&(rT(n,n.next)||zr(n.prev,n,n.next)===0)){if(B1(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function $1(e,t,n,r,i,o,a){if(!e)return;!a&&o&&iit(e,r,i,o);let s=e,l,c;for(;e.prev!==e.next;){if(l=e.prev,c=e.next,o?Krt(e,r,i,o):Yrt(e)){t.push(l.i/n),t.push(e.i/n),t.push(c.i/n),B1(e),e=c.next,s=c.next;continue}if(e=c,e===s){a?a===1?(e=Zrt(vd(e),t,n),$1(e,t,n,r,i,o,2)):a===2&&Jrt(e,t,n,r,i,o):$1(vd(e),t,n,r,i,o,1);break}}}function Yrt(e){let t=e.prev,n=e,r=e.next;if(zr(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(dg(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&zr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Krt(e,t,n,r){let i=e.prev,o=e,a=e.next;if(zr(i,o,a)>=0)return!1;let s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=FL(s,l,t,n,r),d=FL(c,u,t,n,r),p=e.prevZ,h=e.nextZ;for(;p&&p.z>=f&&h&&h.z<=d;){if(p!==e.prev&&p!==e.next&&dg(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&zr(p.prev,p,p.next)>=0||(p=p.prevZ,h!==e.prev&&h!==e.next&&dg(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&zr(h.prev,h,h.next)>=0))return!1;h=h.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&dg(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&zr(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=d;){if(h!==e.prev&&h!==e.next&&dg(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&zr(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function Zrt(e,t,n){let r=e;do{let i=r.prev,o=r.next.next;!rT(i,o)&&Lie(i,r,r.next,o)&&D1(i,o)&&D1(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),B1(r),B1(r.next),r=e=o),r=r.next}while(r!==e);return vd(r)}function Jrt(e,t,n,r,i,o){let a=e;do{let s=a.next.next;for(;s!==a.prev;){if(a.i!==s.i&&sit(a,s)){let l=$ie(a,s);a=vd(a,a.next),l=vd(l,l.next),$1(a,t,n,r,i,o),$1(l,t,n,r,i,o);return}s=s.next}a=a.next}while(a!==e)}function Qrt(e,t,n,r){let i=[],o,a,s,l,c;for(o=0,a=t.length;o<a;o++)s=t[o]*r,l=o<a-1?t[o+1]*r:e.length,c=kie(e,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(ait(c));for(i.sort(eit),o=0;o<i.length;o++)tit(i[o],n),n=vd(n,n.next);return n}function eit(e,t){return e.x-t.x}function tit(e,t){if(t=nit(e,t),t){const n=$ie(t,e);vd(t,t.next),vd(n,n.next)}}function nit(e,t){let n=t,r=e.x,i=e.y,o=-1/0,a;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){let d=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=r&&d>o){if(o=d,d===r){if(i===n.y)return n;if(i===n.next.y)return n.next}a=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!a)return null;if(r===o)return a;let s=a,l=a.x,c=a.y,u=1/0,f;n=a;do r>=n.x&&n.x>=l&&r!==n.x&&dg(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)&&(f=Math.abs(i-n.y)/(r-n.x),D1(n,e)&&(f<u||f===u&&(n.x>a.x||n.x===a.x&&rit(a,n)))&&(a=n,u=f)),n=n.next;while(n!==s);return a}function rit(e,t){return zr(e.prev,e,t.prev)<0&&zr(t.next,e,e.next)<0}function iit(e,t,n,r){let i=e;do i.z===null&&(i.z=FL(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,oit(i)}function oit(e){let t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,!!r);t++);for(l=c;s>0||l>0&&r;)s!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return e}function FL(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function ait(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function dg(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function sit(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!lit(e,t)&&(D1(e,t)&&D1(t,e)&&cit(e,t)&&(zr(e.prev,e,t.prev)||zr(e,t.prev,t))||rT(e,t)&&zr(e.prev,e,e.next)>0&&zr(t.prev,t,t.next)>0)}function zr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function rT(e,t){return e.x===t.x&&e.y===t.y}function Lie(e,t,n,r){const i=g2(zr(e,t,n)),o=g2(zr(e,t,r)),a=g2(zr(n,r,e)),s=g2(zr(n,r,t));return!!(i!==o&&a!==s||i===0&&m2(e,n,t)||o===0&&m2(e,r,t)||a===0&&m2(n,e,r)||s===0&&m2(n,t,r))}function m2(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function g2(e){return e>0?1:e<0?-1:0}function lit(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Lie(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function D1(e,t){return zr(e.prev,e,e.next)<0?zr(e,t,e.next)>=0&&zr(e,e.prev,t)>=0:zr(e,t,e.prev)<0||zr(e,e.next,t)<0}function cit(e,t){let n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function $ie(e,t){let n=new jL(e.i,e.x,e.y),r=new jL(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w7(e,t,n,r){const i=new jL(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function B1(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function jL(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function uit(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}const id={area:function(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return n*.5},isClockWise:function(e){return id.area(e)<0},triangulateShape:function(e,t){const n=[],r=[],i=[];S7(e),C7(n,e);let o=e.length;t.forEach(S7);for(let s=0;s<t.length;s++)r.push(o),o+=t[s].length,C7(n,t[s]);const a=Xrt.triangulate(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}};function S7(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function C7(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function kv(e,t){Kt.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new $u(e,t)),this.mergeVertices()}kv.prototype=Object.create(Kt.prototype);kv.prototype.constructor=kv;kv.prototype.toJSON=function(){const e=Kt.prototype.toJSON.call(this),t=this.parameters.shapes,n=this.parameters.options;return Die(t,n,e)};function $u(e,t){At.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let a=0,s=e.length;a<s;a++){const l=e[a];o(l)}this.setAttribute("position",new Pt(r,3)),this.setAttribute("uv",new Pt(i,2)),this.computeVertexNormals();function o(a){const s=[],l=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1;let u=t.depth!==void 0?t.depth:100,f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:6,p=t.bevelSize!==void 0?t.bevelSize:d-2,h=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,m=t.UVGenerator!==void 0?t.UVGenerator:fit;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);let y,_=!1,b,x,w,S;v&&(y=v.getSpacedPoints(c),_=!0,f=!1,b=v.computeFrenetFrames(c,!1),x=new V,w=new V,S=new V),f||(g=0,d=0,p=0,h=0);const A=a.extractPoints(l);let C=A.shape;const k=A.holes;if(!id.isClockWise(C)){C=C.reverse();for(let te=0,le=k.length;te<le;te++){const de=k[te];id.isClockWise(de)&&(k[te]=de.reverse())}}const T=id.triangulateShape(C,k),B=C;for(let te=0,le=k.length;te<le;te++){const de=k[te];C=C.concat(de)}function R(te,le,de){return le||console.error("THREE.ExtrudeGeometry: vec does not exist"),le.clone().multiplyScalar(de).add(te)}const P=C.length,D=T.length;function z(te,le,de){let _e,be,ke;const W=te.x-le.x,ee=te.y-le.y,Ee=de.x-te.x,ge=de.y-te.y,pe=W*W+ee*ee,ve=W*ge-ee*Ee;if(Math.abs(ve)>Number.EPSILON){const $e=Math.sqrt(pe),Ne=Math.sqrt(Ee*Ee+ge*ge),Ae=le.x-ee/$e,Oe=le.y+W/$e,j=de.x-ge/Ne,M=de.y+Ee/Ne,L=((j-Ae)*ge-(M-Oe)*Ee)/(W*ge-ee*Ee);_e=Ae+W*L-te.x,be=Oe+ee*L-te.y;const q=_e*_e+be*be;if(q<=2)return new rt(_e,be);ke=Math.sqrt(q/2)}else{let $e=!1;W>Number.EPSILON?Ee>Number.EPSILON&&($e=!0):W<-Number.EPSILON?Ee<-Number.EPSILON&&($e=!0):Math.sign(ee)===Math.sign(ge)&&($e=!0),$e?(_e=-ee,be=W,ke=Math.sqrt(pe)):(_e=W,be=ee,ke=Math.sqrt(pe/2))}return new rt(_e/ke,be/ke)}const N=[];for(let te=0,le=B.length,de=le-1,_e=te+1;te<le;te++,de++,_e++)de===le&&(de=0),_e===le&&(_e=0),N[te]=z(B[te],B[de],B[_e]);const H=[];let J,ne=N.concat();for(let te=0,le=k.length;te<le;te++){const de=k[te];J=[];for(let _e=0,be=de.length,ke=be-1,W=_e+1;_e<be;_e++,ke++,W++)ke===be&&(ke=0),W===be&&(W=0),J[_e]=z(de[_e],de[ke],de[W]);H.push(J),ne=ne.concat(J)}for(let te=0;te<g;te++){const le=te/g,de=d*Math.cos(le*Math.PI/2),_e=p*Math.sin(le*Math.PI/2)+h;for(let be=0,ke=B.length;be<ke;be++){const W=R(B[be],N[be],_e);Y(W.x,W.y,-de)}for(let be=0,ke=k.length;be<ke;be++){const W=k[be];J=H[be];for(let ee=0,Ee=W.length;ee<Ee;ee++){const ge=R(W[ee],J[ee],_e);Y(ge.x,ge.y,-de)}}}const oe=p+h;for(let te=0;te<P;te++){const le=f?R(C[te],ne[te],oe):C[te];_?(w.copy(b.normals[0]).multiplyScalar(le.x),x.copy(b.binormals[0]).multiplyScalar(le.y),S.copy(y[0]).add(w).add(x),Y(S.x,S.y,S.z)):Y(le.x,le.y,0)}for(let te=1;te<=c;te++)for(let le=0;le<P;le++){const de=f?R(C[le],ne[le],oe):C[le];_?(w.copy(b.normals[te]).multiplyScalar(de.x),x.copy(b.binormals[te]).multiplyScalar(de.y),S.copy(y[te]).add(w).add(x),Y(S.x,S.y,S.z)):Y(de.x,de.y,u/c*te)}for(let te=g-1;te>=0;te--){const le=te/g,de=d*Math.cos(le*Math.PI/2),_e=p*Math.sin(le*Math.PI/2)+h;for(let be=0,ke=B.length;be<ke;be++){const W=R(B[be],N[be],_e);Y(W.x,W.y,u+de)}for(let be=0,ke=k.length;be<ke;be++){const W=k[be];J=H[be];for(let ee=0,Ee=W.length;ee<Ee;ee++){const ge=R(W[ee],J[ee],_e);_?Y(ge.x,ge.y+y[c-1].y,y[c-1].x+de):Y(ge.x,ge.y,u+de)}}}Z(),ce();function Z(){const te=r.length/3;if(f){let le=0,de=P*le;for(let _e=0;_e<D;_e++){const be=T[_e];he(be[2]+de,be[1]+de,be[0]+de)}le=c+g*2,de=P*le;for(let _e=0;_e<D;_e++){const be=T[_e];he(be[0]+de,be[1]+de,be[2]+de)}}else{for(let le=0;le<D;le++){const de=T[le];he(de[2],de[1],de[0])}for(let le=0;le<D;le++){const de=T[le];he(de[0]+P*c,de[1]+P*c,de[2]+P*c)}}n.addGroup(te,r.length/3-te,0)}function ce(){const te=r.length/3;let le=0;se(B,le),le+=B.length;for(let de=0,_e=k.length;de<_e;de++){const be=k[de];se(be,le),le+=be.length}n.addGroup(te,r.length/3-te,1)}function se(te,le){let de=te.length;for(;--de>=0;){const _e=de;let be=de-1;be<0&&(be=te.length-1);for(let ke=0,W=c+g*2;ke<W;ke++){const ee=P*ke,Ee=P*(ke+1),ge=le+_e+ee,pe=le+be+ee,ve=le+be+Ee,$e=le+_e+Ee;ae(ge,pe,ve,$e)}}}function Y(te,le,de){s.push(te),s.push(le),s.push(de)}function he(te,le,de){ye(te),ye(le),ye(de);const _e=r.length/3,be=m.generateTopUV(n,r,_e-3,_e-2,_e-1);re(be[0]),re(be[1]),re(be[2])}function ae(te,le,de,_e){ye(te),ye(le),ye(_e),ye(le),ye(de),ye(_e);const be=r.length/3,ke=m.generateSideWallUV(n,r,be-6,be-3,be-2,be-1);re(ke[0]),re(ke[1]),re(ke[3]),re(ke[1]),re(ke[2]),re(ke[3])}function ye(te){r.push(s[te*3+0]),r.push(s[te*3+1]),r.push(s[te*3+2])}function re(te){i.push(te.x),i.push(te.y)}}}$u.prototype=Object.create(At.prototype);$u.prototype.constructor=$u;$u.prototype.toJSON=function(){const e=At.prototype.toJSON.call(this),t=this.parameters.shapes,n=this.parameters.options;return Die(t,n,e)};const fit={generateTopUV:function(e,t,n,r,i){const o=t[n*3],a=t[n*3+1],s=t[r*3],l=t[r*3+1],c=t[i*3],u=t[i*3+1];return[new rt(o,a),new rt(s,l),new rt(c,u)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[n*3],s=t[n*3+1],l=t[n*3+2],c=t[r*3],u=t[r*3+1],f=t[r*3+2],d=t[i*3],p=t[i*3+1],h=t[i*3+2],g=t[o*3],v=t[o*3+1],m=t[o*3+2];return Math.abs(s-u)<.01?[new rt(a,1-l),new rt(c,1-f),new rt(d,1-h),new rt(g,1-m)]:[new rt(s,1-l),new rt(u,1-f),new rt(p,1-h),new rt(v,1-m)]}};function Die(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function MA(e,t){Kt.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new N1(e,t)),this.mergeVertices()}MA.prototype=Object.create(Kt.prototype);MA.prototype.constructor=MA;function N1(e,t){t=t||{};const n=t.font;if(!(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Kt;const r=n.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),$u.call(this,r,t),this.type="TextBufferGeometry"}N1.prototype=Object.create($u.prototype);N1.prototype.constructor=N1;function EA(e,t,n,r,i,o,a){Kt.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Lv(e,t,n,r,i,o,a)),this.mergeVertices()}EA.prototype=Object.create(Kt.prototype);EA.prototype.constructor=EA;function Lv(e,t,n,r,i,o,a){At.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=r!==void 0?r:0,i=i!==void 0?i:Math.PI*2,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI;const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new V,f=new V,d=[],p=[],h=[],g=[];for(let v=0;v<=n;v++){const m=[],y=v/n;let _=0;v==0&&o==0?_=.5/t:v==n&&s==Math.PI&&(_=-.5/t);for(let b=0;b<=t;b++){const x=b/t;u.x=-e*Math.cos(r+x*i)*Math.sin(o+y*a),u.y=e*Math.cos(o+y*a),u.z=e*Math.sin(r+x*i)*Math.sin(o+y*a),p.push(u.x,u.y,u.z),f.copy(u).normalize(),h.push(f.x,f.y,f.z),g.push(x+_,1-y),m.push(l++)}c.push(m)}for(let v=0;v<n;v++)for(let m=0;m<t;m++){const y=c[v][m+1],_=c[v][m],b=c[v+1][m],x=c[v+1][m+1];(v!==0||o>0)&&d.push(y,_,x),(v!==n-1||s<Math.PI)&&d.push(_,b,x)}this.setIndex(d),this.setAttribute("position",new Pt(p,3)),this.setAttribute("normal",new Pt(h,3)),this.setAttribute("uv",new Pt(g,2))}Lv.prototype=Object.create(At.prototype);Lv.prototype.constructor=Lv;function TA(e,t,n,r,i,o){Kt.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new F1(e,t,n,r,i,o)),this.mergeVertices()}TA.prototype=Object.create(Kt.prototype);TA.prototype.constructor=TA;function F1(e,t,n,r,i,o){At.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=i!==void 0?i:0,o=o!==void 0?o:Math.PI*2,n=n!==void 0?Math.max(3,n):8,r=r!==void 0?Math.max(1,r):1;const a=[],s=[],l=[],c=[];let u=e;const f=(t-e)/r,d=new V,p=new rt;for(let h=0;h<=r;h++){for(let g=0;g<=n;g++){const v=i+g/n*o;d.x=u*Math.cos(v),d.y=u*Math.sin(v),s.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,c.push(p.x,p.y)}u+=f}for(let h=0;h<r;h++){const g=h*(n+1);for(let v=0;v<n;v++){const m=v+g,y=m,_=m+n+1,b=m+n+2,x=m+1;a.push(y,_,x),a.push(_,b,x)}}this.setIndex(a),this.setAttribute("position",new Pt(s,3)),this.setAttribute("normal",new Pt(l,3)),this.setAttribute("uv",new Pt(c,2))}F1.prototype=Object.create(At.prototype);F1.prototype.constructor=F1;function OA(e,t,n,r){Kt.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new j1(e,t,n,r)),this.mergeVertices()}OA.prototype=Object.create(Kt.prototype);OA.prototype.constructor=OA;function j1(e,t,n,r){At.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||Math.PI*2,r=un.clamp(r,0,Math.PI*2);const i=[],o=[],a=[],s=1/t,l=new V,c=new rt;for(let u=0;u<=t;u++){const f=n+u*s*r,d=Math.sin(f),p=Math.cos(f);for(let h=0;h<=e.length-1;h++)l.x=e[h].x*d,l.y=e[h].y,l.z=e[h].x*p,o.push(l.x,l.y,l.z),c.x=u/t,c.y=h/(e.length-1),a.push(c.x,c.y)}for(let u=0;u<t;u++)for(let f=0;f<e.length-1;f++){const d=f+u*e.length,p=d,h=d+e.length,g=d+e.length+1,v=d+1;i.push(p,h,v),i.push(h,g,v)}if(this.setIndex(i),this.setAttribute("position",new Pt(o,3)),this.setAttribute("uv",new Pt(a,2)),this.computeVertexNormals(),r===Math.PI*2){const u=this.attributes.normal.array,f=new V,d=new V,p=new V,h=t*e.length*3;for(let g=0,v=0;g<e.length;g++,v+=3)f.x=u[v+0],f.y=u[v+1],f.z=u[v+2],d.x=u[h+v+0],d.y=u[h+v+1],d.z=u[h+v+2],p.addVectors(f,d).normalize(),u[v+0]=u[h+v+0]=p.x,u[v+1]=u[h+v+1]=p.y,u[v+2]=u[h+v+2]=p.z}}j1.prototype=Object.create(At.prototype);j1.prototype.constructor=j1;function $v(e,t){Kt.call(this),this.type="ShapeGeometry",typeof t=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Dv(e,t)),this.mergeVertices()}$v.prototype=Object.create(Kt.prototype);$v.prototype.constructor=$v;$v.prototype.toJSON=function(){const e=Kt.prototype.toJSON.call(this),t=this.parameters.shapes;return Bie(t,e)};function Dv(e,t){At.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;const n=[],r=[],i=[],o=[];let a=0,s=0;if(Array.isArray(e)===!1)l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(a,s,c),a+=s,s=0;this.setIndex(n),this.setAttribute("position",new Pt(r,3)),this.setAttribute("normal",new Pt(i,3)),this.setAttribute("uv",new Pt(o,2));function l(c){const u=r.length/3,f=c.extractPoints(t);let d=f.shape;const p=f.holes;id.isClockWise(d)===!1&&(d=d.reverse());for(let g=0,v=p.length;g<v;g++){const m=p[g];id.isClockWise(m)===!0&&(p[g]=m.reverse())}const h=id.triangulateShape(d,p);for(let g=0,v=p.length;g<v;g++){const m=p[g];d=d.concat(m)}for(let g=0,v=d.length;g<v;g++){const m=d[g];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(let g=0,v=h.length;g<v;g++){const m=h[g],y=m[0]+u,_=m[1]+u,b=m[2]+u;n.push(y,_,b),s+=3}}}Dv.prototype=Object.create(At.prototype);Dv.prototype.constructor=Dv;Dv.prototype.toJSON=function(){const e=At.prototype.toJSON.call(this),t=this.parameters.shapes;return Bie(t,e)};function Bie(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function IA(e,t){At.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=t!==void 0?t:1;const n=[],r=Math.cos(un.DEG2RAD*t),i=[0,0],o={};let a,s,l;const c=["a","b","c"];let u;e.isBufferGeometry?(u=new Kt,u.fromBufferGeometry(e)):u=e.clone(),u.mergeVertices(),u.computeFaceNormals();const f=u.vertices,d=u.faces;for(let p=0,h=d.length;p<h;p++){const g=d[p];for(let v=0;v<3;v++)a=g[c[v]],s=g[c[(v+1)%3]],i[0]=Math.min(a,s),i[1]=Math.max(a,s),l=i[0]+","+i[1],o[l]===void 0?o[l]={index1:i[0],index2:i[1],face1:p,face2:void 0}:o[l].face2=p}for(l in o){const p=o[l];if(p.face2===void 0||d[p.face1].normal.dot(d[p.face2].normal)<=r){let h=f[p.index1];n.push(h.x,h.y,h.z),h=f[p.index2],n.push(h.x,h.y,h.z)}}this.setAttribute("position",new Pt(n,3))}IA.prototype=Object.create(At.prototype);IA.prototype.constructor=IA;function Bv(e,t,n,r,i,o,a,s){Kt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Du(e,t,n,r,i,o,a,s)),this.mergeVertices()}Bv.prototype=Object.create(Kt.prototype);Bv.prototype.constructor=Bv;function Du(e,t,n,r,i,o,a,s){At.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const l=this;e=e!==void 0?e:1,t=t!==void 0?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=o!==void 0?o:!1,a=a!==void 0?a:0,s=s!==void 0?s:Math.PI*2;const c=[],u=[],f=[],d=[];let p=0;const h=[],g=n/2;let v=0;m(),o===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Pt(u,3)),this.setAttribute("normal",new Pt(f,3)),this.setAttribute("uv",new Pt(d,2));function m(){const _=new V,b=new V;let x=0;const w=(t-e)/n;for(let S=0;S<=i;S++){const A=[],C=S/i,k=C*(t-e)+e;for(let O=0;O<=r;O++){const T=O/r,B=T*s+a,R=Math.sin(B),P=Math.cos(B);b.x=k*R,b.y=-C*n+g,b.z=k*P,u.push(b.x,b.y,b.z),_.set(R,w,P).normalize(),f.push(_.x,_.y,_.z),d.push(T,1-C),A.push(p++)}h.push(A)}for(let S=0;S<r;S++)for(let A=0;A<i;A++){const C=h[A][S],k=h[A+1][S],O=h[A+1][S+1],T=h[A][S+1];c.push(C,k,T),c.push(k,O,T),x+=6}l.addGroup(v,x,0),v+=x}function y(_){let b,x;const w=new rt,S=new V;let A=0;const C=_===!0?e:t,k=_===!0?1:-1;b=p;for(let O=1;O<=r;O++)u.push(0,g*k,0),f.push(0,k,0),d.push(.5,.5),p++;x=p;for(let O=0;O<=r;O++){const B=O/r*s+a,R=Math.cos(B),P=Math.sin(B);S.x=C*P,S.y=g*k,S.z=C*R,u.push(S.x,S.y,S.z),f.push(0,k,0),w.x=R*.5+.5,w.y=P*.5*k+.5,d.push(w.x,w.y),p++}for(let O=0;O<r;O++){const T=b+O,B=x+O;_===!0?c.push(B,B+1,T):c.push(B+1,B,T),A+=3}l.addGroup(v,A,_===!0?1:2),v+=A}}Du.prototype=Object.create(At.prototype);Du.prototype.constructor=Du;function RA(e,t,n,r,i,o,a){Bv.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}RA.prototype=Object.create(Bv.prototype);RA.prototype.constructor=RA;function z1(e,t,n,r,i,o,a){Du.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}z1.prototype=Object.create(Du.prototype);z1.prototype.constructor=z1;function kA(e,t,n,r){Kt.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new U1(e,t,n,r)),this.mergeVertices()}kA.prototype=Object.create(Kt.prototype);kA.prototype.constructor=kA;function U1(e,t,n,r){At.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=t!==void 0?Math.max(3,t):8,n=n!==void 0?n:0,r=r!==void 0?r:Math.PI*2;const i=[],o=[],a=[],s=[],l=new V,c=new rt;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let u=0,f=3;u<=t;u++,f+=3){const d=n+u/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[f]/e+1)/2,c.y=(o[f+1]/e+1)/2,s.push(c.x,c.y)}for(let u=1;u<=t;u++)i.push(u,u+1,0);this.setIndex(i),this.setAttribute("position",new Pt(o,3)),this.setAttribute("normal",new Pt(a,3)),this.setAttribute("uv",new Pt(s,2))}U1.prototype=Object.create(At.prototype);U1.prototype.constructor=U1;var Fo=Object.freeze({__proto__:null,WireframeGeometry:vA,ParametricGeometry:yA,ParametricBufferGeometry:R1,TetrahedronGeometry:_A,TetrahedronBufferGeometry:Ov,OctahedronGeometry:xA,OctahedronBufferGeometry:ph,IcosahedronGeometry:wA,IcosahedronBufferGeometry:hh,DodecahedronGeometry:SA,DodecahedronBufferGeometry:k1,PolyhedronGeometry:bA,PolyhedronBufferGeometry:ts,TubeGeometry:CA,TubeBufferGeometry:Iv,TorusKnotGeometry:AA,TorusKnotBufferGeometry:L1,TorusGeometry:PA,TorusBufferGeometry:Rv,TextGeometry:MA,TextBufferGeometry:N1,SphereGeometry:EA,SphereBufferGeometry:Lv,RingGeometry:TA,RingBufferGeometry:F1,PlaneGeometry:P1,PlaneBufferGeometry:Tv,LatheGeometry:OA,LatheBufferGeometry:j1,ShapeGeometry:$v,ShapeBufferGeometry:Dv,ExtrudeGeometry:kv,ExtrudeBufferGeometry:$u,EdgesGeometry:IA,ConeGeometry:RA,ConeBufferGeometry:z1,CylinderGeometry:Bv,CylinderBufferGeometry:Du,CircleGeometry:kA,CircleBufferGeometry:U1,BoxGeometry:XQe,BoxBufferGeometry:$x});function Nv(e){tn.call(this),this.type="ShadowMaterial",this.color=new ht(0),this.transparent=!0,this.setValues(e)}Nv.prototype=Object.create(tn.prototype);Nv.prototype.constructor=Nv;Nv.prototype.isShadowMaterial=!0;Nv.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.color.copy(e.color),this};function yd(e){Ei.call(this,e),this.type="RawShaderMaterial"}yd.prototype=Object.create(Ei.prototype);yd.prototype.constructor=yd;yd.prototype.isRawShaderMaterial=!0;function Bu(e){tn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=A0,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}Bu.prototype=Object.create(tn.prototype);Bu.prototype.constructor=Bu;Bu.prototype.isMeshStandardMaterial=!0;Bu.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this};function Fv(e){Bu.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new rt(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(e)}Fv.prototype=Object.create(Bu.prototype);Fv.prototype.constructor=Fv;Fv.prototype.isMeshPhysicalMaterial=!0;Fv.prototype.copy=function(e){return Bu.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new ht).copy(e.sheen):this.sheen=null,this.transparency=e.transparency,this};function mh(e){tn.call(this),this.type="MeshPhongMaterial",this.color=new ht(16777215),this.specular=new ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=A0,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}mh.prototype=Object.create(tn.prototype);mh.prototype.constructor=mh;mh.prototype.isMeshPhongMaterial=!0;mh.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function jv(e){tn.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=A0,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}jv.prototype=Object.create(tn.prototype);jv.prototype.constructor=jv;jv.prototype.isMeshToonMaterial=!0;jv.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function zv(e){tn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=A0,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}zv.prototype=Object.create(tn.prototype);zv.prototype.constructor=zv;zv.prototype.isMeshNormalMaterial=!0;zv.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Uv(e){tn.call(this),this.type="MeshLambertMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Uv.prototype=Object.create(tn.prototype);Uv.prototype.constructor=Uv;Uv.prototype.isMeshLambertMaterial=!0;Uv.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Vv(e){tn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=A0,this.normalScale=new rt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Vv.prototype=Object.create(tn.prototype);Vv.prototype.constructor=Vv;Vv.prototype.isMeshMatcapMaterial=!0;Vv.prototype.copy=function(e){return tn.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Hv(e){oi.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Hv.prototype=Object.create(oi.prototype);Hv.prototype.constructor=Hv;Hv.prototype.isLineDashedMaterial=!0;Hv.prototype.copy=function(e){return oi.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var dit=Object.freeze({__proto__:null,ShadowMaterial:Nv,SpriteMaterial:fh,RawShaderMaterial:yd,ShaderMaterial:Ei,PointsMaterial:dh,MeshPhysicalMaterial:Fv,MeshStandardMaterial:Bu,MeshPhongMaterial:mh,MeshToonMaterial:jv,MeshNormalMaterial:zv,MeshLambertMaterial:Uv,MeshDepthMaterial:lh,MeshDistanceMaterial:ch,MeshBasicMaterial:kl,MeshMatcapMaterial:Vv,LineDashedMaterial:Hv,LineBasicMaterial:oi,Material:tn});const Dr={arraySlice:function(e,t,n){return Dr.isTypedArray(e)?new e.constructor(e.subarray(t,n!==void 0?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(i,o){return e[i]-e[o]}const n=e.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const s=n[o]*t;for(let l=0;l!==t;++l)i[a++]=e[s+l]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;o!==void 0&&o[r]===void 0;)o=e[i++];if(o===void 0)return;let a=o[r];if(a!==void 0)if(Array.isArray(a))do a=o[r],a!==void 0&&(t.push(o.time),n.push.apply(n,a)),o=e[i++];while(o!==void 0);else if(a.toArray!==void 0)do a=o[r],a!==void 0&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++];while(o!==void 0);else do a=o[r],a!==void 0&&(t.push(o.time),n.push(a)),o=e[i++];while(o!==void 0)},subclip:function(e,t,n,r,i){i=i||30;const o=e.clone();o.name=t;const a=[];for(let l=0;l<o.tracks.length;++l){const c=o.tracks[l],u=c.getValueSize(),f=[],d=[];for(let p=0;p<c.times.length;++p){const h=c.times[p]*i;if(!(h<n||h>=r)){f.push(c.times[p]);for(let g=0;g<u;++g)d.push(c.values[p*u+g])}}f.length!==0&&(c.times=Dr.convertArray(f,c.times.constructor),c.values=Dr.convertArray(d,c.values.constructor),a.push(c))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=e),(r===void 0||r<=0)&&(r=30);const i=e.tracks.length,o=t/r;for(let a=0;a<i;++a){const s=n.tracks[a],l=s.ValueTypeName;if(l==="bool"||l==="string")continue;const c=e.tracks.find(function(h){return h.name===s.name&&h.ValueTypeName===l});if(c===void 0)continue;const u=s.getValueSize(),f=s.times.length-1;let d;if(o<=s.times[0])d=Dr.arraySlice(s.values,0,s.valueSize);else if(o>=s.times[f]){const h=f*u;d=Dr.arraySlice(s.values,h)}else{const h=s.createInterpolant();h.evaluate(o),d=h.resultBuffer}l==="quaternion"&&new lr(d[0],d[1],d[2],d[3]).normalize().conjugate().toArray(d);const p=c.times.length;for(let h=0;h<p;++h){const g=h*u;if(l==="quaternion")lr.multiplyQuaternionsFlat(c.values,g,d,0,c.values,g);else for(let v=0;v<u;++v)c.values[g+v]-=d[v]}}return e.blendMode=hie,e}};function Ns(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}Object.assign(Ns.prototype,{evaluate:function(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=i)){const a=t[1];e<a&&(n=2,i=a);for(let s=n-2;;){if(i===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],i=t[n-1],i===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Ns.prototype,{beforeStart_:Ns.prototype.copySampleValue_,afterEnd_:Ns.prototype.copySampleValue_});function zL(e,t,n,r){Ns.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}zL.prototype=Object.assign(Object.create(Ns.prototype),{constructor:zL,DefaultSettings_:{endingStart:Pv,endingEnd:Pv},intervalChanged_:function(e,t,n){let r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case lg:i=e,a=2*t-n;break;case fA:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(s===void 0)switch(this.getSettings_().endingEnd){case lg:o=e,s=2*n-t;break;case fA:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=(n-t)*.5,c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,f=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),h=p*p,g=h*p,v=-f*g+2*f*h-f*p,m=(1+f)*g+(-1.5-2*f)*h+(-.5+f)*p+1,y=(-1-d)*g+(1.5+d)*h+.5*p,_=d*g-d*h;for(let b=0;b!==a;++b)i[b]=v*o[c+b]+m*o[l+b]+y*o[s+b]+_*o[u+b];return i}});function LA(e,t,n,r){Ns.call(this,e,t,n,r)}LA.prototype=Object.assign(Object.create(Ns.prototype),{constructor:LA,interpolate_:function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let f=0;f!==a;++f)i[f]=o[l+f]*u+o[s+f]*c;return i}});function UL(e,t,n,r){Ns.call(this,e,t,n,r)}UL.prototype=Object.assign(Object.create(Ns.prototype),{constructor:UL,interpolate_:function(e){return this.copySampleValue_(e-1)}});function ko(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Dr.convertArray(t,this.TimeBufferType),this.values=Dr.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}Object.assign(ko,{toJSON:function(e){const t=e.constructor;let n;if(t.toJSON!==void 0)n=t.toJSON(e);else{n={name:e.name,times:Dr.convertArray(e.times,Array),values:Dr.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}});Object.assign(ko.prototype,{constructor:ko,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:RS,InterpolantFactoryMethodDiscrete:function(e){return new UL(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new LA(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new zL(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case uA:t=this.InterpolantFactoryMethodDiscrete;break;case RS:t=this.InterpolantFactoryMethodLinear;break;case CI:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return uA;case this.InterpolantFactoryMethodLinear:return RS;case this.InterpolantFactoryMethodSmooth:return CI}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this},scale:function(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;o!==-1&&n[o]>t;)--o;if(++o,i!==0||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const a=this.getValueSize();this.times=Dr.arraySlice(n,i,o),this.values=Dr.arraySlice(this.values,i*a,o*a)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;i===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==i;a++){const s=n[a];if(typeof s=="number"&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(o!==null&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(r!==void 0&&Dr.isTypedArray(r))for(let a=0,s=r.length;a!==s;++a){const l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}return e},optimize:function(){const e=Dr.arraySlice(this.times),t=Dr.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===CI,i=e.length-1;let o=1;for(let a=1;a<i;++a){let s=!1;const l=e[a],c=e[a+1];if(l!==c&&(a!==1||l!==l[0]))if(r)s=!0;else{const u=a*n,f=u-n,d=u+n;for(let p=0;p!==n;++p){const h=t[u+p];if(h!==t[f+p]||h!==t[d+p]){s=!0;break}}}if(s){if(a!==o){e[o]=e[a];const u=a*n,f=o*n;for(let d=0;d!==n;++d)t[f+d]=t[u+d]}++o}}if(i>0){e[o]=e[i];for(let a=i*n,s=o*n,l=0;l!==n;++l)t[s+l]=t[a+l];++o}return o!==e.length?(this.times=Dr.arraySlice(e,0,o),this.values=Dr.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this},clone:function(){const e=Dr.arraySlice(this.times,0),t=Dr.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}});function VL(e,t,n){ko.call(this,e,t,n)}VL.prototype=Object.assign(Object.create(ko.prototype),{constructor:VL,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:uA,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function HL(e,t,n,r){ko.call(this,e,t,n,r)}HL.prototype=Object.assign(Object.create(ko.prototype),{constructor:HL,ValueTypeName:"color"});function V1(e,t,n,r){ko.call(this,e,t,n,r)}V1.prototype=Object.assign(Object.create(ko.prototype),{constructor:V1,ValueTypeName:"number"});function GL(e,t,n,r){Ns.call(this,e,t,n,r)}GL.prototype=Object.assign(Object.create(Ns.prototype),{constructor:GL,interpolate_:function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let c=l+a;l!==c;l+=4)lr.slerpFlat(i,0,o,l-a,o,l,s);return i}});function $A(e,t,n,r){ko.call(this,e,t,n,r)}$A.prototype=Object.assign(Object.create(ko.prototype),{constructor:$A,ValueTypeName:"quaternion",DefaultInterpolation:RS,InterpolantFactoryMethodLinear:function(e){return new GL(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function WL(e,t,n,r){ko.call(this,e,t,n,r)}WL.prototype=Object.assign(Object.create(ko.prototype),{constructor:WL,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:uA,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function H1(e,t,n,r){ko.call(this,e,t,n,r)}H1.prototype=Object.assign(Object.create(ko.prototype),{constructor:H1,ValueTypeName:"vector"});function ml(e,t,n,r){this.name=e,this.tracks=n,this.duration=t!==void 0?t:-1,this.blendMode=r!==void 0?r:bN,this.uuid=un.generateUUID(),this.duration<0&&this.resetDuration()}function pit(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return V1;case"vector":case"vector2":case"vector3":case"vector4":return H1;case"color":return HL;case"quaternion":return $A;case"bool":case"boolean":return VL;case"string":return WL}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function hit(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=pit(e.type);if(e.times===void 0){const n=[],r=[];Dr.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(ml,{parse:function(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let i=0,o=n.length;i!==o;++i)t.push(hit(n[i]).scale(r));return new ml(e.name,e.duration,t,e.blendMode)},toJSON:function(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=n.length;i!==o;++i)t.push(ko.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){const i=t.length,o=[];for(let a=0;a<i;a++){let s=[],l=[];s.push((a+i-1)%i,a,(a+1)%i),l.push(0,1,0);const c=Dr.getKeyframeOrder(s);s=Dr.sortedArray(s,1,c),l=Dr.sortedArray(l,1,c),!r&&s[0]===0&&(s.push(i),l.push(l[0])),o.push(new V1(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/n))}return new ml(e,-1,o)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){const l=e[a],c=l.name.match(i);if(c&&c.length>1){const u=c[1];let f=r[u];f||(r[u]=f=[]),f.push(l)}}const o=[];for(const a in r)o.push(ml.CreateFromMorphTargetSequence(a,r[a],t,n));return o},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,f,d,p,h){if(d.length!==0){const g=[],v=[];Dr.flattenJSON(d,g,v,p),g.length!==0&&h.push(new u(f,g,v))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let u=0;u<l.length;u++){const f=l[u].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let h=0;h<f[p].morphTargets.length;h++)d[f[p].morphTargets[h]]=-1;for(const h in d){const g=[],v=[];for(let m=0;m!==f[p].morphTargets.length;++m){const y=f[p];g.push(y.time),v.push(y.morphTarget===h?1:0)}r.push(new V1(".morphTargetInfluence["+h+"]",g,v))}s=d.length*(o||1)}else{const d=".bones["+t[u].name+"]";n(H1,d+".position",f,"pos",r),n($A,d+".quaternion",f,"rot",r),n(H1,d+".scale",f,"scl",r)}}return r.length===0?null:new ml(i,s,r,a)}});Object.assign(ml.prototype,{resetDuration:function(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new ml(this.name,this.duration,e,this.blendMode)}});const Gv={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Nie(e,t,n){const r=this;let i=!1,o=0,a=0,s;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){a++,i===!1&&r.onStart!==void 0&&r.onStart(c,o,a),i=!0},this.itemEnd=function(c){o++,r.onProgress!==void 0&&r.onProgress(c,o,a),o===a&&(i=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return s?s(c):c},this.setURLModifier=function(c){return s=c,this},this.addHandler=function(c,u){return l.push(c,u),this},this.removeHandler=function(c){const u=l.indexOf(c);return u!==-1&&l.splice(u,2),this},this.getHandler=function(c){for(let u=0,f=l.length;u<f;u+=2){const d=l[u],p=l[u+1];if(d.global&&(d.lastIndex=0),d.test(c))return p}return null}}const mit=new Nie;function or(e){this.manager=e!==void 0?e:mit,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(or.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise(function(r,i){n.load(e,r,t,i)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const rl={};function Tc(e){or.call(this,e)}Tc.prototype=Object.assign(Object.create(or.prototype),{constructor:Tc,load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Gv.get(e);if(o!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(rl[e]!==void 0){rl[e].push({onLoad:t,onProgress:n,onError:r});return}const a=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(a);let l;if(s){const c=s[1],u=!!s[2];let f=s[3];f=decodeURIComponent(f),u&&(f=atob(f));try{let d;const p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":const h=new Uint8Array(f.length);for(let v=0;v<f.length;v++)h[v]=f.charCodeAt(v);p==="blob"?d=new Blob([h.buffer],{type:c}):d=h.buffer;break;case"document":d=new DOMParser().parseFromString(f,c);break;case"json":d=JSON.parse(f);break;default:d=f;break}setTimeout(function(){t&&t(d),i.manager.itemEnd(e)},0)}catch(d){setTimeout(function(){r&&r(d),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{rl[e]=[],rl[e].push({onLoad:t,onProgress:n,onError:r}),l=new XMLHttpRequest,l.open("GET",e,!0),l.addEventListener("load",function(c){const u=this.response,f=rl[e];if(delete rl[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Gv.add(e,u);for(let d=0,p=f.length;d<p;d++){const h=f[d];h.onLoad&&h.onLoad(u)}i.manager.itemEnd(e)}else{for(let d=0,p=f.length;d<p;d++){const h=f[d];h.onError&&h.onError(c)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),l.addEventListener("progress",function(c){const u=rl[e];for(let f=0,d=u.length;f<d;f++){const p=u[f];p.onProgress&&p.onProgress(c)}},!1),l.addEventListener("error",function(c){const u=rl[e];delete rl[e];for(let f=0,d=u.length;f<d;f++){const p=u[f];p.onError&&p.onError(c)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),l.addEventListener("abort",function(c){const u=rl[e];delete rl[e];for(let f=0,d=u.length;f<d;f++){const p=u[f];p.onError&&p.onError(c)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const c in this.requestHeader)l.setRequestHeader(c,this.requestHeader[c]);l.send(null)}return i.manager.itemStart(e),l},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}});function A7(e){or.call(this,e)}A7.prototype=Object.assign(Object.create(or.prototype),{constructor:A7,load:function(e,t,n,r){const i=this,o=new Tc(i.manager);o.setPath(i.path),o.load(e,function(a){try{t(i.parse(JSON.parse(a)))}catch(s){r?r(s):console.error(s),i.manager.itemError(e)}},n,r)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const r=ml.parse(e[n]);t.push(r)}return t}});function P7(e){or.call(this,e)}P7.prototype=Object.assign(Object.create(or.prototype),{constructor:P7,load:function(e,t,n,r){const i=this,o=[],a=new O1;a.image=o;const s=new Tc(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer");let l=0;function c(u){s.load(e[u],function(f){const d=i.parse(f,!0);o[u]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},l+=1,l===6&&(d.mipmapCount===1&&(a.minFilter=mi),a.format=d.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(Array.isArray(e))for(let u=0,f=e.length;u<f;++u)c(u);else s.load(e,function(u){const f=i.parse(u,!0);if(f.isCubemap){const d=f.mipmaps.length/f.mipmapCount;for(let p=0;p<d;p++){o[p]={mipmaps:[]};for(let h=0;h<f.mipmapCount;h++)o[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+h]),o[p].format=f.format,o[p].width=f.width,o[p].height=f.height}}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=mi),a.format=f.format,a.needsUpdate=!0,t&&t(a)},n,r);return a}});function M7(e){or.call(this,e)}M7.prototype=Object.assign(Object.create(or.prototype),{constructor:M7,load:function(e,t,n,r){const i=this,o=new Lu,a=new Tc(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,function(s){const l=i.parse(s);l&&(l.image!==void 0?o.image=l.image:l.data!==void 0&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=l.wrapS!==void 0?l.wrapS:pa,o.wrapT=l.wrapT!==void 0?l.wrapT:pa,o.magFilter=l.magFilter!==void 0?l.magFilter:mi,o.minFilter=l.minFilter!==void 0?l.minFilter:mi,o.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(o.format=l.format),l.type!==void 0&&(o.type=l.type),l.mipmaps!==void 0&&(o.mipmaps=l.mipmaps,o.minFilter=tT),l.mipmapCount===1&&(o.minFilter=mi),o.needsUpdate=!0,t&&t(o,l))},n,r),o}});function G1(e){or.call(this,e)}G1.prototype=Object.assign(Object.create(or.prototype),{constructor:G1,load:function(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Gv.get(e);if(o!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),Gv.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(c){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),r&&r(c),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}});function qL(e){or.call(this,e)}qL.prototype=Object.assign(Object.create(or.prototype),{constructor:qL,load:function(e,t,n,r){const i=new gd,o=new G1(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(l){o.load(e[l],function(c){i.images[l]=c,a++,a===6&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(let l=0;l<e.length;++l)s(l);return i}});function XL(e){or.call(this,e)}XL.prototype=Object.assign(Object.create(or.prototype),{constructor:XL,load:function(e,t,n,r){const i=new mr,o=new G1(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){i.image=a;const s=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;i.format=s?kp:wa,i.needsUpdate=!0,t!==void 0&&t(i)},n,r),i}});function Ht(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Ht.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){e===void 0&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let r=0,i=n.length,o;t?o=t:o=e*n[i-1];let a=0,s=i-1,l;for(;a<=s;)if(r=Math.floor(a+(s-a)/2),l=n[r]-o,l<0)a=r+1;else if(l>0)s=r-1;else{s=r;break}if(r=s,n[r]===o)return r/(i-1);const c=n[r],f=n[r+1]-c,d=(o-c)/f;return(r+d)/(i-1)},getTangent:function(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new rt:new V);return s.copy(a).sub(o).normalize(),s},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new V,r=[],i=[],o=[],a=new V,s=new lt;for(let d=0;d<=e;d++){const p=d/e;r[d]=this.getTangentAt(p,new V),r[d].normalize()}i[0]=new V,o[0]=new V;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),f=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),f<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let d=1;d<=e;d++){if(i[d]=i[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(un.clamp(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(s.makeRotationAxis(a,p))}o[d].crossVectors(r[d],i[d])}if(t===!0){let d=Math.acos(un.clamp(i[0].dot(i[e]),-1,1));d/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(d=-d);for(let p=1;p<=e;p++)i[p].applyMatrix4(s.makeRotationAxis(r[p],d*p)),o[p].crossVectors(r[p],i[p])}return{tangents:r,normals:i,binormals:o}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});function Ws(e,t,n,r,i,o,a,s){Ht.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}Ws.prototype=Object.create(Ht.prototype);Ws.prototype.constructor=Ws;Ws.prototype.isEllipseCurve=!0;Ws.prototype.getPoint=function(e,t){const n=t||new rt,r=Math.PI*2;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(o?i=0:i=r),this.aClockwise===!0&&!o&&(i===r?i=-r:i=i-r);const a=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),f=s-this.aX,d=l-this.aY;s=f*c-d*u+this.aX,l=f*u+d*c+this.aY}return n.set(s,l)};Ws.prototype.copy=function(e){return Ht.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};Ws.prototype.toJSON=function(){const e=Ht.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e};Ws.prototype.fromJSON=function(e){return Ht.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};function W1(e,t,n,r,i,o){Ws.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}W1.prototype=Object.create(Ws.prototype);W1.prototype.constructor=W1;W1.prototype.isArcCurve=!0;function SN(){let e=0,t=0,n=0,r=0;function i(o,a,s,l){e=o,t=s,n=-3*o+3*a-2*s-l,r=2*o-2*a+s+l}return{initCatmullRom:function(o,a,s,l,c){i(a,s,c*(s-o),c*(l-a))},initNonuniformCatmullRom:function(o,a,s,l,c,u,f){let d=(a-o)/c-(s-o)/(c+u)+(s-a)/u,p=(s-a)/u-(l-a)/(u+f)+(l-s)/f;d*=u,p*=u,i(a,s,d,p)},calc:function(o){const a=o*o,s=a*o;return e+t*o+n*a+r*s}}}const v2=new V,YI=new SN,KI=new SN,ZI=new SN;function ns(e,t,n,r){Ht.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}ns.prototype=Object.create(Ht.prototype);ns.prototype.constructor=ns;ns.prototype.isCatmullRomCurve3=!0;ns.prototype.getPoint=function(e,t){const n=t||new V,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let a=Math.floor(o),s=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/i)+1)*i:s===0&&a===i-1&&(a=i-2,s=1);let l,c,u,f;if(this.closed||a>0?l=r[(a-1)%i]:(v2.subVectors(r[0],r[1]).add(r[0]),l=v2),c=r[a%i],u=r[(a+1)%i],this.closed||a+2<i?f=r[(a+2)%i]:(v2.subVectors(r[i-1],r[i-2]).add(r[i-1]),f=v2),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let p=Math.pow(l.distanceToSquared(c),d),h=Math.pow(c.distanceToSquared(u),d),g=Math.pow(u.distanceToSquared(f),d);h<1e-4&&(h=1),p<1e-4&&(p=h),g<1e-4&&(g=h),YI.initNonuniformCatmullRom(l.x,c.x,u.x,f.x,p,h,g),KI.initNonuniformCatmullRom(l.y,c.y,u.y,f.y,p,h,g),ZI.initNonuniformCatmullRom(l.z,c.z,u.z,f.z,p,h,g)}else this.curveType==="catmullrom"&&(YI.initCatmullRom(l.x,c.x,u.x,f.x,this.tension),KI.initCatmullRom(l.y,c.y,u.y,f.y,this.tension),ZI.initCatmullRom(l.z,c.z,u.z,f.z,this.tension));return n.set(YI.calc(s),KI.calc(s),ZI.calc(s)),n};ns.prototype.copy=function(e){Ht.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};ns.prototype.toJSON=function(){const e=Ht.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e};ns.prototype.fromJSON=function(e){Ht.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new V().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};function E7(e,t,n,r,i){const o=(r-t)*.5,a=(i-n)*.5,s=e*e,l=e*s;return(2*n-2*r+o+a)*l+(-3*n+3*r-2*o-a)*s+o*e+n}function git(e,t){const n=1-e;return n*n*t}function vit(e,t){return 2*(1-e)*e*t}function yit(e,t){return e*e*t}function Cb(e,t,n,r){return git(e,t)+vit(e,n)+yit(e,r)}function bit(e,t){const n=1-e;return n*n*n*t}function _it(e,t){const n=1-e;return 3*n*n*e*t}function xit(e,t){return 3*(1-e)*e*e*t}function wit(e,t){return e*e*e*t}function Ab(e,t,n,r,i){return bit(e,t)+_it(e,n)+xit(e,r)+wit(e,i)}function Oc(e,t,n,r){Ht.call(this),this.type="CubicBezierCurve",this.v0=e||new rt,this.v1=t||new rt,this.v2=n||new rt,this.v3=r||new rt}Oc.prototype=Object.create(Ht.prototype);Oc.prototype.constructor=Oc;Oc.prototype.isCubicBezierCurve=!0;Oc.prototype.getPoint=function(e,t){const n=t||new rt,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ab(e,r.x,i.x,o.x,a.x),Ab(e,r.y,i.y,o.y,a.y)),n};Oc.prototype.copy=function(e){return Ht.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};Oc.prototype.toJSON=function(){const e=Ht.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};Oc.prototype.fromJSON=function(e){return Ht.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function Nu(e,t,n,r){Ht.call(this),this.type="CubicBezierCurve3",this.v0=e||new V,this.v1=t||new V,this.v2=n||new V,this.v3=r||new V}Nu.prototype=Object.create(Ht.prototype);Nu.prototype.constructor=Nu;Nu.prototype.isCubicBezierCurve3=!0;Nu.prototype.getPoint=function(e,t){const n=t||new V,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ab(e,r.x,i.x,o.x,a.x),Ab(e,r.y,i.y,o.y,a.y),Ab(e,r.z,i.z,o.z,a.z)),n};Nu.prototype.copy=function(e){return Ht.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};Nu.prototype.toJSON=function(){const e=Ht.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};Nu.prototype.fromJSON=function(e){return Ht.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function rs(e,t){Ht.call(this),this.type="LineCurve",this.v1=e||new rt,this.v2=t||new rt}rs.prototype=Object.create(Ht.prototype);rs.prototype.constructor=rs;rs.prototype.isLineCurve=!0;rs.prototype.getPoint=function(e,t){const n=t||new rt;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};rs.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};rs.prototype.getTangent=function(e,t){const n=t||new rt;return n.copy(this.v2).sub(this.v1).normalize(),n};rs.prototype.copy=function(e){return Ht.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};rs.prototype.toJSON=function(){const e=Ht.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};rs.prototype.fromJSON=function(e){return Ht.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Ic(e,t){Ht.call(this),this.type="LineCurve3",this.v1=e||new V,this.v2=t||new V}Ic.prototype=Object.create(Ht.prototype);Ic.prototype.constructor=Ic;Ic.prototype.isLineCurve3=!0;Ic.prototype.getPoint=function(e,t){const n=t||new V;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};Ic.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Ic.prototype.copy=function(e){return Ht.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Ic.prototype.toJSON=function(){const e=Ht.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Ic.prototype.fromJSON=function(e){return Ht.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Rc(e,t,n){Ht.call(this),this.type="QuadraticBezierCurve",this.v0=e||new rt,this.v1=t||new rt,this.v2=n||new rt}Rc.prototype=Object.create(Ht.prototype);Rc.prototype.constructor=Rc;Rc.prototype.isQuadraticBezierCurve=!0;Rc.prototype.getPoint=function(e,t){const n=t||new rt,r=this.v0,i=this.v1,o=this.v2;return n.set(Cb(e,r.x,i.x,o.x),Cb(e,r.y,i.y,o.y)),n};Rc.prototype.copy=function(e){return Ht.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Rc.prototype.toJSON=function(){const e=Ht.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Rc.prototype.fromJSON=function(e){return Ht.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Fu(e,t,n){Ht.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new V,this.v1=t||new V,this.v2=n||new V}Fu.prototype=Object.create(Ht.prototype);Fu.prototype.constructor=Fu;Fu.prototype.isQuadraticBezierCurve3=!0;Fu.prototype.getPoint=function(e,t){const n=t||new V,r=this.v0,i=this.v1,o=this.v2;return n.set(Cb(e,r.x,i.x,o.x),Cb(e,r.y,i.y,o.y),Cb(e,r.z,i.z,o.z)),n};Fu.prototype.copy=function(e){return Ht.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Fu.prototype.toJSON=function(){const e=Ht.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Fu.prototype.fromJSON=function(e){return Ht.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function kc(e){Ht.call(this),this.type="SplineCurve",this.points=e||[]}kc.prototype=Object.create(Ht.prototype);kc.prototype.constructor=kc;kc.prototype.isSplineCurve=!0;kc.prototype.getPoint=function(e,t){const n=t||new rt,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[o===0?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(E7(a,s.x,l.x,c.x,u.x),E7(a,s.y,l.y,c.y,u.y)),n};kc.prototype.copy=function(e){Ht.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this};kc.prototype.toJSON=function(){const e=Ht.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e};kc.prototype.fromJSON=function(e){Ht.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new rt().fromArray(r))}return this};var YL=Object.freeze({__proto__:null,ArcCurve:W1,CatmullRomCurve3:ns,CubicBezierCurve:Oc,CubicBezierCurve3:Nu,EllipseCurve:Ws,LineCurve:rs,LineCurve3:Ic,QuadraticBezierCurve:Rc,QuadraticBezierCurve3:Fu,SplineCurve:kc});function Uf(){Ht.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}Uf.prototype=Object.assign(Object.create(Ht.prototype),{constructor:Uf,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new rs(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const i=n[r]-t,o=this.curves[r],a=o.getLength(),s=a===0?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e===void 0&&(e=40);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let l=0;l<s.length;l++){const c=s[l];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Ht.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=Ht.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Ht.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new YL[r.type]().fromJSON(r))}return this}});function dc(e){Uf.call(this),this.type="Path",this.currentPoint=new rt,e&&this.setFromPoints(e)}dc.prototype=Object.assign(Object.create(Uf.prototype),{constructor:dc,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new rs(this.currentPoint.clone(),new rt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){const i=new Rc(this.currentPoint.clone(),new rt(e,t),new rt(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,o){const a=new Oc(this.currentPoint.clone(),new rt(e,t),new rt(n,r),new rt(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(e){const t=[this.currentPoint.clone()].concat(e),n=new kc(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this},absarc:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this},ellipse:function(e,t,n,r,i,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,a,s),this},absellipse:function(e,t,n,r,i,o,a,s){const l=new Ws(e,t,n,r,i,o,a,s);if(this.curves.length>0){const u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return Uf.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=Uf.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Uf.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}});function $p(e){dc.call(this,e),this.uuid=un.generateUUID(),this.type="Shape",this.holes=[]}$p.prototype=Object.assign(Object.create(dc.prototype),{constructor:$p,getPointsHoles:function(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){dc.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){const e=dc.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){dc.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new dc().fromJSON(r))}return this}});function Pr(e,t){Ct.call(this),this.type="Light",this.color=new ht(e),this.intensity=t!==void 0?t:1,this.receiveShadow=void 0}Pr.prototype=Object.assign(Object.create(Ct.prototype),{constructor:Pr,isLight:!0,copy:function(e){return Ct.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=Ct.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}});function KL(e,t,n){Pr.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Ct.DefaultUp),this.updateMatrix(),this.groundColor=new ht(t)}KL.prototype=Object.assign(Object.create(Pr.prototype),{constructor:KL,isHemisphereLight:!0,copy:function(e){return Pr.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});function ju(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new rt(512,512),this.map=null,this.mapPass=null,this.matrix=new lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Dx,this._frameExtents=new rt(1,1),this._viewportCount=1,this._viewports=[new Jn(0,0,1,1)]}Object.assign(ju.prototype,{_projScreenMatrix:new lt,_lightPositionWorld:new V,_lookTarget:new V,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}});function ZL(){ju.call(this,new fi(50,1,.5,500))}ZL.prototype=Object.assign(Object.create(ju.prototype),{constructor:ZL,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=un.RAD2DEG*2*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),ju.prototype.updateMatrices.call(this,e)}});function DA(e,t,n,r,i,o){Pr.call(this,e,t),this.type="SpotLight",this.position.copy(Ct.DefaultUp),this.updateMatrix(),this.target=new Ct,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=r!==void 0?r:Math.PI/3,this.penumbra=i!==void 0?i:0,this.decay=o!==void 0?o:1,this.shadow=new ZL}DA.prototype=Object.assign(Object.create(Pr.prototype),{constructor:DA,isSpotLight:!0,copy:function(e){return Pr.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function JL(){ju.call(this,new fi(90,1,.5,500)),this._frameExtents=new rt(4,2),this._viewportCount=6,this._viewports=[new Jn(2,1,1,1),new Jn(0,1,1,1),new Jn(3,1,1,1),new Jn(1,1,1,1),new Jn(3,0,1,1),new Jn(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}JL.prototype=Object.assign(Object.create(ju.prototype),{constructor:JL,isPointLightShadow:!0,updateMatrices:function(e,t){t===void 0&&(t=0);const n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}});function QL(e,t,n,r){Pr.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(i){this.intensity=i/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=r!==void 0?r:1,this.shadow=new JL}QL.prototype=Object.assign(Object.create(Pr.prototype),{constructor:QL,isPointLight:!0,copy:function(e){return Pr.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});function bd(e,t,n,r,i,o){ku.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e!==void 0?e:-1,this.right=t!==void 0?t:1,this.top=n!==void 0?n:1,this.bottom=r!==void 0?r:-1,this.near=i!==void 0?i:.1,this.far=o!==void 0?o:2e3,this.updateProjectionMatrix()}bd.prototype=Object.assign(Object.create(ku.prototype),{constructor:bd,isOrthographicCamera:!0,copy:function(e,t){return ku.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=l*this.view.offsetX,o=i+l*this.view.width,a-=c*this.view.offsetY,s=a-c*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=Ct.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}});function e$(){ju.call(this,new bd(-5,5,5,-5,.5,500))}e$.prototype=Object.assign(Object.create(ju.prototype),{constructor:e$,isDirectionalLightShadow:!0,updateMatrices:function(e){ju.prototype.updateMatrices.call(this,e)}});function t$(e,t){Pr.call(this,e,t),this.type="DirectionalLight",this.position.copy(Ct.DefaultUp),this.updateMatrix(),this.target=new Ct,this.shadow=new e$}t$.prototype=Object.assign(Object.create(Pr.prototype),{constructor:t$,isDirectionalLight:!0,copy:function(e){return Pr.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function BA(e,t){Pr.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}BA.prototype=Object.assign(Object.create(Pr.prototype),{constructor:BA,isAmbientLight:!0});function n$(e,t,n,r){Pr.call(this,e,t),this.type="RectAreaLight",this.width=n!==void 0?n:10,this.height=r!==void 0?r:10}n$.prototype=Object.assign(Object.create(Pr.prototype),{constructor:n$,isRectAreaLight:!0,copy:function(e){return Pr.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=Pr.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});function CN(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new V)}Object.assign(CN.prototype,{isSphericalHarmonics3:!0,set:function(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*i)),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],1.092548*(n*i)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*i),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],2*.429043*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t},add:function(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},addScaledSH:function(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this},scale:function(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(e,t){t===void 0&&(t=0);const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}});Object.assign(CN,{getBasisAt:function(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}});function Sl(e,t){Pr.call(this,void 0,t),this.type="LightProbe",this.sh=e!==void 0?e:new CN}Sl.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Sl,isLightProbe:!0,copy:function(e){return Pr.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=Pr.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}});function r$(e){or.call(this,e),this.textures={}}r$.prototype=Object.assign(Object.create(or.prototype),{constructor:r$,load:function(e,t,n,r){const i=this,o=new Tc(i.manager);o.setPath(i.path),o.load(e,function(a){try{t(i.parse(JSON.parse(a)))}catch(s){r?r(s):console.error(s),i.manager.itemError(e)}},n,r)},parse:function(e){const t=this.textures;function n(i){return t[i]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",i),t[i]}const r=new dit[e.type];if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=new ht().setHex(e.sheen)),e.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular.setHex(e.specular),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(r.skinning=e.skinning),e.morphTargets!==void 0&&(r.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(r.morphNormals=e.morphNormals),e.dithering!==void 0&&(r.dithering=e.dithering),e.vertexTangents!==void 0&&(r.vertexTangents=e.vertexTangents),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const i in e.uniforms){const o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=new ht().setHex(o.value);break;case"v2":r.uniforms[i].value=new rt().fromArray(o.value);break;case"v3":r.uniforms[i].value=new V().fromArray(o.value);break;case"v4":r.uniforms[i].value=new Jn().fromArray(o.value);break;case"m3":r.uniforms[i].value=new oo().fromArray(o.value);case"m4":r.uniforms[i].value=new lt().fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let i=e.normalScale;Array.isArray(i)===!1&&(i=[i,i]),r.normalScale=new rt().fromArray(i)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new rt().fromArray(e.clearcoatNormalScale)),r},setTextures:function(e){return this.textures=e,this}});const Fie={decodeText:function(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}};function NA(){At.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}NA.prototype=Object.assign(Object.create(At.prototype),{constructor:NA,isInstancedBufferGeometry:!0,copy:function(e){return At.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const e=At.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}});function i$(e,t,n,r){typeof n=="number"&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Dt.call(this,e,t,n),this.meshPerAttribute=r||1}i$.prototype=Object.assign(Object.create(Dt.prototype),{constructor:i$,isInstancedBufferAttribute:!0,copy:function(e){return Dt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=Dt.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}});function o$(e){or.call(this,e)}o$.prototype=Object.assign(Object.create(or.prototype),{constructor:o$,load:function(e,t,n,r){const i=this,o=new Tc(i.manager);o.setPath(i.path),o.load(e,function(a){try{t(i.parse(JSON.parse(a)))}catch(s){r?r(s):console.error(s),i.manager.itemError(e)}},n,r)},parse:function(e){const t={},n={};function r(d,p){if(t[p]!==void 0)return t[p];const g=d.interleavedBuffers[p],v=i(d,g.buffer),m=new y2[g.type](v),y=new Ls(m,g.stride);return y.uuid=g.uuid,t[p]=y,y}function i(d,p){if(n[p]!==void 0)return n[p];const g=d.arrayBuffers[p],v=new Uint32Array(g).buffer;return n[p]=v,v}const o=e.isInstancedBufferGeometry?new NA:new At,a=e.data.index;if(a!==void 0){const d=new y2[a.type](a.array);o.setIndex(new Dt(d,1))}const s=e.data.attributes;for(const d in s){const p=s[d];let h;if(p.isInterleavedBufferAttribute){const g=r(e.data,p.data);h=new uh(g,p.itemSize,p.offset,p.normalized)}else{const g=new y2[p.type](p.array),v=p.isInstancedBufferAttribute?i$:Dt;h=new v(g,p.itemSize,p.normalized)}p.name!==void 0&&(h.name=p.name),o.setAttribute(d,h)}const l=e.data.morphAttributes;if(l)for(const d in l){const p=l[d],h=[];for(let g=0,v=p.length;g<v;g++){const m=p[g];let y;if(m.isInterleavedBufferAttribute){const _=r(e.data,m.data);y=new uh(_,m.itemSize,m.offset,m.normalized)}else{const _=new y2[m.type](m.array);y=new Dt(_,m.itemSize,m.normalized)}m.name!==void 0&&(y.name=m.name),h.push(y)}o.morphAttributes[d]=h}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let d=0,p=u.length;d!==p;++d){const h=u[d];o.addGroup(h.start,h.count,h.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const d=new V;f.center!==void 0&&d.fromArray(f.center),o.boundingSphere=new Qu(d,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}});const y2={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function a$(e){or.call(this,e)}a$.prototype=Object.assign(Object.create(or.prototype),{constructor:a$,load:function(e,t,n,r){const i=this,o=this.path===""?Fie.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Tc(i.manager);a.setPath(this.path),a.load(e,function(s){let l=null;try{l=JSON.parse(s)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}const c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}i.parse(l,t)},n,r)},parse:function(e,t){const n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){t!==void 0&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),(e.images===void 0||e.images.length===0)&&t!==void 0&&t(s),s},parseShape:function(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const i=new $p().fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){const n={};let r;if(e!==void 0){const i=new o$;for(let o=0,a=e.length;o<a;o++){let s;const l=e[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Fo[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Fo[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Fo[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Fo[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Fo[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Fo[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Fo[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Fo[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Fo[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Fo[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Fo[l.type](new YL[l.path.type]().fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Fo[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Fo[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let u=0,f=l.shapes.length;u<f;u++){const d=t[l.shapes[u]];r.push(d)}s=new Fo[l.type](r,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let u=0,f=l.shapes.length;u<f;u++){const d=t[l.shapes[u]];r.push(d)}const c=l.options.extrudePath;c!==void 0&&(l.options.extrudePath=new YL[c.type]().fromJSON(c)),s=new Fo[l.type](r,l.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(l);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}s.uuid=l.uuid,l.name!==void 0&&(s.name=l.name),s.isBufferGeometry===!0&&l.userData!==void 0&&(s.userData=l.userData),n[l.uuid]=s}}return n},parseMaterials:function(e,t){const n={},r={};if(e!==void 0){const i=new r$;i.setTextures(t);for(let o=0,a=e.length;o<a;o++){const s=e[o];if(s.type==="MultiMaterial"){const l=[];for(let c=0;c<s.materials.length;c++){const u=s.materials[c];n[u.uuid]===void 0&&(n[u.uuid]=i.parse(u)),l.push(n[u.uuid])}r[s.uuid]=l}else n[s.uuid]===void 0&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],i=ml.parse(r);r.uuid!==void 0&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){const n=this,r={};let i;function o(a){return n.manager.itemStart(a),i.load(a,function(){n.manager.itemEnd(a)},void 0,function(){n.manager.itemError(a),n.manager.itemEnd(a)})}if(e!==void 0&&e.length>0){const a=new Nie(t);i=new G1(a),i.setCrossOrigin(this.crossOrigin);for(let s=0,l=e.length;s<l;s++){const c=e[s],u=c.url;if(Array.isArray(u)){r[c.uuid]=[];for(let f=0,d=u.length;f<d;f++){const p=u[f],h=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;r[c.uuid].push(o(h))}}else{const f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;r[c.uuid]=o(f)}}}return r},parseTextures:function(e,t){function n(i,o){return typeof i=="number"?i:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",i),o[i])}const r={};if(e!==void 0)for(let i=0,o=e.length;i<o;i++){const a=e[i];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);let s;Array.isArray(t[a.image])?s=new gd(t[a.image]):s=new mr(t[a.image]),s.needsUpdate=!0,s.uuid=a.uuid,a.name!==void 0&&(s.name=a.name),a.mapping!==void 0&&(s.mapping=n(a.mapping,Sit)),a.offset!==void 0&&s.offset.fromArray(a.offset),a.repeat!==void 0&&s.repeat.fromArray(a.repeat),a.center!==void 0&&s.center.fromArray(a.center),a.rotation!==void 0&&(s.rotation=a.rotation),a.wrap!==void 0&&(s.wrapS=n(a.wrap[0],T7),s.wrapT=n(a.wrap[1],T7)),a.format!==void 0&&(s.format=a.format),a.type!==void 0&&(s.type=a.type),a.encoding!==void 0&&(s.encoding=a.encoding),a.minFilter!==void 0&&(s.minFilter=n(a.minFilter,O7)),a.magFilter!==void 0&&(s.magFilter=n(a.magFilter,O7)),a.anisotropy!==void 0&&(s.anisotropy=a.anisotropy),a.flipY!==void 0&&(s.flipY=a.flipY),a.premultiplyAlpha!==void 0&&(s.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(s.unpackAlignment=a.unpackAlignment),r[a.uuid]=s}return r},parseObject:function(e,t,n){let r;function i(l){return t[l]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",l),t[l]}function o(l){if(l!==void 0){if(Array.isArray(l)){const c=[];for(let u=0,f=l.length;u<f;u++){const d=l[u];n[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),c.push(n[d])}return c}return n[l]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",l),n[l]}}let a,s;switch(e.type){case"Scene":r=new Mv,e.background!==void 0&&Number.isInteger(e.background)&&(r.background=new ht(e.background)),e.fog!==void 0&&(e.fog.type==="Fog"?r.fog=new hA(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(r.fog=new RL(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new fi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(r.focus=e.focus),e.zoom!==void 0&&(r.zoom=e.zoom),e.filmGauge!==void 0&&(r.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(r.filmOffset=e.filmOffset),e.view!==void 0&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new bd(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(r.zoom=e.zoom),e.view!==void 0&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new BA(e.color,e.intensity);break;case"DirectionalLight":r=new t$(e.color,e.intensity);break;case"PointLight":r=new QL(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new n$(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new DA(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new KL(e.color,e.groundColor,e.intensity);break;case"LightProbe":r=new Sl().fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":a=i(e.geometry),s=o(e.material),r=new hr(a,s);break;case"InstancedMesh":a=i(e.geometry),s=o(e.material);const l=e.count,c=e.instanceMatrix;r=new DL(a,s,l),r.instanceMatrix=new Dt(new Float32Array(c.array),16);break;case"LOD":r=new mA;break;case"Line":r=new Gs(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new BL(i(e.geometry),o(e.material));break;case"LineSegments":r=new Gr(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new T1(i(e.geometry),o(e.material));break;case"Sprite":r=new kL(o(e.material));break;case"Group":r=new Kn;break;default:r=new Ct}if(r.uuid=e.uuid,e.name!==void 0&&(r.name=e.name),e.matrix!==void 0?(r.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(e.position!==void 0&&r.position.fromArray(e.position),e.rotation!==void 0&&r.rotation.fromArray(e.rotation),e.quaternion!==void 0&&r.quaternion.fromArray(e.quaternion),e.scale!==void 0&&r.scale.fromArray(e.scale)),e.castShadow!==void 0&&(r.castShadow=e.castShadow),e.receiveShadow!==void 0&&(r.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(r.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(r.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(r.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&r.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(r.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(r.visible=e.visible),e.frustumCulled!==void 0&&(r.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(r.renderOrder=e.renderOrder),e.userData!==void 0&&(r.userData=e.userData),e.layers!==void 0&&(r.layers.mask=e.layers),e.children!==void 0){const l=e.children;for(let c=0;c<l.length;c++)r.add(this.parseObject(l[c],t,n))}if(e.type==="LOD"){e.autoUpdate!==void 0&&(r.autoUpdate=e.autoUpdate);const l=e.levels;for(let c=0;c<l.length;c++){const u=l[c],f=r.getObjectByProperty("uuid",u.object);f!==void 0&&r.addLevel(f,u.distance)}}return r}});const Sit={UVMapping:hN,CubeReflectionMapping:mN,CubeRefractionMapping:gN,EquirectangularReflectionMapping:die,EquirectangularRefractionMapping:vN,CubeUVReflectionMapping:kx,CubeUVRefractionMapping:yN},T7={RepeatWrapping:aA,ClampToEdgeWrapping:pa,MirroredRepeatWrapping:sA},O7={NearestFilter:sr,NearestMipmapNearestFilter:wL,NearestMipmapLinearFilter:SL,LinearFilter:mi,LinearMipmapNearestFilter:pie,LinearMipmapLinearFilter:tT};function I7(e){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),or.call(this,e),this.options={premultiplyAlpha:"none"}}I7.prototype=Object.assign(Object.create(or.prototype),{constructor:I7,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Gv.get(e);if(o!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,i.options)}).then(function(a){Gv.add(e,a),t&&t(a),i.manager.itemEnd(e)}).catch(function(a){r&&r(a),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)}});function jie(){this.type="ShapePath",this.color=new ht,this.subPaths=[],this.currentPath=null}Object.assign(jie.prototype,{moveTo:function(e,t){return this.currentPath=new dc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(m){const y=[];for(let _=0,b=m.length;_<b;_++){const x=m[_],w=new $p;w.curves=x.curves,y.push(w)}return y}function r(m,y){const _=y.length;let b=!1;for(let x=_-1,w=0;w<_;x=w++){let S=y[x],A=y[w],C=A.x-S.x,k=A.y-S.y;if(Math.abs(k)>Number.EPSILON){if(k<0&&(S=y[w],C=-C,A=y[x],k=-k),m.y<S.y||m.y>A.y)continue;if(m.y===S.y){if(m.x===S.x)return!0}else{const O=k*(m.x-S.x)-C*(m.y-S.y);if(O===0)return!0;if(O<0)continue;b=!b}}else{if(m.y!==S.y)continue;if(A.x<=m.x&&m.x<=S.x||S.x<=m.x&&m.x<=A.x)return!0}}return b}const i=id.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return n(o);let a,s,l,c=[];if(o.length===1)return s=o[0],l=new $p,l.curves=s.curves,c.push(l),c;let u=!i(o[0].getPoints());u=e?!u:u;const f=[],d=[];let p=[],h=0,g;d[h]=void 0,p[h]=[];for(let m=0,y=o.length;m<y;m++)s=o[m],g=s.getPoints(),a=i(g),a=e?!a:a,a?(!u&&d[h]&&h++,d[h]={s:new $p,p:g},d[h].s.curves=s.curves,u&&h++,p[h]=[]):p[h].push({h:s,p:g[0]});if(!d[0])return n(o);if(d.length>1){let m=!1;const y=[];for(let _=0,b=d.length;_<b;_++)f[_]=[];for(let _=0,b=d.length;_<b;_++){const x=p[_];for(let w=0;w<x.length;w++){const S=x[w];let A=!0;for(let C=0;C<d.length;C++)r(S.p,d[C].p)&&(_!==C&&y.push({froms:_,tos:C,hole:w}),A?(A=!1,f[C].push(S)):m=!0);A&&f[_].push(S)}}y.length>0&&(m||(p=f))}let v;for(let m=0,y=d.length;m<y;m++){l=d[m].s,c.push(l),v=p[m];for(let _=0,b=v.length;_<b;_++)l.holes.push(v[_].h)}return c}});function zie(e){this.type="Font",this.data=e}Object.assign(zie.prototype,{isFont:!0,generateShapes:function(e,t){t===void 0&&(t=100);const n=[],r=Cit(e,t,this.data);for(let i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}});function Cit(e,t,n){const r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];let s=0,l=0;for(let c=0;c<r.length;c++){const u=r[c];if(u===`
`)s=0,l-=o;else{const f=Ait(u,i,s,l,n);s+=f.offsetX,a.push(f.path)}}return a}function Ait(e,t,n,r,i){const o=i.glyphs[e]||i.glyphs["?"];if(!o){console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");return}const a=new jie;let s,l,c,u,f,d,p,h;if(o.o){const g=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let v=0,m=g.length;v<m;)switch(g[v++]){case"m":s=g[v++]*t+n,l=g[v++]*t+r,a.moveTo(s,l);break;case"l":s=g[v++]*t+n,l=g[v++]*t+r,a.lineTo(s,l);break;case"q":c=g[v++]*t+n,u=g[v++]*t+r,f=g[v++]*t+n,d=g[v++]*t+r,a.quadraticCurveTo(f,d,c,u);break;case"b":c=g[v++]*t+n,u=g[v++]*t+r,f=g[v++]*t+n,d=g[v++]*t+r,p=g[v++]*t+n,h=g[v++]*t+r,a.bezierCurveTo(f,d,p,h,c,u);break}}return{offsetX:o.ha*t,path:a}}function R7(e){or.call(this,e)}R7.prototype=Object.assign(Object.create(or.prototype),{constructor:R7,load:function(e,t,n,r){const i=this,o=new Tc(this.manager);o.setPath(this.path),o.load(e,function(a){let s;try{s=JSON.parse(a)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),s=JSON.parse(a.substring(65,a.length-2))}const l=i.parse(s);t&&t(l)},n,r)},parse:function(e){return new zie(e)}});let b2;const Uie={getContext:function(){return b2===void 0&&(b2=new(window.AudioContext||window.webkitAudioContext)),b2},setContext:function(e){b2=e}};function s$(e){or.call(this,e)}s$.prototype=Object.assign(Object.create(or.prototype),{constructor:s$,load:function(e,t,n,r){const i=this,o=new Tc(i.manager);o.setResponseType("arraybuffer"),o.setPath(i.path),o.load(e,function(a){try{const s=a.slice(0);Uie.getContext().decodeAudioData(s,function(c){t(c)})}catch(s){r?r(s):console.error(s),i.manager.itemError(e)}},n,r)}});function k7(e,t,n){Sl.call(this,void 0,n);const r=new ht().set(e),i=new ht().set(t),o=new V(r.r,r.g,r.b),a=new V(i.r,i.g,i.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}k7.prototype=Object.assign(Object.create(Sl.prototype),{constructor:k7,isHemisphereLightProbe:!0,copy:function(e){return Sl.prototype.copy.call(this,e),this},toJSON:function(e){return Sl.prototype.toJSON.call(this,e)}});function L7(e,t){Sl.call(this,void 0,t);const n=new ht().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}L7.prototype=Object.assign(Object.create(Sl.prototype),{constructor:L7,isAmbientLightProbe:!0,copy:function(e){return Sl.prototype.copy.call(this,e),this},toJSON:function(e){return Sl.prototype.toJSON.call(this,e)}});const $7=new lt,D7=new lt;function Vie(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new fi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new fi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(Vie.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const r=e.projectionMatrix.clone(),i=t.eyeSep/2,o=i*t.near/t.focus,a=t.near*Math.tan(un.DEG2RAD*t.fov*.5)/t.zoom;let s,l;D7.elements[12]=-i,$7.elements[12]=i,s=-a*t.aspect+o,l=a*t.aspect+o,r.elements[0]=2*t.near/(l-s),r.elements[8]=(l+s)/(l-s),this.cameraL.projectionMatrix.copy(r),s=-a*t.aspect-o,l=a*t.aspect-o,r.elements[0]=2*t.near/(l-s),r.elements[8]=(l+s)/(l-s),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(D7),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply($7)}});function Hie(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Hie.prototype,{start:function(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=(typeof performance>"u"?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});const Yd=new V,B7=new lr,Pit=new V,Kd=new V;function N7(){Ct.call(this),this.type="AudioListener",this.context=Uie.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Hie}N7.prototype=Object.assign(Object.create(Ct.prototype),{constructor:N7,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){Ct.prototype.updateMatrixWorld.call(this,e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yd,B7,Pit),Kd.set(0,0,-1).applyQuaternion(B7),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Yd.x,r),t.positionY.linearRampToValueAtTime(Yd.y,r),t.positionZ.linearRampToValueAtTime(Yd.z,r),t.forwardX.linearRampToValueAtTime(Kd.x,r),t.forwardY.linearRampToValueAtTime(Kd.y,r),t.forwardZ.linearRampToValueAtTime(Kd.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(Yd.x,Yd.y,Yd.z),t.setOrientation(Kd.x,Kd.y,Kd.z,n.x,n.y,n.z)}});function q1(e){Ct.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}q1.prototype=Object.assign(Object.create(Ct.prototype),{constructor:q1,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(e===void 0&&(e=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});const Zd=new V,F7=new lr,Mit=new V,Jd=new V;function j7(e){q1.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}j7.prototype=Object.assign(Object.create(q1.prototype),{constructor:j7,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(Ct.prototype.updateMatrixWorld.call(this,e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Zd,F7,Mit),Jd.set(0,0,1).applyQuaternion(F7);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Zd.x,n),t.positionY.linearRampToValueAtTime(Zd.y,n),t.positionZ.linearRampToValueAtTime(Zd.z,n),t.orientationX.linearRampToValueAtTime(Jd.x,n),t.orientationY.linearRampToValueAtTime(Jd.y,n),t.orientationZ.linearRampToValueAtTime(Jd.z,n)}else t.setPosition(Zd.x,Zd.y,Zd.z),t.setOrientation(Jd.x,Jd.y,Jd.z)}});function Gie(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t!==void 0?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}Object.assign(Gie.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}});function Wie(e,t,n){this.binding=e,this.valueSize=n;let r,i,o;switch(t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(Wie.prototype,{accumulate:function(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)n[i+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,i,0,a,r)}this.cumulativeWeight=o},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const s=t*this._origIndex;this._mixBufferRegion(n,r,s,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){lr.slerpFlat(e,t,e,t,e,n,r)},_slerpAdditive:function(e,t,n,r,i){const o=this._workIndex*i;lr.multiplyQuaternionsFlat(e,o,e,t,e,n),lr.slerpFlat(e,t,e,t,e,o,r)},_lerp:function(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const s=t+a;e[s]=e[s]*o+e[n+a]*r}},_lerpAdditive:function(e,t,n,r,i){for(let o=0;o!==i;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}});const AN="\\[\\]\\.:\\/",Eit=new RegExp("["+AN+"]","g"),PN="[^"+AN+"]",Tit="[^"+AN.replace("\\.","")+"]",Oit=/((?:WC+[\/:])*)/.source.replace("WC",PN),Iit=/(WCOD+)?/.source.replace("WCOD",Tit),Rit=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",PN),kit=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",PN),Lit=new RegExp("^"+Oit+Iit+Rit+kit+"$"),$it=["material","materials","bones"];function qie(e,t,n){const r=n||Xo.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}Object.assign(qie.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}});function Xo(e,t,n){this.path=t,this.parsedPath=n||Xo.parseTrackName(t),this.node=Xo.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(Xo,{Composite:qie,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Xo.Composite(e,t,n):new Xo(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Eit,"")},parseTrackName:function(e){const t=Lit.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const i=n.nodeName.substring(r+1);$it.indexOf(i)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(i){for(let o=0;o<i.length;o++){const a=i[o];if(a.name===t||a.uuid===t)return a;const s=n(a.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}});Object.assign(Xo.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)t[n++]=r[i]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.targetObject[this.propertyName]=t[n]},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=t[n++]},function(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Xo.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let l=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const o=e[r];if(o===void 0){const l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(i!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[i]!==void 0&&(i=e.morphTargetDictionary[i])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else o.fromArray!==void 0&&o.toArray!==void 0?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(Xo.prototype,{_getValue_unbound:Xo.prototype.getValue,_setValue_unbound:Xo.prototype.setValue});function Dit(){this.uuid=un.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}Object.assign(Dit.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const f=arguments[c],d=f.uuid;let p=t[d];if(p===void 0){p=s++,t[d]=p,e.push(f);for(let h=0,g=o;h!==g;++h)i[h].push(new Xo(f,n[h],r[h]))}else if(p<l){a=e[p];const h=--l,g=e[h];t[g.uuid]=p,e[p]=g,t[d]=h,e[h]=f;for(let v=0,m=o;v!==m;++v){const y=i[v],_=y[h];let b=y[p];y[p]=_,b===void 0&&(b=new Xo(f,n[v],r[v])),y[h]=b}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const s=arguments[o],l=s.uuid,c=t[l];if(c!==void 0&&c>=i){const u=i++,f=e[u];t[f.uuid]=c,e[c]=f,t[l]=u,e[u]=s;for(let d=0,p=r;d!==p;++d){const h=n[d],g=h[u],v=h[c];h[c]=g,h[u]=v}}}this.nCachedObjects_=i},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const l=arguments[a],c=l.uuid,u=t[c];if(u!==void 0)if(delete t[c],u<i){const f=--i,d=e[f],p=--o,h=e[p];t[d.uuid]=u,e[u]=d,t[h.uuid]=f,e[f]=h,e.pop();for(let g=0,v=r;g!==v;++g){const m=n[g],y=m[f],_=m[p];m[u]=y,m[f]=_,m.pop()}}else{const f=--o,d=e[f];t[d.uuid]=u,e[u]=d,e.pop();for(let p=0,h=r;p!==h;++p){const g=n[p];g[u]=g[f],g.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){let n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(r!==void 0)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(u);for(let f=c,d=s.length;f!==d;++f){const p=s[f];u[f]=new Xo(p,e,t)}return u},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],l=e[a];t[l]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}});function Xie(e,t,n,r){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=r||t.blendMode;const i=t.tracks,o=i.length,a=new Array(o),s={endingStart:Pv,endingEnd:Pv};for(let l=0;l!==o;++l){const c=i[l].createInterpolant(null);a[l]=c,c.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=PQe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(Xie.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const i=this._startTime;if(i!==null){const s=(e-i)*n;if(s<0||n===0)return;this._startTime=null,t=n*s}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const s=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case hie:for(let c=0,u=s.length;c!==u;++c)s[c].evaluate(o),l[c].accumulateAdditive(a);break;case bN:default:for(let c=0,u=s.length;c!==u;++c)s[c].evaluate(o),l[c].accumulate(r,a)}}},_updateWeight:function(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===MQe;if(e===0)return i===-1?r:o&&(i&1)===1?t-r:r;if(n===AQe){i===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(i===-1&&(e>=0?(i=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,i+=Math.abs(a);const s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(s===1){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(i&1)===1)return t-r}return r},_setEndings:function(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=lg,r.endingEnd=lg):(e?r.endingStart=this.zeroSlopeAtStart?lg:Pv:r.endingStart=fA,t?r.endingEnd=this.zeroSlopeAtEnd?lg:Pv:r.endingEnd=fA)},_scheduleFading:function(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}});function z7(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}z7.prototype=Object.assign(Object.create(Ju.prototype),{constructor:z7,_bindAction:function(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];c===void 0&&(c={},l[s]=c);for(let u=0;u!==i;++u){const f=r[u],d=f.name;let p=c[d];if(p!==void 0)o[u]=p;else{if(p=o[u],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}const h=t&&t._propertyBindings[u].binding.parsedPath;p=new Wie(Xo.create(n,d,h),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,s,d),o[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,i=this._actionsByClip[r];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const i=t[n];i.useCount++===0&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const i=t[n];--i.useCount===0&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null;const u=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete u[f],s.length===0&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const i=t[n];--i.referenceCount===0&&this._removeInactiveBinding(i)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],Object.keys(a).length===0&&delete o[r]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new LA(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const r=t||this._root,i=r.uuid;let o=typeof e=="string"?ml.findByName(r,e):e;const a=o!==null?o.uuid:e;let s=this._actionsByClip[a],l=null;if(n===void 0&&(o!==null?n=o.blendMode:n=bN),s!==void 0){const u=s.actionByRoot[i];if(u!==void 0&&u.blendMode===n)return u;l=s.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;const c=new Xie(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,i),c},existingAction:function(e,t){const n=t||this._root,r=n.uuid,i=typeof e=="string"?ml.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null},stopAllAction:function(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(r,e,i,o);const a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this},setTime:function(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(i!==void 0){const o=i.knownActions;for(let a=0,s=o.length;a!==s;++a){const l=o[a];this._deactivateAction(l);const c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,s=a[t];s!==void 0&&(this._deactivateAction(s),this._removeInactiveAction(s))}const r=this._bindingsByRootAndName,i=r[t];if(i!==void 0)for(const o in i){const a=i[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});function X1(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}X1.prototype.clone=function(){return new X1(this.value.clone===void 0?this.value:this.value.clone())};function U7(e,t,n){Ls.call(this,e,t),this.meshPerAttribute=n||1}U7.prototype=Object.assign(Object.create(Ls.prototype),{constructor:U7,isInstancedInterleavedBuffer:!0,copy:function(e){return Ls.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=Ls.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=Ls.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}});function Yie(e,t,n,r){this.ray=new P0(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new wN,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function V7(e,t){return e.distance-t.distance}function l$(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),r===!0){const i=e.children;for(let o=0,a=i.length;o<a;o++)l$(i[o],t,n,!0)}}Object.assign(Yie.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){const r=n||[];return l$(e,this,r,t),r.sort(V7),r},intersectObjects:function(e,t,n){const r=n||[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(let i=0,o=e.length;i<o;i++)l$(e[i],this,r,t);return r.sort(V7),r}});function Bit(e,t,n){return this.radius=e!==void 0?e:1,this.phi=t!==void 0?t:0,this.theta=n!==void 0?n:0,this}Object.assign(Bit.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(un.clamp(t/this.radius,-1,1))),this}});function Nit(e,t,n){return this.radius=e!==void 0?e:1,this.theta=t!==void 0?t:0,this.y=n!==void 0?n:0,this}Object.assign(Nit.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});const H7=new rt;function Kie(e,t){this.min=e!==void 0?e:new rt(1/0,1/0),this.max=t!==void 0?t:new rt(-1/0,-1/0)}Object.assign(Kie.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){const n=H7.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new rt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new rt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return t===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new rt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return t===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new rt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return H7.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});const G7=new V,_2=new V;function Zie(e,t){this.start=e!==void 0?e:new V,this.end=t!==void 0?t:new V}Object.assign(Zie.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return e===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new V),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return e===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),e=new V),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return t===void 0&&(console.warn("THREE.Line3: .at() target is now required"),t=new V),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){G7.subVectors(e,this.start),_2.subVectors(this.end,this.start);const n=_2.dot(_2);let i=_2.dot(G7)/n;return t&&(i=un.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){const r=this.closestPointToPointParameter(e,t);return n===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new V),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function FA(e){Ct.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}FA.prototype=Object.create(Ct.prototype);FA.prototype.constructor=FA;FA.prototype.isImmediateRenderObject=!0;const W7=new V;function Y1(e,t){Ct.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new At,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){const l=o/s*Math.PI*2,c=a/s*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new Pt(r,3));const i=new oi({fog:!1,toneMapped:!1});this.cone=new Gr(n,i),this.add(this.cone),this.update()}Y1.prototype=Object.create(Ct.prototype);Y1.prototype.constructor=Y1;Y1.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};Y1.prototype.update=function(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),W7.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(W7),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};const bf=new V,x2=new lt,JI=new lt;function Jie(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Jie(e.children[n]));return t}function Wv(e){const t=Jie(e),n=new At,r=[],i=[],o=new ht(0,0,1),a=new ht(0,1,0);for(let l=0;l<t.length;l++){const c=t[l];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Pt(r,3)),n.setAttribute("color",new Pt(i,3));const s=new oi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});Gr.call(this,n,s),this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}Wv.prototype=Object.create(Gr.prototype);Wv.prototype.constructor=Wv;Wv.prototype.isSkeletonHelper=!0;Wv.prototype.updateMatrixWorld=function(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");JI.getInverse(this.root.matrixWorld);for(let i=0,o=0;i<t.length;i++){const a=t[i];a.parent&&a.parent.isBone&&(x2.multiplyMatrices(JI,a.matrixWorld),bf.setFromMatrixPosition(x2),r.setXYZ(o,bf.x,bf.y,bf.z),x2.multiplyMatrices(JI,a.parent.matrixWorld),bf.setFromMatrixPosition(x2),r.setXYZ(o+1,bf.x,bf.y,bf.z),o+=2)}n.getAttribute("position").needsUpdate=!0,Ct.prototype.updateMatrixWorld.call(this,e)};function K1(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;const r=new Lv(t,4,2),i=new kl({wireframe:!0,fog:!1,toneMapped:!1});hr.call(this,r,i),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}K1.prototype=Object.create(hr.prototype);K1.prototype.constructor=K1;K1.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};K1.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};const Fit=new V,q7=new ht,X7=new ht;function Z1(e,t,n){Ct.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new ph(t);r.rotateY(Math.PI*.5),this.material=new kl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(i.count*3);r.setAttribute("color",new Dt(o,3)),this.add(new hr(r,this.material)),this.update()}Z1.prototype=Object.create(Ct.prototype);Z1.prototype.constructor=Z1;Z1.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};Z1.prototype.update=function(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");q7.copy(this.light.color),X7.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const i=n<r/2?q7:X7;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Fit.setFromMatrixPosition(this.light.matrixWorld).negate())};function c$(e,t,n,r){e=e||10,t=t||10,n=new ht(n!==void 0?n:4473924),r=new ht(r!==void 0?r:8947848);const i=t/2,o=e/t,a=e/2,s=[],l=[];for(let f=0,d=0,p=-a;f<=t;f++,p+=o){s.push(-a,0,p,a,0,p),s.push(p,0,-a,p,0,a);const h=f===i?n:r;h.toArray(l,d),d+=3,h.toArray(l,d),d+=3,h.toArray(l,d),d+=3,h.toArray(l,d),d+=3}const c=new At;c.setAttribute("position",new Pt(s,3)),c.setAttribute("color",new Pt(l,3));const u=new oi({vertexColors:!0,toneMapped:!1});Gr.call(this,c,u),this.type="GridHelper"}c$.prototype=Object.assign(Object.create(Gr.prototype),{constructor:c$,copy:function(e){return Gr.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return new this.constructor().copy(this)}});function u$(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new ht(i!==void 0?i:4473924),o=new ht(o!==void 0?o:8947848);const a=[],s=[];for(let u=0;u<=t;u++){const f=u/t*(Math.PI*2),d=Math.sin(f)*e,p=Math.cos(f)*e;a.push(0,0,0),a.push(d,0,p);const h=u&1?i:o;s.push(h.r,h.g,h.b),s.push(h.r,h.g,h.b)}for(let u=0;u<=n;u++){const f=u&1?i:o,d=e-e/n*u;for(let p=0;p<r;p++){let h=p/r*(Math.PI*2),g=Math.sin(h)*d,v=Math.cos(h)*d;a.push(g,0,v),s.push(f.r,f.g,f.b),h=(p+1)/r*(Math.PI*2),g=Math.sin(h)*d,v=Math.cos(h)*d,a.push(g,0,v),s.push(f.r,f.g,f.b)}}const l=new At;l.setAttribute("position",new Pt(a,3)),l.setAttribute("color",new Pt(s,3));const c=new oi({vertexColors:!0,toneMapped:!1});Gr.call(this,l,c),this.type="PolarGridHelper"}u$.prototype=Object.create(Gr.prototype);u$.prototype.constructor=u$;const Y7=new V,w2=new V,K7=new V;function J1(e,t,n){Ct.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t===void 0&&(t=1);let r=new At;r.setAttribute("position",new Pt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new oi({fog:!1,toneMapped:!1});this.lightPlane=new Gs(r,i),this.add(this.lightPlane),r=new At,r.setAttribute("position",new Pt([0,0,0,0,0,1],3)),this.targetLine=new Gs(r,i),this.add(this.targetLine),this.update()}J1.prototype=Object.create(Ct.prototype);J1.prototype.constructor=J1;J1.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};J1.prototype.update=function(){Y7.setFromMatrixPosition(this.light.matrixWorld),w2.setFromMatrixPosition(this.light.target.matrixWorld),K7.subVectors(w2,Y7),this.lightPlane.lookAt(w2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(w2),this.targetLine.scale.z=K7.length()};const S2=new V,qr=new ku;function jA(e){const t=new At,n=new oi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new ht(16755200),s=new ht(16711680),l=new ht(43775),c=new ht(16777215),u=new ht(3355443);f("n1","n2",a),f("n2","n4",a),f("n4","n3",a),f("n3","n1",a),f("f1","f2",a),f("f2","f4",a),f("f4","f3",a),f("f3","f1",a),f("n1","f1",a),f("n2","f2",a),f("n3","f3",a),f("n4","f4",a),f("p","n1",s),f("p","n2",s),f("p","n3",s),f("p","n4",s),f("u1","u2",l),f("u2","u3",l),f("u3","u1",l),f("c","t",c),f("p","c",u),f("cn1","cn2",u),f("cn3","cn4",u),f("cf1","cf2",u),f("cf3","cf4",u);function f(p,h,g){d(p,g),d(h,g)}function d(p,h){r.push(0,0,0),i.push(h.r,h.g,h.b),o[p]===void 0&&(o[p]=[]),o[p].push(r.length/3-1)}t.setAttribute("position",new Pt(r,3)),t.setAttribute("color",new Pt(i,3)),Gr.call(this,t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}jA.prototype=Object.create(Gr.prototype);jA.prototype.constructor=jA;jA.prototype.update=function(){const e=this.geometry,t=this.pointMap,n=1,r=1;qr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qr("c",t,e,qr,0,0,-1),Qr("t",t,e,qr,0,0,1),Qr("n1",t,e,qr,-n,-r,-1),Qr("n2",t,e,qr,n,-r,-1),Qr("n3",t,e,qr,-n,r,-1),Qr("n4",t,e,qr,n,r,-1),Qr("f1",t,e,qr,-n,-r,1),Qr("f2",t,e,qr,n,-r,1),Qr("f3",t,e,qr,-n,r,1),Qr("f4",t,e,qr,n,r,1),Qr("u1",t,e,qr,n*.7,r*1.1,-1),Qr("u2",t,e,qr,-n*.7,r*1.1,-1),Qr("u3",t,e,qr,0,r*2,-1),Qr("cf1",t,e,qr,-n,0,1),Qr("cf2",t,e,qr,n,0,1),Qr("cf3",t,e,qr,0,-r,1),Qr("cf4",t,e,qr,0,r,1),Qr("cn1",t,e,qr,-n,0,-1),Qr("cn2",t,e,qr,n,0,-1),Qr("cn3",t,e,qr,0,-r,-1),Qr("cn4",t,e,qr,0,r,-1),e.getAttribute("position").needsUpdate=!0};function Qr(e,t,n,r,i,o,a){S2.set(i,o,a).unproject(r);const s=t[e];if(s!==void 0){const l=n.getAttribute("position");for(let c=0,u=s.length;c<u;c++)l.setXYZ(s[c],S2.x,S2.y,S2.z)}}const C2=new cr;function gh(e,t){this.object=e,t===void 0&&(t=16776960);const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),i=new At;i.setIndex(new Dt(n,1)),i.setAttribute("position",new Dt(r,3)),Gr.call(this,i,new oi({color:t,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}gh.prototype=Object.create(Gr.prototype);gh.prototype.constructor=gh;gh.prototype.update=function(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&C2.setFromObject(this.object),C2.isEmpty())return;const t=C2.min,n=C2.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()};gh.prototype.setFromObject=function(e){return this.object=e,this.update(),this};gh.prototype.copy=function(e){return Gr.prototype.copy.call(this,e),this.object=e.object,this};gh.prototype.clone=function(){return new this.constructor().copy(this)};function zA(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],i=new At;i.setIndex(new Dt(n,1)),i.setAttribute("position",new Pt(r,3)),Gr.call(this,i,new oi({color:t,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}zA.prototype=Object.create(Gr.prototype);zA.prototype.constructor=zA;zA.prototype.updateMatrixWorld=function(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Ct.prototype.updateMatrixWorld.call(this,e))};function UA(e,t,n){this.plane=e,this.size=t===void 0?1:t;const r=n!==void 0?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new At;o.setAttribute("position",new Pt(i,3)),o.computeBoundingSphere(),Gs.call(this,o,new oi({color:r,toneMapped:!1})),this.type="PlaneHelper";const a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new At;s.setAttribute("position",new Pt(a,3)),s.computeBoundingSphere(),this.add(new hr(s,new kl({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}UA.prototype=Object.create(Gs.prototype);UA.prototype.constructor=UA;UA.prototype.updateMatrixWorld=function(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?wi:C0,this.lookAt(this.plane.normal),Ct.prototype.updateMatrixWorld.call(this,e)};const Z7=new V;let A2,QI;function _d(e,t,n,r,i,o){Ct.call(this),this.type="ArrowHelper",e===void 0&&(e=new V(0,0,1)),t===void 0&&(t=new V(0,0,0)),n===void 0&&(n=1),r===void 0&&(r=16776960),i===void 0&&(i=.2*n),o===void 0&&(o=.2*i),A2===void 0&&(A2=new At,A2.setAttribute("position",new Pt([0,0,0,0,1,0],3)),QI=new Du(0,.5,1,5,1),QI.translate(0,-.5,0)),this.position.copy(t),this.line=new Gs(A2,new oi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new hr(QI,new kl({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}_d.prototype=Object.create(Ct.prototype);_d.prototype.constructor=_d;_d.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Z7.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Z7,t)}};_d.prototype.setLength=function(e,t,n){t===void 0&&(t=.2*e),n===void 0&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()};_d.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)};_d.prototype.copy=function(e){return Ct.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this};_d.prototype.clone=function(){return new this.constructor().copy(this)};function f$(e){e=e||1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new At;r.setAttribute("position",new Pt(t,3)),r.setAttribute("color",new Pt(n,3));const i=new oi({vertexColors:!0,toneMapped:!1});Gr.call(this,r,i),this.type="AxesHelper"}f$.prototype=Object.create(Gr.prototype);f$.prototype.constructor=f$;const kg=4,od=8,nc=Math.pow(2,od),Qie=[.125,.215,.35,.446,.526,.582],eoe=od-kg+1+Qie.length,Bm=20,gc={[Ro]:0,[Lx]:1,[xN]:2,[mie]:3,[gie]:4,[vie]:5,[_N]:6},eR=new bd,{_lodPlanes:py,_sizeLods:J7,_sigmas:P2}=zit();let tR=null;const up=(1+Math.sqrt(5))/2,ym=1/up,Q7=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,up,ym),new V(0,up,-ym),new V(ym,0,up),new V(-ym,0,up),new V(up,ym,0),new V(-up,ym,0)];function eV(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=Uit(Bm),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}eV.prototype={constructor:eV,fromScene:function(e,t=0,n=.1,r=100){tR=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i},fromEquirectangular:function(e){return this._fromTexture(e)},fromCubemap:function(e){return this._fromTexture(e)},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=rV(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=nV(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<py.length;e++)py[e].dispose()},_cleanup:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(tR),e.scissorTest=!1,M2(e,0,0,e.width,e.height)},_fromTexture:function(e){tR=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t},_allocateTargets:function(e){const t={magFilter:sr,minFilter:sr,generateMipmaps:!1,type:ah,format:UJe,encoding:jit(e)?e.encoding:xN,depthBuffer:!1,stencilBuffer:!1},n=tV(t);return n.depthBuffer=!e,this._pingPongRenderTarget=tV(t),n},_compileMaterial:function(e){const t=new hr(py[0],e);this._renderer.compile(t,eR)},_sceneToCubeUV:function(e,t,n,r){const a=new fi(90,1,t,n),s=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.outputEncoding,f=c.toneMapping,d=c.getClearColor(),p=c.getClearAlpha();c.toneMapping=Ig,c.outputEncoding=Ro;let h=e.background;if(h&&h.isColor){h.convertSRGBToLinear();const g=Math.max(h.r,h.g,h.b),v=Math.min(Math.max(Math.ceil(Math.log2(g)),-128),127);h=h.multiplyScalar(Math.pow(2,-v));const m=(v+128)/255;c.setClearColor(h,m),e.background=null}for(let g=0;g<6;g++){const v=g%3;v==0?(a.up.set(0,s[g],0),a.lookAt(l[g],0,0)):v==1?(a.up.set(0,0,s[g]),a.lookAt(0,l[g],0)):(a.up.set(0,s[g],0),a.lookAt(0,0,l[g])),M2(r,v*nc,g>2?nc:0,nc,nc),c.setRenderTarget(r),c.render(e,a)}c.toneMapping=f,c.outputEncoding=u,c.setClearColor(d,p)},_textureToCubeUV:function(e,t){const n=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=rV()):this._equirectShader==null&&(this._equirectShader=nV());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new hr(py[0],r),o=r.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=gc[e.encoding],o.outputEncoding.value=gc[t.texture.encoding],M2(t,0,0,3*nc,2*nc),n.setRenderTarget(t),n.render(i,eR)},_applyPMREM:function(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<eoe;r++){const i=Math.sqrt(P2[r]*P2[r]-P2[r-1]*P2[r-1]),o=Q7[(r-1)%Q7.length];this._blur(e,r-1,r,i,o)}t.autoClear=n},_blur:function(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)},_halfBlur:function(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new hr(py[r],l),f=l.uniforms,d=J7[n]-1,p=isFinite(i)?Math.PI/(2*d):2*Math.PI/(2*Bm-1),h=i/p,g=isFinite(i)?1+Math.floor(c*h):Bm;g>Bm&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Bm}`);const v=[];let m=0;for(let x=0;x<Bm;++x){const w=x/h,S=Math.exp(-w*w/2);v.push(S),x==0?m+=S:x<g&&(m+=2*S)}for(let x=0;x<v.length;x++)v[x]=v[x]/m;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=v,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a),f.dTheta.value=p,f.mipInt.value=od-n,f.inputEncoding.value=gc[e.texture.encoding],f.outputEncoding.value=gc[e.texture.encoding];const y=J7[r],_=3*Math.max(0,nc-2*y),b=(r===0?0:2*nc)+2*y*(r>od-kg?r-od+kg:0);M2(t,_,b,3*y,2*y),s.setRenderTarget(t),s.render(u,eR)}};function jit(e){return e===void 0||e.type!==ah?!1:e.encoding===Ro||e.encoding===Lx||e.encoding===_N}function zit(){const e=[],t=[],n=[];let r=od;for(let i=0;i<eoe;i++){const o=Math.pow(2,r);t.push(o);let a=1/o;i>od-kg?a=Qie[i-od+kg-1]:i==0&&(a=0),n.push(a);const s=1/(o-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],f=6,d=6,p=3,h=2,g=1,v=new Float32Array(p*d*f),m=new Float32Array(h*d*f),y=new Float32Array(g*d*f);for(let b=0;b<f;b++){const x=b%3*2/3-1,w=b>2?0:-1,S=[x,w,0,x+2/3,w,0,x+2/3,w+1,0,x,w,0,x+2/3,w+1,0,x,w+1,0];v.set(S,p*d*b),m.set(u,h*d*b);const A=[b,b,b,b,b,b];y.set(A,g*d*b)}const _=new At;_.setAttribute("position",new Dt(v,p)),_.setAttribute("uv",new Dt(m,h)),_.setAttribute("faceIndex",new Dt(y,g)),e.push(_),r>kg&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function tV(e){const t=new qo(3*nc,3*nc,e);return t.texture.mapping=kx,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function M2(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Uit(e){const t=new Float32Array(e),n=new V(0,1,0);return new yd({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:gc[Ro]},outputEncoding:{value:gc[Ro]}},vertexShader:MN(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${EN()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:Su,depthTest:!1,depthWrite:!1})}function nV(){const e=new rt(1,1);return new yd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:gc[Ro]},outputEncoding:{value:gc[Ro]}},vertexShader:MN(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${EN()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:Su,depthTest:!1,depthWrite:!1})}function rV(){return new yd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:gc[Ro]},outputEncoding:{value:gc[Ro]}},vertexShader:MN(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${EN()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:Su,depthTest:!1,depthWrite:!1})}function MN(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function EN(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}Ht.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Ht.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};Object.assign(Uf.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new Kt;for(let n=0,r=e.length;n<r;n++){const i=e[n];t.vertices.push(new V(i.x,i.y,i.z||0))}return t}});Object.assign(dc.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}});Object.create(ns.prototype);Object.create(ns.prototype);function toe(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ns.call(this,e),this.type="catmullrom"}toe.prototype=Object.create(ns.prototype);Object.assign(toe.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});c$.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Wv.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(or.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Fie.extractUrlBase(e)}});or.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(a$.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}});Object.assign(Kie.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(cr.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(Qu.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Dx.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)};Zie.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)};Object.assign(un,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),un.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),un.ceilPowerOfTwo(e)}});Object.assign(oo.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(lt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new V().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}});sc.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};lr.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Object.assign(P0.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}});Object.assign(io.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}});Object.assign(io,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),io.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),io.getNormal(e,t,n,r)}});Object.assign($p.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new kv(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new $v(this,e)}});Object.assign(rt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(V.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Jn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Kt.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.assign(Ct.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.defineProperties(Ct.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(hr.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(hr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),EQe},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(mA.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty($L.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});LL.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Ht.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}});fi.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(Pr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(Dt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===x1},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(x1)}}});Object.assign(Dt.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?x1:nT),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(At.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Dt(arguments[1],arguments[2]))):e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t)},addDrawCall:function(e,t,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.defineProperties(At.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(NA.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}});Object.defineProperties(Yie.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}});Object.defineProperties(Ls.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===x1},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}});Object.assign(Ls.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?x1:nT),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign($u.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(X1.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(tn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ht}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===cie}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}});Object.defineProperties(mh.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Ei.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});Object.assign(Bx.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(Bx.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=e===!0?Lx:Ro}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Oie.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(qo.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});Object.defineProperties(q1.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return new s$().load(e,function(r){t.setBuffer(r)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});Gie.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};C1.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};sh.crossOrigin=void 0;sh.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new XL;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o};sh.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new qL;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o};sh.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};sh.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:rJe}}));var VA={exports:{}};VA.exports;(function(e,t){/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */(function(){var n,r,i,o,a,s,l,c,u,f,d,p,h,g,v,m,y,_,b,x,w,S,A,C,k,O,T,B,R,P,D,z,N,H,J,ne,oe,Z,ce,se,Y,he,ae,ye,re,te,le,de,_e,be,ke,W,ee,Ee,ge,pe,ve,$e,Ne,Ae,Oe,j,M,L,q,me,Te,Pe,Xe,He,Ve,Je,Ye,yt,mt,ut,Et,et,ct,_t,xe,ie,ue=[].slice;et=function(){var E,F,U,X,Q;for(E={},Q="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),X=0,F=Q.length;X<F;X++)U=Q[X],E["[object "+U+"]"]=U.toLowerCase();return function(fe){var we;return we=Object.prototype.toString.call(fe),E[we]||"object"}}(),le=function(E,F,U){return F==null&&(F=0),U==null&&(U=1),E<F&&(E=F),E>U&&(E=U),E},ct=function(E){return E.length>=3?Array.prototype.slice.call(E):E[0]},w=function(E){var F,U;for(E._clipped=!1,E._unclipped=E.slice(0),F=U=0;U<3;F=++U)F<3?((E[F]<0||E[F]>255)&&(E._clipped=!0),E[F]<0&&(E[F]=0),E[F]>255&&(E[F]=255)):F===3&&(E[F]<0&&(E[F]=0),E[F]>1&&(E[F]=1));return E._clipped||delete E._unclipped,E},o=Math.PI,Ye=Math.round,A=Math.cos,B=Math.floor,pe=Math.pow,de=Math.log,mt=Math.sin,ut=Math.sqrt,g=Math.atan2,ke=Math.max,h=Math.abs,l=o*2,a=o/3,r=o/180,s=180/o,x=function(){return arguments[0]instanceof n?arguments[0]:function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,arguments,function(){})},x.default=x,p=[],e!==null&&e.exports!=null&&(e.exports=x),Je=t!==null?t:this,Je.chroma=x,x.version="1.4.1",d={},u=[],f=!1,n=function(){function E(){var F,U,X,Q,fe,we,Se,ze,Fe;for(we=this,U=[],ze=0,Q=arguments.length;ze<Q;ze++)F=arguments[ze],F!=null&&U.push(F);if(U.length>1&&(Se=U[U.length-1]),d[Se]!=null)we._rgb=w(d[Se](ct(U.slice(0,-1))));else{for(f||(u=u.sort(function(Ke,Le){return Le.p-Ke.p}),f=!0),Fe=0,fe=u.length;Fe<fe&&(X=u[Fe],Se=X.test.apply(X,U),!Se);Fe++);Se&&(we._rgb=w(d[Se].apply(d,U)))}we._rgb==null&&console.warn("unknown format: "+U),we._rgb==null&&(we._rgb=[0,0,0]),we._rgb.length===3&&we._rgb.push(1)}return E.prototype.toString=function(){return this.hex()},E}(),x._input=d;/**
	ColorBrewer colors for chroma.js

	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
	Pennsylvania State University.

	Licensed under the Apache License, Version 2.0 (the "License"); 
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at	
	http://www.apache.org/licenses/LICENSE-2.0

	Unless required by applicable law or agreed to in writing, software distributed
	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
	CONDITIONS OF ANY KIND, either express or implied. See the License for the
	specific language governing permissions and limitations under the License.

    @preserve
 */x.brewer=_={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var E,F;F=[];for(E in _)F.push(_[E.toLowerCase()]=_[E]);return F}(),_t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},x.colors=_t,he=function(){var E,F,U,X,Q,fe,we,Se,ze;return F=ct(arguments),Q=F[0],E=F[1],U=F[2],Se=(Q+16)/116,we=isNaN(E)?Se:Se+E/500,ze=isNaN(U)?Se:Se-U/200,Se=i.Yn*ae(Se),we=i.Xn*ae(we),ze=i.Zn*ae(ze),fe=ie(3.2404542*we-1.5371385*Se-.4985314*ze),X=ie(-.969266*we+1.8760108*Se+.041556*ze),U=ie(.0556434*we-.2040259*Se+1.0572252*ze),[fe,X,U,F.length>3?F[3]:1]},ie=function(E){return 255*(E<=.00304?12.92*E:1.055*pe(E,1/2.4)-.055)},ae=function(E){return E>i.t1?E*E*E:i.t2*(E-i.t0)},i={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},L=function(){var E,F,U,X,Q,fe,we,Se;return X=ct(arguments),U=X[0],F=X[1],E=X[2],Q=Xe(U,F,E),fe=Q[0],we=Q[1],Se=Q[2],[116*we-16,500*(fe-we),200*(we-Se)]},He=function(E){return(E/=255)<=.04045?E/12.92:pe((E+.055)/1.055,2.4)},xe=function(E){return E>i.t3?pe(E,1/3):E/i.t2+i.t0},Xe=function(){var E,F,U,X,Q,fe,we;return X=ct(arguments),U=X[0],F=X[1],E=X[2],U=He(U),F=He(F),E=He(E),Q=xe((.4124564*U+.3575761*F+.1804375*E)/i.Xn),fe=xe((.2126729*U+.7151522*F+.072175*E)/i.Yn),we=xe((.0193339*U+.119192*F+.9503041*E)/i.Zn),[Q,fe,we]},x.lab=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["lab"]),function(){})},d.lab=he,n.prototype.lab=function(){return L(this._rgb)},v=function(E){var F,U,X,Q,fe,we,Se,ze,Fe,Ke,Le;return E=function(){var Me,Re,qe;for(qe=[],Re=0,Me=E.length;Re<Me;Re++)Q=E[Re],qe.push(x(Q));return qe}(),E.length===2?(Fe=function(){var Me,Re,qe;for(qe=[],Re=0,Me=E.length;Re<Me;Re++)Q=E[Re],qe.push(Q.lab());return qe}(),fe=Fe[0],we=Fe[1],F=function(Me){var Re,qe;return qe=function(){var nt,ft;for(ft=[],Re=nt=0;nt<=2;Re=++nt)ft.push(fe[Re]+Me*(we[Re]-fe[Re]));return ft}(),x.lab.apply(x,qe)}):E.length===3?(Ke=function(){var Me,Re,qe;for(qe=[],Re=0,Me=E.length;Re<Me;Re++)Q=E[Re],qe.push(Q.lab());return qe}(),fe=Ke[0],we=Ke[1],Se=Ke[2],F=function(Me){var Re,qe;return qe=function(){var nt,ft;for(ft=[],Re=nt=0;nt<=2;Re=++nt)ft.push((1-Me)*(1-Me)*fe[Re]+2*(1-Me)*Me*we[Re]+Me*Me*Se[Re]);return ft}(),x.lab.apply(x,qe)}):E.length===4?(Le=function(){var Me,Re,qe;for(qe=[],Re=0,Me=E.length;Re<Me;Re++)Q=E[Re],qe.push(Q.lab());return qe}(),fe=Le[0],we=Le[1],Se=Le[2],ze=Le[3],F=function(Me){var Re,qe;return qe=function(){var nt,ft;for(ft=[],Re=nt=0;nt<=2;Re=++nt)ft.push((1-Me)*(1-Me)*(1-Me)*fe[Re]+3*(1-Me)*(1-Me)*Me*we[Re]+3*(1-Me)*Me*Me*Se[Re]+Me*Me*Me*ze[Re]);return ft}(),x.lab.apply(x,qe)}):E.length===5&&(U=v(E.slice(0,3)),X=v(E.slice(2,5)),F=function(Me){return Me<.5?U(Me*2):X((Me-.5)*2)}),F},x.bezier=function(E){var F;return F=v(E),F.scale=function(){return x.scale(F)},F},x.cubehelix=function(E,F,U,X,Q){var fe,we,Se;return E==null&&(E=300),F==null&&(F=-1.5),U==null&&(U=1),X==null&&(X=1),Q==null&&(Q=[0,1]),fe=0,et(Q)==="array"?we=Q[1]-Q[0]:(we=0,Q=[Q,Q]),Se=function(ze){var Fe,Ke,Le,Me,Re,qe,nt,ft,pt;return Fe=l*((E+120)/360+F*ze),nt=pe(Q[0]+we*ze,X),qe=fe!==0?U[0]+ze*fe:U,Ke=qe*nt*(1-nt)/2,Me=A(Fe),pt=mt(Fe),ft=nt+Ke*(-.14861*Me+1.78277*pt),Re=nt+Ke*(-.29227*Me-.90649*pt),Le=nt+Ke*(1.97294*Me),x(w([ft*255,Re*255,Le*255,1]))},Se.start=function(ze){return ze==null?E:(E=ze,Se)},Se.rotations=function(ze){return ze==null?F:(F=ze,Se)},Se.gamma=function(ze){return ze==null?X:(X=ze,Se)},Se.hue=function(ze){return ze==null?U:(U=ze,et(U)==="array"?(fe=U[1]-U[0],fe===0&&(U=U[1])):fe=0,Se)},Se.lightness=function(ze){return ze==null?Q:(et(ze)==="array"?(Q=ze,we=ze[1]-ze[0]):(Q=[ze,ze],we=0),Se)},Se.scale=function(){return x.scale(Se)},Se.hue(U),Se},x.random=function(){var E,F,U;for(F="0123456789abcdef",E="#",U=0;U<6;++U)E+=F.charAt(B(Math.random()*16));return new n(E)},p=[],J=function(E,F,U,X){var Q,fe,we,Se;for(U==null&&(U=.5),X==null&&(X="rgb"),et(E)!=="object"&&(E=x(E)),et(F)!=="object"&&(F=x(F)),we=0,fe=p.length;we<fe;we++)if(Q=p[we],X===Q[0]){Se=Q[1](E,F,U,X);break}if(Se==null)throw"color mode "+X+" is not supported";return Se.alpha(E.alpha()+U*(F.alpha()-E.alpha()))},x.interpolate=J,n.prototype.interpolate=function(E,F,U){return J(this,E,F,U)},x.mix=J,n.prototype.mix=n.prototype.interpolate,d.rgb=function(){var E,F,U,X;F=ct(arguments),U=[];for(E in F)X=F[E],U.push(X);return U},x.rgb=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["rgb"]),function(){})},n.prototype.rgb=function(E){return E==null&&(E=!0),E?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},n.prototype.rgba=function(E){return E==null&&(E=!0),E?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},u.push({p:3,test:function(E){var F;if(F=ct(arguments),et(F)==="array"&&F.length===3||F.length===4&&et(F[3])==="number"&&F[3]>=0&&F[3]<=1)return"rgb"}}),d.lrgb=d.rgb,Z=function(E,F,U,X){var Q,fe;return Q=E._rgb,fe=F._rgb,new n(ut(pe(Q[0],2)*(1-U)+pe(fe[0],2)*U),ut(pe(Q[1],2)*(1-U)+pe(fe[1],2)*U),ut(pe(Q[2],2)*(1-U)+pe(fe[2],2)*U),X)},c=function(E){var F,U,X,Q,fe,we;for(U=1/E.length,we=[0,0,0,0],Q=0,X=E.length;Q<X;Q++)F=E[Q],fe=F._rgb,we[0]+=pe(fe[0],2)*U,we[1]+=pe(fe[1],2)*U,we[2]+=pe(fe[2],2)*U,we[3]+=fe[3]*U;return we[0]=ut(we[0]),we[1]=ut(we[1]),we[2]=ut(we[2]),we[3]>1&&(we[3]=1),new n(w(we))},p.push(["lrgb",Z]),x.average=function(E,F){var U,X,Q,fe,we,Se,ze,Fe,Ke,Le,Me,Re,qe;if(F==null&&(F="rgb"),Ke=E.length,E=E.map(function(nt){return x(nt)}),ze=E.splice(0,1)[0],F==="lrgb")return c(E);Re=ze.get(F),fe=[],we=0,Se=0;for(Fe in Re)Re[Fe]=Re[Fe]||0,fe.push(isNaN(Re[Fe])?0:1),F.charAt(Fe)==="h"&&!isNaN(Re[Fe])&&(U=Re[Fe]/180*o,we+=A(U),Se+=mt(U));for(X=ze.alpha(),Me=0,Le=E.length;Me<Le;Me++){Q=E[Me],qe=Q.get(F),X+=Q.alpha();for(Fe in Re)isNaN(qe[Fe])||(fe[Fe]+=1,F.charAt(Fe)==="h"?(U=qe[Fe]/180*o,we+=A(U),Se+=mt(U)):Re[Fe]+=qe[Fe])}for(Fe in Re)if(F.charAt(Fe)==="h"){for(U=g(Se/fe[Fe],we/fe[Fe])/o*180;U<0;)U+=360;for(;U>=360;)U-=360;Re[Fe]=U}else Re[Fe]=Re[Fe]/fe[Fe];return x(Re,F).alpha(X/Ke)},P=function(E){var F,U,X,Q,fe,we;if(E.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(E.length===4||E.length===7)&&(E=E.substr(1)),E.length===3&&(E=E.split(""),E=E[0]+E[0]+E[1]+E[1]+E[2]+E[2]),we=parseInt(E,16),Q=we>>16,X=we>>8&255,U=we&255,[Q,X,U,1];if(E.match(/^#?([A-Fa-f0-9]{8})$/))return E.length===9&&(E=E.substr(1)),we=parseInt(E,16),Q=we>>24&255,X=we>>16&255,U=we>>8&255,F=Ye((we&255)/255*100)/100,[Q,X,U,F];if(d.css!=null&&(fe=d.css(E)))return fe;throw"unknown color: "+E},Ae=function(E,F){var U,X,Q,fe,we,Se,ze;return F==null&&(F="auto"),we=E[0],Q=E[1],X=E[2],U=E[3],F==="auto"&&(F=U<1?"rgba":"rgb"),we=Math.round(we),Q=Math.round(Q),X=Math.round(X),ze=we<<16|Q<<8|X,Se="000000"+ze.toString(16),Se=Se.substr(Se.length-6),fe="0"+Ye(U*255).toString(16),fe=fe.substr(fe.length-2),"#"+function(){switch(F.toLowerCase()){case"rgba":return Se+fe;case"argb":return fe+Se;default:return Se}}()},d.hex=function(E){return P(E)},x.hex=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["hex"]),function(){})},n.prototype.hex=function(E){return E==null&&(E="auto"),Ae(this._rgb,E)},u.push({p:4,test:function(E){if(arguments.length===1&&et(E)==="string")return"hex"}}),N=function(){var E,F,U,X,Q,fe,we,Se,ze,Fe,Ke,Le,Me,Re;if(E=ct(arguments),Q=E[0],Ke=E[1],we=E[2],Ke===0)ze=X=F=we*255;else{for(Re=[0,0,0],U=[0,0,0],Me=we<.5?we*(1+Ke):we+Ke-we*Ke,Le=2*we-Me,Q/=360,Re[0]=Q+1/3,Re[1]=Q,Re[2]=Q-1/3,fe=Se=0;Se<=2;fe=++Se)Re[fe]<0&&(Re[fe]+=1),Re[fe]>1&&(Re[fe]-=1),6*Re[fe]<1?U[fe]=Le+(Me-Le)*6*Re[fe]:2*Re[fe]<1?U[fe]=Me:3*Re[fe]<2?U[fe]=Le+(Me-Le)*(2/3-Re[fe])*6:U[fe]=Le;Fe=[Ye(U[0]*255),Ye(U[1]*255),Ye(U[2]*255)],ze=Fe[0],X=Fe[1],F=Fe[2]}return E.length>3?[ze,X,F,E[3]]:[ze,X,F]},j=function(E,F,U){var X,Q,fe,we,Se;return E!==void 0&&E.length>=3&&(we=E,E=we[0],F=we[1],U=we[2]),E/=255,F/=255,U/=255,fe=Math.min(E,F,U),ke=Math.max(E,F,U),Q=(ke+fe)/2,ke===fe?(Se=0,X=Number.NaN):Se=Q<.5?(ke-fe)/(ke+fe):(ke-fe)/(2-ke-fe),E===ke?X=(F-U)/(ke-fe):F===ke?X=2+(U-E)/(ke-fe):U===ke&&(X=4+(E-F)/(ke-fe)),X*=60,X<0&&(X+=360),[X,Se,Q]},x.hsl=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["hsl"]),function(){})},d.hsl=N,n.prototype.hsl=function(){return j(this._rgb)},H=function(){var E,F,U,X,Q,fe,we,Se,ze,Fe,Ke,Le,Me,Re,qe,nt,ft,pt;if(E=ct(arguments),Q=E[0],nt=E[1],pt=E[2],pt*=255,nt===0)ze=X=F=pt;else switch(Q===360&&(Q=0),Q>360&&(Q-=360),Q<0&&(Q+=360),Q/=60,fe=B(Q),U=Q-fe,we=pt*(1-nt),Se=pt*(1-nt*U),ft=pt*(1-nt*(1-U)),fe){case 0:Fe=[pt,ft,we],ze=Fe[0],X=Fe[1],F=Fe[2];break;case 1:Ke=[Se,pt,we],ze=Ke[0],X=Ke[1],F=Ke[2];break;case 2:Le=[we,pt,ft],ze=Le[0],X=Le[1],F=Le[2];break;case 3:Me=[we,Se,pt],ze=Me[0],X=Me[1],F=Me[2];break;case 4:Re=[ft,we,pt],ze=Re[0],X=Re[1],F=Re[2];break;case 5:qe=[pt,we,Se],ze=qe[0],X=qe[1],F=qe[2]}return[ze,X,F,E.length>3?E[3]:1]},M=function(){var E,F,U,X,Q,fe,we,Se,ze;return we=ct(arguments),fe=we[0],U=we[1],E=we[2],Q=Math.min(fe,U,E),ke=Math.max(fe,U,E),F=ke-Q,ze=ke/255,ke===0?(X=Number.NaN,Se=0):(Se=F/ke,fe===ke&&(X=(U-E)/F),U===ke&&(X=2+(E-fe)/F),E===ke&&(X=4+(fe-U)/F),X*=60,X<0&&(X+=360)),[X,Se,ze]},x.hsv=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["hsv"]),function(){})},d.hsv=H,n.prototype.hsv=function(){return M(this._rgb)},Ee=function(E){var F,U,X;return et(E)==="number"&&E>=0&&E<=16777215?(X=E>>16,U=E>>8&255,F=E&255,[X,U,F,1]):(console.warn("unknown num color: "+E),[0,0,0,1])},Te=function(){var E,F,U,X;return X=ct(arguments),U=X[0],F=X[1],E=X[2],(U<<16)+(F<<8)+E},x.num=function(E){return new n(E,"num")},n.prototype.num=function(E){return E==null&&(E="rgb"),Te(this._rgb,E)},d.num=Ee,u.push({p:1,test:function(E){if(arguments.length===1&&et(E)==="number"&&E>=0&&E<=16777215)return"num"}}),R=function(){var E,F,U,X,Q,fe,we,Se,ze,Fe,Ke,Le,Me,Re,qe,nt,ft,pt,Gt,bt;if(U=ct(arguments),Se=U[0],Q=U[1],F=U[2],Q=Q/100,we=we/100*255,E=Q*255,Q===0)Le=we=X=F;else switch(Se===360&&(Se=0),Se>360&&(Se-=360),Se<0&&(Se+=360),Se/=60,ze=B(Se),fe=Se-ze,Fe=F*(1-Q),Ke=Fe+E*(1-fe),Gt=Fe+E*fe,bt=Fe+E,ze){case 0:Me=[bt,Gt,Fe],Le=Me[0],we=Me[1],X=Me[2];break;case 1:Re=[Ke,bt,Fe],Le=Re[0],we=Re[1],X=Re[2];break;case 2:qe=[Fe,bt,Gt],Le=qe[0],we=qe[1],X=qe[2];break;case 3:nt=[Fe,Ke,bt],Le=nt[0],we=nt[1],X=nt[2];break;case 4:ft=[Gt,Fe,bt],Le=ft[0],we=ft[1],X=ft[2];break;case 5:pt=[bt,Fe,Ke],Le=pt[0],we=pt[1],X=pt[2]}return[Le,we,X,U.length>3?U[3]:1]},Ne=function(){var E,F,U,X,Q,fe,we,Se,ze;return ze=ct(arguments),Se=ze[0],Q=ze[1],F=ze[2],we=Math.min(Se,Q,F),ke=Math.max(Se,Q,F),X=ke-we,U=X*100/255,E=we/(255-X)*100,X===0?fe=Number.NaN:(Se===ke&&(fe=(Q-F)/X),Q===ke&&(fe=2+(F-Se)/X),F===ke&&(fe=4+(Se-Q)/X),fe*=60,fe<0&&(fe+=360)),[fe,U,E]},x.hcg=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["hcg"]),function(){})},d.hcg=R,n.prototype.hcg=function(){return Ne(this._rgb)},C=function(E){var F,U,X,Q,fe,we,Se,ze;if(E=E.toLowerCase(),x.colors!=null&&x.colors[E])return P(x.colors[E]);if(fe=E.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(Se=fe.slice(1,4),Q=we=0;we<=2;Q=++we)Se[Q]=+Se[Q];Se[3]=1}else if(fe=E.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(Se=fe.slice(1,5),Q=ze=0;ze<=3;Q=++ze)Se[Q]=+Se[Q];else if(fe=E.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(Se=fe.slice(1,4),Q=F=0;F<=2;Q=++F)Se[Q]=Ye(Se[Q]*2.55);Se[3]=1}else if(fe=E.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(Se=fe.slice(1,5),Q=U=0;U<=2;Q=++U)Se[Q]=Ye(Se[Q]*2.55);Se[3]=+Se[3]}else(fe=E.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(X=fe.slice(1,4),X[1]*=.01,X[2]*=.01,Se=N(X),Se[3]=1):(fe=E.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(X=fe.slice(1,4),X[1]*=.01,X[2]*=.01,Se=N(X),Se[3]=+fe[4]);return Se},$e=function(E){var F;if(F=E[3]<1?"rgba":"rgb",F==="rgb")return F+"("+E.slice(0,3).map(Ye).join(",")+")";if(F==="rgba")return F+"("+E.slice(0,3).map(Ye).join(",")+","+E[3]+")"},Ve=function(E){return Ye(E*100)/100},z=function(E,F){var U;return U=F<1?"hsla":"hsl",E[0]=Ve(E[0]||0),E[1]=Ve(E[1]*100)+"%",E[2]=Ve(E[2]*100)+"%",U==="hsla"&&(E[3]=F),U+"("+E.join(",")+")"},d.css=function(E){return C(E)},x.css=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["css"]),function(){})},n.prototype.css=function(E){if(E==null&&(E="rgb"),E.slice(0,3)==="rgb")return $e(this._rgb);if(E.slice(0,3)==="hsl")return z(this.hsl(),this.alpha())},d.named=function(E){return P(_t[E])},u.push({p:5,test:function(E){if(arguments.length===1&&_t[E]!=null)return"named"}}),n.prototype.name=function(E){var F,U;arguments.length&&(_t[E]&&(this._rgb=P(_t[E])),this._rgb[3]=1),F=this.hex("rgb");for(U in _t)if(F===_t[U])return U;return F},ye=function(){var E,F,U,X;return X=ct(arguments),U=X[0],E=X[1],F=X[2],F=F*r,[U,A(F)*E,mt(F)*E]},re=function(){var E,F,U,X,Q,fe,we,Se,ze,Fe,Ke;return U=ct(arguments),Se=U[0],Q=U[1],we=U[2],Fe=ye(Se,Q,we),E=Fe[0],F=Fe[1],X=Fe[2],Ke=he(E,F,X),ze=Ke[0],fe=Ke[1],X=Ke[2],[ze,fe,X,U.length>3?U[3]:1]},Y=function(){var E,F,U,X,Q,fe;return fe=ct(arguments),Q=fe[0],E=fe[1],F=fe[2],U=ut(E*E+F*F),X=(g(F,E)*s+360)%360,Ye(U*1e4)===0&&(X=Number.NaN),[Q,U,X]},q=function(){var E,F,U,X,Q,fe,we;return fe=ct(arguments),Q=fe[0],U=fe[1],F=fe[2],we=L(Q,U,F),X=we[0],E=we[1],F=we[2],Y(X,E,F)},x.lch=function(){var E;return E=ct(arguments),new n(E,"lch")},x.hcl=function(){var E;return E=ct(arguments),new n(E,"hcl")},d.lch=re,d.hcl=function(){var E,F,U,X;return X=ct(arguments),F=X[0],E=X[1],U=X[2],re([U,E,F])},n.prototype.lch=function(){return q(this._rgb)},n.prototype.hcl=function(){return q(this._rgb).reverse()},ve=function(E){var F,U,X,Q,fe,we,Se,ze,Fe;return E==null&&(E="rgb"),ze=ct(arguments),Se=ze[0],Q=ze[1],F=ze[2],Se=Se/255,Q=Q/255,F=F/255,fe=1-Math.max(Se,Math.max(Q,F)),X=fe<1?1/(1-fe):0,U=(1-Se-fe)*X,we=(1-Q-fe)*X,Fe=(1-F-fe)*X,[U,we,Fe,fe]},S=function(){var E,F,U,X,Q,fe,we,Se,ze;return F=ct(arguments),X=F[0],we=F[1],ze=F[2],fe=F[3],E=F.length>4?F[4]:1,fe===1?[0,0,0,E]:(Se=X>=1?0:255*(1-X)*(1-fe),Q=we>=1?0:255*(1-we)*(1-fe),U=ze>=1?0:255*(1-ze)*(1-fe),[Se,Q,U,E])},d.cmyk=function(){return S(ct(arguments))},x.cmyk=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["cmyk"]),function(){})},n.prototype.cmyk=function(){return ve(this._rgb)},d.gl=function(){var E,F,U,X,Q;for(X=(function(){var fe,we;fe=ct(arguments),we=[];for(F in fe)Q=fe[F],we.push(Q);return we}).apply(this,arguments),E=U=0;U<=2;E=++U)X[E]*=255;return X},x.gl=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["gl"]),function(){})},n.prototype.gl=function(){var E;return E=this._rgb,[E[0]/255,E[1]/255,E[2]/255,E[3]]},me=function(E,F,U){var X;return X=ct(arguments),E=X[0],F=X[1],U=X[2],E=_e(E),F=_e(F),U=_e(U),.2126*E+.7152*F+.0722*U},_e=function(E){return E/=255,E<=.03928?E/12.92:pe((E+.055)/1.055,2.4)},se=function(E,F,U,X){var Q,fe;return Q=E._rgb,fe=F._rgb,new n(Q[0]+U*(fe[0]-Q[0]),Q[1]+U*(fe[1]-Q[1]),Q[2]+U*(fe[2]-Q[2]),X)},p.push(["rgb",se]),n.prototype.luminance=function(E,F){var U,X,Q,fe,we;return F==null&&(F="rgb"),arguments.length?(fe=this._rgb,E===0?fe=[0,0,0,this._rgb[3]]:E===1?fe=[255,255,255,this[3]]:(U=me(this._rgb),X=1e-7,Q=20,we=function(Se,ze){var Fe,Ke;return Ke=Se.interpolate(ze,.5,F),Fe=Ke.luminance(),Math.abs(E-Fe)<X||!Q--?Ke:Fe>E?we(Se,Ke):we(Ke,ze)},U>E?fe=we(x("black"),this).rgba():fe=we(this,x("white")).rgba()),x(fe).alpha(this.alpha())):me(this._rgb)},Et=function(E){var F,U,X,Q;return Q=E/100,Q<66?(X=255,U=-155.25485562709179-.44596950469579133*(U=Q-2)+104.49216199393888*de(U),F=Q<20?0:-254.76935184120902+.8274096064007395*(F=Q-10)+115.67994401066147*de(F)):(X=351.97690566805693+.114206453784165*(X=Q-55)-40.25366309332127*de(X),U=325.4494125711974+.07943456536662342*(U=Q-50)-28.0852963507957*de(U),F=255),[X,U,F]},Pe=function(){var E,F,U,X,Q,fe,we,Se;for(fe=ct(arguments),Q=fe[0],fe[1],E=fe[2],X=1e3,U=4e4,F=.4;U-X>F;)Se=(U+X)*.5,we=Et(Se),we[2]/we[0]>=E/Q?U=Se:X=Se;return Ye(Se)},x.temperature=x.kelvin=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["temperature"]),function(){})},d.temperature=d.kelvin=d.K=Et,n.prototype.temperature=function(){return Pe(this._rgb)},n.prototype.kelvin=n.prototype.temperature,x.contrast=function(E,F){var U,X,Q,fe;return((Q=et(E))==="string"||Q==="number")&&(E=new n(E)),((fe=et(F))==="string"||fe==="number")&&(F=new n(F)),U=E.luminance(),X=F.luminance(),U>X?(U+.05)/(X+.05):(X+.05)/(U+.05)},x.distance=function(E,F,U){var X,Q,fe,we,Se,ze,Fe;U==null&&(U="lab"),((Se=et(E))==="string"||Se==="number")&&(E=new n(E)),((ze=et(F))==="string"||ze==="number")&&(F=new n(F)),fe=E.get(U),we=F.get(U),Fe=0;for(Q in fe)X=(fe[Q]||0)-(we[Q]||0),Fe+=X*X;return Math.sqrt(Fe)},x.deltaE=function(E,F,U,X){var Q,fe,we,Se,ze,Fe,Ke,Le,Me,Re,qe,nt,ft,pt,Gt,bt,hn,ki,Yt,tt,wt,zt,nn,$t,ln,rn,_n;for(U==null&&(U=1),X==null&&(X=1),((hn=et(E))==="string"||hn==="number")&&(E=new n(E)),((ki=et(F))==="string"||ki==="number")&&(F=new n(F)),Yt=E.lab(),Q=Yt[0],we=Yt[1],ze=Yt[2],tt=F.lab(),fe=tt[0],Se=tt[1],Fe=tt[2],Ke=ut(we*we+ze*ze),Le=ut(Se*Se+Fe*Fe),nn=Q<16?.511:.040975*Q/(1+.01765*Q),wt=.0638*Ke/(1+.0131*Ke)+.638,bt=Ke<1e-6?0:g(ze,we)*180/o;bt<0;)bt+=360;for(;bt>=360;)bt-=360;return $t=bt>=164&&bt<=345?.56+h(.2*A(o*(bt+168)/180)):.36+h(.4*A(o*(bt+35)/180)),Me=Ke*Ke*Ke*Ke,Gt=ut(Me/(Me+1900)),zt=wt*(Gt*$t+1-Gt),pt=Q-fe,ft=Ke-Le,qe=we-Se,nt=ze-Fe,Re=qe*qe+nt*nt-ft*ft,ln=pt/(U*nn),rn=ft/(X*wt),_n=zt,ut(ln*ln+rn*rn+Re/(_n*_n))},n.prototype.get=function(E){var F,U,X,Q,fe,we;return X=this,fe=E.split("."),Q=fe[0],F=fe[1],we=X[Q](),F?(U=Q.indexOf(F),U>-1?we[U]:console.warn("unknown channel "+F+" in mode "+Q)):we},n.prototype.set=function(E,F){var U,X,Q,fe,we,Se;if(Q=this,we=E.split("."),fe=we[0],U=we[1],U)if(Se=Q[fe](),X=fe.indexOf(U),X>-1)if(et(F)==="string")switch(F.charAt(0)){case"+":Se[X]+=+F;break;case"-":Se[X]+=+F;break;case"*":Se[X]*=+F.substr(1);break;case"/":Se[X]/=+F.substr(1);break;default:Se[X]=+F}else Se[X]=F;else console.warn("unknown channel "+U+" in mode "+fe);else Se=F;return x(Se,fe).alpha(Q.alpha())},n.prototype.clipped=function(){return this._rgb._clipped||!1},n.prototype.alpha=function(E){return arguments.length?x.rgb([this._rgb[0],this._rgb[1],this._rgb[2],E]):this._rgb[3]},n.prototype.darken=function(E){var F,U;return E==null&&(E=1),U=this,F=U.lab(),F[0]-=i.Kn*E,x.lab(F).alpha(U.alpha())},n.prototype.brighten=function(E){return E==null&&(E=1),this.darken(-E)},n.prototype.darker=n.prototype.darken,n.prototype.brighter=n.prototype.brighten,n.prototype.saturate=function(E){var F,U;return E==null&&(E=1),U=this,F=U.lch(),F[1]+=E*i.Kn,F[1]<0&&(F[1]=0),x.lch(F).alpha(U.alpha())},n.prototype.desaturate=function(E){return E==null&&(E=1),this.saturate(-E)},n.prototype.premultiply=function(){var E,F;return F=this.rgb(),E=this.alpha(),x(F[0]*E,F[1]*E,F[2]*E,E)},m=function(E,F,U){if(!m[U])throw"unknown blend mode "+U;return m[U](E,F)},y=function(E){return function(F,U){var X,Q;return X=x(U).rgb(),Q=x(F).rgb(),x(E(X,Q),"rgb")}},T=function(E){return function(F,U){var X,Q,fe;for(fe=[],X=Q=0;Q<=3;X=++Q)fe[X]=E(F[X],U[X]);return fe}},ee=function(E,F){return E},W=function(E,F){return E*F/255},k=function(E,F){return E>F?F:E},te=function(E,F){return E>F?E:F},yt=function(E,F){return 255*(1-(1-E/255)*(1-F/255))},ge=function(E,F){return F<128?2*E*F/255:255*(1-2*(1-E/255)*(1-F/255))},b=function(E,F){return 255*(1-(1-F/255)/(E/255))},O=function(E,F){return E===255||(E=255*(F/255)/(1-E/255),E>255)?255:E},m.normal=y(T(ee)),m.multiply=y(T(W)),m.screen=y(T(yt)),m.overlay=y(T(ge)),m.darken=y(T(k)),m.lighten=y(T(te)),m.dodge=y(T(O)),m.burn=y(T(b)),x.blend=m,x.analyze=function(E){var F,U,X,Q;for(X={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},U=0,F=E.length;U<F;U++)Q=E[U],Q!=null&&!isNaN(Q)&&(X.values.push(Q),X.sum+=Q,Q<X.min&&(X.min=Q),Q>X.max&&(X.max=Q),X.count+=1);return X.domain=[X.min,X.max],X.limits=function(fe,we){return x.limits(X,fe,we)},X},x.scale=function(E,F){var U,X,Q,fe,we,Se,ze,Fe,Ke,Le,Me,Re,qe,nt,ft,pt,Gt,bt,hn,ki,Yt;return Ke="rgb",Le=x("#ccc"),nt=0,we=[0,1],qe=[],Re=[0,0],U=!1,Q=[],Me=!1,Fe=0,ze=1,fe=!1,X={},ft=!0,Se=1,ki=function(tt){var wt,zt,nn,$t,ln,rn;if(tt==null&&(tt=["#fff","#000"]),tt!=null&&et(tt)==="string"&&x.brewer!=null&&(tt=x.brewer[tt]||x.brewer[tt.toLowerCase()]||tt),et(tt)==="array"){for(tt.length===1&&(tt=[tt[0],tt[0]]),tt=tt.slice(0),wt=nn=0,$t=tt.length-1;0<=$t?nn<=$t:nn>=$t;wt=0<=$t?++nn:--nn)zt=tt[wt],et(zt)==="string"&&(tt[wt]=x(zt));for(qe.length=0,wt=rn=0,ln=tt.length-1;0<=ln?rn<=ln:rn>=ln;wt=0<=ln?++rn:--rn)qe.push(wt/(tt.length-1))}return hn(),Q=tt},Gt=function(tt){var wt,zt;if(U!=null){for(zt=U.length-1,wt=0;wt<zt&&tt>=U[wt];)wt++;return wt-1}return 0},Yt=function(tt){return tt},bt=function(tt,wt){var zt,nn,$t,ln,rn,_n,gr,Zt;if(wt==null&&(wt=!1),isNaN(tt)||tt===null)return Le;if(wt?Zt=tt:U&&U.length>2?(zt=Gt(tt),Zt=zt/(U.length-2)):ze!==Fe?Zt=(tt-Fe)/(ze-Fe):Zt=1,wt||(Zt=Yt(Zt)),Se!==1&&(Zt=pe(Zt,Se)),Zt=Re[0]+Zt*(1-Re[0]-Re[1]),Zt=Math.min(1,Math.max(0,Zt)),ln=Math.floor(Zt*1e4),ft&&X[ln])nn=X[ln];else{if(et(Q)==="array")for($t=rn=0,gr=qe.length-1;0<=gr?rn<=gr:rn>=gr;$t=0<=gr?++rn:--rn){if(_n=qe[$t],Zt<=_n){nn=Q[$t];break}if(Zt>=_n&&$t===qe.length-1){nn=Q[$t];break}if(Zt>_n&&Zt<qe[$t+1]){Zt=(Zt-_n)/(qe[$t+1]-_n),nn=x.interpolate(Q[$t],Q[$t+1],Zt,Ke);break}}else et(Q)==="function"&&(nn=Q(Zt));ft&&(X[ln]=nn)}return nn},hn=function(){return X={}},ki(E),pt=function(tt){var wt;return wt=x(bt(tt)),Me&&wt[Me]?wt[Me]():wt},pt.classes=function(tt){var wt;return tt!=null?(et(tt)==="array"?(U=tt,we=[tt[0],tt[tt.length-1]]):(wt=x.analyze(we),tt===0?U=[wt.min,wt.max]:U=x.limits(wt,"e",tt)),pt):U},pt.domain=function(tt){var wt,zt,nn,$t,ln,rn,_n;if(!arguments.length)return we;if(Fe=tt[0],ze=tt[tt.length-1],qe=[],nn=Q.length,tt.length===nn&&Fe!==ze)for(ln=0,$t=tt.length;ln<$t;ln++)zt=tt[ln],qe.push((zt-Fe)/(ze-Fe));else for(wt=_n=0,rn=nn-1;0<=rn?_n<=rn:_n>=rn;wt=0<=rn?++_n:--_n)qe.push(wt/(nn-1));return we=[Fe,ze],pt},pt.mode=function(tt){return arguments.length?(Ke=tt,hn(),pt):Ke},pt.range=function(tt,wt){return ki(tt,wt),pt},pt.out=function(tt){return Me=tt,pt},pt.spread=function(tt){return arguments.length?(nt=tt,pt):nt},pt.correctLightness=function(tt){return tt==null&&(tt=!0),fe=tt,hn(),fe?Yt=function(wt){var zt,nn,$t,ln,rn,_n,gr,Zt,Tn;for(zt=bt(0,!0).lab()[0],nn=bt(1,!0).lab()[0],gr=zt>nn,$t=bt(wt,!0).lab()[0],rn=zt+(nn-zt)*wt,ln=$t-rn,Zt=0,Tn=1,_n=20;Math.abs(ln)>.01&&_n-- >0;)(function(){return gr&&(ln*=-1),ln<0?(Zt=wt,wt+=(Tn-wt)*.5):(Tn=wt,wt+=(Zt-wt)*.5),$t=bt(wt,!0).lab()[0],ln=$t-rn})();return wt}:Yt=function(wt){return wt},pt},pt.padding=function(tt){return tt!=null?(et(tt)==="number"&&(tt=[tt,tt]),Re=tt,pt):Re},pt.colors=function(tt,wt){var zt,nn,$t,ln,rn,_n,gr,Zt;if(arguments.length<2&&(wt="hex"),rn=[],arguments.length===0)rn=Q.slice(0);else if(tt===1)rn=[pt(.5)];else if(tt>1)nn=we[0],zt=we[1]-nn,rn=(function(){_n=[];for(var Tn=0;0<=tt?Tn<tt:Tn>tt;0<=tt?Tn++:Tn--)_n.push(Tn);return _n}).apply(this).map(function(Tn){return pt(nn+Tn/(tt-1)*zt)});else{if(E=[],gr=[],U&&U.length>2)for($t=Zt=1,ln=U.length;1<=ln?Zt<ln:Zt>ln;$t=1<=ln?++Zt:--Zt)gr.push((U[$t-1]+U[$t])*.5);else gr=we;rn=gr.map(function(Tn){return pt(Tn)})}return x[wt]&&(rn=rn.map(function(Tn){return Tn[wt]()})),rn},pt.cache=function(tt){return tt!=null?(ft=tt,pt):ft},pt.gamma=function(tt){return tt!=null?(Se=tt,pt):Se},pt.nodata=function(tt){return tt!=null?(Le=x(tt),pt):Le},pt},x.scales==null&&(x.scales={}),x.scales.cool=function(){return x.scale([x.hsl(180,1,.9),x.hsl(250,.7,.4)])},x.scales.hot=function(){return x.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},x.analyze=function(E,F,U){var X,Q,fe,we,Se,ze,Fe;if(Se={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},U==null&&(U=function(){return!0}),X=function(Ke){Ke!=null&&!isNaN(Ke)&&(Se.values.push(Ke),Se.sum+=Ke,Ke<Se.min&&(Se.min=Ke),Ke>Se.max&&(Se.max=Ke),Se.count+=1)},Fe=function(Ke,Le){if(U(Ke,Le))return F!=null&&et(F)==="function"?X(F(Ke)):F!=null&&et(F)==="string"||et(F)==="number"?X(Ke[F]):X(Ke)},et(E)==="array")for(we=0,fe=E.length;we<fe;we++)ze=E[we],Fe(ze);else for(Q in E)ze=E[Q],Fe(ze,Q);return Se.domain=[Se.min,Se.max],Se.limits=function(Ke,Le){return x.limits(Se,Ke,Le)},Se},x.limits=function(E,F,U){var X,Q,fe,we,Se,ze,Fe,Ke,Le,Me,Re,qe,nt,ft,pt,Gt,bt,hn,ki,Yt,tt,wt,zt,nn,$t,ln,rn,_n,gr,Zt,Tn,fo,Lr,Xi,po,ho,Qo,ai,ps,hs,vr,mo,Ks,ms,Ia,Bo,Nl,zc,gs,Zs,vs,ea,nf,No,Fl;if(F==null&&(F="equal"),U==null&&(U=7),et(E)==="array"&&(E=x.analyze(E)),$t=E.min,ke=E.max,E.sum,No=E.values.sort(function(Fd,rf){return Fd-rf}),U===1)return[$t,ke];if(zt=[],F.substr(0,1)==="c"&&(zt.push($t),zt.push(ke)),F.substr(0,1)==="e"){for(zt.push($t),Yt=Tn=1,po=U-1;1<=po?Tn<=po:Tn>=po;Yt=1<=po?++Tn:--Tn)zt.push($t+Yt/U*(ke-$t));zt.push(ke)}else if(F.substr(0,1)==="l"){if($t<=0)throw"Logarithmic scales are only possible for values > 0";for(ln=Math.LOG10E*de($t),nn=Math.LOG10E*de(ke),zt.push($t),Yt=Fl=1,ho=U-1;1<=ho?Fl<=ho:Fl>=ho;Yt=1<=ho?++Fl:--Fl)zt.push(pe(10,ln+Yt/U*(nn-ln)));zt.push(ke)}else if(F.substr(0,1)==="q"){for(zt.push($t),Yt=X=1,mo=U-1;1<=mo?X<=mo:X>=mo;Yt=1<=mo?++X:--X)fo=(No.length-1)*Yt/U,Lr=B(fo),Lr===fo?zt.push(No[Lr]):(Xi=fo-Lr,zt.push(No[Lr]*(1-Xi)+No[Lr+1]*Xi));zt.push(ke)}else if(F.substr(0,1)==="k"){for(_n=No.length,ft=new Array(_n),hn=new Array(U),Zs=!0,gr=0,Gt=null,Gt=[],Gt.push($t),Yt=Q=1,Ks=U-1;1<=Ks?Q<=Ks:Q>=Ks;Yt=1<=Ks?++Q:--Q)Gt.push($t+Yt/U*(ke-$t));for(Gt.push(ke);Zs;){for(tt=fe=0,ms=U-1;0<=ms?fe<=ms:fe>=ms;tt=0<=ms?++fe:--fe)hn[tt]=0;for(Yt=we=0,Ia=_n-1;0<=Ia?we<=Ia:we>=Ia;Yt=0<=Ia?++we:--we){for(nf=No[Yt],rn=Number.MAX_VALUE,tt=Se=0,Bo=U-1;0<=Bo?Se<=Bo:Se>=Bo;tt=0<=Bo?++Se:--Se)ki=h(Gt[tt]-nf),ki<rn&&(rn=ki,pt=tt);hn[pt]++,ft[Yt]=pt}for(Zt=new Array(U),tt=ze=0,Nl=U-1;0<=Nl?ze<=Nl:ze>=Nl;tt=0<=Nl?++ze:--ze)Zt[tt]=null;for(Yt=Fe=0,zc=_n-1;0<=zc?Fe<=zc:Fe>=zc;Yt=0<=zc?++Fe:--Fe)bt=ft[Yt],Zt[bt]===null?Zt[bt]=No[Yt]:Zt[bt]+=No[Yt];for(tt=Ke=0,gs=U-1;0<=gs?Ke<=gs:Ke>=gs;tt=0<=gs?++Ke:--Ke)Zt[tt]*=1/hn[tt];for(Zs=!1,tt=Le=0,Qo=U-1;0<=Qo?Le<=Qo:Le>=Qo;tt=0<=Qo?++Le:--Le)if(Zt[tt]!==Gt[Yt]){Zs=!0;break}Gt=Zt,gr++,gr>200&&(Zs=!1)}for(wt={},tt=Me=0,ai=U-1;0<=ai?Me<=ai:Me>=ai;tt=0<=ai?++Me:--Me)wt[tt]=[];for(Yt=Re=0,ps=_n-1;0<=ps?Re<=ps:Re>=ps;Yt=0<=ps?++Re:--Re)bt=ft[Yt],wt[bt].push(No[Yt]);for(vs=[],tt=qe=0,hs=U-1;0<=hs?qe<=hs:qe>=hs;tt=0<=hs?++qe:--qe)vs.push(wt[tt][0]),vs.push(wt[tt][wt[tt].length-1]);for(vs=vs.sort(function(Fd,rf){return Fd-rf}),zt.push(vs[0]),Yt=nt=1,vr=vs.length-1;nt<=vr;Yt=nt+=2)ea=vs[Yt],!isNaN(ea)&&zt.indexOf(ea)===-1&&zt.push(ea)}return zt},D=function(E,F,U){var X,Q,fe,we;return X=ct(arguments),E=X[0],F=X[1],U=X[2],isNaN(E)&&(E=0),E/=360,E<1/3?(Q=(1-F)/3,we=(1+F*A(l*E)/A(a-l*E))/3,fe=1-(Q+we)):E<2/3?(E-=1/3,we=(1-F)/3,fe=(1+F*A(l*E)/A(a-l*E))/3,Q=1-(we+fe)):(E-=2/3,fe=(1-F)/3,Q=(1+F*A(l*E)/A(a-l*E))/3,we=1-(fe+Q)),we=le(U*we*3),fe=le(U*fe*3),Q=le(U*Q*3),[we*255,fe*255,Q*255,X.length>3?X[3]:1]},Oe=function(){var E,F,U,X,Q,fe,we,Se;return we=ct(arguments),fe=we[0],F=we[1],E=we[2],l=Math.PI*2,fe/=255,F/=255,E/=255,Q=Math.min(fe,F,E),X=(fe+F+E)/3,Se=1-Q/X,Se===0?U=0:(U=(fe-F+(fe-E))/2,U/=Math.sqrt((fe-F)*(fe-F)+(fe-E)*(F-E)),U=Math.acos(U),E>F&&(U=l-U),U/=l),[U*360,Se,X]},x.hsi=function(){return function(E,F,U){U.prototype=E.prototype;var X=new U,Q=E.apply(X,F);return Object(Q)===Q?Q:X}(n,ue.call(arguments).concat(["hsi"]),function(){})},d.hsi=D,n.prototype.hsi=function(){return Oe(this._rgb)},ne=function(E,F,U,X){var Q,fe,we,Se,ze,Fe,Ke,Le,Me,Re,qe,nt;return X==="hsl"?(qe=E.hsl(),nt=F.hsl()):X==="hsv"?(qe=E.hsv(),nt=F.hsv()):X==="hcg"?(qe=E.hcg(),nt=F.hcg()):X==="hsi"?(qe=E.hsi(),nt=F.hsi()):(X==="lch"||X==="hcl")&&(X="hcl",qe=E.hcl(),nt=F.hcl()),X.substr(0,1)==="h"&&(we=qe[0],Me=qe[1],Fe=qe[2],Se=nt[0],Re=nt[1],Ke=nt[2]),!isNaN(we)&&!isNaN(Se)?(Se>we&&Se-we>180?Q=Se-(we+360):Se<we&&we-Se>180?Q=Se+360-we:Q=Se-we,fe=we+U*Q):isNaN(we)?isNaN(Se)?fe=Number.NaN:(fe=Se,(Fe===1||Fe===0)&&X!=="hsv"&&(Le=Re)):(fe=we,(Ke===1||Ke===0)&&X!=="hsv"&&(Le=Me)),Le==null&&(Le=Me+U*(Re-Me)),ze=Fe+U*(Ke-Fe),x[X](fe,Le,ze)},p=p.concat(function(){var E,F,U,X;for(U=["hsv","hsl","hsi","hcl","lch","hcg"],X=[],F=0,E=U.length;F<E;F++)be=U[F],X.push([be,ne]);return X}()),ce=function(E,F,U,X){var Q,fe;return Q=E.num(),fe=F.num(),x.num(Q+(fe-Q)*U,"num")},p.push(["num",ce]),oe=function(E,F,U,X){var Q,fe;return Q=E.lab(),fe=F.lab(),new n(Q[0]+U*(fe[0]-Q[0]),Q[1]+U*(fe[1]-Q[1]),Q[2]+U*(fe[2]-Q[2]),X)},p.push(["lab",oe])}).call(Ce)})(VA,VA.exports);var Vit=VA.exports,noe={exports:{}};(function(e){/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */(function(t){function n(a,s,l,c,u){this._listener=s,this._isOnce=l,this.context=c,this._signal=a,this._priority=u||0}n.prototype={active:!0,params:null,execute:function(a){var s,l;return this.active&&this._listener&&(l=this.params?this.params.concat(a):a,s=this._listener.apply(this.context,l),this._isOnce&&this.detach()),s},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};function r(a,s){if(typeof a!="function")throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",s))}function i(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){i.prototype.dispatch.apply(a,arguments)}}i.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,s,l,c){var u=this._indexOfListener(a,l),f;if(u!==-1){if(f=this._bindings[u],f.isOnce()!==s)throw new Error("You cannot add"+(s?"":"Once")+"() then add"+(s?"Once":"")+"() the same listener without removing the relationship first.")}else f=new n(this,a,s,l,c),this._addBinding(f);return this.memorize&&this._prevParams&&f.execute(this._prevParams),f},_addBinding:function(a){var s=this._bindings.length;do--s;while(this._bindings[s]&&a._priority<=this._bindings[s]._priority);this._bindings.splice(s+1,0,a)},_indexOfListener:function(a,s){for(var l=this._bindings.length,c;l--;)if(c=this._bindings[l],c._listener===a&&c.context===s)return l;return-1},has:function(a,s){return this._indexOfListener(a,s)!==-1},add:function(a,s,l){return r(a,"add"),this._registerListener(a,!1,s,l)},addOnce:function(a,s,l){return r(a,"addOnce"),this._registerListener(a,!0,s,l)},remove:function(a,s){r(a,"remove");var l=this._indexOfListener(a,s);return l!==-1&&(this._bindings[l]._destroy(),this._bindings.splice(l,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var s=Array.prototype.slice.call(arguments),l=this._bindings.length,c;if(this.memorize&&(this._prevParams=s),!!l){c=this._bindings.slice(),this._shouldPropagate=!0;do l--;while(c[l]&&this._shouldPropagate&&c[l].execute(s)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var o=i;o.Signal=i,e.exports?e.exports=o:t.signals=o})(Ce)})(noe);var en=noe.exports,Vo={};(function(e){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(s){return i(a(s),arguments)}function r(s,l){return n.apply(null,[s].concat(l||[]))}function i(s,l){var c=1,u=s.length,f,d="",p,h,g,v,m,y,_,b;for(p=0;p<u;p++)if(typeof s[p]=="string")d+=s[p];else if(typeof s[p]=="object"){if(g=s[p],g.keys)for(f=l[c],h=0;h<g.keys.length;h++){if(f==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[h],g.keys[h-1]));f=f[g.keys[h]]}else g.param_no?f=l[g.param_no]:f=l[c++];if(t.not_type.test(g.type)&&t.not_primitive.test(g.type)&&f instanceof Function&&(f=f()),t.numeric_arg.test(g.type)&&typeof f!="number"&&isNaN(f))throw new TypeError(n("[sprintf] expecting number but found %T",f));switch(t.number.test(g.type)&&(_=f>=0),g.type){case"b":f=parseInt(f,10).toString(2);break;case"c":f=String.fromCharCode(parseInt(f,10));break;case"d":case"i":f=parseInt(f,10);break;case"j":f=JSON.stringify(f,null,g.width?parseInt(g.width):0);break;case"e":f=g.precision?parseFloat(f).toExponential(g.precision):parseFloat(f).toExponential();break;case"f":f=g.precision?parseFloat(f).toFixed(g.precision):parseFloat(f);break;case"g":f=g.precision?String(Number(f.toPrecision(g.precision))):parseFloat(f);break;case"o":f=(parseInt(f,10)>>>0).toString(8);break;case"s":f=String(f),f=g.precision?f.substring(0,g.precision):f;break;case"t":f=String(!!f),f=g.precision?f.substring(0,g.precision):f;break;case"T":f=Object.prototype.toString.call(f).slice(8,-1).toLowerCase(),f=g.precision?f.substring(0,g.precision):f;break;case"u":f=parseInt(f,10)>>>0;break;case"v":f=f.valueOf(),f=g.precision?f.substring(0,g.precision):f;break;case"x":f=(parseInt(f,10)>>>0).toString(16);break;case"X":f=(parseInt(f,10)>>>0).toString(16).toUpperCase();break}t.json.test(g.type)?d+=f:(t.number.test(g.type)&&(!_||g.sign)?(b=_?"+":"-",f=f.toString().replace(t.sign,"")):b="",m=g.pad_char?g.pad_char==="0"?"0":g.pad_char.charAt(1):" ",y=g.width-(b+f).length,v=g.width&&y>0?m.repeat(y):"",d+=g.align?b+f+v:m==="0"?b+v+f:v+b+f)}return d}var o=Object.create(null);function a(s){if(o[s])return o[s];for(var l=s,c,u=[],f=0;l;){if((c=t.text.exec(l))!==null)u.push(c[0]);else if((c=t.modulo.exec(l))!==null)u.push("%");else if((c=t.placeholder.exec(l))!==null){if(c[2]){f|=1;var d=[],p=c[2],h=[];if((h=t.key.exec(p))!==null)for(d.push(h[1]);(p=p.substring(h[0].length))!=="";)if((h=t.key_access.exec(p))!==null)d.push(h[1]);else if((h=t.index_access.exec(p))!==null)d.push(h[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=d}else f|=2;if(f===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");l=l.substring(c[0].length)}return o[s]=u}e.sprintf=n,e.vsprintf=r,typeof window<"u"&&(window.sprintf=n,window.vsprintf=r)})()})(Vo);var iV,nR,oV,aV,sV;function Hit(e){if(typeof window<"u"){var t=new RegExp(e+"=([^&#=]*)").exec(window.location.search);return t?decodeURIComponent(t[1]):void 0}}function K(e,t){return e!==void 0?e:t}function fs(e,t){var n=Object.assign({},e);for(var r in t)e[r]===void 0&&(n[r]=t[r]);return n}function roe(e,t){for(var n in t){var r=t[n];r!==void 0&&(e[n]=r)}return e}function TN(){var e=window.location.protocol;return e.match(/http(s)?:/gi)===null?"http:":e}function ioe(){if(typeof window>"u")return!1;var e=window.navigator.userAgent;return/Opera|OPR/.test(e)?"Opera":/Chrome/i.test(e)?"Chrome":/Firefox/i.test(e)?"Firefox":/Mobile(\/.*)? Safari/i.test(e)?"Mobile Safari":/MSIE/i.test(e)?"Internet Explorer":!!/Safari/i.test(e)&&"Safari"}function lV(e){window.open(e,"_blank")||(window.location.href=e)}function Git(e,t){if(t===void 0&&(t="download"),e){var n=ioe()==="Safari",r=/CriOS\/[\d]+/.test(window.navigator.userAgent),i=document.createElement("a");if(typeof navigator<"u"&&navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(e,t);else if((n||r)&&FileReader)if(e instanceof Blob){var o=new FileReader;o.onloadend=function(){s(o.result)},o.readAsDataURL(e)}else s(e);else{var a=!1;e instanceof Blob&&(e=URL.createObjectURL(e),a=!0),"download"in i?(i.style.display="hidden",document.body.appendChild(i),i.href=e,i.download=t,i.target="_blank",i.click(),document.body.removeChild(i)):lV(e),a&&window.URL.revokeObjectURL(e)}}function s(l){lV(r?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"))}}function Wit(e,t){return e<t?-1:e>t?1:0}function fp(e,t,n){n===void 0&&(n=Wit);for(var r=0,i=e.length-1;r<=i;){var o=r+i>>1,a=n(t,e[o]);if(a>0)r=o+1;else{if(!(a<0))return o;i=o-1}}return-r-1}function ON(e,t,n){var r=function(o,a){var s=o.length-1;if(o[s]<a)return-1;for(var l=0;l<=s;){var c=l+s>>1;o[c]>=a?s=c-1:l=c+1}return s+1}(e,t),i=function(o,a){if(o[0]>a)return-1;for(var s=0,l=o.length-1;s<=l;){var c=s+l>>1;o[c]>a?l=c-1:s=c+1}return s-1}(e,n);return r===-1||i===-1||r>i?0:i-r+1}function IN(e){return e.sort().filter(function(t,n,r){return n===0||t!==r[n-1]})}function HA(e){var t=28672;if(e.length>t){for(var n=[],r=0;r<e.length;r+=t)n.push(String.fromCharCode.apply(null,e.subarray(r,r+t)));return n.join("")}return String.fromCharCode.apply(null,e)}function ooe(e,t){switch(e){case"int8":return new Int8Array(t);case"int16":return new Int16Array(t);case"int32":return new Int32Array(t);case"uint8":return new Uint8Array(t);case"uint16":return new Uint16Array(t);case"uint32":return new Uint32Array(t);case"float32":return new Float32Array(t);default:throw new Error("arrayType unknown: "+e)}}function Lc(e,t){return new(t>65535?Uint32Array:Uint16Array)(e)}function E0(e){return e.buffer&&e.buffer instanceof ArrayBuffer?e.buffer:e}function iT(e,t){return e===void 0?e=new t:Array.isArray(e)&&(e=new t().fromArray(e)),e}function Dp(e){return iT(e,V)}function Gy(e){return iT(e,lt)}function d$(e){return iT(e,lr)}function rR(e){return t=e,n=Float32Array,t instanceof n?t:new n(t);var t,n}function cV(e){return K(e,"").toString().toLowerCase()}typeof window<"u"&&function(){window.console=window.console||{};for(var e,t,n=window.console,r={},i=function(){},o="memory".split(","),a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)n[e]||(n[e]=r);for(;t=a.pop();)n[t]||(n[t]=i)}(),typeof window>"u"||window.HTMLCanvasElement===void 0||window.HTMLCanvasElement.prototype.toBlob||Object.defineProperty(window.HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,n){for(var r=window.atob(this.toDataURL(t,n).split(",")[1]),i=r.length,o=i>>2,a=new Uint8Array(i),s=new Uint32Array(a.buffer,0,o),l=0,c=0;l<o;l++)s[l]=r.charCodeAt(c++)|r.charCodeAt(c++)<<8|r.charCodeAt(c++)<<16|r.charCodeAt(c++)<<24;for(var u=3&i;u--;)a[c]=r.charCodeAt(c++);e(new window.Blob([a],{type:t||"image/png"}))}}),Math.cbrt=Math.cbrt||function(e){var t=Math.pow(Math.abs(e),.3333333333333333);return e<0?-t:t},Math.sign||(Math.sign=function(e){return(e=+e)==0||isNaN(e)?Number(e):e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&e>-9007199254740992&&e<9007199254740992&&Math.floor(e)===e}),Number.isNaN||(Number.isNaN=function(e){return e!=e}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=arguments;if(e==null)throw new TypeError("Cannot convert first argument to object");for(var n,r=Object(e),i=!1,o=1;o<arguments.length;o++){var a=t[o];if(a!=null){for(var s=Object.keys(Object(a)),l=0,c=s.length;l<c;l++){var u=s[l];try{var f=Object.getOwnPropertyDescriptor(a,u);f!==void 0&&f.enumerable&&(r[u]=a[u])}catch(d){i||(i=!0,n=d)}}if(i)throw n}}return r}}),String.prototype.startsWith||function(){var e=function(){var r;try{var i={},o=Object.defineProperty;r=o(i,i,i)&&o}catch{}return r}(),t={}.toString,n=function(r){if(this===null)throw TypeError();var i=String(this);if(r&&t.call(r)==="[object RegExp]")throw TypeError();var o=i.length,a=String(r),s=a.length,l=arguments.length>1?arguments[1]:void 0,c=l?Number(l):0;Number.isNaN(c)&&(c=0);var u=Math.min(Math.max(c,0),o);if(s+u>o)return!1;for(var f=-1;++f<s;)if(i.charCodeAt(u+f)!==a.charCodeAt(f))return!1;return!0};e?e(String.prototype,"startsWith",{value:n,configurable:!0,writable:!0}):String.prototype.startsWith=n}(),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();(typeof t!="number"||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}),String.prototype.repeat||(String.prototype.repeat=function(e){if(this===null)throw new TypeError("can't convert "+this+" to object");var t=""+this;if(e=+e,Number.isNaN(e)&&(e=0),e<0)throw new RangeError("repeat count must be non-negative");if(e===1/0)throw new RangeError("repeat count must be less than infinity");if(e=Math.floor(e),t.length===0||e===0)return"";if(t.length*e>=1<<28)throw new RangeError("repeat count must not overflow maximum string size");for(var n="";(1&e)==1&&(n+=t),(e>>>=1)!==0;)t+=t;return n}),String.prototype.includes||(String.prototype.includes=function(e,t){return typeof t!="number"&&(t=0),!(t+e.length>this.length)&&this.indexOf(e,t)!==-1}),Array.prototype.includes||(Array.prototype.includes=function(e){if(this==null)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),n=parseInt(t.length,10)||0;if(n===0)return!1;var r,i,o=parseInt(arguments[1],10)||0;for(o>=0?r=o:(r=n+o)<0&&(r=0);r<n;){if(e===(i=t[r])||Number.isNaN(e)&&Number.isNaN(i))return!0;r++}return!1}),Array.from||(Array.from=(iV=Object.prototype.toString,nR=function(e){return typeof e=="function"||iV.call(e)==="[object Function]"},oV=Math.pow(2,53)-1,aV=function(e){var t=function(n){var r=Number(n);return isNaN(r)?0:r!==0&&isFinite(r)?(r>0?1:-1)*Math.floor(Math.abs(r)):r}(e);return Math.min(Math.max(t,0),oV)},function(e){var t=this,n=Object(e);if(e==null)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,i=arguments.length>1?arguments[1]:void 0;if(i!==void 0){if(!nR(i))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var o,a=aV(n.length),s=nR(t)?Object(new t(a)):new Array(a),l=0;l<a;)o=n[l],s[l]=i?r===void 0?i(o,l):i.call(r,o,l):o,l+=1;return s.length=a,s})),typeof window<"u"&&function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(r){var i=new Date().getTime(),o=Math.max(0,16-(i-e)),a=window.setTimeout(function(){r(i+o)},o);return e=i+o,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(r){clearTimeout(r)})}(),Function.prototype.name===void 0&&Object.defineProperty!==void 0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),typeof window<"u"&&(window.performance===void 0&&(self.performance={}),window.performance.now===void 0&&(sV=Date.now(),window.performance.now=function(){return Date.now()-sV})),Object.defineProperty!==void 0&&(Number.MAX_SAFE_INTEGER===void 0&&Object.defineProperty(Number,"MAX_SAFE_INTEGER",{enumerable:!1,configurable:!1,writable:!1,value:Math.pow(2,53)-1}),Number.MIN_SAFE_INTEGER===void 0&&Object.defineProperty(Number,"MIN_SAFE_INTEGER",{enumerable:!1,configurable:!1,writable:!1,value:-(Math.pow(2,53)-1)}));var Cl=function(e){this.name=e,this._dict={}},uV={names:{configurable:!0}};function jr(e){return .01745*e}Cl.prototype.add=function(e,t){this._dict[cV(e)]=t},Cl.prototype.get=function(e){return this._dict[cV(e)]},uV.names.get=function(){return Object.keys(this._dict)},Object.defineProperties(Cl.prototype,uV);var qit="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),E2=new Array(36);function RN(){for(var e,t=0,n=0;n<36;n++)n===8||n===13||n===18||n===23?E2[n]="-":n===14?E2[n]="4":(t<=2&&(t=33554432+16777216*Math.random()|0),e=15&t,t>>=4,E2[n]=qit[n===19?3&e|8:e]);return E2.join("")}function p$(e,t,n){return Math.max(t,Math.min(n,e))}function Ps(e,t,n){return e+(t-e)*n}function uu(e,t,n,r,i,o){var a=(n-e)*o,s=(r-t)*o,l=i*i;return(2*t-2*n+a+s)*(i*l)+(-3*t+3*n-2*a-s)*l+a*i+t}function Nx(e,t,n){var r;return r=function(i,o,a){return(i-o)/(a-o)}(n,e,t),(n=p$(r,0,1))*n*(3-2*n)}var aoe="sRGB",Xit={scale:"uniform",mode:"hcl",domain:[0,1],value:16777215,reverse:!1},kS=new ht;function zn(e,t,n){var r=n.value;return n.value=function(i,o){var a=r.bind(this,i,o)();return aoe=="linear"?(kS.set(a),kS.convertSRGBToLinear(),kS.getHex()):a},n}var Ft,yn=function(e){e===void 0&&(e={}),this.parameters=fs(e,Xit),typeof this.parameters.value=="string"&&(this.parameters.value=kS.set(this.parameters.value).getHex()),this.parameters.structure&&(this.atomProxy=this.parameters.structure.getAtomProxy())};yn.prototype.getScale=function(e){e===void 0&&(e={});var t=fs(e,this.parameters);return t.scale==="rainbow"?t.scale=["red","orange","yellow","green","blue"]:t.scale==="rwb"&&(t.scale=["red","white","blue"]),t.reverse&&(t.domain=t.domain.slice().reverse()),Vit.scale(t.scale).mode(t.mode).domain(t.domain).out("num")},yn.prototype.colorToArray=function(e,t,n){return t===void 0&&(t=[]),n===void 0&&(n=0),t[n]=(e>>16&255)/255,t[n+1]=(e>>8&255)/255,t[n+2]=(255&e)/255,t},yn.prototype.atomColorToArray=function(e,t,n){return this.colorToArray(this.atomColor?this.atomColor(e):0,t,n)},yn.prototype.bondColor=function(e,t){return this.atomProxy&&this.atomColor?(this.atomProxy.index=t?e.atomIndex1:e.atomIndex2,this.atomColor(this.atomProxy)):0},yn.prototype.bondColorToArray=function(e,t,n,r){return this.colorToArray(this.bondColor(e,t),n,r)},yn.prototype.volumeColorToArray=function(e,t,n){return this.colorToArray(this.volumeColor?this.volumeColor(e):0,t,n)},yn.prototype.positionColorToArray=function(e,t,n){return this.colorToArray(this.positionColor?this.positionColor(e):0,t,n)},function(e){e[e.PROTEIN=1]="PROTEIN",e[e.NUCLEIC=2]="NUCLEIC",e[e.RNA=3]="RNA",e[e.DNA=4]="DNA",e[e.POLYMER=5]="POLYMER",e[e.WATER=6]="WATER",e[e.HELIX=7]="HELIX",e[e.SHEET=8]="SHEET",e[e.TURN=9]="TURN",e[e.BACKBONE=10]="BACKBONE",e[e.SIDECHAIN=11]="SIDECHAIN",e[e.ALL=12]="ALL",e[e.HETERO=13]="HETERO",e[e.ION=14]="ION",e[e.SACCHARIDE=15]="SACCHARIDE",e[e.SUGAR=15]="SUGAR",e[e.BONDED=16]="BONDED",e[e.RING=17]="RING",e[e.AROMATICRING=18]="AROMATICRING",e[e.METAL=19]="METAL",e[e.POLARH=20]="POLARH",e[e.NONE=21]="NONE"}(Ft||(Ft={}));var fV=["*","","ALL"],Yit=["NONE"],kN=[Ft.BACKBONE,Ft.SIDECHAIN,Ft.BONDED,Ft.RING,Ft.AROMATICRING,Ft.METAL,Ft.POLARH],soe=[Ft.POLYMER,Ft.WATER],Kit=["ALA","GLY","SER"],Zit=["CYS","SER","THR"],Jit=["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL"],Qit=["PHE","TRP","TYR","HIS"],eot=["ASN","GLN"],tot=["ASP","GLU"],not=["ARG","HIS","LYS"],rot=["ARG","ASP","GLU","HIS","LYS"],iot=["ASN","ARG","ASP","CYS","GLY","GLN","GLU","HIS","LYS","SER","THR","TYR"],oot=["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL"],aot=["HIS","PHE","PRO","TRP","TYR"],sot=["ALA","GLY","ILE","LEU","VAL"];function lot(e,t){if(t.atomname===void 0&&t.element===void 0&&t.altloc===void 0&&t.atomindex===void 0&&t.keyword===void 0&&t.inscode===void 0&&t.resname===void 0&&t.sstruc===void 0&&t.resno===void 0&&t.chainname===void 0&&t.model===void 0)return-1;if(t.keyword!==void 0&&(t.keyword===Ft.BACKBONE&&!e.isBackbone()||t.keyword===Ft.SIDECHAIN&&!e.isSidechain()||t.keyword===Ft.BONDED&&!e.isBonded()||t.keyword===Ft.RING&&!e.isRing()||t.keyword===Ft.AROMATICRING&&!e.isAromatic()||t.keyword===Ft.HETERO&&!e.isHetero()||t.keyword===Ft.PROTEIN&&!e.isProtein()||t.keyword===Ft.NUCLEIC&&!e.isNucleic()||t.keyword===Ft.RNA&&!e.isRna()||t.keyword===Ft.DNA&&!e.isDna()||t.keyword===Ft.POLYMER&&!e.isPolymer()||t.keyword===Ft.WATER&&!e.isWater()||t.keyword===Ft.HELIX&&!e.isHelix()||t.keyword===Ft.SHEET&&!e.isSheet()||t.keyword===Ft.TURN&&!e.isTurn()||t.keyword===Ft.ION&&!e.isIon()||t.keyword===Ft.SACCHARIDE&&!e.isSaccharide()||t.keyword===Ft.METAL&&!e.isMetal()||t.keyword===Ft.POLARH&&!e.isPolarHydrogen())||t.atomname!==void 0&&t.atomname!==e.atomname||t.element!==void 0&&t.element!==e.element||t.altloc!==void 0&&t.altloc!==e.altloc||t.atomindex!==void 0&&fp(t.atomindex,e.index)<0)return!1;if(t.resname!==void 0){if(Array.isArray(t.resname)){if(!t.resname.includes(e.resname))return!1}else if(t.resname!==e.resname)return!1}if(t.sstruc!==void 0&&t.sstruc!==e.sstruc)return!1;if(t.resno!==void 0){if(Array.isArray(t.resno)&&t.resno.length===2){if(t.resno[0]>e.resno||t.resno[1]<e.resno)return!1}else if(t.resno!==e.resno)return!1}return(t.inscode===void 0||t.inscode===e.inscode)&&(t.chainname===void 0||t.chainname===e.chainname)&&(t.model===void 0||t.model===e.modelIndex)}function cot(e,t){if(t.resname===void 0&&t.resno===void 0&&t.inscode===void 0&&t.sstruc===void 0&&t.model===void 0&&t.chainname===void 0&&t.atomindex===void 0&&(t.keyword===void 0||kN.includes(t.keyword)))return-1;if(t.keyword!==void 0&&(t.keyword===Ft.HETERO&&!e.isHetero()||t.keyword===Ft.PROTEIN&&!e.isProtein()||t.keyword===Ft.NUCLEIC&&!e.isNucleic()||t.keyword===Ft.RNA&&!e.isRna()||t.keyword===Ft.DNA&&!e.isDna()||t.keyword===Ft.POLYMER&&!e.isPolymer()||t.keyword===Ft.WATER&&!e.isWater()||t.keyword===Ft.HELIX&&!e.isHelix()||t.keyword===Ft.SHEET&&!e.isSheet()||t.keyword===Ft.TURN&&!e.isTurn()||t.keyword===Ft.ION&&!e.isIon()||t.keyword===Ft.SACCHARIDE&&!e.isSaccharide())||t.atomindex!==void 0&&ON(t.atomindex,e.atomOffset,e.atomEnd)===0)return!1;if(t.resname!==void 0){if(Array.isArray(t.resname)){if(!t.resname.includes(e.resname))return!1}else if(t.resname!==e.resname)return!1}if(t.sstruc!==void 0&&t.sstruc!==e.sstruc)return!1;if(t.resno!==void 0){if(Array.isArray(t.resno)&&t.resno.length===2){if(t.resno[0]>e.resno||t.resno[1]<e.resno)return!1}else if(t.resno!==e.resno)return!1}return(t.inscode===void 0||t.inscode===e.inscode)&&(t.chainname===void 0||t.chainname===e.chainname)&&(t.model===void 0||t.model===e.modelIndex)}function uot(e,t){return t.chainname!==void 0||t.model!==void 0||t.atomindex!==void 0||t.keyword!==void 0&&soe.includes(t.keyword)&&e.entity?t.keyword!==void 0&&(t.keyword===Ft.POLYMER&&!e.entity.isPolymer()||t.keyword===Ft.WATER&&!e.entity.isWater())?!1:(t.atomindex===void 0||ON(t.atomindex,e.atomOffset,e.atomEnd)!==0)&&(t.chainname===void 0||t.chainname===e.chainname)&&(t.model===void 0||t.model===e.modelIndex):-1}function fot(e,t){return t.model===void 0&&t.atomindex===void 0?-1:(t.atomindex===void 0||ON(t.atomindex,e.atomOffset,e.atomEnd)!==0)&&(t.model===void 0||t.model===e.index)}function Fx(e,t){if(e===null||e.error||!e.rules||e.rules.length===0)return!1;for(var n=e.rules.length,r=!e.negate,i=!!e.negate,o=[],a=0;a<n;++a){var s=e.rules[a];s.hasOwnProperty("operator")&&(o[a]=Fx(s,t))}return function(l){for(var c=e.operator==="AND",u=!1,f=0;f<n;++f){var d=e.rules[f],p=void 0;if(d.hasOwnProperty("operator")){var h=o[f];if((p=h!==!1?h(l):-1)===-1){u=!0;continue}if(p===!0){if(c)continue;return r}if(c)return i}else{if(d.keyword===Ft.ALL){if(c)continue;return r}if(d.keyword===Ft.NONE){if(c)continue;return i}if((p=t(l,d))!==-1){if(p===!0){if(c)continue;return r}if(c)return i}else u=!0}}return u?-1:c?r:i}}function jx(e,t){if(e.error||!e.rules||e.rules.length===0)return e;var n=e.rules.length,r={operator:e.operator,rules:[]};e.hasOwnProperty("negate")&&(r.negate=e.negate);for(var i=0;i<n;++i){var o=e.rules[i];if(o.hasOwnProperty("operator")){var a=jx(o,t);a!==null&&r.rules.push(a)}else t(o)||r.rules.push(o)}return r.rules.length>0?e:null}function dV(e,t){t===void 0&&(t=!1);var n=e;return t&&(n=jx(e,function(r){return r.keyword!==void 0&&!kN.includes(r.keyword)||r.model!==void 0||r.chainname!==void 0||r.resname!==void 0||r.resno!==void 0||r.sstruc!==void 0})),Fx(n,lot)}function pV(e,t){t===void 0&&(t=!1);var n=e;return t&&(n=jx(e,function(r){return!(r.keyword===void 0||!kN.includes(r.keyword))||r.model!==void 0||r.chainname!==void 0||r.atomname!==void 0||r.element!==void 0||r.altloc!==void 0})),Fx(n,cot)}function hV(e,t){t===void 0&&(t=!1);var n=e;return t&&(n=jx(e,function(r){return r.keyword!==void 0&&!soe.includes(r.keyword)||r.resname!==void 0||r.resno!==void 0||r.atomname!==void 0||r.element!==void 0||r.altloc!==void 0||r.sstruc!==void 0||r.inscode!==void 0})),Fx(n,uot)}function mV(e,t){t===void 0&&(t=!1);var n=e;return t&&(n=jx(e,function(r){return r.keyword!==void 0||r.chainname!==void 0||r.resname!==void 0||r.resno!==void 0||r.atomname!==void 0||r.element!==void 0||r.altloc!==void 0||r.sstruc!==void 0||r.inscode!==void 0})),Fx(n,fot)}var Hn=function(e){this.signals={stringChanged:new en.Signal},this.setString(e)},gV={type:{configurable:!0}};gV.type.get=function(){return"selection"},Hn.prototype.setString=function(e,t){if(e===void 0&&(e=this.string||""),e!==this.string){try{this.selection=function(r){var i={operator:void 0,rules:[]};if(!r)return i;var o,a,s=i,l=[];(r=r.replace(/\(/g," ( ").replace(/\)/g," ) ").trim()).charAt(0)==="("&&r.substr(-1)===")"&&(r=r.slice(1,-1).trim());for(var c=r.split(/\s+/),u=function(z){o={operator:z,rules:[]},s===void 0?(s=o,i=o):(s.rules.push(o),l.push(s),s=o)},f=function(z){a=s,(s=l.pop())===void 0&&(u(z),d(a))},d=function(z){s.rules.push(z)},p=!1,h=0;h<c.length;++h){var g=c[h],v=g.toUpperCase();if(g!=="(")if(g!==")"){if(p>0)if(v==="NOT")p=1;else if(p===1)p=2;else{if(p!==2)throw new Error("something went wrong with 'not'");p=!1,f()}if(v!=="AND")if(v!=="OR")if(g.toUpperCase()!=="NOT"){if(+v!=+v){var m=Ft[v];if(m!==void 0){d({keyword:m});continue}}if(v!=="HYDROGEN")if(v!=="SMALL")if(v!=="NUCLEOPHILIC")if(v!=="HYDROPHOBIC")if(v!=="AROMATIC")if(v!=="AMIDE")if(v!=="ACIDIC")if(v!=="BASIC")if(v!=="CHARGED")if(v!=="POLAR")if(v!=="NONPOLAR")if(v!=="CYCLIC")if(v!=="ALIPHATIC")if(v!=="SIDECHAINATTACHED")if(v!=="APOLARH")if(v!=="LIGAND")if(fV.indexOf(v)===-1)if(g.charAt(0)!=="@")if(g.charAt(0)!=="#")if(g.charAt(0)!=="_")if(g[0]!=="["||g[g.length-1]!=="]")if(g.length>=1&&g.length<=4&&g[0]!=="^"&&g[0]!==":"&&g[0]!=="."&&g[0]!=="%"&&g[0]!=="/"&&isNaN(parseInt(g)))d({resname:v});else{var y={operator:"AND",rules:[]},_=g.split("/");if(_.length>1&&_[1]){if(isNaN(parseInt(_[1])))throw new Error("model must be an integer");y.rules.push({model:parseInt(_[1])})}var b=_[0].split("%");b.length>1&&y.rules.push({altloc:b[1]});var x=b[0].split(".");if(x.length>1&&x[1]){if(x[1].length>4)throw new Error("atomname must be one to four characters");y.rules.push({atomname:x[1].substring(0,4).toUpperCase()})}var w=x[0].split(":");w.length>1&&w[1]&&y.rules.push({chainname:w[1]});var S=w[0].split("^");if(S.length>1&&y.rules.push({inscode:S[1]}),S[0]){var A=void 0,C=void 0;S[0][0]==="-"&&(S[0]=S[0].substr(1),A=!0),S[0].includes("--")&&(S[0]=S[0].replace("--","-"),C=!0);var k=S[0].split("-");if(k.length===1){var O=parseInt(k[0]);if(isNaN(O))throw new Error("resi must be an integer");A&&(O*=-1),y.rules.push({resno:O})}else{if(k.length!==2)throw new Error("resi range must contain one '-'");var T=k.map(function(z){return parseInt(z)});A&&(T[0]*=-1),C&&(T[1]*=-1),y.rules.push({resno:[T[0],T[1]]})}}if(y.rules.length===1)d(y.rules[0]);else{if(!(y.rules.length>1))throw new Error("empty selection chunk");d(y)}}else{var B=v.substr(1,g.length-2).split(","),R=B.length>1?B:B[0];d({resname:R})}else d({element:v.substr(1)});else console.error("# for element selection deprecated, use _"),d({element:v.substr(1)});else{var P=g.substr(1).split(",").map(function(z){return parseInt(z)});P.sort(function(z,N){return z-N}),d({atomindex:P})}else d({keyword:Ft.ALL});else d({operator:"AND",rules:[{operator:"OR",rules:[{operator:"AND",rules:[{keyword:Ft.HETERO},{negate:!0,operator:void 0,rules:[{keyword:Ft.POLYMER}]}]},{negate:!0,operator:void 0,rules:[{keyword:Ft.POLYMER}]}]},{negate:!0,operator:void 0,rules:[{operator:"OR",rules:[{keyword:Ft.WATER},{keyword:Ft.ION}]}]}]});else d({operator:"AND",negate:!1,rules:[{element:"H"},{negate:!0,operator:void 0,rules:[{keyword:Ft.POLARH}]}]});else d({operator:"OR",rules:[{keyword:Ft.SIDECHAIN},{operator:"AND",negate:!1,rules:[{keyword:Ft.PROTEIN},{operator:"OR",negate:!1,rules:[{atomname:"CA"},{atomname:"BB"}]}]},{operator:"AND",negate:!1,rules:[{resname:"PRO"},{atomname:"N"}]},{operator:"AND",negate:!1,rules:[{keyword:Ft.NUCLEIC},{operator:"OR",negate:!0,rules:[{atomname:"P"},{atomname:"OP1"},{atomname:"OP2"},{atomname:"O3'"},{atomname:"O3*"},{atomname:"HO3'"},{atomname:"O5'"},{atomname:"O5*"},{atomname:"HO5'"},{atomname:"C5'"},{atomname:"C5*"},{atomname:"H5'"},{atomname:"H5''"}]}]}]});else d({resname:sot});else d({resname:aot});else d({resname:oot});else d({resname:iot});else d({resname:rot});else d({resname:not});else d({resname:tot});else d({resname:eot});else d({resname:Qit});else d({resname:Jit});else d({resname:Zit});else d({resname:Kit});else d({operator:"OR",rules:[{element:"H"},{element:"D"}]})}else p=1,u(),s.negate=!0;else s.operator==="AND"?f("OR"):s.operator="OR";else if(s.operator==="OR"){var D=s.rules.pop();u("AND"),d(D)}else s.operator="AND"}else f(),s.negate&&f();else p=!1,u()}return i.operator===void 0&&i.rules.length===1&&i.rules[0].hasOwnProperty("operator")&&(i=i.rules[0]),i}(e)}catch(r){this.selection={error:r.message}}var n=this.selection;this.string=e,this.test=dV(n),this.residueTest=pV(n),this.chainTest=hV(n),this.modelTest=mV(n),this.atomOnlyTest=dV(n,!0),this.residueOnlyTest=pV(n,!0),this.chainOnlyTest=hV(n,!0),this.modelOnlyTest=mV(n,!0),t||this.signals.stringChanged.dispatch(this.string)}},Hn.prototype.isAllSelection=function(){return fV.includes(this.string.toUpperCase())},Hn.prototype.isNoneSelection=function(){return Yit.includes(this.string.toUpperCase())},Object.defineProperties(Hn.prototype,gV);var dot=function(e){function t(n){var r=this;e.call(this,n),this.colormakerList=[],this.selectionList=[],(n.dataList||[]).forEach(function(i){var o=i[0],a=i[1],s=i[2];s===void 0&&(s={}),pn.hasScheme(o)?Object.assign(s,{scheme:o,structure:r.parameters.structure}):Object.assign(s,{scheme:"uniform",value:new ht(o).getHex()}),r.colormakerList.push(pn.getScheme(s)),r.selectionList.push(new Hn(a))})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){for(var r=0,i=this.selectionList.length;r<i;++r){var o=this.selectionList[r].test;if(o&&o(n))return this.colormakerList[r].atomColor(n)}return 16777215},t}(yn),pot={"":"",OrRd:"[S] Orange-Red",PuBu:"[S] Purple-Blue",BuPu:"[S] Blue-Purple",Oranges:"[S] Oranges",BuGn:"[S] Blue-Green",YlOrBr:"[S] Yellow-Orange-Brown",YlGn:"[S] Yellow-Green",Reds:"[S] Reds",RdPu:"[S] Red-Purple",Greens:"[S] Greens",YlGnBu:"[S] Yellow-Green-Blue",Purples:"[S] Purples",GnBu:"[S] Green-Blue",Greys:"[S] Greys",YlOrRd:"[S] Yellow-Orange-Red",PuRd:"[S] Purple-Red",Blues:"[S] Blues",PuBuGn:"[S] Purple-Blue-Green",Viridis:"[D] Viridis",Spectral:"[D] Spectral",RdYlGn:"[D] Red-Yellow-Green",RdBu:"[D] Red-Blue",PiYG:"[D] Pink-Yellowgreen",PRGn:"[D] Purplered-Green",RdYlBu:"[D] Red-Yellow-Blue",BrBG:"[D] Brown-Bluegreen",RdGy:"[D] Red-Grey",PuOr:"[D] Purple-Orange",Set1:"[Q] Set1",Set2:"[Q] Set2",Set3:"[Q] Set3",Dark2:"[Q] Dark2",Paired:"[Q] Paired",Pastel1:"[Q] Pastel1",Pastel2:"[Q] Pastel2",Accent:"[Q] Accent",rainbow:"[?] Rainbow",rwb:"[?] Red-White-Blue"},hot={"":"",rgb:"Red Green Blue",hsv:"Hue Saturation Value",hsl:"Hue Saturation Lightness",hsi:"Hue Saturation Intensity",lab:"CIE L*a*b*",hcl:"Hue Chroma Lightness"},_s=function(){this.schemes={},this.userSchemes={}};_s.prototype.getScheme=function(e){var t=((e||{}).scheme||"").toLowerCase();return new(t in this.schemes?this.schemes[t]:t in this.userSchemes?this.userSchemes[t]:yn)(e)},_s.prototype.getSchemes=function(){var e={};return Object.keys(this.schemes).forEach(function(t){e[t]=t}),Object.keys(this.userSchemes).forEach(function(t){e[t]=t.split("|")[1]}),e},_s.prototype.getScales=function(){return pot},_s.prototype.getModes=function(){return hot},_s.prototype.add=function(e,t){e=e.toLowerCase(),this.schemes[e]=t},_s.prototype.addScheme=function(e,t){return e instanceof yn||(e=this._createScheme(e)),this._addUserScheme(e,t)},_s.prototype._addUserScheme=function(e,t){t=t||"";var n=(RN()+"|"+t).toLowerCase();return this.userSchemes[n]=e,n},_s.prototype.removeScheme=function(e){e=e.toLowerCase(),delete this.userSchemes[e]},_s.prototype._createScheme=function(e){var t=function(n){yn.call(this,n),e.call(this,n)};return(t.prototype=yn.prototype).constructor=yn,t},_s.prototype.addSelectionScheme=function(e,t){var n=function(r){function i(o){r.call(this,Object.assign({dataList:e},o))}return r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i,i}(dot);return this._addUserScheme(n,t)},_s.prototype.hasScheme=function(e){return(e=e.toLowerCase())in this.schemes||e in this.userSchemes};var mot=function(e){function t(){e.call(this,"parser")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__hasObjName=function(n,r){var i=this.get(n);return i&&i.prototype.__objName===r},t.prototype.isTrajectory=function(n){return this.__hasObjName(n,"frames")},t.prototype.isStructure=function(n){return this.__hasObjName(n,"structure")},t.prototype.isVolume=function(n){return this.__hasObjName(n,"volume")},t.prototype.isSurface=function(n){return this.__hasObjName(n,"surface")},t.prototype.isBinary=function(n){var r=this.get(n);return r&&r.prototype.isBinary},t.prototype.isXml=function(n){var r=this.get(n);return r&&r.prototype.isXml},t.prototype.isJson=function(n){var r=this.get(n);return r&&r.prototype.isJson},t.prototype.getTrajectoryExtensions=function(){var n=this;return this.names.filter(function(r){return n.isTrajectory(r)})},t.prototype.getStructureExtensions=function(){var n=this;return this.names.filter(function(r){return n.isStructure(r)})},t.prototype.getVolumeExtensions=function(){var n=this;return this.names.filter(function(r){return n.isVolume(r)})},t.prototype.getSurfaceExtensions=function(){var n=this;return this.names.filter(function(r){return n.isSurface(r)})},t}(Cl);function loe(e){var t=e;return e.forEach(function(n){n.__deps&&Array.prototype.push.apply(t,loe(n.__deps))}),t}function got(e){return IN(loe(e)).map(function(t){return t.toString()}).join(`


`)}function vot(e){var t=e.data.__name,n=e.data.__postId;t===void 0?console.error("message __name undefined"):self.func===void 0?console.error("worker func undefined",t):self.func(e,function(r,i){r=r||{},n!==void 0&&(r.__postId=n);try{self.postMessage(r,i)}catch(o){console.error("self.postMessage:",o),self.postMessage(r)}})}function yot(e,t){var n=`'use strict';

`+got(t);return n+=`


self.func = `+e.toString()+";",n+=`


self.onmessage = `+vot.toString()+";",new Blob([n],{type:"application/javascript"})}var h$=function(){this.activeWorkerCount=0,this._funcDict={},this._depsDict={},this._blobDict={}};h$.prototype.add=function(e,t,n){this._funcDict[e]=t,this._depsDict[e]=n},h$.prototype.get=function(e){return this._blobDict[e]||(this._blobDict[e]=yot(this._funcDict[e],this._depsDict[e])),this._blobDict[e]};var coe=ioe(),uoe=!1;try{var bot=Object.defineProperty({},"passive",{get:function(){uoe=!0}});window.addEventListener("test",function(e){},bot)}catch{}var foe=typeof window<"u"&&window.orientation!==void 0,Of=!1;function vV(e){Of=e}var Cc=!1;function yV(e){Cc=e}var Ge={log:Function.prototype.bind.call(console.log,console),info:Function.prototype.bind.call(console.info,console),warn:Function.prototype.bind.call(console.warn,console),error:Function.prototype.bind.call(console.error,console),time:Function.prototype.bind.call(console.time,console),timeEnd:Function.prototype.bind.call(console.timeEnd,console)},hy={color:"green",labelColor:8421504,labelAttachment:"bottom-center",labelSize:.7,labelZOffset:.5,labelYOffset:.1,labelBorder:!0,labelBorderColor:13882323,labelBorderWidth:.25,lineOpacity:.8,linewidth:5,opacity:.6,labelUnit:"angstrom",arcVisible:!0,planeVisible:!1},iR,Ze=!!(iR=Hit("debug"))&&(typeof iR!="string"||/^1|true|t|yes|y$/i.test(iR)),oR,_ot=["ngl","js"],Q1=new h$,pn=new _s,ad=new Cl("datasource"),xr=new Cl("representatation"),Xt=new mot,On=new Cl("shader"),LN=new Cl("decompressor"),qv=new Cl("component"),ds=new Cl("buffer"),xs=new Cl("picker"),jo=function(e,t){t===void 0&&(t={}),this.chunkSize=10485760,this.newline=`
`,this.__pointer=0,this.__partialLine="",this.compressed=K(t.compressed,!1),this.binary=K(t.binary,!1),this.json=K(t.json,!1),this.xml=K(t.xml,!1),this.src=e};jo.prototype.isBinary=function(){return this.binary||this.compressed},jo.prototype.read=function(){var e=this;return this._read().then(function(t){var n=e.compressed?LN.get(e.compressed):void 0;return e.compressed&&n?e.data=n(t):((e.binary||e.compressed)&&t instanceof ArrayBuffer&&(t=new Uint8Array(t)),e.data=t),e.data})},jo.prototype._chunk=function(e,t){return t=Math.min(this.data.length,t),e===0&&this.data.length===t?this.data:this.isBinary()?this.data.subarray(e,t):this.data.substring(e,t)},jo.prototype.chunk=function(e){var t=e+this.chunkSize;return this._chunk(e,t)},jo.prototype.peekLines=function(e){var t,n=this.data,r=n.length,i=this.isBinary()?this.newline.charCodeAt(0):this.newline,o=0;for(t=0;t<r&&(n[t]===i&&++o,o!==e);++t);var a=this._chunk(0,t+1);return this.chunkToLines(a,"",t>r).lines},jo.prototype.chunkCount=function(){return Math.floor(this.data.length/this.chunkSize)+1},jo.prototype.asText=function(){return this.isBinary()?HA(this.data):this.data},jo.prototype.chunkToLines=function(e,t,n){var r=this.newline;if(!this.isBinary()&&e.length===this.data.length)return{lines:e.split(r),partialLine:""};var i=[],o=this.isBinary()?HA(e):e,a=o.lastIndexOf(r);if(a===-1)t+=o;else{var s=t+o.substr(0,a);i=i.concat(s.split(r)),t=a===o.length-r.length?"":o.substr(a+r.length)}return n&&t!==""&&i.push(t),{lines:i,partialLine:t}},jo.prototype.nextChunk=function(){var e=this.__pointer;if(!(e>this.data.length))return this.__pointer+=this.chunkSize,this.chunk(e)},jo.prototype.nextChunkOfLines=function(){var e=this.nextChunk();if(e!==void 0){var t=this.__pointer>this.data.length,n=this.chunkToLines(e,this.__partialLine,t);return this.__partialLine=n.partialLine,n.lines}},jo.prototype.eachChunk=function(e){for(var t=this.chunkSize,n=this.data.length,r=this.chunkCount(),i=0;i<n;i+=t)e(this.chunk(i),Math.round(i/t),r)},jo.prototype.eachChunkOfLines=function(e){var t=this;this.eachChunk(function(n,r,i){var o=r===i+1,a=t.chunkToLines(n,t.__partialLine,o);t.__partialLine=a.partialLine,e(a.lines,r,i)})},jo.prototype.dispose=function(){delete this.src};var xot=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._read=function(){var n=this;return new Promise(function(r,i){var o=n.src,a=new FileReader;a.onload=function(s){s.target&&r(s.target.result)},a.onerror=function(s){return i(s)},n.binary||n.compressed?a.readAsArrayBuffer(o):a.readAsText(o)})},t}(jo),wot=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._read=function(){var n=this;return new Promise(function(r,i){var o=n.src,a=new XMLHttpRequest;a.open("GET",o,!0),a.addEventListener("load",function(){if(a.status===200||a.status===304||a.status===0)try{r(a.response)}catch(s){i(s)}else i(a.statusText)},!1),a.addEventListener("error",function(s){return i("network error")},!1),n.isBinary()?a.responseType="arraybuffer":n.json?a.responseType="json":n.xml?a.responseType="document":a.responseType="text",a.send()})},t}(jo),doe=function(e,t){t===void 0&&(t={}),this.parameters=fs(t,{ext:"",compressed:!1,binary:Xt.isBinary(t.ext||""),name:"",dir:"",path:"",protocol:""});var n={compressed:this.parameters.compressed,binary:this.parameters.binary,json:Xt.isJson(this.parameters.ext),xml:Xt.isXml(this.parameters.ext)};typeof File<"u"&&e instanceof File||typeof Blob<"u"&&e instanceof Blob?this.streamer=new xot(e,n):this.streamer=new wot(e,n)},Sot=function(e){function t(n,r){r===void 0&&(r={}),e.call(this,n,r),this.parserParams={voxelSize:r.voxelSize,firstModelOnly:r.firstModelOnly,asTrajectory:r.asTrajectory,cAlphaOnly:r.cAlphaOnly,delimiter:r.delimiter,comment:r.comment,columnNames:r.columnNames,name:this.parameters.name,path:this.parameters.path}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){return new(Xt.get(this.parameters.ext))(this.streamer,this.parserParams).parse()},t}(doe),poe=function(e,t,n){this.name=t,this.path=n,this.signals={elementAdded:new en.Signal,elementRemoved:new en.Signal,nameChanged:new en.Signal},this.type="Script",this.dir=n.substring(0,n.lastIndexOf("/")+1);try{this.fn=new Function("stage","__name","__path","__dir",e)}catch(r){Ge.error("Script compilation failed",r),this.fn=function(){}}};poe.prototype.run=function(e){var t=this;return new Promise(function(n,r){try{t.fn.apply(null,[e,t.name,t.path,t.dir]),n()}catch(i){Ge.error("Script.fn",i),r(i)}})};var Cot=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var n=this;return this.streamer.read().then(function(){return new poe(n.streamer.asText(),n.parameters.name,n.parameters.path)})},t}(doe);function Ai(e){var t,n,r=LN.names,i="",o=(t=e instanceof File?e.name:e instanceof Blob?"":e).lastIndexOf("?"),a=o!==-1?t.substring(o):"",s=(t=t.substring(0,o===-1?t.length:o)).replace(/^.*[\\/]/,""),l=s.substring(0,s.lastIndexOf(".")),c=s.split("."),u=c.length>1?(c.pop()||"").toLowerCase():"",f=t.match(/^(.+):\/\/(.+)$/);f&&(i=f[1].toLowerCase(),t=f[2]||"");var d=t.substring(0,t.lastIndexOf("/")+1);if(r.includes(u)){n=u;var p=t.length-u.length-1;u=(t.substr(0,p).split(".").pop()||"").toLowerCase();var h=l.length-u.length-1;l=l.substr(0,h)}else n=!1;return{path:t,name:s,ext:u,base:l,dir:d,compressed:n,protocol:i,query:a,src:e}}function Aot(e){var t=Ai(e),n=ad.get(t.protocol);return n&&!(t=Ai(n.getUrl(t.src))).ext&&n.getExt&&(t.ext=n.getExt(e)),t}function m$(e,t){t===void 0&&(t={});var n,r=Object.assign(Aot(e),t);return Xt.names.includes(r.ext)?n=new Sot(r.src,r):_ot.includes(r.ext)&&(n=new Cot(r.src,r)),n?n.load():Promise.reject(new Error("autoLoad: ext '"+r.ext+"' unknown"))}var e_=function(){};e_.prototype.getBlob=function(){return new Blob([this.getData()],{type:this.mimeType})},e_.prototype.download=function(e,t){e=K(e,this.defaultName),t=K(t,this.defaultExt),Git(this.getBlob(),e+"."+t)};(function(e){function t(n,r){e.call(this),this.mimeType="text/plain",this.defaultName="structure",this.defaultExt="pdb";var i=Object.assign({},r);this.renumberSerial=K(i.renumberSerial,!0),this.remarks=function(o){return Array.isArray(o)?o:[o]}(K(i.remarks,[])),this.structure=n,this._records=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._writeRecords=function(){this._records.length=0,this._writeTitle(),this._writeRemarks(),this._writeAtoms()},t.prototype._writeTitle=function(){this._records.push(Vo.sprintf("TITLE %-74s",this.structure.name))},t.prototype._writeRemarks=function(){var n=this;this.remarks.forEach(function(r){n._records.push(Vo.sprintf("REMARK %-73s",r))}),this.structure.trajectory&&(this._records.push(Vo.sprintf("REMARK %-73s","Trajectory '"+this.structure.trajectory.name+"'")),this._records.push(Vo.sprintf("REMARK %-73s","Frame "+this.structure.trajectory.frame)))},t.prototype._writeAtoms=function(){var n=this,r=1,i=1,o=" ",a=" ",s=this.structure.modelStore.count>1;this.structure.eachModel(function(l){s&&n._records.push(Vo.sprintf("MODEL     %4d%-66s",i++,"")),l.eachAtom(function(c){var u=c.hetero?"HETATM%5d %-4s %3s %1s%4d    %8.3f%8.3f%8.3f%6.2f%6.2f      %4s%2s%1s%1s":"ATOM  %5d %-4s %3s %1s%4d    %8.3f%8.3f%8.3f%6.2f%6.2f      %4s%2s%1s%1s",f=n.renumberSerial?r:c.serial,d=c.atomname;(d.length===1||d.length<4&&c.element.length===1&&d[0]===c.element)&&(d=" "+d),c.formalCharge?(o=Math.abs(c.formalCharge).toPrecision(1),a=c.formalCharge>0?"+":"-"):(o=" ",a=" "),n._records.push(Vo.sprintf(u,f,d,c.resname,K(c.chainname," "),c.resno,c.x,c.y,c.z,K(c.occupancy,1),K(c.bfactor,0),"",K(c.element,""),o,a)),r+=1},n.structure.getSelection()),s&&n._records.push(Vo.sprintf("%-80s","ENDMDL"))}),this._records.push(Vo.sprintf("%-80s","END"))},t.prototype.getString=function(){return console.warn("PdbWriter.getString() is deprecated, use .getData instead"),this.getData()},t.prototype.getData=function(){return this._writeRecords(),this._records.join(`
`)},t})(e_);(function(e){function t(r){e.call(this),this.mimeType="text/plain",this.defaultName="structure",this.defaultExt="sdf",this.structure=r,this._records=[]}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={idString:{configurable:!0},titleString:{configurable:!0},countsString:{configurable:!0},chargeLines:{configurable:!0}};return n.idString.get=function(){return this.structure.id},n.titleString.get=function(){return"  "+this.structure.title},n.countsString.get=function(){return Vo.sprintf("%3i%3i  0  0  0  0  0  0  0  0999 V2000",this.structure.atomCount,this.structure.bondCount)},n.chargeLines.get=function(){var r=[];this.structure.eachAtom(function(c){c.formalCharge!=null&&c.formalCharge!==0&&r.push([c.index,c.formalCharge])});for(var i=[],o=0;o<r.length;o+=8){for(var a=Math.min(8,r.length-o),s=Vo.sprintf("M  CHG%3i",a),l=o;l<o+a;l++)s+=Vo.sprintf(" %3i %3i",r[l][0]+1,r[l][1]);i.push(s)}return i},t.prototype.formatAtom=function(r){var i=0;r.formalCharge!=null&&r.formalCharge!==0&&(i=4-r.formalCharge);var o=Vo.sprintf("%10.4f%10.4f%10.4f %-3s 0%3i  0  0  0",r.x,r.y,r.z,r.element,i);if(o.length!==48)throw new Error("Incompatible atom for sdf format");return o},t.prototype.formatBond=function(r){return Vo.sprintf("%3i%3i%3i  0  0  0",r.atomIndex1+1,r.atomIndex2+1,r.bondOrder)},t.prototype._writeRecords=function(){this._records.length=0,this._writeHeader(),this._writeCTab(),this._writeFooter()},t.prototype._writeHeader=function(){this._records.push(this.idString,this.titleString,"")},t.prototype._writeCTab=function(){var r=this;this._records.push(this.countsString),this.structure.eachAtom(function(i){r._records.push(r.formatAtom(i))}),this.structure.eachBond(function(i){r._records.push(r.formatBond(i))}),this.chargeLines.forEach(function(i){r._records.push(i)}),this._records.push("M  END")},t.prototype._writeFooter=function(){this._records.push("$$$$")},t.prototype.getData=function(){return this._writeRecords(),this._records.join(`
`)},Object.defineProperties(t.prototype,n),t})(e_);var aR=[],cn=function(e,t){t===void 0&&(t={}),this._mark=0,this._marks=[],this.offset=0,this.littleEndian=!0;var n=!1;e===void 0&&(e=8192),typeof e=="number"?e=new ArrayBuffer(e):n=!0;var r=t.offset?t.offset>>>0:0,i=e.byteLength-r,o=r;e instanceof ArrayBuffer||(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+r),e=e.buffer),this._lastWrittenByte=n?i:0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=o,this._data=new DataView(this.buffer,o,i)};cn.prototype.available=function(e){return e===void 0&&(e=1),this.offset+e<=this.length},cn.prototype.isLittleEndian=function(){return this.littleEndian},cn.prototype.setLittleEndian=function(){return this.littleEndian=!0,this},cn.prototype.isBigEndian=function(){return!this.littleEndian},cn.prototype.setBigEndian=function(){return this.littleEndian=!1,this},cn.prototype.skip=function(e){return e===void 0&&(e=1),this.offset+=e,this},cn.prototype.seek=function(e){return this.offset=e,this},cn.prototype.mark=function(){return this._mark=this.offset,this},cn.prototype.reset=function(){return this.offset=this._mark,this},cn.prototype.pushMark=function(){return this._marks.push(this.offset),this},cn.prototype.popMark=function(){var e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this},cn.prototype.rewind=function(){return this.offset=0,this},cn.prototype.ensureAvailable=function(e){if(e===void 0&&(e=1),!this.available(e)){var t=2*(this.offset+e),n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=this.byteLength=t,this._data=new DataView(this.buffer)}return this},cn.prototype.readBoolean=function(){return this.readUint8()!==0},cn.prototype.readInt8=function(){return this._data.getInt8(this.offset++)},cn.prototype.readUint8=function(){return this._data.getUint8(this.offset++)},cn.prototype.readByte=function(){return this.readUint8()},cn.prototype.readBytes=function(e){e===void 0&&(e=1);for(var t=new Uint8Array(e),n=0;n<e;n++)t[n]=this.readByte();return t},cn.prototype.readInt16=function(){var e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},cn.prototype.readUint16=function(){var e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e},cn.prototype.readInt32=function(){var e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},cn.prototype.readUint32=function(){var e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},cn.prototype.readFloat32=function(){var e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},cn.prototype.readFloat64=function(){var e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},cn.prototype.readChar=function(){return String.fromCharCode(this.readInt8())},cn.prototype.readChars=function(e){e===void 0&&(e=1),aR.length=e;for(var t=0;t<e;t++)aR[t]=this.readChar();return aR.join("")},cn.prototype.writeBoolean=function(e){return e===void 0&&(e=!1),this.writeUint8(e?255:0),this},cn.prototype.writeInt8=function(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this},cn.prototype.writeUint8=function(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this},cn.prototype.writeByte=function(e){return this.writeUint8(e)},cn.prototype.writeBytes=function(e){this.ensureAvailable(e.length);for(var t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this},cn.prototype.writeInt16=function(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this},cn.prototype.writeUint16=function(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this},cn.prototype.writeInt32=function(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this},cn.prototype.writeUint32=function(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this},cn.prototype.writeFloat32=function(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this},cn.prototype.writeFloat64=function(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this},cn.prototype.writeChar=function(e){return this.writeUint8(e.charCodeAt(0))},cn.prototype.writeChars=function(e){for(var t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this},cn.prototype.toArray=function(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)},cn.prototype._updateLastWrittenByte=function(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)};(function(e){function t(n){e.call(this),this.mimeType="application/vnd.ms-pki.stl",this.defaultName="surface",this.defaultExt="stl",this.surface=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getData=function(){var n=this.surface.index.length/3,r=new cn(2*n+3*n*4*4+80+4);r.skip(80),r.writeUint32(n);for(var i=new V,o=new V,a=new V,s=new V,l=0;l<n;l++){var c=[this.surface.index[3*l],this.surface.index[3*l+1],this.surface.index[3*l+2]];o.fromArray(this.surface.normal,3*c[0]),a.fromArray(this.surface.normal,3*c[1]),s.fromArray(this.surface.normal,3*c[2]),i.addVectors(o,a).add(s).normalize(),r.writeFloat32(i.x),r.writeFloat32(i.y),r.writeFloat32(i.z);for(var u=0;u<3;u++)i.fromArray(this.surface.position,3*c[u]),r.writeFloat32(i.x),r.writeFloat32(i.y),r.writeFloat32(i.z);r.writeUint16(0)}return new DataView(r.buffer)},t})(e_);var rc=function(){this.count=0,this.signals={countChanged:new en.Signal}};rc.prototype.clear=function(){this.change(-this.count)},rc.prototype.change=function(e){this.count+=e,this.signals.countChanged.dispatch(e,this.count),this.count<0&&Ge.warn("Counter.count below zero",this.count)},rc.prototype.increment=function(){this.change(1)},rc.prototype.decrement=function(){this.change(-1)},rc.prototype.listen=function(e){this.change(e.count),e.signals.countChanged.add(this.change,this)},rc.prototype.unlisten=function(e){var t=e.signals.countChanged;t.has(this.change,this)&&t.remove(this.change,this)},rc.prototype.onZeroOnce=function(e,t){var n=this;if(this.count===0)e.call(t);else{var r=function(){n.count===0&&(n.signals.countChanged.remove(r,n),e.call(t))};this.signals.countChanged.add(r,this)}},rc.prototype.dispose=function(){this.clear(),this.signals.countChanged.dispose()},On.add("shader/BasicLine.vert",`void main(){
#include begin_vertex
#include project_vertex
}`),On.add("shader/BasicLine.frag",`uniform vec3 uColor;
#include common
#include fog_pars_fragment
void main(){
gl_FragColor = vec4( uColor, 1.0 );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
}`),On.add("shader/Quad.vert",`varying vec2 vUv;
void main() {
vUv = uv;
gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`),On.add("shader/Quad.frag",`varying vec2 vUv;
uniform sampler2D tForeground;
uniform float scale;
void main() {
vec4 foreground = texture2D( tForeground, vUv );
gl_FragColor = foreground * scale;
}`);var LS=function(){this.signals={updated:new en.Signal},this.maxDuration=-1/0,this.minDuration=1/0,this.avgDuration=14,this.lastDuration=1/0,this.prevFpsTime=0,this.lastFps=1/0,this.lastFrames=1,this.frames=0,this.count=0,this.begin()};LS.prototype.update=function(){this.startTime=this.end(),this.currentTime=this.startTime,this.signals.updated.dispatch()},LS.prototype.begin=function(){this.startTime=window.performance.now(),this.lastFrames=this.frames},LS.prototype.end=function(){var e=window.performance.now();return this.count+=1,this.frames+=1,this.lastDuration=e-this.startTime,this.minDuration=Math.min(this.minDuration,this.lastDuration),this.maxDuration=Math.max(this.maxDuration,this.lastDuration),this.avgDuration-=this.avgDuration/30,this.avgDuration+=this.lastDuration/30,e>this.prevFpsTime+1e3&&(this.lastFps=this.frames,this.prevFpsTime=e,this.frames=0),e},On.add("shader/chunk/fog_fragment.glsl",`#ifdef USE_FOG
float depth = length( vViewPosition );
#ifdef FOG_EXP2
float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );
#else
float fogFactor = smoothstep( fogNear, fogFar, depth );
#endif
gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`),On.add("shader/chunk/interior_fragment.glsl",`if( gl_FrontFacing == false ){
#ifdef USE_INTERIOR_COLOR
outgoingLight.xyz = interiorColor;
#else
#ifdef DIFFUSE_INTERIOR
outgoingLight.xyz = vColor;
#endif
#endif
outgoingLight.xyz *= 1.0 - interiorDarkening;
}`),On.add("shader/chunk/matrix_scale.glsl",`float matrixScale( in mat4 m ){
vec4 r = m[ 0 ];
return sqrt( r[ 0 ] * r[ 0 ] + r[ 1 ] * r[ 1 ] + r[ 2 ] * r[ 2 ] );
}`),On.add("shader/chunk/nearclip_vertex.glsl",`#ifdef NEAR_CLIP
if( vViewPosition.z < clipNear - 5.0 )
gl_Position.z = 2.0 * gl_Position.w;
#endif`),On.add("shader/chunk/nearclip_fragment.glsl",`#ifdef NEAR_CLIP
if( vViewPosition.z < clipNear )
discard;
#endif`),On.add("shader/chunk/opaque_back_fragment.glsl",`#ifdef OPAQUE_BACK
#ifdef FLIP_SIDED
if( gl_FrontFacing == true ){
gl_FragColor.a = 1.0;
}
#else
if( gl_FrontFacing == false ){
gl_FragColor.a = 1.0;
}
#endif
#endif`),On.add("shader/chunk/radiusclip_vertex.glsl",`#ifdef RADIUS_CLIP
if( distance( vViewPosition, vClipCenter ) > clipRadius + 5.0 )
gl_Position.z = 2.0 * gl_Position.w;
#endif`),On.add("shader/chunk/radiusclip_fragment.glsl",`#ifdef RADIUS_CLIP
if( distance( vViewPosition, vClipCenter ) > clipRadius )
discard;
#endif`),On.add("shader/chunk/unpack_color.glsl",`vec3 unpackColor(float f) {
vec3 color;
color.r = floor(f / 256.0 / 256.0);
color.g = floor((f - color.r * 256.0 * 256.0) / 256.0);
color.b = floor(f - color.r * 256.0 * 256.0 - color.g * 256.0);
return color / 255.0;
}`);var Pot=/^(?!\/\/)\s*#include\s+(\S+)/gim,sR={};function Wy(e,t){t===void 0&&(t={});var n=e+"|";for(var r in t)n+=r+":"+t[r];if(!sR[n]){var i=function(a){if(a===void 0)return"";var s=[];for(var l in a){var c=a[l];c&&s.push("#define "+l+" "+c)}return s.join(`
`)+`
`}(t),o=On.get("shader/"+e);if(!o)throw new Error("empty shader, '"+e+"'");o=o.replace(Pot,function(a,s){var l="shader/chunk/"+s+".glsl",c=On.get(l)||mn[s];if(!c)throw new Error("empty chunk, '"+s+"'");return c}),sR[n]=i+o}return sR[n]}if(typeof WebGLRenderingContext<"u"){var Jc=WebGLRenderingContext.prototype,Mot=Jc.getShaderParameter;Jc.getShaderParameter=function(){return!Ze||Mot.apply(this,arguments)};var Eot=Jc.getShaderInfoLog;Jc.getShaderInfoLog=function(){return Ze?Eot.apply(this,arguments):""};var Tot=Jc.getProgramParameter;Jc.getProgramParameter=function(e,t){return!Ze&&t===Jc.LINK_STATUS||Tot.apply(this,arguments)};var Oot=Jc.getProgramInfoLog;Jc.getProgramInfoLog=function(){return Ze?Oot.apply(this,arguments):""}}var hoe=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];hoe.forEach(function(e){e.forEach(function(t){t[0]*=.0625,t[1]*=.0625})});var qy=function(e,t,n,r){this.canvas=document.createElement("canvas"),this._viewer=n,this._factor=K(r.factor,2),this._antialias=K(r.antialias,!1),this._onProgress=r.onProgress,this._onFinish=r.onFinish,this._antialias&&(this._factor*=2),this._n=this._factor*this._factor,this._width=this._viewer.width,this._height=this._viewer.height,this._antialias?(this.canvas.width=this._width*this._factor/2,this.canvas.height=this._height*this._factor/2):(this.canvas.width=this._width*this._factor,this.canvas.height=this._height*this._factor),this._ctx=this.canvas.getContext("2d"),this._viewerSampleLevel=n.sampleLevel,this._viewer.setSampling(-1)};qy.prototype._renderTile=function(e){var t=this._viewer,n=this._width,r=this._height,i=this._factor,o=e%i*n,a=Math.floor(e/i)*r;if(t.camera.setViewOffset(n*i,r*i,o,a,n,r),t.render(),this._antialias){var s=Math.round((o+n)/2)-Math.round(o/2),l=Math.round((a+r)/2)-Math.round(a/2);this._ctx.drawImage(t.renderer.domElement,Math.round(o/2),Math.round(a/2),s,l)}else this._ctx.drawImage(t.renderer.domElement,Math.floor(o),Math.floor(a),Math.ceil(n),Math.ceil(r));typeof this._onProgress=="function"&&this._onProgress(e+1,this._n,!1)},qy.prototype._finalize=function(){this._viewer.setSampling(this._viewerSampleLevel),this._viewer.camera.view=null,typeof this._onFinish=="function"&&this._onFinish(this._n+1,this._n,!1)},qy.prototype.render=function(){for(var e=0;e<=this._n;++e)e===this._n?this._finalize():this._renderTile(e)},qy.prototype.renderAsync=function(){for(var e=this,t=0,n=this._n,r=function(){t===n?e._finalize():e._renderTile(t),t+=1},i=0;i<=n;++i)setTimeout(r,0)};var lR=2*Math.PI,moe=180/Math.PI;function cR(e,t,n,r,i){n===void 0&&(n=1),r===void 0&&(r=0);var o=i?i.length:e.length/n,a=0,s=0;if(i)for(var l=0;l<o;++l){var c=(e[i[l]*n+r]+t)%t/t*lR-Math.PI;a+=Math.cos(c),s+=Math.sin(c)}else for(var u=r;u<o;u+=n){var f=(e[u]+t)%t/t*lR-Math.PI;a+=Math.cos(f),s+=Math.sin(f)}return a/=o,s/=o,(Math.atan2(s,a)+Math.PI)/lR*t}function Ac(e,t,n,r){r===void 0&&(r=0);for(var i=e.length,o=n||new Float32Array(i),a=0;a<i;a+=3)o[r+a+0]=(e[a+0]+t[a+0])/2,o[r+a+1]=(e[a+1]+t[a+1])/2,o[r+a+2]=(e[a+2]+t[a+2])/2;return o}function oT(e,t){for(var n=e.length,r=new Float32Array(n),i=0;i<n;i+=3)r[i+0]=t[i+0]-e[i+0],r[i+1]=t[i+1]-e[i+1],r[i+2]=t[i+2]-e[i+2];return r}function is(e,t,n){for(var r=n||new Float32Array(e),i=0;i<e;++i)r[i]=t;return r}function Yn(e,t,n,r,i){for(var o=i||new Float32Array(3*e),a=0;a<e;++a){var s=3*a;o[s+0]=t,o[s+1]=n,o[s+2]=r}return o}function T0(e){for(var t=new Float32Array(e),n=0;n<e;++n)t[n]=n;return t}function g$(e,t,n,r){n===void 0&&(n=0);for(var i=r||new Float32Array(e*t),o=0;o<e;++o)for(var a=n+o*t,s=0;s<t;++s)i[a+s]=o;return i}function uR(e,t){for(var n=e.length,r=new Float32Array(n*t),i=0;i<n;++i)for(var o=i*t,a=e[i],s=0;s<t;++s)r[o+s]=a;return r}function di(e,t,n,r,i){for(var o=0;o<i;++o)t[r+o]=e[n+o]}function bV(e,t,n,r){di(e,e,t,n,r)}function $S(e){for(var t=-1/0,n=0,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function DS(e){for(var t=1/0,n=0,r=e.length;n<r;++n)e[n]<t&&(t=e[n]);return t}function $N(e,t,n){t===void 0&&(t=1),n===void 0&&(n=0);for(var r=e.length,i=0,o=n;o<r;o+=t)i+=e[o];return i}function BS(e,t,n){return t===void 0&&(t=1),n===void 0&&(n=0),$N(e,t,n)/(e.length/t)}var Iot={trim:!1,factor:1,antialias:!1,transparent:!1,onProgress:void 0};function Rot(e,t){t===void 0&&(t={});var n=fs(t,Iot),r=n.trim,i=n.factor,o=n.antialias,a=n.transparent,s=e.renderer,l=e.camera,c=s.getClearAlpha(),u=s.getClearColor();function f(h){h===void 0&&(h=!1);var g=i;o&&(g*=2),h&&(g=1/g),e.scene.traverse(function(v){var m=v.material;m&&m.linewidth&&(m.linewidth*=g),m&&m.uniforms&&m.uniforms.size&&m.uniforms.size.__seen===void 0&&(m.uniforms.size.value*=g,m.uniforms.size.__seen=!0),m&&m.uniforms&&m.uniforms.linewidth&&m.uniforms.linewidth.__seen===void 0&&(m.uniforms.linewidth.value*=g,m.uniforms.linewidth.__seen=!0)}),e.scene.traverse(function(v){var m=v.material;m&&m.uniforms&&m.uniforms.size&&delete m.uniforms.size.__seen,m&&m.uniforms&&m.uniforms.linewidth&&delete m.uniforms.linewidth.__seen})}function d(h){if(r){var g=u;return function(v,m,y,_,b){var x,w,S,A,C=v.height,k=v.width,O=v.getContext("2d").getImageData(0,0,k,C).data;for(S=!1,w=0;w<C;w++){for(x=0;x<k;x++)if(O[A=4*(w*k+x)]!==m||O[A+1]!==y||O[A+2]!==_||O[A+3]!==b){S=!0;break}if(S)break}var T=w;for(S=!1,x=0;x<k;x++){for(w=0;w<C;w++)if(O[A=4*(w*k+x)]!==m||O[A+1]!==y||O[A+2]!==_||O[A+3]!==b){S=!0;break}if(S)break}var B=x;for(S=!1,w=C-1;w>=0;w--){for(x=k-1;x>=0;x--)if(O[A=4*(w*k+x)]!==m||O[A+1]!==y||O[A+2]!==_||O[A+3]!==b){S=!0;break}if(S)break}var R=w;for(S=!1,x=k-1;x>=0;x--){for(w=C-1;w>=0;w--)if(O[A=4*(w*k+x)]!==m||O[A+1]!==y||O[A+2]!==_||O[A+3]!==b){S=!0;break}if(S)break}var P=x,D=document.createElement("canvas");return D.width=P-B,D.height=R-T,D.getContext("2d").drawImage(v,B,T,D.width,D.height,0,0,D.width,D.height),D}(h,a?0:255*g.r,a?0:255*g.g,a?0:255*g.b,a?0:255)}return h}function p(h,g,v){typeof t.onProgress=="function"&&t.onProgress(h,g,v)}return new Promise(function(h,g){var v=new qy(s,l,e,{factor:i,antialias:o,onProgress:p,onFinish:function(m,y){d(v.canvas).toBlob(function(_){s.setClearAlpha(c),f(!0),e.requestRender(),p(y,y,!0),_?h(_):g("error creating image")},"image/png")}});s.setClearAlpha(a?0:1),f(),v.renderAsync()})}var fR=new V,_V=new lt,xV=new lt,wV=new rt,GA=new lt,WA=new lt;function dR(e,t){GA.getInverse(t.projectionMatrix),WA.copy(t.projectionMatrix).transpose(),e.traverse(function(n){var r=n.material;if(r){var i=r.uniforms;i&&(i.projectionMatrixInverse&&i.projectionMatrixInverse.value.copy(GA),i.projectionMatrixTranspose&&i.projectionMatrixTranspose.value.copy(WA))}})}function SV(e,t,n){var r=e.createShader(n);if(r)return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.log("error compiling shader "+r+": "+e.getShaderInfoLog(r)),e.deleteShader(r),null);console.log("error creating WebGL shader "+n)}function pR(e,t){var n=e.getExtension(t);return n||console.log("extension '"+t+"' not available"),n}var kot=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);function T2(e){var t=document.createElement("canvas");t.width=16,t.height=16,t.style.width="16px",t.style.height="16px";var n=t.getContext("webgl")||t.getContext("experimental-webgl");if(!n)return console.log("error creating webgl context for "+e),!1;if(!(n instanceof WebGLRenderingContext))return console.log("Got unexpected type for WebGL rendering context"),!1;pR(n,"OES_texture_float"),pR(n,"OES_texture_half_float"),pR(n,"WEBGL_color_buffer_float");var r=SV(n,`
attribute vec4 a_position;

void main() {
  gl_Position = a_position;
}`,n.VERTEX_SHADER),i=SV(n,`
precision mediump float;
uniform vec4 u_color;
uniform sampler2D u_texture;

void main() {
  gl_FragColor = texture2D(u_texture, vec2(0.5, 0.5)) * u_color;
}`,n.FRAGMENT_SHADER);if(!r||!i)return!1;var o=function(v,m,y,_){var b=v.createProgram();if(b)return m.forEach(function(x){return v.attachShader(b,x)}),y&&y.forEach(function(x,w){v.bindAttribLocation(b,_?_[w]:w,x)}),v.linkProgram(b),v.getProgramParameter(b,v.LINK_STATUS)?b:(console.log("error linking program: "+v.getProgramInfoLog(b)),v.deleteProgram(b),null);console.log("error creating WebGL program")}(n,[r,i]);if(!o)return console.log("error creating WebGL program"),!1;n.useProgram(o);var a=n.getAttribLocation(o,"a_position"),s=n.getUniformLocation(o,"u_color");if(!s)return console.log("error getting 'u_color' uniform location"),!1;var l=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,l),n.bufferData(n.ARRAY_BUFFER,kot,n.STATIC_DRAW),n.enableVertexAttribArray(a),n.vertexAttribPointer(a,2,n.FLOAT,!1,0,0);var c=n.createTexture(),u=new Uint8Array([255,255,255,255]);n.bindTexture(n.TEXTURE_2D,c),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,u);var f=n.createTexture();n.bindTexture(n.TEXTURE_2D,f),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,e,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);var d=n.createFramebuffer();if(n.bindFramebuffer(n.FRAMEBUFFER,d),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,f,0),n.checkFramebufferStatus(n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE)return console.log("error creating framebuffer for "+e),!1;n.bindTexture(n.TEXTURE_2D,c),n.uniform4fv(s,[0,10,20,1]),n.drawArrays(n.TRIANGLES,0,6),n.bindTexture(n.TEXTURE_2D,f),n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(1,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.uniform4fv(s,[0,.1,.05,1]),n.drawArrays(n.TRIANGLES,0,6);var p=new Uint8Array(4);if(n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,p),p[0]!==0||p[1]<248||p[2]<248||p[3]<254)return console.log("not able to actually render to "+e+" texture"),!1;if(e===n.FLOAT){n.bindFramebuffer(n.FRAMEBUFFER,d);var h=new Float32Array(4);n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,h);var g=n.getError();if(g)return console.log("error reading pixels as float: '"+function(v,m){switch(m){case v.NO_ERROR:return"no error";case v.INVALID_ENUM:return"invalid enum";case v.INVALID_VALUE:return"invalid value";case v.INVALID_OPERATION:return"invalid operation";case v.INVALID_FRAMEBUFFER_OPERATION:return"invalid framebuffer operation";case v.OUT_OF_MEMORY:return"out of memory";case v.CONTEXT_LOST_WEBGL:return"context lost"}return"unknown error"}(n,g)+"'"),!1}return!0}var Lot=new Float32Array(100),$ot=new Uint8Array(100),CV=[12,7,13,17,11,6,8,18,16,2,14,22,10,1,3,9,19,23,21,15,5,0,4,24,20],O2=new lt;function Dot(e,t,n,r,i){var o=i.uniforms,a=[];if(o&&(o.objectId&&(o.objectId.value=Of?this.id:this.id/255,a.push("objectId")),(o.modelViewMatrixInverse||o.modelViewMatrixInverseTranspose||o.modelViewProjectionMatrix||o.modelViewProjectionMatrixInverse)&&this.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,this.matrixWorld),o.modelViewMatrixInverse&&(o.modelViewMatrixInverse.value.getInverse(this.modelViewMatrix),a.push("modelViewMatrixInverse")),o.modelViewMatrixInverseTranspose&&(o.modelViewMatrixInverse?o.modelViewMatrixInverseTranspose.value.copy(o.modelViewMatrixInverse.value).transpose():o.modelViewMatrixInverseTranspose.value.getInverse(this.modelViewMatrix).transpose(),a.push("modelViewMatrixInverseTranspose")),o.modelViewProjectionMatrix&&(o.modelViewProjectionMatrix.value.multiplyMatrices(n.projectionMatrix,this.modelViewMatrix),a.push("modelViewProjectionMatrix")),o.modelViewProjectionMatrixInverse&&(o.modelViewProjectionMatrix?(O2.copy(o.modelViewProjectionMatrix.value),o.modelViewProjectionMatrixInverse.value.getInverse(O2)):(O2.multiplyMatrices(n.projectionMatrix,this.modelViewMatrix),o.modelViewProjectionMatrixInverse.value.getInverse(O2)),a.push("modelViewProjectionMatrixInverse")),a.length)){var s=e.properties.get(i);if(s.program){var l=e.getContext(),c=s.program;l.useProgram(c.program);var u=c.getUniforms();a.forEach(function(f){u.setValue(l,f,o[f].value)})}}}var an=function(e){if(this.boundingBox=new cr,this.boundingBoxSize=new V,this.boundingBoxLength=0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this.distVector=new V,this.signals={ticked:new en.Signal,rendered:new en.Signal},typeof e=="string"){var t=document.getElementById(e);this.container=t===null?document.createElement("div"):t}else e instanceof HTMLElement?this.container=e:this.container=document.createElement("div");if(this.container===document.body)this.width=window.innerWidth||1,this.height=window.innerHeight||1;else{var n=this.container.getBoundingClientRect();this.width=n.width||1,this.height=n.height||1,this.container.style.overflow="hidden"}this.wrapper=document.createElement("div"),this.wrapper.style.position="relative",this.container.appendChild(this.wrapper),this._initParams(),this._initStats(),this._initCamera(),this._initScene(),this._initRenderer()!==!1?(this._initHelper(),this.setBackground(),this.setFog(),this.animate=this.animate.bind(this)):Ge.error("Viewer: could not initialize renderer")},hR={cameraDistance:{configurable:!0}};an.prototype._initParams=function(){this.parameters={fogColor:new ht(0),fogNear:50,fogFar:100,backgroundColor:new ht(0),cameraType:"perspective",cameraFov:40,cameraEyeSep:.3,cameraZ:-80,clipNear:0,clipFar:100,clipDist:10,clipMode:"scene",clipScale:"relative",lightColor:new ht(14540253),lightIntensity:1,ambientColor:new ht(14540253),ambientIntensity:.2,sampleLevel:0,rendererEncoding:Ro}},an.prototype._initCamera=function(){var e=new V(0,0,0),t=this.width,n=this.height;this.perspectiveCamera=new fi(this.parameters.cameraFov,t/n),this.perspectiveCamera.position.z=this.parameters.cameraZ,this.perspectiveCamera.lookAt(e),this.orthographicCamera=new bd(t/-2,t/2,n/2,n/-2),this.orthographicCamera.position.z=this.parameters.cameraZ,this.orthographicCamera.lookAt(e),this.stereoCamera=new Vie,this.stereoCamera.aspect=.5,this.stereoCamera.eyeSep=this.parameters.cameraEyeSep;var r=this.parameters.cameraType;if(r==="orthographic")this.camera=this.orthographicCamera;else{if(r!=="perspective"&&r!=="stereo")throw new Error("Unknown cameraType '"+r+"'");this.camera=this.perspectiveCamera}this.camera.updateProjectionMatrix()},an.prototype._initStats=function(){this.stats=new LS},an.prototype._initScene=function(){this.scene||(this.scene=new Mv,this.scene.name="scene"),this.rotationGroup=new Kn,this.rotationGroup.name="rotationGroup",this.scene.add(this.rotationGroup),this.translationGroup=new Kn,this.translationGroup.name="translationGroup",this.rotationGroup.add(this.translationGroup),this.modelGroup=new Kn,this.modelGroup.name="modelGroup",this.translationGroup.add(this.modelGroup),this.pickingGroup=new Kn,this.pickingGroup.name="pickingGroup",this.translationGroup.add(this.pickingGroup),this.backgroundGroup=new Kn,this.backgroundGroup.name="backgroundGroup",this.translationGroup.add(this.backgroundGroup),this.helperGroup=new Kn,this.helperGroup.name="helperGroup",this.translationGroup.add(this.helperGroup),this.scene.fog=new hA(this.parameters.fogColor.getHex()),this.spotLight=new DA(this.parameters.lightColor.getHex(),this.parameters.lightIntensity),this.scene.add(this.spotLight),this.ambientLight=new BA(this.parameters.ambientColor.getHex(),this.parameters.ambientIntensity),this.scene.add(this.ambientLight)},an.prototype._initRenderer=function(){var e=window.devicePixelRatio,t=this.width,n=this.height;try{this.renderer=new Bx({preserveDrawingBuffer:!0,alpha:!0,antialias:!0})}catch{return this.wrapper.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100%;"><p style="padding:15px;text-align:center;">Your browser/graphics card does not seem to support <a target="_blank" href="https://en.wikipedia.org/wiki/WebGL">WebGL</a>.<br/><br/>Find out how to get it <a target="_blank" href="http://get.webgl.org/">here</a>.</p></div>',!1}this.renderer.setPixelRatio(e),this.renderer.setSize(t,n),this.renderer.autoClear=!1,this.renderer.sortObjects=!0,this.renderer.outputEncoding=this.parameters.rendererEncoding;var r=this.renderer.getContext();this.renderer.capabilities.isWebGL2?(yV(!0),vV(this.renderer.extensions.get("EXT_color_buffer_float")),this.supportsHalfFloat=!0):(yV(this.renderer.extensions.get("EXT_frag_depth")),this.renderer.extensions.get("OES_element_index_uint"),vV(this.renderer.extensions.get("OES_texture_float")&&this.renderer.extensions.get("WEBGL_color_buffer_float")||this.renderer.extensions.get("OES_texture_float")&&T2(r.FLOAT)),this.renderer.extensions.get("OES_texture_float"),this.supportsHalfFloat=this.renderer.extensions.get("OES_texture_half_float")&&T2(36193)),this.wrapper.appendChild(this.renderer.domElement);var i=t*e,o=n*e;Ze&&console.log(JSON.stringify({Browser:coe,OES_texture_float:!!this.renderer.extensions.get("OES_texture_float"),OES_texture_half_float:!!this.renderer.extensions.get("OES_texture_half_float"),WEBGL_color_buffer_float:!!this.renderer.extensions.get("WEBGL_color_buffer_float"),"testTextureSupport Float":T2(r.FLOAT),"testTextureSupport HalfFloat":T2(36193),"this.supportsHalfFloat":this.supportsHalfFloat,SupportsReadPixelsFloat:Of},null,2)),this.pickingTarget=new qo(i,o,{minFilter:sr,magFilter:sr,stencilBuffer:!1,format:wa,type:Of?pu:ah}),this.pickingTarget.texture.generateMipmaps=!1,this.pickingTarget.texture.encoding=this.parameters.rendererEncoding,this.renderer.setRenderTarget(this.pickingTarget),this.renderer.clear(),this.renderer.setRenderTarget(null),this.sampleTarget=new qo(i,o,{minFilter:mi,magFilter:mi,format:wa}),this.sampleTarget.texture.encoding=this.parameters.rendererEncoding,this.holdTarget=new qo(i,o,{minFilter:sr,magFilter:sr,format:wa,type:ah}),this.holdTarget.texture.encoding=this.parameters.rendererEncoding,this.compositeUniforms={tForeground:new X1(this.sampleTarget.texture),scale:new X1(1)},this.compositeMaterial=new Ei({uniforms:this.compositeUniforms,vertexShader:Wy("Quad.vert"),fragmentShader:Wy("Quad.frag"),premultipliedAlpha:!0,transparent:!0,blending:_L,depthTest:!1,depthWrite:!1}),this.compositeCamera=new bd(-1,1,1,-1,0,1),this.compositeScene=new Mv,this.compositeScene.name="compositeScene",this.compositeScene.add(new hr(new P1(2,2),this.compositeMaterial))},an.prototype._initHelper=function(){var e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),t=new Float32Array(24),n=new At;n.setIndex(new Dt(e,1)),n.setAttribute("position",new Dt(t,3));var r=new Ei({uniforms:{uColor:{value:new ht("skyblue")}},vertexShader:Wy("BasicLine.vert"),fragmentShader:Wy("BasicLine.frag")});this.boundingBoxMesh=new Gr(n,r),this.helperGroup.add(this.boundingBoxMesh)},an.prototype.updateHelper=function(){var e=this.boundingBoxMesh.geometry.attributes.position,t=e.array,n=this.boundingBox,r=n.min,i=n.max;t[0]=i.x,t[1]=i.y,t[2]=i.z,t[3]=r.x,t[4]=i.y,t[5]=i.z,t[6]=r.x,t[7]=r.y,t[8]=i.z,t[9]=i.x,t[10]=r.y,t[11]=i.z,t[12]=i.x,t[13]=i.y,t[14]=r.z,t[15]=r.x,t[16]=i.y,t[17]=r.z,t[18]=r.x,t[19]=r.y,t[20]=r.z,t[21]=i.x,t[22]=r.y,t[23]=r.z,e.needsUpdate=!0,this.boundingBox.isEmpty()||this.boundingBoxMesh.geometry.computeBoundingSphere()},hR.cameraDistance.get=function(){return Math.abs(this.camera.position.z)},hR.cameraDistance.set=function(e){this.camera.position.z=-e},an.prototype.add=function(e,t){var n=this;t?t.forEach(function(r){return n.addBuffer(e,r)}):this.addBuffer(e),e.group.name="meshGroup",e.wireframeGroup.name="wireframeGroup",e.parameters.background?(this.backgroundGroup.add(e.group),this.backgroundGroup.add(e.wireframeGroup)):(this.modelGroup.add(e.group),this.modelGroup.add(e.wireframeGroup)),e.pickable&&this.pickingGroup.add(e.pickingGroup),Ze&&this.updateHelper()},an.prototype.addBuffer=function(e,t){function n(a){a instanceof Kn?a.children.forEach(n):(a.userData.buffer=e,a.userData.instance=t,a.onBeforeRender=Dot)}var r=e.getMesh();t&&r.applyMatrix4(t.matrix),n(r),e.group.add(r);var i=e.getWireframeMesh();if(t&&(i.matrix.copy(r.matrix),i.position.copy(r.position),i.quaternion.copy(r.quaternion),i.scale.copy(r.scale)),n(i),e.wireframeGroup.add(i),e.pickable){var o=e.getPickingMesh();t&&(o.matrix.copy(r.matrix),o.position.copy(r.position),o.quaternion.copy(r.quaternion),o.scale.copy(r.scale)),n(o),e.pickingGroup.add(o)}t?this._updateBoundingBox(e.geometry,e.matrix,t.matrix):this._updateBoundingBox(e.geometry,e.matrix)},an.prototype.remove=function(e){this.translationGroup.children.forEach(function(t){t.remove(e.group),t.remove(e.wireframeGroup)}),e.pickable&&this.pickingGroup.remove(e.pickingGroup),this.updateBoundingBox(),Ze&&this.updateHelper()},an.prototype._updateBoundingBox=function(e,t,n){var r=this.boundingBox;function i(a,s,l){a.boundingBox==null&&a.computeBoundingBox();var c=a.boundingBox.clone();s&&c.applyMatrix4(s),l&&c.applyMatrix4(l),c.min.equals(c.max)&&c.expandByScalar(5),r.union(c)}function o(a){var s,l;a.geometry!==void 0&&(a.userData.buffer&&(s=a.userData.buffer.matrix),a.userData.instance&&(l=a.userData.instance.matrix),i(a.geometry,s,l))}e?i(e,t,n):(r.makeEmpty(),this.modelGroup.traverse(o),this.backgroundGroup.traverse(o)),r.getSize(this.boundingBoxSize),this.boundingBoxLength=this.boundingBoxSize.length()},an.prototype.updateBoundingBox=function(){this._updateBoundingBox(),Ze&&this.updateHelper()},an.prototype.getPickingPixels=function(){var e=this.width,t=this.height,n=e*t*4,r=Of?new Float32Array(n):new Uint8Array(n);return this.render(!0),this.renderer.readRenderTargetPixels(this.pickingTarget,0,0,e,t,r),r},an.prototype.getImage=function(e){var t=this;return new Promise(function(n){if(e){var r=t,i=r.width,o=r.height,a=i*o*4,s=t.getPickingPixels();if(Of){for(var l=new Uint8Array(a),c=0;c<a;++c)l[c]=Math.round(255*s[c]);s=l}var u=document.createElement("canvas");u.width=i,u.height=o;var f=u.getContext("2d"),d=f.getImageData(0,0,i,o);d.data.set(s),f.putImageData(d,0,0),u.toBlob(n,"image/png")}else t.renderer.domElement.toBlob(n,"image/png")})},an.prototype.makeImage=function(e){return e===void 0&&(e={}),Rot(this,e)},an.prototype.setLight=function(e,t,n,r){var i=this.parameters;e!==void 0&&i.lightColor.set(e),t!==void 0&&(i.lightIntensity=t),n!==void 0&&i.ambientColor.set(n),r!==void 0&&(i.ambientIntensity=r),this.requestRender()},an.prototype.setFog=function(e,t,n){var r=this.parameters;e!==void 0&&r.fogColor.set(e),t!==void 0&&(r.fogNear=t),n!==void 0&&(r.fogFar=n),this.requestRender()},an.prototype.setBackground=function(e){var t=this.parameters;e&&t.backgroundColor.set(e),this.setFog(t.backgroundColor),this.renderer.setClearColor(t.backgroundColor,0),this.renderer.domElement.style.backgroundColor=t.backgroundColor.getStyle(),this.requestRender()},an.prototype.setSampling=function(e){e!==void 0&&(this.parameters.sampleLevel=e,this.sampleLevel=e),this.requestRender()},an.prototype.setOutputEncoding=function(e){this.parameters.rendererEncoding=e,this.renderer.outputEncoding=e,this.pickingTarget.texture.encoding=e,this.sampleTarget.texture.encoding=e,this.holdTarget.texture.encoding=e},an.prototype.setColorWorkflow=function(e){if(e!="linear"&&e!="sRGB")throw new Error("setColorWorkflow: invalid color workflow "+e);aoe=e=="linear"?"linear":"sRGB",this.setOutputEncoding(e=="linear"?Lx:Ro),this.requestRender()},an.prototype.setCamera=function(e,t,n){var r=this.parameters;if(e&&(r.cameraType=e),t&&(r.cameraFov=t),n&&(r.cameraEyeSep=n),r.cameraType==="orthographic")this.camera!==this.orthographicCamera&&(this.camera=this.orthographicCamera,this.camera.position.copy(this.perspectiveCamera.position),this.camera.up.copy(this.perspectiveCamera.up),this.updateZoom());else{if(r.cameraType!=="perspective"&&r.cameraType!=="stereo")throw new Error("Unknown cameraType '"+r.cameraType+"'");this.camera!==this.perspectiveCamera&&(this.camera=this.perspectiveCamera,this.camera.position.copy(this.orthographicCamera.position),this.camera.up.copy(this.orthographicCamera.up))}this.perspectiveCamera.fov=r.cameraFov,this.stereoCamera.eyeSep=r.cameraEyeSep,this.camera.updateProjectionMatrix(),this.requestRender()},an.prototype.setClip=function(e,t,n,r,i){var o=this.parameters;e!==void 0&&(o.clipNear=e),t!==void 0&&(o.clipFar=t),n!==void 0&&(o.clipDist=n),r!==void 0&&(o.clipMode=r),i!==void 0&&(o.clipScale=i),this.requestRender()},an.prototype.setSize=function(e,t){this.width=e||1,this.height=t||1,this.perspectiveCamera.aspect=this.width/this.height,this.orthographicCamera.left=-this.width/2,this.orthographicCamera.right=this.width/2,this.orthographicCamera.top=this.height/2,this.orthographicCamera.bottom=-this.height/2,this.camera.updateProjectionMatrix();var n=window.devicePixelRatio;this.renderer.setPixelRatio(n),this.renderer.setSize(e,t);var r=this.width*n,i=this.height*n;this.pickingTarget.setSize(r,i),this.sampleTarget.setSize(r,i),this.holdTarget.setSize(r,i),this.requestRender()},an.prototype.handleResize=function(){if(this.container===document.body)this.setSize(window.innerWidth,window.innerHeight);else{var e=this.container.getBoundingClientRect();this.setSize(e.width,e.height)}},an.prototype.updateInfo=function(e){var t=this.info,n=t.memory,r=t.render;if(e)n.programs=0,n.geometries=0,n.textures=0,r.calls=0,r.vertices=0,r.points=0;else{var i=this.renderer.info,o=i.memory,a=i.render;n.geometries=o.geometries,n.textures=o.textures,r.calls+=a.calls,r.faces+=a.triangles,r.points+=a.points}},an.prototype.animate=function(){if(this.signals.ticked.dispatch(this.stats),window.performance.now()-this.stats.startTime>500&&!this.isStill&&this.sampleLevel<3&&this.sampleLevel!==-1){var e=this.sampleLevel;this.sampleLevel=3,this.renderPending=!0,this.render(),this.isStill=!0,this.sampleLevel=e,Ze&&Ge.log("rendered still frame")}this.frameRequest=window.requestAnimationFrame(this.animate)},an.prototype.pick=function(e,t){if(this.parameters.cameraType==="stereo")return{pid:0,instance:void 0,picker:void 0};e*=window.devicePixelRatio,t*=window.devicePixelRatio,e=Math.max(e-2,0),t=Math.max(t-2,0);var n,r,i=0,o=Of?Lot:$ot;this.render(!0),this.renderer.readRenderTargetPixels(this.pickingTarget,e,t,5,5,o);for(var a=0;a<CV.length;a++){var s=4*CV[a],l=Math.round(o[s+3]),c=this.pickingGroup.getObjectById(l);c&&(n=c.userData.instance,r=c.userData.buffer.picking,i=Of?Math.round(255*o[s])<<16&16711680|Math.round(255*o[s+1])<<8&65280|255&Math.round(255*o[s+2]):o[s]<<16|o[s+1]<<8|o[s+2])}return{pid:i,instance:n,picker:r}},an.prototype.requestRender=function(){var e=this;this.renderPending||(window.performance.now()-this.stats.startTime>22&&(this.stats.begin(),this.isStill=!1),this.renderPending=!0,window.requestAnimationFrame(function(){e.render(),e.stats.update()}))},an.prototype.updateZoom=function(){var e=jr(this.perspectiveCamera.fov),t=2*Math.tan(e/2)*this.cameraDistance;this.orthographicCamera.zoom=this.height/t},an.prototype.absoluteToRelative=function(e){return 50*(1-e/this.bRadius)},an.prototype.relativeToAbsolute=function(e){return this.bRadius*(1-e/50)},an.prototype.__updateClipping=function(){var e=this.parameters;this.bRadius=Math.max(10,.5*this.boundingBoxLength),isFinite(this.bRadius)||(this.bRadius=50),this.camera.getWorldPosition(this.distVector),this.cDist=this.distVector.length(),this.cDist||(this.cameraDistance=Math.abs(e.cameraZ),this.cDist=Math.abs(e.cameraZ));var t=this.scene.fog;if(t.color.set(e.fogColor),e.clipMode==="camera")this.camera.near=e.clipNear,this.camera.far=e.clipFar,t.near=e.fogNear,t.far=e.fogFar;else if(e.clipScale==="absolute")this.camera.near=this.cDist-e.clipNear,this.camera.far=this.cDist+e.clipFar,t.near=this.cDist-e.fogNear,t.far=this.cDist+e.fogFar;else{var n=(50-e.clipNear)/50,r=-(50-e.clipFar)/50;this.camera.near=this.cDist-this.bRadius*n,this.camera.far=this.cDist+this.bRadius*r;var i=(50-e.fogNear)/50,o=-(50-e.fogFar)/50;t.near=this.cDist-this.bRadius*i,t.far=this.cDist+this.bRadius*o}e.clipMode!=="camera"&&(this.camera.type==="PerspectiveCamera"?(this.camera.near=Math.max(.1,e.clipDist,this.camera.near),this.camera.far=Math.max(1,this.camera.far),t.near=Math.max(.1,t.near),t.far=Math.max(1,t.far)):this.camera.type==="OrthographicCamera"&&e.clipDist>0&&(this.camera.near=Math.max(e.clipDist,this.camera.near)))},an.prototype.__updateCamera=function(){var e=this.camera;e.updateMatrix(),e.updateMatrixWorld(!0),e.updateProjectionMatrix(),function(t,n,r,i,o){var a=new rt;r.getSize(a);var s=a.height,l=r.getPixelRatio(),c=n.type==="OrthographicCamera";wV.set(a.width,a.height),GA.getInverse(n.projectionMatrix),WA.copy(n.projectionMatrix).transpose(),t.traverse(function(u){var f=u.material;if(f){var d=f.uniforms;if(d){if(f.clipNear){var p=(50-f.clipNear)/50,h=i-o*p;d.clipNear.value=h}d.canvasHeight&&(d.canvasHeight.value=s),d.resolution&&d.resolution.value.copy(wV),d.pixelRatio&&(d.pixelRatio.value=l),d.projectionMatrixInverse&&d.projectionMatrixInverse.value.copy(GA),d.projectionMatrixTranspose&&d.projectionMatrixTranspose.value.copy(WA),d.ortho&&(d.ortho.value=c)}}})}(this.scene,e,this.renderer,this.cDist,this.bRadius),function(t,n){t.traverseVisible(function(r){if(r instanceof T1&&r.userData.buffer.parameters.sortParticles){var i=r.geometry.attributes,o=i.position.count;if(o!==0){var a,s,l,c,u,f,d;_V.multiplyMatrices(n.matrixWorldInverse,r.matrixWorld),xV.multiplyMatrices(n.projectionMatrix,_V),r.userData.sortData?(a=r.userData.sortData,l=a.__zArray,s=a.__sortArray,c=a.__cmpFn):(l=new Float32Array(o),s=new Uint32Array(o),a={__zArray:l,__sortArray:s,__cmpFn:c=function(b,x){var w=l[b],S=l[x];return w>S?1:w<S?-1:0}},r.userData.sortData=a);for(var p=0;p<o;++p)fR.fromArray(i.position.array,3*p),fR.applyMatrix4(xV),l[p]=-fR.z,s[p]=p;for(var h in function(b,x,w,S){w===void 0&&(w=0),x=x||function(z,N){return z>N?1:z<N?-1:0};var A,C,k,O=[],T=-1,B=w,R=S=(S||b.length)-1;function P(z,N){var H=b[z];b[z]=b[N],b[N]=H}for(;;)if(R-B<=25){for(var D=B+1;D<=R;++D){for(A=b[D],C=D-1;C>=B&&x(b[C],A)>0;)b[C+1]=b[C],--C;b[C+1]=A}if(T===-1)break;R=O[T--],B=O[T--]}else{for(k=R,P(B+R>>1,C=B+1),x(b[B],b[R])>0&&P(B,R),x(b[C],b[R])>0&&P(C,R),x(b[B],b[C])>0&&P(B,C),A=b[C];;){do C++;while(x(b[C],A)<0);do k--;while(x(b[k],A)>0);if(k<C)break;P(C,k)}b[B+1]=b[k],b[k]=A,R-C+1>=k-B?(O[++T]=C,O[++T]=R,R=k-1):(O[++T]=B,O[++T]=k-1,B=C)}}(s,c),i){var g=i[h],v=g.array,m=g.itemSize;a[h]||(a[h]=new Float32Array(m*o)),d=a[h],a[h]=v;for(var y=0;y<o;++y){u=s[y];for(var _=0;_<m;++_)f=u*m+_,d[y*m+_]=v[f]}i[h].array=d,i[h].needsUpdate=!0}}}})}(this.scene,e)},an.prototype.__setVisibility=function(e,t,n,r){this.modelGroup.visible=e,this.pickingGroup.visible=t,this.backgroundGroup.visible=n,this.helperGroup.visible=r},an.prototype.__updateLights=function(){this.spotLight.color.set(this.parameters.lightColor),this.spotLight.intensity=this.parameters.lightIntensity,this.distVector.copy(this.camera.position).setLength(100*this.boundingBoxLength),this.spotLight.position.copy(this.camera.position).add(this.distVector),this.ambientLight.color.set(this.parameters.ambientColor),this.ambientLight.intensity=this.parameters.ambientIntensity},an.prototype.__renderPickingGroup=function(e){this.renderer.setRenderTarget(this.pickingTarget||null),this.renderer.clear(),this.__setVisibility(!1,!0,!1,!1),this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.updateInfo()},an.prototype.__renderModelGroup=function(e,t){this.renderer.setRenderTarget(t||null),this.renderer.clear(),this.__setVisibility(!1,!1,!0,!1),this.renderer.render(this.scene,e),this.renderer.clear(!1,!0,!0),this.updateInfo(),this.__setVisibility(!0,!1,!1,Ze),this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.updateInfo()},an.prototype.__renderSuperSample=function(e,t){var n=hoe[Math.max(0,Math.min(this.sampleLevel,5))],r=1/n.length;this.compositeUniforms.tForeground.value=this.sampleTarget.texture;var i=this.sampleTarget.width,o=this.sampleTarget.height;this.parameters.cameraType==="stereo"&&(i/=2);for(var a=0;a<n.length;++a){var s=n[a];e.setViewOffset(i,o,s[0],s[1],i,o),e.updateProjectionMatrix(),dR(this.scene,e);var l=r;l+=.03125*((a+.5)/n.length-.5),this.compositeUniforms.scale.value=l,this.__renderModelGroup(e,this.sampleTarget),this.renderer.setRenderTarget(this.holdTarget),a===0&&this.renderer.clear(),this.renderer.render(this.compositeScene,this.compositeCamera)}this.compositeUniforms.scale.value=1,this.compositeUniforms.tForeground.value=this.holdTarget.texture,e.clearViewOffset(),this.renderer.setRenderTarget(t||null),this.renderer.clear(),this.renderer.render(this.compositeScene,this.compositeCamera)},an.prototype.__renderStereo=function(e,t){e===void 0&&(e=!1);var n=this.stereoCamera;n.update(this.perspectiveCamera);var r=this.renderer,i=new rt;r.getSize(i),r.setScissorTest(!0),r.setScissor(0,0,i.width/2,i.height),r.setViewport(0,0,i.width/2,i.height),dR(this.scene,n.cameraL),this.__render(e,n.cameraL),r.setScissor(i.width/2,0,i.width/2,i.height),r.setViewport(i.width/2,0,i.width/2,i.height),dR(this.scene,n.cameraR),this.__render(e,n.cameraR),r.setScissorTest(!1),r.setViewport(0,0,i.width,i.height)},an.prototype.__render=function(e,t,n){e===void 0&&(e=!1),e?this.lastRenderedPicking||this.__renderPickingGroup(t):this.sampleLevel>0&&this.parameters.cameraType!=="stereo"?this.__renderSuperSample(t,n):this.__renderModelGroup(t,n)},an.prototype.render=function(e,t){if(e===void 0&&(e=!1),this.rendering)Ge.warn("'tried to call 'render' from within 'render'");else{this.rendering=!0;try{this.__updateClipping(),this.__updateCamera(),this.__updateLights(),this.updateInfo(!0),this.parameters.cameraType==="stereo"?this.__renderStereo(e,t):this.__render(e,this.camera,t),this.lastRenderedPicking=e}finally{this.rendering=!1,this.renderPending=!1}this.signals.rendered.dispatch()}},an.prototype.clear=function(){Ge.log("scene cleared"),this.scene.remove(this.rotationGroup),this._initScene(),this.renderer.clear()},an.prototype.dispose=function(){this.renderer.dispose(),window.cancelAnimationFrame(this.frameRequest)},Object.defineProperties(an.prototype,hR);function AV(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;return Math.sqrt(t*t+n*n)}var xo=function(e,t){t===void 0&&(t={}),this.domElement=e,this.signals={moved:new en.Signal,scrolled:new en.Signal,dragged:new en.Signal,dropped:new en.Signal,clicked:new en.Signal,hovered:new en.Signal,doubleClicked:new en.Signal},this.position=new rt,this.prevPosition=new rt,this.down=new rt,this.canvasPosition=new rt,this.prevClickCP=new rt,this.moving=!1,this.hovering=!0,this.scrolled=!1,this.lastMoved=1/0,this.which=0,this.buttons=0,this.pressed=!1,this.altKey=!1,this.ctrlKey=!1,this.metaKey=!1,this.shiftKey=!1,this.domElement.style.touchAction="none",this.hoverTimeout=K(t.hoverTimeout,50),this.handleScroll=K(t.handleScroll,!0),this.doubleClickSpeed=K(t.doubleClickSpeed,500),this._listen=this._listen.bind(this),this._onMousewheel=this._onMousewheel.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMousedown=this._onMousedown.bind(this),this._onMouseup=this._onMouseup.bind(this),this._onContextmenu=this._onContextmenu.bind(this),this._onTouchstart=this._onTouchstart.bind(this),this._onTouchend=this._onTouchend.bind(this),this._onTouchmove=this._onTouchmove.bind(this),this._listen();var n={passive:!1};document.addEventListener("mousewheel",this._onMousewheel,n),document.addEventListener("wheel",this._onMousewheel,n),document.addEventListener("MozMousePixelScroll",this._onMousewheel,n),document.addEventListener("mousemove",this._onMousemove,n),document.addEventListener("mousedown",this._onMousedown,n),document.addEventListener("mouseup",this._onMouseup,n),document.addEventListener("contextmenu",this._onContextmenu,n),document.addEventListener("touchstart",this._onTouchstart,n),document.addEventListener("touchend",this._onTouchend,n),document.addEventListener("touchmove",this._onTouchmove,n)},PV={key:{configurable:!0}};PV.key.get=function(){var e=0;return this.altKey&&(e+=1),this.ctrlKey&&(e+=2),this.metaKey&&(e+=4),this.shiftKey&&(e+=8),e},xo.prototype.setParameters=function(e){e===void 0&&(e={}),this.hoverTimeout=K(e.hoverTimeout,this.hoverTimeout)},xo.prototype._listen=function(){var e=window.performance.now(),t=this.canvasPosition;this.doubleClickPending&&e-this.lastClicked>this.doubleClickSpeed&&(this.doubleClickPending=!1),e-this.lastMoved>this.hoverTimeout&&(this.moving=!1),(this.scrolled||!this.moving&&!this.hovering)&&(this.scrolled=!1,this.hoverTimeout!==-1&&this.overElement&&(this.hovering=!0,this.signals.hovered.dispatch(t.x,t.y))),this.frameRequest=window.requestAnimationFrame(this._listen)},xo.prototype._onMousewheel=function(e){var t=this;if(e.target===this.domElement&&this.handleScroll){e.preventDefault(),this._setKeys(e);var n=0;"deltaY"in e&&"deltaMode"in e&&e.deltaY!==void 0&&e.deltaMode!==void 0?n=e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?.025*-e.deltaY:e.deltaMode===WheelEvent.DOM_DELTA_LINE?-e.deltaY*(2.5/3):2.5*-e.deltaY:"deltaY"in e&&!("detail"in e)?n=.025*-e.deltaY:e.wheelDelta!==void 0?n=.025*-e.wheelDelta:e.wheelDeltaY!==void 0?n=.025*-e.wheelDeltaY:e.detail!==void 0&&(n=-e.detail/3),this.signals.scrolled.dispatch(n),setTimeout(function(){t.scrolled=!0},this.hoverTimeout)}},xo.prototype._onMousemove=function(e){e.target===this.domElement?(e.preventDefault(),this.overElement=!0):this.overElement=!1,this._setKeys(e),this.moving=!0,this.hovering=!1,this.lastMoved=window.performance.now(),this.prevPosition.copy(this.position),this.position.set(e.clientX,e.clientY),this._setCanvasPosition(e);var t=this.prevPosition.x-this.position.x,n=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(t,n),this.pressed&&this.signals.dragged.dispatch(t,n)},xo.prototype._onMousedown=function(e){e.target===this.domElement&&(e.preventDefault(),this._setKeys(e),this.moving=!1,this.hovering=!1,this.down.set(e.clientX,e.clientY),this.position.set(e.clientX,e.clientY),this.which=e.which,this.buttons=function(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var n=t.which;if(n===2)return 4;if(n===3)return 2;if(n>0)return 1<<n-1}else if("button"in t){var r=t.button;if(r===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0}(e),this.pressed=!0,this._setCanvasPosition(e))},xo.prototype._onMouseup=function(e){e.target===this.domElement&&e.preventDefault(),this._setKeys(e);var t=this.canvasPosition;this._distance()<4&&(this.lastClicked=window.performance.now(),this.doubleClickPending&&this.prevClickCP.distanceTo(t)<4&&(this.signals.doubleClicked.dispatch(t.x,t.y),this.doubleClickPending=!1),this.signals.clicked.dispatch(t.x,t.y),this.doubleClickPending=!0,this.prevClickCP.copy(t)),this.which=void 0,this.buttons=void 0,this.pressed=void 0},xo.prototype._onContextmenu=function(e){e.target===this.domElement&&e.preventDefault()},xo.prototype._onTouchstart=function(e){if(e.target===this.domElement)switch(e.preventDefault(),this.pressed=!0,e.touches.length){case 1:this.moving=!1,this.hovering=!1,this.down.set(e.touches[0].pageX,e.touches[0].pageY),this.position.set(e.touches[0].pageX,e.touches[0].pageY),this._setCanvasPosition(e.touches[0]);break;case 2:this.down.set((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2),this.position.set((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2),this.lastTouchDistance=AV(e)}},xo.prototype._onTouchend=function(e){e.target===this.domElement&&e.preventDefault(),this.which=void 0,this.buttons=void 0,this.pressed=void 0},xo.prototype._onTouchmove=function(e){switch(e.target===this.domElement?(e.preventDefault(),this.overElement=!0):this.overElement=!1,e.touches.length){case 1:this._setKeys(e),this.which=1,this.buttons=1,this.moving=!0,this.hovering=!1,this.lastMoved=window.performance.now(),this.prevPosition.copy(this.position),this.position.set(e.touches[0].pageX,e.touches[0].pageY),this._setCanvasPosition(e.touches[0]);var t=this.prevPosition.x-this.position.x,n=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(t,n),this.pressed&&this.signals.dragged.dispatch(t,n);break;case 2:var r=AV(e),i=r-this.lastTouchDistance;if(this.lastTouchDistance=r,this.prevPosition.copy(this.position),this.position.set((e.touches[0].pageX+e.touches[1].pageX)/2,(e.touches[0].pageY+e.touches[1].pageY)/2),Math.abs(i)>2&&this.handleScroll&&this.position.distanceTo(this.prevPosition)<2)this.which=0,this.buttons=0,this.signals.scrolled.dispatch(i/2);else{this.which=3,this.buttons=2;var o=this.prevPosition.x-this.position.x,a=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(o,a),this.pressed&&this.signals.dragged.dispatch(o,a)}}},xo.prototype._distance=function(){return this.position.distanceTo(this.down)},xo.prototype._setCanvasPosition=function(e){var t,n,r=this.domElement.getBoundingClientRect();"clientX"in e&&"clientY"in e?(t=e.clientX-r.left,n=e.clientY-r.top):(t=e.offsetX,n=e.offsetY),this.canvasPosition.set(t,r.height-n)},xo.prototype._setKeys=function(e){this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.metaKey=e.metaKey,this.shiftKey=e.shiftKey},xo.prototype.dispose=function(){document.removeEventListener("mousewheel",this._onMousewheel),document.removeEventListener("wheel",this._onMousewheel),document.removeEventListener("MozMousePixelScroll",this._onMousewheel),document.removeEventListener("mousemove",this._onMousemove),document.removeEventListener("mousedown",this._onMousedown),document.removeEventListener("mouseup",this._onMouseup),document.removeEventListener("contextmenu",this._onContextmenu),document.removeEventListener("touchstart",this._onTouchstart),document.removeEventListener("touchend",this._onTouchend),document.removeEventListener("touchmove",this._onTouchmove),window.cancelAnimationFrame(this.frameRequest)},Object.defineProperties(xo.prototype,PV);var mR=new lt,gR=new lt,MV=new lt,na=new lt,EV=new lt,ys=new V,my=new lr,TV=new lr,Qc=new lt,Qd=new V,I2=new V,La=function(e,t){t===void 0&&(t={}),this.stage=e,this.rotateSpeed=K(t.rotateSpeed,2),this.zoomSpeed=K(t.zoomSpeed,1.2),this.panSpeed=K(t.panSpeed,1),this.viewer=e.viewer,this.mouse=e.mouseObserver,this.controls=e.viewerControls},vR={component:{configurable:!0},atom:{configurable:!0}};vR.component.get=function(){return this.stage.transformComponent},vR.atom.get=function(){return this.stage.transformAtom},La.prototype._setPanVector=function(e,t,n){n===void 0&&(n=0);var r=this.controls.getCanvasScaleFactor(n);Qd.set(e,t,0),Qd.multiplyScalar(this.panSpeed*r)},La.prototype._getRotateXY=function(e,t){return[this.rotateSpeed*-e*.01,this.rotateSpeed*t*.01]},La.prototype._getCameraRotation=function(e){return e.extractRotation(this.viewer.camera.matrixWorld),e.multiply(gR.makeRotationY(Math.PI)),e},La.prototype._transformPanVector=function(){this.component&&(Qc.extractRotation(this.component.transform),Qc.premultiply(this.viewer.rotationGroup.matrix),Qc.getInverse(Qc),Qc.multiply(this._getCameraRotation(na)),Qd.applyMatrix4(Qc))},La.prototype.zoom=function(e){this.controls.zoom(this.zoomSpeed*e*.02)},La.prototype.pan=function(e,t){this._setPanVector(e,t),Qc.getInverse(this.viewer.rotationGroup.matrix),Qc.multiply(this._getCameraRotation(na)),Qd.applyMatrix4(Qc),this.controls.translate(Qd)},La.prototype.panComponent=function(e,t){this.component&&(this._setPanVector(e,t),this._transformPanVector(),this.component.position.add(Qd),this.component.updateMatrix())},La.prototype.panAtom=function(e,t){this.atom&&this.component&&(this.atom.positionToVector3(I2),I2.add(this.viewer.translationGroup.position),I2.applyMatrix4(this.viewer.rotationGroup.matrix),this._setPanVector(e,t,I2.z),this._transformPanVector(),this.atom.positionAdd(Qd),this.component.updateRepresentations({position:!0}))},La.prototype.rotate=function(e,t){var n=this._getRotateXY(e,t),r=n[0],i=n[1];this._getCameraRotation(na),ys.set(1,0,0),ys.applyMatrix4(na),my.setFromAxisAngle(ys,i),ys.set(0,1,0),ys.applyMatrix4(na),TV.setFromAxisAngle(ys,r),my.multiply(TV),na.makeRotationFromQuaternion(my),this.controls.applyMatrix(na)},La.prototype.zRotate=function(e,t){var n=this.rotateSpeed*((-e+t)/-2)*.01;MV.makeRotationZ(n),this.controls.applyMatrix(MV)},La.prototype.rotateComponent=function(e,t){if(this.component){var n=this._getRotateXY(e,t),r=n[0],i=n[1];this._getCameraRotation(EV),na.extractRotation(this.component.transform),na.premultiply(this.viewer.rotationGroup.matrix),na.getInverse(na),na.premultiply(EV),ys.set(1,0,0),ys.applyMatrix4(na),mR.makeRotationAxis(ys,i),ys.set(0,1,0),ys.applyMatrix4(na),gR.makeRotationAxis(ys,r),mR.multiply(gR),my.setFromRotationMatrix(mR),this.component.quaternion.premultiply(my),this.component.quaternion.normalize(),this.component.updateMatrix()}},Object.defineProperties(La.prototype,vR);var bm=new V,NS=function(e,t){this.stage=t,this.pid=e.pid,this.picker=e.picker,this.instance=e.instance,this.stage=t,this.controls=t.viewerControls,this.mouse=t.mouseObserver},Cn={type:{configurable:!0},altKey:{configurable:!0},ctrlKey:{configurable:!0},metaKey:{configurable:!0},shiftKey:{configurable:!0},canvasPosition:{configurable:!0},component:{configurable:!0},object:{configurable:!0},position:{configurable:!0},closestBondAtom:{configurable:!0},closeAtom:{configurable:!0},arrow:{configurable:!0},atom:{configurable:!0},axes:{configurable:!0},bond:{configurable:!0},box:{configurable:!0},cone:{configurable:!0},clash:{configurable:!0},contact:{configurable:!0},cylinder:{configurable:!0},distance:{configurable:!0},ellipsoid:{configurable:!0},octahedron:{configurable:!0},point:{configurable:!0},mesh:{configurable:!0},slice:{configurable:!0},sphere:{configurable:!0},tetrahedron:{configurable:!0},torus:{configurable:!0},surface:{configurable:!0},unitcell:{configurable:!0},unknown:{configurable:!0},volume:{configurable:!0},wideline:{configurable:!0}};Cn.type.get=function(){return this.picker.type},Cn.altKey.get=function(){return this.mouse.altKey},Cn.ctrlKey.get=function(){return this.mouse.ctrlKey},Cn.metaKey.get=function(){return this.mouse.metaKey},Cn.shiftKey.get=function(){return this.mouse.shiftKey},Cn.canvasPosition.get=function(){return this.mouse.canvasPosition},Cn.component.get=function(){return this.stage.getComponentsByObject(this.picker.data).list[0]},Cn.object.get=function(){return this.picker.getObject(this.pid)},Cn.position.get=function(){return this.picker.getPosition(this.pid,this.instance,this.component)},Cn.closestBondAtom.get=function(){if(this.type==="bond"&&this.bond){var e=this.bond,t=this.controls,n=this.canvasPosition,r=e.atom1.positionToVector3(),i=e.atom2.positionToVector3();r.applyMatrix4(this.component.matrix),i.applyMatrix4(this.component.matrix);var o,a,s,l=t.getPositionOnCanvas(r),c=t.getPositionOnCanvas(i);return a=l,s=c,(o=n).distanceTo(a)<o.distanceTo(s)?e.atom1:e.atom2}},Cn.closeAtom.get=function(){var e=this.canvasPosition,t=this.closestBondAtom;if(t){var n=t.positionToVector3().applyMatrix4(this.component.matrix),r=this.controls.getPositionOnCanvas(n);t.positionToVector3(bm),this.instance&&bm.applyMatrix4(this.instance.matrix),bm.applyMatrix4(this.component.matrix);var i=this.controls.viewer;bm.add(i.translationGroup.position),bm.applyMatrix4(i.rotationGroup.matrix);var o=this.controls.getCanvasScaleFactor(bm.z),a=this.component.getMaxRepresentationRadius(t.index);return e.distanceTo(r)<=a/o?t:void 0}},Cn.arrow.get=function(){return this._objectIfType("arrow")},Cn.atom.get=function(){return this._objectIfType("atom")},Cn.axes.get=function(){return this._objectIfType("axes")},Cn.bond.get=function(){return this._objectIfType("bond")},Cn.box.get=function(){return this._objectIfType("box")},Cn.cone.get=function(){return this._objectIfType("cone")},Cn.clash.get=function(){return this._objectIfType("clash")},Cn.contact.get=function(){return this._objectIfType("contact")},Cn.cylinder.get=function(){return this._objectIfType("cylinder")},Cn.distance.get=function(){return this._objectIfType("distance")},Cn.ellipsoid.get=function(){return this._objectIfType("ellipsoid")},Cn.octahedron.get=function(){return this._objectIfType("octahedron")},Cn.point.get=function(){return this._objectIfType("point")},Cn.mesh.get=function(){return this._objectIfType("mesh")},Cn.slice.get=function(){return this._objectIfType("slice")},Cn.sphere.get=function(){return this._objectIfType("sphere")},Cn.tetrahedron.get=function(){return this._objectIfType("tetrahedron")},Cn.torus.get=function(){return this._objectIfType("torus")},Cn.surface.get=function(){return this._objectIfType("surface")},Cn.unitcell.get=function(){return this._objectIfType("unitcell")},Cn.unknown.get=function(){return this._objectIfType("unknown")},Cn.volume.get=function(){return this._objectIfType("volume")},Cn.wideline.get=function(){return this._objectIfType("wideline")},NS.prototype._objectIfType=function(e){return this.type===e?this.object:void 0},NS.prototype.getLabel=function(){var e=this.atom||this.closeAtom,t="nothing";return this.arrow?t=this.arrow.name:e?t="atom: "+e.qualifiedName()+" ("+e.structure.name+")":this.axes?t="axes":this.bond?t="bond: "+this.bond.atom1.qualifiedName()+" - "+this.bond.atom2.qualifiedName()+" ("+this.bond.structure.name+")":this.box?t=this.box.name:this.cone?t=this.cone.name:this.clash?t="clash: "+this.clash.clash.sele1+" - "+this.clash.clash.sele2:this.contact?t=this.contact.type+": "+this.contact.atom1.qualifiedName()+" - "+this.contact.atom2.qualifiedName()+" ("+this.contact.atom1.structure.name+")":this.cylinder?t=this.cylinder.name:this.distance?t="distance: "+this.distance.atom1.qualifiedName()+" - "+this.distance.atom2.qualifiedName()+" ("+this.distance.structure.name+")":this.ellipsoid?t=this.ellipsoid.name:this.octahedron?t=this.octahedron.name:this.point?t=this.point.name:this.mesh?t="mesh: "+(this.mesh.name||this.mesh.serial)+" ("+this.mesh.shape.name+")":this.slice?t="slice: "+this.slice.value.toPrecision(3)+" ("+this.slice.volume.name+")":this.sphere?t=this.sphere.name:this.surface?t="surface: "+this.surface.surface.name:this.tetrahedron?t=this.tetrahedron.name:this.torus?t=this.torus.name:this.unitcell?t="unitcell: "+this.unitcell.unitcell.spacegroup+" ("+this.unitcell.structure.name+")":this.unknown?t="unknown":this.volume?t="volume: "+this.volume.value.toPrecision(3)+" ("+this.volume.volume.name+")":this.wideline&&(t=this.wideline.name),t},Object.defineProperties(NS.prototype,Cn);var goe=function(e){this.stage=e,this.viewer=e.viewer};goe.prototype.pick=function(e,t){var n=this.viewer.pick(e,t);if(n.picker&&n.picker.type!=="ignore"&&n.pid!==void 0){var r=n.picker.array;if(!(r&&n.pid>=r.length))return new NS(n,this.stage);console.error("pid >= picker.array.length")}};var OV=new lr,IV=new V,RV=new V,yR=new V,Bot=new V,kV=new lt,LV=new V,$V=new lt,wo=function(e){this.stage=e,this.signals={changed:new en.Signal},this.viewer=e.viewer},bR={position:{configurable:!0},rotation:{configurable:!0}};bR.position.get=function(){return this.viewer.translationGroup.position},bR.rotation.get=function(){return this.viewer.rotationGroup.quaternion},wo.prototype.changed=function(){this.viewer.requestRender(),this.signals.changed.dispatch()},wo.prototype.getPositionOnCanvas=function(e,t){var n=iT(t,rt),r=this.viewer;return yR.copy(e).add(r.translationGroup.position).applyMatrix4(r.rotationGroup.matrix).project(r.camera),n.set((yR.x+1)*r.width/2,(yR.y+1)*r.height/2)},wo.prototype.getCanvasScaleFactor=function(e){e===void 0&&(e=0);var t=this.viewer.camera;if(t instanceof bd)return 1/t.zoom;e=Math.abs(e),e+=this.getCameraDistance();var n=jr(t.fov);return 2*e*Math.tan(n/2)/this.viewer.height},wo.prototype.getOrientation=function(e){var t=Gy(e);t.copy(this.viewer.rotationGroup.matrix);var n=this.getCameraDistance();return t.scale(Bot.set(n,n,n)),t.setPosition(this.viewer.translationGroup.position),t},wo.prototype.orient=function(e){Gy(e).decompose(IV,OV,RV);var t=this.viewer;t.rotationGroup.setRotationFromQuaternion(OV),t.translationGroup.position.copy(IV),t.cameraDistance=RV.z,t.updateZoom(),this.changed()},wo.prototype.translate=function(e){this.viewer.translationGroup.position.add(Dp(e)),this.changed()},wo.prototype.center=function(e){this.viewer.translationGroup.position.copy(Dp(e)).negate(),this.changed()},wo.prototype.zoom=function(e){this.distance(this.getCameraDistance()*(1-e))},wo.prototype.getCameraDistance=function(){return this.viewer.cameraDistance},wo.prototype.distance=function(e){this.viewer.cameraDistance=Math.max(Math.abs(e),.2),this.viewer.updateZoom(),this.changed()},wo.prototype.spin=function(e,t){kV.getInverse(this.viewer.rotationGroup.matrix),LV.copy(Dp(e)).applyMatrix4(kV),this.viewer.rotationGroup.rotateOnAxis(LV,t),this.changed()},wo.prototype.rotate=function(e){this.viewer.rotationGroup.setRotationFromQuaternion(d$(e)),this.changed()},wo.prototype.align=function(e){$V.getInverse(Gy(e)),this.viewer.rotationGroup.setRotationFromMatrix($V),this.changed()},wo.prototype.applyMatrix=function(e){this.viewer.rotationGroup.applyMatrix4(Gy(e)),this.changed()},Object.defineProperties(wo.prototype,bR);var Ua=function(e,t){for(var n,r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];this.pausedTime=-1,this.elapsedDuration=0,this.pausedDuration=0,this.ignoreGlobalToggle=!1,this._paused=!1,this._resolveList=[],this.duration=K(e,1e3),this.controls=t,this.startTime=window.performance.now(),(n=this)._init.apply(n,r)},_R={done:{configurable:!0},paused:{configurable:!0}};_R.done.get=function(){return this.alpha===1},_R.paused.get=function(){return this._paused},Ua.prototype.tick=function(e){if(!this._paused)return this.elapsedDuration=e.currentTime-this.startTime-this.pausedDuration,this.duration===0?this.alpha=1:this.alpha=Nx(0,1,this.elapsedDuration/this.duration),this._tick(e),this.done&&this._resolveList.forEach(function(t){return t()}),this.done},Ua.prototype.pause=function(e){e&&(this._hold=!0),this.pausedTime===-1&&(this.pausedTime=window.performance.now()),this._paused=!0},Ua.prototype.resume=function(e){!e&&this._hold||(this.pausedDuration+=window.performance.now()-this.pausedTime,this._paused=!1,this._hold=!1,this.pausedTime=-1)},Ua.prototype.toggle=function(){this._paused?this.resume():this.pause()},Ua.prototype.then=function(e){var t=this;return(this.done?Promise.resolve():new Promise(function(n){return t._resolveList.push(n)})).then(e)},Object.defineProperties(Ua.prototype,_R);var DV=function(e){function t(n,r){for(var i=[],o=arguments.length-2;o-- >0;)i[o]=arguments[o+2];e.apply(this,[K(n,1/0),r].concat(i))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(n,r){Array.isArray(n)?this.axis=new V().fromArray(n):this.axis=K(n,new V(0,1,0)),this.angle=K(r,.01)},t.prototype._tick=function(n){this.axis&&this.angle&&this.controls.spin(this.axis,this.angle*n.lastDuration/16)},t}(Ua),BV=function(e){function t(n,r){for(var i=[],o=arguments.length-2;o-- >0;)i[o]=arguments[o+2];e.apply(this,[K(n,1/0),r].concat(i)),this.angleSum=0,this.direction=1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(n,r,i){Array.isArray(n)?this.axis=new V().fromArray(n):this.axis=K(n,new V(0,1,0)),this.angleStep=K(r,.01),this.angleEnd=K(i,.2)},t.prototype._tick=function(n){if(this.axis&&this.angleStep&&this.angleEnd){var r=Nx(0,1,Math.abs(this.angleSum)/this.angleEnd),i=this.angleStep*this.direction*(1.1-r);this.controls.spin(this.axis,i*n.lastDuration/16),this.angleSum+=this.angleStep,this.angleSum>=this.angleEnd&&(this.direction*=-1,this.angleSum=-this.angleEnd)}},t}(Ua),NV=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(n,r){this.moveFrom=Dp(K(n,new V)),this.moveTo=Dp(K(r,new V))},t.prototype._tick=function(){this.controls.position.lerpVectors(this.moveFrom,this.moveTo,this.alpha).negate(),this.controls.changed()},t}(Ua),Not=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(n,r){this.zoomFrom=n,this.zoomTo=r},t.prototype._tick=function(){this.controls.distance(Ps(this.zoomFrom,this.zoomTo,this.alpha))},t}(Ua),Fot=function(e){function t(){e.apply(this,arguments),this._currentRotation=new lr}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(n,r){this.rotateFrom=d$(n),this.rotateTo=d$(r),this._currentRotation=new lr},t.prototype._tick=function(){this._currentRotation.copy(this.rotateFrom).slerp(this.rotateTo,this.alpha),this.controls.rotate(this._currentRotation)},t}(Ua),jot=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(n,r,i){this.valueFrom=n,this.valueTo=r,this.callback=i},t.prototype._tick=function(){this.callback(Ps(this.valueFrom,this.valueTo,this.alpha))},t}(Ua),zot=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._init=function(n){this.callback=n},t.prototype._tick=function(){this.alpha===1&&this.callback()},t}(Ua),qA=function(e){e===void 0&&(e=[]),this._resolveList=[],this._list=e},FV={done:{configurable:!0}};FV.done.get=function(){return this._list.every(function(e){return e.done})},qA.prototype.then=function(e){var t,n=this;return t=this.done?Promise.resolve():new Promise(function(r){n._resolveList.push(r),n._list.forEach(function(i){i.then(function(){n._resolveList.forEach(function(o){o()}),n._resolveList.length=0})})}),t.then(e)},Object.defineProperties(qA.prototype,FV);var Xr=function(e){this.stage=e,this.animationList=[],this.finishedList=[],this.viewer=e.viewer,this.controls=e.viewerControls},jV={paused:{configurable:!0}};jV.paused.get=function(){return this.animationList.every(function(e){return e.paused})},Xr.prototype.add=function(e){return e.duration===0?e.tick(this.viewer.stats):this.animationList.push(e),e},Xr.prototype.remove=function(e){var t=this.animationList,n=t.indexOf(e);n>-1&&t.splice(n,1)},Xr.prototype.run=function(e){for(var t=this.finishedList,n=this.animationList,r=n.length,i=0;i<r;++i){var o=n[i];o.tick(e)&&t.push(o)}var a=t.length;if(a){for(var s=0;s<a;++s)this.remove(t[s]);t.length=0}},Xr.prototype.spin=function(e,t,n){return this.add(new DV(n,this.controls,e,t))},Xr.prototype.rock=function(e,t,n,r){return this.add(new BV(r,this.controls,e,t,n))},Xr.prototype.rotate=function(e,t){var n=this.viewer.rotationGroup.quaternion.clone();return this.add(new Fot(t,this.controls,n,e))},Xr.prototype.move=function(e,t){var n=this.controls.position.clone().negate();return this.add(new NV(t,this.controls,n,e))},Xr.prototype.zoom=function(e,t){var n=this.viewer.camera.position.z;return this.add(new Not(t,this.controls,n,e))},Xr.prototype.zoomMove=function(e,t,n){return new qA([this.move(e,n),this.zoom(t,n)])},Xr.prototype.orient=function(e,t){var n=new V,r=new lr,i=new V;return Gy(e).decompose(n,r,i),new qA([this.move(n.negate(),t),this.rotate(r,t),this.zoom(-i.x,t)])},Xr.prototype.value=function(e,t,n,r){return this.add(new jot(r,this.controls,e,t,n))},Xr.prototype.timeout=function(e,t){return this.add(new zot(t,this.controls,e))},Xr.prototype.spinComponent=function(e,t,n,r){return this.add(new DV(r,e.controls,t,n))},Xr.prototype.rockComponent=function(e,t,n,r,i){return this.add(new BV(i,e.controls,t,n,r))},Xr.prototype.moveComponent=function(e,t,n){var r=e.controls.position.clone().negate();return this.add(new NV(n,e.controls,r,t))},Xr.prototype.pause=function(){this.animationList.forEach(function(e){return e.pause()})},Xr.prototype.resume=function(){this.animationList.forEach(function(e){return e.resume()})},Xr.prototype.toggle=function(){this.paused?this.resume():this.pause()},Xr.prototype.clear=function(){this.animationList.length=0},Xr.prototype.dispose=function(){this.clear()},Object.defineProperties(Xr.prototype,jV);var Nm=function(e,t){if(this.fn=e,this.queue=[],this.pending=!1,this.next=this.next.bind(this),t){for(var n=0,r=t.length;n<r;++n)this.queue.push(t[n]);this.next()}};Nm.prototype.run=function(e){this.fn(e,this.next)},Nm.prototype.next=function(){var e=this,t=this.queue.shift();t!==void 0?(this.pending=!0,setTimeout(function(){return e.run(t)})):this.pending=!1},Nm.prototype.push=function(e){this.queue.push(e),this.pending||this.next()},Nm.prototype.kill=function(){this.queue.length=0},Nm.prototype.length=function(){return this.queue.length};var ni=function(e,t,n){this.type="",this.parameters={lazy:{type:"boolean"},clipNear:{type:"range",step:1,max:100,min:0,buffer:!0},clipRadius:{type:"number",precision:1,max:1e3,min:0,buffer:!0},clipCenter:{type:"vector3",precision:1,buffer:!0},flatShaded:{type:"boolean",buffer:!0},opacity:{type:"range",step:.01,max:1,min:0,buffer:!0},depthWrite:{type:"boolean",buffer:!0},side:{type:"select",buffer:!0,options:{front:"front",back:"back",double:"double"}},wireframe:{type:"boolean",buffer:!0},colorData:{type:"hidden",update:"color"},colorScheme:{type:"select",update:"color",options:{}},colorScale:{type:"select",update:"color",options:pn.getScales()},colorReverse:{type:"boolean",update:"color"},colorValue:{type:"color",update:"color"},colorDomain:{type:"hidden",update:"color"},colorMode:{type:"select",update:"color",options:pn.getModes()},roughness:{type:"range",step:.01,max:1,min:0,buffer:!0},metalness:{type:"range",step:.01,max:1,min:0,buffer:!0},diffuse:{type:"color",buffer:!0},diffuseInterior:{type:"boolean",buffer:!0},useInteriorColor:{type:"boolean",buffer:!0},interiorColor:{type:"color",buffer:!0},interiorDarkening:{type:"range",step:.01,max:1,min:0,buffer:!0},matrix:{type:"hidden",buffer:!0},disablePicking:{type:"boolean",rebuild:!0}},this.viewer=t,this.tasks=new rc,this.queue=new Nm(this.make.bind(this)),this.bufferList=[],this.parameters.colorScheme&&(this.parameters.colorScheme.options=pn.getSchemes()),this.toBePrepared=!1};ni.prototype.init=function(e){var t=e||{};this.clipNear=K(t.clipNear,0),this.clipRadius=K(t.clipRadius,0),this.clipCenter=K(t.clipCenter,new V),this.flatShaded=K(t.flatShaded,!1),this.side=K(t.side,"double"),this.opacity=K(t.opacity,1),this.depthWrite=K(t.depthWrite,!0),this.wireframe=K(t.wireframe,!1),this.setColor(t.color,t),this.colorData=K(t.colorData,void 0),this.colorScheme=K(t.colorScheme,"uniform"),this.colorScale=K(t.colorScale,""),this.colorReverse=K(t.colorReverse,!1),this.colorValue=K(t.colorValue,9474192),this.colorDomain=K(t.colorDomain,void 0),this.colorMode=K(t.colorMode,"hcl"),this.visible=K(t.visible,!0),this.quality=K(t.quality,void 0),this.roughness=K(t.roughness,.4),this.metalness=K(t.metalness,0),this.diffuse=K(t.diffuse,16777215),this.diffuseInterior=K(t.diffuseInterior,!1),this.useInteriorColor=K(t.useInteriorColor,!1),this.interiorColor=K(t.interiorColor,2236962),this.interiorDarkening=K(t.interiorDarkening,0),this.lazy=K(t.lazy,!1),this.lazyProps={build:!1,bufferParams:{},what:{}},this.matrix=K(t.matrix,new lt),this.disablePicking=K(t.disablePicking,!1);var n=this.parameters;n.sphereDetail===!0&&(n.sphereDetail={type:"integer",max:3,min:0,rebuild:"impostor"}),n.radialSegments===!0&&(n.radialSegments={type:"integer",max:25,min:5,rebuild:"impostor"}),n.openEnded===!0&&(n.openEnded={type:"boolean",rebuild:"impostor",buffer:!0}),n.disableImpostor===!0&&(n.disableImpostor={type:"boolean",rebuild:!0}),t.quality==="low"?(n.sphereDetail&&(this.sphereDetail=0),n.radialSegments&&(this.radialSegments=5)):t.quality==="medium"?(n.sphereDetail&&(this.sphereDetail=1),n.radialSegments&&(this.radialSegments=10)):t.quality==="high"?(n.sphereDetail&&(this.sphereDetail=2),n.radialSegments&&(this.radialSegments=20)):(n.sphereDetail&&(this.sphereDetail=K(t.sphereDetail,1)),n.radialSegments&&(this.radialSegments=K(t.radialSegments,10))),n.openEnded&&(this.openEnded=K(t.openEnded,!0)),n.disableImpostor&&(this.disableImpostor=K(t.disableImpostor,!1))},ni.prototype.getColorParams=function(e){return Object.assign({data:this.colorData,scheme:this.colorScheme,scale:this.colorScale,reverse:this.colorReverse,value:this.colorValue,domain:this.colorDomain,mode:this.colorMode,colorSpace:this.colorSpace},e)},ni.prototype.getBufferParams=function(e){return e===void 0&&(e={}),Object.assign({clipNear:this.clipNear,clipRadius:this.clipRadius,clipCenter:this.clipCenter,flatShaded:this.flatShaded,opacity:this.opacity,depthWrite:this.depthWrite,side:this.side,wireframe:this.wireframe,roughness:this.roughness,metalness:this.metalness,diffuse:this.diffuse,diffuseInterior:this.diffuseInterior,useInteriorColor:this.useInteriorColor,interiorColor:this.interiorColor,interiorDarkening:this.interiorDarkening,matrix:this.matrix,disablePicking:this.disablePicking},e)},ni.prototype.setColor=function(e,t){var n=Object.keys(pn.getSchemes());if(typeof e=="string"&&n.includes(e.toLowerCase()))t?t.colorScheme=e:this.setParameters({colorScheme:e});else if(e!==void 0){var r=new ht(e).getHex();t?(t.colorScheme="uniform",t.colorValue=r):this.setParameters({colorScheme:"uniform",colorValue:r})}return this},ni.prototype.prepare=function(e){},ni.prototype.create=function(){},ni.prototype.update=function(e){this.build()},ni.prototype.build=function(e){if(!this.lazy||this.visible&&this.opacity){if(!this.toBePrepared)return this.tasks.increment(),void this.make();this.queue.length()>0?(this.tasks.change(1-this.queue.length()),this.queue.kill()):this.tasks.increment(),this.queue.push(e||!1)}else this.lazyProps.build=!0},ni.prototype.make=function(e,t){var n=this;Ze&&Ge.time("Representation.make "+this.type);var r=function(){e?(n.update(e),n.viewer.requestRender(),n.tasks.decrement(),t&&t()):(n.clear(),n.create(),n.manualAttach||n.disposed||(Ze&&Ge.time("Representation.attach "+n.type),n.attach(function(){Ze&&Ge.timeEnd("Representation.attach "+n.type),n.tasks.decrement(),t&&t()}))),Ze&&Ge.timeEnd("Representation.make "+n.type)};this.toBePrepared?this.prepare(r):r()},ni.prototype.attach=function(e){this.setVisibility(this.visible),e()},ni.prototype.setVisibility=function(e,t){if(this.visible=e,this.visible&&this.opacity){var n=this.lazyProps,r=n.bufferParams,i=n.what;if(n.build)return n.build=!1,this.build(),this;(Object.keys(r).length||Object.keys(i).length)&&(n.bufferParams={},n.what={},this.updateParameters(r,i))}return this.bufferList.forEach(function(o){o.setVisibility(e)}),t||this.viewer.requestRender(),this},ni.prototype.setParameters=function(e,t,n){t===void 0&&(t={}),n===void 0&&(n=!1);var r=e||{},i=this.parameters,o={};for(var a in this.opacity||r.opacity===void 0||(this.lazyProps.build?(this.lazyProps.build=!1,n=!0):(Object.assign(o,this.lazyProps.bufferParams),Object.assign(t,this.lazyProps.what),this.lazyProps.bufferParams={},this.lazyProps.what={})),this.setColor(r.color,r),r)r[a]!==void 0&&i[a]!==void 0&&(i[a].int&&(r[a]=parseInt(r[a])),i[a].float&&(r[a]=parseFloat(r[a])),r[a]!==this[a]||r[a].equals&&!r[a].equals(this[a]))&&(this[a]&&this[a].copy&&r[a].copy?this[a].copy(r[a]):this[a]&&this[a].set?this[a].set(r[a]):this[a]=r[a],i[a].buffer&&(i[a].buffer===!0?o[a]=r[a]:o[i[a].buffer]=r[a]),i[a].update&&(t[i[a].update]=!0),!i[a].rebuild||i[a].rebuild==="impostor"&&Cc&&!this.disableImpostor||(n=!0));return n?this.build():this.updateParameters(o,t),this},ni.prototype.updateParameters=function(e,t){if(e===void 0&&(e={}),this.lazy&&(!this.visible||!this.opacity)&&e.hasOwnProperty("opacity")===!1)return Object.assign(this.lazyProps.bufferParams,e),void Object.assign(this.lazyProps.what,t);this.bufferList.forEach(function(n){n.setParameters(e)}),Object.keys(t).length&&this.update(t),this.viewer.requestRender()},ni.prototype.getParameters=function(){var e=this,t={lazy:this.lazy,visible:this.visible,quality:this.quality};return Object.keys(this.parameters).forEach(function(n){e.parameters[n]!==null&&(t[n]=e[n])}),t},ni.prototype.clear=function(){var e=this;this.bufferList.forEach(function(t){e.viewer.remove(t),t.dispose()}),this.bufferList.length=0,this.viewer.requestRender()},ni.prototype.dispose=function(){this.disposed=!0,this.queue.kill(),this.tasks.dispose(),this.clear()};var XA=function(e){var t=this;this.pending=0,this.postCount=0,this.onmessageDict={},this.onerrorDict={},this.name=e,this.blobUrl=window.URL.createObjectURL(Q1.get(e)),this.worker=new Worker(this.blobUrl),Q1.activeWorkerCount+=1,this.worker.onmessage=function(n){t.pending-=1;var r=n.data.__postId;Ze&&Ge.timeEnd("Worker.postMessage "+e+" #"+r);var i=t.onmessageDict[r];i&&i.call(t.worker,n),delete t.onmessageDict[r],delete t.onerrorDict[r]},this.worker.onerror=function(n){if(t.pending-=1,n.data){var r=n.data.__postId,i=t.onerrorDict[r];i?i.call(t.worker,n):Ge.error("Worker.onerror",r,e,n),delete t.onmessageDict[r],delete t.onerrorDict[r]}else Ge.error("Worker.onerror",e,n)}};XA.prototype.post=function(e,t,n,r){e===void 0&&(e={}),this.onmessageDict[this.postCount]=n,this.onerrorDict[this.postCount]=r,e.__name=this.name,e.__postId=this.postCount,e.__debug=Ze,Ze&&Ge.time("Worker.postMessage "+this.name+" #"+this.postCount);try{this.worker.postMessage(e,t)}catch(i){Ge.error("worker.post:",i),this.worker.postMessage(e)}return this.pending+=1,this.postCount+=1,this},XA.prototype.terminate=function(){this.worker?(this.worker.terminate(),window.URL.revokeObjectURL(this.blobUrl),Q1.activeWorkerCount-=1):Ge.log("no worker to terminate")};var Fm=function(e,t){t===void 0&&(t=2),this.pool=[],this.count=0,this.maxCount=Math.min(8,t),this.name=e};function v$(e){for(var t=e.length,n=t/3,r=0,i=0,o=0,a=0;a<t;a+=3)r+=e[a+0],i+=e[a+1],o+=e[a+2];return new V(r/n,i/n,o/n)}function Bp(e,t,n){return n?e.sub(n).projectOnVector(t).add(n):e.projectOnVector(t),e}function t_(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,l=e.length;s<l;s+=3){var c=e[s],u=e[s+1],f=e[s+2];c<t&&(t=c),u<n&&(n=u),f<r&&(r=f),c>i&&(i=c),u>o&&(o=u),f>a&&(a=f)}return[Qt([t,n,r]),Qt([i,o,a])]}function aT(e,t){for(var n=0,r=t.length;n<r;n+=3){var i=t[n],o=t[n+1],a=t[n+2];t[n]=e[0]*i+e[4]*o+e[8]*a+e[12],t[n+1]=e[1]*i+e[5]*o+e[9]*a+e[13],t[n+2]=e[2]*i+e[6]*o+e[10]*a+e[14]}}function DN(e,t){for(var n=0,r=t.length;n<r;n+=3){var i=t[n],o=t[n+1],a=t[n+2];t[n]=e[0]*i+e[3]*o+e[6]*a,t[n+1]=e[1]*i+e[4]*o+e[7]*a,t[n+2]=e[2]*i+e[5]*o+e[8]*a}}function voe(e){for(var t=0,n=e.length;t<n;t+=3){var r=e[t],i=e[t+1],o=e[t+2],a=r*r+i*i+o*o;if(a>0){var s=1/Math.sqrt(a);e[t]=r*s,e[t+1]=i*s,e[t+2]=o*s}}}function Qt(e){return new Float32Array(e||3)}function Sa(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a}function oa(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Rr(e,t,n){e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2]}function hl(e,t,n){e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2]}function Ho(e,t,n){n===void 0&&(n=0),e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2]}function sn(e,t,n){n===void 0&&(n=0),t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2]}function yoe(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function sd(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function pg(e,t,n){Zn(e,t,1/n)}function Zn(e,t,n){e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n}function Fr(e,t){var n=yoe(t);n==0?(e[0]=t[0],e[1]=t[1],e[2]=t[2]):Zn(e,t,1/Math.sqrt(n))}function boe(e,t,n){e[0]=t[0]-n,e[1]=t[1]-n,e[2]=t[2]-n}function FS(e,t,n){e[0]=t[0]+n,e[1]=t[1]+n,e[2]=t[2]+n}function y$(e,t){e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2])}function Xy(e,t){e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2])}function sT(e,t){e[0]=-t[0],e[1]=-t[1],e[2]=-t[2]}function Uot(e,t){t===void 0&&(t=9);for(var n=Math.floor(t/2),r=e.position1.length/3,i=3*(n*r),o=1/t,a=oT(e.position1,e.position2),s=new Float32Array(i),l=new Float32Array(i),c=new V,u=0;u<r;++u){var f=3*u;c.set(a[f],a[f+1],a[f+2]);for(var d=e.position1[f],p=e.position1[f+1],h=e.position1[f+2],g=0;g<n;++g){var v=n*f+3*g,m=o*(2*g+1),y=o*(2*g+2);s[v]=d+c.x*m,s[v+1]=p+c.y*m,s[v+2]=h+c.z*m,l[v]=d+c.x*y,l[v+1]=p+c.y*y,l[v+2]=h+c.z*y}}var _=Ac(s,l),b=function(w,S){for(var A=w.length/3,C=new Float32Array(A*S*3),k=0;k<A;++k)for(var O=3*k,T=k*S*3,B=w[O+0],R=w[O+1],P=w[O+2],D=0;D<S;++D){var z=T+3*D;C[z+0]=B,C[z+1]=R,C[z+2]=P}return C}(e.color,n),x={position:_,position1:s,position2:l,color:b,color2:b};return e.radius&&(x.radius=uR(e.radius,n)),e.picking&&e.picking.array&&(e.picking.array=uR(e.picking.array,n),x.picking=e.picking),e.primitiveId&&(x.primitiveId=uR(e.primitiveId,n)),x}function _oe(e,t){t===void 0&&(t=.1);for(var n=oT(e.position1,e.position2),r=[],i=[],o=[],a=e.radius?[]:void 0,s=e.picking?[]:void 0,l=e.primitiveId?[]:void 0,c=new V,u=e.position1.length/3,f=0,d=0;d<u;++d){var p=3*d;c.set(n[p],n[p+1],n[p+2]);for(var h=c.length()/t,g=Math.floor(h/2),v=1/h,m=e.position1[p],y=e.position1[p+1],_=e.position1[p+2],b=0;b<g;++b){var x=3*f+3*b,w=v*(2*b+1),S=v*(2*b+2);r[x]=m+c.x*w,r[x+1]=y+c.y*w,r[x+2]=_+c.z*w,i[x]=m+c.x*S,i[x+1]=y+c.y*S,i[x+2]=_+c.z*S,e.color&&(o[x]=e.color[p],o[x+1]=e.color[p+1],o[x+2]=e.color[p+2]),a&&(a[f+b]=e.radius[d]),s&&(e.picking.array?s[f+b]=e.picking.array[d]:s[f+b]=d),l&&(l[f+b]=e.primitiveId[d])}f+=g}var A=new Float32Array(r),C=new Float32Array(i),k=Ac(A,C),O=new Float32Array(o),T={position:k,position1:A,position2:C,color:O,color2:O};return a&&(T.radius=new Float32Array(a)),s&&e.picking&&(e.picking.array=new Float32Array(s),T.picking=e.picking),l&&(T.primitiveId=new Float32Array(l)),T}function b$(e,t){t===void 0&&(t=.1);for(var n=oT(e.position1,e.position2),r=[],i=[],o=[],a=e.radius?[]:void 0,s=e.picking?[]:void 0,l=e.primitiveId?[]:void 0,c=new V,u=e.position1.length/3,f=t,d=!0,p=0,h=0,g=0,v=0;v<u;++v){var m=3*v,y=e.position1[m],_=e.position1[m+1],b=e.position1[m+2];c.set(n[m],n[m+1],n[m+2]);var x=c.length();d&&(r[h]=y,r[h+1]=_,r[h+2]=b);for(var w=f,S=1/x;w<x;){var A=d?i:r;A[h]=y+c.x*w*S,A[h+1]=_+c.y*w*S,A[h+2]=b+c.z*w*S,d&&(h=3*++p),d=!d,f=t,w+=t}d&&(i[h]=e.position2[m],i[h+1]=e.position2[m+1],i[h+2]=e.position2[m+2],h=3*++p),f=w-x;for(var C=g;C<p;C++){if(e.color){var k=3*C;o[k]=e.color[m],o[k+1]=e.color[m+1],o[k+2]=e.color[m+2]}a&&(a[C]=e.radius[v]),s&&(e.picking.array?s[C]=e.picking.array[v]:s[C]=v),l&&(l[C]=e.primitiveId[v])}g=p}if(!d&&u>0){var O=3*p;i[O]=e.position2[3*u-3],i[O+1]=e.position2[3*u-2],i[O+1]=e.position2[3*u-1]}var T=new Float32Array(r),B=new Float32Array(i),R=Ac(T,B),P=new Float32Array(o),D={position:R,position1:T,position2:B,color:P,color2:P};return a&&(D.radius=new Float32Array(a)),s&&e.picking&&(e.picking.array=new Float32Array(s),D.picking=e.picking),l&&(D.primitiveId=new Float32Array(l)),D}Fm.prototype.post=function(e,t,n,r){e===void 0&&(e={});var i=this.getNextWorker();return i?i.post(e,t,n,r):console.error("unable to get worker from pool"),this},Fm.prototype.terminate=function(){this.pool.forEach(function(e){e.terminate()})},Fm.prototype.getNextWorker=function(){for(var e,t=1/0,n=0;n<this.maxCount;++n){if(n>=this.count){e=new XA(this.name),this.pool.push(e),this.count+=1;break}var r=this.pool[n];if(r.pending===0){e=r;break}r.pending<t&&(t=r.pending,e=r)}return e},Fm.prototype.constructor=Fm,t_.__deps=[Qt],pg.__deps=[Zn],Fr.__deps=[Zn,yoe];var xd=new V,Fi=function(){},xR={Picker:{configurable:!0},Buffer:{configurable:!0}};xR.Picker.get=function(){return xs.get(this.type)},xR.Buffer.get=function(){return ds.get(this.type)},Fi.getShapeKey=function(e){return this.type+e[0].toUpperCase()+e.substr(1)},Fi.expandBoundingBox=function(e,t){},Fi.valueToShape=function(e,t,n){var r,i,o=e._primitiveData[this.getShapeKey(t)];switch(this.fields[t]){case"v3":case"c":i=o,(r=n).toArray!==void 0?r=r.toArray():r.x!==void 0?r=[r.x,r.y,r.z]:r.r!==void 0&&(r=[r.r,r.g,r.b]),i.push.apply(i,r);break;default:o.push(n)}},Fi.objectToShape=function(e,t){var n=this;Object.keys(this.fields).forEach(function(r){n.valueToShape(e,r,t[r])}),this.valueToShape(e,"name",t.name),this.expandBoundingBox(e.boundingBox,t)},Fi.valueFromShape=function(e,t,n){var r=e._primitiveData[this.getShapeKey(n)];switch(this.fields[n]){case"v3":return new V().fromArray(r,3*t);case"c":return new ht().fromArray(r,3*t);default:return r[t]}},Fi.objectFromShape=function(e,t){var n=this,r=this.valueFromShape(e,t,"name");r===void 0&&(r=this.type+": "+t+" ("+e.name+")");var i={shape:e,name:r};return Object.keys(this.fields).forEach(function(o){i[o]=n.valueFromShape(e,t,o)}),i},Fi.arrayFromShape=function(e,t){var n=e._primitiveData[this.getShapeKey(t)];return this.fields[t]==="s"?n:new Float32Array(n)},Fi.dataFromShape=function(e){var t=this,n={};return this.Picker&&(n.picking=new this.Picker(e)),Object.keys(this.fields).forEach(function(r){n[r]=t.arrayFromShape(e,r)}),n},Fi.bufferFromShape=function(e,t){return new this.Buffer(this.dataFromShape(e),t)},Object.defineProperties(Fi,xR),Fi.type="",Fi.fields={};var Xv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(n,r){return this.valueFromShape(n,r,"position")},t.expandBoundingBox=function(n,r){n.expandByPoint(xd.fromArray(r.position))},t}(Fi);Xv.type="sphere",Xv.fields={position:"v3",color:"c",radius:"f"};var vh=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(n,r){return this.valueFromShape(n,r,"position")},t.expandBoundingBox=function(n,r){n.expandByPoint(xd.fromArray(r.position))},t}(Fi);vh.type="box",vh.fields={position:"v3",color:"c",size:"f",heightAxis:"v3",depthAxis:"v3"};var lT=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(vh);lT.type="octahedron";var cT=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(vh);cT.type="tetrahedron";var yh=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(n,r){var i=this.valueFromShape(n,r,"position1"),o=this.valueFromShape(n,r,"position2");return i.add(o).multiplyScalar(.5)},t.expandBoundingBox=function(n,r){n.expandByPoint(xd.fromArray(r.position1)),n.expandByPoint(xd.fromArray(r.position2))},t.bufferFromShape=function(n,r){r===void 0&&(r={});var i=this.dataFromShape(n);return this.type==="cylinder"&&r.dashedCylinder&&(i=_oe(i)),new this.Buffer(i,r)},t}(Fi);yh.type="cylinder",yh.fields={position1:"v3",position2:"v3",color:"c",radius:"f"};var uT=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(yh);uT.type="arrow";var fT=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(yh);fT.type="cone";var Yv=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Xv);Yv.type="ellipsoid",Yv.fields={position:"v3",color:"c",radius:"f",majorAxis:"v3",minorAxis:"v3"};var dT=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Yv);dT.type="torus";var YA=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(n,r){return this.valueFromShape(n,r,"position")},t.expandBoundingBox=function(n,r){n.expandByPoint(xd.fromArray(r.position))},t}(Fi);YA.type="text",YA.fields={position:"v3",color:"c",size:"f",text:"s"};var n_=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(n,r){return this.valueFromShape(n,r,"position")},t.expandBoundingBox=function(n,r){n.expandByPoint(xd.fromArray(r.position))},t}(Fi);n_.type="point",n_.fields={position:"v3",color:"c"};var r_=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.positionFromShape=function(n,r){var i=this.valueFromShape(n,r,"position1"),o=this.valueFromShape(n,r,"position2");return i.add(o).multiplyScalar(.5)},t.expandBoundingBox=function(n,r){n.expandByPoint(xd.fromArray(r.position1)),n.expandByPoint(xd.fromArray(r.position2))},t}(Fi);r_.type="wideline",r_.fields={position1:"v3",position2:"v3",color:"c"};var bh=function(e,t){this.exp=3;var n=t||function(O){for(var T=O.x,B=O.y,R=O.z,P=new cr,D=T.length,z=P.min,N=P.max,H=0;H<D;H++)z.x=Math.min(T[H],z.x),z.y=Math.min(B[H],z.y),z.z=Math.min(R[H],z.z),N.x=Math.max(T[H],N.x),N.y=Math.max(B[H],N.y),N.z=Math.max(R[H],N.z);return P}(e);this.minX=n.min.x,this.minY=n.min.y,this.minZ=n.min.z,this.boundX=1+(n.max.x-this.minX>>this.exp),this.boundY=1+(n.max.y-this.minY>>this.exp),this.boundZ=1+(n.max.z-this.minZ>>this.exp);for(var r=this.boundX*this.boundY*this.boundZ,i=e.count!==void 0?e.count:e.x.length,o=e.x,a=e.y,s=e.z,l=0,c=new Uint32Array(r),u=new Int32Array(i),f=0;f<i;++f){var d=o[f]-this.minX>>this.exp,p=a[f]-this.minY>>this.exp,h=s[f]-this.minZ>>this.exp,g=(d*this.boundY+p)*this.boundZ+h;(c[g]+=1)===1&&(l+=1),u[f]=g}for(var v=new Uint16Array(l),m=0,y=0;m<r;++m){var _=c[m];_>0&&(c[m]=y+1,v[y]=_,y+=1)}for(var b=new Uint32Array(l),x=1;x<l;++x)b[x]+=b[x-1]+v[x-1];for(var w=new Uint16Array(l),S=new Int32Array(i),A=0;A<i;++A){var C=c[u[A]];if(C>0){var k=C-1;S[b[k]+w[k]]=A,w[k]+=1}}this.grid=c,this.bucketCount=v,this.bucketOffset=b,this.bucketArray=S,this.xArray=o,this.yArray=a,this.zArray=s};bh.prototype.within=function(e,t,n,r){var i=[];return this.eachWithin(e,t,n,r,function(o){return i.push(o)}),i},bh.prototype.eachWithin=function(e,t,n,r,i){for(var o=r*r,a=Math.max(0,e-r-this.minX>>this.exp),s=Math.max(0,t-r-this.minY>>this.exp),l=Math.max(0,n-r-this.minZ>>this.exp),c=Math.min(this.boundX,1+(e+r-this.minX>>this.exp)),u=Math.min(this.boundY,1+(t+r-this.minY>>this.exp)),f=Math.min(this.boundZ,1+(n+r-this.minZ>>this.exp)),d=a;d<c;++d)for(var p=s;p<u;++p)for(var h=l;h<f;++h){var g=(d*this.boundY+p)*this.boundZ+h,v=this.grid[g];if(v>0)for(var m=v-1,y=this.bucketOffset[m],_=y+this.bucketCount[m],b=y;b<_;++b){var x=this.bucketArray[b],w=this.xArray[x]-e,S=this.yArray[x]-t,A=this.zArray[x]-n,C=w*w+S*S+A*A;C<=o&&i(x,C)}}};var Ji=function(e){this._fields=this._defaultFields,this._init(0)},zV={_defaultFields:{configurable:!0}};zV._defaultFields.get=function(){return[]},Ji.prototype._init=function(e){this.length=e,this.count=0;for(var t=0,n=this._fields.length;t<n;++t){var r=this._fields[t],i=r[0],o=r[1],a=r[2];this._initField(i,o,a)}},Ji.prototype._initField=function(e,t,n){this[e]=ooe(n,this.length*t)},Ji.prototype.addField=function(e,t,n){this._fields.push([e,t,n]),this._initField(e,t,n)},Ji.prototype.resize=function(e){this.length=Math.round(e||0),this.count=Math.min(this.count,this.length);for(var t=0,n=this._fields.length;t<n;++t){var r=this._fields[t][0],i=this._fields[t][1],o=this.length*i,a=new this[r].constructor(o);this[r].length>o?a.set(this[r].subarray(0,o)):a.set(this[r]),this[r]=a}},Ji.prototype.growIfFull=function(){if(this.count>=this.length){var e=Math.round(1.5*this.length);this.resize(Math.max(256,e))}},Ji.prototype.copyFrom=function(e,t,n,r){for(var i=0,o=this._fields.length;i<o;++i)for(var a=this._fields[i][0],s=this._fields[i][1],l=this[a],c=e[a],u=0;u<r;++u)for(var f=s*(t+u),d=s*(n+u),p=0;p<s;++p)l[f+p]=c[d+p]},Ji.prototype.copyWithin=function(e,t,n){for(var r=0,i=this._fields.length;r<i;++r)for(var o=this._fields[r][0],a=this._fields[r][1],s=this[o],l=0;l<n;++l)for(var c=a*(e+l),u=a*(t+l),f=0;f<a;++f)s[c+f]=s[u+f]},Ji.prototype.sort=function(e){Ge.time("Store.sort");var t=this,n=new this.constructor(1);(function r(i,o){if(i<o){var a=Math.floor((i+o)/2),s=i,l=o;do{for(;e(s,a)<0;)s+=1;for(;e(l,a)>0;)l-=1;s<=l&&(s===a?a=l:l===a&&(a=s),(c=s)!==(u=l)&&(n.copyFrom(t,0,c,1),t.copyWithin(c,u,1),t.copyFrom(n,u,0,1)),s+=1,l-=1)}while(s<=l);r(i,l),r(s,o)}var c,u})(0,this.count-1),Ge.timeEnd("Store.sort")},Ji.prototype.clear=function(){this.count=0},Ji.prototype.dispose=function(){for(var e=0,t=this._fields.length;e<t;++e)delete this[this._fields[e][0]]},Object.defineProperties(Ji.prototype,zV);var Vot=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["index1",1,"int32"],["index2",1,"int32"],["type",1,"int8"]]},t.prototype.addContact=function(r,i,o){this.growIfFull();var a=this.count;r<i?(this.index1[a]=r,this.index2[a]=i):(this.index2[a]=r,this.index1[a]=i),o&&(this.type[a]=o),this.count+=1},Object.defineProperties(t.prototype,n),t}(Ji);function R2(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24}var Jt=function(e,t){this.length=e,this._words=new Uint32Array(e+32>>>5),t===!0&&this.setAll()};function xoe(e){for(var t=e.edgeCount,n=e.nodeCount,r=e.nodeArray1,i=e.nodeArray2,o=new Uint8Array(n),a=new Int32Array(n),s=0;s<t;++s)o[r[s]]+=1,o[i[s]]+=1;for(var l=1;l<n;++l)a[l]+=a[l-1]+o[l-1];for(var c=2*t,u=new Int32Array(c),f=0;f<c;++f)u[f]=-1;for(var d=0;d<t;++d){for(var p=r[d],h=i[d],g=a[p];u[g]!==-1&&g<c;)g+=1;u[g]=d;for(var v=a[h];u[v]!==-1&&v<c;)v+=1;u[v]=d}return{countArray:o,offsetArray:a,indexArray:u}}function Bi(e,t){return e===void 0&&(e=0),t===void 0&&(t=0),{type:e,group:t,x:0,y:0,z:0,atomSet:[]}}function ei(e,t){e.x+=t.x,e.y+=t.y,e.z+=t.z,e.atomSet.push(t.index)}function ti(e,t){var n=t.atomSet.length;if(n>0){var r=e.types,i=e.groups,o=e.centers,a=e.atomSets;r.push(t.type),i.push(t.group),o.x.push(t.x/n),o.y.push(t.y/n),o.z.push(t.z/n),a.push(t.atomSet)}}Jt.prototype.get=function(e){return(this._words[e>>>5]&1<<e)!=0},Jt.prototype.set=function(e){this._words[e>>>5]|=1<<e},Jt.prototype.clear=function(e){this._words[e>>>5]&=~(1<<e)},Jt.prototype.flip=function(e){this._words[e>>>5]^=1<<e},Jt.prototype._assignRange=function(e,t,n){if(!(t<e)){for(var r=this._words,i=n===!0?4294967295:0,o=e>>>5,a=t>>>5,s=o+1;s<a;++s)r[s]=i;var l=o<<5,c=a<<5;if(n===!0)if(t-e<32)for(var u=e,f=t+1;u<f;++u)r[u>>>5]|=1<<u;else{for(var d=e,p=l+32;d<p;++d)r[d>>>5]|=1<<d;for(var h=c,g=t+1;h<g;++h)r[h>>>5]|=1<<h}else if(t-e<32)for(var v=e,m=t+1;v<m;++v)r[v>>>5]&=~(1<<v);else{for(var y=e,_=l+32;y<_;++y)r[y>>>5]&=~(1<<y);for(var b=c,x=t+1;b<x;++b)r[b>>>5]&=~(1<<b)}return this}},Jt.prototype.setRange=function(e,t){return this._assignRange(e,t,!0)},Jt.prototype.clearRange=function(e,t){return this._assignRange(e,t,!1)},Jt.prototype.setBits=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];n[o>>>5]|=1<<o}return this},Jt.prototype.clearBits=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];n[o>>>5]&=~(1<<o)}return this},Jt.prototype.setAll=function(){return this._assignRange(0,this.length-1,!0)},Jt.prototype.clearAll=function(){return this._assignRange(0,this.length-1,!1)},Jt.prototype.flipAll=function(){for(var e=this._words.length,t=this._words,n=32-this.length%32,r=0;r<e-1;++r)t[r]=~t[r];return t[e-1]=~(t[e-1]<<n)>>>n,this},Jt.prototype._isRangeValue=function(e,t,n){if(!(t<e)){for(var r=this._words,i=n===!0?4294967295:0,o=e>>>5,a=t>>>5,s=o+1;s<a;++s)if(r[s]!==i)return!1;if(t-e<32){for(var l=e,c=t+1;l<c;++l)if(!!(r[l>>>5]&1<<l)!==n)return!1}else{for(var u=a<<5,f=e,d=(o<<5)+32;f<d;++f)if(!!(r[f>>>5]&1<<f)!==n)return!1;for(var p=u,h=t+1;p<h;++p)if(!!(r[p>>>5]&1<<p)!==n)return!1}return!0}},Jt.prototype.isRangeSet=function(e,t){return this._isRangeValue(e,t,!0)},Jt.prototype.isRangeClear=function(e,t){return this._isRangeValue(e,t,!1)},Jt.prototype.isAllSet=function(){return this._isRangeValue(0,this.length-1,!0)},Jt.prototype.isAllClear=function(){return this._isRangeValue(0,this.length-1,!1)},Jt.prototype.isSet=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];if(!(n[o>>>5]&1<<o))return!1}return!0},Jt.prototype.isClear=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=this._words,r=e.length,i=0;i<r;++i){var o=e[i];if(n[o>>>5]&1<<o)return!1}return!0},Jt.prototype.isEqualTo=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)if(t[i]!==n[i])return!1;return!0},Jt.prototype.getSize=function(){for(var e=this._words.length,t=this._words,n=0,r=0;r<e;++r)n+=R2(t[r]);return n},Jt.prototype.difference=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)t[i]=t[i]&~n[i];for(var o=t.length;o<r;++o)t[o]=0;return this},Jt.prototype.union=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)t[i]|=n[i];for(var o=t.length;o<r;++o)t[o]=0;return this},Jt.prototype.intersection=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)t[i]&=n[i];for(var o=t.length;o<r;++o)t[o]=0;return this},Jt.prototype.intersects=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0;i<r;++i)if(t[i]&n[i])return!0;return!1},Jt.prototype.getIntersectionSize=function(e){for(var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=0,o=0;o<r;++o)i+=R2(t[o]&n[o]);return i},Jt.prototype.makeIntersection=function(e){var t=this._words,n=e._words,r=Math.min(t.length,n.length),i=new Uint32Array(r),o=Object.create(Jt.prototype);o._words=i,o.length=Math.min(this.length,e.length);for(var a=0;a<r;++a)i[a]=t[a]&n[a];return o},Jt.prototype.forEach=function(e){for(var t=this._words.length,n=this._words,r=0,i=0;i<t;++i)for(var o=n[i];o!==0;){var a=o&-o;e((i<<5)+R2(a-1),r),o^=a,++r}},Jt.prototype.toArray=function(){for(var e=this._words,t=new Array(this.getSize()),n=this._words.length,r=0,i=0;i<n;++i)for(var o=e[i];o!==0;){var a=o&-o;t[r++]=(i<<5)+R2(a-1),o^=a}return t},Jt.prototype.toString=function(){return"{"+this.toArray().join(",")+"}"},Jt.prototype.toSeleString=function(){var e=this.toArray().join(",");return e?"@"+e:"NONE"},Jt.prototype.clone=function(){var e=Object.create(Jt.prototype);return e.length=this.length,e._words=new Uint32Array(this._words),e};var Hot=["D-BETA-PEPTIDE, C-GAMMA LINKING","D-GAMMA-PEPTIDE, C-DELTA LINKING","D-PEPTIDE COOH CARBOXY TERMINUS","D-PEPTIDE NH3 AMINO TERMINUS","D-PEPTIDE LINKING","L-BETA-PEPTIDE, C-GAMMA LINKING","L-GAMMA-PEPTIDE, C-DELTA LINKING","L-PEPTIDE COOH CARBOXY TERMINUS","L-PEPTIDE NH3 AMINO TERMINUS","L-PEPTIDE LINKING","PEPTIDE LINKING","PEPTIDE-LIKE"],Got=["RNA OH 3 PRIME TERMINUS","RNA OH 5 PRIME TERMINUS","RNA LINKING"],Wot=["DNA OH 3 PRIME TERMINUS","DNA OH 5 PRIME TERMINUS","DNA LINKING","L-DNA LINKING","L-RNA LINKING"],woe=["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","SACCHARIDE"],qot=["NON-POLYMER"].concat(["OTHER"],woe),Soe=["h","g","i"],Coe=["e","b"],Aoe=["s","t","l",""],Poe={H:1,D:1,T:1,HE:2,LI:3,BE:4,B:5,C:6,N:7,O:8,F:9,NE:10,NA:11,MG:12,AL:13,SI:14,P:15,S:16,CL:17,AR:18,K:19,CA:20,SC:21,TI:22,V:23,CR:24,MN:25,FE:26,CO:27,NI:28,CU:29,ZN:30,GA:31,GE:32,AS:33,SE:34,BR:35,KR:36,RB:37,SR:38,Y:39,ZR:40,NB:41,MO:42,TC:43,RU:44,RH:45,PD:46,AG:47,CD:48,IN:49,SN:50,SB:51,TE:52,I:53,XE:54,CS:55,BA:56,LA:57,CE:58,PR:59,ND:60,PM:61,SM:62,EU:63,GD:64,TB:65,DY:66,HO:67,ER:68,TM:69,YB:70,LU:71,HF:72,TA:73,W:74,RE:75,OS:76,IR:77,PT:78,AU:79,HG:80,TL:81,PB:82,BI:83,PO:84,AT:85,RN:86,FR:87,RA:88,AC:89,TH:90,PA:91,U:92,NP:93,PU:94,AM:95,CM:96,BK:97,CF:98,ES:99,FM:100,MD:101,NO:102,LR:103,RF:104,DB:105,SG:106,BH:107,HS:108,MT:109,DS:110,RG:111,CN:112,NH:113,FL:114,MC:115,LV:116,TS:117,OG:118},Xot={1:1.1,2:1.4,3:1.81,4:1.53,5:1.92,6:1.7,7:1.55,8:1.52,9:1.47,10:1.54,11:2.27,12:1.73,13:1.84,14:2.1,15:1.8,16:1.8,17:1.75,18:1.88,19:2.75,20:2.31,21:2.3,22:2.15,23:2.05,24:2.05,25:2.05,26:2.05,27:2,28:2,29:2,30:2.1,31:1.87,32:2.11,33:1.85,34:1.9,35:1.83,36:2.02,37:3.03,38:2.49,39:2.4,40:2.3,41:2.15,42:2.1,43:2.05,44:2.05,45:2,46:2.05,47:2.1,48:2.2,49:2.2,50:1.93,51:2.17,52:2.06,53:1.98,54:2.16,55:3.43,56:2.68,57:2.5,58:2.48,59:2.47,60:2.45,61:2.43,62:2.42,63:2.4,64:2.38,65:2.37,66:2.35,67:2.33,68:2.32,69:2.3,70:2.28,71:2.27,72:2.25,73:2.2,74:2.1,75:2.05,76:2,77:2,78:2.05,79:2.1,80:2.05,81:1.96,82:2.02,83:2.07,84:1.97,85:2.02,86:2.2,87:3.48,88:2.83,89:2,90:2.4,91:2,92:2.3,93:2,94:2,95:2,96:2,97:2,98:2,99:2,100:2,101:2,102:2,103:2,104:2,105:2,106:2,107:2,108:2,109:2,110:2,111:2,112:2,113:2,114:2,115:2,116:2,117:2,118:2},Yot={1:.31,2:.28,3:1.28,4:.96,5:.84,6:.76,7:.71,8:.66,9:.57,10:.58,11:1.66,12:1.41,13:1.21,14:1.11,15:1.07,16:1.05,17:1.02,18:1.06,19:2.03,20:1.76,21:1.7,22:1.6,23:1.53,24:1.39,25:1.39,26:1.32,27:1.26,28:1.24,29:1.32,30:1.22,31:1.22,32:1.2,33:1.19,34:1.2,35:1.2,36:1.16,37:2.2,38:1.95,39:1.9,40:1.75,41:1.64,42:1.54,43:1.47,44:1.46,45:1.42,46:1.39,47:1.45,48:1.44,49:1.42,50:1.39,51:1.39,52:1.38,53:1.39,54:1.4,55:2.44,56:2.15,57:2.07,58:2.04,59:2.03,60:2.01,61:1.99,62:1.98,63:1.98,64:1.96,65:1.94,66:1.92,67:1.92,68:1.89,69:1.9,70:1.87,71:1.87,72:1.75,73:1.7,74:1.62,75:1.51,76:1.44,77:1.41,78:1.36,79:1.36,80:1.32,81:1.45,82:1.46,83:1.48,84:1.4,85:1.5,86:1.5,87:2.6,88:2.21,89:2.15,90:2.06,91:2,92:1.96,93:1.9,94:1.87,95:1.8,96:1.69,97:1.6,98:1.6,99:1.6,100:1.6,101:1.6,102:1.6,103:1.6,104:1.6,105:1.6,106:1.6,107:1.6,108:1.6,109:1.6,110:1.6,111:1.6,112:1.6,113:1.6,114:1.6,115:1.6,116:1.6,117:1.6,118:1.6},UV={1:[1],2:[0],3:[1],4:[2],5:[3],6:[4],7:[3],8:[2],9:[1],10:[0],11:[1],12:[2],13:[6],14:[6],15:[3,5,7],16:[2,4,6],17:[1],18:[0],19:[1],20:[2],31:[3],32:[4],33:[3,5],34:[2,4,6],35:[1],36:[0],37:[1],38:[2],49:[3],50:[4],51:[3,5],52:[2],53:[1,2,5],54:[0,2],55:[1],56:[2],81:[3],82:[4],83:[3],84:[2],85:[1],86:[0],87:[1],88:[2]},Kot={1:1,2:2,3:1,4:2,5:3,6:4,7:5,8:6,9:7,10:8,11:1,12:2,13:3,14:4,15:5,16:6,17:7,18:8,19:1,20:2,21:3,22:4,23:5,24:6,25:7,26:8,27:9,28:10,29:11,30:2,31:3,32:4,33:5,34:6,35:7,36:8,37:1,38:2,39:3,40:4,41:5,42:6,43:7,44:8,45:9,46:10,47:11,48:2,49:3,50:4,51:5,52:6,53:7,54:8,55:1,56:2,57:3,58:4,59:3,60:4,61:5,62:6,63:7,64:8,65:9,66:10,67:11,68:12,69:13,70:14,71:15,72:4,73:5,74:6,75:7,76:8,77:9,78:10,79:11,80:2,81:3,82:4,83:5,84:6,85:7,86:8,87:1,88:2,89:3,90:4,91:3,92:4,93:5,94:6,95:7,96:8,97:9,98:10,99:11,100:12,101:13,102:14,103:15,104:2,105:2,106:2,107:2,108:2,109:2,110:2,111:2,112:2,113:3,114:4,115:5,116:6,117:7,118:8},VV={ALA:[.17,.5,.33],ARG:[.81,1.81,1],ASN:[.42,.85,.43],ASP:[1.23,3.64,2.41],ASH:[-.07,.43,.5],CYS:[-.24,-.02,.22],GLN:[.58,.77,.19],GLU:[2.02,3.63,1.61],GLH:[-.01,.11,.12],GLY:[.01,1.15,1.14],HIS:[.17,.11,-.06],ILE:[-.31,-1.12,-.81],LEU:[-.56,-1.25,-.69],LYS:[.99,2.8,1.81],MET:[-.23,-.67,-.44],PHE:[-1.13,-1.71,-.58],PRO:[.45,.14,-.31],SER:[.13,.46,.33],THR:[.14,.25,.11],TRP:[-1.85,-2.09,-.24],TYR:[-.94,-.71,.23],VAL:[.07,-.46,-.53]},Zot=[0,0,0],KA={HIS:"H",ARG:"R",LYS:"K",ILE:"I",PHE:"F",LEU:"L",TRP:"W",ALA:"A",MET:"M",PRO:"P",CYS:"C",ASN:"N",VAL:"V",GLY:"G",SER:"S",GLN:"Q",TYR:"Y",ASP:"D",GLU:"E",THR:"T",SEC:"U",PYL:"O"},Lg=Object.keys(KA),Moe=["A","C","T","G","U","I"],Eoe=["DA","DC","DT","DG","DU","DI"],Jot=["A","G","I","DA","DG","DI"],Pb=Moe.concat(Eoe),ZA=["SOL","WAT","HOH","H2O","W","DOD","D3O","TIP3","TIP4","SPC"],Qot=["118","119","1AL","1CU","2FK","2HP","2OF","3CO","3MT","3NI","3OF","3P8","4MO","4PU","543","6MO","ACT","AG","AL","ALF","AM","ATH","AU","AU3","AUC","AZI","BA","BCT","BEF","BF4","BO4","BR","BS3","BSY","CA","CAC","CD","CD1","CD3","CD5","CE","CHT","CL","CO","CO3","CO5","CON","CR","CS","CSB","CU","CU1","CU3","CUA","CUZ","CYN","DME","DMI","DSC","DTI","DY","E4N","EDR","EMC","ER3","EU","EU3","F","FE","FE2","FPO","GA","GD3","GEP","HAI","HG","HGC","IN","IOD","IR","IR3","IRI","IUM","K","KO4","LA","LCO","LCP","LI","LU","MAC","MG","MH2","MH3","MLI","MLT","MMC","MN","MN3","MN5","MN6","MO1","MO2","MO3","MO4","MO5","MO6","MOO","MOS","MOW","MW1","MW2","MW3","NA","NA2","NA5","NA6","NAO","NAW","NCO","NET","NH4","NI","NI1","NI2","NI3","NO2","NO3","NRU","O4M","OAA","OC1","OC2","OC3","OC4","OC5","OC6","OC7","OC8","OCL","OCM","OCN","OCO","OF1","OF2","OF3","OH","OS","OS4","OXL","PB","PBM","PD","PDV","PER","PI","PO3","PO4","PR","PT","PT4","PTN","RB","RH3","RHD","RU","SB","SCN","SE4","SEK","SM","SMO","SO3","SO4","SR","T1A","TB","TBA","TCN","TEA","TH","THE","TL","TMA","TRA","UNX","V","VN3","VO4","W","WO5","Y1","YB","YB2","YH","YT3","ZCM","ZN","ZN2","ZN3","ZNO","ZO3","OHX"],eat=["045","0AT","0BD","0MK","0NZ","0TS","0V4","0XY","0YT","10M","147","149","14T","15L","16G","18T","18Y","1AR","1BW","1GL","1GN","1JB","1LL","1NA","1S3","26M","26Q","26R","26V","26W","26Y","27C","289","291","293","2DG","2F8","2FG","2FL","2FP","2GL","2M4","2M5","32O","34V","3CM","3DO","3DY","3FM","3LR","3MF","3MG","3SA","3ZW","46D","46M","46Z","48Z","4CQ","4GC","4NN","50A","5DI","5GF","5MM","5RP","5SA","5SP","64K","6PG","6SA","7JZ","7SA","A1Q","A2G","AAB","AAL","AAO","ABC","ABD","ABE","ABF","ABL","ACG","ACI","ACR","ACX","ADA","ADG","ADR","AF1","AFD","AFL","AFO","AFP","AFR","AGC","AGH","AGL","AHR","AIG","ALL","ALX","AMU","AOG","AOS","ARA","ARB","ARE","ARI","ASG","ASO","AXP","AXR","B0D","B16","B2G","B4G","B6D","B8D","B9D","BBK","BCD","BDG","BDP","BDR","BEM","BFP","BGC","BGL","BGP","BGS","BHG","BMA","BMX","BNG","BNX","BOG","BRI","BXF","BXP","BXX","BXY","C3X","C4X","C5X","CAP","CBI","CBK","CBS","CDR","CEG","CGF","CHO","CR1","CR6","CRA","CT3","CTO","CTR","CTT","D6G","DAF","DAG","DDA","DDB","DDL","DEL","DFR","DFX","DG0","DGC","DGD","DGM","DGS","DIG","DLF","DLG","DMU","DNO","DOM","DP5","DQQ","DQR","DR2","DR3","DR4","DRI","DSR","DT6","DVC","E4P","E5G","EAG","EBG","EBQ","EGA","EJT","EPG","ERE","ERI","F1P","F1X","F6P","FBP","FCA","FCB","FCT","FDP","FDQ","FFC","FIX","FMO","FRU","FSI","FU4","FUB","FUC","FUD","FUL","FXP","G16","G1P","G2F","G3I","G4D","G4S","G6D","G6P","G6S","GAC","GAD","GAL","GC1","GC4","GCD","GCN","GCO","GCS","GCT","GCU","GCV","GCW","GCX","GE1","GFG","GFP","GIV","GL0","GL2","GL5","GL6","GL7","GL9","GLA","GLB","GLC","GLD","GLF","GLG","GLO","GLP","GLS","GLT","GLW","GMH","GN1","GNX","GP1","GP4","GPH","GPM","GQ1","GQ2","GQ4","GS1","GS4","GSA","GSD","GTE","GTH","GTK","GTR","GTZ","GU0","GU1","GU2","GU3","GU4","GU5","GU6","GU8","GU9","GUF","GUP","GUZ","GYP","GYV","H2P","HDL","HMS","HS2","HSD","HSG","HSH","HSJ","HSQ","HSR","HSU","HSX","HSY","HSZ","IAB","IDG","IDR","IDS","IDT","IDU","IDX","IDY","IMK","IN1","IPT","ISL","KBG","KD2","KDA","KDM","KDO","KFN","KO1","KO2","KTU","L6S","LAG","LAI","LAK","LAO","LAT","LB2","LBT","LCN","LDY","LGC","LGU","LM2","LMT","LMU","LOG","LOX","LPK","LSM","LTM","LVZ","LXB","LXZ","M1F","M3M","M6P","M8C","MA1","MA2","MA3","MAB","MAG","MAL","MAN","MAT","MAV","MAW","MBG","MCU","MDA","MDM","MDP","MFA","MFB","MFU","MG5","MGA","MGL","MLB","MMA","MMN","MN0","MRP","MTT","MUG","MVP","MXY","N1L","N9S","NAA","NAG","NBG","NDG","NED","NG1","NG6","NGA","NGB","NGC","NGE","NGF","NGL","NGS","NGY","NHF","NM6","NM9","NTF","NTO","NTP","NXD","NYT","OPG","OPM","ORP","OX2","P3M","P53","P6P","PA5","PNA","PNG","PNW","PRP","PSJ","PSV","PTQ","QDK","QPS","QV4","R1P","R1X","R2B","R5P","RAA","RAE","RAF","RAM","RAO","RAT","RB5","RBL","RCD","RDP","REL","RER","RF5","RG1","RGG","RHA","RIB","RIP","RNS","RNT","ROB","ROR","RPA","RST","RUB","RUU","RZM","S6P","S7P","SA0","SCR","SDD","SF6","SF9","SG4","SG5","SG6","SG7","SGA","SGC","SGD","SGN","SGS","SHB","SHG","SI3","SIO","SOE","SOL","SSG","SUC","SUP","SUS","T6P","T6T","TAG","TCB","TDG","TGK","TGY","TH1","TIA","TM5","TM6","TM9","TMR","TMX","TOA","TOC","TRE","TYV","UCD","UDC","VG1","X0X","X1X","X2F","X4S","X5S","X6X","XBP","XDN","XDP","XIF","XIM","XLF","XLS","XMM","XUL","XXR","XYP","XYS","YO5","Z3Q","Z6J","Z9M","ZDC","ZDM"],tat=["CA","C","N","O","O1","O2","OC1","OC2","OX1","OXT","OT1","OT2","H","H1","H2","H3","HA","HN","BB"],Toe=["P","OP1","OP2","HOP2","HOP3","O2'","O3'","O4'","O5'","C1'","C2'","C3'","C4'","C5'","H1'","H2'","H2''","HO2'","H3'","H4'","H5'","H5''","HO3'","HO5'","O2*","O3*","O4*","O5*","C1*","C2*","C3*","C4*","C5*"],jS={1:{trace:"CA",direction1:"C",direction2:["O","OC1","O1","OX1","OXT","OT1","OT2"],backboneStart:"N",backboneEnd:"C"},2:{trace:["C4'","C4*"],direction1:["C1'","C1*"],direction2:["C3'","C3*"],backboneStart:"P",backboneEnd:["O3'","O3*"]},3:{trace:["C3'","C3*"],direction1:["C2'","C2*"],direction2:["O4'","O4*"],backboneStart:"P",backboneEnd:["O3'","O3*"]},4:{trace:["CA","BB"],backboneStart:["CA","BB"],backboneEnd:["CA","BB"]},5:{trace:["C4'","C4*","P"],backboneStart:["C4'","C4*","P"],backboneEnd:["C4'","C4*","P"]},6:{trace:["C3'","C3*","C2'","P"],backboneStart:["C3'","C3*","C2'","P"],backboneEnd:["C3'","C3*","C2'","P"]},0:{}},HV={HD:"H",HS:"H",A:"C",NA:"N",NS:"N",OA:"O",OS:"O",SA:"S",G0:"C",G1:"C",G2:"C",G3:"C",CG0:"C",CG1:"C",CG2:"C",CG3:"C",W:"O"};function k2(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;default:return 8}}var GV=new Map([[2,jr(180)],[3,jr(120)],[4,jr(109.4721)],[6,jr(90)]]);function L2(e,t){var n=[],r=new V,i=new V;return r.subVectors(t,e),e.eachBondedAtom(function(o){o.number!==1&&(i.subVectors(o,e),n.push(r.angleTo(i)))}),n}function WV(e,t){var n=e.clone(),r=new V;r.subVectors(t,e);var i=[new V,new V],o=0;if(e.eachBondedAtom(function(s){o>1||s.number!==1&&(n.index=s.index,i[o++].subVectors(s,e))}),o===1&&n.eachBondedAtom(function(s){o>1||s.number!==1&&s.index!==e.index&&i[o++].subVectors(s,e)}),o===2){var a=i[0].cross(i[1]);return Math.abs(Math.PI/2-a.angleTo(r))}}function nat(e,t){var n=e.structure,r=n.atomCount,i=new Int8Array(r),o=new Int8Array(r),a=new Int8Array(r),s=new Int8Array(r);return n.eachAtom(function(l){var c=l.index,u=function(g,v){var m=g.bondToElementCount(1),y=g.formalCharge||0,_=v.assignCharge==="always"||v.assignCharge==="auto"&&y===0,b=v.assignH==="always"||v.assignH==="auto"&&m===0,x=g.bondCount,w=function(T){var B=0;return T.eachBond(function(R){return B+=R.bondOrder}),B}(g),S=function(T){var B=T.structure.getBondProxy(),R=T.number,P=R===8||R===7;if(P&&T.bondCount===4)return!1;var D=!1;return T.eachBond(function(z){if(z.bondOrder>1)D=!0;else if(P){var N=z.getOtherAtom(T);N.eachBond(function(H){if(H.bondOrder>1){var J=N.number;if((J===15||J===16)&&H.getOtherAtom(N).number===8)return;D=!0}},B)}}),D}(g),A=w-x>0,C=0,k=8;switch(g.number){case 1:_&&(x===0?(y=1,k=0):x===1&&(y=0,k=1));break;case 6:_&&(y=0),b&&(C=Math.max(0,4-w-Math.abs(y))),k=k2(x+C+Math.max(0,-y));break;case 7:if(_)if(b)if(S&&w<4)y=x-m==1&&w-m==2?1:0;else{var O=!1;g.eachBondedAtom(function(T){(T.number===16||T.isMetal())&&(O=!0)}),y=O?0:1}else y=w-3;b&&(C=Math.max(0,3-w+y)),k=k2(S&&!A?x+C-y:x+C+1-y);break;case 8:_&&(b||(y=w-2),w===1&&g.eachBondedAtom(function(T){T.eachBond(function(B){var R=B.getOtherAtom(T);R.index!==g.index&&R.number===8&&B.bondOrder===2&&(y=-1)})})),b&&(C=Math.max(0,2-w+y)),k=k2(S&&!A?x+C-y+1:x+C-y+2);break;case 16:_&&(b||(y=w<=3&&!g.bondToElementCount(8)?w-2:0)),b&&w<2&&(C=Math.max(0,2-w+y)),w<=3&&(k=k2(x+C-y+2));break;case 9:case 17:case 35:case 53:case 85:_&&(y=w-1);break;case 3:case 11:case 19:case 37:case 55:case 87:_&&(y=1-w);break;case 4:case 12:case 20:case 38:case 56:case 88:_&&(y=2-w);break;default:console.warn("Requested charge, protonation for an unhandled element",g.element)}return[y,C,C+m,k]}(l,t),f=u[0],d=u[1],p=u[2],h=u[3];i[c]=f,o[c]=d,a[c]=p,s[c]=h}),{charge:i,implicitH:o,totalH:a,idealGeometry:s}}function jm(e){if(e["@valenceModel"])return e["@valenceModel"];var t=nat(e,{assignCharge:"auto",assignH:"auto"});return e["@valenceModel"]=t,t}function qV(e){return e.number===15&&e.bondToElementCount(8)===e.bondCount}var rat=["ARG","HIS","LYS"],iat=["GLU","ASP"];function oat(e,t,n){n===void 0&&(n={});for(var r=K(n.maxIonicDist,Or.maxIonicDist),i=K(n.maxPiStackingDist,Or.maxPiStackingDist),o=K(n.maxPiStackingOffset,Or.maxPiStackingOffset),a=K(n.maxPiStackingAngle,Or.maxPiStackingAngle),s=K(n.maxCationPiDist,Or.maxCationPiDist),l=K(n.maxCationPiOffset,Or.maxCationPiOffset),c=K(n.masterModelIndex,Or.masterModelIndex),u=Math.max(r+2,i,s),f=i*i,d=s*s,p=t.features,h=t.spatialHash,g=t.contactStore,v=t.featureSet,m=p.types,y=p.centers,_=p.atomSets,b=y.x,x=y.y,w=y.z,S=m.length,A=e.atomStore.x,C=e.atomStore.y,k=e.atomStore.z,O=e.getAtomProxy(),T=e.getAtomProxy(),B=new V,R=new V,P=new V,D=new V,z=new V,N=new V,H=new V,J=function(se,Y){B.set(A[se[0]],C[se[0]],k[se[0]]),R.set(A[se[1]],C[se[1]],k[se[1]]),P.set(A[se[2]],C[se[2]],k[se[2]]),D.subVectors(B,R),z.subVectors(B,P),Y.crossVectors(D,z)},ne=function(se,Y,he){return B.set(b[se],x[se],w[se]),R.set(b[Y],x[Y],w[Y]),B.sub(R).projectOnPlane(he).add(R).distanceTo(R)},oe=function(se,Y,he){v.setBits(se,Y),g.addContact(se,Y,he)},Z=function(se){h.eachWithin(b[se],x[se],w[se],u,function(Y,he){if(!(Y<=se||(O.index=_[se][0],T.index=_[Y][0],Yy(O,T,c)))){var ae=m[se],ye=m[Y];if(function(_e,be){return _e===2&&be===1||_e===1&&be===2}(ae,ye))(function(_e,be,ke){for(var W=_e.length,ee=be.length,Ee=0;Ee<W;++Ee){O.index=_e[Ee];for(var ge=0;ge<ee;++ge)if(T.index=be[ge],O.distanceTo(T)<=ke)return!0}return!1})(_[se],_[Y],r)&&oe(se,Y,1);else if(function(_e,be){return _e===3&&be===3}(ae,ye)){if(he<=f){J(_[se],N),J(_[Y],H);var re=57.29578*N.angleTo(H);Math.min(ne(se,Y,H),ne(Y,se,N))<=o&&(re<=a||re>=180-a||re<=a+90&&re>=90-a)&&oe(se,Y,3)}}else if(function(_e,be){return _e===3&&be===1||_e===1&&be===3}(ae,ye)&&he<=d){var te=ae===3?[se,Y]:[Y,se],le=te[0],de=te[1];J(_[le],N),ne(de,le,N)<=l&&oe(le,de,2)}}})},ce=0;ce<S;++ce)Z(ce)}function XV(e){return e.resname==="HIS"&&e.number==7&&e.isRing()}var aat=[3,11,19,37,55,12,20,38,56,13,31,49,81,21,50,82,83,51,80],sat=[17,35,53,85],lat=[7,8,16],cat=[6,7,15,16],uat=jr(180),fat=jr(120);function YV(e,t,n){return!Ooe(e,t,n)&&(e.modelIndex!==t.modelIndex||e.altloc&&t.altloc&&e.altloc!==t.altloc)}var Or={maxHydrophobicDist:4,maxHbondDist:3.5,maxHbondSulfurDist:4.1,maxHbondAccAngle:45,maxHbondDonAngle:45,maxHbondAccPlaneAngle:90,maxHbondDonPlaneAngle:30,maxPiStackingDist:5.5,maxPiStackingOffset:2,maxPiStackingAngle:30,maxCationPiDist:6,maxCationPiOffset:2,maxIonicDist:5,maxHalogenBondDist:4,maxHalogenBondAngle:30,maxMetalDist:3,refineSaltBridges:!0,masterModelIndex:-1,lineOfSightDistFactor:1};function Ooe(e,t,n){return e.modelIndex===n&&t.modelIndex!==n||t.modelIndex===n&&e.modelIndex!==n}function Yy(e,t,n){return!Ooe(e,t,n)&&(e.modelIndex!==t.modelIndex||e.residueIndex===t.residueIndex||e.altloc&&t.altloc&&e.altloc!==t.altloc)}function dat(e){var t={types:[],groups:[],centers:{x:[],y:[],z:[]},atomSets:[]};return Ze&&Ge.time("calculateFeatures"),function(n,r){var i=jm(n.data).charge,o={};n.eachResidue(function(a){if(rat.includes(a.resname)){var s=Bi(1);a.eachAtom(function(l){l.number===7&&l.isSidechain()&&ei(s,l)}),ti(r,s)}else Lg.includes(a.resname)||a.isNucleic()||(a.eachAtom(function(l){var c=!1,u=Bi(1);(function(f){var d=0;return f.number===6&&f.bondCount===3&&f.bondToElementCount(7)===3&&f.eachBondedAtom(function(p){p.bondCount-p.bondToElementCount(1)==1&&++d}),d===2})(l)?(u.group=8,c=!0):function(f){var d=0;return f.number===6&&f.bondCount===3&&f.bondToElementCount(7)===2&&f.bondToElementCount(6)===1&&f.eachBondedAtom(function(p){p.bondCount-p.bondToElementCount(1)==1&&++d}),d===2}(l)&&(u.group=9,c=!0),c&&(l.eachBondedAtom(function(f){f.number===7&&(o[f.index]=!0,ei(u,f))}),ti(r,u))}),a.eachAtom(function(l){var c=Bi(1);i[l.index]>0&&(o[l.index]||(ei(c,l),ti(r,c)))}))})}(e,t),function(n,r){var i=jm(n.data).charge,o={};n.eachResidue(function(a){if(iat.includes(a.resname)){var s=Bi(2);a.eachAtom(function(c){c.number===8&&c.isSidechain()&&ei(s,c)}),ti(r,s)}else if(Pb.includes(a.resname)){var l=Bi(2);a.eachAtom(function(c){qV(c)&&(l.group=6,c.eachBondedAtom(function(u){u.number===8&&ei(l,u)}),ti(r,l))})}else Lg.includes(a.resname)||Pb.includes(a.resname)||(a.eachAtom(function(c){var u=!1,f=Bi(2);(function(d){return d.number===16&&d.bondToElementCount(8)===3})(c)?(f.group=4,u=!0):qV(c)?(f.group=6,u=!0):function(d){return d.number===16&&d.bondToElementCount(8)===4}(c)?(f.group=5,u=!0):function(d){var p=0;return d.number===6&&d.bondToElementCount(8)===2&&d.bondToElementCount(6)===1&&d.eachBondedAtom(function(h){h.number===8&&h.bondCount-h.bondToElementCount(1)==1&&++p}),p===2}(c)&&(f.group=10,u=!0),u&&(c.eachBondedAtom(function(d){d.number===8&&(o[d.index]=!0,ei(f,d))}),ti(r,f))}),a.eachAtom(function(c){var u=Bi(2);i[c.index]<0&&(o[c.index]||(ei(u,c),ti(r,u)))}))})}(e,t),function(n,r){var i=n.getAtomProxy();n.eachResidue(function(o){var a=o.getAromaticRings();if(a){var s=o.atomOffset;a.forEach(function(l){var c=Bi(3);l.forEach(function(u){i.index=u+s,ei(c,i)}),ti(r,c)})}})}(e,t),function(n,r){var i=jm(n.data),o=i.charge,a=i.implicitH,s=i.idealGeometry;n.eachAtom(function(l){var c=Bi(5),u=l.number;if(u===8)ei(c,l),ti(r,c);else if(u===7){if(XV(l))ei(c,l),ti(r,c);else if(o[l.index]<1){var f=l.bondCount+a[l.index],d=s[l.index];(d===4&&f<4||d===3&&f<3||d===2&&f<2)&&(ei(c,l),ti(r,c))}}else u===16&&(l.resname!=="CYS"&&l.resname!=="MET"&&l.formalCharge!==-1||(ei(c,l),ti(r,c)))})}(e,t),function(n,r){var i=jm(n.data).totalH;n.eachAtom(function(o){var a=Bi(4),s=o.number;(XV(o)||i[o.index]>0&&(s===7||s===8||s===16))&&(ei(a,o),ti(r,a))})}(e,t),function(n,r){var i=jm(n.data).totalH;n.eachAtom(function(o){if(o.number===6&&i[o.index]>0&&(o.bondToElementCount(7)>0||o.bondToElementCount(8)>0||function(s){if(!s.isAromatic())return!1;var l=s.residueType.getRings();if(!l)return!1;var c=!1;return l.rings.forEach(function(u){c||u.some(function(f){return s.index-s.residueAtomOffset===f})&&(c=u.some(function(f){var d=s.residueType.atomTypeIdList[f],p=s.atomMap.get(d).number;return p===7||p===8}))}),c}(o))){var a=Bi(9);ei(a,o),ti(r,a)}})}(e,t),function(n,r){n.eachAtom(function(i){var o=!1,a=!1,s=Lg.includes(i.resname),l=Pb.includes(i.resname);if(s||l?s?i.number===8?(["ASP","GLU","SER","THR","TYR","ASN","GLN"].includes(i.resname)&&i.isSidechain()||i.isBackbone())&&(o=!0,a=!0):i.number===16&&i.resname==="CYS"?(o=!0,a=!0):i.number===7&&i.resname==="HIS"&&i.isSidechain()&&(o=!0):l&&(i.number===8&&i.isBackbone()?(o=!0,a=!0):["N3","N4","N7"].includes(i.atomname)?o=!0:["O2","O4","O6"].includes(i.atomname)&&(o=!0,a=!0)):i.isHalogen()||i.number===8||i.number===16?(o=!0,a=!0):i.number===7&&(o=!0),o){var c=Bi(11);ei(c,i),ti(r,c)}if(a){var u=Bi(10);ei(u,i),ti(r,u)}})}(e,t),function(n,r){n.eachAtom(function(i){if(i.isTransitionMetal()||i.number===30||i.number===48){var o=Bi(12);ei(o,i),ti(r,o)}else if(aat.includes(i.number)){var a=Bi(13);ei(a,i),ti(r,a)}})}(e,t),function(n,r){n.eachAtom(function(i){var o=Bi(8),a=!1;i.number===6?(a=!0,i.eachBondedAtom(function(s){var l=s.number;l!==6&&l!==1&&(a=!1)})):i.number===9&&(a=!0),a&&(ei(o,i),ti(r,o))})}(e,t),function(n,r){n.eachAtom(function(i){if(lat.includes(i.number)){var o=!1;if(i.eachBondedAtom(function(s){cat.includes(s.number)&&(o=!0)}),o){var a=Bi(7);ei(a,i),ti(r,a)}}})}(e,t),function(n,r){n.eachAtom(function(i){if(sat.includes(i.number)&&i.bondToElementCount(6)===1){var o=Bi(6);ei(o,i),ti(r,o)}})}(e,t),Ze&&Ge.timeEnd("calculateFeatures"),t}function pat(e,t){t===void 0&&(t=Or);var n=function(i){var o=i.types,a=i.centers;return{features:i,spatialHash:new bh(a),contactStore:new Vot,featureSet:new Jt(o.length,!1)}}(dat(e));Ze&&Ge.time("calculateContacts"),oat(e,n,t),function(i,o,a){a===void 0&&(a={});for(var s=K(a.maxHbondDist,Or.maxHbondDist),l=K(a.maxHbondSulfurDist,Or.maxHbondSulfurDist),c=jr(K(a.maxHbondAccAngle,Or.maxHbondAccAngle)),u=jr(K(a.maxHbondDonAngle,Or.maxHbondDonAngle)),f=jr(K(a.maxHbondAccPlaneAngle,Or.maxHbondAccPlaneAngle)),d=jr(K(a.maxHbondDonPlaneAngle,Or.maxHbondDonPlaneAngle)),p=K(a.masterModelIndex,Or.masterModelIndex),h=Math.max(s,l),g=s*s,v=o.features,m=o.spatialHash,y=o.contactStore,_=o.featureSet,b=v.types,x=v.centers,w=v.atomSets,S=x.x,A=x.y,C=x.z,k=b.length,O=jm(i.data).idealGeometry,T=i.getAtomProxy(),B=i.getAtomProxy(),R=function(D){m.eachWithin(S[D],A[D],C[D],h,function(z,N){if(!(z<=D)){var H=b[D],J=b[z],ne=function(_e,be){return _e===9&&be===5||_e===5&&be===9}(H,J);if(ne||function(_e,be){return _e===5&&be===4||_e===4&&be===5}(H,J)){var oe=J===5?[D,z]:[z,D],Z=oe[0],ce=oe[1];if(T.index=w[Z][0],B.index=w[ce][0],B.index!==T.index&&!Yy(T,B,p)&&!(T.number!==16&&B.number!==16&&N>g||T.connectedTo(B))){var se=L2(T,B),Y=GV.get(O[T.index])||jr(120);if(!se.some(function(_e){return Math.abs(Y-_e)>u})){if(O[T.index]===3){var he=WV(T,B);if(he!==void 0&&he>d)return}var ae=L2(B,T),ye=GV.get(O[B.index])||jr(120);if(!ae.some(function(_e){return ye-_e>c})){if(O[B.index]===3){var re=WV(B,T);if(re!==void 0&&re>f)return}_.setBits(Z,ce);var te,le,de=ne?8:function(_e,be){return _e.isWater()&&be.isWater()}(te=T,le=B)?9:function(_e,be){return _e.isBackbone()&&be.isBackbone()}(te,le)?10:4;y.addContact(Z,ce,de)}}}}}})},P=0;P<k;++P)R(P)}(e,n,t),function(i,o,a){a===void 0&&(a={});for(var s=K(a.maxMetalDist,Or.maxMetalDist),l=K(a.masterModelIndex,Or.masterModelIndex),c=o.features,u=o.spatialHash,f=o.contactStore,d=o.featureSet,p=c.types,h=c.centers,g=c.atomSets,v=h.x,m=h.y,y=h.z,_=p.length,b=i.getAtomProxy(),x=i.getAtomProxy(),w=function(A){u.eachWithin(v[A],m[A],y[A],s,function(C,k){if(!(C<=A||(b.index=g[A][0],x.index=g[C][0],Yy(b,x,l)))){var O=b.isMetal(),T=x.isMetal();if(O||T){var B=O?[p[A],p[C]]:[p[C],p[A]];R=B[0],P=B[1],(R===12?P===11||P===12:R===13&&P===10)&&(d.setBits(A,C),f.addContact(A,C,7))}}var R,P})},S=0;S<_;++S)w(S)}(e,n,t),function(i,o,a){a===void 0&&(a={});for(var s=K(a.maxHydrophobicDist,Or.maxHydrophobicDist),l=K(a.masterModelIndex,Or.masterModelIndex),c=o.features,u=o.spatialHash,f=o.contactStore,d=o.featureSet,p=c.types,h=c.centers,g=c.atomSets,v=h.x,m=h.y,y=h.z,_=p.length,b=i.getAtomProxy(),x=i.getAtomProxy(),w=function(A){u.eachWithin(v[A],m[A],y[A],s,function(C,k){var O,T;C<=A||(b.index=g[A][0],x.index=g[C][0],Yy(b,x,l)||b.number===9&&x.number===9||b.connectedTo(x)||(O=p[A],T=p[C],O===8&&T===8&&(d.setBits(A,C),f.addContact(A,C,6))))})},S=0;S<_;++S)w(S)}(e,n,t),function(i,o,a){a===void 0&&(a={});for(var s=K(a.maxHalogenBondDist,Or.maxHalogenBondDist),l=jr(K(a.maxHalogenBondAngle,Or.maxHalogenBondAngle)),c=K(a.masterModelIndex,Or.masterModelIndex),u=o.features,f=o.spatialHash,d=o.contactStore,p=o.featureSet,h=u.types,g=u.centers,v=u.atomSets,m=g.x,y=g.y,_=g.z,b=h.length,x=i.getAtomProxy(),w=i.getAtomProxy(),S=function(C){f.eachWithin(m[C],y[C],_[C],s,function(k,O){if(!(k<=C)&&(x.index=v[C][0],w.index=v[k][0],!Yy(x,w,c)&&(T=h[C],B=h[k],T===7&&B===6||T===6&&B===7))){var T,B,R=h[C]===6?[x,w]:[w,x],P=R[0],D=R[1],z=L2(P,D);if(z.length===1&&!(uat-z[0]>l)){var N=L2(D,P);N.length!==0&&(N.some(function(H){return fat-H>l})||(p.setBits(C,k),d.addContact(C,k,5)))}}})},A=0;A<b;++A)S(A)}(e,n,t);var r=function(i){var o=i.contactStore,a=xoe({nodeArray1:o.index1,nodeArray2:o.index2,edgeCount:o.count,nodeCount:i.featureSet.length}),s=new Jt(i.contactStore.count,!0);return Object.assign({adjacencyList:a,contactSet:s},i)}(n);return function(i,o,a){a===void 0&&(a={}),Ze&&Ge.time("refineLineOfSight");var s=K(a.lineOfSightDistFactor,Or.lineOfSightDistFactor),l=K(a.masterModelIndex,Or.masterModelIndex),c=i.spatialHash,u=o.contactSet,f=o.contactStore,d=o.features,p=f.index1,h=f.index2,g=d.centers,v=d.atomSets,m=g.x,y=g.y,_=g.z,b=i.getAtomProxy(),x=i.getAtomProxy(),w=i.getAtomProxy(),S=new V,A=new V,C=3*s,k=s*s;u.forEach(function(O){S.set(m[p[O]],y[p[O]],_[p[O]]),A.set(m[h[O]],y[h[O]],_[h[O]]);var T=(S.x+A.x)/2,B=(S.y+A.y)/2,R=(S.z+A.z)/2,P=v[p[O]],D=v[h[O]];b.index=P[0],x.index=D[0],c.eachWithin(T,B,R,C,function(z,N){w.index=z,w.number!==1&&w.vdw*w.vdw*k>N&&!YV(b,w,l)&&!YV(x,w,l)&&!P.includes(z)&&!D.includes(z)&&S.distanceToSquared(w)>1&&A.distanceToSquared(w)>1&&(u.clear(O),Ze&&Ge.log("removing",b.qualifiedName(),x.qualifiedName(),"because",w.qualifiedName()))})}),Ze&&Ge.timeEnd("refineLineOfSight")}(e,r,t),function(i,o){var a=o.contactSet,s=o.contactStore,l=o.features,c=s.type,u=s.index1,f=s.index2,d=l.atomSets,p=i.getAtomProxy(),h=i.getAtomProxy(),g={},v=function(m,y,_){var b=g[_]||[1/0,-1],x=b[0],w=b[1];m<x?(w!==-1&&a.clear(w),g[_]=[m,y]):a.clear(y)};a.forEach(function(m){if(c[m]===6){p.index=d[u[m]][0],h.index=d[f[m]][0];var y=p.distanceTo(h);v(y,m,p.index+"|"+h.residueIndex),v(y,m,h.index+"|"+p.residueIndex)}})}(e,r),t.refineSaltBridges&&function(i,o){var a=o.contactSet,s=o.contactStore,l=o.features,c=s.type,u=s.index1,f=s.index2,d=l.atomSets,p={},h=function(g,v){p[g]||(p[g]=[]),p[g].push(v)};a.forEach(function(g){c[g]===1&&(d[u[g]].forEach(function(v){return h(v,g)}),d[f[g]].forEach(function(v){return h(v,g)}))}),a.forEach(function(g){if(function(b){return b===4||b===9||b===10}(c[g])){var v=p[d[u[g]][0]],m=p[d[f[g]][0]];if(v&&m){for(var y=v.length,_=0;_<y;++_)if(m.includes(v[_]))return void a.clear(g)}}})}(0,r),function(i,o){var a=o.contactSet,s=o.contactStore,l=o.features,c=s.type,u=s.index1,f=s.index2,d=l.atomSets,p={},h=function(g,v){p[g]||(p[g]=[]),p[g].push(v)};a.forEach(function(g){c[g]===3&&(d[u[g]].forEach(function(v){return h(v,g)}),d[f[g]].forEach(function(v){return h(v,g)}))}),a.forEach(function(g){if(c[g]===6||c[g]===2){var v=p[d[u[g]][0]],m=p[d[f[g]][0]];if(v&&m){for(var y=v.length,_=0;_<y;++_)if(m.includes(v[_]))return void a.clear(g)}}})}(0,r),function(i,o){var a=o.contactSet,s=o.contactStore,l=o.features,c=s.type,u=s.index1,f=s.index2,d=l.atomSets,p={},h=function(g,v){p[g]||(p[g]=[]),p[g].push(v)};a.forEach(function(g){c[g]===1&&(d[u[g]].forEach(function(v){return h(v,g)}),d[f[g]].forEach(function(v){return h(v,g)}))}),a.forEach(function(g){if(c[g]===7){var v=p[d[u[g]][0]],m=p[d[f[g]][0]];if(v&&m){for(var y=v.length,_=0;_<y;++_)if(m.includes(v[_]))return void a.clear(v[_])}}})}(0,r),Ze&&Ge.timeEnd("calculateContacts"),r}function hat(e){switch(e){case 4:case 9:case 10:return"hydrogen bond";case 6:return"hydrophobic contact";case 5:return"halogen bond";case 1:return"ionic interaction";case 7:return"metal coordination";case 2:return"cation-pi interaction";case 3:return"pi-pi stacking";case 8:return"weak hydrogen bond";default:return"unknown contact"}}var mat={hydrogenBond:!0,hydrophobic:!0,halogenBond:!0,ionicInteraction:!0,metalCoordination:!0,cationPi:!0,piStacking:!0,weakHydrogenBond:!0,waterHydrogenBond:!0,backboneHydrogenBond:!0,radius:1,filterSele:""},eu=new ht;function gat(e,t,n){var r=fs(n,mat),i=[];r.hydrogenBond&&i.push(4),r.hydrophobic&&i.push(6),r.halogenBond&&i.push(5),r.ionicInteraction&&i.push(1),r.metalCoordination&&i.push(7),r.cationPi&&i.push(2),r.piStacking&&i.push(3),r.weakHydrogenBond&&i.push(8),r.waterHydrogenBond&&i.push(9),r.backboneHydrogenBond&&i.push(10);var o,a=e.features,s=e.contactSet,l=e.contactStore,c=a.centers,u=a.atomSets,f=c.x,d=c.y,p=c.z,h=l.index1,g=l.index2,v=l.type,m=[],y=[],_=[],b=[],x=[];return r.filterSele&&(o=Array.isArray(r.filterSele)?r.filterSele.map(function(w){return t.getAtomSet(new Hn(w))}):t.getAtomSet(new Hn(r.filterSele))),s.forEach(function(w){var S=v[w];if(i.includes(S)){if(o){var A=u[h[w]][0],C=u[g[w]][0];if(Array.isArray(o)){if(!(o[0].isSet(A)&&o[1].isSet(C)||o[1].isSet(A)&&o[0].isSet(C)))return}else if(!o.isSet(A)&&!o.isSet(C))return}var k=h[w],O=g[w];m.push(f[k],d[k],p[k]),y.push(f[O],d[O],p[O]),_.push.apply(_,function(T){switch(T){case 4:case 9:case 10:return eu.setHex(2851770).toArray();case 6:return eu.setHex(8421504).toArray();case 5:return eu.setHex(4259775).toArray();case 1:return eu.setHex(15779860).toArray();case 7:return eu.setHex(9191577).toArray();case 2:return eu.setHex(16744448).toArray();case 3:return eu.setHex(9220966).toArray();case 8:return eu.setHex(12967404).toArray();default:return eu.setHex(13421772).toArray()}}(S)),b.push(r.radius),x.push(w)}}),{position1:new Float32Array(m),position2:new Float32Array(y),color:new Float32Array(_),color2:new Float32Array(_),radius:new Float32Array(b),picking:new _at(x,e,t)}}var Mo=function(e){this.array=e},wR={type:{configurable:!0},data:{configurable:!0}};wR.type.get=function(){return""},wR.data.get=function(){return{}},Mo.prototype.getIndex=function(e){return this.array?this.array[e]:e},Mo.prototype.getObject=function(e){return{}},Mo.prototype._applyTransformations=function(e,t,n){return t&&e.applyMatrix4(t.matrix),n&&e.applyMatrix4(n.matrix),e},Mo.prototype._getPosition=function(e){return new V},Mo.prototype.getPosition=function(e,t,n){return this._applyTransformations(this._getPosition(e),t,n)},Object.defineProperties(Mo.prototype,wR);var Ys=function(e){function t(r){e.call(this),this.shape=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0},data:{configurable:!0},type:{configurable:!0}};return n.primitive.get=function(){},n.data.get=function(){return this.shape},n.type.get=function(){return this.primitive.type},t.prototype.getObject=function(r){return this.primitive.objectFromShape(this.shape,this.getIndex(r))},t.prototype._getPosition=function(r){return this.primitive.positionFromShape(this.shape,this.getIndex(r))},Object.defineProperties(t.prototype,n),t}(Mo),vat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return yh},Object.defineProperties(t.prototype,n),t}(Ys),yat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return uT},Object.defineProperties(t.prototype,n),t}(Ys),Vh=function(e){function t(r,i){e.call(this,r),this.structure=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"atom"},n.data.get=function(){return this.structure},t.prototype.getObject=function(r){return this.structure.getAtomProxy(this.getIndex(r))},t.prototype._getPosition=function(r){return new V().copy(this.getObject(r))},Object.defineProperties(t.prototype,n),t}(Mo),bat=function(e){function t(r){e.call(this),this.axes=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"axes"},n.data.get=function(){return this.axes},t.prototype.getObject=function(){return{axes:this.axes}},t.prototype._getPosition=function(){return this.axes.center.clone()},Object.defineProperties(t.prototype,n),t}(Mo),Ioe=function(e){function t(r,i,o){e.call(this,r),this.structure=i,this.bondStore=o||i.bondStore}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"bond"},n.data.get=function(){return this.structure},t.prototype.getObject=function(r){var i=this.structure.getBondProxy(this.getIndex(r));return i.bondStore=this.bondStore,i},t.prototype._getPosition=function(r){var i=this.getObject(r);return new V().copy(i.atom1).add(i.atom2).multiplyScalar(.5)},Object.defineProperties(t.prototype,n),t}(Mo),_at=function(e){function t(r,i,o){e.call(this,r),this.contacts=i,this.structure=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"contact"},n.data.get=function(){return this.contacts},t.prototype.getObject=function(r){var i=this.getIndex(r),o=this.contacts,a=o.features,s=o.contactStore,l=a.centers,c=a.atomSets,u=l.x,f=l.y,d=l.z,p=s.index1,h=s.index2,g=s.type,v=p[i],m=h[i];return{center1:new V(u[v],f[v],d[v]),center2:new V(u[m],f[m],d[m]),atom1:this.structure.getAtomProxy(c[v][0]),atom2:this.structure.getAtomProxy(c[m][0]),type:hat(g[i])}},t.prototype._getPosition=function(r){var i=this.getObject(r),o=i.center1,a=i.center2;return new V().addVectors(o,a).multiplyScalar(.5)},Object.defineProperties(t.prototype,n),t}(Mo),xat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return fT},Object.defineProperties(t.prototype,n),t}(Ys),wat=function(e){function t(r,i,o){e.call(this,r),this.validation=i,this.structure=o}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"clash"},n.data.get=function(){return this.validation},t.prototype.getObject=function(r){var i=this.validation,o=this.getIndex(r);return{validation:i,index:o,clash:i.clashArray[o]}},t.prototype._getAtomProxyFromSele=function(r){var i=new Hn(r),o=this.structure.getAtomIndices(i)[0];return this.structure.getAtomProxy(o)},t.prototype._getPosition=function(r){var i=this.getObject(r).clash,o=this._getAtomProxyFromSele(i.sele1),a=this._getAtomProxyFromSele(i.sele2);return new V().copy(o).add(a).multiplyScalar(.5)},Object.defineProperties(t.prototype,n),t}(Mo),Sat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"distance"},Object.defineProperties(t.prototype,n),t}(Ioe),Cat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return Yv},Object.defineProperties(t.prototype,n),t}(Ys),Aat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return lT},Object.defineProperties(t.prototype,n),t}(Ys),Pat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return vh},Object.defineProperties(t.prototype,n),t}(Ys),Mat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"ignore"},Object.defineProperties(t.prototype,n),t}(Mo),Eat=function(e){function t(r,i){e.call(this,r),this.mesh=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"mesh"},t.prototype.getObject=function(){var r=this.mesh;return{shape:this.shape,name:r.name,serial:r.serial}},t.prototype._getPosition=function(){return this.__position||(this.__position=v$(this.mesh.position)),this.__position},Object.defineProperties(t.prototype,n),t}(Ys),Tat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return Xv},Object.defineProperties(t.prototype,n),t}(Ys),Oat=function(e){function t(r,i){e.call(this,r),this.surface=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"surface"},n.data.get=function(){return this.surface},t.prototype.getObject=function(r){return{surface:this.surface,index:this.getIndex(r)}},t.prototype._getPosition=function(){return this.surface.center.clone()},Object.defineProperties(t.prototype,n),t}(Mo),Iat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return cT},Object.defineProperties(t.prototype,n),t}(Ys),Rat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return dT},Object.defineProperties(t.prototype,n),t}(Ys),kat=function(e){function t(r,i){e.call(this),this.unitcell=r,this.structure=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"unitcell"},n.data.get=function(){return this.unitcell},t.prototype.getObject=function(){return{unitcell:this.unitcell,structure:this.structure}},t.prototype._getPosition=function(){return this.unitcell.getCenter(this.structure)},Object.defineProperties(t.prototype,n),t}(Mo),Roe=function(e){function t(r,i){e.call(this,r),this.volume=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},data:{configurable:!0}};return n.type.get=function(){return"volume"},n.data.get=function(){return this.volume},t.prototype.getObject=function(r){var i=this.volume,o=this.getIndex(r);return{volume:i,index:o,value:i.data[o]}},t.prototype._getPosition=function(r){var i=this.volume.position,o=this.getIndex(r);return new V(i[3*o],i[3*o+1],i[3*o+2])},Object.defineProperties(t.prototype,n),t}(Mo),Lat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"slice"},Object.defineProperties(t.prototype,n),t}(Roe),$at=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return n_},Object.defineProperties(t.prototype,n),t}(Ys),Dat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={primitive:{configurable:!0}};return n.primitive.get=function(){return r_},Object.defineProperties(t.prototype,n),t}(Ys);function koe(){return new Uint32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0])}function Loe(){return new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}function BN(e,t,n,r,i){var o,a,s,l,c,u,f,d=[[0,4,4,4,2,0,0,0,2,2,0,0],[4,0,4,4,0,8,0,0,0,8,8,0],[4,4,0,4,0,0,8,0,0,0,8,8],[4,4,4,0,0,0,0,1,1,0,0,1],[2,0,0,0,0,8,8,8,2,2,0,0],[0,8,0,0,8,0,8,8,0,8,8,0],[0,0,8,0,8,8,0,8,0,0,8,8],[0,0,0,1,8,8,8,0,1,0,0,1],[2,0,0,1,2,0,0,1,0,2,0,1],[2,8,0,0,2,8,0,0,2,0,8,0],[0,8,8,0,0,8,8,0,0,8,0,8],[0,0,8,1,0,0,8,1,1,0,8,0]],p=0,h=!1,g=!1,v=!1,m=!1,y=-1,_=t*n*r,b=t,x=t*n,w=new Int32Array(12),S=[],A=[],C=[],k=[],O=koe(),T=Loe();function B(ne,oe,Z){return ne+(oe-ne)*Z}function R(ne,oe,Z){return x*(Z=(Z+f)%r)+b*(oe=(oe+u)%n)+(ne=(ne+c)%t)}function P(ne,oe,Z,ce,se,Y,he){var ae=3*ne;if(a[ae]<0){var ye=(p-Y)/(he-Y),re=o,te=3*s;if(S[te]=Z+ye,S[te+1]=ce,S[te+2]=se,!h){var le=3*ne;A[te]=y*B(re[le],re[le+3],ye),A[te+1]=y*B(re[le+1],re[le+4],ye),A[te+2]=y*B(re[le+2],re[le+5],ye)}i&&(k[s]=i[ne+Math.round(ye)]),a[ae]=s,w[oe]=s,s+=1}else w[oe]=a[ae]}function D(ne,oe,Z,ce,se,Y,he){var ae=3*ne+1;if(a[ae]<0){var ye=(p-Y)/(he-Y),re=o,te=3*s;if(S[te]=Z,S[te+1]=ce+ye,S[te+2]=se,!h){var le=3*ne,de=le+3*b;A[te]=y*B(re[le],re[de],ye),A[te+1]=y*B(re[le+1],re[de+1],ye),A[te+2]=y*B(re[le+2],re[de+2],ye)}i&&(k[s]=i[ne+Math.round(ye)*b]),a[ae]=s,w[oe]=s,s+=1}else w[oe]=a[ae]}function z(ne,oe,Z,ce,se,Y,he){var ae=3*ne+2;if(a[ae]<0){var ye=(p-Y)/(he-Y),re=o,te=3*s;if(S[te]=Z,S[te+1]=ce,S[te+2]=se+ye,!h){var le=3*ne,de=le+3*x;A[te]=y*B(re[le],re[de],ye),A[te+1]=y*B(re[le+1],re[de+1],ye),A[te+2]=y*B(re[le+2],re[de+2],ye)}i&&(k[s]=i[ne+Math.round(ye)*x]),a[ae]=s,w[oe]=s,s+=1}else w[oe]=a[ae]}function N(ne){var oe=3*ne;o[oe]===0&&(o[oe]=e[(ne-1+_)%_]-e[(ne+1)%_],o[oe+1]=e[(ne-b+_)%_]-e[(ne+b)%_],o[oe+2]=e[(ne-x+_)%_]-e[(ne+x)%_])}function H(ne,oe,Z,ce,se){var Y,he,ae,ye,re,te,le;v?(ce=R(ne,oe,Z),Y=R(ne+1,oe,Z),he=R(ne,oe+1,Z),ae=R(ne,oe,Z+1),ye=R(ne+1,oe+1,Z),re=R(ne+1,oe,Z+1),te=R(ne,oe+1,Z+1),le=R(ne+1,oe+1,Z+1)):(Y=ce+1,ye=(he=ce+b)+1,re=(ae=ce+x)+1,le=(te=he+x)+1);var de=0,_e=e[ce],be=e[Y],ke=e[he],W=e[ye],ee=e[ae],Ee=e[re],ge=e[te],pe=e[le];_e<p&&(de|=1),be<p&&(de|=2),ke<p&&(de|=8),W<p&&(de|=4),ee<p&&(de|=16),Ee<p&&(de|=32),ge<p&&(de|=128),pe<p&&(de|=64);var ve=O[de];if(ve===0)return 0;var $e=ne+1,Ne=oe+1,Ae=Z+1;1&ve&&(h||(N(ce),N(Y)),P(ce,0,ne,oe,Z,_e,be)),2&ve&&(h||(N(Y),N(ye)),D(Y,1,$e,oe,Z,be,W)),4&ve&&(h||(N(he),N(ye)),P(he,2,ne,Ne,Z,ke,W)),8&ve&&(h||(N(ce),N(he)),D(ce,3,ne,oe,Z,_e,ke)),16&ve&&(h||(N(ae),N(re)),P(ae,4,ne,oe,Ae,ee,Ee)),32&ve&&(h||(N(re),N(le)),D(re,5,$e,oe,Ae,Ee,pe)),64&ve&&(h||(N(te),N(le)),P(te,6,ne,Ne,Ae,ge,pe)),128&ve&&(h||(N(ae),N(te)),D(ae,7,ne,oe,Ae,ee,ge)),256&ve&&(h||(N(ce),N(ae)),z(ce,8,ne,oe,Z,_e,ee)),512&ve&&(h||(N(Y),N(re)),z(Y,9,$e,oe,Z,be,Ee)),1024&ve&&(h||(N(ye),N(le)),z(ye,10,$e,Ne,Z,W,pe)),2048&ve&&(h||(N(he),N(te)),z(he,11,ne,Ne,Z,ke,ge));for(var Oe,j,M,L=de<<4,q=0;T[L+q]!==-1;)Oe=T[L+q],j=T[L+q+1],M=T[L+q+2],g?(d[Oe][j]&se&&(C[l++]=w[Oe],C[l++]=w[j]),d[j][M]&se&&(C[l++]=w[j],C[l++]=w[M]),d[Oe][M]&se&&(C[l++]=w[Oe],C[l++]=w[M])):(C[l++]=w[m?Oe:j],C[l++]=w[m?j:Oe],C[l++]=w[M]),q+=3}function J(ne,oe,Z,ce,se,Y){var he,ae,ye,re,te,le,de,_e,be,ke,W,ee,Ee;if(ne=ne!==void 0?ne:0,oe=oe!==void 0?oe:0,Z=Z!==void 0?Z:0,ce=ce!==void 0?ce:t-1,se=se!==void 0?se:n-1,Y=Y!==void 0?Y:r-1,v||(h?(ne=Math.max(0,ne),oe=Math.max(0,oe),Z=Math.max(0,Z),ce=Math.min(t-1,ce),se=Math.min(n-1,se),Y=Math.min(r-1,Y)):(ne=Math.max(1,ne),oe=Math.max(1,oe),Z=Math.max(1,Z),ce=Math.min(t-2,ce),se=Math.min(n-2,se),Y=Math.min(r-2,Y))),v)for(_e=ne-2,be=oe-2,W=ce+2,ee=se+2,Ee=Y+2,te=ke=Z-2;te<Ee;++te)for(re=be;re<ee;++re)for(ye=_e;ye<W;++ye)ae=3*R(ye,re,te),a[ae]=-1,a[ae+1]=-1,a[ae+2]=-1;else for(_e=Math.max(0,ne-2),be=Math.max(0,oe-2),ke=Math.max(0,Z-2),W=Math.min(t,ce+2),ee=Math.min(n,se+2),Ee=Math.min(r,Y+2),te=ke;te<Ee;++te)for(de=x*te,re=be;re<ee;++re)for(le=de+b*re,ye=_e;ye<W;++ye)a[he=3*(le+ye)]=-1,a[he+1]=-1,a[he+2]=-1;if(!v){var ge,pe=ne,ve=oe,$e=Z,Ne=ce,Ae=se,Oe=Y;for(ge=!1,te=Z;te<Y;++te){for(re=oe;re<se;++re){for(ye=ne;ye<ce;++ye)if(e[he=t*n*te+t*re+ye]>=p){$e=te,ge=!0;break}if(ge)break}if(ge)break}for(ge=!1,re=oe;re<se;++re){for(te=$e;te<Y;++te){for(ye=ne;ye<ce;++ye)if(e[he=t*n*te+t*re+ye]>=p){ve=re,ge=!0;break}if(ge)break}if(ge)break}for(ge=!1,ye=ne;ye<ce;++ye){for(re=ve;re<se;++re){for(te=$e;te<Y;++te)if(e[he=t*n*te+t*re+ye]>=p){pe=ye,ge=!0;break}if(ge)break}if(ge)break}for(ge=!1,te=Y;te>=Z;--te){for(re=se;re>=oe;--re){for(ye=ce;ye>=ne;--ye)if(e[he=t*n*te+t*re+ye]>=p){Oe=te,ge=!0;break}if(ge)break}if(ge)break}for(ge=!1,re=se;re>=oe;--re){for(te=Oe;te>=Z;--te){for(ye=ce;ye>=ne;--ye)if(e[he=t*n*te+t*re+ye]>=p){Ae=re,ge=!0;break}if(ge)break}if(ge)break}for(ge=!1,ye=ce;ye>=ne;--ye){for(re=Ae;re>=oe;--re){for(te=Oe;te>=Z;--te)if(e[he=t*n*te+t*re+ye]>=p){Ne=ye,ge=!0;break}if(ge)break}if(ge)break}h?(ne=Math.max(0,pe-1),oe=Math.max(0,ve-1),Z=Math.max(0,$e-1),ce=Math.min(t-1,Ne+1),se=Math.min(n-1,Ae+1),Y=Math.min(r-1,Oe+1)):(ne=Math.max(1,pe-1),oe=Math.max(1,ve-1),Z=Math.max(1,$e-1),ce=Math.min(t-2,Ne+1),se=Math.min(n-2,Ae+1),Y=Math.min(r-2,Oe+1))}var j=15;for(te=Z;te<Y;++te,j&=-5)for(de=x*te,j|=2,re=oe;re<se;++re,j&=-3)for(le=de+b*re,j|=1,ye=ne;ye<ce;++ye,j&=-2)H(ye,re,te,he=le+ye,j)}this.triangulate=function(ne,oe,Z,ce,se){m=(p=ne)<0,g=ce,v=se,(h=oe||g)||(y=p>0?-1:1,o||(o=new Float32Array(3*_)));var Y=3*_;if(a&&a.length===Y||(a=new Int32Array(Y)),s=0,l=0,Z!==void 0){var he=Z[0].map(Math.round),ae=Z[1].map(Math.round);c=t*Math.ceil(Math.abs(he[0])/t),u=n*Math.ceil(Math.abs(he[1])/n),f=r*Math.ceil(Math.abs(he[2])/r),J(he[0],he[1],he[2],ae[0],ae[1],ae[2])}else c=u=f=0,J();return S.length=3*s,h||(A.length=3*s),C.length=l,i&&(k.length=s),{position:new Float32Array(S),normal:h?void 0:new Float32Array(A),index:Lc(C,S.length/3),atomindex:i?new Int32Array(k):void 0,contour:g}}}xs.add("arrow",yat),xs.add("box",Pat),xs.add("cone",xat),xs.add("cylinder",vat),xs.add("ellipsoid",Cat),xs.add("octahedron",Aat),xs.add("sphere",Tat),xs.add("tetrahedron",Iat),xs.add("torus",Rat),xs.add("point",$at),xs.add("wideline",Dat),Object.assign(BN,{__deps:[koe,Loe,Lc]});var Dn=function(e,t){this.cols=e,this.rows=t,this.size=this.cols*this.rows,this.data=new Float32Array(this.size)};function gl(e,t){for(var n=0,r=0,i=t.rows,o=t.cols,a=0,s=0,l=0,c=t.data,u=e.data;n<i;s+=1,a+=o,n++)for(l=s,r=0;r<o;l+=i,r++)u[l]=c[a+r]}function zS(e,t,n){for(var r=0,i=0,o=0,a=0,s=0,l=0,c=0,u=t.cols,f=t.rows,d=n.rows,p=t.data,h=n.data,g=e.data,v=0;r<f;a+=u,r++)for(l=0,i=0;i<d;c++,i++){for(s=a,v=0,o=0;o<u;s++,l++,o++)v+=p[s]*h[l];g[c]=v}}function SR(e,t,n){var r=e.data,i=t.data,o=n.data,a=i[0],s=i[1],l=i[2],c=i[3],u=i[4],f=i[5],d=i[6],p=i[7],h=i[8],g=o[0],v=o[1],m=o[2],y=o[3],_=o[4],b=o[5],x=o[6],w=o[7],S=o[8];r[0]=a*g+s*y+l*x,r[1]=a*v+s*_+l*w,r[2]=a*m+s*b+l*S,r[3]=c*g+u*y+f*x,r[4]=c*v+u*_+f*w,r[5]=c*m+u*b+f*S,r[6]=d*g+p*y+h*x,r[7]=d*v+p*_+h*w,r[8]=d*m+p*b+h*S}function _$(e){for(var t=e.rows,n=e.cols,r=e.data,i=new Array(n),o=0;o<n;++o)i[o]=0;for(var a=0,s=0;a<t;++a)for(var l=0;l<n;++l,++s)i[l]+=r[s];for(var c=0;c<n;++c)i[c]/=t;return i}function x$(e,t){for(var n=e.rows,r=e.cols,i=e.data,o=0,a=0;o<n;++o)for(var s=0;s<r;++s,++a)i[a]-=t[s]}function CR(e,t,n,r){r=e[t],e[t]=e[n],e[n]=r}function Bat(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?(t/=e,e*Math.sqrt(1+t*t)):t>0?(e/=t,t*Math.sqrt(1+e*e)):0}Dn.prototype.copyTo=function(e){e.data.set(this.data)};function $oe(e,t,n,r){var i=0,o=0,a=e.rows,s=e.cols,l=a,c=s;l<c&&(i=1,o=l,l=c,c=o);var u=new Dn(l,l),f=new Dn(1,c),d=new Dn(c,c);if(i===0)gl(u,e);else{for(o=0;o<s*a;o++)u.data[o]=e.data[o];for(;o<c*l;o++)u.data[o]=0}if(function(p,h,g,v,m,y,_,b){for(var x=0,w=0,S=0,A=0,C=Math.max(y,30),k=0,O=0,T=0,B=0,R=0,P=0,D=0,z=0,N=0,H=0,J=0,ne=0,oe=0,Z=0,ce=0,se=0,Y=0,he=4660,ae=0,ye=0,re=0,te=new Float64Array(_<<3);x<_;x++){for(S=0,J=0;S<y;S++)J+=(z=p[x*h+S])*z;if(te[x]=J,v){for(S=0;S<_;S++)v[x*m+S]=0;v[x*m+x]=1}}for(;A<C;A++){for(R=0,x=0;x<_-1;x++)for(w=x+1;w<_;w++){for(k=x*h|0,O=w*h|0,ce=te[x],se=0,Y=te[w],S=2,se+=p[k]*p[O],se+=p[k+1]*p[O+1];S<y;S++)se+=p[k+S]*p[O+S];if(!(Math.abs(se)<=2384185792e-16*Math.sqrt(ce*Y))){for(oe=Bat(se*=2,ne=ce-Y),ne<0?(Z=.5*(oe-ne),P=se/(oe*(D=Math.sqrt(Z/oe))*2)):D=se/(oe*(P=Math.sqrt((oe+ne)/(2*oe)))*2),ce=0,Y=0,S=2,N=P*p[k]+D*p[O],H=-D*p[k]+P*p[O],p[k]=N,p[O]=H,ce+=N*N,Y+=H*H,N=P*p[k+1]+D*p[O+1],H=-D*p[k+1]+P*p[O+1],p[k+1]=N,p[O+1]=H,ce+=N*N,Y+=H*H;S<y;S++)N=P*p[k+S]+D*p[O+S],H=-D*p[k+S]+P*p[O+S],p[k+S]=N,p[O+S]=H,ce+=N*N,Y+=H*H;if(te[x]=ce,te[w]=Y,R=1,v)for(B=w*m|0,S=2,N=P*v[T=x*m|0]+D*v[B],H=-D*v[T]+P*v[B],v[T]=N,v[B]=H,N=P*v[T+1]+D*v[B+1],H=-D*v[T+1]+P*v[B+1],v[T+1]=N,v[B+1]=H;S<_;S++)N=P*v[T+S]+D*v[B+S],H=-D*v[T+S]+P*v[B+S],v[T+S]=N,v[B+S]=H}}if(R===0)break}for(x=0;x<_;x++){for(S=0,J=0;S<y;S++)J+=(z=p[x*h+S])*z;te[x]=Math.sqrt(J)}for(x=0;x<_-1;x++){for(w=x,S=x+1;S<_;S++)te[w]<te[S]&&(w=S);if(x!==w&&(CR(te,x,w,J),v)){for(S=0;S<y;S++)CR(p,x*h+S,w*h+S,z);for(S=0;S<_;S++)CR(v,x*m+S,w*m+S,z)}}for(x=0;x<_;x++)g[x]=te[x];if(v)for(x=0;x<b;x++){for(J=x<_?te[x]:0;J<=1e-37;){for(ye=1/y,S=0;S<y;S++)ae=256&(he=214013*he+2531011)>>16?ye:-ye,p[x*h+S]=ae;for(A=0;A<2;A++)for(w=0;w<x;w++){for(J=0,S=0;S<y;S++)J+=p[x*h+S]*p[w*h+S];for(re=0,S=0;S<y;S++)z=p[x*h+S]-J*p[w*h+S],p[x*h+S]=z,re+=Math.abs(z);for(re=re?1/re:0,S=0;S<y;S++)p[x*h+S]*=re}for(J=0,S=0;S<y;S++)J+=(z=p[x*h+S])*z;J=Math.sqrt(J)}for(D=1/J,S=0;S<y;S++)p[x*h+S]*=D}}(u.data,l,f.data,d.data,c,l,c,l),t){for(o=0;o<c;o++)t.data[o]=f.data[o];for(;o<s;o++)t.data[o]=0}i===0?(n&&gl(n,u),r&&gl(r,d)):(n&&gl(n,d),r&&gl(r,u))}function Ky(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function $g(e,t,n,r,i,o,a,s,l,c,u,f,d,p,h,g,v){e[0]=t,e[4]=n,e[8]=r,e[12]=i,e[1]=o,e[5]=a,e[9]=s,e[13]=l,e[2]=c,e[6]=u,e[10]=f,e[14]=d,e[3]=p,e[7]=h,e[11]=g,e[15]=v}function US(e,t,n){var r=t[0],i=t[4],o=t[8],a=t[12],s=t[1],l=t[5],c=t[9],u=t[13],f=t[2],d=t[6],p=t[10],h=t[14],g=t[3],v=t[7],m=t[11],y=t[15],_=n[0],b=n[4],x=n[8],w=n[12],S=n[1],A=n[5],C=n[9],k=n[13],O=n[2],T=n[6],B=n[10],R=n[14],P=n[3],D=n[7],z=n[11],N=n[15];e[0]=r*_+i*S+o*O+a*P,e[4]=r*b+i*A+o*T+a*D,e[8]=r*x+i*C+o*B+a*z,e[12]=r*w+i*k+o*R+a*N,e[1]=s*_+l*S+c*O+u*P,e[5]=s*b+l*A+c*T+u*D,e[9]=s*x+l*C+c*B+u*z,e[13]=s*w+l*k+c*R+u*N,e[2]=f*_+d*S+p*O+h*P,e[6]=f*b+d*A+p*T+h*D,e[10]=f*x+d*C+p*B+h*z,e[14]=f*w+d*k+p*R+h*N,e[3]=g*_+v*S+m*O+y*P,e[7]=g*b+v*A+m*T+y*D,e[11]=g*x+v*C+m*B+y*z,e[15]=g*w+v*k+m*R+y*N}function w$(e,t,n,r){$g(e,t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1)}function S$(e,t,n,r){$g(e,1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1)}function C$(e,t){var n=Math.cos(t),r=Math.sin(t);$g(e,n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1)}function Doe(){return new Float32Array([1,0,0,0,1,0,0,0,1])}function NN(e,t){var n=Qt([t[0],t[1],t[2]]),r=Qt([t[4],t[5],t[6]]),i=Qt([t[8],t[9],t[10]]),o=Qt();Sa(o,r,i),e[0]=o[0],e[1]=o[1],e[2]=o[2],Sa(o,i,n),e[3]=o[0],e[4]=o[1],e[5]=o[2],Sa(o,n,r),e[6]=o[0],e[7]=o[1],e[8]=o[2]}function FN(e,t,n,r){n=n||1,r=r||!0;var i=e.length/3,o=t.length/3,a=void 0;r&&(a=new Float32Array(3*i));var s,l,c,u,f=new Float32Array(3*i),d=new Array(20);for(s=0;s<20;++s)d[s]=new Uint32Array(i);for(s=0;s<i;++s)d[0][s]=0;for(s=0;s<o;++s){var p=3*s,h=3*s+1,g=3*s+2;for(u=!0,l=0,c=d[0][t[p]];l<c;++l)if(t[h]===d[l+1][t[p]]){u=!1;break}for(u&&(d[0][t[p]]++,d[d[0][t[p]]][t[p]]=t[h]),u=!0,l=0,c=d[0][t[p]];l<c;++l)if(t[g]===d[l+1][t[p]]){u=!1;break}for(u&&(d[0][t[p]]++,d[d[0][t[p]]][t[p]]=t[g]),u=!0,l=0,c=d[0][t[h]];l<c;++l)if(t[p]===d[l+1][t[h]]){u=!1;break}for(u&&(d[0][t[h]]++,d[d[0][t[h]]][t[h]]=t[p]),u=!0,l=0,c=d[0][t[h]];l<c;++l)if(t[g]===d[l+1][t[h]]){u=!1;break}for(u&&(d[0][t[h]]++,d[d[0][t[h]]][t[h]]=t[g]),u=!0,l=0;l<d[0][t[g]];++l)if(t[p]===d[l+1][t[g]]){u=!1;break}for(u&&(d[0][t[g]]++,d[d[0][t[g]]][t[g]]=t[p]),u=!0,l=0,c=d[0][t[g]];l<c;++l)if(t[h]===d[l+1][t[g]]){u=!1;break}u&&(d[0][t[g]]++,d[d[0][t[g]]][t[g]]=t[h])}for(var v,m,y,_,b,x=.5,w=.75/4.5,S=0;S<n;++S){for(s=0;s<i;++s)if(v=3*s,(y=d[0][s])<3)f[v]=e[v],f[v+1]=e[v+1],f[v+2]=e[v+2];else if(y===3||y===4){for(f[v]=0,f[v+1]=0,f[v+2]=0,l=0;l<y;++l)m=3*d[l+1][s],f[v]+=e[m],f[v+1]+=e[m+1],f[v+2]+=e[m+2];f[v]+=x*e[v],f[v+1]+=x*e[v+1],f[v+2]+=x*e[v+2],b=x+y,f[v]/=b,f[v+1]/=b,f[v+2]/=b}else{for(f[v]=0,f[v+1]=0,f[v+2]=0,l=0;l<y;++l)m=3*d[l+1][s],f[v]+=e[m],f[v+1]+=e[m+1],f[v+2]+=e[m+2];f[v]+=1*e[v],f[v+1]+=1*e[v+1],f[v+2]+=1*e[v+2],_=1+y,f[v]/=_,f[v+1]/=_,f[v+2]/=_}if(e.set(f),r){i_(e,t,a);var A=3*i;for(v=0;v<A;v+=3)e[v]+=-1*w*a[v],e[v+1]+=-1*w*a[v+1],e[v+2]+=-1*w*a[v+2]}}}function i_(e,t,n){var r,i;if(n===void 0)n=new Float32Array(e.length);else for(r=0,i=n.length;r<i;r++)n[r]=0;var o=new Float32Array(3),a=new Float32Array(3),s=new Float32Array(3),l=new Float32Array(3),c=new Float32Array(3);if(t)for(r=0,i=t.length;r<i;r+=3){var u=3*t[r],f=3*t[r+1],d=3*t[r+2];Ho(o,e,u),Ho(a,e,f),Ho(s,e,d),Rr(l,s,a),Rr(c,o,a),Sa(l,l,c),n[u]+=l[0],n[u+1]+=l[1],n[u+2]+=l[2],n[f]+=l[0],n[f+1]+=l[1],n[f+2]+=l[2],n[d]+=l[0],n[d+1]+=l[1],n[d+2]+=l[2]}else for(r=0,i=e.length;r<i;r+=9)Ho(o,e,r),Ho(a,e,r+3),Ho(s,e,r+6),Rr(l,s,a),Rr(c,o,a),Sa(l,l,c),n[r]=l[0],n[r+1]=l[1],n[r+2]=l[2],n[r+3]=l[0],n[r+4]=l[1],n[r+5]=l[2],n[r+6]=l[0],n[r+7]=l[1],n[r+8]=l[2];return voe(n),n}function Boe(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function o_(e,t,n,r,i){var o=1/r*3;boe(e,e,i+(o+=n)),FS(t,t,i+o),Zn(e,e,r),y$(e,e),pg(e,e,r),Zn(t,t,r),Xy(t,t),pg(t,t,r);var a=new Float32Array(3);Rr(a,t,e),Zn(a,a,r),Xy(a,a),FS(a,a,1);var s=256*Math.pow(10,6),l=a[0]*a[1]*a[2]*3;s<=l&&(Zn(e,e,r*=Math.pow(s/l,1/3)),y$(e,e),pg(e,e,r),Zn(t,t,r),Xy(t,t),pg(t,t,r),Rr(a,t,e),Zn(a,a,r),Xy(a,a),FS(a,a,1));var c=new Float32Array(e);sT(c,c);var u=Ky(),f=Ky();C$(f,jr(90)),US(u,u,f);var d=Ky();w$(d,-1/r,1/r,1/r),US(u,u,d);var p=Ky();return S$(p,-r*c[2],-r*c[1],-r*c[0]),US(u,u,p),{dim:a,tran:c,matrix:u,scaleFactor:r}}w$.__deps=[$g],S$.__deps=[$g],C$.__deps=[$g],NN.__deps=[Qt,Sa],Object.assign(FN,{__deps:[i_]}),Object.assign(i_,{__deps:[Rr,Sa,Ho,voe]}),Object.assign(o_,{__deps:[jr,boe,FS,pg,Zn,y$,Xy,Rr,sT,Ky,US,S$,w$,C$]});var Ao=function(e,t,n){this.name=e||"",this.path=t||"",this.info={},this.center=new V,this.boundingBox=new cr,n instanceof Kt||n instanceof At||n instanceof Kn?this.fromGeometry(n):n&&(this.set(n.position,n.index,n.normal,n.color,n.atomindex,n.contour),this.boundingBox.setFromArray(n.position),this.boundingBox.getCenter(this.center))},KV={type:{configurable:!0}};function ld(e,t,n,r,i){var o=new BN(e,t,n,r,i);this.getSurface=function(a,s,l,c,u,f){f===void 0&&(f=!1);var d=o.triangulate(a,s,l,u,f);if(s&&!u&&(FN(d.position,d.index,s,!0),d.normal=i_(d.position,d.index)),c&&(aT(c,d.position),d.normal)){var p=Doe();NN(p,c),DN(p,d.normal)}return d}}KV.type.get=function(){return"Surface"},Ao.prototype.set=function(e,t,n,r,i,o){o===void 0&&(o=!1),this.position=e,this.index=t,this.normal=n,this.color=r,this.atomindex=i,this.size=e.length/3,this.contour=o},Ao.prototype.fromGeometry=function(e){var t,n,r,i;if(Ze&&Ge.time("GeometrySurface.fromGeometry"),e instanceof Kt?(e.computeVertexNormals(!0),t=new At().fromGeometry(e)):t=e instanceof At?e:e[0],t.boundingBox||t.computeBoundingBox(),this.boundingBox.copy(t.boundingBox),this.boundingBox.getCenter(this.center),t instanceof At){var o=t.attributes,a=!!o.normal&&o.normal.array;(!a||a[0]===0&&a[1]===0&&a[2]===0)&&t.computeVertexNormals(),n=o.position.array,r=o.index?o.index.array:null,i=o.normal.array}this.set(n,r,i,void 0,void 0),Ze&&Ge.timeEnd("GeometrySurface.setGeometry")},Ao.prototype.getPosition=function(){return this.position},Ao.prototype.getColor=function(e){var t=e||{};t.surface=this;var n=this.size,r=new Float32Array(3*n),i=pn.getScheme(t);if(i.volumeColor||t.scheme==="random")for(var o=0;o<n;++o)i.volumeColorToArray(o,r,3*o);else if(i.positionColor)for(var a=new V,s=this.position,l=0;l<n;++l){var c=3*l;a.set(s[c],s[c+1],s[c+2]),i.positionColorToArray(a,r,c)}else if(i.atomColor&&this.atomindex)for(var u=t.structure.getAtomProxy(),f=this.atomindex,d=0;d<n;++d)u.index=f[d],i.atomColorToArray(u,r,3*d);else{var p=new ht(t.value);Yn(n,p.r,p.g,p.b,r)}return r},Ao.prototype.getPicking=function(e){return this.atomindex&&e?new Vh(this.atomindex,e):new Oat(T0(this.size),this)},Ao.prototype.getNormal=function(){return this.normal},Ao.prototype.getSize=function(e,t){return is(this.size,e*t)},Ao.prototype.getIndex=function(){return this.index},Ao.prototype.getFilteredIndex=function(e,t){if(e&&this.atomindex){for(var n=new Hn(e),r=t.getAtomSet(n),i=[],o=this.atomindex,a=this.index,s=a.length,l=this.contour?2:3,c=0,u=0;u<s;u+=l){for(var f=!0,d=0;d<l;d++){var p=o[a[u+d]];if(!r.get(p)){f=!1;break}}if(f)for(var h=0;h<l;h++,c++)i[c]=a[u+h]}return Lc(i,this.position.length/3)}return this.index},Ao.prototype.getAtomindex=function(){return this.atomindex},Ao.prototype.dispose=function(){},Object.defineProperties(Ao.prototype,KV),Object.assign(ld,{__deps:[FN,i_,BN,aT,DN,Doe,NN]}),Q1.add("surf",function(e,t){var n=e.data.args,r=e.data.params;if(n&&(self.volsurf=new ld(n[0],n[1],n[2],n[3],n[4])),r){var i=self.volsurf.getSurface(r.isolevel,r.smooth,r.box,r.matrix,r.contour,r.wrap),o=[i.position.buffer,i.index.buffer];i.normal&&o.push(i.normal.buffer),i.atomindex&&o.push(i.atomindex.buffer),t({sd:i,p:r},o)}},[ld]);var $n=function(e,t,n,r,i,o,a){this.name=e,this.path=t,this.matrix=new lt,this.normalMatrix=new oo,this.inverseMatrix=new lt,this.center=new V,this.boundingBox=new cr,this.setData(n,r,i,o,a)},_f={type:{configurable:!0},position:{configurable:!0},min:{configurable:!0},max:{configurable:!0},sum:{configurable:!0},mean:{configurable:!0},rms:{configurable:!0}};function ZV(e){return e==="front"?C0:e==="back"?wi:Rx}_f.type.get=function(){return"Volume"},$n.prototype.setData=function(e,t,n,r,i){this.nx=t||1,this.ny=n||1,this.nz=r||1,this.data=e||new Float32Array(1),this.setAtomindex(i),this._position=new Float32Array,delete this._min,delete this._max,delete this._mean,delete this._rms,this.worker&&this.worker.terminate()},$n.prototype.setStats=function(e,t,n,r){this._min=e,this._max=t,this._mean=n,this._rms=r},$n.prototype.setMatrix=function(e){this.matrix.copy(e);var t=this.boundingBox,n=this.center,r=this.nx-1,i=this.ny-1,o=this.nz-1;t.makeEmpty(),t.expandByPoint(n.set(r,i,o)),t.expandByPoint(n.set(r,i,0)),t.expandByPoint(n.set(r,0,o)),t.expandByPoint(n.set(r,0,0)),t.expandByPoint(n.set(0,i,o)),t.expandByPoint(n.set(0,0,o)),t.expandByPoint(n.set(0,i,0)),t.expandByPoint(n.set(0,0,0)),t.applyMatrix4(this.matrix),t.getCenter(this.center);var a=this.matrix.elements,s=new V(a[0],a[1],a[2]),l=new V(a[4],a[5],a[6]),c=new V(a[8],a[9],a[10]),u=new V,f=this.normalMatrix.elements;u.crossVectors(l,c),f[0]=u.x,f[1]=u.y,f[2]=u.z,u.crossVectors(c,s),f[3]=u.x,f[4]=u.y,f[5]=u.z,u.crossVectors(s,l),f[6]=u.x,f[7]=u.y,f[8]=u.z,this.inverseMatrix.getInverse(this.matrix)},$n.prototype.setAtomindex=function(e){this.atomindex=e},$n.prototype.getBox=function(e,t,n){return n||(n=new cr),n.set(e,e),n.expandByScalar(t),n.applyMatrix4(this.inverseMatrix),n.min.round(),n.max.round(),n},$n.prototype._getBox=function(e,t){if(e&&t){this.__box||(this.__box=new cr);var n=this.getBox(e,t,this.__box);return[n.min.toArray(),n.max.toArray()]}},$n.prototype._makeSurface=function(e,t,n){var r=this.name+"@"+t.toPrecision(2),i=new Ao(r,"",e);return i.info.isolevel=t,i.info.smooth=n,i.info.volume=this,i},$n.prototype.getSurface=function(e,t,n,r,i,o){o===void 0&&(o=!1),e=isNaN(e)?this.getValueForSigma(2):e,t=K(t,0),this.volsurf===void 0&&(this.volsurf=new ld(this.data,this.nx,this.ny,this.nz,this.atomindex));var a=this._getBox(n,r),s=this.volsurf.getSurface(e,t,a,this.matrix.elements,i,o);return this._makeSurface(s,e,t)},$n.prototype.getSurfaceWorker=function(e,t,n,r,i,o,a){var s=this;if(e=isNaN(e)?this.getValueForSigma(2):e,t=t||0,window.hasOwnProperty("Worker")){this.workerPool===void 0&&(this.workerPool=new Fm("surf",2));var l={},c=this.workerPool.getNextWorker();c.postCount===0&&Object.assign(l,{args:[this.data,this.nx,this.ny,this.nz,this.atomindex]}),Object.assign(l,{params:{isolevel:e,smooth:t,box:this._getBox(n,r),matrix:this.matrix.elements,contour:i,wrap:o}}),c.post(l,void 0,function(f){var d=f.data.sd,p=f.data.p;a(s._makeSurface(d,p.isolevel,p.smooth))},function(f){console.warn("Volume.getSurfaceWorker error - trying without worker",f);var d=s.getSurface(e,t,n,r,i,o);a(d)})}else{var u=this.getSurface(e,t,n,r,i,o);a(u)}},$n.prototype.getValueForSigma=function(e){return this.mean+K(e,2)*this.rms},$n.prototype.getSigmaForValue=function(e){return(K(e,0)-this.mean)/this.rms},_f.position.get=function(){if(!this._position){for(var e=this.nz,t=this.ny,n=this.nx,r=new Float32Array(n*t*e*3),i=0,o=0;o<e;++o)for(var a=0;a<t;++a)for(var s=0;s<n;++s)r[i+0]=s,r[i+1]=a,r[i+2]=o,i+=3;aT(this.matrix.elements,r),this._position=r}return this._position},$n.prototype.getDataAtomindex=function(){return this.atomindex},$n.prototype.getDataPosition=function(){return this.position},$n.prototype.getDataColor=function(e){var t=e||{};t.volume=this,t.scale=t.scale||"Spectral",t.domain=t.domain||[this.min,this.max];for(var n=pn.getScheme(t),r=this.position.length/3,i=new Float32Array(3*r),o=0;o<r;++o)n.volumeColorToArray(o,i,3*o);return i},$n.prototype.getDataPicking=function(){var e=T0(this.position.length/3);return new Roe(e,this)},$n.prototype.getDataSize=function(e,t){var n,r=this.data,i=this.position.length/3;switch(e){case"value":case"deviation":n=new Float32Array(r);break;case"abs-value":n=new Float32Array(r);for(var o=0;o<i;++o)n[o]=Math.abs(n[o]);break;case"value-min":n=new Float32Array(r);for(var a=this.min,s=0;s<i;++s)n[s]-=a;break;default:n=is(i,e)}if(t!==1)for(var l=0;l<i;++l)n[l]*=t;return n},_f.min.get=function(){return this._min===void 0&&(this._min=DS(this.data)),this._min},_f.max.get=function(){return this._max===void 0&&(this._max=$S(this.data)),this._max},_f.sum.get=function(){return this._sum===void 0&&(this._sum=$N(this.data)),this._sum},_f.mean.get=function(){return this._mean===void 0&&(this._mean=BS(this.data)),this._mean},_f.rms.get=function(){return this._rms===void 0&&(this._rms=function(e){for(var t=e.length,n=0,r=0;r<t;++r){var i=e[r];n+=i*i}return Math.sqrt(n/t)}(this.data)),this._rms},$n.prototype.clone=function(){var e=new $n(this.name,this.path,this.data,this.nx,this.ny,this.nz,this.atomindex);return e.matrix.copy(this.matrix),e.header=Object.assign({},this.header),e},$n.prototype.dispose=function(){this.workerPool&&this.workerPool.terminate()},Object.defineProperties($n.prototype,_f),On.add("shader/Mesh.vert",`#define STANDARD
uniform float clipNear;
uniform vec3 clipCenter;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#elif defined( NOLIGHT )
varying vec3 vColor;
#else
#include color_pars_vertex
#ifndef FLAT_SHADED
varying vec3 vNormal;
#endif
#endif
#include common
void main(){
#if defined( PICKING )
vPickingColor = unpackColor( primitiveId );
#elif defined( NOLIGHT )
vColor = color;
#else
#include color_vertex
#include beginnormal_vertex
#include defaultnormal_vertex
#ifndef FLAT_SHADED
vNormal = normalize( transformedNormal );
#endif
#endif
#include begin_vertex
#include project_vertex
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )
vViewPosition = -mvPosition.xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
}`),On.add("shader/Mesh.frag",`#define STANDARD
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 interiorColor;
uniform float interiorDarkening;
uniform float roughness;
uniform float metalness;
uniform float opacity;
uniform float clipNear;
uniform float clipRadius;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
uniform float objectId;
varying vec3 vPickingColor;
#elif defined( NOLIGHT )
varying vec3 vColor;
#else
#ifndef FLAT_SHADED
varying vec3 vNormal;
#endif
#include common
#include color_pars_fragment
#include fog_pars_fragment
#include bsdfs
#include lights_pars_begin
#include lights_physical_pars_fragment
#endif
void main(){
#include nearclip_fragment
#include radiusclip_fragment
#if defined( PICKING )
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#elif defined( NOLIGHT )
gl_FragColor = vec4( vColor, opacity );
#else
vec4 diffuseColor = vec4( diffuse, opacity );
ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
vec3 totalEmissiveLight = emissive;
#include color_fragment
#include roughnessmap_fragment
#include metalnessmap_fragment
#include normal_fragment_begin
#include lights_physical_fragment
#include lights_fragment_begin
#include lights_fragment_end
vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;
#include interior_fragment
gl_FragColor = vec4( outgoingLight, diffuseColor.a );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#include opaque_back_fragment
#endif
}`);var JV={f:1,v2:2,v3:3,c:3};function AR(e,t){e.matrix.copy(t),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0}var Jo={opaqueBack:!1,side:"double",opacity:1,depthWrite:!0,clipNear:0,clipRadius:0,clipCenter:new V,flatShaded:!1,wireframe:!1,roughness:.4,metalness:0,diffuse:16777215,diffuseInterior:!1,useInteriorColor:!1,interiorColor:14540253,interiorDarkening:0,forceTransparent:!1,matrix:new lt,disablePicking:!1,sortParticles:!1,background:!1},Hh={opaqueBack:{updateShader:!0},side:{updateShader:!0,property:!0},opacity:{uniform:!0},depthWrite:{property:!0},clipNear:{updateShader:!0,property:!0},clipRadius:{updateShader:!0,uniform:!0},clipCenter:{uniform:!0},flatShaded:{updateShader:!0},background:{updateShader:!0},wireframe:{updateVisibility:!0},roughness:{uniform:!0},metalness:{uniform:!0},diffuse:{uniform:!0},diffuseInterior:{updateShader:!0},useInteriorColor:{updateShader:!0},interiorColor:{uniform:!0},interiorDarkening:{uniform:!0},matrix:{}},vn=function(e,t){t===void 0&&(t={}),this.parameterTypes=Hh,this.geometry=new At,this.indexVersion=0,this.wireframeIndexVersion=-1,this.group=new Kn,this.wireframeGroup=new Kn,this.pickingGroup=new Kn,this.vertexShader="",this.fragmentShader="",this.isImpostor=!1,this.isText=!1,this.isSurface=!1,this.isPoint=!1,this.isLine=!1,this.dynamic=!0,this.visible=!0,this.wireframeIndexCount=0,this.parameters=fs(t,this.defaultParameters),this.uniforms=dA.merge([St.common,{fogColor:{value:new ht(0)},fogNear:{value:0},fogFar:{value:0},opacity:{value:this.parameters.opacity},clipNear:{value:0},clipRadius:{value:this.parameters.clipRadius},clipCenter:{value:this.parameters.clipCenter}},{emissive:{value:new ht(0)},roughness:{value:this.parameters.roughness},metalness:{value:this.parameters.metalness},interiorColor:{value:new ht(this.parameters.interiorColor)},interiorDarkening:{value:this.parameters.interiorDarkening}},St.lights]),this.uniforms.diffuse.value.set(this.parameters.diffuse),this.pickingUniforms={clipNear:{value:0},objectId:{value:0},opacity:{value:this.parameters.opacity}};var n=e.position||e.position1;this._positionDataSize=n?n.length/3:0,e.primitiveId||(e.primitiveId=T0(this._positionDataSize)),this.addAttributes({position:{type:"v3",value:e.position},color:{type:"c",value:e.color},primitiveId:{type:"f",value:e.primitiveId}}),t.matrix&&(this.matrix=t.matrix),e.index&&this.initIndex(e.index),this.picking=e.picking,this.makeWireframeGeometry()},xf={defaultParameters:{configurable:!0},matrix:{configurable:!0},transparent:{configurable:!0},size:{configurable:!0},attributeSize:{configurable:!0},pickable:{configurable:!0}};xf.defaultParameters.get=function(){return Jo},xf.matrix.set=function(e){this.setMatrix(e)},xf.matrix.get=function(){return this.group.matrix.clone()},xf.transparent.get=function(){return this.parameters.opacity<1||this.parameters.forceTransparent},xf.size.get=function(){return this._positionDataSize},xf.attributeSize.get=function(){return this.size},xf.pickable.get=function(){return!!this.picking&&!this.parameters.disablePicking},vn.prototype.setMatrix=function(e){AR(this.group,e),AR(this.wireframeGroup,e),AR(this.pickingGroup,e)},vn.prototype.initIndex=function(e){this.geometry.setIndex(new Dt(e,1));var t=this.geometry.getIndex();t?t.setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0):Ge.error("Index is null")},vn.prototype.makeMaterial=function(){var e=ZV(this.parameters.side),t=new Ei({uniforms:this.uniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:this.transparent,depthWrite:this.parameters.depthWrite,lights:!0,fog:!0,side:e});t.vertexColors=!0,t.extensions.derivatives=!0,t.extensions.fragDepth=this.isImpostor;var n=new Ei({uniforms:this.uniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:this.transparent,depthWrite:this.parameters.depthWrite,lights:!1,fog:!0,side:e});n.vertexColors=!0;var r=new Ei({uniforms:this.pickingUniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:!1,depthWrite:this.parameters.depthWrite,lights:!1,fog:!1,side:e,blending:Su});r.vertexColors=!0,r.extensions.fragDepth=this.isImpostor,t.clipNear=this.parameters.clipNear,n.clipNear=this.parameters.clipNear,r.clipNear=this.parameters.clipNear,this.material=t,this.wireframeMaterial=n,this.pickingMaterial=r,this.updateShader()},vn.prototype.makeWireframeGeometry=function(){this.makeWireframeIndex();var e=this.geometry,t=this.wireframeIndex,n=new At;n.attributes=e.attributes,t&&(n.setIndex(new Dt(t,1).setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0)),n.setDrawRange(0,this.wireframeIndexCount)),this.wireframeGeometry=n},vn.prototype.makeWireframeIndex=function(){var e=[];function t(v,m){if(v>m){var y=v;v=m,m=y}var _=e[v];return _===void 0?(e[v]=[m],!0):!_.includes(m)&&(_.push(m),!0)}var n=this.geometry,r=n.index;if(this.parameters.wireframe)if(r){var i,o=r.array,a=o.length;n.drawRange.count!==1/0&&(a=n.drawRange.count),this.wireframeIndex&&this.wireframeIndex.length>2*a?i=this.wireframeIndex:i=Lc(2*a,n.attributes.position.count);var s=0;e.length=0;for(var l=0;l<a;l+=3){var c=o[l+0],u=o[l+1],f=o[l+2];t(c,u)&&(i[s+0]=c,i[s+1]=u,s+=2),t(u,f)&&(i[s+0]=u,i[s+1]=f,s+=2),t(f,c)&&(i[s+0]=f,i[s+1]=c,s+=2)}this.wireframeIndex=i,this.wireframeIndexCount=s,this.wireframeIndexVersion=this.indexVersion}else{var d,p=n.attributes.position.count;d=this.wireframeIndex&&this.wireframeIndex.length>2*p?this.wireframeIndex:Lc(2*p,p);for(var h=0,g=0;h<p;h+=3)d[g+0]=h,d[g+1]=h+1,d[g+2]=h+1,d[g+3]=h+2,d[g+4]=h+2,d[g+5]=h,g+=6;this.wireframeIndex=d,this.wireframeIndexCount=2*p,this.wireframeIndexVersion=this.indexVersion}else this.wireframeIndex=new Uint16Array(0),this.wireframeIndexCount=0},vn.prototype.updateWireframeIndex=function(){if(this.wireframeGeometry&&this.wireframeIndex){if(this.wireframeGeometry.setDrawRange(0,1/0),this.wireframeIndexVersion<this.indexVersion&&this.makeWireframeIndex(),this.wireframeGeometry.index&&this.wireframeIndex.length>this.wireframeGeometry.index.array.length)this.wireframeGeometry.setIndex(new Dt(this.wireframeIndex,1).setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0));else{var e=this.wireframeGeometry.getIndex();if(!e)return void Ge.error("Index is null");e.set(this.wireframeIndex),e.needsUpdate=this.wireframeIndexCount>0,e.updateRange.count=this.wireframeIndexCount}this.wireframeGeometry.setDrawRange(0,this.wireframeIndexCount)}},vn.prototype.getRenderOrder=function(){var e=0;return this.isText?e=1:this.transparent&&(e=this.isSurface?3:2),e},vn.prototype._getMesh=function(e){this.material||this.makeMaterial();var t,n=this.geometry,r=this[e];return(t=this.isLine?new Gr(n,r):this.isPoint?new T1(n,r):new hr(n,r)).frustumCulled=!1,t.renderOrder=this.getRenderOrder(),t},vn.prototype.getMesh=function(){return this._getMesh("material")},vn.prototype.getWireframeMesh=function(){var e;return this.material||this.makeMaterial(),this.wireframeGeometry||this.makeWireframeGeometry(),(e=new Gr(this.wireframeGeometry,this.wireframeMaterial)).frustumCulled=!1,e.renderOrder=this.getRenderOrder(),e},vn.prototype.getPickingMesh=function(){return this._getMesh("pickingMaterial")},vn.prototype.getShader=function(e,t){return Wy(e,this.getDefines(t))},vn.prototype.getVertexShader=function(e){return this.getShader(this.vertexShader,e)},vn.prototype.getFragmentShader=function(e){return this.getShader(this.fragmentShader,e)},vn.prototype.getDefines=function(e){var t={};return this.parameters.clipNear&&(t.NEAR_CLIP=1),this.parameters.clipRadius&&(t.RADIUS_CLIP=1),e==="picking"?t.PICKING=1:((e==="background"||this.parameters.background)&&(t.NOLIGHT=1),this.parameters.flatShaded&&(t.FLAT_SHADED=1),this.parameters.opaqueBack&&(t.OPAQUE_BACK=1),this.parameters.diffuseInterior&&(t.DIFFUSE_INTERIOR=1),this.parameters.useInteriorColor&&(t.USE_INTERIOR_COLOR=1)),t},vn.prototype.getParameters=function(){return this.parameters},vn.prototype.addUniforms=function(e){this.uniforms=dA.merge([this.uniforms,e]),this.pickingUniforms=dA.merge([this.pickingUniforms,e])},vn.prototype.addAttributes=function(e){for(var t in e){var n=void 0,r=e[t],i=this.attributeSize*JV[r.type];r.value?(i!==r.value.length&&Ge.error("attribute value has wrong length",t),n=r.value):n=ooe("float32",i),this.geometry.setAttribute(t,new Dt(n,JV[r.type]).setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0))}},vn.prototype.updateRenderOrder=function(){var e=this.getRenderOrder();function t(n){n.renderOrder=e}this.group.children.forEach(t),this.pickingGroup&&this.pickingGroup.children.forEach(t)},vn.prototype.updateShader=function(){var e=this.material,t=this.wireframeMaterial,n=this.pickingMaterial;e.vertexShader=this.getVertexShader(),e.fragmentShader=this.getFragmentShader(),e.needsUpdate=!0,t.vertexShader=this.getShader("Line.vert"),t.fragmentShader=this.getShader("Line.frag"),t.needsUpdate=!0,n.vertexShader=this.getVertexShader("picking"),n.fragmentShader=this.getFragmentShader("picking"),n.needsUpdate=!0},vn.prototype.setParameters=function(e){var t=e,n=this.parameterTypes,r=this.parameters,i={},o={},a=!1,s=!1;for(var l in t){var c=t[l];c!==void 0&&(r[l]=c,n[l]!==void 0&&(n[l].property&&(n[l].property!==!0?i[n[l].property]=c:i[l]=c),n[l].uniform&&(n[l].uniform!==!0?o[n[l].uniform]=c:o[l]=c),n[l].updateShader&&(a=!0),n[l].updateVisibility&&(s=!0),this.dynamic&&l==="wireframe"&&c===!0&&this.updateWireframeIndex(),l==="forceTransparent"&&(i.transparent=this.transparent),l==="matrix"&&(this.matrix=c)))}this.setProperties(i),this.setUniforms(o),a&&this.updateShader(),s&&this.setVisibility(this.visible)},vn.prototype.setAttributes=function(e){var t=this.geometry,n=t.attributes;for(var r in e)if(r!=="picking"){var i=e[r],o=i.length;if(r==="index"){var a=t.getIndex();if(!a){Ge.error("Index is null");continue}t.setDrawRange(0,1/0),o>a.array.length?t.setIndex(new Dt(i,1).setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0)):(a.set(i),a.count=o,a.needsUpdate=o>0,a.updateRange.count=o,t.setDrawRange(0,o)),this.indexVersion++,this.parameters.wireframe&&this.updateWireframeIndex()}else{var s=n[r];o>s.array.length?t.setAttribute(r,new Dt(i,s.itemSize).setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0)):(n[r].set(i),n[r].needsUpdate=o>0,n[r].updateRange.count=o)}}},vn.prototype.setUniforms=function(e){if(e){var t=this.material.uniforms,n=this.wireframeMaterial.uniforms,r=this.pickingMaterial.uniforms;for(var i in e)i==="opacity"&&this.setProperties({transparent:this.transparent}),t[i]!==void 0&&(t[i].value.isVector3?t[i].value.copy(e[i]):t[i].value.set?t[i].value.set(e[i]):t[i].value=e[i]),n[i]!==void 0&&(n[i].value.isVector3?n[i].value.copy(e[i]):n[i].value.set?n[i].value.set(e[i]):n[i].value=e[i]),r[i]!==void 0&&(r[i].value.isVector3?r[i].value.copy(e[i]):r[i].value.set?r[i].value.set(e[i]):r[i].value=e[i])}},vn.prototype.setProperties=function(e){if(e){var t=this.material,n=this.wireframeMaterial,r=this.pickingMaterial;for(var i in e){var o=i,a=e[o];o==="transparent"?this.updateRenderOrder():o==="side"&&(a=ZV(a)),t[o]=a,n[o]=a,r[o]=a}t.needsUpdate=!0,n.needsUpdate=!0,r.needsUpdate=!0}},vn.prototype.setVisibility=function(e){this.visible=e,this.parameters.wireframe?(this.group.visible=!1,this.wireframeGroup.visible=e,this.pickable&&(this.pickingGroup.visible=!1)):(this.group.visible=e,this.wireframeGroup.visible=!1,this.pickable&&(this.pickingGroup.visible=e))},vn.prototype.dispose=function(){this.material&&this.material.dispose(),this.wireframeMaterial&&this.wireframeMaterial.dispose(),this.pickingMaterial&&this.pickingMaterial.dispose(),this.geometry.dispose(),this.wireframeGeometry&&this.wireframeGeometry.dispose()},vn.prototype.toJSON=function(){var e={};for(var t in this)t!=="group"&&t!=="wireframeGroup"&&t!="pickingGroup"&&t!=="picking"&&(e[t]=this[t]);return e},Object.defineProperties(vn.prototype,xf);var zu=function(e){function t(n,r){r===void 0&&(r={}),e.call(this,n,r),this.vertexShader="Mesh.vert",this.fragmentShader="Mesh.frag",this.addAttributes({normal:{type:"v3",value:n.normal}}),n.normal===void 0&&this.geometry.computeVertexNormals()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(vn),Noe=function(e){function t(){e.apply(this,arguments),this.isSurface=!0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(zu);function $2(e){e.visible=!0}function QV(e){e.visible=!1}var Ss=function(e){this.group=new Kn,this.wireframeGroup=new Kn,this.pickingGroup=new Kn,this.frontMeshes=[],this.backMeshes=[],this.size=e.size,this.side=e.parameters.side,this.visible=e.visible,this.geometry=e.geometry,this.picking=e.picking,this.group=new Kn,this.wireframeGroup=new Kn,this.pickingGroup=new Kn,this.matrix=e.matrix;var t=e,n=new e.constructor({position:new Float32Array(0)});t.makeMaterial(),n.makeMaterial(),n.picking=e.picking,n.geometry=e.geometry,n.wireframeGeometry=e.wireframeGeometry,n.setParameters(e.getParameters()),n.updateShader(),t.setParameters({side:"front"}),n.setParameters({side:"back",opacity:n.parameters.opacity}),this.buffer=e,this.frontBuffer=t,this.backBuffer=n},gy={matrix:{configurable:!0},pickable:{configurable:!0},parameters:{configurable:!0}};gy.matrix.set=function(e){vn.prototype.setMatrix.call(this,e)},gy.matrix.get=function(){return this.group.matrix.clone()},gy.pickable.get=function(){return!!this.picking&&!this.parameters.disablePicking},gy.parameters.get=function(){return this.buffer.parameters},Ss.prototype.getParameters=function(){var e=Object.assign({},this.buffer.parameters);return e.side=this.side,e},Ss.prototype.getMesh=function(e){var t,n;return e?(n=this.backBuffer.getPickingMesh(),t=this.frontBuffer.getPickingMesh()):(n=this.backBuffer.getMesh(),t=this.frontBuffer.getMesh()),this.frontMeshes.push(t),this.backMeshes.push(n),this.setParameters({side:this.side}),new Kn().add(n,t)},Ss.prototype.getWireframeMesh=function(){return this.buffer.getWireframeMesh()},Ss.prototype.getPickingMesh=function(){return this.getMesh(!0)},Ss.prototype.setAttributes=function(e){this.buffer.setAttributes(e)},Ss.prototype.setParameters=function(e){(e=Object.assign({},e)).side==="front"?(this.frontMeshes.forEach($2),this.backMeshes.forEach(QV)):e.side==="back"?(this.frontMeshes.forEach(QV),this.backMeshes.forEach($2)):e.side==="double"&&(this.frontMeshes.forEach($2),this.backMeshes.forEach($2)),e.side!==void 0&&(this.side=e.side),delete e.side,e.matrix!==void 0&&(this.matrix=e.matrix),delete e.matrix,this.frontBuffer.setParameters(e),e.wireframe!==void 0&&(this.wireframe=e.wireframe,this.setVisibility(this.visible)),delete e.wireframe,this.backBuffer.setParameters(e)},Ss.prototype.setVisibility=function(e){this.visible=e,this.parameters.wireframe?(this.group.visible=!1,this.wireframeGroup.visible=e,this.pickable&&(this.pickingGroup.visible=!1)):(this.group.visible=e,this.wireframeGroup.visible=!1,this.pickable&&(this.pickingGroup.visible=e))},Ss.prototype.dispose=function(){this.frontBuffer.dispose(),this.backBuffer.dispose()},Ss.prototype.toJSON=function(){var e={};for(var t in this)["side","size","visible","matrix","parameters"].includes(t)&&(e[t]=this[t]);return e},Object.defineProperties(Ss.prototype,gy),On.add("shader/Line.vert",`uniform float clipNear;
uniform vec3 clipCenter;
varying vec3 vViewPosition;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#include color_pars_vertex
void main(){
#include color_vertex
#include begin_vertex
#include project_vertex
vViewPosition = -mvPosition.xyz;
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
}`),On.add("shader/Line.frag",`uniform float opacity;
uniform float clipNear;
uniform float clipRadius;
varying vec3 vViewPosition;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#include common
#include color_pars_fragment
#include fog_pars_fragment
void main(){
#include nearclip_fragment
#include radiusclip_fragment
gl_FragColor = vec4( vColor, opacity );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
}`);var Foe=function(e){function t(){e.apply(this,arguments),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag"}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(vn),A$=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="surface",this.parameters=Object.assign({isolevelType:{type:"select",options:{value:"value",sigma:"sigma"}},isolevel:{type:"number",precision:2,max:1e3,min:-1e3},negateIsolevel:{type:"boolean"},isolevelScroll:{type:"boolean"},smooth:{type:"integer",precision:1,max:10,min:0},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",buffer:!0},boxSize:{type:"integer",precision:1,max:100,min:0},colorVolume:{type:"hidden"},contour:{type:"boolean",rebuild:!0},useWorker:{type:"boolean",rebuild:!0},wrap:{type:"boolean",rebuild:!0}},this.parameters),n instanceof $n?(this.surface=void 0,this.volume=n):(this.surface=n,this.volume=void 0),this.boxCenter=new V,this.__boxCenter=new V,this.box=new cr,this.__box=new cr,this._position=new V,this.inverseMatrix=new lt,this.setBox=function(){this._position.copy(r.translationGroup.position).negate(),this._position.applyMatrix4(this.inverseMatrix),this._position.equals(this.boxCenter)||this.setParameters({boxCenter:this._position})},this.toBePrepared=!0,this.viewer.signals.ticked.add(this.setBox,this),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.colorScheme=K(r.colorScheme,"uniform"),r.colorValue=K(r.colorValue,14540253),this.isolevelType=K(r.isolevelType,"sigma"),this.isolevel=K(r.isolevel,2),this.negateIsolevel=K(r.negateIsolevel,!1),this.isolevelScroll=K(r.isolevelScroll,!1),this.smooth=K(r.smooth,0),this.background=K(r.background,!1),this.opaqueBack=K(r.opaqueBack,!0),this.boxSize=K(r.boxSize,0),this.colorVolume=K(r.colorVolume,void 0),this.contour=K(r.contour,!1),this.useWorker=K(r.useWorker,!0),this.wrap=K(r.wrap,!1),e.prototype.init.call(this,r),this.inverseMatrix.getInverse(this.matrix),this.build()},t.prototype.attach=function(n){var r=this;this.bufferList.forEach(function(i){r.viewer.add(i)}),this.setVisibility(this.visible),n()},t.prototype.prepare=function(n){var r,i=this;if(this.volume)if(r=this.isolevelType==="sigma"?this.volume.getValueForSigma(this.isolevel):this.isolevel,this.negateIsolevel&&(r*=-1),!this.surface||this.__isolevel!==r||this.__smooth!==this.smooth||this.__contour!==this.contour||this.__wrap!==this.wrap||this.__boxSize!==this.boxSize||this.boxSize>0&&!this.__boxCenter.equals(this.boxCenter)){this.__isolevel=r,this.__smooth=this.smooth,this.__contour=this.contour,this.__wrap=this.wrap,this.__boxSize=this.boxSize,this.__boxCenter.copy(this.boxCenter),this.__box.copy(this.box);var o=function(a){i.surface=a,n()};this.useWorker?this.volume.getSurfaceWorker(r,this.smooth,this.boxCenter,this.boxSize,this.contour,this.wrap,o):o(this.volume.getSurface(r,this.smooth,this.boxCenter,this.boxSize,this.contour,this.wrap))}else n();else n()},t.prototype.create=function(){var n,r={position:this.surface.getPosition(),color:this.surface.getColor(this.getColorParams()),index:this.surface.getIndex()};if(this.contour)n=new Foe(r,this.getBufferParams({wireframe:!1}));else{Object.assign(r,{normal:this.surface.getNormal(),picking:this.surface.getPicking()});var i=new Noe(r,this.getBufferParams({background:this.background,opaqueBack:this.opaqueBack,dullInterior:!1}));n=new Ss(i)}this.bufferList.push(n)},t.prototype.update=function(n){if(this.bufferList.length!==0){var r={};(n=n||{}).position&&(r.position=this.surface.getPosition()),n.color&&(r.color=this.surface.getColor(this.getColorParams())),n.index&&(r.index=this.surface.getIndex()),n.normal&&(r.normal=this.surface.getNormal()),this.bufferList.forEach(function(i){i.setAttributes(r)})}},t.prototype.setParameters=function(n,r,i){return n&&n.isolevelType!==void 0&&this.volume&&(this.isolevelType==="value"&&n.isolevelType==="sigma"?this.isolevel=this.volume.getSigmaForValue(this.isolevel):this.isolevelType==="sigma"&&n.isolevelType==="value"&&(this.isolevel=this.volume.getValueForSigma(this.isolevel)),this.isolevelType=n.isolevelType),n&&n.boxCenter&&(this.boxCenter.copy(n.boxCenter),delete n.boxCenter),n&&n.wireframe&&(n.contour||n.contour===void 0&&this.contour)&&(n.wireframe=!1),e.prototype.setParameters.call(this,n,r,i),n.matrix&&this.inverseMatrix.getInverse(n.matrix),this.volume&&this.volume.getBox(this.boxCenter,this.boxSize,this.box),n&&n.colorVolume!==void 0&&r&&(r.color=!0),this.surface&&(n.isolevel!==void 0||n.negateIsolevel!==void 0||n.smooth!==void 0||n.wrap!==void 0||n.boxSize!==void 0||this.boxSize>0&&!this.__box.equals(this.box))&&this.build({position:!0,color:!0,index:!0,normal:!this.contour}),this},t.prototype.getColorParams=function(){var n=e.prototype.getColorParams.call(this);return n.volume=this.colorVolume,n},t.prototype.dispose=function(){this.viewer.signals.ticked.remove(this.setBox,this),e.prototype.dispose.call(this)},t}(ni),qt=function(){};qt.zoomScroll=function(e,t){e.trackballControls.zoom(t)},qt.clipNearScroll=function(e,t){var n=e.getParameters();e.setParameters({clipNear:n.clipNear+t/10})},qt.focusScroll=function(e,t){var n=e.getFocus(),r=Math.sign(t)*function(i,o,a){if(i>o)return i;var s=i/o;return((2*a-o)*s+(2*o-3*a))*s*s+a}((100-n)/10,5,.2);e.setFocus(n+r)},qt.zoomFocusScroll=function(e,t){e.trackballControls.zoom(t);var n=e.viewer.camera.position.z;e.setFocus(100-Math.abs(n/8))},qt.isolevelScroll=function(e,t){var n=Math.sign(t)/10;e.eachRepresentation(function(r,i){if(r.repr instanceof A$){var o=r.getParameters();o.isolevelScroll&&r.setParameters({isolevel:o.isolevel+n})}})},qt.panDrag=function(e,t,n){e.trackballControls.pan(t,n)},qt.rotateDrag=function(e,t,n){e.trackballControls.rotate(t,n)},qt.zRotateDrag=function(e,t,n){e.trackballControls.zRotate(t,n)},qt.zoomDrag=function(e,t,n){e.trackballControls.zoom((t+n)/-2)},qt.zoomFocusDrag=function(e,t,n){e.trackballControls.zoom((t+n)/-2);var r=e.viewer.camera.position.z;e.setFocus(100-Math.abs(r/8))},qt.panComponentDrag=function(e,t,n){e.trackballControls.panComponent(t,n)},qt.panAtomDrag=function(e,t,n){e.trackballControls.panAtom(t,n)},qt.rotateComponentDrag=function(e,t,n){e.trackballControls.rotateComponent(t,n)},qt.movePick=function(e,t){t&&e.animationControls.move(t.position.clone())},qt.tooltipPick=function(e,t){var n=e.tooltip;if(e.getParameters().tooltip&&t){var r=t.mouse.position;n.innerText=t.getLabel(),n.style.bottom=window.innerHeight-r.y+3+"px",n.style.left=r.x+3+"px",n.style.display="block"}else n.style.display="none"};var joe={default:[["scroll",qt.zoomScroll],["scroll-shift",qt.focusScroll],["scroll-ctrl",qt.isolevelScroll],["scroll-shift-ctrl",qt.zoomFocusScroll],["drag-left",qt.rotateDrag],["drag-right",qt.panDrag],["drag-ctrl-left",qt.panDrag],["drag-ctrl-right",qt.zRotateDrag],["drag-shift-left",qt.zoomDrag],["drag-middle",qt.zoomFocusDrag],["drag-ctrl-shift-right",qt.panComponentDrag],["drag-ctrl-shift-left",qt.rotateComponentDrag],["clickPick-right",qt.measurePick=function(e,t){if(t&&(t.atom||t.bond)){var n=t.atom||t.closestBondAtom;t.component.measurePick(n)}else e.measureClear()}],["clickPick-ctrl-left",qt.measurePick],["clickPick-middle",qt.movePick],["clickPick-left",qt.movePick],["hoverPick",qt.tooltipPick]],pymol:[["drag-left",qt.rotateDrag],["drag-middle",qt.panDrag],["drag-right",qt.zoomDrag],["drag-shift-right",qt.focusScroll],["clickPick-ctrl+shift-middle",qt.movePick],["hoverPick",qt.tooltipPick]],coot:[["scroll",qt.isolevelScroll],["drag-left",qt.rotateDrag],["drag-middle",qt.panDrag],["drag-ctrl-left",qt.panDrag],["drag-right",qt.zoomFocusDrag],["drag-ctrl-right",qt.focusScroll],["clickPick-middle",qt.movePick],["hoverPick",qt.tooltipPick]],astexviewer:[["drag-left",qt.rotateDrag],["drag-ctrl-left",qt.panDrag],["drag-shift-left",qt.zoomDrag],["scroll",qt.focusScroll],["clickPick-middle",qt.movePick],["hoverPick",qt.tooltipPick]]};function eH(e){var t=e.split(/[-+]/),n="";t.includes("scroll")&&(n="scroll"),t.includes("drag")&&(n="drag"),t.includes("click")&&(n="click"),t.includes("doubleClick")&&(n="doubleClick"),t.includes("hover")&&(n="hover"),t.includes("clickPick")&&(n="clickPick"),t.includes("hoverPick")&&(n="hoverPick");var r=0;t.includes("alt")&&(r+=1),t.includes("ctrl")&&(r+=2),t.includes("meta")&&(r+=4),t.includes("shift")&&(r+=8);var i=0;return t.includes("left")&&(i+=1),t.includes("right")&&(i+=2),t.includes("middle")&&(i+=4),[n,r,i]}var zm=function(e,t){t===void 0&&(t={}),this.stage=e,this.actionList=[],this.mouse=e.mouseObserver,this.disabled=t.disabled||!1,this.preset(t.preset||"default")};zm.prototype.run=function(e){for(var t=this,n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];if(!this.disabled){var i=this.mouse.key||0,o=this.mouse.buttons||0;this.actionList.forEach(function(a){a.type===e&&a.key===i&&a.button===o&&a.callback.apply(a,[t.stage].concat(n))})}},zm.prototype.add=function(e,t){var n=eH(e),r=n[0],i=n[1],o=n[2];this.actionList.push({type:r,key:i,button:o,callback:t})},zm.prototype.remove=function(e,t){var n=e.includes("*"),r=eH(e),i=r[0],o=r[1],a=r[2],s=this.actionList.filter(function(l){return!((l.type===i||n&&i==="")&&(l.key===o||n&&o===0)&&(l.button===a||n&&a===0)&&(l.callback===t||t===void 0))});this.actionList=s},zm.prototype.preset=function(e){var t=this;this.clear(),(joe[e]||[]).forEach(function(n){return t.add(n[0],n[1])})},zm.prototype.clear=function(){this.actionList.length=0};var $f=function(){};$f.autoView=function(e){e.autoView(1e3)},$f.toggleAnimations=function(e){e.animationControls.toggle()},$f.toggleRock=function(e){e.toggleRock()};var Nat={default:[["i",$f.toggleSpin=function(e){e.toggleSpin()}],["k",$f.toggleRock],["p",$f.toggleAnimations],["a",$f.toggleAntialiasing=function(e){var t=e.getParameters();e.setParameters({sampleLevel:t.sampleLevel===-1?0:-1})}],["r",$f.autoView]]},Um=function(e,t){t===void 0&&(t={}),this.stage=e,this.actionList=[],this.disabled=t.disabled||!1,this.preset(t.preset||"default")};Um.prototype.run=function(e){var t=this;this.disabled||this.actionList.forEach(function(n){n.key===e&&n.callback(t.stage)})},Um.prototype.add=function(e,t){this.actionList.push({key:e,callback:t})},Um.prototype.remove=function(e,t){var n=this.actionList.filter(function(r){return!(r.key===e&&(r.callback===t||t===void 0))});this.actionList=n},Um.prototype.preset=function(e){var t=this;this.clear(),(Nat[e]||[]).forEach(function(n){return t.add(n[0],n[1])})},Um.prototype.clear=function(){this.actionList.length=0};var VS=function(e){this.stage=e,this.stage=e,this.mouse=e.mouseObserver,this.controls=e.mouseControls,this.mouse.signals.clicked.add(this._onClick,this),this.mouse.signals.hovered.add(this._onHover,this)};VS.prototype._onClick=function(e,t){var n=this.stage.pickingControls.pick(e,t);this.stage.signals.clicked.dispatch(n),this.controls.run("clickPick",n)},VS.prototype._onHover=function(e,t){var n=this.stage.pickingControls.pick(e,t);n&&this.mouse.down.equals(this.mouse.position)&&(this.stage.transformComponent=n.component,this.stage.transformAtom=n.atom),this.stage.signals.hovered.dispatch(n),this.controls.run("hoverPick",n)},VS.prototype.dispose=function(){this.mouse.signals.clicked.remove(this._onClick,this),this.mouse.signals.hovered.remove(this._onHover,this)};var Af=function(e){this.stage=e,this.stage=e,this.mouse=e.mouseObserver,this.controls=e.mouseControls,this.mouse.signals.moved.add(this._onMove,this),this.mouse.signals.scrolled.add(this._onScroll,this),this.mouse.signals.dragged.add(this._onDrag,this),this.mouse.signals.clicked.add(this._onClick,this),this.mouse.signals.hovered.add(this._onHover,this),this.mouse.signals.doubleClicked.add(this._onDblclick,this)};Af.prototype._onMove=function(){this.stage.tooltip.style.display="none"},Af.prototype._onScroll=function(e){this.controls.run("scroll",e)},Af.prototype._onDrag=function(e,t){this.controls.run("drag",e,t)},Af.prototype._onClick=function(e,t){this.controls.run("click",e,t)},Af.prototype._onDblclick=function(e,t){this.controls.run("doubleClick",e,t)},Af.prototype._onHover=function(e,t){this.controls.run("hover",e,t)},Af.prototype.dispose=function(){this.mouse.signals.moved.remove(this._onMove,this),this.mouse.signals.scrolled.remove(this._onScroll,this),this.mouse.signals.dragged.remove(this._onDrag,this),this.mouse.signals.clicked.remove(this._onClick,this),this.mouse.signals.hovered.remove(this._onHover,this)};var P$=function(e){this.stage=e,this.viewer=e.viewer,this.animationControls=e.animationControls,this.viewer.signals.ticked.add(this._onTick,this)};P$.prototype._onTick=function(e){this.animationControls.run(e)},P$.prototype.dispose=function(){this.viewer.signals.ticked.remove(this._onTick,this)};var zoe=!!uoe&&{passive:!0},Vm=function(e){this.stage=e,this.stage=e,this.controls=e.keyControls,this.domElement=e.viewer.renderer.domElement,this.domElement.setAttribute("tabIndex","-1"),this.domElement.style.outline="none",this._focusDomElement=this._focusDomElement.bind(this),this._onKeydown=this._onKeydown.bind(this),this._onKeyup=this._onKeyup.bind(this),this._onKeypress=this._onKeypress.bind(this),this.domElement.addEventListener("mousedown",this._focusDomElement),this.domElement.addEventListener("touchstart",this._focusDomElement,zoe),this.domElement.addEventListener("keydown",this._onKeydown),this.domElement.addEventListener("keyup",this._onKeyup),this.domElement.addEventListener("keypress",this._onKeypress)};Vm.prototype._onKeydown=function(){},Vm.prototype._onKeyup=function(){},Vm.prototype._onKeypress=function(e){var t;t="key"in KeyboardEvent.prototype?e.key:String.fromCharCode(e.which||e.keyCode),this.controls.run(t)},Vm.prototype._focusDomElement=function(){this.domElement.focus()},Vm.prototype.dispose=function(){this.domElement.removeEventListener("mousedown",this._focusDomElement),this.domElement.removeEventListener("touchstart",this._focusDomElement,zoe),this.domElement.removeEventListener("keydown",this._onKeypress),this.domElement.removeEventListener("keyup",this._onKeypress),this.domElement.removeEventListener("keypress",this._onKeypress)};var Pf=function(e,t,n,r){r===void 0&&(r={}),this.component=e,this.position=t,this.offsetX=K(r.offsetX,0),this.offsetY=K(r.offsetY,0),this.visible=K(r.visible,!0),this.stage=e.stage,this.viewer=e.stage.viewer,this._viewerPosition=new V,this._updateViewerPosition(),this._canvasPosition=new rt,this._cameraPosition=new V,this.element=document.createElement("div"),Object.assign(this.element.style,{display:"block",position:"absolute",pointerEvents:"none",whiteSpace:"nowrap",left:"-10000px"}),this.viewer.wrapper.appendChild(this.element),this.setContent(n),this.updateVisibility(),this.viewer.signals.rendered.add(this._update,this),this.component.signals.matrixChanged.add(this._updateViewerPosition,this)};Pf.prototype.setContent=function(e){var t=this.element.style.display;if(t==="none"&&(this.element.style.left="-10000px",this.element.style.display="block"),e instanceof HTMLElement)this.element.appendChild(e);else{var n=document.createElement("div");n.innerText=e,Object.assign(n.style,{backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),this.element.appendChild(n)}this._clientRect=this.element.getBoundingClientRect(),t==="none"&&(this.element.style.display=t)},Pf.prototype.setVisibility=function(e){this.visible=e,this.updateVisibility()},Pf.prototype.getVisibility=function(){return this.visible&&this.component.parameters.visible},Pf.prototype.updateVisibility=function(){this.element.style.display=this.getVisibility()?"block":"none"},Pf.prototype._updateViewerPosition=function(){this._viewerPosition.copy(this.position).applyMatrix4(this.component.matrix)},Pf.prototype._update=function(){if(this.getVisibility()){var e=this.element.style,t=this._canvasPosition,n=this._viewerPosition,r=this._clientRect;if(this._cameraPosition.copy(n).add(this.viewer.translationGroup.position).applyMatrix4(this.viewer.rotationGroup.matrix).sub(this.viewer.camera.position),this._cameraPosition.z<0)e.display="none";else{e.display="block";var i=this._cameraPosition.length(),o=this.viewer.scene.fog;e.opacity=(1-Nx(o.near,o.far,i)).toString(),e.zIndex=Math.round(100*(o.far-i)).toString(),this.stage.viewerControls.getPositionOnCanvas(n,t),e.bottom=this.offsetX+t.y+r.height/2+"px",e.left=this.offsetY+t.x-r.width/2+"px"}}},Pf.prototype.dispose=function(){this.viewer.wrapper.removeChild(this.element),this.viewer.signals.ticked.remove(this._update,this),this.component.signals.matrixChanged.remove(this._updateViewerPosition,this)};var tu=new lt,D2=new V,tH=new lr,HS=function(e){this.component=e,this.signals={changed:new en.Signal},this.stage=e.stage,this.viewer=e.stage.viewer},PR={position:{configurable:!0},rotation:{configurable:!0}};PR.position.get=function(){return this.component.position},PR.rotation.get=function(){return this.component.quaternion},HS.prototype.changed=function(){this.component.updateMatrix(),this.viewer.requestRender(),this.signals.changed.dispatch()},HS.prototype.spin=function(e,t){tu.getInverse(this.viewer.rotationGroup.matrix),D2.copy(Dp(e)).applyMatrix4(tu),tu.extractRotation(this.component.transform),tu.premultiply(this.viewer.rotationGroup.matrix),tu.getInverse(tu),D2.copy(Dp(e)),D2.applyMatrix4(tu),tu.makeRotationAxis(D2,t),tH.setFromRotationMatrix(tu),this.component.quaternion.premultiply(tH),this.changed()},Object.defineProperties(HS.prototype,PR);var Uoe={"":"",vdw:"by vdW radius",covalent:"by covalent radius",sstruc:"by secondary structure",bfactor:"by bfactor",size:"size",data:"data",explicit:"explicit"},$c=function(e){e===void 0&&(e={}),this.max=10,this.type=K(e.type,"size"),this.scale=K(e.scale,1),this.size=K(e.size,1),this.data=K(e.data,{})};$c.prototype.atomRadius=function(e){var t;switch(this.type){case"vdw":t=e.vdw;break;case"covalent":t=e.covalent;break;case"bfactor":t=e.bfactor||1;break;case"sstruc":var n=e.sstruc;t=n==="h"||n==="g"||n==="i"||n==="e"||n==="b"?.25:Toe.includes(e.atomname)?.4:.1;break;case"data":t=K(this.data[e.index],1);break;case"explicit":(t=e.radius)===null&&(t=this.size);break;default:t=this.size}return Math.min(t*this.scale,this.max)},$c.types=Uoe;var Fat=new V(-1,-1,-1),jat=new lt,Mb=function(e){var t=e.rows,n=t/3,r=new Dn(t,3),i=new Dn(3,3),o=new Dn(1,3),a=new Dn(3,3),s=new Dn(3,3),l=_$(e);x$(e,l),gl(r,e),zS(i,r,r),$oe(i,o,a,s);var c=new V(l[0],l[1],l[2]),u=new V(a.data[0],a.data[3],a.data[6]),f=new V(a.data[1],a.data[4],a.data[7]),d=new V(a.data[2],a.data[5],a.data[8]),p=u.clone().multiplyScalar(Math.sqrt(o.data[0]/n)),h=f.clone().multiplyScalar(Math.sqrt(o.data[1]/n)),g=d.clone().multiplyScalar(Math.sqrt(o.data[2]/n));this.begA=c.clone().sub(p),this.endA=c.clone().add(p),this.begB=c.clone().sub(h),this.endB=c.clone().add(h),this.begC=c.clone().sub(g),this.endC=c.clone().add(g),this.center=c,this.vecA=p,this.vecB=h,this.vecC=g,this.normVecA=u,this.normVecB=f,this.normVecC=d};Mb.prototype.getBasisMatrix=function(e){e===void 0&&(e=new lt);var t=e;return t.makeBasis(this.normVecB,this.normVecA,this.normVecC),t.determinant()<0&&t.scale(Fat),t},Mb.prototype.getRotationQuaternion=function(e){e===void 0&&(e=new lr);var t=e;return t.setFromRotationMatrix(this.getBasisMatrix(jat)),t.inverse()},Mb.prototype.getProjectedScaleForAtoms=function(e){var t=-1/0,n=-1/0,r=-1/0,i=-1/0,o=-1/0,a=-1/0,s=new V,l=new V,c=this.center,u=this.normVecA,f=this.normVecB,d=this.normVecC;return e.eachAtom(function(p){Bp(s.copy(p),u,c);var h=l.subVectors(s,c).normalize().dot(u),g=s.distanceTo(c);h>0?g>t&&(t=g):g>n&&(n=g),Bp(s.copy(p),f,c);var v=l.subVectors(s,c).normalize().dot(f),m=s.distanceTo(c);v>0?m>r&&(r=m):m>i&&(i=m),Bp(s.copy(p),d,c);var y=l.subVectors(s,c).normalize().dot(d),_=s.distanceTo(c);y>0?_>o&&(o=_):_>a&&(a=_)}),{d1a:t,d2a:r,d3a:o,d1b:-n,d2b:-i,d3b:-a}};var Cs=function(e,t,n,r){this.volume=e,this.setFilter(t,n,r)},il={header:{configurable:!0},matrix:{configurable:!0},normalMatrix:{configurable:!0},inverseMatrix:{configurable:!0},center:{configurable:!0},boundingBox:{configurable:!0},min:{configurable:!0},max:{configurable:!0},mean:{configurable:!0},rms:{configurable:!0}};il.header.get=function(){return this.volume.header},il.matrix.get=function(){return this.volume.matrix},il.normalMatrix.get=function(){return this.volume.normalMatrix},il.inverseMatrix.get=function(){return this.volume.inverseMatrix},il.center.get=function(){return this.volume.center},il.boundingBox.get=function(){return this.volume.boundingBox},il.min.get=function(){return this.volume.min},il.max.get=function(){return this.volume.max},il.mean.get=function(){return this.volume.mean},il.rms.get=function(){return this.volume.rms},Cs.prototype._getFilterHash=function(e,t,n){return JSON.stringify([e,t,n])},Cs.prototype.setFilter=function(e,t,n){isNaN(e)&&this.header&&(e=this.header.DMEAN+2*this.header.ARMS),e=e===void 0||isNaN(e)?-1/0:e,t=K(t,1/0),n=K(n,!1);var r=this.volume.data,i=this.volume.position,o=this.volume.atomindex,a=this._getFilterHash(e,t,n);if(a!==this._filterHash){if(e===-1/0&&t===1/0)this.data=r,this.position=i,this.atomindex=o;else{var s=r.length;this._dataBuffer||(this._dataBuffer=new ArrayBuffer(4*s),this._positionBuffer=new ArrayBuffer(3*s*4),o&&(this._atomindexBuffer=new ArrayBuffer(4*s)));var l,c=new Float32Array(this._dataBuffer),u=new Float32Array(this._positionBuffer);o&&(l=new Uint32Array(this._atomindexBuffer));for(var f=0,d=0;d<s;++d){var p=3*d,h=r[d];if(!n&&h>=e&&h<=t||n&&(h<e||h>t)){var g=3*f;c[f]=h,u[g+0]=i[p+0],u[g+1]=i[p+1],u[g+2]=i[p+2],o&&l&&(l[f]=o[d]),f+=1}}this.data=new Float32Array(this._dataBuffer,0,f),this.position=new Float32Array(this._positionBuffer,0,3*f),o&&(this.atomindex=new Int32Array(this._atomindexBuffer,0,f))}this._filterHash=a}},Object.defineProperties(Cs.prototype,il),Cs.prototype.getValueForSigma=$n.prototype.getValueForSigma,Cs.prototype.getSigmaForValue=$n.prototype.getSigmaForValue,Cs.prototype.getDataAtomindex=$n.prototype.getDataAtomindex,Cs.prototype.getDataPosition=$n.prototype.getDataPosition,Cs.prototype.getDataColor=$n.prototype.getDataColor,Cs.prototype.getDataPicking=$n.prototype.getDataPicking,Cs.prototype.getDataSize=$n.prototype.getDataSize;var zat=function(e,t){var n=xoe({nodeArray1:e.atomIndex1,nodeArray2:e.atomIndex2,edgeCount:e.count,nodeCount:t});this.countArray=n.countArray,this.offsetArray=n.offsetArray,this.indexArray=n.indexArray},GS=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["atomIndex1",1,"int32"],["atomIndex2",1,"int32"],["bondOrder",1,"int8"]]},t.prototype.addBond=function(r,i,o){this.growIfFull();var a=this.count,s=r.index,l=i.index;s<l?(this.atomIndex1[a]=s,this.atomIndex2[a]=l):(this.atomIndex2[a]=s,this.atomIndex1[a]=l),o&&(this.bondOrder[a]=o),this.count+=1},t.prototype.addBondIfConnected=function(r,i,o){return!!r.connectedTo(i)&&(this.addBond(r,i,o),!0)},Object.defineProperties(t.prototype,n),t}(Ji),Uat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["residueIndex",1,"uint32"],["atomTypeId",1,"uint16"],["x",1,"float32"],["y",1,"float32"],["z",1,"float32"],["serial",1,"int32"],["bfactor",1,"float32"],["altloc",1,"uint8"],["occupancy",1,"float32"]]},t.prototype.setAltloc=function(r,i){this.altloc[r]=i.charCodeAt(0)},t.prototype.getAltloc=function(r){var i=this.altloc[r];return i?String.fromCharCode(i):""},Object.defineProperties(t.prototype,n),t}(Ji),Vat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["chainIndex",1,"uint32"],["atomOffset",1,"uint32"],["atomCount",1,"uint32"],["residueTypeId",1,"uint16"],["resno",1,"int32"],["sstruc",1,"uint8"],["inscode",1,"uint8"]]},t.prototype.setSstruc=function(r,i){this.sstruc[r]=i.charCodeAt(0)},t.prototype.getSstruc=function(r){var i=this.sstruc[r];return i?String.fromCharCode(i):""},t.prototype.setInscode=function(r,i){this.inscode[r]=i.charCodeAt(0)},t.prototype.getInscode=function(r){var i=this.inscode[r];return i?String.fromCharCode(i):""},Object.defineProperties(t.prototype,n),t}(Ji),Hat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["entityIndex",1,"uint16"],["modelIndex",1,"uint16"],["residueOffset",1,"uint32"],["residueCount",1,"uint32"],["chainname",4,"uint8"],["chainid",4,"uint8"]]},t.prototype.setChainname=function(r,i){var o=4*r;this.chainname[o]=i.charCodeAt(0),this.chainname[o+1]=i.charCodeAt(1),this.chainname[o+2]=i.charCodeAt(2),this.chainname[o+3]=i.charCodeAt(3)},t.prototype.getChainname=function(r){for(var i="",o=0;o<4;++o){var a=this.chainname[4*r+o];if(!a)break;i+=String.fromCharCode(a)}return i},t.prototype.setChainid=function(r,i){var o=4*r;this.chainid[o]=i.charCodeAt(0),this.chainid[o+1]=i.charCodeAt(1),this.chainid[o+2]=i.charCodeAt(2),this.chainid[o+3]=i.charCodeAt(3)},t.prototype.getChainid=function(r){for(var i="",o=0;o<4;++o){var a=this.chainid[4*r+o];if(!a)break;i+=String.fromCharCode(a)}return i},Object.defineProperties(t.prototype,n),t}(Ji),Gat=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_defaultFields:{configurable:!0}};return n._defaultFields.get=function(){return[["chainOffset",1,"uint32"],["chainCount",1,"uint32"]]},Object.defineProperties(t.prototype,n),t}(Ji),hu=function(e){this.polymer=e,this.size=e.residueCount};hu.prototype.getCenterIterator=function(e){e===void 0&&(e=0);var t=this.getPosition().center,n=t.length/3,r=0,i=-1,o=[new V,new V,new V,new V];return{size:n,next:function(){var a=this.get(i);return i+=1,a},get:function(a){a=Math.min(n-1,Math.max(0,a));var s=o[r%4],l=3*a;if(s.fromArray(t,l),e){for(var c=Math.min(e,a,n-a-1),u=1;u<=c;++u){var f=3*u,d=(c+1-u)/(c+1);s.x+=d*t[l-f+0]+d*t[l+f+0],s.y+=d*t[l-f+1]+d*t[l+f+1],s.z+=d*t[l-f+2]+d*t[l+f+2]}s.x/=c+1,s.y/=c+1,s.z/=c+1}return r+=1,s},reset:function(){r=0,i=-1}}},hu.prototype.getColor=function(e){var t=this.polymer,n=t.structure,r=t.residueCount,i=t.residueIndexStart,o=new Float32Array(3*r),a=e||{};a.structure=n;for(var s=pn.getScheme(a),l=n.getResidueProxy(),c=n.getAtomProxy(),u=0;u<r;++u)l.index=i+u,c.index=l.traceAtomIndex,s.atomColorToArray(c,o,3*u);return{color:o}},hu.prototype.getPicking=function(){for(var e=this.polymer,t=e.structure,n=e.residueCount,r=e.residueIndexStart,i=new Float32Array(n),o=t.getResidueProxy(),a=0;a<n;++a)o.index=r+a,i[a]=o.traceAtomIndex;return{picking:new Vh(i,t)}},hu.prototype.getSize=function(e){for(var t=this.polymer,n=t.structure,r=t.residueCount,i=t.residueIndexStart,o=new Float32Array(r),a=new $c(e),s=n.getResidueProxy(),l=n.getAtomProxy(),c=0;c<r;++c)s.index=i+c,l.index=s.traceAtomIndex,o[c]=a.atomRadius(l);return{size:o}},hu.prototype.getPosition=function(){for(var e=this.polymer,t=e.structure,n=e.residueCount,r=n-3,i=new Float32Array(3*n),o=new Float32Array(3*n),a=new Float32Array(n),s=new Float32Array(n),l=new Float32Array(n),c=new Float32Array(n),u=new Float32Array(3*n),f=new V,d=new V,p=new V,h=new V,g=new V,v=new V,m=new V,y=new V,_=new V,b=new V,x=new V,w=new V(0,0,0),S="trace",A=t.getAtomProxy(),C=t.getAtomProxy(e.getAtomIndexByType(0,S)),k=t.getAtomProxy(e.getAtomIndexByType(1,S)),O=t.getAtomProxy(e.getAtomIndexByType(2,S)),T=0;T<r;++T){A.index=C.index,C.index=k.index,k.index=O.index,O.index=e.getAtomIndexByType(T+3,S);var B=3*T;f.subVectors(C,A),d.subVectors(k,C),p.subVectors(O,k),h.subVectors(f,d),g.subVectors(d,p),_.crossVectors(h,g).normalize(),_.toArray(o,B),T>0&&(a[T]=_.angleTo(b));var R=Math.cos(h.angleTo(g));c[T]=180/Math.PI*Math.acos(R);var P=h.length(),D=g.length();s[T]=Math.sqrt(D*P)/Math.max(2,2*(1-R)),l[T]=Math.abs(d.dot(_)),v.copy(h).multiplyScalar(s[T]/P),m.copy(g).multiplyScalar(s[T]/D),v.subVectors(C,v),m.subVectors(k,m),v.toArray(i,B+3),m.toArray(i,B+6),x.subVectors(A,w),x.toArray(u,B),b.copy(_),w.copy(v)}v.fromArray(i,3),m.fromArray(i,6),_.subVectors(v,m).normalize(),A.index=e.getAtomIndexByType(0,S),w.copy(A),y.copy(A),Bp(y,_,v),y.toArray(i,0),x.subVectors(w,v),x.toArray(u,0),v.fromArray(i,3*n-6),m.fromArray(i,3*n-9),_.subVectors(v,m).normalize(),A.index=e.getAtomIndexByType(n-1,S),w.copy(A),y.copy(A),Bp(y,_,v),y.toArray(i,3*n-3);for(var z=n-3;z<n;++z)v.fromArray(i,3*z),A.index=e.getAtomIndexByType(z,S),w.copy(A),x.subVectors(w,v),x.toArray(u,3*z);var N=new Float32Array(n),H=new Float32Array(n),J=new Float32Array(n),ne=new Float32Array(n);N[1]=s[0],H[1]=c[0],J[1]=s[0];for(var oe=2;oe<n-2;++oe)N[oe]=.5*(s[oe-2]+s[oe-1]),H[oe]=.5*(c[oe-2]+c[oe-1]),J[oe]=.5*(l[oe-2]+l[oe-1]),v.fromArray(o,3*(oe-2)),m.fromArray(o,3*(oe-1)),ne[oe]=180/Math.PI*Math.acos(Math.cos(v.angleTo(m)));N[n-2]=s[n-4],H[n-2]=c[n-4],J[n-2]=l[n-4];var Z=new Float32Array(3*n);di(o,Z,0,0,3),di(o,Z,0,3,3);for(var ce=2;ce<n-2;++ce)v.fromArray(o,3*(ce-2)),m.fromArray(o,3*(ce-1)),_.addVectors(m,v).multiplyScalar(.5).normalize(),_.toArray(Z,3*ce);return di(o,Z,3*n-12,3*n-6,3),di(o,Z,3*n-12,3*n-3,3),{center:i,axis:Z,bending:ne,radius:N,rise:J,twist:H,resdir:u}};var jN=function(e){this.polymer=e,this.helixorient=new hu(e),this.position=this.helixorient.getPosition()};jN.prototype.getAxis=function(e,t,n,r,i){e=e||30,t=t||2.5,n=n!==void 0&&n;var o=this.polymer,a=o.structure,s=o.residueCount,l=o.residueIndexStart,c=this.position,u=r||{};u.structure=a;for(var f,d,p=pn.getScheme(u),h=new $c(i),g=0,v=0,m=[],y=[],_=[],b=[],x=[],w=[],S=[],A=[],C=[],k=new Float32Array(3*s),O=new Float32Array(3*s),T=new V,B=new V,R=a.getResidueProxy(),P=a.getResidueProxy(),D=a.getAtomProxy(),z=new V,N=new V,H=!1,J=0;J<s;++J)if(R.index=l+J,z.fromArray(c.center,3*J),J===s-1?H=!0:(P.index=l+J+1,N.fromArray(c.center,3*J+3),(n&&R.sstruc!==P.sstruc||z.distanceTo(N)>t||c.bending[J]>e)&&(H=!0)),H){if(J-g<4){g=J,H=!1;continue}D.index=R.traceAtomIndex,k=c.axis.subarray(3*g+3,3*J),O=c.center.subarray(3*g,3*J+3),f=v$(k).normalize(),d=v$(O),T.fromArray(O),Bp(T,f,d),B.fromArray(O,O.length-3),Bp(B,f,d),f.subVectors(B,T),f.toArray(m,v),d.toArray(y,v),T.toArray(_,v),B.toArray(b,v),p.atomColorToArray(D,x,v),w.push(D.index),S.push(h.atomRadius(D)),A.push(l+g),C.push(l+J+1-g),v+=3,g=J,H=!1}var ne=new Float32Array(w);return{axis:new Float32Array(m),center:new Float32Array(y),begin:new Float32Array(_),end:new Float32Array(b),color:new Float32Array(x),picking:new Vh(ne,a),size:new Float32Array(S),residueOffset:A,residueCount:C}};var Mf=function(e){this.scoreFunction=e,this.content=[],this.scoreFunction=e};Mf.prototype.push=function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},Mf.prototype.pop=function(){var e=this.content[0],t=this.content.pop();return t&&this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},Mf.prototype.peek=function(){return this.content[0]},Mf.prototype.remove=function(e){for(var t=this.content.length,n=0;n<t;n++)if(this.content[n]===e){var r=this.content.pop();return void(r&&n!==t-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},Mf.prototype.size=function(){return this.content.length},Mf.prototype.bubbleUp=function(e){for(var t=this.content[e];e>0;){var n=Math.floor((e+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}},Mf.prototype.sinkDown=function(e){for(var t=this.content.length,n=this.content[e],r=this.scoreFunction(n),i=0;;){var o=2*(e+1),a=o-1,s=null;if(a<t){var l=this.content[a];(i=this.scoreFunction(l))<r&&(s=a)}if(o<t){var c=this.content[o];this.scoreFunction(c)<(s===null?r:i)&&(s=o)}if(s===null)break;this.content[e]=this.content[s],this.content[s]=n,e=s}};/**
 * Kdtree
 * @class
 * @author Alexander Rose <alexander.rose@weirdbyte.de>, 2016
 * @author Roman Bolzern <roman.bolzern@fhnw.ch>, 2013
 * @author I4DS http://www.fhnw.ch/i4ds, 2013
 * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
 * @description
 * k-d Tree for typed arrays of 3d points (e.g. for Float32Array), in-place
 * provides fast nearest neighbour search
 *
 * Based on https://github.com/ubilabs/kd-tree-javascript by Ubilabs
 *
 * Further information (including mathematical properties)
 * http://en.wikipedia.org/wiki/Binary_tree
 * http://en.wikipedia.org/wiki/K-d_tree
 *
 * @example
 * points: [x, y, z, x, y, z, x, y, z, ...]
 * metric: function(a, b){
 *    return Math.pow(a[0]-b[0], 2) + Math.pow(a[1]-b[1], 2) + Math.pow(a[2]-b[2], 2);
 * }
 *
 * @param {Float32Array} points - points
 * @param {Function} metric - metric
 */var Zy=function(e,t){this.points=e,this.metric=t,this.maxDepth=0,this.currentNode=0;for(var n=e.length/3,r=new Uint32Array(n),i=0;i<n;++i)r[i]=i;this.indices=r,this.nodes=new Int32Array(4*n),this.rootIndex=this.buildTree(0,-1,0,n)};Zy.prototype.buildTree=function(e,t,n,r){e>this.maxDepth&&(this.maxDepth=e);var i=r-n;if(i===0)return-1;var o=4*this.currentNode,a=this.nodes;if(this.currentNode+=1,i===1)return a[o]=n,a[o+1]=-1,a[o+2]=-1,a[o+3]=t,o;for(var s,l,c,u,f,d=this.indices,p=this.points,h=n+Math.floor(i/2),g=e%3,v=n,m=r-1;m>v;){for(u=p[3*d[c=v+m>>1]+g],l=d[c],d[c]=d[m],d[m]=l,f=v,s=v;s<m;++s)p[3*d[s]+g]<u&&(l=d[f],d[f]=d[s],d[s]=l,++f);if(l=d[m],d[m]=d[f],d[f]=l,h===(c=f))break;h<c?m=c-1:v=c+1}return a[o]=h,a[o+1]=this.buildTree(e+1,o,n,h),a[o+2]=this.buildTree(e+1,o,h+1,r),a[o+3]=t,o},Zy.prototype.getNodeDepth=function(e){var t=this.nodes[e+3];return t===-1?0:this.getNodeDepth(t)+1},Zy.prototype.nearest=function(e,t,n){var r=this,i=new Mf(function(d){return-d[1]}),o=this.nodes,a=this.points,s=this.indices,l=function(d){var p,h,g=r.getNodeDepth(d)%3,v=3*s[o[d]],m=[a[v+0],a[v+1],a[v+2]],y=r.metric(e,m);function _(C,k){i.push([C,k]),i.size()>t&&i.pop()}var b=o[d+1],x=o[d+2];if(x!==-1||b!==-1){p=x===-1?b:b===-1?x:e[g]<=a[v+g]?b:x,l(p),(i.size()<t||y<i.peek()[1])&&y<=n&&_(d,y);for(var w=[],S=0;S<3;S+=1)w[S]=S===g?e[S]:a[v+S];var A=r.metric(w,m);(i.size()<t||Math.abs(A)<i.peek()[1])&&Math.abs(A)<=n&&(h=p===b?x:b)!==-1&&l(h)}else(i.size()<t||y<i.peek()[1])&&y<=n&&_(d,y)};l(this.rootIndex);for(var c=[],u=0,f=Math.min(i.size(),t);u<f;u+=1)c.push(i.content[u]);return c},Zy.prototype.verify=function(e,t){t===void 0&&(t=0);var n=1;if(e===void 0&&(e=this.rootIndex),e===-1)throw new Error("node is null");var r=t%3,i=this.nodes,o=this.points,a=this.indices,s=i[e+1],l=i[e+2];if(s!==-1){if(o[3*a[i[s]]+r]>o[3*a[i[e]]+r])throw new Error("left child is > parent!");n+=this.verify(s,t+1)}if(l!==-1){if(o[3*a[i[l]]+r]<o[3*a[i[e]]+r])throw new Error("right child is < parent!");n+=this.verify(l,t+1)}return n};var Nt=function(e,t){t===void 0&&(t=0),this.structure=e,this.index=t,this.chainStore=e.chainStore,this.residueStore=e.residueStore,this.atomStore=e.atomStore,this.residueMap=e.residueMap,this.atomMap=e.atomMap},on={bondHash:{configurable:!0},entity:{configurable:!0},entityIndex:{configurable:!0},modelIndex:{configurable:!0},chainIndex:{configurable:!0},residue:{configurable:!0},residueIndex:{configurable:!0},sstruc:{configurable:!0},inscode:{configurable:!0},resno:{configurable:!0},chainname:{configurable:!0},chainid:{configurable:!0},residueType:{configurable:!0},atomType:{configurable:!0},residueAtomOffset:{configurable:!0},resname:{configurable:!0},hetero:{configurable:!0},atomname:{configurable:!0},number:{configurable:!0},element:{configurable:!0},vdw:{configurable:!0},covalent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},z:{configurable:!0},serial:{configurable:!0},bfactor:{configurable:!0},occupancy:{configurable:!0},altloc:{configurable:!0},partialCharge:{configurable:!0},radius:{configurable:!0},formalCharge:{configurable:!0},aromatic:{configurable:!0},bondCount:{configurable:!0}};function Voe(e,t){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Wat(e,t){return Math.sqrt(Voe(e,t))}on.bondHash.get=function(){return this.structure.bondHash},on.entity.get=function(){return this.structure.entityList[this.entityIndex]},on.entityIndex.get=function(){return this.chainStore.entityIndex[this.chainIndex]},on.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},on.chainIndex.get=function(){return this.residueStore.chainIndex[this.residueIndex]},on.residue.get=function(){return console.warn("residue - might be expensive"),this.structure.getResidueProxy(this.residueIndex)},on.residueIndex.get=function(){return this.atomStore.residueIndex[this.index]},on.residueIndex.set=function(e){this.atomStore.residueIndex[this.index]=e},on.sstruc.get=function(){return this.residueStore.getSstruc(this.residueIndex)},on.inscode.get=function(){return this.residueStore.getInscode(this.residueIndex)},on.resno.get=function(){return this.residueStore.resno[this.residueIndex]},on.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},on.chainid.get=function(){return this.chainStore.getChainid(this.chainIndex)},on.residueType.get=function(){return this.residueMap.get(this.residueStore.residueTypeId[this.residueIndex])},on.atomType.get=function(){return this.atomMap.get(this.atomStore.atomTypeId[this.index])},on.residueAtomOffset.get=function(){return this.residueStore.atomOffset[this.residueIndex]},on.resname.get=function(){return this.residueType.resname},on.hetero.get=function(){return this.residueType.hetero},on.atomname.get=function(){return this.atomType.atomname},on.number.get=function(){return this.atomType.number},on.element.get=function(){return this.atomType.element},on.vdw.get=function(){return this.atomType.vdw},on.covalent.get=function(){return this.atomType.covalent},on.x.get=function(){return this.atomStore.x[this.index]},on.x.set=function(e){this.atomStore.x[this.index]=e},on.y.get=function(){return this.atomStore.y[this.index]},on.y.set=function(e){this.atomStore.y[this.index]=e},on.z.get=function(){return this.atomStore.z[this.index]},on.z.set=function(e){this.atomStore.z[this.index]=e},on.serial.get=function(){return this.atomStore.serial[this.index]},on.serial.set=function(e){this.atomStore.serial[this.index]=e},on.bfactor.get=function(){return this.atomStore.bfactor[this.index]},on.bfactor.set=function(e){this.atomStore.bfactor[this.index]=e},on.occupancy.get=function(){return this.atomStore.occupancy[this.index]},on.occupancy.set=function(e){this.atomStore.occupancy[this.index]=e},on.altloc.get=function(){return this.atomStore.getAltloc(this.index)},on.altloc.set=function(e){this.atomStore.setAltloc(this.index,e)},on.partialCharge.get=function(){return this.atomStore.partialCharge?this.atomStore.partialCharge[this.index]:null},on.partialCharge.set=function(e){this.atomStore.partialCharge&&(this.atomStore.partialCharge[this.index]=e)},on.radius.get=function(){return this.atomStore.radius?this.atomStore.radius[this.index]:null},on.radius.set=function(e){this.atomStore.radius&&(this.atomStore.radius[this.index]=e)},on.formalCharge.get=function(){return this.atomStore.formalCharge?this.atomStore.formalCharge[this.index]:null},on.formalCharge.set=function(e){this.atomStore.formalCharge&&(this.atomStore.formalCharge[this.index]=e)},on.aromatic.get=function(){return this.atomStore.aromatic?this.atomStore.aromatic[this.index]:this.residueType.isAromatic(this)?1:0},on.aromatic.set=function(e){this.atomStore.aromatic&&(this.atomStore.aromatic[this.index]=e)},on.bondCount.get=function(){return this.bondHash.countArray[this.index]},Nt.prototype.eachBond=function(e,t){t=t||this.structure._bp;for(var n=this.index,r=this.bondHash,i=r.indexArray,o=r.countArray[n],a=r.offsetArray[n],s=0;s<o;++s)t.index=i[a+s],e(t)},Nt.prototype.eachBondedAtom=function(e,t){var n=t||this.structure._ap,r=this.index;this.eachBond(function(i){n.index=r!==i.atomIndex1?i.atomIndex1:i.atomIndex2,e(n)}),this.index=r},Nt.prototype.hasBondTo=function(e){var t=!1;return this.eachBondedAtom(function(n){e.index===n.index&&(t=!0)}),t},Nt.prototype.bondToElementCount=function(e){var t=0,n=this.index;return this.eachBondedAtom(function(r){r.number===e&&(t+=1)}),this.index=n,t},Nt.prototype.hasBondToElement=function(e){return this.bondToElementCount(e)>0},Nt.prototype.isBackbone=function(){var e=this.residueType.backboneIndexList;return e.length>0&&e.includes(this.index-this.residueAtomOffset)},Nt.prototype.isPolymer=function(){if(this.structure.entityList.length>0)return this.entity.isPolymer();var e=this.residueType.moleculeType;return e===3||e===4||e===5},Nt.prototype.isSidechain=function(){return this.isPolymer()&&!this.isBackbone()},Nt.prototype.isCg=function(){var e=this.residueType.backboneType;return e===4||e===5||e===6},Nt.prototype.isTrace=function(){return this.index===this.residueType.traceAtomIndex+this.residueAtomOffset},Nt.prototype.isHetero=function(){return this.residueType.hetero===1},Nt.prototype.isProtein=function(){return this.residueType.moleculeType===3},Nt.prototype.isNucleic=function(){var e=this.residueType.moleculeType;return e===4||e===5},Nt.prototype.isRna=function(){return this.residueType.moleculeType===4},Nt.prototype.isDna=function(){return this.residueType.moleculeType===5},Nt.prototype.isWater=function(){return this.residueType.moleculeType===1},Nt.prototype.isIon=function(){return this.residueType.moleculeType===2},Nt.prototype.isSaccharide=function(){return this.residueType.moleculeType===6},Nt.prototype.isHelix=function(){return Soe.includes(this.sstruc)},Nt.prototype.isSheet=function(){return Coe.includes(this.sstruc)},Nt.prototype.isTurn=function(){return Aoe.includes(this.sstruc)&&this.isProtein()},Nt.prototype.isBonded=function(){return this.bondHash.countArray[this.index]!==0},Nt.prototype.isRing=function(){return this.residueType.getRings().atomRings[this.index-this.residueAtomOffset]!==void 0},Nt.prototype.isAromatic=function(){return this.aromatic===1},Nt.prototype.isPolarHydrogen=function(){var e=!1;return this.number!==1?e:e=!this.hasBondToElement(6)},Nt.prototype.isMetal=function(){return this.atomType.isMetal()},Nt.prototype.isNonmetal=function(){return this.atomType.isNonmetal()},Nt.prototype.isMetalloid=function(){return this.atomType.isMetalloid()},Nt.prototype.isHalogen=function(){return this.atomType.isHalogen()},Nt.prototype.isDiatomicNonmetal=function(){return this.atomType.isDiatomicNonmetal()},Nt.prototype.isPolyatomicNonmetal=function(){return this.atomType.isPolyatomicNonmetal()},Nt.prototype.isAlkaliMetal=function(){return this.atomType.isAlkaliMetal()},Nt.prototype.isAlkalineEarthMetal=function(){return this.atomType.isAlkalineEarthMetal()},Nt.prototype.isNobleGas=function(){return this.atomType.isNobleGas()},Nt.prototype.isTransitionMetal=function(){return this.atomType.isTransitionMetal()},Nt.prototype.isPostTransitionMetal=function(){return this.atomType.isPostTransitionMetal()},Nt.prototype.isLanthanide=function(){return this.atomType.isLanthanide()},Nt.prototype.isActinide=function(){return this.atomType.isActinide()},Nt.prototype.getDefaultValence=function(){return this.atomType.getDefaultValence()},Nt.prototype.getValenceList=function(){return this.atomType.getValenceList()},Nt.prototype.getOuterShellElectronCount=function(){return this.atomType.getOuterShellElectronCount()},Nt.prototype.distanceTo=function(e){var t=this.atomStore,n=e.atomStore,r=this.index,i=e.index,o=t.x[r]-n.x[i],a=t.y[r]-n.y[i],s=t.z[r]-n.z[i],l=o*o+a*a+s*s;return Math.sqrt(l)},Nt.prototype.connectedTo=function(e){var t=this.atomStore,n=e.atomStore,r=this.index,i=e.index;if(t.altloc&&n.altloc){var o=t.altloc[r],a=n.altloc[i];if(o!==0&&a!==0&&o!==32&&a!==32&&o!==a)return!1}var s=t.x[r]-n.x[i],l=t.y[r]-n.y[i],c=t.z[r]-n.z[i],u=s*s+l*l+c*c;if(u<48&&this.isCg())return!0;if(isNaN(u))return!1;var f=this.covalent+e.covalent,d=f+.3,p=f-.5;return u<d*d&&u>p*p},Nt.prototype.positionFromArray=function(e,t){return t===void 0&&(t=0),this.x=e[t+0],this.y=e[t+1],this.z=e[t+2],this},Nt.prototype.positionToArray=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);var n=this.index,r=this.atomStore;return e[t+0]=r.x[n],e[t+1]=r.y[n],e[t+2]=r.z[n],e},Nt.prototype.positionToVector3=function(e){return e===void 0&&(e=new V),e.x=this.x,e.y=this.y,e.z=this.z,e},Nt.prototype.positionFromVector3=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},Nt.prototype.positionAdd=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this},Nt.prototype.positionSub=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},Nt.prototype.getResidueBonds=function(e){e===void 0&&(e=!1);var t,n,r,i,o=this.residueAtomOffset,a=this.index-this.residueAtomOffset,s=this.residueType.getBonds(),l=s.atomIndices1,c=s.atomIndices2;for(e||(i=[]),t=l.indexOf(a);t!==-1;){if(r=c[t]+o,!i)return r;i.push(r),t=l.indexOf(a,t+1)}for(n=c.indexOf(a);n!==-1;){if(r=l[n]+o,!i)return r;i.push(r),n=c.indexOf(a,n+1)}return i},Nt.prototype.qualifiedName=function(e){e===void 0&&(e=!1);var t="";return this.resname&&!e&&(t+="["+this.resname+"]"),this.resno!==void 0&&(t+=this.resno),this.inscode&&(t+="^"+this.inscode),this.chainname&&(t+=":"+this.chainname),this.atomname&&(t+="."+this.atomname),this.altloc&&(t+="%"+this.altloc),this.structure.modelStore.count>1&&(t+="/"+this.modelIndex),t},Nt.prototype.clone=function(){return new Nt(this.structure,this.index)},Nt.prototype.toObject=function(){return{index:this.index,residueIndex:this.residueIndex,resname:this.resname,x:this.x,y:this.y,z:this.z,element:this.element,chainname:this.chainname,resno:this.resno,serial:this.serial,vdw:this.vdw,covalent:this.covalent,hetero:this.hetero,bfactor:this.bfactor,altloc:this.altloc,atomname:this.atomname,modelIndex:this.modelIndex}},Object.defineProperties(Nt.prototype,on);var MR=new Float32Array(3),Hoe=function(e,t){t===void 0&&(t=!1),Ze&&Ge.time("Kdtree build");var n=t?Voe:Wat,r=new Float32Array(3*e.atomCount),i=new Uint32Array(e.atomCount),o=0;e.eachAtom(function(a){r[o+0]=a.x,r[o+1]=a.y,r[o+2]=a.z,i[o/3]=a.index,o+=3}),this.atomIndices=i,this.points=r,this.kdtree=new Zy(r,n),Ze&&Ge.timeEnd("Kdtree build")};Hoe.prototype.nearest=function(e,t,n){e instanceof V?e.toArray(MR):e instanceof Nt&&e.positionToArray(MR);for(var r=this.kdtree.nearest(MR,t,n),i=this.kdtree.indices,o=this.kdtree.nodes,a=this.atomIndices,s=[],l=0,c=r.length;l<c;++l){var u=r[l],f=u[0],d=u[1];s.push({index:a[i[o[f]]],distance:d})}return s};var qat={" ":"X","!":"Y","#":"Z",$:"-X","%":"-Y","&":"-Z","'":"Y+1/2","(":"1/2+X",")":"1/2+Y","*":"1/2-X","+":"1/2+Z",",":"1/2-Y","-":"1/2-Z",".":"X+1/2","/":"Z+1/2",0:"-X+1/2",1:"-Y+1/2",2:"-Z+1/2",3:"1/4+X",4:"1/4-Y",5:"1/4+Z",6:"1/4-X",7:"1/4+Y",8:"3/4-Y",9:"3/4+Z",":":"3/4+Y",";":"3/4+X","<":"3/4-X","=":"1/4-Z",">":"3/4-Z","?":"X-Y","@":"Y-X",A:"Z+1/3",B:"Z+2/3",C:"X+2/3",D:"Y+1/3",E:"-Y+2/3",F:"X-Y+1/3",G:"Y-X+2/3",H:"-X+1/3",I:"X+1/3",J:"Y+2/3",K:"-Y+1/3",L:"X-Y+2/3",M:"Y-X+1/3",N:"-X+2/3",O:"2/3+X",P:"1/3+Y",Q:"1/3+Z",R:"2/3-Y",S:"1/3+X-Y",T:"2/3+Y-X",U:"1/3-X",V:"2/3-X",W:"1/3-Y",X:"1/3-Z",Y:"2/3+Y",Z:"1/3+Y-X","[":"2/3+X-Y","]":"1/3+X","^":"2/3+Z",_:"2/3-Z","`":"5/6+Z",a:"1/6+Z",b:"5/6-Z",c:"1/6-Z",d:"Z+5/6",e:"Z+1/6",f:"Z+1/4",g:"+Y"},Xat={"P 1":" !#","P -1":" !#$%&","P 1 2 1":" !#$!&","P 1 21 1":" !#$'&","C 1 2 1":" !#$!&()#*)&","P 1 m 1":" !# %#","P 1 c 1":" !# %+","C 1 m 1":" !# %#()#(,#","C 1 c 1":" !# %+()#(,+","P 1 2/m 1":" !# %#$!&$%&","P 1 21/m 1":" !#$)&$%& ,#","C 1 2/m 1":" !# %#$!&$%&()#(,#*)&*,&","P 1 2/c 1":" !#$!-$%& %+","P 1 21/c 1":" !#$%&$)- ,+","C 1 2/c 1":" !#$!-$%& %+()#*)-*,&(,+","P 2 2 2":" !#$%#$!& %&","P 2 2 21":" !#$%+$!- %&","P 21 21 2":" !#$%#*)&(,&","P 21 21 21":" !#*%+$)-(,&","C 2 2 21":" !#$%+$!- %&()#*,+*)-(,&","C 2 2 2":" !#$%#$!& %&()#*,#*)&(,&","F 2 2 2":" !#$%#$!& %& )+$,+$)- ,-(!+*%+*!-(%-()#*,#*)&(,&","I 2 2 2":" !#$%# %&$!&.'/01/.120'2","I 21 21 21":" !#*%+$)-(,&()+$,#*!& %-","P m m 2":" !#$%# %#$!#","P m c 21":" !#$%+ %+$!#","P c c 2":" !#$%# %+$!+","P m a 2":" !#$%#(%#*!#","P c a 21":" !#$%+(%#*!+","P n c 2":" !#$%# ,+$)+","P m n 21":" !#*%+(%+$!#","P b a 2":" !#$%#(,#*)#","P n a 21":" !#$%+(,#*)+","P n n 2":" !#$%#(,+*)+","C m m 2":" !#$%# %#$!#()#*,#(,#*)#","C m c 21":" !#$%+ %+$!#()#*,+(,+*)#","C c c 2":" !#$%# %+$!+()#*,#(,+*)+","A m m 2":" !#$%# %#$!# )+$,+ ,+$)+","A b m 2":" !#$%# ,#$)# )+$,+ %+$!+","A m a 2":" !#$%#(%#*!# )+$,+(,+*)+","A b a 2":" !#$%#(,#*)# )+$,+(%+*!+","F m m 2":" !#$%# %#$!# )+$,+ ,+$)+(!+*%+(%+*!+()#*,#(,#*)#","F d d 2":" !#$%#345675 )+$,+3896:9(!+*%+;49<79()#*,#;85<:5","I m m 2":" !#$%# %#$!#()+*,+(,+*)+","I b a 2":" !#$%#(,#*)#()+*,+ %+$!+","I m a 2":" !#$%#(%#*!#()+*,+ ,+$)+","P 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#","P 2/n 2/n 2/n":" !#$%#$!& %&*,-()-(,+*)+","P 2/c 2/c 2/m":" !#$%#$!- %-$%& !& %+$!+","P 2/b 2/a 2/n":" !#$%#$!& %&*,&()&(,#*)#","P 21/m 2/m 2/a":" !#*%#$!&(%&$%&(!& %#*!#","P 2/n 21/n 2/a":" !#*%#*)- ,-$%&(!&(,+$)+","P 2/m 2/n 21/a":" !#*%+*!- %&$%&(!-(%+$!#","P 21/c 2/c 2/a":" !#*%#$!-(%-$%&(!& %+*!+","P 21/b 21/a 2/m":" !#$%#*)&(,&$%& !&(,#*)#","P 21/c 21/c 2/n":" !#*,#$)-(%-$%&()& ,+*!+","P 2/b 21/c 21/m":" !#$%+$)- ,&$%& !- ,+$)#","P 21/n 21/n 2/m":" !#$%#*)-(,-$%& !&(,+*)+","P 21/m 21/m 2/n":" !#$%#*'&.,&*,&.'& %#$!#","P 21/b 2/c 21/n":" !#*,+$!-(,&$%&()- %+*)#","P 21/b 21/c 21/a":" !#*%+$)-(,&$%&(!- ,+*)#","P 21/n 21/m 21/a":" !#0%/$'&.12$%&.!2 1#0'/","C 2/m 2/c 21/m":" !#$%+$!- %&$%& !- %+$!#()#*,+*)-(,&*,&()-(,+*)#","C 2/m 2/c 21/a":" !#$,+$)- %&$%& )- ,+$!#()#*%+*!-(,&*,&(!-(%+*)#","C 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#()#*,#*)&(,&*,&()&(,#*)#","C 2/c 2/c 2/m":" !#$%#$!- %-$%& !& %+$!+()#*,#*)-(,-*,&()&(,+*)+","C 2/m 2/m 2/a":" !#$,#$)& %&$%& )& ,#$!#()#*%#*!&(,&*,&(!&(%#*)#","C 2/c 2/c 2/a":" !#*,#$!&(,&$,-(!- ,+*!+()#$%#*)& %&*%- )-(%+$)+","F 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!# )+$,+$)- ,-$,- )- ,+$)+(!+*%+*!-(%-*%-(!-(%+*!+()#*,#*)&(,&*,&()&(,#*)#","F 2/d 2/d 2/d":" !#$%#$!& %&64=37=345675 )+$,+$)- ,-68>3:>3896:9(!+*%+*!-(%-<4>;7>;49<79()#*,#*)&(,&<8=;:=;85<:5","I 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#()+*,+*)-(,-*,-()-(,+*)+","I 2/b 2/a 2/m":" !#$%#*)&(,&$%& !&(,#*)#()+*,+$!- %-*,-()- %+$!+","I 21/b 21/c 21/a":" !#*%+$)-(,&$%&(!- ,+*)#()+$,#*!& %-*,- )&(%#$!+","I 21/m 21/m 21/a":" !#$,#$)& %&$%& )& ,#$!#()+*%+*!-(,-*,-(!-(%+*)+","P 4":" !#$%#% #!$#","P 41":" !#$%+% 5!$9","P 42":" !#$%#% +!$+","P 43":" !#$%+% 9!$5","I 4":" !#$%#% #!$#()+*,+,(+)*+","I 41":" !#*,+%(5)$9()+$%#, 9!*5","P -4":" !#$%#!$&% &","I -4":" !#$%#!$&% &()+*,+)*-,(-","P 4/m":" !#$%#% #!$#$%& !&!$&% &","P 42/m":" !#$%#% +!$+$%& !&!$-% -","P 4/n":" !#$%#,(#)*#*,&()&!$&% &","P 42/n":" !#$%#,(+)*+*,-()-!$&% &","I 4/m":" !#$%#% #!$#$%& !&!$&% &()+*,+,(+)*+*,-()-)*-,(-","I 41/a":" !#*,+%(5)$9$,=(!>!$&,(-()+$%#, 9!*5*%> )=)*-% &","P 4 2 2":" !#$%#% #!$#$!& %&! &%$&","P 4 21 2":" !#$%#,(#)*#*)&(,&! &%$&","P 41 2 2":" !#$%+% 5!$9$!& %-! >%$=","P 41 21 2":" !#$%+,(5)*9*)=(,>! &%$-","P 42 2 2":" !#$%#% +!$+$!& %&! -%$-","P 42 21 2":" !#$%#,(+)*+*)-(,-! &%$&","P 43 2 2":" !#$%+% 9!$5$!& %-! =%$>","P 43 21 2":" !#$%+,(9)*5*)>(,=! &%$-","I 4 2 2":" !#$%#% #!$#$!& %&! &%$&()+*,+,(+)*+*)-(,-)(-,*-","I 41 2 2":" !#*,+%(5)$9*!> ,=)(-%$&()+$%#, 9!*5$)=(%>! &,*-","P 4 m m":" !#$%#% #!$# %#$!#%$#! #","P 4 b m":" !#$%#% #!$#(,#*)#,*#)(#","P 42 c m":" !#$%#% +!$+ %+$!+%$#! #","P 42 n m":" !#$%#,(+)*+(,+*)+%$#! #","P 4 c c":" !#$%#% #!$# %+$!+%$+! +","P 4 n c":" !#$%#% #!$#(,+*)+,*+)(+","P 42 m c":" !#$%#% +!$+ %#$!#%$+! +","P 42 b c":" !#$%#% +!$+(,#*)#,*+)(+","I 4 m m":" !#$%#% #!$# %#$!#%$#! #()+*,+,(+)*+(,+*)+,*+)(+","I 4 c m":" !#$%#% #!$# %+$!+%$+! +()+*,+,(+)*+(,#*)#,*#)(#","I 41 m d":" !#*,+%(5)$9 %#*)+%*5) 9()+$%#, 9!*5(,+$!#,$9!(5","I 41 c d":" !#*,+%(5)$9 %+*)#%*9) 5()+$%#, 9!*5(,#$!+,$5!(9","P -4 2 m":" !#$%#% &!$&$!& %&%$#! #","P -4 2 c":" !#$%#% &!$&$!- %-%$+! +","P -4 21 m":" !#$%#% &!$&*)&(,&,*#)(#","P -4 21 c":" !#$%#% &!$&*)-(,-,*+)(+","P -4 m 2":" !#$%#!$&% & %#$!#! &%$&","P -4 c 2":" !#$%#% &!$& %+$!+! -%$-","P -4 b 2":" !#$%#% &!$&(,#*)#)(&,*&","P -4 n 2":" !#$%#% &!$&(,+*)+)(-,*-","I -4 m 2":" !#$%#% &!$& %#$!#! &%$&()+*,+,(-)*-(,+*)+)(-,*-","I -4 c 2":" !#$%#% &!$& %+$!+! -%$-()+*,+,(-)*-(,#*)#)(&,*&","I -4 2 m":" !#$%#% &!$&$!& %&%$#! #()+*,+,(-)*-*)-(,-,*+)(+","I -4 2 d":" !#$%#% &!$&*!>(%>,$9) 9()+*,+,(-)*-$)= ,=%*5!(5","P 4/m 2/m 2/m":" !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #","P 4/m 2/c 2/c":" !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +","P 4/n 2/b 2/m":" !#$%#% #!$#$!& %&! &%$&*,&()&)*&,(&(,#*)#,*#)(#","P 4/n 2/n 2/c":" !#$%#% #!$#$!& %&! &%$&*,-()-)*-,(-(,+*)+,*+)(+","P 4/m 21/b 2/m":" !#$%#% #!$#*)&(,&)(&,*&$%& !&!$&% &(,#*)#,*#)(#","P 4/m 21/n 2/c":" !#$%#% #!$#*)-(,-)(-,*-$%& !&!$&% &(,+*)+,*+)(+","P 4/n 21/m 2/m":" !#$%#,(#)*#*)&(,&! &%$&*,&()&!$&% & %#$!#,*#)(#","P 4/n 2/c 2/c":" !#$%#,(#)*#*)-(,-! -%$-*,&()&!$&% & %+$!+,*+)(+","P 42/m 2/m 2/c":" !#$%#% +!$+$!& %&! -%$-$%& !&!$-% - %#$!#%$+! +","P 42/m 2/c 2/m":" !#$%#% +!$+$!- %-! &%$&$%& !&!$-% - %+$!+%$#! #","P 42/n 2/b 2/c":" !#$%#,(+)*+$!- %-)(&,*&*,-()-!$&% &(,#*)#%$+! +","P 42/n 2/n 2/m":" !#$%#,(+)*+$!& %&)(-,*-*,-()-!$&% &(,+*)+%$#! #","P 42/m 21/b 2/c":" !#$%#% +!$+*)&(,&)(-,*-$%& !&!$-% -(,#*)#,*+)(+","P 42/m 21/n 2/m":" !#$%#,./'*/*'-.,-! &%$&$%& !&'*-,.-.,/*'/%$#! #","P 42/n 21/m 2/c":" !#$%#,(+)*+*)-(,-! &%$&*,-()-!$&% & %#$!#,*+)(+","P 42/n 21/c 2/m":" !#$%#,(+)*+*)&(,&! -%$-*,-()-!$&% & %+$!+,*#)(#","I 4/m 2/m 2/m":" !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #()+*,+,(+)*+*)-(,-)(-,*-*,-()-)*-,(-(,+*)+,*+)(+","I 4/m 2/c 2/m":" !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +()+*,+,(+)*+*)&(,&)(&,*&*,-()-)*-,(-(,#*)#,*#)(#","I 41/a 2/m 2/d":" !#*,+%(5)$9*!> ,=)(-%$&$,=(!>!$&,(-(,+$!#,$9!(5()+$%#, 9!*5$)=(%>! &,*-*%> )=)*-% & %#*)+%*5) 9","I 41/a 2/c 2/d":" !#*,+%(5)$9*!= ,>)(&%$-$,=(!>!$&,(-(,#$!+,$5!(9()+$%#, 9!*5$)>(%=! -,*&*%> )=)*-% & %+*)#%*9) 5","P 3":" !#%?#@$#","P 31":" !#%?A@$B","P 32":" !#%?B@$A","H 3":" !#%?#@$#CDAEFAGHAIJBKLBMNB","R 3":" !## !!# ","P -3":" !#%?#@$#$%&!@&? &","H -3":" !#%?#@$#$%&!@&? &OPQRSQTUQVWXYZX[]X]Y^W[^ZV^UR_PT_SO_","R -3":" !## !!# $%&&$%%&$","P 3 1 2":" !#%?#@$#%$&@!& ?&","P 3 2 1":" !#%?#@$#! &?%&$@&","P 31 1 2":" !#%?Q@$^%$_@!X ?&","P 31 2 1":" !#%?A@$B! &?%_$@X","P 32 1 2":" !#%?^@$Q%$X@!_ ?&","P 32 2 1":" !#%?B@$A! &?%X$@_","H 3 2":" !#%?#@$#! &?%&$@&OPQRSQTUQY]X[WXVZX]Y^W[^ZV^PO_SR_UT_","R 3 2":" !## !!# %$&$&%&%$","P 3 m 1":" !#%?#@$#%$#@!# ?#","P 3 1 m":" !#%?#@$#! #?%#$@#","P 3 c 1":" !#%?#@$#%$+@!+ ?+","P 3 1 c":" !#%?#@$#! +?%+$@+","H 3 m":" !#%?#@$#%$#@!# ?#OPQRSQTUQRUQTPQOSQ]Y^W[^ZV^WV^ZY^][^","R 3 m":" !## !!# ! # #!#! ","H 3 c":" !#%?#@$#%$+@!+ ?+OPQRSQTUQRU`TP`OS`]Y^W[^ZV^WVaZYa][a","R 3 c":" !## !!# '././'/'.","P -3 1 2/m":" !#%?#@$#%$&@!& ?&$%&!@&? &! #?%#$@#","P -3 1 2/c":" !#%?#@$#%$-@!- ?-$%&!@&? &! +?%+$@+","P -3 2/m 1":" !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#","P -3 2/c 1":" !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+","H -3 2/m":" !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#OPQRSQTUQY]X[WXVZXVWXYZX[]XRUQTPQOSQ]Y^W[^ZV^PO_SR_UT_UR_PT_SO_WV^ZY^][^","R -3 2/m":" !## !!# %$&$&%&%$$%&&$%%&$! # #!#! ","H -3 2/c":" !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+OPQRSQTUQY]b[WbVZbVWXYZX[]XRU`TP`OS`]Y^W[^ZV^POcSRcUTcUR_PT_SO_WVaZYa][a","R -3 2/c":" !## !!# 102021210$%&&$%%&$'././'/'.","P 6":" !#%?#@$#$%#!@#? #","P 61":" !#%?A@$B$%/!@d? e","P 65":" !#%?B@$A$%/!@e? d","P 62":" !#%?^@$Q$%#!@^? Q","P 64":" !#%?Q@$^$%#!@Q? ^","P 63":" !#%?#@$#$%+!@+? +","P -6":" !#%?#@$# !&%?&@$&","P 6/m":" !#%?#@$#$%#!@#? #$%&!@&? & !&%?&@$&","P 63/m":" !#%?#@$#$%+!@+? +$%&!@&? & !-%?-@$-","P 6 2 2":" !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&","P 61 2 2":" !#%?Q@$^$%+!@`? a! X?%&$@_%$b@!- ?c","P 65 2 2":" !#%?^@$Q$%+!@a? `! _?%&$@X%$c@!- ?b","P 62 2 2":" !#%?^@$Q$%#!@^? Q! _?%&$@X%$_@!& ?X","P 64 2 2":" !#%?Q@$^$%#!@Q? ^! X?%&$@_%$X@!& ?_","P 63 2 2":" !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-","P 6 m m":" !#%?#@$#$%#!@#? #%$#@!# ?#! #?%#$@#","P 6 c c":" !#%?#@$#$%#!@#? #%$+@!+ ?+! +?%+$@+","P 63 c m":" !#%?#@$#$%+!@+? +%$+@!+ ?+! #?%#$@#","P 63 m c":" !#%?#@$#$%+!@+? +%$#@!# ?#! +?%+$@+","P -6 m 2":" !#%?#@$# !&%?&@$&%$#@!# ?#%$&@!& ?&","P -6 c 2":" !#%?#@$# !-%?-@$-%$+@!+ ?+%$&@!& ?&","P -6 2 m":" !#%?#@$# !&%?&@$&! &?%&$@&! #?%#$@#","P -6 2 c":" !#%?#@$# !-%?-@$-! &?%&$@&! +?%+$@+","P 6/m 2/m 2/m":" !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&$%&!@&? & !&@$&%?&%$#@!# ?#! #?%#$@#","P 6/m 2/c 2/c":" !#%?#@$#$%#!@#? #! -?%-$@-%$-@!- ?-$%&!@&? & !&@$&%?&%$+@!+ ?+! +?%+$@+","P 63/m 2/c 2/m":" !#%?#@$#$%+!@+? +! -?%-$@-%$&@!& ?&$%&!@&? & !-@$-%?-%$+@!+ ?+! #?%#$@#","P 63/m 2/m 2/c":" !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-$%&!@&? & !-@$-%?-%$#@!# ?#! +?%+$@+","P 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ","F 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%&  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ","I 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(","P 21 3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(","I 21 3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- ","P 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$","P 2/n -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& *,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*","F 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-($,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- *,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$","F 2/d -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& 64=37=345675=64=375345674=67=3453756 )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(68>3:>3896:9=<8=;:5;85<:4><7>;49;79<(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(<4>;7>;49<79>68>3:93896:8=<:=;85;:5<()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- <8=;:=;8f<:f><4>;79;49<78>6:>3893:96","I 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*","P 21/a -3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*","I 21/a -3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*()+$,#*g& %-+()#$,&*!- %)+(,#$!&*%- *,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$","P 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$","P 42 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*","F 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$","F 41 3 2":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46 )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<(!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86","I 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*","P 43 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7;>46=:<5839398<5:6=4;>75:<983>7;=46","P 41 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<","I 41 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46","P -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ","F -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&%  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(+%*+!*-%(- +)$+,$-) -,#)(#,*&)*&,((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() +,$+)$-, -(#)*#,*&)(&,+!(+%*-!*-%(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(#,*#)*&,(&(+!*+%*-!(-%+) +,$-)$-, ","I -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(","P -4 3 n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(","F -4 3 c":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() #,$#)$&, &(#!*#%*&!(&%+! +%$-!$-% (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(#%*#!*&%(& +!$+%$-! -%#) #,$&)$&, ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! +%$+!$-% - #)$#,$&) &,#!(#%*&!*&%(","I -4 3 d":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7354<9:6>8;=357<946>:;=857394<>:6=8;()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- :;98657<=43>;9:658<=73>49:;586=7<>43","P 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ","P 4/n -3 2/n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","P 42/m -3 2/n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","P 42/n -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ","F 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#!  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*%*+!(+%(-!*-$-) -, +)$+,&,(&)*#,*#)((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%**%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*,$+) +, -)$-*&)(&,(#)*#,-%(-!*+%*+!(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$*,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$,*#)(#,(&)*&*-!(-%(+!*+%-, -)$+,$+) ","F 4/m -3 2/c":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() &,$&)$#, #(#%*#!*&%(&!+!$+% -! -%$$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*,$#) #, &)$&*&!(&%(#!*#%-% -!$+%$+! (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(&%*&!*#%(# +%$+!$-% -!#)$#, &) &,$*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*%*#!(#%(&!*&$-! -% +!$+%&, &)$#,$#) ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! -%$-!$+% + #,$#)$&, &)#!*#%(&!(&%**,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$%$+! +% -!$-$&) &, #)$#,&%(&!*#%*#!(","F 41/d -3 2/m":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=4664=3:>;85<79=64>3:5;89<74=6:>385;79<,$+! #%(-)*&*&)(-% #!$+,-%(&)*+,$#!  )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<68>37=;49<:5=<8>;753496:4><:=;893756,*#!(+% &)$-*-!(&, +)$#%-, &!$+%*#)((!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<<4>;:=389675>68=379;45<:8=<7>;453:96%$#) +,(&!*-$&! -,(#)*+%&% -)$#,*+!(()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86<8=;7>3456:9><4=;:9385678>67=349;:5<%*+)(#, -!$&$-) &%(+!*#,&,(-!*#%$+) ","F 41/d -3 2/c":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46<8>;7=3496:5><8=;793456:8><7=;493:56%*#)(+, &!$-$-! &,(+)*#%&, -!$#%*+)( )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<<4=;:>385679>64=3:9;85<78=67>345;:9<%$+) #,(-!*&$&) -%(#!*+,&%(-)*#,$+! (!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<68=37>;45<:9=<4>;:5389674>6:=389;75<,*+!(#% -)$&*-)(&% +!$#,-,(&!*+%$#) ()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>8664>3:=;89<75=68>375;49<:4=<:>;853796,$#! +%(&)*-*&!(-, #)$+%-% &)$+,*#!(","I 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","I 41/a -3 2/d":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<$%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*4<97358;=:6>6>:;=8357<94=8;>:694<573()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46*,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$865:;943>7<=<=73>4;9:658>43=7<5869:;","P 1 1 2":" !#$%#","P 1 1 21":" !#$%+","B 1 1 2":" !#$%#(g+*%+","A 1 2 1":" !#$!& )+$)-","C 1 21 1":" !#$)&()#*!&","I 1 2 1":" !#$!&.'/0'2","I 1 21 1":" !#$)&.'/0!-","P 1 1 m":" !# !&","P 1 1 b":" !# )&","B 1 1 m":" !# !&(!+(!-","B 1 1 b":" !# )&(!+()-","P 1 1 2/m":" !# !&$%#$%&","P 1 1 21/m":" !#$%+$%& !-","B 1 1 2/m":" !# !&$%#$%&(!+(!-*%+*%-","P 1 1 2/b":" !#$,#$%& )&","P 1 1 21/b":" !#$%&$,+ )-","B 1 1 2/b":" !#$,#$%& )&(!+*,+*%-()-","P 21 2 2":" !#$!&(%&*%#","P 2 21 2":" !# ,&$)&$%#","P 21 21 2 (a)":" !#*,#.%&$'&","P 21 2 21":" !#$!&(%-*%+","P 2 21 21":" !# %&$)-$,+","C 2 2 21a)":" !#*%+(,&$)-()#$,+ %&*!-","C 2 2 2a":" !#*,#.%&$'&()#$%# ,&*!&","F 2 2 2a":" !#*,#.%&$'& '/*%/.12$!2.!/$,/ %20'2.'#$%# 1&0!&","I 2 2 2a":" !#*,#.%&$'&()+$%+*!- ,-","P 21/m 21/m 2/n a":" !#*,#$)&(%&$%&.'& ,#*!#","P 42 21 2a":" !#*,#%.+'$+$'&.%&! -,*-","I 2 3a":" !#*,#.%&$'&!# ,- '&$%/$# !-*!/$%&.%()+$%+ ,-*!-)+(%&(!-*,#*+()&$)#*,- ,"},Yat=/^[1-9]$/;function Goe(e){var t="";return e.length>0&&(t=":"+IN(e).join(" OR :")),new Hn(t)}var Qi=function(e){e===void 0&&(e=""),this.name=e,this.partList=[]},nH={type:{configurable:!0}};nH.type.get=function(){return"Assembly"},Qi.prototype.addPart=function(e,t){var n=new ou(e,t);return this.partList.push(n),n},Qi.prototype.getAtomCount=function(e){return this.partList.reduce(function(t,n){return t+n.getAtomCount(e)},0)},Qi.prototype.getResidueCount=function(e){return this.partList.reduce(function(t,n){return t+n.getResidueCount(e)},0)},Qi.prototype.getInstanceCount=function(){var e=0;return this.partList.forEach(function(t){e+=t.matrixList.length}),e},Qi.prototype.isIdentity=function(e){if(this.partList.length!==1)return!1;var t=this.partList[0];if(t.matrixList.length!==1||!new lt().equals(t.matrixList[0]))return!1;var n=[];return e.eachChain(function(r){n.push(r.chainname)}),n=IN(n),t.chainList.length===n.length},Qi.prototype.getBoundingBox=function(e){var t=new cr;return this.partList.forEach(function(n){var r=n.getBoundingBox(e);t.expandByPoint(r.min),t.expandByPoint(r.max)}),t},Qi.prototype.getCenter=function(e){return this.getBoundingBox(e).getCenter(new V)},Qi.prototype.getSelection=function(){var e=[];return this.partList.forEach(function(t){e=e.concat(t.chainList)}),Goe(e)},Object.defineProperties(Qi.prototype,nH);var ou=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.matrixList=e,this.chainList=t},rH={type:{configurable:!0}};rH.type.get=function(){return"AssemblyPart"},ou.prototype._getCount=function(e,t){var n=this,r=0;return e.eachChain(function(i){(n.chainList.length===0||n.chainList.includes(i.chainname))&&(r+=i[t])}),this.matrixList.length*r},ou.prototype.getAtomCount=function(e){return this._getCount(e,"atomCount")},ou.prototype.getResidueCount=function(e){return this._getCount(e,"residueCount")},ou.prototype.getBoundingBox=function(e){var t=new cr,n=new cr,r=this.getSelection(),i=e.getBoundingBox(r);return this.matrixList.forEach(function(o){n.copy(i).applyMatrix4(o),t.expandByPoint(n.min),t.expandByPoint(n.max)}),t},ou.prototype.getSelection=function(){return Goe(this.chainList)},ou.prototype.getView=function(e){var t=this.getSelection();return t?e.getView(t):e},ou.prototype.getInstanceList=function(){for(var e=[],t=0,n=this.matrixList.length;t<n;++t)e.push({id:t+1,name:t,matrix:this.matrixList[t]});return e},Object.defineProperties(ou.prototype,rH);var WS=function(e){this.structure=e,this.currentModelindex=null,this.currentChainid=null,this.currentResname=null,this.currentResno=null,this.currentInscode=void 0,this.currentHetero=null,this.previousResname="",this.previousHetero=null,this.ai=-1,this.ri=-1,this.ci=-1,this.mi=-1};function Woe(e,t){if(t){Ze&&Ge.time("assignSecondaryStructure");var n=[];e.eachModel(function(c){c.eachChain(function(u){n.push(u.chainname)})});var r=n.slice().sort(),i=[];r.forEach(function(c){i.push(n.indexOf(c))});var o=t.helices.filter(function(c){return fp(r,c[0])>=0});o.sort(function(c,u){var f=c[0],d=u[0],p=c[1],h=u[1];if(f===d)return p===h?0:p<h?-1:1;var g=fp(r,f),v=fp(r,d);return i[g]<i[v]?-1:1});var a=e.residueStore;e.eachModel(function(c){var u=0,f=o.length;if(f!==0){var d=o[u],p=!1,h=!1;c.eachChain(function(g){var v=!1;if(g.chainname===d[0]){for(var m=g.residueCount,y=g.residueOffset,_=y+m,b=y;b<_;++b)if(a.resno[b]===d[1]&&a.getInscode(b)===d[2]&&(p=!0),p&&(a.sstruc[b]=d[6],a.resno[b]===d[4]&&a.getInscode(b)===d[5]&&(p=!1,(u+=1)<f?(b=y-1,d=o[u],v=g.chainname!==d[0]):h=!0)),v||h)return}})}});var s=t.sheets.filter(function(c){return fp(r,c[0])>=0});s.sort(function(c,u){var f=c[0],d=u[0];if(f===d)return 0;var p=fp(r,f),h=fp(r,d);return i[p]<i[h]?-1:1});var l="e".charCodeAt(0);e.eachModel(function(c){var u=0,f=s.length;if(f!==0){var d=s[u],p=!1,h=!1;c.eachChain(function(g){var v=!1;if(g.chainname===d[0]){for(var m=g.residueCount,y=g.residueOffset,_=y+m,b=y;b<_;++b)if(a.resno[b]===d[1]&&a.getInscode(b)===d[2]&&(p=!0),p&&(a.sstruc[b]=l,a.resno[b]===d[4]&&a.getInscode(b)===d[5]&&(p=!1,(u+=1)<f?(b=y-1,d=s[u],v=g.chainname!==d[0]):h=!0)),v||h)return}})}}),Ze&&Ge.timeEnd("assignSecondaryStructure")}}WS.prototype.addResidueType=function(e){for(var t=this.structure.atomStore,n=this.structure.residueStore,r=this.structure.residueMap,i=n.atomCount[e],o=n.atomOffset[e],a=new Array(i),s=0;s<i;++s)a[s]=t.atomTypeId[o+s];n.residueTypeId[e]=r.add(this.previousResname,a,this.previousHetero)},WS.prototype.addAtom=function(e,t,n,r,i,o,a,s){var l=this.structure.atomStore,c=this.structure.residueStore,u=this.structure.chainStore,f=this.structure.modelStore,d=!1,p=!1,h=!1;this.currentModelindex!==e?(d=!0,p=!0,h=!0,this.mi+=1,this.ci+=1,this.ri+=1):this.currentChainid!==n?(p=!0,h=!0,this.ci+=1,this.ri+=1):this.currentResno===i&&this.currentResname===r&&this.currentInscode===s||(h=!0,this.ri+=1),this.ai+=1,d&&(f.growIfFull(),f.chainOffset[this.mi]=this.ci,f.chainCount[this.mi]=0,f.count+=1,u.modelIndex[this.ci]=this.mi),p&&(u.growIfFull(),u.setChainname(this.ci,t),u.setChainid(this.ci,n),u.residueOffset[this.ci]=this.ri,u.residueCount[this.ci]=0,u.count+=1,u.modelIndex[this.ci]=this.mi,f.chainCount[this.mi]+=1,c.chainIndex[this.ri]=this.ci),h&&(this.previousResname=this.currentResname,this.previousHetero=this.currentHetero,this.ri>0&&this.addResidueType(this.ri-1),c.growIfFull(),c.resno[this.ri]=i,a!==void 0&&(c.sstruc[this.ri]=a.charCodeAt(0)),s!==void 0&&(c.inscode[this.ri]=s.charCodeAt(0)),c.atomOffset[this.ri]=this.ai,c.atomCount[this.ri]=0,c.count+=1,c.chainIndex[this.ri]=this.ci,u.residueCount[this.ci]+=1),l.count+=1,l.residueIndex[this.ai]=this.ri,c.atomCount[this.ri]+=1,this.currentModelindex=e,this.currentChainid=n,this.currentResname=r,this.currentResno=i,this.currentInscode=s,this.currentHetero=o},WS.prototype.finalize=function(){this.previousResname=this.currentResname,this.previousHetero=this.currentHetero,this.ri>-1&&this.addResidueType(this.ri)};var ER,iH,oH,pT=(ER=function(e,t,n,r){for(var i=e.structure,o=e.residueIndexStart,a=i.getResidueProxy(),s=i.getResidueProxy(),l=i.getAtomProxy(),c=i.getAtomProxy(),u=Math.max(0,t-2);u<=t;++u)for(var f=2;f<5;++f)if(!(u+f>=e.residueCount)){a.index=o+u,s.index=o+u+f,l.index=a.traceAtomIndex,c.index=s.traceAtomIndex;var d=l.distanceTo(c);if(Math.abs(d-n[f-2])>r)return!1}return!0},iH=function(e,t){return ER(e,t,[5.45,5.18,6.37],2.1)},oH=function(e,t){return ER(e,t,[6.1,10.4,13],1.42)},function(e){Ze&&Ge.time("calculateSecondaryStructure"),e.eachPolymer(function(t){if(!(t.residueCount<4)){if(t.isCg())(function(i){for(var o=i.residueStore,a=i.residueIndexStart,s=new jN(i).position,l=new V,c=new V,u=0,f=i.residueCount;u<f;++u){l.fromArray(s.center,3*u),c.fromArray(s.center,3*u+3);var d=l.distanceTo(c);d<2&&d>1&&s.bending[u]<20&&(o.sstruc[a+u]="h".charCodeAt(0),o.sstruc[a+u+1]="h".charCodeAt(0))}})(t);else{if(!t.isProtein())return;(function(i){for(var o=i.residueStore,a=i.residueIndexStart,s=0,l=i.residueCount;s<l;++s){var c="c";iH(i,s)?c="h":oH(i,s)&&(c="e"),o.sstruc[a+s]=c.charCodeAt(0)}})(t)}var n,r=0;t.eachResidue(function(i){i.sstruc===n?r+=1:(r===1&&(i.index-=1,i.sstruc="c"),r=1,n=i.sstruc)})}}),Ze&&Ge.timeEnd("calculateSecondaryStructure")});function a_(e){for(var t=26,n=e,r=0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[n%t];n>=t;)i+="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[(n=Math.floor(n/t))%t],r+=1;return r>=5&&Ge.warn("chainname overflow"),i}function hT(e,t){t===void 0&&(t=!1),Ze&&Ge.time("calculateChainnames");var n=!0;if(e.eachChain(function(h){h.chainname&&(n=!1)}),n){var r=e.modelStore,i=e.chainStore,o=e.residueStore,a=e.getAtomProxy(),s=e.getAtomProxy(),l=0,c=0,u=0,f=0,d=[];o.count===1?d.push({mIndex:0,chainname:"A",rStart:0,rCount:1}):e.eachResidueN(2,function(h,g){var v=!1,m=h.backboneType,y=g.backboneType;f=h.index,h.modelIndex!==g.modelIndex||h.moleculeType!==g.moleculeType?v=!0:m!==0&&m===y&&(a.index=h.backboneEndAtomIndex,s.index=g.backboneStartAtomIndex,v=t?!a.hasBondTo(s):!a.connectedTo(s)),v||g.index!==o.count-1||(v=!0,f=g.index),v&&(d.push({mIndex:c,chainname:a_(l),rStart:u,rCount:f-u+1}),l+=1,h.modelIndex!==g.modelIndex&&(l=0,c+=1),g.index===o.count-1&&f!==g.index&&d.push({mIndex:c,chainname:a_(l),rStart:o.count-1,rCount:1}),u=g.index,f=g.index)}),i.count=0,r.chainCount.fill(0,0,r.count),r.chainOffset.fill(0,0,r.count),d.forEach(function(h){(function(g,v,m,y){for(var _=i.count,b=0;b<y;++b)o.chainIndex[m+b]=_;i.growIfFull(),i.modelIndex[_]=g,i.setChainname(_,v),i.setChainid(_,v),i.residueOffset[_]=m,i.residueCount[_]=y,i.count+=1,r.chainCount[g]+=1})(h.mIndex,h.chainname,h.rStart,h.rCount)});var p=0;e.eachModel(function(h){r.chainOffset[h.index]=p,p+=r.chainCount[h.index]})}Ze&&Ge.timeEnd("calculateChainnames")}function JA(e){Ze&&Ge.time("calculateBonds"),O0(e),I0(e),Ze&&Ge.timeEnd("calculateBonds")}var Kat={"HIS|CD2|CG":2,"HIS|CE1|ND1":2,"ARG|CZ|NH2":2,"PHE|CE1|CZ":2,"PHE|CD2|CE2":2,"PHE|CD1|CG":2,"TRP|CD1|CG":2,"TRP|CD2|CE2":2,"TRP|CE3|CZ3":2,"TRP|CH2|CZ2":2,"ASN|CG|OD1":2,"GLN|CD|OE1":2,"TYR|CD1|CG":2,"TYR|CD2|CE2":2,"TYR|CE1|CZ":2,"ASP|CG|OD1":2,"GLU|CD|OE1":2,"G|C8|N7":2,"G|C4|C5":2,"G|C2|N3":2,"G|C6|O6":2,"C|C4|N3":2,"C|C5|C6":2,"C|C2|O2":2,"A|C2|N3":2,"A|C6|N1":2,"A|C4|C5":2,"A|C8|N7":2,"U|C5|C6":2,"U|C2|O2":2,"U|C4|O4":2,"DG|C8|N7":2,"DG|C4|C5":2,"DG|C2|N3":2,"DG|C6|O6":2,"DC|C4|N3":2,"DC|C5|C6":2,"DC|C2|O2":2,"DA|C2|N3":2,"DA|C6|N1":2,"DA|C4|C5":2,"DA|C8|N7":2,"DT|C5|C6":2,"DT|C2|O2":2,"DT|C4|O4":2};function aH(e,t,n){var r;return t=(r=t<n?[t,n]:[n,t])[0],n=r[1],Lg.includes(e)&&t==="C"&&n==="O"||Pb.includes(e)&&t==="OP1"&&n==="P"?2:Kat[e+"|"+t+"|"+n]||1}function O0(e,t){t===void 0&&(t=!1),Ze&&Ge.time("calculateBondsWithin");var n=e.bondStore,r=e.rungBondStore,i=e.getAtomSet(!1),o=e.getAtomProxy(),a=e.getAtomProxy(),s=e.getBondProxy(),l=t?null:function(c){Ze&&Ge.time("calculateAtomBondMap");var u=[];return c.eachBond(function(f){var d=f.atomIndex1,p=f.atomIndex2;u[d]===void 0&&(u[d]=[]),u[d][p]=f.index}),Ze&&Ge.timeEnd("calculateAtomBondMap"),u}(e);e.eachResidue(function(c){if(!t&&l){var u=c.atomCount,f=c.atomOffset;if(u>500)return void Ge.warn("more than 500 atoms, skip residue for auto-bonding",c.qualifiedName());for(var d=c.getBonds(),p=d.atomIndices1,h=d.atomIndices2,g=d.bondOrders,v=p.length,m=0;m<v;++m){var y=p[m],_=h[m],b=y+f,x=_+f,w=l[b];w!==void 0&&w[x]!==void 0?(s.index=w[x],g[c.residueType.getBondIndex(y,_)]=s.bondOrder):(o.index=b,a.index=x,n.addBond(o,a,g[m]))}}var S=c.residueType.traceAtomIndex,A=c.residueType.rungEndAtomIndex;S!==-1&&A!==-1&&(o.index=c.traceAtomIndex,a.index=c.rungEndAtomIndex,r.addBond(o,a),i.set(o.index),i.set(a.index))}),e.atomSetDict.rung=i,Ze&&Ge.timeEnd("calculateBondsWithin")}function I0(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1),Ze&&Ge.time("calculateBondsBetween");var r=e.bondStore,i=e.backboneBondStore,o=e.getAtomSet(!1),a=e.getAtomProxy(),s=e.getAtomProxy();function l(d,p){var h=d.backboneType,g=p.backboneType;h!==0&&h===g&&(a.index=d.backboneEndAtomIndex,s.index=p.backboneStartAtomIndex,(n&&a.hasBondTo(s)||a.connectedTo(s))&&(t||r.addBond(a,s,1),a.index=d.traceAtomIndex,s.index=p.traceAtomIndex,i.addBond(a,s),o.set(a.index),o.set(s.index)))}i.count===0&&i.resize(e.residueStore.count),e.eachResidueN(2,l);var c=e.getResidueProxy(),u=e.getResidueProxy();if(e.eachChain(function(d){d.residueCount!==0&&(c.index=d.residueOffset,u.index=d.residueOffset+d.residueCount-1,l(u,c))}),e.atomSetDict.backbone=o,!t){Ze&&Ge.time("calculateBondsBetween inter");var f=e.spatialHash;e.eachResidue(function(d){d.backboneType!==0||d.isWater()||d.eachAtom(function(p){p.isMetal()||f.eachWithin(p.x,p.y,p.z,4,function(h){s.index=h,p.modelIndex!==s.modelIndex||p.residueIndex===s.residueIndex||s.isMetal()||r.addBondIfConnected(p,s,1)})})}),Ze&&Ge.timeEnd("calculateBondsBetween inter")}Ze&&Ge.timeEnd("calculateBondsBetween")}function QA(e){if(e.unitcell){Ze&&Ge.time("buildUnitcellAssembly");var t=e.unitcell,n=e.center.clone().applyMatrix4(t.cartToFrac),r=n.clone().floor(),i=function(v){var m=Xat[v],y={};if(m===void 0)return console.warn("spacegroup '"+v+"' not found in symop library"),y;for(var _=[],b=0,x=m.length;b<x;b+=3){for(var w=[],S=0;S<3;++S)w.push(qat[m[b+S]]);_.push(w)}return _.forEach(function(A){var C=0,k=new lt().set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),O=k.elements;y[A.toString()]=k,A.forEach(function(T){for(var B=!1,R=!1,P=0,D=T.length;P<D;++P){var z=T[P];if(z==="-")B=!0;else if(z==="+")B=!1;else if(z==="/")R=!0;else if(z==="X")O[0+C]=B?-1:1;else if(z==="Y")O[4+C]=B?-1:1;else if(z==="Z")O[8+C]=B?-1:1;else if(Yat.test(z)){var N=parseInt(z);R?O[12+C]/=N:O[12+C]=N}else Ge.warn("getSymmetryOperations: unknown token '"+z+"'")}C+=1})}),y}(t.spacegroup),o=new V,a=new V,s=new Qi("UNITCELL"),l=g(),c=[];if(e.biomolDict.NCS){c.push.apply(c,[new lt].concat(e.biomolDict.NCS.partList[0].matrixList));var u=[];l.forEach(function(v){c.forEach(function(m){u.push(v.clone().multiply(m))})}),s.addPart(u)}else s.addPart(l);var f=new V,d=new Qi("SUPERCELL"),p=Array.prototype.concat.call(g(f.set(1,0,0)),g(f.set(0,1,0)),g(f.set(0,0,1)),g(f.set(-1,0,0)),g(f.set(0,-1,0)),g(f.set(0,0,-1)),g(f.set(1,1,0)),g(f.set(1,0,1)),g(f.set(0,1,1)),g(f.set(-1,-1,0)),g(f.set(-1,0,-1)),g(f.set(0,-1,-1)),g(f.set(1,-1,-1)),g(f.set(1,1,-1)),g(f.set(1,-1,1)),g(f.set(-1,1,1)),g(f.set(-1,-1,1)),g(f.set(-1,1,-1)),g(f.set(0,1,-1)),g(f.set(0,-1,1)),g(f.set(1,0,-1)),g(f.set(-1,0,1)),g(f.set(1,-1,0)),g(f.set(-1,1,0)),g(),g(f.set(1,1,1)),g(f.set(-1,-1,-1)));if(e.biomolDict.NCS){var h=[];p.forEach(function(v){c.forEach(function(m){h.push(v.clone().multiply(m))})}),d.addPart(h)}else d.addPart(p);e.biomolDict.UNITCELL=s,e.biomolDict.SUPERCELL=d,Ze&&Ge.timeEnd("buildUnitcellAssembly")}function g(v){var m=[];return Object.keys(i).forEach(function(y){var _=i[y].clone();o.copy(n).applyMatrix4(_).floor(),a.setFromMatrixPosition(_),a.sub(o),a.add(r),v&&a.add(v),_.setPosition(a),_.multiplyMatrices(t.fracToCart,_),_.multiply(t.cartToFrac),m.push(_)}),m}}var sH=["H","C","O","N","S","P"],Zat=["NA","CL","FE"];function zN(e){for(var t=e.toUpperCase(),n=0,r=0,i=0;i<t.length;i++)if(t.charCodeAt(i)<65){if(r>0)break;++n}else r=i+1;(n>0||r<t.length)&&(t=t.substring(n,r));var o=t.length;if(o===0)return"";if(o===1)return t;if(o===2){if(Zat.indexOf(t)!==-1)return t;if(sH.indexOf(t[0])!==-1)return t[0];if(t in Poe)return t}return o>=3&&sH.indexOf(t[0])!==-1?t[0]:""}function _h(e){var t=e.bondHash,n=t.countArray,r=t.offsetArray,i=t.indexArray,o=e.getBondProxy();e.eachResidue(function(a){var s=a.residueType;if(s.bonds===void 0){var l=a.atomOffset,c=[],u=[],f=[],d={},p=l+a.atomCount;a.eachAtom(function(h){for(var g=h.index,v=r[g],m=0,y=n[g];m<y;++m){o.index=i[v+m];var _=o.atomIndex1;if(!(_<l||_>=p)){var b=o.atomIndex2;if(!(b<l||b>=p)){if(_>b){var x=b;b=_,_=x}var w=_+"|"+b;d[w]===void 0&&(d[w]=!0,c.push(_-l),u.push(b-l),f.push(o.bondOrder))}}}}),s.bonds={atomIndices1:c,atomIndices2:u,bondOrders:f}}})}var Jat=[3,11,19,37,55,87],Qat=[4,12,20,38,56,88],est=[6,15,16,34],tst=[1,7,8,9,17,35,53],nst=[2,10,18,36,54,86],rst=[13,30,31,48,49,50,80,81,82,83,84,85,112],ist=[5,14,32,33,51,52,85],ost=[9,17,35,53,85],Ki=function(e,t,n){this.structure=e,this.atomname=t,n=n||zN(t),this.element=n,this.number=Poe[n]||0,this.vdw=Xot[this.number]||2,this.covalent=Yot[this.number]||1.6};Ki.prototype.getDefaultValence=function(){var e=UV[this.number];return e?e[0]:-1},Ki.prototype.getValenceList=function(){return UV[this.number]||[]},Ki.prototype.getOuterShellElectronCount=function(){return Kot[this.number]||2},Ki.prototype.isMetal=function(){return this.isAlkaliMetal()||this.isAlkalineEarthMetal()||this.isLanthanide()||this.isActinide()||this.isTransitionMetal()||this.isPostTransitionMetal()},Ki.prototype.isNonmetal=function(){return this.isDiatomicNonmetal()||this.isPolyatomicNonmetal()||this.isNobleGas()},Ki.prototype.isMetalloid=function(){return ist.includes(this.number)},Ki.prototype.isHalogen=function(){return ost.includes(this.number)},Ki.prototype.isDiatomicNonmetal=function(){return tst.includes(this.number)},Ki.prototype.isPolyatomicNonmetal=function(){return est.includes(this.number)},Ki.prototype.isAlkaliMetal=function(){return Jat.includes(this.number)},Ki.prototype.isAlkalineEarthMetal=function(){return Qat.includes(this.number)},Ki.prototype.isNobleGas=function(){return nst.includes(this.number)},Ki.prototype.isTransitionMetal=function(){var e=this.number;return e>=21&&e<=29||e>=39&&e<=47||e>=72&&e<=79||e>=104&&e<=108},Ki.prototype.isPostTransitionMetal=function(){return rst.includes(this.number)},Ki.prototype.isLanthanide=function(){return this.number>=57&&this.number<=71},Ki.prototype.isActinide=function(){return this.number>=89&&this.number<=103};var M$=function(e){this.structure=e,this.dict={},this.list=[],this.structure=e};M$.prototype.add=function(e,t){var n=function(o,a){return o+"|"+a}(e=e.toUpperCase(),t=t?t.toUpperCase():zN(e)),r=this.dict[n];if(r===void 0){var i=new Ki(this.structure,e,t);r=this.list.length,this.dict[n]=r,this.list.push(i)}return r},M$.prototype.get=function(e){return this.list[e]};var bn=function(e,t,n,r,i,o){this.structure=e,this.bondReferenceAtomIndices=[],this.resname=t,this.atomTypeIdList=n,this.hetero=r?1:0,this.chemCompType=i,this.bonds=o,this.atomCount=n.length,this.moleculeType=this.getMoleculeType(),this.backboneType=this.getBackboneType(0),this.backboneEndType=this.getBackboneType(-1),this.backboneStartType=this.getBackboneType(1),this.backboneIndexList=this.getBackboneIndexList();var a=jS[this.backboneType],s=jS[this.backboneStartType],l=jS[this.backboneEndType],c=this.getAtomIndexByName(a.trace);this.traceAtomIndex=K(c,-1);var u=this.getAtomIndexByName(a.direction1);this.direction1AtomIndex=K(u,-1);var f=this.getAtomIndexByName(a.direction2);this.direction2AtomIndex=K(f,-1);var d=this.getAtomIndexByName(s.backboneStart);this.backboneStartAtomIndex=K(d,-1);var p,h=this.getAtomIndexByName(l.backboneEnd);this.backboneEndAtomIndex=K(h,-1),p=Jot.includes(t)?this.getAtomIndexByName("N1"):this.getAtomIndexByName("N3"),this.rungEndAtomIndex=K(p,-1)};bn.prototype.getBackboneIndexList=function(){var e,t=[];switch(this.moleculeType){case 3:e=tat;break;case 4:case 5:e=Toe;break;default:return t}for(var n=this.structure.atomMap,r=this.atomTypeIdList,i=0,o=this.atomCount;i<o;++i){var a=n.get(r[i]);e.includes(a.atomname)&&t.push(i)}return t},bn.prototype.getMoleculeType=function(){return this.isProtein()?3:this.isRna()?4:this.isDna()?5:this.isWater()?1:this.isIon()?2:this.isSaccharide()?6:0},bn.prototype.getBackboneType=function(e){return this.hasProteinBackbone(e)?1:this.hasRnaBackbone(e)?2:this.hasDnaBackbone(e)?3:this.hasCgProteinBackbone(e)?4:this.hasCgRnaBackbone(e)?5:this.hasCgDnaBackbone(e)?6:0},bn.prototype.isProtein=function(){return this.chemCompType?Hot.includes(this.chemCompType):this.hasAtomWithName("CA","C","N")||Lg.includes(this.resname)},bn.prototype.isCg=function(){var e=this.backboneType;return e===4||e===5||e===6},bn.prototype.isNucleic=function(){return this.isRna()||this.isDna()},bn.prototype.isRna=function(){return this.chemCompType?Got.includes(this.chemCompType):this.hetero!==1&&(this.hasAtomWithName(["P","O3'","O3*"],["C4'","C4*"],["O2'","O2*","F2'","F2*"])||Moe.includes(this.resname)&&this.hasAtomWithName(["O2'","O2*","F2'","F2*"]))},bn.prototype.isDna=function(){return this.chemCompType?Wot.includes(this.chemCompType):this.hetero!==1&&(this.hasAtomWithName(["P","O3'","O3*"],["C3'","C3*"])&&!this.hasAtomWithName(["O2'","O2*","F2'","F2*"])||Eoe.includes(this.resname))},bn.prototype.isHetero=function(){return this.hetero===1},bn.prototype.isIon=function(){return Qot.includes(this.resname)},bn.prototype.isWater=function(){return ZA.includes(this.resname)},bn.prototype.isSaccharide=function(){return this.chemCompType?woe.includes(this.chemCompType):eat.includes(this.resname)},bn.prototype.isStandardAminoacid=function(){return Lg.includes(this.resname)},bn.prototype.isStandardBase=function(){return Pb.includes(this.resname)},bn.prototype.hasBackboneAtoms=function(e,t){var n=jS[t];return e===-1?this.hasAtomWithName(n.trace,n.backboneEnd,n.direction1,n.direction2):e===0?this.hasAtomWithName(n.trace,n.direction1,n.direction2):e===1?this.hasAtomWithName(n.trace,n.backboneStart,n.direction1,n.direction2):this.hasAtomWithName(n.trace,n.backboneStart,n.backboneEnd,n.direction1,n.direction2)},bn.prototype.hasProteinBackbone=function(e){return this.isProtein()&&this.hasBackboneAtoms(e,1)},bn.prototype.hasRnaBackbone=function(e){return this.isRna()&&this.hasBackboneAtoms(e,2)},bn.prototype.hasDnaBackbone=function(e){return this.isDna()&&this.hasBackboneAtoms(e,3)},bn.prototype.hasCgProteinBackbone=function(e){return this.atomCount<7&&this.isProtein()&&this.hasBackboneAtoms(e,4)},bn.prototype.hasCgRnaBackbone=function(e){return this.atomCount<11&&this.isRna()&&this.hasBackboneAtoms(e,5)},bn.prototype.hasCgDnaBackbone=function(e){return this.atomCount<11&&this.isDna()&&this.hasBackboneAtoms(e,6)},bn.prototype.hasBackbone=function(e){return this.hasProteinBackbone(e)||this.hasRnaBackbone(e)||this.hasDnaBackbone(e)||this.hasCgProteinBackbone(e)||this.hasCgRnaBackbone(e)||this.hasCgDnaBackbone(e)},bn.prototype.getAtomIndexByName=function(e){var t=this.atomCount,n=this.structure.atomMap,r=this.atomTypeIdList;if(Array.isArray(e))for(var i=0;i<t;++i){var o=r[i];if(e.includes(n.get(o).atomname))return i}else for(var a=0;a<t;++a){var s=r[a];if(e===n.get(s).atomname)return a}},bn.prototype.hasAtomWithName=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n=e.length,r=0;r<n;++r)if(e[r]!==void 0&&this.getAtomIndexByName(e[r])===void 0)return!1;return!0},bn.prototype.getBonds=function(e){return this.bonds===void 0&&(this.bonds=function(t){var n=t.structure,r=n.getAtomProxy(),i=n.getAtomProxy(),o=t.atomCount,a=t.atomOffset,s=a+o-1,l=[],c=[],u=[];if(o>500)Ze&&Ge.warn("more than 500 atoms, skip residue for auto-bonding",t.qualifiedName());else if(o>50)for(var f=new Hoe(t,!0),d=t.isCg()?1.2:2.3,p=a;p<s;++p){r.index=p;for(var h=r.covalent+d+.3,g=f.nearest(r,1/0,h*h),v=g.length,m=0;m<v;++m)i.index=g[m].index,r.index<i.index&&r.connectedTo(i)&&(l.push(r.index-a),c.push(i.index-a),u.push(aH(r.resname,r.atomname,i.atomname)))}else for(var y=a;y<s;++y){r.index=y;for(var _=y+1;_<=s;++_)i.index=_,r.connectedTo(i)&&(l.push(y-a),c.push(_-a),u.push(aH(r.resname,r.atomname,i.atomname)))}return{atomIndices1:l,atomIndices2:c,bondOrders:u}}(e)),this.bonds},bn.prototype.getRings=function(){return this.rings===void 0&&this.calculateRings(),this.rings},bn.prototype.getBondGraph=function(){return this.bondGraph===void 0&&this.calculateBondGraph(),this.bondGraph},bn.prototype.getAromatic=function(e){return this.aromaticAtoms===void 0&&this.calculateAromatic(this.structure.getResidueProxy(e.residueIndex)),this.aromaticAtoms},bn.prototype.getAromaticRings=function(e){return this.aromaticRings===void 0&&this.calculateAromatic(e),this.aromaticRings},bn.prototype.calculateBondGraph=function(){for(var e=this.bondGraph={},t=this.getBonds(),n=t.atomIndices1.length,r=t.atomIndices1,i=t.atomIndices2,o=0;o<n;++o){var a=r[o],s=i[o];(e[a]=e[a]||[]).push(s),(e[s]=e[s]||[]).push(a)}},bn.prototype.calculateRings=function(){for(var e=function(n,r){for(var i={count:r,visited:new Int32Array(r),queue:new Int32Array(r),pred:new Int32Array(r),left:new Int32Array(Eb),right:new Int32Array(Eb),color:new Int32Array(r),currentColor:0,rings:[],atomRings:[],bonds:n},o=0;o<r;o++)i.visited[o]=-1,i.pred[o]=-1;return i}(this.getBondGraph(),this.atomCount),t=0;t<e.count;t++)e.visited[t]>=0||lst(e,t);this.rings={atomRings:e.atomRings,rings:e.rings}},bn.prototype.isAromatic=function(e){return this.aromaticAtoms=this.getAromatic(e),this.aromaticAtoms[e.index-e.residueAtomOffset]===1},bn.prototype.calculateAromatic=function(e){var t=this,n=this.aromaticAtoms=new Uint8Array(this.atomCount),r=this.getRings().rings,i=r.map(function(a){return function(s){if(s.some(function(f){return!ast.includes(f.number)}))return!1;var l=0,c=new Dn(3,s.length),u=c.data;return s.forEach(function(f){u[l+0]=f.x,u[l+1]=f.y,u[l+2]=f.z,l+=3}),new Mb(c).vecC.length()<.05}(a.map(function(s){return t.structure.getAtomProxy(s+e.atomOffset)}))}),o=this.aromaticRings=[];r.forEach(function(a,s){i[s]&&(o.push(a),a.forEach(function(l){return n[l]=1}))})},bn.prototype.assignBondReferenceAtomIndices=function(){var e=this.getBondGraph(),t=this.getRings(),n=t.atomRings,r=t.rings,i=this.bonds,o=i.atomIndices1,a=i.atomIndices2,s=i.bondOrders,l=this.bondReferenceAtomIndices,c=i.atomIndices1.length;l.length=0;for(var u=0;u<c;++u)if(!(s[u]<=1)){var f=void 0,d=o[u],p=a[u],h=n[d],g=n[p];if(h&&g){for(var v=0;v<h.length;v++)if(g.indexOf(h[v])!==-1){f=r[h[v]];break}}if(e[d].length>1)for(var m=0;m<e[d].length;++m){var y=e[d][m];if(y!==p&&(f===void 0||f.indexOf(y)!==-1)){l[u]=y;break}}else if(e[p].length>1)for(var _=0;_<e[p].length;++_){var b=e[p][_];if(b!==d&&(f===void 0||f.indexOf(b)!==-1)){l[u]=b;break}}}},bn.prototype.getBondIndex=function(e,t){for(var n=this.bonds,r=n.atomIndices1,i=n.atomIndices2,o=r.indexOf(e),a=i.indexOf(t),s=a;o!==-1;){for(;a!==-1;){if(o===a)return o;a=i.indexOf(t,a+1)}o=r.indexOf(e,o+1),a=s}},bn.prototype.getBondReferenceAtomIndex=function(e,t){var n=this.getBondIndex(e,t);if(n!==void 0)return this.bondReferenceAtomIndices.length===0&&this.assignBondReferenceAtomIndices(),this.bondReferenceAtomIndices[n]};var ast=[5,6,7,8,14,15,16,32,33,50,51,83];function sst(e,t,n){if(!(n<t)){for(var r=e.pred,i=e.color,o=e.left,a=e.right,s=++e.currentColor,l=t,c=0;c<Eb&&(i[l]=s,!((l=r[l])<0));c++);var u=0,f=0,d=!1,p=0;l=n;for(var h=0;h<Eb;h++){if(i[l]===s){p=l,d=!0;break}if(a[f++]=l,(l=r[l])<0)break}if(d){l=t;for(var g=0;g<Eb&&(o[u++]=l,p!==l)&&!((l=r[l])<0);g++);for(var v=u+f,m=new Array(v),y=0,_=0;_<u;_++)m[y++]=o[_];for(var b=f-1;b>=0;b--)m[y++]=a[b];for(var x=e.rings.length,w=0;w<v;++w){var S=m[w];e.atomRings[S]?e.atomRings[S].push(x):e.atomRings[S]=[x]}e.rings.push(m)}}}function lst(e,t){var n=e.bonds,r=e.visited,i=e.queue,o=e.pred;r[t]=1,i[0]=t;for(var a=0,s=1;a<s;){var l=i[a++];if(n[l]!==void 0)for(var c=n[l].length,u=0;u<c;u++){var f=n[l][u];r[f]>0?o[f]!==l&&o[l]!==f&&sst(e,l,f):(r[f]=1,i[s++]=f,o[f]=l)}}}var Eb=4,E$=function(e){this.structure=e,this.dict={},this.list=[]};E$.prototype.add=function(e,t,n,r,i){r===void 0&&(r="");var o=function(l,c,u,f){return f===void 0&&(f=""),l+"|"+c.join(",")+"|"+(u?1:0)+"|"+f}(e=e.toUpperCase(),t,n,r),a=this.dict[o];if(a===void 0){var s=new bn(this.structure,e,t,n,r,i);a=this.list.length,this.dict[o]=a,this.list.push(s)}return a},E$.prototype.get=function(e){return this.list[e]};var Kl=function(e,t){t===void 0&&(t=0),this.structure=e,this.index=t,this.bondStore=e.bondStore,this._v12=new V,this._v13=new V,this._ap1=this.structure.getAtomProxy(),this._ap2=this.structure.getAtomProxy(),this._ap3=this.structure.getAtomProxy()},nu={atom1:{configurable:!0},atom2:{configurable:!0},atomIndex1:{configurable:!0},atomIndex2:{configurable:!0},bondOrder:{configurable:!0}};nu.atom1.get=function(){return this.structure.getAtomProxy(this.atomIndex1)},nu.atom2.get=function(){return this.structure.getAtomProxy(this.atomIndex2)},nu.atomIndex1.get=function(){return this.bondStore.atomIndex1[this.index]},nu.atomIndex1.set=function(e){this.bondStore.atomIndex1[this.index]=e},nu.atomIndex2.get=function(){return this.bondStore.atomIndex2[this.index]},nu.atomIndex2.set=function(e){this.bondStore.atomIndex2[this.index]=e},nu.bondOrder.get=function(){return this.bondStore.bondOrder[this.index]},nu.bondOrder.set=function(e){this.bondStore.bondOrder[this.index]=e},Kl.prototype.getOtherAtomIndex=function(e){return e===this.atomIndex1?this.atomIndex2:this.atomIndex1},Kl.prototype.getOtherAtom=function(e){return this.structure.getAtomProxy(this.getOtherAtomIndex(e.index))},Kl.prototype.getReferenceAtomIndex=function(){var e=this._ap1,t=this._ap2;if(e.index=this.atomIndex1,t.index=this.atomIndex2,e.residueIndex===t.residueIndex){var n=e.index-e.residueAtomOffset,r=t.index-t.residueAtomOffset,i=e.residueType.getBondReferenceAtomIndex(n,r);if(i!==void 0)return i+e.residueAtomOffset;console.warn("No reference atom found",e.index,t.index)}},Kl.prototype.calculateShiftDir=function(e){e===void 0&&(e=new V);var t=this._ap1,n=this._ap2,r=this._ap3,i=this._v12,o=this._v13;t.index=this.atomIndex1,n.index=this.atomIndex2;var a=this.getReferenceAtomIndex();i.subVectors(t,n).normalize(),a!==void 0?(r.index=a,o.subVectors(t,r)):o.copy(t),o.normalize();var s=i.dot(o);return 1-Math.abs(s)<1e-5&&(o.set(1,0,0),s=i.dot(o),1-Math.abs(s)<1e-5&&(o.set(0,1,0),s=i.dot(o))),e.copy(o.sub(i.multiplyScalar(s))).normalize()},Kl.prototype.qualifiedName=function(){return this.atomIndex1+"="+this.atomIndex2},Kl.prototype.clone=function(){return new Kl(this.structure,this.index)},Kl.prototype.toObject=function(){return{atomIndex1:this.atomIndex1,atomIndex2:this.atomIndex2,bondOrder:this.bondOrder}},Object.defineProperties(Kl.prototype,nu);var An=function(e,t){t===void 0&&(t=0),this.structure=e,this.index=t,this.chainStore=e.chainStore,this.residueStore=e.residueStore,this.atomStore=e.atomStore,this.residueMap=e.residueMap,this.atomMap=e.atomMap},xn={entity:{configurable:!0},entityIndex:{configurable:!0},chain:{configurable:!0},chainIndex:{configurable:!0},atomOffset:{configurable:!0},atomCount:{configurable:!0},atomEnd:{configurable:!0},modelIndex:{configurable:!0},chainname:{configurable:!0},chainid:{configurable:!0},resno:{configurable:!0},sstruc:{configurable:!0},inscode:{configurable:!0},residueType:{configurable:!0},resname:{configurable:!0},hetero:{configurable:!0},moleculeType:{configurable:!0},backboneType:{configurable:!0},backboneStartType:{configurable:!0},backboneEndType:{configurable:!0},traceAtomIndex:{configurable:!0},direction1AtomIndex:{configurable:!0},direction2AtomIndex:{configurable:!0},backboneStartAtomIndex:{configurable:!0},backboneEndAtomIndex:{configurable:!0},rungEndAtomIndex:{configurable:!0},x:{configurable:!0},y:{configurable:!0},z:{configurable:!0}};xn.entity.get=function(){return this.structure.entityList[this.entityIndex]},xn.entityIndex.get=function(){return this.chainStore.entityIndex[this.chainIndex]},xn.chain.get=function(){return this.structure.getChainProxy(this.chainIndex)},xn.chainIndex.get=function(){return this.residueStore.chainIndex[this.index]},xn.chainIndex.set=function(e){this.residueStore.chainIndex[this.index]=e},xn.atomOffset.get=function(){return this.residueStore.atomOffset[this.index]},xn.atomOffset.set=function(e){this.residueStore.atomOffset[this.index]=e},xn.atomCount.get=function(){return this.residueStore.atomCount[this.index]},xn.atomCount.set=function(e){this.residueStore.atomCount[this.index]=e},xn.atomEnd.get=function(){return this.atomOffset+this.atomCount-1},xn.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},xn.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},xn.chainid.get=function(){return this.chainStore.getChainid(this.chainIndex)},xn.resno.get=function(){return this.residueStore.resno[this.index]},xn.resno.set=function(e){this.residueStore.resno[this.index]=e},xn.sstruc.get=function(){return this.residueStore.getSstruc(this.index)},xn.sstruc.set=function(e){this.residueStore.setSstruc(this.index,e)},xn.inscode.get=function(){return this.residueStore.getInscode(this.index)},xn.inscode.set=function(e){this.residueStore.setInscode(this.index,e)},xn.residueType.get=function(){return this.residueMap.get(this.residueStore.residueTypeId[this.index])},xn.resname.get=function(){return this.residueType.resname},xn.hetero.get=function(){return this.residueType.hetero},xn.moleculeType.get=function(){return this.residueType.moleculeType},xn.backboneType.get=function(){return this.residueType.backboneType},xn.backboneStartType.get=function(){return this.residueType.backboneStartType},xn.backboneEndType.get=function(){return this.residueType.backboneEndType},xn.traceAtomIndex.get=function(){return this.residueType.traceAtomIndex+this.atomOffset},xn.direction1AtomIndex.get=function(){return this.residueType.direction1AtomIndex+this.atomOffset},xn.direction2AtomIndex.get=function(){return this.residueType.direction2AtomIndex+this.atomOffset},xn.backboneStartAtomIndex.get=function(){return this.residueType.backboneStartAtomIndex+this.atomOffset},xn.backboneEndAtomIndex.get=function(){return this.residueType.backboneEndAtomIndex+this.atomOffset},xn.rungEndAtomIndex.get=function(){return this.residueType.rungEndAtomIndex+this.atomOffset},xn.x.get=function(){for(var e=0,t=this.atomOffset;t<=this.atomEnd;++t)e+=this.atomStore.x[t];return e/this.atomCount},xn.y.get=function(){for(var e=0,t=this.atomOffset;t<=this.atomEnd;++t)e+=this.atomStore.y[t];return e/this.atomCount},xn.z.get=function(){for(var e=0,t=this.atomOffset;t<=this.atomEnd;++t)e+=this.atomStore.z[t];return e/this.atomCount},An.prototype.eachAtom=function(e,t){var n=this.atomCount,r=this.atomOffset,i=this.structure._ap,o=r+n;if(t&&t.atomOnlyTest)for(var a=t.atomOnlyTest,s=r;s<o;++s)i.index=s,a(i)&&e(i);else for(var l=r;l<o;++l)i.index=l,e(i)},An.prototype.positionToArray=function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t+0]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},An.prototype.isProtein=function(){return this.residueType.moleculeType===3},An.prototype.isNucleic=function(){var e=this.residueType.moleculeType;return e===4||e===5},An.prototype.isRna=function(){return this.residueType.moleculeType===4},An.prototype.isDna=function(){return this.residueType.moleculeType===5},An.prototype.isCg=function(){var e=this.residueType.backboneType;return e===4||e===5||e===6},An.prototype.isPolymer=function(){if(this.structure.entityList.length>0)return this.entity.isPolymer();var e=this.residueType.moleculeType;return e===3||e===4||e===5},An.prototype.isHetero=function(){return this.residueType.hetero===1},An.prototype.isWater=function(){return this.residueType.moleculeType===1},An.prototype.isIon=function(){return this.residueType.moleculeType===2},An.prototype.isSaccharide=function(){return this.residueType.moleculeType===6},An.prototype.isStandardAminoacid=function(){return this.residueType.isStandardAminoacid()},An.prototype.isStandardBase=function(){return this.residueType.isStandardBase()},An.prototype.isHelix=function(){return Soe.includes(this.sstruc)},An.prototype.isSheet=function(){return Coe.includes(this.sstruc)},An.prototype.isTurn=function(){return Aoe.includes(this.sstruc)&&this.isProtein()},An.prototype.getAtomType=function(e){return this.atomMap.get(this.atomStore.atomTypeId[e])},An.prototype.getResname1=function(){return KA[this.resname.toUpperCase()]||"X"},An.prototype.getBackboneType=function(e){switch(e){case-1:return this.residueType.backboneStartType;case 1:return this.residueType.backboneEndType;default:return this.residueType.backboneType}},An.prototype.getAtomIndexByName=function(e){var t=this.residueType.getAtomIndexByName(e);return t!==void 0&&(t+=this.atomOffset),t},An.prototype.hasAtomWithName=function(e){return this.residueType.hasAtomWithName(e)},An.prototype.getAtomnameList=function(){console.warn("getAtomnameList - might be expensive");for(var e=this.atomCount,t=this.atomOffset,n=new Array(e),r=0;r<e;++r)n[r]=this.getAtomType(t+r).atomname;return n},An.prototype.connectedTo=function(e){var t=this.structure.getAtomProxy(this.backboneEndAtomIndex),n=this.structure.getAtomProxy(e.backboneStartAtomIndex);return!(!t||!n)&&t.connectedTo(n)},An.prototype.getNextConnectedResidue=function(){var e=this.chainStore.residueOffset[this.chainIndex],t=this.chainStore.residueCount[this.chainIndex],n=this.index+1;if(n<e+t){var r=this.structure.getResidueProxy(n);if(this.connectedTo(r))return r}else if(n===e+t){var i=this.structure.getResidueProxy(e);if(this.connectedTo(i))return i}},An.prototype.getPreviousConnectedResidue=function(e){var t=this.chainStore.residueOffset[this.chainIndex],n=this.index-1;if(n>=t){var r=K(e,this.structure.getResidueProxy());if(r.index=n,r.connectedTo(this))return r}else if(n===t-1){var i=this.chainStore.residueCount[this.chainIndex],o=K(e,this.structure.getResidueProxy());if(o.index=t+i-1,o.connectedTo(this))return o}},An.prototype.getBonds=function(){return this.residueType.getBonds(this)},An.prototype.getRings=function(){return this.residueType.getRings()},An.prototype.getAromaticRings=function(){return this.residueType.getAromaticRings(this)},An.prototype.qualifiedName=function(e){e===void 0&&(e=!1);var t="";return this.resname&&!e&&(t+="["+this.resname+"]"),this.resno!==void 0&&(t+=this.resno),this.inscode&&(t+="^"+this.inscode),this.chain&&(t+=":"+this.chainname),t+="/"+this.modelIndex},An.prototype.clone=function(){return new An(this.structure,this.index)},An.prototype.toObject=function(){return{index:this.index,chainIndex:this.chainIndex,atomOffset:this.atomOffset,atomCount:this.atomCount,resno:this.resno,resname:this.resname,sstruc:this.sstruc}},Object.defineProperties(An.prototype,xn);var ia=function(e,t,n){this.structure=e,this.residueIndexStart=t,this.residueIndexEnd=n,this.chainStore=e.chainStore,this.residueStore=e.residueStore,this.atomStore=e.atomStore,this.residueCount=n-t+1;var r=this.structure.getResidueProxy(this.residueIndexStart),i=this.structure.getResidueProxy(this.residueIndexEnd);this.isPrevConnected=r.getPreviousConnectedResidue()!==void 0;var o=i.getNextConnectedResidue();this.isNextConnected=o!==void 0,this.isNextNextConnected=o!==void 0&&o.getNextConnectedResidue()!==void 0,this.isCyclic=i.connectedTo(r),this.__residueProxy=this.structure.getResidueProxy()},B2={chainIndex:{configurable:!0},modelIndex:{configurable:!0},chainname:{configurable:!0}};B2.chainIndex.get=function(){return this.residueStore.chainIndex[this.residueIndexStart]},B2.modelIndex.get=function(){return this.chainStore.modelIndex[this.chainIndex]},B2.chainname.get=function(){return this.chainStore.getChainname(this.chainIndex)},ia.prototype.isProtein=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isProtein()},ia.prototype.isCg=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isCg()},ia.prototype.isNucleic=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isNucleic()},ia.prototype.getMoleculeType=function(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.moleculeType},ia.prototype.getBackboneType=function(e){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.getBackboneType(e)},ia.prototype.getAtomIndexByType=function(e,t){this.isCyclic?e===-1?e=this.residueCount-1:e===this.residueCount&&(e=0):(e!==-1||this.isPrevConnected||(e+=1),e!==this.residueCount||this.isNextNextConnected||(e-=1));var n,r=this.__residueProxy;switch(r.index=this.residueIndexStart+e,t){case"trace":n=r.traceAtomIndex;break;case"direction1":n=r.direction1AtomIndex;break;case"direction2":n=r.direction2AtomIndex;break;default:n=r.getAtomIndexByName(t)}return n},ia.prototype.eachAtom=function(e,t){this.eachResidue(function(n){n.eachAtom(e,t)})},ia.prototype.eachAtomN=function(e,t,n){for(var r=this.residueCount,i=new Array(e),o=0;o<e;++o)i[o]=this.structure.getAtomProxy(this.getAtomIndexByType(o,n));t.apply(this,i);for(var a=e;a<r;++a){for(var s=1;s<e;++s)i[s-1].index=i[s].index;i[e-1].index=this.getAtomIndexByType(a,n),t.apply(this,i)}},ia.prototype.eachResidue=function(e){for(var t=this.structure.getResidueProxy(),n=this.residueCount,r=this.residueIndexStart,i=0;i<n;++i)t.index=r+i,e(t)},ia.prototype.qualifiedName=function(){var e=this.structure.getResidueProxy(this.residueIndexStart),t=this.structure.getResidueProxy(this.residueIndexEnd);return e.qualifiedName()+" - "+t.qualifiedName()},Object.defineProperties(ia.prototype,B2);var Zl=function(e,t){t===void 0&&(t=0),this.structure=e,this.index=t,this.chainStore=e.chainStore,this.residueStore=e.residueStore},_i={entity:{configurable:!0},model:{configurable:!0},entityIndex:{configurable:!0},modelIndex:{configurable:!0},residueOffset:{configurable:!0},residueCount:{configurable:!0},residueEnd:{configurable:!0},atomOffset:{configurable:!0},atomEnd:{configurable:!0},atomCount:{configurable:!0},chainname:{configurable:!0},chainid:{configurable:!0}};_i.entity.get=function(){return this.structure.entityList[this.entityIndex]},_i.model.get=function(){return this.structure.getModelProxy(this.modelIndex)},_i.entityIndex.get=function(){return this.chainStore.entityIndex[this.index]},_i.entityIndex.set=function(e){this.chainStore.entityIndex[this.index]=e},_i.modelIndex.get=function(){return this.chainStore.modelIndex[this.index]},_i.modelIndex.set=function(e){this.chainStore.modelIndex[this.index]=e},_i.residueOffset.get=function(){return this.chainStore.residueOffset[this.index]},_i.residueOffset.set=function(e){this.chainStore.residueOffset[this.index]=e},_i.residueCount.get=function(){return this.chainStore.residueCount[this.index]},_i.residueCount.set=function(e){this.chainStore.residueCount[this.index]=e},_i.residueEnd.get=function(){return this.residueOffset+this.residueCount-1},_i.atomOffset.get=function(){return this.residueStore.atomOffset[this.residueOffset]},_i.atomEnd.get=function(){return this.residueStore.atomOffset[this.residueEnd]+this.residueStore.atomCount[this.residueEnd]-1},_i.atomCount.get=function(){return this.residueCount===0?0:this.atomEnd-this.atomOffset+1},_i.chainname.get=function(){return this.chainStore.getChainname(this.index)},_i.chainname.set=function(e){this.chainStore.setChainname(this.index,e)},_i.chainid.get=function(){return this.chainStore.getChainid(this.index)},_i.chainid.set=function(e){this.chainStore.setChainid(this.index,e)},Zl.prototype.eachAtom=function(e,t){this.eachResidue(function(n){n.eachAtom(e,t)},t)},Zl.prototype.eachResidue=function(e,t){var n=this.residueCount,r=this.residueOffset,i=this.structure._rp,o=r+n;if(t&&t.test){var a=t.residueOnlyTest;if(a)for(var s=r;s<o;++s)i.index=s,a(i)&&e(i);else for(var l=r;l<o;++l)i.index=l,e(i)}else for(var c=r;c<o;++c)i.index=c,e(i)},Zl.prototype.eachResidueN=function(e,t){var n=this.residueCount,r=this.residueOffset,i=r+n;if(!(n<e)){for(var o=new Array(e),a=0;a<e;++a)o[a]=this.structure.getResidueProxy(r+a);t.apply(this,o);for(var s=r+e;s<i;++s){for(var l=0;l<e;++l)o[l].index+=1;t.apply(this,o)}}},Zl.prototype.eachPolymer=function(e,t){for(var n=0,r=0,i=t?t.residueOnlyTest:void 0,o=this.model.structure,a=this.residueCount,s=this.residueOffset,l=s+a,c=this.structure.getResidueProxy(),u=this.structure.getResidueProxy(s),f=this.structure.getAtomProxy(),d=this.structure.getAtomProxy(),p=!0,h=s+1;h<l;++h){c.index=u.index,u.index=h;var g=p?c.backboneEndType:c.backboneType,v=u.backboneType;p&&(n=c.index,p=!1),r=u.index,g!==0&&g===v?(f.index=c.backboneEndAtomIndex,d.index=u.backboneStartAtomIndex,f&&d&&f.connectedTo(d)&&(!i||i(c)&&i(u))||(c.index-n>1&&e(new ia(o,n,c.index)),n=r)):(g!==0&&c.index-n>1&&e(new ia(o,n,c.index)),n=r)}r-n>1&&this.structure.getResidueProxy(n).backboneEndType&&e(new ia(o,n,r))},Zl.prototype.qualifiedName=function(){return":"+this.chainname+"/"+this.modelIndex},Zl.prototype.clone=function(){return new Zl(this.structure,this.index)},Zl.prototype.toObject=function(){return{index:this.index,residueOffset:this.residueOffset,residueCount:this.residueCount,chainname:this.chainname}},Object.defineProperties(Zl.prototype,_i);var Jl=function(e,t){t===void 0&&(t=0),this.structure=e,this.index=t,this.modelStore=e.modelStore,this.chainStore=e.chainStore,this.residueStore=e.residueStore},bs={chainOffset:{configurable:!0},chainCount:{configurable:!0},residueOffset:{configurable:!0},atomOffset:{configurable:!0},chainEnd:{configurable:!0},residueEnd:{configurable:!0},atomEnd:{configurable:!0},residueCount:{configurable:!0},atomCount:{configurable:!0}};bs.chainOffset.get=function(){return this.modelStore.chainOffset[this.index]},bs.chainOffset.set=function(e){this.modelStore.chainOffset[this.index]=e},bs.chainCount.get=function(){return this.modelStore.chainCount[this.index]},bs.chainCount.set=function(e){this.modelStore.chainCount[this.index]=e},bs.residueOffset.get=function(){return this.chainStore.residueOffset[this.chainOffset]},bs.atomOffset.get=function(){return this.residueStore.atomOffset[this.residueOffset]},bs.chainEnd.get=function(){return this.chainOffset+this.chainCount-1},bs.residueEnd.get=function(){return this.chainStore.residueOffset[this.chainEnd]+this.chainStore.residueCount[this.chainEnd]-1},bs.atomEnd.get=function(){return this.residueStore.atomOffset[this.residueEnd]+this.residueStore.atomCount[this.residueEnd]-1},bs.residueCount.get=function(){return this.chainCount===0?0:this.residueEnd-this.residueOffset+1},bs.atomCount.get=function(){return this.residueCount===0?0:this.atomEnd-this.atomOffset+1},Jl.prototype.eachAtom=function(e,t){this.eachChain(function(n){n.eachAtom(e,t)},t)},Jl.prototype.eachResidue=function(e,t){this.eachChain(function(n){n.eachResidue(e,t)},t)},Jl.prototype.eachPolymer=function(e,t){if(t&&t.chainOnlyTest){var n=t.chainOnlyTest;this.eachChain(function(r){n(r)&&r.eachPolymer(e,t)})}else this.eachChain(function(r){r.eachPolymer(e,t)})},Jl.prototype.eachChain=function(e,t){var n=this.chainCount,r=this.chainOffset,i=this.structure._cp,o=r+n;if(t&&t.test){var a=t.chainOnlyTest;if(a)for(var s=r;s<o;++s)i.index=s,a(i)&&e(i);else for(var l=r;l<o;++l)i.index=l,e(i)}else for(var c=r;c<o;++c)i.index=c,e(i)},Jl.prototype.qualifiedName=function(){return"/"+this.index},Jl.prototype.clone=function(){return new Jl(this.structure,this.index)},Jl.prototype.toObject=function(){return{index:this.index,chainOffset:this.chainOffset,chainCount:this.chainCount}},Object.defineProperties(Jl.prototype,bs);var Wt=function(e,t){e===void 0&&(e=""),t===void 0&&(t=""),this.signals={refreshed:new en.Signal},this.init(e,t)},lH={type:{configurable:!0}};Wt.prototype.init=function(e,t){this.name=e,this.path=t,this.title="",this.id="",this.data={structure:this,"@spatialLookup":void 0,"@valenceModel":void 0},this.header={},this.extraData={},this.atomSetCache={},this.atomSetDict={},this.biomolDict={},this.entityList=[],this.unitcell=void 0,this.frames=[],this.boxes=[],this.validation=void 0,this.bondStore=new GS(0),this.backboneBondStore=new GS(0),this.rungBondStore=new GS(0),this.atomStore=new Uat(0),this.residueStore=new Vat(0),this.chainStore=new Hat(0),this.modelStore=new Gat(0),this.atomMap=new M$(this),this.residueMap=new E$(this),this.bondHash=void 0,this.spatialHash=void 0,this.atomSet=void 0,this.bondSet=void 0,this.center=new V,this.boundingBox=new cr,this._bp=this.getBondProxy(),this._ap=this.getAtomProxy(),this._rp=this.getResidueProxy(),this._cp=this.getChainProxy()},lH.type.get=function(){return"Structure"},Wt.prototype.finalizeAtoms=function(){this.atomSet=this.getAtomSet(),this.atomCount=this.atomStore.count,this.boundingBox=this.getBoundingBox(void 0,this.boundingBox),this.center=this.boundingBox.getCenter(new V),this.spatialHash=new bh(this.atomStore,this.boundingBox)},Wt.prototype.finalizeBonds=function(){for(var e in this.bondSet=this.getBondSet(),this.bondCount=this.bondStore.count,this.bondHash=new zat(this.bondStore,this.atomStore.count),this.atomSetCache={},this.atomSetDict.rung||(this.atomSetDict.rung=this.getAtomSet(!1)),this.atomSetDict)this.atomSetCache["__"+e]=this.atomSetDict[e].clone()},Wt.prototype.getBondProxy=function(e){return new Kl(this,e)},Wt.prototype.getAtomProxy=function(e){return new Nt(this,e)},Wt.prototype.getResidueProxy=function(e){return new An(this,e)},Wt.prototype.getChainProxy=function(e){return new Zl(this,e)},Wt.prototype.getModelProxy=function(e){return new Jl(this,e)},Wt.prototype.getBondSet=function(){var e=this.bondStore.count,t=new Jt(e),n=this.atomSet;if(n)if(n.isAllSet())t.setAll();else if(n.isAllClear())t.clearAll();else for(var r=this.getBondProxy(),i=0;i<e;++i)r.index=i,n.isSet(r.atomIndex1,r.atomIndex2)&&t.set(r.index);else t.setAll();return t},Wt.prototype.getBackboneBondSet=function(){var e=this.backboneBondStore.count,t=new Jt(e),n=this.atomSetCache.__backbone;if(n){var r=this.getBondProxy();r.bondStore=this.backboneBondStore;for(var i=0;i<e;++i)r.index=i,n.isSet(r.atomIndex1,r.atomIndex2)&&t.set(r.index)}else t.setAll();return t},Wt.prototype.getRungBondSet=function(){var e=this.rungBondStore.count,t=new Jt(e),n=this.atomSetCache.__rung;if(n){var r=this.getBondProxy();r.bondStore=this.rungBondStore;for(var i=0;i<e;++i)r.index=i,n.isSet(r.atomIndex1,r.atomIndex2)&&t.set(r.index)}else t.setAll();return t},Wt.prototype.getAtomSet=function(e){var t=this.atomStore.count;if(e===void 0)return new Jt(t,!0);if(e instanceof Jt)return e;if(e===!0)return new Jt(t,!0);if(e&&e.test){var n=e.string;if(n in this.atomSetCache)return this.atomSetCache[n];if(n==="")return new Jt(t,!0);var r=new Jt(t);return this.eachAtom(function(i){r.set(i.index)},e),this.atomSetCache[n]=r,r}return e===!1?new Jt(t):new Jt(t,!0)},Wt.prototype.getAtomSetWithinSelection=function(e,t){var n=this.spatialHash,r=this.getAtomSet(!1),i=this.getAtomProxy();return n&&this.getAtomSet(e).forEach(function(o){i.index=o,n.within(i.x,i.y,i.z,t).forEach(function(a){r.set(a)})}),r},Wt.prototype.getAtomSetWithinPoint=function(e,t){var n=e,r=this.getAtomSet(!1);return this.spatialHash&&this.spatialHash.within(n.x,n.y,n.z,t).forEach(function(i){r.set(i)}),r},Wt.prototype.getAtomSetWithinVolume=function(e,t,n,r,i){var o=new Cs(e,n,r,i),a=o.getDataPosition(),s=a.length,l=o.matrix.getMaxScaleOnAxis(),c=this.getAtomSet(!1);if(!this.spatialHash)return c;for(var u=0;u<s;u+=3)this.spatialHash.within(a[u],a[u+1],a[u+2],l).forEach(function(f){c.set(f)});return c},Wt.prototype.getAtomSetWithinGroup=function(e){var t=this.atomStore.residueIndex,n=this.getAtomSet(!1),r=this.getResidueProxy();return this.getAtomSet(e).forEach(function(i){r.index=t[i];for(var o=r.atomOffset;o<=r.atomEnd;++o)n.set(o)}),n},Wt.prototype.getSelection=function(){},Wt.prototype.getStructure=function(){return this},Wt.prototype.eachEntity=function(e,t){this.entityList.forEach(function(n){t!==void 0&&n.getEntityType()!==t||e(n)})},Wt.prototype.eachBond=function(e,t){var n,r=this.getBondProxy();if(t&&t.test&&(n=this.getBondSet(),this.bondSet&&n.intersection(this.bondSet)),n)n.forEach(function(a){r.index=a,e(r)});else for(var i=this.bondStore.count,o=0;o<i;++o)r.index=o,e(r)},Wt.prototype.eachAtom=function(e,t){if(t&&t.test)this.eachModel(function(o){o.eachAtom(e,t)},t);else for(var n=this.atomStore.count,r=this.getAtomProxy(),i=0;i<n;++i)r.index=i,e(r)},Wt.prototype.eachResidue=function(e,t){if(t&&t.test){var n=this.modelStore.count,r=this.getModelProxy(),i=t.modelOnlyTest;if(i)for(var o=0;o<n;++o)r.index=o,i(r)&&r.eachResidue(e,t);else for(var a=0;a<n;++a)r.index=a,r.eachResidue(e,t)}else for(var s=this.residueStore.count,l=this.getResidueProxy(),c=0;c<s;++c)l.index=c,e(l)},Wt.prototype.eachResidueN=function(e,t){var n=this.residueStore.count;if(!(n<e)){for(var r=new Array(e),i=0;i<e;++i)r[i]=this.getResidueProxy(i);t.apply(this,r);for(var o=e;o<n;++o){for(var a=0;a<e;++a)r[a].index+=1;t.apply(this,r)}}},Wt.prototype.eachPolymer=function(e,t){if(t&&t.modelOnlyTest){var n=t.modelOnlyTest;this.eachModel(function(r){n(r)&&r.eachPolymer(e,t)})}else this.eachModel(function(r){r.eachPolymer(e,t)})},Wt.prototype.eachChain=function(e,t){if(t&&t.test)this.eachModel(function(o){o.eachChain(e,t)});else for(var n=this.chainStore.count,r=this.getChainProxy(),i=0;i<n;++i)r.index=i,e(r)},Wt.prototype.eachModel=function(e,t){var n=this.modelStore.count,r=this.getModelProxy();if(t&&t.test){var i=t.modelOnlyTest;if(i)for(var o=0;o<n;++o)r.index=o,i(r)&&e(r);else for(var a=0;a<n;++a)r.index=a,e(r)}else for(var s=0;s<n;++s)r.index=s,e(r)},Wt.prototype.getAtomData=function(e){var t=Object.assign({},e);t.colorParams&&(t.colorParams.structure=this.getStructure());var n,r,i=t.what,o=K(t.atomSet,this.atomSet),a={},s=this.getAtomProxy(),l=o.getSize();i&&!i.position||(a.position=new Float32Array(3*l)),i&&!i.color||!t.colorParams||(a.color=new Float32Array(3*l),r=pn.getScheme(t.colorParams)),i&&!i.picking||(a.picking=new Vh(new Float32Array(l),this.getStructure())),i&&!i.radius||(a.radius=new Float32Array(l),n=new $c(t.radiusParams)),i&&!i.index||(a.index=new Uint32Array(l));var c=a.position,u=a.color,f=a.picking,d=a.radius,p=a.index;return o.forEach(function(h,g){var v=3*g;s.index=h,c&&s.positionToArray(c,v),u&&r.atomColorToArray(s,u,v),f&&(f.array[g]=h),d&&(d[g]=n.atomRadius(s)),p&&(p[g]=h)}),a},Wt.prototype.getBondData=function(e){var t=Object.assign({},e);t.colorParams&&(t.colorParams.structure=this.getStructure());var n,r,i=t.what,o=K(t.bondSet,this.bondSet),a=K(t.multipleBond,"off"),s=a!=="off",l=a==="offset",c=K(t.bondScale,.4),u=K(t.bondSpacing,1),f={},d=this.getBondProxy();t.bondStore&&(d.bondStore=t.bondStore);var p,h=this.getAtomProxy(),g=this.getAtomProxy();if(s){var v=d.bondStore.bondOrder;p=0,o.forEach(function(N){p+=v[N]})}else p=o.getSize();i&&!i.position||(f.position1=new Float32Array(3*p),f.position2=new Float32Array(3*p)),i&&!i.color||!t.colorParams||(f.color=new Float32Array(3*p),f.color2=new Float32Array(3*p),r=pn.getScheme(t.colorParams)),i&&!i.picking||(f.picking=new Ioe(new Float32Array(p),this.getStructure(),t.bondStore)),(!i||i.radius||s&&i.position)&&(n=new $c(t.radiusParams)),i&&!i.radius||(f.radius=new Float32Array(p),t.radius2&&(f.radius2=new Float32Array(p)));var m,y,_,b,x,w,S=f.position1,A=f.position2,C=f.color,k=f.color2,O=f.picking,T=f.radius,B=f.radius2,R=0,P=new V,D=new V,z=new V;return o.forEach(function(N){if(y=3*R,d.index=N,h.index=d.atomIndex1,g.index=d.atomIndex2,b=d.bondOrder,S)if(s&&b>1){var H=n.atomRadius(h);w=H*c/(.5*b),d.calculateShiftDir(z),l?(x=2*u*H,z.multiplyScalar(x),z.negate(),D.subVectors(g,h).multiplyScalar(Math.max(.1,x/1.88)),h.positionToArray(S,y),g.positionToArray(A,y),b>=2&&(P.addVectors(h,z).add(D).toArray(S,y+3),P.addVectors(g,z).sub(D).toArray(A,y+3),b>=3&&(P.subVectors(h,z).add(D).toArray(S,y+6),P.subVectors(g,z).sub(D).toArray(A,y+6)))):(x=(u-c)*H,z.multiplyScalar(x),b===2?(P.addVectors(h,z).toArray(S,y),P.subVectors(h,z).toArray(S,y+3),P.addVectors(g,z).toArray(A,y),P.subVectors(g,z).toArray(A,y+3)):b===3?(h.positionToArray(S,y),P.addVectors(h,z).toArray(S,y+3),P.subVectors(h,z).toArray(S,y+6),g.positionToArray(A,y),P.addVectors(g,z).toArray(A,y+3),P.subVectors(g,z).toArray(A,y+6)):(h.positionToArray(S,y),g.positionToArray(A,y)))}else h.positionToArray(S,y),g.positionToArray(A,y);if(C&&k&&(r.bondColorToArray(d,1,C,y),r.bondColorToArray(d,0,k,y),s&&b>1))for(m=1;m<b;++m)bV(C,y,_=3*m+y,3),bV(k,y,_,3);if(O&&O.array&&(O.array[R]=N,s&&b>1))for(m=1;m<b;++m)O.array[R+m]=N;if(T&&(T[R]=n.atomRadius(h),s&&b>1))for(w=T[R]*c/(l?1:.5*b),m=l?1:0;m<b;++m)T[R+m]=w;if(B&&(B[R]=n.atomRadius(g),s&&b>1))for(w=B[R]*c/(l?1:.5*b),m=l?1:0;m<b;++m)B[R+m]=w;R+=s?b:1}),f},Wt.prototype.getBackboneAtomData=function(e){return e=Object.assign({atomSet:this.atomSetCache.__backbone},e),this.getAtomData(e)},Wt.prototype.getBackboneBondData=function(e){return e=Object.assign({bondSet:this.getBackboneBondSet(),bondStore:this.backboneBondStore},e),this.getBondData(e)},Wt.prototype.getRungAtomData=function(e){return e=Object.assign({atomSet:this.atomSetCache.__rung},e),this.getAtomData(e)},Wt.prototype.getRungBondData=function(e){return e=Object.assign({bondSet:this.getRungBondSet(),bondStore:this.rungBondStore},e),this.getBondData(e)},Wt.prototype.getBoundingBox=function(e,t){Ze&&Ge.time("getBoundingBox"),t=t||new cr;var n=1/0,r=1/0,i=1/0,o=-1/0,a=-1/0,s=-1/0;return this.eachAtom(function(l){var c=l.x,u=l.y,f=l.z;c<n&&(n=c),u<r&&(r=u),f<i&&(i=f),c>o&&(o=c),u>a&&(a=u),f>s&&(s=f)},e),t.min.set(n,r,i),t.max.set(o,a,s),Ze&&Ge.timeEnd("getBoundingBox"),t},Wt.prototype.getPrincipalAxes=function(e){Ze&&Ge.time("getPrincipalAxes");var t=0,n=new Dn(3,this.atomCount),r=n.data;return this.eachAtom(function(i){r[t+0]=i.x,r[t+1]=i.y,r[t+2]=i.z,t+=3},e),Ze&&Ge.timeEnd("getPrincipalAxes"),new Mb(n)},Wt.prototype.atomCenter=function(e){return e?this.getBoundingBox(e).getCenter(new V):this.center.clone()},Wt.prototype.hasCoords=function(){if(this._hasCoords===void 0){var e=this.atomStore;this._hasCoords=DS(e.x)!==0||$S(e.x)!==0||DS(e.y)!==0||$S(e.y)!==0||DS(e.z)!==0||$S(e.z)!==0||e.count/this.modelStore.count==1}return this._hasCoords},Wt.prototype.getSequence=function(e){var t=[],n=this.getResidueProxy();return this.eachAtom(function(r){n.index=r.residueIndex,r.index===n.traceAtomIndex&&t.push(n.getResname1())},e),t},Wt.prototype.getAtomIndices=function(e){if(e&&e.string){var t=[];return this.eachAtom(function(n){t.push(n.index)},e),new Uint32Array(t)}return this.getAtomData({what:{index:!0}}).index},Wt.prototype.getChainnameCount=function(e){var t=new Set;return this.eachChain(function(n){n.residueCount&&t.add(n.chainname)},e),t.size},Wt.prototype.updatePosition=function(e,t){t===void 0&&(t=!0);var n=0;this.eachAtom(function(r){r.positionFromArray(e,n),n+=3},void 0),this._hasCoords=void 0,t&&this.refreshPosition()},Wt.prototype.refreshPosition=function(){this.getBoundingBox(void 0,this.boundingBox),this.boundingBox.getCenter(this.center),this.spatialHash=new bh(this.atomStore,this.boundingBox),this.signals.refreshed.dispatch(this)},Wt.prototype.dispose=function(){this.frames&&(this.frames.length=0),this.boxes&&(this.boxes.length=0),this.bondStore.dispose(),this.backboneBondStore.dispose(),this.rungBondStore.dispose(),this.atomStore.dispose(),this.residueStore.dispose(),this.chainStore.dispose(),this.modelStore.dispose(),delete this.bondSet,delete this.atomSet},Object.defineProperties(Wt.prototype,lH);var cH=new cr,T$=[uT,vh,fT,yh,Yv,lT,Xv,cT,YA,dT,n_,r_],cst={aspectRatio:1.5,sphereDetail:2,radialSegments:50,disableImpostor:!1,openEnded:!1,dashedCylinder:!1,labelParams:{},pointSize:2,sizeAttenuation:!1,useTexture:!0,linewidth:2},xi=function(e,t){var n=this;e===void 0&&(e="shape"),t===void 0&&(t={}),this.boundingBox=new cr,this.bufferList=[],this.meshCount=0,this._primitiveData={},this.name=e,this.parameters=fs(t,cst),T$.forEach(function(r){Object.keys(r.fields).forEach(function(i){n._primitiveData[r.getShapeKey(i)]=[]}),n._primitiveData[r.getShapeKey("name")]=[]})},TR={center:{configurable:!0},type:{configurable:!0}};xi.prototype.addBuffer=function(e){this.bufferList.push(e);var t=e.geometry;return t.boundingBox||t.computeBoundingBox(),this.boundingBox.union(t.boundingBox),this},xi.prototype.addMesh=function(e,t,n,r,i){var o;e=rR(e),t=rR(t),Array.isArray(n)&&(n=Lc(n,e.length)),r&&(r=rR(r)),o=r===void 0||r.length==0?{position:e,color:t,index:n}:{position:e,color:t,index:n,normal:r};var a=new Eat(this,Object.assign({serial:this.meshCount,name:i},o)),s=new zu(Object.assign({picking:a},o));return this.bufferList.push(s),cH.setFromArray(e),this.boundingBox.union(cH),this.meshCount+=1,this},xi.prototype.addSphere=function(e,t,n,r){return Xv.objectToShape(this,{position:e,color:t,radius:n,name:r}),this},xi.prototype.addEllipsoid=function(e,t,n,r,i,o){return Yv.objectToShape(this,{position:e,color:t,radius:n,majorAxis:r,minorAxis:i,name:o}),this},xi.prototype.addTorus=function(e,t,n,r,i,o){return dT.objectToShape(this,{position:e,color:t,radius:n,majorAxis:r,minorAxis:i,name:o}),this},xi.prototype.addCylinder=function(e,t,n,r,i){return yh.objectToShape(this,{position1:e,position2:t,color:n,radius:r,name:i}),this},xi.prototype.addCone=function(e,t,n,r,i){return fT.objectToShape(this,{position1:e,position2:t,color:n,radius:r,name:i}),this},xi.prototype.addArrow=function(e,t,n,r,i){return uT.objectToShape(this,{position1:e,position2:t,color:n,radius:r,name:i}),this},xi.prototype.addBox=function(e,t,n,r,i,o){return vh.objectToShape(this,{position:e,color:t,size:n,heightAxis:r,depthAxis:i,name:o}),this},xi.prototype.addOctahedron=function(e,t,n,r,i,o){return lT.objectToShape(this,{position:e,color:t,size:n,heightAxis:r,depthAxis:i,name:o}),this},xi.prototype.addTetrahedron=function(e,t,n,r,i,o){return cT.objectToShape(this,{position:e,color:t,size:n,heightAxis:r,depthAxis:i,name:o}),this},xi.prototype.addText=function(e,t,n,r){return YA.objectToShape(this,{position:e,color:t,size:n,text:r}),this},xi.prototype.addPoint=function(e,t,n){return n_.objectToShape(this,{position:e,color:t,name:n}),this},xi.prototype.addWideline=function(e,t,n,r,i){return this.parameters.linewidth=r,r_.objectToShape(this,{position1:e,position2:t,color:n,name:i}),this},xi.prototype.addLabel=function(e,t,n,r){return console.warn("Shape.addLabel is deprecated, use .addText instead"),this.addText(e,t,n,r)},xi.prototype.getBufferList=function(){var e=this,t=[];return T$.forEach(function(n){e._primitiveData[n.getShapeKey("color")].length&&t.push(n.bufferFromShape(e,e.parameters))}),this.bufferList.concat(t)},xi.prototype.dispose=function(){var e=this;this.bufferList.forEach(function(t){t.dispose()}),this.bufferList.length=0,T$.forEach(function(t){Object.keys(t.fields).forEach(function(n){e._primitiveData[t.getShapeKey(n)].length=0}),e._primitiveData[t.getShapeKey("name")].length=0})},TR.center.get=function(){return this._center||(this._center=this.boundingBox.getCenter(new V)),this._center},TR.type.get=function(){return"Shape"},Object.defineProperties(xi.prototype,TR);var uH=function(e){function t(n,r,i){Array.isArray(n)||(n=[n]),e.call(this,n,r,i),this.type="buffer",this.parameters=Object.assign({},this.parameters,{colorScheme:null,colorScale:null,colorValue:null,colorDomain:null,colorMode:null}),this.buffer=n,this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){e.prototype.init.call(this,n),this.build()},t.prototype.create=function(){this.bufferList.push.apply(this.bufferList,this.buffer)},t.prototype.attach=function(n){var r=this;this.bufferList.forEach(function(i){r.viewer.add(i),i.setParameters(r.getBufferParams())}),this.setVisibility(this.visible),n()},t}(ni),N2=new lt,fH=new oo,Bd=function(e){function t(n,r,i){r===void 0&&(r={}),e.call(this,function(u,f){var d,p=f.attributes.position.array,h=f.index?f.index.array:void 0,g=u.position.length/3,v=p.length/3,m=g*v,y=new Float32Array(3*m),_=new Float32Array(3*m),b=new Float32Array(3*m);return h&&(d=Lc(g*h.length,m)),{position:y,color:b,index:d,normal:_,primitiveId:u.primitiveId||g$(g,v),picking:u.picking}}(n,i),r),this.updateNormals=!1;var o=i.attributes.position.array,a=i.attributes.normal.array,s=i.index?i.index.array:void 0;this.geoPosition=o,this.geoNormal=a,this.geoIndex=s,this.positionCount=n.position.length/3,this.geoPositionCount=o.length/3,this.transformedGeoPosition=new Float32Array(3*this.geoPositionCount),this.transformedGeoNormal=new Float32Array(3*this.geoPositionCount);var l=this.geometry.attributes;if(this.meshPosition=l.position.array,this.meshColor=l.color.array,this.meshNormal=l.normal.array,this.setAttributes(n),s){var c=this.geometry.getIndex();if(!c)return void Ge.error("Index is null");this.meshIndex=c.array,this.makeIndex()}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setAttributes=function(n,r){n===void 0&&(n={}),r===void 0&&(r=!1);var i,o,a,s,l,c,u,f,d,p=this.geometry.attributes,h=this.updateNormals;n.position&&(i=n.position,a=this.geoPosition,u=this.meshPosition,l=this.transformedGeoPosition,p.position.needsUpdate=!0,(h||r)&&(s=this.geoNormal,d=this.meshNormal,c=this.transformedGeoNormal,p.normal.needsUpdate=!0)),n.color&&(o=n.color,f=this.meshColor,p.color.needsUpdate=!0);for(var g=this.positionCount,v=this.geoPositionCount,m=0;m<g;++m){var y=void 0,_=void 0,b=m*v*3,x=3*m;if(i&&l&&u&&d&&a&&s&&(l.set(a),N2.makeTranslation(i[x],i[x+1],i[x+2]),this.applyPositionTransform(N2,m,x),aT(N2.elements,l),u.set(l,b),h&&c?(c.set(s),fH.getNormalMatrix(N2),DN(fH.elements,c),d.set(c,b)):r&&d.set(s,b)),o&&f)for(y=0;y<v;++y)f[_=b+3*y]=o[x],f[_+1]=o[x+1],f[_+2]=o[x+2]}},t.prototype.makeIndex=function(){var n=this.geoIndex,r=this.meshIndex;if(n)for(var i=this.positionCount,o=this.geoPositionCount,a=3*(n.length/3),s=0;s<i;++s){var l=s*a,c=l+a;r.set(n,l);for(var u=l;u<c;++u)r[u]+=s*o}},t}(zu),dH=new V,qoe=Object.assign({sphereDetail:1},Jo),ust=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,r,i,new hh(1,K(i.sphereDetail,1))),this.setAttributes(r,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return qoe},t.prototype.applyPositionTransform=function(r,i){var o=this._radius[i];dH.set(o,o,o),r.scale(dH)},t.prototype.setAttributes=function(r,i){r===void 0&&(r={}),r.radius&&(this._radius=r.radius),e.prototype.setAttributes.call(this,r,i)},Object.defineProperties(t.prototype,n),t}(Bd);On.add("shader/SphereImpostor.vert",`uniform mat4 projectionMatrixInverse;
uniform float clipNear;
varying float vRadius;
varying float vRadiusSq;
varying vec3 vPoint;
varying vec3 vPointViewPosition;
attribute vec2 mapping;
attribute float radius;
#ifdef PICKING
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
#include color_pars_vertex
#endif
#include matrix_scale
const mat4 D = mat4(
1.0, 0.0, 0.0, 0.0,
0.0, 1.0, 0.0, 0.0,
0.0, 0.0, 1.0, 0.0,
0.0, 0.0, 0.0, -1.0
);
mat4 transposeM( in mat4 inMatrix ) {
vec4 i0 = inMatrix[0];
vec4 i1 = inMatrix[1];
vec4 i2 = inMatrix[2];
vec4 i3 = inMatrix[3];
mat4 outMatrix = mat4(
vec4(i0.x, i1.x, i2.x, i3.x),
vec4(i0.y, i1.y, i2.y, i3.y),
vec4(i0.z, i1.z, i2.z, i3.z),
vec4(i0.w, i1.w, i2.w, i3.w)
);
return outMatrix;
}
void ComputePointSizeAndPositionInClipCoordSphere(){
vec2 xbc;
vec2 ybc;
mat4 T = mat4(
radius, 0.0, 0.0, 0.0,
0.0, radius, 0.0, 0.0,
0.0, 0.0, radius, 0.0,
position.x, position.y, position.z, 1.0
);
mat4 R = transposeM( projectionMatrix * modelViewMatrix * T );
float A = dot( R[ 3 ], D * R[ 3 ] );
float B = -2.0 * dot( R[ 0 ], D * R[ 3 ] );
float C = dot( R[ 0 ], D * R[ 0 ] );
xbc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );
xbc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );
float sx = abs( xbc[ 0 ] - xbc[ 1 ] ) * 0.5;
A = dot( R[ 3 ], D * R[ 3 ] );
B = -2.0 * dot( R[ 1 ], D * R[ 3 ] );
C = dot( R[ 1 ], D * R[ 1 ] );
ybc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );
ybc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );
float sy = abs( ybc[ 0 ] - ybc[ 1 ] ) * 0.5;
gl_Position.xy = vec2( 0.5 * ( xbc.x + xbc.y ), 0.5 * ( ybc.x + ybc.y ) );
gl_Position.xy -= mapping * vec2( sx, sy );
gl_Position.xy *= gl_Position.w;
}
void main(void){
#ifdef PICKING
vPickingColor = unpackColor( primitiveId );
#else
#include color_vertex
#endif
vRadius = radius * matrixScale( modelViewMatrix );
vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
mvPosition.z -= vRadius;
gl_Position = projectionMatrix * vec4( mvPosition.xyz, 1.0 );
ComputePointSizeAndPositionInClipCoordSphere();
vRadiusSq = vRadius * vRadius;
vec4 vPoint4 = projectionMatrixInverse * gl_Position;
vPoint = vPoint4.xyz / vPoint4.w;
vPointViewPosition = -mvPosition.xyz / mvPosition.w;
}`),On.add("shader/SphereImpostor.frag",`#define STANDARD
#define IMPOSTOR
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 interiorColor;
uniform float interiorDarkening;
uniform float roughness;
uniform float metalness;
uniform float opacity;
uniform float clipNear;
uniform mat4 projectionMatrix;
uniform float ortho;
varying float vRadius;
varying float vRadiusSq;
varying vec3 vPoint;
varying vec3 vPointViewPosition;
#ifdef PICKING
uniform float objectId;
varying vec3 vPickingColor;
#else
#include common
#include color_pars_fragment
#include fog_pars_fragment
#include bsdfs
#include lights_pars_begin
#include lights_physical_pars_fragment
#endif
bool flag2 = false;
bool interior = false;
vec3 cameraPos;
vec3 cameraNormal;
float calcDepth( in vec3 cameraPos ){
vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;
return 0.5 + 0.5 * clipZW.x / clipZW.y;
}
float calcClip( vec3 cameraPos ){
return dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );
}
bool Impostor( out vec3 cameraPos, out vec3 cameraNormal ){
vec3 cameraSpherePos = -vPointViewPosition;
cameraSpherePos.z += vRadius;
vec3 rayOrigin = mix( vec3( 0.0, 0.0, 0.0 ), vPoint, ortho );
vec3 rayDirection = mix( normalize( vPoint ), vec3( 0.0, 0.0, 1.0 ), ortho );
vec3 cameraSphereDir = mix( cameraSpherePos, rayOrigin - cameraSpherePos, ortho );
float B = dot( rayDirection, cameraSphereDir );
float det = B * B + vRadiusSq - dot( cameraSphereDir, cameraSphereDir );
if( det < 0.0 ){
discard;
return false;
}
float sqrtDet = sqrt( det );
float posT = mix( B + sqrtDet, B + sqrtDet, ortho );
float negT = mix( B - sqrtDet, sqrtDet - B, ortho );
cameraPos = rayDirection * negT + rayOrigin;
#ifdef NEAR_CLIP
if( calcDepth( cameraPos ) <= 0.0 ){
cameraPos = rayDirection * posT + rayOrigin;
interior = true;
}else if( calcClip( cameraPos ) > 0.0 ){
cameraPos = rayDirection * posT + rayOrigin;
interior = true;
flag2 = true;
}
#else
if( calcDepth( cameraPos ) <= 0.0 ){
cameraPos = rayDirection * posT + rayOrigin;
interior = true;
}
#endif
cameraNormal = normalize( cameraPos - cameraSpherePos );
cameraNormal *= float(!interior) * 2.0 - 1.0;
return !interior;
}
void main(void){
bool flag = Impostor( cameraPos, cameraNormal );
#ifdef NEAR_CLIP
if( calcClip( cameraPos ) > 0.0 )
discard;
#endif
gl_FragDepthEXT = calcDepth( cameraPos );
if( !flag ){
#ifdef NEAR_CLIP
if( flag2 ){
gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );
}else if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );
}
#else
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );
}
#endif
}
if (gl_FragDepthEXT < 0.0)
discard;
if (gl_FragDepthEXT > 1.0)
discard;
#ifdef PICKING
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
vec3 vNormal = cameraNormal;
vec3 vViewPosition = -cameraPos;
vec4 diffuseColor = vec4( diffuse, opacity );
ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
vec3 totalEmissiveLight = emissive;
#include color_fragment
#include roughnessmap_fragment
#include metalnessmap_fragment
#include normal_fragment_begin
#include lights_physical_fragment
#include lights_fragment_begin
#include lights_fragment_end
vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;
if( interior ){
#ifdef USE_INTERIOR_COLOR
outgoingLight.xyz = interiorColor;
#else
#ifdef DIFFUSE_INTERIOR
outgoingLight.xyz = vColor;
#endif
#endif
outgoingLight.xyz *= 1.0 - interiorDarkening;
}
gl_FragColor = vec4( outgoingLight, diffuseColor.a );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);var UN=function(e){function t(r,i,o){o===void 0&&(o={}),e.call(this,i,o),this.index=Lc(this.indexSize,this.attributeSize),this.makeIndex(),this.initIndex(this.index),this.addAttributes({mapping:{type:r,value:null}}),this.setAttributes({primitiveId:T0(this.size)})}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={attributeSize:{configurable:!0},indexSize:{configurable:!0}};return n.attributeSize.get=function(){return this.size*this.mappingSize},n.indexSize.get=function(){return this.size*this.mappingIndicesSize},t.prototype.addAttributes=function(r){var i={};for(var o in r){var a=r[o];i[o]={type:a.type,value:null}}e.prototype.addAttributes.call(this,i)},t.prototype.getAttributeIndex=function(r){return 3*r*this.mappingSize},t.prototype.setAttributes=function(r){r&&!r.position&&r.position1&&r.position2&&(r.position=Ac(r.position1,r.position2));var i,o,a,s,l,c,u,f=this.size,d=this.mappingSize,p=this.geometry.attributes;for(var h in r)if(h!=="index"&&h!=="picking"){o=r[h],a=(i=p[h]).itemSize,s=i.array;for(var g=0;g<f;++g){c=(l=g*a)*d;for(var v=0;v<d;++v){u=c+a*v;for(var m=0;m<a;++m)s[u+m]=o[l+m]}}i.needsUpdate=!0}},t.prototype.makeMapping=function(){for(var r=this.size,i=this.mapping,o=this.mappingSize,a=this.mappingItemSize,s=this.geometry.attributes.mapping.array,l=0;l<r;l++)s.set(i,l*a*o)},t.prototype.makeIndex=function(){for(var r=this.size,i=this.mappingSize,o=this.mappingIndices,a=this.mappingIndicesSize,s=this.index,l=0;l<r;l++){var c=l*a,u=l*i;s.set(o,c);for(var f=0;f<a;++f)s[c+f]+=u}},Object.defineProperties(t.prototype,n),t}(vn),fst=new Float32Array([-1,1,-1,-1,1,1,1,-1]),dst=new Uint16Array([0,1,2,1,3,2]),VN=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,"v2",r,i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={mapping:{configurable:!0},mappingIndices:{configurable:!0},mappingIndicesSize:{configurable:!0},mappingSize:{configurable:!0},mappingItemSize:{configurable:!0}};return n.mapping.get=function(){return fst},n.mappingIndices.get=function(){return dst},n.mappingIndicesSize.get=function(){return 6},n.mappingSize.get=function(){return 4},n.mappingItemSize.get=function(){return 2},Object.defineProperties(t.prototype,n),t}(UN),pst=function(e){function t(n,r){r===void 0&&(r={}),e.call(this,n,r),this.isImpostor=!0,this.vertexShader="SphereImpostor.vert",this.fragmentShader="SphereImpostor.frag",this.addUniforms({projectionMatrixInverse:{value:new lt},ortho:{value:0}}),this.addAttributes({radius:{type:"f",value:null}}),this.setAttributes(n),this.makeMapping()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(VN);Object.assign({disableImpostor:!1},qoe);var Nd=function(e,t){return!Cc||t&&t.disableImpostor?new ust(e,t):new pst(e,t)};ds.add("sphere",Nd),On.add("shader/Point.vert",`uniform float clipNear;
uniform float clipRadius;
uniform vec3 clipCenter;
uniform float size;
uniform float canvasHeight;
uniform float pixelRatio;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
#include color_pars_vertex
varying vec3 vViewPosition;
#endif
#include common
void main(){
#if defined( PICKING )
vPickingColor = unpackColor( primitiveId );
#else
#include color_vertex
#endif
#include begin_vertex
#include project_vertex
#ifdef USE_SIZEATTENUATION
gl_PointSize = size * pixelRatio * ( ( canvasHeight / 2.0 ) / -mvPosition.z );
#else
gl_PointSize = size * pixelRatio;
#endif
#ifndef PICKING
vViewPosition = -mvPosition.xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
#include radiusclip_vertex
}`),On.add("shader/Point.frag",`uniform vec3 diffuse;
uniform float opacity;
uniform float clipNear;
uniform float clipRadius;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#ifdef USE_MAP
uniform sampler2D map;
#endif
#if defined( PICKING )
uniform float objectId;
varying vec3 vPickingColor;
#else
#include common
#include color_pars_fragment
#include fog_pars_fragment
varying vec3 vViewPosition;
#endif
void main(){
#include nearclip_fragment
#include radiusclip_fragment
#if defined( PICKING )
#ifdef USE_MAP
if( texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) ).a < 0.5 )
discard;
#endif
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
vec3 outgoingLight = vec3( 0.0 );
vec4 diffuseColor = vec4( diffuse, 1.0 );
#ifdef USE_MAP
diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );
#endif
#include color_fragment
#include alphatest_fragment
outgoingLight = diffuseColor.rgb;
gl_FragColor = vec4( outgoingLight, diffuseColor.a * opacity );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);var hst=Object.assign({pointSize:1,sizeAttenuation:!0,sortParticles:!1,alphaTest:.5,useTexture:!1,forceTransparent:!1,edgeBleach:0},Jo),mst=Object.assign({pointSize:{uniform:"size"},sizeAttenuation:{updateShader:!0},sortParticles:{},alphaTest:{updateShader:!0},useTexture:{updateShader:!0},forceTransparent:{},edgeBleach:{uniform:!0}},Hh),HN=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,r,i),this.parameterTypes=mst,this.vertexShader="Point.vert",this.fragmentShader="Point.frag",this.isPoint=!0,this.addUniforms({size:{value:this.parameters.pointSize},canvasHeight:{value:1},pixelRatio:{value:1},map:{value:null}})}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return hst},t.prototype.makeMaterial=function(){e.prototype.makeMaterial.call(this),this.makeTexture();var r=this.material,i=this.wireframeMaterial,o=this.pickingMaterial;r.uniforms.map.value=this.tex,r.needsUpdate=!0,i.uniforms.map.value=this.tex,i.needsUpdate=!0,o.uniforms.map.value=this.tex,o.needsUpdate=!0},t.prototype.makeTexture=function(){this.tex&&this.tex.dispose(),this.tex=function(r){for(var i,o,a=r||{},s=K(a.width,256),l=K(a.height,256),c=[s/2,l/2],u=Math.min(s/2,l/2),f=K(a.delta,1/(u+1))*u,d=0,p=0,h=new Uint8Array(s*l*4),g=0,v=h.length;g<v;g+=4){var m=1-Nx(u-f,u,(i=void 0,o=void 0,i=c[0]-d,o=c[1]-p,Math.sqrt(i*i+o*o)));h[g]=255*m,h[g+1]=255*m,h[g+2]=255*m,h[g+3]=255*m,++d===s&&(d=0,p++)}var y=new Lu(h,s,l);return y.needsUpdate=!0,y}({delta:this.parameters.edgeBleach})},t.prototype.getDefines=function(r){var i=e.prototype.getDefines.call(this,r);return this.parameters.sizeAttenuation&&(i.USE_SIZEATTENUATION=1),this.parameters.useTexture&&(i.USE_MAP=1),this.parameters.alphaTest>0&&this.parameters.alphaTest<=1&&(i.ALPHATEST=this.parameters.alphaTest.toPrecision(2)),i},t.prototype.setUniforms=function(r){r&&r.edgeBleach!==void 0&&(this.makeTexture(),r.map=this.tex),e.prototype.setUniforms.call(this,r)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.tex&&this.tex.dispose()},Object.defineProperties(t.prototype,n),t}(vn);ds.add("point",HN);var pH=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="dot",this.parameters=Object.assign({thresholdType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},thresholdMin:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdMax:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdOut:{type:"boolean",rebuild:!0},dotType:{type:"select",rebuild:!0,options:{"":"",sphere:"sphere",point:"point"}},radiusType:{type:"select",options:{"":"",value:"value","abs-value":"abs-value","value-min":"value-min",deviation:"deviation",size:"size"}},radius:{type:"number",precision:3,max:10,min:.001,property:"size"},scale:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,disableImpostor:!0,pointSize:{type:"number",precision:1,max:100,min:0,buffer:!0},sizeAttenuation:{type:"boolean",buffer:!0},sortParticles:{type:"boolean",rebuild:!0},useTexture:{type:"boolean",buffer:!0},alphaTest:{type:"range",step:.001,max:1,min:0,buffer:!0},forceTransparent:{type:"boolean",buffer:!0},edgeBleach:{type:"range",step:.001,max:1,min:0,buffer:!0}},this.parameters,{colorScheme:{type:"select",update:"color",options:{"":"",value:"value",uniform:"uniform",random:"random"}}}),n instanceof $n?(this.surface=void 0,this.volume=new Cs(n)):(this.surface=n,this.volume=void 0),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.colorScheme=K(r.colorScheme,"uniform"),r.colorValue=K(r.colorValue,14540253),this.thresholdType=K(r.thresholdType,"sigma"),this.thresholdMin=K(r.thresholdMin,2),this.thresholdMax=K(r.thresholdMax,1/0),this.thresholdOut=K(r.thresholdOut,!1),this.dotType=K(r.dotType,"point"),this.radius=K(r.radius,.1),this.scale=K(r.scale,1),this.pointSize=K(r.pointSize,1),this.sizeAttenuation=K(r.sizeAttenuation,!0),this.sortParticles=K(r.sortParticles,!1),this.useTexture=K(r.useTexture,!1),this.alphaTest=K(r.alphaTest,.5),this.forceTransparent=K(r.forceTransparent,!1),this.edgeBleach=K(r.edgeBleach,0),e.prototype.init.call(this,r),this.build()},t.prototype.attach=function(n){var r=this;this.bufferList.forEach(function(i){r.viewer.add(i)}),this.setVisibility(this.visible),n()},t.prototype.create=function(){var n={};if(this.volume){var r,i,o=this.volume;this.thresholdType==="sigma"?(r=o.getValueForSigma(this.thresholdMin),i=o.getValueForSigma(this.thresholdMax)):(r=this.thresholdMin,i=this.thresholdMax),o.setFilter(r,i,this.thresholdOut),Object.assign(n,{position:o.getDataPosition(),color:o.getDataColor(this.getColorParams())}),this.dotType==="sphere"&&Object.assign(n,{radius:o.getDataSize(this.radius,this.scale),picking:o.getDataPicking()})}else{var a=this.surface;Object.assign(n,{position:a.getPosition(),color:a.getColor(this.getColorParams())}),this.dotType==="sphere"&&Object.assign(n,{radius:a.getSize(this.radius,this.scale),picking:a.getPicking()})}this.dotType==="sphere"?this.dotBuffer=new Nd(n,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!1})):this.dotBuffer=new HN(n,this.getBufferParams({pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,sortParticles:this.sortParticles,useTexture:this.useTexture,alphaTest:this.alphaTest,forceTransparent:this.forceTransparent,edgeBleach:this.edgeBleach})),this.bufferList.push(this.dotBuffer)},t.prototype.update=function(n){if(n===void 0&&(n={}),this.bufferList.length!==0){var r={};n.color&&(this.volume?Object.assign(r,{color:this.volume.getDataColor(this.getColorParams())}):Object.assign(r,{color:this.surface.getColor(this.getColorParams())})),this.dotType==="sphere"&&(n.radius||n.scale)&&(this.volume?Object.assign(r,{radius:this.volume.getDataSize(this.radius,this.scale)}):Object.assign(r,{radius:this.surface.getSize(this.radius,this.scale)})),this.dotBuffer.setAttributes(r)}},t.prototype.setParameters=function(n,r,i){return r===void 0&&(r={}),n&&n.thresholdType!==void 0&&this.volume instanceof $n&&(this.thresholdType==="value"&&n.thresholdType==="sigma"?(this.thresholdMin=this.volume.getSigmaForValue(this.thresholdMin),this.thresholdMax=this.volume.getSigmaForValue(this.thresholdMax)):this.thresholdType==="sigma"&&n.thresholdType==="value"&&(this.thresholdMin=this.volume.getValueForSigma(this.thresholdMin),this.thresholdMax=this.volume.getValueForSigma(this.thresholdMax)),this.thresholdType=n.thresholdType),n&&n.radiusType!==void 0&&(n.radiusType==="radius"?this.radius=.1:this.radius=parseFloat(n.radiusType),r.radius=!0,this.dotType!=="sphere"||Cc&&!this.disableImpostor||(i=!0)),n&&n.radius!==void 0&&(r.radius=!0,this.dotType!=="sphere"||Cc&&!this.disableImpostor||(i=!0)),n&&n.scale!==void 0&&(r.scale=!0,this.dotType!=="sphere"||Cc&&!this.disableImpostor||(i=!0)),e.prototype.setParameters.call(this,n,r,i),this},t}(ni);On.add("shader/Image.vert",`uniform float clipRadius;
uniform vec3 clipCenter;
varying vec2 vUv;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
void main() {
#include begin_vertex
#include project_vertex
vUv = uv;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )
vViewPosition = -mvPosition.xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
}`),On.add("shader/Image.frag",`uniform sampler2D map;
uniform float opacity;
uniform vec2 mapSize;
uniform float clipNear;
uniform float clipRadius;
varying vec2 vUv;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
uniform sampler2D pickingMap;
uniform float objectId;
#else
#include fog_pars_fragment
#endif
#if defined( CUBIC_INTERPOLATION )
#if defined( CATMULROM_FILTER ) || defined( MITCHELL_FILTER )
#if defined( CATMULROM_FILTER )
const float B = 0.0;
const float C = 0.5;
#elif defined( MITCHELL_FILTER )
const float B = 0.333;
const float C = 0.333;
#endif
float filter( float x ){
float f = x;
if( f < 0.0 ){
f = -f;
}
if( f < 1.0 ){
return ( ( 12.0 - 9.0 * B - 6.0 * C ) * ( f * f * f ) +
( -18.0 + 12.0 * B + 6.0 *C ) * ( f * f ) +
( 6.0 - 2.0 * B ) ) / 6.0;
}else if( f >= 1.0 && f < 2.0 ){
return ( ( -B - 6.0 * C ) * ( f * f * f )
+ ( 6.0 * B + 30.0 * C ) * ( f *f ) +
( - ( 12.0 * B ) - 48.0 * C ) * f +
8.0 * B + 24.0 * C ) / 6.0;
}else{
return 0.0;
}
}
#elif defined( BSPLINE_FILTER )
float filter( float x ){
float f = x;
if( f < 0.0 ){
f = -f;
}
if( f >= 0.0 && f <= 1.0 ){
return ( 2.0 / 3.0 ) + ( 0.5 ) * ( f * f * f ) - ( f * f );
}else if( f > 1.0 && f <= 2.0 ){
return 1.0 / 6.0 * pow( ( 2.0 - f ), 3.0 );
}
return 1.0;
}
#else
float filter( float x ){
return 1.0;
}
#endif
vec4 biCubic( sampler2D tex, vec2 texCoord ){
vec2 texelSize = 1.0 / mapSize;
texCoord -= texelSize / 2.0;
vec4 nSum = vec4( 0.0 );
float nDenom = 0.0;
vec2 cell = fract( texCoord * mapSize );
for( float m = -1.0; m <= 2.0; ++m ){
for( float n = -1.0; n <= 2.0; ++n ){
vec4 vecData = texture2D(
tex, texCoord + texelSize * vec2( m, n )
);
float c = filter( m - cell.x ) * filter( -n + cell.y );
nSum += vecData * c;
nDenom += c;
}
}
return nSum / nDenom;
}
#endif
void main(){
#include nearclip_fragment
#include radiusclip_fragment
#if defined( CUBIC_INTERPOLATION )
gl_FragColor = biCubic( map, vUv );
#else
gl_FragColor = texture2D( map, vUv );
#endif
#if defined( PICKING )
if( gl_FragColor.a < 0.3 )
discard;
gl_FragColor = vec4( texture2D( pickingMap, vUv ).xyz, objectId );
#else
if( gl_FragColor.a < 0.01 )
discard;
gl_FragColor.a *= opacity;
#include fog_fragment
#endif
}`);var gst=new Uint16Array([0,1,2,1,3,2]),vst=new Float32Array([0,1,0,0,1,1,1,0]),yst=Object.assign({filter:"nearest",forceTransparent:!0},Jo),bst=Object.assign({filter:{updateShader:!0,uniform:!0}},Hh),_st=function(e){function t(r,i){e.call(this,{position:r.position,index:gst,picking:r.picking},i),this.parameterTypes=bst,this.alwaysTransparent=!0,this.hasWireframe=!1,this.vertexShader="Image.vert",this.fragmentShader="Image.frag";var o=r.imageData,a=r.width,s=r.height,l=new Lu(o,a,s);l.flipY=!0,this.tex=l;for(var c=o.length,u=new Uint8Array(c),f=0;f<c;f+=4){var d=f/4;u[f]=d>>16&255,u[f+1]=d>>8&255,u[f+2]=255&d}var p=new Lu(u,a,s);p.flipY=!0,p.minFilter=sr,p.magFilter=sr,this.pickingTex=p,this.addUniforms({map:{value:l},pickingMap:{value:p},mapSize:{value:new rt(a,s)}}),this.geometry.setAttribute("uv",new Dt(vst,2))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return yst},t.prototype.getDefines=function(r){var i=e.prototype.getDefines.call(this,r),o=this.parameters.filter;return o.startsWith("cubic")&&(i.CUBIC_INTERPOLATION=1,o.endsWith("bspline")?i.BSPLINE_FILTER=1:o.endsWith("catmulrom")?i.CATMULROM_FILTER=1:o.endsWith("mitchell")&&(i.MITCHELL_FILTER=1)),i},t.prototype.updateTexture=function(){var r=this.tex,i=this.parameters.filter;i.startsWith("cubic")?(r.minFilter=sr,r.magFilter=sr):i==="linear"?(r.minFilter=mi,r.magFilter=mi):(r.minFilter=sr,r.magFilter=sr),r.needsUpdate=!0,this.pickingTex.needsUpdate=!0},t.prototype.makeMaterial=function(){e.prototype.makeMaterial.call(this),this.updateTexture();var r=this.material;r.uniforms.map.value=this.tex,r.blending=nd,r.needsUpdate=!0;var i=this.wireframeMaterial;i.uniforms.map.value=this.tex,i.blending=nd,i.needsUpdate=!0;var o=this.pickingMaterial;o.uniforms.map.value=this.tex,o.uniforms.pickingMap.value=this.pickingTex,o.blending=nd,o.needsUpdate=!0},t.prototype.setUniforms=function(r){r&&r.filter!==void 0&&(this.updateTexture(),r.map=this.tex),e.prototype.setUniforms.call(this,r)},Object.defineProperties(t.prototype,n),t}(vn),O$=function(e,t){var n=t||{};this.dimension=K(n.dimension,"x"),this.positionType=K(n.positionType,"percent"),this.position=K(n.position,30),this.thresholdType=K(n.thresholdType,"sigma"),this.thresholdMin=K(n.thresholdMin,-1/0),this.thresholdMax=K(n.thresholdMax,1/0),this.normalize=K(n.normalize,!1),this.volume=e};O$.prototype.getPositionFromCoordinate=function(e){var t,n=this.dimension,r=this.volume,i=r.matrix,o=new V().setFromMatrixPosition(i)[n],a=new V().setFromMatrixScale(i)[n];return t=n==="x"?r.nx:n==="y"?r.ny:r.nz,Math.round(((e-o)/(t/100)+1)/a)},O$.prototype.getData=function(e){e=e||{};var t,n=this.volume,r=n.data,i=n.matrix;function o(ae){return Math.round(ae/100*(t-1))}function a(ae,ye,re,te){return 3*(re*n.ny*n.nx+ye*n.nx+ae)+te}t=this.positionType==="coordinate"?this.getPositionFromCoordinate(this.position):this.position;var s,l,c,u,f,d=new Float32Array(12),p=new V,h=0,g=0,v=0,m=n.nx,y=n.ny,_=n.nz;function b(ae,ye,re,te){p.set(ae,ye,re).applyMatrix4(i).toArray(d,te)}this.dimension==="x"?(c=o(n.nx),u=n.ny-1,f=n.nz-1,s=n.nz,l=n.ny,m=(h=c)+1,b(c,0,0,0),b(c,u,0,3),b(c,0,f,6),b(c,u,f,9)):this.dimension==="y"?(c=n.nx-1,u=o(n.ny),f=n.nz-1,s=n.nz,l=n.nx,y=(g=u)+1,b(0,u,0,0),b(c,u,0,3),b(0,u,f,6),b(c,u,f,9)):this.dimension==="z"&&(c=n.nx-1,u=n.ny-1,f=o(n.nz),s=n.nx,l=n.ny,_=(v=f)+1,b(0,0,f,0),b(0,u,f,3),b(c,0,f,6),b(c,u,f,9));var x,w,S=0,A=0,C=new Uint8Array(s*l*4),k=new Float32Array(s*l);this.thresholdType==="sigma"?(x=n.getValueForSigma(this.thresholdMin),w=n.getValueForSigma(this.thresholdMax)):(x=this.thresholdMin,w=this.thresholdMax);var O=Object.assign({},e.colorParams,{volume:n});this.normalize&&(O.domain=[0,1]);var T,B=pn.getScheme(O),R=new Float32Array(3),P=B.getScale(),D=0,z=0;if(this.normalize){D=1/0,T=-1/0;for(var N=g;N<y;++N)for(var H=h;H<m;++H)for(var J=v;J<_;++J){var ne=r[a(H,N,J,0)/3];ne<D&&(D=ne),ne>T&&(T=ne)}z=T-D}for(var oe=g;oe<y;++oe)for(var Z=h;Z<m;++Z)for(var ce=v;ce<_;++ce){var se=a(Z,oe,ce,0)/3,Y=r[se];this.normalize&&(Y=(Y-D)/z),B.colorToArray(P(Y),R),C[S]=Math.round(255*R[0]),C[S+1]=Math.round(255*R[1]),C[S+2]=Math.round(255*R[2]),C[S+3]=Y>x&&Y<w?255:0,k[A]=se,++A,S+=4}var he=new Lat(k,n);return{position:d,imageData:C,width:s,height:l,picking:he}};var xst=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="slice",this.parameters=Object.assign({filter:{type:"select",buffer:!0,options:{nearest:"nearest",linear:"linear","cubic-bspline":"cubic-bspline","cubic-catmulrom":"cubic-catmulrom","cubic-mitchell":"cubic-mitchell"}},positionType:{type:"select",rebuild:!0,options:{percent:"percent",coordinate:"coordinate"}},position:{type:"range",step:.1,max:100,min:1,rebuild:!0},dimension:{type:"select",rebuild:!0,options:{x:"x",y:"y",z:"z"}},thresholdType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},thresholdMin:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdMax:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},normalize:{type:"boolean",rebuild:!0}},this.parameters,{flatShaded:null,side:null,wireframe:null,linewidth:null,colorScheme:null,roughness:null,metalness:null,diffuse:null}),this.volume=n,this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=this.volume,i=n||{};i.colorDomain=K(i.colorDomain,[r.min,r.max]),i.colorScheme=K(i.colorScheme,"value"),i.colorScale=K(i.colorScale,"Spectral"),this.colorScheme="value",this.dimension=K(i.dimension,"x"),this.filter=K(i.filter,"cubic-bspline"),this.positionType=K(i.positionType,"percent"),this.position=K(i.position,30),this.thresholdType=K(i.thresholdType,"sigma"),this.thresholdMin=K(i.thresholdMin,-1/0),this.thresholdMax=K(i.thresholdMax,1/0),this.normalize=K(i.normalize,!1),e.prototype.init.call(this,i),this.build()},t.prototype.attach=function(n){var r=this;this.bufferList.forEach(function(i){r.viewer.add(i)}),this.setVisibility(this.visible),n()},t.prototype.create=function(){var n=new O$(this.volume,{positionType:this.positionType,position:this.position,dimension:this.dimension,thresholdType:this.thresholdType,thresholdMin:this.thresholdMin,thresholdMax:this.thresholdMax,normalize:this.normalize}),r=new _st(n.getData({colorParams:this.getColorParams()}),this.getBufferParams({filter:this.filter}));this.bufferList.push(r)},t}(ni);function OR(e){Ge.error("makeRepresentation: representation type "+e+" unknown")}var GN={name:"some element",status:""},hg=function(e,t){t===void 0&&(t={}),this.stage=e,this.signals={statusChanged:new en.Signal,nameChanged:new en.Signal,disposed:new en.Signal},this.parameters=fs(t,this.defaultParameters),this.uuid=RN()},IR={defaultParameters:{configurable:!0},name:{configurable:!0}};IR.defaultParameters.get=function(){return GN},IR.name.get=function(){return this.parameters.name},hg.prototype.setStatus=function(e){return this.parameters.status=e,this.signals.statusChanged.dispatch(e),this},hg.prototype.setName=function(e){return this.parameters.name=e,this.signals.nameChanged.dispatch(e),this},hg.prototype.dispose=function(){this.signals.disposed.dispatch()},Object.defineProperties(hg.prototype,IR);var wst=Object.assign({visible:!0},GN),Sst=function(e){function t(r,i,o,a){o===void 0&&(o={}),e.call(this,r,Object.assign({name:i.type},o)),this.parent=a,this.signals=Object.assign({visibilityChanged:new en.Signal,parametersChanged:new en.Signal},this.signals),this.setRepresentation(i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0},visible:{configurable:!0},type:{configurable:!0}};return n.defaultParameters.get=function(){return wst},n.visible.get=function(){return this.parameters.visible},n.type.get=function(){return"representation"},t.prototype.getType=function(){return this.repr.type},t.prototype.setRepresentation=function(r){this._disposeRepresentation(),this.repr=r,this.stage.tasks.listen(this.repr.tasks),this.updateVisibility()},t.prototype._disposeRepresentation=function(){this.repr&&(this.stage.tasks.unlisten(this.repr.tasks),this.repr.dispose())},t.prototype.dispose=function(){this.parent&&this.parent.hasRepresentation(this)?this.parent.removeRepresentation(this):(this._disposeRepresentation(),this.signals.disposed.dispatch())},t.prototype.setVisibility=function(r){return this.parameters.visible=r,this.updateVisibility(),this.signals.visibilityChanged.dispatch(this.parameters.visible),this},t.prototype.getVisibility=function(){return this.parent?this.parent.parameters.visible&&this.parameters.visible:this.parameters.visible},t.prototype.toggleVisibility=function(){return this.setVisibility(!this.parameters.visible)},t.prototype.updateVisibility=function(){this.repr.setVisibility(this.getVisibility())},t.prototype.update=function(r){return this.repr.update(r),this},t.prototype.build=function(r){return this.repr.build(r),this},t.prototype.setSelection=function(r){var i=this.repr;return i.setSelection&&i.setSelection(r),this},t.prototype.setParameters=function(r){return this.repr.setParameters(r),this.signals.parametersChanged.dispatch(this.repr.getParameters()),this},t.prototype.getParameters=function(){return this.repr.getParameters()},t.prototype.setColor=function(r){return this.repr.setColor(r),this},Object.defineProperties(t.prototype,n),t}(hg),_m=new lt,Cst=new V,Xoe={name:"",status:"",visible:!0},kn=function(e,t,n){n===void 0&&(n={}),this.stage=e,this.object=t,this.signals={representationAdded:new en.Signal,representationRemoved:new en.Signal,visibilityChanged:new en.Signal,matrixChanged:new en.Signal,statusChanged:new en.Signal,nameChanged:new en.Signal,disposed:new en.Signal},this.reprList=[],this.annotationList=[],this.matrix=new lt,this.position=new V,this.quaternion=new lr,this.scale=new V(1,1,1),this.transform=new lt,this.parameters=fs(n,this.defaultParameters),this.uuid=RN(),this.viewer=e.viewer,this.controls=new HS(this)},vy={defaultParameters:{configurable:!0},name:{configurable:!0},status:{configurable:!0},visible:{configurable:!0}};vy.defaultParameters.get=function(){return Xoe},vy.name.get=function(){return this.parameters.name},vy.status.get=function(){return this.parameters.status},vy.visible.get=function(){return this.parameters.visible},kn.prototype.setPosition=function(e){return Array.isArray(e)?this.position.fromArray(e):this.position.copy(e),this.updateMatrix(),this},kn.prototype.setRotation=function(e){if(Array.isArray(e))if(e.length===3){var t=new md().fromArray(e);this.quaternion.setFromEuler(t)}else this.quaternion.fromArray(e);else e instanceof md?this.quaternion.setFromEuler(e):this.quaternion.copy(e);return this.updateMatrix(),this},kn.prototype.setScale=function(e){return this.scale.set(e,e,e),this.updateMatrix(),this},kn.prototype.setTransform=function(e){return this.transform.copy(e),this.updateMatrix(),this},kn.prototype.updateMatrix=function(){var e=this.getCenterUntransformed(Cst);this.matrix.makeTranslation(-e.x,-e.y,-e.z),_m.makeRotationFromQuaternion(this.quaternion),this.matrix.premultiply(_m),_m.makeScale(this.scale.x,this.scale.y,this.scale.z),this.matrix.premultiply(_m);var t=this.position;_m.makeTranslation(t.x+e.x,t.y+e.y,t.z+e.z),this.matrix.premultiply(_m),this.matrix.premultiply(this.transform),this.updateRepresentationMatrices(),this.stage.viewer.updateBoundingBox(),this.signals.matrixChanged.dispatch(this.matrix)},kn.prototype.updateRepresentationMatrices=function(){var e=this;this.reprList.forEach(function(t){t.setParameters({matrix:e.matrix})})},kn.prototype.addAnnotation=function(e,t,n){var r=new Pf(this,e,t,n);return this.annotationList.push(r),r},kn.prototype.eachAnnotation=function(e){this.annotationList.slice().forEach(e)},kn.prototype.removeAnnotation=function(e){var t=this.annotationList.indexOf(e);t!==-1&&(this.annotationList.splice(t,1),e.dispose())},kn.prototype.removeAllAnnotations=function(){this.eachAnnotation(function(e){return e.dispose()}),this.annotationList.length=0},kn.prototype._addRepresentation=function(e,t,n,r){r===void 0&&(r=!1);var i=n||{},o=this.stage.getParameters();i.matrix=this.matrix.clone(),i.quality=i.quality||o.quality,i.disableImpostor=K(i.disableImpostor,!o.impostor),i.useWorker=K(i.useWorker,o.workerDefault),i.visible=K(i.visible,!0);var a=Object.assign({},i,{visible:this.parameters.visible&&i.visible}),s=function(c,u,f,d){var p;if(Ze&&Ge.time("makeRepresentation "+c),u instanceof Wt){if(!(p=xr.get(c)))return void OR(c)}else if(u instanceof Ao)if(c==="surface")p=A$;else{if(c!=="dot")return void OR(c);p=pH}else if(u instanceof $n)if(c==="surface")p=A$;else if(c==="dot")p=pH;else{if(c!=="slice")return void OR(c);p=xst}else if(u instanceof xi)p=uH,u=u.getBufferList();else{if(c!=="buffer")return void Ge.error("makeRepresentation: object "+u+" unknown");p=uH}var h=new p(u,f,d);return Ze&&Ge.timeEnd("makeRepresentation "+c),h}(e,t,this.viewer,a),l=new Sst(this.stage,s,i,this);return r||(this.reprList.push(l),this.signals.representationAdded.dispatch(l)),l},kn.prototype.addBufferRepresentation=function(e,t){return this._addRepresentation.call(this,"buffer",e,t)},kn.prototype.hasRepresentation=function(e){return this.reprList.indexOf(e)!==-1},kn.prototype.eachRepresentation=function(e){this.reprList.slice().forEach(e)},kn.prototype.removeRepresentation=function(e){var t=this.reprList.indexOf(e);t!==-1&&(this.reprList.splice(t,1),e.dispose(),this.signals.representationRemoved.dispatch(e))},kn.prototype.updateRepresentations=function(e){this.reprList.forEach(function(t){return t.update(e)}),this.stage.viewer.requestRender()},kn.prototype.removeAllRepresentations=function(){this.eachRepresentation(function(e){return e.dispose()})},kn.prototype.dispose=function(){this.removeAllAnnotations(),this.removeAllRepresentations(),this.reprList.length=0,this.signals.disposed.dispatch()},kn.prototype.setVisibility=function(e){return this.parameters.visible=e,this.eachRepresentation(function(t){return t.updateVisibility()}),this.eachAnnotation(function(t){return t.updateVisibility()}),this.signals.visibilityChanged.dispatch(e),this},kn.prototype.setStatus=function(e){return this.parameters.status=e,this.signals.statusChanged.dispatch(e),this},kn.prototype.setName=function(e){return this.parameters.name=e,this.signals.nameChanged.dispatch(e),this},kn.prototype.getBox=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(e=this).getBoxUntransformed.apply(e,t).clone().applyMatrix4(this.matrix)},kn.prototype.getCenter=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return(e=this).getCenterUntransformed.apply(e,t).clone().applyMatrix4(this.matrix)},kn.prototype.getZoom=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];return this.stage.getZoomForBox((e=this).getBox.apply(e,t))},kn.prototype.getBoxUntransformed=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new cr},kn.prototype.getCenterUntransformed=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return this.getBoxUntransformed().getCenter(new V)},kn.prototype.autoView=function(e){this.stage.animationControls.zoomMove(this.getCenter(),this.getZoom(),K(e,0))},Object.defineProperties(kn.prototype,vy);var mg=function(e){e===void 0&&(e=[]),this.list=e;for(var t=e.length,n=0;n<t;++n)e[n].signals.disposed.add(this._remove,this)},hH={first:{configurable:!0}};mg.prototype._remove=function(e){var t=this.list.indexOf(e);t!==-1&&this.list.splice(t,1)},hH.first.get=function(){return this.list.length>0?this.list[0]:void 0},mg.prototype.forEach=function(e){return this.list.forEach(e),this},mg.prototype.dispose=function(){return this.forEach(function(e){return e.dispose()})},Object.defineProperties(mg.prototype,hH);var Yoe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setParameters=function(n){return this.forEach(function(r){return r.setParameters(n)})},t.prototype.setVisibility=function(n){return this.forEach(function(r){return r.setVisibility(n)})},t.prototype.setSelection=function(n){return this.forEach(function(r){return r.setSelection(n)})},t.prototype.setColor=function(n){return this.forEach(function(r){return r.setColor(n)})},t.prototype.update=function(n){return this.forEach(function(r){return r.update(n)})},t.prototype.build=function(n){return this.forEach(function(r){return r.build(n)})},t.prototype.dispose=function(n){return this.forEach(function(r){return r.dispose()})},t}(mg),Ast=Object.assign({defaultStep:1,defaultTimeout:50,defaultInterpolateType:"",defaultInterpolateStep:5,defaultMode:"loop",defaultDirection:"forward",initialFrame:0},GN),Pst=function(e){function t(r,i,o){var a=this;o===void 0&&(o={}),e.call(this,r,Object.assign({name:i.name},o)),this.trajectory=i,this.signals=Object.assign(this.signals,{frameChanged:new en.Signal,playerChanged:new en.Signal,countChanged:new en.Signal,parametersChanged:new en.Signal}),i.signals.frameChanged.add(function(s){a.signals.frameChanged.dispatch(s)}),i.signals.playerChanged.add(function(s){a.signals.playerChanged.dispatch(s)}),i.signals.countChanged.add(function(s){a.signals.countChanged.dispatch(s)}),o.initialFrame!==void 0&&this.setFrame(o.initialFrame)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0},type:{configurable:!0}};return n.defaultParameters.get=function(){return Ast},n.type.get=function(){return"trajectory"},t.prototype.setFrame=function(r){this.trajectory.setFrame(r)},t.prototype.setParameters=function(r){r===void 0&&(r={}),this.trajectory.setParameters(r),this.signals.parametersChanged.dispatch(r)},t.prototype.dispose=function(){this.trajectory.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(hg),WN=function(e,t){this.name=e,this.path=t,this.coordinates=[],this.boxes=[],this.times=[],this.timeOffset=0,this.deltaTime=1},mH={type:{configurable:!0}};mH.type.get=function(){return"Frames"},Object.defineProperties(WN.prototype,mH);var Tb=function(e,t){var n,r;if(this.A=new Dn(3,3),this.W=new Dn(1,3),this.U=new Dn(3,3),this.V=new Dn(3,3),this.VH=new Dn(3,3),this.R=new Dn(3,3),this.tmp=new Dn(3,3),this.c=new Dn(3,3),e instanceof Wt)n=e.atomCount;else{if(!(e instanceof Float32Array))return;n=e.length/3}if(t instanceof Wt)r=t.atomCount;else{if(!(t instanceof Float32Array))return;r=t.length/3}var i=Math.min(n,r),o=new Dn(3,i),a=new Dn(3,i);this.coords1t=new Dn(i,3),this.coords2t=new Dn(i,3),this.transformationMatrix=new lt,this.c.data.set([1,0,0,0,1,0,0,0,-1]),this.prepCoords(e,o,i,!1),this.prepCoords(t,a,i,!1),this._superpose(o,a)};Tb.prototype._superpose=function(e,t){var n,r,i,o,a,s,l,c,u,f,d,p,h,g,v,m,y,_,b,x,w,S;this.mean1=_$(e),this.mean2=_$(t),x$(e,this.mean1),x$(t,this.mean2),gl(this.coords1t,e),gl(this.coords2t,t),zS(this.A,this.coords2t,this.coords1t),$oe(this.A,this.W,this.U,this.V),n=this.V,r=this.VH,i=n.data,o=r.data,a=i[4],s=i[8],l=i[5],c=i[7],u=i[0],f=u*a,d=u*l,p=i[3],h=i[1],g=p*h,v=i[2],m=p*v,y=i[6],x=1/(f*s-d*c-g*s+m*c+(_=y*h)*l-(b=y*v)*a),o[0]=(a*s-l*c)*x,o[1]=-(h*s-v*c)*x,o[2]=-(-h*l+v*a)*x,o[3]=-(p*s-l*y)*x,o[4]=(u*s-b)*x,o[5]=-(d-m)*x,o[6]=-(-p*c+a*y)*x,o[7]=-(u*c-_)*x,o[8]=(f-g)*x,SR(this.R,this.U,this.VH),w=this.R,(S=w.data)[0]*S[4]*S[8]-S[0]*S[5]*S[7]-S[3]*S[1]*S[8]+S[3]*S[2]*S[7]+S[6]*S[1]*S[5]-S[6]*S[2]*S[4]<0&&(Ze&&Ge.log("R not a right handed system"),SR(this.tmp,this.c,this.VH),SR(this.R,this.U,this.tmp));var A=new Dn(4,4),C=new Dn(4,4),k=new Dn(4,4),O=new Dn(4,4),T=new Dn(4,4),B=new Dn(4,4),R=this.R.data,P=this.mean1,D=this.mean2;O.data.set([1,0,0,-P[0],0,1,0,-P[1],0,0,1,-P[2],0,0,0,1]),T.data.set([R[0],R[1],R[2],0,R[3],R[4],R[5],0,R[6],R[7],R[8],0,0,0,0,1]),B.data.set([1,0,0,D[0],0,1,0,D[1],0,0,1,D[2],0,0,0,1]),gl(C,O),zS(A,T,C),gl(k,A),zS(C,B,k),gl(A,C),this.transformationMatrix.elements=A.data},Tb.prototype.prepCoords=function(e,t,n,r){var i=0,o=t.data,a=3,s=3*n;if(r&&(s=4*n,a=4),e instanceof Wt)e.eachAtom(function(l){i<s&&(o[i+0]=l.x,o[i+1]=l.y,o[i+2]=l.z,r&&(o[i+3]=1),i+=a)});else if(e instanceof Float32Array)for(;i<s;i+=a)i<s&&(o[i]=e[i],o[i+1]=e[i+1],o[i+2]=e[i+2],r&&(o[i+3]=1));else Ge.warn("prepCoords: input type unknown")},Tb.prototype.transform=function(e){var t;if(e instanceof Wt)t=e.atomCount;else{if(!(e instanceof Float32Array))return;t=e.length/3}var n=new Dn(4,t),r=new Dn(t,4);this.prepCoords(e,n,t,!0);var i=this.transformationMatrix,o=i.determinant();if(!o)return o;var a=new Dn(4,4);a.data=i.elements,function(p,h,g){for(var v=0,m=0,y=0,_=0,b=0,x=0,w=0,S=0,A=h.cols,C=h.rows,k=g.cols,O=h.data,T=g.data,B=p.data,R=0;v<C;_+=A,v++)for(w=0,m=0;m<k;S++,w++,m++){for(x=w,b=_,R=0,y=0;y<A;b++,x+=k,y++)R+=O[b]*T[x];B[S]=R}}(r,n,a);var s=0,l=r.data;if(e instanceof Wt){e.eachAtom(function(p){p.x=l[s],p.y=l[s+1],p.z=l[s+2],s+=4});var c=new lt;c.getInverse(i);var u=e.biomolDict;for(var f in u)u.hasOwnProperty(f)&&u[f].partList.forEach(function(p){p.matrixList.forEach(function(h){h.premultiply(i),h.multiply(c)})})}else if(e instanceof Float32Array)for(var d=4*t;s<d;s+=4)e[s]=l[s],e[s+1]=l[s+1],e[s+2]=l[s+2];else Ge.warn("transform: input type unknown");return this.transformationMatrix};var Mst={step:1,timeout:50,start:0,end:0,interpolateType:"",interpolateStep:5,mode:"loop",direction:"forward"},Ql=function(e,t){var n=this;t===void 0&&(t={}),this.signals={startedRunning:new en.Signal,haltedRunning:new en.Signal},this._run=!1,this._previousTime=0,this._currentTime=0,this._currentStep=1,e.signals.playerChanged.add(function(i){i!==n&&n.pause()},this);var r=K(e.frameCount,1);this.traj=e,this.parameters=fs(t,Mst),this.parameters.end=Math.min(K(t.end,r-1),r-1),this.parameters.step=K(t.step,Math.ceil((r+1)/100)),this._currentFrame=this.parameters.start,this._direction=this.parameters.direction==="bounce"?"forward":this.parameters.direction,e.signals.countChanged.add(function(i){n.parameters.end=Math.min(K(n.parameters.end,i-1),i-1)},this),this._animate=this._animate.bind(this)},gH={isRunning:{configurable:!0}};gH.isRunning.get=function(){return this._run},Ql.prototype.setParameters=function(e){e===void 0&&(e={}),roe(this.parameters,e),e.direction!==void 0&&this.parameters.direction!=="bounce"&&(this._direction=this.parameters.direction)},Ql.prototype._animate=function(){if(this._run){this._currentTime=window.performance.now();var e=this._currentTime-this._previousTime,t=this.parameters.interpolateType?this.parameters.interpolateStep:1,n=this.parameters.timeout/t,r=this.traj;if(r&&r.frameCount&&!r.inProgress&&e>=n)if(this.parameters.interpolateType)if(this._currentStep>this.parameters.interpolateStep&&(this._currentStep=1),this._currentStep===1&&(this._currentFrame=this._nextInterpolated()),r.hasFrame(this._currentFrame)){this._currentStep+=1;var i=this._currentStep/(this.parameters.interpolateStep+1),o=this._currentFrame,a=o[0],s=o[1],l=o[2],c=o[3];r.setFrameInterpolated(a,s,l,c,i,this.parameters.interpolateType),this._previousTime=this._currentTime}else r.loadFrame(this._currentFrame);else{var u=this._next();r.hasFrame(u)?(r.setFrame(u),this._previousTime=this._currentTime):r.loadFrame(u)}window.requestAnimationFrame(this._animate)}},Ql.prototype._next=function(){var e,t=this.parameters;return((e=this._direction==="forward"?this.traj.currentFrame+t.step:this.traj.currentFrame-t.step)>t.end||e<t.start)&&(t.direction==="bounce"&&(this._direction==="forward"?this._direction="backward":this._direction="forward"),t.mode==="once"?(this.pause(),e=t.direction==="forward"?t.end:t.direction==="backward"||this._direction==="forward"?t.start:t.end):this._direction==="forward"?(e=t.start,t.interpolateType&&(e=Math.min(t.end,e+t.step))):(e=t.end,t.interpolateType&&(e=Math.max(t.start,e-t.step)))),e},Ql.prototype._nextInterpolated=function(){var e,t,n,r=this.parameters,i=this._next();return this._direction==="forward"?(e=Math.max(r.start,i-r.step),t=Math.max(r.start,i-2*r.step),n=Math.max(r.start,i-3*r.step)):(e=Math.min(r.end,i+r.step),t=Math.min(r.end,i+2*r.step),n=Math.min(r.end,i+3*r.step)),[i,e,t,n]},Ql.prototype.toggle=function(){this._run?this.pause():this.play()},Ql.prototype.play=function(){if(!this._run){this.traj.player!==this&&this.traj.setPlayer(this),this._currentStep=1;var e=this.parameters,t=this.traj.currentFrame,n=Math.ceil(t/e.step)*e.step;e.direction==="forward"&&t>=e.end?n=e.start:e.direction==="backward"&&t<=e.start&&(n=e.end),this.traj.setFrame(n),this._run=!0,this._animate(),this.signals.startedRunning.dispatch()}},Ql.prototype.pause=function(){this._run=!1,this.signals.haltedRunning.dispatch()},Ql.prototype.stop=function(){this.pause(),this.traj.setFrame(this.parameters.start)},Object.defineProperties(Ql.prototype,gH);var Xn=function(e,t,n){var r=this;n===void 0&&(n={}),this.signals={countChanged:new en.Signal,frameChanged:new en.Signal,playerChanged:new en.Signal},this.frameCache={},this.loadQueue={},this.boxCache={},this.pathCache={},this.frameCacheSize=0,this._frameCount=0,this._currentFrame=-1,this._disposed=!1,this.deltaTime=K(n.deltaTime,0),this.timeOffset=K(n.timeOffset,0),this.centerPbc=K(n.centerPbc,!1),this.removePbc=K(n.removePbc,!1),this.removePeriodicity=K(n.removePeriodicity,!1),this.superpose=K(n.superpose,!1),this.name=e.replace(/^.*[\\/]/,""),this.trajPath=e,this.selection=new Hn(K(n.sele,"backbone and not hydrogen")),this.selection.signals.stringChanged.add(function(){r.selectionIndices=r.structure.getAtomIndices(r.selection),r._resetCache(),r._saveInitialCoords(),r.setFrame(r._currentFrame)})},RR={frameCount:{configurable:!0},currentFrame:{configurable:!0}};RR.frameCount.get=function(){return this._frameCount},RR.currentFrame.get=function(){return this._currentFrame},Xn.prototype._init=function(e){this.setStructure(e),this._loadFrameCount(),this.setPlayer(new Ql(this))},Xn.prototype._loadFrameCount=function(){},Xn.prototype.setStructure=function(e){this.structure=e,this.atomCount=e.atomCount,this.backboneIndices=this._getIndices(new Hn("backbone and not hydrogen")),this._makeAtomIndices(),this._saveStructureCoords(),this.selectionIndices=this._getIndices(this.selection),this._resetCache(),this._saveInitialCoords(),this.setFrame(this._currentFrame)},Xn.prototype._saveInitialCoords=function(){var e=this;this.structure.hasCoords()?(this.initialCoords=new Float32Array(this.structureCoords),this._makeSuperposeCoords()):this.frameCache[0]?(this.initialCoords=new Float32Array(this.frameCache[0]),this._makeSuperposeCoords()):this.loadFrame(0,function(){return e._saveInitialCoords()})},Xn.prototype._saveStructureCoords=function(){this.structureCoords=this.structure.getAtomData({what:{position:!0}}).position},Xn.prototype.setSelection=function(e){return this.selection.setString(e),this},Xn.prototype._getIndices=function(e){var t=0,n=e.test,r=[];return n&&this.structure.eachAtom(function(i){n(i)&&r.push(t),t+=1}),r},Xn.prototype._makeSuperposeCoords=function(){var e=3*this.selectionIndices.length;this.coords1=new Float32Array(e),this.coords2=new Float32Array(e);for(var t=this.initialCoords,n=this.coords2,r=0;r<e;r+=3){var i=3*this.selectionIndices[r/3];n[r+0]=t[i+0],n[r+1]=t[i+1],n[r+2]=t[i+2]}},Xn.prototype._makeAtomIndices=function(){Ge.error("Trajectory._makeAtomIndices not implemented")},Xn.prototype._resetCache=function(){this.frameCache={},this.loadQueue={},this.boxCache={},this.pathCache={},this.frameCacheSize=0,this.initialCoords=new Float32Array(0)},Xn.prototype.setParameters=function(e){e===void 0&&(e={});var t=!1;e.centerPbc!==void 0&&e.centerPbc!==this.centerPbc&&(this.centerPbc=e.centerPbc,t=!0),e.removePeriodicity!==void 0&&e.removePeriodicity!==this.removePeriodicity&&(this.removePeriodicity=e.removePeriodicity,t=!0),e.removePbc!==void 0&&e.removePbc!==this.removePbc&&(this.removePbc=e.removePbc,t=!0),e.superpose!==void 0&&e.superpose!==this.superpose&&(this.superpose=e.superpose,t=!0),this.deltaTime=K(e.deltaTime,this.deltaTime),this.timeOffset=K(e.timeOffset,this.timeOffset),t&&(this._resetCache(),this.setFrame(this._currentFrame))},Xn.prototype.hasFrame=function(e){var t=this;return Array.isArray(e)?e.every(function(n){return!!t.frameCache[n]}):!!this.frameCache[e]},Xn.prototype.setFrame=function(e,t){var n=this;return e===void 0||(this.inProgress=!0,e===-1||this.frameCache[e]?(this._updateStructure(e),t&&t()):this.loadFrame(e,function(){n._updateStructure(e),t&&t()})),this},Xn.prototype._interpolate=function(e,t,n,r,i,o){var a,s=this.frameCache;a=o==="spline"?function(l,c,u,f,d){for(var p=l.length,h=new Float32Array(p),g=0;g<p;g+=3){var v=g+1,m=g+2;h[g]=uu(f[g],u[g],c[g],l[g],d,1),h[v]=uu(f[v],u[v],c[v],l[v],d,1),h[m]=uu(f[m],u[m],c[m],l[m],d,1)}return h}(s[e],s[t],s[n],s[r],i):function(l,c,u){for(var f=l.length,d=new Float32Array(f),p=0;p<f;p+=3){var h=p+1,g=p+2;d[p]=Ps(c[p],l[p],u),d[h]=Ps(c[h],l[h],u),d[g]=Ps(c[g],l[g],u)}return d}(s[e],s[t],i),this.structure.updatePosition(a),this._currentFrame=e,this.signals.frameChanged.dispatch(e)},Xn.prototype.setFrameInterpolated=function(e,t,n,r,i,o,a){var s=this;if(e===void 0)return this;var l=this.frameCache,c=[];return l[r]||c.push(r),l[n]||c.push(n),l[t]||c.push(t),l[e]||c.push(e),c.length?this.loadFrame(c,function(){s._interpolate(e,t,n,r,i,o),a&&a()}):(this._interpolate(e,t,n,r,i,o),a&&a()),this},Xn.prototype.loadFrame=function(e,t){var n=this;Array.isArray(e)?e.forEach(function(r){n.loadQueue[r]||n.frameCache[r]||(n.loadQueue[r]=!0,n._loadFrame(r,function(){delete n.loadQueue[r]}))}):this.loadQueue[e]||this.frameCache[e]||(this.loadQueue[e]=!0,this._loadFrame(e,function(){delete n.loadQueue[e],t&&t()}))},Xn.prototype._loadFrame=function(e,t){Ge.error("Trajectory._loadFrame not implemented",e,t)},Xn.prototype._updateStructure=function(e){this._disposed?console.error("updateStructure: traj disposed"):(e===-1?this.structureCoords&&this.structure.updatePosition(this.structureCoords):this.structure.updatePosition(this.frameCache[e]),this.structure.trajectory={name:this.trajPath,frame:e},this._currentFrame=e,this.inProgress=!1,this.signals.frameChanged.dispatch(e))},Xn.prototype._doSuperpose=function(e){for(var t=3*this.selectionIndices.length,n=this.coords1,r=this.coords2,i=0;i<t;i+=3){var o=3*this.selectionIndices[i/3];n[i+0]=e[o+0],n[i+1]=e[o+1],n[i+2]=e[o+2]}new Tb(n,r).transform(e)},Xn.prototype._process=function(e,t,n,r){if(this._setFrameCount(r),t){if(this.backboneIndices.length>0&&this.centerPbc){var i=[t[0],t[4],t[8]],o=function(s,l,c){return[cR(l,c[0],3,0,s),cR(l,c[1],3,1,s),cR(l,c[2],3,2,s)]}(this.backboneIndices,n,i);(function(s,l,c){if(c[0]!==0&&c[8]!==0&&c[4]!==0)for(var u=s.length,f=c[0],d=c[1],p=c[2],h=-l[0]+f+f/2,g=-l[1]+d+d/2,v=-l[2]+p+p/2,m=0;m<u;m+=3)s[m+0]=(s[m+0]+h)%f,s[m+1]=(s[m+1]+g)%d,s[m+2]=(s[m+2]+v)%p})(n,o,i)}if(this.removePeriodicity){var a=function(s){return[BS(s,3,0),BS(s,3,1),BS(s,3,2)]}(n);(function(s,l,c){if(l[0]!==0&&l[8]!==0&&l[4]!==0)for(var u=s.length,f=3;f<u;f+=3)for(var d=0;d<3;++d){var p=(s[f+d]-c[d])/l[3*d+d];Math.abs(p)>.5&&(s[f+d]-=l[3*d+d]*Math.round(p))}})(n,t,a)}this.removePbc&&function(s,l){if(l[0]!==0&&l[8]!==0&&l[4]!==0)for(var c=s.length,u=3;u<c;u+=3)for(var f=0;f<3;++f){var d=s[u+f]-s[u-3+f];if(Math.abs(d)>.9*l[3*f+f])if(d>0)for(var p=0;p<3;++p)s[u+p]-=l[3*f+p];else for(var h=0;h<3;++h)s[u+h]+=l[3*f+h]}}(n,t)}this.selectionIndices.length>0&&this.coords1&&this.superpose&&this._doSuperpose(n),this.frameCache[e]=n,this.boxCache[e]=t,this.frameCacheSize+=1},Xn.prototype._setFrameCount=function(e){e!==this._frameCount&&(this._frameCount=e,this.signals.countChanged.dispatch(e))},Xn.prototype.dispose=function(){this._resetCache(),this._disposed=!0,this.player&&this.player.stop()},Xn.prototype.setPlayer=function(e){this.player=e,this.signals.playerChanged.dispatch(e)},Xn.prototype.getFrameTime=function(e){return this.timeOffset+e*this.deltaTime},Object.defineProperties(Xn.prototype,RR);var Est=function(e){function t(r,i,o){var a=o||{};a.timeOffset=K(a.timeOffset,r.timeOffset),a.deltaTime=K(a.deltaTime,r.deltaTime),e.call(this,"",i,a),this.name=r.name,this.path=r.path,this.frames=r.coordinates,this.boxes=r.boxes,this._init(i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"frames"},t.prototype._makeAtomIndices=function(){this.structure.type==="StructureView"?this.atomIndices=this.structure.getAtomIndices():this.atomIndices=void 0},t.prototype._loadFrame=function(r,i){var o,a=this.frames[r];if(this.atomIndices){var s=this.atomIndices,l=s.length;o=new Float32Array(3*l);for(var c=0;c<l;++c){var u=3*c,f=3*s[c];o[u+0]=a[f+0],o[u+1]=a[f+1],o[u+2]=a[f+2]}}else o=new Float32Array(a);var d=this.boxes[r],p=this.frames.length;this._process(r,d,o,p),typeof i=="function"&&i()},t.prototype._loadFrameCount=function(){this.frames&&this._setFrameCount(this.frames.length)},Object.defineProperties(t.prototype,n),t}(Xn),Tst=function(e){function t(r,i,o){e.call(this,"",i,o),this._init(i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"structure"},t.prototype._makeAtomIndices=function(){this.structure.atomSet&&this.structure.atomSet.getSize()<this.structure.atomStore.count?this.atomIndices=this.structure.getAtomIndices():this.atomIndices=void 0},t.prototype._loadFrame=function(r,i){var o,a=this.structure,s=a.frames[r];if(this.atomIndices){var l=this.atomIndices,c=l.length;o=new Float32Array(3*c);for(var u=0;u<c;++u){var f=3*u,d=3*l[u];o[f+0]=s[d+0],o[f+1]=s[d+1],o[f+2]=s[d+2]}}else o=new Float32Array(s);var p=a.boxes[r],h=a.frames.length;this._process(r,p,o,h),typeof i=="function"&&i()},t.prototype._loadFrameCount=function(){this._setFrameCount(this.structure.frames.length)},Object.defineProperties(t.prototype,n),t}(Xn),Ost=function(e){function t(r,i,o){e.call(this,r,i,o),this._init(i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"remote"},t.prototype._makeAtomIndices=function(){var r=[];if(this.structure.type==="StructureView"){for(var i=this.structure.getAtomIndices(),o=i.length,a=i[0],s=i[0],l=1;l<o;++l){var c=i[l];s+1<c&&(r.push([a,s+1]),a=c),s=c}r.push([a,s+1])}else r.push([0,this.atomCount]);this.atomIndices=r},t.prototype._loadFrame=function(r,i){var o=this,a=new XMLHttpRequest,s=oR.getFrameUrl(this.trajPath,r),l=oR.getFrameParams(this.trajPath,this.atomIndices);a.open("POST",s,!0),a.responseType="arraybuffer",a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.addEventListener("load",function(){var c=a.response;if(c){var u=new Int32Array(c,0,1)[0],f=new Float32Array(c,8,9),d=new Float32Array(c,44);o._process(r,f,d,u),typeof i=="function"&&i()}else Ge.error("empty arrayBuffer for '"+s+"'")},!1),a.send(l)},t.prototype._loadFrameCount=function(){var r=this,i=new XMLHttpRequest,o=oR.getCountUrl(this.trajPath);i.open("GET",o,!0),i.addEventListener("load",function(){r._setFrameCount(parseInt(i.response))},!1),i.send()},Object.defineProperties(t.prototype,n),t}(Xn),Ist=function(e){function t(r,i,o){e.call(this,"",i,o),this.requestCallback=r,this._init(i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"callback"},t.prototype._makeAtomIndices=function(){var r=[];if(this.structure.type==="StructureView"){for(var i=this.structure.getAtomIndices(),o=i.length,a=i[0],s=i[0],l=1;l<o;++l){var c=i[l];s+1<c&&(r.push([a,s+1]),a=c),s=c}r.push([a,s+1])}else r.push([0,this.atomCount]);this.atomIndices=r},t.prototype._loadFrame=function(r,i){var o=this;this.requestCallback(function(a,s,l,c){o._process(a,s,l,c),typeof i=="function"&&i()},r,this.atomIndices)},t.prototype._loadFrameCount=function(){var r=this;this.requestCallback(function(i){return r._setFrameCount(i)})},Object.defineProperties(t.prototype,n),t}(Xn);Wt.prototype.getView=function(e){return new Koe(this,e)};var Koe=function(e){function t(r,i){e.call(this),this.structure=r,this.selection=i,this.center=new V,this.boundingBox=new cr,this._bp=this.getBondProxy(),this._ap=this.getAtomProxy(),this._rp=this.getResidueProxy(),this._cp=this.getChainProxy(),this.selection&&this.selection.signals.stringChanged.add(this.refresh,this),this.structure.signals.refreshed.add(this.refresh,this),this.refresh()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},name:{configurable:!0},path:{configurable:!0},title:{configurable:!0},id:{configurable:!0},data:{configurable:!0},atomSetDict:{configurable:!0},biomolDict:{configurable:!0},entityList:{configurable:!0},unitcell:{configurable:!0},frames:{configurable:!0},boxes:{configurable:!0},validation:{configurable:!0},bondStore:{configurable:!0},backboneBondStore:{configurable:!0},rungBondStore:{configurable:!0},atomStore:{configurable:!0},residueStore:{configurable:!0},chainStore:{configurable:!0},modelStore:{configurable:!0},atomMap:{configurable:!0},residueMap:{configurable:!0},bondHash:{configurable:!0},spatialHash:{configurable:!0},_hasCoords:{configurable:!0}};return t.prototype.init=function(){},n.type.get=function(){return"StructureView"},n.name.get=function(){return this.structure.name},n.path.get=function(){return this.structure.path},n.title.get=function(){return this.structure.title},n.id.get=function(){return this.structure.id},n.data.get=function(){return this.structure.data},n.atomSetDict.get=function(){return this.structure.atomSetDict},n.biomolDict.get=function(){return this.structure.biomolDict},n.entityList.get=function(){return this.structure.entityList},n.unitcell.get=function(){return this.structure.unitcell},n.frames.get=function(){return this.structure.frames},n.boxes.get=function(){return this.structure.boxes},n.validation.get=function(){return this.structure.validation},n.bondStore.get=function(){return this.structure.bondStore},n.backboneBondStore.get=function(){return this.structure.backboneBondStore},n.rungBondStore.get=function(){return this.structure.rungBondStore},n.atomStore.get=function(){return this.structure.atomStore},n.residueStore.get=function(){return this.structure.residueStore},n.chainStore.get=function(){return this.structure.chainStore},n.modelStore.get=function(){return this.structure.modelStore},n.atomMap.get=function(){return this.structure.atomMap},n.residueMap.get=function(){return this.structure.residueMap},n.bondHash.get=function(){return this.structure.bondHash},n.spatialHash.get=function(){return this.structure.spatialHash},n._hasCoords.get=function(){return this.structure._hasCoords},n._hasCoords.set=function(r){this.structure._hasCoords=r},t.prototype.refresh=function(){Ze&&Ge.time("StructureView.refresh"),this.atomSetCache={};var r=this.structure;if(this.selection.isAllSelection()&&r!==this&&r.atomSet&&r.bondSet){for(var i in this.atomSet=r.atomSet.clone(),this.bondSet=r.bondSet.clone(),this.atomSetDict){var o=this.atomSetDict[i];this.atomSetCache["__"+i]=o.clone()}this.atomCount=r.atomCount,this.bondCount=r.bondCount,this.boundingBox.copy(r.boundingBox),this.center.copy(r.center)}else if(this.selection.isNoneSelection()&&r!==this&&r.atomSet&&r.bondSet){for(var a in this.atomSet=new Jt(r.atomCount),this.bondSet=new Jt(r.bondCount),this.atomSetDict)this.atomSetCache["__"+a]=new Jt(r.atomCount);this.atomCount=0,this.bondCount=0,this.boundingBox.makeEmpty(),this.center.set(0,0,0)}else{for(var s in this.atomSet=this.getAtomSet(this.selection,!0),r.atomSet&&(this.atomSet=this.atomSet.intersection(r.atomSet)),this.bondSet=this.getBondSet(),this.atomSetDict){var l=this.atomSetDict[s];this.atomSetCache["__"+s]=l.makeIntersection(this.atomSet)}this.atomCount=this.atomSet.getSize(),this.bondCount=this.bondSet.getSize(),this.boundingBox=this.getBoundingBox(),this.center=this.boundingBox.getCenter(new V)}Ze&&Ge.timeEnd("StructureView.refresh"),this.signals.refreshed.dispatch()},t.prototype.setSelection=function(r){this.selection=r,this.refresh()},t.prototype.getSelection=function(r){var i=[];r&&r.string&&i.push(r.string);var o=this.structure.getSelection();o&&o.string&&i.push(o.string),this.selection&&this.selection.string&&i.push(this.selection.string);var a="";return i.length>0&&(a="( "+i.join(" ) AND ( ")+" )"),new Hn(a)},t.prototype.getStructure=function(){return this.structure.getStructure()},t.prototype.eachBond=function(r,i){this.structure.eachBond(r,this.getSelection(i))},t.prototype.eachAtom=function(r,i){var o=this.getAtomProxy(),a=this.getAtomSet(i),s=this.atomStore.count;if(a.getSize()<s)a.forEach(function(c){o.index=c,r(o)});else for(var l=0;l<s;++l)o.index=l,r(o)},t.prototype.eachResidue=function(r,i){this.structure.eachResidue(r,this.getSelection(i))},t.prototype.eachResidueN=function(r,i){console.error("StructureView.eachResidueN() not implemented")},t.prototype.eachChain=function(r,i){this.structure.eachChain(r,this.getSelection(i))},t.prototype.eachModel=function(r,i){this.structure.eachModel(r,this.getSelection(i))},t.prototype.getAtomSet=function(r,i){i===void 0&&(i=!1);var o=this.structure.getAtomSet(r);return!i&&this.atomSet&&(o=o.makeIntersection(this.atomSet)),o},t.prototype.getAtomIndices=function(r){return this.structure.getAtomIndices(this.getSelection(r))},t.prototype.refreshPosition=function(){return this.structure.refreshPosition()},t.prototype.dispose=function(){this.selection&&this.selection.signals.stringChanged.remove(this.refresh,this),this.structure.signals.refreshed.remove(this.refresh,this),this.structure=new e,delete this.atomSet,delete this.bondSet},Object.defineProperties(t.prototype,n),t}(Wt),Rst=[[4,0,-2,-1,-2,0,-2,-1,-1,-1,-1,-2,-1,-1,-1,1,0,0,-3,-2],[0,9,-3,-4,-2,-3,-3,-1,-3,-1,-1,-3,-3,-3,-3,-1,-1,-1,-2,-2],[-2,-3,6,2,-3,-1,-1,-3,-1,-4,-3,1,-1,0,-2,0,-1,-3,-4,-3],[-1,-4,2,5,-3,-2,0,-3,1,-3,-2,0,-1,2,0,0,-1,-2,-3,-2],[-2,-2,-3,-3,6,-3,-1,0,-3,0,0,-3,-4,-3,-3,-2,-2,-1,1,3],[0,-3,-1,-2,-3,6,-2,-4,-2,-4,-3,0,-2,-2,-2,0,-2,-3,-2,-3],[-2,-3,-1,0,-1,-2,8,-3,-1,-3,-2,1,-2,0,0,-1,-2,-3,-2,2],[-1,-1,-3,-3,0,-4,-3,4,-3,2,1,-3,-3,-3,-3,-2,-1,3,-3,-1],[-1,-3,-1,1,-3,-2,-1,-3,5,-2,-1,0,-1,1,2,0,-1,-2,-3,-2],[-1,-1,-4,-3,0,-4,-3,2,-2,4,2,-3,-3,-2,-2,-2,-1,1,-2,-1],[-1,-1,-3,-2,0,-3,-2,1,-1,2,5,-2,-2,0,-1,-1,-1,1,-1,-1],[-2,-3,1,0,-3,0,1,-3,0,-3,-2,6,-2,0,0,1,0,-3,-4,-2],[-1,-3,-1,-1,-4,-2,-2,-3,-1,-3,-2,-2,7,-1,-2,-1,-1,-2,-4,-3],[-1,-3,0,2,-3,-2,0,-3,1,-2,0,0,-1,5,1,0,-1,-2,-2,-1],[-1,-3,-2,0,-3,-2,0,-3,2,-2,-1,0,-2,1,5,-1,-1,-3,-3,-2],[1,-1,0,0,-2,0,-1,-2,0,-2,-1,1,-1,0,-1,4,1,-2,-3,-2],[0,-1,-1,-1,-2,-2,-2,-1,-1,-1,-1,0,-1,-1,-1,1,5,0,-2,-2],[0,-1,-3,-2,-1,-3,-3,3,-2,1,1,-3,-2,-2,-3,-2,0,4,-3,-1],[-3,-2,-4,-3,1,-2,-2,-3,-3,-2,-1,-4,-4,-2,-3,-3,-2,-3,11,2],[-2,-2,-3,-2,3,-3,2,-1,-2,-1,-1,-2,-3,-1,-2,-2,-2,-1,2,7]];function vH(e,t){var n,r=0,i={};return t.forEach(function(o){n=0;var a={};o.forEach(function(s){a[e[n++]]=s}),i[e[r++]]=a}),i}var kst={blosum62:vH("ARNDCQEGHILKMFPSTWYVBZ?",[[4,-1,-2,-2,0,-1,-1,0,-2,-1,-1,-1,-1,-2,-1,1,0,-3,-2,0,-2,-1,0],[-1,5,0,-2,-3,1,0,-2,0,-3,-2,2,-1,-3,-2,-1,-1,-3,-2,-3,-1,0,-1],[-2,0,6,1,-3,0,0,0,1,-3,-3,0,-2,-3,-2,1,0,-4,-2,-3,3,0,-1],[-2,-2,1,6,-3,0,2,-1,-1,-3,-4,-1,-3,-3,-1,0,-1,-4,-3,-3,4,1,-1],[0,-3,-3,-3,9,-3,-4,-3,-3,-1,-1,-3,-1,-2,-3,-1,-1,-2,-2,-1,-3,-3,-2],[-1,1,0,0,-3,5,2,-2,0,-3,-2,1,0,-3,-1,0,-1,-2,-1,-2,0,3,-1],[-1,0,0,2,-4,2,5,-2,0,-3,-3,1,-2,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-2,0,-1,-3,-2,-2,6,-2,-4,-4,-2,-3,-3,-2,0,-2,-2,-3,-3,-1,-2,-1],[-2,0,1,-1,-3,0,0,-2,8,-3,-3,-1,-2,-1,-2,-1,-2,-2,2,-3,0,0,-1],[-1,-3,-3,-3,-1,-3,-3,-4,-3,4,2,-3,1,0,-3,-2,-1,-3,-1,3,-3,-3,-1],[-1,-2,-3,-4,-1,-2,-3,-4,-3,2,4,-2,2,0,-3,-2,-1,-2,-1,1,-4,-3,-1],[-1,2,0,-1,-3,1,1,-2,-1,-3,-2,5,-1,-3,-1,0,-1,-3,-2,-2,0,1,-1],[-1,-1,-2,-3,-1,0,-2,-3,-2,1,2,-1,5,0,-2,-1,-1,-1,-1,1,-3,-1,-1],[-2,-3,-3,-3,-2,-3,-3,-3,-1,0,0,-3,0,6,-4,-2,-2,1,3,-1,-3,-3,-1],[-1,-2,-2,-1,-3,-1,-1,-2,-2,-3,-3,-1,-2,-4,7,-1,-1,-4,-3,-2,-2,-1,-2],[1,-1,1,0,-1,0,0,0,-1,-2,-2,0,-1,-2,-1,4,1,-3,-2,-2,0,0,0],[0,-1,0,-1,-1,-1,-1,-2,-2,-1,-1,-1,-1,-2,-1,1,5,-2,-2,0,-1,-1,0],[-3,-3,-4,-4,-2,-2,-3,-2,-2,-3,-2,-3,-1,1,-4,-3,-2,11,2,-3,-4,-3,-2],[-2,-2,-2,-3,-2,-1,-2,-3,2,-1,-1,-2,-1,3,-3,-2,-2,2,7,-1,-3,-2,-1],[0,-3,-3,-3,-1,-2,-2,-3,-3,3,1,-2,1,-1,-2,-2,0,-3,-1,4,-3,-2,-1],[-2,-1,3,4,-3,0,1,-1,0,-3,-4,0,-3,-3,-2,0,-1,-4,-3,-3,4,1,-1],[-1,0,0,1,-3,3,4,-2,0,-3,-3,1,-1,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-2,0,0,-2,-1,-1,-1,-1,-1]]),blosum62x:vH("ACDEFGHIKLMNPQRSTVWY",Rst)},Hm=function(e,t,n,r,i){n===void 0&&(n=-10),r===void 0&&(r=-1),i===void 0&&(i="blosum62"),this.seq1=e,this.seq2=t,this.gapPenalty=n,this.gapExtensionPenalty=r,i&&(this.substMatrix=kst[i])};function Lst(e,t,n,r,i){var o,a,s,l,c;if(n===void 0&&(n=!1),r===void 0&&(r=""),i===void 0&&(i=""),n){var u=e,f=t;r&&i&&(u=e.getView(new Hn(r)),f=t.getView(new Hn(i)));var d,p,h=u.getSequence(),g=f.getSequence(),v=new Hm(h.join(""),g.join(""));v.calc(),v.trace(),o=0,a=0,s=v.ali1.length;for(var m=[],y=[],_=0;_<s;++_){var b=v.ali1[_],x=v.ali2[_];d=0,p=0,b==="-"?y[a]=!1:(y[a]=!0,d=1),x==="-"?m[o]=!1:(m[o]=!0,p=1),o+=d,a+=p}var w=[],S=[],A=u.getAtomProxy(),C=f.getAtomProxy();o=0,u.eachResidue(function(O){O.traceAtomIndex!==void 0&&O.traceAtomIndex===O.getAtomIndexByName("CA")&&(m[o]&&(A.index=O.getAtomIndexByName("CA"),w.push(A.x,A.y,A.z)),o+=1)}),o=0,f.eachResidue(function(O){O.traceAtomIndex!==void 0&&O.traceAtomIndex===O.getAtomIndexByName("CA")&&(y[o]&&(C.index=O.getAtomIndexByName("CA"),S.push(C.x,C.y,C.z)),o+=1)}),l=new Float32Array(w),c=new Float32Array(S)}else l=e.getView(new Hn(r+" and .CA")),c=t.getView(new Hn(i+" and .CA"));var k=new Tb(l,c).transform(e);return e.refreshPosition(),k}Hm.prototype.initMatrices=function(){this.n=this.seq1.length,this.m=this.seq2.length,this.score=void 0,this.ali="",this.S=[],this.V=[],this.H=[];for(var e=0;e<=this.n;++e){this.S[e]=[],this.V[e]=[],this.H[e]=[];for(var t=0;t<=this.m;++t)this.S[e][t]=0,this.V[e][t]=0,this.H[e][t]=0}for(var n=0;n<=this.n;++n)this.S[n][0]=this.gap(0),this.H[n][0]=-1/0;for(var r=0;r<=this.m;++r)this.S[0][r]=this.gap(0),this.V[0][r]=-1/0;this.S[0][0]=0},Hm.prototype.gap=function(e){return this.gapPenalty+e*this.gapExtensionPenalty},Hm.prototype.makeScoreFn=function(){var e=this.seq1,t=this.seq2,n=this.substMatrix;return n?function(r,i){var o=e[r],a=t[i];try{return n[o][a]}catch{return-4}}:(Ge.warn("Alignment: no subst matrix"),function(r,i){return e[r]===t[i]?5:-3})},Hm.prototype.calc=function(){Ze&&Ge.time("Alignment.calc"),this.initMatrices();for(var e,t,n,r,i,o=this.gap(0),a=this.makeScoreFn(),s=this.gapExtensionPenalty,l=this.V,c=this.H,u=this.S,f=this.n,d=this.m,p=1;p<=f;++p){t=u[p-1],e=l[p-1],n=l[p],r=c[p],i=u[p];for(var h=1;h<=d;++h)n[h]=Math.max(t[h]+o,e[h]+s),r[h]=Math.max(i[h-1]+o,r[h-1]+s),i[h]=Math.max(t[h-1]+a(p-1,h-1),n[h],r[h])}Ze&&Ge.timeEnd("Alignment.calc"),Ze&&Ge.log(this.S,this.V,this.H)},Hm.prototype.trace=function(){Ze&&Ge.time("Alignment.trace"),this.ali1="",this.ali2="";var e,t=this.makeScoreFn(),n=this.n,r=this.m;for(this.S[n][r]>=this.V[n][r]?(e="S",this.score=this.S[n][r]):this.V[n][r]>=this.H[n][r]?(e="V",this.score=this.V[n][r]):(e="H",this.score=this.H[n][r]),Ze&&Ge.log("Alignment: SCORE",this.score),Ze&&Ge.log("Alignment: S, V, H",this.S[n][r],this.V[n][r],this.H[n][r]);n>0&&r>0;)e==="S"?this.S[n][r]===this.S[n-1][r-1]+t(n-1,r-1)?(this.ali1=this.seq1[n-1]+this.ali1,this.ali2=this.seq2[r-1]+this.ali2,--n,--r,e="S"):this.S[n][r]===this.V[n][r]?e="V":this.S[n][r]===this.H[n][r]?e="H":(--n,--r):e==="V"?this.V[n][r]===this.V[n-1][r]+this.gapExtensionPenalty?(this.ali1=this.seq1[n-1]+this.ali1,this.ali2="-"+this.ali2,--n,e="V"):this.V[n][r]===this.S[n-1][r]+this.gap(0)?(this.ali1=this.seq1[n-1]+this.ali1,this.ali2="-"+this.ali2,--n,e="S"):--n:e==="H"?this.H[n][r]===this.H[n][r-1]+this.gapExtensionPenalty?(this.ali1="-"+this.ali1,this.ali2=this.seq2[r-1]+this.ali2,--r,e="H"):this.H[n][r]===this.S[n][r-1]+this.gap(0)?(this.ali1="-"+this.ali1,this.ali2=this.seq2[r-1]+this.ali2,--r,e="S"):--r:Ge.error("Alignment: no matrix");for(;n>0;)this.ali1=this.seq1[n-1]+this.ali1,this.ali2="-"+this.ali2,--n;for(;r>0;)this.ali1="-"+this.ali1,this.ali2=this.seq2[r-1]+this.ali2,--r;Ze&&Ge.timeEnd("Alignment.trace"),Ze&&Ge.log([this.ali1,this.ali2])};var $st=Object.assign({sele:"",defaultAssembly:""},Xoe),I$=function(e){function t(r,i,o){var a,s,l,c,u,f=this;o===void 0&&(o={}),e.call(this,r,i,Object.assign({name:i.name},o)),this.structure=i,this.trajList=[],this.signals=Object.assign(this.signals,{trajectoryAdded:new en.Signal,trajectoryRemoved:new en.Signal,defaultAssemblyChanged:new en.Signal}),this.initSelection(this.parameters.sele),this.pickBuffer=(a=4,s=0,l=0,c=[],{has:function(d){return c.indexOf(d)!==-1},get:function(d){return c[d]},push:function(d){c[s]=d,s=(a+s+1)%a,++l},get count(){return l},get data(){return c.slice(0,Math.min(l,a))},clear:function(){l=0,s=0,c.length=0}}),this.pickDict=(u={},{has:function(d){return u[JSON.stringify(d)]!==void 0},add:function(d,p){u[JSON.stringify(d)]=p},del:function(d){delete u[JSON.stringify(d)]},get values(){return Object.keys(u).map(function(d){return u[d]})}}),this.spacefillRepresentation=this.addRepresentation("spacefill",{sele:"none",opacity:hy.opacity,color:hy.color,disablePicking:!0,radiusType:"data"},!0),this.distanceRepresentation=this.addRepresentation("distance",hy,!0),this.angleRepresentation=this.addRepresentation("angle",hy,!0),this.dihedralRepresentation=this.addRepresentation("dihedral",hy,!0),this.measureRepresentations=new Yoe([this.spacefillRepresentation,this.distanceRepresentation,this.angleRepresentation,this.dihedralRepresentation]),this.setDefaultAssembly(this.parameters.defaultAssembly),this.structure.signals.refreshed.add(function(){f.updateRepresentations({position:!0})})}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0},type:{configurable:!0}};return n.defaultParameters.get=function(){return $st},n.type.get=function(){return"structure"},t.prototype.initSelection=function(r){var i=this;this.selection=new Hn(r),this.structureView=new Koe(this.structure,this.selection),this.selection.signals.stringChanged.add(function(){i.structureView.setSelection(i.selection),i.rebuildRepresentations(),i.rebuildTrajectories()})},t.prototype.setSelection=function(r){return this.parameters.sele=r,this.selection.setString(r),this},t.prototype.setDefaultAssembly=function(r){if(this.structure.biomolDict[r]===void 0&&(r=""),this.parameters.defaultAssembly!==r){var i={defaultAssembly:r};this.reprList.forEach(function(o){return o.setParameters(i)}),this.measureRepresentations.setParameters(i),this.parameters.defaultAssembly=r,this.signals.defaultAssemblyChanged.dispatch(r)}return this},t.prototype.rebuildRepresentations=function(){this.reprList.forEach(function(r){r.build()}),this.measureRepresentations.build()},t.prototype.rebuildTrajectories=function(){var r=this;this.trajList.forEach(function(i){i.trajectory.setStructure(r.structureView)})},t.prototype.updateRepresentations=function(r){e.prototype.updateRepresentations.call(this,r),this.measureRepresentations.update(r)},t.prototype.updateRepresentationMatrices=function(){e.prototype.updateRepresentationMatrices.call(this),this.measureRepresentations.setParameters({matrix:this.matrix})},t.prototype.addRepresentation=function(r,i,o){var a=this;i===void 0&&(i={}),o===void 0&&(o=!1),i.defaultAssembly=this.parameters.defaultAssembly;var s=this._addRepresentation(r,this.structureView,i,o);return o||s.signals.parametersChanged.add(function(){return a.measureUpdate()}),s},t.prototype.addTrajectory=function(r,i){r===void 0&&(r=""),i===void 0&&(i={});var o=function(s,l,c){return s&&s instanceof WN?new Est(s,l,c):!s&&l.frames?new Tst(s,l,c):s&&typeof s=="function"?new Ist(s,l,c):new Ost(s,l,c)}(r,this.structureView,i),a=new Pst(this.stage,o,i);return this.trajList.push(a),this.signals.trajectoryAdded.dispatch(a),a},t.prototype.removeTrajectory=function(r){var i=this.trajList.indexOf(r);i!==-1&&this.trajList.splice(i,1),r.dispose(),this.signals.trajectoryRemoved.dispatch(r)},t.prototype.dispose=function(){this.trajList.slice().forEach(function(r){return r.dispose()}),this.trajList.length=0,this.structure.dispose(),this.measureRepresentations.dispose(),e.prototype.dispose.call(this)},t.prototype.autoView=function(r,i){typeof r=="number"&&(i=r,r=""),this.stage.animationControls.zoomMove(this.getCenter(r),this.getZoom(r),K(i,0))},t.prototype.getBoxUntransformed=function(r){return r?this.structureView.getBoundingBox(new Hn(r)):this.structureView.boundingBox},t.prototype.getCenterUntransformed=function(r){return r&&typeof r=="string"?this.structure.atomCenter(new Hn(r)):this.structure.center},t.prototype.superpose=function(r,i,o,a){return Lst(this.structureView,r.structureView,i,o,a),this.updateRepresentations({position:!0}),this},t.prototype.getMaxRepresentationRadius=function(r){var i=0,o=this.structure.getAtomProxy(r);return this.eachRepresentation(function(a){if(a.getVisibility()){var s=a.repr;i=Math.max(s.getAtomRadius(o),i)}}),i},t.prototype.measurePick=function(r){var i=this.pickBuffer.count;if(this.lastPick===r.index&&i>=1){if(i>1){var o=this.pickBuffer.data,a=this.pickBuffer.data.sort();this.pickDict.has(a)?this.pickDict.del(a):this.pickDict.add(a,o),i===2?this.distanceRepresentation.setParameters({atomPair:this.pickDict.values.filter(function(s){return s.length===2})}):i===3?this.angleRepresentation.setParameters({atomTriple:this.pickDict.values.filter(function(s){return s.length===3})}):i===4&&this.dihedralRepresentation.setParameters({atomQuad:this.pickDict.values.filter(function(s){return s.length===4})})}this.pickBuffer.clear(),this.lastPick=void 0}else this.pickBuffer.has(r.index)||this.pickBuffer.push(r.index),this.lastPick=r.index;this.measureUpdate()},t.prototype.measureClear=function(){this.pickBuffer.clear(),this.lastPick=void 0,this.spacefillRepresentation.setSelection("none")},t.prototype.measureBuild=function(){var r=this.measureData();this.distanceRepresentation.setParameters({atomPair:r.distance}),this.angleRepresentation.setParameters({atomTriple:r.angle}),this.dihedralRepresentation.setParameters({atomQuad:r.dihedral})},t.prototype.measureUpdate=function(){var r=this,i=this.pickBuffer.data,o={};i.forEach(function(a){var s=Math.max(.1,r.getMaxRepresentationRadius(a));o[a]=s*(2.3-Nx(.1,2,s))}),this.spacefillRepresentation.setSelection(i.length?"@"+i.join(","):"none"),i.length&&this.spacefillRepresentation.setParameters({radiusData:o})},t.prototype.measureData=function(){var r=this.pickDict.values;return{distance:r.filter(function(i){return i.length===2}),angle:r.filter(function(i){return i.length===3}),dihedral:r.filter(function(i){return i.length===4})}},t.prototype.removeAllMeasurements=function(r){var i=this.pickDict,o=i.values,a=function(s){o.filter(function(l){return l.length===s}).forEach(function(l){return i.del(l.slice().sort())})};(!r||1&r)&&a(2),(!r||2&r)&&a(3),(!r||4&r)&&a(4),this.measureBuild()},t.prototype.removeMeasurement=function(r){this.pickDict.del(r.slice().sort()),this.measureBuild()},t.prototype.addMeasurement=function(r){if(!(r.length<2||r.length>4)){var i=r.slice().sort();this.pickDict.has(i)||this.pickDict.add(i,r),this.measureBuild()}},Object.defineProperties(t.prototype,n),t}(kn);qv.add("structure",I$),qv.add("structureview",I$);var Zoe=function(e){function t(r,i,o){o===void 0&&(o={}),e.call(this,r,i,Object.assign({name:i.name},o)),this.surface=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"surface"},t.prototype.addRepresentation=function(r,i){return i===void 0&&(i={}),this._addRepresentation(r,this.surface,i)},t.prototype.getBoxUntransformed=function(){return this.surface.boundingBox},t.prototype.getCenterUntransformed=function(){return this.surface.center},t.prototype.dispose=function(){this.surface.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(kn);qv.add("surface",Zoe);var Joe=function(e){function t(r,i,o){o===void 0&&(o={}),e.call(this,r,i,Object.assign({name:i.name},o)),this.volume=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"volume"},t.prototype.addRepresentation=function(r,i){return i===void 0&&(i={}),this._addRepresentation(r,this.volume,i)},t.prototype.getBoxUntransformed=function(){return this.volume.boundingBox},t.prototype.getCenterUntransformed=function(){return this.volume.center},t.prototype.dispose=function(){this.volume.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(kn);qv.add("volume",Joe);var yH=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addRepresentation=function(n,r){return this.forEach(function(i){return i.addRepresentation(n,r)})},t.prototype.autoView=function(n){return this.forEach(function(r){return r.autoView(n)})},t}(mg);function bH(e,t){return e instanceof RegExp?t.name.match(e)!==null:t.name===e}var Dst=new V,Bst={impostor:!0,quality:"medium",workerDefault:!0,sampleLevel:0,backgroundColor:"black",rotateSpeed:2,zoomSpeed:1.2,panSpeed:1,clipNear:0,clipFar:100,clipDist:10,clipMode:"scene",clipScale:"relative",fogNear:50,fogFar:100,cameraFov:40,cameraEyeSep:.3,cameraType:"perspective",lightColor:14540253,lightIntensity:1,ambientColor:14540253,ambientIntensity:.2,hoverTimeout:0,tooltip:!0,mousePreset:"default"},wn=function(e,t){t===void 0&&(t={}),this.signals={parametersChanged:new en.Signal,fullscreenChanged:new en.Signal,componentAdded:new en.Signal,componentRemoved:new en.Signal,clicked:new en.Signal,hovered:new en.Signal},this.tasks=new rc,this.compList=[],this.defaultFileParams={},this.logList=[],this.viewer=new an(e),this.viewer.renderer&&(this.tooltip=document.createElement("div"),Object.assign(this.tooltip.style,{display:"none",position:"fixed",zIndex:"1000000",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),this.viewer.container.appendChild(this.tooltip),this.mouseObserver=new xo(this.viewer.renderer.domElement),this.viewerControls=new wo(this),this.trackballControls=new La(this),this.pickingControls=new goe(this),this.animationControls=new Xr(this),this.mouseControls=new zm(this),this.keyControls=new Um(this),this.pickingBehavior=new VS(this),this.mouseBehavior=new Af(this),this.animationBehavior=new P$(this),this.keyBehavior=new Vm(this),this.spinAnimation=this.animationControls.spin([0,1,0],.005),this.spinAnimation.pause(!0),this.rockAnimation=this.animationControls.rock([0,1,0],.005),this.rockAnimation.pause(!0),this.parameters=fs(t,Bst),this.setParameters(this.parameters),this.viewer.animate())};wn.prototype.setParameters=function(e){e===void 0&&(e={}),roe(this.parameters,e);var t=e,n=this.parameters,r=this.viewer,i=this.trackballControls;return t.quality!==void 0&&this.setQuality(n.quality),t.impostor!==void 0&&this.setImpostor(n.impostor),t.rotateSpeed!==void 0&&(i.rotateSpeed=n.rotateSpeed),t.zoomSpeed!==void 0&&(i.zoomSpeed=n.zoomSpeed),t.panSpeed!==void 0&&(i.panSpeed=n.panSpeed),t.mousePreset!==void 0&&this.mouseControls.preset(n.mousePreset),this.mouseObserver.setParameters({hoverTimeout:n.hoverTimeout}),r.setClip(n.clipNear,n.clipFar,n.clipDist,n.clipMode,n.clipScale),r.setFog(void 0,n.fogNear,n.fogFar),r.setCamera(n.cameraType,n.cameraFov,n.cameraEyeSep),r.setSampling(n.sampleLevel),r.setBackground(n.backgroundColor),r.setLight(n.lightColor,n.lightIntensity,n.ambientColor,n.ambientIntensity),this.signals.parametersChanged.dispatch(this.getParameters()),this},wn.prototype.log=function(e){console.log("STAGE LOG",e),this.logList.push(e)},wn.prototype.getParameters=function(){return Object.assign({},this.parameters)},wn.prototype.defaultFileRepresentation=function(e){if(e instanceof I$){var t,n,r;e.setSelection("/0");var i=e.structure;if(i.biomolDict.BU1){var o=i.biomolDict.BU1;t=o.getAtomCount(i),n=o.getResidueCount(i),r=o.getInstanceCount(),e.setDefaultAssembly("BU1")}else t=i.getModelProxy(0).atomCount,n=i.getModelProxy(0).residueCount,r=1;var a=t;foe&&(a*=4);var s=i.atomStore.count/i.residueStore.count<2;s&&(a*=10);var l="chainname",c="RdYlBu",u=!1;if(i.getChainnameCount(new Hn("polymer and /0"))===1&&(l="residueindex",c="Spectral",u=!0),Ze&&console.log(a,t,r,s),n/r<4)e.addRepresentation("ball+stick",{colorScheme:"element",radiusScale:2,aspectRatio:1.5,bondScale:.3,bondSpacing:.75,quality:"auto"});else if(r>5&&a>15e3||a>7e5){var f=Math.min(2,Math.max(.1,6e3/(a/r)));s&&(f=Math.min(f,.5)),e.addRepresentation("surface",{colorScheme:l,colorScale:c,colorReverse:u,sele:"polymer",surfaceType:"av",probeRadius:1.4,scaleFactor:f,useWorker:!1})}else a>25e4?e.addRepresentation("backbone",{colorScheme:l,colorScale:c,colorReverse:u,lineOnly:!0}):a>1e5?e.addRepresentation("backbone",{colorScheme:l,colorScale:c,colorReverse:u,quality:"low",disableImpostor:!0,radiusScale:2}):a>8e4?e.addRepresentation("backbone",{colorScheme:l,colorScale:c,colorReverse:u,radiusScale:2}):(e.addRepresentation("cartoon",{colorScheme:l,colorScale:c,colorReverse:u,radiusScale:.7,aspectRatio:5,quality:"auto"}),a<5e4&&e.addRepresentation("base",{colorScheme:l,colorScale:c,colorReverse:u,quality:"auto"}),e.addRepresentation("ball+stick",{sele:"ligand",colorScheme:"element",radiusScale:2,aspectRatio:1.5,bondScale:.3,bondSpacing:.75,quality:"auto"}));e.structure.frames.length&&e.addTrajectory()}else(e instanceof Zoe||e instanceof Joe)&&e.addRepresentation("surface");this.tasks.onZeroOnce(this.autoView,this)},wn.prototype.loadFile=function(e,t){var n=this;t===void 0&&(t={});var r=Object.assign({},this.defaultFileParams,t),i=Ai(e).name;this.tasks.increment(),this.log("loading file '"+i+"'");var o=K(r.ext,Ai(e).ext);return(Xt.isTrajectory(o)?Promise.reject(new Error("loadFile: ext '"+o+"' is a trajectory and must be loaded into a structure component")):m$(e,r)).then(function(a){n.log("loaded '"+i+"'");var s=n.addComponentFromObject(a,r);return r.defaultRepresentation&&n.defaultFileRepresentation(s),n.tasks.decrement(),s},function(a){n.tasks.decrement();var s="error loading file: '"+a+"'";throw n.log(s),s})},wn.prototype.loadScript=function(e){var t=this,n=Ai(e).name;return this.log("loading script '"+n+"'"),m$(e).then(function(r){t.tasks.increment(),t.log("running script '"+n+"'"),r.run(t).then(function(){t.tasks.decrement(),t.log("finished script '"+n+"'")}),t.log("called script '"+n+"'")},function(r){t.tasks.decrement();var i="errored script '"+n+`' "`+r+'"';throw t.log(i),i})},wn.prototype.addComponent=function(e){e?(this.compList.push(e),this.signals.componentAdded.dispatch(e)):Ge.warn("Stage.addComponent: no component given")},wn.prototype.addComponentFromObject=function(e,t){t===void 0&&(t={});var n=qv.get(e.type);if(n){var r=new n(this,e,t);return this.addComponent(r),r}Ge.warn("no component for object type",e.type)},wn.prototype.removeComponent=function(e){var t=this.compList.indexOf(e);t!==-1&&(this.compList.splice(t,1),e.dispose(),this.signals.componentRemoved.dispatch(e))},wn.prototype.removeAllComponents=function(){var e=this;this.compList.slice().forEach(function(t){return e.removeComponent(t)})},wn.prototype.handleResize=function(){this.viewer.handleResize()},wn.prototype.setSize=function(e,t){var n=this.viewer.container;n!==document.body&&(e!==void 0&&(n.style.width=e),t!==void 0&&(n.style.height=t),this.handleResize())},wn.prototype.toggleFullscreen=function(e){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled){var t=this;e=e||this.viewer.container,this.lastFullscreenElement=e,n()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(e.dataset.normalWidth=e.style.width||"",e.dataset.normalHeight=e.style.height||"",e.style.width=window.screen.width+"px",e.style.height=window.screen.height+"px",e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(),document.addEventListener("fullscreenchange",r),document.addEventListener("mozfullscreenchange",r),document.addEventListener("webkitfullscreenchange",r),document.addEventListener("MSFullscreenChange",r),this.handleResize(),this.signals.fullscreenChanged.dispatch(!0),setTimeout(function(){t.handleResize()},100))}else Ge.log("fullscreen mode (currently) not possible");function n(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function r(){if(!n()&&t.lastFullscreenElement){var i=t.lastFullscreenElement;i.style.width=i.dataset.normalWidth||"",i.style.height=i.dataset.normalHeight||"",document.removeEventListener("fullscreenchange",r),document.removeEventListener("mozfullscreenchange",r),document.removeEventListener("webkitfullscreenchange",r),document.removeEventListener("MSFullscreenChange",r),t.handleResize(),t.signals.fullscreenChanged.dispatch(!1)}}},wn.prototype.setSpin=function(e){e?(this.spinAnimation.resume(!0),this.rockAnimation.pause(!0)):this.spinAnimation.pause(!0)},wn.prototype.setRock=function(e){e?(this.rockAnimation.resume(!0),this.spinAnimation.pause(!0)):this.rockAnimation.pause(!0)},wn.prototype.toggleSpin=function(){this.setSpin(this.spinAnimation.paused)},wn.prototype.toggleRock=function(){this.setRock(this.rockAnimation.paused)},wn.prototype.getFocus=function(){var e=this.parameters;if(e.clipMode!=="scene")return 0;var t=e.clipNear;return e.clipScale==="absolute"&&(t=this.viewer.absoluteToRelative(t)),2*t},wn.prototype.setFocus=function(e){var t,n,r,i;this.parameters.clipMode==="scene"&&(this.parameters.clipScale==="relative"?(r=50,i=function(o){return p$(o,0,100)}(2*(n=100-(t=p$(e/2,0,49.9)))-50)):(r=0,i=2*(n=t=this.viewer.relativeToAbsolute(e/2))),this.setParameters({clipNear:t,clipFar:n,fogNear:r,fogFar:i}))},wn.prototype.getZoomForBox=function(e){var t=e.getSize(Dst),n=Math.max(t.x,t.y,t.z),r=Math.min(t.x,t.y,t.z),i=n+Math.sqrt(r),o=jr(this.viewer.perspectiveCamera.fov),a=this.viewer.width,s=this.viewer.height,l=s<a?1:a/s;return i=Math.abs(.5*i/l/Math.sin(o/2)),-(i+=this.parameters.clipDist)},wn.prototype.getBox=function(){return this.viewer.boundingBox},wn.prototype.getZoom=function(){return this.getZoomForBox(this.getBox())},wn.prototype.getCenter=function(e){return this.getBox().getCenter(e||new V)},wn.prototype.autoView=function(e){this.animationControls.zoomMove(this.getCenter(),this.getZoom(),K(e,0))},wn.prototype.makeImage=function(e){var t=this;return e===void 0&&(e={}),new Promise(function(n,r){t.tasks.onZeroOnce(function(){t.tasks.increment(),t.viewer.makeImage(e).then(function(i){t.tasks.decrement(),n(i)}).catch(function(i){t.tasks.decrement(),r(i)})})})},wn.prototype.setImpostor=function(e){this.parameters.impostor=e;var t=["spacefill","ball+stick","licorice","hyperball","backbone","rocket","helixorient","contact","distance","dot"];this.eachRepresentation(function(n){if(t.includes(n.getType())){var r=n.getParameters();r.disableImpostor=!e,n.build(r)}})},wn.prototype.setQuality=function(e){this.parameters.quality=e;var t=["tube","cartoon","ribbon","trace","rope"],n=["spacefill","ball+stick","licorice","hyperball","backbone","rocket","helixorient","contact","distance","dot"];this.eachRepresentation(function(r){var i=r.getParameters();if(!t.includes(r.getType())){if(!n.includes(r.getType()))return;if(!i.disableImpostor)return void(r.repr.quality=e)}i.quality=e,r.build(i)})},wn.prototype.eachComponent=function(e,t){this.compList.slice().forEach(function(n){t!==void 0&&t!==n.type||e(n)})},wn.prototype.eachRepresentation=function(e,t){this.eachComponent(function(n){n.reprList.slice().forEach(function(r){t!==void 0&&t!==r.getType()||e(r,n)})})},wn.prototype.getComponentsByName=function(e){var t=[];return this.eachComponent(function(n){(e===void 0||bH(e,n))&&t.push(n)}),new yH(t)},wn.prototype.getComponentsByObject=function(e){var t=[];return this.eachComponent(function(n){n.object===e&&t.push(n)}),new yH(t)},wn.prototype.getRepresentationsByName=function(e){var t=[];return this.eachRepresentation(function(n,r){(e===void 0||bH(e,n))&&t.push(n)}),new Yoe(t)},wn.prototype.measureClear=function(){this.eachComponent(function(e){return e.measureClear()},"structure")},wn.prototype.measureUpdate=function(){this.eachComponent(function(e){return e.measureUpdate()},"structure")},wn.prototype.dispose=function(){this.tasks.dispose(),this.viewer.dispose(),this.mouseObserver.dispose()};var Nst=function(e){function t(r,i,o){o===void 0&&(o={}),e.call(this,r,i,Object.assign({name:i.name},o)),this.shape=i}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"shape"},t.prototype.addRepresentation=function(r,i){return i===void 0&&(i={}),this._addRepresentation(r,this.shape,i)},t.prototype.getBoxUntransformed=function(){return this.shape.boundingBox},t.prototype.getCenterUntransformed=function(){return this.shape.center},t.prototype.dispose=function(){this.shape.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(kn);function Un(e,t,n,r){var i,o=arguments.length,a=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}qv.add("shape",Nst);var _H=function(e){function t(n){var r=this;e.call(this,n),n.scale||(this.parameters.scale="rainbow",this.parameters.reverse=K(n.reverse,!0)),this.scalePerModel={},n.structure.eachModel(function(i){r.parameters.domain=[i.atomOffset,i.atomEnd],r.scalePerModel[i.index]=r.getScale()})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){return this.scalePerModel[n.modelIndex](n.index)},t}(yn);Un([zn],_H.prototype,"atomColor",null),pn.add("atomindex",_H);var xH=function(e){function t(n){if(e.call(this,n),n.scale||(this.parameters.scale="OrRd"),!n.domain){var r,i=1/0,o=-1/0;n.sele&&(r=new Hn(n.sele)),n.structure.eachAtom(function(a){var s=a.bfactor;i=Math.min(i,s),o=Math.max(o,s)},r),this.parameters.domain=[i,o]}this.bfactorScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){return this.bfactorScale(n.bfactor)},t}(yn);Un([zn],xH.prototype,"atomColor",null),pn.add("bfactor",xH);var wH=function(e){function t(n){var r=this;e.call(this,n),this.chainidDictPerModel={},this.scalePerModel={},n.scale||(this.parameters.scale="Spectral"),n.structure.eachModel(function(i){var o=0,a={};i.eachChain(function(s){a[s.chainid]===void 0&&(a[s.chainid]=o,o+=1)}),r.parameters.domain=[0,o-1],r.chainidDictPerModel[i.index]=a,r.scalePerModel[i.index]=r.getScale()})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){var r=this.chainidDictPerModel[n.modelIndex];return this.scalePerModel[n.modelIndex](r[n.chainid])},t}(yn);Un([zn],wH.prototype,"atomColor",null),pn.add("chainid",wH);var SH=function(e){function t(n){var r=this;e.call(this,n),this.scalePerModel={},n.scale||(this.parameters.scale="Spectral"),n.structure.eachModel(function(i){r.parameters.domain=[i.chainOffset,i.chainEnd],r.scalePerModel[i.index]=r.getScale()})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){return this.scalePerModel[n.modelIndex](n.chainIndex)},t}(yn);Un([zn],SH.prototype,"atomColor",null),pn.add("chainindex",SH);var CH=function(e){function t(n){var r=this;e.call(this,n),this.chainnameDictPerModel={},this.scalePerModel={},n.scale||(this.parameters.scale="Spectral"),n.structure.eachModel(function(i){var o=0,a={};i.eachChain(function(s){a[s.chainname]===void 0&&(a[s.chainname]=o,o+=1)}),r.parameters.domain=[0,o-1],r.chainnameDictPerModel[i.index]=a,r.scalePerModel[i.index]=r.getScale()})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){var r=this.chainnameDictPerModel[n.modelIndex];return this.scalePerModel[n.modelIndex](r[n.chainname])},t}(yn);Un([zn],CH.prototype,"atomColor",null),pn.add("chainname",CH);var AH=function(e){function t(n){e.call(this,n),this.rsrzDict={},this.rsccDict={},n.scale||(this.parameters.scale="RdYlBu"),this.rsrzScale=this.getScale({domain:[2,0]}),this.rsccScale=this.getScale({domain:[.678,1]});var r=n.structure.validation;r&&(this.rsrzDict=r.rsrzDict,this.rsccDict=r.rsccDict)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){var r=n.resno+"";n.inscode&&(r+="^"+n.inscode),n.chainname&&(r+=":"+n.chainname),r+="/"+n.modelIndex;var i=this.rsrzDict[r];if(i!==void 0)return this.rsrzScale(i);var o=this.rsccDict[r];return o!==void 0?this.rsccScale(o):9474192},t}(yn);Un([zn],AH.prototype,"atomColor",null),pn.add("densityfit",AH);var kR={ARG:{CD:.1,CZ:.5,NE:-.1},ASN:{CG:.55,OD1:-.55},ASP:{CB:-.16,CG:.36,OD1:-.6,OD2:-.6},CYS:{CB:.19,SG:-.19},GLN:{CD:.55,OE1:-.55},GLU:{CD:.36,CG:-.16,OE1:-.6,OE2:-.6},HIS:{CB:.1,CD2:.2,CE1:.45,CG:.15,ND1:.05,NE2:.05},LYS:{CE:.25,NZ:.75},MET:{CE:.06,CG:.06,SD:-.12},PTR:{C:.55,CA:.1,CZ:.25,N:-.35,O:-.55,O1P:-.85,O2P:-.85,O3P:-.85,OG1:-1.1,P:1.4},SEP:{C:.55,CA:.1,CB:.25,N:-.35,O:-.55,O1P:-.85,O2P:-.85,O3P:-.85,OG1:-1.1,P:1.4},SER:{CB:.25,OG:-.25},THR:{CB:.25,OG1:-.25},TPO:{C:.55,CA:.1,CB:.25,N:-.35,O:-.55,OG1:-1.1,O1P:-.85,O2P:-.85,O3P:-.85,P:1.4},TRP:{CD1:.06,CD2:.1,CE2:-.04,CE3:-.03,CG:-.03,NE1:-.06},TYR:{CZ:.25,OH:-.25},backbone:{C:.55,O:-.55,N:-.35,CA:.1}},PH=function(e){function t(n){var r=this;e.call(this,n),this.delta=new V,this.hCharges=[],n.scale||(this.parameters.scale="rwb"),n.domain||(this.parameters.domain=[-50,50]),this.scale=this.getScale(),this.charges=new Float32Array(n.structure.atomCount);var i=[];n.structure.eachAtom(function(a){var s;if(r.charges[a.index]=((s=a).partialCharge!==null?s.partialCharge:s.isProtein()&&(kR[s.resname]&&kR[s.resname][s.atomname]||kR.backbone[s.atomname])||0)*a.occupancy,a.atomname==="N"){if(a.bondCount>=3||a.bondToElementCount(1))return;var l=function(c,u){u===void 0&&(u=new V);var f=!1,d=!1,p=!1;return u.set(2*c.x,2*c.y,2*c.z),c.eachBondedAtom(function(h){if(!f)return h.atomname==="H"?(u.set(h.x,h.y,h.z),void(f=!0)):void(d||h.atomname!=="CA"?p||h.atomname!=="C"||(p=!0,u.sub(h)):(u.sub(h),d=!0))}),f?u:d&&p?(u.normalize(),u.multiplyScalar(1.04),u.add(c),u):void 0}(a);l!==void 0&&(i.push(l),r.hCharges.push(.25*a.occupancy))}});var o=n.structure.getBoundingBox();o.expandByScalar(1.04),this.hStore=function(a){for(var s=a.length,l=new Float32Array(s),c=new Float32Array(s),u=new Float32Array(s),f=0;f<a.length;f++){var d=a[f];l[f]=d.x,c[f]=d.y,u[f]=d.z}return{x:l,y:c,z:u,count:s}}(i),this.hHash=new bh(this.hStore,o),this.hash=new bh(n.structure.atomStore,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.positionColor=function(n){var r=this.charges,i=this.hCharges,o=0;return this.hash.eachWithin(n.x,n.y,n.z,12,function(a,s){var l=r[a];l!==0&&(o+=l/s)}),this.hHash.eachWithin(n.x,n.y,n.z,12,function(a,s){var l=i[a];l!==0&&(o+=l/s)}),this.scale(332*o)},t}(yn);Un([zn],PH.prototype,"positionColor",null),pn.add("electrostatic",PH);var MH={H:16777215,HE:14286847,LI:13402367,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,NE:11789301,NA:11230450,MG:9109248,AL:12560038,SI:1578e4,P:16744448,S:16777008,CL:2093087,AR:8442339,K:9388244,CA:4062976,SC:15132390,TI:12567239,V:10921643,CR:9083335,MN:10255047,FE:14706227,CO:15765664,NI:5296208,CU:13140019,ZN:8224944,GA:12750735,GE:6721423,AS:12419299,SE:16752896,BR:10889513,KR:6076625,RB:7351984,SR:65280,Y:9764863,ZR:9756896,NB:7586505,MO:5551541,TC:3907230,RU:2396047,RH:687500,PD:27013,AG:12632256,CD:16767375,IN:10909043,SN:6717568,SB:10380213,TE:13924864,I:9699476,XE:9699476,CS:5707663,BA:51456,LA:7394559,CE:16777159,PR:14286791,ND:13107143,PM:10747847,SM:9437127,EU:6422471,GD:4587463,TB:3211207,DY:2097095,HO:65436,ER:58997,TM:54354,YB:48952,LU:43812,HF:5096191,TA:5089023,W:2200790,RE:2522539,OS:2516630,IR:1528967,PT:13684960,AU:16765219,HG:12105936,TL:10900557,PB:5724513,BI:10375093,PO:11230208,AT:7688005,RN:4358806,FR:4325478,RA:32e3,AC:7384058,TH:47871,PA:41471,U:36863,NP:33023,PU:27647,AM:5528818,CM:7888099,BK:9064419,CF:10565332,ES:11739092,FM:11739066,MD:11734438,NO:12389767,LR:13041766,RF:13369433,DB:13697103,SG:14221381,BH:14680120,HS:15073326,MT:15400998,DS:16777215,RG:16777215,CN:16777215,UUT:16777215,FL:16777215,UUP:16777215,LV:16777215,UUH:16777215,D:16777152,T:16777120},EH=function(e){function t(n){n.value=K(n.value,MH.C),e.call(this,n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){var r=n.element;return r==="C"?this.parameters.value:MH[r]||16777215},t}(yn);Un([zn],EH.prototype,"atomColor",null),pn.add("element",EH);var TH=function(e){function t(n){e.call(this,n),n.scale||(this.parameters.scale="Spectral"),n.domain||(this.parameters.domain=[0,n.structure.entityList.length-1]),this.entityindexScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){return this.entityindexScale(n.entityIndex)},t}(yn);Un([zn],TH.prototype,"atomColor",null),pn.add("entityindex",TH);var OH=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){var r=n.entity;switch(r?r.entityType:void 0){case 1:return 8374655;case 2:return 16629894;case 3:return 12496596;case 4:return 3697840;default:return 16777113}},t}(yn);Un([zn],OH.prototype,"atomColor",null),pn.add("entitytype",OH);var IH=function(e){function t(n){e.call(this,n),this.geoAtomDict={},this.geoDict={};var r=n.structure.validation;r&&(this.geoAtomDict=r.geoAtomDict,this.geoDict=r.geoDict)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){var r,i=n.resno+"";n.inscode&&(i+="^"+n.inscode),n.chainname&&(i+=":"+n.chainname),i+="/"+n.modelIndex;var o,a=this.geoAtomDict[i];if(a!==void 0){var s=a[n.atomname]||0;o=s,r=16843009*((o=(858993459&(o-=o>>1&1431655765))+(o>>2&858993459))+(o>>4)&252645135)>>24}else r=this.geoDict[i]||0;return r===0?2188972:r===1?16703627:r===2?16018755:r>=3?10813478:9474192},t}(yn);Un([zn],IH.prototype,"atomColor",null),pn.add("geoquality",IH);var RH=function(e){function t(n){e.call(this,n),this.resHF={},n.scale||(this.parameters.scale="RdYlGn");for(var r in VV)this.resHF[r]=VV[r][0];if(this.defaultResidueHydrophobicity=Zot[0],!n.domain){var i=1/0,o=-1/0;for(var a in this.resHF){var s=this.resHF[a];i=Math.min(i,s),o=Math.max(o,s)}this.parameters.domain=[i,0,o]}this.hfScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){return this.hfScale(this.resHF[n.resname]||this.defaultResidueHydrophobicity)},t}(yn);Un([zn],RH.prototype,"atomColor",null),pn.add("hydrophobicity",RH);var kH=function(e){function t(n){e.call(this,n),n.scale||(this.parameters.scale="rainbow"),n.domain||(this.parameters.domain=[0,n.structure.modelStore.count]),this.modelindexScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){return this.modelindexScale(n.modelIndex)},t}(yn);Un([zn],kH.prototype,"atomColor",null),pn.add("modelindex",kH);var LH=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){switch(n.residueType.moleculeType){case 1:return 3697840;case 2:return 15729279;case 3:return 12496596;case 4:return 16629894;case 5:return 12540695;case 6:return 8374655;default:return 16777113}},t}(yn);Un([zn],LH.prototype,"atomColor",null),pn.add("moleculetype",LH);var $H=function(e){function t(n){e.call(this,n),n.scale||(this.parameters.scale="PuBu"),n.domain||(this.parameters.domain=[0,1]),this.occupancyScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){return this.occupancyScale(n.occupancy)},t}(yn);Un([zn],$H.prototype,"atomColor",null),pn.add("occupancy",$H);var DH=function(e){function t(n){e.call(this,n),n.scale||(this.parameters.scale="rwb"),n.domain||(this.parameters.domain=[-1,1]),this.partialchargeScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){return this.partialchargeScale(n.partialCharge||0)},t}(yn);function LR(){return 16777215*Math.random()}Un([zn],DH.prototype,"atomColor",null),pn.add("partialcharge",DH);var F2=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(){return LR()},t.prototype.volumeColor=function(){return LR()},t.prototype.positionColor=function(){return LR()},t}(yn);Un([zn],F2.prototype,"atomColor",null),Un([zn],F2.prototype,"volumeColor",null),Un([zn],F2.prototype,"positionColor",null),pn.add("random",F2);var BH=function(e){function t(n){e.call(this,n),this.rciDict={},n.scale||(this.parameters.scale="RdYlBu"),this.rciScale=this.getScale({domain:[.6,0]});var r=n.structure.validation;r&&(this.rciDict=r.rciDict)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){var r="["+n.resname+"]"+n.resno;n.chainname&&(r+=":"+n.chainname);var i=this.rciDict[r];return i!==void 0?this.rciScale(i):9474192},t}(yn);Un([zn],BH.prototype,"atomColor",null),pn.add("randomcoilindex",BH);var NH=function(e){function t(n){var r=this;e.call(this,n),this.scalePerChain={},n.scale||(this.parameters.scale="rainbow",this.parameters.reverse=K(n.reverse,!0)),n.structure.eachChain(function(i){r.parameters.domain=[i.residueOffset,i.residueEnd],r.scalePerChain[i.index]=r.getScale()})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){return this.scalePerChain[n.chainIndex](n.residueIndex)},t}(yn);Un([zn],NH.prototype,"atomColor",null),pn.add("residueindex",NH);var Fst={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935,ASH:16711935,GLH:16711935,A:14423100,G:3329330,I:10145074,X:8190976,C:16766720,T:4286945,U:4251856,D:35723,DA:14423100,DG:3329330,DI:10145074,DX:8190976,DC:16766720,DT:4286945,DU:4251856,DD:35723},FH=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){return Fst[n.resname]||16711935},t}(yn);Un([zn],FH.prototype,"atomColor",null),pn.add("resname",FH);var jst=16711808,zst=10485888,Ust=6291584,Vst=16762880,Hst=6324479,Gst=16777215,Wst=11403518,qst=16580962,Xst=10921722,jH=function(e){function t(n){e.call(this,n),this.residueProxy=n.structure.getResidueProxy()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){var r=n.sstruc,i=this.residueProxy;return r==="h"?jst:r==="g"?zst:r==="i"?Ust:r==="e"||r==="b"?Vst:r==="t"?Hst:(i.index=n.residueIndex,i.isDna()?Wst:i.isRna()?qst:i.isSaccharide()?Xst:i.isProtein()||r==="s"||r==="l"?Gst:8421504)},t}(yn);Un([zn],jH.prototype,"atomColor",null),pn.add("sstruc",jH);var $R=function(e){function t(n){var r,i;e.call(this,n),n.scale||(this.parameters.scale="rwb"),this.atomData=(r=this.parameters.data)===null||r===void 0?void 0:r.atomData,this.bondData=(i=this.parameters.data)===null||i===void 0?void 0:i.bondData,this.scale=this.getScale(this.parameters)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(n){var r,i=(r=this.atomData)===null||r===void 0?void 0:r[n.index];return i!==void 0?this.scale(i):this.parameters.value},t.prototype.bondColor=function(n,r){var i,o=(i=this.bondData)===null||i===void 0?void 0:i[n.index];return o!==void 0?this.scale(o):this.atomProxy?(this.atomProxy.index=r?n.atomIndex1:n.atomIndex2,this.atomColor(this.atomProxy)):this.parameters.value},t}(yn);Un([zn],$R.prototype,"atomColor",null),Un([zn],$R.prototype,"bondColor",null),pn.add("structuredata",$R);var yy=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.atomColor=function(){return this.parameters.value},t.prototype.bondColor=function(){return this.parameters.value},t.prototype.valueColor=function(){return this.parameters.value},t.prototype.volumeColor=function(){return this.parameters.value},t}(yn);Un([zn],yy.prototype,"atomColor",null),Un([zn],yy.prototype,"bondColor",null),Un([zn],yy.prototype,"valueColor",null),Un([zn],yy.prototype,"volumeColor",null),pn.add("uniform",yy);var zH=function(e){function t(n){e.call(this,n),this.valueScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.volumeColor=function(n){return this.valueScale(this.parameters.volume.data[n])},t}(yn);Un([zn],zH.prototype,"volumeColor",null),pn.add("value",zH);var UH=function(e){function t(n){e.call(this,n),this.vec=new V,this.valueScale=this.getScale()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.positionColor=function(n){var r=this.parameters.volume;if(!r||!r.inverseMatrix)return this.parameters.value;var i=this.vec,o=r.data,a=r.nx,s=r.ny,l=a*s;i.copy(n),i.applyMatrix4(r.inverseMatrix);var c=Math.floor(i.x),u=Math.floor(i.y),f=Math.floor(i.z),d=(f*s+u)*a+c,p=d+1,h=d+a,g=d+l,v=h+1,m=g+1,y=h+l,_=y+1,b=o[d],x=o[p],w=o[h],S=o[g],A=o[v],C=o[m],k=o[y],O=o[_],T=i.x-c,B=i.y-u,R=i.z-f,P=Ps(b,x,T),D=Ps(S,C,T),z=Ps(w,A,T),N=Ps(k,O,T),H=Ps(P,z,B),J=Ps(D,N,B),ne=Ps(H,J,R);return this.valueScale(ne)},t}(yn);Un([zn],UH.prototype,"positionColor",null),pn.add("volume",UH);var uo=function(e){function t(r,i,o){var a=o||{};if(e.call(this,r,i,a),this.type="structure",this.parameters=Object.assign({radiusType:{type:"select",options:$c.types},radiusData:{type:"hidden"},radiusSize:{type:"number",precision:3,max:10,min:.001},radiusScale:{type:"number",precision:3,max:10,min:.001},assembly:null,defaultAssembly:{type:"hidden"}},this.parameters),this.selection=new Hn(a.sele),this.dataList=[],this.structure=r,this.structureView=this.structure.getView(this.selection),r.biomolDict){var s={default:"default","":r.unitcell?"AU":"FULL"};Object.keys(r.biomolDict).forEach(function(l){s[l]=l}),this.parameters.assembly={type:"select",options:s,rebuild:!0}}else this.parameters.assembly=null}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultScale:{configurable:!0}};return n.defaultScale.get=function(){return{vdw:1,covalent:1,bfactor:.01,sstruc:1}},t.prototype.init=function(r){var i=this,o=r||{};o.colorScheme=K(o.colorScheme,"element"),this.setRadius(o.radius,o),this.radiusType=K(o.radiusType,"vdw"),this.radiusData=K(o.radiusData,{}),this.radiusSize=K(o.radiusSize,1),this.radiusScale=K(o.radiusScale,1),this.assembly=K(o.assembly,"default"),this.defaultAssembly=K(o.defaultAssembly,""),o.quality==="auto"&&(o.quality=this.getQuality()),e.prototype.init.call(this,o),this.selection.signals.stringChanged.add(function(){i.build()}),this.build()},t.prototype.setRadius=function(r,i){var o=Object.keys(Uoe);return typeof r=="string"&&o.includes(r.toLowerCase())?i.radiusType=r:r!==void 0&&(i.radiusType="size",i.radiusSize=r),this},t.prototype.getAssembly=function(){var r=this.assembly==="default"?this.defaultAssembly:this.assembly;return this.structure.biomolDict[r]},t.prototype.getQuality=function(){var r,i=this.structureView,o=this.getAssembly();return r=o?o.getAtomCount(i):i.atomCount,foe&&(r*=4),i.atomStore.count/i.residueStore.count<2&&(r*=10),r<15e3?"high":r<8e4?"medium":"low"},t.prototype.create=function(){var r=this;if(this.structureView.atomCount!==0)if(this.structureView.hasCoords()){this.needsBuild=!1;var i=this.getAssembly();if(i)i.partList.forEach(function(a,s){var l=a.getView(r.structureView);if(l.atomCount!==0){var c=r.createData(l,s);c&&(c.sview=l,c.instanceList=a.getInstanceList(),r.dataList.push(c))}});else{var o=this.createData(this.structureView,0);o&&(o.sview=this.structureView,this.dataList.push(o))}}else this.needsBuild=!0},t.prototype.update=function(r){var i=this;!this.lazy||this.visible?this.needsBuild?this.build():this.dataList.forEach(function(o){o.bufferList.length>0&&i.updateData(r,o)},this):Object.assign(this.lazyProps.what,r)},t.prototype.updateData=function(r,i){this.build()},t.prototype.getColorParams=function(){return Object.assign(Object.assign({},e.prototype.getColorParams.call(this)),{structure:this.structure})},t.prototype.getRadiusParams=function(r){return{type:this.radiusType,scale:this.radiusScale,size:this.radiusSize,data:this.radiusData}},t.prototype.getAtomParams=function(r,i){return Object.assign({what:r,colorParams:this.getColorParams(),radiusParams:this.getRadiusParams()},i)},t.prototype.getBondParams=function(r,i){return Object.assign({what:r,colorParams:this.getColorParams(),radiusParams:this.getRadiusParams()},i)},t.prototype.getAtomRadius=function(r){return this.structureView.atomSet.isSet(r.index)?new $c(this.getRadiusParams()).atomRadius(r):0},t.prototype.setSelection=function(r,i){return this.selection.setString(r,i),this},t.prototype.setParameters=function(r,i,o){i===void 0&&(i={}),o===void 0&&(o=!1);var a=r||{};return this.setRadius(a.radius,a),a.radiusType===void 0&&a.radiusData===void 0&&a.radiusSize===void 0&&a.radiusScale===void 0||(i.radius=!0,Cc&&!this.disableImpostor||(o=!0)),a.defaultAssembly!==void 0&&a.defaultAssembly!==this.defaultAssembly&&(this.assembly==="default"&&a.assembly===void 0||a.assembly==="default")&&(o=!0),e.prototype.setParameters.call(this,a,i,o),this},t.prototype.getParameters=function(){return Object.assign(e.prototype.getParameters.call(this),{sele:this.selection?this.selection.string:void 0,defaultAssembly:this.defaultAssembly})},t.prototype.attach=function(r){var i=this.viewer,o=this.bufferList;this.dataList.forEach(function(a){a.bufferList.forEach(function(s){o.push(s),i.add(s,a.instanceList)})}),this.setVisibility(this.visible),r()},t.prototype.clear=function(){this.dataList.length=0,e.prototype.clear.call(this)},t.prototype.dispose=function(){this.structureView.dispose(),e.prototype.dispose.call(this)},Object.defineProperties(t.prototype,n),t}(ni),qN=function(e){function t(n,r,i){e.call(this,n,r,i),this.n=0,this.parameters=Object.assign({labelVisible:{type:"boolean"},labelSize:{type:"number",precision:3,max:10,min:.001},labelColor:{type:"color"},labelFontFamily:{type:"select",options:{"sans-serif":"sans-serif",monospace:"monospace",serif:"serif"},buffer:"fontFamily"},labelFontStyle:{type:"select",options:{normal:"normal",italic:"italic"},buffer:"fontStyle"},labelFontWeight:{type:"select",options:{normal:"normal",bold:"bold"},buffer:"fontWeight"},labelsdf:{type:"boolean",buffer:"sdf"},labelXOffset:{type:"number",precision:1,max:20,min:-20,buffer:"xOffset"},labelYOffset:{type:"number",precision:1,max:20,min:-20,buffer:"yOffset"},labelZOffset:{type:"number",precision:1,max:20,min:-20,buffer:"zOffset"},labelAttachment:{type:"select",options:{"bottom-left":"bottom-left","bottom-center":"bottom-center","bottom-right":"bottom-right","middle-left":"middle-left","middle-center":"middle-center","middle-right":"middle-right","top-left":"top-left","top-center":"top-center","top-right":"top-right"},rebuild:!0},labelBorder:{type:"boolean",buffer:"showBorder"},labelBorderColor:{type:"color",buffer:"borderColor"},labelBorderWidth:{type:"number",precision:2,max:.3,min:0,buffer:"borderWidth"},labelBackground:{type:"boolean",rebuild:!0},labelBackgroundColor:{type:"color",buffer:"backgroundColor"},labelBackgroundMargin:{type:"number",precision:2,max:2,min:0,rebuild:!0},labelBackgroundOpacity:{type:"range",step:.01,max:1,min:0,buffer:"backgroundOpacity"},labelFixedSize:{type:"boolean",buffer:"fixedSize"},lineOpacity:{type:"range",min:0,max:1,step:.01},linewidth:{type:"integer",max:50,min:1,buffer:!0}},this.parameters,{flatShaded:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};this.labelVisible=K(r.labelVisible,!0),this.labelSize=K(r.labelSize,2),this.labelColor=K(r.labelColor,16777215),this.labelFontFamily=K(r.labelFontFamily,"sans-serif"),this.labelFontStyle=K(r.labelFontstyle,"normal"),this.labelFontWeight=K(r.labelFontWeight,"bold"),this.labelsdf=K(r.labelsdf,coe==="Chrome"),this.labelXOffset=K(r.labelXOffset,0),this.labelYOffset=K(r.labelYOffset,0),this.labelZOffset=K(r.labelZOffset,.5),this.labelAttachment=K(r.labelAttachment,"bottom-left"),this.labelBorder=K(r.labelBorder,!1),this.labelBorderColor=K(r.labelBorderColor,"lightgrey"),this.labelBorderWidth=K(r.labelBorderWidth,.15),this.labelBackground=K(r.labelBackground,!1),this.labelBackgroundColor=K(r.labelBackgroundColor,"lightgrey"),this.labelBackgroundMargin=K(r.labelBackgroundMargin,.5),this.labelBackgroundOpacity=K(r.labelBackgroundOpacity,1),this.labelFixedSize=K(r.labelFixedSize,!1),this.lineOpacity=K(r.lineOpacity,1),this.linewidth=K(r.linewidth,2),e.prototype.init.call(this,r)},t.prototype.update=function(n){n.position?this.build():e.prototype.update.call(this,n)},t.prototype.updateData=function(n,r){var i={};if(n&&!n.labelSize||Object.assign(i,{size:is(this.n,this.labelSize)}),!n||n.labelColor){var o=new ht(this.labelColor);Object.assign(i,{color:Yn(this.n,o.r,o.g,o.b)})}this.textBuffer.setAttributes(i)},t.prototype.setParameters=function(n,r,i){return r===void 0&&(r={}),i===void 0&&(i=!1),n&&n.labelSize&&(r.labelSize=!0),n&&(n.labelColor||n.labelColor===0)&&(r.labelColor=!0,i=!0),e.prototype.setParameters.call(this,n,r,i),n&&n.opacity!==void 0&&this.textBuffer.setParameters({opacity:1}),n&&n.labelVisible!==void 0&&this.setVisibility(this.visible),this},t.prototype.setVisibility=function(n,r){return e.prototype.setVisibility.call(this,n,!0),this.textBuffer&&this.textBuffer.setVisibility(this.labelVisible&&this.visible),r||this.viewer.requestRender(),this},t.prototype.getLabelBufferParams=function(n){return n===void 0&&(n={}),e.prototype.getBufferParams.call(this,Object.assign({fontFamily:this.labelFontFamily,fontStyle:this.labelFontStyle,fontWeight:this.labelFontWeight,sdf:this.labelsdf,xOffset:this.labelXOffset,yOffset:this.labelYOffset,zOffset:this.labelZOffset,attachment:this.labelAttachment,showBorder:this.labelBorder,borderColor:this.labelBorderColor,borderWidth:this.labelBorderWidth,showBackground:this.labelBackground,backgroundColor:this.labelBackgroundColor,backgroundMargin:this.labelBackgroundMargin,backgroundOpacity:this.labelBackgroundOpacity,fixedSize:this.labelFixedSize,disablePicking:!0,visible:this.labelVisible},n,{opacity:1}))},t.prototype.getAtomRadius=function(){return 0},t}(uo);function XN(e,t){var n=e.getAtomProxy(),r=new Hn,i=t.length;if(i===0)return new Float32Array(0);var o=t[0].length,a=e.getAtomSet(),s=new Float32Array(i*o*3),l=0;return t.forEach(function(c){for(var u=!1,f=0;f<o;f++){var d=c[f];if(typeof d=="number"&&Number.isInteger(d)){if(!a.get(d)){u=!0;break}n.index=d}else{r.setString(d);var p=e.getAtomIndices(r);if(!p.length){u=!0;break}n.index=p[0]}var h=l+3*f;s[h++]=n.x,s[h++]=n.y,s[h++]=n.z}u||(l+=3*o)}),s.subarray(0,l)}function fl(e,t,n,r,i){var o=Math.cos(i),a=Math.sin(i);e[0]=t[0]+n[0]*o+r[0]*a,e[1]=t[1]+n[1]*o+r[1]*a,e[2]=t[2]+n[2]*o+r[2]*a}function VH(e,t,n,r,i,o,a){for(var s=0;s<t;s++){for(var l=0;l<n;l++)r[l]=e[l*t+s];HH(r,i,o,a,n);for(var c=0;c<n;c++)e[c*t+s]=i[c]}for(var u=0;u<n;u++){for(var f=0;f<t;f++)r[f]=e[u*t+f];HH(r,i,o,a,t);for(var d=0;d<t;d++)e[u*t+d]=Math.sqrt(i[d])}}function HH(e,t,n,r,i){n[0]=0,r[0]=Number.MIN_SAFE_INTEGER,r[1]=Number.MAX_SAFE_INTEGER;for(var o=1,a=0;o<i;o++){for(var s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)a--,s=(e[o]+o*o-(e[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=Number.MAX_SAFE_INTEGER}for(var l=0,c=0;l<i;l++){for(;r[c+1]<l;)c++;t[l]=(l-n[c])*(l-n[c])+e[n[c]]}}On.add("shader/SDFFont.vert",`uniform float clipNear;
uniform float clipRadius;
uniform vec3 clipCenter;
uniform float xOffset;
uniform float yOffset;
uniform float zOffset;
uniform bool ortho;
uniform float canvasHeight;
uniform float pixelRatio;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )
varying vec3 vViewPosition;
#endif
varying vec2 texCoord;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
#include color_pars_vertex
#endif
attribute vec2 mapping;
attribute vec2 inputTexCoord;
attribute float inputSize;
#include matrix_scale
#include common
void main(void){
#if defined( PICKING )
vPickingColor = unpackColor( primitiveId );
#else
#include color_vertex
#endif
texCoord = inputTexCoord;
float scale = matrixScale( modelViewMatrix );
float _xOffset = xOffset * scale;
float _yOffset = yOffset * scale;
float _zOffset = zOffset * scale;
if( texCoord.x == 10.0 ){
_zOffset -= 0.001;
}
vec4 cameraPos = modelViewMatrix * vec4( position, 1.0 );
#ifdef FIXED_SIZE
if ( ortho ) {
scale /= pixelRatio * (( canvasHeight / 2.0 ) / -cameraPosition.z) * 0.1;
} else {
scale /= pixelRatio * (( canvasHeight / 2.0 ) / -cameraPos.z) * 0.1;
}
#endif
vec4 cameraCornerPos = vec4( cameraPos.xyz, 1.0 );
cameraCornerPos.xy += mapping * inputSize * 0.01 * scale;
cameraCornerPos.x += _xOffset;
cameraCornerPos.y += _yOffset;
if( ortho ){
cameraCornerPos.xyz += normalize( -cameraPosition ) * _zOffset;
} else {
cameraCornerPos.xyz += normalize( -cameraCornerPos.xyz ) * _zOffset;
}
gl_Position = projectionMatrix * cameraCornerPos;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )
vViewPosition = -cameraCornerPos.xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
#include radiusclip_vertex
}`),On.add("shader/SDFFont.frag",`uniform sampler2D fontTexture;
uniform float opacity;
uniform bool showBorder;
uniform vec3 borderColor;
uniform float borderWidth;
uniform vec3 backgroundColor;
uniform float backgroundOpacity;
uniform float clipNear;
uniform float clipRadius;
varying vec3 vViewPosition;
varying vec2 texCoord;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
uniform float objectId;
varying vec3 vPickingColor;
const vec3 vColor = vec3( 0.0 );
#else
#include common
#include color_pars_fragment
#include fog_pars_fragment
#endif
const float gamma = 2.2 * 1.4142 / 128.0;
const float padding = 0.75;
void main(){
#include nearclip_fragment
#include radiusclip_fragment
if( texCoord.x > 1.0 ){
gl_FragColor = vec4( backgroundColor, backgroundOpacity );
}else{
float sdf = texture2D( fontTexture, texCoord ).a;
if( showBorder ) sdf += borderWidth;
float a = smoothstep(padding - gamma, padding + gamma, sdf);
if( a < 0.2 ) discard;
a *= opacity;
vec3 outgoingLight = vColor;
if( showBorder && sdf < ( padding + borderWidth ) ){
outgoingLight = borderColor;
}
gl_FragColor = vec4( outgoingLight, a );
}
#if defined( PICKING )
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);var DR={},Yst={font:"sans-serif",size:36,style:"normal",variant:"normal",weight:"normal",outline:3,width:1024,height:1024},qS=function(e){e===void 0&&(e={}),this.gamma=1,this.mapped={},this.scratchW=0,this.scratchH=0,this.currentX=0,this.currentY=0,this.cutoff=.25,this.parameters=fs(e,Yst);var t=this.parameters;this.radius=t.size/8,this.padding=t.size/3;var n=this.lineHeight=t.size+2*t.outline+Math.round(t.size/4),r=this.maxWidth=t.width/4,i=this.canvas=document.createElement("canvas");i.width=r,i.height=n;var o=this.context=this.canvas.getContext("2d");o.font=t.style+" "+t.variant+" "+t.weight+" "+t.size+"px "+t.font,o.fillStyle="black",o.textAlign="left",o.textBaseline="bottom",o.lineJoin="round",this.gridOuter=new Float64Array(n*r),this.gridInner=new Float64Array(n*r),this.f=new Float64Array(Math.max(n,r)),this.d=new Float64Array(Math.max(n,r)),this.z=new Float64Array(Math.max(n,r)+1),this.v=new Int16Array(Math.max(n,r)),this.data=new Uint8Array(t.width*t.height*4),this.canvas2=document.createElement("canvas"),this.canvas2.width=t.width,this.canvas2.height=t.height,this.context2=this.canvas2.getContext("2d"),this.placeholder=this.map(String.fromCharCode(65533));for(var a=32;a<=126;++a)this.map(String.fromCharCode(a));this.map(String.fromCharCode(176)),this.map(String.fromCharCode(8491)),this.texture=new I1(this.canvas2),this.texture.flipY=!1,this.texture.needsUpdate=!0};qS.prototype.map=function(e){var t=this.parameters;return this.mapped[e]===void 0&&(this.draw(e),this.currentX+this.scratchW>t.width&&(this.currentX=0,this.currentY+=this.scratchH),this.currentY+this.scratchH>t.height&&console.warn("canvas to small"),this.mapped[e]={x:this.currentX,y:this.currentY,w:this.scratchW,h:this.scratchH},this.context2.drawImage(this.canvas,0,0,this.scratchW,this.scratchH,this.currentX,this.currentY,this.scratchW,this.scratchH),this.currentX+=this.scratchW),this.mapped[e]},qS.prototype.get=function(e){return this.mapped[e]||this.placeholder},qS.prototype.draw=function(e){var t=this.parameters,n=this.lineHeight,r=t.outline,i=this.context,o=this.maxWidth,a=r,s=n-t.outline,l=i.measureText(e),c=Math.min(o,Math.ceil(l.width+2*a+1)),u=c*n;i.clearRect(0,0,c,n),i.fillText(e,a,s);for(var f=i.getImageData(0,0,c,n),d=f.data,p=0;p<u;p++){var h=f.data[4*p+3]/255;this.gridOuter[p]=h===1?0:h===0?Number.MAX_SAFE_INTEGER:Math.pow(Math.max(0,.5-h),2),this.gridInner[p]=h===1?Number.MAX_SAFE_INTEGER:h===0?0:Math.pow(Math.max(0,h-.5),2)}VH(this.gridOuter,c,n,this.f,this.d,this.v,this.z),VH(this.gridInner,c,n,this.f,this.d,this.v,this.z);for(var g=0;g<u;g++){var v=this.gridOuter[g]-this.gridInner[g];d[4*g+3]=Math.max(0,Math.min(255,Math.round(255-255*(v/this.radius+this.cutoff))))}i.putImageData(f,0,0),this.scratchW=c,this.scratchH=n};var Kst=Object.assign({fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"bold",fontSize:36,xOffset:0,yOffset:0,zOffset:.5,attachment:"bottom-left",showBorder:!1,borderColor:"lightgrey",borderWidth:.15,showBackground:!1,backgroundColor:"lightgrey",backgroundMargin:.5,backgroundOpacity:1,forceTransparent:!0,fixedSize:!1},Jo),Zst=Object.assign({fontFamily:{uniform:!0},fontStyle:{uniform:!0},fontWeight:{uniform:!0},fontSize:{uniform:!0},xOffset:{uniform:!0},yOffset:{uniform:!0},zOffset:{uniform:!0},showBorder:{uniform:!0},borderColor:{uniform:!0},borderWidth:{uniform:!0},backgroundColor:{uniform:!0},backgroundOpacity:{uniform:!0},fixedSize:{updateShader:!0}},Hh);function GH(e,t){for(var n=e.position.length/3,r=0,i=0;i<n;++i)r+=e.text[i].length;return t.showBackground&&(r+=n),r}var R0=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,{position:new Float32Array(3*GH(r,i)),color:new Float32Array(3*GH(r,i)),picking:new Mat},i),this.parameterTypes=Zst,this.alwaysTransparent=!0,this.hasWireframe=!1,this.isText=!0,this.vertexShader="SDFFont.vert",this.fragmentShader="SDFFont.frag",this.text=r.text,this.positionCount=r.position.length/3,this.addUniforms({fontTexture:{value:null},xOffset:{value:this.parameters.xOffset},yOffset:{value:this.parameters.yOffset},zOffset:{value:this.parameters.zOffset},ortho:{value:!1},showBorder:{value:this.parameters.showBorder},borderColor:{value:new ht(this.parameters.borderColor)},borderWidth:{value:this.parameters.borderWidth},backgroundColor:{value:new ht(this.parameters.backgroundColor)},backgroundOpacity:{value:this.parameters.backgroundOpacity},canvasHeight:{value:1},pixelRatio:{value:1}}),this.addAttributes({inputTexCoord:{type:"v2",value:null},inputSize:{type:"f",value:null}}),this.setAttributes(r),this.makeTexture(),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Kst},t.prototype.makeMaterial=function(){e.prototype.makeMaterial.call(this);var r=this.texture,i=this.material;i.transparent=!0,i.extensions.derivatives=!0,i.lights=!1,i.uniforms.fontTexture.value=r,i.needsUpdate=!0;var o=this.wireframeMaterial;o.transparent=!0,o.extensions.derivatives=!0,o.lights=!1,o.uniforms.fontTexture.value=r,o.needsUpdate=!0;var a=this.pickingMaterial;a.extensions.derivatives=!0,a.lights=!1,a.uniforms.fontTexture.value=r,a.needsUpdate=!0},t.prototype.setAttributes=function(r){var i,o,a,s,l,c;r===void 0&&(r={});var u=this.text,f=this.geometry.attributes;r.position&&(i=r.position,s=f.position.array,f.position.needsUpdate=!0),r.size&&(o=r.size,l=f.inputSize.array,f.inputSize.needsUpdate=!0),r.color&&(a=r.color,c=f.color.array,f.color.needsUpdate=!0);for(var d,p,h,g,v=this.positionCount,m=0,y=0;y<v;++y)for(p=3*y,g=u[y].length,this.parameters.showBackground&&(g+=1),h=0;h<g;++h,++m)for(var _=0;_<4;_++)d=4*m*3+3*_,i&&(s[d]=i[p],s[d+1]=i[p+1],s[d+2]=i[p+2]),o&&(l[4*m+_]=o[y]),a&&(c[d]=a[p],c[d+1]=a[p+1],c[d+2]=a[p+2])},t.prototype.makeTexture=function(){var r,i;this.textAtlas=(r={font:this.parameters.fontFamily,style:this.parameters.fontStyle,weight:this.parameters.fontWeight,size:this.parameters.fontSize},i=JSON.stringify(r),DR[i]===void 0&&(DR[i]=new qS(r)),DR[i]),this.texture=this.textAtlas.texture},t.prototype.makeMapping=function(){for(var r,i,o,a,s,l,c,u,f=this.textAtlas,d=this.text,p=this.parameters.attachment,h=f.lineHeight*this.parameters.backgroundMargin*.1-10,g=this.geometry.attributes,v=g.inputTexCoord.array,m=g.mapping.array,y=this.positionCount,_=0,b=0;b<y;++b){for(a=0,l=(o=d[b]).length,s=0;s<l;++s)a+=(r=f.get(o[s])).w-2*f.parameters.outline;for(u=p.startsWith("top")?f.lineHeight/1.25:p.startsWith("middle")?f.lineHeight/2.5:0,c=p.endsWith("right")?a:p.endsWith("center")?a/2:0,c+=f.parameters.outline,u+=f.parameters.outline,this.parameters.showBackground&&(m[(i=2*_*4)+0]=-f.lineHeight/6-c-h,m[i+1]=f.lineHeight-u+h,m[i+2]=-f.lineHeight/6-c-h,m[i+3]=0-u-h,m[i+4]=a+f.lineHeight/6-c+2*f.parameters.outline+h,m[i+5]=f.lineHeight-u+h,m[i+6]=a+f.lineHeight/6-c+2*f.parameters.outline+h,m[i+7]=0-u-h,v[i+0]=10,v[i+2]=10,v[i+4]=10,v[i+6]=10,_+=1),a=0,s=0;s<l;++s,++_){r=f.get(o[s]),m[(i=2*_*4)+0]=a-c,m[i+1]=r.h-u,m[i+2]=a-c,m[i+3]=0-u,m[i+4]=a+r.w-c,m[i+5]=r.h-u,m[i+6]=a+r.w-c,m[i+7]=0-u;var x=f.parameters.width,w=f.parameters.height,S=[r.x/x,r.y/w,r.x/x,(r.y+r.h)/w,(r.x+r.w)/x,r.y/w,(r.x+r.w)/x,(r.y+r.h)/w];v.set(S,i),a+=r.w-2*f.parameters.outline}}g.inputTexCoord.needsUpdate=!0,g.mapping.needsUpdate=!0},t.prototype.getDefines=function(r){var i=e.prototype.getDefines.call(this,r);return this.parameters.fixedSize&&(i.FIXED_SIZE=1),i},t.prototype.setUniforms=function(r){!r||r.fontFamily===void 0&&r.fontStyle===void 0&&r.fontWeight===void 0&&r.fontSize===void 0||(this.makeTexture(),this.makeMapping(),this.texture.needsUpdate=!0,r.fontTexture=this.texture),e.prototype.setUniforms.call(this,r)},Object.defineProperties(t.prototype,n),t}(VN);ds.add("text",R0),On.add("shader/WideLine.vert",`
uniform float clipNear;
uniform vec3 clipCenter;
uniform float linewidth;
uniform vec2 resolution;
uniform mat4 projectionMatrixInverse;
attribute vec2 mapping;
attribute vec3 position1;
attribute vec3 position2;
#ifdef PICKING
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
attribute vec3 color2;
varying vec3 vColor;
varying vec3 vColor2;
varying float flag;
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
void trimSegment( const in vec4 start, inout vec4 end ) {
float a = projectionMatrix[ 2 ][ 2 ]; float b = projectionMatrix[ 3 ][ 2 ]; float nearEstimate = - 0.5 * b / a;
float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );
end.xyz = mix( start.xyz, end.xyz, alpha );
}
void main() {
float aspect = resolution.x / resolution.y;
#ifdef PICKING
vPickingColor = unpackColor( primitiveId );
#else
flag = mapping.y;
vColor = color;
vColor2 = color2;
#endif
vec4 start = modelViewMatrix * vec4( position1, 1.0 );
vec4 end = modelViewMatrix * vec4( position2, 1.0 );
bool perspective = ( projectionMatrix[ 2 ][ 3 ] == -1.0 ); if ( perspective ) {
if ( start.z < 0.0 && end.z >= 0.0 ) {
trimSegment( start, end );
} else if ( end.z < 0.0 && start.z >= 0.0 ) {
trimSegment( end, start );
}
}
vec4 clipStart = projectionMatrix * start;
vec4 clipEnd = projectionMatrix * end;
vec2 ndcStart = clipStart.xy / clipStart.w;
vec2 ndcEnd = clipEnd.xy / clipEnd.w;
vec2 dir = ndcEnd - ndcStart;
dir.x *= aspect;
dir = normalize( dir );
vec2 offset = vec2( dir.y, - dir.x );
dir.x /= aspect;
offset.x /= aspect;
if ( mapping.x < 0.0 ) offset *= - 1.0;
offset *= linewidth;
offset /= resolution.y;
vec4 clip = ( mapping.y < 0.5 ) ? clipStart : clipEnd;
offset *= clip.w;
clip.xy += offset;
gl_Position = clip;
#ifndef PICKING
vViewPosition = ( projectionMatrixInverse * clip ).xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
}`),On.add("shader/WideLine.frag",`uniform vec3 diffuse;
uniform float opacity;
uniform float clipNear;
uniform float clipRadius;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#ifdef PICKING
uniform float objectId;
varying vec3 vPickingColor;
#else
#include common
#include fog_pars_fragment
varying vec3 vViewPosition;
varying vec3 vColor;
varying vec3 vColor2;
varying float flag;
#endif
void main() {
#include nearclip_fragment
#include radiusclip_fragment
#if defined( PICKING )
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
vec3 outgoingLight = vec3( 0.0 );
vec4 diffuseColor = vec4( diffuse, 1.0 );
if ( flag < 0.0 ) {
diffuseColor.rgb *= vColor;
} else {
diffuseColor.rgb *= vColor2;
}
#include alphatest_fragment
outgoingLight = diffuseColor.rgb;
gl_FragColor = vec4( outgoingLight, diffuseColor.a * opacity );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);var Jst=Object.assign({linewidth:2},Jo),Qst=Object.assign({linewidth:{uniform:!0}},Hh),Uu=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,r,i),this.parameterTypes=Qst,this.vertexShader="WideLine.vert",this.fragmentShader="WideLine.frag",!r.color2&&r.color&&(r.color2=r.color),this.addUniforms({linewidth:{value:this.parameters.linewidth},resolution:{value:new rt},projectionMatrixInverse:{value:new lt}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null}}),this.setAttributes(r),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Jst},t.prototype.setParameters=function(r){e.prototype.setParameters.call(this,r)},Object.defineProperties(t.prototype,n),t}(VN);ds.add("wideline",Uu);var elt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="angle",this.parameters=Object.assign({atomTriple:{type:"hidden",rebuild:!0},vectorVisible:{type:"boolean",default:!0},arcVisible:{type:"boolean",default:!0},sectorVisible:{type:"boolean",default:!0}},this.parameters),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.side=K(r.side,"double"),r.opacity=K(r.opacity,.5),this.atomTriple=K(r.atomTriple,[]),this.arcVisible=K(r.arcVisible,!0),this.sectorVisible=K(r.sectorVisible,!0),this.vectorVisible=K(r.vectorVisible,!0),e.prototype.init.call(this,r)},t.prototype.createData=function(n){if(n.atomCount&&this.atomTriple.length){var r=function(l,c){return function(u){for(var f=[],d=u.length/9,p=0;p<d;p++){for(var h=!0,g=p;g<p+3;g+=3)u[g]===u[g+3]&&u[g+1]===u[g+4]&&u[g+2]===u[g+5]&&(h=!1);h&&f.push(p)}var v=new Float32Array(9*f.length),m=0;return f.forEach(function(y){di(u,v,9*y,9*m,9),m++}),v}(XN(l,c))}(n,this.atomTriple),i=function(l,c){c===void 0&&(c={});for(var u=K(c.angleStep,Math.PI/90),f=l.length/9,d=new Float32Array(f),p=new Float32Array(3*f),h=new Array(f),g=new Float32Array(6*f),v=new Float32Array(6*f),m=new Array(f),y=new Array(f),_=new Array(f),b=0,x=Qt(),w=Qt(),S=Qt(),A=Qt(),C=Qt(),k=Qt(),O=Qt(),T=Qt(),B=Qt(),R=function(he){var ae=9*he;Ho(x,l,ae),Ho(w,l,ae+3),Ho(S,l,ae+6);var ye=6*he;sn(x,g,ye),sn(w,v,ye),sn(w,g,ye+3),sn(S,v,ye+3),Rr(A,x,w),Rr(C,S,w),Fr(A,A),Fr(C,C),Sa(k,A,C);var re=sd(k),te=oa(A,C),le=d[he]=Math.atan2(re,te);h[he]=(moe*le).toFixed(1)+String.fromCharCode(176),sd(k)===0&&(k[0]=1,k[1]=0,k[2]=0),Sa(O,k,A),Fr(O,O),fl(T,w,A,O,le/2),sn(T,p,3*he);var de=Math.ceil(le/u),_e=new Float32Array(9*de);_[he]=_e;var be=new Float32Array(3*de),ke=new Float32Array(3*de);m[he]=be,y[he]=ke,hl(B,w,A);for(var W=function(ge,pe){var ve=9*pe,$e=3*pe;sn(w,_e,ve),sn(B,_e,ve+3),sn(B,be,$e),fl(B,w,A,O,ge),sn(B,_e,ve+6),sn(B,ke,$e)},ee=0,Ee=u;Ee<le;Ee+=u)W(Ee,ee),ee++;W(le,ee),b+=de},P=0;P<f;P++)R(P);for(var D=3*b,z=9*b,N=new Float32Array(D),H=new Float32Array(D),J=new Float32Array(z),ne=0,oe=0,Z=0;Z<f;Z++){var ce=m[Z],se=y[Z];di(ce,N,0,oe,ce.length),di(se,H,0,oe,se.length),oe+=ce.length;var Y=_[Z];di(Y,J,0,ne,Y.length),ne+=Y.length}return{labelPosition:p,labelText:h,vectorPosition1:g,vectorPosition2:v,arcPosition1:N,arcPosition2:H,sectorPosition:J}}(r),o=this.n=i.labelPosition.length/3,a=new ht(this.labelColor);this.textBuffer=new R0({position:i.labelPosition,size:is(o,this.labelSize),color:Yn(o,a.r,a.g,a.b),text:i.labelText},this.getLabelBufferParams());var s=new ht(this.colorValue);return this.vectorBuffer=new Uu(b$({position1:i.vectorPosition1,position2:i.vectorPosition2,color:Yn(2*o,s.r,s.g,s.b),color2:Yn(2*o,s.r,s.g,s.b)}),this.getBufferParams({linewidth:this.linewidth,visible:this.vectorVisible,opacity:this.lineOpacity})),this.arcLength=i.arcPosition1.length/3,this.arcBuffer=new Uu(b$({position1:i.arcPosition1,position2:i.arcPosition2,color:Yn(this.arcLength,s.r,s.g,s.b),color2:Yn(this.arcLength,s.r,s.g,s.b)}),this.getBufferParams({linewidth:this.linewidth,visible:this.arcVisible,opacity:this.lineOpacity})),this.sectorLength=i.sectorPosition.length/3,this.sectorBuffer=new zu({position:i.sectorPosition,color:Yn(this.sectorLength,s.r,s.g,s.b)},this.getBufferParams({visible:this.sectorVisible})),{bufferList:[this.textBuffer,this.vectorBuffer,this.arcBuffer,this.sectorBuffer]}}},t.prototype.updateData=function(n,r){e.prototype.updateData.call(this,n,r);var i={},o={},a={};if(n.color){var s=new ht(this.colorValue);Object.assign(i,{color:Yn(2*this.n,s.r,s.g,s.b),color2:Yn(2*this.n,s.r,s.g,s.b)}),Object.assign(o,{color:Yn(this.arcLength,s.r,s.g,s.b),color2:Yn(this.arcLength,s.r,s.g,s.b)}),Object.assign(a,{color:Yn(this.sectorLength,s.r,s.g,s.b)})}this.vectorBuffer.setAttributes(i),this.arcBuffer.setAttributes(o),this.sectorBuffer.setAttributes(a)},t.prototype.setParameters=function(n){return e.prototype.setParameters.call(this,n,{},!1),!n||n.vectorVisible===void 0&&n.arcVisible===void 0&&n.sectorVisible===void 0||this.setVisibility(this.visible),n&&n.lineOpacity&&(this.vectorBuffer.setParameters({opacity:n.lineOpacity}),this.arcBuffer.setParameters({opacity:n.lineOpacity})),n&&n.opacity!==void 0&&(this.vectorBuffer.setParameters({opacity:this.lineOpacity}),this.arcBuffer.setParameters({opacity:this.lineOpacity})),n&&n.linewidth&&(this.vectorBuffer.setParameters({linewidth:n.linewidth}),this.arcBuffer.setParameters({linewidth:n.linewidth})),this},t.prototype.setVisibility=function(n,r){return e.prototype.setVisibility.call(this,n,!0),this.vectorBuffer&&this.vectorBuffer.setVisibility(this.vectorVisible&&this.visible),this.arcBuffer&&this.arcBuffer.setVisibility(this.arcVisible&&this.visible),this.sectorBuffer&&this.sectorBuffer.setVisibility(this.sectorVisible&&this.visible),r||this.viewer.requestRender(),this},t}(qN);xr.add("angle",elt);var WH=new V,BR=new V,NR=new V,tlt=new V(0,1,0),YN=Object.assign({radialSegments:1,openEnded:!0},Jo);function qH(e){e===void 0&&(e={});var t=K(e.radialSegments,10),n=K(e.openEnded,!0),r=new lt().makeRotationX(Math.PI/2),i=new Du(1,1,1,t,1,n);return i.applyMatrix4(r),i}var Qoe=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,function(s,l){l===void 0&&(l={});var c=qH(l),u=s.position1.length,f=c.attributes.position.array.length/3,d=u/3,p=new Float32Array(2*d*f);return g$(d,f,0,p),g$(d,f,d*f,p),{position:new Float32Array(2*u),color:new Float32Array(2*u),primitiveId:p,picking:s.picking}}(r,i),i,qH(i)),this.updateNormals=!0;var o=r.position1.length,a=r.radius.length;this.__center=new Float32Array(o),this._position=new Float32Array(2*o),this._color=new Float32Array(2*o),this._from=new Float32Array(2*o),this._to=new Float32Array(2*o),this._radius=new Float32Array(2*a),this.setAttributes(r,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return YN},t.prototype.applyPositionTransform=function(r,i,o){BR.fromArray(this._from,o),NR.fromArray(this._to,o),r.lookAt(BR,NR,tlt);var a=this._radius[i];WH.set(a,a,BR.distanceTo(NR)),r.scale(WH)},t.prototype.setAttributes=function(r,i){r===void 0&&(r={});var o={};r.position1&&r.position2&&(Ac(r.position1,r.position2,this.__center),Ac(r.position1,this.__center,this._position),Ac(this.__center,r.position2,this._position,r.position1.length),this._from.set(r.position1),this._from.set(this.__center,r.position1.length),this._to.set(this.__center),this._to.set(r.position2,this.__center.length),o.position=this._position),r.color&&r.color2&&(this._color.set(r.color),this._color.set(r.color2,r.color.length),o.color=this._color),r.radius&&(this._radius.set(r.radius),this._radius.set(r.radius,r.radius.length),o.radius=this._radius),e.prototype.setAttributes.call(this,o,i)},Object.defineProperties(t.prototype,n),t}(Bd);On.add("shader/CylinderImpostor.vert",`
attribute vec3 mapping;
attribute vec3 position1;
attribute vec3 position2;
attribute float radius;
varying vec3 axis;varying vec4 base_radius;varying vec4 end_b;varying vec3 U;varying vec3 V;
varying vec4 w;
#ifdef PICKING
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
attribute vec3 color2;
varying vec3 vColor1;
varying vec3 vColor2;
#endif
uniform mat4 modelViewMatrixInverse;
uniform float ortho;
#include matrix_scale
void main(){
#ifdef PICKING
vPickingColor = unpackColor( primitiveId );
#else
vColor1 = color;
vColor2 = color2;
#endif
base_radius.w = radius * matrixScale( modelViewMatrix );
vec3 center = position;
vec3 dir = normalize( position2 - position1 );
float ext = length( position2 - position1 ) / 2.0;
vec3 cam_dir;
if( ortho == 0.0 ){
cam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 0, 1 ) ).xyz - center;
}else{
cam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 1, 0 ) ).xyz;
}
cam_dir = normalize( cam_dir );
vec3 ldir;
float b = dot( cam_dir, dir );
end_b.w = b;
if( b < 0.0 )
ldir = -ext * dir;
else
ldir = ext * dir;
vec3 left = radius * normalize( cross( cam_dir, ldir ) );
vec3 up = radius * normalize( cross( left, ldir ) );
axis = normalize( normalMatrix * ldir );
U = normalize( normalMatrix * up );
V = normalize( normalMatrix * left );
vec4 base4 = modelViewMatrix * vec4( center - ldir, 1.0 );
base_radius.xyz = base4.xyz / base4.w;
vec4 end4 = modelViewMatrix * vec4( center + ldir, 1.0 );
end_b.xyz = end4.xyz / end4.w;
w = modelViewMatrix * vec4(
center + mapping.x*ldir + mapping.y*left + mapping.z*up, 1.0
);
gl_Position = projectionMatrix * w;
gl_Position.z = 0.99;
}`),On.add("shader/CylinderImpostor.frag",`#define STANDARD
#define IMPOSTOR
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 interiorColor;
uniform float interiorDarkening;
uniform float roughness;
uniform float metalness;
uniform float opacity;
uniform float clipNear;
uniform mat4 projectionMatrix;
uniform float ortho;
varying vec3 axis;
varying vec4 base_radius;
varying vec4 end_b;
varying vec3 U;
varying vec3 V;
varying vec4 w;
#ifdef PICKING
uniform float objectId;
varying vec3 vPickingColor;
#else
varying vec3 vColor1;
varying vec3 vColor2;
#include common
#include fog_pars_fragment
#include bsdfs
#include lights_pars_begin
#include lights_physical_pars_fragment
#endif
bool interior = false;
float distSq3( vec3 v3a, vec3 v3b ){
return (
( v3a.x - v3b.x ) * ( v3a.x - v3b.x ) +
( v3a.y - v3b.y ) * ( v3a.y - v3b.y ) +
( v3a.z - v3b.z ) * ( v3a.z - v3b.z )
);
}
float calcDepth( in vec3 cameraPos ){
vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;
return 0.5 + 0.5 * clipZW.x / clipZW.y;
}
float calcClip( vec3 cameraPos ){
return dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );
}
void main(){
vec3 ray_target = w.xyz / w.w;
vec3 base = base_radius.xyz; float vRadius = base_radius.w; vec3 end = end_b.xyz; float b = end_b.w;
vec3 ray_origin = vec3(0.0); vec3 ortho_ray_direction = vec3(0.0, 0.0, 1.0); vec3 persp_ray_direction = normalize(ray_origin - ray_target);
vec3 ray_direction = mix(persp_ray_direction, ortho_ray_direction, ortho);

mat3 basis = mat3( U, V, axis );
vec3 diff = ray_target - 0.5 * (base + end);

vec3 P = diff * basis;
float dz = dot( axis, ray_direction );
float radius2 = vRadius*vRadius;
vec3 D = vec3(dot(U, ray_direction),
dot(V, ray_direction),
dz);
float a0 = P.x*P.x + P.y*P.y - radius2;
float a1 = P.x*D.x + P.y*D.y;
float a2 = D.x*D.x + D.y*D.y;
float d = a1*a1 - a0*a2;
if (d < 0.0) {
discard;
}
float dist = (-a1 + sqrt(d)) / a2;
vec3 surface_point = ray_target + dist * ray_direction;
vec3 base_to_surface = surface_point - base;
vec3 _normal = normalize( base_to_surface - axis * dot(base_to_surface, axis) );
float base_cap_test = dot( base_to_surface, axis );
float end_cap_test = dot((surface_point - end), axis);
#ifndef CAP
vec3 new_point2 = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;
vec3 tmp_point2 = new_point2 - base;
#endif
if (base_cap_test < 0.0) {
float dNV;
float near;
vec3 front_point;
if ( ortho == 1.0 ) {
front_point = ray_target;
} else {
dNV = dot(-axis, ray_direction);
near = dot(-axis, (base)) / dNV;
front_point = ray_direction * near + ray_origin;
}
if (dot(front_point - base, front_point-base) > radius2) {
discard;
}
#ifdef CAP
surface_point = front_point;
_normal = axis;
#else
surface_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;
dNV = dot(-axis, ray_direction);
near = dot(axis, end) / dNV;
new_point2 = ray_direction * near + ray_origin;
if (dot(new_point2 - end, new_point2-base) < radius2) {
discard;
}
interior = true;
#endif
}
if( end_cap_test > 0.0 )
{
float dNV;
float near;
vec3 end_point;
if ( ortho == 1.0 ) {
end_point = ray_target;
} else {
dNV = dot(axis, ray_direction);
if (dNV < 0.0) {
discard;
}
near = dot(axis, end) / dNV;
end_point = ray_direction * near + ray_origin;
}

if( dot(end_point - end, end_point-base) > radius2 ) {
discard;
}
#ifdef CAP
surface_point = end_point;
_normal = axis;
#else
surface_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;
dNV = dot(-axis, ray_direction);
near = dot(-axis, (base)) / dNV;
new_point2 = ray_direction * near + ray_origin;
if (dot(new_point2 - base, new_point2-base) < radius2) {
discard;
}
interior = true;
#endif
}
gl_FragDepthEXT = calcDepth( surface_point );

#ifdef NEAR_CLIP
if( calcClip( surface_point ) > 0.0 ){
dist = (-a1 - sqrt(d)) / a2;
surface_point = ray_target + dist * ray_direction;
if( calcClip( surface_point ) > 0.0 ) {
discard;
}
interior = true;
gl_FragDepthEXT = calcDepth( surface_point );
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );
}
}else if( gl_FragDepthEXT <= 0.0 ){
dist = (-a1 - sqrt(d)) / a2;
surface_point = ray_target + dist * ray_direction;
interior = true;
gl_FragDepthEXT = calcDepth( surface_point );
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );
}
}
#else
if( gl_FragDepthEXT <= 0.0 ){
dist = (-a1 - sqrt(d)) / a2;
surface_point = ray_target + dist * ray_direction;
interior = true;
gl_FragDepthEXT = calcDepth( surface_point );
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );
}
}
#endif
if (gl_FragDepthEXT < 0.0) {
discard;
}
if (gl_FragDepthEXT > 1.0) {
discard;
}
#ifdef PICKING
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
vec3 vViewPosition = -surface_point;
vec3 vNormal = _normal;
vec3 vColor;
if( distSq3( surface_point, end ) < distSq3( surface_point, base ) ){
if( b < 0.0 ){
vColor = vColor1;
}else{
vColor = vColor2;
}
}else{
if( b > 0.0 ){
vColor = vColor1;
}else{
vColor = vColor2;
}
}
vec4 diffuseColor = vec4( diffuse, opacity );
ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
vec3 totalEmissiveLight = emissive;
#include color_fragment
#include roughnessmap_fragment
#include metalnessmap_fragment
vec3 normal = normalize( vNormal );
vec3 geometryNormal = normal;
#include lights_physical_fragment
#include lights_fragment_begin
#include lights_fragment_end
vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;
if( interior ){
#ifdef USE_INTERIOR_COLOR
outgoingLight.xyz = interiorColor;
#else
#ifdef DIFFUSE_INTERIOR
outgoingLight.xyz = vColor;
#endif
#endif
outgoingLight.xyz *= 1.0 - interiorDarkening;
}
gl_FragColor = vec4( outgoingLight, diffuseColor.a );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);var nlt=new Float32Array([-1,1,-1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1]),rlt=new Uint16Array([0,1,2,1,4,2,2,4,3,4,5,3]),ilt=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,"v3",r,i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={mapping:{configurable:!0},mappingIndices:{configurable:!0},mappingIndicesSize:{configurable:!0},mappingSize:{configurable:!0},mappingItemSize:{configurable:!0}};return n.mapping.get=function(){return nlt},n.mappingIndices.get=function(){return rlt},n.mappingIndicesSize.get=function(){return 12},n.mappingSize.get=function(){return 6},n.mappingItemSize.get=function(){return 3},Object.defineProperties(t.prototype,n),t}(UN),eae=Object.assign({openEnded:!1},Jo),olt=Object.assign({openEnded:{updateShader:!0}},Hh),alt=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,r,i),this.parameterTypes=olt,this.isImpostor=!0,this.vertexShader="CylinderImpostor.vert",this.fragmentShader="CylinderImpostor.frag",this.addUniforms({modelViewMatrixInverse:{value:new lt},ortho:{value:0}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},radius:{type:"f",value:null}}),this.setAttributes(r),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return eae},t.prototype.getDefines=function(r){var i=e.prototype.getDefines.call(this,r);return this.parameters.openEnded||(i.CAP=1),i},Object.defineProperties(t.prototype,n),t}(ilt);Object.assign({disableImpostor:!1},YN,eae);var ef=function(e,t){return t===void 0&&(t={}),!e.color2&&e.color&&(e.color2=e.color),!Cc||t&&t.disableImpostor?new Qoe(e,t):new alt(e,t)};ds.add("cylinder",ef);var slt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="axes",this.parameters=Object.assign({radiusSize:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,radialSegments:!0,disableImpostor:!0,showAxes:{type:"boolean",rebuild:!0},showBox:{type:"boolean",rebuild:!0}},this.parameters,{assembly:null}),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.radiusSize=K(r.radiusSize,.5),r.colorValue=K(r.colorValue,"lightgreen"),r.useInteriorColor=K(r.useInteriorColor,!0),this.showAxes=K(r.showAxes,!0),this.showBox=K(r.showBox,!1),e.prototype.init.call(this,r)},t.prototype.getPrincipalAxes=function(){var n,r=this.getAssembly();return r&&(n=r.partList[0].getSelection()),this.structureView.getPrincipalAxes(n)},t.prototype.getAxesData=function(n){var r=this.getPrincipalAxes(),i=new ht(this.colorValue),o=0,a=0;this.showAxes&&(o+=6,a+=3),this.showBox&&(o+=8,a+=12);var s=new Float32Array(3*o),l=Yn(o,i.r,i.g,i.b),c=is(o,this.radiusSize),u=new Float32Array(3*a),f=new Float32Array(3*a),d=Yn(a,i.r,i.g,i.b),p=is(a,this.radiusSize),h=0;if(this.showAxes){var g=function(B,R){B.toArray(s,2*h),R.toArray(s,2*h+3),B.toArray(u,h),R.toArray(f,h),h+=3};g(r.begA,r.endA),g(r.begB,r.endB),g(r.begC,r.endC)}if(this.showBox){var v=new V,m=r.getProjectedScaleForAtoms(n),y=m.d1a,_=m.d2a,b=m.d3a,x=m.d1b,w=m.d2b,S=m.d3b,A=2*h,C=function(B,R,P){v.copy(r.center).addScaledVector(r.normVecA,B).addScaledVector(r.normVecB,R).addScaledVector(r.normVecC,P),v.toArray(s,A),A+=3};C(y,_,b),C(y,_,S),C(y,w,S),C(y,w,b),C(x,w,S),C(x,w,b),C(x,_,b),C(x,_,S);var k=h,O=function(B,R){v.fromArray(s,2*h+3*B).toArray(u,k),v.fromArray(s,2*h+3*R).toArray(f,k),k+=3};O(0,1),O(0,3),O(0,6),O(1,2),O(1,7),O(2,3),O(2,4),O(3,5),O(4,5),O(4,7),O(5,6),O(6,7)}var T=new bat(r);return{vertex:{position:s,color:l,radius:c,picking:T},edge:{position1:u,position2:f,color:d,color2:d,radius:p,picking:T}}},t.prototype.create=function(){var n=this.getAxesData(this.structureView);this.sphereBuffer=new Nd(n.vertex,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),this.cylinderBuffer=new ef(n.edge,this.getBufferParams({openEnded:!0,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bufferList:[this.sphereBuffer,this.cylinderBuffer]})},t.prototype.createData=function(n){},t.prototype.updateData=function(n,r){var i=this.getAxesData(r.sview),o={},a={};n&&!n.position||(Object.assign(o,{position:i.vertex.position}),Object.assign(a,{position1:i.edge.position1,position2:i.edge.position2})),n&&!n.color||(Object.assign(o,{color:i.vertex.color}),Object.assign(a,{color:i.edge.color,color2:i.edge.color})),n&&!n.radius||(Object.assign(o,{radius:i.vertex.radius}),Object.assign(a,{radius:i.edge.radius})),this.sphereBuffer.setAttributes(o),this.cylinderBuffer.setAttributes(a)},t}(uo);xr.add("axes",slt);var mT=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="ball+stick",this.parameters=Object.assign({sphereDetail:!0,radialSegments:!0,openEnded:!0,disableImpostor:!0,aspectRatio:{type:"number",precision:1,max:10,min:1},lineOnly:{type:"boolean",rebuild:!0},cylinderOnly:{type:"boolean",rebuild:!0},multipleBond:{type:"select",rebuild:!0,options:{off:"off",symmetric:"symmetric",offset:"offset"}},bondScale:{type:"number",precision:2,max:1,min:.01},bondSpacing:{type:"number",precision:2,max:2,min:.5},linewidth:{type:"integer",max:50,min:1,buffer:!0}},this.parameters),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.radiusType=K(r.radiusType,"size"),r.radiusSize=K(r.radiusSize,.15),r.useInteriorColor=K(r.useInteriorColor,!0),this.aspectRatio=K(r.aspectRatio,2),this.lineOnly=K(r.lineOnly,!1),this.cylinderOnly=K(r.cylinderOnly,!1),this.multipleBond=K(r.multipleBond,"off"),this.bondSpacing=K(r.bondSpacing,1),this.bondScale=K(r.bondScale,.4),this.linewidth=K(r.linewidth,2),e.prototype.init.call(this,r)},t.prototype.getAtomRadius=function(n){return this.aspectRatio*e.prototype.getAtomRadius.call(this,n)},t.prototype.getAtomParams=function(n,r){var i=e.prototype.getAtomParams.call(this,n,r);return i.radiusParams.scale*=this.aspectRatio,i},t.prototype.getAtomData=function(n,r,i){return n.getAtomData(this.getAtomParams(r,i))},t.prototype.getBondParams=function(n,r){return r=Object.assign({multipleBond:this.multipleBond,bondSpacing:this.bondSpacing,bondScale:this.bondScale},r),e.prototype.getBondParams.call(this,n,r)},t.prototype.getBondData=function(n,r,i){return n.getBondData(this.getBondParams(r,i))},t.prototype.createData=function(n){var r=[];if(this.lineOnly)this.lineBuffer=new Uu(this.getBondData(n,{position:!0,color:!0,picking:!0}),this.getBufferParams({linewidth:this.linewidth})),r.push(this.lineBuffer);else{var i=new ef(this.getBondData(n),this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}));if(r.push(i),!this.cylinderOnly){var o=new Nd(this.getAtomData(n),this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0}));r.push(o)}}return{bufferList:r}},t.prototype.updateData=function(n,r){this.multipleBond!=="off"&&n&&n.radius&&(n.position=!0);var i=this.getBondData(r.sview,n);if(this.lineOnly){var o={};n&&!n.position||Object.assign(o,{position1:i.position1,position2:i.position2}),n&&!n.color||Object.assign(o,{color:i.color,color2:i.color2}),r.bufferList[0].setAttributes(o)}else{var a={};if(n&&!n.position||Object.assign(a,{position1:i.position1,position2:i.position2}),n&&!n.color||Object.assign(a,{color:i.color,color2:i.color2}),n&&!n.radius||Object.assign(a,{radius:i.radius}),r.bufferList[0].setAttributes(a),!this.cylinderOnly){var s=this.getAtomData(r.sview,n),l={};n&&!n.position||Object.assign(l,{position:s.position}),n&&!n.color||Object.assign(l,{color:s.color}),n&&!n.radius||Object.assign(l,{radius:s.radius}),r.bufferList[1].setAttributes(l)}}},t.prototype.setParameters=function(n){n===void 0&&(n={});var r=!1,i={};return(n.aspectRatio||n.bondSpacing||n.bondScale)&&(Object.assign(i,{radius:!0}),Cc&&!this.disableImpostor||(r=!0)),e.prototype.setParameters.call(this,n,i,r),this},t}(uo);xr.add("ball+stick",mT);var llt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="backbone",this.parameters=Object.assign({},this.parameters,{multipleBond:null,bondSpacing:null}),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.aspectRatio=K(r.aspectRatio,1),r.radiusSize=K(r.radiusSize,.25),e.prototype.init.call(this,r)},t.prototype.getAtomRadius=function(n){return n.isTrace()?e.prototype.getAtomRadius.call(this,n):0},t.prototype.getAtomData=function(n,r,i){return n.getBackboneAtomData(this.getAtomParams(r,i))},t.prototype.getBondData=function(n,r,i){return n.getBackboneBondData(this.getBondParams(r,i))},t}(mT);xr.add("backbone",llt);var clt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="base",this.parameters=Object.assign({},this.parameters,{multipleBond:null,bondSpacing:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.aspectRatio=K(r.aspectRatio,1),r.radiusSize=K(r.radiusSize,.3),e.prototype.init.call(this,r)},t.prototype.getAtomData=function(n,r,i){return n.getRungAtomData(this.getAtomParams(r,i))},t.prototype.getBondData=function(n,r,i){var o=this.getBondParams(r,i);return Object.assign(o.colorParams,{rung:!0}),n.getRungBondData(o)},t}(mT);xr.add("base",clt);var Ni=function(e,t){this.m=e,this.tension=t,this.dt=1/this.m,this.delta=1e-4,this.vec1=new V,this.vec2=new V,this.vDir=new V,this.vTan=new V,this.vNorm=new V,this.vBin=new V,this.m2=Math.ceil(this.m/2)};Ni.prototype.interpolateToArr=function(e,t,n,r,i,o,a){o[a+0]=uu(e.x,t.x,n.x,r.x,i,this.tension),o[a+1]=uu(e.y,t.y,n.y,r.y,i,this.tension),o[a+2]=uu(e.z,t.z,n.z,r.z,i,this.tension)},Ni.prototype.interpolateToVec=function(e,t,n,r,i,o){o.x=uu(e.x,t.x,n.x,r.x,i,this.tension),o.y=uu(e.y,t.y,n.y,r.y,i,this.tension),o.z=uu(e.z,t.z,n.z,r.z,i,this.tension)},Ni.prototype.interpolatePosition=function(e,t,n,r,i,o){for(var a=0;a<this.m;++a){var s=o+3*a,l=this.dt*a;this.interpolateToArr(e,t,n,r,l,i,s)}},Ni.prototype.interpolateTangent=function(e,t,n,r,i,o){for(var a=0;a<this.m;++a){var s=this.dt*a,l=s-this.delta,c=s+this.delta,u=o+3*a;l<0&&(l=0),c>1&&(c=1),this.interpolateToVec(e,t,n,r,l,this.vec1),this.interpolateToVec(e,t,n,r,c,this.vec2),this.vec2.sub(this.vec1).normalize(),this.vec2.toArray(i,u)}},Ni.prototype.vectorSubdivide=function(e,t,n,r,i){for(var o,a=t.next(),s=t.next(),l=t.next(),c=t.size,u=c-1,f=r||0,d=0;d<u;++d)o=a,a=s,s=l,l=t.next(),e.apply(this,[o,a,s,l,n,f]),f+=3*this.m;i&&(o=t.get(c-2),a=t.get(c-1),s=t.get(0),l=t.get(1),e.apply(this,[o,a,s,l,n,f]),f+=3*this.m)},Ni.prototype.getPosition=function(e,t,n,r){e.reset(),this.vectorSubdivide(this.interpolatePosition,e,t,n,r);var i=e.size-1,o=i*this.m*3;r&&(o+=3*this.m);var a=e.get(r?0:i);t[o]=a.x,t[o+1]=a.y,t[o+2]=a.z},Ni.prototype.getTangent=function(e,t,n,r){e.reset(),this.vectorSubdivide(this.interpolateTangent,e,t,n,r);var i=(e.size-1)*this.m*3;r&&(i+=3*this.m),di(t,t,i-3,i,3)},Ni.prototype.interpolateNormalDir=function(e,t,n,r,i,o,a,s,l,c,u,f,d){for(var p=0;p<this.m;++p){var h=f+3*p;d&&(h+=3*this.m2);var g=this.dt*p;this.interpolateToVec(e,t,n,r,g,this.vec1),this.interpolateToVec(i,o,a,s,g,this.vec2),this.vDir.subVectors(this.vec2,this.vec1).normalize(),this.vTan.fromArray(l,h),this.vBin.crossVectors(this.vDir,this.vTan).normalize(),this.vBin.toArray(u,h),this.vNorm.crossVectors(this.vTan,this.vBin).normalize(),this.vNorm.toArray(c,h)}},Ni.prototype.interpolateNormal=function(e,t,n,r,i){for(var o=0;o<this.m;++o){var a=i+3*o;e.copy(this.vNorm),this.vTan.fromArray(t,a),this.vBin.crossVectors(e,this.vTan).normalize(),this.vBin.toArray(r,a),this.vNorm.crossVectors(this.vTan,this.vBin).normalize(),this.vNorm.toArray(n,a)}},Ni.prototype.getNormal=function(e,t,n,r,i,o){this.vNorm.set(0,0,1);for(var a=e-1,s=i||0,l=0;l<a;++l)this.interpolateNormal(this.vDir,t,n,r,s),s+=3*this.m;o&&(this.interpolateNormal(this.vDir,t,n,r,s),s+=3*this.m),this.vBin.toArray(r,s),this.vNorm.toArray(n,s)},Ni.prototype.getNormalDir=function(e,t,n,r,i,o,a,s){e.reset(),t.reset();var l=new V,c=new V,u=new V,f=new V,d=new V,p=new V().copy(e.next()),h=new V().copy(e.next()),g=new V().copy(e.next()),v=new V,m=new V().copy(t.next()),y=new V().copy(t.next()),_=new V().copy(t.next());this.vNorm.set(0,0,1);for(var b=e.size,x=b-1,w=o||0,S=0;S<x;++S)d.copy(p),p.copy(h),h.copy(g),g.copy(e.next()),v.copy(m),m.copy(y),y.copy(_),_.copy(t.next()),S===0?(l.subVectors(v,d),c.subVectors(m,p),l.dot(c)<0&&(c.multiplyScalar(-1),m.addVectors(p,c)),u.subVectors(y,h),c.dot(u)<0&&(u.multiplyScalar(-1),y.addVectors(h,u))):u.copy(f),f.subVectors(_,g),u.dot(f)<0&&(f.multiplyScalar(-1),_.addVectors(g,f)),this.interpolateNormalDir(d,p,h,g,v,m,y,_,n,r,i,w,s),w+=3*this.m;if(a&&(d.copy(e.get(b-2)),p.copy(e.get(b-1)),h.copy(e.get(0)),g.copy(e.get(1)),v.copy(t.get(b-2)),m.copy(t.get(b-1)),y.copy(t.get(0)),_.copy(t.get(1)),u.copy(f),f.subVectors(_,g),u.dot(f)<0&&(f.multiplyScalar(-1),_.addVectors(g,f)),this.interpolateNormalDir(d,p,h,g,v,m,y,_,n,r,i,w,s),w+=3*this.m),s){this.vBin.fromArray(i,3*this.m2),this.vNorm.fromArray(r,3*this.m2);for(var A=0;A<this.m2;++A)this.vBin.toArray(i,3*A),this.vNorm.toArray(r,3*A)}else this.vBin.toArray(i,w),this.vNorm.toArray(r,w)},Ni.prototype.interpolateColor=function(e,t,n,r,i){var o,a;for(o=0;o<this.m2;++o)a=i+3*o,n.apply(this,[e,r,a]);for(o=this.m2;o<this.m;++o)a=i+3*o,n.apply(this,[t,r,a])},Ni.prototype.getColor=function(e,t,n,r,i){var o;e.reset(),e.next();for(var a=e.next(),s=e.size,l=s-1,c=r||0,u=0;u<l;++u)o=a,a=e.next(),this.interpolateColor(o,a,t,n,c),c+=3*this.m;i&&(o=e.get(s-1),a=e.get(0),this.interpolateColor(o,a,t,n,c),c+=3*this.m),n[c]=n[c-3],n[c+1]=n[c-2],n[c+2]=n[c-1]},Ni.prototype.interpolatePicking=function(e,t,n,r,i){var o;for(o=0;o<this.m2;++o)r[i+o]=n.apply(this,[e]);for(o=this.m2;o<this.m;++o)r[i+o]=n.apply(this,[t])},Ni.prototype.getPicking=function(e,t,n,r,i){var o;e.reset(),e.next();for(var a=e.next(),s=e.size,l=s-1,c=r||0,u=0;u<l;++u)o=a,a=e.next(),this.interpolatePicking(o,a,t,n,c),c+=this.m;i&&(o=e.get(s-1),a=e.get(0),this.interpolatePicking(o,a,t,n,c),c+=this.m),n[c]=n[c-1]},Ni.prototype.interpolateSize=function(e,t,n,r,i){for(var o=n.apply(this,[e]),a=n.apply(this,[t]),s=0;s<this.m;++s){var l=s/this.m;r[i+s]=(1-l)*o+l*a}},Ni.prototype.getSize=function(e,t,n,r,i){var o;e.reset(),e.next();for(var a=e.next(),s=e.size,l=s-1,c=r||0,u=0;u<l;++u)o=a,a=e.next(),this.interpolateSize(o,a,t,n,c),c+=this.m;i&&(o=e.get(s-1),a=e.get(0),this.interpolateSize(o,a,t,n,c),c+=this.m),n[c]=n[c-1]};var Uo=function(e,t){this.polymer=e,this.size=e.residueCount;var n=t||{};this.directional=n.directional||!1,this.positionIterator=n.positionIterator||!1,this.subdiv=n.subdiv||1,this.smoothSheet=n.smoothSheet||!1,n.tension?this.tension=n.tension:this.tension=this.polymer.isNucleic()?.5:.9,this.interpolator=new Ni(this.subdiv,this.tension)};Uo.prototype.getAtomIterator=function(e,t){var n=this.polymer,r=n.structure,i=n.residueCount,o=0,a=-1,s=[r.getAtomProxy(),r.getAtomProxy(),r.getAtomProxy(),r.getAtomProxy()],l=[new V,new V,new V,new V],c=r.getAtomProxy(),u=r.getAtomProxy();function f(d){var p=s[o%4];if(p.index=n.getAtomIndexByType(d,e),t&&d>0&&d<i&&p.sstruc==="e"){var h=l[o%4];return c.index=n.getAtomIndexByType(d+1,e),u.index=n.getAtomIndexByType(d-1,e),h.addVectors(c,u).add(p).add(p).multiplyScalar(.25),o+=1,h}return o+=1,p}return{size:i,next:function(){var d=f(a);return a+=1,d},get:f,reset:function(){o=0,a=-1}}},Uo.prototype.getSubdividedColor=function(e){var t=this.subdiv,n=this.polymer,r=(n.residueCount-1)*t*3+3;n.isCyclic&&(r+=3*t);var i=new Float32Array(r),o=this.getAtomIterator("trace"),a=e||{};a.structure=n.structure;var s=pn.getScheme(a);return this.interpolator.getColor(o,function(l,c,u){s.atomColorToArray(l,c,u)},i,0,n.isCyclic),{color:i}},Uo.prototype.getSubdividedPicking=function(){var e=this.subdiv,t=this.polymer,n=(t.residueCount-1)*e+1;t.isCyclic&&(n+=e);var r=t.structure,i=this.getAtomIterator("trace"),o=new Float32Array(n);return this.interpolator.getPicking(i,function(a){return a.index},o,0,t.isCyclic),{picking:new Vh(o,r)}},Uo.prototype.getSubdividedPosition=function(){return{position:this.getPosition()}},Uo.prototype.getSubdividedOrientation=function(){var e=this.getTangent(),t=this.getNormals(e);return{tangent:e,normal:t.normal,binormal:t.binormal}},Uo.prototype.getSubdividedSize=function(e){var t=this.subdiv,n=this.polymer,r=(n.residueCount-1)*t+1;n.isCyclic&&(r+=t);var i=new Float32Array(r),o=this.getAtomIterator("trace"),a=new $c(e);return this.interpolator.getSize(o,function(s){return a.atomRadius(s)},i,0,n.isCyclic),{size:i}},Uo.prototype.getPosition=function(){var e=this.subdiv,t=this.polymer,n=(t.residueCount-1)*e*3+3;t.isCyclic&&(n+=3*e);var r=new Float32Array(n),i=this.positionIterator||this.getAtomIterator("trace",this.smoothSheet);return this.interpolator.getPosition(i,r,0,t.isCyclic),r},Uo.prototype.getTangent=function(){var e=this.subdiv,t=this.polymer,n=(this.size-1)*e*3+3;t.isCyclic&&(n+=3*e);var r=new Float32Array(n),i=this.positionIterator||this.getAtomIterator("trace",this.smoothSheet);return this.interpolator.getTangent(i,r,0,t.isCyclic),r},Uo.prototype.getNormals=function(e){var t=this.subdiv,n=this.polymer,r=n.isProtein(),i=this.size,o=(i-1)*t*3+3;n.isCyclic&&(o+=3*t);var a=new Float32Array(o),s=new Float32Array(o);if(this.directional&&!this.polymer.isCg()){var l=this.getAtomIterator("direction1"),c=this.getAtomIterator("direction2");this.interpolator.getNormalDir(l,c,e,a,s,0,n.isCyclic,r)}else this.interpolator.getNormal(i,e,a,s,0,n.isCyclic);return{normal:a,binormal:s}};var XH=new V,j2=new V,ult=Object.assign({radialSegments:4,capped:!1,aspectRatio:1},Jo),flt=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,function(o,a){a===void 0&&(a={});var s=K(a.radialSegments,4),l=K(a.capped,!1),c=l?s:0,u=l?s-2:0,f=o.position.length/3,d=f*s*3+2*c*3,p=2*(f-1)*s*3+2*u*3;return{position:new Float32Array(d),color:new Float32Array(d),index:Lc(p,d/3),normal:new Float32Array(d),picking:o.picking}}(r,i),i),this.capVertices=this.parameters.capped?this.parameters.radialSegments:0,this.capTriangles=this.parameters.capped?this.parameters.radialSegments-2:0,this.size2=r.position.length/3,r.primitiveId=T0(this.size2),this.setAttributes(r),this.makeIndex()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return ult},t.prototype.setAttributes=function(r){r===void 0&&(r={});var i,o,a,s,l,c,u,f,d,p,h,g,v,m=this.parameters.aspectRatio,y=this.size2,_=y-1,b=this.parameters.radialSegments,x=this.geometry.attributes;r.position&&(i=r.position,o=r.normal,a=r.binormal,s=r.tangent,c=r.size,f=x.position.array,p=x.normal.array,x.position.needsUpdate=!0,x.normal.needsUpdate=!0),r.color&&(l=r.color,d=x.color.array,x.color.needsUpdate=!0),r.primitiveId&&(u=r.primitiveId,h=x.primitiveId.array,x.primitiveId.needsUpdate=!0);var w=0,S=0,A=0,C=0,k=0,O=0,T=0,B=0,R=0,P=0,D=[],z=[],N=[],H=[],J=[],ne=[];if(i)for(var oe=0;oe<b;++oe){var Z=oe/b*2*Math.PI;D[oe]=m*Math.cos(Z),z[oe]=Math.sin(Z),N[oe]=m*Math.cos(Z-.01),H[oe]=Math.sin(Z-.01),J[oe]=m*Math.cos(Z+.01),ne[oe]=Math.sin(Z+.01)}for(var ce=0;ce<y;++ce){v=(g=3*ce)*b,i&&s&&o&&a&&c&&(XH.set(s[g],s[g+1],s[g+2]),S=o[g],A=o[g+1],C=o[g+2],k=a[g],O=a[g+1],T=a[g+2],B=i[g],R=i[g+1],P=i[g+2],w=c[ce]);for(var se=0;se<b;++se){var Y=v+3*se;if(i){var he=-w*D[se],ae=w*z[se],ye=-w*N[se],re=w*H[se],te=-w*J[se],le=w*ne[se];f[Y]=B+he*S+ae*k,f[Y+1]=R+he*A+ae*O,f[Y+2]=P+he*C+ae*T,j2.set(te*S+le*k-(ye*S+re*k),te*A+le*O-(ye*A+re*O),te*C+le*T-(ye*C+re*T)).cross(XH),p[Y]=j2.x,p[Y+1]=j2.y,p[Y+2]=j2.z}l&&(d[Y]=l[g],d[Y+1]=l[g+1],d[Y+2]=l[g+2]),u&&(h[ce*b+se]=u[ce])}}g=0,v=3*y*b;for(var de=0;de<b;++de){var _e=g+3*de,be=v+3*de;i&&s&&(f[be]=f[_e],f[be+1]=f[_e+1],f[be+2]=f[_e+2],p[be]=s[g],p[be+1]=s[g+1],p[be+2]=s[g+2]),l&&(d[be]=d[_e],d[be+1]=d[_e+1],d[be+2]=d[_e+2]),u&&(h[y*b+de]=h[0+de])}g=3*(y-1)*b,v=3*(y+1)*b;for(var ke=0;ke<b;++ke){var W=g+3*ke,ee=v+3*ke;i&&s&&(f[ee]=f[W],f[ee+1]=f[W+1],f[ee+2]=f[W+2],p[ee]=s[3*_],p[ee+1]=s[3*_+1],p[ee+2]=s[3*_+2]),l&&(d[ee]=d[W],d[ee+1]=d[W+1],d[ee+2]=d[W+2]),u&&(h[(y+1)*b+ke]=h[(y-1)*b+ke])}},t.prototype.makeIndex=function(){var r=this.geometry.getIndex();if(r){for(var i,o,a=r.array,s=this.size2,l=s-1,c=this.capTriangles,u=this.parameters.radialSegments,f=this.parameters.radialSegments+1,d=0;d<l;++d)for(var p=d*u*3*2,h=d*u,g=(d+1)*u,v=0;v<u;++v)a[o=p+3*v*2]=h+v,a[o+1]=h+(v+1)%u,a[o+2]=g+v,a[o+3]=g+v,a[o+4]=h+(v+1)%u,a[o+5]=g+(v+1)%u;for(var m=[0],y=1;y<f/2;++y)m.push(y),u-y!==y&&m.push(u-y);o=l*u*3*2,i=s*u;for(var _=0;_<m.length-2;++_)_%2==0?(a[o+3*_+0]=i+m[_+0],a[o+3*_+1]=i+m[_+1],a[o+3*_+2]=i+m[_+2]):(a[o+3*_+0]=i+m[_+2],a[o+3*_+1]=i+m[_+1],a[o+3*_+2]=i+m[_+0]);o=l*u*3*2+3*c,i=s*u+u;for(var b=0;b<m.length-2;++b)b%2==0?(a[o+3*b+0]=i+m[b+0],a[o+3*b+1]=i+m[b+1],a[o+3*b+2]=i+m[b+2]):(a[o+3*b+0]=i+m[b+2],a[o+3*b+1]=i+m[b+1],a[o+3*b+2]=i+m[b+0])}else Ge.error("Index is null")},Object.defineProperties(t.prototype,n),t}(zu),KN=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="cartoon",this.parameters=Object.assign({aspectRatio:{type:"number",precision:1,max:10,min:1,rebuild:!0},subdiv:{type:"integer",max:50,min:1,rebuild:!0},radialSegments:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},capped:{type:"boolean",rebuild:!0},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.colorScheme=K(r.colorScheme,"chainname"),r.colorScale=K(r.colorScale,"RdYlBu"),r.radiusType=K(r.radiusType,"sstruc"),r.radiusScale=K(r.radiusScale,.7),r.useInteriorColor=K(r.useInteriorColor,!0),this.aspectRatio=K(r.aspectRatio,5),this.tension=K(r.tension,NaN),this.capped=K(r.capped,!0),this.smoothSheet=K(r.smoothSheet,!1),r.quality==="low"?(this.subdiv=3,this.radialSegments=6):r.quality==="medium"?this.subdiv=6:r.quality==="high"?this.subdiv=12:this.subdiv=K(r.subdiv,6),e.prototype.init.call(this,r)},t.prototype.getSplineParams=function(n){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:this.aspectRatio!==1,smoothSheet:this.smoothSheet},n)},t.prototype.getSpline=function(n){return new Uo(n,this.getSplineParams())},t.prototype.getAspectRatio=function(n){return n.isCg()?1:this.aspectRatio},t.prototype.getAtomRadius=function(n){return n.isTrace()?e.prototype.getAtomRadius.call(this,n):0},t.prototype.createData=function(n){var r=this,i=[],o=[];return this.structure.eachPolymer(function(a){if(!(a.residueCount<4)){o.push(a);var s=r.getSpline(a),l=r.getAspectRatio(a),c=s.getSubdividedPosition(),u=s.getSubdividedOrientation(),f=s.getSubdividedColor(r.getColorParams()),d=s.getSubdividedPicking(),p=s.getSubdividedSize(r.getRadiusParams());i.push(new flt(Object.assign({},c,u,f,d,p),r.getBufferParams({radialSegments:r.radialSegments,aspectRatio:l,capped:r.capped})))}},n.getSelection()),{bufferList:i,polymerList:o}},t.prototype.updateData=function(n,r){Ze&&Ge.time(this.type+" repr update"),n=n||{};for(var i=0,o=r.polymerList.length;i<o;++i){var a={},s=r.polymerList[i],l=this.getSpline(s),c=this.getAspectRatio(s);if(Object.assign(r.bufferList[i],{aspectRatio:c}),n.position||n.radius){var u=l.getSubdividedPosition(),f=l.getSubdividedOrientation(),d=l.getSubdividedSize(this.getRadiusParams(c));a.position=u.position,a.normal=f.normal,a.binormal=f.binormal,a.tangent=f.tangent,a.size=d.size}if(n.color){var p=l.getSubdividedColor(this.getColorParams());a.color=p.color}if(n.picking){var h=l.getSubdividedPicking();a.picking=h.picking}r.bufferList[i].setAttributes(a)}Ze&&Ge.timeEnd(this.type+" repr update")},t.prototype.setParameters=function(n){var r={};return n&&n.aspectRatio&&(r.radius=!0),n&&n.tension&&(r.position=!0),e.prototype.setParameters.call(this,n,r,!1),this},t}(uo);xr.add("cartoon",KN);var dlt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="contact",this.parameters=Object.assign({hydrogenBond:{type:"boolean",rebuild:!0},weakHydrogenBond:{type:"boolean",rebuild:!0},waterHydrogenBond:{type:"boolean",rebuild:!0},backboneHydrogenBond:{type:"boolean",rebuild:!0},hydrophobic:{type:"boolean",rebuild:!0},halogenBond:{type:"boolean",rebuild:!0},ionicInteraction:{type:"boolean",rebuild:!0},metalCoordination:{type:"boolean",rebuild:!0},cationPi:{type:"boolean",rebuild:!0},piStacking:{type:"boolean",rebuild:!0},filterSele:{type:"text",rebuild:!0},labelVisible:{type:"boolean",rebuild:!0},labelFixedSize:{type:"boolean",buffer:"fixedSize"},labelSize:{type:"number",precision:3,max:10,min:.001,rebuild:!0},labelUnit:{type:"select",rebuild:!0,options:{"":"",angstrom:"angstrom",nm:"nm"}},maxHydrophobicDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondSulfurDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondAccAngle:{type:"integer",max:180,min:0,rebuild:!0},maxHbondDonAngle:{type:"integer",max:180,min:0,rebuild:!0},maxHbondAccPlaneAngle:{type:"integer",max:90,min:0,rebuild:!0},maxHbondDonPlaneAngle:{type:"integer",max:90,min:0,rebuild:!0},maxPiStackingDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxPiStackingOffset:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxPiStackingAngle:{type:"integer",max:180,min:0,rebuild:!0},maxCationPiDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxCationPiOffset:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxIonicDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHalogenBondDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHalogenBondAngle:{type:"integer",max:180,min:0,rebuild:!0},maxMetalDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},refineSaltBridges:{type:"boolean",rebuild:!0},masterModelIndex:{type:"integer",max:1e3,min:-1,rebuild:!0},lineOfSightDistFactor:{type:"number",precision:1,max:10,min:0,rebuild:!0},radialSegments:!0,disableImpostor:!0},this.parameters),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.radiusSize=K(r.radiusSize,.05),r.useInteriorColor=K(r.useInteriorColor,!0),this.hydrogenBond=K(r.hydrogenBond,!0),this.weakHydrogenBond=K(r.weakHydrogenBond,!1),this.waterHydrogenBond=K(r.waterHydrogenBond,!1),this.backboneHydrogenBond=K(r.backboneHydrogenBond,!1),this.hydrophobic=K(r.hydrophobic,!1),this.halogenBond=K(r.halogenBond,!0),this.ionicInteraction=K(r.ionicInteraction,!0),this.metalCoordination=K(r.metalCoordination,!0),this.cationPi=K(r.cationPi,!0),this.piStacking=K(r.piStacking,!0),this.filterSele=K(r.filterSele,""),this.labelVisible=K(r.labelVisible,!1),this.labelFixedSize=K(r.labelFixedSize,!1),this.labelSize=K(r.labelSize,2),this.labelUnit=K(r.labelUnit,""),this.maxHydrophobicDist=K(r.maxHydrophobicDist,4),this.maxHbondDist=K(r.maxHbondDist,3.5),this.maxHbondSulfurDist=K(r.maxHbondSulfurDist,4.1),this.maxHbondAccAngle=K(r.maxHbondAccAngle,45),this.maxHbondDonAngle=K(r.maxHbondDonAngle,45),this.maxHbondAccPlaneAngle=K(r.maxHbondAccPlaneAngle,90),this.maxHbondDonPlaneAngle=K(r.maxHbondDonPlaneAngle,30),this.maxPiStackingDist=K(r.maxPiStackingDist,5.5),this.maxPiStackingOffset=K(r.maxPiStackingOffset,2),this.maxPiStackingAngle=K(r.maxPiStackingAngle,30),this.maxCationPiDist=K(r.maxCationPiDist,6),this.maxCationPiOffset=K(r.maxCationPiOffset,2),this.maxIonicDist=K(r.maxIonicDist,5),this.maxHalogenBondDist=K(r.maxHalogenBondDist,3.5),this.maxHalogenBondAngle=K(r.maxHalogenBondAngle,30),this.maxMetalDist=K(r.maxMetalDist,3),this.refineSaltBridges=K(r.refineSaltBridges,!0),this.masterModelIndex=K(r.masterModelIndex,-1),this.lineOfSightDistFactor=K(r.lineOfSightDistFactor,1),e.prototype.init.call(this,r)},t.prototype.getAtomRadius=function(){return 0},t.prototype.getContactData=function(n){var r={maxHydrophobicDist:this.maxHydrophobicDist,maxHbondDist:this.maxHbondDist,maxHbondSulfurDist:this.maxHbondSulfurDist,maxHbondAccAngle:this.maxHbondAccAngle,maxHbondDonAngle:this.maxHbondDonAngle,maxHbondAccPlaneAngle:this.maxHbondAccPlaneAngle,maxHbondDonPlaneAngle:this.maxHbondDonPlaneAngle,maxPiStackingDist:this.maxPiStackingDist,maxPiStackingOffset:this.maxPiStackingOffset,maxPiStackingAngle:this.maxPiStackingAngle,maxCationPiDist:this.maxCationPiDist,maxCationPiOffset:this.maxCationPiOffset,maxIonicDist:this.maxIonicDist,maxHalogenBondDist:this.maxHalogenBondDist,maxHalogenBondAngle:this.maxHalogenBondAngle,maxMetalDist:this.maxMetalDist,refineSaltBridges:this.refineSaltBridges,masterModelIndex:this.masterModelIndex,lineOfSightDistFactor:this.lineOfSightDistFactor},i={hydrogenBond:this.hydrogenBond,weakHydrogenBond:this.weakHydrogenBond,waterHydrogenBond:this.waterHydrogenBond,backboneHydrogenBond:this.backboneHydrogenBond,hydrophobic:this.hydrophobic,halogenBond:this.halogenBond,ionicInteraction:this.ionicInteraction,metalCoordination:this.metalCoordination,cationPi:this.cationPi,piStacking:this.piStacking,radius:this.radiusSize*this.radiusScale,filterSele:this.filterSele};return gat(pat(n,r),n,i)},t.prototype.createData=function(n){var r=this.getContactData(n),i=[new ef(Uot(r),this.getBufferParams({sphereDetail:1,dullInterior:!0,disableImpostor:this.disableImpostor}))];if(this.labelVisible){var o={size:this.labelSize,unit:this.labelUnit};i.push(new R0(function(a,s){for(var l=Ac(a.position1,a.position2),c=[],u=oT(a.position1,a.position2),f=u.length/3,d=0;d<f;d++){var p=3*d,h=Math.sqrt(Math.pow(u[p],2)+Math.pow(u[p+1],2)+Math.pow(u[p+2],2));switch(s.unit){case"angstrom":c[d]=h.toFixed(2)+" "+String.fromCharCode(8491);break;case"nm":c[d]=(h/10).toFixed(2)+" nm";break;default:c[d]=h.toFixed(2)}}return{position:l,size:is(l.length/3,s.size),color:a.color,text:c}}(r,o),this.getBufferParams({fixedSize:this.labelFixedSize})))}return{bufferList:i}},t}(uo);xr.add("contact",dlt);var plt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="dihedral",this.parameters=Object.assign({atomQuad:{type:"hidden",rebuild:!0},extendLine:{type:"boolean",rebuild:!0,default:!0},lineVisible:{type:"boolean",default:!0},planeVisible:{type:"boolean",default:!0},sectorVisible:{type:"boolean",default:!0}},this.parameters),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.side=K(r.side,"double"),r.opacity=K(r.opacity,.5),this.atomQuad=K(r.atomQuad,[]),this.extendLine=K(r.extendLine,!0),this.lineVisible=K(r.lineVisible,!0),this.planeVisible=K(r.planeVisible,!0),this.sectorVisible=K(r.sectorVisible,!0),e.prototype.init.call(this,r)},t.prototype.createData=function(n){if(n.atomCount&&this.atomQuad.length){var r=function(l,c){c===void 0&&(c={});for(var u=K(c.angleStep,Math.PI/90),f=l.length,d=l.length/12,p=new Float32Array(d),h=new Float32Array(3*d),g=new Array(d),v=new Array(d),m=new Array(d),y=new Array(d),_=new Array(d),b=0,x=0,w=0,S=Qt(),A=Qt(),C=Qt(),k=Qt(),O=Qt(),T=Qt(),B=Qt(),R=Qt(),P=Qt(),D=Qt(),z=Qt(),N=Qt(),H=Qt(),J=Qt(),ne=Qt(),oe=0,Z=function(ee){if(Ho(S,l,ee),Ho(A,l,ee+3),Ho(C,l,ee+6),Ho(k,l,ee+9),Rr(O,S,A),Rr(T,C,A),sd(T)!==0){Rr(B,k,C),Zn(R,T,.5),hl(P,A,R),Fr(O,O),Fr(T,T),Fr(B,B),Rr(R,S,P);var Ee=oa(R,T)>0;Rr(R,k,P);var ge=oa(R,T)<0;if(Zn(R,T,oa(T,O)),Rr(D,O,R),Zn(R,T,oa(T,B)),Rr(z,B,R),sd(D)!==0&&sd(z)!==0){Fr(D,D),Fr(z,z);var pe=p[oe]=function(Pe,Xe){var He=Pe[0],Ve=Pe[1],Je=Pe[2],Ye=Xe[0],yt=Xe[1],mt=Xe[2],ut=Ve*mt-Je*yt,Et=Je*Ye-He*mt,et=He*yt-Ve*Ye,ct=Math.sqrt(ut*ut+Et*Et+et*et),_t=He*Ye+Ve*yt+Je*mt;return Math.atan2(ct,_t)}(D,z);g[oe]=(moe*pe).toFixed(1)+String.fromCharCode(176),Sa(J,D,T),Fr(J,J),oa(J,z)<0&&sT(J,J),fl(R,P,D,J,pe/2),sn(R,h,3*oe);var ve=Math.ceil(pe/u),$e=ve+(c.extendLine?4:2),Ne=c.extendLine?36:0,Ae=new Float32Array(3*$e),Oe=new Float32Array(3*$e),j=new Float32Array(9*ve),M=new Float32Array(Ne);v[oe]=Ae,m[oe]=Oe,y[oe]=j,_[oe]=M,c.extendLine&&(Ee?(Rr(R,S,C),Fr(R,R),Zn(N,R,1/oa(D,R)),hl(N,N,C)):(Zn(N,O,1/oa(D,O)),hl(N,N,A)),ge?(Rr(R,k,A),Fr(R,R),Zn(H,R,1/oa(z,R)),hl(H,H,A)):(Zn(H,B,1/oa(z,B)),hl(H,H,C))),hl(ne,P,D);var L=0;c.extendLine?(sn(S,Ae,L),sn(N,Oe,L),sn(N,Ae,L+=3),sn(ne,Oe,L),L+=3,sn(N,M,0),sn(ne,M,3),sn(Ee?C:A,M,6),sn(Ee?C:A,M,9),sn(ne,M,12),sn(P,M,15)):(sn(P,Ae,L),sn(ne,Oe,L),L+=3);for(var q=function(Pe,Xe){var He=9*Xe;sn(P,j,He),sn(ne,j,He+3),sn(ne,Ae,L),fl(ne,P,D,J,Pe),sn(ne,j,He+6),sn(ne,Oe,L),L+=3},me=0,Te=u;Te<pe;Te+=u)q(Te,me++);q(pe,me++),c.extendLine?(sn(ne,Ae,3*($e-2)),sn(H,Oe,3*($e-2)),sn(H,Ae,3*($e-1)),sn(k,Oe,3*($e-1)),sn(H,M,18),sn(ne,M,21),sn(ge?A:C,M,24),sn(ge?A:C,M,27),sn(ne,M,30),sn(P,M,33)):(sn(ne,Ae,L),sn(P,Oe,L),L+=3),b+=3*$e,x+=9*ve,w+=Ne,oe+=1}}},ce=0;ce<f;ce+=12)Z(ce);for(var se=oe,Y=new Float32Array(b),he=new Float32Array(b),ae=new Float32Array(x),ye=new Float32Array(w),re=0,te=0,le=0,de=0;de<se;de++){var _e=v[de],be=m[de],ke=y[de],W=_[de];di(_e,Y,0,re,_e.length),di(be,he,0,re,be.length),di(ke,ae,0,te,ke.length),di(W,ye,0,le,W.length),re+=_e.length,te+=ke.length,le+=W.length}return{labelPosition:h.subarray(0,3*se),labelText:g.slice(0,se),linePosition1:Y,linePosition2:he,planePosition:ye,sectorPosition:ae}}(XN(n,this.atomQuad),{extendLine:this.extendLine}),i=this.n=r.labelText.length,o=new ht(this.labelColor);this.textBuffer=new R0({position:r.labelPosition,size:is(i,this.labelSize),color:Yn(i,o.r,o.g,o.b),text:r.labelText},this.getLabelBufferParams());var a=new ht(this.colorValue);this.lineLength=r.linePosition1.length/3;var s=Yn(this.lineLength,a.r,a.g,a.b);return this.lineBuffer=new Uu(b$({position1:r.linePosition1,position2:r.linePosition2,color:s,color2:s}),this.getBufferParams({linewidth:this.linewidth,visible:this.lineVisible,opacity:this.lineOpacity})),this.planeLength=r.planePosition.length/3,this.planeBuffer=new zu({position:r.planePosition,color:Yn(this.planeLength,a.r,a.g,a.b)},this.getBufferParams({visible:this.planeVisible})),this.sectorLength=r.sectorPosition.length/3,this.sectorBuffer=new zu({position:r.sectorPosition,color:Yn(this.sectorLength,a.r,a.g,a.b)},this.getBufferParams({visible:this.sectorVisible})),{bufferList:[this.textBuffer,this.lineBuffer,this.planeBuffer,this.sectorBuffer]}}},t.prototype.updateData=function(n,r){e.prototype.updateData.call(this,n,r);var i={},o={},a={};if(n.color){var s=new ht(this.colorValue);Object.assign(i,{color:Yn(this.lineLength,s.r,s.g,s.b),color2:Yn(this.lineLength,s.r,s.g,s.b)}),Object.assign(o,{color:Yn(this.planeLength,s.r,s.g,s.b)}),Object.assign(a,{color:Yn(this.sectorLength,s.r,s.g,s.b)})}this.lineBuffer.setAttributes(i),this.planeBuffer.setAttributes(o),this.sectorBuffer.setAttributes(a)},t.prototype.setParameters=function(n){return e.prototype.setParameters.call(this,n,{},!1),!n||n.lineVisible===void 0&&n.sectorVisible===void 0&&n.planeVisible===void 0||this.setVisibility(this.visible),n&&n.lineOpacity&&this.lineBuffer.setParameters({opacity:n.lineOpacity}),n&&n.opacity!==void 0&&this.lineBuffer.setParameters({opacity:this.lineOpacity}),n&&n.linewidth&&this.lineBuffer.setParameters({linewidth:n.linewidth}),this},t.prototype.setVisibility=function(n,r){return e.prototype.setVisibility.call(this,n,!0),this.lineBuffer&&this.lineBuffer.setVisibility(this.lineVisible&&this.visible),this.planeBuffer&&this.planeBuffer.setVisibility(this.planeVisible&&this.visible),this.sectorBuffer&&this.sectorBuffer.setVisibility(this.sectorVisible&&this.visible),r||this.viewer.requestRender(),this},t}(qN);xr.add("dihedral",plt);function FR(e,t){function n(o,a){return a in o}var r=Object.assign({},e);for(var i in r)n(r,i)&&n(t,i)&&(r[i]=K(t[i],r[i]));return r}function ol(e,t){var n=new ht(e),r=new Float32Array(3*t);return Yn(t,n.r,n.g,n.b,r),r}var hlt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="dihedral-histogram",this.parameters=Object.assign({histogramsData:{type:"hidden",rebuild:!0},histogramBinBorderVisible:{type:"boolean",default:!0},scaleBinToSectorArea:{type:"boolean",rebuild:!0,default:!1}},this.parameters),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{},i=FR({histogramBinBorderColor:"grey",adjacentBondArrowColor:"black",distantBondArrowColor:"magenta",frontHistogramColor:"green",backHistogramColor:"blue",opaqueMiddleDiscColor:"white"},r);Object.assign(this,i);var o=FR({histogramsData:[],histogramOpacity:1,opaqueMiddleDiscVisible:!0,opaqueMiddleDiscOpacity:1,histogramBinBorderVisible:!0,histogramBinBorderWidth:1,histogramBinBorderOpacity:.5,bondArrowVisible:!0,bondArrowWidth:2,bondArrowOpacity:1,scaleBinToSectorArea:!1},r);Object.assign(this,o),this.histogramsData.forEach(function(a){var s=FR(i,a);Object.assign(a,s)}),r.side=K(r.side,"double"),r.opacity=K(r.opacity,.5),r.radiusType=K(r.radiusType,"size"),r.radiusSize=K(r.radiusSize,.15),e.prototype.init.call(this,r)},t.prototype.getHistogramBinBorderBufferParameters=function(){return this.getBufferParams({linewidth:this.histogramBinBorderWidth,visible:this.histogramBinBorderVisible,opacity:this.histogramBinBorderOpacity})},t.prototype.getBondArrowsBufferParameters=function(){return this.getBufferParams({linewidth:this.bondArrowWidth,visible:this.bondArrowVisible,opacity:this.bondArrowOpacity})},t.prototype.getOpaqueMiddleDiscBufferParameters=function(){return this.getBufferParams({visible:this.opaqueMiddleDiscVisible,opacity:this.opaqueMiddleDiscOpacity})},t.prototype.getHistogramBufferParameters=function(){return this.getBufferParams({visible:!0,opacity:this.histogramOpacity,side:"double"})},t.prototype.createData=function(n){if(n.atomCount&&this.histogramsData.length){this.histogramsData.forEach(function(f){return f.atomPositions=XN(n,[f.atomQuad])});var r=this.scaleBinToSectorArea?function(f){return Math.sqrt(f)}:function(f){return f};this.histogramsData.forEach(function(f){return f.histogram360Scaled=f.histogram360.map(r)});for(var i=[],o=0;o<this.histogramsData.length;o++){var a=void 0,s=this.histogramsData[o];s.histogram360.length>=3&&(a=mlt(s)),a!==void 0&&i.push(a)}return this.frontHistogramBinBordersBuffer=c(i.map(function(f){return f.frontHistogramBinBorders}),this.getHistogramBinBorderBufferParameters()),this.backHistogramBinBordersBuffer=c(i.map(function(f){return f.backHistogramBinBorders}),this.getHistogramBinBorderBufferParameters()),this.adjacentBondArrowsBuffer=c(i.map(function(f){return f.adjacentBondArrows}),this.getBondArrowsBufferParameters()),this.distantBondArrowsBuffer=c(i.map(function(f){return f.distantBondArrows}),this.getBondArrowsBufferParameters()),this.opaqueMiddleDiscBuffer=u(i.map(function(f){return f.opaqueMiddleDisc}),this.getOpaqueMiddleDiscBufferParameters()),this.frontHistogramBuffer=u(i.map(function(f){return f.frontHistogram}),this.getHistogramBufferParameters()),this.backHistogramBuffer=u(i.map(function(f){return f.backHistogram}),this.getHistogramBufferParameters()),{bufferList:[].concat(this.frontHistogramBinBordersBuffer,this.backHistogramBinBordersBuffer,this.adjacentBondArrowsBuffer,this.distantBondArrowsBuffer,this.opaqueMiddleDiscBuffer,this.frontHistogramBuffer,this.backHistogramBuffer)}}function l(f){for(var d=f.map(function(v){return v.length}),p=new Float32Array($N(d)),h=0,g=0;g<f.length;g++)p.set(f[g],h),h+=f[g].length;return p}function c(f,d){return new Uu({position1:l(f.map(function(p){return p.startPoints})),position2:l(f.map(function(p){return p.endPoints})),color:l(f.map(function(p){return p.startColors})),color2:l(f.map(function(p){return p.endColors}))},d)}function u(f,d){return new zu({position:l(f.map(function(p){return p.triangles})),color:l(f.map(function(p){return p.triangleColors}))},d)}},t.prototype.setParameters=function(n){return e.prototype.setParameters.call(this,n,{},!1),n&&n.histogramBinBorderVisible!==void 0&&this.setVisibility(this.visible),this},t.prototype.setVisibility=function(n,r){return e.prototype.setVisibility.call(this,n,!0),this.frontHistogramBinBordersBuffer&&this.frontHistogramBinBordersBuffer.setVisibility(this.histogramBinBorderVisible),this.backHistogramBinBordersBuffer&&this.backHistogramBinBordersBuffer.setVisibility(this.histogramBinBorderVisible),r||this.viewer.requestRender(),this},t}(uo);function mlt(e){for(var t=e.atomPositions,n=e.histogram360Scaled,r=n.length<=180?360:2*n.length,i={triangles:new Float32Array(3*r*3),triangleColors:ol(e.opaqueMiddleDiscColor,3*r)},o={triangles:new Float32Array(3*n.length*3),triangleColors:ol(e.frontHistogramColor,3*n.length)},a={triangles:new Float32Array(3*n.length*3),triangleColors:ol(e.backHistogramColor,3*n.length)},s={startPoints:new Float32Array(3*n.length),endPoints:new Float32Array(3*n.length),startColors:ol(e.histogramBinBorderColor,n.length),endColors:ol(e.histogramBinBorderColor,n.length)},l={startPoints:new Float32Array(3*n.length),endPoints:new Float32Array(3*n.length),startColors:ol(e.histogramBinBorderColor,n.length),endColors:ol(e.histogramBinBorderColor,n.length)},c={startPoints:new Float32Array(6),endPoints:new Float32Array(6),startColors:ol(e.adjacentBondArrowColor,n.length),endColors:ol(e.adjacentBondArrowColor,n.length)},u={startPoints:new Float32Array(6),endPoints:new Float32Array(6),startColors:ol(e.distantBondArrowColor,n.length),endColors:ol(e.distantBondArrowColor,n.length)},f=Qt(),d=Qt(),p=Qt(),h=Qt(),g=Qt(),v=Qt(),m=Qt(),y=Qt(),_=Qt(),b=Qt(),x=Qt(),w=Qt(),S=Qt(),A=Qt(),C=Qt(),k=Qt(),O=[f,d,p,h],T=0;T<O.length;T++)Ho(O[T],t,3*T);if(Rr(g,f,d),Rr(v,p,d),Rr(y,h,p),sd(v)!==0&&(Zn(C,v,.5),hl(_,d,C),Fr(g,g),Fr(v,v),Fr(y,y),sT(m,v),Zn(C,m,oa(m,g)),Rr(b,g,C),Zn(C,v,oa(v,y)),Rr(x,y,C),sd(b)!==0&&sd(x)!==0)){Fr(b,b),Fr(x,x);var B=Math.acos(oa(b,x));Sa(w,m,b),Sa(S,v,x),Fr(w,w),Fr(S,S);var R=B;oa(w,x)<0&&(R=-B),hl(A,_,b);for(var P=Math.max.apply(null,n),D=2*Math.PI/n.length,z=2*Math.PI/r,N=0;N<r;N++){var H=3*N*3;sn(_,i.triangles,H),fl(A,_,b,w,N*z),sn(A,i.triangles,H+3),fl(A,_,b,w,(N+1)*z),sn(A,i.triangles,H+6)}return Zn(C,v,-.01),hl(_,_,C),ne(o,s,0,b,w),Zn(C,v,.02),hl(_,_,C),ne(a,l,1,x,S),{opaqueMiddleDisc:i,frontHistogram:o,backHistogram:a,frontHistogramBinBorders:s,backHistogramBinBorders:l,adjacentBondArrows:c,distantBondArrows:u}}function J(oe,Z,ce,se,Y){var he=3*Z*3;sn(_,oe,he);var ae=Number(n[Z])/P;Zn(C,ce,ae),Zn(k,se,ae),fl(A,_,C,k,Z*Y),sn(A,oe,he+3),fl(A,_,C,k,(Z+1)*Y),sn(A,oe,he+6)}function ne(oe,Z,ce,se,Y){di(_,c.startPoints,0,3*ce,_.length),fl(C,_,se,Y,0+0*D),di(C,c.endPoints,0,3*ce,_.length),di(_,u.startPoints,0,3*ce,_.length),fl(C,_,se,Y,R),di(C,u.endPoints,0,3*ce,_.length);for(var he=0;he<n.length;he++)di(_,Z.startPoints,0,3*he,_.length),fl(C,_,se,Y,0+D*he),di(C,Z.endPoints,0,3*he,C.length);for(var ae=0;ae<n.length;ae++)J(oe.triangles,ae,se,Y,D)}}xr.add("dihedral-histogram",hlt);var glt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="distance",this.parameters=Object.assign({radialSegments:!0,openEnded:!0,disableImpostor:!0,labelUnit:{type:"select",rebuild:!0,options:{"":"",angstrom:"angstrom",nm:"nm"}},useCylinder:{type:"boolean",rebuild:!0},atomPair:{type:"hidden",rebuild:!0}},this.parameters),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.linewidth=K(r.linewidth,5),r.radiusType=K(r.radiusType,"size"),r.radiusSize=K(r.radiusSize,.2),this.labelUnit=K(r.labelUnit,""),this.useCylinder=K(r.useCylinder,!1),this.atomPair=K(r.atomPair,[]),e.prototype.init.call(this,r)},t.prototype.getDistanceData=function(n,r){var i=this,o=r.length,a=new Array(o),s=new Float32Array(3*o),l=new Hn,c=new Hn,u=new GS,f=n.getAtomProxy(),d=n.getAtomProxy(),p=0,h=n.getAtomSet();r.forEach(function(v,m){var y=v[0],_=v[1];if(typeof y=="number"&&Number.isInteger(y)&&typeof _=="number"&&Number.isInteger(_)){if(!h.get(y)||!h.get(_))return void(p+=1);f.index=y,d.index=_}else{l.setString(y),c.setString(_);var b=n.getAtomIndices(l),x=n.getAtomIndices(c);if(!b.length||!x.length)return void(p+=1);f.index=b[0],d.index=x[0]}u.addBond(f,d,1),m-=p;var w=f.distanceTo(d);switch(i.labelUnit){case"angstrom":a[m]=w.toFixed(2)+" "+String.fromCharCode(8491);break;case"nm":a[m]=(w/10).toFixed(2)+" nm";break;default:a[m]=w.toFixed(2)}var S=3*m;s[S+0]=(f.x+d.x)/2,s[S+1]=(f.y+d.y)/2,s[S+2]=(f.z+d.z)/2}),p>0&&(o-=p,s=s.subarray(0,3*o));var g=new Jt(u.count,!0);return{text:a,position:s,bondSet:g,bondStore:u}},t.prototype.getBondData=function(n,r,i){var o=n.getBondData(this.getBondParams(r,i));return o.picking&&(o.picking=new Sat(o.picking.array,o.picking.structure,i.bondStore)),o},t.prototype.createData=function(n){if(n.atomCount&&this.atomPair.length){var r=this.atomPair.length,i=new ht(this.labelColor),o=this.getDistanceData(n,this.atomPair);this.textBuffer=new R0({position:o.position,size:is(r,this.labelSize),color:Yn(r,i.r,i.g,i.b),text:o.text},this.getLabelBufferParams());var a={bondSet:o.bondSet,bondStore:o.bondStore},s=this.getBondData(n,{position:!0,color:!0,picking:!0,radius:this.useCylinder},a);return this.useCylinder?this.distanceBuffer=new ef(s,this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})):this.distanceBuffer=new Uu(_oe(s),this.getBufferParams({linewidth:this.linewidth,visible:this.lineVisible,opacity:this.lineOpacity})),{bondSet:o.bondSet,bondStore:o.bondStore,position:o.position,bufferList:[this.textBuffer,this.distanceBuffer]}}},t.prototype.updateData=function(n,r){e.prototype.updateData.call(this,n,r);var i={bondSet:r.bondSet,bondStore:r.bondStore},o=this.getBondData(r.sview,n,i),a={};n&&!n.color||Object.assign(a,{color:o.color,color2:o.color2}),n&&!n.radius||Object.assign(a,{radius:o.radius}),this.distanceBuffer.setAttributes(a)},t.prototype.setParameters=function(n){return e.prototype.setParameters.call(this,n,{},!1),this.useCylinder||(n&&n.lineOpacity&&this.distanceBuffer.setParameters({opacity:n.lineOpacity}),n&&n.opacity!==void 0&&this.distanceBuffer.setParameters({opacity:this.lineOpacity}),n&&n.linewidth&&this.distanceBuffer.setParameters({linewidth:n.linewidth})),this},t}(qN);function jR(e){return 2*(e.position.length/3)*3}xr.add("distance",glt);var vlt=Object.assign({scale:1,color:"grey"},Jo),YH=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,{position:new Float32Array(jR(r)),color:new Float32Array(jR(r))},i),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag";var o=new ht(this.parameters.color),a=this.geometry.attributes;Yn(jR(r)/3,o.r,o.g,o.b,a.color.array),this.setAttributes(r)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return vlt},t.prototype.setAttributes=function(r){r===void 0&&(r={});var i,o,a,s=this.geometry.attributes;r.position&&r.vector&&(i=r.position,o=r.vector,a=s.position.array,s.position.needsUpdate=!0);var l=this.size/2,c=this.parameters.scale;if(i&&o)for(var u=0;u<l;u++){var f=2*u*3,d=3*u;a[f+0]=i[d+0],a[f+1]=i[d+1],a[f+2]=i[d+2],a[f+3]=i[d+0]+o[d+0]*c,a[f+4]=i[d+1]+o[d+1]*c,a[f+5]=i[d+2]+o[d+2]*c}},Object.defineProperties(t.prototype,n),t}(vn),ylt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="helixorient",this.parameters=Object.assign({sphereDetail:!0,disableImpostor:!0},this.parameters),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.colorScheme=K(r.colorScheme,"sstruc"),r.radiusType=K(r.radiusType,"size"),r.radiusSize=K(r.radiusSize,.15),r.radiusScale=K(r.radiusScale,1),r.useInteriorColor=K(r.useInteriorColor,!0),e.prototype.init.call(this,r)},t.prototype.createData=function(n){var r=this,i=[],o=[];return this.structure.eachPolymer(function(a){if(!(a.residueCount<4)){o.push(a);var s=new hu(a),l=s.getPosition(),c=s.getColor(r.getColorParams()),u=s.getSize(r.getRadiusParams()),f=s.getPicking();i.push(new Nd({position:l.center,color:c.color,radius:u.size,picking:f.picking},r.getBufferParams({sphereDetail:r.sphereDetail,disableImpostor:r.disableImpostor,dullInterior:!0})),new YH({position:l.center,vector:l.axis},r.getBufferParams({color:"skyblue",scale:1})),new YH({position:l.center,vector:l.resdir},r.getBufferParams({color:"lightgreen",scale:1})))}},n.getSelection()),{bufferList:i,polymerList:o}},t.prototype.updateData=function(n,r){Ze&&Ge.time(this.type+" repr update"),n=n||{};for(var i=0,o=r.polymerList.length;i<o;++i){var a=3*i,s={},l=r.polymerList[i],c=new hu(l);if(n.position){var u=c.getPosition();Object.assign(s,{position:u.center}),r.bufferList[a+1].setAttributes({position:u.center,vector:u.axis}),r.bufferList[a+2].setAttributes({position:u.center,vector:u.resdir})}r.bufferList[a].setAttributes(s)}Ze&&Ge.timeEnd(this.type+" repr update")},t}(uo);xr.add("helixorient",ylt);var tae=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="licorice",this.parameters=Object.assign({},this.parameters,{aspectRatio:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.aspectRatio=1,e.prototype.init.call(this,r)},t}(mT);xr.add("licorice",tae),On.add("shader/HyperballStickImpostor.vert",`
attribute vec3 mapping;
attribute float radius;
attribute float radius2;
attribute vec3 position1;
attribute vec3 position2;
varying mat4 matrix_near;
varying vec4 prime1;
varying vec4 prime2;
varying float vRadius;
varying float vRadius2;
#ifdef PICKING
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
attribute vec3 color2;
varying vec3 vColor1;
varying vec3 vColor2;
#endif
uniform float shrink;
uniform mat4 modelViewProjectionMatrix;
uniform mat4 modelViewProjectionMatrixInverse;
void main(){
vRadius = radius;
vRadius2 = radius2;
vec4 spaceposition;
vec3 position_atom1;
vec3 position_atom2;
vec4 vertex_position;
#ifdef PICKING
vPickingColor = unpackColor( primitiveId );
#else
vColor1 = color;
vColor2 = color2;
#endif
float radius1 = radius;
position_atom1 = position1;
position_atom2 = position2;
float distance = distance( position_atom1, position_atom2 );
spaceposition.z = mapping.z * distance;
if (radius1 > radius2) {
spaceposition.y = mapping.y * 1.5 * radius1;
spaceposition.x = mapping.x * 1.5 * radius1;
} else {
spaceposition.y = mapping.y * 1.5 * radius2;
spaceposition.x = mapping.x * 1.5 * radius2;
}
spaceposition.w = 1.0;
vec4 e3 = vec4( 1.0 );
vec3 e1, e1_temp, e2, e2_temp;
e3.xyz = normalize(position_atom1-position_atom2);
if (e3.z == 0.0) { e3.z = 0.0000000000001;}
if ( (position_atom1.x - position_atom2.x) == 0.0) { position_atom1.x += 0.001;}
if ( (position_atom1.y - position_atom2.y) == 0.0) { position_atom1.y += 0.001;}
if ( (position_atom1.z - position_atom2.z) == 0.0) { position_atom1.z += 0.001;}
vec4 focus = vec4( 1.0 );
focus.x = ( position_atom1.x*position_atom1.x - position_atom2.x*position_atom2.x +
( radius2*radius2 - radius1*radius1 )*e3.x*e3.x/shrink )/(2.0*(position_atom1.x - position_atom2.x));
focus.y = ( position_atom1.y*position_atom1.y - position_atom2.y*position_atom2.y +
( radius2*radius2 - radius1*radius1 )*e3.y*e3.y/shrink )/(2.0*(position_atom1.y - position_atom2.y));
focus.z = ( position_atom1.z*position_atom1.z - position_atom2.z*position_atom2.z +
( radius2*radius2 - radius1*radius1 )*e3.z*e3.z/shrink )/(2.0*(position_atom1.z - position_atom2.z));
e1.x = 1.0;
e1.y = 1.0;
e1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;
e1_temp = e1 - focus.xyz;
e1 = normalize(e1_temp);
e2_temp = e1.yzx * e3.zxy - e1.zxy * e3.yzx;
e2 = normalize(e2_temp);
mat3 R= mat3( e1.xyz, e2.xyz, e3.xyz );
vertex_position.xyz = R * spaceposition.xyz;
vertex_position.w = 1.0;
vertex_position.x += (position_atom1.x+position_atom2.x) / 2.0;
vertex_position.y += (position_atom1.y+position_atom2.y) / 2.0;
vertex_position.z += (position_atom1.z+position_atom2.z) / 2.0;
gl_Position = modelViewProjectionMatrix * vertex_position;
vec4 i_near, i_far;
vec4 near = gl_Position;
near.z = 0.0 ;
near = modelViewProjectionMatrixInverse * near;
i_near = near;
vec4 far = gl_Position;
far.z = far.w ;
i_far = modelViewProjectionMatrixInverse * far;
prime1 = vec4( position_atom1 - (position_atom1 - focus.xyz)*shrink, 1.0 );
prime2 = vec4( position_atom2 - (position_atom2 - focus.xyz)*shrink, 1.0 );
float Rsquare = (radius1*radius1/shrink) - (
(position_atom1.x - focus.x)*(position_atom1.x - focus.x) +
(position_atom1.y - focus.y)*(position_atom1.y - focus.y) +
(position_atom1.z - focus.z)*(position_atom1.z - focus.z)
);
focus.w = Rsquare;
matrix_near = mat4( i_near, i_far, focus, e3 );
gl_Position.z = 1.0;
}`),On.add("shader/HyperballStickImpostor.frag",`#define STANDARD
#define IMPOSTOR
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 interiorColor;
uniform float interiorDarkening;
uniform float roughness;
uniform float metalness;
uniform float opacity;
uniform float clipNear;
uniform float shrink;
uniform mat4 modelViewMatrix;
uniform mat4 modelViewProjectionMatrix;
uniform mat4 modelViewMatrixInverseTranspose;
uniform mat4 projectionMatrix;
varying mat4 matrix_near;
varying vec4 prime1;
varying vec4 prime2;
varying float vRadius;
varying float vRadius2;
#ifdef PICKING
uniform float objectId;
varying vec3 vPickingColor;
#else
varying vec3 vColor1;
varying vec3 vColor2;
#include common
#include fog_pars_fragment
#include bsdfs
#include lights_pars_begin
#include lights_physical_pars_fragment
#endif
bool interior = false;
float calcClip( vec4 cameraPos ){
return dot( cameraPos, vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );
}
float calcClip( vec3 cameraPos ){
return calcClip( vec4( cameraPos, 1.0 ) );
}
float calcDepth( in vec3 cameraPos ){
vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;
return 0.5 + 0.5 * clipZW.x / clipZW.y;
}
struct Ray {
vec3 origin ;
vec3 direction ;
};
bool cutoff_plane (vec3 M, vec3 cutoff, vec3 x3){
float a = x3.x;
float b = x3.y;
float c = x3.z;
float d = -x3.x*cutoff.x-x3.y*cutoff.y-x3.z*cutoff.z;
float l = a*M.x+b*M.y+c*M.z+d;
if (l<0.0) {return true;}
else{return false;}
}
vec3 isect_surf(Ray r, mat4 matrix_coef){
vec4 direction = vec4(r.direction, 0.0);
vec4 origin = vec4(r.origin, 1.0);
float a = dot(direction,(matrix_coef*direction));
float b = dot(origin,(matrix_coef*direction));
float c = dot(origin,(matrix_coef*origin));
float delta =b*b-a*c;
gl_FragColor.a = 1.0;
if (delta<0.0){
discard;
}
float t1 =(-b-sqrt(delta))/a;
return r.origin+t1*r.direction;
}
vec3 isect_surf2(Ray r, mat4 matrix_coef){
vec4 direction = vec4(r.direction, 0.0);
vec4 origin = vec4(r.origin, 1.0);
float a = dot(direction,(matrix_coef*direction));
float b = dot(origin,(matrix_coef*direction));
float c = dot(origin,(matrix_coef*origin));
float delta =b*b-a*c;
gl_FragColor.a = 1.0;
if (delta<0.0){
discard;
}
float t2 =(-b+sqrt(delta))/a;
return r.origin+t2*r.direction;
}
Ray primary_ray(vec4 near1, vec4 far1){
vec3 near=near1.xyz/near1.w;
vec3 far=far1.xyz/far1.w;
return Ray(near,far-near);
}
float update_z_buffer(vec3 M, mat4 ModelViewP){
float depth1;
vec4 Ms=(ModelViewP*vec4(M,1.0));
return depth1=(1.0+Ms.z/Ms.w)/2.0;
}
void main(){
float radius = max( vRadius, vRadius2 );
vec4 i_near, i_far, focus;
vec3 e3, e1, e1_temp, e2;
i_near = vec4(matrix_near[0][0],matrix_near[0][1],matrix_near[0][2],matrix_near[0][3]);
i_far = vec4(matrix_near[1][0],matrix_near[1][1],matrix_near[1][2],matrix_near[1][3]);
focus = vec4(matrix_near[2][0],matrix_near[2][1],matrix_near[2][2],matrix_near[2][3]);
e3 = vec3(matrix_near[3][0],matrix_near[3][1],matrix_near[3][2]);
e1.x = 1.0;
e1.y = 1.0;
e1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;
e1_temp = e1 - focus.xyz;
e1 = normalize(e1_temp);
e2 = normalize(cross(e1,e3));
vec4 equation = focus;
float shrinkfactor = shrink;
float t1 = -1.0/(1.0-shrinkfactor);
float t2 = 1.0/(shrinkfactor);
vec4 colonne1, colonne2, colonne3, colonne4;
mat4 mat;
vec3 equation1 = vec3(t2,t2,t1);
float A1 = - e1.x*equation.x - e1.y*equation.y - e1.z*equation.z;
float A2 = - e2.x*equation.x - e2.y*equation.y - e2.z*equation.z;
float A3 = - e3.x*equation.x - e3.y*equation.y - e3.z*equation.z;
float A11 = equation1.x*e1.x*e1.x + equation1.y*e2.x*e2.x + equation1.z*e3.x*e3.x;
float A21 = equation1.x*e1.x*e1.y + equation1.y*e2.x*e2.y + equation1.z*e3.x*e3.y;
float A31 = equation1.x*e1.x*e1.z + equation1.y*e2.x*e2.z + equation1.z*e3.x*e3.z;
float A41 = equation1.x*e1.x*A1 + equation1.y*e2.x*A2 + equation1.z*e3.x*A3;
float A22 = equation1.x*e1.y*e1.y + equation1.y*e2.y*e2.y + equation1.z*e3.y*e3.y;
float A32 = equation1.x*e1.y*e1.z + equation1.y*e2.y*e2.z + equation1.z*e3.y*e3.z;
float A42 = equation1.x*e1.y*A1 + equation1.y*e2.y*A2 + equation1.z*e3.y*A3;
float A33 = equation1.x*e1.z*e1.z + equation1.y*e2.z*e2.z + equation1.z*e3.z*e3.z;
float A43 = equation1.x*e1.z*A1 + equation1.y*e2.z*A2 + equation1.z*e3.z*A3;
float A44 = equation1.x*A1*A1 + equation1.y*A2*A2 + equation1.z*A3*A3 - equation.w;
colonne1 = vec4(A11,A21,A31,A41);
colonne2 = vec4(A21,A22,A32,A42);
colonne3 = vec4(A31,A32,A33,A43);
colonne4 = vec4(A41,A42,A43,A44);
mat = mat4(colonne1,colonne2,colonne3,colonne4);
Ray ray = primary_ray(i_near,i_far) ;
vec3 M;
M = isect_surf(ray, mat);
if (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }
vec4 M1 = vec4(M,1.0);
vec4 M2 = mat*M1;
vec3 _normal = ( modelViewMatrixInverseTranspose * M2 ).xyz;
gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;
#ifdef NEAR_CLIP
if( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 ){
M = isect_surf2(ray, mat);
if( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 )
discard;
interior = true;
gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / radius ) );
}
}else if( gl_FragDepthEXT <= 0.0 ){
M = isect_surf2(ray, mat);
interior = true;
gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix);
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );
}
}
#else
if( gl_FragDepthEXT <= 0.0 ){
M = isect_surf2(ray, mat);
interior = true;
gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );
}
}
#endif
if (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }
if (gl_FragDepthEXT < 0.0)
discard;
if (gl_FragDepthEXT > 1.0)
discard;
float distance_ratio = ((M.x-prime2.x)*e3.x + (M.y-prime2.y)*e3.y +(M.z-prime2.z)*e3.z) /
distance(prime2.xyz,prime1.xyz);
#ifdef PICKING
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
vec3 vViewPosition = -( modelViewMatrix * vec4( M, 1.0 ) ).xyz;
vec3 vNormal = _normal;
vec3 vColor;
if( distance_ratio>0.5 ){
vColor = vColor1;
}else{
vColor = vColor2;
}
vec4 diffuseColor = vec4( diffuse, opacity );
ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
vec3 totalEmissiveLight = emissive;
#include color_fragment
#include roughnessmap_fragment
#include metalnessmap_fragment
vec3 normal = normalize( vNormal );
vec3 geometryNormal = normal;
#include lights_physical_fragment
#include lights_fragment_begin
#include lights_fragment_end
vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;
if( interior ){
#ifdef USE_INTERIOR_COLOR
outgoingLight.xyz = interiorColor;
#else
#ifdef DIFFUSE_INTERIOR
outgoingLight.xyz = vColor;
#endif
#endif
outgoingLight.xyz *= 1.0 - interiorDarkening;
}
gl_FragColor = vec4( outgoingLight, diffuseColor.a );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);var blt=new Float32Array([-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1]),_lt=new Uint16Array([0,1,2,0,2,3,1,5,6,1,6,2,4,6,5,4,7,6,0,7,4,0,3,7,0,5,1,0,4,5,3,2,6,3,6,7]),xlt=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,"v3",r,i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={mapping:{configurable:!0},mappingIndices:{configurable:!0},mappingIndicesSize:{configurable:!0},mappingSize:{configurable:!0},mappingItemSize:{configurable:!0}};return n.mapping.get=function(){return blt},n.mappingIndices.get=function(){return _lt},n.mappingIndicesSize.get=function(){return 36},n.mappingSize.get=function(){return 8},n.mappingItemSize.get=function(){return 3},Object.defineProperties(t.prototype,n),t}(UN),nae=Object.assign({shrink:.14},Jo),wlt=Object.assign({shrink:{uniform:!0}},Hh),Slt=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,r,i),this.parameterTypes=wlt,this.isImpostor=!0,this.vertexShader="HyperballStickImpostor.vert",this.fragmentShader="HyperballStickImpostor.frag",this.addUniforms({modelViewProjectionMatrix:{value:new lt},modelViewProjectionMatrixInverse:{value:new lt},modelViewMatrixInverseTranspose:{value:new lt},shrink:{value:this.parameters.shrink}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},radius:{type:"f",value:null},radius2:{type:"f",value:null}}),this.setAttributes(r),this.makeMapping()}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return nae},Object.defineProperties(t.prototype,n),t}(xlt);Object.assign({disableImpostor:!1},YN,nae);var Clt=function(e,t){return t===void 0&&(t={}),!Cc||t&&t.disableImpostor?(e.radius=function(n,r){for(var i=n.length,o=new Float32Array(i),a=0;a<i;a++)o[a]=Math.min(n[a],r[a]);return o}(e.radius,e.radius2),new Qoe(e,t)):new Slt(e,t)},Alt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="hyperball",this.parameters=Object.assign({shrink:{type:"number",precision:3,max:1,min:.001,buffer:!0}},this.parameters,{multipleBond:null,bondSpacing:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.radiusScale=K(r.radiusScale,.2),r.radiusType=K(r.radiusType,"vdw"),r.useInteriorColor=K(r.useInteriorColor,!0),this.shrink=K(r.shrink,.12),e.prototype.init.call(this,r)},t.prototype.getBondParams=function(n,r){return n&&!n.radius||(r=Object.assign({radius2:!0},r)),e.prototype.getBondParams.call(this,n,r)},t.prototype.createData=function(n){var r=new Nd(n.getAtomData(this.getAtomParams()),this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0}));return this.__center=new Float32Array(3*n.bondCount),{bufferList:[r,new Clt(n.getBondData(this.getBondParams()),this.getBufferParams({shrink:this.shrink,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}))]}},t.prototype.updateData=function(n,r){var i=r.sview.getAtomData(this.getAtomParams()),o=r.sview.getBondData(this.getBondParams()),a={},s={};if(!n||n.position){Object.assign(a,{position:i.position});var l=o.position1,c=o.position2;Object.assign(s,{position:Ac(l,c,this.__center),position1:l,position2:c})}n&&!n.color||(Object.assign(a,{color:i.color}),Object.assign(s,{color:o.color,color2:o.color2})),n&&!n.radius||(Object.assign(a,{radius:i.radius}),Object.assign(s,{radius:o.radius,radius2:o.radius2})),r.bufferList[0].setAttributes(a),r.bufferList[1].setAttributes(s)},t}(tae);xr.add("hyperball",Alt);var eP=function(e,t,n){t===void 0&&(t={}),n===void 0&&(n=""),this.type=e,this.text=t,this.format=n,this.errorLogged=!1};eP.prototype.atomLabel=function(e){var t;switch(this.type){case"atomname":t=e.atomname;break;case"atomindex":t=""+e.index;break;case"occupancy":t=e.occupancy.toFixed(2);break;case"bfactor":t=e.bfactor.toFixed(2);break;case"serial":t=""+e.serial;break;case"element":t=e.element;break;case"atom":t=e.atomname+"|"+e.index;break;case"resname":t=e.resname;break;case"resno":t=""+e.resno;break;case"res":t=""+(KA[e.resname.toUpperCase()]||e.resname)+e.resno;break;case"residue":var n=KA[e.resname.toUpperCase()];t=n&&!e.inscode?""+n+e.resno:"["+e.resname+"]"+e.resno+e.inscode;break;case"text":t=this.text[e.index];break;case"format":try{t=Vo.sprintf(this.format,e)}catch(r){this.errorLogged||(this.errorLogged=!0,console.log(r.message))}break;default:t=e.qualifiedName()}return t===void 0?"":t},eP.types={"":"",atomname:"atom name",atomindex:"atom index",occupancy:"occupancy",bfactor:"b-factor",serial:"serial",element:"element",atom:"atom name + index",resname:"residue name",resno:"residue no",res:"one letter code + no",residue:"[residue name] + no + inscode",text:"text",format:"format",qualified:"qualified name"};var Plt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="label",this.parameters=Object.assign({labelType:{type:"select",options:eP.types,rebuild:!0},labelText:{type:"hidden",rebuild:!0},labelFormat:{type:"text",rebuild:!0},labelGrouping:{type:"select",options:{atom:"atom",residue:"residue"},rebuild:!0},fontFamily:{type:"select",options:{"sans-serif":"sans-serif",monospace:"monospace",serif:"serif"},buffer:!0},fontStyle:{type:"select",options:{normal:"normal",italic:"italic"},buffer:!0},fontWeight:{type:"select",options:{normal:"normal",bold:"bold"},buffer:!0},xOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},yOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},zOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},attachment:{type:"select",options:{"bottom-left":"bottom-left","bottom-center":"bottom-center","bottom-right":"bottom-right","middle-left":"middle-left","middle-center":"middle-center","middle-right":"middle-right","top-left":"top-left","top-center":"top-center","top-right":"top-right"},rebuild:!0},showBorder:{type:"boolean",buffer:!0},borderColor:{type:"color",buffer:!0},borderWidth:{type:"number",precision:2,max:.3,min:0,buffer:!0},showBackground:{type:"boolean",rebuild:!0},backgroundColor:{type:"color",buffer:!0},backgroundMargin:{type:"number",precision:2,max:2,min:0,rebuild:!0},backgroundOpacity:{type:"range",step:.01,max:1,min:0,buffer:!0},fixedSize:{type:"boolean",buffer:!0}},this.parameters,{side:null,flatShaded:null,wireframe:null,linewidth:null,roughness:null,metalness:null,diffuse:null}),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};this.labelType=K(r.labelType,"res"),this.labelText=K(r.labelText,{}),this.labelFormat=K(r.labelFormat,""),this.labelGrouping=K(r.labelGrouping,"atom"),this.fontFamily=K(r.fontFamily,"sans-serif"),this.fontStyle=K(r.fontStyle,"normal"),this.fontWeight=K(r.fontWeight,"bold"),this.xOffset=K(r.xOffset,0),this.yOffset=K(r.yOffset,0),this.zOffset=K(r.zOffset,.5),this.attachment=K(r.attachment,"bottom-left"),this.showBorder=K(r.showBorder,!1),this.borderColor=K(r.borderColor,"lightgrey"),this.borderWidth=K(r.borderWidth,.15),this.showBackground=K(r.showBackground,!1),this.backgroundColor=K(r.backgroundColor,"lightgrey"),this.backgroundMargin=K(r.backgroundMargin,.5),this.backgroundOpacity=K(r.backgroundOpacity,1),this.fixedSize=K(r.fixedSize,!1),e.prototype.init.call(this,r)},t.prototype.getTextData=function(n,r){var i,o,a,s,l,c,u,f=this.getAtomParams(r),d=new eP(this.labelType,this.labelText,this.labelFormat);if(this.labelGrouping==="atom"){var p=n.getAtomData(f);i=p.position,o=p.radius,a=p.color,r&&!r.text||(s=[],n.eachAtom(function(y){return s.push(d.atomLabel(y))}))}else if(this.labelGrouping==="residue"){r&&!r.position||(l=[]),r&&!r.color||(u=[]),r&&!r.radius||(c=[]),r&&!r.text||(s=[]),f.colorParams&&(f.colorParams.structure=n.getStructure());var h=pn.getScheme(f.colorParams),g=new $c(f.radiusParams),v=n.getAtomProxy(),m=0;n.eachResidue(function(y){var _=3*m;y.isProtein()||y.isNucleic()?(v.index=y.traceAtomIndex,r&&!r.position||v.positionToArray(l,_)):(v.index=y.atomOffset,r&&!r.position||y.positionToArray(l,_)),r&&!r.color||h.atomColorToArray(v,u,_),r&&!r.radius||(c[m]=g.atomRadius(v)),r&&!r.text||s.push(d.atomLabel(v)),++m}),r&&!r.position||(i=new Float32Array(l)),r&&!r.color||(a=new Float32Array(u)),r&&!r.radius||(o=new Float32Array(c))}return{position:i,size:o,color:a,text:s}},t.prototype.createData=function(n){return{bufferList:[new R0(this.getTextData(n,{position:!0,color:!0,radius:!0,text:!0}),this.getBufferParams({fontFamily:this.fontFamily,fontStyle:this.fontStyle,fontWeight:this.fontWeight,xOffset:this.xOffset,yOffset:this.yOffset,zOffset:this.zOffset,attachment:this.attachment,showBorder:this.showBorder,borderColor:this.borderColor,borderWidth:this.borderWidth,showBackground:this.showBackground,backgroundColor:this.backgroundColor,backgroundMargin:this.backgroundMargin,backgroundOpacity:this.backgroundOpacity,fixedSize:this.fixedSize}))]}},t.prototype.updateData=function(n,r){r.bufferList[0].setAttributes(this.getTextData(r.sview,n))},t.prototype.getAtomRadius=function(){return 0},t}(uo);xr.add("label",Plt);var Mlt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="line",this.parameters=Object.assign({multipleBond:{type:"select",rebuild:!0,options:{off:"off",symmetric:"symmetric",offset:"offset"}},bondSpacing:{type:"number",precision:2,max:2,min:.5},linewidth:{type:"integer",max:50,min:1,buffer:!0},lines:{type:"boolean",rebuild:!0},crosses:{type:"select",rebuild:!0,options:{off:"off",lone:"lone",all:"all"}},crossSize:{type:"number",precision:2,max:2,min:.1}},this.parameters,{flatShaded:null,side:null,wireframe:null,roughness:null,metalness:null}),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};this.multipleBond=K(r.multipleBond,"off"),this.bondSpacing=K(r.bondSpacing,1),this.linewidth=K(r.linewidth,2),this.lines=K(r.lines,!0),this.crosses=K(r.crosses,"lone"),this.crossSize=K(r.crossSize,.4),e.prototype.init.call(this,r)},t.prototype.getAtomRadius=function(n){return .1},t.prototype.getBondParams=function(n,r){return r=Object.assign({multipleBond:this.multipleBond,bondSpacing:this.bondSpacing,radiusParams:{type:"size",size:.1,scale:1}},r),e.prototype.getBondParams.call(this,n,r)},t.prototype._crossData=function(n,r){if(!n||n.position||n.color){var i,o,a,s,l={};this.crosses==="lone"&&Object.assign(l,{atomSet:(i=r,o=i.getAtomSet(),a=i.getBondSet(),s=i.getBondProxy(),a.forEach(function(R){s.index=R,o.clear(s.atomIndex1),o.clear(s.atomIndex2)}),o)});var c=r.getAtomData(this.getAtomParams(n,l)),u={},f=c.position,d=c.color,p=c.picking,h=(f||d).length,g=3*h,v=new Float32Array(0),m=new Float32Array(0),y=new Float32Array(0),_=new Float32Array(0),b=0,x=new Float32Array(0);n&&!n.position||(v=u.position1=new Float32Array(g),m=u.position2=new Float32Array(g),b=this.crossSize/2),n&&!n.color||(y=u.color=new Float32Array(g),_=u.color2=new Float32Array(g)),n&&!n.picking||(x=new Float32Array(3*c.picking.array.length));for(var w=0;w<h;w++){var S=3*w,A=3*S;if(!n||n.position){var C=f[S],k=f[S+1],O=f[S+2];v[A]=C-b,v[A+1]=k,v[A+2]=O,m[A]=C+b,m[A+1]=k,m[A+2]=O,v[A+3]=C,v[A+4]=k-b,v[A+5]=O,m[A+3]=C,m[A+4]=k+b,m[A+5]=O,v[A+6]=C,v[A+7]=k,v[A+8]=O-b,m[A+6]=C,m[A+7]=k,m[A+8]=O+b}if(!n||n.color)for(var T=A+9,B=A;B<T;B+=3)y[B]=_[B]=d[S],y[B+1]=_[B+1]=d[S+1],y[B+2]=_[B+2]=d[S+2];n&&!n.picking||(x[S]=x[S+1]=x[S+2]=p.array[w])}return n&&!n.picking||(u.picking=new Vh(x,p.structure)),u}},t.prototype.createData=function(n){var r={position:!0,color:!0,picking:!0},i=[];if(this.lines){var o=n.getBondData(this.getBondParams(r)),a=new Uu(o,this.getBufferParams({linewidth:this.linewidth}));i.push(a)}if(this.crosses!=="off"){var s=new Uu(this._crossData(r,n),this.getBufferParams({linewidth:this.linewidth}));i.push(s)}return{bufferList:i}},t.prototype.updateData=function(n,r){var i=0;if(this.lines){var o=r.sview.getBondData(this.getBondParams(n)),a={};n&&!n.position||Object.assign(a,{position1:o.position1,position2:o.position2}),n&&!n.color||Object.assign(a,{color:o.color,color2:o.color2}),r.bufferList[i++].setAttributes(a)}if(this.crosses!=="off"){var s=this._crossData(n,r.sview),l={};n&&!n.position||Object.assign(l,{position1:s.position1,position2:s.position2}),n&&!n.color||Object.assign(l,{color:s.color,color2:s.color2}),r.bufferList[i++].setAttributes(l)}},t.prototype.setParameters=function(n){var r={};return n&&(n.bondSpacing||n.crossSize)&&Object.assign(r,{position:!0}),e.prototype.setParameters.call(this,n,r,!1),this},t}(uo);function rae(e,t,n,r,i){var o=new(r=r||Int32Array)(e*t*n*(i=i||1));function a(s,l,c){return((s*t+l)*n+c)*i}return{data:o,index:a,set:function(s,l,c){for(var u=[],f=arguments.length-3;f-- >0;)u[f]=arguments[f+3];for(var d=a(s,l,c),p=0;p<i;++p)o[d+p]=u[p]},toArray:function(s,l,c,u,f){u===void 0&&(u=[]),f===void 0&&(f=0);for(var d=a(s,l,c),p=0;p<i;++p)u[f+p]=o[d+p]},fromArray:function(s,l,c,u,f){f===void 0&&(f=0);for(var d=a(s,l,c),p=0;p<i;++p)o[d+p]=u[f+p]},copy:function(s){o.set(s.data)}}}function XS(e,t,n){var r=Boe(t),i=t_(e);e.length===0&&(i[0].set([0,0,0]),i[1].set([0,0,0]));var o,a,s,l,c,u,f,d,p,h,g,v,m,y,_,b=i[0],x=i[1];function w(R,P,D,z,N){o=P||1.4,a=D||2,v=N||!0;var H=0;for(var J in r)H=Math.max(H,J);var ne=o_(b,x,H,a,R?o:0);l=ne.dim[0],c=ne.dim[1],u=ne.dim[2],f=ne.matrix,d=ne.tran,a=ne.scaleFactor,p={},h={},A(R),g=o*a,s=z||o/a,m=new Uint8Array(l*c*u),R&&(y=new Float64Array(l*c*u)),v&&(_=new Int32Array(l*c*u))}var S=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];function A(R){var P,D,z,N,H,J,ne,oe,Z,ce;for(var se in r)if(P=parseFloat(se),!p[se]){for(J=(ne=R?(P+o)*a+.5:P*a+.5)*ne,oe=Math.floor(ne)+1,Z=new Int32Array(oe*oe),ce=0,D=0;D<oe;++D)for(z=0;z<oe;++z)(N=D*D+z*z)>J?Z[ce]=-1:(H=Math.sqrt(J-N),Z[ce]=Math.floor(H)),++ce;h[se]=oe,p[se]=Z}}function C(R){var P,D,z,N,H,J,ne,oe,Z,ce,se,Y,he,ae,ye,re,te,le,de=3*R,_e=R;P=Math.floor(.5+a*(e[de]+d[0])),D=Math.floor(.5+a*(e[de+1]+d[1])),z=Math.floor(.5+a*(e[de+2]+d[2]));var be,ke=t[_e],W=p[ke],ee=0,Ee=c*u,ge=h[ke];for(ce=0;ce<ge;++ce)for(se=0;se<ge;++se){if((be=W[ee])!==-1){for(re=-1;re<2;++re)for(te=-1;te<2;++te)for(le=-1;le<2;++le)if(re!==0&&te!==0&&le!==0){for(ne=re*ce,Z=le*se,Y=0;Y<=be;++Y)if(ae=D+(oe=Y*te),ye=z+Z,!((he=P+ne)<0||ae<0||ye<0||he>=l||ae>=c||ye>=u)){var pe=he*Ee+ae*u+ye;if(v)if(1&m[pe]){if(1&m[pe]){var ve=_[pe];ve!==de&&ne*ne+oe*oe+Z*Z<(N=P+ne-Math.floor(.5+a*(e[ve]+d[0])))*N+(H=D+oe-Math.floor(.5+a*(e[ve+1]+d[1])))*H+(J=z+Z-Math.floor(.5+a*(e[ve+2]+d[2])))*J&&(_[pe]=R)}}else m[pe]|=1,_[pe]=R;else m[pe]|=1}}}ee++}}function k(R){var P,D;for(console.time("EDTSurface fillvoxels"),P=0,D=m.length;P<D;++P)m[P]=0,R&&(y[P]=-1),v&&(_[P]=-1);for(P=0,D=e.length/3;P<D;++P)C(P);for(P=0,D=m.length;P<D;++P)1&m[P]&&(m[P]|=2);console.timeEnd("EDTSurface fillvoxels")}function O(R){var P,D,z,N,H,J,ne,oe,Z,ce,se,Y,he,ae,ye,re,te,le,de,_e=3*R,be=R,ke=0;P=Math.floor(.5+a*(e[_e]+d[0])),D=Math.floor(.5+a*(e[_e+1]+d[1])),z=Math.floor(.5+a*(e[_e+2]+d[2]));var W=t[be],ee=c*u;for(he=0,de=h[W];he<de;++he)for(ae=0;ae<de;++ae){if(p[W][ke]!==-1){for(re=-1;re<2;++re)for(te=-1;te<2;++te)for(le=-1;le<2;++le)if(re!==0&&te!==0&&le!==0){for(ne=re*he,Z=le*ae,ye=0;ye<=p[W][ke];++ye)if(se=D+(oe=ye*te),Y=z+Z,!((ce=P+ne)<0||se<0||Y<0||ce>=l||se>=c||Y>=u)){var Ee=ce*ee+se*u+Y;if(2&m[Ee]){if(v){var ge=_[Ee];ne*ne+oe*oe+Z*Z<(N=Math.floor(.5+a*(e[ge]+d[0])))*N+(H=Math.floor(.5+a*(e[ge+1]+d[1])))*H+(J=Math.floor(.5+a*(e[ge+2]+d[2])))*J&&(_[Ee]=R)}}else m[Ee]|=2,v&&(_[Ee]=R)}}}ke++}}function T(){var R,P,D,z;console.time("EDTSurface fastdistancemap");var N,H=rae(l,c,u,Uint16Array,3),J=c*u,ne=g*g,oe=0;for(R=0;R<l;++R)for(P=0;P<c;++P)for(D=0;D<u;++D)m[N=R*J+P*u+D]&=-3,1&m[N]&&4&m[N]&&(H.set(R,P,D,R,P,D),y[N]=0,m[N]|=2,oe+=1);var Z=new Int32Array(3*oe),ce=0,se=new Int32Array(3*oe),Y=0;for(R=0;R<l;++R)for(P=0;P<c;++P)for(D=0;D<u;++D)4&m[N=R*J+P*u+D]&&(Z[ce]=R,Z[ce+1]=P,Z[ce+2]=D,ce+=3,m[N]&=-5);do for(Y=B(Z,H,ce,se),ce=0,R=0,z=Y;R<z;R+=3)N=J*se[R]+u*se[R+1]+se[R+2],m[N]&=-5,y[N]<=1.0404*ne&&(Z[ce]=se[R],Z[ce+1]=se[R+1],Z[ce+2]=se[R+2],ce+=3);while(ce>0);var he,ae=s*s,ye=new Uint16Array(3);for(R=0;R<l;++R)for(P=0;P<c;++P)for(D=0;D<u;++D)m[N=R*J+P*u+D]&=-5,1&m[N]&&(2&m[N]&&!(2&m[N]&&y[N]>=ae)||(m[N]|=4,v&&2&m[N]&&(H.toArray(R,P,D,ye),he=ye[0]*J+ye[1]*u+ye[2],_[N]=_[he])));console.timeEnd("EDTSurface fastdistancemap")}function B(R,P,D,z){var N,H,J,ne,oe,Z,ce,se,Y,he,ae,ye,re=new Uint16Array(3),te=0;if(D===0)return te;var le=-1,de=-1,_e=-1,be=c*u;for(ce=0,Y=D;ce<Y;ce+=3)for(N=R[ce],H=R[ce+1],J=R[ce+2],P.toArray(N,H,J,re),se=0;se<6;++se)le=N+(ye=S[se])[0],de=H+ye[1],_e=J+ye[2],le<l&&le>-1&&de<c&&de>-1&&_e<u&&_e>-1&&(1&m[ae=le*be+u*de+_e]&&!(2&m[ae])?(P.fromArray(le,de,_e,re),he=(ne=le-re[0])*ne+(oe=de-re[1])*oe+(Z=_e-re[2])*Z,y[ae]=he,m[ae]|=2,m[ae]|=4,z[te]=le,z[te+1]=de,z[te+2]=_e,te+=3):1&m[ae]&&2&m[ae]&&(he=(ne=le-re[0])*ne+(oe=de-re[1])*oe+(Z=_e-re[2])*Z)<y[ae]&&(P.fromArray(le,de,_e,re),y[ae]=he,4&m[ae]||(m[ae]|=4,z[te]=le,z[te+1]=de,z[te+2]=_e,te+=3)));for(ce=0,Y=D;ce<Y;ce+=3)for(N=R[ce],H=R[ce+1],J=R[ce+2],P.toArray(N,H,J,re),se=6;se<18;se++)le=N+(ye=S[se])[0],de=H+ye[1],_e=J+ye[2],le<l&&le>-1&&de<c&&de>-1&&_e<u&&_e>-1&&(1&m[ae=le*be+u*de+_e]&&!(2&m[ae])?(P.fromArray(le,de,_e,re),he=(ne=le-re[0])*ne+(oe=de-re[1])*oe+(Z=_e-re[2])*Z,y[ae]=he,m[ae]|=2,m[ae]|=4,z[te]=le,z[te+1]=de,z[te+2]=_e,te+=3):1&m[ae]&&2&m[ae]&&(he=(ne=le-re[0])*ne+(oe=de-re[1])*oe+(Z=_e-re[2])*Z)<y[ae]&&(P.fromArray(le,de,_e,re),y[ae]=he,4&m[ae]||(m[ae]|=4,z[te]=le,z[te+1]=de,z[te+2]=_e,te+=3)));for(ce=0,Y=D;ce<Y;ce+=3)for(N=R[ce],H=R[ce+1],J=R[ce+2],P.toArray(N,H,J,re),se=18;se<26;se++)le=N+(ye=S[se])[0],de=H+ye[1],_e=J+ye[2],le<l&&le>-1&&de<c&&de>-1&&_e<u&&_e>-1&&(1&m[ae=le*be+u*de+_e]&&!(2&m[ae])?(P.fromArray(le,de,_e,re),he=(ne=le-re[0])*ne+(oe=de-re[1])*oe+(Z=_e-re[2])*Z,y[ae]=he,m[ae]|=2,m[ae]|=4,z[te]=le,z[te+1]=de,z[te+2]=_e,te+=3):1&m[ae]&&2&m[ae]&&(he=(ne=le-re[0])*ne+(oe=de-re[1])*oe+(Z=_e-re[2])*Z)<y[ae]&&(P.fromArray(le,de,_e,re),y[ae]=he,4&m[ae]||(m[ae]|=4,z[te]=le,z[te+1]=de,z[te+2]=_e,te+=3)));return te}this.getVolume=function(R,P,D,z,N){console.time("EDTSurface.getVolume");var H=R!=="vws";w(H,P,D,z,N),k(H),function(){var oe,Z,ce,se=c*u;for(oe=0;oe<l;++oe)for(Z=0;Z<u;++Z)for(ce=0;ce<c;++ce){var Y=oe*se+ce*u+Z;if(1&m[Y])for(var he=0;he<26;){var ae=oe+S[he][0],ye=Z+S[he][2],re=ce+S[he][1];if(ae>-1&&ae<l&&re>-1&&re<c&&ye>-1&&ye<u&&!(1&m[ae*se+re*u+ye])){m[Y]|=4;break}he++}}}(),R!=="ms"&&R!=="ses"||T(),R==="ses"&&(A(!1),function(){var oe,Z;for(oe=0,Z=m.length;oe<Z;++oe)m[oe]&=-3;for(oe=0,Z=e.length/3;oe<Z;++oe)O(oe)}()),function(oe){var Z,ce=m.length;if(oe==="vws")for(Z=0;Z<ce;++Z)m[Z]&=-5,m[Z]=2&m[Z]?1:0;else if(oe==="ms")for(Z=0;Z<ce;++Z)m[Z]&=-3,4&m[Z]&&(m[Z]|=2),m[Z]&=-5,m[Z]=2&m[Z]?1:0;else if(oe==="ses")for(Z=0;Z<ce;++Z)4&m[Z]&&2&m[Z]?m[Z]&=-5:4&m[Z]&&!(2&m[Z])&&(m[Z]|=2),m[Z]=2&m[Z]?1:0;else if(oe==="sas")for(Z=0;Z<ce;++Z)m[Z]&=-5,m[Z]=2&m[Z]?1:0}(R);for(var J=0,ne=_.length;J<ne;++J)_[J]=n[_[J]];return console.timeEnd("EDTSurface.getVolume"),{data:m,nx:u,ny:c,nz:l,atomindex:_}},this.getSurface=function(R,P,D,z,N,H,J){var ne=this.getVolume(R,P,D,z,N);return new ld(ne.data,ne.nx,ne.ny,ne.nz,ne.atomindex).getSurface(1,H,void 0,f,J)}}function iae(e,t,n,r,i,o,a){a=Math.max(.1,a);var s=e.length,l=i[0],c=i[1],u=i[2],f=o[0],d=o[1],p=o[2];function h(H,J){return Math.floor((H-J)/a)}for(var g,v,m,y=h(f,l)+1,_=h(d,c)+1,b=h(p,u)+1,x=y*_*b,w=_*b,S=[],A=0;A<s;A++){var C=(g=e[A],v=t[A],m=n[A],(h(g,l)*_+h(v,c))*b+h(m,u));S[C]===void 0?S[C]=[A]:S[C].push(A)}var k=new Uint32Array(x),O=new Uint16Array(x),T=new Uint32Array(s),B=0,R=0;for(A=0;A<x;A++){var P=k[A]=B,D=S[A];if(D!==void 0)for(var z=0;z<D.length;z++)T[B]=D[z],B++;var N=B-P;O[A]=N,N>R&&(R=N)}return{neighbourListLength:27*R+1,withinRadii:function(H,J,ne,oe,Z){for(var ce=0,se=h(H,l),Y=h(J,c),he=h(ne,u),ae=Math.max(0,se-1),ye=Math.max(0,Y-1),re=Math.max(0,he-1),te=Math.min(y,se+2),le=Math.min(_,Y+2),de=Math.min(b,he+2),_e=ae;_e<te;++_e)for(var be=_e*w,ke=ye;ke<le;++ke)for(var W=ke*b,ee=re;ee<de;++ee)for(var Ee=be+W+ee,ge=k[Ee],pe=ge+O[Ee],ve=ge;ve<pe;ve++){var $e=T[ve],Ne=e[$e]-H,Ae=t[$e]-J,Oe=n[$e]-ne,j=r[$e]+oe;Ne*Ne+Ae*Ae+Oe*Oe<=j*j&&(Z[ce++]=T[ve])}Z[ce]=-1}}}function YS(e,t,n){for(var r=t.length,i=new Float32Array(r),o=new Float32Array(r),a=new Float32Array(r),s=0;s<r;s++){var l=3*s;i[s]=e[l],o[s]=e[l+1],a[s]=e[l+2]}var c=t_(e);e.length===0&&(c[0].set([0,0,0]),c[1].set([0,0,0]));var u,f,d,p,h,g,v,m,y,_,b,x,w,S,A,C,k,O,T,B=c[0],R=c[1],P=-1,D=new Float32Array([0,0,0]),z=new Float32Array([0,0,0]),N=new Float32Array([0,0,0]),H=new Float32Array([0,0,0]);function J(he,ae,ye,re){p=K(he,1.4),h=K(ae,2),g=K(ye,!0),v=K(re,30),u=new Float32Array(r),f=new Float32Array(r);for(var te=0;te<u.length;++te){var le=t[te]+p;u[te]=le,f[te]=le*le}d=0;for(var de=0;de<u.length;++de)u[de]>d&&(d=u[de]);var _e;_e=o_(B,R,d,h,0),h=_e.scaleFactor,m=_e.dim,y=_e.matrix,T=Math.max(5,2+Math.floor(p*h)),_=is(m[0]*m[1]*m[2],-1001),b=new Int32Array(_.length),x=new Float32Array(m[0]),w=new Float32Array(m[1]),S=new Float32Array(m[2]),ne(x,B[0],1/h),ne(w,B[1],1/h),ne(S,B[2],1/h),function(){var be=0,ke=2*Math.PI/v;C=new Float32Array(v),A=new Float32Array(v);for(var W=0;W<v;W++)C[W]=Math.cos(be),A[W]=Math.sin(be),be+=ke}(),k=iae(i,o,a,u,B,R,2.01*d),O=new Int32Array(k.neighbourListLength),P=-1}function ne(he,ae,ye){for(var re=0;re<he.length;re++)he[re]=ae+ye*re}function oe(he,ae,ye,re,te){var le;if(P!==-1){if((le=P)!==re&&le!==te&&Z(le,he,ae,ye))return le;P=-1}var de=0;for(le=O[de];le>=0;){if(le!==re&&le!==te&&Z(le,he,ae,ye))return P=le,le;le=O[++de]}return P=-1,-1}function Z(he,ae,ye,re){var te=3*he,le=f[he],de=e[te]-ae,_e=e[te+1]-ye,be=e[te+2]-re;return de*de+_e*_e+be*be<le}function ce(){for(var he=0;he<r;he++){var ae=i[he],ye=o[he],re=a[he],te=u[he],le=f[he];k.withinRadii(ae,ye,re,te,O);for(var de=Math.ceil(te*h),_e=Math.floor(h*(ae-B[0])),be=Math.floor(h*(ye-B[1])),ke=Math.floor(h*(re-B[2])),W=Math.max(0,_e-de),ee=Math.max(0,be-de),Ee=Math.max(0,ke-de),ge=Math.min(m[0],_e+de+2),pe=Math.min(m[1],be+de+2),ve=Math.min(m[2],ke+de+2),$e=W;$e<ge;$e++)for(var Ne=x[$e]-ae,Ae=m[1]*m[2]*$e,Oe=ee;Oe<pe;Oe++)for(var j=w[Oe]-ye,M=Ne*Ne+j*j,L=Ae+m[2]*Oe,q=Ee;q<ve;q++){var me=S[q]-re,Te=M+me*me;if(Te<le){var Pe=q+L;_[Pe]<0&&(_[Pe]=-_[Pe]);var Xe=Math.sqrt(Te),He=te/Xe,Ve=Ne*He,Je=j*He,Ye=me*He;if(oe(Ve+=ae,Je+=ye,Ye+=re,he,-1)===-1){var yt=te-Xe;yt<_[Pe]&&(_[Pe]=yt,g&&(b[Pe]=he))}}}}}function se(he,ae){var ye=u[he],re=u[ae],te=D[0]=i[ae]-i[he],le=D[1]=o[ae]-o[he],de=D[2]=a[ae]-a[he],_e=te*te+le*le+de*de,be=Math.sqrt(_e),ke=ye*((ye*ye+be*be-re*re)/(2*ye*be));Fr(D,D),function(et,ct){et[0]=et[1]=et[2]=1,ct[0]!==0?et[0]=(ct[1]+ct[2])/-ct[0]:ct[1]!==0?et[1]=(ct[0]+ct[2])/-ct[1]:ct[2]!==0&&(et[2]=(ct[0]+ct[1])/-ct[2])}(N,D),Fr(N,N),Sa(H,D,N),Fr(H,H);var W=Math.sqrt(ye*ye-ke*ke);Zn(N,N,W),Zn(H,H,W),Zn(D,D,ke),z[0]=D[0]+i[he],z[1]=D[1]+o[he],z[2]=D[2]+a[he],P=-1;for(var ee=T,Ee=0;Ee<v;Ee++){var ge=C[Ee],pe=A[Ee],ve=z[0]+ge*N[0]+pe*H[0],$e=z[1]+ge*N[1]+pe*H[1],Ne=z[2]+ge*N[2]+pe*H[2];if(oe(ve,$e,Ne,he,ae)===-1)for(var Ae=Math.floor(h*(ve-B[0])),Oe=Math.floor(h*($e-B[1])),j=Math.floor(h*(Ne-B[2])),M=Math.max(0,Ae-ee),L=Math.max(0,Oe-ee),q=Math.max(0,j-ee),me=Math.min(m[0],Ae+ee+2),Te=Math.min(m[1],Oe+ee+2),Pe=Math.min(m[2],j+ee+2),Xe=M;Xe<me;Xe++){te=ve-x[Xe];for(var He=m[1]*m[2]*Xe,Ve=L;Ve<Te;Ve++)for(var Je=te*te+(le=$e-w[Ve])*le,Ye=He+m[2]*Ve,yt=q;yt<Pe;yt++){_e=Je+(de=Ne-S[yt])*de;var mt=yt+Ye,ut=_[mt];if(ut>0&&_e<ut*ut&&(_[mt]=Math.sqrt(_e),g)){var Et=te*D[0]+le*D[1]+de*D[2];b[mt]=Et<0?ae:he}}}}}function Y(he,ae,ye){console.time("AVSurface.getVolume"),console.time("AVSurface.init"),J(he,ae,ye),console.timeEnd("AVSurface.init"),console.time("AVSurface.projectPoints"),ce(),console.timeEnd("AVSurface.projectPoints"),console.time("AVSurface.projectTorii"),function(){for(var re=0;re<r;re++){k.withinRadii(i[re],o[re],a[re],u[re],O);for(var te=0,le=O[te];le>=0;)re<le&&se(re,le),le=O[++te]}}(),console.timeEnd("AVSurface.projectTorii"),function(){for(var re=0;re<_.length;re++)_[re]<0&&(_[re]=0)}(),function(){for(var re=0;re<b.length;re++)b[re]=n[b[re]]}(),console.timeEnd("AVSurface.getVolume")}this.getSurface=function(he,ae,ye,re,te,le,de){return Y(ae,ye,te),new ld(_,m[2],m[1],m[0],b).getSurface(ae,!1,void 0,y,de)}}xr.add("line",Mlt),Object.assign(XS,{__deps:[o_,Boe,ld,t_,rae]}),Object.assign(YS,{__deps:[o_,ld,is,t_,Zn,Sa,Fr,iae,K]}),Q1.add("molsurf",function(e,t){var n=e.data.args,r=e.data.params;if(n&&r){var i=new(r.type==="av"?YS:XS)(n.coordList,n.radiusList,n.indexList).getSurface(r.type,r.probeRadius,r.scaleFactor,r.cutoff,!0,r.smooth,r.contour),o=[i.position.buffer,i.index.buffer];i.normal&&o.push(i.normal.buffer),i.atomindex&&o.push(i.atomindex.buffer),t({sd:i,p:r},o)}},[XS,YS]);var Gm=function(e){this.structure=e};Gm.prototype._getAtomData=function(e){return this.structure.getAtomData({what:{position:!0,radius:!0,index:!0},radiusParams:K(e.radiusParams,{type:"vdw",scale:1})})},Gm.prototype._makeSurface=function(e,t){var n=new Ao(t.name,"",e);return n.info.type=t.type,n.info.probeRadius=t.probeRadius,n.info.scaleFactor=t.scaleFactor,n.info.smooth=t.smooth,n.info.cutoff=t.cutoff,n},Gm.prototype.getSurface=function(e){var t=e||{},n=this._getAtomData(e),r=n.position,i=n.radius,o=n.index,a=new(t.type==="av"?YS:XS)(r,i,o).getSurface(t.type,t.probeRadius,t.scaleFactor,t.cutoff,!0,t.smooth,t.contour);return this._makeSurface(a,t)},Gm.prototype.getSurfaceWorker=function(e,t){var n=this,r=Object.assign({},e);if(window.hasOwnProperty("Worker")){this.worker===void 0&&(this.worker=new XA("molsurf"));var i=this._getAtomData(e),o=i.position,a=i.radius,s=i.index,l={args:{coordList:o,radiusList:a,indexList:s},params:r},c=[o.buffer,a.buffer,s.buffer];this.worker.post(l,c,function(f){t(n._makeSurface(f.data.sd,r))},function(f){console.warn("MolecularSurface.getSurfaceWorker error - trying without worker",f),n.worker.terminate(),n.worker=void 0;var d=n.getSurface(r);t(d)})}else{var u=this.getSurface(r);t(u)}},Gm.prototype.dispose=function(){this.worker&&this.worker.terminate()};var Elt=function(e){function t(n,r,i){var o=this;e.call(this,n,r,i),this.type="surface",this.parameters=Object.assign({surfaceType:{type:"select",rebuild:!0,options:{vws:"vws",sas:"sas",ms:"ms",ses:"ses",av:"av"}},probeRadius:{type:"number",precision:1,max:20,min:0,rebuild:!0},smooth:{type:"integer",precision:1,max:10,min:0,rebuild:!0},scaleFactor:{type:"number",precision:1,max:5,min:0,rebuild:!0},cutoff:{type:"number",precision:2,max:50,min:0,rebuild:!0},contour:{type:"boolean",rebuild:!0},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",buffer:!0},filterSele:{type:"text",rebuild:!0},colorVolume:{type:"hidden"},useWorker:{type:"boolean",rebuild:!0}},this.parameters,{radius:null,scale:null}),this.__infoList=[],this.structure.signals.refreshed.add(function(){o.__forceNewMolsurf=!0}),this.toBePrepared=!0,this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.colorScheme=K(r.colorScheme,"uniform"),r.colorValue=K(r.colorValue,14540253),r.disablePicking=K(r.disablePicking,!0),this.surfaceType=K(r.surfaceType,"ms"),this.probeRadius=K(r.probeRadius,1.4),this.smooth=K(r.smooth,2),this.scaleFactor=K(r.scaleFactor,2),this.cutoff=K(r.cutoff,0),this.contour=K(r.contour,!1),this.background=K(r.background,!1),this.opaqueBack=K(r.opaqueBack,!0),this.filterSele=K(r.filterSele,""),this.colorVolume=K(r.colorVolume,void 0),this.useWorker=K(r.useWorker,!0),e.prototype.init.call(this,n)},t.prototype.prepareData=function(n,r,i){var o=this.__infoList[r];if(o||(o={},this.__infoList[r]=o),o.molsurf&&o.sele===n.selection.string)i(r);else{if(this.filterSele){var a=n.structure.getView(new Hn(this.filterSele)),s=a.boundingBox.getSize(new V),l=Math.max(s.x,s.y,s.z),c=n.getAtomSetWithinPoint(a.center,l/2+6);if((n=n.getView(new Hn(n.getAtomSetWithinSelection(c,3).toSeleString()))).atomCount===0)return void i(r)}o.sele=n.selection.string,o.molsurf=new Gm(n);var u=this.getSurfaceParams(),f=function(d){o.surface=d,i(r)};this.useWorker?o.molsurf.getSurfaceWorker(u,f):f(o.molsurf.getSurface(u))}},t.prototype.prepare=function(n){var r=this;if((this.__forceNewMolsurf||this.__sele!==this.selection.string||this.__surfaceParams!==JSON.stringify(this.getSurfaceParams()))&&(this.__infoList.forEach(function(s){s&&s.molsurf&&s.molsurf.dispose()}),this.__infoList.length=0),this.structureView.atomCount!==0){var i=function(){r.__sele=r.selection.string,r.__surfaceParams=JSON.stringify(r.getSurfaceParams()),r.__forceNewMolsurf=!1,n()},o=this.assembly==="default"?this.defaultAssembly:this.assembly,a=this.structure.biomolDict[o];a?a.partList.forEach(function(s,l){var c=s.getView(r.structureView);r.prepareData(c,l,function(u){u===a.partList.length-1&&i()})}):this.prepareData(this.structureView,0,i)}else n()},t.prototype.createData=function(n,r){var i=this.__infoList[r],o=i.surface;if(o){var a={position:o.getPosition(),color:o.getColor(this.getColorParams()),index:o.getFilteredIndex(this.filterSele,n)},s=[];if(o.contour){var l=new Foe(a,this.getBufferParams({wireframe:!1}));s.push(l)}else{Object.assign(a,{normal:o.getNormal(),picking:o.getPicking(n.getStructure())});var c=new Noe(a,this.getBufferParams({background:this.background,opaqueBack:this.opaqueBack,dullInterior:!1}));if(this.getBufferParams().side=="double"){var u=new Ss(c);s.push(u)}else s.push(c)}return{bufferList:s,info:i}}},t.prototype.updateData=function(n,r){var i={};if(n.position||n.radius)return this.__forceNewMolsurf=!0,void this.build();n.color&&(i.color=r.info.surface.getColor(this.getColorParams())),n.index&&(i.index=r.info.surface.getFilteredIndex(this.filterSele,r.sview)),r.bufferList[0].setAttributes(i)},t.prototype.setParameters=function(n,r,i){return r===void 0&&(r={}),n&&n.filterSele&&(r.index=!0),n&&n.colorVolume!==void 0&&(r.color=!0),n&&n.wireframe&&(n.contour||n.contour===void 0&&this.contour)&&(n.wireframe=!1),e.prototype.setParameters.call(this,n,r,i),this},t.prototype.getSurfaceParams=function(n){return n===void 0&&(n={}),Object.assign({type:this.surfaceType,probeRadius:this.probeRadius,scaleFactor:this.scaleFactor,smooth:this.smooth&&!this.contour,cutoff:this.cutoff,contour:this.contour,useWorker:this.useWorker,radiusParams:this.getRadiusParams()},n)},t.prototype.getColorParams=function(){var n=e.prototype.getColorParams.call(this);return n.volume=this.colorVolume,n},t.prototype.getAtomRadius=function(){return 0},t.prototype.clear=function(){e.prototype.clear.call(this)},t.prototype.dispose=function(){this.__infoList.forEach(function(n){n&&n.molsurf&&n.molsurf.dispose()}),this.__infoList.length=0,e.prototype.dispose.call(this)},t}(uo);xr.add("surface",Elt);var Tlt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="point",this.parameters=Object.assign({pointSize:{type:"number",precision:1,max:100,min:0,buffer:!0},sizeAttenuation:{type:"boolean",buffer:!0},sortParticles:{type:"boolean",rebuild:!0},useTexture:{type:"boolean",buffer:!0},alphaTest:{type:"range",step:.001,max:1,min:0,buffer:!0},forceTransparent:{type:"boolean",buffer:!0},edgeBleach:{type:"range",step:.001,max:1,min:0,buffer:!0}},this.parameters,{flatShaded:null,wireframe:null,linewidth:null,side:null,roughness:null,metalness:null}),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};this.pointSize=K(r.pointSize,1),this.sizeAttenuation=K(r.sizeAttenuation,!0),this.sortParticles=K(r.sortParticles,!1),this.useTexture=K(r.useTexture,!1),this.alphaTest=K(r.alphaTest,.5),this.forceTransparent=K(r.forceTransparent,!1),this.edgeBleach=K(r.edgeBleach,0),e.prototype.init.call(this,r)},t.prototype.createData=function(n){var r=n.getAtomData(this.getAtomParams({position:!0,color:!0,picking:!0}));return{bufferList:[new HN(r,this.getBufferParams({pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,sortParticles:this.sortParticles,useTexture:this.useTexture,alphaTest:this.alphaTest,forceTransparent:this.forceTransparent,edgeBleach:this.edgeBleach}))]}},t.prototype.updateData=function(n,r){var i=r.sview.getAtomData(this.getAtomParams(n)),o={};n&&!n.position||Object.assign(o,{position:i.position}),n&&!n.color||Object.assign(o,{color:i.color}),r.bufferList[0].setAttributes(o)},t.prototype.getAtomRadius=function(){return .1},t}(uo);xr.add("point",Tlt),On.add("shader/Ribbon.vert",`#define STANDARD
uniform float clipNear;
uniform vec3 clipCenter;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
attribute vec3 dir;
attribute float size;
#ifdef PICKING
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
#include color_pars_vertex
#ifndef FLAT_SHADED
varying vec3 vNormal;
#endif
#endif
#include common
void main(void){
#ifdef PICKING
vPickingColor = unpackColor( primitiveId );
#else
#include color_vertex
#include beginnormal_vertex
#include defaultnormal_vertex
#ifndef FLAT_SHADED
vNormal = normalize( transformedNormal );
#endif
#endif
#include begin_vertex
transformed += normalize( dir ) * size;
#include project_vertex
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )
vViewPosition = -mvPosition.xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
}`);var Olt=new Uint16Array([0,1,2,1,3,2]);function by(e){return 3*(4*(e.position.length/3-1))}var Ilt=function(e){function t(n,r){r===void 0&&(r={}),e.call(this,{position:new Float32Array(by(n)),color:new Float32Array(by(n)),index:Lc(by(n),by(n)/3),normal:new Float32Array(by(n)),picking:n.picking},r),this.vertexShader="Ribbon.vert";var i=n.position.length/3-1,o=4*i,a=3*o;this.addAttributes({dir:{type:"v3",value:new Float32Array(a)}}),this.addAttributes({size:{type:"f",value:new Float32Array(o)}}),n.primitiveId=T0(i),this.setAttributes(n),this.makeIndex()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setAttributes=function(n){n===void 0&&(n={});var r,i,o,a,s,l,c,u,f,d,p,h,g,v,m,y,_,b,x,w=this.size/4,S=this.geometry.attributes;n.position&&(r=n.position,c=S.position.array,S.position.needsUpdate=!0),n.normal&&(i=n.normal,u=S.normal.array,S.normal.needsUpdate=!0),n.size&&(o=n.size,f=S.size.array,S.size.needsUpdate=!0),n.dir&&(a=n.dir,d=S.dir.array,S.dir.needsUpdate=!0),n.color&&(s=n.color,p=S.color.array,S.color.needsUpdate=!0),n.primitiveId&&(l=n.primitiveId,h=S.primitiveId.array,S.primitiveId.needsUpdate=!0);var A=o?o[0]:null;for(g=0;g<w;++g){for(b=3*g,m=3*g*4,_=4*g,r&&(c[m]=c[m+3]=r[b],c[m+1]=c[m+4]=r[b+1],c[m+2]=c[m+5]=r[b+2],c[m+6]=c[m+9]=r[b+3],c[m+7]=c[m+10]=r[b+4],c[m+8]=c[m+11]=r[b+5]),i&&(u[m]=u[m+3]=-i[b],u[m+1]=u[m+4]=-i[b+1],u[m+2]=u[m+5]=-i[b+2],u[m+6]=u[m+9]=-i[b+3],u[m+7]=u[m+10]=-i[b+4],u[m+8]=u[m+11]=-i[b+5]),v=0;v<4;++v)y=m+3*v,s&&(p[y]=s[b],p[y+1]=s[b+1],p[y+2]=s[b+2]),l&&(h[_+v]=l[g]);o&&(x=o[g],A!==o[g]?(f[_]=A,f[_+1]=A,f[_+2]=x,f[_+3]=x):(f[_]=x,f[_+1]=x,f[_+2]=x,f[_+3]=x),A=x),a&&(d[m]=a[b],d[m+1]=a[b+1],d[m+2]=a[b+2],d[m+3]=-a[b],d[m+4]=-a[b+1],d[m+5]=-a[b+2],d[m+6]=a[b+3],d[m+7]=a[b+4],d[m+8]=a[b+5],d[m+9]=-a[b+3],d[m+10]=-a[b+4],d[m+11]=-a[b+5])}},t.prototype.makeIndex=function(){var n=this.geometry.getIndex();if(n)for(var r=n.array,i=r.length/4/3,o=0;o<i;++o){var a=6*o,s=4*o;r.set(Olt,a);for(var l=0;l<6;++l)r[a+l]+=s}else Ge.error("Index is null")},t}(zu),Rlt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="ribbon",this.parameters=Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters,{side:null,wireframe:null,linewidth:null}),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.colorScheme=K(r.colorScheme,"chainname"),r.colorScale=K(r.colorScale,"RdYlBu"),r.radiusType=K(r.radiusType,"sstruc"),r.radiusScale=K(r.radiusScale,4),r.quality==="low"?this.subdiv=3:r.quality==="medium"?this.subdiv=6:r.quality==="high"?this.subdiv=12:this.subdiv=K(r.subdiv,6),this.tension=K(r.tension,NaN),this.smoothSheet=K(r.smoothSheet,!1),e.prototype.init.call(this,r)},t.prototype.getSplineParams=function(n){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:!0,smoothSheet:this.smoothSheet},n)},t.prototype.getAtomRadius=function(n){return n.isTrace()?e.prototype.getAtomRadius.call(this,n):0},t.prototype.createData=function(n){var r=this,i=[],o=[];return this.structure.eachPolymer(function(a){if(!(a.residueCount<4)){o.push(a);var s=new Uo(a,r.getSplineParams()),l=s.getSubdividedPosition(),c=s.getSubdividedOrientation(),u=s.getSubdividedColor(r.getColorParams()),f=s.getSubdividedPicking(),d=s.getSubdividedSize(r.getRadiusParams());i.push(new Ilt({position:l.position,normal:c.binormal,dir:c.normal,color:u.color,size:d.size,picking:f.picking},r.getBufferParams()))}},n.getSelection()),{bufferList:i,polymerList:o}},t.prototype.updateData=function(n,r){n=n||{};var i=0,o=r.polymerList.length;for(i=0;i<o;++i){var a={},s=new Uo(r.polymerList[i],this.getSplineParams());if(n.position){var l=s.getSubdividedPosition(),c=s.getSubdividedOrientation();Object.assign(a,{position:l.position,normal:c.binormal,dir:c.normal})}if(n.radius||n.scale){var u=s.getSubdividedSize(this.getRadiusParams());Object.assign(a,{size:u.size})}if(n.color){var f=s.getSubdividedColor(this.getColorParams());Object.assign(a,{color:f.color})}r.bufferList[i].setAttributes(a)}},t.prototype.setParameters=function(n){var r={};return n&&n.tension&&Object.assign(r,{position:!0}),e.prototype.setParameters.call(this,n,r,!1),this},t}(uo);xr.add("ribbon",Rlt);var klt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="rocket",this.parameters=Object.assign({localAngle:{type:"integer",max:180,min:0,rebuild:!0},centerDist:{type:"number",precision:1,max:10,min:0,rebuild:!0},ssBorder:{type:"boolean",rebuild:!0},radialSegments:!0,openEnded:!0,disableImpostor:!0},this.parameters),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.colorScheme=K(r.colorScheme,"sstruc"),r.radiusSize=K(r.radiusSize,1.5),r.radiusScale=K(r.radiusScale,1),r.openEnded=K(r.openEnded,!1),r.useInteriorColor=K(r.useInteriorColor,!0),this.localAngle=K(r.localAngle,30),this.centerDist=K(r.centerDist,2.5),this.ssBorder=K(r.ssBorder,!1),e.prototype.init.call(this,r)},t.prototype.createData=function(n){var r=this,i=0,o=[],a=[];this.structure.eachPolymer(function(u){if(!(u.residueCount<4||u.isNucleic())){var f=new jN(u),d=f.getAxis(r.localAngle,r.centerDist,r.ssBorder,r.getColorParams(),r.getRadiusParams());i+=d.size.length,o.push(d),a.push(f)}},n.getSelection());var s={begin:new Float32Array(3*i),end:new Float32Array(3*i),size:new Float32Array(i),color:new Float32Array(3*i),picking:{}},l=new Float32Array(i),c=0;return o.forEach(function(u){s.begin.set(u.begin,3*c),s.end.set(u.end,3*c),s.size.set(u.size,c),s.color.set(u.color,3*c),l.set(u.picking.array,c),c+=u.size.length}),i&&(s.picking=new Vh(l,n.getStructure())),{bufferList:[new ef({position1:s.begin,position2:s.end,color:s.color,color2:s.color,radius:s.size,picking:s.picking},this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}))],axisList:o,helixbundleList:a,axisData:s}},t.prototype.updateData=function(n,r){var i=this;if((n=n||{}).position)this.build();else{var o={};if(n.color||n.radius){var a=0;r.helixbundleList.forEach(function(s){var l=s.getAxis(i.localAngle,i.centerDist,i.ssBorder,i.getColorParams(),i.getRadiusParams());n.color&&r.axisData.color.set(l.color,3*a),(n.radius||n.scale)&&r.axisData.size.set(l.size,a),a+=l.size.length}),n.color&&Object.assign(o,{color:r.axisData.color,color2:r.axisData.color}),(n.radius||n.scale)&&Object.assign(o,{radius:r.axisData.size})}r.bufferList[0].setAttributes(o)}},t}(uo);xr.add("rocket",klt);var Llt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="rope",this.parameters=Object.assign({smooth:{type:"integer",max:15,min:0,rebuild:!0}},this.parameters,{aspectRatio:null,smoothSheet:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.aspectRatio=1,r.tension=K(r.tension,.5),r.radiusScale=K(r.radiusScale,5),r.smoothSheet=!1,this.smooth=K(r.smooth,2),e.prototype.init.call(this,r)},t.prototype.getSpline=function(n){var r=new hu(n);return new Uo(n,this.getSplineParams({directional:!1,positionIterator:r.getCenterIterator(this.smooth)}))},t}(KN);xr.add("rope",Llt);var $lt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="spacefill",this.parameters=Object.assign({sphereDetail:!0,disableImpostor:!0},this.parameters),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.useInteriorColor=K(r.useInteriorColor,!0),e.prototype.init.call(this,r)},t.prototype.createData=function(n){return{bufferList:[new Nd(n.getAtomData(this.getAtomParams()),this.getBufferParams({sphereDetail:this.sphereDetail,dullInterior:!0,disableImpostor:this.disableImpostor}))]}},t.prototype.updateData=function(n,r){var i=r.sview.getAtomData(this.getAtomParams(n)),o={};n&&!n.position||Object.assign(o,{position:i.position}),n&&!n.color||Object.assign(o,{color:i.color}),n&&!n.radius||Object.assign(o,{radius:i.radius}),r.bufferList[0].setAttributes(o)},t}(uo);function KH(e){return 3*(e.position.length/3-1)*2}xr.add("spacefill",$lt);var Dlt=function(e){function t(n,r){r===void 0&&(r={}),e.call(this,{position:new Float32Array(KH(n)),color:new Float32Array(KH(n))},r),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag",this.setAttributes(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setAttributes=function(n){var r,i,o,a,s=this.geometry.attributes;if(n.position&&(r=n.position,o=s.position.array,s.position.needsUpdate=!0),n.color&&(i=n.color,a=s.color.array,s.color.needsUpdate=!0),r||i)for(var l,c,u=this.size-1,f=0;f<u;++f)l=3*f,c=3*f*2,r&&(o[c]=r[l],o[c+1]=r[l+1],o[c+2]=r[l+2],o[c+3]=r[l+3],o[c+4]=r[l+4],o[c+5]=r[l+5]),i&&(a[c]=i[l],a[c+1]=i[l+1],a[c+2]=i[l+2],a[c+3]=i[l+3],a[c+4]=i[l+4],a[c+5]=i[l+5]);else Ge.warn("TraceBuffer.prototype.setAttributes no data")},t}(vn),Blt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="trace",this.parameters=Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters,{flatShaded:null,side:null,wireframe:null}),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.colorScheme=K(r.colorScheme,"chainname"),r.colorScale=K(r.colorScale,"RdYlBu"),r.quality==="low"?this.subdiv=3:r.quality==="medium"?this.subdiv=6:r.quality==="high"?this.subdiv=12:this.subdiv=K(r.subdiv,6),this.tension=K(r.tension,NaN),this.smoothSheet=K(r.smoothSheet,!1),e.prototype.init.call(this,r)},t.prototype.getSplineParams=function(n){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:!1,smoothSheet:this.smoothSheet},n)},t.prototype.getAtomRadius=function(n){return n.isTrace()?.1:0},t.prototype.createData=function(n){var r=this,i=[],o=[];return this.structure.eachPolymer(function(a){if(!(a.residueCount<4)){o.push(a);var s=new Uo(a,r.getSplineParams()),l=s.getSubdividedPosition(),c=s.getSubdividedColor(r.getColorParams());i.push(new Dlt(Object.assign({},l,c),r.getBufferParams()))}},n.getSelection()),{bufferList:i,polymerList:o}},t.prototype.updateData=function(n,r){n=n||{};var i=0,o=r.polymerList.length;for(i=0;i<o;++i){var a={},s=new Uo(r.polymerList[i],this.getSplineParams());if(n.position){var l=s.getSubdividedPosition();Object.assign(a,{position:l.position})}if(n.color){var c=s.getSubdividedColor(this.getColorParams());Object.assign(a,{color:c.color})}r.bufferList[i].setAttributes(a)}},t.prototype.setParameters=function(n){var r={};return n&&n.tension&&Object.assign(r,{position:!0}),e.prototype.setParameters.call(this,n,r,!1),this},t}(uo);xr.add("trace",Blt);var Nlt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="tube",this.parameters=Object.assign({},this.parameters,{aspectRatio:null})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.aspectRatio=1,r.radiusScale=K(r.radiusScale,2),r.quality==="low"&&(this.radialSegments=5),e.prototype.init.call(this,r)},t.prototype.getSplineParams=function(){return e.prototype.getSplineParams.call(this,{directional:!1})},t}(KN);xr.add("tube",Nlt);var Flt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="unitcell",this.parameters=Object.assign({radiusSize:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,radialSegments:!0,disableImpostor:!0},this.parameters,{assembly:null}),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{},i=.5;this.structure.unitcell&&(i=Math.cbrt(this.structure.unitcell.volume)/200),r.radiusSize=K(r.radiusSize,i),r.colorValue=K(r.colorValue,"orange"),r.useInteriorColor=K(r.useInteriorColor,!0),e.prototype.init.call(this,r)},t.prototype.getUnitcellData=function(n){return n.unitcell.getData(n)},t.prototype.create=function(){var n=this.structureView.getStructure();if(n.unitcell){var r=this.getUnitcellData(n);this.sphereBuffer=new Nd(r.vertex,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),this.cylinderBuffer=new ef(r.edge,this.getBufferParams({openEnded:!0,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bufferList:[this.sphereBuffer,this.cylinderBuffer]})}},t.prototype.createData=function(n){},t.prototype.updateData=function(n,r){var i=r.sview.getStructure();if(i.unitcell){var o=this.getUnitcellData(i),a={},s={};n&&!n.position||(Object.assign(a,{position:o.vertex.position}),Object.assign(s,{position1:o.edge.position1,position2:o.edge.position2})),n&&!n.color||(Object.assign(a,{color:o.vertex.color}),Object.assign(s,{color:o.edge.color,color2:o.edge.color2})),n&&!n.radius||(Object.assign(a,{radius:o.vertex.radius}),Object.assign(s,{radius:o.edge.radius})),this.sphereBuffer.setAttributes(a),this.cylinderBuffer.setAttributes(s)}},t}(uo);xr.add("unitcell",Flt);var jlt=function(e){function t(n,r,i){e.call(this,n,r,i),this.type="validation",this.parameters=Object.assign({},this.parameters,{radiusType:null,radiusSize:null,radiusScale:null}),this.init(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.init=function(n){var r=n||{};r.colorValue=K(r.colorValue,"#f0027f"),r.useInteriorColor=K(r.useInteriorColor,!0),e.prototype.init.call(this,r)},t.prototype.createData=function(n){if(n.validation){var r=n.validation.getClashData({structure:n,color:this.colorValue});return{bufferList:[new ef(r,this.getBufferParams({openEnded:!1}))]}}},t}(uo);xr.add("validation",jlt);var ZH=new V,zR=new V,UR=new V,zlt=new V(0,1,0),Ult=Object.assign({radialSegments:60,openEnded:!1},Jo),oae=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,{position:new Float32Array(r.position1.length),color:r.color,picking:r.picking},i,function(o){o===void 0&&(o={});var a=new z1(1,1,K(o.radialSegments,60),1,K(o.openEnded,!1));return a.applyMatrix4(new lt().makeRotationX(-Math.PI/2)),a}(i)),this.updateNormals=!0,this._position=new Float32Array(r.position1.length),this.setAttributes(r,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return Ult},t.prototype.applyPositionTransform=function(r,i,o){zR.fromArray(this._position1,o),UR.fromArray(this._position2,o),r.lookAt(zR,UR,zlt);var a=this._radius[i];ZH.set(a,a,zR.distanceTo(UR)),r.scale(ZH)},t.prototype.setAttributes=function(r,i){r===void 0&&(r={}),r.position1&&r.position2&&(Ac(r.position1,r.position2,this._position),this._position1=r.position1,this._position2=r.position2,r.position=this._position),r.radius&&(this._radius=r.radius),e.prototype.setAttributes.call(this,r,i)},Object.defineProperties(t.prototype,n),t}(Bd);ds.add("cone",oae);var aae=function(e){e===void 0&&(e=[]),this.geometryList=e};aae.prototype.computeBoundingBox=function(){var e=this;this.boundingBox?this.boundingBox.empty():this.boundingBox=new cr,this.geometryList.forEach(function(t){t.boundingBox||t.computeBoundingBox(),e.boundingBox.union(t.boundingBox)})};var Vlt=Object.assign({aspectRatio:1.5,radialSegments:50,openEnded:!1,disableImpostor:!1},Jo),Gl=function(e,t){t===void 0&&(t={}),this.group=new Kn,this.wireframeGroup=new Kn,this.pickingGroup=new Kn,this.visible=!0,this.parameters=fs(t,this.defaultParameters),this.splitPosition=new Float32Array(e.position1.length),this.cylinderRadius=new Float32Array(e.radius.length);var n=this.makeAttributes(e),r={radialSegments:this.parameters.radialSegments,openEnded:this.parameters.openEnded,disableImpostor:this.parameters.disableImpostor};this.cylinderBuffer=new ef(n.cylinder,r),this.coneBuffer=new oae(n.cone,r),this.geometry=new aae([this.cylinderBuffer.geometry,this.coneBuffer.geometry]),this.matrix=K(t.matrix,new lt),this.picking=e.picking},_y={defaultParameters:{configurable:!0},matrix:{configurable:!0},pickable:{configurable:!0}};_y.defaultParameters.get=function(){return Vlt},_y.matrix.set=function(e){vn.prototype.setMatrix.call(this,e)},_y.matrix.get=function(){return this.group.matrix.clone()},_y.pickable.get=function(){return!!this.picking},Gl.prototype.makeAttributes=function(e){e===void 0&&(e={});var t,n,r=this.splitPosition,i=this.cylinderRadius,o=this.parameters.aspectRatio,a={},s={};if(e.radius){for(t=0,n=i.length;t<n;++t)i[t]=e.radius[t]/o;a.radius=i,s.radius=e.radius}if(e.position1&&e.position2){var l=new V,c=new V,u=new V,f=new V;for(t=0,n=r.length;t<n;t+=3){l.fromArray(e.position1,t),c.fromArray(e.position2,t),u.subVectors(l,c);var d=u.length(),p=i[t/3]*o*2,h=Math.min(d,p);u.setLength(h),f.copy(c).add(u),f.toArray(r,t)}a.position1=e.position1,a.position2=r,s.position1=r,s.position2=e.position2}return e.color&&(a.color=e.color,a.color2=e.color,s.color=e.color),{cylinder:a,cone:s}},Gl.prototype.getMesh=function(){return new Kn().add(this.cylinderBuffer.getMesh(),this.coneBuffer.getMesh())},Gl.prototype.getWireframeMesh=function(){return new Kn().add(this.cylinderBuffer.getWireframeMesh(),this.coneBuffer.getWireframeMesh())},Gl.prototype.getPickingMesh=function(){return new Kn().add(this.cylinderBuffer.getPickingMesh(),this.coneBuffer.getPickingMesh())},Gl.prototype.setAttributes=function(e){e===void 0&&(e={});var t=this.makeAttributes(e);this.cylinderBuffer.setAttributes(t.cylinder),this.coneBuffer.setAttributes(t.cone)},Gl.prototype.setParameters=function(e){e===void 0&&(e={}),(e=Object.assign({},e))&&e.matrix!==void 0&&(this.matrix=e.matrix),delete e.matrix,e&&e.wireframe!==void 0&&(this.parameters.wireframe=e.wireframe,this.setVisibility(this.visible)),this.cylinderBuffer.setParameters(e),this.coneBuffer.setParameters(e)},Gl.prototype.setVisibility=function(e){vn.prototype.setVisibility.call(this,e)},Gl.prototype.dispose=function(){this.cylinderBuffer.dispose(),this.coneBuffer.dispose()},Object.defineProperties(Gl.prototype,_y),ds.add("arrow",Gl);var JH=new V,VR=new V,HR=new V,Hlt=new V(0,0,0),Glt=function(e){function t(n,r){r===void 0&&(r={}),e.call(this,n,r,new $x(1,1,1)),this.updateNormals=!0,this.setAttributes(n,!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.applyPositionTransform=function(n,r,i){VR.fromArray(this._heightAxis,i),HR.fromArray(this._depthAxis,i),n.lookAt(Hlt,VR,HR),JH.set(this._size[r],HR.length(),VR.length()),n.scale(JH)},t.prototype.setAttributes=function(n,r){n===void 0&&(n={}),n.size&&(this._size=n.size),n.heightAxis&&(this._heightAxis=n.heightAxis),n.depthAxis&&(this._depthAxis=n.depthAxis),e.prototype.setAttributes.call(this,n,r)},t}(Bd);ds.add("box",Glt);var QH=new V,GR=new V,WR=new V,Wlt=new V(0,0,0),qlt=Object.assign({sphereDetail:2},Jo),Xlt=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,r,i,new hh(1,K(i.sphereDetail,2))),this.updateNormals=!0,this.setAttributes(r,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return qlt},t.prototype.applyPositionTransform=function(r,i,o){GR.fromArray(this._majorAxis,o),WR.fromArray(this._minorAxis,o),r.lookAt(Wlt,GR,WR),QH.set(this._radius[i],WR.length(),GR.length()),r.scale(QH)},t.prototype.setAttributes=function(r,i){r===void 0&&(r={}),r.radius&&(this._radius=r.radius),r.majorAxis&&(this._majorAxis=r.majorAxis),r.minorAxis&&(this._minorAxis=r.minorAxis),e.prototype.setAttributes.call(this,r,i)},Object.defineProperties(t.prototype,n),t}(Bd);ds.add("ellipsoid",Xlt);var eG=new V,qR=new V,XR=new V,Ylt=new V(0,0,0),Klt=function(e){function t(n,r){r===void 0&&(r={}),e.call(this,n,r,new ph(1,0)),this.updateNormals=!0,this.setAttributes(n,!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.applyPositionTransform=function(n,r,i){qR.fromArray(this._heightAxis,i),XR.fromArray(this._depthAxis,i),n.lookAt(Ylt,qR,XR),eG.set(this._size[r],XR.length(),qR.length()),n.scale(eG)},t.prototype.setAttributes=function(n,r){n===void 0&&(n={}),n.size&&(this._size=n.size),n.heightAxis&&(this._heightAxis=n.heightAxis),n.depthAxis&&(this._depthAxis=n.depthAxis),e.prototype.setAttributes.call(this,n,r)},t}(Bd);ds.add("octahedron",Klt);var tG=new V,YR=new V,KR=new V,Zlt=new V(0,0,0),Jlt=function(e){function t(n,r){r===void 0&&(r={}),e.call(this,n,r,new Ov(1,0)),this.updateNormals=!0,this.setAttributes(n,!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.applyPositionTransform=function(n,r,i){YR.fromArray(this._heightAxis,i),KR.fromArray(this._depthAxis,i),n.lookAt(Zlt,YR,KR),tG.set(this._size[r],KR.length(),YR.length()),n.scale(tG)},t.prototype.setAttributes=function(n,r){n===void 0&&(n={}),n.size&&(this._size=n.size),n.heightAxis&&(this._heightAxis=n.heightAxis),n.depthAxis&&(this._depthAxis=n.depthAxis),e.prototype.setAttributes.call(this,n,r)},t}(Bd);ds.add("tetrahedron",Jlt);var nG=new V,rG=new V,iG=new V,Qlt=new V(0,0,0),ect=Object.assign({radiusRatio:.2,radialSegments:16,tubularSegments:32},Jo),tct=function(e){function t(r,i){i===void 0&&(i={}),e.call(this,r,i,new Rv(1,K(i.radiusRatio,.2),K(i.radialSegments,16),K(i.tubularSegments,32))),this.updateNormals=!0,this.setAttributes(r,!0)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultParameters:{configurable:!0}};return n.defaultParameters.get=function(){return ect},t.prototype.applyPositionTransform=function(r,i,o){rG.fromArray(this._majorAxis,o),iG.fromArray(this._minorAxis,o),r.lookAt(Qlt,rG,iG);var a=this._radius[i];nG.set(a,a,a),r.scale(nG)},t.prototype.setAttributes=function(r,i){r===void 0&&(r={}),r.radius&&(this._radius=r.radius),r.majorAxis&&(this._majorAxis=r.majorAxis),r.minorAxis&&(this._minorAxis=r.minorAxis),e.prototype.setAttributes.call(this,r,i)},Object.defineProperties(t.prototype,n),t}(Bd);ds.add("torus",tct);var To=function(e,t){var n=t||{};this.streamer=e,this.name=K(n.name,""),this.path=K(n.path,"")},xm={type:{configurable:!0},__objName:{configurable:!0},isBinary:{configurable:!0},isJson:{configurable:!0},isXml:{configurable:!0}};xm.type.get=function(){return""},xm.__objName.get=function(){return""},xm.isBinary.get=function(){return!1},xm.isJson.get=function(){return!1},xm.isXml.get=function(){return!1},To.prototype.parse=function(){var e=this;return this.streamer.read().then(function(){return e._beforeParse(),e._parse(),e._afterParse(),e[e.__objName]})},To.prototype._parse=function(){},To.prototype._beforeParse=function(){},To.prototype._afterParse=function(){Ze&&Ge.log(this[this.__objName])},Object.defineProperties(To.prototype,xm);var tf=function(e){function t(r,i){var o=i||{};e.call(this,r,o),this.firstModelOnly=K(o.firstModelOnly,!1),this.asTrajectory=K(o.asTrajectory,!1),this.cAlphaOnly=K(o.cAlphaOnly,!1),this.structure=new Wt(this.name,this.path),this.structureBuilder=new WS(this.structure)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"structure"},n.__objName.get=function(){return"structure"},Object.defineProperties(t.prototype,n),t}(To),dl=function(e,t,n,r,i){n===void 0&&(n=""),i===void 0&&(i=[]),this.structure=e,this.index=t,this.description=n,this.entityType=function(o){switch(o=o.toLowerCase()){case"polymer":return 1;case"non-polymer":return 2;case"macrolide":return 3;case"water":return 4;default:return 0}}(r||""),this.chainIndexList=i,i.forEach(function(o){e.chainStore.entityIndex[o]=t})},oG={type:{configurable:!0}};oG.type.get=function(){return function(e){switch(e){case 1:return"polymer";case 2:return"non-polymer";case 3:return"macrolide";case 4:return"water";default:return}}(this.entityType)},dl.prototype.getEntityType=function(){return this.entityType},dl.prototype.isPolymer=function(){return this.entityType===1},dl.prototype.isNonPolymer=function(){return this.entityType===2},dl.prototype.isMacrolide=function(){return this.entityType===3},dl.prototype.isWater=function(){return this.entityType===4},dl.prototype.eachChain=function(e){var t=this.structure.getChainProxy();this.chainIndexList.forEach(function(n){t.index=n,e(t)})},Object.defineProperties(dl.prototype,oG);var nct={a:1,b:1,c:1,alpha:90,beta:90,gamma:90,spacegroup:"P 1"},Np=function(e){e===void 0&&(e=nct),this.cartToFrac=new lt,this.fracToCart=new lt,this.a=e.a,this.b=e.b,this.c=e.c,this.alpha=e.alpha,this.beta=e.beta,this.gamma=e.gamma,this.spacegroup=e.spacegroup;var t=jr(this.alpha),n=jr(this.beta),r=jr(this.gamma),i=Math.cos(t),o=Math.cos(n),a=Math.cos(r),s=Math.sin(n),l=Math.sin(r);if(this.volume=this.a*this.b*this.c*Math.sqrt(1-i*i-o*o-a*a+2*i*o*a),e.cartToFrac===void 0){var c=this.a*this.b*l/this.volume,u=(o*a-i)/(s*l);this.fracToCart.set(this.a,0,0,0,this.b*a,this.b*l,0,0,this.c*o,-this.c*s*u,1/c,0,0,0,0,1).transpose(),this.cartToFrac.getInverse(this.fracToCart)}else this.cartToFrac.copy(e.cartToFrac),this.fracToCart.getInverse(this.cartToFrac)};Np.prototype.getPosition=function(e){var t=new Float32Array(24);if(e.unitcell){var n=e.unitcell,r=e.center.clone().applyMatrix4(n.cartToFrac).floor(),i=new V,o=0,a=function(s,l,c){i.set(s,l,c).add(r).applyMatrix4(n.fracToCart).toArray(t,o),o+=3};a(0,0,0),a(1,0,0),a(0,1,0),a(0,0,1),a(1,1,0),a(1,0,1),a(0,1,1),a(1,1,1)}return t},Np.prototype.getCenter=function(e){return function(t,n){n===void 0&&(n=new V);for(var r=t.length,i=0;i<r;i+=3)n.x+=t[i],n.y+=t[i+1],n.z+=t[i+2];return n.divideScalar(r/3),n}(this.getPosition(e))},Np.prototype.getData=function(e,t){t===void 0&&(t={});var n=K(t.colorValue,"orange"),r=K(t.radius,Math.cbrt(this.volume)/200),i=new ht(n),o=new V,a=this.getPosition(e),s=Yn(8,i.r,i.g,i.b),l=is(8,r),c=new Float32Array(36),u=new Float32Array(36),f=Yn(12,i.r,i.g,i.b),d=is(12,r),p=0;function h(v,m){o.fromArray(a,3*v).toArray(c,p),o.fromArray(a,3*m).toArray(u,p),p+=3}h(0,1),h(0,2),h(0,3),h(1,4),h(1,5),h(2,6),h(3,5),h(4,7),h(5,7),h(2,4),h(7,6),h(3,6);var g=new kat(this,e);return{vertex:{position:a,color:s,radius:l,picking:g},edge:{position1:c,position2:u,color:f,color2:f,radius:d,picking:g}}};var tP={1:"h",2:"h",3:"i",4:"h",5:"g",6:"h",7:"h",8:"h",9:"h",10:"h",0:"h"},rct=["DAL","DAR","DSG","DAS","DCY","DGL","DGN","DHI","DIL","DLE","DLY","MED","DPN","DPR","DSN","DTH","DTR","DTY","DVA","DNE"],ict=["MOL_ID","MOLECULE","CHAIN","FRAGMENT","SYNONYM","EC","ENGINEERED","MUTATION","OTHER_DETAILS"],aG=/\s+/;function sG(e,t,n){var r=""+e;return t&&(r+=":"+t),n&&(r+="^"+n),r}var Ob=function(e){function t(r,i){var o=i||{};e.call(this,r,o),this.hex=K(o.hex,!1)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"pdb"},t.prototype._parse=function(){Ze&&Ge.time("PdbParser._parse "+this.name);var r=!1,i=this.streamer.peekLines(1)[0],o=i.substr(62,4),a=i.substr(72,4);o===a&&a.trim()&&(r=!0);var s,l,c,u,f,d,p,h,g,v,m,y,_,b,x,w,S,A,C,k,O,T,B,R,P,D,z,N,H,J,ne,oe,Z,ce,se=this.type==="pqr",Y=this.type==="pdbqt",he=this.structure,ae=this.structureBuilder,ye=this.hex,re=10,te=10,le=this.firstModelOnly,de=this.asTrajectory,_e=this.cAlphaOnly,be=he.frames,ke=he.boxes,W=!1,ee=he.biomolDict,Ee={},ge={},pe={},ve=[],$e={},Ne={},Ae={},Oe={},j={helices:[],sheets:[]},M=j.helices,L=j.sheets,q=he.atomMap,me=he.atomStore;me.resize(Math.round(this.streamer.data.length/80)),(se||Y)&&me.addField("partialCharge",1,"float32"),se&&me.addField("radius",1,"float32");var Te=he.getAtomProxy(),Pe=he.getAtomProxy(),Xe=0,He=0,Ve=!0;this.streamer.eachChunkOfLines(function(ut){(function(Et,et,ct){for(var _t,xe=Et;xe<et;++xe)if(d=ct[xe],(p=d.substr(0,6))==="ATOM  "||p==="HETATM"){if(Ve&&(de?(W?(s=new Float32Array(3*me.count),be.push(s)):s=[],l=0):le||(Ee={}),N=(z=1).toString(),H=!0,Ve=!1),le&&He>0)continue;var ie=void 0,ue=void 0,E=void 0,F=void 0,U=0;if(se){if(U=(F=d.split(aG)).length===10?1:0,b=F[2],_e&&b!=="CA")continue;ie=parseFloat(F[6-U]),ue=parseFloat(F[7-U]),E=parseFloat(F[8-U])}else{if(b=d.substr(12,4).trim(),_e&&b!=="CA")continue;ie=parseFloat(d.substr(30,8)),ue=parseFloat(d.substr(38,8)),E=parseFloat(d.substr(46,8))}if(de){var X=3*l;if(s[X+0]=ie,s[X+1]=ue,s[X+2]=E,l+=1,W)continue}var Q=void 0;se?(h=parseInt(F[1]),Q="",x=d[0]==="H"?1:0,g=U?"":F[4],v=parseInt(F[5-U]),_="",m=F[3],S="",y=1):(h=parseInt(d.substr(6,5),re),ye&&h===99999&&(re=16),x=d[0]==="H"?1:0,g=d[21].trim(),v=parseInt(d.substr(22,4),te),ye&&v===9999&&(te=16),_=d[26].trim(),m=d.substr(17,4).trim()||"MOL",w=parseFloat(d.substr(60,6)),S=d[16].trim(),y=parseFloat(d.substr(54,6)),r||(Y?(Q=d.substr(76,3).trim())in HV&&(Q=HV[Q]):(Q=d.substr(76,2).trim(),g||(g=d.substr(72,4).trim())),A=parseInt((d.substr(79,1)+d.substr(78,1)).trim()))),me.growIfFull(),me.atomTypeId[Xe]=q.add(b,Q),me.x[Xe]=ie,me.y[Xe]=ue,me.z[Xe]=E,me.serial[Xe]=h,me.altloc[Xe]=S.charCodeAt(0),me.occupancy[Xe]=isNaN(y)?0:y,se?(me.partialCharge[Xe]=parseFloat(F[9-U]),me.radius[Xe]=parseFloat(F[10-U])):(me.bfactor[Xe]=isNaN(w)?0:w,Y&&(me.partialCharge[Xe]=parseFloat(d.substr(70,6))),isFinite(A)&&(me.formalCharge||me.addField("formalCharge",1,"int8"),me.formalCharge[Xe]=A));var fe=sG(v,g,_);!x||Ne[fe]||rct.includes(m)?H||J===g||(N=(z+=1).toString()):J===g&&oe===m&&(ZA.includes(m)||ne===v&&Z===_)||(N=(z+=1).toString(),ne=v,oe=m,Z=_),ae.addAtom(He,g,N,m,v,x,void 0,_),Ee[h]=Xe,Xe+=1,H=!1,J=g}else if(p==="CONECT"){var we=Ee[parseInt(d.substr(6,5))],Se=[11,16,21,26],ze={};if(we===void 0)continue;for(var Fe=0;Fe<4;++Fe){var Ke=parseInt(d.substr(Se[Fe],5));if(!Number.isNaN(Ke)&&(Ke=Ee[Ke])!==void 0)if(we<Ke?(Te.index=we,Pe.index=Ke):(Te.index=Ke,Pe.index=we),ze[Ke]!==void 0)he.bondStore.bondOrder[ze[Ke]]+=1;else{var Le=Te.index+"|"+Pe.index;pe[Le]===void 0&&(pe[Le]=!0,ze[Ke]=he.bondStore.count,he.bondStore.addBond(Te,Pe,1))}}}else if(p==="HELIX "){C=d[19].trim(),k=parseInt(d.substr(21,4)),O=d[25].trim(),T=d[31].trim(),B=parseInt(d.substr(33,4)),R=d[37].trim();var Me=parseInt(d.substr(39,1));Me=(tP[Me]||tP[0]).charCodeAt(0),M.push([C,k,O,T,B,R,Me])}else if(p==="SHEET ")C=d[21].trim(),k=parseInt(d.substr(22,4)),O=d[26].trim(),T=d[32].trim(),B=parseInt(d.substr(33,4)),R=d[37].trim(),L.push([C,k,O,T,B,R]);else if(p==="HETNAM")$e[d.substr(11,3)]=d.substr(15).trim();else if(p==="SEQRES"){var Re=d[11].trim();Re!==ce&&(Oe[Re]=[],ce=Re),(_t=Oe[Re]).push.apply(_t,d.substr(19).trim().split(aG))}else if(p==="MODRES"){var qe=d.substr(12,3).trim(),nt=d[16].trim(),ft=d[22].trim(),pt=parseInt(d.substr(18,4).trim()),Gt=sG(pt,nt,ft);Ne[Gt]={resname:qe,chainname:nt,inscode:ft,resno:pt}}else if(p==="COMPND"){var bt=d.substr(10,70).trim(),hn=bt.indexOf(":"),ki=bt.substring(0,hn),Yt=void 0;ict.includes(ki)?(D=ki,Yt=bt.substring(hn+2)):Yt=bt,Yt=Yt.replace(/;$/,""),D==="MOL_ID"?(P={chainList:[],name:""},ve.push(P)):D==="MOLECULE"?(P.name&&(P.name+=" "),P.name+=Yt):D==="CHAIN"&&Array.prototype.push.apply(P.chainList,Yt.split(/\s*,\s*/))}else if(d.startsWith("TER")){var tt=he.getChainProxy(he.chainStore.count-1);Ae[tt.chainname]=tt.index,N=(z+=1).toString(),H=!0}else if(p==="REMARK"&&d.substr(7,3)==="350"){if(d.substr(11,12)==="BIOMOLECULE:"){var wt=d.substr(23).trim();/^(0|[1-9][0-9]*)$/.test(wt)&&(wt="BU"+wt),c=new Qi(wt),ee[wt]=c}else if(d.substr(13,5)==="BIOMT"){var zt=d.split(/\s+/),nn=parseInt(d[18])-1;nn===0&&(f=new lt,u.matrixList.push(f));var $t=f.elements;$t[0+nn]=parseFloat(zt[4]),$t[4+nn]=parseFloat(zt[5]),$t[8+nn]=parseFloat(zt[6]),$t[12+nn]=parseFloat(zt[7])}else if(d.substr(11,30)==="APPLY THE FOLLOWING TO CHAINS:"||d.substr(11,30)==="                   AND CHAINS:"){d.substr(11,5)==="APPLY"&&(u=c.addPart());for(var ln=d.substr(41,30).split(","),rn=0,_n=ln.length;rn<_n;++rn){var gr=ln[rn].trim();gr&&u.chainList.push(gr)}}}else if(p==="HEADER")he.id=d.substr(62,4);else if(p==="TITLE ")he.title+=(he.title?" ":"")+d.substr(10,70).trim();else if(p==="MODEL ")Ve=!0;else if(p==="ENDMDL"||d.trim()==="END"){if(Ve)continue;de&&!W&&(be.push(new Float32Array(s)),W=!0),He+=1,Ve=!0}else if(d.substr(0,5)==="MTRIX"){if(d[59]==="1")continue;c&&c.name==="NCS"||(c=new Qi("NCS"),ee.NCS=c,u=c.addPart());var Zt=d.split(/\s+/),Tn=parseInt(d[5])-1;Tn===0&&(f=new lt,u.matrixList.push(f));var fo=f.elements;fo[0+Tn]=parseFloat(Zt[2]),fo[4+Tn]=parseFloat(Zt[3]),fo[8+Tn]=parseFloat(Zt[4]),fo[12+Tn]=parseFloat(Zt[5])}else if(d.substr(0,5)==="ORIGX"){ge.origx||(ge.origx=new lt);var Lr=d.split(/\s+/),Xi=parseInt(d[5])-1,po=ge.origx.elements;po[0+Xi]=parseFloat(Lr[1]),po[4+Xi]=parseFloat(Lr[2]),po[8+Xi]=parseFloat(Lr[3]),po[12+Xi]=parseFloat(Lr[4])}else if(d.substr(0,5)==="SCALE"){ge.scale||(ge.scale=new lt);var ho=d.split(/\s+/),Qo=parseInt(d[5])-1,ai=ge.scale.elements;ai[0+Qo]=parseFloat(ho[1]),ai[4+Qo]=parseFloat(ho[2]),ai[8+Qo]=parseFloat(ho[3]),ai[12+Qo]=parseFloat(ho[4])}else if(p==="CRYST1"){var ps=parseFloat(d.substr(6,9)),hs=parseFloat(d.substr(15,9)),vr=parseFloat(d.substr(24,9)),mo=parseFloat(d.substr(33,7)),Ks=parseFloat(d.substr(40,7)),ms=parseFloat(d.substr(47,7)),Ia=d.substr(55,11).trim(),Bo=new Float32Array(9);Bo[0]=ps,Bo[4]=hs,Bo[8]=vr,ke.push(Bo),He===0&&(ge.a=ps,ge.b=hs,ge.c=vr,ge.alpha=mo,ge.beta=Ks,ge.gamma=ms,ge.spacegroup=Ia)}})(0,ut.length,ut)}),ae.finalize();var Je=ve.length;if(Je){he.eachChain(function(ut){ut.entityIndex=Je}),ve.forEach(function(ut,Et){var et=ut.chainList.map(function(ct){return Ae[ct]});he.entityList.push(new dl(he,Et,ut.name,"polymer",et))});var Ye=ve.length,yt=he.getResidueProxy(),mt={};he.eachChain(function(ut){ut.entityIndex===Je&&(yt.index=ut.residueOffset,mt[yt.resname]||(mt[yt.resname]=[]),mt[yt.resname].push(ut.index))}),Object.keys(mt).forEach(function(ut){var Et=mt[ut],et="non-polymer",ct=$e[ut]||ut;ZA.includes(ut)&&(ct="water",et="water"),he.entityList.push(new dl(he,Ye,ct,et,Et)),Ye+=1})}ge.a!==void 0?he.unitcell=new Np(ge):he.unitcell=void 0,(M.length||L.length)&&Woe(he,j),he.finalizeAtoms(),r||hT(he),JA(he),he.finalizeBonds(),M.length||L.length||pT(he),QA(he),Ze&&Ge.timeEnd("PdbParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(tf);Xt.add("pdb",Ob),Xt.add("pdb1",Ob),Xt.add("ent",Ob);var oct=/\s+/,lG=/'((?:(?!'\s).)*)'|"((?:(?!"\s).)*)"|(\S+)/g,xy=/"/g,wy=/^['"]+|['"]+$/g;function cG(e){return!e||e[0]!==e[e.length-1]||e[0]!=="'"&&e[0]!=='"'?e:e.substring(1,e.length-1)}function ra(e,t){Array.isArray(e[t])||Object.keys(e).forEach(function(n){e[n]=[e[n]]})}function $a(e){return e!=="?"}function z2(e,t){return $a(e)?e:t}function uG(e){switch(e.toLowerCase()){case"?":case"sing":return 1;case"doub":return 2;case"trip":return 3;case"quad":return 4}return 0}var ZR=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"cif"},t.prototype._parse=function(){Ge.time("CifParser._parse "+this.name);var r,i,o,a,s,l,c,u,f,d,p,h,g,v,m,y,_,b,x,w,S,A,C=this.structure,k=this.structureBuilder,O=this.firstModelOnly,T=this.asTrajectory,B=this.cAlphaOnly,R=C.frames,P={},D={},z={},N=!1,H=null,J=!1,ne=!1,oe=!1,Z=[],ce=null,se=null,Y=null,he=null,ae=[],ye=C.atomMap,re=C.atomStore;re.resize(this.streamer.data.length/100);var te,le=0,de=0;if(this.streamer.eachChunkOfLines(function(Ee){(function(ge,pe,ve){for(var $e=ge;$e<pe;++$e)if(o=ve[$e],((a=o.trim())||N||ne)&&a[0]!=="#")if(a.substring(0,5)==="data_")P.data=a.substring(5).trim();else if(a[0]===";")N?(ne?(ce===Z.length&&(ce=0),Z[ce].push(H),ce+=1):Y===!1?P[se]=H:P[se][Y]=H,N=!1,H=null):(N=!0,H=a.substring(1));else if(a==="loop_")ne=!0,oe=!0,Z.length=0,ae.length=0,ce=0;else if(a[0]==="_"){var Ne,Ae,Oe;if(ne&&!oe&&(ne=!1),ne)Ae=(Ne=a.split("."))[0].substring(1),Oe=Ne[1],Ne.length===1?(Oe=!1,P[Ae]||(P[Ae]=[]),Z.push(P[Ae])):(P[Ae]||(P[Ae]={}),P[Ae][Oe]?Ze&&Ge.warn(Ae,Oe,"already exists"):(P[Ae][Oe]=[],Z.push(P[Ae][Oe]),ae.push(Oe))),se=Ae,Y=Oe,he=!0;else{var j=a.match(lG),M=j[0],L=j[1];Ae=(Ne=M.split("."))[0].substring(1),Oe=Ne[1],Ne.length===1?(Oe=!1,P[Ae]=L):(P[Ae]||(P[Ae]={}),P[Ae][Oe]?Ze&&Ge.warn(Ae,Oe,"already exists"):P[Ae][Oe]=L),L||(J=!0),se=Ae,Y=Oe}}else if(N)H+=o;else if(ne){if(!a)continue;if(se==="atom_site"){var q=a.split(oct);he&&(s=ae.indexOf("auth_asym_id"),l=ae.indexOf("auth_seq_id"),c=ae.indexOf("label_seq_id"),u=ae.indexOf("label_atom_id"),f=ae.indexOf("label_comp_id"),d=ae.indexOf("label_asym_id"),p=ae.indexOf("label_entity_id"),h=ae.indexOf("label_alt_id"),b=ae.indexOf("Cartn_x"),x=ae.indexOf("Cartn_y"),w=ae.indexOf("Cartn_z"),v=ae.indexOf("id"),m=ae.indexOf("type_symbol"),g=ae.indexOf("group_PDB"),S=ae.indexOf("B_iso_or_equiv"),y=ae.indexOf("pdbx_PDB_model_num"),_=ae.indexOf("pdbx_PDB_ins_code"),A=ae.indexOf("occupancy"),he=!1,te=parseInt(q[y]),T&&(r=[],i=0));var me=parseInt(q[y]);if(te!==me&&(T&&(de===0&&R.push(new Float32Array(r)),r=new Float32Array(3*re.count),R.push(r),i=0),de+=1),te=me,O&&de>0)continue;var Te=q[u].replace(xy,"");if(B&&Te!=="CA")continue;var Pe=parseFloat(q[b]),Xe=parseFloat(q[x]),He=parseFloat(q[w]);if(T){var Ve=3*i;if(r[Ve+0]=Pe,r[Ve+1]=Xe,r[Ve+2]=He,i+=1,de>0)continue}var Je=q[f],Ye=parseInt(q[l!==-1?l:c]),yt=q[_];yt=yt==="?"?"":yt;var mt=q[s],ut=q[d],Et=q[g][0]==="H"?1:0,et=q[m],ct=parseFloat(q[S]),_t=parseFloat(q[A]),xe=q[h];if(xe=xe==="."?"":xe,re.growIfFull(),re.atomTypeId[le]=ye.add(Te,et),re.x[le]=Pe,re.y[le]=Xe,re.z[le]=He,re.serial[le]=parseInt(q[v]),re.bfactor[le]=isNaN(ct)?0:ct,re.occupancy[le]=isNaN(_t)?0:_t,re.altloc[le]=xe.charCodeAt(0),k.addAtom(de,mt,ut,Je,Ye,Et,void 0,yt),Ze){var ie=D[ut];ie!==void 0&&ie!==mt&&Ze&&Ge.warn(ie,mt)}D[ut]=mt;var ue=q[p];z[ue]||(z[ue]=new Set),z[ue].add(C.chainStore.count-1),le+=1}else{var E=a.match(lG),F=E.length;ce===Z.length&&(ce=0);for(var U=0;U<F;++U)Z[ce+U].push(E[U]);ce+=F}oe=!1}else if(a[0]==="'"&&a[a.length-1]==="'"){var X=a.substring(1,a.length-1);Y===!1?P[se]=X:P[se][Y]=X}else J?Y===!1?P[se]=a:P[se][Y]=a:Ze&&Ge.log("CifParser._parse: unknown state",a);else N=!1,ne=!1,J=!1,Z.length=0,ce=null,se=null,Y=null,he=null,ae.length=0})(0,Ee.length,Ee)}),P.chem_comp&&P.chem_comp_atom)(function(Ee,ge,pe){var ve,$e,Ne=ge.atomStore,Ae=ge.atomMap,Oe=Ee.chem_comp,j=Ee.chem_comp_atom,M=Ee.chem_comp_bond;Oe&&(Oe.name&&(ge.title=Oe.name.trim().replace(wy,"")),Oe.id&&(ge.id=Oe.id.trim().replace(wy,"")));var L={};if(j){var q,me,Te,Pe;for(ra(j,"comp_id"),$e=j.comp_id.length,ve=0;ve<$e;++ve)Ne.growIfFull(),q=j.atom_id[ve].replace(xy,""),me=j.type_symbol[ve],L[q]=ve,Ne.atomTypeId[ve]=Ae.add(q,me),Ne.x[ve]=j.model_Cartn_x[ve],Ne.y[ve]=j.model_Cartn_y[ve],Ne.z[ve]=j.model_Cartn_z[ve],Ne.serial[ve]=ve,Te=j.pdbx_component_comp_id[ve],Pe=j.pdbx_residue_numbering?j.pdbx_residue_numbering[ve]:1,pe.addAtom(0,"","",Te,Pe,!0);for(ve=0;ve<$e;++ve){var Xe=ve+$e;Ne.growIfFull(),q=j.atom_id[ve].replace(xy,""),me=j.type_symbol[ve],Ne.atomTypeId[Xe]=Ae.add(q,me),Ne.x[Xe]=j.pdbx_model_Cartn_x_ideal[ve],Ne.y[Xe]=j.pdbx_model_Cartn_y_ideal[ve],Ne.z[Xe]=j.pdbx_model_Cartn_z_ideal[ve],Ne.serial[Xe]=Xe,Te=j.pdbx_component_comp_id[ve],Pe=j.pdbx_residue_numbering?j.pdbx_residue_numbering[ve]:1,pe.addAtom(1,"","",Te,Pe,!0)}}if(j&&M){var He,Ve,Je;ra(M,"comp_id"),$e=M.comp_id.length;var Ye=j.comp_id.length,yt=ge.getAtomProxy(),mt=ge.getAtomProxy();for(ve=0;ve<$e;++ve)He=M.atom_id_1[ve].replace(xy,""),Ve=M.atom_id_2[ve].replace(xy,""),Je=uG(M.value_order[ve]),yt.index=L[He],mt.index=L[Ve],ge.bondStore.growIfFull(),ge.bondStore.addBond(yt,mt,Je),yt.index+=Ye,mt.index+=Ye,ge.bondStore.growIfFull(),ge.bondStore.addBond(yt,mt,Je)}})(P,C,k),k.finalize(),C.finalizeAtoms(),C.finalizeBonds(),_h(C);else if(P.atom_site_type_symbol&&P.atom_site_label&&P.atom_site_fract_x)(function(Ee,ge,pe){var ve=ge.atomStore,$e=ge.atomMap;Ee.data&&(ge.id=Ee.data,ge.name=Ee.data),ge.unitcell=new Np({a:parseFloat(Ee.cell_length_a),b:parseFloat(Ee.cell_length_b),c:parseFloat(Ee.cell_length_c),alpha:parseFloat(Ee.cell_angle_alpha),beta:parseFloat(Ee.cell_angle_beta),gamma:parseFloat(Ee.cell_angle_gamma),spacegroup:cG(Ee["symmetry_space_group_name_H-M"])});for(var Ne=new V,Ae=new V,Oe=Ee.atom_site_type_symbol.length,j=0;j<Oe;++j){ve.growIfFull();var M=Ee.atom_site_label[j],L=Ee.atom_site_type_symbol[j];ve.atomTypeId[j]=$e.add(M,L),Ne.set(Ee.atom_site_fract_x[j],Ee.atom_site_fract_y[j],Ee.atom_site_fract_z[j]),Ne.applyMatrix4(ge.unitcell.fracToCart),Ae.add(Ne),ve.x[j]=Ne.x,ve.y[j]=Ne.y,ve.z[j]=Ne.z,Ee.atom_site_occupancy&&(ve.occupancy[j]=parseFloat(Ee.atom_site_occupancy[j])),ve.serial[j]=j,pe.addAtom(0,"","","HET",1,!0)}Ae.divideScalar(Oe),ge.center=Ae,QA(ge);var q=new V,me=new V,Te=ge.biomolDict.SUPERCELL.partList[0].matrixList,Pe=Oe;function Xe(Ye){return $e.get(ve.atomTypeId[Ye]).covalent}for(var He=new lt,Ve=function(Ye){var yt=Xe(Ye);Ne.set(ve.x[Ye],ve.y[Ye],ve.z[Ye]),Te.forEach(function(mt){if(!He.equals(mt)){q.copy(Ne),q.applyMatrix4(mt);for(var ut=0;ut<Oe;++ut){me.set(ve.x[ut],ve.y[ut],ve.z[ut]);var Et=q.distanceToSquared(me),et=Xe(ut)+yt,ct=et+.3,_t=et-.5;if(Et<ct*ct&&Et>_t*_t)return ve.growIfFull(),ve.atomTypeId[Pe]=ve.atomTypeId[Ye],ve.x[Pe]=q.x,ve.y[Pe]=q.y,ve.z[Pe]=q.z,ve.occupancy[Pe]=ve.occupancy[Ye],ve.serial[Pe]=Pe,ve.altloc[Pe]="A".charCodeAt(0),pe.addAtom(0,"","","HET",1,!0),void(Pe+=1)}}})},Je=0;Je<Oe;++Je)Ve(Je)})(P,C,k),k.finalize(),C.finalizeAtoms(),JA(C),C.finalizeBonds();else{var _e=function(Ee,ge,pe){var ve,$e,Ne,Ae,Oe=[],j=[],M=Ee.struct_conf;if(M)for(ra(M,"id"),ve=0,$e=M.beg_auth_seq_id.length;ve<$e;++ve){var L=parseInt(M.pdbx_PDB_helix_class[ve]);Number.isNaN(L)||(Ne=M.pdbx_beg_PDB_ins_code[ve],Ae=M.pdbx_end_PDB_ins_code[ve],Oe.push([pe[M.beg_label_asym_id[ve]],parseInt(M.beg_auth_seq_id[ve]),z2(Ne,""),pe[M.end_label_asym_id[ve]],parseInt(M.end_auth_seq_id[ve]),z2(Ae,""),(tP[L]||tP[0]).charCodeAt(0)]))}var q=Ee.struct_sheet_range;if(q)for(ra(q,"id"),ve=0,$e=q.beg_auth_seq_id.length;ve<$e;++ve)Ne=q.pdbx_beg_PDB_ins_code[ve],Ae=q.pdbx_end_PDB_ins_code[ve],j.push([pe[q.beg_label_asym_id[ve]],parseInt(q.beg_auth_seq_id[ve]),z2(Ne,""),pe[q.end_label_asym_id[ve]],parseInt(q.end_auth_seq_id[ve]),z2(Ae,"")]);return!(!M&&!q)&&{helices:Oe,sheets:j}}(P,0,D);if(function(Ee,ge,pe){var ve={},$e=ge.biomolDict;if(Ee.pdbx_struct_oper_list){var Ne=Ee.pdbx_struct_oper_list;ra(Ne,"id"),Ne.id.forEach(function(Et,et){var ct=new lt,_t=ct.elements;_t[0]=parseFloat(Ne["matrix[1][1]"][et]),_t[1]=parseFloat(Ne["matrix[1][2]"][et]),_t[2]=parseFloat(Ne["matrix[1][3]"][et]),_t[4]=parseFloat(Ne["matrix[2][1]"][et]),_t[5]=parseFloat(Ne["matrix[2][2]"][et]),_t[6]=parseFloat(Ne["matrix[2][3]"][et]),_t[8]=parseFloat(Ne["matrix[3][1]"][et]),_t[9]=parseFloat(Ne["matrix[3][2]"][et]),_t[10]=parseFloat(Ne["matrix[3][3]"][et]),_t[3]=parseFloat(Ne["vector[1]"][et]),_t[7]=parseFloat(Ne["vector[2]"][et]),_t[11]=parseFloat(Ne["vector[3]"][et]),ct.transpose(),ve[Et]=ct})}if(Ee.pdbx_struct_assembly_gen){var Ae=Ee.pdbx_struct_assembly_gen;ra(Ae,"assembly_id");var Oe=function(Et){var et={};return Et.replace(/[()']/g,"").split(",").forEach(function(ct){if(ct.includes("-"))for(var _t=ct.split("-"),xe=parseInt(_t[0]),ie=parseInt(_t[1]);xe<=ie;++xe)et[xe]=ve[xe];else et[ct]=ve[ct]}),et};Ae.assembly_id.forEach(function(Et,et){var ct={},_t=Ae.oper_expression[et].replace(/['"]\(|['"]/g,"");if(_t.includes(")(")||_t.indexOf("(")>0){_t=_t.split("(");var xe=Oe(_t[0]),ie=Oe(_t[1]);Object.keys(xe).forEach(function(fe){Object.keys(ie).forEach(function(we){var Se=new lt;Se.multiplyMatrices(xe[fe],ie[we]),ct[fe+"x"+we]=Se})})}else ct=Oe(_t);var ue=[];for(var E in ct)ue.push(ct[E]);var F=Et;/^(0|[1-9][0-9]*)$/.test(F)&&(F="BU"+F);for(var U=Ae.asym_id_list[et].split(","),X=0,Q=U.length;X<Q;++X)U[X]=pe[U[X]];$e[F]===void 0&&($e[F]=new Qi(F)),$e[F].addPart(ue,U)})}if(Ee.struct_ncs_oper){var j=Ee.struct_ncs_oper;ra(j,"id");var M="NCS";$e.NCS=new Qi(M);var L=$e.NCS.addPart();j.id.forEach(function(Et,et){if(j.code[et]!=="given"){var ct=new lt,_t=ct.elements;_t[0]=parseFloat(j["matrix[1][1]"][et]),_t[1]=parseFloat(j["matrix[1][2]"][et]),_t[2]=parseFloat(j["matrix[1][3]"][et]),_t[4]=parseFloat(j["matrix[2][1]"][et]),_t[5]=parseFloat(j["matrix[2][2]"][et]),_t[6]=parseFloat(j["matrix[2][3]"][et]),_t[8]=parseFloat(j["matrix[3][1]"][et]),_t[9]=parseFloat(j["matrix[3][2]"][et]),_t[10]=parseFloat(j["matrix[3][3]"][et]),_t[3]=parseFloat(j["vector[1]"][et]),_t[7]=parseFloat(j["vector[2]"][et]),_t[11]=parseFloat(j["vector[3]"][et]),ct.transpose(),L.matrixList.push(ct)}}),L.matrixList.length===0&&delete $e.NCS}var q={};if(Ee.cell){var me=Ee.cell,Te=parseFloat(me.length_a),Pe=parseFloat(me.length_b),Xe=parseFloat(me.length_c),He=new Float32Array(9);He[0]=Te,He[4]=Pe,He[8]=Xe,ge.boxes.push(He),q.a=Te,q.b=Pe,q.c=Xe,q.alpha=parseFloat(me.angle_alpha),q.beta=parseFloat(me.angle_beta),q.gamma=parseFloat(me.angle_gamma)}Ee.symmetry&&(q.spacegroup=cG(Ee.symmetry["space_group_name_H-M"]));var Ve=new lt;if(Ee.database_PDB_matrix){var Je=Ee.database_PDB_matrix,Ye=Ve.elements;Ye[0]=parseFloat(Je["origx[1][1]"]),Ye[1]=parseFloat(Je["origx[1][2]"]),Ye[2]=parseFloat(Je["origx[1][3]"]),Ye[4]=parseFloat(Je["origx[2][1]"]),Ye[5]=parseFloat(Je["origx[2][2]"]),Ye[6]=parseFloat(Je["origx[2][3]"]),Ye[8]=parseFloat(Je["origx[3][1]"]),Ye[9]=parseFloat(Je["origx[3][2]"]),Ye[10]=parseFloat(Je["origx[3][3]"]),Ye[3]=parseFloat(Je["origx_vector[1]"]),Ye[7]=parseFloat(Je["origx_vector[2]"]),Ye[11]=parseFloat(Je["origx_vector[3]"]),Ve.transpose(),q.origx=Ve}var yt=new lt;if(Ee.atom_sites){var mt=Ee.atom_sites,ut=yt.elements;ut[0]=parseFloat(mt["fract_transf_matrix[1][1]"]),ut[1]=parseFloat(mt["fract_transf_matrix[1][2]"]),ut[2]=parseFloat(mt["fract_transf_matrix[1][3]"]),ut[4]=parseFloat(mt["fract_transf_matrix[2][1]"]),ut[5]=parseFloat(mt["fract_transf_matrix[2][2]"]),ut[6]=parseFloat(mt["fract_transf_matrix[2][3]"]),ut[8]=parseFloat(mt["fract_transf_matrix[3][1]"]),ut[9]=parseFloat(mt["fract_transf_matrix[3][2]"]),ut[10]=parseFloat(mt["fract_transf_matrix[3][3]"]),ut[3]=parseFloat(mt["fract_transf_vector[1]"]),ut[7]=parseFloat(mt["fract_transf_vector[2]"]),ut[11]=parseFloat(mt["fract_transf_vector[3]"]),yt.transpose(),q.scale=yt}q.a!==void 0?ge.unitcell=new Np(q):ge.unitcell=void 0}(P,C,D),function(Ee,ge,pe){var ve=Ee.struct_conn;if(ve){ra(ve,"id");for(var $e=/"/g,Ne=ge.getAtomProxy(),Ae=ge.getAtomProxy(),Oe={},j=0,M=ve.id.length;j<M;++j){var L=ve.conn_type_id[j];if(L!=="hydrog"&&L!=="mismat"&&L!=="saltbr"&&ve.ptnr1_symmetry[j]==="1_555"&&ve.ptnr2_symmetry[j]==="1_555"){var q=ve.pdbx_ptnr1_PDB_ins_code[j],me=ve.pdbx_ptnr1_label_alt_id[j],Te=ve.ptnr1_auth_seq_id[j]+($a(q)?"^"+q:"")+":"+pe[ve.ptnr1_label_asym_id[j]]+"."+ve.ptnr1_label_atom_id[j].replace($e,"")+($a(me)?"%"+me:""),Pe=Oe[Te];if(!Pe){var Xe=new Hn(Te);if(Xe.selection.error){Ze&&Ge.warn("invalid selection for connection",Te);continue}Pe=ge.getAtomIndices(Xe),Oe[Te]=Pe}var He=ve.pdbx_ptnr2_PDB_ins_code[j],Ve=ve.pdbx_ptnr2_label_alt_id[j],Je=ve.ptnr2_auth_seq_id[j]+($a(He)?"^"+He:"")+":"+pe[ve.ptnr2_label_asym_id[j]]+"."+ve.ptnr2_label_atom_id[j].replace($e,"")+($a(Ve)?"%"+Ve:""),Ye=Oe[Je];if(!Ye){var yt=new Hn(Je);if(yt.selection.error){Ze&&Ge.warn("invalid selection for connection",Je);continue}Ye=ge.getAtomIndices(yt),Oe[Je]=Ye}var mt=Pe.length,ut=Ye.length;if(mt>ut){var Et=mt;mt=ut,ut=Et;var et=Pe;Pe=Ye,Ye=et}if(mt!==0&&ut!==0)for(var ct=0;ct<ut;++ct)Ne.index=Pe[ct%mt],Ae.index=Ye[ct],Ne&&Ae?ge.bondStore.addBond(Ne,Ae,uG(ve.pdbx_value_order[j])):Ge.log("atoms for connection not found");else Ze&&Ge.warn("no atoms found for",Te,Je)}}}}(P,C,D),function(Ee,ge,pe){if(Ee.entity){ra(Ee.entity,"id");for(var ve=Ee.entity,$e=ve.id.length,Ne=0;Ne<$e;++Ne){var Ae=ve.pdbx_description[Ne],Oe=ve.type[Ne],j=Array.from(pe[ve.id[Ne]]);ge.entityList[Ne]=new dl(ge,Ne,Ae,Oe,j)}}}(P,C,z),P.struct&&P.struct.title&&(C.title=P.struct.title.trim().replace(wy,"")),P.entry&&P.entry.id&&(C.id=P.entry.id.trim().replace(wy,"")),P.pdbx_audit_revision_history){if(P.pdbx_audit_revision_history.revision_date){ra(P.pdbx_audit_revision_history,"revision_date");var be=P.pdbx_audit_revision_history.revision_date.filter($a);be.length&&(C.header.releaseDate=be[0])}if(P.pdbx_database_status.recvd_initial_deposition_date){ra(P.pdbx_database_status,"recvd_initial_deposition_date");var ke=P.pdbx_database_status.recvd_initial_deposition_date.filter($a);ke.length&&(C.header.depositionDate=ke[0])}}else if(P.database_PDB_rev){if(P.database_PDB_rev.date){ra(P.database_PDB_rev,"date");var W=P.database_PDB_rev.date.filter($a);W.length&&(C.header.releaseDate=W[0])}if(P.database_PDB_rev.date_original){ra(P.database_PDB_rev,"date_original");var ee=P.database_PDB_rev.date_original.filter($a);ee.length&&(C.header.depositionDate=ee[0])}}P.reflns&&P.reflns.d_resolution_high?$a(P.reflns.d_resolution_high)&&(C.header.resolution=parseFloat(P.reflns.d_resolution_high)):P.refine&&P.refine.ls_d_res_high&&$a(P.refine.ls_d_res_high)&&(C.header.resolution=parseFloat(P.refine.ls_d_res_high)),P.refine&&P.refine.ls_R_factor_R_free&&$a(P.refine.ls_R_factor_R_free)&&(C.header.rFree=parseFloat(P.refine.ls_R_factor_R_free)),P.refine&&P.refine.ls_R_factor_R_work&&$a(P.refine.ls_R_factor_R_work)&&(C.header.rWork=parseFloat(P.refine.ls_R_factor_R_work)),P.exptl&&P.exptl.method&&(ra(P.exptl,"method"),C.header.experimentalMethods=P.exptl.method.map(function(Ee){return Ee.replace(wy,"")})),k.finalize(),C.finalizeAtoms(),JA(C),C.finalizeBonds(),_e?Woe(C,_e):pT(C),QA(C),C.extraData.cif=P}Ze&&Ge.timeEnd("CifParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(tf);Xt.add("cif",ZR),Xt.add("mcif",ZR),Xt.add("mmcif",ZR);var act=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"gro"},t.prototype._parse=function(){Ze&&Ge.time("GroParser._parse "+this.name);var r,i,o=this.structure,a=this.structureBuilder,s=this.firstModelOnly,l=this.asTrajectory,c=this.cAlphaOnly,u=o.frames,f=o.boxes,d=this.streamer.peekLines(3);o.title=d[0].trim();var p,h,g,v,m=5+(d[2].length-d[2].lastIndexOf(".")-1),y=20+m,_=20+2*m,b=parseInt(d[1]),x=b+3,w=o.atomMap,S=o.atomStore;S.resize(b);var A=0,C=0,k=0;this.streamer.eachChunkOfLines(function(O){(function(T,B,R){for(var P=T;P<B;++P){var D=++k-1,z=R[P];if(z){if(D%x==0)l&&(r=new Float32Array(3*b),u.push(r),i=0);else if(D%x!=1)if(D%x==x-1){var N=z.trim().split(/\s+/),H=new Float32Array(9);if(H[0]=10*parseFloat(N[0]),H[4]=10*parseFloat(N[1]),H[8]=10*parseFloat(N[2]),f.push(H),s)return!0;C+=1}else{if(p=z.substr(10,5).trim(),c&&p!=="CA")continue;var J=10*parseFloat(z.substr(20,m)),ne=10*parseFloat(z.substr(y,m)),oe=10*parseFloat(z.substr(_,m));if(l){var Z=3*i;if(r[Z+0]=J,r[Z+1]=ne,r[Z+2]=oe,i+=1,D>x)continue}h=z.substr(5,5).trim(),g=parseInt(z.substr(0,5)),v=parseInt(z.substr(15,5)),S.growIfFull(),S.atomTypeId[A]=w.add(p),S.x[A]=J,S.y[A]=ne,S.z[A]=oe,S.serial[A]=v,a.addAtom(C,"","",h,g,0,"l"),A+=1}}}})(0,O.length,O)}),a.finalize(),o.finalizeAtoms(),hT(o),JA(o),o.finalizeBonds(),pT(o),Ze&&Ge.timeEnd("GroParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(tf);Xt.add("gro",act);var sct=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"].concat(["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"]);function zx(e,t,n){return t?new e(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function R$(e){return zx(DataView,e)}function JR(e){return zx(Int8Array,e)}function nP(e){return zx(Int32Array,e,4)}function Sy(e,t){var n=e.length/2;t||(t=new Int16Array(n));for(var r=0,i=0;r<n;++r,i+=2)t[r]=e[i]<<8^e[i+1]<<0;return t}function Wl(e,t){var n=e.length/4;t||(t=new Int32Array(n));for(var r=0,i=0;r<n;++r,i+=4)t[r]=e[i]<<24^e[i+1]<<16^e[i+2]<<8^e[i+3]<<0;return t}function rP(e,t,n){var r=e.length,i=1/t;n||(n=new Float32Array(r));for(var o=0;o<r;++o)n[o]=e[o]*i;return n}function U2(e,t){var n,r;if(!t){var i=0;for(n=0,r=e.length;n<r;n+=2)i+=e[n+1];t=new e.constructor(i)}var o=0;for(n=0,r=e.length;n<r;n+=2)for(var a=e[n],s=e[n+1],l=0;l<s;++l)t[o]=a,++o;return t}function sae(e,t){var n=e.length;t||(t=new e.constructor(n)),n&&(t[0]=e[0]);for(var r=1;r<n;++r)t[r]=e[r]+t[r-1];return t}function iP(e,t){var n,r,i=e instanceof Int8Array?127:32767,o=-i-1,a=e.length;if(!t){var s=0;for(n=0;n<a;++n)e[n]<i&&e[n]>o&&++s;t=new Int32Array(s)}for(n=0,r=0;n<a;){for(var l=0;e[n]===i||e[n]===o;)l+=e[n],++n;l+=e[n],++n,t[r]=l,++r}return t}function fG(e,t,n){return rP(iP(e,nP(n)),t,n)}function lct(e,t,n){var r=iP(e,nP(n));return function(i,o,a){return rP(sae(i,nP(a)),o,a)}(r,t,zx(Float32Array,r,4))}function lae(e){var t=0,n=new DataView(e.buffer);function r(l){for(var c={},u=0;u<l;u++)c[s()]=s();return c}function i(l){var c=e.subarray(t,t+l);return t+=l,c}function o(l){var c=e.subarray(t,t+l);t+=l;var u=65535;if(l>u){for(var f=[],d=0;d<c.length;d+=u)f.push(String.fromCharCode.apply(null,c.subarray(d,d+u)));return f.join("")}return String.fromCharCode.apply(null,c)}function a(l){for(var c=new Array(l),u=0;u<l;u++)c[u]=s();return c}function s(){var l,c,u=e[t];if(!(128&u))return t++,u;if((240&u)==128)return t++,r(c=15&u);if((240&u)==144)return t++,a(c=15&u);if((224&u)==160)return t++,o(c=31&u);if((224&u)==224)return l=n.getInt8(t),t++,l;switch(u){case 192:return t++,null;case 194:return t++,!1;case 195:return t++,!0;case 196:return c=n.getUint8(t+1),t+=2,i(c);case 197:return c=n.getUint16(t+1),t+=3,i(c);case 198:return c=n.getUint32(t+1),t+=5,i(c);case 202:return l=n.getFloat32(t+1),t+=5,l;case 203:return l=n.getFloat64(t+1),t+=9,l;case 204:return l=e[t+1],t+=2,l;case 205:return l=n.getUint16(t+1),t+=3,l;case 206:return l=n.getUint32(t+1),t+=5,l;case 208:return l=n.getInt8(t+1),t+=2,l;case 209:return l=n.getInt16(t+1),t+=3,l;case 210:return l=n.getInt32(t+1),t+=5,l;case 217:return c=n.getUint8(t+1),t+=2,o(c);case 218:return c=n.getUint16(t+1),t+=3,o(c);case 219:return c=n.getUint32(t+1),t+=5,o(c);case 220:return c=n.getUint16(t+1),t+=3,a(c);case 221:return c=n.getUint32(t+1),t+=5,a(c);case 222:return c=n.getUint16(t+1),t+=3,r(c);case 223:return c=n.getUint32(t+1),t+=5,r(c)}throw new Error("Unknown type 0x"+u.toString(16))}return s()}function cct(e,t,n,r){switch(e){case 1:return function(o,a){var s=o.length;a||(a=new Float32Array(s/4));for(var l=R$(a),c=R$(o),u=0,f=0,d=s/4;u<d;++u,f+=4)l.setFloat32(f,c.getFloat32(f),!0);return a}(t);case 2:return JR(t);case 3:return Sy(t);case 4:return Wl(t);case 5:return zx(Uint8Array,t);case 6:return U2(Wl(t),new Uint8Array(n));case 7:return U2(Wl(t));case 8:return sae(U2(Wl(t)),i);case 9:return function(o,a,s){return rP(U2(o,nP(s)),a,s)}(Wl(t),Wl(r)[0]);case 10:return lct(Sy(t),Wl(r)[0]);case 11:return rP(Sy(t),Wl(r)[0]);case 12:return fG(Sy(t),Wl(r)[0]);case 13:return fG(JR(t),Wl(r)[0]);case 14:return iP(Sy(t));case 15:return iP(JR(t))}var i}function uct(e,t){var n=(t=t||{}).ignoreFields,r={};return sct.forEach(function(i){var o,a,s,l,c,u=!!n&&n.indexOf(i)!==-1,f=e[i];u||f===void 0||(f instanceof Uint8Array?r[i]=cct.apply(null,(a=R$(o=f),s=a.getInt32(0),l=a.getInt32(4),c=o.subarray(8,12),[s,o=o.subarray(12),l,c])):r[i]=f)}),r}var fct={0:"i".charCodeAt(0),1:"s".charCodeAt(0),2:"h".charCodeAt(0),3:"e".charCodeAt(0),4:"g".charCodeAt(0),5:"b".charCodeAt(0),6:"t".charCodeAt(0),7:"l".charCodeAt(0),"-1":"".charCodeAt(0)},dct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"mmtf"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){var r,i,o,a,s;Ze&&Ge.time("MmtfParser._parse "+this.name);var l,c,u,f,d,p,h=this.structure,g=uct(lae(this.streamer.data));if(["depositionDate","releaseDate","resolution","rFree","rWork","experimentalMethods"].forEach(function(q){g[q]!==void 0&&(h.header[q]=g[q])}),h.id=g.structureId,h.title=g.title,h.atomStore.addField("formalCharge",1,"int8"),this.firstModelOnly||this.asTrajectory){for(d=1,u=0,r=0,i=f=g.chainsPerModel[0];r<i;++r)u+=g.groupsPerChain[r];for(c=0,r=0,i=u;r<i;++r)c+=(s=g.groupList[g.groupTypeList[r]]).atomNameList.length;l=g.numBonds,p=[f]}else l=g.numBonds,c=g.numAtoms,u=g.numGroups,f=g.numChains,d=g.numModels,p=g.chainsPerModel;if(l+=u,this.asTrajectory)for(r=0,i=g.numModels;r<i;++r){var v=new Float32Array(3*c),m=c*r;for(o=0;o<c;++o){var y=3*o,_=o+m;v[y]=g.xCoordList[_],v[y+1]=g.yCoordList[_],v[y+2]=g.zCoordList[_]}h.frames.push(v)}var b=new Uint32Array(l),x=new Uint32Array(l),w=new Uint8Array(l),S=new Uint32Array(c),A=new Int8Array(c),C=new Uint32Array(u),k=new Uint32Array(u),O=new Uint16Array(u),T=new Uint16Array(f),B=new Uint32Array(f),R=new Uint32Array(f),P=new Uint32Array(d),D=new Uint32Array(d),z=0;for(r=0,i=d;r<i;++r){var N=p[r];for(P[r]=z,D[r]=N,o=0;o<N;++o)T[o+z]=r;z+=N}var H=g.groupsPerChain,J=0;for(r=0,i=f;r<i;++r){var ne=H[r];for(B[r]=J,R[r]=ne,o=0;o<ne;++o)C[o+J]=r;J+=ne}var oe=0,Z=0;for(r=0,i=u;r<i;++r){var ce=(s=g.groupList[g.groupTypeList[r]]).atomNameList.length,se=s.formalChargeList,Y=s.bondAtomList,he=s.bondOrderList;for(o=0,a=he.length;o<a;++o)b[Z]=oe+Y[2*o],x[Z]=oe+Y[2*o+1],w[Z]=he[o],Z+=1;for(k[r]=oe,O[r]=ce,o=0;o<ce;++o)S[oe]=r,A[oe]=se[o],oe+=1}var ae=g.bondAtomList;if(ae)for(g.bondOrderList&&w.set(g.bondOrderList,Z),r=0,i=ae.length;r<i;r+=2){var ye=ae[r],re=ae[r+1];ye<c&&re<c&&(b[Z]=ye,x[Z]=re,Z+=1)}h.bondStore.length=w.length,h.bondStore.count=Z,h.bondStore.atomIndex1=b,h.bondStore.atomIndex2=x,h.bondStore.bondOrder=w,h.atomStore.length=c,h.atomStore.count=c,h.atomStore.residueIndex=S,h.atomStore.atomTypeId=new Uint16Array(c),h.atomStore.x=g.xCoordList.subarray(0,c),h.atomStore.y=g.yCoordList.subarray(0,c),h.atomStore.z=g.zCoordList.subarray(0,c),h.atomStore.serial=g.atomIdList.subarray(0,c),h.atomStore.bfactor=g.bFactorList.subarray(0,c),h.atomStore.altloc=g.altLocList.subarray(0,c),h.atomStore.occupancy=g.occupancyList.subarray(0,c),h.atomStore.formalCharge=A,h.residueStore.length=u,h.residueStore.count=u,h.residueStore.chainIndex=C,h.residueStore.residueTypeId=g.groupTypeList,h.residueStore.atomOffset=k,h.residueStore.atomCount=O,h.residueStore.resno=g.groupIdList.subarray(0,u),h.residueStore.sstruc=g.secStructList.subarray(0,u),h.residueStore.inscode=g.insCodeList.subarray(0,u),h.chainStore.length=f,h.chainStore.count=f,h.chainStore.entityIndex=new Uint16Array(f),h.chainStore.modelIndex=T,h.chainStore.residueOffset=B,h.chainStore.residueCount=R,h.chainStore.chainname=g.chainNameList.subarray(0,4*f),h.chainStore.chainid=g.chainIdList.subarray(0,4*f),h.modelStore.length=d,h.modelStore.count=d,h.modelStore.chainOffset=P,h.modelStore.chainCount=D;var te={};for(r=0,i=g.groupList.length;r<i;++r){var le=g.groupList[r],de=[];for(o=0,a=le.atomNameList.length;o<a;++o){var _e=le.elementList[o].toUpperCase(),be=le.atomNameList[o];de.push(h.atomMap.add(be,_e))}var ke=le.chemCompType.toUpperCase(),W=qot.includes(ke),ee=le.bondOrderList.length,Ee=new Array(ee),ge=new Array(ee);for(o=0;o<ee;++o)Ee[o]=le.bondAtomList[2*o],ge[o]=le.bondAtomList[2*o+1];var pe={atomIndices1:Ee,atomIndices2:ge,bondOrders:le.bondOrderList};te[r]=h.residueMap.add(le.groupName,de,W,ke,pe)}for(r=0,i=u;r<i;++r)h.residueStore.residueTypeId[r]=te[h.residueStore.residueTypeId[r]];for(r=0,i=h.atomStore.count;r<i;++r){var ve=h.atomStore.residueIndex[r],$e=h.residueMap.list[h.residueStore.residueTypeId[ve]],Ne=h.residueStore.atomOffset[ve];h.atomStore.atomTypeId[r]=$e.atomTypeIdList[r-Ne]}if(g.secStructList){var Ae=g.secStructList.length;for(r=0,i=h.residueStore.count;r<i;++r){var Oe=fct[h.residueStore.sstruc[r%Ae]];Oe!==void 0&&(h.residueStore.sstruc[r]=Oe)}}if(g.entityList&&g.entityList.forEach(function(q,me){h.entityList[me]=new dl(h,me,q.description,q.type,q.chainIndexList)}),g.bioAssemblyList&&g.bioAssemblyList.forEach(function(q,me){var Te=me+1,Pe=new Qi(""+Te);h.biomolDict["BU"+Te]=Pe;var Xe={};q.transformList.forEach(function(He){var Ve=new lt().fromArray(He.matrix).transpose(),Je=He.chainIndexList.map(function(yt){for(var mt="",ut=0;ut<4;++ut){var Et=g.chainNameList[4*yt+ut];if(!Et)break;mt+=String.fromCharCode(Et)}return mt}),Ye=Xe[Je.toString()];Ye?Ye.matrixList.push(Ve):Xe[Je.toString()]=Pe.addPart([Ve],Je)})}),g.ncsOperatorList){var j=new Qi("NCS"),M=j.addPart();g.ncsOperatorList.forEach(function(q){var me=new lt().fromArray(q).transpose();M.matrixList.push(me)}),M.matrixList.length>0&&(h.biomolDict.NCS=j)}var L=g.unitCell;L&&Array.isArray(L)&&L[0]?h.unitcell=new Np({a:L[0],b:L[1],c:L[2],alpha:L[3],beta:L[4],gamma:L[5],spacegroup:g.spaceGroup}):h.unitcell=void 0,I0(h,!0),O0(h,!0),h.finalizeAtoms(),h.finalizeBonds(),QA(h),Ze&&Ge.timeEnd("MmtfParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(tf);Xt.add("mmtf",dct);var QR=/\s+/,pct={1:1,2:2,3:3,am:1,ar:1,du:1,un:1,nc:0},hct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"mol2"},t.prototype._parse=function(){Ze&&Ge.time("Mol2Parser._parse "+this.name);var r,i,o=this.structure,a=this.structureBuilder,s=this.firstModelOnly,l=this.asTrajectory,c=o.frames,u=!1,f=o.atomMap,d=o.atomStore;d.resize(Math.round(this.streamer.data.length/60)),d.addField("partialCharge",1,"float32");var p=0,h=0,g=0,v=-1,m=0,y=0,_=o.getAtomProxy(),b=o.getAtomProxy();this.streamer.eachChunkOfLines(function(x){(function(w,S,A){for(var C=w;C<S;++C){var k=A[C].trim();if(k!==""&&k[0]!=="#"){if(k[0]==="@")k==="@<TRIPOS>MOLECULE"?(y=1,h=0,++v):k==="@<TRIPOS>ATOM"?(y=2,g=d.count,l&&(i=0,r=new Float32Array(3*m),c.push(r),v>0&&(u=!0))):y=k==="@<TRIPOS>BOND"?3:0;else if(y===1){if(h===0)o.title=k,o.id=k;else if(h===1){var O=k.split(QR);m=parseInt(O[0])}++h}else if(y===2){var T=k.split(QR);if(s&&v>0)continue;var B=parseFloat(T[2]),R=parseFloat(T[3]),P=parseFloat(T[4]);if(l){var D=3*i;if(r[D+0]=B,r[D+1]=R,r[D+2]=P,i+=1,u)continue}var z=T[0],N=T[1],H=T[5].split(".")[0],J=T[6]?parseInt(T[6]):1,ne=T[7]?T[7]:"",oe=T[8]?parseFloat(T[8]):0;d.growIfFull(),d.atomTypeId[p]=f.add(N,H),d.x[p]=B,d.y[p]=R,d.z[p]=P,d.serial[p]=z,d.partialCharge[p]=oe,a.addAtom(v,"","",ne,J,1),p+=1}else if(y===3){if(s&&v>0||l&&v>0)continue;var Z=k.split(QR);_.index=parseInt(Z[1])-1+g,b.index=parseInt(Z[2])-1+g;var ce=pct[Z[3]];o.bondStore.addBond(_,b,ce)}}}})(0,x.length,x)}),a.finalize(),o.finalizeAtoms(),hT(o),O0(o,!0),I0(o,!0),o.finalizeBonds(),_h(o),pT(o),Ze&&Ge.timeEnd("Mol2Parser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(tf);Xt.add("mol2",hct);var mct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"pdbqt"},Object.defineProperties(t.prototype,n),t}(Ob);Xt.add("pdbqt",mct);var gct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"pqr"},Object.defineProperties(t.prototype,n),t}(Ob);Xt.add("pqr",gct);var vct=/> +<(.+)>/,ek=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"sdf"},t.prototype._parse=function(){Ze&&Ge.time("SdfParser._parse "+this.name);var r=this.structure,i=this.structureBuilder,o=this.firstModelOnly,a=this.asTrajectory,s=this.streamer.peekLines(2);r.id=s[0].trim(),r.title=s[1].trim();var l,c,u=r.frames,f=!1,d=r.atomMap,p=r.atomStore;p.resize(Math.round(this.streamer.data.length/50)),p.addField("formalCharge",1,"int8");var h,g,v,m,y,_,b,x,w,S,A,C,k,O,T=r.getAtomProxy(),B=r.getAtomProxy(),R=0,P=0,D=0,z=0,N=[],H=!1,J={};r.extraData.sdf=N;var ne=!1,oe=!1,Z=!1,ce=[],se=[],Y=new Map;this.streamer.eachChunkOfLines(function(he){(function(ae,ye,re){for(var te=ae;te<ye;++te){var le=re[te];if(ne&&le&&(ce=le.substring(7).split(" "),se.length&&(ce=se.concat(ce),se=[]),ce[ce.length-1]==="-"))ce.pop(),se=ce;else{if(le.substr(0,4)==="$$$$")P=-1,++D,z=p.count,N.push(J),J={},H=!1,ne=!1;else if(P===3)(ne=le.indexOf(" V3000")>-1)?Y.clear():(g=parseInt(le.substr(0,3)),v=parseInt(le.substr(3,3)),b=(_=y=(m=4)+g)+v,a&&(c=0,l=new Float32Array(3*g),u.push(l),D>0&&(f=!0)));else if(ne&&ce[0]==="COUNTS")g=parseInt(ce[1]),a&&(c=0,l=new Float32Array(3*g),u.push(l),D>0&&(f=!0));else if(ne&&ce.length==2)ce[1]==="ATOM"?ce[0]==="BEGIN"?oe=!0:ce[0]==="END"&&(oe=!1):ce[1]==="BOND"&&(ce[0]==="BEGIN"?Z=!0:ce[0]==="END"&&(Z=!1));else if(oe||!ne&&P>=m&&P<y){if(o&&D>0)continue;var de=0;if(ne){if(x=parseFloat(ce[2]),w=parseFloat(ce[3]),S=parseFloat(ce[4]),C=ce[1],k=parseInt(ce[0]),Y.set(k,R),A=C+k,ce.length>6){var _e=ce.slice(6).find(function(pe){return pe.indexOf("CHG=")===0});_e&&(de=parseInt(_e.substring(4)))}}else x=parseFloat(le.substr(0,10)),w=parseFloat(le.substr(10,10)),S=parseFloat(le.substr(20,10)),C=le.substr(31,3).trim(),A=C+(R-z+1);if(a){var be=3*c;if(l[be+0]=x,l[be+1]=w,l[be+2]=S,c+=1,f)continue}p.growIfFull(),p.atomTypeId[R]=d.add(A,C),p.x[R]=x,p.y[R]=w,p.z[R]=S,p.serial[R]=ne?k:R,p.formalCharge[R]=de,i.addAtom(D,"","","HET",1,1),R+=1}else if(Z||!ne&&P>=_&&P<b){if(o&&D>0||a&&D>0)continue;ne?(T.index=Y.get(parseInt(ce[2])),B.index=Y.get(parseInt(ce[3])),O=parseInt(ce[1])):(T.index=parseInt(le.substr(0,3))-1+z,B.index=parseInt(le.substr(3,3))-1+z,O=parseInt(le.substr(6,3))),r.bondStore.addBond(T,B,O)}else if(le.substr(0,6)==="M  CHG")for(var ke=parseInt(le.substr(6,3)),W=0,ee=10;W<ke;++W,ee+=8){var Ee=parseInt(le.substr(ee,3))-1+z,ge=parseInt(le.substr(ee+4,3));p.formalCharge[Ee]=ge}else le.charAt(0)===">"&&(h=le.match(vct))?(H=h[1],J[H]=[]):H!==!1&&le&&J[H].push(le);++P}}})(0,he.length,he)}),i.finalize(),r.finalizeAtoms(),r.finalizeBonds(),_h(r),Ze&&Ge.timeEnd("SdfParser._parse "+this.name)},t.prototype._postProcess=function(){_h(this.structure)},Object.defineProperties(t.prototype,n),t}(tf);Xt.add("sdf",ek),Xt.add("sd",ek),Xt.add("mol",ek);function Cy(e,t,n){return parseInt(e.substr(t,n).trim())}var dG=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"prmtop"},t.prototype._parse=function(){Ze&&Ge.time("PrmtopParser._parse "+this.name);var r=this.structure,i=this.structureBuilder,o=r.atomMap,a=r.atomStore;a.addField("partialCharge",1,"float32"),a.addField("radius",1,"float32");var s,l,c,u,f,d=[],p={},h=["NATOM","NTYPES","NBONH","MBONA","NTHETH","MTHETA","NPHIH","MPHIA","NHPARM","NPARM","NNB","NRES","NBONA","NTHETA","NPHIA","NUMBND","NUMANG","NPTRA","NATYP","NPHB","IFPERT","NBPER","NGPER","NDPER","MBPER","MGPER","MDPER","IFBOX","NMXRS","IFCAP","NUMEXTRA","NCOPY"];h.forEach(function(k){p[k]=0});var g,v,m,y,_,b=new Uint8Array(0);this.streamer.eachChunkOfLines(function(k){(function(O,T,B){for(var R=O;R<T;++R){var P=B[R],D=P.trim();if(D&&!P.startsWith("%FORMAT")){if(P.startsWith("%FLAG")){var z=P.substr(5).trim();y=0,z==="TITLE"?m=0:z==="POINTERS"?m=1:z==="ATOM_NAME"?m=2:z==="CHARGE"?m=3:z==="MASS"?m=4:z==="RESIDUE_LABEL"?m=5:z==="RESIDUE_POINTER"?m=6:z==="BONDS_INC_HYDROGEN"?(_=0,m=7):z==="BONDS_WITHOUT_HYDROGEN"?(_=p.NBONH,m=8):m=z==="RADII"?9:void 0}else if(m===0)d.push(D);else if(m===1){for(var N=Math.min(y+10,32),H=0;y<N;++H,++y)p[h[y]]=parseInt(P.substr(8*H,8).trim());s=new Array(p.NATOM),l=new Float32Array(p.NATOM),c=new Float32Array(p.NATOM),a.resize(p.NATOM);var J=p.NBONH+p.MBONA;u=new Uint32Array(J),f=new Uint32Array(J),b=new Uint8Array(J),g=new Array(p.NRES),v=new Uint32Array(p.NRES)}else if(m===2)for(var ne=Math.min(y+20,p.NATOM),oe=0;y<ne;++oe,++y)s[y]=P.substr(4*oe,4).trim();else if(m===3)for(var Z=Math.min(y+5,p.NATOM),ce=0;y<Z;++ce,++y)l[y]=parseFloat(P.substr(16*ce,16))/18.2223;else if(m!==4){if(m===5)for(var se=Math.min(y+20,p.NRES),Y=0;y<se;++Y,++y)g[y]=P.substr(4*Y,4).trim();else if(m===6)for(var he=Math.min(y+10,p.NRES),ae=0;y<he;++ae,++y)v[y]=Cy(P,8*ae,8);else if(m===7)for(var ye=Math.min(y+10,3*p.NBONH),re=0;y<ye;++re,++y){var te=y%3;te===0&&(u[_]=Cy(P,8*re,8)/3),te===1&&(f[_]=Cy(P,8*re,8)/3,b[_]=1,++_)}else if(m===8)for(var le=Math.min(y+10,3*p.MBONA),de=0;y<le;++de,++y){var _e=y%3;_e===0&&(u[_]=Cy(P,8*de,8)/3),_e===1&&(f[_]=Cy(P,8*de,8)/3,b[_]=1,++_)}else if(m===9)for(var be=Math.min(y+5,p.NATOM),ke=0;y<be;++ke,++y)c[y]=parseFloat(P.substr(16*ke,16))}}}})(0,k.length,k)}),r.title=d.join(" ");for(var x=p.NATOM,w=0,S=g[0],A=1,C=0;C<x;++C)C+1===v[w+1]&&(++w,S=g[w],A=w+1),a.atomTypeId[C]=o.add(s[C]),a.serial[C]=C+1,i.addAtom(0,"","",S,A);a.partialCharge.set(l),a.radius.set(c),r.bondStore.length=b.length,r.bondStore.count=b.length,r.bondStore.atomIndex1=u,r.bondStore.atomIndex2=f,r.bondStore.bondOrder=b,i.finalize(),r.finalizeAtoms(),r.finalizeBonds(),O0(r,!0),I0(r,!0,!0),hT(r,!0),_h(r),Ze&&Ge.timeEnd("PrmtopParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(tf);Xt.add("prmtop",dG),Xt.add("parm7",dG);var V2=/\s+/,yct=/(^\*|REMARK)*/,bct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"psf"},t.prototype._parse=function(){Ze&&Ge.time("PsfParser._parse "+this.name);var r=this.structure,i=this.structureBuilder,o=r.atomMap,a=r.atomStore;a.addField("partialCharge",1,"float32");var s,l,c,u,f,d,p=[],h=0,g=0,v=0;this.streamer.eachChunkOfLines(function(m){(function(y,_,b){for(var x=y;x<_;++x){var w=b[x].trim();if(w){if(s===2){var S=w.split(V2),A=parseInt(S[0]),C=S[1],k=parseInt(S[2]),O=S[3],T=S[4],B=parseFloat(S[6]);C!==c&&(l=a_(g),++g),a.growIfFull(),a.atomTypeId[h]=o.add(T),a.serial[h]=A,a.partialCharge[h]=B,i.addAtom(0,l,l,O,k),h+=1,c=C}else if(s===3)for(var R=w.split(V2),P=0,D=R.length;P<D;P+=2)u[v]=parseInt(R[P])-1,f[v]=parseInt(R[P+1])-1,d[v]=1,v+=1;else if(s===1)p.push(w.replace(yct,"").trim());else if(s!==4){if(s!==5){if(s!==6)if(w.includes("!NATOM")){s=2;var z=parseInt(w.split(V2)[0]);a.resize(z)}else if(w.includes("!NBOND")){s=3;var N=parseInt(w.split(V2)[0]);u=new Uint32Array(N),f=new Uint32Array(N),d=new Uint8Array(N)}else w.includes("!NTITLE")?s=1:w.includes("!NTHETA")?s=4:w.includes("!NPHI")?s=5:w.includes("!NIMPHI")&&(s=6)}}}else s=void 0}})(0,m.length,m)}),r.title=p.join(" "),r.bondStore.length=d.length,r.bondStore.count=v,r.bondStore.atomIndex1=u,r.bondStore.atomIndex2=f,r.bondStore.bondOrder=d,i.finalize(),r.finalizeAtoms(),r.finalizeBonds(),O0(r,!0),I0(r,!0,!0),_h(r),Ze&&Ge.timeEnd("PsfParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(tf);Xt.add("psf",bct);var _ct=/\[ (.+) \]/,H2=/\s+/,xct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"top"},t.prototype._parse=function(){Ze&&Ge.time("TopParser._parse "+this.name);var r=this.structure,i=this.structureBuilder,o=r.atomMap,a=r.bondStore,s=r.atomStore;s.addField("partialCharge",1,"float32");var l,c,u=[],f={};this.streamer.eachChunkOfLines(function(x){(function(w,S,A){for(var C=w;C<S;++C){var k=A[C],O=k.trim();if(O&&O[0]!=="*"&&O[0]!==";"){if(O.startsWith("#include"))throw new Error("TopParser: #include statements not allowed");var T=k.match(_ct);if(T===null){var B=O.indexOf(";");if(B!==-1&&(O=O.substring(0,B).trim()),c===2){var R=O.split(H2)[0];f[R]=l}else if(c===3){var P=O.split(H2);l.atoms.push([parseInt(P[2]),P[3],P[4],parseFloat(P[6])])}else if(c===4){var D=O.split(H2);l.bonds.push([parseInt(D[0]),parseInt(D[1])])}else if(c===0)r.title=O;else if(c===1){var z=O.split(H2);u.push([z[0],parseInt(z[1])])}}else{var N=T[1];N==="moleculetype"?(c=2,l={atoms:[],bonds:[]}):c=N==="atoms"?3:N==="bonds"?4:N==="system"?0:N==="molecules"?1:void 0}}}})(0,x.length,x)});var d=0,p=0;u.forEach(function(x){var w=x[0],S=x[1],A=f[w];d+=S*A.atoms.length,p+=S*A.bonds.length}),s.resize(d),a.resize(p);var h,g=0,v=0,m=0,y=0,_=0,b=0;u.forEach(function(x){for(var w=x[0],S=x[1],A=f[w],C=a_(y),k=function(T){h=-1;var B=ZA.includes(w)?C:a_(m);A.atoms.forEach(function(R){var P=R[0],D=R[1],z=R[2],N=R[3];P!==h&&++v,s.atomTypeId[g]=o.add(z),s.serial[g]=g+1,s.partialCharge[g]=N,i.addAtom(0,C,B,D,v+1),++g,h=P}),A.bonds.forEach(function(R){a.atomIndex1[_]=b+R[0]-1,a.atomIndex2[_]=b+R[1]-1,++_}),++m,b+=A.atoms.length},O=0;O<S;++O)k();++y}),a.count=p,i.finalize(),r.finalizeAtoms(),r.finalizeBonds(),O0(r,!0),I0(r,!0,!0),_h(r),Ze&&Ge.timeEnd("TopParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(tf);Xt.add("top",xct);var gT=function(e){function t(r,i){e.call(this,r,i),this.frames=new WN(this.name,this.path)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"trajectory"},n.__objName.get=function(){return"frames"},Object.defineProperties(t.prototype,n),t}(To),wct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"dcd"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){Ze&&Ge.time("DcdParser._parse "+this.name);var r=E0(this.streamer.data),i=new DataView(r),o=this.frames,a=o.coordinates,s=o.boxes,l={},c=0,u=new Int32Array(r,0,23),f=u[0]!==i.getInt32(0);if(u[0]!==84)for(var d=r.byteLength,p=0;p<d;p+=4)i.setFloat32(p,i.getFloat32(p),!0);u[0]!==84&&Ge.error("dcd bad format, header block start"),String.fromCharCode(i.getUint8(4),i.getUint8(5),i.getUint8(6),i.getUint8(7))!=="CORD"&&Ge.error("dcd bad format, format string");var h=!1,g=!1,v=!1;u[22]!==0&&(h=!0,u[12]!==0&&(g=!0),u[13]===1&&(v=!0)),l.NSET=u[2],l.ISTART=u[3],l.NSAVC=u[4],l.NAMNF=u[10],l.DELTA=h?i.getFloat32(44,f):i.getFloat64(44,f),u[22]!==84&&Ge.error("dcd bad format, header block end"),c=c+84+8;var m=i.getInt32(c,f),y=c+1;if((m-4)%80!=0&&Ge.error("dcd bad format, title block start"),l.TITLE=HA(new Uint8Array(r,y,m)),i.getInt32(y+m+4-1,f)!==m&&Ge.error("dcd bad format, title block end"),c=c+m+8,i.getInt32(c,f)!==4&&Ge.error("dcd bad format, natom block start"),l.NATOM=i.getInt32(c+4,f),i.getInt32(c+8,f)!==4&&Ge.error("dcd bad format, natom block end"),c=c+4+8,l.NAMNF>0)Ge.error("dcd format with fixed atoms unsupported, aborting");else{for(var _=l.NATOM,b=4*_,x=0,w=l.NSET;x<w;++x){if(g){c+=4;var S=new Float32Array(9);S[0]=i.getFloat64(c,f),S[4]=i.getFloat64(c+16,f),S[8]=i.getFloat64(c+40,f),s.push(S),c+=48,c+=4}for(var A=new Float32Array(3*_),C=0;C<3;++C){i.getInt32(c,f)!==b&&Ge.error("dcd bad format, coord block start",x,C),c+=4;for(var k=new Float32Array(r,c,_),O=0;O<_;++O)A[3*O+C]=k[O];c+=b,i.getInt32(c,f)!==b&&Ge.error("dcd bad format, coord block end",x,C),c+=4}a.push(A),v&&(c+=4+i.getInt32(c,f)+4)}l.DELTA&&(o.deltaTime=20.45482949774598*l.DELTA),l.ISTART>=1&&(o.timeOffset=(l.ISTART-1)*o.deltaTime),Ze&&Ge.timeEnd("DcdParser._parse "+this.name)}},Object.defineProperties(t.prototype,n),t}(gT);function Va(e,t){if(e)throw new TypeError("Not a valid NetCDF v3.x file: "+t)}function cae(e){e.offset%4!=0&&e.skip(4-e.offset%4)}function k$(e){var t=e.readUint32(),n=e.readChars(t);return cae(e),n}Xt.add("dcd",wct);var vT=1,yT=2,bT=3,_T=4,xT=5,wT=6;function uae(e){switch(Number(e)){case vT:return"byte";case yT:return"char";case bT:return"short";case _T:return"int";case xT:return"float";case wT:return"double";default:return"undefined"}}function pG(e){switch(Number(e)){case vT:case yT:return 1;case bT:return 2;case _T:case xT:return 4;case wT:return 8;default:return-1}}function hG(e){switch(String(e)){case"byte":return vT;case"char":return yT;case"short":return bT;case"int":return _T;case"float":return xT;case"double":return wT;default:return-1}}function G2(e,t){if(e!==1){for(var n=new Array(e),r=0;r<e;r++)n[r]=t();return n}return t()}function L$(e,t,n){switch(t){case vT:return e.readBytes(n);case yT:return function(r){return r.charCodeAt(r.length-1)===0?r.substring(0,r.length-1):r}(e.readChars(n));case bT:return G2(n,e.readInt16.bind(e));case _T:return G2(n,e.readInt32.bind(e));case xT:return G2(n,e.readFloat32.bind(e));case wT:return G2(n,e.readFloat64.bind(e));default:return void Va(!0,"non valid type "+t)}}function Sct(e,t){var n={recordDimension:{length:e.readUint32()}};n.version=t;var r=function(o){var a,s,l,c=o.readUint32();if(c===0)return Va(o.readUint32()!==0,"wrong empty tag for list of dimensions"),[];Va(c!==10,"wrong tag for list of dimensions");var u=o.readUint32();a=new Array(u);for(var f=0;f<u;f++){var d=k$(o),p=o.readUint32();p===0&&(s=f,l=d),a[f]={name:d,size:p}}return{dimensions:a,recordId:s,recordName:l}}(e);n.recordDimension.id=r.recordId,n.recordDimension.name=r.recordName,n.dimensions=r.dimensions,n.globalAttributes=mG(e);var i=function(o,a,s){var l,c=o.readUint32(),u=0;if(c===0)return Va(o.readUint32()!==0,"wrong empty tag for list of variables"),[];Va(c!==11,"wrong tag for list of variables");var f=o.readUint32();l=new Array(f);for(var d=0;d<f;d++){for(var p=k$(o),h=o.readUint32(),g=new Array(h),v=0;v<h;v++)g[v]=o.readUint32();var m=mG(o),y=o.readUint32();Va(y<1&&y>6,"non valid type "+y);var _=o.readUint32(),b=o.readUint32();s===2&&(Va(b>0,"offsets larger than 4GB not supported"),b=o.readUint32()),g[0]===a&&(u+=_),l[d]={name:p,dimensions:g,attributes:m,type:uae(y),size:_,offset:b,record:g[0]===a}}return{variables:l,recordStep:u}}(e,r.recordId,t);return n.variables=i.variables,n.recordDimension.recordStep=i.recordStep,n}function mG(e){var t,n=e.readUint32();if(n===0)return Va(e.readUint32()!==0,"wrong empty tag for list of attributes"),[];Va(n!==12,"wrong tag for list of attributes");var r=e.readUint32();t=new Array(r);for(var i=0;i<r;i++){var o=k$(e),a=e.readUint32();Va(a<1||a>6,"non valid type "+a);var s=e.readUint32(),l=L$(e,a,s);cae(e),t[i]={name:o,type:uae(a),value:l}}return t}var Ib=function(e){var t=new cn(e);t.setBigEndian(),Va(t.readChars(3)!=="CDF","should start with CDF");var n=t.readByte();Va(n>2,"unknown version"),this.header=Sct(t,n),this.buffer=t},wm={version:{configurable:!0},recordDimension:{configurable:!0},dimensions:{configurable:!0},globalAttributes:{configurable:!0},variables:{configurable:!0}};wm.version.get=function(){return this.header.version===1?"classic format":"64-bit offset format"},wm.recordDimension.get=function(){return this.header.recordDimension},wm.dimensions.get=function(){return this.header.dimensions},wm.globalAttributes.get=function(){return this.header.globalAttributes},wm.variables.get=function(){return this.header.variables},Ib.prototype.hasDataVariable=function(e){return this.header.variables.findIndex(function(t){return t.name===e})!==-1},Ib.prototype.getDataVariable=function(e){var t;return Va((t=typeof e=="string"?this.header.variables.find(function(n){return n.name===e}):e)===void 0,"variable not found"),this.buffer.seek(t.offset),t.record?function(n,r,i){for(var o=hG(r.type),a=r.size?r.size/pG(o):1,s=i.length,l=new Array(s),c=i.recordStep,u=0;u<s;u++){var f=n.offset;l[u]=L$(n,o,a),n.seek(f+c)}return l}(this.buffer,t,this.header.recordDimension):function(n,r){for(var i=hG(r.type),o=r.size/pG(i),a=new Array(o),s=0;s<o;s++)a[s]=L$(n,i,1);return a}(this.buffer,t)},Object.defineProperties(Ib.prototype,wm);var tk=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"nctraj"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){Ze&&Ge.time("NctrajParser._parse "+this.name);var r=new Ib(this.streamer.data),i=this.frames,o=i.coordinates,a=i.boxes,s=i.times;r.getDataVariable("coordinates").forEach(function(l){o.push(new Float32Array(l))}),r.hasDataVariable("cell_lengths")&&r.getDataVariable("cell_lengths").forEach(function(l){a.push(new Float32Array(l))}),r.hasDataVariable("time")&&r.getDataVariable("time").forEach(function(l){s.push(l)}),s.length>=1&&(i.timeOffset=s[0]),s.length>=2&&(i.deltaTime=s[1]-s[0]),Ze&&Ge.timeEnd("NctrajParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(gT);Xt.add("nctraj",tk),Xt.add("ncdf",tk),Xt.add("nc",tk);var Cct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"trr"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){Ze&&Ge.time("TrrParser._parse "+this.name);for(var r=E0(this.streamer.data),i=new DataView(r),o=this.frames,a=o.coordinates,s=o.boxes,l=o.times,c=0;;){c+=8;var u=i.getInt32(c);c+=4,c+=u;var f=i.getInt32(c+8),d=i.getInt32(c+12),p=i.getInt32(c+16),h=i.getInt32(c+28),g=i.getInt32(c+32),v=i.getInt32(c+36),m=i.getInt32(c+40);c+=52;var y=f/9,_=3*m;if(y===8?l.push(i.getFloat64(c)):l.push(i.getFloat32(c)),c+=2*y,f){var b=new Float32Array(9);if(y===8)for(var x=0;x<9;++x)b[x]=10*i.getFloat64(c),c+=8;else for(var w=0;w<9;++w)b[w]=10*i.getFloat32(c),c+=4;s.push(b)}if(c+=d,c+=p,h){var S=void 0;if(y===8){S=new Float32Array(_);for(var A=0;A<_;++A)S[A]=10*i.getFloat64(c),c+=8}else{for(var C=new Uint32Array(r,c,_),k=0;k<_;++k){var O=C[k];C[k]=(255&O)<<24|(65280&O)<<8|O>>8&65280|O>>24&255}S=new Float32Array(r,c,_);for(var T=0;T<_;++T)S[T]*=10,c+=4}a.push(S)}if(c+=g,(c+=v)>=r.byteLength)break}l.length>=1&&(o.timeOffset=l[0]),l.length>=2&&(o.deltaTime=l[1]-l[0]),Ze&&Ge.timeEnd("TrrParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(gT);Xt.add("trr",Cct);var Sm=new Uint32Array([0,0,0,0,0,0,0,0,0,8,10,12,16,20,25,32,40,50,64,80,101,128,161,203,256,322,406,512,645,812,1024,1290,1625,2048,2580,3250,4096,5060,6501,8192,10321,13003,16384,20642,26007,32768,41285,52015,65536,82570,104031,131072,165140,208063,262144,330280,416127,524287,660561,832255,1048576,1321122,1664510,2097152,2642245,3329021,4194304,5284491,6658042,8388607,10568983,13316085,16777216]);function nk(e){for(var t=1,n=0;e>=t&&n<32;)n++,t<<=1;return n}var Ay=new Uint8Array(32);function Act(e,t){var n=1,r=0;Ay[0]=1;for(var i=0;i<e;i++){var o=void 0,a=0;for(o=0;o<n;o++)a+=Ay[o]*t[i],Ay[o]=255&a,a>>=8;for(;a!==0;)Ay[o++]=255&a,a>>=8;n=o}var s=1;for(n--;Ay[n]>=s;)r++,s*=2;return r+8*n}function gp(e,t,n,r){for(var i=(1<<n)-1,o=r[1],a=r[2],s=e[0],l=0;n>=8;)l|=(a=a<<8|t[s++])>>o<<n-8,n-=8;return n>0&&(o<n&&(o+=8,a=a<<8|t[s++]),l|=a>>(o-=n)&(1<<n)-1),l&=i,e[0]=s,e[1]=o,e[2]=a,l}var al=new Int32Array(32);function gG(e,t,n,r,i,o,a){var s=0;for(al[1]=0,al[2]=0,al[3]=0;r>8;)al[s++]=gp(e,t,8,a),r-=8;r>0&&(al[s++]=gp(e,t,r,a));for(var l=n-1;l>0;l--){for(var c=0,u=s-1;u>=0;u--){var f=(c=c<<8|al[u])/i[l]|0;al[u]=f,c-=f*i[l]}o[l]=c}o[0]=al[0]|al[1]<<8|al[2]<<16|al[3]<<24}var Pct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"xtc"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){Ze&&Ge.time("XtcParser._parse "+this.name);for(var r=E0(this.streamer.data),i=new DataView(r),o=this.frames,a=o.coordinates,s=o.boxes,l=o.times,c=new Int32Array(6),u=new Int32Array(3),f=new Int32Array(3),d=new Uint32Array(3),p=new Float32Array(3),h=new Float32Array(3),g=0,v=new Int32Array(3),m=new Uint32Array(v.buffer);;){var y=void 0,_=i.getInt32(g+4);g+=12;var b=3*_;l.push(i.getFloat32(g)),g+=4;for(var x=new Float32Array(9),w=0;w<9;++w)x[w]=10*i.getFloat32(g),g+=4;if(s.push(x),_<=9){y=new Float32Array(_);for(var S=0;S<_;++S)y[S]=i.getFloat32(g),g+=4}else{v[0]=v[1]=v[2]=0,u[0]=u[1]=u[2]=0,d[0]=d[1]=d[2]=0,f[0]=f[1]=f[2]=0,p[0]=p[1]=p[2]=0,h[0]=h[1]=h[2]=0,y=new Float32Array(b);var A=0,C=i.getInt32(g);g+=4;var k=i.getFloat32(g);g+=4,c[0]=i.getInt32(g),c[1]=i.getInt32(g+4),c[2]=i.getInt32(g+8),c[3]=i.getInt32(g+12),c[4]=i.getInt32(g+16),c[5]=i.getInt32(g+20),u[0]=c[3]-c[0]+1,u[1]=c[4]-c[1]+1,u[2]=c[5]-c[2]+1,g+=24;var O=void 0;(u[0]|u[1]|u[2])>16777215?(f[0]=nk(u[0]),f[1]=nk(u[1]),f[2]=nk(u[2]),O=0):O=Act(3,u);var T=i.getInt32(g);g+=4;var B=T-1,R=Sm[B=9>B?9:B]/2|0,P=Sm[T]/2|0;d[0]=d[1]=d[2]=Sm[T];var D=4*Math.ceil(i.getInt32(g)/4);g+=4;var z=1/k,N=0,H=0,J=new Uint8Array(r,g);for(p[0]=p[1]=p[2]=0;H<C;){O===0?(p[0]=gp(v,J,f[0],m),p[1]=gp(v,J,f[1],m),p[2]=gp(v,J,f[2],m)):gG(v,J,3,O,u,p,m),H++,p[0]+=c[0],p[1]+=c[1],p[2]+=c[2],h[0]=p[0],h[1]=p[1],h[2]=p[2];var ne=0;if(gp(v,J,1,m)===1&&(N=gp(v,J,5,m),N-=ne=N%3,ne--),N>0){p[0]=p[1]=p[2]=0;for(var oe=0;oe<N;oe+=3){if(gG(v,J,3,T,d,p,m),H++,p[0]+=h[0]-P,p[1]+=h[1]-P,p[2]+=h[2]-P,oe===0){var Z=p[0];p[0]=h[0],h[0]=Z,Z=p[1],p[1]=h[1],h[1]=Z,Z=p[2],p[2]=h[2],h[2]=Z,y[A++]=h[0]*z,y[A++]=h[1]*z,y[A++]=h[2]*z}else h[0]=p[0],h[1]=p[1],h[2]=p[2];y[A++]=p[0]*z,y[A++]=p[1]*z,y[A++]=p[2]*z}}else y[A++]=p[0]*z,y[A++]=p[1]*z,y[A++]=p[2]*z;if(T+=ne,ne<0?(P=R,R=T>9?Sm[T-1]/2|0:0):ne>0&&(R=P,P=Sm[T]/2|0),d[0]=d[1]=d[2]=Sm[T],d[0]===0||d[1]===0||d[2]===0)return void console.error("(xdrfile error) Undefined error.")}g+=D}for(var ce=0;ce<b;ce++)y[ce]*=10;if(a.push(y),g>=r.byteLength)break}l.length>=1&&(o.timeOffset=l[0]),l.length>=2&&(o.deltaTime=l[1]-l[0]),Ze&&Ge.timeEnd("XtcParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(gT);Xt.add("xtc",Pct);var Ux=function(e){function t(r,i){var o=i||{};e.call(this,r,o),this.volume=new $n(this.name,this.path),this.voxelSize=K(o.voxelSize,1)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"volume"},n.__objName.get=function(){return"volume"},t.prototype._afterParse=function(){this.volume.setMatrix(this.getMatrix()),e.prototype._afterParse.call(this)},t.prototype.getMatrix=function(){return new lt},Object.defineProperties(t.prototype,n),t}(To),Mct=/\s+/,Ect=/-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?/g,vG=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"cube"},t.prototype._parse=function(){Ze&&Ge.time("CubeParser._parse "+this.name);var r=this.volume,i=this.streamer.peekLines(6),o={},a=.529177210859*this.voxelSize;function s(d,p){var h=i[d].trim().split(Mct)[p];return parseFloat(h)}o.atomCount=Math.abs(s(2,0)),o.originX=.529177210859*s(2,1),o.originY=.529177210859*s(2,2),o.originZ=.529177210859*s(2,3),o.NVX=s(3,0),o.NVY=s(4,0),o.NVZ=s(5,0),o.basisX=new V(s(3,1),s(3,2),s(3,3)).multiplyScalar(a),o.basisY=new V(s(4,1),s(4,2),s(4,3)).multiplyScalar(a),o.basisZ=new V(s(5,1),s(5,2),s(5,3)).multiplyScalar(a);var l=new Float32Array(o.NVX*o.NVY*o.NVZ),c=0,u=0,f=s(2,0)>0?0:1;this.streamer.eachChunkOfLines(function(d){(function(p,h,g){for(var v=p;v<h;++v){var m=g[v].trim();if(m!==""&&u>=o.atomCount+6+f)for(var y=m.match(Ect),_=0,b=y.length;_<b;++_)l[c]=parseFloat(y[_]),++c;++u}})(0,d.length,d)}),r.header=o,r.setData(l,o.NVZ,o.NVY,o.NVX),Ze&&Ge.timeEnd("CubeParser._parse "+this.name)},t.prototype.getMatrix=function(){var r=this.volume.header,i=new lt;return i.multiply(new lt().makeTranslation(r.originX,r.originY,r.originZ)),i.multiply(new lt().makeBasis(r.basisZ,r.basisY,r.basisX)),i},Object.defineProperties(t.prototype,n),t}(Ux);Xt.add("cub",vG),Xt.add("cube",vG);var yG=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"dsn6"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){Ze&&Ge.time("Dsn6Parser._parse "+this.name);var r,i,o=this.volume,a={},s=E0(this.streamer.data),l=new Int16Array(s),c=new Uint8Array(s),u=String.fromCharCode.apply(null,c.subarray(0,512));if(u.startsWith(":-)"))a.xStart=parseInt(u.substr(10,5)),a.yStart=parseInt(u.substr(15,5)),a.zStart=parseInt(u.substr(20,5)),a.xExtent=parseInt(u.substr(32,5)),a.yExtent=parseInt(u.substr(38,5)),a.zExtent=parseInt(u.substr(42,5)),a.xRate=parseInt(u.substr(52,5)),a.yRate=parseInt(u.substr(58,5)),a.zRate=parseInt(u.substr(62,5)),a.xlen=parseFloat(u.substr(73,10))*this.voxelSize,a.ylen=parseFloat(u.substr(83,10))*this.voxelSize,a.zlen=parseFloat(u.substr(93,10))*this.voxelSize,a.alpha=parseFloat(u.substr(103,10)),a.beta=parseFloat(u.substr(113,10)),a.gamma=parseFloat(u.substr(123,10)),r=parseFloat(u.substr(138,12))/100,i=parseInt(u.substr(155,8)),a.sigma=100*parseFloat(u.substr(170,12));else{if(l[18]!==100)for(var f=0,d=l.length;f<d;++f){var p=l[f];l[f]=(255&p)<<8|p>>8&255}a.xStart=l[0],a.yStart=l[1],a.zStart=l[2],a.xExtent=l[3],a.yExtent=l[4],a.zExtent=l[5],a.xRate=l[6],a.yRate=l[7],a.zRate=l[8];var h=1/l[17],g=h*this.voxelSize;a.xlen=l[9]*g,a.ylen=l[10]*g,a.zlen=l[11]*g,a.alpha=l[12]*h,a.beta=l[13]*h,a.gamma=l[14]*h,r=l[15]/100,i=l[16],a.gamma=l[14]*h}o.header=a,Ze&&Ge.log(a,r,i);for(var v=new Float32Array(a.xExtent*a.yExtent*a.zExtent),m=512,y=Math.ceil(a.xExtent/8),_=Math.ceil(a.yExtent/8),b=Math.ceil(a.zExtent/8),x=0;x<b;++x)for(var w=0;w<_;++w)for(var S=0;S<y;++S)for(var A=0;A<8;++A)for(var C=8*x+A,k=0;k<8;++k)for(var O=8*w+k,T=0;T<8;++T){var B=8*S+T;if(!(B<a.xExtent&&O<a.yExtent&&C<a.zExtent)){m+=8-T;break}v[(B*a.yExtent+O)*a.zExtent+C]=(c[m]-i)/r,++m}o.setData(v,a.zExtent,a.yExtent,a.xExtent),a.sigma&&o.setStats(void 0,void 0,void 0,a.sigma),Ze&&Ge.timeEnd("Dsn6Parser._parse "+this.name)},t.prototype.getMatrix=function(){var r=this.volume.header,i=[r.xlen,0,0],o=[r.ylen*Math.cos(Math.PI/180*r.gamma),r.ylen*Math.sin(Math.PI/180*r.gamma),0],a=[r.zlen*Math.cos(Math.PI/180*r.beta),r.zlen*(Math.cos(Math.PI/180*r.alpha)-Math.cos(Math.PI/180*r.gamma)*Math.cos(Math.PI/180*r.beta))/Math.sin(Math.PI/180*r.gamma),0];a[2]=Math.sqrt(r.zlen*r.zlen*Math.sin(Math.PI/180*r.beta)*Math.sin(Math.PI/180*r.beta)-a[1]*a[1]);var s=[[],i,o,a],l=[0,r.xRate,r.yRate,r.zRate],c=[0,1,2,3],u=new lt;return u.set(s[c[1]][0]/l[c[1]],s[c[2]][0]/l[c[2]],s[c[3]][0]/l[c[3]],0,s[c[1]][1]/l[c[1]],s[c[2]][1]/l[c[2]],s[c[3]][1]/l[c[3]],0,s[c[1]][2]/l[c[1]],s[c[2]][2]/l[c[2]],s[c[3]][2]/l[c[3]],0,0,0,0,1),u.multiply(new lt().makeRotationY(jr(90))),u.multiply(new lt().makeTranslation(-r.zStart,r.yStart,r.xStart)),u.multiply(new lt().makeScale(-1,1,1)),u},Object.defineProperties(t.prototype,n),t}(Ux);Xt.add("dsn6",yG),Xt.add("brix",yG);var W2=/\s+/,fae=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"dx"},t.prototype._parse=function(){Ze&&Ge.time("DxParser._parse "+this.name);var r=this.volume,i=this.streamer.peekLines(30),o=this.parseHeaderLines(i),a=this.volume.header,s=o.dataLineStart,l=a.nx*a.ny*a.nz,c=new Float32Array(l),u=0,f=0;this.streamer.eachChunkOfLines(function(d){(function(p,h,g){for(var v=p;v<h;++v){if(u<l&&f>s){var m=g[v].trim();if(m!=="")for(var y=m.split(W2),_=0,b=y.length;_<b;++_)c[u]=parseFloat(y[_]),++u}++f}})(0,d.length,d)}),r.setData(c,a.nz,a.ny,a.nx),Ze&&Ge.timeEnd("DxParser._parse "+this.name)},t.prototype.parseHeaderLines=function(r){for(var i={},o=r.length,a=0,s=0,l=0,c=0;c<o;++c){var u=void 0,f=r[c];if(f.startsWith("object 1"))u=f.split(W2),i.nx=parseInt(u[5]),i.ny=parseInt(u[6]),i.nz=parseInt(u[7]);else if(f.startsWith("origin"))u=f.split(W2),i.xmin=parseFloat(u[1]),i.ymin=parseFloat(u[2]),i.zmin=parseFloat(u[3]);else if(f.startsWith("delta"))u=f.split(W2),l===0?i.hx=parseFloat(u[1])*this.voxelSize:l===1?i.hy=parseFloat(u[2])*this.voxelSize:l===2&&(i.hz=parseFloat(u[3])*this.voxelSize),l+=1;else if(f.startsWith("object 3")){a=c,s+=f.length+1;break}s+=f.length+1}return this.volume.header=i,{dataLineStart:a,headerByteCount:s}},t.prototype.getMatrix=function(){var r=this.volume.header,i=new lt;return i.multiply(new lt().makeRotationY(jr(90))),i.multiply(new lt().makeTranslation(-r.zmin,r.ymin,r.xmin)),i.multiply(new lt().makeScale(-r.hz,r.hy,r.hx)),i},Object.defineProperties(t.prototype,n),t}(Ux);Xt.add("dx",fae);var Tct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"dxbin"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){Ze&&Ge.time("DxbinParser._parse "+this.name);for(var r=E0(this.streamer.data),i=function(d,p,h){p===void 0&&(p=10485760),h===void 0&&(h=`
`);for(var g="",v=[],m=0;m<d.length;m+=p){var y=HA(d.subarray(m,m+p)),_=y.lastIndexOf(h);if(_===-1)g+=y;else{var b=g+y.substr(0,_);v=v.concat(b.split(h)),g=_===y.length-h.length?"":y.substr(_+h.length)}}return g!==""&&v.push(g),v}(new Uint8Array(r,0,1e3)),o=this.parseHeaderLines(i),a=this.volume.header,s=o.headerByteCount,l=a.nx*a.ny*a.nz,c=new DataView(r),u=new Float32Array(l),f=0;f<l;++f)u[f]=c.getFloat64(8*f+s,!0);this.volume.setData(u,a.nz,a.ny,a.nx),Ze&&Ge.timeEnd("DxbinParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(fae);Xt.add("dxbin",Tct);var rk=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"mrc"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){Ze&&Ge.time("MrcParser._parse "+this.name);var r,i=this.volume,o={},a=E0(this.streamer.data),s=new Int32Array(a,0,56),l=new Float32Array(a,0,56),c=new DataView(a);if(o.MAP=String.fromCharCode(c.getUint8(208),c.getUint8(209),c.getUint8(210),c.getUint8(211)),o.MACHST=[c.getUint8(212),c.getUint8(213)],o.MACHST[0]===17&&o.MACHST[1]===17)for(var u=a.byteLength,f=0;f<u;f+=4)c.setFloat32(f,c.getFloat32(f),!0);if(o.NX=s[0],o.NY=s[1],o.NZ=s[2],o.MODE=s[3],o.NXSTART=s[4],o.NYSTART=s[5],o.NZSTART=s[6],o.MX=s[7],o.MY=s[8],o.MZ=s[9],o.xlen=l[10]*this.voxelSize,o.ylen=l[11]*this.voxelSize,o.zlen=l[12]*this.voxelSize,o.alpha=l[13],o.beta=l[14],o.gamma=l[15],o.MAPC=s[16],o.MAPR=s[17],o.MAPS=s[18],o.DMIN=l[19],o.DMAX=l[20],o.DMEAN=l[21],o.ISPG=s[22],o.NSYMBT=s[23],o.LSKFLG=s[24],o.originX=l[49],o.originY=l[50],o.originZ=l[51],o.ARMS=l[54],i.header=o,o.MODE===2)r=new Float32Array(a,1024+o.NSYMBT,o.NX*o.NY*o.NZ);else if(o.MODE===0){if(r=new Float32Array(new Int8Array(a,1024+o.NSYMBT,o.NX*o.NY*o.NZ)),s[39]===-128&&s[40]===127)for(var d=(o.DMAX-o.DMIN)/255,p=.5*(o.DMIN+o.DMAX+d),h=0,g=r.length;h<g;++h)r[h]=d*r[h]+p}else Ge.error("MrcParser unknown mode",o.MODE);i.setData(r,o.NX,o.NY,o.NZ),o.ARMS!==0&&i.setStats(o.DMIN,o.DMAX,o.DMEAN,o.ARMS),Ze&&Ge.timeEnd("MrcParser._parse "+this.name)},t.prototype.getMatrix=function(){var r=this.volume.header,i=[r.xlen,0,0],o=[r.ylen*Math.cos(Math.PI/180*r.gamma),r.ylen*Math.sin(Math.PI/180*r.gamma),0],a=[r.zlen*Math.cos(Math.PI/180*r.beta),r.zlen*(Math.cos(Math.PI/180*r.alpha)-Math.cos(Math.PI/180*r.gamma)*Math.cos(Math.PI/180*r.beta))/Math.sin(Math.PI/180*r.gamma),0];a[2]=Math.sqrt(r.zlen*r.zlen*Math.sin(Math.PI/180*r.beta)*Math.sin(Math.PI/180*r.beta)-a[1]*a[1]);var s=[[],i,o,a],l=[0,r.MX,r.MY,r.MZ],c=[0,r.MAPC,r.MAPR,r.MAPS],u=new lt;return u.set(s[c[1]][0]/l[c[1]],s[c[2]][0]/l[c[2]],s[c[3]][0]/l[c[3]],0,s[c[1]][1]/l[c[1]],s[c[2]][1]/l[c[2]],s[c[3]][1]/l[c[3]],0,s[c[1]][2]/l[c[1]],s[c[2]][2]/l[c[2]],s[c[3]][2]/l[c[3]],0,0,0,0,1),u.setPosition(new V(r.originX,r.originY,r.originZ)),u.multiply(new lt().makeTranslation(r.NXSTART,r.NYSTART,r.NZSTART)),u},Object.defineProperties(t.prototype,n),t}(Ux);Xt.add("mrc",rk),Xt.add("ccp4",rk),Xt.add("map",rk);var Oct=/\s+/;function ik(e){return e.trim().split(Oct).map(parseFloat)}var bG=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"xplor"},t.prototype._parse=function(){Ze&&Ge.time("XplorParser._parse "+this.name);var r,i=this.volume,o=this.streamer.peekLines(8),a={},s=(r=o[2].startsWith("REMARKS")?parseInt(o[1].substring(0,8))+2:5)+3,l=ik(o[r]);a.NA=l[0],a.AMIN=l[1],a.AMAX=l[2],a.NB=l[3],a.BMIN=l[4],a.BMAX=l[5],a.NC=l[6],a.CMIN=l[7],a.CMAX=l[8];var c=ik(o[r+1]);a.a=c[0]*this.voxelSize,a.b=c[1]*this.voxelSize,a.c=c[2]*this.voxelSize,a.alpha=c[3],a.beta=c[4],a.gamma=c[5];var u=a.AMAX-a.AMIN+1,f=a.BMAX-a.BMIN+1,d=a.CMAX-a.CMIN+1,p=u*f*d,h=new Float32Array(p),g=Math.ceil(1+u*f/6),v=0,m=0;this.streamer.eachChunkOfLines(function(y){(function(_,b,x){for(var w=_;w<b;++w){var S=x[w];if(m>=s&&(m-s)%g!=0&&v<p)for(var A=0;A<6;++A){var C=parseFloat(S.substr(12*A,12));if(isNaN(C))break;h[v++]=C}else if(v===p){var k=S.trim();if(k&&k!=="-9999"){var O=ik(S);a.RAVE=O[0],a.RSIGMA=O[1]}}++m}})(0,y.length,y)}),i.header=a,i.setData(h,u,f,d),a.RAVE!==0&&a.RSIGMA!==1&&i.setStats(void 0,void 0,a.RAVE,a.RSIGMA),Ze&&Ge.timeEnd("XplorParser._parse "+this.name)},t.prototype.getMatrix=function(){var r=this.volume.header,i=[r.a,0,0],o=[r.b*Math.cos(Math.PI/180*r.gamma),r.b*Math.sin(Math.PI/180*r.gamma),0],a=[r.c*Math.cos(Math.PI/180*r.beta),r.c*(Math.cos(Math.PI/180*r.alpha)-Math.cos(Math.PI/180*r.gamma)*Math.cos(Math.PI/180*r.beta))/Math.sin(Math.PI/180*r.gamma),0];a[2]=Math.sqrt(r.c*r.c*Math.sin(Math.PI/180*r.beta)*Math.sin(Math.PI/180*r.beta)-a[1]*a[1]);var s=[[],i,o,a],l=[0,r.NA,r.NB,r.NC],c=[0,1,2,3],u=new lt;return u.set(s[c[1]][0]/l[c[1]],s[c[2]][0]/l[c[2]],s[c[3]][0]/l[c[3]],0,s[c[1]][1]/l[c[1]],s[c[2]][1]/l[c[2]],s[c[3]][1]/l[c[3]],0,s[c[1]][2]/l[c[1]],s[c[2]][2]/l[c[2]],s[c[3]][2]/l[c[3]],0,0,0,0,1),u.multiply(new lt().makeTranslation(r.AMIN,r.BMIN,r.CMIN)),u},Object.defineProperties(t.prototype,n),t}(Ux);function wr(e,t,n){var r,i,o;e/=360,t/=100,n/=100;var a=Math.floor(6*e),s=6*e-a,l=n*(1-t),c=n*(1-s*t),u=n*(1-(1-s)*t);switch(a%6){case 0:r=n,i=u,o=l;break;case 1:r=c,i=n,o=l;break;case 2:r=l,i=n,o=u;break;case 3:r=l,i=c,o=n;break;case 4:r=u,i=l,o=n;break;case 5:r=n,i=l,o=c}return[r,i,o]}Xt.add("xplor",bG),Xt.add("cns",bG);var $$={red:wr(0,100,100),orange:wr(20,100,100),gold:wr(40,100,100),yellow:wr(60,100,100),lime:wr(80,100,100),green:wr(120,80,100),sea:wr(150,100,100),cyan:wr(180,100,85),sky:wr(210,75,95),blue:wr(240,70,100),purple:wr(275,75,100),magenta:wr(300,95,100),hotpink:wr(335,100,100),pink:wr(350,55,100),peach:wr(25,75,100),lilac:wr(275,55,100),pinktint:wr(340,30,100),peachtint:wr(25,50,100),yellowtint:wr(60,50,100),greentint:wr(135,40,100),bluetint:wr(220,40,100),lilactint:wr(275,35,100),white:wr(0,0,100),gray:wr(0,0,50),brown:wr(20,45,75),deadwhite:[1,1,1],deadblack:[0,0,0],invisible:[0,0,0]},Ict=/[\s,]+/,dae=/[^{}\s]*{[^{}]+}|[^{}\s]+/g,D$=/^{+|}+$/g,Rct=/^['"]+|['"]+$/g,pae=/\s*=\s*/g;function q2(e){for(var t,n,r,i=[],o=(e=e.replace(pae,"=")).match(dae),a=1;a<o.length;++a){var s=o[a];if(s[0]==="{")t=s.substring(1,s.length-1);else{var l=s.split("=");l.length===2&&(l[0]==="color"?n=$$[l[1]]:l[0]==="width"?r=parseInt(l[1]):l[0]==="master"&&i.push(l[1].replace(D$,"")))}}return{listName:t,listColor:n,listMasters:i,listWidth:r}}function X2(e){for(var t,n,r,i=(e=e.trim()).indexOf("{"),o=e.indexOf("}"),a=e.substr(o+1).split(Ict),s=e.substr(i+1,o-1),l=[parseFloat(a[a.length-3]),parseFloat(a[a.length-2]),parseFloat(a[a.length-1])],c=!1,u=!1,f=4;f<=a.length;f++){var d=a[a.length-f];d in $$&&(t=$$[a[a.length-f]]),d.startsWith("width")&&(n=parseInt(d.substring(5))),d.startsWith("r=")&&(r=parseFloat(d.split("=")[1])),d.startsWith("P")&&(c=!0),d.startsWith("X")&&(u=!0)}return{label:s,position:l,color:t,radius:r,width:n,isLineBreak:c,isTriangleBreak:u}}function ok(e){var t=e.indexOf("{"),n=e.indexOf("}");return e.substring(t!==-1?t+1:0,n!==-1?n:void 0).trim()}function kct(e){var t=e.indexOf("}");return t===-1?void 0:e.substr(t+1).trim()}function ak(e){for(var t="",n=[],r={},i=(e=e.replace(pae,"=")).match(dae),o=1;o<i.length;++o){var a=i[o];if(a[0]==="{")t=a.substring(1,a.length-1);else{var s=a.split("=");s.length===2?s[0]==="master"?n.push(s[1].replace(D$,"")):r[s[0]]=s[1].replace(D$,""):r[s[0]]=!0}}return{groupName:t,groupFlags:r,groupMasters:n}}var Lct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"kin"},n.__objName.get=function(){return"kinemage"},t.prototype._parse=function(){Ze&&Ge.time("KinParser._parse "+this.name);var r,i,o={kinemage:void 0,onewidth:void 0,"1viewid":void 0,pdbfile:void 0,texts:[],text:"",captions:[],caption:"",groupDict:{},subgroupDict:{},masterDict:{},pointmasterDict:{},dotLists:[],vectorLists:[],ballLists:[],ribbonLists:[]};this.kinemage=o;var a,s,l,c,u,f,d,p,h,g,v,m,y,_,b,x,w,S,A,C,k,O,T=!1,B="",R=!1,P="",D=null,z=null,N=!1,H="",J=!1,ne="",oe=!1,Z=!1;if(this.streamer.eachChunkOfLines(function(se){(function(Y,he,ae){for(var ye=Y;ye<he;++ye){var re=ae[ye];if(re[0]==="@"&&(T=!1,R=!1,N=!1,J=!1,oe=!1,Z=!1),re)if(re.startsWith("@dotlist")){var te=q2(re),le=te.listColor,de=te.listName,_e=te.listMasters;T=!0,B="",s=[],l=[],c=[],a=le,r&&(_e=_e.concat(r)),i&&(_e=_e.concat(i)),o.dotLists.push({name:de,masterArray:_e,labelArray:s,positionArray:l,colorArray:c})}else if(re.startsWith("@vectorlist")){var be=q2(re),ke=be.listMasters,W=be.listName,ee=be.listWidth,Ee=be.listColor;ke&&ke.forEach(function(ft){o.masterDict[ft]||(o.masterDict[ft]={indent:!1,visible:!1})}),R=!0,P="",D=null,z=null,d=[],p=[],h=[],g=[],v=[],m=[],u=Ee,f=[],ee&&f.push(ee),r&&(ke=ke.concat(r)),i&&(ke=ke.concat(i)),o.vectorLists.push({name:W,masterArray:ke,label1Array:d,label2Array:p,position1Array:h,position2Array:g,color1Array:v,color2Array:m,width:f})}else if(re.startsWith("@balllist")){var ge=q2(re),pe=ge.listName,ve=ge.listColor,$e=ge.listMasters;$e&&$e.forEach(function(ft){o.masterDict[ft]||(o.masterDict[ft]={indent:!1,visible:!1})}),N=!0,H="",b=[],y=[],x=[],w=[],_=ve,r&&($e=$e.concat(r)),i&&($e=$e.concat(i)),o.ballLists.push({name:pe,masterArray:$e,labelArray:b,radiusArray:y,positionArray:x,colorArray:w})}else if(re.startsWith("@ribbonlist")||re.startsWith("@trianglelist")){var Ne=q2(re),Ae=Ne.listMasters,Oe=Ne.listName,j=Ne.listColor;Ae&&Ae.forEach(function(ft){o.masterDict[ft]||(o.masterDict[ft]={indent:!1,visible:!1})}),J=!0,ne="",A=[],C=[],k=[],O=[],S=j,r&&(Ae=Ae.concat(r)),i&&(Ae=Ae.concat(i)),o.ribbonLists.push({name:Oe,masterArray:Ae,labelArray:A,positionArray:C,breakArray:k,colorArray:O})}else if(re.startsWith("@text"))oe=!0,o.texts.push(re.substr(5));else if(re.startsWith("@caption"))Z=!0,o.captions.push(re.substr(8));else if(T){var M=X2(re),L=M.label,q=M.color,me=M.position;L==='"'?L=B:B=L,q===void 0&&(q=a),s.push(L),l.push.apply(l,me),c.push.apply(c,q)}else if(R)for(var Te=re.replace(/(?!^){/g,`
{`).split(/\n/),Pe=0;Pe<Te.length;Pe++){var Xe=X2(Te[Pe]),He=Xe.label,Ve=Xe.color,Je=Xe.width,Ye=Xe.position,yt=Xe.isLineBreak;He==='"'?He=P:P=He,Ve===void 0&&(Ve=u),yt||D!==null&&(Je&&f.push(Je),d.push(P),h.push.apply(h,D),v.push.apply(v,z),p.push(He),g.push.apply(g,Ye),m.push.apply(m,Ve)),P=He,D=Ye,z=Ve}else if(N){var mt=X2(re),ut=mt.label,Et=mt.radius,et=mt.color,ct=mt.position;ut==='"'?ut=H:H=ut,Et===void 0&&(Et=1),et===void 0&&(et=_),b.push(ut),y.push(Et),x.push.apply(x,ct),w.push.apply(w,et)}else if(J){var _t=X2(re),xe=_t.label,ie=_t.color,ue=_t.position,E=_t.isTriangleBreak;xe==='"'?xe=ne:ne=xe,ie===void 0&&(ie=S),A.push(xe),C.push.apply(C,ue),k.push(E),O.push.apply(O,ie)}else if(oe)o.texts.push(re);else if(Z)o.captions.push(re);else if(re.startsWith("@kinemage"))o.kinemage=parseInt(re.substr(9).trim());else if(re.startsWith("@onewidth"))o.onewidth=!0;else if(re.startsWith("@1viewid"))o["1viewid"]=ok(re);else if(re.startsWith("@pdbfile"))o.pdbfile=ok(re);else if(re.startsWith("@group")){var F=ak(re),U=F.groupName,X=F.groupFlags,Q=F.groupMasters;for(var fe in o.groupDict[U]||(o.groupDict[U]={dominant:!1,animate:!1},r=Q),r&&r.forEach(function(ft){o.masterDict[ft]||(o.masterDict[ft]={indent:!1,visible:!1})}),X)o.groupDict[U][fe]=X[fe]}else if(re.startsWith("@subgroup")){var we=ak(re),Se=we.groupName,ze=we.groupFlags,Fe=we.groupMasters;for(var Ke in o.subgroupDict[Se]||(o.subgroupDict[Se]={dominant:!1,animate:!1},i=Fe),i&&i.forEach(function(ft){o.masterDict[ft]||(o.masterDict[ft]={indent:!1,visible:!1})}),ze)o.subgroupDict[Se][Ke]=ze[Ke]}else if(re.startsWith("@master")){var Le=ok(re),Me=kct(re);o.masterDict[Le]||(o.masterDict[Le]={indent:!1,visible:!1}),Me==="on"?o.masterDict[Le].visible=!0:Me==="off"?o.masterDict[Le].visible=!1:Me==="indent"&&(o.masterDict[Le].indent=!0)}else if(re.startsWith("@pointmaster")){var Re=ak(re),qe=Re.groupName,nt=Re.groupFlags;o.pointmasterDict[qe]={id:Object.keys(nt)[0].replace(Rct,"")}}else console.log(re);else T=!1,R=!1,N=!1,J=!1}})(0,se.length,se)}),o.text=o.texts.join(`
`).trim(),o.caption=o.captions.join(`
`).trim(),o.ribbonLists){var ce=[];o.ribbonLists.forEach(function(se){ce.push(function(Y){for(var he=Y.labelArray,ae=Y.positionArray,ye=Y.colorArray,re=Y.breakArray,te=[],le=[],de=[],_e=[],be=0;be<re.length/3;be++){var ke=3*be,W=9*be;re[ke+1]||re[ke+2]||(te.push(he[ke]),te.push(he[ke+1]),te.push(he[ke+2]),_e.push(re[ke]),_e.push(re[ke+1]),_e.push(re[ke+2]),le.push(ae[W]),le.push(ae[W+1]),le.push(ae[W+2]),le.push(ae[W+3]),le.push(ae[W+4]),le.push(ae[W+5]),le.push(ae[W+6]),le.push(ae[W+7]),le.push(ae[W+8]),de.push(ye[W]),de.push(ye[W+1]),de.push(ye[W+2]),de.push(ye[W+3]),de.push(ye[W+4]),de.push(ye[W+5]),de.push(ye[W+6]),de.push(ye[W+7]),de.push(ye[W+8]))}return{name:Y.name,masterArray:Y.masterArray,labelArray:te,positionArray:le,breakArray:_e,colorArray:de}}(function(Y){for(var he=Y.labelArray,ae=Y.positionArray,ye=Y.colorArray,re=Y.breakArray,te=[],le=0;le<3*(he.length-2);++le)te[le]=he[le-2*Math.floor(le/3)];for(var de=[],_e=0;_e<3*(re.length-2);++_e)de[_e]=re[_e-2*Math.floor(_e/3)];for(var be=[],ke=0;ke<9*(ae.length/3-2);++ke)be[ke]=ae[ke-6*Math.floor(ke/9)];for(var W=[],ee=0;ee<9*(ye.length/3-2);++ee)W[ee]=ye[ee-6*Math.floor(ee/9)];for(var Ee=[],ge=0;ge<be.length/3;++ge)Ee.push(new V(be[3*ge],be[3*ge]+1,be[3*ge]+2));return{name:Y.name,masterArray:Y.masterArray,labelArray:te,positionArray:be,breakArray:de,colorArray:W}}(se)))}),o.ribbonLists=ce}Ze&&Ge.timeEnd("KinParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(To);Xt.add("kin",Lct);var hae=function(e){function t(r,i){e.call(this,r,i),this.loader=this.getLoader(),this.surface=new Ao(this.name,this.path)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"surface"},n.__objName.get=function(){return"surface"},t.prototype._parse=function(){var r=this.loader.parse(this.streamer.asText());this.surface.fromGeometry(r)},Object.defineProperties(t.prototype,n),t}(To),B$=function(){this.regexp={vertex_pattern:/^v\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,normal_pattern:/^vn\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,uv_pattern:/^vt\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}};B$.prototype={constructor:B$,setPath:function(e){this.path=e},_createParserState:function(){var e={objects:[],object:{},vertices:[],normals:[],startObject:function(t,n){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=t,void(this.object.fromDeclaration=n!==!1);this.object={name:t||"",geometry:{vertices:[],normals:[]},fromDeclaration:n!==!1},this.objects.push(this.object)},parseVertexIndex:function(t,n){var r=parseInt(t,10);return 3*(r>=0?r-1:r+n/3)},parseNormalIndex:function(t,n){var r=parseInt(t,10);return 3*(r>=0?r-1:r+n/3)},addVertex:function(t,n,r){var i=this.vertices,o=this.object.geometry.vertices;o.push(i[t+0]),o.push(i[t+1]),o.push(i[t+2]),o.push(i[n+0]),o.push(i[n+1]),o.push(i[n+2]),o.push(i[r+0]),o.push(i[r+1]),o.push(i[r+2])},addVertexLine:function(t){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[t+0]),r.push(n[t+1]),r.push(n[t+2])},addNormal:function(t,n,r){var i=this.normals,o=this.object.geometry.normals;o.push(i[t+0]),o.push(i[t+1]),o.push(i[t+2]),o.push(i[n+0]),o.push(i[n+1]),o.push(i[n+2]),o.push(i[r+0]),o.push(i[r+1]),o.push(i[r+2])},addFace:function(t,n,r,i,o,a,s,l){var c,u=this.vertices.length,f=this.parseVertexIndex(t,u),d=this.parseVertexIndex(n,u),p=this.parseVertexIndex(r,u);if(i===void 0?this.addVertex(f,d,p):(c=this.parseVertexIndex(i,u),this.addVertex(f,d,c),this.addVertex(d,p,c)),o!==void 0){var h=this.normals.length;f=this.parseNormalIndex(o,h),d=o===a?f:this.parseNormalIndex(a,h),p=o===s?f:this.parseNormalIndex(s,h),i===void 0?this.addNormal(f,d,p):(c=this.parseNormalIndex(l,h),this.addNormal(f,d,c),this.addNormal(d,p,c))}},addLineGeometry:function(t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=0,i=t.length;r<i;r++)this.addVertexLine(this.parseVertexIndex(t[r],n))}};return e.startObject("",!1),e},parse:function(e){var t,n,r=this._createParserState();e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));var i=e.split(`
`),o="",a="",s="",l=[],c=typeof"".trimLeft=="function";for(t=0,n=i.length;t<n;t++)if(o=i[t],(o=c?o.trimLeft():o.trim()).length!==0&&(a=o.charAt(0))!=="#"){if(a==="v"){if((s=o.charAt(1))===" "&&(l=this.regexp.vertex_pattern.exec(o))!==null)r.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));else if(s==="n"&&(l=this.regexp.normal_pattern.exec(o))!==null)r.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));else if(s!=="t"||this.regexp.uv_pattern.exec(o)===null)throw new Error("Unexpected vertex/normal/uv line: '"+o+"'")}else if(a==="f"){if((l=this.regexp.face_vertex_uv_normal.exec(o))!==null)r.addFace(l[1],l[4],l[7],l[10],l[3],l[6],l[9],l[12]);else if(this.regexp.face_vertex_uv.exec(o)===null)if((l=this.regexp.face_vertex_normal.exec(o))!==null)r.addFace(l[1],l[3],l[5],l[7],l[2],l[4],l[6],l[8]);else{if((l=this.regexp.face_vertex.exec(o))===null)throw new Error("Unexpected face line: '"+o+"'");r.addFace(l[1],l[2],l[3],l[4])}}else if(a==="l"){var u=o.substring(1).trim().split(" "),f=[],d=[];if(o.indexOf("/")===-1)f=u;else for(var p=0,h=u.length;p<h;p++){var g=u[p].split("/");g[0]!==""&&f.push(g[0]),g[1]!==""&&d.push(g[1])}r.addLineGeometry(f,d)}else if((l=this.regexp.object_pattern.exec(o))!==null){var v=l[0].substr(1).trim();r.startObject(v)}else if(!this.regexp.material_use_pattern.test(o)){if(!this.regexp.material_library_pattern.test(o)){if(this.regexp.smoothing_pattern.exec(o)===null){if(o==="\0")continue;throw new Error("Unexpected line: '"+o+"'")}}}}var m=[];for(t=0,n=r.objects.length;t<n;t++){var y=r.objects[t].geometry;if(y.vertices.length!==0){var _=new At;_.setAttribute("position",new Dt(new Float32Array(y.vertices),3)),y.normals.length>0?_.setAttribute("normal",new Dt(new Float32Array(y.normals),3)):_.computeVertexNormals(),m.push(_)}}return m}};var $ct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"obj"},t.prototype.getLoader=function(){return new B$},Object.defineProperties(t.prototype,n),t}(hae);Xt.add("obj",$ct);var N$=function(){this.propertyNameMapping={}};N$.prototype={constructor:N$,setPropertyNameMapping:function(e){this.propertyNameMapping=e},bin2str:function(e){for(var t=new Uint8Array(e),n="",r=0;r<e.byteLength;r++)n+=String.fromCharCode(t[r]);return n},isASCII:function(e){return this.parseHeader(this.bin2str(e)).format==="ascii"},parse:function(e){return e instanceof ArrayBuffer?this.isASCII(e)?this.parseASCII(this.bin2str(e)):this.parseBinary(e):this.parseASCII(e)},parseHeader:function(e){var t="",n=0,r=/ply([\s\S]*)end_header\s/.exec(e);r!==null&&(t=r[1],n=r[0].length);for(var i,o,a,s,l,c,u={comments:[],elements:[],headerLength:n},f=t.split(`
`),d=0;d<f.length;d++){var p=f[d];if((p=p.trim())!=="")switch(o=(a=p.split(/\s+/)).shift(),p=a.join(" "),o){case"format":u.format=a[0],u.version=a[1];break;case"comment":u.comments.push(p);break;case"element":i!==void 0&&u.elements.push(i),(i={}).name=a[0],i.count=parseInt(a[1]),i.properties=[];break;case"property":i.properties.push((s=a,l=this.propertyNameMapping,c=void 0,(c={type:s[0]}).type==="list"?(c.name=s[3],c.countType=s[1],c.itemType=s[2]):c.name=s[1],c.name in l&&(c.name=l[c.name]),c));break;default:console.log("unhandled",o,a)}}return i!==void 0&&u.elements.push(i),u},parseASCIINumber:function(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}},parseASCIIElement:function(e,t){for(var n=t.split(/\s+/),r={},i=0;i<e.length;i++)if(e[i].type==="list"){for(var o=[],a=this.parseASCIINumber(n.shift(),e[i].countType),s=0;s<a;s++)o.push(this.parseASCIINumber(n.shift(),e[i].itemType));r[e[i].name]=o}else r[e[i].name]=this.parseASCIINumber(n.shift(),e[i].type);return r},parseASCII:function(e){var t,n=new Kt,r=this.parseHeader(e),i="";(t=/end_header\s([\s\S]*)$/.exec(e))!==null&&(i=t[1]);var o=i.split(`
`),a=0,s=0;n.useColor=!1;for(var l=0;l<o.length;l++){var c=o[l];if((c=c.trim())!==""){s>=r.elements[a].count&&(a++,s=0);var u=this.parseASCIIElement(r.elements[a].properties,c);this.handleElement(n,r.elements[a].name,u),s++}}return this.postProcess(n)},postProcess:function(e){if(e.useColor){for(var t=0;t<e.faces.length;t++)e.faces[t].vertexColors=[e.colors[e.faces[t].a],e.colors[e.faces[t].b],e.colors[e.faces[t].c]];e.elementsNeedUpdate=!0}return e.computeBoundingSphere(),e},handleElement:function(e,t,n){if(t==="vertex"){if(e.vertices.push(new V(n.x,n.y,n.z)),"red"in n&&"green"in n&&"blue"in n){e.useColor=!0;var r=new ht;r.setRGB(n.red/255,n.green/255,n.blue/255),e.colors.push(r)}}else if(t==="face"){var i=n.vertex_indices;i.length===3?e.faces.push(new Lp(i[0],i[1],i[2])):i.length===4&&e.faces.push(new Lp(i[0],i[1],i[3]),new Lp(i[1],i[2],i[3]))}},binaryRead:function(e,t,n,r){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,r),2];case"uint16":case"ushort":return[e.getUint16(t,r),2];case"int32":case"int":return[e.getInt32(t,r),4];case"uint32":case"uint":return[e.getUint32(t,r),4];case"float32":case"float":return[e.getFloat32(t,r),4];case"float64":case"double":return[e.getFloat64(t,r),8]}},binaryReadElement:function(e,t,n,r){for(var i,o={},a=0,s=0;s<n.length;s++)if(n[s].type==="list"){var l=[],c=(i=this.binaryRead(e,t+a,n[s].countType,r))[0];a+=i[1];for(var u=0;u<c;u++)i=this.binaryRead(e,t+a,n[s].itemType,r),l.push(i[0]),a+=i[1];o[n[s].name]=l}else i=this.binaryRead(e,t+a,n[s].type,r),o[n[s].name]=i[0],a+=i[1];return[o,a]},parseBinary:function(e){for(var t,n=new Kt,r=this.parseHeader(this.bin2str(e)),i=r.format==="binary_little_endian",o=new DataView(e,r.headerLength),a=0,s=0;s<r.elements.length;s++)for(var l=0;l<r.elements[s].count;l++){a+=(t=this.binaryReadElement(o,a,r.elements[s].properties,i))[1];var c=t[0];this.handleElement(n,r.elements[s].name,c)}return this.postProcess(n)}};var Dct=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0}};return n.type.get=function(){return"ply"},t.prototype.getLoader=function(){return new N$},Object.defineProperties(t.prototype,n),t}(hae);Xt.add("ply",Dct);var Bct=function(e){function t(r,i){var o=i||{};e.call(this,r,o),this.delimiter=K(o.delimiter,","),this.comment=K(o.comment,"#"),this.columnNames=K(o.columnNames,!1),this.table={name:this.name,path:this.path,columnNames:[],data:[]}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"csv"},n.__objName.get=function(){return"table"},t.prototype._parse=function(){var r=this,i=this.table.data,o=new RegExp("\\s*"+this.delimiter+"\\s*"),a=0;this.streamer.eachChunkOfLines(function(s){for(var l=s.length,c=0;c<l;++c){var u=s[c].trim();if(!u.startsWith(r.comment)){var f=u.split(o);a===0?r.table.columnNames=f:u&&i.push(f),++a}}})},Object.defineProperties(t.prototype,n),t}(To);Xt.add("csv",Bct);var Nct=function(e){function t(r,i){var o=i||{};e.call(this,r,o),this.string=K(o.string,!1),this.json={name:this.name,path:this.path,data:{}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isJson:{configurable:!0}};return n.type.get=function(){return"json"},n.__objName.get=function(){return"json"},n.isJson.get=function(){return!0},t.prototype._parse=function(){this.streamer.isBinary()||this.string?this.json.data=JSON.parse(this.streamer.asText()):this.json.data=this.streamer.data},Object.defineProperties(t.prototype,n),t}(To);Xt.add("json",Nct);var Fct=function(e){function t(r,i){var o=i||{};e.call(this,r,o),this.msgpack={name:this.name,path:this.path,data:void 0}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"msgpack"},n.__objName.get=function(){return"msgpack"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){Ze&&Ge.time("MsgpackParser._parse "+this.name),this.msgpack.data=lae(this.streamer.data),Ze&&Ge.timeEnd("MsgpackParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(To);Xt.add("msgpack",Fct);var jct=function(e){function t(r,i){var o=i||{};e.call(this,r,o),this.netcdf={name:this.name,path:this.path,data:void 0}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isBinary:{configurable:!0}};return n.type.get=function(){return"netcdf"},n.__objName.get=function(){return"netcdf"},n.isBinary.get=function(){return!0},t.prototype._parse=function(){Ze&&Ge.time("NetcdfParser._parse "+this.name),this.netcdf.data=new Ib(this.streamer.data),Ze&&Ge.timeEnd("NetcdfParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(To);Xt.add("netcdf",jct);var _G=function(e){function t(r,i){e.call(this,r,i),this.text={name:this.name,path:this.path,data:""}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0}};return n.type.get=function(){return"text"},n.__objName.get=function(){return"text"},t.prototype._parse=function(){this.text.data=this.streamer.asText()},Object.defineProperties(t.prototype,n),t}(To);Xt.add("txt",_G),Xt.add("text",_G);var zct=/^['"]|['"]$/g,Uct=/^<([\w-:.]+)\s*/,Vct=/^([^<]*)/,Hct=/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/;function Gct(e){return e=e.trim().replace(/<!--[\s\S]*?-->/g,""),{declaration:t(),root:n()};function t(){if(i(/^<\?xml\s*/)){for(var s={attributes:{}};!o()&&!a("?>");){var l=r();if(!l)return s;s.attributes[l.name]=l.value}return i(/\?>\s*/),s}}function n(){var s=i(Uct);if(s){for(var l,c={name:s[1],attributes:{},children:[]};!(o()||a(">")||a("?>")||a("/>"));){var u=r();if(!u)return c;c.attributes[u.name]=u.value}if(i(/^\s*\/>\s*/))return c;for(i(/\??>\s*/),c.content=function(){var f=i(Vct);return f?f[1]:""}();l=n();)c.children.push(l);return i(/^<\/[\w-:.]+>\s*/),c}}function r(){var s,l=i(Hct);if(l)return{name:l[1],value:(s=l[2],s.replace(zct,""))}}function i(s){var l=e.match(s);if(l)return e=e.slice(l[0].length),l}function o(){return e.length===0}function a(s){return e.indexOf(s)===0}}var mae=function(e){function t(r,i){var o=i||{};e.call(this,r,o),this.useDomParser=K(o.useDomParser,!1),this.xml={name:this.name,path:this.path,data:{}}}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={type:{configurable:!0},__objName:{configurable:!0},isXml:{configurable:!0}};return n.type.get=function(){return"xml"},n.__objName.get=function(){return"xml"},n.isXml.get=function(){return!0},t.prototype.__xmlParser=function(r){return Gct(r)},t.prototype.__domParser=function(r){return new window.DOMParser().parseFromString(r,"text/xml")},t.prototype._parse=function(){Ze&&Ge.time("XmlParser._parse "+this.name),this.useDomParser?this.streamer.data instanceof Document?this.xml.data=this.streamer.data:this.xml.data=this.__domParser(this.streamer.asText()):this.xml.data=this.__xmlParser(this.streamer.asText()),Ze&&Ge.timeEnd("XmlParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(To);function li(e,t){var n=e.getNamedItem(t);return n!==null?n.value:""}function xG(e,t,n){n===void 0&&(n=!1);var r=li(e,"icode").trim(),i=li(e,"chain").trim(),o=li(e,"altcode"),a=li(e,"resnum");return r&&(a+="^"+r),i&&(a+=":"+i),t&&(a+="."+t),n&&o.trim()&&(a+="%"+o),a+="/"+(parseInt(li(e,"model"))-1)}function Wct(e){var t=li(e,"chain").trim(),n="["+li(e,"rescode")+"]"+li(e,"resnum");return t&&(n+=":"+t),n}function sk(e,t,n){e[t]===void 0?e[t]=n:e[t]|=n}function lk(e,t){return e!==null&&e.value===t}function qct(e,t,n){for(var r=0,i=t.getElementsByTagName("clash"),o=0,a=i.length;o<a;++o)if(e[li(i[o].attributes,"cid")]){r+=1;break}return t.getElementsByTagName("angle-outlier").length>0&&(r+=1),t.getElementsByTagName("bond-outlier").length>0&&(r+=1),t.getElementsByTagName("plane-outlier").length>0&&(r+=1),lk(n.getNamedItem("rota"),"OUTLIER")&&(r+=1),lk(n.getNamedItem("rama"),"OUTLIER")&&(r+=1),lk(n.getNamedItem("RNApucker"),"outlier")&&(r+=1),r}Xt.add("xml",mae);var KS=function(e,t){this.name=e,this.path=t,this.rsrzDict={},this.rsccDict={},this.rciDict={},this.clashDict={},this.clashArray=[],this.geoDict={},this.geoAtomDict={},this.atomDict={},this.clashSele="NONE"},wG={type:{configurable:!0}};wG.type.get=function(){return"validation"},KS.prototype.fromXml=function(e){Ze&&Ge.time("Validation.fromXml");var t=this.rsrzDict,n=this.rsccDict,r=this.rciDict,i=this.clashDict,o=this.clashArray,a=this.geoDict,s=this.geoAtomDict,l=this.atomDict,c=e.getElementsByTagName("Entry");if(c.length===1){var u=c[0].getElementsByTagName("chemical_shift_list");if(u.length===1)for(var f=u[0].getElementsByTagName("random_coil_index"),d=0,p=f.length;d<p;++d){var h=f[d].attributes;r[Wct(h)]=parseFloat(li(h,"value"))}}var g=e.getElementsByTagName("ModelledSubgroup"),v={},m=[];Ze&&Ge.time("Validation.fromXml#clashDict");for(var y=0,_=g.length;y<_;++y){var b=g[y],x=b.attributes,w=xG(x);x.getNamedItem("rsrz")!==null&&(t[w]=parseFloat(li(x,"rsrz"))),x.getNamedItem("rscc")!==null&&(n[w]=parseFloat(li(x,"rscc")));var S=e.createAttribute("sele");S.value=w,x.setNamedItem(S);for(var A=b.getElementsByTagName("clash"),C=0,k=A.length;C<k;++C){var O=A[C].attributes,T=li(O,"atom");if(zN(T)!=="H"){var B=li(O,"cid"),R=xG(x,T,!0);if(l[R]=!0,v[B]===void 0)v[B]={sele1:R,res1:w};else{var P=v[B];P.res1!==w&&(P.sele2=R,P.res2=w,m.push(P.res1,w),i[B]=P,o.push(P))}}}}Ze&&Ge.timeEnd("Validation.fromXml#clashDict");for(var D=0,z=g.length;D<z;++D){var N=g[D],H=N.attributes,J=li(H,"sele");if(li(H,"seq")!=="."){var ne=qct(i,N,H);ne>0&&(a[J]=ne)}else{var oe=N.getElementsByTagName("clash"),Z=N.getElementsByTagName("mog-bond-outlier"),ce=N.getElementsByTagName("mog-angle-outlier");if(Z.length>0||ce.length>0||oe.length>0){var se={};s[J]=se;for(var Y=0,he=oe.length;Y<he;++Y){var ae=oe[Y].attributes;i[li(ae,"cid")]&&sk(se,li(ae,"atom"),1)}for(var ye=0,re=Z.length;ye<re;++ye)li(Z[ye].attributes,"atoms").split(",").forEach(function(de){sk(se,de,2)});for(var te=0,le=ce.length;te<le;++te)li(ce[te].attributes,"atoms").split(",").forEach(function(de){sk(se,de,4)})}}}this.clashSele=m.length?m.join(" OR "):"NONE",Ze&&Ge.timeEnd("Validation.fromXml")},KS.prototype.getClashData=function(e){Ze&&Ge.time("Validation.getClashData");var t=e||{},n=t.structure,r=n.atomSet,i=new ht(K(t.color,"#f0027f")),o=n.getAtomProxy(),a=n.getAtomProxy(),s=new V,l=new V,c=new V,u=this.clashArray,f=u.length,d=new Float32Array(3*f),p=new Float32Array(3*f),h=Yn(f,i.r,i.g,i.b),g=new Float32Array(f),v=new Float32Array(f);Ze&&Ge.time("Validation.getClashData#atomDict");var m=this.atomDict;n.eachAtom(function(_){var b=function(x){var w=x.inscode,S=x.chainname,A=x.atomname,C=x.altloc,k=x.resno+"";return w&&(k+="^"+w),S&&(k+=":"+S),A&&(k+="."+A),C&&(k+="%"+C),k+"/"+x.modelIndex}(_);m[b]===!0&&(m[b]=_.index)}),Ze&&Ge.timeEnd("Validation.getClashData#atomDict");var y=0;return u.forEach(function(_,b){if(o.index=m[_.sele1],a.index=m[_.sele2],o.index!==void 0&&a.index!==void 0&&r.isSet(o.index,a.index)){s.subVectors(a,o).setLength(o.vdw),l.copy(o).add(s),s.subVectors(o,a).setLength(a.vdw),c.copy(a).add(s);var x=o.distanceTo(a)/2,w=Math.sqrt(o.vdw*o.vdw-x*x),S=Math.sqrt(a.vdw*a.vdw-x*x);l.toArray(d,3*y),c.toArray(p,3*y),g[y]=(w+S)/2,v[y]=b,++y}}),Ze&&Ge.timeEnd("Validation.getClashData"),{position1:d.subarray(0,3*y),position2:p.subarray(0,3*y),color:h.subarray(0,3*y),color2:h.subarray(0,3*y),radius:g.subarray(0,y),picking:new wat(v.subarray(0,y),this,n)}},Object.defineProperties(KS.prototype,wG);var Xct=function(e){function t(r,i){var o=i||{};e.call(this,r,o),this.useDomParser=!0,this.validation=new KS(this.name,this.path)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={__objName:{configurable:!0},isXml:{configurable:!0}};return n.__objName.get=function(){return"validation"},n.isXml.get=function(){return!0},t.prototype._parse=function(){e.prototype._parse.call(this),Ze&&Ge.time("ValidationParser._parse "+this.name),this.validation.fromXml(this.xml.data),Ze&&Ge.timeEnd("ValidationParser._parse "+this.name)},Object.defineProperties(t.prototype,n),t}(mae);function gae(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)}function Dg(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]}function F$(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;n!==0;){n-=a=n>2e3?2e3:n;do o=o+(i=i+t[r++]|0)|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}Xt.add("validation",Xct);var Yct=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();function ql(e,t,n,r){var i=Yct,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^i[255&(e^t[a])];return-1^e}function Kct(e,t){var n,r,i,o,a,s,l,c,u,f,d,p,h,g,v,m,y,_,b,x,w,S,A,C,k;n=e.state,r=e.next_in,C=e.input,i=r+(e.avail_in-5),o=e.next_out,k=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,f=n.wnext,d=n.window,p=n.hold,h=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{h<15&&(p+=C[r++]<<h,h+=8,p+=C[r++]<<h,h+=8),_=g[p&m];t:for(;;){if(p>>>=b=_>>>24,h-=b,(b=_>>>16&255)===0)k[o++]=65535&_;else{if(!(16&b)){if(!(64&b)){_=g[(65535&_)+(p&(1<<b)-1)];continue t}if(32&b){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}x=65535&_,(b&=15)&&(h<b&&(p+=C[r++]<<h,h+=8),x+=p&(1<<b)-1,p>>>=b,h-=b),h<15&&(p+=C[r++]<<h,h+=8,p+=C[r++]<<h,h+=8),_=v[p&y];n:for(;;){if(p>>>=b=_>>>24,h-=b,!(16&(b=_>>>16&255))){if(!(64&b)){_=v[(65535&_)+(p&(1<<b)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&_,h<(b&=15)&&(p+=C[r++]<<h,(h+=8)<b&&(p+=C[r++]<<h,h+=8)),(w+=p&(1<<b)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=b,h-=b,w>(b=o-a)){if((b=w-b)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=0,A=d,f===0){if(S+=c-b,b<x){x-=b;do k[o++]=d[S++];while(--b);S=o-w,A=k}}else if(f<b){if(S+=c+f-b,(b-=f)<x){x-=b;do k[o++]=d[S++];while(--b);if(S=0,f<x){x-=b=f;do k[o++]=d[S++];while(--b);S=o-w,A=k}}}else if(S+=f-b,b<x){x-=b;do k[o++]=d[S++];while(--b);S=o-w,A=k}for(;x>2;)k[o++]=A[S++],k[o++]=A[S++],k[o++]=A[S++],x-=3;x&&(k[o++]=A[S++],x>1&&(k[o++]=A[S++]))}else{S=o-w;do k[o++]=k[S++],k[o++]=k[S++],k[o++]=k[S++],x-=3;while(x>2);x&&(k[o++]=k[S++],x>1&&(k[o++]=k[S++]))}break}}break}}while(r<i&&o<s);r-=x=h>>3,p&=(1<<(h-=x<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=h}var Zct=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],Jct=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Qct=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],eut=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function Rb(e,t,n,r,i,o,a,s){var l,c,u,f,d,p,h,g,v,m=s.bits,y=0,_=0,b=0,x=0,w=0,S=0,A=0,C=0,k=0,O=0,T=null,B=0,R=new Uint16Array(16),P=new Uint16Array(16),D=null,z=0;for(y=0;y<=15;y++)R[y]=0;for(_=0;_<r;_++)R[t[n+_]]++;for(w=m,x=15;x>=1&&R[x]===0;x--);if(w>x&&(w=x),x===0)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(b=1;b<x&&R[b]===0;b++);for(w<b&&(w=b),C=1,y=1;y<=15;y++)if(C<<=1,(C-=R[y])<0)return-1;if(C>0&&(e===0||x!==1))return-1;for(P[1]=0,y=1;y<15;y++)P[y+1]=P[y]+R[y];for(_=0;_<r;_++)t[n+_]!==0&&(a[P[t[n+_]]++]=_);if(e===0?(T=D=a,p=19):e===1?(T=Zct,B-=257,D=Jct,z-=257,p=256):(T=Qct,D=eut,p=-1),O=0,_=0,y=b,d=o,S=w,A=0,u=-1,f=(k=1<<w)-1,e===1&&k>852||e===2&&k>592)return 1;for(;;){h=y-A,a[_]<p?(g=0,v=a[_]):a[_]>p?(g=D[z+a[_]],v=T[B+a[_]]):(g=96,v=0),l=1<<y-A,b=c=1<<S;do i[d+(O>>A)+(c-=l)]=h<<24|g<<16|v|0;while(c!==0);for(l=1<<y-1;O&l;)l>>=1;if(l!==0?(O&=l-1,O+=l):O=0,_++,--R[y]==0){if(y===x)break;y=t[n+a[_]]}if(y>w&&(O&f)!==u){for(A===0&&(A=w),d+=b,C=1<<(S=y-A);S+A<x&&!((C-=R[S+A])<=0);)S++,C<<=1;if(k+=1<<S,e===1&&k>852||e===2&&k>592)return 1;i[u=O&f]=w<<24|S<<16|d-o|0}}return O!==0&&(i[d+O]=y-A<<24|64<<16|0),s.bits=w,0}function SG(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function tut(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function nut(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(n){var r;return n&&n.state?(r=n.state,n.total_in=n.total_out=r.total=0,n.msg="",r.wrap&&(n.adler=1&r.wrap),r.mode=1,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(852),r.distcode=r.distdyn=new Int32Array(592),r.sane=1,r.back=-1,0):-2}(e)):-2}function rut(e,t){var n,r;return e?(r=new tut,e.state=r,r.window=null,n=function(i,o){var a,s;return i&&i.state?(s=i.state,o<0?(a=0,o=-o):(a=1+(o>>4),o<48&&(o&=15)),o&&(o<8||o>15)?-2:(s.window!==null&&s.wbits!==o&&(s.window=null),s.wrap=a,s.wbits=o,nut(i))):-2}(e,t),n!==0&&(e.state=null),n):-2}var ck,uk,CG=!0;function iut(e){if(CG){var t;for(ck=new Int32Array(512),uk=new Int32Array(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Rb(1,e.lens,0,288,ck,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Rb(2,e.lens,0,32,uk,0,e.work,{bits:5}),CG=!1}e.lencode=ck,e.lenbits=9,e.distcode=uk,e.distbits=5}function vae(e,t,n,r){var i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(Dg(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),Dg(o.window,t,n-r,i,o.wnext),(r-=i)?(Dg(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function out(e,t){var n,r,i,o,a,s,l,c,u,f,d,p,h,g,v,m,y,_,b,x,w,S,A,C,k=0,O=new Uint8Array(4),T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return-2;(n=e.state).mode===12&&(n.mode=13),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,f=s,d=l,S=0;e:for(;;)switch(n.mode){case 1:if(n.wrap===0){n.mode=13;break}for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(2&n.wrap&&c===35615){n.check=0,O[0]=255&c,O[1]=c>>>8&255,n.check=ql(n.check,O,2,0),c=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=30;break}if((15&c)!=8){e.msg="unknown compression method",n.mode=30;break}if(u-=4,w=8+(15&(c>>>=4)),n.wbits===0)n.wbits=w;else if(w>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<w,e.adler=n.check=1,n.mode=512&c?10:12,c=0,u=0;break;case 2:for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.flags=c,(255&n.flags)!=8){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(O[0]=255&c,O[1]=c>>>8&255,n.check=ql(n.check,O,2,0)),c=0,u=0,n.mode=3;case 3:for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(O[0]=255&c,O[1]=c>>>8&255,O[2]=c>>>16&255,O[3]=c>>>24&255,n.check=ql(n.check,O,4,0)),c=0,u=0,n.mode=4;case 4:for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(O[0]=255&c,O[1]=c>>>8&255,n.check=ql(n.check,O,2,0)),c=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(O[0]=255&c,O[1]=c>>>8&255,n.check=ql(n.check,O,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((p=n.length)>s&&(p=s),p&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),Dg(n.head.extra,r,o,p,w)),512&n.flags&&(n.check=ql(n.check,r,p,o)),s-=p,o+=p,n.length-=p),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(s===0)break e;p=0;do w=r[o+p++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w));while(w&&p<s);if(512&n.flags&&(n.check=ql(n.check,r,p,o)),s-=p,o+=p,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(s===0)break e;p=0;do w=r[o+p++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w));while(w&&p<s);if(512&n.flags&&(n.check=ql(n.check,r,p,o)),s-=p,o+=p,w)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}e.adler=n.check=SG(c),c=0,u=0,n.mode=11;case 11:if(n.havedict===0)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,2;e.adler=n.check=1,n.mode=12;case 12:if(t===5||t===6)break e;case 13:if(n.last){c>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}switch(n.last=1&c,u-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(iut(n),n.mode=20,t===6){c>>>=2,u-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&c,c=0,u=0,n.mode=15,t===6)break e;case 15:n.mode=16;case 16:if(p=n.length){if(p>s&&(p=s),p>l&&(p=l),p===0)break e;Dg(i,r,o,p,a),s-=p,o+=p,l-=p,a+=p,n.length-=p;break}n.mode=12;break;case 17:for(;u<14;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.lens[T[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[T[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},S=Rb(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,S){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(k=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&k,!((v=k>>>24)<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(y<16)c>>>=v,u-=v,n.lens[n.have++]=y;else{if(y===16){for(C=v+2;u<C;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(c>>>=v,u-=v,n.have===0){e.msg="invalid bit length repeat",n.mode=30;break}w=n.lens[n.have-1],p=3+(3&c),c>>>=2,u-=2}else if(y===17){for(C=v+3;u<C;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}u-=v,w=0,p=3+(7&(c>>>=v)),c>>>=3,u-=3}else{for(C=v+7;u<C;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}u-=v,w=0,p=11+(127&(c>>>=v)),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;p--;)n.lens[n.have++]=w}}if(n.mode===30)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,A={bits:n.lenbits},S=Rb(1,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,S){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},S=Rb(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,S){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,t===6)break e;case 20:n.mode=21;case 21:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,Kct(e,d),a=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===12&&(n.back=-1);break}for(n.back=0;m=(k=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&k,!((v=k>>>24)<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(m&&!(240&m)){for(_=v,b=m,x=y;m=(k=n.lencode[x+((c&(1<<_+b)-1)>>_)])>>>16&255,y=65535&k,!(_+(v=k>>>24)<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=v,u-=v,n.back+=v,n.length=y,m===0){n.mode=26;break}if(32&m){n.back=-1,n.mode=12;break}if(64&m){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(C=n.extra;u<C;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(k=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&k,!((v=k>>>24)<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(!(240&m)){for(_=v,b=m,x=y;m=(k=n.distcode[x+((c&(1<<_+b)-1)>>_)])>>>16&255,y=65535&k,!(_+(v=k>>>24)<=u);){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=v,u-=v,n.back+=v,64&m){e.msg="invalid distance code",n.mode=30;break}n.offset=y,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(C=n.extra;u<C;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(l===0)break e;if(p=d-l,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}p>n.wnext?(p-=n.wnext,h=n.wsize-p):h=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=i,h=a-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do i[a++]=g[h++];while(--p);n.length===0&&(n.mode=21);break;case 26:if(l===0)break e;i[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(s===0)break e;s--,c|=r[o++]<<u,u+=8}if(d-=l,e.total_out+=d,n.total+=d,d&&(e.adler=n.check=n.flags?ql(n.check,i,d,a-d):F$(n.check,i,d,a-d)),d=l,(n.flags?c:SG(c))!==n.check){e.msg="incorrect data check",n.mode=30;break}c=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,c+=r[o++]<<u,u+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}c=0,u=0}n.mode=29;case 29:S=1;break e;case 30:S=-3;break e;case 31:return-4;default:return-2}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||d!==e.avail_out&&n.mode<30&&(n.mode<27||t!==4))&&vae(e,e.output,e.next_out,d-e.avail_out),f-=e.avail_in,d-=e.avail_out,e.total_in+=f,e.total_out+=d,n.total+=d,n.wrap&&d&&(e.adler=n.check=n.flags?ql(n.check,i,d,e.next_out-d):F$(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===12?128:0)+(n.mode===20||n.mode===15?256:0),(f===0&&d===0||t===4)&&S===0&&(S=-5),S}function aut(e,t){var n,r=t.length;return e&&e.state?(n=e.state).wrap!==0&&n.mode!==11?-2:n.mode===11&&F$(1,t,r,0)!==n.check?-3:vae(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,0):-2}var yae=!0,bae=!0;try{String.fromCharCode.apply(null,[0])}catch{yae=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{bae=!1}for(var s_=new Uint8Array(256),wf=0;wf<256;wf++)s_[wf]=wf>=252?6:wf>=248?5:wf>=240?4:wf>=224?3:wf>=192?2:1;function sut(e){var t,n,r,i,o,a=e.length,s=0;for(i=0;i<a;i++)(64512&(n=e.charCodeAt(i)))==55296&&i+1<a&&(64512&(r=e.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),i++),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),o=0,i=0;o<s;i++)(64512&(n=e.charCodeAt(i)))==55296&&i+1<a&&(64512&(r=e.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}function lut(e,t){var n,r,i,o,a=t||e.length,s=new Array(2*a);for(r=0,n=0;n<a;)if((i=e[n++])<128)s[r++]=i;else if((o=s_[i])>4)s[r++]=65533,n+=o-1;else{for(i&=o===2?31:o===3?15:7;o>1&&n<a;)i=i<<6|63&e[n++],o--;o>1?s[r++]=65533:i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|1023&i)}return function(l,c){if(c<65537&&(l.subarray&&bae||!l.subarray&&yae))return String.fromCharCode.apply(null,gae(l,c));for(var u="",f=0;f<c;f++)u+=String.fromCharCode(l[f]);return u}(s,r)}function cut(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&(192&e[n])==128;)n--;return n<0||n===0?t:n+s_[e[n]]>t?n:t}s_[254]=s_[254]=1;var uut={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function fut(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function dut(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var AG=Object.prototype.toString;function gg(e){if(!(this instanceof gg))return new gg(e);this.options=function(a){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var l=s.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)l.hasOwnProperty(c)&&(a[c]=l[c])}}return a}({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fut,this.strm.avail_out=0;var n,r,i,o=rut(this.strm,t.windowBits);if(o!==0)throw new Error(uut[o]);this.header=new dut,n=this.strm,r=this.header,n&&n.state&&(!(2&(i=n.state).wrap)||(i.head=r,r.done=!1))}gg.prototype.push=function(e,t){var n,r,i,o,a,s,l=this.strm,c=this.options.chunkSize,u=this.options.dictionary,f=!1;if(this.ended)return!1;r=t===~~t?t:t===!0?4:0,typeof e=="string"?l.input=function(d){for(var p=new Uint8Array(d.length),h=0,g=p.length;h<g;h++)p[h]=d.charCodeAt(h);return p}(e):AG.call(e)==="[object ArrayBuffer]"?l.input=new Uint8Array(e):l.input=e,l.next_in=0,l.avail_in=l.input.length;do{if(l.avail_out===0&&(l.output=new Uint8Array(c),l.next_out=0,l.avail_out=c),(n=out(l,0))===2&&u&&(s=typeof u=="string"?sut(u):AG.call(u)==="[object ArrayBuffer]"?new Uint8Array(u):u,n=aut(this.strm,s)),n===-5&&f===!0&&(n=0,f=!1),n!==1&&n!==0)return this.onEnd(n),this.ended=!0,!1;l.next_out&&(l.avail_out!==0&&n!==1&&(l.avail_in!==0||r!==4&&r!==2)||(this.options.to==="string"?(i=cut(l.output,l.next_out),o=l.next_out-i,a=lut(l.output,i),l.next_out=o,l.avail_out=c-o,o&&Dg(l.output,l.output,i,o,0),this.onData(a)):this.onData(gae(l.output,l.next_out)))),l.avail_in===0&&l.avail_out===0&&(f=!0)}while((l.avail_in>0||l.avail_out===0)&&n!==1);return n===1&&(r=4),r===4?(n=function(d){if(!d||!d.state)return-2;var p=d.state;return p.window&&(p.window=null),d.state=null,0}(this.strm),this.onEnd(n),this.ended=!0,n===0):r!==2||(this.onEnd(0),l.avail_out=0,!0)},gg.prototype.onData=function(e){this.chunks.push(e)},gg.prototype.onEnd=function(e){e===0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=function(t){var n,r,i,o,a,s;for(i=0,n=0,r=t.length;n<r;n++)i+=t[n].length;for(s=new Uint8Array(i),o=0,n=0,r=t.length;n<r;n++)a=t[n],s.set(a,o),o+=a.length;return s}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},LN.add("gz",function(e){var t;e instanceof ArrayBuffer&&(e=new Uint8Array(e));try{t=function(n,r){var i=new gg(r);if(i.push(n,!0),i.err)throw i.msg;return i.result}(e)}catch{t=e}return t});var k0=function(){},fk="//mmtf.rcsb.org/v1.0/full/",put=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(n){var r,i=Ai(n),o=i.name.substr(0,4);return!["pdb","cif"].includes(i.ext)||i.compressed!==!1&&i.compressed!=="gz"?i.ext==="mmtf"?r=i.base.endsWith(".bb")?"//mmtf.rcsb.org/v1.0/reduced/"+o:fk+o:(i.ext&&Ge.warn("unsupported ext",i.ext),r=fk+o):r="//files.rcsb.org/download/"+i.path,TN()+r},t.prototype.getExt=function(n){var r=Ai(n).ext;return r||"mmtf"},t}(k0);ad.add("rcsb",new put);var PG="//pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/",hut=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(n){var r,i=Ai(n),o=i.name;return i.ext&&i.ext!=="sdf"&&Ge.warn("unsupported ext",i.ext),r=PG+o+"/SDF?record_type=3d",TN()+r},t.prototype.getExt=function(n){var r=Ai(n).ext;return r||"sdf"},t}(k0);ad.add("pubchem",new hut);var dk=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(n){return n},t.prototype.getExt=function(n){return Ai(n).ext},t}(k0);ad.add("ftp",new dk),ad.add("http",new dk),ad.add("https",new dk);var MG="//alphafold.ebi.ac.uk/files/AF-",mut=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(n){var r,i=Ai(n),o=i.name;return i.ext&&i.ext!=="pdb"&&Ge.warn("unsupported AF ext",i.ext),r=MG+o+"-F1-model_v2.pdb",TN()+r},t.prototype.getExt=function(n){var r=Ai(n).ext;return r||"pdb"},t}(k0);ad.add("alphafold",new mut);var gut=/^((http|https|ftp):)*\/\//,vut=function(e){function t(n){n===void 0&&(n=""),e.call(this),this.baseUrl=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getUrl=function(n){var r,i,o,a,s=Ai(n),l=this.baseUrl+s.path;return gut.test(this.baseUrl)||(r=l,i=window.location,o=i.pathname,a=o.substring(0,o.lastIndexOf("/")+1),l=i.origin+a+r),l},t.prototype.getExt=function(n){return Ai(n).ext},t}(k0);(function(e){function t(n){n===void 0&&(n=""),e.call(this),this.baseUrl=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getListing=function(n){n===void 0&&(n="");var r=this.baseUrl+"dir/"+n;return r[r.length-1]!=="/"&&(r+="/"),m$(r,{ext:"json"}).then(function(i){return{path:n,data:i.data}})},t.prototype.getUrl=function(n){var r=Ai(n);return this.baseUrl+"file/"+r.path+r.query},t.prototype.getCountUrl=function(n){var r=Ai(n);return this.baseUrl+"traj/numframes/"+r.path+r.query},t.prototype.getFrameUrl=function(n,r){var i=Ai(n);return this.baseUrl+"traj/frame/"+r+"/"+i.path+i.query},t.prototype.getFrameParams=function(n,r){return"atomIndices="+r.join(";")},t.prototype.getPathUrl=function(n,r){var i=Ai(n);return this.baseUrl+"traj/path/"+r+"/"+i.path+i.query},t.prototype.getExt=function(n){return Ai(n).ext},t})(k0);function EG(e,t){return{type:"integer",max:e,min:t}}function Cm(e,t,n){return{type:"number",precision:e,max:t,min:n}}function Am(e,t,n){return{type:"range",step:e,max:t,min:n}}function Py(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return{type:"select",options:e.reduce(function(n,r){var i;return Object.assign(Object.assign({},n),((i={})[r]=r,i))},{})}}Py("auto","low","medium","high"),Am(1,5,-1),Cm(1,10,0),Cm(1,10,0),Cm(1,10,0),Am(1,100,0),Am(1,100,0),EG(200,0),Py("scene","camera"),Py("relative","absolute"),Am(1,100,0),Am(1,100,0),Py("perspective","orthographic","stereo"),Cm(3,1,.01),Am(1,120,15),Cm(2,10,0),Cm(2,10,0),EG(1e4,-1),Py.apply(void 0,Object.keys(joe));window.Promise||(window.Promise=Vr);function yut(e,t,n,r,i){const o=n.residueStore.count,a=n.getResidueProxy(),s=e.msaview.relativePxToBp(t,r);for(let l=0;l<o;++l)if(a.index=l,a.resno===s+i-1)return a}ad.add("data",new vut("https://files.rcsb.org/download/"));const but=nr(function({model:e}){const t=$.useRef([]),[n,r]=$.useState("cartoon"),[i,o]=$.useState([]),[a,s]=$.useState(),[l,c]=$.useState(!1),{msaview:u,nglSelection:f}=e,{selectedStructures:d,mouseCol:p}=u,h=S_(d),g=$.useCallback(v=>{if(v){const m=new wn(v);s(m)}},[]);return $.useEffect(()=>()=>a==null?void 0:a.dispose(),[a]),$.useEffect(()=>{!h.length||!a||(async()=>{window.addEventListener("resize",()=>{a.handleResize()});const v=await Promise.all(h.map(m=>a.loadFile(`data://${m.structure.pdb}.pdb`)));o(v),a.signals.hovered.add(m=>{var y;if(m&&(m.atom||m.bond)){const _=m.atom||m.closestBondAtom;u.setMouseoveredColumn(_.resno-((y=h[0])==null?void 0:y.structure.startPos),_.chainname,m.picker.structure.name)}})})()},[u,h,a]),$.useEffect(()=>{if(a){for(const v of i)v.removeAllRepresentations(),v.addRepresentation(n,{sele:f});a.autoView()}},[n,i,a,f]),$.useEffect(()=>{h.length&&!l&&i.forEach((v,m)=>{if(t.current.length&&v.removeAnnotation(t.current[m]),t.current=[],p!==void 0){const y=v.structure,_=yut(e,h[m].id,y,p,h[0].structure.startPos);if(_){const b=y.getAtomProxy();b.index=_.atomOffset,t.current.push(v.addAnnotation(b.positionToVector3(),_.qualifiedName()))}}a==null||a.viewer.requestRender()})},[e,p,h,a==null?void 0:a.viewer,i,l]),d.length?G.jsxs("div",{style:{padding:20},children:[G.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[G.jsx(rB,{onClick:()=>u.clearSelectedStructures(),variant:"contained",children:"Clear"}),G.jsx("div",{style:{width:20}}),G.jsxs(N_,{value:n,onChange:v=>r(v.target.value),children:[G.jsx(fa,{value:"cartoon",children:"cartoon"}),G.jsx(fa,{value:"ball+stick",children:"ball+stick"})]}),G.jsx("div",{style:{width:20}}),G.jsx(_te,{variant:"outlined",label:"Selection",value:f,onChange:v=>e.setNGLSelection(v.target.value)})]}),G.jsx("div",{ref:g,style:{width:600,height:400},onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)})]}):null}),_ut=new URLSearchParams(window.location.search),TG=_ut.get("data"),ST=YZe.create(TG?JSON.parse(TG):{msaview:{type:"MsaView"}});ST.msaview.setWidth(window.innerWidth);let OG=0;wY(ST,e=>{const t=Date.now();if(t-OG>=1e3){OG=t;const n=new URL(window.document.URL);n.searchParams.set("data",JSON.stringify(e)),window.history.replaceState(null,"",n.toString())}});window.addEventListener("resize",()=>{ST.msaview.setWidth(window.innerWidth)});const xut=nr(({model:e})=>{const{msaview:t}=e;return G.jsxs("div",{children:[G.jsx("div",{style:{border:"1px solid black",margin:20},children:G.jsx(gKe,{model:t})}),G.jsx(but,{model:e})]})}),wut=()=>{const e=pB.createJBrowseTheme();return G.jsx(ND,{theme:e,children:G.jsx(xut,{model:ST})})};pk.createRoot(document.getElementById("root")).render(G.jsx(Be.StrictMode,{children:G.jsx(wut,{})}));export{bwe as $,De as A,rB as B,wSe as C,yCe as D,zs as E,bAe as F,Ie as G,iN as H,Eo as I,D_ as J,$_ as K,FQ as L,fa as M,HZ as N,p1 as O,us as P,ir as Q,Be as R,rN as S,_te as T,ZQ as U,SEe as V,iOe as W,Ot as X,Ol as Y,Tl as Z,I as _,$ as a,Ar as a0,fr as a1,DCe as a2,TEe as a3,GZ as a4,Co as a5,zxe as a6,oJ as a7,Eh as a8,Dwe as a9,zJ as aa,Yke as ab,Eg as ac,so as ad,Hp as ae,cQ as af,N_ as ag,TRe as ah,uMe as ai,dB as aj,kQ as ak,fJ as al,st as am,Sut as an,os as ao,YB as ap,Id as aq,dWe as ar,xh as as,jn as b,uCe as c,cYe as d,pQ as e,Ce as f,Ta as g,Zu as h,Er as i,G as j,RM as k,Rd as l,j_ as m,l$e as n,nr as o,it as p,at as q,Do as r,PD as s,ot as t,KC as u,vi as v,je as w,We as x,En as y,er as z};
//# sourceMappingURL=index-56495e8d.js.map
