function roe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var we=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Zi(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var GV={exports:{}},kC={},WV={exports:{}},an={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb=Symbol.for("react.element"),ioe=Symbol.for("react.portal"),ooe=Symbol.for("react.fragment"),soe=Symbol.for("react.strict_mode"),aoe=Symbol.for("react.profiler"),loe=Symbol.for("react.provider"),coe=Symbol.for("react.context"),uoe=Symbol.for("react.forward_ref"),doe=Symbol.for("react.suspense"),foe=Symbol.for("react.memo"),hoe=Symbol.for("react.lazy"),SB=Symbol.iterator;function poe(e){return e===null||typeof e!="object"?null:(e=SB&&e[SB]||e["@@iterator"],typeof e=="function"?e:null)}var qV={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},YV=Object.assign,XV={};function Bg(e,t,n){this.props=e,this.context=t,this.refs=XV,this.updater=n||qV}Bg.prototype.isReactComponent={};Bg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Bg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function KV(){}KV.prototype=Bg.prototype;function o$(e,t,n){this.props=e,this.context=t,this.refs=XV,this.updater=n||qV}var s$=o$.prototype=new KV;s$.constructor=o$;YV(s$,Bg.prototype);s$.isPureReactComponent=!0;var CB=Array.isArray,ZV=Object.prototype.hasOwnProperty,a$={current:null},JV={key:!0,ref:!0,__self:!0,__source:!0};function QV(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)ZV.call(t,r)&&!JV.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Xb,type:e,key:o,ref:s,props:i,_owner:a$.current}}function moe(e,t){return{$$typeof:Xb,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function l$(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xb}function goe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var AB=/\/+/g;function KE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?goe(""+e.key):t.toString(36)}function Dw(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Xb:case ioe:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+KE(s,0):r,CB(i)?(n="",e!=null&&(n=e.replace(AB,"$&/")+"/"),Dw(i,t,n,"",function(c){return c})):i!=null&&(l$(i)&&(i=moe(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(AB,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",CB(e))for(var a=0;a<e.length;a++){o=e[a];var l=r+KE(o,a);s+=Dw(o,t,n,l,i)}else if(l=poe(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=r+KE(o,a++),s+=Dw(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Lx(e,t,n){if(e==null)return e;var r=[],i=0;return Dw(e,r,"","",function(o){return t.call(n,o,i++)}),r}function voe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ji={current:null},Bw={transition:null},yoe={ReactCurrentDispatcher:Ji,ReactCurrentBatchConfig:Bw,ReactCurrentOwner:a$};an.Children={map:Lx,forEach:function(e,t,n){Lx(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Lx(e,function(){t++}),t},toArray:function(e){return Lx(e,function(t){return t})||[]},only:function(e){if(!l$(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};an.Component=Bg;an.Fragment=ooe;an.Profiler=aoe;an.PureComponent=o$;an.StrictMode=soe;an.Suspense=doe;an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yoe;an.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=YV({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=a$.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)ZV.call(t,l)&&!JV.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Xb,type:e.type,key:i,ref:o,props:r,_owner:s}};an.createContext=function(e){return e={$$typeof:coe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:loe,_context:e},e.Consumer=e};an.createElement=QV;an.createFactory=function(e){var t=QV.bind(null,e);return t.type=e,t};an.createRef=function(){return{current:null}};an.forwardRef=function(e){return{$$typeof:uoe,render:e}};an.isValidElement=l$;an.lazy=function(e){return{$$typeof:hoe,_payload:{_status:-1,_result:e},_init:voe}};an.memo=function(e,t){return{$$typeof:foe,type:e,compare:t===void 0?null:t}};an.startTransition=function(e){var t=Bw.transition;Bw.transition={};try{e()}finally{Bw.transition=t}};an.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};an.useCallback=function(e,t){return Ji.current.useCallback(e,t)};an.useContext=function(e){return Ji.current.useContext(e)};an.useDebugValue=function(){};an.useDeferredValue=function(e){return Ji.current.useDeferredValue(e)};an.useEffect=function(e,t){return Ji.current.useEffect(e,t)};an.useId=function(){return Ji.current.useId()};an.useImperativeHandle=function(e,t,n){return Ji.current.useImperativeHandle(e,t,n)};an.useInsertionEffect=function(e,t){return Ji.current.useInsertionEffect(e,t)};an.useLayoutEffect=function(e,t){return Ji.current.useLayoutEffect(e,t)};an.useMemo=function(e,t){return Ji.current.useMemo(e,t)};an.useReducer=function(e,t,n){return Ji.current.useReducer(e,t,n)};an.useRef=function(e){return Ji.current.useRef(e)};an.useState=function(e){return Ji.current.useState(e)};an.useSyncExternalStore=function(e,t,n){return Ji.current.useSyncExternalStore(e,t,n)};an.useTransition=function(){return Ji.current.useTransition()};an.version="18.2.0";WV.exports=an;var I=WV.exports;const $e=Dg(I),$I=roe({__proto__:null,default:$e},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var boe=I,xoe=Symbol.for("react.element"),_oe=Symbol.for("react.fragment"),woe=Object.prototype.hasOwnProperty,Soe=boe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Coe={key:!0,ref:!0,__self:!0,__source:!0};function eH(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)woe.call(t,r)&&!Coe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:xoe,type:e,key:o,ref:s,props:i,_owner:Soe.current}}kC.Fragment=_oe;kC.jsx=eH;kC.jsxs=eH;GV.exports=kC;var q=GV.exports,DI={},tH={exports:{}},is={},nH={exports:{}},rH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,V){var J=B.length;B.push(V);e:for(;0<J;){var K=J-1>>>1,ie=B[K];if(0<i(ie,V))B[K]=V,B[J]=ie,J=K;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var V=B[0],J=B.pop();if(J!==V){B[0]=J;e:for(var K=0,ie=B.length,ce=ie>>>1;K<ce;){var pe=2*(K+1)-1,se=B[pe],G=pe+1,he=B[G];if(0>i(se,J))G<ie&&0>i(he,se)?(B[K]=he,B[G]=J,K=G):(B[K]=se,B[pe]=J,K=pe);else if(G<ie&&0>i(he,J))B[K]=he,B[G]=J,K=G;else break e}}return V}function i(B,V){var J=B.sortIndex-V.sortIndex;return J!==0?J:B.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=B)r(c),V.sortIndex=V.expirationTime,t(l,V);else break;V=n(c)}}function _(B){if(g=!1,b(B),!p)if(n(l)!==null)p=!0,z(x);else{var V=n(c);V!==null&&H(_,V.startTime-B)}}function x(B,V){p=!1,g&&(g=!1,m(C),C=-1),h=!0;var J=f;try{for(b(V),d=n(l);d!==null&&(!(d.expirationTime>V)||B&&!O());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var ie=K(d.expirationTime<=V);V=e.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(l)&&r(l),b(V)}else r(l);d=n(l)}if(d!==null)var ce=!0;else{var pe=n(c);pe!==null&&H(_,pe.startTime-V),ce=!1}return ce}finally{d=null,f=J,h=!1}}var w=!1,S=null,C=-1,A=5,T=-1;function O(){return!(e.unstable_now()-T<A)}function R(){if(S!==null){var B=e.unstable_now();T=B;var V=!0;try{V=S(!0,B)}finally{V?L():(w=!1,S=null)}}else w=!1}var L;if(typeof y=="function")L=function(){y(R)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,$=D.port2;D.port1.onmessage=R,L=function(){$.postMessage(null)}}else L=function(){v(R,0)};function z(B){S=B,w||(w=!0,L())}function H(B,V){C=v(function(){B(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,z(x))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(B){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var J=f;f=V;try{return B()}finally{f=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=f;f=B;try{return V()}finally{f=J}},e.unstable_scheduleCallback=function(B,V,J){var K=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?K+J:K):J=K,B){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=J+ie,B={id:u++,callback:V,priorityLevel:B,startTime:J,expirationTime:ie,sortIndex:-1},J>K?(B.sortIndex=J,t(c,B),n(l)===null&&B===n(c)&&(g?(m(C),C=-1):g=!0,H(_,J-K))):(B.sortIndex=ie,t(l,B),p||h||(p=!0,z(x))),B},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(B){var V=f;return function(){var J=f;f=V;try{return B.apply(this,arguments)}finally{f=J}}}})(rH);nH.exports=rH;var Aoe=nH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iH=I,Xo=Aoe;function pt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oH=new Set,Cy={};function hh(e,t){wm(e,t),wm(e+"Capture",t)}function wm(e,t){for(Cy[e]=t,e=0;e<t.length;e++)oH.add(t[e])}var lc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),BI=Object.prototype.hasOwnProperty,Poe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PB={},MB={};function Moe(e){return BI.call(MB,e)?!0:BI.call(PB,e)?!1:Poe.test(e)?MB[e]=!0:(PB[e]=!0,!1)}function Eoe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Toe(e,t,n,r){if(t===null||typeof t>"u"||Eoe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qi(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pi[e]=new Qi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pi[t]=new Qi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pi[e]=new Qi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pi[e]=new Qi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pi[e]=new Qi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pi[e]=new Qi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pi[e]=new Qi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pi[e]=new Qi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pi[e]=new Qi(e,5,!1,e.toLowerCase(),null,!1,!1)});var c$=/[\-:]([a-z])/g;function u$(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(c$,u$);Pi[t]=new Qi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(c$,u$);Pi[t]=new Qi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(c$,u$);Pi[t]=new Qi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pi[e]=new Qi(e,1,!1,e.toLowerCase(),null,!1,!1)});Pi.xlinkHref=new Qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pi[e]=new Qi(e,1,!1,e.toLowerCase(),null,!0,!0)});function d$(e,t,n,r){var i=Pi.hasOwnProperty(t)?Pi[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Toe(t,n,i,r)&&(n=null),r||i===null?Moe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ec=iH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$x=Symbol.for("react.element"),Rp=Symbol.for("react.portal"),kp=Symbol.for("react.fragment"),f$=Symbol.for("react.strict_mode"),NI=Symbol.for("react.profiler"),sH=Symbol.for("react.provider"),aH=Symbol.for("react.context"),h$=Symbol.for("react.forward_ref"),FI=Symbol.for("react.suspense"),zI=Symbol.for("react.suspense_list"),p$=Symbol.for("react.memo"),iu=Symbol.for("react.lazy"),lH=Symbol.for("react.offscreen"),EB=Symbol.iterator;function Cv(e){return e===null||typeof e!="object"?null:(e=EB&&e[EB]||e["@@iterator"],typeof e=="function"?e:null)}var wr=Object.assign,ZE;function b0(e){if(ZE===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ZE=t&&t[1]||""}return`
`+ZE+e}var JE=!1;function QE(e,t){if(!e||JE)return"";JE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{JE=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?b0(e):""}function Ooe(e){switch(e.tag){case 5:return b0(e.type);case 16:return b0("Lazy");case 13:return b0("Suspense");case 19:return b0("SuspenseList");case 0:case 2:case 15:return e=QE(e.type,!1),e;case 11:return e=QE(e.type.render,!1),e;case 1:return e=QE(e.type,!0),e;default:return""}}function jI(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kp:return"Fragment";case Rp:return"Portal";case NI:return"Profiler";case f$:return"StrictMode";case FI:return"Suspense";case zI:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case aH:return(e.displayName||"Context")+".Consumer";case sH:return(e._context.displayName||"Context")+".Provider";case h$:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case p$:return t=e.displayName||null,t!==null?t:jI(e.type)||"Memo";case iu:t=e._payload,e=e._init;try{return jI(e(t))}catch{}}return null}function Ioe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jI(t);case 8:return t===f$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Du(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function cH(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Roe(e){var t=cH(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Dx(e){e._valueTracker||(e._valueTracker=Roe(e))}function uH(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=cH(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function IS(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function UI(e,t){var n=t.checked;return wr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function TB(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Du(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function dH(e,t){t=t.checked,t!=null&&d$(e,"checked",t,!1)}function VI(e,t){dH(e,t);var n=Du(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?HI(e,t.type,n):t.hasOwnProperty("defaultValue")&&HI(e,t.type,Du(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function OB(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function HI(e,t,n){(t!=="number"||IS(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var x0=Array.isArray;function nm(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Du(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function GI(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pt(91));return wr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function IB(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(pt(92));if(x0(n)){if(1<n.length)throw Error(pt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Du(n)}}function fH(e,t){var n=Du(t.value),r=Du(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function RB(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hH(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function WI(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hH(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bx,pH=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bx=Bx||document.createElement("div"),Bx.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bx.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ay(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var G0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},koe=["Webkit","ms","Moz","O"];Object.keys(G0).forEach(function(e){koe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),G0[t]=G0[e]})});function mH(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||G0.hasOwnProperty(e)&&G0[e]?(""+t).trim():t+"px"}function gH(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mH(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Loe=wr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qI(e,t){if(t){if(Loe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pt(62))}}function YI(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XI=null;function m$(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var KI=null,rm=null,im=null;function kB(e){if(e=Jb(e)){if(typeof KI!="function")throw Error(pt(280));var t=e.stateNode;t&&(t=NC(t),KI(e.stateNode,e.type,t))}}function vH(e){rm?im?im.push(e):im=[e]:rm=e}function yH(){if(rm){var e=rm,t=im;if(im=rm=null,kB(e),t)for(e=0;e<t.length;e++)kB(t[e])}}function bH(e,t){return e(t)}function xH(){}var eT=!1;function _H(e,t,n){if(eT)return e(t,n);eT=!0;try{return bH(e,t,n)}finally{eT=!1,(rm!==null||im!==null)&&(xH(),yH())}}function Py(e,t){var n=e.stateNode;if(n===null)return null;var r=NC(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(pt(231,t,typeof n));return n}var ZI=!1;if(lc)try{var Av={};Object.defineProperty(Av,"passive",{get:function(){ZI=!0}}),window.addEventListener("test",Av,Av),window.removeEventListener("test",Av,Av)}catch{ZI=!1}function $oe(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var W0=!1,RS=null,kS=!1,JI=null,Doe={onError:function(e){W0=!0,RS=e}};function Boe(e,t,n,r,i,o,s,a,l){W0=!1,RS=null,$oe.apply(Doe,arguments)}function Noe(e,t,n,r,i,o,s,a,l){if(Boe.apply(this,arguments),W0){if(W0){var c=RS;W0=!1,RS=null}else throw Error(pt(198));kS||(kS=!0,JI=c)}}function ph(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wH(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function LB(e){if(ph(e)!==e)throw Error(pt(188))}function Foe(e){var t=e.alternate;if(!t){if(t=ph(e),t===null)throw Error(pt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return LB(i),e;if(o===r)return LB(i),t;o=o.sibling}throw Error(pt(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(pt(189))}}if(n.alternate!==r)throw Error(pt(190))}if(n.tag!==3)throw Error(pt(188));return n.stateNode.current===n?e:t}function SH(e){return e=Foe(e),e!==null?CH(e):null}function CH(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=CH(e);if(t!==null)return t;e=e.sibling}return null}var AH=Xo.unstable_scheduleCallback,$B=Xo.unstable_cancelCallback,zoe=Xo.unstable_shouldYield,joe=Xo.unstable_requestPaint,kr=Xo.unstable_now,Uoe=Xo.unstable_getCurrentPriorityLevel,g$=Xo.unstable_ImmediatePriority,PH=Xo.unstable_UserBlockingPriority,LS=Xo.unstable_NormalPriority,Voe=Xo.unstable_LowPriority,MH=Xo.unstable_IdlePriority,LC=null,el=null;function Hoe(e){if(el&&typeof el.onCommitFiberRoot=="function")try{el.onCommitFiberRoot(LC,e,void 0,(e.current.flags&128)===128)}catch{}}var sa=Math.clz32?Math.clz32:qoe,Goe=Math.log,Woe=Math.LN2;function qoe(e){return e>>>=0,e===0?32:31-(Goe(e)/Woe|0)|0}var Nx=64,Fx=4194304;function _0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function $S(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=_0(a):(o&=s,o!==0&&(r=_0(o)))}else s=n&~i,s!==0?r=_0(s):o!==0&&(r=_0(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-sa(t),i=1<<n,r|=e[n],t&=~i;return r}function Yoe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xoe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-sa(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=Yoe(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function QI(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function EH(){var e=Nx;return Nx<<=1,!(Nx&4194240)&&(Nx=64),e}function tT(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Kb(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sa(t),e[t]=n}function Koe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-sa(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function v$(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-sa(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ln=0;function TH(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var OH,y$,IH,RH,kH,eR=!1,zx=[],gu=null,vu=null,yu=null,My=new Map,Ey=new Map,au=[],Zoe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DB(e,t){switch(e){case"focusin":case"focusout":gu=null;break;case"dragenter":case"dragleave":vu=null;break;case"mouseover":case"mouseout":yu=null;break;case"pointerover":case"pointerout":My.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ey.delete(t.pointerId)}}function Pv(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Jb(t),t!==null&&y$(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Joe(e,t,n,r,i){switch(t){case"focusin":return gu=Pv(gu,e,t,n,r,i),!0;case"dragenter":return vu=Pv(vu,e,t,n,r,i),!0;case"mouseover":return yu=Pv(yu,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return My.set(o,Pv(My.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ey.set(o,Pv(Ey.get(o)||null,e,t,n,r,i)),!0}return!1}function LH(e){var t=ff(e.target);if(t!==null){var n=ph(t);if(n!==null){if(t=n.tag,t===13){if(t=wH(n),t!==null){e.blockedOn=t,kH(e.priority,function(){IH(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Nw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tR(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);XI=r,n.target.dispatchEvent(r),XI=null}else return t=Jb(n),t!==null&&y$(t),e.blockedOn=n,!1;t.shift()}return!0}function BB(e,t,n){Nw(e)&&n.delete(t)}function Qoe(){eR=!1,gu!==null&&Nw(gu)&&(gu=null),vu!==null&&Nw(vu)&&(vu=null),yu!==null&&Nw(yu)&&(yu=null),My.forEach(BB),Ey.forEach(BB)}function Mv(e,t){e.blockedOn===t&&(e.blockedOn=null,eR||(eR=!0,Xo.unstable_scheduleCallback(Xo.unstable_NormalPriority,Qoe)))}function Ty(e){function t(i){return Mv(i,e)}if(0<zx.length){Mv(zx[0],e);for(var n=1;n<zx.length;n++){var r=zx[n];r.blockedOn===e&&(r.blockedOn=null)}}for(gu!==null&&Mv(gu,e),vu!==null&&Mv(vu,e),yu!==null&&Mv(yu,e),My.forEach(t),Ey.forEach(t),n=0;n<au.length;n++)r=au[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<au.length&&(n=au[0],n.blockedOn===null);)LH(n),n.blockedOn===null&&au.shift()}var om=Ec.ReactCurrentBatchConfig,DS=!0;function ese(e,t,n,r){var i=Ln,o=om.transition;om.transition=null;try{Ln=1,b$(e,t,n,r)}finally{Ln=i,om.transition=o}}function tse(e,t,n,r){var i=Ln,o=om.transition;om.transition=null;try{Ln=4,b$(e,t,n,r)}finally{Ln=i,om.transition=o}}function b$(e,t,n,r){if(DS){var i=tR(e,t,n,r);if(i===null)dT(e,t,r,BS,n),DB(e,r);else if(Joe(i,e,t,n,r))r.stopPropagation();else if(DB(e,r),t&4&&-1<Zoe.indexOf(e)){for(;i!==null;){var o=Jb(i);if(o!==null&&OH(o),o=tR(e,t,n,r),o===null&&dT(e,t,r,BS,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else dT(e,t,r,null,n)}}var BS=null;function tR(e,t,n,r){if(BS=null,e=m$(r),e=ff(e),e!==null)if(t=ph(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wH(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return BS=e,null}function $H(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uoe()){case g$:return 1;case PH:return 4;case LS:case Voe:return 16;case MH:return 536870912;default:return 16}default:return 16}}var uu=null,x$=null,Fw=null;function DH(){if(Fw)return Fw;var e,t=x$,n=t.length,r,i="value"in uu?uu.value:uu.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return Fw=i.slice(e,1<r?1-r:void 0)}function zw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jx(){return!0}function NB(){return!1}function os(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?jx:NB,this.isPropagationStopped=NB,this}return wr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jx)},persist:function(){},isPersistent:jx}),t}var Ng={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_$=os(Ng),Zb=wr({},Ng,{view:0,detail:0}),nse=os(Zb),nT,rT,Ev,$C=wr({},Zb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:w$,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ev&&(Ev&&e.type==="mousemove"?(nT=e.screenX-Ev.screenX,rT=e.screenY-Ev.screenY):rT=nT=0,Ev=e),nT)},movementY:function(e){return"movementY"in e?e.movementY:rT}}),FB=os($C),rse=wr({},$C,{dataTransfer:0}),ise=os(rse),ose=wr({},Zb,{relatedTarget:0}),iT=os(ose),sse=wr({},Ng,{animationName:0,elapsedTime:0,pseudoElement:0}),ase=os(sse),lse=wr({},Ng,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cse=os(lse),use=wr({},Ng,{data:0}),zB=os(use),dse={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fse={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hse={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pse(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hse[e])?!!t[e]:!1}function w$(){return pse}var mse=wr({},Zb,{key:function(e){if(e.key){var t=dse[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fse[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:w$,charCode:function(e){return e.type==="keypress"?zw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gse=os(mse),vse=wr({},$C,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jB=os(vse),yse=wr({},Zb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:w$}),bse=os(yse),xse=wr({},Ng,{propertyName:0,elapsedTime:0,pseudoElement:0}),_se=os(xse),wse=wr({},$C,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sse=os(wse),Cse=[9,13,27,32],S$=lc&&"CompositionEvent"in window,q0=null;lc&&"documentMode"in document&&(q0=document.documentMode);var Ase=lc&&"TextEvent"in window&&!q0,BH=lc&&(!S$||q0&&8<q0&&11>=q0),UB=" ",VB=!1;function NH(e,t){switch(e){case"keyup":return Cse.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FH(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lp=!1;function Pse(e,t){switch(e){case"compositionend":return FH(t);case"keypress":return t.which!==32?null:(VB=!0,UB);case"textInput":return e=t.data,e===UB&&VB?null:e;default:return null}}function Mse(e,t){if(Lp)return e==="compositionend"||!S$&&NH(e,t)?(e=DH(),Fw=x$=uu=null,Lp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return BH&&t.locale!=="ko"?null:t.data;default:return null}}var Ese={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function HB(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ese[e.type]:t==="textarea"}function zH(e,t,n,r){vH(r),t=NS(t,"onChange"),0<t.length&&(n=new _$("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Y0=null,Oy=null;function Tse(e){ZH(e,0)}function DC(e){var t=Bp(e);if(uH(t))return e}function Ose(e,t){if(e==="change")return t}var jH=!1;if(lc){var oT;if(lc){var sT="oninput"in document;if(!sT){var GB=document.createElement("div");GB.setAttribute("oninput","return;"),sT=typeof GB.oninput=="function"}oT=sT}else oT=!1;jH=oT&&(!document.documentMode||9<document.documentMode)}function WB(){Y0&&(Y0.detachEvent("onpropertychange",UH),Oy=Y0=null)}function UH(e){if(e.propertyName==="value"&&DC(Oy)){var t=[];zH(t,Oy,e,m$(e)),_H(Tse,t)}}function Ise(e,t,n){e==="focusin"?(WB(),Y0=t,Oy=n,Y0.attachEvent("onpropertychange",UH)):e==="focusout"&&WB()}function Rse(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return DC(Oy)}function kse(e,t){if(e==="click")return DC(t)}function Lse(e,t){if(e==="input"||e==="change")return DC(t)}function $se(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ha=typeof Object.is=="function"?Object.is:$se;function Iy(e,t){if(ha(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!BI.call(t,i)||!ha(e[i],t[i]))return!1}return!0}function qB(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function YB(e,t){var n=qB(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qB(n)}}function VH(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?VH(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function HH(){for(var e=window,t=IS();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=IS(e.document)}return t}function C$(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dse(e){var t=HH(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&VH(n.ownerDocument.documentElement,n)){if(r!==null&&C$(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=YB(n,o);var s=YB(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bse=lc&&"documentMode"in document&&11>=document.documentMode,$p=null,nR=null,X0=null,rR=!1;function XB(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rR||$p==null||$p!==IS(r)||(r=$p,"selectionStart"in r&&C$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),X0&&Iy(X0,r)||(X0=r,r=NS(nR,"onSelect"),0<r.length&&(t=new _$("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$p)))}function Ux(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Dp={animationend:Ux("Animation","AnimationEnd"),animationiteration:Ux("Animation","AnimationIteration"),animationstart:Ux("Animation","AnimationStart"),transitionend:Ux("Transition","TransitionEnd")},aT={},GH={};lc&&(GH=document.createElement("div").style,"AnimationEvent"in window||(delete Dp.animationend.animation,delete Dp.animationiteration.animation,delete Dp.animationstart.animation),"TransitionEvent"in window||delete Dp.transitionend.transition);function BC(e){if(aT[e])return aT[e];if(!Dp[e])return e;var t=Dp[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in GH)return aT[e]=t[n];return e}var WH=BC("animationend"),qH=BC("animationiteration"),YH=BC("animationstart"),XH=BC("transitionend"),KH=new Map,KB="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ed(e,t){KH.set(e,t),hh(t,[e])}for(var lT=0;lT<KB.length;lT++){var cT=KB[lT],Nse=cT.toLowerCase(),Fse=cT[0].toUpperCase()+cT.slice(1);ed(Nse,"on"+Fse)}ed(WH,"onAnimationEnd");ed(qH,"onAnimationIteration");ed(YH,"onAnimationStart");ed("dblclick","onDoubleClick");ed("focusin","onFocus");ed("focusout","onBlur");ed(XH,"onTransitionEnd");wm("onMouseEnter",["mouseout","mouseover"]);wm("onMouseLeave",["mouseout","mouseover"]);wm("onPointerEnter",["pointerout","pointerover"]);wm("onPointerLeave",["pointerout","pointerover"]);hh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hh("onBeforeInput",["compositionend","keypress","textInput","paste"]);hh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var w0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zse=new Set("cancel close invalid load scroll toggle".split(" ").concat(w0));function ZB(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Noe(r,t,void 0,e),e.currentTarget=null}function ZH(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;ZB(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;ZB(i,a,c),o=l}}}if(kS)throw e=JI,kS=!1,JI=null,e}function Qn(e,t){var n=t[lR];n===void 0&&(n=t[lR]=new Set);var r=e+"__bubble";n.has(r)||(JH(t,e,2,!1),n.add(r))}function uT(e,t,n){var r=0;t&&(r|=4),JH(n,e,r,t)}var Vx="_reactListening"+Math.random().toString(36).slice(2);function Ry(e){if(!e[Vx]){e[Vx]=!0,oH.forEach(function(n){n!=="selectionchange"&&(zse.has(n)||uT(n,!1,e),uT(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vx]||(t[Vx]=!0,uT("selectionchange",!1,t))}}function JH(e,t,n,r){switch($H(t)){case 1:var i=ese;break;case 4:i=tse;break;default:i=b$}n=i.bind(null,t,n,e),i=void 0,!ZI||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function dT(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=ff(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}_H(function(){var c=o,u=m$(n),d=[];e:{var f=KH.get(e);if(f!==void 0){var h=_$,p=e;switch(e){case"keypress":if(zw(n)===0)break e;case"keydown":case"keyup":h=gse;break;case"focusin":p="focus",h=iT;break;case"focusout":p="blur",h=iT;break;case"beforeblur":case"afterblur":h=iT;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=FB;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=ise;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=bse;break;case WH:case qH:case YH:h=ase;break;case XH:h=_se;break;case"scroll":h=nse;break;case"wheel":h=Sse;break;case"copy":case"cut":case"paste":h=cse;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=jB}var g=(t&4)!==0,v=!g&&e==="scroll",m=g?f!==null?f+"Capture":null:f;g=[];for(var y=c,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,m!==null&&(_=Py(y,m),_!=null&&g.push(ky(y,_,b)))),v)break;y=y.return}0<g.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==XI&&(p=n.relatedTarget||n.fromElement)&&(ff(p)||p[cc]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?ff(p):null,p!==null&&(v=ph(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(g=FB,_="onMouseLeave",m="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=jB,_="onPointerLeave",m="onPointerEnter",y="pointer"),v=h==null?f:Bp(h),b=p==null?f:Bp(p),f=new g(_,y+"leave",h,n,u),f.target=v,f.relatedTarget=b,_=null,ff(u)===c&&(g=new g(m,y+"enter",p,n,u),g.target=b,g.relatedTarget=v,_=g),v=_,h&&p)t:{for(g=h,m=p,y=0,b=g;b;b=Vh(b))y++;for(b=0,_=m;_;_=Vh(_))b++;for(;0<y-b;)g=Vh(g),y--;for(;0<b-y;)m=Vh(m),b--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Vh(g),m=Vh(m)}g=null}else g=null;h!==null&&JB(d,f,h,g,!1),p!==null&&v!==null&&JB(d,v,p,g,!0)}}e:{if(f=c?Bp(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var x=Ose;else if(HB(f))if(jH)x=Lse;else{x=Rse;var w=Ise}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(x=kse);if(x&&(x=x(e,c))){zH(d,x,n,u);break e}w&&w(e,f,c),e==="focusout"&&(w=f._wrapperState)&&w.controlled&&f.type==="number"&&HI(f,"number",f.value)}switch(w=c?Bp(c):window,e){case"focusin":(HB(w)||w.contentEditable==="true")&&($p=w,nR=c,X0=null);break;case"focusout":X0=nR=$p=null;break;case"mousedown":rR=!0;break;case"contextmenu":case"mouseup":case"dragend":rR=!1,XB(d,n,u);break;case"selectionchange":if(Bse)break;case"keydown":case"keyup":XB(d,n,u)}var S;if(S$)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Lp?NH(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(BH&&n.locale!=="ko"&&(Lp||C!=="onCompositionStart"?C==="onCompositionEnd"&&Lp&&(S=DH()):(uu=u,x$="value"in uu?uu.value:uu.textContent,Lp=!0)),w=NS(c,C),0<w.length&&(C=new zB(C,e,null,n,u),d.push({event:C,listeners:w}),S?C.data=S:(S=FH(n),S!==null&&(C.data=S)))),(S=Ase?Pse(e,n):Mse(e,n))&&(c=NS(c,"onBeforeInput"),0<c.length&&(u=new zB("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=S))}ZH(d,t)})}function ky(e,t,n){return{instance:e,listener:t,currentTarget:n}}function NS(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Py(e,n),o!=null&&r.unshift(ky(e,o,i)),o=Py(e,t),o!=null&&r.push(ky(e,o,i))),e=e.return}return r}function Vh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function JB(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Py(n,o),l!=null&&s.unshift(ky(n,l,a))):i||(l=Py(n,o),l!=null&&s.push(ky(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var jse=/\r\n?/g,Use=/\u0000|\uFFFD/g;function QB(e){return(typeof e=="string"?e:""+e).replace(jse,`
`).replace(Use,"")}function Hx(e,t,n){if(t=QB(t),QB(e)!==t&&n)throw Error(pt(425))}function FS(){}var iR=null,oR=null;function sR(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var aR=typeof setTimeout=="function"?setTimeout:void 0,Vse=typeof clearTimeout=="function"?clearTimeout:void 0,eN=typeof Promise=="function"?Promise:void 0,Hse=typeof queueMicrotask=="function"?queueMicrotask:typeof eN<"u"?function(e){return eN.resolve(null).then(e).catch(Gse)}:aR;function Gse(e){setTimeout(function(){throw e})}function fT(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ty(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ty(t)}function bu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Fg=Math.random().toString(36).slice(2),Ga="__reactFiber$"+Fg,Ly="__reactProps$"+Fg,cc="__reactContainer$"+Fg,lR="__reactEvents$"+Fg,Wse="__reactListeners$"+Fg,qse="__reactHandles$"+Fg;function ff(e){var t=e[Ga];if(t)return t;for(var n=e.parentNode;n;){if(t=n[cc]||n[Ga]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tN(e);e!==null;){if(n=e[Ga])return n;e=tN(e)}return t}e=n,n=e.parentNode}return null}function Jb(e){return e=e[Ga]||e[cc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pt(33))}function NC(e){return e[Ly]||null}var cR=[],Np=-1;function td(e){return{current:e}}function er(e){0>Np||(e.current=cR[Np],cR[Np]=null,Np--)}function Yn(e,t){Np++,cR[Np]=e.current,e.current=t}var Bu={},Di=td(Bu),yo=td(!1),Rf=Bu;function Sm(e,t){var n=e.type.contextTypes;if(!n)return Bu;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function bo(e){return e=e.childContextTypes,e!=null}function zS(){er(yo),er(Di)}function nN(e,t,n){if(Di.current!==Bu)throw Error(pt(168));Yn(Di,t),Yn(yo,n)}function QH(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(pt(108,Ioe(e)||"Unknown",i));return wr({},n,r)}function jS(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bu,Rf=Di.current,Yn(Di,e),Yn(yo,yo.current),!0}function rN(e,t,n){var r=e.stateNode;if(!r)throw Error(pt(169));n?(e=QH(e,t,Rf),r.__reactInternalMemoizedMergedChildContext=e,er(yo),er(Di),Yn(Di,e)):er(yo),Yn(yo,n)}var Gl=null,FC=!1,hT=!1;function eG(e){Gl===null?Gl=[e]:Gl.push(e)}function Yse(e){FC=!0,eG(e)}function nd(){if(!hT&&Gl!==null){hT=!0;var e=0,t=Ln;try{var n=Gl;for(Ln=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Gl=null,FC=!1}catch(i){throw Gl!==null&&(Gl=Gl.slice(e+1)),AH(g$,nd),i}finally{Ln=t,hT=!1}}return null}var Fp=[],zp=0,US=null,VS=0,bs=[],xs=0,kf=null,Zl=1,Jl="";function Wd(e,t){Fp[zp++]=VS,Fp[zp++]=US,US=e,VS=t}function tG(e,t,n){bs[xs++]=Zl,bs[xs++]=Jl,bs[xs++]=kf,kf=e;var r=Zl;e=Jl;var i=32-sa(r)-1;r&=~(1<<i),n+=1;var o=32-sa(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Zl=1<<32-sa(t)+i|n<<i|r,Jl=o+e}else Zl=1<<o|n<<i|r,Jl=e}function A$(e){e.return!==null&&(Wd(e,1),tG(e,1,0))}function P$(e){for(;e===US;)US=Fp[--zp],Fp[zp]=null,VS=Fp[--zp],Fp[zp]=null;for(;e===kf;)kf=bs[--xs],bs[xs]=null,Jl=bs[--xs],bs[xs]=null,Zl=bs[--xs],bs[xs]=null}var qo=null,Wo=null,dr=!1,na=null;function nG(e,t){var n=Cs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function iN(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qo=e,Wo=bu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qo=e,Wo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=kf!==null?{id:Zl,overflow:Jl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Cs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qo=e,Wo=null,!0):!1;default:return!1}}function uR(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dR(e){if(dr){var t=Wo;if(t){var n=t;if(!iN(e,t)){if(uR(e))throw Error(pt(418));t=bu(n.nextSibling);var r=qo;t&&iN(e,t)?nG(r,n):(e.flags=e.flags&-4097|2,dr=!1,qo=e)}}else{if(uR(e))throw Error(pt(418));e.flags=e.flags&-4097|2,dr=!1,qo=e}}}function oN(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qo=e}function Gx(e){if(e!==qo)return!1;if(!dr)return oN(e),dr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!sR(e.type,e.memoizedProps)),t&&(t=Wo)){if(uR(e))throw rG(),Error(pt(418));for(;t;)nG(e,t),t=bu(t.nextSibling)}if(oN(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wo=bu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wo=null}}else Wo=qo?bu(e.stateNode.nextSibling):null;return!0}function rG(){for(var e=Wo;e;)e=bu(e.nextSibling)}function Cm(){Wo=qo=null,dr=!1}function M$(e){na===null?na=[e]:na.push(e)}var Xse=Ec.ReactCurrentBatchConfig;function Js(e,t){if(e&&e.defaultProps){t=wr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var HS=td(null),GS=null,jp=null,E$=null;function T$(){E$=jp=GS=null}function O$(e){var t=HS.current;er(HS),e._currentValue=t}function fR(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function sm(e,t){GS=e,E$=jp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(mo=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(E$!==e)if(e={context:e,memoizedValue:t,next:null},jp===null){if(GS===null)throw Error(pt(308));jp=e,GS.dependencies={lanes:0,firstContext:e}}else jp=jp.next=e;return t}var hf=null;function I$(e){hf===null?hf=[e]:hf.push(e)}function iG(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,I$(t)):(n.next=i.next,i.next=n),t.interleaved=n,uc(e,r)}function uc(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ou=!1;function R$(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oG(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xu(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,hn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,uc(e,n)}return i=r.interleaved,i===null?(t.next=t,I$(r)):(t.next=i.next,i.next=t),r.interleaved=t,uc(e,n)}function jw(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,v$(e,n)}}function sN(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function WS(e,t,n,r){var i=e.updateQueue;ou=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(f=t,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=wr({},d,f);break e;case 2:ou=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);$f|=s,e.lanes=s,e.memoizedState=d}}function aN(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(pt(191,i));i.call(r)}}}var sG=new iH.Component().refs;function hR(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:wr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zC={isMounted:function(e){return(e=e._reactInternals)?ph(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gi(),i=wu(e),o=rc(r,i);o.payload=t,n!=null&&(o.callback=n),t=xu(e,o,i),t!==null&&(aa(t,e,i,r),jw(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gi(),i=wu(e),o=rc(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=xu(e,o,i),t!==null&&(aa(t,e,i,r),jw(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gi(),r=wu(e),i=rc(n,r);i.tag=2,t!=null&&(i.callback=t),t=xu(e,i,r),t!==null&&(aa(t,e,r,n),jw(t,e,r))}};function lN(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Iy(n,r)||!Iy(i,o):!0}function aG(e,t,n){var r=!1,i=Bu,o=t.contextType;return typeof o=="object"&&o!==null?o=Rs(o):(i=bo(t)?Rf:Di.current,r=t.contextTypes,o=(r=r!=null)?Sm(e,i):Bu),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zC,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function cN(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zC.enqueueReplaceState(t,t.state,null)}function pR(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=sG,R$(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=Rs(o):(o=bo(t)?Rf:Di.current,i.context=Sm(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(hR(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&zC.enqueueReplaceState(i,i.state,null),WS(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Tv(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(pt(309));var r=n.stateNode}if(!r)throw Error(pt(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=i.refs;a===sG&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(pt(284));if(!n._owner)throw Error(pt(290,e))}return e}function Wx(e,t){throw e=Object.prototype.toString.call(t),Error(pt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uN(e){var t=e._init;return t(e._payload)}function lG(e){function t(m,y){if(e){var b=m.deletions;b===null?(m.deletions=[y],m.flags|=16):b.push(y)}}function n(m,y){if(!e)return null;for(;y!==null;)t(m,y),y=y.sibling;return null}function r(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function i(m,y){return m=Su(m,y),m.index=0,m.sibling=null,m}function o(m,y,b){return m.index=b,e?(b=m.alternate,b!==null?(b=b.index,b<y?(m.flags|=2,y):b):(m.flags|=2,y)):(m.flags|=1048576,y)}function s(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,y,b,_){return y===null||y.tag!==6?(y=xT(b,m.mode,_),y.return=m,y):(y=i(y,b),y.return=m,y)}function l(m,y,b,_){var x=b.type;return x===kp?u(m,y,b.props.children,_,b.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===iu&&uN(x)===y.type)?(_=i(y,b.props),_.ref=Tv(m,y,b),_.return=m,_):(_=qw(b.type,b.key,b.props,null,m.mode,_),_.ref=Tv(m,y,b),_.return=m,_)}function c(m,y,b,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=_T(b,m.mode,_),y.return=m,y):(y=i(y,b.children||[]),y.return=m,y)}function u(m,y,b,_,x){return y===null||y.tag!==7?(y=xf(b,m.mode,_,x),y.return=m,y):(y=i(y,b),y.return=m,y)}function d(m,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=xT(""+y,m.mode,b),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $x:return b=qw(y.type,y.key,y.props,null,m.mode,b),b.ref=Tv(m,null,y),b.return=m,b;case Rp:return y=_T(y,m.mode,b),y.return=m,y;case iu:var _=y._init;return d(m,_(y._payload),b)}if(x0(y)||Cv(y))return y=xf(y,m.mode,b,null),y.return=m,y;Wx(m,y)}return null}function f(m,y,b,_){var x=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:a(m,y,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $x:return b.key===x?l(m,y,b,_):null;case Rp:return b.key===x?c(m,y,b,_):null;case iu:return x=b._init,f(m,y,x(b._payload),_)}if(x0(b)||Cv(b))return x!==null?null:u(m,y,b,_,null);Wx(m,b)}return null}function h(m,y,b,_,x){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(b)||null,a(y,m,""+_,x);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $x:return m=m.get(_.key===null?b:_.key)||null,l(y,m,_,x);case Rp:return m=m.get(_.key===null?b:_.key)||null,c(y,m,_,x);case iu:var w=_._init;return h(m,y,b,w(_._payload),x)}if(x0(_)||Cv(_))return m=m.get(b)||null,u(y,m,_,x,null);Wx(y,_)}return null}function p(m,y,b,_){for(var x=null,w=null,S=y,C=y=0,A=null;S!==null&&C<b.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var T=f(m,S,b[C],_);if(T===null){S===null&&(S=A);break}e&&S&&T.alternate===null&&t(m,S),y=o(T,y,C),w===null?x=T:w.sibling=T,w=T,S=A}if(C===b.length)return n(m,S),dr&&Wd(m,C),x;if(S===null){for(;C<b.length;C++)S=d(m,b[C],_),S!==null&&(y=o(S,y,C),w===null?x=S:w.sibling=S,w=S);return dr&&Wd(m,C),x}for(S=r(m,S);C<b.length;C++)A=h(S,m,C,b[C],_),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),y=o(A,y,C),w===null?x=A:w.sibling=A,w=A);return e&&S.forEach(function(O){return t(m,O)}),dr&&Wd(m,C),x}function g(m,y,b,_){var x=Cv(b);if(typeof x!="function")throw Error(pt(150));if(b=x.call(b),b==null)throw Error(pt(151));for(var w=x=null,S=y,C=y=0,A=null,T=b.next();S!==null&&!T.done;C++,T=b.next()){S.index>C?(A=S,S=null):A=S.sibling;var O=f(m,S,T.value,_);if(O===null){S===null&&(S=A);break}e&&S&&O.alternate===null&&t(m,S),y=o(O,y,C),w===null?x=O:w.sibling=O,w=O,S=A}if(T.done)return n(m,S),dr&&Wd(m,C),x;if(S===null){for(;!T.done;C++,T=b.next())T=d(m,T.value,_),T!==null&&(y=o(T,y,C),w===null?x=T:w.sibling=T,w=T);return dr&&Wd(m,C),x}for(S=r(m,S);!T.done;C++,T=b.next())T=h(S,m,C,T.value,_),T!==null&&(e&&T.alternate!==null&&S.delete(T.key===null?C:T.key),y=o(T,y,C),w===null?x=T:w.sibling=T,w=T);return e&&S.forEach(function(R){return t(m,R)}),dr&&Wd(m,C),x}function v(m,y,b,_){if(typeof b=="object"&&b!==null&&b.type===kp&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $x:e:{for(var x=b.key,w=y;w!==null;){if(w.key===x){if(x=b.type,x===kp){if(w.tag===7){n(m,w.sibling),y=i(w,b.props.children),y.return=m,m=y;break e}}else if(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===iu&&uN(x)===w.type){n(m,w.sibling),y=i(w,b.props),y.ref=Tv(m,w,b),y.return=m,m=y;break e}n(m,w);break}else t(m,w);w=w.sibling}b.type===kp?(y=xf(b.props.children,m.mode,_,b.key),y.return=m,m=y):(_=qw(b.type,b.key,b.props,null,m.mode,_),_.ref=Tv(m,y,b),_.return=m,m=_)}return s(m);case Rp:e:{for(w=b.key;y!==null;){if(y.key===w)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(m,y.sibling),y=i(y,b.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else t(m,y);y=y.sibling}y=_T(b,m.mode,_),y.return=m,m=y}return s(m);case iu:return w=b._init,v(m,y,w(b._payload),_)}if(x0(b))return p(m,y,b,_);if(Cv(b))return g(m,y,b,_);Wx(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(m,y.sibling),y=i(y,b),y.return=m,m=y):(n(m,y),y=xT(b,m.mode,_),y.return=m,m=y),s(m)):n(m,y)}return v}var Am=lG(!0),cG=lG(!1),Qb={},tl=td(Qb),$y=td(Qb),Dy=td(Qb);function pf(e){if(e===Qb)throw Error(pt(174));return e}function k$(e,t){switch(Yn(Dy,t),Yn($y,e),Yn(tl,Qb),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:WI(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=WI(t,e)}er(tl),Yn(tl,t)}function Pm(){er(tl),er($y),er(Dy)}function uG(e){pf(Dy.current);var t=pf(tl.current),n=WI(t,e.type);t!==n&&(Yn($y,e),Yn(tl,n))}function L$(e){$y.current===e&&(er(tl),er($y))}var gr=td(0);function qS(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pT=[];function $$(){for(var e=0;e<pT.length;e++)pT[e]._workInProgressVersionPrimary=null;pT.length=0}var Uw=Ec.ReactCurrentDispatcher,mT=Ec.ReactCurrentBatchConfig,Lf=0,_r=null,Qr=null,ui=null,YS=!1,K0=!1,By=0,Kse=0;function Ti(){throw Error(pt(321))}function D$(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ha(e[n],t[n]))return!1;return!0}function B$(e,t,n,r,i,o){if(Lf=o,_r=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Uw.current=e===null||e.memoizedState===null?eae:tae,e=n(r,i),K0){o=0;do{if(K0=!1,By=0,25<=o)throw Error(pt(301));o+=1,ui=Qr=null,t.updateQueue=null,Uw.current=nae,e=n(r,i)}while(K0)}if(Uw.current=XS,t=Qr!==null&&Qr.next!==null,Lf=0,ui=Qr=_r=null,YS=!1,t)throw Error(pt(300));return e}function N$(){var e=By!==0;return By=0,e}function Na(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?_r.memoizedState=ui=e:ui=ui.next=e,ui}function ks(){if(Qr===null){var e=_r.alternate;e=e!==null?e.memoizedState:null}else e=Qr.next;var t=ui===null?_r.memoizedState:ui.next;if(t!==null)ui=t,Qr=e;else{if(e===null)throw Error(pt(310));Qr=e,e={memoizedState:Qr.memoizedState,baseState:Qr.baseState,baseQueue:Qr.baseQueue,queue:Qr.queue,next:null},ui===null?_r.memoizedState=ui=e:ui=ui.next=e}return ui}function Ny(e,t){return typeof t=="function"?t(e):t}function gT(e){var t=ks(),n=t.queue;if(n===null)throw Error(pt(311));n.lastRenderedReducer=e;var r=Qr,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((Lf&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,_r.lanes|=u,$f|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,ha(r,t.memoizedState)||(mo=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,_r.lanes|=o,$f|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vT(e){var t=ks(),n=t.queue;if(n===null)throw Error(pt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);ha(o,t.memoizedState)||(mo=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function dG(){}function fG(e,t){var n=_r,r=ks(),i=t(),o=!ha(r.memoizedState,i);if(o&&(r.memoizedState=i,mo=!0),r=r.queue,F$(mG.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||ui!==null&&ui.memoizedState.tag&1){if(n.flags|=2048,Fy(9,pG.bind(null,n,r,i,t),void 0,null),hi===null)throw Error(pt(349));Lf&30||hG(n,t,i)}return i}function hG(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=_r.updateQueue,t===null?(t={lastEffect:null,stores:null},_r.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pG(e,t,n,r){t.value=n,t.getSnapshot=r,gG(t)&&vG(e)}function mG(e,t,n){return n(function(){gG(t)&&vG(e)})}function gG(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ha(e,n)}catch{return!0}}function vG(e){var t=uc(e,1);t!==null&&aa(t,e,1,-1)}function dN(e){var t=Na();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ny,lastRenderedState:e},t.queue=e,e=e.dispatch=Qse.bind(null,_r,e),[t.memoizedState,e]}function Fy(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=_r.updateQueue,t===null?(t={lastEffect:null,stores:null},_r.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function yG(){return ks().memoizedState}function Vw(e,t,n,r){var i=Na();_r.flags|=e,i.memoizedState=Fy(1|t,n,void 0,r===void 0?null:r)}function jC(e,t,n,r){var i=ks();r=r===void 0?null:r;var o=void 0;if(Qr!==null){var s=Qr.memoizedState;if(o=s.destroy,r!==null&&D$(r,s.deps)){i.memoizedState=Fy(t,n,o,r);return}}_r.flags|=e,i.memoizedState=Fy(1|t,n,o,r)}function fN(e,t){return Vw(8390656,8,e,t)}function F$(e,t){return jC(2048,8,e,t)}function bG(e,t){return jC(4,2,e,t)}function xG(e,t){return jC(4,4,e,t)}function _G(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wG(e,t,n){return n=n!=null?n.concat([e]):null,jC(4,4,_G.bind(null,t,e),n)}function z$(){}function SG(e,t){var n=ks();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&D$(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function CG(e,t){var n=ks();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&D$(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function AG(e,t,n){return Lf&21?(ha(n,t)||(n=EH(),_r.lanes|=n,$f|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,mo=!0),e.memoizedState=n)}function Zse(e,t){var n=Ln;Ln=n!==0&&4>n?n:4,e(!0);var r=mT.transition;mT.transition={};try{e(!1),t()}finally{Ln=n,mT.transition=r}}function PG(){return ks().memoizedState}function Jse(e,t,n){var r=wu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},MG(e))EG(t,n);else if(n=iG(e,t,n,r),n!==null){var i=Gi();aa(n,e,r,i),TG(n,t,r)}}function Qse(e,t,n){var r=wu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(MG(e))EG(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ha(a,s)){var l=t.interleaved;l===null?(i.next=i,I$(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=iG(e,t,i,r),n!==null&&(i=Gi(),aa(n,e,r,i),TG(n,t,r))}}function MG(e){var t=e.alternate;return e===_r||t!==null&&t===_r}function EG(e,t){K0=YS=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function TG(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,v$(e,n)}}var XS={readContext:Rs,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useInsertionEffect:Ti,useLayoutEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useMutableSource:Ti,useSyncExternalStore:Ti,useId:Ti,unstable_isNewReconciler:!1},eae={readContext:Rs,useCallback:function(e,t){return Na().memoizedState=[e,t===void 0?null:t],e},useContext:Rs,useEffect:fN,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vw(4194308,4,_G.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vw(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vw(4,2,e,t)},useMemo:function(e,t){var n=Na();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Na();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jse.bind(null,_r,e),[r.memoizedState,e]},useRef:function(e){var t=Na();return e={current:e},t.memoizedState=e},useState:dN,useDebugValue:z$,useDeferredValue:function(e){return Na().memoizedState=e},useTransition:function(){var e=dN(!1),t=e[0];return e=Zse.bind(null,e[1]),Na().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=_r,i=Na();if(dr){if(n===void 0)throw Error(pt(407));n=n()}else{if(n=t(),hi===null)throw Error(pt(349));Lf&30||hG(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,fN(mG.bind(null,r,o,e),[e]),r.flags|=2048,Fy(9,pG.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Na(),t=hi.identifierPrefix;if(dr){var n=Jl,r=Zl;n=(r&~(1<<32-sa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=By++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Kse++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tae={readContext:Rs,useCallback:SG,useContext:Rs,useEffect:F$,useImperativeHandle:wG,useInsertionEffect:bG,useLayoutEffect:xG,useMemo:CG,useReducer:gT,useRef:yG,useState:function(){return gT(Ny)},useDebugValue:z$,useDeferredValue:function(e){var t=ks();return AG(t,Qr.memoizedState,e)},useTransition:function(){var e=gT(Ny)[0],t=ks().memoizedState;return[e,t]},useMutableSource:dG,useSyncExternalStore:fG,useId:PG,unstable_isNewReconciler:!1},nae={readContext:Rs,useCallback:SG,useContext:Rs,useEffect:F$,useImperativeHandle:wG,useInsertionEffect:bG,useLayoutEffect:xG,useMemo:CG,useReducer:vT,useRef:yG,useState:function(){return vT(Ny)},useDebugValue:z$,useDeferredValue:function(e){var t=ks();return Qr===null?t.memoizedState=e:AG(t,Qr.memoizedState,e)},useTransition:function(){var e=vT(Ny)[0],t=ks().memoizedState;return[e,t]},useMutableSource:dG,useSyncExternalStore:fG,useId:PG,unstable_isNewReconciler:!1};function Mm(e,t){try{var n="",r=t;do n+=Ooe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function yT(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function mR(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var rae=typeof WeakMap=="function"?WeakMap:Map;function OG(e,t,n){n=rc(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ZS||(ZS=!0,AR=r),mR(e,t)},n}function IG(e,t,n){n=rc(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){mR(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mR(e,t),typeof r!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function hN(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new rae;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=vae.bind(null,e,t,n),t.then(e,e))}function pN(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mN(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=rc(-1,1),t.tag=2,xu(n,t,1))),n.lanes|=1),e)}var iae=Ec.ReactCurrentOwner,mo=!1;function Vi(e,t,n,r){t.child=e===null?cG(t,null,n,r):Am(t,e.child,n,r)}function gN(e,t,n,r,i){n=n.render;var o=t.ref;return sm(t,i),r=B$(e,t,n,r,o,i),n=N$(),e!==null&&!mo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,dc(e,t,i)):(dr&&n&&A$(t),t.flags|=1,Vi(e,t,r,i),t.child)}function vN(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Y$(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,RG(e,t,o,r,i)):(e=qw(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Iy,n(s,r)&&e.ref===t.ref)return dc(e,t,i)}return t.flags|=1,e=Su(o,r),e.ref=t.ref,e.return=t,t.child=e}function RG(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Iy(o,r)&&e.ref===t.ref)if(mo=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(mo=!0);else return t.lanes=e.lanes,dc(e,t,i)}return gR(e,t,n,r,i)}function kG(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yn(Vp,jo),jo|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Yn(Vp,jo),jo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Yn(Vp,jo),jo|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Yn(Vp,jo),jo|=r;return Vi(e,t,i,n),t.child}function LG(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function gR(e,t,n,r,i){var o=bo(n)?Rf:Di.current;return o=Sm(t,o),sm(t,i),n=B$(e,t,n,r,o,i),r=N$(),e!==null&&!mo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,dc(e,t,i)):(dr&&r&&A$(t),t.flags|=1,Vi(e,t,n,i),t.child)}function yN(e,t,n,r,i){if(bo(n)){var o=!0;jS(t)}else o=!1;if(sm(t,i),t.stateNode===null)Hw(e,t),aG(t,n,r),pR(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Rs(c):(c=bo(n)?Rf:Di.current,c=Sm(t,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&cN(t,s,r,c),ou=!1;var f=t.memoizedState;s.state=f,WS(t,r,s,i),l=t.memoizedState,a!==r||f!==l||yo.current||ou?(typeof u=="function"&&(hR(t,n,u,r),l=t.memoizedState),(a=ou||lN(t,n,a,r,f,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,oG(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Js(t.type,a),s.props=c,d=t.pendingProps,f=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Rs(l):(l=bo(n)?Rf:Di.current,l=Sm(t,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==l)&&cN(t,s,r,l),ou=!1,f=t.memoizedState,s.state=f,WS(t,r,s,i);var p=t.memoizedState;a!==d||f!==p||yo.current||ou?(typeof h=="function"&&(hR(t,n,h,r),p=t.memoizedState),(c=ou||lN(t,n,c,r,f,p,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return vR(e,t,n,r,o,i)}function vR(e,t,n,r,i,o){LG(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&rN(t,n,!1),dc(e,t,o);r=t.stateNode,iae.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=Am(t,e.child,null,o),t.child=Am(t,null,a,o)):Vi(e,t,a,o),t.memoizedState=r.state,i&&rN(t,n,!0),t.child}function $G(e){var t=e.stateNode;t.pendingContext?nN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nN(e,t.context,!1),k$(e,t.containerInfo)}function bN(e,t,n,r,i){return Cm(),M$(i),t.flags|=256,Vi(e,t,n,r),t.child}var yR={dehydrated:null,treeContext:null,retryLane:0};function bR(e){return{baseLanes:e,cachePool:null,transitions:null}}function DG(e,t,n){var r=t.pendingProps,i=gr.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Yn(gr,i&1),e===null)return dR(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=HC(s,r,0,null),e=xf(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=bR(n),t.memoizedState=yR,e):j$(t,s));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return oae(e,t,s,r,a,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=Su(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Su(a,o):(o=xf(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?bR(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=yR,r}return o=e.child,e=o.sibling,r=Su(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function j$(e,t){return t=HC({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qx(e,t,n,r){return r!==null&&M$(r),Am(t,e.child,null,n),e=j$(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oae(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=yT(Error(pt(422))),qx(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=HC({mode:"visible",children:r.children},i,0,null),o=xf(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Am(t,e.child,null,s),t.child.memoizedState=bR(s),t.memoizedState=yR,o);if(!(t.mode&1))return qx(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(pt(419)),r=yT(o,r,void 0),qx(e,t,s,r)}if(a=(s&e.childLanes)!==0,mo||a){if(r=hi,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,uc(e,i),aa(r,e,i,-1))}return q$(),r=yT(Error(pt(421))),qx(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=yae.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Wo=bu(i.nextSibling),qo=t,dr=!0,na=null,e!==null&&(bs[xs++]=Zl,bs[xs++]=Jl,bs[xs++]=kf,Zl=e.id,Jl=e.overflow,kf=t),t=j$(t,r.children),t.flags|=4096,t)}function xN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),fR(e.return,t,n)}function bT(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function BG(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Vi(e,t,r.children,n),r=gr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xN(e,n,t);else if(e.tag===19)xN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Yn(gr,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&qS(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),bT(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&qS(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}bT(t,!0,n,null,o);break;case"together":bT(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hw(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function dc(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$f|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(pt(153));if(t.child!==null){for(e=t.child,n=Su(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Su(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sae(e,t,n){switch(t.tag){case 3:$G(t),Cm();break;case 5:uG(t);break;case 1:bo(t.type)&&jS(t);break;case 4:k$(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Yn(HS,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Yn(gr,gr.current&1),t.flags|=128,null):n&t.child.childLanes?DG(e,t,n):(Yn(gr,gr.current&1),e=dc(e,t,n),e!==null?e.sibling:null);Yn(gr,gr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return BG(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yn(gr,gr.current),r)break;return null;case 22:case 23:return t.lanes=0,kG(e,t,n)}return dc(e,t,n)}var NG,xR,FG,zG;NG=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xR=function(){};FG=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,pf(tl.current);var o=null;switch(n){case"input":i=UI(e,i),r=UI(e,r),o=[];break;case"select":i=wr({},i,{value:void 0}),r=wr({},r,{value:void 0}),o=[];break;case"textarea":i=GI(e,i),r=GI(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=FS)}qI(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Cy.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Cy.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Qn("scroll",e),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};zG=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ov(e,t){if(!dr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Oi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function aae(e,t,n){var r=t.pendingProps;switch(P$(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oi(t),null;case 1:return bo(t.type)&&zS(),Oi(t),null;case 3:return r=t.stateNode,Pm(),er(yo),er(Di),$$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Gx(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,na!==null&&(ER(na),na=null))),xR(e,t),Oi(t),null;case 5:L$(t);var i=pf(Dy.current);if(n=t.type,e!==null&&t.stateNode!=null)FG(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(pt(166));return Oi(t),null}if(e=pf(tl.current),Gx(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Ga]=t,r[Ly]=o,e=(t.mode&1)!==0,n){case"dialog":Qn("cancel",r),Qn("close",r);break;case"iframe":case"object":case"embed":Qn("load",r);break;case"video":case"audio":for(i=0;i<w0.length;i++)Qn(w0[i],r);break;case"source":Qn("error",r);break;case"img":case"image":case"link":Qn("error",r),Qn("load",r);break;case"details":Qn("toggle",r);break;case"input":TB(r,o),Qn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Qn("invalid",r);break;case"textarea":IB(r,o),Qn("invalid",r)}qI(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Hx(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Hx(r.textContent,a,e),i=["children",""+a]):Cy.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Qn("scroll",r)}switch(n){case"input":Dx(r),OB(r,o,!0);break;case"textarea":Dx(r),RB(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=FS)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hH(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Ga]=t,e[Ly]=r,NG(e,t,!1,!1),t.stateNode=e;e:{switch(s=YI(n,r),n){case"dialog":Qn("cancel",e),Qn("close",e),i=r;break;case"iframe":case"object":case"embed":Qn("load",e),i=r;break;case"video":case"audio":for(i=0;i<w0.length;i++)Qn(w0[i],e);i=r;break;case"source":Qn("error",e),i=r;break;case"img":case"image":case"link":Qn("error",e),Qn("load",e),i=r;break;case"details":Qn("toggle",e),i=r;break;case"input":TB(e,r),i=UI(e,r),Qn("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=wr({},r,{value:void 0}),Qn("invalid",e);break;case"textarea":IB(e,r),i=GI(e,r),Qn("invalid",e);break;default:i=r}qI(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?gH(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&pH(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ay(e,l):typeof l=="number"&&Ay(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cy.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Qn("scroll",e):l!=null&&d$(e,o,l,s))}switch(n){case"input":Dx(e),OB(e,r,!1);break;case"textarea":Dx(e),RB(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Du(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?nm(e,!!r.multiple,o,!1):r.defaultValue!=null&&nm(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=FS)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oi(t),null;case 6:if(e&&t.stateNode!=null)zG(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(pt(166));if(n=pf(Dy.current),pf(tl.current),Gx(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ga]=t,(o=r.nodeValue!==n)&&(e=qo,e!==null))switch(e.tag){case 3:Hx(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hx(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ga]=t,t.stateNode=r}return Oi(t),null;case 13:if(er(gr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(dr&&Wo!==null&&t.mode&1&&!(t.flags&128))rG(),Cm(),t.flags|=98560,o=!1;else if(o=Gx(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(pt(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(pt(317));o[Ga]=t}else Cm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oi(t),o=!1}else na!==null&&(ER(na),na=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||gr.current&1?ti===0&&(ti=3):q$())),t.updateQueue!==null&&(t.flags|=4),Oi(t),null);case 4:return Pm(),xR(e,t),e===null&&Ry(t.stateNode.containerInfo),Oi(t),null;case 10:return O$(t.type._context),Oi(t),null;case 17:return bo(t.type)&&zS(),Oi(t),null;case 19:if(er(gr),o=t.memoizedState,o===null)return Oi(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Ov(o,!1);else{if(ti!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=qS(e),s!==null){for(t.flags|=128,Ov(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Yn(gr,gr.current&1|2),t.child}e=e.sibling}o.tail!==null&&kr()>Em&&(t.flags|=128,r=!0,Ov(o,!1),t.lanes=4194304)}else{if(!r)if(e=qS(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ov(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!dr)return Oi(t),null}else 2*kr()-o.renderingStartTime>Em&&n!==1073741824&&(t.flags|=128,r=!0,Ov(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=kr(),t.sibling=null,n=gr.current,Yn(gr,r?n&1|2:n&1),t):(Oi(t),null);case 22:case 23:return W$(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?jo&1073741824&&(Oi(t),t.subtreeFlags&6&&(t.flags|=8192)):Oi(t),null;case 24:return null;case 25:return null}throw Error(pt(156,t.tag))}function lae(e,t){switch(P$(t),t.tag){case 1:return bo(t.type)&&zS(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pm(),er(yo),er(Di),$$(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return L$(t),null;case 13:if(er(gr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pt(340));Cm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return er(gr),null;case 4:return Pm(),null;case 10:return O$(t.type._context),null;case 22:case 23:return W$(),null;case 24:return null;default:return null}}var Yx=!1,Li=!1,cae=typeof WeakSet=="function"?WeakSet:Set,Mt=null;function Up(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Er(e,t,r)}else n.current=null}function _R(e,t,n){try{n()}catch(r){Er(e,t,r)}}var _N=!1;function uae(e,t){if(iR=DS,e=HH(),C$(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++c===i&&(a=s),f===o&&++u===r&&(l=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(oR={focusedElem:e,selectionRange:n},DS=!1,Mt=t;Mt!==null;)if(t=Mt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Mt=e;else for(;Mt!==null;){t=Mt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=t.stateNode,y=m.getSnapshotBeforeUpdate(t.elementType===t.type?g:Js(t.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pt(163))}}catch(_){Er(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Mt=e;break}Mt=t.return}return p=_N,_N=!1,p}function Z0(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&_R(t,n,o)}i=i.next}while(i!==r)}}function UC(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function wR(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function jG(e){var t=e.alternate;t!==null&&(e.alternate=null,jG(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ga],delete t[Ly],delete t[lR],delete t[Wse],delete t[qse])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function UG(e){return e.tag===5||e.tag===3||e.tag===4}function wN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||UG(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function SR(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=FS));else if(r!==4&&(e=e.child,e!==null))for(SR(e,t,n),e=e.sibling;e!==null;)SR(e,t,n),e=e.sibling}function CR(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(CR(e,t,n),e=e.sibling;e!==null;)CR(e,t,n),e=e.sibling}var vi=null,ea=!1;function zc(e,t,n){for(n=n.child;n!==null;)VG(e,t,n),n=n.sibling}function VG(e,t,n){if(el&&typeof el.onCommitFiberUnmount=="function")try{el.onCommitFiberUnmount(LC,n)}catch{}switch(n.tag){case 5:Li||Up(n,t);case 6:var r=vi,i=ea;vi=null,zc(e,t,n),vi=r,ea=i,vi!==null&&(ea?(e=vi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):vi.removeChild(n.stateNode));break;case 18:vi!==null&&(ea?(e=vi,n=n.stateNode,e.nodeType===8?fT(e.parentNode,n):e.nodeType===1&&fT(e,n),Ty(e)):fT(vi,n.stateNode));break;case 4:r=vi,i=ea,vi=n.stateNode.containerInfo,ea=!0,zc(e,t,n),vi=r,ea=i;break;case 0:case 11:case 14:case 15:if(!Li&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&_R(n,t,s),i=i.next}while(i!==r)}zc(e,t,n);break;case 1:if(!Li&&(Up(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Er(n,t,a)}zc(e,t,n);break;case 21:zc(e,t,n);break;case 22:n.mode&1?(Li=(r=Li)||n.memoizedState!==null,zc(e,t,n),Li=r):zc(e,t,n);break;default:zc(e,t,n)}}function SN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cae),t.forEach(function(r){var i=bae.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Hs(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:vi=a.stateNode,ea=!1;break e;case 3:vi=a.stateNode.containerInfo,ea=!0;break e;case 4:vi=a.stateNode.containerInfo,ea=!0;break e}a=a.return}if(vi===null)throw Error(pt(160));VG(o,s,i),vi=null,ea=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Er(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)HG(t,e),t=t.sibling}function HG(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Hs(t,e),Oa(e),r&4){try{Z0(3,e,e.return),UC(3,e)}catch(g){Er(e,e.return,g)}try{Z0(5,e,e.return)}catch(g){Er(e,e.return,g)}}break;case 1:Hs(t,e),Oa(e),r&512&&n!==null&&Up(n,n.return);break;case 5:if(Hs(t,e),Oa(e),r&512&&n!==null&&Up(n,n.return),e.flags&32){var i=e.stateNode;try{Ay(i,"")}catch(g){Er(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&dH(i,o),YI(a,s);var c=YI(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?gH(i,d):u==="dangerouslySetInnerHTML"?pH(i,d):u==="children"?Ay(i,d):d$(i,u,d,c)}switch(a){case"input":VI(i,o);break;case"textarea":fH(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?nm(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?nm(i,!!o.multiple,o.defaultValue,!0):nm(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ly]=o}catch(g){Er(e,e.return,g)}}break;case 6:if(Hs(t,e),Oa(e),r&4){if(e.stateNode===null)throw Error(pt(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Er(e,e.return,g)}}break;case 3:if(Hs(t,e),Oa(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ty(t.containerInfo)}catch(g){Er(e,e.return,g)}break;case 4:Hs(t,e),Oa(e);break;case 13:Hs(t,e),Oa(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(H$=kr())),r&4&&SN(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Li=(c=Li)||u,Hs(t,e),Li=c):Hs(t,e),Oa(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Mt=e,u=e.child;u!==null;){for(d=Mt=u;Mt!==null;){switch(f=Mt,h=f.child,f.tag){case 0:case 11:case 14:case 15:Z0(4,f,f.return);break;case 1:Up(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Er(r,n,g)}}break;case 5:Up(f,f.return);break;case 22:if(f.memoizedState!==null){AN(d);continue}}h!==null?(h.return=f,Mt=h):AN(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=mH("display",s))}catch(g){Er(e,e.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Er(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Hs(t,e),Oa(e),r&4&&SN(e);break;case 21:break;default:Hs(t,e),Oa(e)}}function Oa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(UG(n)){var r=n;break e}n=n.return}throw Error(pt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ay(i,""),r.flags&=-33);var o=wN(e);CR(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=wN(e);SR(e,a,s);break;default:throw Error(pt(161))}}catch(l){Er(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dae(e,t,n){Mt=e,GG(e)}function GG(e,t,n){for(var r=(e.mode&1)!==0;Mt!==null;){var i=Mt,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Yx;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Li;a=Yx;var c=Li;if(Yx=s,(Li=l)&&!c)for(Mt=i;Mt!==null;)s=Mt,l=s.child,s.tag===22&&s.memoizedState!==null?PN(i):l!==null?(l.return=s,Mt=l):PN(i);for(;o!==null;)Mt=o,GG(o),o=o.sibling;Mt=i,Yx=a,Li=c}CN(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Mt=o):CN(e)}}function CN(e){for(;Mt!==null;){var t=Mt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Li||UC(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Li)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Js(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&aN(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}aN(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ty(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pt(163))}Li||t.flags&512&&wR(t)}catch(f){Er(t,t.return,f)}}if(t===e){Mt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Mt=n;break}Mt=t.return}}function AN(e){for(;Mt!==null;){var t=Mt;if(t===e){Mt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Mt=n;break}Mt=t.return}}function PN(e){for(;Mt!==null;){var t=Mt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{UC(4,t)}catch(l){Er(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){Er(t,i,l)}}var o=t.return;try{wR(t)}catch(l){Er(t,o,l)}break;case 5:var s=t.return;try{wR(t)}catch(l){Er(t,s,l)}}}catch(l){Er(t,t.return,l)}if(t===e){Mt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Mt=a;break}Mt=t.return}}var fae=Math.ceil,KS=Ec.ReactCurrentDispatcher,U$=Ec.ReactCurrentOwner,Es=Ec.ReactCurrentBatchConfig,hn=0,hi=null,Hr=null,Ci=0,jo=0,Vp=td(0),ti=0,zy=null,$f=0,VC=0,V$=0,J0=null,lo=null,H$=0,Em=1/0,Ul=null,ZS=!1,AR=null,_u=null,Xx=!1,du=null,JS=0,Q0=0,PR=null,Gw=-1,Ww=0;function Gi(){return hn&6?kr():Gw!==-1?Gw:Gw=kr()}function wu(e){return e.mode&1?hn&2&&Ci!==0?Ci&-Ci:Xse.transition!==null?(Ww===0&&(Ww=EH()),Ww):(e=Ln,e!==0||(e=window.event,e=e===void 0?16:$H(e.type)),e):1}function aa(e,t,n,r){if(50<Q0)throw Q0=0,PR=null,Error(pt(185));Kb(e,n,r),(!(hn&2)||e!==hi)&&(e===hi&&(!(hn&2)&&(VC|=n),ti===4&&lu(e,Ci)),xo(e,r),n===1&&hn===0&&!(t.mode&1)&&(Em=kr()+500,FC&&nd()))}function xo(e,t){var n=e.callbackNode;Xoe(e,t);var r=$S(e,e===hi?Ci:0);if(r===0)n!==null&&$B(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$B(n),t===1)e.tag===0?Yse(MN.bind(null,e)):eG(MN.bind(null,e)),Hse(function(){!(hn&6)&&nd()}),n=null;else{switch(TH(r)){case 1:n=g$;break;case 4:n=PH;break;case 16:n=LS;break;case 536870912:n=MH;break;default:n=LS}n=QG(n,WG.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function WG(e,t){if(Gw=-1,Ww=0,hn&6)throw Error(pt(327));var n=e.callbackNode;if(am()&&e.callbackNode!==n)return null;var r=$S(e,e===hi?Ci:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=QS(e,r);else{t=r;var i=hn;hn|=2;var o=YG();(hi!==e||Ci!==t)&&(Ul=null,Em=kr()+500,bf(e,t));do try{mae();break}catch(a){qG(e,a)}while(!0);T$(),KS.current=o,hn=i,Hr!==null?t=0:(hi=null,Ci=0,t=ti)}if(t!==0){if(t===2&&(i=QI(e),i!==0&&(r=i,t=MR(e,i))),t===1)throw n=zy,bf(e,0),lu(e,r),xo(e,kr()),n;if(t===6)lu(e,r);else{if(i=e.current.alternate,!(r&30)&&!hae(i)&&(t=QS(e,r),t===2&&(o=QI(e),o!==0&&(r=o,t=MR(e,o))),t===1))throw n=zy,bf(e,0),lu(e,r),xo(e,kr()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(pt(345));case 2:qd(e,lo,Ul);break;case 3:if(lu(e,r),(r&130023424)===r&&(t=H$+500-kr(),10<t)){if($S(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Gi(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=aR(qd.bind(null,e,lo,Ul),t);break}qd(e,lo,Ul);break;case 4:if(lu(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-sa(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=kr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fae(r/1960))-r,10<r){e.timeoutHandle=aR(qd.bind(null,e,lo,Ul),r);break}qd(e,lo,Ul);break;case 5:qd(e,lo,Ul);break;default:throw Error(pt(329))}}}return xo(e,kr()),e.callbackNode===n?WG.bind(null,e):null}function MR(e,t){var n=J0;return e.current.memoizedState.isDehydrated&&(bf(e,t).flags|=256),e=QS(e,t),e!==2&&(t=lo,lo=n,t!==null&&ER(t)),e}function ER(e){lo===null?lo=e:lo.push.apply(lo,e)}function hae(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ha(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function lu(e,t){for(t&=~V$,t&=~VC,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sa(t),r=1<<n;e[n]=-1,t&=~r}}function MN(e){if(hn&6)throw Error(pt(327));am();var t=$S(e,0);if(!(t&1))return xo(e,kr()),null;var n=QS(e,t);if(e.tag!==0&&n===2){var r=QI(e);r!==0&&(t=r,n=MR(e,r))}if(n===1)throw n=zy,bf(e,0),lu(e,t),xo(e,kr()),n;if(n===6)throw Error(pt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qd(e,lo,Ul),xo(e,kr()),null}function G$(e,t){var n=hn;hn|=1;try{return e(t)}finally{hn=n,hn===0&&(Em=kr()+500,FC&&nd())}}function Df(e){du!==null&&du.tag===0&&!(hn&6)&&am();var t=hn;hn|=1;var n=Es.transition,r=Ln;try{if(Es.transition=null,Ln=1,e)return e()}finally{Ln=r,Es.transition=n,hn=t,!(hn&6)&&nd()}}function W$(){jo=Vp.current,er(Vp)}function bf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Vse(n)),Hr!==null)for(n=Hr.return;n!==null;){var r=n;switch(P$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zS();break;case 3:Pm(),er(yo),er(Di),$$();break;case 5:L$(r);break;case 4:Pm();break;case 13:er(gr);break;case 19:er(gr);break;case 10:O$(r.type._context);break;case 22:case 23:W$()}n=n.return}if(hi=e,Hr=e=Su(e.current,null),Ci=jo=t,ti=0,zy=null,V$=VC=$f=0,lo=J0=null,hf!==null){for(t=0;t<hf.length;t++)if(n=hf[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}hf=null}return e}function qG(e,t){do{var n=Hr;try{if(T$(),Uw.current=XS,YS){for(var r=_r.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}YS=!1}if(Lf=0,ui=Qr=_r=null,K0=!1,By=0,U$.current=null,n===null||n.return===null){ti=1,zy=t,Hr=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=Ci,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=pN(s);if(h!==null){h.flags&=-257,mN(h,s,a,o,t),h.mode&1&&hN(o,c,t),t=h,l=c;var p=t.updateQueue;if(p===null){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}else{if(!(t&1)){hN(o,c,t),q$();break e}l=Error(pt(426))}}else if(dr&&a.mode&1){var v=pN(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),mN(v,s,a,o,t),M$(Mm(l,a));break e}}o=l=Mm(l,a),ti!==4&&(ti=2),J0===null?J0=[o]:J0.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=OG(o,l,t);sN(o,m);break e;case 1:a=l;var y=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(_u===null||!_u.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=IG(o,a,t);sN(o,_);break e}}o=o.return}while(o!==null)}KG(n)}catch(x){t=x,Hr===n&&n!==null&&(Hr=n=n.return);continue}break}while(!0)}function YG(){var e=KS.current;return KS.current=XS,e===null?XS:e}function q$(){(ti===0||ti===3||ti===2)&&(ti=4),hi===null||!($f&268435455)&&!(VC&268435455)||lu(hi,Ci)}function QS(e,t){var n=hn;hn|=2;var r=YG();(hi!==e||Ci!==t)&&(Ul=null,bf(e,t));do try{pae();break}catch(i){qG(e,i)}while(!0);if(T$(),hn=n,KS.current=r,Hr!==null)throw Error(pt(261));return hi=null,Ci=0,ti}function pae(){for(;Hr!==null;)XG(Hr)}function mae(){for(;Hr!==null&&!zoe();)XG(Hr)}function XG(e){var t=JG(e.alternate,e,jo);e.memoizedProps=e.pendingProps,t===null?KG(e):Hr=t,U$.current=null}function KG(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=lae(n,t),n!==null){n.flags&=32767,Hr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ti=6,Hr=null;return}}else if(n=aae(n,t,jo),n!==null){Hr=n;return}if(t=t.sibling,t!==null){Hr=t;return}Hr=t=e}while(t!==null);ti===0&&(ti=5)}function qd(e,t,n){var r=Ln,i=Es.transition;try{Es.transition=null,Ln=1,gae(e,t,n,r)}finally{Es.transition=i,Ln=r}return null}function gae(e,t,n,r){do am();while(du!==null);if(hn&6)throw Error(pt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(pt(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Koe(e,o),e===hi&&(Hr=hi=null,Ci=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xx||(Xx=!0,QG(LS,function(){return am(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Es.transition,Es.transition=null;var s=Ln;Ln=1;var a=hn;hn|=4,U$.current=null,uae(e,n),HG(n,e),Dse(oR),DS=!!iR,oR=iR=null,e.current=n,dae(n),joe(),hn=a,Ln=s,Es.transition=o}else e.current=n;if(Xx&&(Xx=!1,du=e,JS=i),o=e.pendingLanes,o===0&&(_u=null),Hoe(n.stateNode),xo(e,kr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ZS)throw ZS=!1,e=AR,AR=null,e;return JS&1&&e.tag!==0&&am(),o=e.pendingLanes,o&1?e===PR?Q0++:(Q0=0,PR=e):Q0=0,nd(),null}function am(){if(du!==null){var e=TH(JS),t=Es.transition,n=Ln;try{if(Es.transition=null,Ln=16>e?16:e,du===null)var r=!1;else{if(e=du,du=null,JS=0,hn&6)throw Error(pt(331));var i=hn;for(hn|=4,Mt=e.current;Mt!==null;){var o=Mt,s=o.child;if(Mt.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Mt=c;Mt!==null;){var u=Mt;switch(u.tag){case 0:case 11:case 15:Z0(8,u,o)}var d=u.child;if(d!==null)d.return=u,Mt=d;else for(;Mt!==null;){u=Mt;var f=u.sibling,h=u.return;if(jG(u),u===c){Mt=null;break}if(f!==null){f.return=h,Mt=f;break}Mt=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Mt=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Mt=s;else e:for(;Mt!==null;){if(o=Mt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Z0(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,Mt=m;break e}Mt=o.return}}var y=e.current;for(Mt=y;Mt!==null;){s=Mt;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,Mt=b;else e:for(s=y;Mt!==null;){if(a=Mt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:UC(9,a)}}catch(x){Er(a,a.return,x)}if(a===s){Mt=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Mt=_;break e}Mt=a.return}}if(hn=i,nd(),el&&typeof el.onPostCommitFiberRoot=="function")try{el.onPostCommitFiberRoot(LC,e)}catch{}r=!0}return r}finally{Ln=n,Es.transition=t}}return!1}function EN(e,t,n){t=Mm(n,t),t=OG(e,t,1),e=xu(e,t,1),t=Gi(),e!==null&&(Kb(e,1,t),xo(e,t))}function Er(e,t,n){if(e.tag===3)EN(e,e,n);else for(;t!==null;){if(t.tag===3){EN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_u===null||!_u.has(r))){e=Mm(n,e),e=IG(t,e,1),t=xu(t,e,1),e=Gi(),t!==null&&(Kb(t,1,e),xo(t,e));break}}t=t.return}}function vae(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Gi(),e.pingedLanes|=e.suspendedLanes&n,hi===e&&(Ci&n)===n&&(ti===4||ti===3&&(Ci&130023424)===Ci&&500>kr()-H$?bf(e,0):V$|=n),xo(e,t)}function ZG(e,t){t===0&&(e.mode&1?(t=Fx,Fx<<=1,!(Fx&130023424)&&(Fx=4194304)):t=1);var n=Gi();e=uc(e,t),e!==null&&(Kb(e,t,n),xo(e,n))}function yae(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ZG(e,n)}function bae(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(pt(314))}r!==null&&r.delete(t),ZG(e,n)}var JG;JG=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yo.current)mo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return mo=!1,sae(e,t,n);mo=!!(e.flags&131072)}else mo=!1,dr&&t.flags&1048576&&tG(t,VS,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Hw(e,t),e=t.pendingProps;var i=Sm(t,Di.current);sm(t,n),i=B$(null,t,r,e,i,n);var o=N$();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,bo(r)?(o=!0,jS(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,R$(t),i.updater=zC,t.stateNode=i,i._reactInternals=t,pR(t,r,e,n),t=vR(null,t,r,!0,o,n)):(t.tag=0,dr&&o&&A$(t),Vi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Hw(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=_ae(r),e=Js(r,e),i){case 0:t=gR(null,t,r,e,n);break e;case 1:t=yN(null,t,r,e,n);break e;case 11:t=gN(null,t,r,e,n);break e;case 14:t=vN(null,t,r,Js(r.type,e),n);break e}throw Error(pt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Js(r,i),gR(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Js(r,i),yN(e,t,r,i,n);case 3:e:{if($G(t),e===null)throw Error(pt(387));r=t.pendingProps,o=t.memoizedState,i=o.element,oG(e,t),WS(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=Mm(Error(pt(423)),t),t=bN(e,t,r,n,i);break e}else if(r!==i){i=Mm(Error(pt(424)),t),t=bN(e,t,r,n,i);break e}else for(Wo=bu(t.stateNode.containerInfo.firstChild),qo=t,dr=!0,na=null,n=cG(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cm(),r===i){t=dc(e,t,n);break e}Vi(e,t,r,n)}t=t.child}return t;case 5:return uG(t),e===null&&dR(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,sR(r,i)?s=null:o!==null&&sR(r,o)&&(t.flags|=32),LG(e,t),Vi(e,t,s,n),t.child;case 6:return e===null&&dR(t),null;case 13:return DG(e,t,n);case 4:return k$(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Am(t,null,r,n):Vi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Js(r,i),gN(e,t,r,i,n);case 7:return Vi(e,t,t.pendingProps,n),t.child;case 8:return Vi(e,t,t.pendingProps.children,n),t.child;case 12:return Vi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Yn(HS,r._currentValue),r._currentValue=s,o!==null)if(ha(o.value,s)){if(o.children===i.children&&!yo.current){t=dc(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=rc(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),fR(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(pt(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),fR(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Vi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,sm(t,n),i=Rs(i),r=r(i),t.flags|=1,Vi(e,t,r,n),t.child;case 14:return r=t.type,i=Js(r,t.pendingProps),i=Js(r.type,i),vN(e,t,r,i,n);case 15:return RG(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Js(r,i),Hw(e,t),t.tag=1,bo(r)?(e=!0,jS(t)):e=!1,sm(t,n),aG(t,r,i),pR(t,r,i,n),vR(null,t,r,!0,e,n);case 19:return BG(e,t,n);case 22:return kG(e,t,n)}throw Error(pt(156,t.tag))};function QG(e,t){return AH(e,t)}function xae(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(e,t,n,r){return new xae(e,t,n,r)}function Y$(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _ae(e){if(typeof e=="function")return Y$(e)?1:0;if(e!=null){if(e=e.$$typeof,e===h$)return 11;if(e===p$)return 14}return 2}function Su(e,t){var n=e.alternate;return n===null?(n=Cs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qw(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")Y$(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case kp:return xf(n.children,i,o,t);case f$:s=8,i|=8;break;case NI:return e=Cs(12,n,t,i|2),e.elementType=NI,e.lanes=o,e;case FI:return e=Cs(13,n,t,i),e.elementType=FI,e.lanes=o,e;case zI:return e=Cs(19,n,t,i),e.elementType=zI,e.lanes=o,e;case lH:return HC(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sH:s=10;break e;case aH:s=9;break e;case h$:s=11;break e;case p$:s=14;break e;case iu:s=16,r=null;break e}throw Error(pt(130,e==null?e:typeof e,""))}return t=Cs(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function xf(e,t,n,r){return e=Cs(7,e,r,t),e.lanes=n,e}function HC(e,t,n,r){return e=Cs(22,e,r,t),e.elementType=lH,e.lanes=n,e.stateNode={isHidden:!1},e}function xT(e,t,n){return e=Cs(6,e,null,t),e.lanes=n,e}function _T(e,t,n){return t=Cs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wae(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tT(0),this.expirationTimes=tT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tT(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function X$(e,t,n,r,i,o,s,a,l){return e=new wae(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Cs(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},R$(o),e}function Sae(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rp,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function eW(e){if(!e)return Bu;e=e._reactInternals;e:{if(ph(e)!==e||e.tag!==1)throw Error(pt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(bo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pt(171))}if(e.tag===1){var n=e.type;if(bo(n))return QH(e,n,t)}return t}function tW(e,t,n,r,i,o,s,a,l){return e=X$(n,r,!0,e,i,o,s,a,l),e.context=eW(null),n=e.current,r=Gi(),i=wu(n),o=rc(r,i),o.callback=t??null,xu(n,o,i),e.current.lanes=i,Kb(e,i,r),xo(e,r),e}function GC(e,t,n,r){var i=t.current,o=Gi(),s=wu(i);return n=eW(n),t.context===null?t.context=n:t.pendingContext=n,t=rc(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=xu(i,t,s),e!==null&&(aa(e,i,s,o),jw(e,i,s)),s}function e2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function TN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function K$(e,t){TN(e,t),(e=e.alternate)&&TN(e,t)}function Cae(){return null}var nW=typeof reportError=="function"?reportError:function(e){console.error(e)};function Z$(e){this._internalRoot=e}WC.prototype.render=Z$.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pt(409));GC(e,t,null,null)};WC.prototype.unmount=Z$.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Df(function(){GC(null,e,null,null)}),t[cc]=null}};function WC(e){this._internalRoot=e}WC.prototype.unstable_scheduleHydration=function(e){if(e){var t=RH();e={blockedOn:null,target:e,priority:t};for(var n=0;n<au.length&&t!==0&&t<au[n].priority;n++);au.splice(n,0,e),n===0&&LH(e)}};function J$(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qC(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ON(){}function Aae(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=e2(s);o.call(c)}}var s=tW(t,r,e,0,null,!1,!1,"",ON);return e._reactRootContainer=s,e[cc]=s.current,Ry(e.nodeType===8?e.parentNode:e),Df(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=e2(l);a.call(c)}}var l=X$(e,0,!1,null,null,!1,!1,"",ON);return e._reactRootContainer=l,e[cc]=l.current,Ry(e.nodeType===8?e.parentNode:e),Df(function(){GC(t,l,n,r)}),l}function YC(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=e2(s);a.call(l)}}GC(t,s,e,i)}else s=Aae(n,t,e,i,r);return e2(s)}OH=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=_0(t.pendingLanes);n!==0&&(v$(t,n|1),xo(t,kr()),!(hn&6)&&(Em=kr()+500,nd()))}break;case 13:Df(function(){var r=uc(e,1);if(r!==null){var i=Gi();aa(r,e,1,i)}}),K$(e,1)}};y$=function(e){if(e.tag===13){var t=uc(e,134217728);if(t!==null){var n=Gi();aa(t,e,134217728,n)}K$(e,134217728)}};IH=function(e){if(e.tag===13){var t=wu(e),n=uc(e,t);if(n!==null){var r=Gi();aa(n,e,t,r)}K$(e,t)}};RH=function(){return Ln};kH=function(e,t){var n=Ln;try{return Ln=e,t()}finally{Ln=n}};KI=function(e,t,n){switch(t){case"input":if(VI(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=NC(r);if(!i)throw Error(pt(90));uH(r),VI(r,i)}}}break;case"textarea":fH(e,n);break;case"select":t=n.value,t!=null&&nm(e,!!n.multiple,t,!1)}};bH=G$;xH=Df;var Pae={usingClientEntryPoint:!1,Events:[Jb,Bp,NC,vH,yH,G$]},Iv={findFiberByHostInstance:ff,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Mae={bundleType:Iv.bundleType,version:Iv.version,rendererPackageName:Iv.rendererPackageName,rendererConfig:Iv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ec.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=SH(e),e===null?null:e.stateNode},findFiberByHostInstance:Iv.findFiberByHostInstance||Cae,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kx.isDisabled&&Kx.supportsFiber)try{LC=Kx.inject(Mae),el=Kx}catch{}}is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pae;is.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!J$(t))throw Error(pt(200));return Sae(e,t,null,n)};is.createRoot=function(e,t){if(!J$(e))throw Error(pt(299));var n=!1,r="",i=nW;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=X$(e,1,!1,null,null,n,!1,r,i),e[cc]=t.current,Ry(e.nodeType===8?e.parentNode:e),new Z$(t)};is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pt(188)):(e=Object.keys(e).join(","),Error(pt(268,e)));return e=SH(t),e=e===null?null:e.stateNode,e};is.flushSync=function(e){return Df(e)};is.hydrate=function(e,t,n){if(!qC(t))throw Error(pt(200));return YC(null,e,t,!0,n)};is.hydrateRoot=function(e,t,n){if(!J$(e))throw Error(pt(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=nW;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=tW(t,null,e,1,n??null,i,!1,o,s),e[cc]=t.current,Ry(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new WC(t)};is.render=function(e,t,n){if(!qC(t))throw Error(pt(200));return YC(null,e,t,!1,n)};is.unmountComponentAtNode=function(e){if(!qC(e))throw Error(pt(40));return e._reactRootContainer?(Df(function(){YC(null,null,e,!1,function(){e._reactRootContainer=null,e[cc]=null})}),!0):!1};is.unstable_batchedUpdates=G$;is.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qC(n))throw Error(pt(200));if(e==null||e._reactInternals===void 0)throw Error(pt(38));return YC(e,t,n,!1,r)};is.version="18.2.0-next-9e3b772b8-20220608";function rW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rW)}catch(e){console.error(e)}}rW(),tH.exports=is;var Nu=tH.exports;const Zx=Dg(Nu);var IN=Nu;DI.createRoot=IN.createRoot,DI.hydrateRoot=IN.hydrateRoot;function Yt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var Eae={};function Q$(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:Eae}var iW=Object.assign,t2=Object.getOwnPropertyDescriptor,nl=Object.defineProperty,e1=Object.prototype,TR=[];Object.freeze(TR);var e5={};Object.freeze(e5);var Tae=typeof Proxy<"u",Oae=Object.toString();function oW(){Tae||Yt("Proxy not available")}function sW(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Hp=function(){};function Ko(e){return typeof e=="function"}function Bf(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function XC(e){return e!==null&&typeof e=="object"}function fc(e){if(!XC(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n.toString()===Oae}function aW(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function t1(e,t,n){nl(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function lW(e,t,n){nl(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function rd(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(r){return XC(r)&&r[n]===!0}}function zg(e){return e instanceof Map}function n1(e){return e instanceof Set}var cW=typeof Object.getOwnPropertySymbols<"u";function Iae(e){var t=Object.keys(e);if(!cW)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter(function(r){return e1.propertyIsEnumerable.call(e,r)})):t}var Tm=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:cW?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function uW(e){return e===null?null:typeof e=="object"?""+e:e}function ic(e,t){return e1.hasOwnProperty.call(e,t)}var Rae=Object.getOwnPropertyDescriptors||function(t){var n={};return Tm(t).forEach(function(r){n[r]=t2(t,r)}),n};function RN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$ae(r.key),r)}}function t5(e,t,n){return t&&RN(e.prototype,t),n&&RN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fu(){return Fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fu.apply(this,arguments)}function dW(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,OR(e,t)}function OR(e,t){return OR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},OR(e,t)}function wT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kae(e,t){if(e){if(typeof e=="string")return kN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kN(e,t)}}function kN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gp(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=kae(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lae(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ae(e){var t=Lae(e,"string");return typeof t=="symbol"?t:String(t)}var Ka=Symbol("mobx-stored-annotations");function la(e){function t(n,r){if(r1(r))return e.decorate_20223_(n,r);jg(n,r,e)}return Object.assign(t,e)}function jg(e,t,n){ic(e,Ka)||t1(e,Ka,Fu({},e[Ka])),Hae(n)||(e[Ka][t]=n)}function Dae(e){return ic(e,Ka)||t1(e,Ka,Fu({},e[Ka])),e[Ka]}function r1(e){return typeof e=="object"&&typeof e.kind=="string"}var It=Symbol("mobx administration"),i1=function(){function e(n){n===void 0&&(n="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=mn.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=n}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},t.reportObserved=function(){return RW(this)},t.reportChanged=function(){go(),kW(this),vo()},t.toString=function(){return this.name_},e}(),n5=rd("Atom",i1);function jy(e,t,n){t===void 0&&(t=Hp),n===void 0&&(n=Hp);var r=new i1(e);return t!==Hp&&UW(r,t),n!==Hp&&o5(r,n),r}function Bae(e,t){return e===t}function Nae(e,t){return m5(e,t)}function Fae(e,t){return m5(e,t,1)}function zae(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Nf={identity:Bae,structural:Nae,default:zae,shallow:Fae};function Ff(e,t,n){return iA(e)?e:Array.isArray(e)?Rn.array(e,{name:n}):fc(e)?Rn.object(e,void 0,{name:n}):zg(e)?Rn.map(e,{name:n}):n1(e)?Rn.set(e,{name:n}):typeof e=="function"&&!s1(e)&&!km(e)?aW(e)?Uf(e):Im(n,e):e}function jae(e,t,n){if(e==null||ii(e)||zi(e)||pi(e)||Xi(e))return e;if(Array.isArray(e))return Rn.array(e,{name:n,deep:!1});if(fc(e))return Rn.object(e,void 0,{name:n,deep:!1});if(zg(e))return Rn.map(e,{name:n,deep:!1});if(n1(e))return Rn.set(e,{name:n,deep:!1})}function KC(e){return e}function Uae(e,t){return m5(e,t)?t:e}var fW="override",Vae=la({annotationType_:fW,make_:Gae,extend_:Wae,decorate_20223_:qae});function Hae(e){return e.annotationType_===fW}function Gae(e,t){return 0}function Wae(e,t,n,r){Yt("'"+this.annotationType_+"' can only be used with 'makeObservable'")}function qae(e,t){console.warn("'"+this.annotationType_+"' cannot be used with decorators - this is a no-op")}function o1(e,t){return{annotationType_:e,options_:t,make_:Yae,extend_:Xae,decorate_20223_:Kae}}function Yae(e,t,n,r){var i;if((i=this.options_)!=null&&i.bound)return this.extend_(e,t,n,!1)===null?0:1;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if(s1(n.value))return 1;var o=hW(e,this,t,n,!1);return nl(r,t,o),2}function Xae(e,t,n,r){var i=hW(e,this,t,n);return e.defineProperty_(t,i,r)}function Kae(e,t){var n=t.kind,r=t.name,i=t.addInitializer,o=this,s=function(c){var u,d,f,h;return zu((u=(d=o.options_)==null?void 0:d.name)!=null?u:r.toString(),c,(f=(h=o.options_)==null?void 0:h.autoAction)!=null?f:!1)};if(n=="field"){i(function(){jg(this,r,o)});return}if(n=="method"){var a;return s1(e)||(e=s(e)),(a=this.options_)!=null&&a.bound&&i(function(){var l=this,c=l[r].bind(l);c.isMobxAction=!0,l[r]=c}),e}Yt("Cannot apply '"+o.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):"+(`
'`+o.annotationType_+"' can only be used on properties with a function value."))}function Zae(e,t,n,r){t.annotationType_,r.value}function hW(e,t,n,r,i){var o,s,a,l,c,u,d;i===void 0&&(i=vt.safeDescriptors),Zae(e,t,n,r);var f=r.value;if((o=t.options_)!=null&&o.bound){var h;f=f.bind((h=e.proxy_)!=null?h:e.target_)}return{value:zu((s=(a=t.options_)==null?void 0:a.name)!=null?s:n.toString(),f,(l=(c=t.options_)==null?void 0:c.autoAction)!=null?l:!1,(u=t.options_)!=null&&u.bound?(d=e.proxy_)!=null?d:e.target_:void 0),configurable:i?e.isPlainObject_:!0,enumerable:!1,writable:!i}}function pW(e,t){return{annotationType_:e,options_:t,make_:Jae,extend_:Qae,decorate_20223_:ele}}function Jae(e,t,n,r){var i;if(r===e.target_)return this.extend_(e,t,n,!1)===null?0:2;if((i=this.options_)!=null&&i.bound&&(!ic(e.target_,t)||!km(e.target_[t]))&&this.extend_(e,t,n,!1)===null)return 0;if(km(n.value))return 1;var o=mW(e,this,t,n,!1,!1);return nl(r,t,o),2}function Qae(e,t,n,r){var i,o=mW(e,this,t,n,(i=this.options_)==null?void 0:i.bound);return e.defineProperty_(t,o,r)}function ele(e,t){var n,r=t.name,i=t.addInitializer;return km(e)||(e=Uf(e)),(n=this.options_)!=null&&n.bound&&i(function(){var o=this,s=o[r].bind(o);s.isMobXFlow=!0,o[r]=s}),e}function tle(e,t,n,r){t.annotationType_,r.value}function mW(e,t,n,r,i,o){o===void 0&&(o=vt.safeDescriptors),tle(e,t,n,r);var s=r.value;if(km(s)||(s=Uf(s)),i){var a;s=s.bind((a=e.proxy_)!=null?a:e.target_),s.isMobXFlow=!0}return{value:s,configurable:o?e.isPlainObject_:!0,enumerable:!1,writable:!o}}function r5(e,t){return{annotationType_:e,options_:t,make_:nle,extend_:rle,decorate_20223_:ile}}function nle(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function rle(e,t,n,r){return ole(e,this,t,n),e.defineComputedProperty_(t,Fu({},this.options_,{get:n.get,set:n.set}),r)}function ile(e,t){var n=this,r=t.name,i=t.addInitializer;return i(function(){var o=vh(this)[It],s=Fu({},n.options_,{get:e,context:this});s.name||(s.name="ObservableObject."+r.toString()),o.values_.set(r,new Om(s))}),function(){return this[It].getObservablePropValue_(r)}}function ole(e,t,n,r){t.annotationType_,r.get}function ZC(e,t){return{annotationType_:e,options_:t,make_:sle,extend_:ale,decorate_20223_:lle}}function sle(e,t,n){return this.extend_(e,t,n,!1)===null?0:1}function ale(e,t,n,r){var i,o;return cle(e,this),e.defineObservableProperty_(t,n.value,(i=(o=this.options_)==null?void 0:o.enhancer)!=null?i:Ff,r)}function lle(e,t){var n=this,r=t.kind,i=t.name,o=new WeakSet;function s(a,l){var c,u,d=vh(a)[It],f=new Cu(l,(c=(u=n.options_)==null?void 0:u.enhancer)!=null?c:Ff,"ObservableObject."+i.toString(),!1);d.values_.set(i,f),o.add(a)}if(r=="accessor")return{get:function(){return o.has(this)||s(this,e.get.call(this)),this[It].getObservablePropValue_(i)},set:function(l){return o.has(this)||s(this,l),this[It].setObservablePropValue_(i,l)},init:function(l){return o.has(this)||s(this,l),l}}}function cle(e,t,n,r){t.annotationType_}var ule="true",dle=gW();function gW(e){return{annotationType_:ule,options_:e,make_:fle,extend_:hle,decorate_20223_:ple}}function fle(e,t,n,r){var i,o;if(n.get)return mh.make_(e,t,n,r);if(n.set){var s=zu(t.toString(),n.set);return r===e.target_?e.defineProperty_(t,{configurable:vt.safeDescriptors?e.isPlainObject_:!0,set:s})===null?0:2:(nl(r,t,{configurable:!0,set:s}),2)}if(r!==e.target_&&typeof n.value=="function"){var a;if(aW(n.value)){var l,c=(l=this.options_)!=null&&l.autoBind?Uf.bound:Uf;return c.make_(e,t,n,r)}var u=(a=this.options_)!=null&&a.autoBind?Im.bound:Im;return u.make_(e,t,n,r)}var d=((i=this.options_)==null?void 0:i.deep)===!1?Rn.ref:Rn;if(typeof n.value=="function"&&(o=this.options_)!=null&&o.autoBind){var f;n.value=n.value.bind((f=e.proxy_)!=null?f:e.target_)}return d.make_(e,t,n,r)}function hle(e,t,n,r){var i,o;if(n.get)return mh.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:vt.safeDescriptors?e.isPlainObject_:!0,set:zu(t.toString(),n.set)},r);if(typeof n.value=="function"&&(i=this.options_)!=null&&i.autoBind){var s;n.value=n.value.bind((s=e.proxy_)!=null?s:e.target_)}var a=((o=this.options_)==null?void 0:o.deep)===!1?Rn.ref:Rn;return a.extend_(e,t,n,r)}function ple(e,t){Yt("'"+this.annotationType_+"' cannot be used as a decorator")}var mle="observable",gle="observable.ref",vle="observable.shallow",yle="observable.struct",vW={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(vW);function Jx(e){return e||vW}var IR=ZC(mle),ble=ZC(gle,{enhancer:KC}),xle=ZC(vle,{enhancer:jae}),_le=ZC(yle,{enhancer:Uae}),yW=la(IR);function Qx(e){return e.deep===!0?Ff:e.deep===!1?KC:Sle(e.defaultDecorator)}function wle(e){var t;return e?(t=e.defaultDecorator)!=null?t:gW(e):void 0}function Sle(e){var t,n;return e&&(t=(n=e.options_)==null?void 0:n.enhancer)!=null?t:Ff}function bW(e,t,n){if(r1(t))return IR.decorate_20223_(e,t);if(Bf(t)){jg(e,t,IR);return}return iA(e)?e:fc(e)?Rn.object(e,t,n):Array.isArray(e)?Rn.array(e,t):zg(e)?Rn.map(e,t):n1(e)?Rn.set(e,t):typeof e=="object"&&e!==null?e:Rn.box(e,t)}iW(bW,yW);var Cle={box:function(t,n){var r=Jx(n);return new Cu(t,Qx(r),r.name,!0,r.equals)},array:function(t,n){var r=Jx(n);return(vt.useProxies===!1||r.proxy===!1?Oce:xce)(t,Qx(r),r.name)},map:function(t,n){var r=Jx(n);return new sA(t,Qx(r),r.name)},set:function(t,n){var r=Jx(n);return new h5(t,Qx(r),r.name)},object:function(t,n,r){return id(function(){return s5(vt.useProxies===!1||(r==null?void 0:r.proxy)===!1?vh({},r):gce({},r),t,n)})},ref:la(ble),shallow:la(xle),deep:yW,struct:la(_le)},Rn=iW(bW,Cle),xW="computed",Ale="computed.struct",RR=r5(xW),Ple=r5(Ale,{equals:Nf.structural}),mh=function(t,n){if(r1(n))return RR.decorate_20223_(t,n);if(Bf(n))return jg(t,n,RR);if(fc(t))return la(r5(xW,t));var r=fc(n)?n:{};return r.get=t,r.name||(r.name=t.name||""),new Om(r)};Object.assign(mh,RR);mh.struct=la(Ple);var LN,$N,n2=0,Mle=1,Ele=(LN=($N=t2(function(){},"name"))==null?void 0:$N.configurable)!=null?LN:!1,DN={value:"action",configurable:!0,writable:!1,enumerable:!1};function zu(e,t,n,r){n===void 0&&(n=!1);function i(){return _W(e,n,t,r||this,arguments)}return i.isMobxAction=!0,i.toString=function(){return t.toString()},Ele&&(DN.value=e,nl(i,"name",DN)),i}function _W(e,t,n,r,i){var o=wW(e,t);try{return n.apply(r,i)}catch(s){throw o.error_=s,s}finally{SW(o)}}function wW(e,t,n,r){var i=!1,o=0,s=vt.trackingDerivation,a=!t||!s;go();var l=vt.allowStateChanges;a&&(gh(),l=QC(!0));var c=tA(!0),u={runAsAction_:a,prevDerivation_:s,prevAllowStateChanges_:l,prevAllowStateReads_:c,notifySpy_:i,startTime_:o,actionId_:Mle++,parentActionId_:n2};return n2=u.actionId_,u}function SW(e){n2!==e.actionId_&&Yt(30),n2=e.parentActionId_,e.error_!==void 0&&(vt.suppressReactionErrors=!0),eA(e.prevAllowStateChanges_),lm(e.prevAllowStateReads_),vo(),e.runAsAction_&&oc(e.prevDerivation_),vt.suppressReactionErrors=!1}function JC(e,t){var n=QC(e);try{return t()}finally{eA(n)}}function QC(e){var t=vt.allowStateChanges;return vt.allowStateChanges=e,t}function eA(e){vt.allowStateChanges=e}var CW;CW=Symbol.toPrimitive;var Cu=function(e){dW(t,e);function t(r,i,o,s,a){var l;return o===void 0&&(o="ObservableValue"),a===void 0&&(a=Nf.default),l=e.call(this,o)||this,l.enhancer=void 0,l.name_=void 0,l.equals=void 0,l.hasUnreportedChange_=!1,l.interceptors_=void 0,l.changeListeners_=void 0,l.value_=void 0,l.dehancer=void 0,l.enhancer=i,l.name_=o,l.equals=a,l.value_=i(r,void 0,o),l}var n=t.prototype;return n.dehanceValue=function(i){return this.dehancer!==void 0?this.dehancer(i):i},n.set=function(i){this.value_,i=this.prepareNewValue_(i),i!==vt.UNCHANGED&&this.setNewValue_(i)},n.prepareNewValue_=function(i){if(ws(this)){var o=Ss(this,{object:this,type:il,newValue:i});if(!o)return vt.UNCHANGED;i=o.newValue}return i=this.enhancer(i,this.value_,this.name_),this.equals(this.value_,i)?vt.UNCHANGED:i},n.setNewValue_=function(i){var o=this.value_;this.value_=i,this.reportChanged(),ca(this)&&ua(this,{type:il,object:this,newValue:i,oldValue:o})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(i){return a1(this,i)},n.observe_=function(i,o){return o&&i({observableKind:"value",debugObjectName:this.name_,object:this,type:il,newValue:this.value_,oldValue:void 0}),l1(this,i)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return uW(this.get())},n[CW]=function(){return this.valueOf()},t}(i1),i5=rd("ObservableValue",Cu),AW;AW=Symbol.toPrimitive;var Om=function(){function e(n){this.dependenciesState_=mn.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=mn.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new i2(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=r2.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,n.get||Yt(31),this.derivation=n.get,this.name_=n.name||"ComputedValue",n.set&&(this.setter_=zu("ComputedValue-setter",n.set)),this.equals_=n.equals||(n.compareStructural||n.struct?Nf.structural:Nf.default),this.scope_=n.context,this.requiresReaction_=n.requiresReaction,this.keepAlive_=!!n.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){Nle(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(r){return r()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(r){return r()})},t.get=function(){if(this.isComputing_&&Yt(32,this.name_,this.derivation),vt.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)kR(this)&&(this.warnAboutUntrackedRead_(),go(),this.value_=this.computeValue_(!1),vo());else if(RW(this),kR(this)){var r=vt.trackingContext;this.keepAlive_&&!r&&(vt.trackingContext=this),this.trackAndCompute()&&Ble(this),vt.trackingContext=r}var i=this.value_;if(Yw(i))throw i.cause;return i},t.set=function(r){if(this.setter_){this.isRunningSetter_&&Yt(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,r)}finally{this.isRunningSetter_=!1}}else Yt(34,this.name_)},t.trackAndCompute=function(){var r=this.value_,i=this.dependenciesState_===mn.NOT_TRACKING_,o=this.computeValue_(!0),s=i||Yw(r)||Yw(o)||!this.equals_(r,o);return s&&(this.value_=o),s},t.computeValue_=function(r){this.isComputing_=!0;var i=QC(!1),o;if(r)o=PW(this,this.derivation,this.scope_);else if(vt.disableErrorBoundaries===!0)o=this.derivation.call(this.scope_);else try{o=this.derivation.call(this.scope_)}catch(s){o=new i2(s)}return eA(i),this.isComputing_=!1,o},t.suspend_=function(){this.keepAlive_||(LR(this),this.value_=void 0)},t.observe_=function(r,i){var o=this,s=!0,a=void 0;return rl(function(){var l=o.get();if(!s||i){var c=gh();r({observableKind:"computed",debugObjectName:o.name_,type:il,object:o,newValue:l,oldValue:a}),oc(c)}s=!1,a=l})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return uW(this.get())},t[AW]=function(){return this.valueOf()},e}(),zf=rd("ComputedValue",Om),mn;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(mn||(mn={}));var r2;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(r2||(r2={}));var i2=function(t){this.cause=void 0,this.cause=t};function Yw(e){return e instanceof i2}function kR(e){switch(e.dependenciesState_){case mn.UP_TO_DATE_:return!1;case mn.NOT_TRACKING_:case mn.STALE_:return!0;case mn.POSSIBLY_STALE_:{for(var t=tA(!0),n=gh(),r=e.observing_,i=r.length,o=0;o<i;o++){var s=r[o];if(zf(s)){if(vt.disableErrorBoundaries)s.get();else try{s.get()}catch{return oc(n),lm(t),!0}if(e.dependenciesState_===mn.STALE_)return oc(n),lm(t),!0}}return MW(e),oc(n),lm(t),!1}}}function Tle(){return vt.trackingDerivation!==null}function PW(e,t,n){var r=tA(!0);MW(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++vt.runId;var i=vt.trackingDerivation;vt.trackingDerivation=e,vt.inBatch++;var o;if(vt.disableErrorBoundaries===!0)o=t.call(n);else try{o=t.call(n)}catch(s){o=new i2(s)}return vt.inBatch--,vt.trackingDerivation=i,Ole(e),lm(r),o}function Ole(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=mn.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,s=0;s<o;s++){var a=n[s];a.diffValue_===0&&(a.diffValue_=1,i!==s&&(n[i]=a),i++),a.dependenciesState_>r&&(r=a.dependenciesState_)}for(n.length=i,e.newObserving_=null,o=t.length;o--;){var l=t[o];l.diffValue_===0&&OW(l,e),l.diffValue_=0}for(;i--;){var c=n[i];c.diffValue_===1&&(c.diffValue_=0,Dle(c,e))}r!==mn.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}function LR(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)OW(t[n],e);e.dependenciesState_=mn.NOT_TRACKING_}function Ug(e){var t=gh();try{return e()}finally{oc(t)}}function gh(){var e=vt.trackingDerivation;return vt.trackingDerivation=null,e}function oc(e){vt.trackingDerivation=e}function tA(e){var t=vt.allowStateReads;return vt.allowStateReads=e,t}function lm(e){vt.allowStateReads=e}function MW(e){if(e.dependenciesState_!==mn.UP_TO_DATE_){e.dependenciesState_=mn.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=mn.UP_TO_DATE_}}var Ile=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","allowStateReads","disableErrorBoundaries","runId","UNCHANGED","useProxies"],ey=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Xw=!0,EW=!1,vt=function(){var e=Q$();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Xw=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new ey().version&&(Xw=!1),Xw?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new ey):(setTimeout(function(){EW||Yt(35)},1),new ey)}();function Rle(){if((vt.pendingReactions.length||vt.inBatch||vt.isRunningReactions)&&Yt(36),EW=!0,Xw){var e=Q$();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),vt=new ey}}function TW(){return vt}function kle(){var e=new ey;for(var t in e)Ile.indexOf(t)===-1&&(vt[t]=e[t]);vt.allowStateChanges=!vt.enforceActions}function Lle(e){return e.observers_&&e.observers_.size>0}function $le(e){return e.observers_}function Dle(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function OW(e,t){e.observers_.delete(t),e.observers_.size===0&&IW(e)}function IW(e){e.isPendingUnobservation_===!1&&(e.isPendingUnobservation_=!0,vt.pendingUnobservations.push(e))}function go(){vt.inBatch++}function vo(){if(--vt.inBatch===0){LW();for(var e=vt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,n.observers_.size===0&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Om&&n.suspend_())}vt.pendingUnobservations=[]}}function RW(e){var t=vt.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&vt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(e.observers_.size===0&&vt.inBatch>0&&IW(e),!1)}function kW(e){e.lowestObserverState_!==mn.STALE_&&(e.lowestObserverState_=mn.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===mn.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=mn.STALE_}))}function Ble(e){e.lowestObserverState_!==mn.STALE_&&(e.lowestObserverState_=mn.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===mn.POSSIBLY_STALE_?t.dependenciesState_=mn.STALE_:t.dependenciesState_===mn.UP_TO_DATE_&&(e.lowestObserverState_=mn.UP_TO_DATE_)}))}function Nle(e){e.lowestObserverState_===mn.UP_TO_DATE_&&(e.lowestObserverState_=mn.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===mn.UP_TO_DATE_&&(t.dependenciesState_=mn.POSSIBLY_STALE_,t.onBecomeStale_())}))}var jf=function(){function e(n,r,i,o){n===void 0&&(n="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=mn.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=r2.NONE,this.name_=n,this.onInvalidate_=r,this.errorHandler_=i,this.requiresObservable_=o}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,vt.pendingReactions.push(this),LW())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){go(),this.isScheduled_=!1;var r=vt.trackingContext;if(vt.trackingContext=this,kR(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(i){this.reportExceptionInDerivation_(i)}}vt.trackingContext=r,vo()}},t.track=function(r){if(!this.isDisposed_){go(),this.isRunning_=!0;var i=vt.trackingContext;vt.trackingContext=this;var o=PW(this,r,void 0);vt.trackingContext=i,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&LR(this),Yw(o)&&this.reportExceptionInDerivation_(o.cause),vo()}},t.reportExceptionInDerivation_=function(r){var i=this;if(this.errorHandler_){this.errorHandler_(r,this);return}if(vt.disableErrorBoundaries)throw r;var o="[mobx] uncaught error in '"+this+"'";vt.suppressReactionErrors||console.error(o,r),vt.globalReactionErrorHandlers.forEach(function(s){return s(r,i)})},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(go(),LR(this),vo()))},t.getDisposer_=function(r){var i=this,o=function s(){i.dispose(),r==null||r.removeEventListener==null||r.removeEventListener("abort",s)};return r==null||r.addEventListener==null||r.addEventListener("abort",o),o[It]=this,o},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(r){},e}();function Fle(e){return vt.globalReactionErrorHandlers.push(e),function(){var t=vt.globalReactionErrorHandlers.indexOf(e);t>=0&&vt.globalReactionErrorHandlers.splice(t,1)}}var zle=100,$R=function(t){return t()};function LW(){vt.inBatch>0||vt.isRunningReactions||$R(jle)}function jle(){vt.isRunningReactions=!0;for(var e=vt.pendingReactions,t=0;e.length>0;){++t===zle&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}vt.isRunningReactions=!1}var o2=rd("Reaction",jf);function Ule(e){var t=$R;$R=function(r){return e(function(){return t(r)})}}function ty(){return!1}function $W(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var DW="action",Vle="action.bound",BW="autoAction",Hle="autoAction.bound",NW="<unnamed action>",DR=o1(DW),Gle=o1(Vle,{bound:!0}),BR=o1(BW,{autoAction:!0}),Wle=o1(Hle,{autoAction:!0,bound:!0});function FW(e){var t=function(r,i){if(Ko(r))return zu(r.name||NW,r,e);if(Ko(i))return zu(r,i,e);if(r1(i))return(e?BR:DR).decorate_20223_(r,i);if(Bf(i))return jg(r,i,e?BR:DR);if(Bf(r))return la(o1(e?BW:DW,{name:r,autoAction:e}))};return t}var Gr=FW(!1);Object.assign(Gr,DR);var Im=FW(!0);Object.assign(Im,BR);Gr.bound=la(Gle);Im.bound=la(Wle);function Rm(e){return _W(e.name||NW,!1,e,this,void 0)}function s1(e){return Ko(e)&&e.isMobxAction===!0}function rl(e,t){var n,r,i,o,s;t===void 0&&(t=e5);var a=(n=(r=t)==null?void 0:r.name)!=null?n:"Autorun",l=!t.scheduler&&!t.delay,c;if(l)c=new jf(a,function(){this.track(f)},t.onError,t.requiresObservable);else{var u=zW(t),d=!1;c=new jf(a,function(){d||(d=!0,u(function(){d=!1,c.isDisposed_||c.track(f)}))},t.onError,t.requiresObservable)}function f(){e(c)}return(i=t)!=null&&(o=i.signal)!=null&&o.aborted||c.schedule_(),c.getDisposer_((s=t)==null?void 0:s.signal)}var qle=function(t){return t()};function zW(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:qle}function jW(e,t,n){var r,i,o,s;n===void 0&&(n=e5);var a=(r=n.name)!=null?r:"Reaction",l=Gr(a,n.onError?Yle(n.onError,t):t),c=!n.scheduler&&!n.delay,u=zW(n),d=!0,f=!1,h,p,g=n.compareStructural?Nf.structural:n.equals||Nf.default,v=new jf(a,function(){d||c?m():f||(f=!0,u(m))},n.onError,n.requiresObservable);function m(){if(f=!1,!v.isDisposed_){var y=!1;v.track(function(){var b=JC(!1,function(){return e(v)});y=d||!g(h,b),p=h,h=b}),(d&&n.fireImmediately||!d&&y)&&l(h,p,v),d=!1}}return(i=n)!=null&&(o=i.signal)!=null&&o.aborted||v.schedule_(),v.getDisposer_((s=n)==null?void 0:s.signal)}function Yle(e,t){return function(){try{return t.apply(this,arguments)}catch(n){e.call(this,n)}}}var Xle="onBO",Kle="onBUO";function UW(e,t,n){return VW(Xle,e,t,n)}function o5(e,t,n){return VW(Kle,e,t,n)}function VW(e,t,n,r){var i=typeof r=="function"?dl(t,n):dl(t),o=Ko(r)?r:n,s=e+"L";return i[s]?i[s].add(o):i[s]=new Set([o]),function(){var a=i[s];a&&(a.delete(o),a.size===0&&delete i[s])}}var Zle="never",e_="always",Jle="observed";function HW(e){e.isolateGlobalState===!0&&Rle();var t=e.useProxies,n=e.enforceActions;if(t!==void 0&&(vt.useProxies=t===e_?!0:t===Zle?!1:typeof Proxy<"u"),t==="ifavailable"&&(vt.verifyProxies=!0),n!==void 0){var r=n===e_?e_:n===Jle;vt.enforceActions=r,vt.allowStateChanges=!(r===!0||r===e_)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(i){i in e&&(vt[i]=!!e[i])}),vt.allowStateReads=!vt.observableRequiresReaction,e.reactionScheduler&&Ule(e.reactionScheduler)}function s5(e,t,n,r){var i=Rae(t);return id(function(){var o=vh(e,r)[It];Tm(i).forEach(function(s){o.extend_(s,i[s],n&&s in n?n[s]:!0)})}),e}function GW(e,t){return WW(dl(e,t))}function WW(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=ece(e.observing_).map(WW)),t}function Qle(e,t){return qW(dl(e,t))}function qW(e){var t={name:e.name_};return Lle(e)&&(t.observers=Array.from($le(e)).map(qW)),t}function ece(e){return Array.from(new Set(e))}var tce=0;function nA(){this.message="FLOW_CANCELLED"}nA.prototype=Object.create(Error.prototype);function nce(e){return e instanceof nA}var ST=pW("flow"),rce=pW("flow.bound",{bound:!0}),Uf=Object.assign(function(t,n){if(r1(n))return ST.decorate_20223_(t,n);if(Bf(n))return jg(t,n,ST);var r=t,i=r.name||"<unnamed flow>",o=function(){var a=this,l=arguments,c=++tce,u=Gr(i+" - runid: "+c+" - init",r).apply(a,l),d,f=void 0,h=new Promise(function(p,g){var v=0;d=g;function m(_){f=void 0;var x;try{x=Gr(i+" - runid: "+c+" - yield "+v++,u.next).call(u,_)}catch(w){return g(w)}b(x)}function y(_){f=void 0;var x;try{x=Gr(i+" - runid: "+c+" - yield "+v++,u.throw).call(u,_)}catch(w){return g(w)}b(x)}function b(_){if(Ko(_==null?void 0:_.then)){_.then(b,g);return}return _.done?p(_.value):(f=Promise.resolve(_.value),f.then(m,y))}m(void 0)});return h.cancel=Gr(i+" - runid: "+c+" - cancel",function(){try{f&&BN(f);var p=u.return(void 0),g=Promise.resolve(p.value);g.then(Hp,Hp),BN(g),d(new nA)}catch(v){d(v)}}),h};return o.isMobXFlow=!0,o},ST);Uf.bound=la(rce);function BN(e){Ko(e.cancel)&&e.cancel()}function ice(e){return e}function km(e){return(e==null?void 0:e.isMobXFlow)===!0}function a5(e,t,n){var r;return pi(e)||zi(e)||i5(e)?r=pa(e):ii(e)&&(r=pa(e,t)),r.dehancer=typeof t=="function"?t:n,function(){r.dehancer=void 0}}function rA(e,t,n){return Ko(n)?sce(e,t,n):oce(e,t)}function oce(e,t){return pa(e).intercept_(t)}function sce(e,t,n){return pa(e,t).intercept_(n)}function YW(e,t){if(t===void 0)return zf(e);if(ii(e)===!1||!e[It].values_.has(t))return!1;var n=dl(e,t);return zf(n)}function ace(e){return YW(e)}function XW(e,t){return YW(e,t)}function KW(e,t){return e?t!==void 0?ii(e)?e[It].values_.has(t):!1:ii(e)||!!e[It]||n5(e)||o2(e)||zf(e):!1}function iA(e){return KW(e)}function ZW(e,t){return KW(e,t)}function Uy(e){if(ii(e))return e[It].keys_();if(pi(e)||Xi(e))return Array.from(e.keys());if(zi(e))return e.map(function(t,n){return n});Yt(5)}function l5(e){if(ii(e))return Uy(e).map(function(t){return e[t]});if(pi(e))return Uy(e).map(function(t){return e.get(t)});if(Xi(e))return Array.from(e.values());if(zi(e))return e.slice();Yt(6)}function JW(e){if(ii(e))return Uy(e).map(function(t){return[t,e[t]]});if(pi(e))return Uy(e).map(function(t){return[t,e.get(t)]});if(Xi(e))return Array.from(e.entries());if(zi(e))return e.map(function(t,n){return[n,t]});Yt(7)}function c5(e,t,n){if(arguments.length===2&&!Xi(e)){go();var r=t;try{for(var i in r)c5(e,i,r[i])}finally{vo()}return}ii(e)?e[It].set_(t,n):pi(e)?e.set(t,n):Xi(e)?e.add(t):zi(e)?(typeof t!="number"&&(t=parseInt(t,10)),t<0&&Yt("Invalid index: '"+t+"'"),go(),t>=e.length&&(e.length=t+1),e[t]=n,vo()):Yt(8)}function lce(e,t){ii(e)?e[It].delete_(t):pi(e)||Xi(e)?e.delete(t):zi(e)?(typeof t!="number"&&(t=parseInt(t,10)),e.splice(t,1)):Yt(9)}function QW(e,t){if(ii(e))return e[It].has_(t);if(pi(e))return e.has(t);if(Xi(e))return e.has(t);if(zi(e))return t>=0&&t<e.length;Yt(10)}function cce(e,t){if(QW(e,t)){if(ii(e))return e[It].get_(t);if(pi(e))return e.get(t);if(zi(e))return e[t];Yt(11)}}function u5(e,t,n){if(ii(e))return e[It].defineProperty_(t,n);Yt(39)}function eq(e){if(ii(e))return e[It].ownKeys_();Yt(38)}function oA(e,t,n,r){return Ko(n)?dce(e,t,n,r):uce(e,t,n)}function uce(e,t,n){return pa(e).observe_(t,n)}function dce(e,t,n,r){return pa(e,t).observe_(n,r)}function t_(e,t,n){return e.set(t,n),n}function xp(e,t){if(e==null||typeof e!="object"||e instanceof Date||!iA(e))return e;if(i5(e)||zf(e))return xp(e.get(),t);if(t.has(e))return t.get(e);if(zi(e)){var n=t_(t,e,new Array(e.length));return e.forEach(function(s,a){n[a]=xp(s,t)}),n}if(Xi(e)){var r=t_(t,e,new Set);return e.forEach(function(s){r.add(xp(s,t))}),r}if(pi(e)){var i=t_(t,e,new Map);return e.forEach(function(s,a){i.set(a,xp(s,t))}),i}else{var o=t_(t,e,{});return eq(e).forEach(function(s){e1.propertyIsEnumerable.call(e,s)&&(o[s]=xp(e[s],t))}),o}}function fce(e,t){return xp(e,new Map)}function hce(){}function Wa(e,t){t===void 0&&(t=void 0),go();try{return e.apply(t)}finally{vo()}}function NR(e,t,n){return arguments.length===1||t&&typeof t=="object"?pce(e,t):tq(e,t,n||{})}function tq(e,t,n){var r;if(typeof n.timeout=="number"){var i=new Error("WHEN_TIMEOUT");r=setTimeout(function(){if(!s[It].isDisposed_)if(s(),n.onError)n.onError(i);else throw i},n.timeout)}n.name="When";var o=zu("When-effect",t),s=rl(function(a){var l=JC(!1,e);l&&(a.dispose(),r&&clearTimeout(r),o())},n);return s}function pce(e,t){var n;if(t!=null&&(n=t.signal)!=null&&n.aborted)return Object.assign(Promise.reject(new Error("WHEN_ABORTED")),{cancel:function(){return null}});var r,i,o=new Promise(function(s,a){var l,c=tq(e,s,Fu({},t,{onError:a}));r=function(){c(),a(new Error("WHEN_CANCELLED"))},i=function(){c(),a(new Error("WHEN_ABORTED"))},t==null||(l=t.signal)==null||l.addEventListener==null||l.addEventListener("abort",i)}).finally(function(){var s;return t==null||(s=t.signal)==null||s.removeEventListener==null?void 0:s.removeEventListener("abort",i)});return o.cancel=r,o}function Hh(e){return e[It]}var mce={has:function(t,n){return Hh(t).has_(n)},get:function(t,n){return Hh(t).get_(n)},set:function(t,n,r){var i;return Bf(n)?(i=Hh(t).set_(n,r,!0))!=null?i:!0:!1},deleteProperty:function(t,n){var r;return Bf(n)?(r=Hh(t).delete_(n,!0))!=null?r:!0:!1},defineProperty:function(t,n,r){var i;return(i=Hh(t).defineProperty_(n,r))!=null?i:!0},ownKeys:function(t){return Hh(t).ownKeys_()},preventExtensions:function(t){Yt(13)}};function gce(e,t){var n,r;return oW(),e=vh(e,t),(r=(n=e[It]).proxy_)!=null?r:n.proxy_=new Proxy(e,mce)}function ws(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function a1(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),sW(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function Ss(e,t){var n=gh();try{for(var r=[].concat(e.interceptors_||[]),i=0,o=r.length;i<o&&(t=r[i](t),t&&!t.type&&Yt(14),!!t);i++);return t}finally{oc(n)}}function ca(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function l1(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),sW(function(){var r=n.indexOf(t);r!==-1&&n.splice(r,1)})}function ua(e,t){var n=gh(),r=e.changeListeners_;if(r){r=r.slice();for(var i=0,o=r.length;i<o;i++)r[i](t);oc(n)}}function d5(e,t,n){return id(function(){var r,i=vh(e,n)[It];(r=t)!=null||(t=Dae(e)),Tm(t).forEach(function(o){return i.make_(o,t[o])})}),e}var CT=Symbol("mobx-keys");function vce(e,t,n){return fc(e)?s5(e,e,t,n):(id(function(){var r=vh(e,n)[It];if(!e[CT]){var i=Object.getPrototypeOf(e),o=new Set([].concat(Tm(e),Tm(i)));o.delete("constructor"),o.delete(It),t1(i,CT,o)}e[CT].forEach(function(s){return r.make_(s,t&&s in t?t[s]:!0)})}),e)}var NN="splice",il="update",yce=1e4,bce={get:function(t,n){var r=t[It];return n===It?r:n==="length"?r.getArrayLength_():typeof n=="string"&&!isNaN(n)?r.get_(parseInt(n)):ic(s2,n)?s2[n]:t[n]},set:function(t,n,r){var i=t[It];return n==="length"&&i.setArrayLength_(r),typeof n=="symbol"||isNaN(n)?t[n]=r:i.set_(parseInt(n),r),!0},preventExtensions:function(){Yt(15)}},f5=function(){function e(n,r,i,o){n===void 0&&(n="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=o,this.atom_=new i1(n),this.enhancer_=function(s,a){return r(s,a,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.dehanceValues_=function(r){return this.dehancer!==void 0&&r.length>0?r.map(this.dehancer):r},t.intercept_=function(r){return a1(this,r)},t.observe_=function(r,i){return i===void 0&&(i=!1),i&&r({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),l1(this,r)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(r){(typeof r!="number"||isNaN(r)||r<0)&&Yt("Out of range: "+r);var i=this.values_.length;if(r!==i)if(r>i){for(var o=new Array(r-i),s=0;s<r-i;s++)o[s]=void 0;this.spliceWithArray_(i,0,o)}else this.spliceWithArray_(r,i-r)},t.updateArrayLength_=function(r,i){r!==this.lastKnownLength_&&Yt(16),this.lastKnownLength_+=i,this.legacyMode_&&i>0&&uq(r+i+1)},t.spliceWithArray_=function(r,i,o){var s=this;this.atom_;var a=this.values_.length;if(r===void 0?r=0:r>a?r=a:r<0&&(r=Math.max(0,a+r)),arguments.length===1?i=a-r:i==null?i=0:i=Math.max(0,Math.min(i,a-r)),o===void 0&&(o=TR),ws(this)){var l=Ss(this,{object:this.proxy_,type:NN,index:r,removedCount:i,added:o});if(!l)return TR;i=l.removedCount,o=l.added}if(o=o.length===0?o:o.map(function(d){return s.enhancer_(d,void 0)}),this.legacyMode_){var c=o.length-i;this.updateArrayLength_(a,c)}var u=this.spliceItemsIntoValues_(r,i,o);return(i!==0||o.length!==0)&&this.notifyArraySplice_(r,o,u),this.dehanceValues_(u)},t.spliceItemsIntoValues_=function(r,i,o){if(o.length<yce){var s;return(s=this.values_).splice.apply(s,[r,i].concat(o))}else{var a=this.values_.slice(r,r+i),l=this.values_.slice(r+i);this.values_.length+=o.length-i;for(var c=0;c<o.length;c++)this.values_[r+c]=o[c];for(var u=0;u<l.length;u++)this.values_[r+o.length+u]=l[u];return a}},t.notifyArrayChildUpdate_=function(r,i,o){var s=!this.owned_&&ty(),a=ca(this),l=a||s?{observableKind:"array",object:this.proxy_,type:il,debugObjectName:this.atom_.name_,index:r,newValue:i,oldValue:o}:null;this.atom_.reportChanged(),a&&ua(this,l)},t.notifyArraySplice_=function(r,i,o){var s=!this.owned_&&ty(),a=ca(this),l=a||s?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:NN,index:r,removed:o,added:i,removedCount:o.length,addedCount:i.length}:null;this.atom_.reportChanged(),a&&ua(this,l)},t.get_=function(r){if(this.legacyMode_&&r>=this.values_.length){console.warn("[mobx] Out of bounds read: "+r);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[r])},t.set_=function(r,i){var o=this.values_;if(this.legacyMode_&&r>o.length&&Yt(17,r,o.length),r<o.length){this.atom_;var s=o[r];if(ws(this)){var a=Ss(this,{type:il,object:this.proxy_,index:r,newValue:i});if(!a)return;i=a.newValue}i=this.enhancer_(i,s);var l=i!==s;l&&(o[r]=i,this.notifyArrayChildUpdate_(r,i,s))}else{for(var c=new Array(r+1-o.length),u=0;u<c.length-1;u++)c[u]=void 0;c[c.length-1]=i,this.spliceWithArray_(o.length,0,c)}},e}();function xce(e,t,n,r){return n===void 0&&(n="ObservableArray"),r===void 0&&(r=!1),oW(),id(function(){var i=new f5(n,t,r,!1);lW(i.values_,It,i);var o=new Proxy(i.values_,bce);return i.proxy_=o,e&&e.length&&i.spliceWithArray_(0,0,e),o})}var s2={clear:function(){return this.splice(0)},replace:function(t){var n=this[It];return n.spliceWithArray_(0,n.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var s=this[It];switch(arguments.length){case 0:return[];case 1:return s.spliceWithArray_(t);case 2:return s.spliceWithArray_(t,n)}return s.spliceWithArray_(t,n,i)},spliceWithArray:function(t,n,r){return this[It].spliceWithArray_(t,n,r)},push:function(){for(var t=this[It],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.spliceWithArray_(t.values_.length,0,r),t.values_.length},pop:function(){return this.splice(Math.max(this[It].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[It],n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.spliceWithArray_(0,0,r),t.values_.length},reverse:function(){return vt.trackingDerivation&&Yt(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){vt.trackingDerivation&&Yt(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var n=this[It],r=n.dehanceValues_(n.values_).indexOf(t);return r>-1?(this.splice(r,1),!0):!1}};Kn("at",ss);Kn("concat",ss);Kn("flat",ss);Kn("includes",ss);Kn("indexOf",ss);Kn("join",ss);Kn("lastIndexOf",ss);Kn("slice",ss);Kn("toString",ss);Kn("toLocaleString",ss);Kn("toSorted",ss);Kn("toSpliced",ss);Kn("with",ss);Kn("every",Sa);Kn("filter",Sa);Kn("find",Sa);Kn("findIndex",Sa);Kn("findLast",Sa);Kn("findLastIndex",Sa);Kn("flatMap",Sa);Kn("forEach",Sa);Kn("map",Sa);Kn("some",Sa);Kn("toReversed",Sa);Kn("reduce",nq);Kn("reduceRight",nq);function Kn(e,t){typeof Array.prototype[e]=="function"&&(s2[e]=t(e))}function ss(e){return function(){var t=this[It];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Sa(e){return function(t,n){var r=this,i=this[It];i.atom_.reportObserved();var o=i.dehanceValues_(i.values_);return o[e](function(s,a){return t.call(n,s,a,r)})}}function nq(e){return function(){var t=this,n=this[It];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(o,s,a){return i(o,s,a,t)},r[e].apply(r,arguments)}}var _ce=rd("ObservableArrayAdministration",f5);function zi(e){return XC(e)&&_ce(e[It])}var rq,iq,wce={},fu="add",a2="delete";rq=Symbol.iterator;iq=Symbol.toStringTag;var sA=function(){function e(n,r,i){var o=this;r===void 0&&(r=Ff),i===void 0&&(i="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[It]=wce,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=r,this.name_=i,Ko(Map)||Yt(18),id(function(){o.keysAtom_=jy("ObservableMap.keys()"),o.data_=new Map,o.hasMap_=new Map,n&&o.merge(n)})}var t=e.prototype;return t.has_=function(r){return this.data_.has(r)},t.has=function(r){var i=this;if(!vt.trackingDerivation)return this.has_(r);var o=this.hasMap_.get(r);if(!o){var s=o=new Cu(this.has_(r),KC,"ObservableMap.key?",!1);this.hasMap_.set(r,s),o5(s,function(){return i.hasMap_.delete(r)})}return o.get()},t.set=function(r,i){var o=this.has_(r);if(ws(this)){var s=Ss(this,{type:o?il:fu,object:this,newValue:i,name:r});if(!s)return this;i=s.newValue}return o?this.updateValue_(r,i):this.addValue_(r,i),this},t.delete=function(r){var i=this;if(this.keysAtom_,ws(this)){var o=Ss(this,{type:a2,object:this,name:r});if(!o)return!1}if(this.has_(r)){var s=ty(),a=ca(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:a2,object:this,oldValue:this.data_.get(r).value_,name:r}:null;return Wa(function(){var c;i.keysAtom_.reportChanged(),(c=i.hasMap_.get(r))==null||c.setNewValue_(!1);var u=i.data_.get(r);u.setNewValue_(void 0),i.data_.delete(r)}),a&&ua(this,l),!0}return!1},t.updateValue_=function(r,i){var o=this.data_.get(r);if(i=o.prepareNewValue_(i),i!==vt.UNCHANGED){var s=ty(),a=ca(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:il,object:this,oldValue:o.value_,name:r,newValue:i}:null;o.setNewValue_(i),a&&ua(this,l)}},t.addValue_=function(r,i){var o=this;this.keysAtom_,Wa(function(){var c,u=new Cu(i,o.enhancer_,"ObservableMap.key",!1);o.data_.set(r,u),i=u.value_,(c=o.hasMap_.get(r))==null||c.setNewValue_(!0),o.keysAtom_.reportChanged()});var s=ty(),a=ca(this),l=a||s?{observableKind:"map",debugObjectName:this.name_,type:fu,object:this,name:r,newValue:i}:null;a&&ua(this,l)},t.get=function(r){return this.has(r)?this.dehanceValue_(this.data_.get(r).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var r=this,i=this.keys();return Vy({next:function(){var s=i.next(),a=s.done,l=s.value;return{done:a,value:a?void 0:r.get(l)}}})},t.entries=function(){var r=this,i=this.keys();return Vy({next:function(){var s=i.next(),a=s.done,l=s.value;return{done:a,value:a?void 0:[l,r.get(l)]}}})},t[rq]=function(){return this.entries()},t.forEach=function(r,i){for(var o=Gp(this),s;!(s=o()).done;){var a=s.value,l=a[0],c=a[1];r.call(i,c,l,this)}},t.merge=function(r){var i=this;return pi(r)&&(r=new Map(r)),Wa(function(){fc(r)?Iae(r).forEach(function(o){return i.set(o,r[o])}):Array.isArray(r)?r.forEach(function(o){var s=o[0],a=o[1];return i.set(s,a)}):zg(r)?(r.constructor!==Map&&Yt(19,r),r.forEach(function(o,s){return i.set(s,o)})):r!=null&&Yt(20,r)}),this},t.clear=function(){var r=this;Wa(function(){Ug(function(){for(var i=Gp(r.keys()),o;!(o=i()).done;){var s=o.value;r.delete(s)}})})},t.replace=function(r){var i=this;return Wa(function(){for(var o=Sce(r),s=new Map,a=!1,l=Gp(i.data_.keys()),c;!(c=l()).done;){var u=c.value;if(!o.has(u)){var d=i.delete(u);if(d)a=!0;else{var f=i.data_.get(u);s.set(u,f)}}}for(var h=Gp(o.entries()),p;!(p=h()).done;){var g=p.value,v=g[0],m=g[1],y=i.data_.has(v);if(i.set(v,m),i.data_.has(v)){var b=i.data_.get(v);s.set(v,b),y||(a=!0)}}if(!a)if(i.data_.size!==s.size)i.keysAtom_.reportChanged();else for(var _=i.data_.keys(),x=s.keys(),w=_.next(),S=x.next();!w.done;){if(w.value!==S.value){i.keysAtom_.reportChanged();break}w=_.next(),S=x.next()}i.data_=s}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(r,i){return l1(this,r)},t.intercept_=function(r){return a1(this,r)},t5(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:iq,get:function(){return"Map"}}]),e}(),pi=rd("ObservableMap",sA);function Sce(e){if(zg(e)||pi(e))return e;if(Array.isArray(e))return new Map(e);if(fc(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}else return Yt(21,e)}var oq,sq,Cce={};oq=Symbol.iterator;sq=Symbol.toStringTag;var h5=function(){function e(n,r,i){var o=this;r===void 0&&(r=Ff),i===void 0&&(i="ObservableSet"),this.name_=void 0,this[It]=Cce,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,Ko(Set)||Yt(22),this.enhancer_=function(s,a){return r(s,a,i)},id(function(){o.atom_=jy(o.name_),n&&o.replace(n)})}var t=e.prototype;return t.dehanceValue_=function(r){return this.dehancer!==void 0?this.dehancer(r):r},t.clear=function(){var r=this;Wa(function(){Ug(function(){for(var i=Gp(r.data_.values()),o;!(o=i()).done;){var s=o.value;r.delete(s)}})})},t.forEach=function(r,i){for(var o=Gp(this),s;!(s=o()).done;){var a=s.value;r.call(i,a,a,this)}},t.add=function(r){var i=this;if(this.atom_,ws(this)){var o=Ss(this,{type:fu,object:this,newValue:r});if(!o)return this}if(!this.has(r)){Wa(function(){i.data_.add(i.enhancer_(r,void 0)),i.atom_.reportChanged()});var s=!1,a=ca(this),l=a||s?{observableKind:"set",debugObjectName:this.name_,type:fu,object:this,newValue:r}:null;a&&ua(this,l)}return this},t.delete=function(r){var i=this;if(ws(this)){var o=Ss(this,{type:a2,object:this,oldValue:r});if(!o)return!1}if(this.has(r)){var s=!1,a=ca(this),l=a||s?{observableKind:"set",debugObjectName:this.name_,type:a2,object:this,oldValue:r}:null;return Wa(function(){i.atom_.reportChanged(),i.data_.delete(r)}),a&&ua(this,l),!0}return!1},t.has=function(r){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(r))},t.entries=function(){var r=0,i=Array.from(this.keys()),o=Array.from(this.values());return Vy({next:function(){var a=r;return r+=1,a<o.length?{value:[i[a],o[a]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var r=this,i=0,o=Array.from(this.data_.values());return Vy({next:function(){return i<o.length?{value:r.dehanceValue_(o[i++]),done:!1}:{done:!0}}})},t.replace=function(r){var i=this;return Xi(r)&&(r=new Set(r)),Wa(function(){Array.isArray(r)?(i.clear(),r.forEach(function(o){return i.add(o)})):n1(r)?(i.clear(),r.forEach(function(o){return i.add(o)})):r!=null&&Yt("Cannot initialize set from "+r)}),this},t.observe_=function(r,i){return l1(this,r)},t.intercept_=function(r){return a1(this,r)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[oq]=function(){return this.values()},t5(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:sq,get:function(){return"Set"}}]),e}(),Xi=rd("ObservableSet",h5),FN=Object.create(null),zN="remove",aq=function(){function e(n,r,i,o){r===void 0&&(r=new Map),o===void 0&&(o=dle),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=n,this.values_=r,this.name_=i,this.defaultAnnotation_=o,this.keysAtom_=new i1("ObservableObject.keys"),this.isPlainObject_=fc(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(r){return this.values_.get(r).get()},t.setObservablePropValue_=function(r,i){var o=this.values_.get(r);if(o instanceof Om)return o.set(i),!0;if(ws(this)){var s=Ss(this,{type:il,object:this.proxy_||this.target_,name:r,newValue:i});if(!s)return null;i=s.newValue}if(i=o.prepareNewValue_(i),i!==vt.UNCHANGED){var a=ca(this),l=!1,c=a||l?{type:il,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:o.value_,name:r,newValue:i}:null;o.setNewValue_(i),a&&ua(this,c)}return!0},t.get_=function(r){return vt.trackingDerivation&&!ic(this.target_,r)&&this.has_(r),this.target_[r]},t.set_=function(r,i,o){return o===void 0&&(o=!1),ic(this.target_,r)?this.values_.has(r)?this.setObservablePropValue_(r,i):o?Reflect.set(this.target_,r,i):(this.target_[r]=i,!0):this.extend_(r,{value:i,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,o)},t.has_=function(r){if(!vt.trackingDerivation)return r in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var i=this.pendingKeys_.get(r);return i||(i=new Cu(r in this.target_,KC,"ObservableObject.key?",!1),this.pendingKeys_.set(r,i)),i.get()},t.make_=function(r,i){if(i===!0&&(i=this.defaultAnnotation_),i!==!1){if(!(r in this.target_)){var o;if((o=this.target_[Ka])!=null&&o[r])return;Yt(1,i.annotationType_,this.name_+"."+r.toString())}for(var s=this.target_;s&&s!==e1;){var a=t2(s,r);if(a){var l=i.make_(this,r,a,s);if(l===0)return;if(l===1)break}s=Object.getPrototypeOf(s)}UN(this,i,r)}},t.extend_=function(r,i,o,s){if(s===void 0&&(s=!1),o===!0&&(o=this.defaultAnnotation_),o===!1)return this.defineProperty_(r,i,s);var a=o.extend_(this,r,i,s);return a&&UN(this,o,r),a},t.defineProperty_=function(r,i,o){o===void 0&&(o=!1),this.keysAtom_;try{go();var s=this.delete_(r);if(!s)return s;if(ws(this)){var a=Ss(this,{object:this.proxy_||this.target_,name:r,type:fu,newValue:i.value});if(!a)return null;var l=a.newValue;i.value!==l&&(i=Fu({},i,{value:l}))}if(o){if(!Reflect.defineProperty(this.target_,r,i))return!1}else nl(this.target_,r,i);this.notifyPropertyAddition_(r,i.value)}finally{vo()}return!0},t.defineObservableProperty_=function(r,i,o,s){s===void 0&&(s=!1),this.keysAtom_;try{go();var a=this.delete_(r);if(!a)return a;if(ws(this)){var l=Ss(this,{object:this.proxy_||this.target_,name:r,type:fu,newValue:i});if(!l)return null;i=l.newValue}var c=jN(r),u={configurable:vt.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:c.get,set:c.set};if(s){if(!Reflect.defineProperty(this.target_,r,u))return!1}else nl(this.target_,r,u);var d=new Cu(i,o,"ObservableObject.key",!1);this.values_.set(r,d),this.notifyPropertyAddition_(r,d.value_)}finally{vo()}return!0},t.defineComputedProperty_=function(r,i,o){o===void 0&&(o=!1),this.keysAtom_;try{go();var s=this.delete_(r);if(!s)return s;if(ws(this)){var a=Ss(this,{object:this.proxy_||this.target_,name:r,type:fu,newValue:void 0});if(!a)return null}i.name||(i.name="ObservableObject.key"),i.context=this.proxy_||this.target_;var l=jN(r),c={configurable:vt.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:l.get,set:l.set};if(o){if(!Reflect.defineProperty(this.target_,r,c))return!1}else nl(this.target_,r,c);this.values_.set(r,new Om(i)),this.notifyPropertyAddition_(r,void 0)}finally{vo()}return!0},t.delete_=function(r,i){if(i===void 0&&(i=!1),this.keysAtom_,!ic(this.target_,r))return!0;if(ws(this)){var o=Ss(this,{object:this.proxy_||this.target_,name:r,type:zN});if(!o)return null}try{var s,a;go();var l=ca(this),c=!1,u=this.values_.get(r),d=void 0;if(!u&&(l||c)){var f;d=(f=t2(this.target_,r))==null?void 0:f.value}if(i){if(!Reflect.deleteProperty(this.target_,r))return!1}else delete this.target_[r];if(u&&(this.values_.delete(r),u instanceof Cu&&(d=u.value_),kW(u)),this.keysAtom_.reportChanged(),(s=this.pendingKeys_)==null||(a=s.get(r))==null||a.set(r in this.target_),l||c){var h={type:zN,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:d,name:r};l&&ua(this,h)}}finally{vo()}return!0},t.observe_=function(r,i){return l1(this,r)},t.intercept_=function(r){return a1(this,r)},t.notifyPropertyAddition_=function(r,i){var o,s,a=ca(this),l=!1;if(a||l){var c=a||l?{type:fu,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:r,newValue:i}:null;a&&ua(this,c)}(o=this.pendingKeys_)==null||(s=o.get(r))==null||s.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Tm(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function vh(e,t){var n;if(ic(e,It))return e;var r=(n=t==null?void 0:t.name)!=null?n:"ObservableObject",i=new aq(e,new Map,String(r),wle(t));return t1(e,It,i),e}var Ace=rd("ObservableObjectAdministration",aq);function jN(e){return FN[e]||(FN[e]={get:function(){return this[It].getObservablePropValue_(e)},set:function(n){return this[It].setObservablePropValue_(e,n)}})}function ii(e){return XC(e)?Ace(e[It]):!1}function UN(e,t,n){var r;(r=e.target_[Ka])==null||delete r[n]}var Pce=cq(0),Mce=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),AT=0,lq=function(){};function Ece(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}Ece(lq,Array.prototype);var p5=function(e,t,n){dW(r,e);function r(o,s,a,l){var c;return a===void 0&&(a="ObservableArray"),l===void 0&&(l=!1),c=e.call(this)||this,id(function(){var u=new f5(a,s,l,!0);u.proxy_=wT(c),lW(wT(c),It,u),o&&o.length&&c.spliceWithArray(0,0,o),Mce&&Object.defineProperty(wT(c),"0",Pce)}),c}var i=r.prototype;return i.concat=function(){this[It].atom_.reportObserved();for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return Array.prototype.concat.apply(this.slice(),a.map(function(c){return zi(c)?c.slice():c}))},i[n]=function(){var o=this,s=0;return Vy({next:function(){return s<o.length?{value:o[s++],done:!1}:{done:!0,value:void 0}}})},t5(r,[{key:"length",get:function(){return this[It].getArrayLength_()},set:function(s){this[It].setArrayLength_(s)}},{key:t,get:function(){return"Array"}}]),r}(lq,Symbol.toStringTag,Symbol.iterator);Object.entries(s2).forEach(function(e){var t=e[0],n=e[1];t!=="concat"&&t1(p5.prototype,t,n)});function cq(e){return{enumerable:!1,configurable:!0,get:function(){return this[It].get_(e)},set:function(n){this[It].set_(e,n)}}}function Tce(e){nl(p5.prototype,""+e,cq(e))}function uq(e){if(e>AT){for(var t=AT;t<e+100;t++)Tce(t);AT=e}}uq(1e3);function Oce(e,t,n){return new p5(e,t,n)}function dl(e,t){if(typeof e=="object"&&e!==null){if(zi(e))return t!==void 0&&Yt(23),e[It].atom_;if(Xi(e))return e.atom_;if(pi(e)){if(t===void 0)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||Yt(25,t,l2(e)),n}if(ii(e)){if(!t)return Yt(26);var r=e[It].values_.get(t);return r||Yt(27,t,l2(e)),r}if(n5(e)||zf(e)||o2(e))return e}else if(Ko(e)&&o2(e[It]))return e[It];Yt(28)}function pa(e,t){if(e||Yt(29),t!==void 0)return pa(dl(e,t));if(n5(e)||zf(e)||o2(e)||pi(e)||Xi(e))return e;if(e[It])return e[It];Yt(24,e)}function l2(e,t){var n;if(t!==void 0)n=dl(e,t);else{if(s1(e))return e.name;ii(e)||pi(e)||Xi(e)?n=pa(e):n=dl(e)}return n.name_}function id(e){var t=gh(),n=QC(!0);go();try{return e()}finally{vo(),eA(n),oc(t)}}var VN=e1.toString;function m5(e,t,n){return n===void 0&&(n=-1),FR(e,t,n)}function FR(e,t,n,r,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;if(o!=="function"&&o!=="object"&&typeof t!="object")return!1;var s=VN.call(e);if(s!==VN.call(t))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++;break}e=HN(e),t=HN(t);var a=s==="[object Array]";if(!a){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,c=t.constructor;if(l!==c&&!(Ko(l)&&l instanceof l&&Ko(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(n===0)return!1;n<0&&(n=-1),r=r||[],i=i||[];for(var u=r.length;u--;)if(r[u]===e)return i[u]===t;if(r.push(e),i.push(t),a){if(u=e.length,u!==t.length)return!1;for(;u--;)if(!FR(e[u],t[u],n-1,r,i))return!1}else{var d=Object.keys(e),f;if(u=d.length,Object.keys(t).length!==u)return!1;for(;u--;)if(f=d[u],!(ic(t,f)&&FR(e[f],t[f],n-1,r,i)))return!1}return r.pop(),i.pop(),!0}function HN(e){return zi(e)?e.slice():zg(e)||pi(e)||n1(e)||Xi(e)?Array.from(e.entries()):e}function Vy(e){return e[Symbol.iterator]=Ice,e}function Ice(){return this}["Symbol","Map","Set"].forEach(function(e){var t=Q$();typeof t[e]>"u"&&Yt("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:$W,extras:{getDebugName:l2},$mobx:It});const Rce=Object.freeze(Object.defineProperty({__proto__:null,$mobx:It,FlowCancellationError:nA,ObservableMap:sA,ObservableSet:h5,Reaction:jf,_allowStateChanges:JC,_allowStateChangesInsideComputed:Rm,_allowStateReadsEnd:lm,_allowStateReadsStart:tA,_autoAction:Im,_endAction:SW,_getAdministration:pa,_getGlobalState:TW,_interceptReads:a5,_isComputingDerivation:Tle,_resetGlobalState:kle,_startAction:wW,action:Gr,autorun:rl,comparer:Nf,computed:mh,configure:HW,createAtom:jy,defineProperty:u5,entries:JW,extendObservable:s5,flow:Uf,flowResult:ice,get:cce,getAtom:dl,getDebugName:l2,getDependencyTree:GW,getObserverTree:Qle,has:QW,intercept:rA,isAction:s1,isBoxedObservable:i5,isComputed:ace,isComputedProp:XW,isFlow:km,isFlowCancellationError:nce,isObservable:iA,isObservableArray:zi,isObservableMap:pi,isObservableObject:ii,isObservableProp:ZW,isObservableSet:Xi,keys:Uy,makeAutoObservable:vce,makeObservable:d5,observable:Rn,observe:oA,onBecomeObserved:UW,onBecomeUnobserved:o5,onReactionError:Fle,override:Vae,ownKeys:eq,reaction:jW,remove:lce,runInAction:Rm,set:c5,spy:$W,toJS:fce,trace:hce,transaction:Wa,untracked:Ug,values:l5,when:NR},Symbol.toStringTag,{value:"Module"}));if(!I.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!d5)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");function kce(e){e()}function dq(e){e||(e=kce),HW({reactionScheduler:e})}function Lce(e){return GW(e)}var fq=!1;function hq(e){fq=e}function Lm(){return fq}var $ce=1e4,Dce=1e4,Bce=function(){function e(t){var n=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(r){r===void 0&&(r=$ce),clearTimeout(n.sweepTimeout),n.sweepTimeout=void 0;var i=Date.now();n.registrations.forEach(function(o,s){i-o.registeredAt>=r&&(n.finalize(o.value),n.registrations.delete(s))}),n.registrations.size>0&&n.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){n.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,r){this.registrations.set(r,{value:n,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,Dce))}}),e}(),Nce=typeof FinalizationRegistry<"u"?FinalizationRegistry:Bce,Hy=new Nce(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),pq={exports:{}},mq={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $m=I;function Fce(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zce=typeof Object.is=="function"?Object.is:Fce,jce=$m.useState,Uce=$m.useEffect,Vce=$m.useLayoutEffect,Hce=$m.useDebugValue;function Gce(e,t){var n=t(),r=jce({inst:{value:n,getSnapshot:t}}),i=r[0].inst,o=r[1];return Vce(function(){i.value=n,i.getSnapshot=t,PT(i)&&o({inst:i})},[e,n,t]),Uce(function(){return PT(i)&&o({inst:i}),e(function(){PT(i)&&o({inst:i})})},[e]),Hce(n),n}function PT(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zce(e,n)}catch{return!0}}function Wce(e,t){return t()}var qce=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Wce:Gce;mq.useSyncExternalStore=$m.useSyncExternalStore!==void 0?$m.useSyncExternalStore:qce;pq.exports=mq;var Yce=pq.exports,Xce=function(){};function GN(e){e.reaction=new jf("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function g5(e,t){if(t===void 0&&(t="observed"),Lm())return e();var n=$e.useRef(null);if(!n.current){var r={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(a){return Hy.unregister(r),r.onStoreChange=a,r.reaction||(GN(r),r.stateVersion=Symbol()),function(){var l;r.onStoreChange=null,(l=r.reaction)===null||l===void 0||l.dispose(),r.reaction=null}},getSnapshot:function(){return r.stateVersion}};n.current=r}var i=n.current;i.reaction||(GN(i),Hy.register(n,i,i)),$e.useDebugValue(i.reaction,Lce),Yce.useSyncExternalStore(i.subscribe,i.getSnapshot,Xce);var o,s;if(i.reaction.track(function(){try{o=e()}catch(a){s=a}}),s)throw s;return o}var gq=typeof Symbol=="function"&&Symbol.for,WN=gq?Symbol.for("react.forward_ref"):typeof I.forwardRef=="function"&&I.forwardRef(function(e){return null}).$$typeof,qN=gq?Symbol.for("react.memo"):typeof I.memo=="function"&&I.memo(function(e){return null}).$$typeof;function Kce(e,t){var n;if(qN&&e.$$typeof===qN)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");if(Lm())return e;var r=(n=t==null?void 0:t.forwardRef)!==null&&n!==void 0?n:!1,i=e,o=e.displayName||e.name;if(WN&&e.$$typeof===WN&&(r=!0,i=e.render,typeof i!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var s=function(a,l){return g5(function(){return i(a,l)},o)};return s.displayName=e.displayName,Object.defineProperty(s,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(s.contextTypes=e.contextTypes),r&&(s=I.forwardRef(s)),s=I.memo(s),Jce(e,s),s}var Zce={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function Jce(e,t){Object.keys(e).forEach(function(n){Zce[n]||Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}function vq(e){var t=e.children,n=e.render,r=t||n;return typeof r!="function"?null:g5(r)}vq.displayName="Observer";function Qce(e,t){return I.useState(function(){return Rn(e(),t,{autoBind:!0})})[0]}var eue=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o};function yq(e){var t=eue(I.useState(function(){return Rn(e,{},{deep:!1})}),1),n=t[0];return Rm(function(){Object.assign(n,e)}),n}function tue(e,t){var n=t&&yq(t);return I.useState(function(){return Rn(e(n),void 0,{autoBind:!0})})[0]}var MT;dq(Nu.unstable_batchedUpdates);MT=Hy.finalizeAllImmediately;function nue(e,t){return t===void 0&&(t="observed"),g5(e,t)}function rue(e){hq(e)}function iue(e,t){if(YN(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.hasOwnProperty.call(t,n[i])||!YN(e[n[i]],t[n[i]]))return!1;return!0}function YN(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var oue={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,displayName:1,propTypes:1};function sue(e,t){var n=Object.getOwnPropertyNames(Object.getPrototypeOf(e));Object.getOwnPropertyNames(e).forEach(function(r){!oue[r]&&n.indexOf(r)===-1&&Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}var XN=Symbol("patchMixins"),bq=Symbol("patchedDefinition");function aue(e,t){var n=e[XN]=e[XN]||{},r=n[t]=n[t]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}function KN(e,t){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t.locks++;try{var s;return e!=null&&(s=e.apply(this,i)),s}finally{t.locks--,t.locks===0&&t.methods.forEach(function(a){a.apply(n,i)})}}function ZN(e,t){var n=function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];KN.call.apply(KN,[this,e,t].concat(o))};return n}function xq(e,t,n){var r=aue(e,t);r.methods.indexOf(n)<0&&r.methods.push(n);var i=Object.getOwnPropertyDescriptor(e,t);if(!(i&&i[bq])){var o=e[t],s=_q(e,t,i?i.enumerable:void 0,r,o);Object.defineProperty(e,t,s)}}function _q(e,t,n,r,i){var o,s=ZN(i,r);return o={},o[bq]=!0,o.get=function(){return s},o.set=function(l){if(this===e)s=ZN(l,r);else{var c=_q(this,t,n,r,l);Object.defineProperty(this,t,c)}},o.configurable=!0,o.enumerable=n,o}var JN=Symbol("ObserverAdministration"),QN=Symbol("isMobXReactObserver");function zR(e){var t;return(t=e[JN])!=null?t:e[JN]={reaction:null,mounted:!1,reactionInvalidatedBeforeMount:!1,forceUpdate:null,name:jR(e.constructor),state:void 0,props:void 0,context:void 0}}function lue(e){var t=e.prototype;if(e[QN]){var n=jR(e);throw new Error("The provided component class ("+n+") has already been declared as an observer component.")}else e[QN]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==I.PureComponent){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=eF;else if(t.shouldComponentUpdate!==eF)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}var r=t.render;if(typeof r!="function"){var i=jR(e);throw new Error("[mobx-react] class component ("+i+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}t.render=function(){return Object.defineProperty(this,"render",{configurable:!1,writable:!1,value:Lm()?r:cue.call(this,r)}),this.render()};var o=t.componentDidMount;return t.componentDidMount=function(){var s=this,a=zR(this);return a.mounted=!0,Hy.unregister(this),a.forceUpdate=function(){return s.forceUpdate()},(!a.reaction||a.reactionInvalidatedBeforeMount)&&a.forceUpdate(),o==null?void 0:o.apply(this,arguments)},xq(t,"componentWillUnmount",function(){var s;if(!Lm()){var a=zR(this);(s=a.reaction)==null||s.dispose(),a.reaction=null,a.forceUpdate=null,a.mounted=!1,a.reactionInvalidatedBeforeMount=!1}}),e}function jR(e){return e.displayName||e.name||"<component>"}function cue(e){var t=e.bind(this),n=zR(this);function r(){n.reaction||(n.reaction=uue(n),n.mounted||Hy.register(this,n,this));var i=void 0,o=void 0;if(n.reaction.track(function(){try{o=JC(!1,t)}catch(s){i=s}}),i)throw i;return o}return r}function uue(e){return new jf(e.name+".render()",function(){if(!e.mounted){e.reactionInvalidatedBeforeMount=!0;return}try{e.forceUpdate==null||e.forceUpdate()}catch{var t;(t=e.reaction)==null||t.dispose(),e.reaction=null}})}function eF(e,t){return Lm()&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==t?!0:!iue(this.props,e)}function Cn(e,t){if(t&&t.kind!=="class")throw new Error("The @observer decorator can be used on classes only");return e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(I.Component,e)||Object.prototype.isPrototypeOf.call(I.PureComponent,e)?lue(e):Kce(e)}function c2(){return c2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c2.apply(this,arguments)}function due(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}var fue=["children"],u2=$e.createContext({});function wq(e){var t=e.children,n=due(e,fue),r=$e.useContext(u2),i=$e.useRef(c2({},r,n)),o=i.current;return $e.createElement(u2.Provider,{value:o},t)}wq.displayName="MobXProvider";function tF(e,t,n,r){var i=$e.forwardRef(function(o,s){var a=c2({},o),l=$e.useContext(u2);return Object.assign(a,e(l||{},a)||{}),s&&(a.ref=s),$e.createElement(t,a)});return r&&(i=Cn(i)),i.isMobxInjector=!0,sue(t,i),i.wrappedComponent=t,i.displayName=hue(t,n),i}function hue(e,t){var n,r=e.displayName||e.name||e.constructor&&e.constructor.name||"Component";return t?n="inject-with-"+t+"("+r+")":n="inject("+r+")",n}function pue(e){return function(t,n){return e.forEach(function(r){if(!(r in n)){if(!(r in t))throw new Error("MobX injector: Store '"+r+"' is not available! Make sure it is provided by some Provider");n[r]=t[r]}}),n}}function mue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(typeof arguments[0]=="function"){var r=arguments[0];return function(i){return tF(r,i,r.name,!0)}}else return function(i){return tF(pue(t),i,t.join("-"),!1)}}var gue=Number.parseInt($e.version.split(".")[0]),nF=!1,Kw=Symbol("disposeOnUnmountProto"),Zw=Symbol("disposeOnUnmountInst");function vue(){var e=this;[].concat(this[Kw]||[],this[Zw]||[]).forEach(function(t){var n=typeof t=="string"?e[t]:t;n!=null&&(Array.isArray(n)?n.map(function(r){return r()}):n())})}function Sq(e,t){if(Array.isArray(t))return t.map(function(l){return Sq(e,l)});nF||(gue>=18?console.error("[mobx-react] disposeOnUnmount is not compatible with React 18 and higher. Don't use it."):console.warn("[mobx-react] disposeOnUnmount is deprecated. It won't work correctly with React 18 and higher."),nF=!0);var n=Object.getPrototypeOf(e).constructor,r=Object.getPrototypeOf(e.constructor),i=Object.getPrototypeOf(Object.getPrototypeOf(e));if(!(n===$e.Component||n===$e.PureComponent||r===$e.Component||r===$e.PureComponent||i===$e.Component||i===$e.PureComponent))throw new Error("[mobx-react] disposeOnUnmount only supports direct subclasses of React.Component or React.PureComponent.");if(typeof t!="string"&&typeof t!="function"&&!Array.isArray(t))throw new Error("[mobx-react] disposeOnUnmount only works if the parameter is either a property key or a function.");var o=typeof t=="string",s=!!e[Kw]||!!e[Zw],a=o?e[Kw]||(e[Kw]=[]):e[Zw]||(e[Zw]=[]);if(a.push(t),s||xq(e,"componentWillUnmount",vue),typeof t!="string")return t}function Cq(e){function t(r,i,o,s,a,l){for(var c=arguments.length,u=new Array(c>6?c-6:0),d=6;d<c;d++)u[d-6]=arguments[d];return Ug(function(){if(s=s||"<<anonymous>>",l=l||o,i[o]==null){if(r){var f=i[o]===null?"null":"undefined";return new Error("The "+a+" `"+l+"` is marked as required in `"+s+"`, but its value is `"+f+"`.")}return null}else return e.apply(void 0,[i,o,s,a,l].concat(u))})}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function yue(e,t){return e==="symbol"||t["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&t instanceof Symbol}function Aq(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":yue(t,e)?"symbol":t}function bue(e){var t=Aq(e);if(t==="object"){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function Vg(e,t){return Cq(function(n,r,i,o,s){return Ug(function(){if(e&&Aq(n[r])===t.toLowerCase())return null;var a;switch(t){case"Array":a=zi;break;case"Object":a=ii;break;case"Map":a=pi;break;default:throw new Error("Unexpected mobxType: "+t)}var l=n[r];if(!a(l)){var c=bue(l),u=e?" or javascript `"+t.toLowerCase()+"`":"";return new Error("Invalid prop `"+s+"` of type `"+c+"` supplied to `"+i+"`, expected `mobx.Observable"+t+"`"+u+".")}return null})})}function Pq(e,t){return Cq(function(n,r,i,o,s){for(var a=arguments.length,l=new Array(a>5?a-5:0),c=5;c<a;c++)l[c-5]=arguments[c];return Ug(function(){if(typeof t!="function")return new Error("Property `"+s+"` of component `"+i+"` has invalid PropType notation.");var u=Vg(e,"Array")(n,r,i,o,s);if(u instanceof Error)return u;for(var d=n[r],f=0;f<d.length;f++)if(u=t.apply(void 0,[d,f,i,o,s+"["+f+"]"].concat(l)),u instanceof Error)return u;return null})})}var xue=Vg(!1,"Array"),_ue=Pq.bind(null,!1),wue=Vg(!1,"Map"),Sue=Vg(!1,"Object"),Cue=Vg(!0,"Array"),Aue=Pq.bind(null,!0),Pue=Vg(!0,"Object"),Mue={observableArray:xue,observableArrayOf:_ue,observableMap:wue,observableObject:Sue,arrayOrObservableArray:Cue,arrayOrObservableArrayOf:Aue,objectOrObservableObject:Pue};if(!I.Component)throw new Error("mobx-react requires React to be available");if(!Rn)throw new Error("mobx-react requires mobx to be available");const Eue=Object.freeze(Object.defineProperty({__proto__:null,MobXProviderContext:u2,Observer:vq,PropTypes:Mue,Provider:wq,disposeOnUnmount:Sq,enableStaticRendering:hq,inject:mue,isUsingStaticRendering:Lm,observer:Cn,observerBatching:dq,useAsObservableSource:yq,useLocalObservable:Qce,useLocalStore:tue,useObserver:nue,useStaticRendering:rue},Symbol.toStringTag,{value:"Module"}));var rF={},Mq="warn";function Eq(e){Mq=e}function Tq(){return Mq}function Tue(e){Eq(e)}var ei;(function(e){e.afterCreate="afterCreate",e.afterAttach="afterAttach",e.afterCreationFinalization="afterCreationFinalization",e.beforeDetach="beforeDetach",e.beforeDestroy="beforeDestroy"})(ei||(ei={}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var UR=function(e,t){return UR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},UR(e,t)};function rr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");UR(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var fi=function(){return fi=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},fi.apply(this,arguments)};function Oue(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Oq(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ny(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v5(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function od(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v5(arguments[t]));return e}function c1(e){return Ot(e).type}function Iue(e,t){return Ot(e).getChildType(t)}function Iq(e,t){return Ot(e).onPatch(t)}function Rq(e,t){return Ot(e).onSnapshot(t)}function Dm(e,t){Ot(e).applyPatches(C5(t))}function Rue(e,t){var n={patches:[],inversePatches:[]},r={},i,o={get recording(){return!!i},get patches(){return r.patches||(r.patches=n.patches.slice()),r.patches},get reversedInversePatches(){return r.reversedInversePatches||(r.reversedInversePatches=n.inversePatches.slice().reverse()),r.reversedInversePatches},get inversePatches(){return r.inversePatches||(r.inversePatches=n.inversePatches.slice()),r.inversePatches},stop:function(){i&&(i(),i=void 0)},resume:function(){i||(i=Iq(e,function(s,a){t&&!t(s,a,x5())||(n.patches.push(s),n.inversePatches.push(a),r.patches=void 0,r.inversePatches=void 0,r.reversedInversePatches=void 0)}))},replay:function(s){Dm(s||e,n.patches)},undo:function(s){Dm(s||e,n.inversePatches.slice().reverse())}};return o.resume(),o}function kue(e){var t=Ot(e);if(!t.isRoot)throw At("`protect` can only be invoked on root nodes");t.isProtectionEnabled=!0}function Lue(e){var t=Ot(e);if(!t.isRoot)throw At("`unprotect` can only be invoked on root nodes");t.isProtectionEnabled=!1}function $ue(e){return Ot(e).isProtected}function kq(e,t){return Ot(e).applySnapshot(t)}function u1(e,t){t===void 0&&(t=!0);var n=Ot(e);return t?n.snapshot:n.type.getSnapshot(n,!1)}function Due(e,t){t===void 0&&(t=1);for(var n=Ot(e).parent;n;){if(--t===0)return!0;n=n.parent}return!1}function Bue(e,t){t===void 0&&(t=1);for(var n=t,r=Ot(e).parent;r;){if(--n===0)return r.storedValue;r=r.parent}throw At("Failed to find the parent of "+Ot(e)+" at depth "+t)}function Nue(e,t){for(var n=Ot(e).parent;n;){if(t.is(n.storedValue))return!0;n=n.parent}return!1}function Fue(e,t){for(var n=Ot(e).parent;n;){if(t.is(n.storedValue))return n.storedValue;n=n.parent}throw At("Failed to find the parent of "+Ot(e)+" of a given type")}function Lq(e){return Ot(e).root.storedValue}function $q(e){return Ot(e).path}function zue(e){return zm(Ot(e).path)}function jue(e){return Ot(e).isRoot}function Uue(e,t){var n=Qq(Ot(e),t);return n?n.value:void 0}function Vue(e,t,n){var r=Ot(t).root.identifierCache.resolve(e,Hg(n));return r==null?void 0:r.value}function Dq(e){return Ot(e).identifier}function Hue(e,t){t===void 0&&(t=!0);try{var n=e();if(n==null)return;if(Pn(n))return t?y5(n)?n:void 0:n;throw At("The reference to be checked is not one of node, null or undefined")}catch(r){if(r instanceof A5)return;throw r}}function Gue(e,t){t===void 0&&(t=!0);try{var n=e();if(n==null)return!1;if(Pn(n))return t?y5(n):!0;throw At("The reference to be checked is not one of node, null or undefined")}catch(r){if(r instanceof A5)return!1;throw r}}function Bq(e,t){var n=Qq(Ot(e),t,!1);if(n!==void 0)try{return n.value}catch{return}}function Wue(e,t){return Jq(Ot(e),Ot(t))}function que(e,t){t===void 0&&(t=!0);var n=Ot(e);return n.type.create(n.snapshot,t===!0?n.root.environment:t===!1?void 0:t)}function Yue(e){return Ot(e).detach(),e}function Xue(e){var t=Ot(e);t.isRoot?t.die():t.parent.removeChild(t.subpath)}function y5(e){return Ot(e).observableIsAlive}function ry(e,t){var n=Ot(e);return n.addDisposer(t),t}function Kue(e){var t=Ot(e),n=t.root.environment;return n||Vf}function Nq(e,t){var n=Ot(e);n.getChildren().forEach(function(r){Pn(r.storedValue)&&Nq(r.storedValue,t)}),t(n.storedValue)}function Fq(e){var t;return Pn(e)?t=c1(e):t=e,{name:t.name,properties:fi({},t.properties)}}function Zue(e){var t=Ot(e).type,n=fi(fi({},Fq(t)),{actions:[],volatile:[],views:[],flowActions:[]}),r=Object.getOwnPropertyNames(e);return r.forEach(function(i){if(!(i in n.properties)){var o=Object.getOwnPropertyDescriptor(e,i);if(o.get){XW(e,i)?n.views.push(i):n.volatile.push(i);return}o.value._isMSTAction===!0&&n.actions.push(i),o.value._isFlowAction===!0?n.flowActions.push(i):ZW(e,i)?n.volatile.push(i):n.views.push(i)}}),n}function Jue(e){return e}function Que(e){return e}function ede(e){return e}function tde(e){return Ot(e).nodeId}var zq=function(){function e(t,n,r,i){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"environment",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"_escapedSubpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"storedValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aliveAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:bi.INITIALIZING}),Object.defineProperty(this,"_hookSubscribers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pathAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.environment=i,this.baseSetParent(n,r)}return Object.defineProperty(e.prototype,"subpath",{get:function(){return this._subpath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(t){var n=this.isAlive;this._state=t;var r=this.isAlive;this.aliveAtom&&n!==r&&this.aliveAtom.reportChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fireInternalHook",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this._hookSubscribers&&this._hookSubscribers.emit(t,this,t)}}),Object.defineProperty(e.prototype,"registerHook",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return this._hookSubscribers||(this._hookSubscribers=new iY),this._hookSubscribers.register(t,n)}}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getReconciliationType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type}}),Object.defineProperty(e.prototype,"baseSetParent",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){this._parent=t,this._subpath=n,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()}}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getEscapedPath",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t&&(this.pathAtom||(this.pathAtom=jy("path")),this.pathAtom.reportObserved()),this.parent?(this._escapedSubpath===void 0&&(this._escapedSubpath=this._subpath?Au(this._subpath):""),this.parent.getEscapedPath(t)+"/"+this._escapedSubpath):""}}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.parent===null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAlive",{get:function(){return this.state!==bi.DEAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDetaching",{get:function(){return this.state===bi.DETACHING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=jy("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseFinalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(this.state===bi.CREATED){if(this.parent){if(this.parent.state!==bi.FINALIZED)return;this.fireHook(ei.afterAttach)}this.state=bi.FINALIZED,t&&t()}}}),Object.defineProperty(e.prototype,"baseFinalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=bi.DEAD}}),Object.defineProperty(e.prototype,"baseAboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.fireHook(ei.beforeDestroy)}}),e}(),Gy=function(e){rr(t,e);function t(n,r,i,o,s){var a=e.call(this,n,r,i,o)||this;try{a.storedValue=n.createNewInstance(s)}catch(l){throw a.state=bi.DEAD,l}return a.state=bi.CREATED,a.finalizeCreation(),a}return Object.defineProperty(t.prototype,"root",{get:function(){if(!this.parent)throw At("This scalar node is not part of a tree");return this.parent.root},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this.parent!==n,o=this.subpath!==r;!i&&!o||(this.environment=void 0,this.baseSetParent(this.parent,r))}}),Object.defineProperty(t.prototype,"snapshot",{get:function(){return this.getSnapshot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(t.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return this.type.name+"@"+n+(this.isAlive?"":" [dead]")}}),Object.defineProperty(t.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){!this.isAlive||this.state===bi.DETACHING||(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(t.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeCreation()}}),Object.defineProperty(t.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseAboutToDie()}}),Object.defineProperty(t.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeDeath()}}),Object.defineProperty(t.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.fireInternalHook(n)}}),t}(zq);Gy.prototype.die=Gr(Gy.prototype.die);var nde=1,rde={onError:function(e){throw e}},Po=function(e){rr(t,e);function t(n,r,i,o,s){var a=e.call(this,n,r,i,o)||this;if(Object.defineProperty(a,"nodeId",{enumerable:!0,configurable:!0,writable:!0,value:++nde}),Object.defineProperty(a,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"unnormalizedIdentifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"identifierCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"isProtectionEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"hasSnapshotPostProcessor",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_applyPatches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_applySnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_autoUnbox",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"_isRunningAction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_hasSnapshotReaction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_observableInstanceState",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(a,"_childNodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_initialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_cachedInitialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_cachedInitialSnapshotCreated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_snapshotComputed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_snapshotUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_internalEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a._snapshotComputed=mh(function(){return a.getSnapshot()}),a.unbox=a.unbox.bind(a),a._initialSnapshot=s,a.identifierAttribute=n.identifierAttribute,r||(a.identifierCache=new Sde),a._childNodes=n.initializeChildNodes(a,a._initialSnapshot),a.identifier=null,a.unnormalizedIdentifier=null,a.identifierAttribute&&a._initialSnapshot){var l=a._initialSnapshot[a.identifierAttribute];if(l===void 0){var c=a._childNodes[a.identifierAttribute];c&&(l=c.value)}if(typeof l!="string"&&typeof l!="number")throw At("Instance identifier '"+a.identifierAttribute+"' for type '"+a.type.name+"' must be a string or a number");a.identifier=Hg(l),a.unnormalizedIdentifier=l}return r?r.root.identifierCache.addNodeToCache(a):a.identifierCache.addNodeToCache(a),a}return Object.defineProperty(t.prototype,"applyPatches",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.createObservableInstanceIfNeeded(),this._applyPatches(n)}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.createObservableInstanceIfNeeded(),this._applySnapshot(n)}}),Object.defineProperty(t.prototype,"createObservableInstanceIfNeeded",{enumerable:!1,configurable:!0,writable:!0,value:function(n){n===void 0&&(n=!0),this._observableInstanceState===0&&this.createObservableInstance(n)}}),Object.defineProperty(t.prototype,"createObservableInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r,i,o,s;n===void 0&&(n=!0),this._observableInstanceState=1;for(var a=[],l=this.parent;l&&l._observableInstanceState===0;)a.unshift(l),l=l.parent;try{for(var c=ny(a),u=c.next();!u.done;u=c.next()){var d=u.value;d.createObservableInstanceIfNeeded(!1)}}catch(g){r={error:g}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}var f=this.type;try{this.storedValue=f.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,f.finalizeNewInstance(this,this.storedValue)}catch(g){throw this.state=bi.DEAD,g}finally{this._isRunningAction=!1}if(this._observableInstanceState=2,this._snapshotComputed.trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=Vf,this.state=bi.CREATED,n){this.fireHook(ei.afterCreate),this.finalizeCreation();try{for(var h=ny(a.reverse()),p=h.next();!p.done;p=h.next()){var d=p.value;d.fireHook(ei.afterCreate),d.finalizeCreation()}}catch(g){o={error:g}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}}}}),Object.defineProperty(t.prototype,"root",{get:function(){var n=this.parent;return n?n.root:this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearParent",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.parent){this.fireHook(ei.beforeDetach);var n=this.state;this.state=bi.DETACHING;var r=this.root,i=r.environment,o=r.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=i,this.identifierCache=o}finally{this.state=n}}}}),Object.defineProperty(t.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=n!==this.parent,o=r!==this.subpath;!i&&!o||(i?(this.environment=void 0,n.root.identifierCache.mergeCache(this),this.baseSetParent(n,r),this.fireHook(ei.afterAttach)):o&&this.baseSetParent(this.parent,r))}}),Object.defineProperty(t.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this;this.fireInternalHook(n);var i=this.storedValue&&typeof this.storedValue=="object"&&this.storedValue[n];typeof i=="function"&&(Rm?Rm(function(){i.apply(r.storedValue)}):i.apply(this.storedValue))}}),Object.defineProperty(t.prototype,"snapshot",{get:function(){return this.hasSnapshotPostProcessor&&this.createObservableInstanceIfNeeded(),this._snapshotComputed.get()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.isAlive?this._observableInstanceState===2?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath}}),Object.defineProperty(t.prototype,"_getActualSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(t.prototype,"_getCachedInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this._cachedInitialSnapshotCreated){var n=this.type,r=this._childNodes,i=this._initialSnapshot;this._cachedInitialSnapshot=n.processInitialSnapshot(r,i),this._cachedInitialSnapshotCreated=!0}return this._cachedInitialSnapshot}}),Object.defineProperty(t.prototype,"isRunningAction",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._isRunningAction?!0:this.isRoot?!1:this.parent.isRunningAction()}}),Object.defineProperty(t.prototype,"assertAlive",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=Tq();if(!this.isAlive&&r!=="ignore"){var i=this._getAssertAliveError(n);switch(r){case"error":throw At(i);case"warn":Dde(i)}}}}),Object.defineProperty(t.prototype,"_getAssertAliveError",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.getEscapedPath(!1)||this.pathUponDeath||"",i=n.subpath&&Au(n.subpath)||"",o=n.actionContext||b5();o&&o.type!=="action"&&o.parentActionEvent&&(o=o.parentActionEvent);var s="";if(o&&o.name!=null){var a=o&&o.context&&$q(o.context)||r;s=a+"."+o.name+"()"}return"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '"+this.type.name+"', Path upon death: '"+r+"', Subpath: '"+i+"', Action: '"+s+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree."}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.assertAlive({subpath:n}),this._autoUnbox=!1;try{return this._observableInstanceState===2?this.type.getChildNode(this,n):this._childNodes[n]}finally{this._autoUnbox=!0}}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertAlive(Vf),this._autoUnbox=!1;try{return this._observableInstanceState===2?this.type.getChildren(this):tY(this._childNodes)}finally{this._autoUnbox=!0}}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.type.getChildType(n)}}),Object.defineProperty(t.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assertWritable",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(this.assertAlive(n),!this.isRunningAction()&&this.isProtected)throw At("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this.type.removeChild(this,n)}}),Object.defineProperty(t.prototype,"unbox",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n&&(this.assertAlive({subpath:n.subpath||n.subpathUponDeath}),this._autoUnbox?n.value:n)}}),Object.defineProperty(t.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=(this.isAlive?this.path:this.pathUponDeath)||"<root>",r=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+n+r+(this.isAlive?"":" [dead]")}}),Object.defineProperty(t.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this;this.baseFinalizeCreation(function(){var r,i;try{for(var o=ny(n.getChildren()),s=o.next();!s.done;s=o.next()){var a=s.value;a.finalizeCreation()}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}n.fireInternalHook(ei.afterCreationFinalization)})}}),Object.defineProperty(t.prototype,"detach",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isAlive)throw At("Error while detaching, node is not alive.");this.clearParent()}}),Object.defineProperty(t.prototype,"preboot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this;this._applyPatches=Wy(this.storedValue,"@APPLY_PATCHES",function(r){r.forEach(function(i){if(!i.path){n.type.applySnapshot(n,i.value);return}var o=zm(i.path),s=eY(n,o.slice(0,-1));s.applyPatchLocally(o[o.length-1],i)})}),this._applySnapshot=Wy(this.storedValue,"@APPLY_SNAPSHOT",function(r){if(r!==n.snapshot)return n.type.applySnapshot(n,r)}),_f(this.storedValue,"$treenode",this),_f(this.storedValue,"toJSON",Ade)}}),Object.defineProperty(t.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){!this.isAlive||this.state===bi.DETACHING||(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(t.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._observableInstanceState!==0&&(this.getChildren().forEach(function(n){n.aboutToDie()}),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))}}),Object.defineProperty(t.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.getChildren().forEach(function(r){r.finalizeDeath()}),this.root.identifierCache.notifyDied(this);var n=this.snapshot;this._snapshotUponDeath=n,this._internalEventsClearAll(),this.baseFinalizeDeath()}}),Object.defineProperty(t.prototype,"onSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",n)}}),Object.defineProperty(t.prototype,"emitSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this._internalEventsEmit("snapshot",n)}}),Object.defineProperty(t.prototype,"onPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._internalEventsRegister("patch",n)}}),Object.defineProperty(t.prototype,"emitPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(this._internalEventsHasSubscribers("patch")){var i=kde({},n,{path:r.path.substr(this.path.length)+"/"+n.path}),o=v5(Ude(i),2),s=o[0],a=o[1];this._internalEventsEmit("patch",s,a)}this.parent&&this.parent.emitPatch(n,r)}}),Object.defineProperty(t.prototype,"hasDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._internalEventsHas("dispose",n)}}),Object.defineProperty(t.prototype,"addDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(!this.hasDisposer(n)){this._internalEventsRegister("dispose",n,!0);return}throw At("cannot add a disposer when it is already registered for execution")}}),Object.defineProperty(t.prototype,"removeDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(!this._internalEventsHas("dispose",n))throw At("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",n)}}),Object.defineProperty(t.prototype,"removeMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(this.middlewares){var r=this.middlewares.indexOf(n);r>=0&&this.middlewares.splice(r,1)}}}),Object.defineProperty(t.prototype,"addMiddleWare",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this;r===void 0&&(r=!0);var o={handler:n,includeHooks:r};return this.middlewares?this.middlewares.push(o):this.middlewares=[o],function(){i.removeMiddleware(o)}}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){this.assertWritable({subpath:n}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,n,r)}}),Object.defineProperty(t.prototype,"_addSnapshotReaction",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this;if(!this._hasSnapshotReaction){var r=jW(function(){return n.snapshot},function(i){return n.emitSnapshot(i)},rde);this.addDisposer(r),this._hasSnapshotReaction=!0}}}),Object.defineProperty(t.prototype,"_internalEventsHasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return!!this._internalEvents&&this._internalEvents.hasSubscribers(n)}}),Object.defineProperty(t.prototype,"_internalEventsRegister",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i){return i===void 0&&(i=!1),this._internalEvents||(this._internalEvents=new iY),this._internalEvents.register(n,r,i)}}),Object.defineProperty(t.prototype,"_internalEventsHas",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return!!this._internalEvents&&this._internalEvents.has(n,r)}}),Object.defineProperty(t.prototype,"_internalEventsUnregister",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){this._internalEvents&&this._internalEvents.unregister(n,r)}}),Object.defineProperty(t.prototype,"_internalEventsEmit",{enumerable:!1,configurable:!0,writable:!0,value:function(n){for(var r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];this._internalEvents&&(r=this._internalEvents).emit.apply(r,od([n],i))}}),Object.defineProperty(t.prototype,"_internalEventsClear",{enumerable:!1,configurable:!0,writable:!0,value:function(n){this._internalEvents&&this._internalEvents.clear(n)}}),Object.defineProperty(t.prototype,"_internalEventsClearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._internalEvents&&this._internalEvents.clearAll()}}),t}(zq);Po.prototype.createObservableInstance=Gr(Po.prototype.createObservableInstance);Po.prototype.detach=Gr(Po.prototype.detach);Po.prototype.die=Gr(Po.prototype.die);var jq,Kt;(function(e){e[e.String=1]="String",e[e.Number=2]="Number",e[e.Boolean=4]="Boolean",e[e.Date=8]="Date",e[e.Literal=16]="Literal",e[e.Array=32]="Array",e[e.Map=64]="Map",e[e.Object=128]="Object",e[e.Frozen=256]="Frozen",e[e.Optional=512]="Optional",e[e.Reference=1024]="Reference",e[e.Identifier=2048]="Identifier",e[e.Late=4096]="Late",e[e.Refinement=8192]="Refinement",e[e.Union=16384]="Union",e[e.Null=32768]="Null",e[e.Undefined=65536]="Undefined",e[e.Integer=131072]="Integer",e[e.Custom=262144]="Custom",e[e.SnapshotProcessor=524288]="SnapshotProcessor",e[e.Lazy=1048576]="Lazy",e[e.Finite=2097152]="Finite",e[e.Float=4194304]="Float"})(Kt||(Kt={}));var Uq="cannotDetermine",ide=Symbol("$type"),hc=function(){function e(t){Object.defineProperty(this,jq,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"C",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"S",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"T",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"N",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isType",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=t}return Object.defineProperty(e.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return sc(this,t),this.instantiate(null,"",n,t).value}}),Object.defineProperty(e.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){throw At("unimplemented method")}}),Object.defineProperty(e.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return t===this}}),Object.defineProperty(e.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=Zq(t);if(r){var i=c1(t);return this.isAssignableFrom(i)?Mo():Io(n,t)}return this.isValidSnapshot(t,n)}}),Object.defineProperty(e.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this.validate(t,[{path:"",type:this}]).length===0}}),Object.defineProperty(e.prototype,"Type",{get:function(){throw At("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TypeWithoutSTN",{get:function(){throw At("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SnapshotType",{get:function(){throw At("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CreationType",{get:function(){throw At("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!1,configurable:!0}),e}();jq=ide;hc.prototype.create=Gr(hc.prototype.create);var Bm=function(e){rr(t,e);function t(n){var r=e.call(this,n)||this;return Object.defineProperty(r,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r}return Object.defineProperty(t.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return n===void 0&&(n=this.getDefaultSnapshot()),e.prototype.create.call(this,n,r)}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.createObservableInstanceIfNeeded(),n.storedValue}}),Object.defineProperty(t.prototype,"isMatchingSnapshotId",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return!n.identifierAttribute||n.identifier===Hg(r[n.identifierAttribute])}}),Object.defineProperty(t.prototype,"tryToReconcileNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return n.isDetaching?!1:n.snapshot===r||Pn(r)&&Ot(r)===n?!0:n.type===this&&nY(r)&&!Pn(r)&&this.isMatchingSnapshotId(n,r)?(n.applySnapshot(r),!0):!1}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=this.tryToReconcileNode(n,r);if(s)return n.setParent(i,o),n;if(n.die(),Pn(r)&&this.isAssignableFrom(c1(r))){var a=Ot(r);return a.setParent(i,o),a}return this.instantiate(i,o,void 0,r)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),t}(hc);Bm.prototype.create=Gr(Bm.prototype.create);var yh=function(e){rr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.storedValue}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.storedValue}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){if(!n.isDetaching&&n.type===this&&n.storedValue===r)return n;var s=this.instantiate(i,o,void 0,r);return n.die(),s}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),t}(hc);function Bi(e){return typeof e=="object"&&e&&e.isType===!0}var Ia=new Map;function ode(e){return function(n,r,i){switch(n.type){case"action":if(!e.filter||e.filter(n)===!0){var o=e.onStart(n);e.onResume(n,o),Ia.set(n.id,{call:n,context:o,async:!1});try{var s=r(n);return e.onSuspend(n,o),Ia.get(n.id).async===!1&&(Ia.delete(n.id),e.onSuccess(n,o,s)),s}catch(l){throw Ia.delete(n.id),e.onFail(n,o,l),l}}else return r(n);case"flow_spawn":{var a=Ia.get(n.rootId);return a.async=!0,r(n)}case"flow_resume":case"flow_resume_error":{var a=Ia.get(n.rootId);e.onResume(n,a.context);try{return r(n)}finally{e.onSuspend(n,a.context)}}case"flow_throw":{var a=Ia.get(n.rootId);return Ia.delete(n.rootId),e.onFail(n,a.context,n.args[0]),r(n)}case"flow_return":{var a=Ia.get(n.rootId);return Ia.delete(n.rootId),e.onSuccess(n,a.context,n.args[0]),r(n)}}}}var sde=function(){function e(t,n){Object.defineProperty(this,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"call",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"flowsPending",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"running",{enumerable:!0,configurable:!0,writable:!0,value:!0}),t&&t.onStart(n)}return Object.defineProperty(e.prototype,"finish",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,t))}}),Object.defineProperty(e.prototype,"incFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending++}}),Object.defineProperty(e.prototype,"decFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending--}}),Object.defineProperty(e.prototype,"hasFlowsPending",{get:function(){return this.flowsPending>0},enumerable:!1,configurable:!0}),e}();function ade(e){var t=new Map;return function(r,i){var o=r.parentActionEvent?t.get(r.parentActionEvent.id):void 0;if(r.type==="action"){var s=fi(fi({},r),{env:o&&o.call.env,parentCall:o&&o.call}),a=!e.filter||e.filter(s),l=a?e:void 0,c=new sde(l,s);t.set(r.id,c);var u=void 0;try{u=i(r)}catch(f){throw t.delete(r.id),c.finish(f),f}return c.hasFlowsPending||(t.delete(r.id),c.finish()),u}else{if(!o)return i(r);switch(r.type){case"flow_spawn":return o.incFlowsPending(),i(r);case"flow_resume":case"flow_resume_error":return i(r);case"flow_throw":{var d=r.args[0];try{return i(r)}finally{o.decFlowsPending(),o.hasFlowsPending||(t.delete(r.parentActionEvent.id),o.finish(d))}}case"flow_return":try{return i(r)}finally{o.decFlowsPending(),o.hasFlowsPending||(t.delete(r.parentActionEvent.id),o.finish())}}}}}function lde(e,t,n,r){if(r instanceof Date)return{$MST_DATE:r.getTime()};if(Fm(r))return r;if(Pn(r))return n_("[MSTNode: "+c1(r).name+"]");if(typeof r=="function")return n_("[function]");if(typeof r=="object"&&!mf(r)&&!S5(r))return n_("[object "+(r&&r.constructor&&r.constructor.name||"Complex Object")+"]");try{return JSON.stringify(r),r}catch(i){return n_(""+i)}}function cde(e,t){return t&&typeof t=="object"&&"$MST_DATE"in t?new Date(t.$MST_DATE):t}function n_(e){return{$MST_UNSERIALIZABLE:!0,type:e}}function Vq(e,t){Rm(function(){C5(t).forEach(function(n){return ude(e,n)})})}function ude(e,t){var n=Bq(e,t.path||"");if(!n)throw At("Invalid action path: "+(t.path||""));var r=Ot(n);if(t.name==="@APPLY_PATCHES")return Dm.call(null,n,t.args[0]);if(t.name==="@APPLY_SNAPSHOT")return kq.call(null,n,t.args[0]);if(typeof n[t.name]!="function")throw At("Action '"+t.name+"' does not exist in '"+r.path+"'");return n[t.name].apply(n,t.args?t.args.map(function(i){return cde(r,i)}):[])}function dde(e,t){var n=[],r=function(s){var a=t?t(s,x5()):!0;a&&n.push(s)},i,o={actions:n,get recording(){return!!i},stop:function(){i&&(i(),i=void 0)},resume:function(){i||(i=Hq(e,r))},replay:function(s){Vq(s,n)}};return o.resume(),o}function Hq(e,t,n){return n===void 0&&(n=!1),qq(e,function(i,o){if(i.type==="action"&&i.id===i.rootId){var s=Ot(i.context),a={name:i.name,path:Jq(Ot(e),s),args:i.args.map(function(c,u){return lde(s,i.name,u,c)})};if(n){var l=o(i);return t(a),l}else return t(a),o(i)}else return o(i)})}var fde=1,iy;function b5(){return iy}function Gq(){return fde++}function VR(e,t){var n=Ot(e.context);e.type==="action"&&n.assertAlive({actionContext:e});var r=n._isRunningAction;n._isRunningAction=!0;var i=iy;iy=e;try{return mde(n,e,t)}finally{iy=i,n._isRunningAction=r}}function Wq(e){if(e)return e.type==="action"?e:e.parentActionEvent}function Wy(e,t,n){var r=function(){var i=Gq(),o=iy,s=Wq(o);return VR({type:"action",name:t,id:i,args:oY(arguments),context:e,tree:Lq(e),rootId:o?o.rootId:i,parentId:o?o.id:0,allParentIds:o?od(o.allParentIds,[o.id]):[],parentEvent:o,parentActionEvent:s},n)};return r._isMSTAction=!0,r._isFlowAction=n._isFlowAction,r}function qq(e,t,n){n===void 0&&(n=!0);var r=Ot(e);return r.addMiddleWare(t,n)}function hde(e,t,n){n===void 0&&(n=!0);var r={handler:e,includeHooks:n};return t.$mst_middleware=t.$mst_middleware||[],t.$mst_middleware.push(r),t}var pde=function(){function e(t,n){Object.defineProperty(this,"arrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"inArrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:[]}),n.$mst_middleware&&this.middlewares.push(n.$mst_middleware);for(var r=t;r;)r.middlewares&&this.middlewares.push(r.middlewares),r=r.parent}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getNextMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(){var t=this.middlewares[this.arrayIndex];if(t){var n=t[this.inArrayIndex++];return n||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}}}),e}();function mde(e,t,n){var r=new pde(e,n);if(r.isEmpty)return Gr(n).apply(null,t.args);var i=null;function o(s){var a=r.getNextMiddleware(),l=a&&a.handler;if(!l)return Gr(n).apply(null,s.args);if(!a.includeHooks&&ei[s.name])return o(s);function c(d,f){i=o(d),f&&(i=f(i))}function u(d){i=d}return l(s,c,u),i}return o(t)}function x5(){for(var e=b5();e&&e.type!=="action";)e=e.parentActionEvent;return e}function Yq(e,t,n){for(var r=typeof t=="number"?t:t.id,i=n?e:e.parentActionEvent;i;){if(i.id===r)return!0;i=i.parentActionEvent}return!1}function gde(e,t){return Yq(e,t,!1)}function vde(e,t){return Yq(e,t,!0)}function yde(e){try{return JSON.stringify(e)}catch(t){return"<Unserializable: "+t+">"}}function Xq(e){return typeof e=="function"?"<function"+(e.name?" "+e.name:"")+">":Pn(e)?"<"+e+">":"`"+yde(e)+"`"}function bde(e){return e.length<280?e:e.substring(0,272)+"......"+e.substring(e.length-8)}function xde(e){var t=e.value,n=e.context[e.context.length-1].type,r=e.context.map(function(a){var l=a.path;return l}).filter(function(a){return a.length>0}).join("/"),i=r.length>0?'at path "/'+r+'" ':"",o=Pn(t)?"value of type "+Ot(t).type.name+":":Fm(t)?"value":"snapshot",s=n&&Pn(t)&&n.is(Ot(t).snapshot);return""+i+o+" "+Xq(t)+" is not assignable "+(n?"to type: `"+n.name+"`":"")+(e.message?" ("+e.message+")":"")+(n?vY(n)||Fm(t)?".":", expected an instance of `"+n.name+"` or a snapshot like `"+n.describe()+"` instead."+(s?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function _5(e,t,n){return e.concat([{path:t,type:n}])}function Mo(){return Nm}function Io(e,t,n){return[{context:e,value:t,message:n}]}function aA(e){return e.reduce(function(t,n){return t.concat(n)},[])}function sc(e,t){Bde()&&Kq(e,t)}function Kq(e,t){var n=e.validate(t,[{path:"",type:e}]);if(n.length>0)throw At(_de(e,t,n))}function _de(e,t,n){if(n.length!==0)return"Error while converting "+bde(Xq(t))+" to `"+e.name+`\`:

    `+n.map(xde).join(`
    `)}var wde=0,Sde=function(){function e(){Object.defineProperty(this,"cacheId",{enumerable:!0,configurable:!0,writable:!0,value:wde++}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:Rn.map()}),Object.defineProperty(this,"lastCacheModificationPerId",{enumerable:!0,configurable:!0,writable:!0,value:Rn.map()})}return Object.defineProperty(e.prototype,"updateLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this.lastCacheModificationPerId.get(t);this.lastCacheModificationPerId.set(t,n===void 0?1:n+1)}}),Object.defineProperty(e.prototype,"getLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this.lastCacheModificationPerId.get(t)||0;return this.cacheId+"-"+n}}),Object.defineProperty(e.prototype,"addNodeToCache",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){if(n===void 0&&(n=!0),t.identifierAttribute){var r=t.identifier;this.cache.has(r)||this.cache.set(r,Rn.array([],lA));var i=this.cache.get(r);if(i.indexOf(t)!==-1)throw At("Already registered");i.push(t),n&&this.updateLastCacheModificationPerId(r)}}}),Object.defineProperty(e.prototype,"mergeCache",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this;l5(t.identifierCache.cache).forEach(function(r){return r.forEach(function(i){n.addNodeToCache(i)})})}}),Object.defineProperty(e.prototype,"notifyDied",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(t.identifierAttribute){var n=t.identifier,r=this.cache.get(n);r&&(r.remove(t),r.length||this.cache.delete(n),this.updateLastCacheModificationPerId(t.identifier))}}}),Object.defineProperty(e.prototype,"splitCache",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this,r=new e,i=t.path+"/";return JW(this.cache).forEach(function(o){for(var s=v5(o,2),a=s[0],l=s[1],c=!1,u=l.length-1;u>=0;u--){var d=l[u];(d===t||d.path.indexOf(i)===0)&&(r.addNodeToCache(d,!1),l.splice(u,1),l.length||n.cache.delete(a),c=!0)}c&&n.updateLastCacheModificationPerId(a)}),r}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=this.cache.get(n);return r?r.some(function(i){return t.isAssignableFrom(i.type)}):!1}}),Object.defineProperty(e.prototype,"resolve",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=this.cache.get(n);if(!r)return null;var i=r.filter(function(o){return t.isAssignableFrom(o.type)});switch(i.length){case 0:return null;case 1:return i[0];default:throw At("Cannot resolve a reference to type '"+t.name+"' with id: '"+n+"' unambigously, there are multiple candidates: "+i.map(function(o){return o.path}).join(", "))}}}),e}();function w5(e,t,n,r,i){var o=Zq(i);if(o){if(o.parent)throw At("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(t?t.path:"")+"/"+n+"', but it lives already at '"+o.path+"'");return t&&o.setParent(t,n),o}return new Po(e,t,n,r,i)}function sd(e,t,n,r,i){return new Gy(e,t,n,r,i)}function Cde(e){return e instanceof Gy||e instanceof Po}var bi;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CREATED=1]="CREATED",e[e.FINALIZED=2]="FINALIZED",e[e.DETACHING=3]="DETACHING",e[e.DEAD=4]="DEAD"})(bi||(bi={}));function Pn(e){return!!(e&&e.$treenode)}function Ot(e){if(!Pn(e))throw At("Value "+e+" is no MST Node");return e.$treenode}function Zq(e){return e&&e.$treenode||null}function Ade(){return Ot(this).snapshot}var Pde=function(e){return".."};function Jq(e,t){if(e.root!==t.root)throw At("Cannot calculate relative path: objects '"+e+"' and '"+t+"' are not part of the same object tree");for(var n=zm(e.path),r=zm(t.path),i=0;i<n.length&&n[i]===r[i];i++);return n.slice(i).map(Pde).join("/")+d2(r.slice(i))}function Qq(e,t,n){return n===void 0&&(n=!0),eY(e,zm(t),n)}function eY(e,t,n){n===void 0&&(n=!0);var r=e;try{for(var i=0;i<t.length;i++){var o=t[i];if(o===".."){if(r=r.parent,r)continue}else{if(o===".")continue;if(r){if(r instanceof Gy){var s=r.value;Pn(s)&&(r=Ot(s))}if(r instanceof Po){var a=r.getChildType(o);if(a&&(r=r.getChildNode(o),r))continue}}}throw At("Could not resolve '"+o+"' in path '"+(d2(t.slice(0,i))||"/")+"' while resolving '"+d2(t)+"'")}}catch(l){if(!n)return;throw l}return r}function tY(e){if(!e)return Nm;var t=Object.keys(e);if(!t.length)return Nm;var n=new Array(t.length);return t.forEach(function(r,i){n[i]=e[r]}),n}function Mde(e){return sY(e)}var Ede=Object.toString(),Nm=Object.freeze([]),Vf=Object.freeze({}),lA=TW().useProxies?{deep:!1}:{deep:!1,proxy:!1};Object.freeze(lA);function At(e){return e===void 0&&(e="Illegal state"),new Error("[mobx-state-tree] "+e)}function Tde(e){return e}var Ode=Number.isInteger;function Ide(e){return Number(e)===e&&e%1!==0}function Rde(e){return Number.isFinite(e)}function S5(e){return Array.isArray(e)||zi(e)}function C5(e){return e?S5(e)?e:[e]:Nm}function kde(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var o in i)e[o]=i[o]}return e}function mf(e){var t;if(e===null||typeof e!="object")return!1;var n=Object.getPrototypeOf(e);return n==null?!0:((t=n.constructor)===null||t===void 0?void 0:t.toString())===Ede}function nY(e){return e!==null&&typeof e=="object"&&!(e instanceof Date)&&!(e instanceof RegExp)}function Fm(e,t){return t===void 0&&(t=!0),e==null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"||t&&e instanceof Date}function rY(e){return typeof e!="function"}function Lde(e,t,n){ii(e)?u5(e,t,n):Object.defineProperty(e,t,n)}function _f(e,t,n){Lde(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}var $de=function(){function e(){Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e.prototype,"hasSubscribers",{get:function(){return this.handlers.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=this;return n===void 0&&(n=!1),n?this.handlers.unshift(t):this.handlers.push(t),function(){r.unregister(t)}}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return this.handlers.indexOf(t)>=0}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this.handlers.indexOf(t);n>=0&&this.handlers.splice(n,1)}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.handlers.length=0}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this.handlers.slice();r.forEach(function(i){return i.apply(void 0,od(t))})}}),e}(),iY=function(){function e(){Object.defineProperty(this,"eventHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(e.prototype,"hasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=this.eventHandlers&&this.eventHandlers[t];return!!n&&n.hasSubscribers}}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n,r){r===void 0&&(r=!1),this.eventHandlers||(this.eventHandlers={});var i=this.eventHandlers[t];return i||(i=this.eventHandlers[t]=new $de),i.register(n,r)}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=this.eventHandlers&&this.eventHandlers[t];return!!r&&r.has(n)}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){var r=this.eventHandlers&&this.eventHandlers[t];r&&r.unregister(n)}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.eventHandlers&&delete this.eventHandlers[t]}}),Object.defineProperty(e.prototype,"clearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.eventHandlers=void 0}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(t){for(var n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=this.eventHandlers&&this.eventHandlers[t];o&&(n=o).emit.apply(n,od(r))}}),e}();function oY(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}function ET(e,t){return e.indexOf(t)===0}function Dde(e){console.warn(new Error("[mobx-state-tree] "+e))}function Bde(){return typeof process<"u"&&rF&&rF.ENABLE_TYPE_CHECK==="true"}function TT(e){typeof queueMicrotask=="function"?queueMicrotask(e):typeof setImmediate=="function"?setImmediate(e):setTimeout(e,1)}function sY(e){return jde(e.name,e)}function Nde(e){return e}function Fde(e){return function(){var t,n=[];for(t=0;t<arguments.length;t++)n[t]=arguments[t];return Oq(this,function(r){switch(r.label){case 0:return[4,e.apply(void 0,od(n))];case 1:return[2,r.sent()]}})}}function zde(e){return Oq(this,function(t){switch(t.label){case 0:return[4,e];case 1:return[2,t.sent()]}})}function jde(e,t){var n=function(){var i=Gq(),o=b5();if(!o)throw At("a mst flow must always have a parent context");var s=Wq(o);if(!s)throw At("a mst flow must always have a parent action context");var a={name:e,id:i,tree:o.tree,context:o.context,parentId:o.id,allParentIds:od(o.allParentIds,[o.id]),rootId:o.rootId,parentEvent:o,parentActionEvent:s},l=arguments;function c(u,d,f){return u.$mst_middleware=n.$mst_middleware,VR(fi(fi({},a),{type:d,args:[f]}),u)}return new Promise(function(u,d){var f,h=function(){f=t.apply(null,arguments),p(void 0)};h.$mst_middleware=n.$mst_middleware,VR(fi(fi({},a),{type:"flow_spawn",args:oY(l)}),h);function p(m){var y;try{var b=c(function(_){y=f.next(_)},"flow_resume",m);b instanceof Error&&(y=f.throw(b))}catch(_){TT(function(){c(function(x){d(_)},"flow_throw",_)});return}v(y)}function g(m){var y;try{c(function(b){y=f.throw(b)},"flow_resume_error",m)}catch(b){TT(function(){c(function(_){d(b)},"flow_throw",b)});return}v(y)}function v(m){if(m.done){TT(function(){c(function(y){u(y)},"flow_return",m.value)});return}if(!m.value||typeof m.value.then!="function")throw At("Only promises can be yielded to `async`, got: "+m);return m.value.then(p,g)}})};return n._isFlowAction=!0,n}function Ude(e){if(!("oldValue"in e))throw At("Patches without `oldValue` field cannot be inversed");return[Vde(e),Hde(e)]}function Vde(e){switch(e.op){case"add":return{op:"add",path:e.path,value:e.value};case"remove":return{op:"remove",path:e.path};case"replace":return{op:"replace",path:e.path,value:e.value}}}function Hde(e){switch(e.op){case"add":return{op:"remove",path:e.path};case"remove":return{op:"add",path:e.path,value:e.oldValue};case"replace":return{op:"replace",path:e.path,value:e.oldValue}}}function Gde(e){return typeof e=="number"}function Au(e){return Gde(e)===!0?""+e:e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function aY(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function d2(e){if(e.length===0)return"";var t=function(n){return n.map(Au).join("/")};return e[0]==="."||e[0]===".."?t(e):"/"+t(e)}function zm(e){var t=e.split("/").map(aY),n=e===""||e==="."||e===".."||ET(e,"/")||ET(e,"./")||ET(e,"../");if(!n)throw At("a json path must be either rooted, empty or relative, but got '"+e+"'");return t[0]===""&&t.shift(),t}var OT=Symbol("$preProcessorFailed"),Wde=function(e){rr(t,e);function t(n,r,i){var o=e.call(this,i||n.name)||this;return Object.defineProperty(o,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_processors",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return Object.defineProperty(t.prototype,"flags",{get:function(){return this._subtype.flags|Kt.SnapshotProcessor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"snapshotProcessor("+this._subtype.describe()+")"}}),Object.defineProperty(t.prototype,"preProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._processors.preProcessor?this._processors.preProcessor.call(null,n):n}}),Object.defineProperty(t.prototype,"preProcessSnapshotSafe",{enumerable:!1,configurable:!0,writable:!0,value:function(n){try{return this.preProcessSnapshot(n)}catch{return OT}}}),Object.defineProperty(t.prototype,"postProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return this._processors.postProcessor?this._processors.postProcessor.call(null,n,r.storedValue):n}}),Object.defineProperty(t.prototype,"_fixNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this;qde(n.type,this,"create"),n instanceof Po&&(n.hasSnapshotPostProcessor=!!this._processors.postProcessor);var i=n.getSnapshot;n.getSnapshot=function(){return r.postProcessSnapshot(i.call(n),n)},bY(this._subtype)||(n.getReconciliationType=function(){return r})}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=Pn(o)?o:this.preProcessSnapshot(o),a=this._subtype.instantiate(n,r,i,s);return this._fixNode(a),a}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=this._subtype.reconcile(n,Pn(r)?r:this.preProcessSnapshot(r),i,o);return s!==n&&this._fixNode(s),s}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){r===void 0&&(r=!0);var i=this._subtype.getSnapshot(n);return r?this.postProcessSnapshot(i,n):i}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this.preProcessSnapshotSafe(n);return i===OT?Io(r,n,"Failed to preprocess value"):this._subtype.validate(i,r)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),Object.defineProperty(t.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=Bi(n)?this._subtype:Pn(n)?u1(n,!1):this.preProcessSnapshotSafe(n);return r===OT?!1:this._subtype.validate(r,[{path:"",type:this._subtype}]).length===0}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._subtype.isAssignableFrom(n)}}),Object.defineProperty(t.prototype,"isMatchingSnapshotId",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(!(this._subtype instanceof Bm))return!1;var i=this.preProcessSnapshot(r);return this._subtype.isMatchingSnapshotId(n,i)}}),t}(hc);function qde(e,t){for(var n,r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];try{for(var s=ny(i),a=s.next();!a.done;a=s.next()){var l=a.value;e[l]=t[l].bind(t)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}function Yde(e,t,n){return new Wde(e,t,n)}var iF="Map.put can only be used to store complex values that have an identifier type attribute";function lY(e,t){var n,r,i=e.getSubTypes();if(i===Uq)return!1;if(i){var o=C5(i);try{for(var s=ny(o),a=s.next();!a.done;a=s.next()){var l=a.value;if(!lY(l,t))return!1}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}return e instanceof qy&&t.push(e),!0}var cu;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.YES=1]="YES",e[e.NO=2]="NO"})(cu||(cu={}));var Xde=function(e){rr(t,e);function t(n,r){return e.call(this,n,Rn.ref.enhancer,r)||this}return Object.defineProperty(t.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return e.prototype.get.call(this,""+n)}}),Object.defineProperty(t.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return e.prototype.has.call(this,""+n)}}),Object.defineProperty(t.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return e.prototype.delete.call(this,""+n)}}),Object.defineProperty(t.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return e.prototype.set.call(this,""+n,r)}}),Object.defineProperty(t.prototype,"put",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(!n)throw At("Map.put cannot be used to set empty values");if(Pn(n)){var r=Ot(n);if(r.identifier===null)throw At(iF);return this.set(r.identifier,n),n}else if(nY(n)){var i=Ot(this),o=i.type;if(o.identifierMode!==cu.YES)throw At(iF);var s=o.mapIdentifierAttribute,a=n[s];if(!P5(a)){var l=this.put(o.getChildType().create(n,i.environment));return this.put(u1(l))}var c=Hg(a);return this.set(c,n),this.get(c)}else throw At("Map.put can only be used to store complex values")}}),t}(sA),f2=function(e){rr(t,e);function t(n,r,i){i===void 0&&(i=[]);var o=e.call(this,n)||this;return Object.defineProperty(o,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"identifierMode",{enumerable:!0,configurable:!0,writable:!0,value:cu.UNKNOWN}),Object.defineProperty(o,"mapIdentifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"flags",{enumerable:!0,configurable:!0,writable:!0,value:Kt.Map}),Object.defineProperty(o,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),o._determineIdentifierMode(),o.hookInitializers=i,o}return Object.defineProperty(t.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.hookInitializers.length>0?this.hookInitializers.concat(n):[n];return new t(this.name,this._subType,r)}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this._determineIdentifierMode(),w5(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"_determineIdentifierMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.identifierMode===cu.UNKNOWN){var n=[];if(lY(this._subType,n)){var r=n.reduce(function(i,o){if(!o.identifierAttribute)return i;if(i&&i!==o.identifierAttribute)throw At("The objects in a map should all have the same identifier attribute, expected '"+i+"', but child of type '"+o.name+"' declared attribute '"+o.identifierAttribute+"' as identifier");return o.identifierAttribute},void 0);r?(this.identifierMode=cu.YES,this.mapIdentifierAttribute=r):this.identifierMode=cu.NO}}}}),Object.defineProperty(t.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){r===void 0&&(r={});var i=n.type._subType,o={};return Object.keys(r).forEach(function(s){o[s]=i.instantiate(n,s,void 0,r[s])}),o}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return new Xde(n,this.name)}}),Object.defineProperty(t.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){a5(r,n.unbox);var i=n.type;i.hookInitializers.forEach(function(o){var s=o(r);Object.keys(s).forEach(function(a){var l=s[a],c=Wy(r,a,l);_f(r,a,c)})}),rA(r,this.willChange),oA(r,this.didChange)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return l5(n.storedValue)}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=n.storedValue.get(""+r);if(!i)throw At("Not a child "+r);return i}}),Object.defineProperty(t.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=Ot(n.object),i=n.name;r.assertWritable({subpath:i});var o=r.type,s=o._subType;switch(n.type){case"update":{var a=n.newValue,l=n.object.get(i);if(a===l)return null;sc(s,a),n.newValue=s.reconcile(r.getChildNode(i),n.newValue,r,i),o.processIdentifier(i,n.newValue)}break;case"add":sc(s,n.newValue),n.newValue=s.instantiate(r,i,void 0,n.newValue),o.processIdentifier(i,n.newValue);break}return n}}),Object.defineProperty(t.prototype,"processIdentifier",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(this.identifierMode===cu.YES&&r instanceof Po){var i=r.identifier;if(i!==n)throw At("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+i+"', but expected: '"+n+"'")}}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r={};return n.getChildren().forEach(function(i){r[i.subpath]=i.snapshot}),r}}),Object.defineProperty(t.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r={};return Object.keys(n).forEach(function(i){r[i]=n[i].getSnapshot()}),r}}),Object.defineProperty(t.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=Ot(n.object);switch(n.type){case"update":return void r.emitPatch({op:"replace",path:Au(n.name),value:n.newValue.snapshot,oldValue:n.oldValue?n.oldValue.snapshot:void 0},r);case"add":return void r.emitPatch({op:"add",path:Au(n.name),value:n.newValue.snapshot,oldValue:void 0},r);case"delete":var i=n.oldValue.snapshot;return n.oldValue.die(),void r.emitPatch({op:"remove",path:Au(n.name),oldValue:i},r)}}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i){var o=n.storedValue;switch(i.op){case"add":case"replace":o.set(r,i.value);break;case"remove":o.delete(r);break}}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){sc(this,r);var i=n.storedValue,o={};if(Array.from(i.keys()).forEach(function(a){o[a]=!1}),r)for(var s in r)i.set(s,r[s]),o[""+s]=!0;Object.keys(o).forEach(function(a){o[a]===!1&&i.delete(a)})}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this;return mf(n)?aA(Object.keys(n).map(function(o){return i._subType.validate(n[o],_5(r,o,i._subType))})):Io(r,n,"Value is not a plain object")}}),Object.defineProperty(t.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Vf}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){n.storedValue.delete(r)}}),t}(Bm);f2.prototype.applySnapshot=Gr(f2.prototype.applySnapshot);function Kde(e){return new f2("Map<string, "+e.name+">",e)}function Zde(e){return Bi(e)&&(e.flags&Kt.Map)>0}var h2=function(e){rr(t,e);function t(n,r,i){i===void 0&&(i=[]);var o=e.call(this,n)||this;return Object.defineProperty(o,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"flags",{enumerable:!0,configurable:!0,writable:!0,value:Kt.Array}),Object.defineProperty(o,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),o.hookInitializers=i,o}return Object.defineProperty(t.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.hookInitializers.length>0?this.hookInitializers.concat(n):[n];return new t(this.name,this._subType,r)}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return w5(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){r===void 0&&(r=[]);var i=n.type._subType,o={};return r.forEach(function(s,a){var l=""+a;o[l]=i.instantiate(n,l,void 0,s)}),o}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=fi(fi({},lA),{name:this.name});return Rn.array(tY(n),r)}}),Object.defineProperty(t.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){pa(r).dehancer=n.unbox;var i=n.type;i.hookInitializers.forEach(function(o){var s=o(r);Object.keys(s).forEach(function(a){var l=s[a],c=Wy(r,a,l);_f(r,a,c)})}),rA(r,this.willChange),oA(r,this.didChange)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.storedValue.slice()}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=Number(r);if(i<n.storedValue.length)return n.storedValue[i];throw At("Not a child: "+r)}}),Object.defineProperty(t.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=Ot(n.object);r.assertWritable({subpath:""+n.index});var i=r.type._subType,o=r.getChildren();switch(n.type){case"update":{if(n.newValue===n.object[n.index])return null;var s=oF(r,i,[o[n.index]],[n.newValue],[n.index]);if(!s)return null;n.newValue=s[0]}break;case"splice":{var a=n.index,l=n.removedCount,c=n.added,u=oF(r,i,o.slice(a,a+l),c,c.map(function(f,h){return a+h}));if(!u)return null;n.added=u;for(var d=a+l;d<o.length;d++)o[d].setParent(r,""+(d+c.length-l))}break}return n}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.getChildren().map(function(r){return r.snapshot})}}),Object.defineProperty(t.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=[];return Object.keys(n).forEach(function(i){r.push(n[i].getSnapshot())}),r}}),Object.defineProperty(t.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=Ot(n.object);switch(n.type){case"update":return void r.emitPatch({op:"replace",path:""+n.index,value:n.newValue.snapshot,oldValue:n.oldValue?n.oldValue.snapshot:void 0},r);case"splice":for(var i=n.removedCount-1;i>=0;i--)r.emitPatch({op:"remove",path:""+(n.index+i),oldValue:n.removed[i].snapshot},r);for(var i=0;i<n.addedCount;i++)r.emitPatch({op:"add",path:""+(n.index+i),value:r.getChildNode(""+(n.index+i)).snapshot,oldValue:void 0},r);return}}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i){var o=n.storedValue,s=r==="-"?o.length:Number(r);switch(i.op){case"replace":o[s]=i.value;break;case"add":o.splice(s,0,i.value);break;case"remove":o.splice(s,1);break}}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){sc(this,r);var i=n.storedValue;i.replace(r)}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this;return S5(n)?aA(n.map(function(o,s){return i._subType.validate(o,_5(r,""+s,i._subType))})):Io(r,n,"Value is not an array")}}),Object.defineProperty(t.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Nm}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){n.storedValue.splice(Number(r),1)}}),t}(Bm);h2.prototype.applySnapshot=Gr(h2.prototype.applySnapshot);function Jde(e){return new h2(e.name+"[]",e)}function oF(e,t,n,r,i){for(var o=!0,s=0;;s++){var a=s<=r.length-1,l=n[s],c=a?r[s]:void 0,u=""+i[s];if(Cde(c)&&(c=c.storedValue),!l&&!a)break;if(!a)o=!1,n.splice(s,1),l instanceof Po&&l.createObservableInstanceIfNeeded(),l.die(),s--;else if(l)if(sF(l,c))n[s]=IT(t,e,u,c,l);else{for(var f=void 0,h=s;h<n.length;h++)if(sF(n[h],c)){f=n.splice(h,1)[0];break}o=!1;var d=IT(t,e,u,c,f);n.splice(s,0,d)}else{if(Pn(c)&&Ot(c).parent===e)throw At("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+e.path+"/"+u+"', but it lives already at '"+Ot(c).path+"'");o=!1;var d=IT(t,e,u,c);n.splice(s,0,d)}}return o?null:n}function IT(e,t,n,r,i){sc(e,r);function o(){if(Pn(r)){var a=Ot(r);if(a.assertAlive(Vf),a.parent!==null&&a.parent===t)return a.setParent(t,n),a}return i?e.reconcile(i,r,t,n):e.instantiate(t,n,void 0,r)}var s=o();return i&&i!==s&&(i instanceof Po&&i.createObservableInstanceIfNeeded(),i.die()),s}function sF(e,t){if(!e.isAlive)return!1;if(Pn(t)){var n=Ot(t);return n.isAlive&&n===e}if(e.snapshot===t)return!0;if(!(e instanceof Po))return!1;var r=e.getReconciliationType();return e.identifier!==null&&e.identifierAttribute&&mf(t)&&r.is(t)&&r.isMatchingSnapshotId(e,t)}function Qde(e){return Bi(e)&&(e.flags&Kt.Array)>0}var aF="preProcessSnapshot",lF="postProcessSnapshot";function efe(){return Ot(this).toString()}var cF={name:"AnonymousModel",properties:{},initializers:Nm};function tfe(e){var t=Object.keys(e),n=new Set;return t.forEach(function(r){if(n.has(r))throw At(r+" is declared twice in the model. Model should not contain the same keys");n.add(r)}),t.reduce(function(r,i){if(i in ei)throw At("Hook '"+i+"' was defined as property. Hooks should be defined as part of the actions");var o=Object.getOwnPropertyDescriptor(e,i);if("get"in o)throw At("Getters are not supported as properties. Please use views instead");var s=o.value;if(s==null)throw At("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(Fm(s))r[i]=wf(afe(s),s);else if(s instanceof f2)r[i]=wf(s,{});else if(s instanceof h2)r[i]=wf(s,[]);else if(!Bi(s))throw At("Invalid type definition for property '"+i+"', cannot infer a type from a value like '"+s+"' ("+typeof s+")");return r},e)}var qy=function(e){rr(t,e);function t(n){var r=e.call(this,n.name||cF.name)||this;return Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:Kt.Object}),Object.defineProperty(r,"initializers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"preProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"postProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"propertyNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"named",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return r.cloneAndEnhance({name:i})}}),Object.defineProperty(r,"props",{enumerable:!0,configurable:!0,writable:!0,value:function(i){return r.cloneAndEnhance({properties:i})}}),Object.defineProperty(r,"preProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(i){var o=r.preProcessor;return o?r.cloneAndEnhance({preProcessor:function(s){return o(i(s))}}):r.cloneAndEnhance({preProcessor:i})}}),Object.defineProperty(r,"postProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(i){var o=r.postProcessor;return o?r.cloneAndEnhance({postProcessor:function(s){return i(o(s))}}):r.cloneAndEnhance({postProcessor:i})}}),Object.assign(r,cF,n),r.properties=tfe(r.properties),r.properties,r.propertyNames=Object.keys(r.properties),r.identifierAttribute=r._getIdentifierAttribute(),r}return Object.defineProperty(t.prototype,"_getIdentifierAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=void 0;return this.forAllProps(function(r,i){if(i.flags&Kt.Identifier){if(n)throw At("Cannot define property '"+r+"' as object identifier, property '"+n+"' is already defined as identifier property");n=r}}),n}}),Object.defineProperty(t.prototype,"cloneAndEnhance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return new t({name:n.name||this.name,properties:Object.assign({},this.properties,n.properties),initializers:this.initializers.concat(n.initializers||[]),preProcessor:n.preProcessor||this.preProcessor,postProcessor:n.postProcessor||this.postProcessor})}}),Object.defineProperty(t.prototype,"actions",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this,i=function(o){return r.instantiateActions(o,n(o)),o};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(t.prototype,"instantiateActions",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(!mf(r))throw At("actions initializer should return a plain object containing actions");Object.keys(r).forEach(function(i){if(i===aF)throw At("Cannot define action '"+aF+"', it should be defined using 'type.preProcessSnapshot(fn)' instead");if(i===lF)throw At("Cannot define action '"+lF+"', it should be defined using 'type.postProcessSnapshot(fn)' instead");var o=r[i],s=n[i];if(i in ei&&s){var a=o;o=function(){s.apply(null,arguments),a.apply(null,arguments)}}var l=o.$mst_middleware,c=o.bind(r);c._isFlowAction=o._isFlowAction||!1,c.$mst_middleware=l;var u=Wy(n,i,c);r[i]=u,_f(n,i,u)})}}),Object.defineProperty(t.prototype,"volatile",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this;if(typeof n!="function")throw At("You passed an "+typeof n+" to volatile state as an argument, when function is expected");var i=function(o){return r.instantiateVolatileState(o,n(o)),o};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(t.prototype,"instantiateVolatileState",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(!mf(r))throw At("volatile state initializer should return a plain object containing state");c5(n,r)}}),Object.defineProperty(t.prototype,"extend",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this,i=function(o){var s=n(o),a=s.actions,l=s.views,c=s.state,u=Oue(s,["actions","views","state"]);for(var d in u)throw At("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+d+"'");return c&&r.instantiateVolatileState(o,c),l&&r.instantiateViews(o,l),a&&r.instantiateActions(o,a),o};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(t.prototype,"views",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this,i=function(o){return r.instantiateViews(o,n(o)),o};return this.cloneAndEnhance({initializers:[i]})}}),Object.defineProperty(t.prototype,"instantiateViews",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(!mf(r))throw At("views initializer should return a plain object containing views");Object.getOwnPropertyNames(r).forEach(function(i){var o,s=Object.getOwnPropertyDescriptor(r,i);if("get"in s)u5(n,i,s),d5(n,(o={},o[i]=mh,o));else if(typeof s.value=="function")_f(n,i,s.value);else throw At("A view member should either be a function or getter based property")})}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=Pn(o)?o:this.applySnapshotPreProcessor(o);return w5(this,n,r,i,s)}}),Object.defineProperty(t.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){r===void 0&&(r={});var i=n.type,o={};return i.forAllProps(function(s,a){o[s]=a.instantiate(n,s,void 0,r[s])}),o}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=fi(fi({},lA),{name:this.name});return Rn.object(n,Vf,r)}}),Object.defineProperty(t.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){_f(r,"toString",efe),this.forAllProps(function(i){a5(r,i,n.unbox)}),this.initializers.reduce(function(i,o){return o(i)},r),rA(r,this.willChange),oA(r,this.didChange)}}),Object.defineProperty(t.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=n,i=Ot(r.object),o=r.name;i.assertWritable({subpath:o});var s=i.type.properties[o];return s&&(sc(s,r.newValue),r.newValue=s.reconcile(i.getChildNode(o),r.newValue,i,o)),r}}),Object.defineProperty(t.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=n,i=Ot(r.object),o=i.type.properties[r.name];if(o){var s=r.oldValue?r.oldValue.snapshot:void 0;i.emitPatch({op:"replace",path:Au(r.name),value:r.newValue.snapshot,oldValue:s},i)}}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this,i=[];return this.forAllProps(function(o){i.push(r.getChildNode(n,o))}),i}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i;if(!(r in this.properties))throw At("Not a value property: "+r);var o=pa(n.storedValue,r),s=(i=o.raw)===null||i===void 0?void 0:i.call(o);if(!s)throw At("Node not available for property "+r);return s}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this;r===void 0&&(r=!0);var o={};return this.forAllProps(function(s,a){try{var l=dl(n.storedValue,s);l.reportObserved()}catch{throw At(s+" property is declared twice")}o[s]=i.getChildNode(n,s).snapshot}),r?this.applySnapshotPostProcessor(o):o}}),Object.defineProperty(t.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r={};return Object.keys(n).forEach(function(i){r[i]=n[i].getSnapshot()}),this.applySnapshotPostProcessor(r)}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i){if(!(i.op==="replace"||i.op==="add"))throw At("object does not support operation "+i.op);n.storedValue[r]=i.value}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){sc(this,r);var i=this.applySnapshotPreProcessor(r);this.forAllProps(function(o){n.storedValue[o]=i[o]})}}),Object.defineProperty(t.prototype,"applySnapshotPreProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.preProcessor;return r?r.call(null,n):n}}),Object.defineProperty(t.prototype,"applySnapshotPostProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.postProcessor;return r?r.call(null,n):n}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.properties[n]}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this,o=this.applySnapshotPreProcessor(n);return mf(o)?aA(this.propertyNames.map(function(s){return i.properties[s].validate(o[s],_5(r,s,i.properties[s]))})):Io(r,o,"Value is not a plain object")}}),Object.defineProperty(t.prototype,"forAllProps",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this;this.propertyNames.forEach(function(i){return n(i,r.properties[i])})}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this;return"{ "+this.propertyNames.map(function(r){return r+": "+n.properties[r].describe()}).join("; ")+" }"}}),Object.defineProperty(t.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Vf}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){n.storedValue[r]=void 0}}),t}(Bm);qy.prototype.applySnapshot=Gr(qy.prototype.applySnapshot);function nfe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=typeof e[0]=="string"?e.shift():"AnonymousModel",r=e.shift()||{};return new qy({name:n,properties:r})}function rfe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=typeof e[0]=="string",r=n?e[0]:"AnonymousModel";return n&&e.shift(),e.reduce(function(i,o){return i.cloneAndEnhance({name:i.name+"_"+o.name,properties:o.properties,initializers:o.initializers,preProcessor:function(s){return o.applySnapshotPreProcessor(i.applySnapshotPreProcessor(s))},postProcessor:function(s){return o.applySnapshotPostProcessor(i.applySnapshotPostProcessor(s))}})}).named(r)}function cY(e){return Bi(e)&&(e.flags&Kt.Object)>0}var Tc=function(e){rr(t,e);function t(n,r,i,o){o===void 0&&(o=Tde);var s=e.call(this,n)||this;return Object.defineProperty(s,"flags",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(s,"checker",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(s,"initializer",{enumerable:!0,configurable:!0,writable:!0,value:o}),s.flags=r,s}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return sd(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.initializer(n)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(Fm(n)&&this.checker(n))return Mo();var i=this.name==="Date"?"Date or a unix milliseconds timestamp":this.name;return Io(r,n,"Value is not a "+i)}}),t}(yh),uY=new Tc("string",Kt.String,function(e){return typeof e=="string"}),dY=new Tc("number",Kt.Number,function(e){return typeof e=="number"}),ife=new Tc("integer",Kt.Integer,function(e){return Ode(e)}),ofe=new Tc("float",Kt.Float,function(e){return Ide(e)}),sfe=new Tc("finite",Kt.Finite,function(e){return Rde(e)}),fY=new Tc("boolean",Kt.Boolean,function(e){return typeof e=="boolean"}),hY=new Tc("null",Kt.Null,function(e){return e===null}),pY=new Tc("undefined",Kt.Undefined,function(e){return e===void 0}),mY=new Tc("Date",Kt.Date,function(e){return typeof e=="number"||e instanceof Date},function(e){return e instanceof Date?e:new Date(e)});mY.getSnapshot=function(e){return e.storedValue.getTime()};var gY=mY;function afe(e){switch(typeof e){case"string":return uY;case"number":return dY;case"boolean":return fY;case"object":if(e instanceof Date)return gY}throw At("Cannot determine primitive type from value "+e)}function vY(e){return Bi(e)&&(e.flags&(Kt.String|Kt.Number|Kt.Integer|Kt.Boolean|Kt.Date))>0}var lfe=function(e){rr(t,e);function t(n){var r=e.call(this,JSON.stringify(n))||this;return Object.defineProperty(r,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:Kt.Literal}),r.value=n,r}return Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return sd(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return JSON.stringify(this.value)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return Fm(n)&&n===this.value?Mo():Io(r,n,"Value is not a literal "+JSON.stringify(this.value))}}),t}(yh);function yY(e){return new lfe(e)}function cfe(e){return Bi(e)&&(e.flags&Kt.Literal)>0}var ufe=function(e){rr(t,e);function t(n,r,i,o){var s=e.call(this,n)||this;return Object.defineProperty(s,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(s,"_predicate",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(s,"_message",{enumerable:!0,configurable:!0,writable:!0,value:o}),s}return Object.defineProperty(t.prototype,"flags",{get:function(){return this._subtype.flags|Kt.Refinement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this._subtype.instantiate(n,r,i,o)}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._subtype.isAssignableFrom(n)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this._subtype.validate(n,r);if(i.length>0)return i;var o=Pn(n)?Ot(n).snapshot:n;return this._predicate(o)?Mo():Io(r,n,this._message(n))}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this._subtype.reconcile(n,r,i,o)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),t}(hc);function dfe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=typeof e[0]=="string"?e.shift():Bi(e[0])?e[0].name:null,r=e[0],i=e[1],o=e[2]?e[2]:function(s){return"Value does not respect the refinement predicate"};return new ufe(n,r,i,o)}function ffe(e){return(e.flags&Kt.Refinement)>0}function hfe(e,t){var n=typeof e=="string"?t:e,r=cA.apply(void 0,od(n.map(function(i){return yY(""+i)})));return typeof e=="string"&&(r.name=e),r}var pfe=function(e){rr(t,e);function t(n,r,i){var o=e.call(this,n)||this;return Object.defineProperty(o,"_types",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"_dispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(o,"_eager",{enumerable:!0,configurable:!0,writable:!0,value:!0}),i=fi({eager:!0,dispatcher:void 0},i),o._dispatcher=i.dispatcher,i.eager||(o._eager=!1),o}return Object.defineProperty(t.prototype,"flags",{get:function(){var n=Kt.Union;return this._types.forEach(function(r){n|=r.flags}),n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._types.some(function(r){return r.isAssignableFrom(n)})}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"("+this._types.map(function(n){return n.describe()}).join(" | ")+")"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=this.determineType(o,void 0);if(!s)throw At("No matching type for union "+this.describe());return s.instantiate(n,r,i,o)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=this.determineType(r,n.getReconciliationType());if(!s)throw At("No matching type for union "+this.describe());return s.reconcile(n,r,i,o)}}),Object.defineProperty(t.prototype,"determineType",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return this._dispatcher?this._dispatcher(n):r?r.is(n)?r:this._types.filter(function(i){return i!==r}).find(function(i){return i.is(n)}):this._types.find(function(i){return i.is(n)})}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(this._dispatcher)return this._dispatcher(n).validate(n,r);for(var i=[],o=0,s=0;s<this._types.length;s++){var a=this._types[s],l=a.validate(n,r);if(l.length===0){if(this._eager)return Mo();o++}else i.push(l)}return o===1?Mo():Io(r,n,"No type is applicable for the union").concat(aA(i))}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._types}}),t}(hc);function cA(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Bi(e)?void 0:e,i=Bi(e)?od([e],t):t,o="("+i.map(function(s){return s.name}).join(" | ")+")";return new pfe(o,i,r)}function bY(e){return(e.flags&Kt.Union)>0}var mfe=function(e){rr(t,e);function t(n,r,i){var o=e.call(this,n.name)||this;return Object.defineProperty(o,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_defaultValue",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"optionalValues",{enumerable:!0,configurable:!0,writable:!0,value:i}),o}return Object.defineProperty(t.prototype,"flags",{get:function(){return this._subtype.flags|Kt.Optional},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype.describe()+"?"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){if(this.optionalValues.indexOf(o)>=0){var s=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(n,r,i,s)}return this._subtype.instantiate(n,r,i,o)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this._subtype.reconcile(n,this.optionalValues.indexOf(r)<0&&this._subtype.is(r)?r:this.getDefaultInstanceOrSnapshot(),i,o)}}),Object.defineProperty(t.prototype,"getDefaultInstanceOrSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=typeof this._defaultValue=="function"?this._defaultValue():this._defaultValue;return typeof this._defaultValue=="function"&&sc(this,n),n}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return this.optionalValues.indexOf(n)>=0?Mo():this._subtype.validate(n,r)}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this._subtype.isAssignableFrom(n)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),t}(hc);function gfe(e,t){if(typeof t!="function"&&Pn(t))throw At("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead")}function wf(e,t,n){return gfe(e,t),new mfe(e,t,n||vfe)}var vfe=[void 0];function yfe(e){return Bi(e)&&(e.flags&Kt.Optional)>0}var bfe=wf(pY,void 0),xfe=wf(hY,null);function xY(e){return cA(e,bfe)}function _fe(e){return cA(e,xfe)}var wfe=function(e){rr(t,e);function t(n,r){var i=e.call(this,n)||this;return Object.defineProperty(i,"_definition",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i}return Object.defineProperty(t.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|Kt.Late},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSubType",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(!this._subType){var r=void 0;try{r=this._definition()}catch(i){if(i instanceof ReferenceError)r=void 0;else throw i}if(n&&r===void 0)throw At("Late type seems to be used too early, the definition (still) returns undefined");r&&(this._subType=r)}return this._subType}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this.getSubType(!0).instantiate(n,r,i,o)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this.getSubType(!0).reconcile(n,r,i,o)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this.getSubType(!1);return n?n.name:"<uknown late type>"}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this.getSubType(!1);return i?i.validate(n,r):Mo()}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=this.getSubType(!1);return r?r.isAssignableFrom(n):!1}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var n=this.getSubType(!1);return n||Uq}}),t}(hc);function Sfe(e,t){var n=typeof e=="string"?e:"late("+e.toString()+")",r=typeof e=="string"?t:e;return new wfe(n,r)}function Cfe(e){return Bi(e)&&(e.flags&Kt.Late)>0}function Afe(e,t){return new Pfe(e,t)}var Pfe=function(e){rr(t,e);function t(n,r){var i=e.call(this,n)||this;return Object.defineProperty(i,"options",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"flags",{enumerable:!0,configurable:!0,writable:!0,value:Kt.Lazy}),Object.defineProperty(i,"loadedType",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(i,"pendingNodeList",{enumerable:!0,configurable:!0,writable:!0,value:Rn.array()}),NR(function(){return i.pendingNodeList.length>0&&i.pendingNodeList.some(function(o){return o.isAlive&&i.options.shouldLoadPredicate(o.parent?o.parent.value:null)})},function(){i.options.loadType().then(Gr(function(o){i.loadedType=o,i.pendingNodeList.forEach(function(s){s.parent&&i.loadedType&&s.parent.applyPatches([{op:"replace",path:"/"+s.subpath,value:s.snapshot}])})}))}),i}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"<lazy "+this.name+">"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=this;if(this.loadedType)return this.loadedType.instantiate(n,r,i,o);var a=sd(this,n,r,i,o);return this.pendingNodeList.push(a),NR(function(){return!a.isAlive},function(){return s.pendingNodeList.splice(s.pendingNodeList.indexOf(a),1)}),a}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return this.loadedType?this.loadedType.validate(n,r):rY(n)?Mo():Io(r,n,"Value is not serializable and cannot be lazy")}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return this.loadedType?(n.die(),this.loadedType.instantiate(i,o,i.environment,r)):e.prototype.reconcile.call(this,n,r,i,o)}}),t}(yh),_Y=function(e){rr(t,e);function t(n){var r=e.call(this,n?"frozen("+n.name+")":"frozen")||this;return Object.defineProperty(r,"subType",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:Kt.Frozen}),r}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"<any immutable value>"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){return sd(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return rY(n)?this.subType?this.subType.validate(n,r):Mo():Io(r,n,"Value is not serializable and cannot be frozen")}}),t}(yh),uF=new _Y;function Mfe(e){return arguments.length===0?uF:Bi(e)?new _Y(e):wf(uF,e)}function Efe(e){return Bi(e)&&(e.flags&Kt.Frozen)>0}function Tfe(e){switch(e){case ei.beforeDestroy:return"destroy";case ei.beforeDetach:return"detach";default:return}}var Ofe=function(){function e(t,n){if(Object.defineProperty(this,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolvedReference",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),P5(t))this.identifier=t;else if(Pn(t)){var r=Ot(t);if(!r.identifierAttribute)throw At("Can only store references with a defined identifier attribute.");var i=r.unnormalizedIdentifier;if(i==null)throw At("Can only store references to tree nodes with a defined identifier.");this.identifier=i}else throw At("Can only store references to tree nodes or identifiers, got: '"+t+"'")}return Object.defineProperty(e.prototype,"updateResolvedReference",{enumerable:!1,configurable:!0,writable:!0,value:function(t){var n=Hg(this.identifier),r=t.root,i=r.identifierCache.getLastCacheModificationPerId(n);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==i){var o=this.targetType,s=r.identifierCache.resolve(o,n);if(!s)throw new A5("[mobx-state-tree] Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+t.path+")");this.resolvedReference={node:s,lastCacheModification:i}}}}),Object.defineProperty(e.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!1,configurable:!0}),e}(),A5=function(e){rr(t,e);function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return t}(Error),wY=function(e){rr(t,e);function t(n,r){var i=e.call(this,"reference("+n.name+")")||this;return Object.defineProperty(i,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"onInvalidated",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"flags",{enumerable:!0,configurable:!0,writable:!0,value:Kt.Reference}),i}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.targetType.isAssignableFrom(n)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return P5(n)?Mo():Io(r,n,"Value is not a valid identifier, which is a string or a number")}}),Object.defineProperty(t.prototype,"fireInvalidated",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=r.parent;if(!(!s||!s.isAlive)){var a=s.storedValue;a&&this.onInvalidated({cause:n,parent:a,invalidTarget:o?o.storedValue:void 0,invalidId:i,replaceRef:function(l){Dm(r.root.storedValue,{op:"replace",value:l,path:r.path})},removeRef:function(){cY(s.type)?this.replaceRef(void 0):Dm(r.root.storedValue,{op:"remove",path:r.path})}})}}}),Object.defineProperty(t.prototype,"addTargetNodeWatcher",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){var i=this,o=this.getValue(n);if(o){var s=Ot(o),a=function(u,d){var f=Tfe(d);f&&i.fireInvalidated(f,n,r,s)},l=s.registerHook(ei.beforeDetach,a),c=s.registerHook(ei.beforeDestroy,a);return function(){l(),c()}}}}),Object.defineProperty(t.prototype,"watchTargetNodeForInvalidations",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i){var o=this;if(this.onInvalidated){var s;n.registerHook(ei.beforeDestroy,function(){s&&s()});var a=function(l){s&&s();var c=n.parent,u=c&&c.storedValue;if(c&&c.isAlive&&u){var d=void 0;i?d=!!i.get(r,u):d=n.root.identifierCache.has(o.targetType,Hg(r)),d?s=o.addTargetNodeWatcher(n,r):l||o.fireInvalidated("invalidSnapshotReference",n,r,null)}};n.state===bi.FINALIZED?a(!0):(n.isRoot||n.root.registerHook(ei.afterCreationFinalization,function(){n.parent&&n.parent.createObservableInstanceIfNeeded()}),n.registerHook(ei.afterAttach,function(){a(!1)}))}}}),t}(yh),Ife=function(e){rr(t,e);function t(n,r){return e.call(this,n,r)||this}return Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(n.isAlive){var r=n.storedValue;return r.resolvedValue}}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r=n.storedValue;return r.identifier}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=Pn(o)?Dq(o):o,a=new Ofe(o,this.targetType),l=sd(this,n,r,i,a);return a.node=l,this.watchTargetNodeForInvalidations(l,s,void 0),l}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){if(!n.isDetaching&&n.type===this){var s=Pn(r),a=n.storedValue;if(!s&&a.identifier===r||s&&a.resolvedValue===r)return n.setParent(i,o),n}var l=this.instantiate(i,o,void 0,r);return n.die(),l}}),t}(wY),Rfe=function(e){rr(t,e);function t(n,r,i){var o=e.call(this,n,i)||this;return Object.defineProperty(o,"options",{enumerable:!0,configurable:!0,writable:!0,value:r}),o}return Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(n){if(n.isAlive){var r=this.options.get(n.storedValue,n.parent?n.parent.storedValue:null);return r}}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.storedValue}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=Pn(o)?this.options.set(o,n?n.storedValue:null):o,a=sd(this,n,r,i,s);return this.watchTargetNodeForInvalidations(a,s,this.options),a}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=Pn(r)?this.options.set(r,n?n.storedValue:null):r;if(!n.isDetaching&&n.type===this&&n.storedValue===s)return n.setParent(i,o),n;var a=this.instantiate(i,o,void 0,s);return n.die(),a}}),t}(wY);function SY(e,t){var n=t||void 0,r=t?t.onInvalidated:void 0;return n&&(n.get||n.set)?new Rfe(e,{get:n.get,set:n.set},r):new Ife(e,r)}function kfe(e){return(e.flags&Kt.Reference)>0}function Lfe(e,t){var n=SY(e,fi(fi({},t),{onInvalidated:function(r){t&&t.onInvalidated&&t.onInvalidated(r),r.removeRef()}}));return t&&t.acceptsUndefined===!1?n:xY(n)}var CY=function(e){rr(t,e);function t(n,r){var i=e.call(this,n)||this;return Object.defineProperty(i,"validType",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(i,"flags",{enumerable:!0,configurable:!0,writable:!0,value:Kt.Identifier}),i}return Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){if(!n||!(n.type instanceof qy))throw At("Identifier types can only be instantiated as direct child of a model type");return sd(this,n,r,i,o)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){if(n.storedValue!==r)throw At("Tried to change identifier from '"+n.storedValue+"' to '"+r+"'. Changing identifiers is not allowed.");return n.setParent(i,o),n}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){return typeof n!==this.validType?Io(r,n,"Value is not a valid "+this.describe()+", expected a "+this.validType):Mo()}}),t}(yh),$fe=function(e){rr(t,e);function t(){var n=e.call(this,"identifier","string")||this;return Object.defineProperty(n,"flags",{enumerable:!0,configurable:!0,writable:!0,value:Kt.Identifier}),n}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifier"}}),t}(CY),Dfe=function(e){rr(t,e);function t(){return e.call(this,"identifierNumber","number")||this}return Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return n.storedValue}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifierNumber"}}),t}(CY),Bfe=new $fe,Nfe=new Dfe;function Ffe(e){return Bi(e)&&(e.flags&Kt.Identifier)>0}function Hg(e){return""+e}function P5(e){return typeof e=="string"||typeof e=="number"}function zfe(e){return new jfe(e)}var jfe=function(e){rr(t,e);function t(n){var r=e.call(this,n.name)||this;return Object.defineProperty(r,"options",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:Kt.Custom}),r}return Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r){if(this.options.isTargetType(n))return Mo();var i=this.options.getValidationMessage(n);return i?Io(r,n,"Invalid value for type '"+this.name+"': "+i):Mo()}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(n){return this.options.toSnapshot(n.storedValue)}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=this.options.isTargetType(o)?o:this.options.fromSnapshot(o,n&&n.root.environment);return sd(this,n,r,i,s)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(n,r,i,o){var s=!this.options.isTargetType(r);if(!n.isDetaching){var a=n.type===this&&(s?r===n.snapshot:r===n.storedValue);if(a)return n.setParent(i,o),n}var l=s?this.options.fromSnapshot(r,i.root.environment):r,c=this.instantiate(i,o,void 0,l);return n.die(),c}}),t}(yh),kt={enumeration:hfe,model:nfe,compose:rfe,custom:zfe,reference:SY,safeReference:Lfe,union:cA,optional:wf,literal:yY,maybe:xY,maybeNull:_fe,refinement:dfe,string:uY,boolean:fY,number:dY,integer:ife,float:ofe,finite:sfe,Date:gY,map:Kde,array:Jde,frozen:Mfe,identifier:Bfe,identifierNumber:Nfe,late:Sfe,lazy:Afe,undefined:pY,null:hY,snapshotProcessor:Yde};const Ufe=Object.freeze(Object.defineProperty({__proto__:null,addDisposer:ry,addMiddleware:qq,applyAction:Vq,applyPatch:Dm,applySnapshot:kq,cast:Jue,castFlowReturn:Nde,castToReferenceSnapshot:ede,castToSnapshot:Que,clone:que,createActionTrackingMiddleware:ode,createActionTrackingMiddleware2:ade,decorate:hde,destroy:Xue,detach:Yue,escapeJsonPath:Au,flow:sY,getChildType:Iue,getEnv:Kue,getIdentifier:Dq,getLivelinessChecking:Tq,getMembers:Zue,getNodeId:tde,getParent:Bue,getParentOfType:Fue,getPath:$q,getPathParts:zue,getPropertyMembers:Fq,getRelativePath:Wue,getRoot:Lq,getRunningActionContext:x5,getSnapshot:u1,getType:c1,hasParent:Due,hasParentOfType:Nue,isActionContextChildOf:gde,isActionContextThisOrChildOf:vde,isAlive:y5,isArrayType:Qde,isFrozenType:Efe,isIdentifierType:Ffe,isLateType:Cfe,isLiteralType:cfe,isMapType:Zde,isModelType:cY,isOptionalType:yfe,isPrimitiveType:vY,isProtected:$ue,isReferenceType:kfe,isRefinementType:ffe,isRoot:jue,isStateTreeNode:Pn,isType:Bi,isUnionType:bY,isValidReference:Gue,joinJsonPath:d2,onAction:Hq,onPatch:Iq,onSnapshot:Rq,process:Mde,protect:kue,recordActions:dde,recordPatches:Rue,resolveIdentifier:Vue,resolvePath:Uue,setLivelinessChecking:Eq,setLivelynessChecking:Tue,splitJsonPath:zm,t:kt,toGenerator:zde,toGeneratorFunction:Fde,tryReference:Hue,tryResolve:Bq,typecheck:Kq,types:kt,unescapeJsonPath:aY,unprotect:Lue,walk:Nq},Symbol.toStringTag,{value:"Module"})),Vfe="modulepreload",Hfe=function(e,t){return new URL(e,t).href},dF={},bh=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");i=Promise.all(n.map(s=>{if(s=Hfe(s,r),s in dF)return;dF[s]=!0;const a=s.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let d=o.length-1;d>=0;d--){const f=o[d];if(f.href===s&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Vfe,a||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})}))}return i.then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},Gfe={black:"#000",white:"#fff"},jm=Gfe,Wfe={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Yd=Wfe,qfe={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},Yfe=qfe,Xfe={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Xd=Xfe,Kfe={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea"},Zfe=Kfe,Jfe={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},Qfe=Jfe,ehe={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Kd=ehe,the={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Zd=the,nhe={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4"},rhe=nhe,ihe={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5"},ohe=ihe,she={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Jd=she,ahe={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17"},lhe=ahe,che={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00"},uhe=che,dhe={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"},fhe=dhe,hhe={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00"},phe=hhe,mhe={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},_p=mhe,ghe={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00"},vhe=ghe,yhe={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037"},bhe=yhe,xhe={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},AY=xhe,_he={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"},whe=_he,PY=Object.freeze(Object.defineProperty({__proto__:null,amber:phe,blue:Kd,blueGrey:whe,brown:bhe,common:jm,cyan:rhe,deepOrange:vhe,deepPurple:Zfe,green:Jd,grey:AY,indigo:Qfe,lightBlue:Zd,lightGreen:lhe,lime:uhe,orange:_p,pink:Yfe,purple:Xd,red:Yd,teal:ohe,yellow:fhe},Symbol.toStringTag,{value:"Module"}));function Eo(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const fl="$$material";function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}const She=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));function He(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function MY(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Che=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ahe=MY(function(e){return Che.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function Phe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Mhe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Ehe=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Mhe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Phe(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Ii="-ms-",p2="-moz-",vn="-webkit-",EY="comm",M5="rule",E5="decl",The="@import",TY="@keyframes",Ohe="@layer",Ihe=Math.abs,uA=String.fromCharCode,Rhe=Object.assign;function khe(e,t){return xi(e,0)^45?(((t<<2^xi(e,0))<<2^xi(e,1))<<2^xi(e,2))<<2^xi(e,3):0}function OY(e){return e.trim()}function Lhe(e,t){return(e=t.exec(e))?e[0]:e}function yn(e,t,n){return e.replace(t,n)}function HR(e,t){return e.indexOf(t)}function xi(e,t){return e.charCodeAt(t)|0}function Yy(e,t,n){return e.slice(t,n)}function Ua(e){return e.length}function T5(e){return e.length}function r_(e,t){return t.push(e),e}function $he(e,t){return e.map(t).join("")}var dA=1,Um=1,IY=0,To=0,jr=0,Gg="";function fA(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:dA,column:Um,length:s,return:""}}function Rv(e,t){return Rhe(fA("",null,null,"",null,null,0),e,{length:-e.length},t)}function Dhe(){return jr}function Bhe(){return jr=To>0?xi(Gg,--To):0,Um--,jr===10&&(Um=1,dA--),jr}function Yo(){return jr=To<IY?xi(Gg,To++):0,Um++,jr===10&&(Um=1,dA++),jr}function ol(){return xi(Gg,To)}function Jw(){return To}function d1(e,t){return Yy(Gg,e,t)}function Xy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function RY(e){return dA=Um=1,IY=Ua(Gg=e),To=0,[]}function kY(e){return Gg="",e}function Qw(e){return OY(d1(To-1,GR(e===91?e+2:e===40?e+1:e)))}function Nhe(e){for(;(jr=ol())&&jr<33;)Yo();return Xy(e)>2||Xy(jr)>3?"":" "}function Fhe(e,t){for(;--t&&Yo()&&!(jr<48||jr>102||jr>57&&jr<65||jr>70&&jr<97););return d1(e,Jw()+(t<6&&ol()==32&&Yo()==32))}function GR(e){for(;Yo();)switch(jr){case e:return To;case 34:case 39:e!==34&&e!==39&&GR(jr);break;case 40:e===41&&GR(e);break;case 92:Yo();break}return To}function zhe(e,t){for(;Yo()&&e+jr!==57;)if(e+jr===84&&ol()===47)break;return"/*"+d1(t,To-1)+"*"+uA(e===47?e:Yo())}function jhe(e){for(;!Xy(ol());)Yo();return d1(e,To)}function Uhe(e){return kY(eS("",null,null,null,[""],e=RY(e),0,[0],e))}function eS(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,f=0,h=0,p=0,g=1,v=1,m=1,y=0,b="",_=i,x=o,w=r,S=b;v;)switch(p=y,y=Yo()){case 40:if(p!=108&&xi(S,d-1)==58){HR(S+=yn(Qw(y),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:S+=Qw(y);break;case 9:case 10:case 13:case 32:S+=Nhe(p);break;case 92:S+=Fhe(Jw()-1,7);continue;case 47:switch(ol()){case 42:case 47:r_(Vhe(zhe(Yo(),Jw()),t,n),l);break;default:S+="/"}break;case 123*g:a[c++]=Ua(S)*m;case 125*g:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+u:m==-1&&(S=yn(S,/\f/g,"")),h>0&&Ua(S)-d&&r_(h>32?hF(S+";",r,n,d-1):hF(yn(S," ","")+";",r,n,d-2),l);break;case 59:S+=";";default:if(r_(w=fF(S,t,n,c,u,i,a,b,_=[],x=[],d),o),y===123)if(u===0)eS(S,t,w,w,_,o,d,a,x);else switch(f===99&&xi(S,3)===110?100:f){case 100:case 108:case 109:case 115:eS(e,w,w,r&&r_(fF(e,w,w,0,0,i,a,b,i,_=[],d),x),i,x,d,a,r?_:x);break;default:eS(S,w,w,w,[""],x,0,a,x)}}c=u=h=0,g=m=1,b=S="",d=s;break;case 58:d=1+Ua(S),h=p;default:if(g<1){if(y==123)--g;else if(y==125&&g++==0&&Bhe()==125)continue}switch(S+=uA(y),y*g){case 38:m=u>0?1:(S+="\f",-1);break;case 44:a[c++]=(Ua(S)-1)*m,m=1;break;case 64:ol()===45&&(S+=Qw(Yo())),f=ol(),u=d=Ua(b=S+=jhe(Jw())),y++;break;case 45:p===45&&Ua(S)==2&&(g=0)}}return o}function fF(e,t,n,r,i,o,s,a,l,c,u){for(var d=i-1,f=i===0?o:[""],h=T5(f),p=0,g=0,v=0;p<r;++p)for(var m=0,y=Yy(e,d+1,d=Ihe(g=s[p])),b=e;m<h;++m)(b=OY(g>0?f[m]+" "+y:yn(y,/&\f/g,f[m])))&&(l[v++]=b);return fA(e,t,n,i===0?M5:a,l,c,u)}function Vhe(e,t,n){return fA(e,t,n,EY,uA(Dhe()),Yy(e,2,-2),0)}function hF(e,t,n,r){return fA(e,t,n,E5,Yy(e,0,r),Yy(e,r+1,-1),r)}function cm(e,t){for(var n="",r=T5(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Hhe(e,t,n,r){switch(e.type){case Ohe:if(e.children.length)break;case The:case E5:return e.return=e.return||e.value;case EY:return"";case TY:return e.return=e.value+"{"+cm(e.children,r)+"}";case M5:e.value=e.props.join(",")}return Ua(n=cm(e.children,r))?e.return=e.value+"{"+n+"}":""}function Ghe(e){var t=T5(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}function Whe(e){return function(t){t.root||(t=t.return)&&e(t)}}var qhe=function(t,n,r){for(var i=0,o=0;i=o,o=ol(),i===38&&o===12&&(n[r]=1),!Xy(o);)Yo();return d1(t,To)},Yhe=function(t,n){var r=-1,i=44;do switch(Xy(i)){case 0:i===38&&ol()===12&&(n[r]=1),t[r]+=qhe(To-1,n,r);break;case 2:t[r]+=Qw(i);break;case 4:if(i===44){t[++r]=ol()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=uA(i)}while(i=Yo());return t},Xhe=function(t,n){return kY(Yhe(RY(t),n))},pF=new WeakMap,Khe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!pF.get(r))&&!i){pF.set(t,!0);for(var o=[],s=Xhe(n,o),a=r.props,l=0,c=0;l<s.length;l++)for(var u=0;u<a.length;u++,c++)t.props[c]=o[l]?s[l].replace(/&\f/g,a[u]):a[u]+" "+s[l]}}},Zhe=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function LY(e,t){switch(khe(e,t)){case 5103:return vn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return vn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return vn+e+p2+e+Ii+e+e;case 6828:case 4268:return vn+e+Ii+e+e;case 6165:return vn+e+Ii+"flex-"+e+e;case 5187:return vn+e+yn(e,/(\w+).+(:[^]+)/,vn+"box-$1$2"+Ii+"flex-$1$2")+e;case 5443:return vn+e+Ii+"flex-item-"+yn(e,/flex-|-self/,"")+e;case 4675:return vn+e+Ii+"flex-line-pack"+yn(e,/align-content|flex-|-self/,"")+e;case 5548:return vn+e+Ii+yn(e,"shrink","negative")+e;case 5292:return vn+e+Ii+yn(e,"basis","preferred-size")+e;case 6060:return vn+"box-"+yn(e,"-grow","")+vn+e+Ii+yn(e,"grow","positive")+e;case 4554:return vn+yn(e,/([^-])(transform)/g,"$1"+vn+"$2")+e;case 6187:return yn(yn(yn(e,/(zoom-|grab)/,vn+"$1"),/(image-set)/,vn+"$1"),e,"")+e;case 5495:case 3959:return yn(e,/(image-set\([^]*)/,vn+"$1$`$1");case 4968:return yn(yn(e,/(.+:)(flex-)?(.*)/,vn+"box-pack:$3"+Ii+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+vn+e+e;case 4095:case 3583:case 4068:case 2532:return yn(e,/(.+)-inline(.+)/,vn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ua(e)-1-t>6)switch(xi(e,t+1)){case 109:if(xi(e,t+4)!==45)break;case 102:return yn(e,/(.+:)(.+)-([^]+)/,"$1"+vn+"$2-$3$1"+p2+(xi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~HR(e,"stretch")?LY(yn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(xi(e,t+1)!==115)break;case 6444:switch(xi(e,Ua(e)-3-(~HR(e,"!important")&&10))){case 107:return yn(e,":",":"+vn)+e;case 101:return yn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+vn+(xi(e,14)===45?"inline-":"")+"box$3$1"+vn+"$2$3$1"+Ii+"$2box$3")+e}break;case 5936:switch(xi(e,t+11)){case 114:return vn+e+Ii+yn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return vn+e+Ii+yn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return vn+e+Ii+yn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return vn+e+Ii+e+e}return e}var Jhe=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case E5:t.return=LY(t.value,t.length);break;case TY:return cm([Rv(t,{value:yn(t.value,"@","@"+vn)})],i);case M5:if(t.length)return $he(t.props,function(o){switch(Lhe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return cm([Rv(t,{props:[yn(o,/:(read-\w+)/,":"+p2+"$1")]})],i);case"::placeholder":return cm([Rv(t,{props:[yn(o,/:(plac\w+)/,":"+vn+"input-$1")]}),Rv(t,{props:[yn(o,/:(plac\w+)/,":"+p2+"$1")]}),Rv(t,{props:[yn(o,/:(plac\w+)/,Ii+"input-$1")]})],i)}return""})}},Qhe=[Jhe],$Y=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(g){var v=g.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var i=t.stylisPlugins||Qhe,o={},s,a=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var v=g.getAttribute("data-emotion").split(" "),m=1;m<v.length;m++)o[v[m]]=!0;a.push(g)});var l,c=[Khe,Zhe];{var u,d=[Hhe,Whe(function(g){u.insert(g)})],f=Ghe(c.concat(i,d)),h=function(v){return cm(Uhe(v),f)};l=function(v,m,y,b){u=y,h(v?v+"{"+m.styles+"}":m.styles),b&&(p.inserted[m.name]=!0)}}var p={key:n,sheet:new Ehe({key:n,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:l};return p.sheet.hydrate(a),p},DY={exports:{}},$n={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mi=typeof Symbol=="function"&&Symbol.for,O5=mi?Symbol.for("react.element"):60103,I5=mi?Symbol.for("react.portal"):60106,hA=mi?Symbol.for("react.fragment"):60107,pA=mi?Symbol.for("react.strict_mode"):60108,mA=mi?Symbol.for("react.profiler"):60114,gA=mi?Symbol.for("react.provider"):60109,vA=mi?Symbol.for("react.context"):60110,R5=mi?Symbol.for("react.async_mode"):60111,yA=mi?Symbol.for("react.concurrent_mode"):60111,bA=mi?Symbol.for("react.forward_ref"):60112,xA=mi?Symbol.for("react.suspense"):60113,epe=mi?Symbol.for("react.suspense_list"):60120,_A=mi?Symbol.for("react.memo"):60115,wA=mi?Symbol.for("react.lazy"):60116,tpe=mi?Symbol.for("react.block"):60121,npe=mi?Symbol.for("react.fundamental"):60117,rpe=mi?Symbol.for("react.responder"):60118,ipe=mi?Symbol.for("react.scope"):60119;function as(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case O5:switch(e=e.type,e){case R5:case yA:case hA:case mA:case pA:case xA:return e;default:switch(e=e&&e.$$typeof,e){case vA:case bA:case wA:case _A:case gA:return e;default:return t}}case I5:return t}}}function BY(e){return as(e)===yA}$n.AsyncMode=R5;$n.ConcurrentMode=yA;$n.ContextConsumer=vA;$n.ContextProvider=gA;$n.Element=O5;$n.ForwardRef=bA;$n.Fragment=hA;$n.Lazy=wA;$n.Memo=_A;$n.Portal=I5;$n.Profiler=mA;$n.StrictMode=pA;$n.Suspense=xA;$n.isAsyncMode=function(e){return BY(e)||as(e)===R5};$n.isConcurrentMode=BY;$n.isContextConsumer=function(e){return as(e)===vA};$n.isContextProvider=function(e){return as(e)===gA};$n.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===O5};$n.isForwardRef=function(e){return as(e)===bA};$n.isFragment=function(e){return as(e)===hA};$n.isLazy=function(e){return as(e)===wA};$n.isMemo=function(e){return as(e)===_A};$n.isPortal=function(e){return as(e)===I5};$n.isProfiler=function(e){return as(e)===mA};$n.isStrictMode=function(e){return as(e)===pA};$n.isSuspense=function(e){return as(e)===xA};$n.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===hA||e===yA||e===mA||e===pA||e===xA||e===epe||typeof e=="object"&&e!==null&&(e.$$typeof===wA||e.$$typeof===_A||e.$$typeof===gA||e.$$typeof===vA||e.$$typeof===bA||e.$$typeof===npe||e.$$typeof===rpe||e.$$typeof===ipe||e.$$typeof===tpe)};$n.typeOf=as;DY.exports=$n;var ope=DY.exports,NY=ope,spe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ape={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},FY={};FY[NY.ForwardRef]=spe;FY[NY.Memo]=ape;var lpe=!0;function zY(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):r+=i+" "}),r}var jY=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||lpe===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},k5=function(t,n,r){jY(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function cpe(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var upe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},dpe=/[A-Z]|^ms/g,fpe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,UY=function(t){return t.charCodeAt(1)===45},mF=function(t){return t!=null&&typeof t!="boolean"},RT=MY(function(e){return UY(e)?e:e.replace(dpe,"-$&").toLowerCase()}),gF=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(fpe,function(r,i,o){return Va={name:i,styles:o,next:Va},i})}return upe[t]!==1&&!UY(t)&&typeof n=="number"&&n!==0?n+"px":n};function Ky(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Va={name:n.name,styles:n.styles,next:Va},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Va={name:r.name,styles:r.styles,next:Va},r=r.next;var i=n.styles+";";return i}return hpe(e,t,n)}case"function":{if(e!==void 0){var o=Va,s=n(e);return Va=o,Ky(e,t,s)}break}}if(t==null)return n;var a=t[n];return a!==void 0?a:n}function hpe(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ky(e,t,n[i])+";";else for(var o in n){var s=n[o];if(typeof s!="object")t!=null&&t[s]!==void 0?r+=o+"{"+t[s]+"}":mF(s)&&(r+=RT(o)+":"+gF(o,s)+";");else if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var a=0;a<s.length;a++)mF(s[a])&&(r+=RT(o)+":"+gF(o,s[a])+";");else{var l=Ky(e,t,s);switch(o){case"animation":case"animationName":{r+=RT(o)+":"+l+";";break}default:r+=o+"{"+l+"}"}}}return r}var vF=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Va,SA=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,o="";Va=void 0;var s=t[0];s==null||s.raw===void 0?(i=!1,o+=Ky(r,n,s)):o+=s[0];for(var a=1;a<t.length;a++)o+=Ky(r,n,t[a]),i&&(o+=s[a]);vF.lastIndex=0;for(var l="",c;(c=vF.exec(o))!==null;)l+="-"+c[1];var u=cpe(o)+l;return{name:u,styles:o,next:Va}},ppe=function(t){return t()},VY=$I.useInsertionEffect?$I.useInsertionEffect:!1,mpe=VY||ppe,yF=VY||I.useLayoutEffect,L5=I.createContext(typeof HTMLElement<"u"?$Y({key:"css"}):null),gpe=L5.Provider,vpe=function(){return I.useContext(L5)},HY=function(t){return I.forwardRef(function(n,r){var i=I.useContext(L5);return t(n,i,r)})},CA=I.createContext({}),GY=HY(function(e,t){var n=e.styles,r=SA([n],void 0,I.useContext(CA)),i=I.useRef();return yF(function(){var o=t.key+"-global",s=new t.sheet.constructor({key:o,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+o+" "+r.name+'"]');return t.sheet.tags.length&&(s.before=t.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",o),s.hydrate([l])),i.current=[s,a],function(){s.flush()}},[t]),yF(function(){var o=i.current,s=o[0],a=o[1];if(a){o[1]=!1;return}if(r.next!==void 0&&k5(t,r.next,!0),s.tags.length){var l=s.tags[s.tags.length-1].nextElementSibling;s.before=l,s.flush()}t.insert("",r,s,!1)},[t,r.name]),null});function ma(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return SA(t)}var ls=function(){var t=ma.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},ype=Ahe,bpe=function(t){return t!=="theme"},bF=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?ype:bpe},xF=function(t,n,r){var i;if(n){var o=n.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(s){return t.__emotion_forwardProp(s)&&o(s)}:o}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},xpe=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return jY(n,r,i),mpe(function(){return k5(n,r,i)}),null},_pe=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,o,s;n!==void 0&&(o=n.label,s=n.target);var a=xF(t,n,r),l=a||bF(i),c=!l("as");return function(){var u=arguments,d=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&d.push("label:"+o+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var f=u.length,h=1;h<f;h++)d.push(u[h],u[0][h])}var p=HY(function(g,v,m){var y=c&&g.as||i,b="",_=[],x=g;if(g.theme==null){x={};for(var w in g)x[w]=g[w];x.theme=I.useContext(CA)}typeof g.className=="string"?b=zY(v.registered,_,g.className):g.className!=null&&(b=g.className+" ");var S=SA(d.concat(_),v.registered,x);b+=v.key+"-"+S.name,s!==void 0&&(b+=" "+s);var C=c&&a===void 0?bF(y):l,A={};for(var T in g)c&&T==="as"||C(T)&&(A[T]=g[T]);return A.className=b,A.ref=m,I.createElement(I.Fragment,null,I.createElement(xpe,{cache:v,serialized:S,isStringTag:typeof y=="string"}),I.createElement(y,A))});return p.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=d,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+s}}),p.withComponent=function(g,v){return e(g,M({},n,v,{shouldForwardProp:xF(p,v,!0)})).apply(void 0,d)},p}},wpe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],WR=_pe.bind();wpe.forEach(function(e){WR[e]=WR(e)});var WY={exports:{}},Spe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Cpe=Spe,Ape=Cpe;function qY(){}function YY(){}YY.resetWarningCache=qY;var Ppe=function(){function e(r,i,o,s,a,l){if(l!==Ape){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:YY,resetWarningCache:qY};return n.PropTypes=n,n};WY.exports=Ppe();var XY=WY.exports;const Rct=Dg(XY);let qR;typeof document=="object"&&(qR=$Y({key:"css",prepend:!0}));function KY(e){const{injectFirst:t,children:n}=e;return t&&qR?q.jsx(gpe,{value:qR,children:n}):n}function Mpe(e){return e==null||Object.keys(e).length===0}function tS(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?i=>t(Mpe(i)?n:i):t;return q.jsx(GY,{styles:r})}function ZY(e,t){return WR(e,t)}const Epe=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function Yl(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function JY(e){if(!Yl(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=JY(e[n])}),t}function Tr(e,t,n={clone:!0}){const r=n.clone?M({},e):e;return Yl(e)&&Yl(t)&&Object.keys(t).forEach(i=>{i!=="__proto__"&&(Yl(t[i])&&i in e&&Yl(e[i])?r[i]=Tr(e[i],t[i],n):n.clone?r[i]=Yl(t[i])?JY(t[i]):t[i]:r[i]=t[i])}),r}var jn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $5=Symbol.for("react.element"),D5=Symbol.for("react.portal"),AA=Symbol.for("react.fragment"),PA=Symbol.for("react.strict_mode"),MA=Symbol.for("react.profiler"),EA=Symbol.for("react.provider"),TA=Symbol.for("react.context"),Tpe=Symbol.for("react.server_context"),OA=Symbol.for("react.forward_ref"),IA=Symbol.for("react.suspense"),RA=Symbol.for("react.suspense_list"),kA=Symbol.for("react.memo"),LA=Symbol.for("react.lazy"),Ope=Symbol.for("react.offscreen"),QY;QY=Symbol.for("react.module.reference");function js(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case $5:switch(e=e.type,e){case AA:case MA:case PA:case IA:case RA:return e;default:switch(e=e&&e.$$typeof,e){case Tpe:case TA:case OA:case LA:case kA:case EA:return e;default:return t}}case D5:return t}}}jn.ContextConsumer=TA;jn.ContextProvider=EA;jn.Element=$5;jn.ForwardRef=OA;jn.Fragment=AA;jn.Lazy=LA;jn.Memo=kA;jn.Portal=D5;jn.Profiler=MA;jn.StrictMode=PA;jn.Suspense=IA;jn.SuspenseList=RA;jn.isAsyncMode=function(){return!1};jn.isConcurrentMode=function(){return!1};jn.isContextConsumer=function(e){return js(e)===TA};jn.isContextProvider=function(e){return js(e)===EA};jn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===$5};jn.isForwardRef=function(e){return js(e)===OA};jn.isFragment=function(e){return js(e)===AA};jn.isLazy=function(e){return js(e)===LA};jn.isMemo=function(e){return js(e)===kA};jn.isPortal=function(e){return js(e)===D5};jn.isProfiler=function(e){return js(e)===MA};jn.isStrictMode=function(e){return js(e)===PA};jn.isSuspense=function(e){return js(e)===IA};jn.isSuspenseList=function(e){return js(e)===RA};jn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===AA||e===MA||e===PA||e===IA||e===RA||e===Ope||typeof e=="object"&&e!==null&&(e.$$typeof===LA||e.$$typeof===kA||e.$$typeof===EA||e.$$typeof===TA||e.$$typeof===OA||e.$$typeof===QY||e.getModuleId!==void 0)};jn.typeOf=js;function Le(e){if(typeof e!="string")throw new Error(Eo(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Zy(...e){return e.reduce((t,n)=>n==null?t:function(...i){t.apply(this,i),n.apply(this,i)},()=>{})}function xh(e,t=166){let n;function r(...i){const o=()=>{e.apply(this,i)};clearTimeout(n),n=setTimeout(o,t)}return r.clear=()=>{clearTimeout(n)},r}function eX(e,t){return()=>null}function sl(e,t){var n,r;return I.isValidElement(e)&&t.indexOf((n=e.type.muiName)!=null?n:(r=e.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function kn(e){return e&&e.ownerDocument||document}function Ai(e){return kn(e).defaultView||window}function tX(e,t){return()=>null}function Vm(e,t){typeof e=="function"?e(t):e&&(e.current=t)}const Ipe=typeof window<"u"?I.useLayoutEffect:I.useEffect,Yr=Ipe;let _F=0;function Rpe(e){const[t,n]=I.useState(e),r=e||t;return I.useEffect(()=>{t==null&&(_F+=1,n(`mui-${_F}`))},[t]),r}const wF=$I.useId;function Ls(e){if(wF!==void 0){const t=wF();return e??t}return Rpe(e)}function nX(e,t,n,r,i){return null}function Wi({controlled:e,default:t,name:n,state:r="value"}){const{current:i}=I.useRef(e!==void 0),[o,s]=I.useState(t),a=i?e:o,l=I.useCallback(c=>{i||s(c)},[]);return[a,l]}function tr(e){const t=I.useRef(e);return Yr(()=>{t.current=e}),I.useRef((...n)=>(0,t.current)(...n)).current}function cn(...e){return I.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{Vm(n,t)})},e)}let $A=!0,YR=!1,SF;const kpe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Lpe(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&kpe[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function $pe(e){e.metaKey||e.altKey||e.ctrlKey||($A=!0)}function kT(){$A=!1}function Dpe(){this.visibilityState==="hidden"&&YR&&($A=!0)}function Bpe(e){e.addEventListener("keydown",$pe,!0),e.addEventListener("mousedown",kT,!0),e.addEventListener("pointerdown",kT,!0),e.addEventListener("touchstart",kT,!0),e.addEventListener("visibilitychange",Dpe,!0)}function Npe(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return $A||Lpe(t)}function _h(){const e=I.useCallback(i=>{i!=null&&Bpe(i.ownerDocument)},[]),t=I.useRef(!1);function n(){return t.current?(YR=!0,window.clearTimeout(SF),SF=window.setTimeout(()=>{YR=!1},100),t.current=!1,!0):!1}function r(i){return Npe(i)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:n,ref:e}}function rX(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}let Gh;function iX(){if(Gh)return Gh;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),Gh="reverse",e.scrollLeft>0?Gh="default":(e.scrollLeft=1,e.scrollLeft===0&&(Gh="negative")),document.body.removeChild(e),Gh}function Fpe(e,t){const n=e.scrollLeft;if(t!=="rtl")return n;switch(iX()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}const B5=e=>{const t=I.useRef({});return I.useEffect(()=>{t.current=e}),t.current};function zpe(e){return I.Children.toArray(e).filter(t=>I.isValidElement(t))}const jpe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},oX=jpe;function N5(e,t){const n=M({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=M({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},o=t[r];n[r]={},!o||!Object.keys(o)?n[r]=i:!i||!Object.keys(i)?n[r]=o:(n[r]=M({},o),Object.keys(i).forEach(s=>{n[r][s]=N5(i[s],o[s])}))}else n[r]===void 0&&(n[r]=e[r])}),n}function it(e,t,n=void 0){const r={};return Object.keys(e).forEach(i=>{r[i]=e[i].reduce((o,s)=>{if(s){const a=t(s);a!==""&&o.push(a),n&&n[s]&&o.push(n[s])}return o},[]).join(" ")}),r}const CF=e=>e,Upe=()=>{let e=CF;return{configure(t){e=t},generate(t){return e(t)},reset(){e=CF}}},F5=Upe(),Vpe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function tt(e,t,n="Mui"){const r=Vpe[t];return r?`${n}-${r}`:`${F5.generate(e)}-${t}`}function nt(e,t,n="Mui"){const r={};return t.forEach(i=>{r[i]=tt(e,i,n)}),r}const Hpe=["values","unit","step"],Gpe=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>M({},n,{[r.key]:r.val}),{})};function sX(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,i=He(e,Hpe),o=Gpe(t),s=Object.keys(o);function a(f){return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${n})`}function l(f){return`@media (max-width:${(typeof t[f]=="number"?t[f]:f)-r/100}${n})`}function c(f,h){const p=s.indexOf(h);return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${n}) and (max-width:${(p!==-1&&typeof t[s[p]]=="number"?t[s[p]]:h)-r/100}${n})`}function u(f){return s.indexOf(f)+1<s.length?c(f,s[s.indexOf(f)+1]):a(f)}function d(f){const h=s.indexOf(f);return h===0?a(s[1]):h===s.length-1?l(s[h]):c(f,s[s.indexOf(f)+1]).replace("@media","@media not all and")}return M({keys:s,values:o,up:a,down:l,between:c,only:u,not:d,unit:n},i)}const Wpe={borderRadius:4},qpe=Wpe;function oy(e,t){return t?Tr(e,t,{clone:!1}):e}const z5={xs:0,sm:600,md:900,lg:1200,xl:1536},AF={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${z5[e]}px)`};function Oo(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const o=r.breakpoints||AF;return t.reduce((s,a,l)=>(s[o.up(o.keys[l])]=n(t[l]),s),{})}if(typeof t=="object"){const o=r.breakpoints||AF;return Object.keys(t).reduce((s,a)=>{if(Object.keys(o.values||z5).indexOf(a)!==-1){const l=o.up(a);s[l]=n(t[a],a)}else{const l=a;s[l]=t[l]}return s},{})}return n(t)}function aX(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,i)=>{const o=e.up(i);return r[o]={},r},{}))||{}}function lX(e,t){return e.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},t)}function Ype(e,...t){const n=aX(e),r=[n,...t].reduce((i,o)=>Tr(i,o),{});return lX(Object.keys(n),r)}function Xpe(e,t){if(typeof e!="object")return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((i,o)=>{o<e.length&&(n[i]=!0)}):r.forEach(i=>{e[i]!=null&&(n[i]=!0)}),n}function Sf({values:e,breakpoints:t,base:n}){const r=n||Xpe(e,t),i=Object.keys(r);if(i.length===0)return e;let o;return i.reduce((s,a,l)=>(Array.isArray(e)?(s[a]=e[l]!=null?e[l]:e[o],o=l):typeof e=="object"?(s[a]=e[a]!=null?e[a]:e[o],o=a):s[a]=e,s),{})}function Hm(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(r!=null)return r}return t.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,e)}function m2(e,t,n,r=n){let i;return typeof e=="function"?i=e(n):Array.isArray(e)?i=e[n]||r:i=Hm(e,n)||r,t&&(i=t(i,r,e)),i}function Dr(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=s=>{if(s[t]==null)return null;const a=s[t],l=s.theme,c=Hm(l,r)||{};return Oo(s,a,d=>{let f=m2(c,i,d);return d===f&&typeof d=="string"&&(f=m2(c,i,`${t}${d==="default"?"":Le(d)}`,d)),n===!1?f:{[n]:f}})};return o.propTypes={},o.filterProps=[t],o}function Kpe(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const Zpe={m:"margin",p:"padding"},Jpe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},PF={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Qpe=Kpe(e=>{if(e.length>2)if(PF[e])e=PF[e];else return[e];const[t,n]=e.split(""),r=Zpe[t],i=Jpe[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),j5=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],U5=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...j5,...U5];function f1(e,t,n,r){var i;const o=(i=Hm(e,t,!1))!=null?i:n;return typeof o=="number"?s=>typeof s=="string"?s:o*s:Array.isArray(o)?s=>typeof s=="string"?s:o[s]:typeof o=="function"?o:()=>{}}function V5(e){return f1(e,"spacing",8)}function Hf(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),r=e(n);return t>=0?r:typeof r=="number"?-r:`-${r}`}function eme(e,t){return n=>e.reduce((r,i)=>(r[i]=Hf(t,n),r),{})}function tme(e,t,n,r){if(t.indexOf(n)===-1)return null;const i=Qpe(n),o=eme(i,r),s=e[n];return Oo(e,s,o)}function cX(e,t){const n=V5(e.theme);return Object.keys(e).map(r=>tme(e,t,r,n)).reduce(oy,{})}function Pr(e){return cX(e,j5)}Pr.propTypes={};Pr.filterProps=j5;function Mr(e){return cX(e,U5)}Mr.propTypes={};Mr.filterProps=U5;function uX(e=8){if(e.mui)return e;const t=V5({spacing:e}),n=(...r)=>(r.length===0?[1]:r).map(o=>{const s=t(o);return typeof s=="number"?`${s}px`:s}).join(" ");return n.mui=!0,n}function DA(...e){const t=e.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>t[o]?oy(i,t[o](r)):i,{});return n.propTypes={},n.filterProps=e.reduce((r,i)=>r.concat(i.filterProps),[]),n}function _s(e){return typeof e!="number"?e:`${e}px solid`}function Us(e,t){return Dr({prop:e,themeKey:"borders",transform:t})}const nme=Us("border",_s),rme=Us("borderTop",_s),ime=Us("borderRight",_s),ome=Us("borderBottom",_s),sme=Us("borderLeft",_s),ame=Us("borderColor"),lme=Us("borderTopColor"),cme=Us("borderRightColor"),ume=Us("borderBottomColor"),dme=Us("borderLeftColor"),fme=Us("outline",_s),hme=Us("outlineColor"),BA=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=f1(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:Hf(t,r)});return Oo(e,e.borderRadius,n)}return null};BA.propTypes={};BA.filterProps=["borderRadius"];DA(nme,rme,ime,ome,sme,ame,lme,cme,ume,dme,BA,fme,hme);const NA=e=>{if(e.gap!==void 0&&e.gap!==null){const t=f1(e.theme,"spacing",8),n=r=>({gap:Hf(t,r)});return Oo(e,e.gap,n)}return null};NA.propTypes={};NA.filterProps=["gap"];const FA=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=f1(e.theme,"spacing",8),n=r=>({columnGap:Hf(t,r)});return Oo(e,e.columnGap,n)}return null};FA.propTypes={};FA.filterProps=["columnGap"];const zA=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=f1(e.theme,"spacing",8),n=r=>({rowGap:Hf(t,r)});return Oo(e,e.rowGap,n)}return null};zA.propTypes={};zA.filterProps=["rowGap"];const pme=Dr({prop:"gridColumn"}),mme=Dr({prop:"gridRow"}),gme=Dr({prop:"gridAutoFlow"}),vme=Dr({prop:"gridAutoColumns"}),yme=Dr({prop:"gridAutoRows"}),bme=Dr({prop:"gridTemplateColumns"}),xme=Dr({prop:"gridTemplateRows"}),_me=Dr({prop:"gridTemplateAreas"}),wme=Dr({prop:"gridArea"});DA(NA,FA,zA,pme,mme,gme,vme,yme,bme,xme,_me,wme);function um(e,t){return t==="grey"?t:e}const Sme=Dr({prop:"color",themeKey:"palette",transform:um}),Cme=Dr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:um}),Ame=Dr({prop:"backgroundColor",themeKey:"palette",transform:um});DA(Sme,Cme,Ame);function Go(e){return e<=1&&e!==0?`${e*100}%`:e}const Pme=Dr({prop:"width",transform:Go}),H5=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var r,i;const o=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||z5[n];return o?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${o}${e.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:Go(n)}};return Oo(e,e.maxWidth,t)}return null};H5.filterProps=["maxWidth"];const Mme=Dr({prop:"minWidth",transform:Go}),Eme=Dr({prop:"height",transform:Go}),Tme=Dr({prop:"maxHeight",transform:Go}),Ome=Dr({prop:"minHeight",transform:Go});Dr({prop:"size",cssProperty:"width",transform:Go});Dr({prop:"size",cssProperty:"height",transform:Go});const Ime=Dr({prop:"boxSizing"});DA(Pme,H5,Mme,Eme,Tme,Ome,Ime);const Rme={border:{themeKey:"borders",transform:_s},borderTop:{themeKey:"borders",transform:_s},borderRight:{themeKey:"borders",transform:_s},borderBottom:{themeKey:"borders",transform:_s},borderLeft:{themeKey:"borders",transform:_s},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:_s},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:BA},color:{themeKey:"palette",transform:um},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:um},backgroundColor:{themeKey:"palette",transform:um},p:{style:Mr},pt:{style:Mr},pr:{style:Mr},pb:{style:Mr},pl:{style:Mr},px:{style:Mr},py:{style:Mr},padding:{style:Mr},paddingTop:{style:Mr},paddingRight:{style:Mr},paddingBottom:{style:Mr},paddingLeft:{style:Mr},paddingX:{style:Mr},paddingY:{style:Mr},paddingInline:{style:Mr},paddingInlineStart:{style:Mr},paddingInlineEnd:{style:Mr},paddingBlock:{style:Mr},paddingBlockStart:{style:Mr},paddingBlockEnd:{style:Mr},m:{style:Pr},mt:{style:Pr},mr:{style:Pr},mb:{style:Pr},ml:{style:Pr},mx:{style:Pr},my:{style:Pr},margin:{style:Pr},marginTop:{style:Pr},marginRight:{style:Pr},marginBottom:{style:Pr},marginLeft:{style:Pr},marginX:{style:Pr},marginY:{style:Pr},marginInline:{style:Pr},marginInlineStart:{style:Pr},marginInlineEnd:{style:Pr},marginBlock:{style:Pr},marginBlockStart:{style:Pr},marginBlockEnd:{style:Pr},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:NA},rowGap:{style:zA},columnGap:{style:FA},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Go},maxWidth:{style:H5},minWidth:{transform:Go},height:{transform:Go},maxHeight:{transform:Go},minHeight:{transform:Go},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},h1=Rme;function kme(...e){const t=e.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function Lme(e,t){return typeof e=="function"?e(t):e}function $me(){function e(n,r,i,o){const s={[n]:r,theme:i},a=o[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const f=Hm(i,c)||{};return d?d(s):Oo(s,r,p=>{let g=m2(f,u,p);return p===g&&typeof p=="string"&&(g=m2(f,u,`${n}${p==="default"?"":Le(p)}`,p)),l===!1?g:{[l]:g}})}function t(n){var r;const{sx:i,theme:o={}}=n||{};if(!i)return null;const s=(r=o.unstable_sxConfig)!=null?r:h1;function a(l){let c=l;if(typeof l=="function")c=l(o);else if(typeof l!="object")return l;if(!c)return null;const u=aX(o.breakpoints),d=Object.keys(u);let f=u;return Object.keys(c).forEach(h=>{const p=Lme(c[h],o);if(p!=null)if(typeof p=="object")if(s[h])f=oy(f,e(h,p,o,s));else{const g=Oo({theme:o},p,v=>({[h]:v}));kme(g,p)?f[h]=t({sx:p,theme:o}):f=oy(f,g)}else f=oy(f,e(h,p,o,s))}),lX(d,f)}return Array.isArray(i)?i.map(a):a(i)}return t}const wh=$me();wh.filterProps=["sx"];const Dme=["breakpoints","palette","spacing","shape"];function Wg(e={},...t){const{breakpoints:n={},palette:r={},spacing:i,shape:o={}}=e,s=He(e,Dme),a=sX(n),l=uX(i);let c=Tr({breakpoints:a,direction:"ltr",components:{},palette:M({mode:"light"},r),spacing:l,shape:M({},qpe,o)},s);return c=t.reduce((u,d)=>Tr(u,d),c),c.unstable_sxConfig=M({},h1,s==null?void 0:s.unstable_sxConfig),c.unstable_sx=function(d){return wh({sx:d,theme:this})},c}function Bme(e){return Object.keys(e).length===0}function jA(e=null){const t=I.useContext(CA);return!t||Bme(t)?e:t}const Nme=Wg();function p1(e=Nme){return jA(e)}function Fme({styles:e,themeId:t,defaultTheme:n={}}){const r=p1(n),i=typeof e=="function"?e(t&&r[t]||r):e;return q.jsx(tS,{styles:i})}const zme=["sx"],jme=e=>{var t,n;const r={systemProps:{},otherProps:{}},i=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:h1;return Object.keys(e).forEach(o=>{i[o]?r.systemProps[o]=e[o]:r.otherProps[o]=e[o]}),r};function m1(e){const{sx:t}=e,n=He(e,zme),{systemProps:r,otherProps:i}=jme(n);let o;return Array.isArray(t)?o=[r,...t]:typeof t=="function"?o=(...s)=>{const a=t(...s);return Yl(a)?M({},r,a):r}:o=M({},r,t),M({},i,{sx:o})}function dX(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=dX(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function je(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=dX(e))&&(r&&(r+=" "),r+=t);return r}const Ume=["className","component"];function Vme(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=e,o=ZY("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(wh);return I.forwardRef(function(l,c){const u=p1(n),d=m1(l),{className:f,component:h="div"}=d,p=He(d,Ume);return q.jsx(o,M({as:h,ref:c,className:je(f,i?i(r):r),theme:t&&u[t]||u},p))})}const Hme=["variant"];function MF(e){return e.length===0}function fX(e){const{variant:t}=e,n=He(e,Hme);let r=t||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=MF(r)?e[i]:Le(e[i]):r+=`${MF(r)?i:Le(i)}${Le(e[i].toString())}`}),r}const Gme=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Wme(e){return Object.keys(e).length===0}function qme(e){return typeof e=="string"&&e.charCodeAt(0)>96}const Yme=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,g2=e=>{let t=0;const n={};return e&&e.forEach(r=>{let i="";typeof r.props=="function"?(i=`callback${t}`,t+=1):i=fX(r.props),n[i]=r.style}),n},Xme=(e,t)=>{let n=[];return t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants),g2(n)},v2=(e,t,n)=>{const{ownerState:r={}}=e,i=[];let o=0;return n&&n.forEach(s=>{let a=!0;if(typeof s.props=="function"){const l=M({},e,r);a=s.props(l)}else Object.keys(s.props).forEach(l=>{r[l]!==s.props[l]&&e[l]!==s.props[l]&&(a=!1)});a&&(typeof s.props=="function"?i.push(t[`callback${o}`]):i.push(t[fX(s.props)])),typeof s.props=="function"&&(o+=1)}),i},Kme=(e,t,n,r)=>{var i;const o=n==null||(i=n.components)==null||(i=i[r])==null?void 0:i.variants;return v2(e,t,o)};function sy(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Zme=Wg(),Jme=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function nS({defaultTheme:e,theme:t,themeId:n}){return Wme(t)?e:t[n]||t}function Qme(e){return e?(t,n)=>n[e]:null}const EF=({styledArg:e,props:t,defaultTheme:n,themeId:r})=>{const i=e(M({},t,{theme:nS(M({},t,{defaultTheme:n,themeId:r}))}));let o;if(i&&i.variants&&(o=i.variants,delete i.variants),o){const s=v2(t,g2(o),o);return[i,...s]}return i};function hX(e={}){const{themeId:t,defaultTheme:n=Zme,rootShouldForwardProp:r=sy,slotShouldForwardProp:i=sy}=e,o=s=>wh(M({},s,{theme:nS(M({},s,{defaultTheme:n,themeId:t}))}));return o.__mui_systemSx=!0,(s,a={})=>{Epe(s,_=>_.filter(x=>!(x!=null&&x.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:f=Qme(Jme(c))}=a,h=He(a,Gme),p=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,g=d||!1;let v,m=sy;c==="Root"||c==="root"?m=r:c?m=i:qme(s)&&(m=void 0);const y=ZY(s,M({shouldForwardProp:m,label:v},h)),b=(_,...x)=>{const w=x?x.map(T=>{if(typeof T=="function"&&T.__emotion_real!==T)return O=>EF({styledArg:T,props:O,defaultTheme:n,themeId:t});if(Yl(T)){let O=T,R;return T&&T.variants&&(R=T.variants,delete O.variants,O=L=>{let D=T;return v2(L,g2(R),R).forEach(z=>{D=Tr(D,z)}),D}),O}return T}):[];let S=_;if(Yl(_)){let T;_&&_.variants&&(T=_.variants,delete S.variants,S=O=>{let R=_;return v2(O,g2(T),T).forEach(D=>{R=Tr(R,D)}),R})}else typeof _=="function"&&_.__emotion_real!==_&&(S=T=>EF({styledArg:_,props:T,defaultTheme:n,themeId:t}));l&&f&&w.push(T=>{const O=nS(M({},T,{defaultTheme:n,themeId:t})),R=Yme(l,O);if(R){const L={};return Object.entries(R).forEach(([D,$])=>{L[D]=typeof $=="function"?$(M({},T,{theme:O})):$}),f(T,L)}return null}),l&&!p&&w.push(T=>{const O=nS(M({},T,{defaultTheme:n,themeId:t}));return Kme(T,Xme(l,O),O,l)}),g||w.push(o);const C=w.length-x.length;if(Array.isArray(_)&&C>0){const T=new Array(C).fill("");S=[..._,...T],S.raw=[..._.raw,...T]}const A=y(S,...w);return s.muiName&&(A.muiName=s.muiName),A};return y.withConfig&&(b.withConfig=y.withConfig),b}}const G5=hX();function W5(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:N5(t.components[n].defaultProps,r)}function g1({props:e,name:t,defaultTheme:n,themeId:r}){let i=p1(n);return r&&(i=i[r]||i),W5({theme:i,name:t,props:e})}function q5(e,t=0,n=1){return Math.min(Math.max(t,e),n)}function Y5(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function ege(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function ga(e){if(e.type)return e;if(e.charAt(0)==="#")return ga(Y5(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(Eo(9,e));let r=e.substring(t+1,e.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(Eo(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const tge=e=>{const t=ga(e);return t.values.slice(0,3).map((n,r)=>t.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")},S0=(e,t)=>{try{return tge(e)}catch{return e}};function qg(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((i,o)=>o<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function pX(e){if(e.indexOf("#")===0)return e;const{values:t}=ga(e);return`#${t.map((n,r)=>ege(r===3?Math.round(255*n):n)).join("")}`}function UA(e){e=ga(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=(c,u=(c+n/30)%12)=>i-o*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return e.type==="hsla"&&(a+="a",l.push(t[3])),qg({type:a,values:l})}function Jy(e){e=ga(e);let t=e.type==="hsl"||e.type==="hsla"?ga(UA(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function X5(e,t){const n=Jy(e),r=Jy(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Et(e,t){return e=ga(e),t=q5(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,qg(e)}function i_(e,t,n){try{return Et(e,t)}catch{return e}}function va(e,t){if(e=ga(e),t=q5(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return qg(e)}function Vn(e,t,n){try{return va(e,t)}catch{return e}}function ya(e,t){if(e=ga(e),t=q5(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return qg(e)}function Hn(e,t,n){try{return ya(e,t)}catch{return e}}function Gm(e,t=.15){return Jy(e)>.5?va(e,t):ya(e,t)}function C0(e,t,n){try{return C0(e,t)}catch{return e}}const nge=I.createContext(null),mX=nge;function K5(){return I.useContext(mX)}const rge=typeof Symbol=="function"&&Symbol.for,ige=rge?Symbol.for("mui.nested"):"__THEME_NESTED__";function oge(e,t){return typeof t=="function"?t(e):M({},e,t)}function sge(e){const{children:t,theme:n}=e,r=K5(),i=I.useMemo(()=>{const o=r===null?n:oge(r,n);return o!=null&&(o[ige]=r!==null),o},[n,r]);return q.jsx(mX.Provider,{value:i,children:t})}const TF={};function OF(e,t,n,r=!1){return I.useMemo(()=>{const i=e&&t[e]||t;if(typeof n=="function"){const o=n(i),s=e?M({},t,{[e]:o}):o;return r?()=>s:s}return e?M({},t,{[e]:n}):M({},t,n)},[e,t,n,r])}function gX(e){const{children:t,theme:n,themeId:r}=e,i=jA(TF),o=K5()||TF,s=OF(r,i,n),a=OF(r,o,n,!0);return q.jsx(sge,{theme:a,children:q.jsx(CA.Provider,{value:s,children:t})})}const Z5="mode",J5="color-scheme",vX="data-color-scheme";function age(e){const{defaultMode:t="light",defaultLightColorScheme:n="light",defaultDarkColorScheme:r="dark",modeStorageKey:i=Z5,colorSchemeStorageKey:o=J5,attribute:s=vX,colorSchemeNode:a="document.documentElement"}=e||{};return q.jsx("script",{dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${i}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${o}-dark') || '${r}';
    } else {
      colorScheme = localStorage.getItem('${o}-light') || '${n}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${o}-light') || '${n}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${o}-dark') || '${r}';
  }
  if (colorScheme) {
    ${a}.setAttribute('${s}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function IF(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function yX(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function lge(e){return yX(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function LT(e,t){if(typeof window>"u")return;let n;try{n=localStorage.getItem(e)||void 0,n||localStorage.setItem(e,t)}catch{}return n||t}function cge(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:r,supportedColorSchemes:i=[],modeStorageKey:o=Z5,colorSchemeStorageKey:s=J5,storageWindow:a=typeof window>"u"?void 0:window}=e,l=i.join(","),[c,u]=I.useState(()=>{const v=LT(o,t),m=LT(`${s}-light`,n),y=LT(`${s}-dark`,r);return{mode:v,systemMode:IF(v),lightColorScheme:m,darkColorScheme:y}}),d=lge(c),f=I.useCallback(v=>{u(m=>{if(v===m.mode)return m;const y=v||t;try{localStorage.setItem(o,y)}catch{}return M({},m,{mode:y,systemMode:IF(y)})})},[o,t]),h=I.useCallback(v=>{v?typeof v=="string"?v&&!l.includes(v)?console.error(`\`${v}\` does not exist in \`theme.colorSchemes\`.`):u(m=>{const y=M({},m);return yX(m,b=>{try{localStorage.setItem(`${s}-${b}`,v)}catch{}b==="light"&&(y.lightColorScheme=v),b==="dark"&&(y.darkColorScheme=v)}),y}):u(m=>{const y=M({},m),b=v.light===null?n:v.light,_=v.dark===null?r:v.dark;if(b)if(!l.includes(b))console.error(`\`${b}\` does not exist in \`theme.colorSchemes\`.`);else{y.lightColorScheme=b;try{localStorage.setItem(`${s}-light`,b)}catch{}}if(_)if(!l.includes(_))console.error(`\`${_}\` does not exist in \`theme.colorSchemes\`.`);else{y.darkColorScheme=_;try{localStorage.setItem(`${s}-dark`,_)}catch{}}return y}):u(m=>{try{localStorage.setItem(`${s}-light`,n),localStorage.setItem(`${s}-dark`,r)}catch{}return M({},m,{lightColorScheme:n,darkColorScheme:r})})},[l,s,n,r]),p=I.useCallback(v=>{c.mode==="system"&&u(m=>M({},m,{systemMode:v!=null&&v.matches?"dark":"light"}))},[c.mode]),g=I.useRef(p);return g.current=p,I.useEffect(()=>{const v=(...y)=>g.current(...y),m=window.matchMedia("(prefers-color-scheme: dark)");return m.addListener(v),v(m),()=>m.removeListener(v)},[]),I.useEffect(()=>{const v=m=>{const y=m.newValue;typeof m.key=="string"&&m.key.startsWith(s)&&(!y||l.match(y))&&(m.key.endsWith("light")&&h({light:y}),m.key.endsWith("dark")&&h({dark:y})),m.key===o&&(!y||["light","dark","system"].includes(y))&&f(y||t)};if(a)return a.addEventListener("storage",v),()=>a.removeEventListener("storage",v)},[h,f,o,s,l,t,a]),M({},c,{colorScheme:d,setMode:f,setColorScheme:h})}const uge=["colorSchemes","components","generateCssVars","cssVarPrefix"],dge="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function fge(e){const{themeId:t,theme:n={},attribute:r=vX,modeStorageKey:i=Z5,colorSchemeStorageKey:o=J5,defaultMode:s="light",defaultColorScheme:a,disableTransitionOnChange:l=!1,resolveTheme:c,excludeVariablesFromRoot:u}=e;(!n.colorSchemes||typeof a=="string"&&!n.colorSchemes[a]||typeof a=="object"&&!n.colorSchemes[a==null?void 0:a.light]||typeof a=="object"&&!n.colorSchemes[a==null?void 0:a.dark])&&console.error(`MUI: \`${a}\` does not exist in \`theme.colorSchemes\`.`);const d=I.createContext(void 0),f=()=>{const m=I.useContext(d);if(!m)throw new Error(Eo(19));return m};function h({children:m,theme:y=n,modeStorageKey:b=i,colorSchemeStorageKey:_=o,attribute:x=r,defaultMode:w=s,defaultColorScheme:S=a,disableTransitionOnChange:C=l,storageWindow:A=typeof window>"u"?void 0:window,documentNode:T=typeof document>"u"?void 0:document,colorSchemeNode:O=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:R=":root",disableNestedContext:L=!1,disableStyleSheetGeneration:D=!1}){const $=I.useRef(!1),z=K5(),H=I.useContext(d),B=!!H&&!L,V=y[t],J=V||y,{colorSchemes:K={},components:ie={},generateCssVars:ce=()=>({vars:{},css:{}}),cssVarPrefix:pe}=J,se=He(J,uge),G=Object.keys(K),he=typeof S=="string"?S:S.light,Z=typeof S=="string"?S:S.dark,{mode:ae,setMode:oe,systemMode:te,lightColorScheme:ve,darkColorScheme:ne,colorScheme:xe,setColorScheme:Ce}=cge({supportedColorSchemes:G,defaultLightColorScheme:he,defaultDarkColorScheme:Z,modeStorageKey:b,colorSchemeStorageKey:_,defaultMode:w,storageWindow:A});let me=ae,X=xe;B&&(me=H.mode,X=H.colorScheme);const Q=me||(w==="system"?s:w),Re=X||(Q==="dark"?Z:he),{css:Pe,vars:le}=ce(),Oe=M({},se,{components:ie,colorSchemes:K,cssVarPrefix:pe,vars:le,getColorSchemeSelector:E=>`[${x}="${E}"] &`}),Be={},De={};Object.entries(K).forEach(([E,P])=>{const{css:ee,vars:ye}=ce(E);Oe.vars=Tr(Oe.vars,ye),E===Re&&(Object.keys(P).forEach(Me=>{P[Me]&&typeof P[Me]=="object"?Oe[Me]=M({},Oe[Me],P[Me]):Oe[Me]=P[Me]}),Oe.palette&&(Oe.palette.colorScheme=E));const be=typeof S=="string"?S:w==="dark"?S.dark:S.light;if(E===be){if(u){const Me={};u(pe).forEach(ze=>{Me[ze]=ee[ze],delete ee[ze]}),Be[`[${x}="${E}"]`]=Me}Be[`${R}, [${x}="${E}"]`]=ee}else De[`${R===":root"?"":R}[${x}="${E}"]`]=ee}),Oe.vars=Tr(Oe.vars,le),I.useEffect(()=>{X&&O&&O.setAttribute(x,X)},[X,x,O]),I.useEffect(()=>{let E;if(C&&$.current&&T){const P=T.createElement("style");P.appendChild(T.createTextNode(dge)),T.head.appendChild(P),window.getComputedStyle(T.body),E=setTimeout(()=>{T.head.removeChild(P)},1)}return()=>{clearTimeout(E)}},[X,C,T]),I.useEffect(()=>($.current=!0,()=>{$.current=!1}),[]);const Ee=I.useMemo(()=>({mode:me,systemMode:te,setMode:oe,lightColorScheme:ve,darkColorScheme:ne,colorScheme:X,setColorScheme:Ce,allColorSchemes:G}),[G,X,ne,ve,me,Ce,oe,te]);let Ie=!0;(D||B&&(z==null?void 0:z.cssVarPrefix)===pe)&&(Ie=!1);const U=q.jsxs(I.Fragment,{children:[Ie&&q.jsxs(I.Fragment,{children:[q.jsx(tS,{styles:{[R]:Pe}}),q.jsx(tS,{styles:Be}),q.jsx(tS,{styles:De})]}),q.jsx(gX,{themeId:V?t:void 0,theme:c?c(Oe):Oe,children:m})]});return B?U:q.jsx(d.Provider,{value:Ee,children:U})}const p=typeof a=="string"?a:a.light,g=typeof a=="string"?a:a.dark;return{CssVarsProvider:h,useColorScheme:f,getInitColorSchemeScript:m=>age(M({attribute:r,colorSchemeStorageKey:o,defaultMode:s,defaultLightColorScheme:p,defaultDarkColorScheme:g,modeStorageKey:i},m))}}function hge(e=""){function t(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${e?`${e}-`:""}${r}${t(...i)})`}const RF=(e,t,n,r=[])=>{let i=e;t.forEach((o,s)=>{s===t.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},pge=(e,t,n)=>{function r(i,o=[],s=[]){Object.entries(i).forEach(([a,l])=>{(!n||n&&!n([...o,a]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?r(l,[...o,a],Array.isArray(l)?[...s,a]:s):t([...o,a],l,s))})}r(e)},mge=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function $T(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},s={};return pge(e,(a,l,c)=>{if((typeof l=="string"||typeof l=="number")&&(!r||!r(a,l))){const u=`--${n?`${n}-`:""}${a.join("-")}`;Object.assign(i,{[u]:mge(a,l)}),RF(o,a,`var(${u})`,c),RF(s,a,`var(${u}, ${l})`,c)}},a=>a[0]==="vars"),{css:i,vars:o,varsWithDefaults:s}}const gge=["colorSchemes","components"],vge=["light"];function yge(e,t){const{colorSchemes:n={}}=e,r=He(e,gge),{vars:i,css:o,varsWithDefaults:s}=$T(r,t);let a=s;const l={},{light:c}=n,u=He(n,vge);if(Object.entries(u||{}).forEach(([f,h])=>{const{vars:p,css:g,varsWithDefaults:v}=$T(h,t);a=Tr(a,v),l[f]={css:g,vars:p}}),c){const{css:f,vars:h,varsWithDefaults:p}=$T(c,t);a=Tr(a,p),l.light={css:f,vars:h}}return{vars:a,generateCssVars:f=>f?{css:M({},l[f].css),vars:l[f].vars}:{css:M({},o),vars:i}}}const bge=["className","component","disableGutters","fixed","maxWidth","classes"],xge=Wg(),_ge=G5("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Le(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),wge=e=>g1({props:e,name:"MuiContainer",defaultTheme:xge}),Sge=(e,t)=>{const n=l=>tt(t,l),{classes:r,fixed:i,disableGutters:o,maxWidth:s}=e,a={root:["root",s&&`maxWidth${Le(String(s))}`,i&&"fixed",o&&"disableGutters"]};return it(a,n,r)};function Cge(e={}){const{createStyledComponent:t=_ge,useThemeProps:n=wge,componentName:r="MuiContainer"}=e,i=t(({theme:s,ownerState:a})=>M({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!a.disableGutters&&{paddingLeft:s.spacing(2),paddingRight:s.spacing(2),[s.breakpoints.up("sm")]:{paddingLeft:s.spacing(3),paddingRight:s.spacing(3)}}),({theme:s,ownerState:a})=>a.fixed&&Object.keys(s.breakpoints.values).reduce((l,c)=>{const u=c,d=s.breakpoints.values[u];return d!==0&&(l[s.breakpoints.up(u)]={maxWidth:`${d}${s.breakpoints.unit}`}),l},{}),({theme:s,ownerState:a})=>M({},a.maxWidth==="xs"&&{[s.breakpoints.up("xs")]:{maxWidth:Math.max(s.breakpoints.values.xs,444)}},a.maxWidth&&a.maxWidth!=="xs"&&{[s.breakpoints.up(a.maxWidth)]:{maxWidth:`${s.breakpoints.values[a.maxWidth]}${s.breakpoints.unit}`}}));return I.forwardRef(function(a,l){const c=n(a),{className:u,component:d="div",disableGutters:f=!1,fixed:h=!1,maxWidth:p="lg"}=c,g=He(c,bge),v=M({},c,{component:d,disableGutters:f,fixed:h,maxWidth:p}),m=Sge(v,r);return q.jsx(i,M({as:d,ownerState:v,className:je(m.root,u),ref:l},g))})}const Age=(e,t)=>e.filter(n=>t.includes(n)),Yg=(e,t,n)=>{const r=e.keys[0];Array.isArray(t)?t.forEach((i,o)=>{n((s,a)=>{o<=e.keys.length-1&&(o===0?Object.assign(s,a):s[e.up(e.keys[o])]=a)},i)}):t&&typeof t=="object"?(Object.keys(t).length>e.keys.length?e.keys:Age(e.keys,Object.keys(t))).forEach(o=>{if(e.keys.indexOf(o)!==-1){const s=t[o];s!==void 0&&n((a,l)=>{r===o?Object.assign(a,l):a[e.up(o)]=l},s)}}):(typeof t=="number"||typeof t=="string")&&n((i,o)=>{Object.assign(i,o)},t)};function pc(e){return e?`Level${e}`:""}function v1(e){return e.unstable_level>0&&e.container}function bX(e){return function(n){return`var(--Grid-${n}Spacing${pc(e.unstable_level)})`}}function Q5(e){return function(n){return e.unstable_level===0?`var(--Grid-${n}Spacing)`:`var(--Grid-${n}Spacing${pc(e.unstable_level-1)})`}}function e4(e){return e.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${pc(e.unstable_level-1)})`}const Pge=({theme:e,ownerState:t})=>{const n=bX(t),r={};return Yg(e.breakpoints,t.gridSize,(i,o)=>{let s={};o===!0&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),o==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof o=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${o} / ${e4(t)}${v1(t)?` + ${n("column")}`:""})`}),i(r,s)}),r},Mge=({theme:e,ownerState:t})=>{const n={};return Yg(e.breakpoints,t.gridOffset,(r,i)=>{let o={};i==="auto"&&(o={marginLeft:"auto"}),typeof i=="number"&&(o={marginLeft:i===0?"0px":`calc(100% * ${i} / ${e4(t)})`}),r(n,o)}),n},Ege=({theme:e,ownerState:t})=>{if(!t.container)return{};const n=v1(t)?{[`--Grid-columns${pc(t.unstable_level)}`]:e4(t)}:{"--Grid-columns":12};return Yg(e.breakpoints,t.columns,(r,i)=>{r(n,{[`--Grid-columns${pc(t.unstable_level)}`]:i})}),n},Tge=({theme:e,ownerState:t})=>{if(!t.container)return{};const n=Q5(t),r=v1(t)?{[`--Grid-rowSpacing${pc(t.unstable_level)}`]:n("row")}:{};return Yg(e.breakpoints,t.rowSpacing,(i,o)=>{var s;i(r,{[`--Grid-rowSpacing${pc(t.unstable_level)}`]:typeof o=="string"?o:(s=e.spacing)==null?void 0:s.call(e,o)})}),r},Oge=({theme:e,ownerState:t})=>{if(!t.container)return{};const n=Q5(t),r=v1(t)?{[`--Grid-columnSpacing${pc(t.unstable_level)}`]:n("column")}:{};return Yg(e.breakpoints,t.columnSpacing,(i,o)=>{var s;i(r,{[`--Grid-columnSpacing${pc(t.unstable_level)}`]:typeof o=="string"?o:(s=e.spacing)==null?void 0:s.call(e,o)})}),r},Ige=({theme:e,ownerState:t})=>{if(!t.container)return{};const n={};return Yg(e.breakpoints,t.direction,(r,i)=>{r(n,{flexDirection:i})}),n},Rge=({ownerState:e})=>{const t=bX(e),n=Q5(e);return M({minWidth:0,boxSizing:"border-box"},e.container&&M({display:"flex",flexWrap:"wrap"},e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},{margin:`calc(${t("row")} / -2) calc(${t("column")} / -2)`},e.disableEqualOverflow&&{margin:`calc(${t("row")} * -1) 0px 0px calc(${t("column")} * -1)`}),(!e.container||v1(e))&&M({padding:`calc(${n("row")} / 2) calc(${n("column")} / 2)`},(e.disableEqualOverflow||e.parentDisableEqualOverflow)&&{padding:`${n("row")} 0px 0px ${n("column")}`}))},kge=e=>{const t=[];return Object.entries(e).forEach(([n,r])=>{r!==!1&&r!==void 0&&t.push(`grid-${n}-${String(r)}`)}),t},Lge=(e,t="xs")=>{function n(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(n(e))return[`spacing-${t}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const r=[];return Object.entries(e).forEach(([i,o])=>{n(o)&&r.push(`spacing-${i}-${String(o)}`)}),r}return[]},$ge=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([t,n])=>`direction-${t}-${n}`):[`direction-xs-${String(e)}`],Dge=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],Bge=Wg(),Nge=G5("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>t.root});function Fge(e){return g1({props:e,name:"MuiGrid",defaultTheme:Bge})}function zge(e={}){const{createStyledComponent:t=Nge,useThemeProps:n=Fge,componentName:r="MuiGrid"}=e,i=I.createContext(void 0),o=(l,c)=>{const{container:u,direction:d,spacing:f,wrap:h,gridSize:p}=l,g={root:["root",u&&"container",h!=="wrap"&&`wrap-xs-${String(h)}`,...$ge(d),...kge(p),...u?Lge(f,c.breakpoints.keys[0]):[]]};return it(g,v=>tt(r,v),{})},s=t(Ege,Oge,Tge,Pge,Ige,Rge,Mge),a=I.forwardRef(function(c,u){var d,f,h,p,g,v,m,y;const b=p1(),_=n(c),x=m1(_),w=I.useContext(i),{className:S,children:C,columns:A=12,container:T=!1,component:O="div",direction:R="row",wrap:L="wrap",spacing:D=0,rowSpacing:$=D,columnSpacing:z=D,disableEqualOverflow:H,unstable_level:B=0}=x,V=He(x,Dge);let J=H;B&&H!==void 0&&(J=c.disableEqualOverflow);const K={},ie={},ce={};Object.entries(V).forEach(([te,ve])=>{b.breakpoints.values[te]!==void 0?K[te]=ve:b.breakpoints.values[te.replace("Offset","")]!==void 0?ie[te.replace("Offset","")]=ve:ce[te]=ve});const pe=(d=c.columns)!=null?d:B?void 0:A,se=(f=c.spacing)!=null?f:B?void 0:D,G=(h=(p=c.rowSpacing)!=null?p:c.spacing)!=null?h:B?void 0:$,he=(g=(v=c.columnSpacing)!=null?v:c.spacing)!=null?g:B?void 0:z,Z=M({},x,{level:B,columns:pe,container:T,direction:R,wrap:L,spacing:se,rowSpacing:G,columnSpacing:he,gridSize:K,gridOffset:ie,disableEqualOverflow:(m=(y=J)!=null?y:w)!=null?m:!1,parentDisableEqualOverflow:w}),ae=o(Z,b);let oe=q.jsx(s,M({ref:u,as:O,ownerState:Z,className:je(ae.root,S)},ce,{children:I.Children.map(C,te=>{if(I.isValidElement(te)&&sl(te,["Grid"])){var ve;return I.cloneElement(te,{unstable_level:(ve=te.props.unstable_level)!=null?ve:B+1})}return te})}));return J!==void 0&&J!==(w??!1)&&(oe=q.jsx(i.Provider,{value:J,children:oe})),oe});return a.muiName="Grid",a}const jge=["component","direction","spacing","divider","children","className","useFlexGap"],Uge=Wg(),Vge=G5("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function Hge(e){return g1({props:e,name:"MuiStack",defaultTheme:Uge})}function Gge(e,t){const n=I.Children.toArray(e).filter(Boolean);return n.reduce((r,i,o)=>(r.push(i),o<n.length-1&&r.push(I.cloneElement(t,{key:`separator-${o}`})),r),[])}const Wge=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],qge=({ownerState:e,theme:t})=>{let n=M({display:"flex",flexDirection:"column"},Oo({theme:t},Sf({values:e.direction,breakpoints:t.breakpoints.values}),r=>({flexDirection:r})));if(e.spacing){const r=V5(t),i=Object.keys(t.breakpoints.values).reduce((l,c)=>((typeof e.spacing=="object"&&e.spacing[c]!=null||typeof e.direction=="object"&&e.direction[c]!=null)&&(l[c]=!0),l),{}),o=Sf({values:e.direction,base:i}),s=Sf({values:e.spacing,base:i});typeof o=="object"&&Object.keys(o).forEach((l,c,u)=>{if(!o[l]){const f=c>0?o[u[c-1]]:"column";o[l]=f}}),n=Tr(n,Oo({theme:t},s,(l,c)=>e.useFlexGap?{gap:Hf(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${Wge(c?o[c]:e.direction)}`]:Hf(r,l)}}))}return n=Ype(t.breakpoints,n),n};function Yge(e={}){const{createStyledComponent:t=Vge,useThemeProps:n=Hge,componentName:r="MuiStack"}=e,i=()=>it({root:["root"]},l=>tt(r,l),{}),o=t(qge);return I.forwardRef(function(l,c){const u=n(l),d=m1(u),{component:f="div",direction:h="column",spacing:p=0,divider:g,children:v,className:m,useFlexGap:y=!1}=d,b=He(d,jge),_={direction:h,spacing:p,useFlexGap:y},x=i();return q.jsx(o,M({as:f,ownerState:_,ref:c,className:je(x.root,m)},b,{children:g?Gge(v,g):v}))})}const Xge=["defaultProps","mixins","overrides","palette","props","styleOverrides"],Kge=["type","mode"];function xX(e){const{defaultProps:t={},mixins:n={},overrides:r={},palette:i={},props:o={},styleOverrides:s={}}=e,a=He(e,Xge),l=M({},a,{components:{}});Object.keys(t).forEach(g=>{const v=l.components[g]||{};v.defaultProps=t[g],l.components[g]=v}),Object.keys(o).forEach(g=>{const v=l.components[g]||{};v.defaultProps=o[g],l.components[g]=v}),Object.keys(s).forEach(g=>{const v=l.components[g]||{};v.styleOverrides=s[g],l.components[g]=v}),Object.keys(r).forEach(g=>{const v=l.components[g]||{};v.styleOverrides=r[g],l.components[g]=v}),l.spacing=uX(e.spacing);const c=sX(e.breakpoints||{}),u=l.spacing;l.mixins=M({gutters:(g={})=>M({paddingLeft:u(2),paddingRight:u(2)},g,{[c.up("sm")]:M({paddingLeft:u(3),paddingRight:u(3)},g[c.up("sm")])})},n);const{type:d,mode:f}=i,h=He(i,Kge),p=f||d||"light";return l.palette=M({text:{hint:p==="dark"?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.38)"},mode:p,type:p},h),l}function t4(e,t){return M({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const Zge=["mode","contrastThreshold","tonalOffset"],kF={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:jm.white,default:jm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},DT={text:{primary:jm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:jm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function LF(e,t,n,r){const i=r.light||r,o=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=ya(e.main,i):t==="dark"&&(e.dark=va(e.main,o)))}function Jge(e="light"){return e==="dark"?{main:Kd[200],light:Kd[50],dark:Kd[400]}:{main:Kd[700],light:Kd[400],dark:Kd[800]}}function Qge(e="light"){return e==="dark"?{main:Xd[200],light:Xd[50],dark:Xd[400]}:{main:Xd[500],light:Xd[300],dark:Xd[700]}}function eve(e="light"){return e==="dark"?{main:Yd[500],light:Yd[300],dark:Yd[700]}:{main:Yd[700],light:Yd[400],dark:Yd[800]}}function tve(e="light"){return e==="dark"?{main:Zd[400],light:Zd[300],dark:Zd[700]}:{main:Zd[700],light:Zd[500],dark:Zd[900]}}function nve(e="light"){return e==="dark"?{main:Jd[400],light:Jd[300],dark:Jd[700]}:{main:Jd[800],light:Jd[500],dark:Jd[900]}}function rve(e="light"){return e==="dark"?{main:_p[400],light:_p[300],dark:_p[700]}:{main:"#ed6c02",light:_p[500],dark:_p[900]}}function ive(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,i=He(e,Zge),o=e.primary||Jge(t),s=e.secondary||Qge(t),a=e.error||eve(t),l=e.info||tve(t),c=e.success||nve(t),u=e.warning||rve(t);function d(g){return X5(g,DT.text.primary)>=n?DT.text.primary:kF.text.primary}const f=({color:g,name:v,mainShade:m=500,lightShade:y=300,darkShade:b=700})=>{if(g=M({},g),!g.main&&g[m]&&(g.main=g[m]),!g.hasOwnProperty("main"))throw new Error(Eo(11,v?` (${v})`:"",m));if(typeof g.main!="string")throw new Error(Eo(12,v?` (${v})`:"",JSON.stringify(g.main)));return LF(g,"light",y,r),LF(g,"dark",b,r),g.contrastText||(g.contrastText=d(g.main)),g},h={dark:DT,light:kF};return Tr(M({common:M({},jm),mode:t,primary:f({color:o,name:"primary"}),secondary:f({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:a,name:"error"}),warning:f({color:u,name:"warning"}),info:f({color:l,name:"info"}),success:f({color:c,name:"success"}),grey:AY,contrastThreshold:n,getContrastText:d,augmentColor:f,tonalOffset:r},h[t]),i)}const ove=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function sve(e){return Math.round(e*1e5)/1e5}const $F={textTransform:"uppercase"},DF='"Roboto", "Helvetica", "Arial", sans-serif';function VA(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:r=DF,fontSize:i=14,fontWeightLight:o=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,f=He(n,ove),h=i/14,p=d||(m=>`${m/c*h}rem`),g=(m,y,b,_,x)=>M({fontFamily:r,fontWeight:m,fontSize:p(y),lineHeight:b},r===DF?{letterSpacing:`${sve(_/y)}em`}:{},x,u),v={h1:g(o,96,1.167,-1.5),h2:g(o,60,1.2,-.5),h3:g(s,48,1.167,0),h4:g(s,34,1.235,.25),h5:g(s,24,1.334,0),h6:g(a,20,1.6,.15),subtitle1:g(s,16,1.75,.15),subtitle2:g(a,14,1.57,.1),body1:g(s,16,1.5,.15),body2:g(s,14,1.43,.15),button:g(a,14,1.75,.4,$F),caption:g(s,12,1.66,.4),overline:g(s,12,2.66,1,$F),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Tr(M({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:o,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:l},v),f,{clone:!1})}const ave=.2,lve=.14,cve=.12;function or(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${ave})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${lve})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${cve})`].join(",")}const uve=["none",or(0,2,1,-1,0,1,1,0,0,1,3,0),or(0,3,1,-2,0,2,2,0,0,1,5,0),or(0,3,3,-2,0,3,4,0,0,1,8,0),or(0,2,4,-1,0,4,5,0,0,1,10,0),or(0,3,5,-1,0,5,8,0,0,1,14,0),or(0,3,5,-1,0,6,10,0,0,1,18,0),or(0,4,5,-2,0,7,10,1,0,2,16,1),or(0,5,5,-3,0,8,10,1,0,3,14,2),or(0,5,6,-3,0,9,12,1,0,3,16,2),or(0,6,6,-3,0,10,14,1,0,4,18,3),or(0,6,7,-4,0,11,15,1,0,4,20,3),or(0,7,8,-4,0,12,17,2,0,5,22,4),or(0,7,8,-4,0,13,19,2,0,5,24,4),or(0,7,9,-4,0,14,21,2,0,5,26,4),or(0,8,9,-5,0,15,22,2,0,6,28,5),or(0,8,10,-5,0,16,24,2,0,6,30,5),or(0,8,11,-5,0,17,26,2,0,6,32,5),or(0,9,11,-5,0,18,28,2,0,7,34,6),or(0,9,12,-6,0,19,29,2,0,7,36,6),or(0,10,13,-6,0,20,31,3,0,8,38,7),or(0,10,13,-6,0,21,33,3,0,8,40,7),or(0,10,14,-6,0,22,35,3,0,8,42,7),or(0,11,14,-7,0,23,36,3,0,9,44,8),or(0,11,15,-7,0,24,38,3,0,9,46,8)],dve=["duration","easing","delay"],n4={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},HA={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function BF(e){return`${Math.round(e)}ms`}function fve(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function hve(e){const t=M({},n4,e.easing),n=M({},HA,e.duration);return M({getAutoHeightDuration:fve,create:(i=["all"],o={})=>{const{duration:s=n.standard,easing:a=t.easeInOut,delay:l=0}=o;return He(o,dve),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof s=="string"?s:BF(s)} ${a} ${typeof l=="string"?l:BF(l)}`).join(",")}},e,{easing:t,duration:n})}const pve={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},mve=pve,gve=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function ju(e={},...t){const{mixins:n={},palette:r={},transitions:i={},typography:o={}}=e,s=He(e,gve);if(e.vars)throw new Error(Eo(18));const a=ive(r),l=Wg(e);let c=Tr(l,{mixins:t4(l.breakpoints,n),palette:a,shadows:uve.slice(),typography:VA(a,o),transitions:hve(i),zIndex:M({},mve)});return c=Tr(c,s),c=t.reduce((u,d)=>Tr(u,d),c),c.unstable_sxConfig=M({},h1,s==null?void 0:s.unstable_sxConfig),c.unstable_sx=function(d){return wh({sx:d,theme:this})},c}function _X(...e){return ju(...e)}function wX(e,...t){return ju(Tr({unstable_strictMode:!0},e),...t)}let NF=!1;function SX(e){return NF||(console.warn(["MUI: createStyles from @mui/material/styles is deprecated.","Please use @mui/styles/createStyles"].join(`
`)),NF=!0),e}function FF(e){return String(parseFloat(e)).length===String(e).length}function GA(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function ja(e){return parseFloat(e)}function vve(e){return(t,n)=>{const r=GA(t);if(r===n)return t;let i=ja(t);r!=="px"&&(r==="em"||r==="rem")&&(i=ja(t)*ja(e));let o=i;if(n!=="px")if(n==="em")o=i/ja(e);else if(n==="rem")o=i/ja(e);else return t;return parseFloat(o.toFixed(5))+n}}function yve({size:e,grid:t}){const n=e-e%t,r=n+t;return e-n<r-e?n:r}function bve({lineHeight:e,pixels:t,htmlFontSize:n}){return t/(e*n)}function xve({cssProperty:e,min:t,max:n,unit:r="rem",breakpoints:i=[600,900,1200],transform:o=null}){const s={[e]:`${t}${r}`},a=(n-t)/i[i.length-1];return i.forEach(l=>{let c=t+a*l;o!==null&&(c=o(c)),s[`@media (min-width:${l}px)`]={[e]:`${Math.round(c*1e4)/1e4}${r}`}}),s}function CX(e,t={}){const{breakpoints:n=["sm","md","lg"],disableAlign:r=!1,factor:i=2,variants:o=["h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","caption","button","overline"]}=t,s=M({},e);s.typography=M({},s.typography);const a=s.typography,l=vve(a.htmlFontSize),c=n.map(u=>s.breakpoints.values[u]);return o.forEach(u=>{const d=a[u],f=parseFloat(l(d.fontSize,"rem"));if(f<=1)return;const h=f,p=1+(h-1)/i;let{lineHeight:g}=d;if(!FF(g)&&!r)throw new Error(Eo(6));FF(g)||(g=parseFloat(l(g,"rem"))/parseFloat(f));let v=null;r||(v=m=>yve({size:m,grid:bve({pixels:4,lineHeight:g,htmlFontSize:a.htmlFontSize})})),a[u]=M({},d,xve({cssProperty:"fontSize",min:p,max:h,unit:"rem",breakpoints:c,transform:v}))}),s}const _ve=ju(),WA=_ve;function Dn(){const e=p1(WA);return e[fl]||e}function ot({props:e,name:t}){return g1({props:e,name:t,defaultTheme:WA,themeId:fl})}const Br=e=>sy(e)&&e!=="classes",y1=sy,Te=hX({themeId:fl,defaultTheme:WA,rootShouldForwardProp:Br}),wve=["theme"];function r4(e){let{theme:t}=e,n=He(e,wve);const r=t[fl];return q.jsx(gX,M({},n,{themeId:r?fl:void 0,theme:r||t}))}function AX(){throw new Error(Eo(14))}function PX(){throw new Error(Eo(15))}function MX(){throw new Error(Eo(16))}function i4(e){var t;return!!e[0].match(/(cssVarPrefix|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const Sve=e=>{let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,(t/100).toFixed(2)},Qy=Sve,Cve=["colorSchemes","cssVarPrefix","shouldSkipGeneratingVar"],Ave=["palette"],Pve=[...Array(25)].map((e,t)=>{if(t===0)return;const n=Qy(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function Mve(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function Qe(e,t,n){!e[t]&&n&&(e[t]=n)}function A0(e){return!e||!e.startsWith("hsl")?e:UA(e)}function jc(e,t){`${t}Channel`in e||(e[`${t}Channel`]=S0(A0(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, e.g. "12 12 12") or undefined if you want to remove the channel token.`))}const Ra=e=>{try{return e()}catch{}},Eve=(e="mui")=>hge(e);function o4(e={},...t){var n,r,i,o,s,a;const{colorSchemes:l={},cssVarPrefix:c="mui",shouldSkipGeneratingVar:u=i4}=e,d=He(e,Cve),f=Eve(c),h=ju(M({},d,l.light&&{palette:(n=l.light)==null?void 0:n.palette})),{palette:p}=h,g=He(h,Ave),{palette:v}=ju({palette:M({mode:"dark"},(r=l.dark)==null?void 0:r.palette)});let m=M({},g,{cssVarPrefix:c,getCssVar:f,colorSchemes:M({},l,{light:M({},l.light,{palette:p,opacity:M({inputPlaceholder:.42,inputUnderline:.42,switchTrackDisabled:.12,switchTrack:.38},(i=l.light)==null?void 0:i.opacity),overlays:((o=l.light)==null?void 0:o.overlays)||[]}),dark:M({},l.dark,{palette:v,opacity:M({inputPlaceholder:.5,inputUnderline:.7,switchTrackDisabled:.2,switchTrack:.3},(s=l.dark)==null?void 0:s.opacity),overlays:((a=l.dark)==null?void 0:a.overlays)||Pve})})});Object.keys(m.colorSchemes).forEach(x=>{const w=m.colorSchemes[x].palette,S=C=>{const A=C.split("-"),T=A[1],O=A[2];return f(C,w[T][O])};if(x==="light"?(Qe(w.common,"background","#fff"),Qe(w.common,"onBackground","#000")):(Qe(w.common,"background","#000"),Qe(w.common,"onBackground","#fff")),Mve(w,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),x==="light"){Qe(w.Alert,"errorColor",Vn(w.error.light,.6)),Qe(w.Alert,"infoColor",Vn(w.info.light,.6)),Qe(w.Alert,"successColor",Vn(w.success.light,.6)),Qe(w.Alert,"warningColor",Vn(w.warning.light,.6)),Qe(w.Alert,"errorFilledBg",S("palette-error-main")),Qe(w.Alert,"infoFilledBg",S("palette-info-main")),Qe(w.Alert,"successFilledBg",S("palette-success-main")),Qe(w.Alert,"warningFilledBg",S("palette-warning-main")),Qe(w.Alert,"errorFilledColor",Ra(()=>p.getContrastText(w.error.main))),Qe(w.Alert,"infoFilledColor",Ra(()=>p.getContrastText(w.info.main))),Qe(w.Alert,"successFilledColor",Ra(()=>p.getContrastText(w.success.main))),Qe(w.Alert,"warningFilledColor",Ra(()=>p.getContrastText(w.warning.main))),Qe(w.Alert,"errorStandardBg",Hn(w.error.light,.9)),Qe(w.Alert,"infoStandardBg",Hn(w.info.light,.9)),Qe(w.Alert,"successStandardBg",Hn(w.success.light,.9)),Qe(w.Alert,"warningStandardBg",Hn(w.warning.light,.9)),Qe(w.Alert,"errorIconColor",S("palette-error-main")),Qe(w.Alert,"infoIconColor",S("palette-info-main")),Qe(w.Alert,"successIconColor",S("palette-success-main")),Qe(w.Alert,"warningIconColor",S("palette-warning-main")),Qe(w.AppBar,"defaultBg",S("palette-grey-100")),Qe(w.Avatar,"defaultBg",S("palette-grey-400")),Qe(w.Button,"inheritContainedBg",S("palette-grey-300")),Qe(w.Button,"inheritContainedHoverBg",S("palette-grey-A100")),Qe(w.Chip,"defaultBorder",S("palette-grey-400")),Qe(w.Chip,"defaultAvatarColor",S("palette-grey-700")),Qe(w.Chip,"defaultIconColor",S("palette-grey-700")),Qe(w.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Qe(w.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Qe(w.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Qe(w.LinearProgress,"primaryBg",Hn(w.primary.main,.62)),Qe(w.LinearProgress,"secondaryBg",Hn(w.secondary.main,.62)),Qe(w.LinearProgress,"errorBg",Hn(w.error.main,.62)),Qe(w.LinearProgress,"infoBg",Hn(w.info.main,.62)),Qe(w.LinearProgress,"successBg",Hn(w.success.main,.62)),Qe(w.LinearProgress,"warningBg",Hn(w.warning.main,.62)),Qe(w.Skeleton,"bg",`rgba(${S("palette-text-primaryChannel")} / 0.11)`),Qe(w.Slider,"primaryTrack",Hn(w.primary.main,.62)),Qe(w.Slider,"secondaryTrack",Hn(w.secondary.main,.62)),Qe(w.Slider,"errorTrack",Hn(w.error.main,.62)),Qe(w.Slider,"infoTrack",Hn(w.info.main,.62)),Qe(w.Slider,"successTrack",Hn(w.success.main,.62)),Qe(w.Slider,"warningTrack",Hn(w.warning.main,.62));const C=C0(w.background.default,.8);Qe(w.SnackbarContent,"bg",C),Qe(w.SnackbarContent,"color",Ra(()=>p.getContrastText(C))),Qe(w.SpeedDialAction,"fabHoverBg",C0(w.background.paper,.15)),Qe(w.StepConnector,"border",S("palette-grey-400")),Qe(w.StepContent,"border",S("palette-grey-400")),Qe(w.Switch,"defaultColor",S("palette-common-white")),Qe(w.Switch,"defaultDisabledColor",S("palette-grey-100")),Qe(w.Switch,"primaryDisabledColor",Hn(w.primary.main,.62)),Qe(w.Switch,"secondaryDisabledColor",Hn(w.secondary.main,.62)),Qe(w.Switch,"errorDisabledColor",Hn(w.error.main,.62)),Qe(w.Switch,"infoDisabledColor",Hn(w.info.main,.62)),Qe(w.Switch,"successDisabledColor",Hn(w.success.main,.62)),Qe(w.Switch,"warningDisabledColor",Hn(w.warning.main,.62)),Qe(w.TableCell,"border",Hn(i_(w.divider,1),.88)),Qe(w.Tooltip,"bg",i_(w.grey[700],.92))}else{Qe(w.Alert,"errorColor",Hn(w.error.light,.6)),Qe(w.Alert,"infoColor",Hn(w.info.light,.6)),Qe(w.Alert,"successColor",Hn(w.success.light,.6)),Qe(w.Alert,"warningColor",Hn(w.warning.light,.6)),Qe(w.Alert,"errorFilledBg",S("palette-error-dark")),Qe(w.Alert,"infoFilledBg",S("palette-info-dark")),Qe(w.Alert,"successFilledBg",S("palette-success-dark")),Qe(w.Alert,"warningFilledBg",S("palette-warning-dark")),Qe(w.Alert,"errorFilledColor",Ra(()=>v.getContrastText(w.error.dark))),Qe(w.Alert,"infoFilledColor",Ra(()=>v.getContrastText(w.info.dark))),Qe(w.Alert,"successFilledColor",Ra(()=>v.getContrastText(w.success.dark))),Qe(w.Alert,"warningFilledColor",Ra(()=>v.getContrastText(w.warning.dark))),Qe(w.Alert,"errorStandardBg",Vn(w.error.light,.9)),Qe(w.Alert,"infoStandardBg",Vn(w.info.light,.9)),Qe(w.Alert,"successStandardBg",Vn(w.success.light,.9)),Qe(w.Alert,"warningStandardBg",Vn(w.warning.light,.9)),Qe(w.Alert,"errorIconColor",S("palette-error-main")),Qe(w.Alert,"infoIconColor",S("palette-info-main")),Qe(w.Alert,"successIconColor",S("palette-success-main")),Qe(w.Alert,"warningIconColor",S("palette-warning-main")),Qe(w.AppBar,"defaultBg",S("palette-grey-900")),Qe(w.AppBar,"darkBg",S("palette-background-paper")),Qe(w.AppBar,"darkColor",S("palette-text-primary")),Qe(w.Avatar,"defaultBg",S("palette-grey-600")),Qe(w.Button,"inheritContainedBg",S("palette-grey-800")),Qe(w.Button,"inheritContainedHoverBg",S("palette-grey-700")),Qe(w.Chip,"defaultBorder",S("palette-grey-700")),Qe(w.Chip,"defaultAvatarColor",S("palette-grey-300")),Qe(w.Chip,"defaultIconColor",S("palette-grey-300")),Qe(w.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Qe(w.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Qe(w.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Qe(w.LinearProgress,"primaryBg",Vn(w.primary.main,.5)),Qe(w.LinearProgress,"secondaryBg",Vn(w.secondary.main,.5)),Qe(w.LinearProgress,"errorBg",Vn(w.error.main,.5)),Qe(w.LinearProgress,"infoBg",Vn(w.info.main,.5)),Qe(w.LinearProgress,"successBg",Vn(w.success.main,.5)),Qe(w.LinearProgress,"warningBg",Vn(w.warning.main,.5)),Qe(w.Skeleton,"bg",`rgba(${S("palette-text-primaryChannel")} / 0.13)`),Qe(w.Slider,"primaryTrack",Vn(w.primary.main,.5)),Qe(w.Slider,"secondaryTrack",Vn(w.secondary.main,.5)),Qe(w.Slider,"errorTrack",Vn(w.error.main,.5)),Qe(w.Slider,"infoTrack",Vn(w.info.main,.5)),Qe(w.Slider,"successTrack",Vn(w.success.main,.5)),Qe(w.Slider,"warningTrack",Vn(w.warning.main,.5));const C=C0(w.background.default,.98);Qe(w.SnackbarContent,"bg",C),Qe(w.SnackbarContent,"color",Ra(()=>v.getContrastText(C))),Qe(w.SpeedDialAction,"fabHoverBg",C0(w.background.paper,.15)),Qe(w.StepConnector,"border",S("palette-grey-600")),Qe(w.StepContent,"border",S("palette-grey-600")),Qe(w.Switch,"defaultColor",S("palette-grey-300")),Qe(w.Switch,"defaultDisabledColor",S("palette-grey-600")),Qe(w.Switch,"primaryDisabledColor",Vn(w.primary.main,.55)),Qe(w.Switch,"secondaryDisabledColor",Vn(w.secondary.main,.55)),Qe(w.Switch,"errorDisabledColor",Vn(w.error.main,.55)),Qe(w.Switch,"infoDisabledColor",Vn(w.info.main,.55)),Qe(w.Switch,"successDisabledColor",Vn(w.success.main,.55)),Qe(w.Switch,"warningDisabledColor",Vn(w.warning.main,.55)),Qe(w.TableCell,"border",Vn(i_(w.divider,1),.68)),Qe(w.Tooltip,"bg",i_(w.grey[700],.92))}jc(w.background,"default"),jc(w.common,"background"),jc(w.common,"onBackground"),jc(w,"divider"),Object.keys(w).forEach(C=>{const A=w[C];A&&typeof A=="object"&&(A.main&&Qe(w[C],"mainChannel",S0(A0(A.main))),A.light&&Qe(w[C],"lightChannel",S0(A0(A.light))),A.dark&&Qe(w[C],"darkChannel",S0(A0(A.dark))),A.contrastText&&Qe(w[C],"contrastTextChannel",S0(A0(A.contrastText))),C==="text"&&(jc(w[C],"primary"),jc(w[C],"secondary")),C==="action"&&(A.active&&jc(w[C],"active"),A.selected&&jc(w[C],"selected")))})}),m=t.reduce((x,w)=>Tr(x,w),m);const y={prefix:c,shouldSkipGeneratingVar:u},{vars:b,generateCssVars:_}=yge(m,y);return m.vars=b,m.generateCssVars=_,m.shouldSkipGeneratingVar=u,m.unstable_sxConfig=M({},h1,d==null?void 0:d.unstable_sxConfig),m.unstable_sx=function(w){return wh({sx:w,theme:this})},m}const Tve=e=>[...[...Array(24)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n+1}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],s4=Tve,Ove=o4(),{CssVarsProvider:EX,useColorScheme:TX,getInitColorSchemeScript:OX}=fge({themeId:fl,theme:Ove,attribute:"data-mui-color-scheme",modeStorageKey:"mui-mode",colorSchemeStorageKey:"mui-color-scheme",defaultColorScheme:{light:"light",dark:"dark"},resolveTheme:e=>{const t=M({},e,{typography:VA(e.palette,e.typography)});return t.unstable_sx=function(r){return wh({sx:r,theme:this})},t},excludeVariablesFromRoot:s4});function IX(){throw new Error(Eo(20))}const Ive=Object.freeze(Object.defineProperty({__proto__:null,Experimental_CssVarsProvider:EX,StyledEngineProvider:KY,THEME_ID:fl,ThemeProvider:r4,adaptV4Theme:xX,alpha:Et,createMuiTheme:_X,createStyles:SX,createTheme:ju,css:ma,darken:va,decomposeColor:ga,duration:HA,easing:n4,emphasize:Gm,experimentalStyled:Te,experimental_extendTheme:o4,experimental_sx:IX,getContrastRatio:X5,getInitColorSchemeScript:OX,getLuminance:Jy,getOverlayAlpha:Qy,hexToRgb:Y5,hslToRgb:UA,keyframes:ls,lighten:ya,makeStyles:AX,private_createMixins:t4,private_createTypography:VA,private_excludeVariablesFromRoot:s4,recomposeColor:qg,responsiveFontSizes:CX,rgbToHex:pX,shouldSkipGeneratingVar:i4,styled:Te,unstable_createMuiStrictModeTheme:wX,unstable_getUnit:GA,unstable_toUnitless:ja,useColorScheme:TX,useTheme:Dn,useThemeProps:ot,withStyles:PX,withTheme:MX},Symbol.toStringTag,{value:"Module"}));function RX(e){return tt("MuiSvgIcon",e)}const Rve=nt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]),kve=Rve,Lve=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],$ve=e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root",t!=="inherit"&&`color${Le(t)}`,`fontSize${Le(n)}`]};return it(i,RX,r)},Dve=Te("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Le(n.color)}`],t[`fontSize${Le(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,r,i,o,s,a,l,c,u,d,f,h,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=e.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((o=e.typography)==null||(s=o.pxToRem)==null?void 0:s.call(o,20))||"1.25rem",medium:((a=e.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=e.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[t.fontSize],color:(d=(f=(e.vars||e).palette)==null||(f=f[t.color])==null?void 0:f.main)!=null?d:{action:(h=(e.vars||e).palette)==null||(h=h.action)==null?void 0:h.active,disabled:(p=(e.vars||e).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[t.color]}}),kX=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:f="0 0 24 24"}=r,h=He(r,Lve),p=I.isValidElement(i)&&i.type==="svg",g=M({},r,{color:s,component:a,fontSize:l,instanceFontSize:t.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:p}),v={};u||(v.viewBox=f);const m=$ve(g);return q.jsxs(Dve,M({as:a,className:je(m.root,o),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},v,h,p&&i.props,{ownerState:g,children:[p?i.props.children:i,d?q.jsx("title",{children:d}):null]}))});kX.muiName="SvgIcon";const y2=kX;function Un(e,t){function n(r,i){return q.jsx(y2,M({"data-testid":`${t}Icon`,ref:i},r,{children:e}))}return n.muiName=y2.muiName,I.memo(I.forwardRef(n))}const LX={configure:e=>{F5.configure(e)}},Bve=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Le,createChainedFunction:Zy,createSvgIcon:Un,debounce:xh,deprecatedPropType:eX,isMuiElement:sl,ownerDocument:kn,ownerWindow:Ai,requirePropFactory:tX,setRef:Vm,unstable_ClassNameGenerator:LX,unstable_useEnhancedEffect:Yr,unstable_useId:Ls,unsupportedProp:nX,useControlled:Wi,useEventCallback:tr,useForkRef:cn,useIsFocusVisible:_h},Symbol.toStringTag,{value:"Module"}));function XR(e,t){return XR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XR(e,t)}function $X(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,XR(e,t)}const zF={disabled:!1},b2=$e.createContext(null);var Nve=function(t){return t.scrollTop},P0="unmounted",Qd="exited",ef="entering",wp="entered",KR="exiting",Oc=function(e){$X(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var s=i,a=s&&!s.isMounting?r.enter:r.appear,l;return o.appearStatus=null,r.in?a?(l=Qd,o.appearStatus=ef):l=wp:r.unmountOnExit||r.mountOnEnter?l=P0:l=Qd,o.state={status:l},o.nextCallback=null,o}t.getDerivedStateFromProps=function(i,o){var s=i.in;return s&&o.status===P0?{status:Qd}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var o=null;if(i!==this.props){var s=this.state.status;this.props.in?s!==ef&&s!==wp&&(o=ef):(s===ef||s===wp)&&(o=KR)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,o,s,a;return o=s=a=i,i!=null&&typeof i!="number"&&(o=i.exit,s=i.enter,a=i.appear!==void 0?i.appear:s),{exit:o,enter:s,appear:a}},n.updateStatus=function(i,o){if(i===void 0&&(i=!1),o!==null)if(this.cancelNextCallback(),o===ef){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:Zx.findDOMNode(this);s&&Nve(s)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qd&&this.setState({status:P0})},n.performEnter=function(i){var o=this,s=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Zx.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),f=a?d.appear:d.enter;if(!i&&!s||zF.disabled){this.safeSetState({status:wp},function(){o.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:ef},function(){o.props.onEntering(c,u),o.onTransitionEnd(f,function(){o.safeSetState({status:wp},function(){o.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,o=this.props.exit,s=this.getTimeouts(),a=this.props.nodeRef?void 0:Zx.findDOMNode(this);if(!o||zF.disabled){this.safeSetState({status:Qd},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:KR},function(){i.props.onExiting(a),i.onTransitionEnd(s.exit,function(){i.safeSetState({status:Qd},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,o){o=this.setNextCallback(o),this.setState(i,o)},n.setNextCallback=function(i){var o=this,s=!0;return this.nextCallback=function(a){s&&(s=!1,o.nextCallback=null,i(a))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},n.onTransitionEnd=function(i,o){this.setNextCallback(o);var s=this.props.nodeRef?this.props.nodeRef.current:Zx.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!s||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===P0)return null;var o=this.props,s=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var a=He(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return $e.createElement(b2.Provider,{value:null},typeof s=="function"?s(i,a):$e.cloneElement($e.Children.only(s),a))},t}($e.Component);Oc.contextType=b2;Oc.propTypes={};function Wh(){}Oc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Wh,onEntering:Wh,onEntered:Wh,onExit:Wh,onExiting:Wh,onExited:Wh};Oc.UNMOUNTED=P0;Oc.EXITED=Qd;Oc.ENTERING=ef;Oc.ENTERED=wp;Oc.EXITING=KR;const b1=Oc;function Fve(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a4(e,t){var n=function(o){return t&&I.isValidElement(o)?t(o):o},r=Object.create(null);return e&&I.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function zve(e,t){e=e||{},t=t||{};function n(u){return u in t?t[u]:e[u]}var r=Object.create(null),i=[];for(var o in e)o in t?i.length&&(r[o]=i,i=[]):i.push(o);var s,a={};for(var l in t){if(r[l])for(s=0;s<r[l].length;s++){var c=r[l][s];a[r[l][s]]=n(c)}a[l]=n(l)}for(s=0;s<i.length;s++)a[i[s]]=n(i[s]);return a}function gf(e,t,n){return n[t]!=null?n[t]:e.props[t]}function jve(e,t){return a4(e.children,function(n){return I.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:gf(n,"appear",e),enter:gf(n,"enter",e),exit:gf(n,"exit",e)})})}function Uve(e,t,n){var r=a4(e.children),i=zve(t,r);return Object.keys(i).forEach(function(o){var s=i[o];if(I.isValidElement(s)){var a=o in t,l=o in r,c=t[o],u=I.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[o]=I.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:gf(s,"exit",e),enter:gf(s,"enter",e)}):!l&&a&&!u?i[o]=I.cloneElement(s,{in:!1}):l&&a&&I.isValidElement(c)&&(i[o]=I.cloneElement(s,{onExited:n.bind(null,s),in:c.props.in,exit:gf(s,"exit",e),enter:gf(s,"enter",e)}))}}),i}var Vve=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Hve={component:"div",childFactory:function(t){return t}},l4=function(e){$X(t,e);function t(r,i){var o;o=e.call(this,r,i)||this;var s=o.handleExited.bind(Fve(o));return o.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},o}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,o){var s=o.children,a=o.handleExited,l=o.firstRender;return{children:l?jve(i,a):Uve(i,s,a),firstRender:!1}},n.handleExited=function(i,o){var s=a4(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(o),this.mounted&&this.setState(function(a){var l=M({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,o=i.component,s=i.childFactory,a=He(i,["component","childFactory"]),l=this.state.contextValue,c=Vve(this.state.children).map(s);return delete a.appear,delete a.enter,delete a.exit,o===null?$e.createElement(b2.Provider,{value:l},c):$e.createElement(b2.Provider,{value:l},$e.createElement(o,a,c))},t}($e.Component);l4.propTypes={};l4.defaultProps=Hve;const Gve=l4,qA=e=>e.scrollTop;function ba(e,t){var n,r;const{timeout:i,easing:o,style:s={}}=e;return{duration:(n=s.transitionDuration)!=null?n:typeof i=="number"?i:i[t.mode]||0,easing:(r=s.transitionTimingFunction)!=null?r:typeof o=="object"?o[t.mode]:o,delay:s.transitionDelay}}function DX(e){return tt("MuiCollapse",e)}const Wve=nt("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]),qve=Wve,Yve=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Xve=e=>{const{orientation:t,classes:n}=e,r={root:["root",`${t}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${t}`],wrapperInner:["wrapperInner",`${t}`]};return it(r,DX,n)},Kve=Te("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.state==="entered"&&t.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&t.hidden]}})(({theme:e,ownerState:t})=>M({height:0,overflow:"hidden",transition:e.transitions.create("height")},t.orientation==="horizontal"&&{height:"auto",width:0,transition:e.transitions.create("width")},t.state==="entered"&&M({height:"auto",overflow:"visible"},t.orientation==="horizontal"&&{width:"auto"}),t.state==="exited"&&!t.in&&t.collapsedSize==="0px"&&{visibility:"hidden"})),Zve=Te("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>M({display:"flex",width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),Jve=Te("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(e,t)=>t.wrapperInner})(({ownerState:e})=>M({width:"100%"},e.orientation==="horizontal"&&{width:"auto",height:"100%"})),BX=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiCollapse"}),{addEndListener:i,children:o,className:s,collapsedSize:a="0px",component:l,easing:c,in:u,onEnter:d,onEntered:f,onEntering:h,onExit:p,onExited:g,onExiting:v,orientation:m="vertical",style:y,timeout:b=HA.standard,TransitionComponent:_=b1}=r,x=He(r,Yve),w=M({},r,{orientation:m,collapsedSize:a}),S=Xve(w),C=Dn(),A=I.useRef(),T=I.useRef(null),O=I.useRef(),R=typeof a=="number"?`${a}px`:a,L=m==="horizontal",D=L?"width":"height";I.useEffect(()=>()=>{clearTimeout(A.current)},[]);const $=I.useRef(null),z=cn(n,$),H=G=>he=>{if(G){const Z=$.current;he===void 0?G(Z):G(Z,he)}},B=()=>T.current?T.current[L?"clientWidth":"clientHeight"]:0,V=H((G,he)=>{T.current&&L&&(T.current.style.position="absolute"),G.style[D]=R,d&&d(G,he)}),J=H((G,he)=>{const Z=B();T.current&&L&&(T.current.style.position="");const{duration:ae,easing:oe}=ba({style:y,timeout:b,easing:c},{mode:"enter"});if(b==="auto"){const te=C.transitions.getAutoHeightDuration(Z);G.style.transitionDuration=`${te}ms`,O.current=te}else G.style.transitionDuration=typeof ae=="string"?ae:`${ae}ms`;G.style[D]=`${Z}px`,G.style.transitionTimingFunction=oe,h&&h(G,he)}),K=H((G,he)=>{G.style[D]="auto",f&&f(G,he)}),ie=H(G=>{G.style[D]=`${B()}px`,p&&p(G)}),ce=H(g),pe=H(G=>{const he=B(),{duration:Z,easing:ae}=ba({style:y,timeout:b,easing:c},{mode:"exit"});if(b==="auto"){const oe=C.transitions.getAutoHeightDuration(he);G.style.transitionDuration=`${oe}ms`,O.current=oe}else G.style.transitionDuration=typeof Z=="string"?Z:`${Z}ms`;G.style[D]=R,G.style.transitionTimingFunction=ae,v&&v(G)}),se=G=>{b==="auto"&&(A.current=setTimeout(G,O.current||0)),i&&i($.current,G)};return q.jsx(_,M({in:u,onEnter:V,onEntered:K,onEntering:J,onExit:ie,onExited:ce,onExiting:pe,addEndListener:se,nodeRef:$,timeout:b==="auto"?null:b},x,{children:(G,he)=>q.jsx(Kve,M({as:l,className:je(S.root,s,{entered:S.entered,exited:!u&&R==="0px"&&S.hidden}[G]),style:M({[L?"minWidth":"minHeight"]:R},y),ownerState:M({},w,{state:G}),ref:z},he,{children:q.jsx(Zve,{ownerState:M({},w,{state:G}),className:S.wrapper,ref:T,children:q.jsx(Jve,{ownerState:M({},w,{state:G}),className:S.wrapperInner,children:o})})}))}))});BX.muiSupportAuto=!0;const YA=BX;function NX(e){return tt("MuiPaper",e)}const Qve=nt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]),e0e=Qve,t0e=["className","component","elevation","square","variant"],n0e=e=>{const{square:t,elevation:n,variant:r,classes:i}=e,o={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return it(o,NX,i)},r0e=Te("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(({theme:e,ownerState:t})=>{var n;return M({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow")},!t.square&&{borderRadius:e.shape.borderRadius},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.divider}`},t.variant==="elevation"&&M({boxShadow:(e.vars||e).shadows[t.elevation]},!e.vars&&e.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${Et("#fff",Qy(t.elevation))}, ${Et("#fff",Qy(t.elevation))})`},e.vars&&{backgroundImage:(n=e.vars.overlays)==null?void 0:n[t.elevation]}))}),i0e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiPaper"}),{className:i,component:o="div",elevation:s=1,square:a=!1,variant:l="elevation"}=r,c=He(r,t0e),u=M({},r,{component:o,elevation:s,square:a,variant:l}),d=n0e(u);return q.jsx(r0e,M({as:o,ownerState:u,className:je(d.root,i),ref:n},c))}),cs=i0e,FX=I.createContext({});function zX(e){return tt("MuiAccordion",e)}const o0e=nt("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),M0=o0e,s0e=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],a0e=e=>{const{classes:t,square:n,expanded:r,disabled:i,disableGutters:o}=e;return it({root:["root",!n&&"rounded",r&&"expanded",i&&"disabled",!o&&"gutters"],region:["region"]},zX,t)},l0e=Te(cs,{name:"MuiAccordion",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${M0.region}`]:t.region},t.root,!n.square&&t.rounded,!n.disableGutters&&t.gutters]}})(({theme:e})=>{const t={duration:e.transitions.duration.shortest};return{position:"relative",transition:e.transitions.create(["margin"],t),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(e.vars||e).palette.divider,transition:e.transitions.create(["opacity","background-color"],t)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${M0.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${M0.disabled}`]:{backgroundColor:(e.vars||e).palette.action.disabledBackground}}},({theme:e,ownerState:t})=>M({},!t.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(e.vars||e).shape.borderRadius,borderBottomRightRadius:(e.vars||e).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!t.disableGutters&&{[`&.${M0.expanded}`]:{margin:"16px 0"}})),c0e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiAccordion"}),{children:i,className:o,defaultExpanded:s=!1,disabled:a=!1,disableGutters:l=!1,expanded:c,onChange:u,square:d=!1,TransitionComponent:f=YA,TransitionProps:h}=r,p=He(r,s0e),[g,v]=Wi({controlled:c,default:s,name:"Accordion",state:"expanded"}),m=I.useCallback(S=>{v(!g),u&&u(S,!g)},[g,u,v]),[y,...b]=I.Children.toArray(i),_=I.useMemo(()=>({expanded:g,disabled:a,disableGutters:l,toggle:m}),[g,a,l,m]),x=M({},r,{square:d,disabled:a,disableGutters:l,expanded:g}),w=a0e(x);return q.jsxs(l0e,M({className:je(w.root,o),ref:n,ownerState:x,square:d},p,{children:[q.jsx(FX.Provider,{value:_,children:y}),q.jsx(f,M({in:g,timeout:"auto"},h,{children:q.jsx("div",{"aria-labelledby":y.props.id,id:y.props["aria-controls"],role:"region",className:w.region,children:b})}))]}))}),u0e=c0e;function jX(e){return tt("MuiAccordionActions",e)}const d0e=nt("MuiAccordionActions",["root","spacing"]),f0e=d0e,h0e=["className","disableSpacing"],p0e=e=>{const{classes:t,disableSpacing:n}=e;return it({root:["root",!n&&"spacing"]},jX,t)},m0e=Te("div",{name:"MuiAccordionActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>M({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),g0e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiAccordionActions"}),{className:i,disableSpacing:o=!1}=r,s=He(r,h0e),a=M({},r,{disableSpacing:o}),l=p0e(a);return q.jsx(m0e,M({className:je(l.root,i),ref:n,ownerState:a},s))}),v0e=g0e;function UX(e){return tt("MuiAccordionDetails",e)}const y0e=nt("MuiAccordionDetails",["root"]),b0e=y0e,x0e=["className"],_0e=e=>{const{classes:t}=e;return it({root:["root"]},UX,t)},w0e=Te("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({padding:e.spacing(1,2,2)})),S0e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiAccordionDetails"}),{className:i}=r,o=He(r,x0e),s=r,a=_0e(s);return q.jsx(w0e,M({className:je(a.root,i),ref:n,ownerState:s},o))}),C0e=S0e;function A0e(e){const{className:t,classes:n,pulsate:r=!1,rippleX:i,rippleY:o,rippleSize:s,in:a,onExited:l,timeout:c}=e,[u,d]=I.useState(!1),f=je(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),h={width:s,height:s,top:-(s/2)+o,left:-(s/2)+i},p=je(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&d(!0),I.useEffect(()=>{if(!a&&l!=null){const g=setTimeout(l,c);return()=>{clearTimeout(g)}}},[l,a,c]),q.jsx("span",{className:f,style:h,children:q.jsx("span",{className:p})})}function P0e(e){return tt("MuiTouchRipple",e)}const M0e=nt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Vo=M0e,E0e=["center","classes","className"];let XA=e=>e,jF,UF,VF,HF;const ZR=550,T0e=80,O0e=ls(jF||(jF=XA`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),I0e=ls(UF||(UF=XA`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),R0e=ls(VF||(VF=XA`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),k0e=Te("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),L0e=Te(A0e,{name:"MuiTouchRipple",slot:"Ripple"})(HF||(HF=XA`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Vo.rippleVisible,O0e,ZR,({theme:e})=>e.transitions.easing.easeInOut,Vo.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,Vo.child,Vo.childLeaving,I0e,ZR,({theme:e})=>e.transitions.easing.easeInOut,Vo.childPulsate,R0e,({theme:e})=>e.transitions.easing.easeInOut),$0e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:o={},className:s}=r,a=He(r,E0e),[l,c]=I.useState([]),u=I.useRef(0),d=I.useRef(null);I.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const f=I.useRef(!1),h=I.useRef(0),p=I.useRef(null),g=I.useRef(null);I.useEffect(()=>()=>{h.current&&clearTimeout(h.current)},[]);const v=I.useCallback(_=>{const{pulsate:x,rippleX:w,rippleY:S,rippleSize:C,cb:A}=_;c(T=>[...T,q.jsx(L0e,{classes:{ripple:je(o.ripple,Vo.ripple),rippleVisible:je(o.rippleVisible,Vo.rippleVisible),ripplePulsate:je(o.ripplePulsate,Vo.ripplePulsate),child:je(o.child,Vo.child),childLeaving:je(o.childLeaving,Vo.childLeaving),childPulsate:je(o.childPulsate,Vo.childPulsate)},timeout:ZR,pulsate:x,rippleX:w,rippleY:S,rippleSize:C},u.current)]),u.current+=1,d.current=A},[o]),m=I.useCallback((_={},x={},w=()=>{})=>{const{pulsate:S=!1,center:C=i||x.pulsate,fakeElement:A=!1}=x;if((_==null?void 0:_.type)==="mousedown"&&f.current){f.current=!1;return}(_==null?void 0:_.type)==="touchstart"&&(f.current=!0);const T=A?null:g.current,O=T?T.getBoundingClientRect():{width:0,height:0,left:0,top:0};let R,L,D;if(C||_===void 0||_.clientX===0&&_.clientY===0||!_.clientX&&!_.touches)R=Math.round(O.width/2),L=Math.round(O.height/2);else{const{clientX:$,clientY:z}=_.touches&&_.touches.length>0?_.touches[0]:_;R=Math.round($-O.left),L=Math.round(z-O.top)}if(C)D=Math.sqrt((2*O.width**2+O.height**2)/3),D%2===0&&(D+=1);else{const $=Math.max(Math.abs((T?T.clientWidth:0)-R),R)*2+2,z=Math.max(Math.abs((T?T.clientHeight:0)-L),L)*2+2;D=Math.sqrt($**2+z**2)}_!=null&&_.touches?p.current===null&&(p.current=()=>{v({pulsate:S,rippleX:R,rippleY:L,rippleSize:D,cb:w})},h.current=setTimeout(()=>{p.current&&(p.current(),p.current=null)},T0e)):v({pulsate:S,rippleX:R,rippleY:L,rippleSize:D,cb:w})},[i,v]),y=I.useCallback(()=>{m({},{pulsate:!0})},[m]),b=I.useCallback((_,x)=>{if(clearTimeout(h.current),(_==null?void 0:_.type)==="touchend"&&p.current){p.current(),p.current=null,h.current=setTimeout(()=>{b(_,x)});return}p.current=null,c(w=>w.length>0?w.slice(1):w),d.current=x},[]);return I.useImperativeHandle(n,()=>({pulsate:y,start:m,stop:b}),[y,m,b]),q.jsx(k0e,M({className:je(Vo.root,o.root,s),ref:g},a,{children:q.jsx(Gve,{component:null,exit:!0,children:l})}))}),D0e=$0e;function VX(e){return tt("MuiButtonBase",e)}const B0e=nt("MuiButtonBase",["root","disabled","focusVisible"]),HX=B0e,N0e=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],F0e=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:i}=e,s=it({root:["root",t&&"disabled",n&&"focusVisible"]},VX,i);return n&&r&&(s.root+=` ${r}`),s},z0e=Te("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${HX.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),j0e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:o=!1,children:s,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:f=!1,LinkComponent:h="a",onBlur:p,onClick:g,onContextMenu:v,onDragLeave:m,onFocus:y,onFocusVisible:b,onKeyDown:_,onKeyUp:x,onMouseDown:w,onMouseLeave:S,onMouseUp:C,onTouchEnd:A,onTouchMove:T,onTouchStart:O,tabIndex:R=0,TouchRippleProps:L,touchRippleRef:D,type:$}=r,z=He(r,N0e),H=I.useRef(null),B=I.useRef(null),V=cn(B,D),{isFocusVisibleRef:J,onFocus:K,onBlur:ie,ref:ce}=_h(),[pe,se]=I.useState(!1);c&&pe&&se(!1),I.useImperativeHandle(i,()=>({focusVisible:()=>{se(!0),H.current.focus()}}),[]);const[G,he]=I.useState(!1);I.useEffect(()=>{he(!0)},[]);const Z=G&&!u&&!c;I.useEffect(()=>{pe&&f&&!u&&G&&B.current.pulsate()},[u,f,pe,G]);function ae(P,ee,ye=d){return tr(be=>(ee&&ee(be),!ye&&B.current&&B.current[P](be),!0))}const oe=ae("start",w),te=ae("stop",v),ve=ae("stop",m),ne=ae("stop",C),xe=ae("stop",P=>{pe&&P.preventDefault(),S&&S(P)}),Ce=ae("start",O),me=ae("stop",A),X=ae("stop",T),Q=ae("stop",P=>{ie(P),J.current===!1&&se(!1),p&&p(P)},!1),Re=tr(P=>{H.current||(H.current=P.currentTarget),K(P),J.current===!0&&(se(!0),b&&b(P)),y&&y(P)}),Pe=()=>{const P=H.current;return l&&l!=="button"&&!(P.tagName==="A"&&P.href)},le=I.useRef(!1),Oe=tr(P=>{f&&!le.current&&pe&&B.current&&P.key===" "&&(le.current=!0,B.current.stop(P,()=>{B.current.start(P)})),P.target===P.currentTarget&&Pe()&&P.key===" "&&P.preventDefault(),_&&_(P),P.target===P.currentTarget&&Pe()&&P.key==="Enter"&&!c&&(P.preventDefault(),g&&g(P))}),Be=tr(P=>{f&&P.key===" "&&B.current&&pe&&!P.defaultPrevented&&(le.current=!1,B.current.stop(P,()=>{B.current.pulsate(P)})),x&&x(P),g&&P.target===P.currentTarget&&Pe()&&P.key===" "&&!P.defaultPrevented&&g(P)});let De=l;De==="button"&&(z.href||z.to)&&(De=h);const Ee={};De==="button"?(Ee.type=$===void 0?"button":$,Ee.disabled=c):(!z.href&&!z.to&&(Ee.role="button"),c&&(Ee["aria-disabled"]=c));const Ie=cn(n,ce,H),U=M({},r,{centerRipple:o,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:f,tabIndex:R,focusVisible:pe}),E=F0e(U);return q.jsxs(z0e,M({as:De,className:je(E.root,a),ownerState:U,onBlur:Q,onClick:g,onContextMenu:te,onFocus:Re,onKeyDown:Oe,onKeyUp:Be,onMouseDown:oe,onMouseLeave:xe,onMouseUp:ne,onDragLeave:ve,onTouchEnd:me,onTouchMove:X,onTouchStart:Ce,ref:Ie,tabIndex:c?-1:R,type:$},Ee,z,{children:[s,Z?q.jsx(D0e,M({ref:V,center:o},L)):null]}))}),Xr=j0e;function GX(e){return tt("MuiAccordionSummary",e)}const U0e=nt("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),vf=U0e,V0e=["children","className","expandIcon","focusVisibleClassName","onClick"],H0e=e=>{const{classes:t,expanded:n,disabled:r,disableGutters:i}=e;return it({root:["root",n&&"expanded",r&&"disabled",!i&&"gutters"],focusVisible:["focusVisible"],content:["content",n&&"expanded",!i&&"contentGutters"],expandIconWrapper:["expandIconWrapper",n&&"expanded"]},GX,t)},G0e=Te(Xr,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{const n={duration:e.transitions.duration.shortest};return M({display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],n),[`&.${vf.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${vf.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${vf.disabled})`]:{cursor:"pointer"}},!t.disableGutters&&{[`&.${vf.expanded}`]:{minHeight:64}})}),W0e=Te("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})(({theme:e,ownerState:t})=>M({display:"flex",flexGrow:1,margin:"12px 0"},!t.disableGutters&&{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${vf.expanded}`]:{margin:"20px 0"}})),q0e=Te("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})(({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${vf.expanded}`]:{transform:"rotate(180deg)"}})),Y0e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiAccordionSummary"}),{children:i,className:o,expandIcon:s,focusVisibleClassName:a,onClick:l}=r,c=He(r,V0e),{disabled:u=!1,disableGutters:d,expanded:f,toggle:h}=I.useContext(FX),p=m=>{h&&h(m),l&&l(m)},g=M({},r,{expanded:f,disabled:u,disableGutters:d}),v=H0e(g);return q.jsxs(G0e,M({focusRipple:!1,disableRipple:!0,disabled:u,component:"div","aria-expanded":f,className:je(v.root,o),focusVisibleClassName:je(v.focusVisible,a),onClick:p,ref:n,ownerState:g},c,{children:[q.jsx(W0e,{className:v.content,ownerState:g,children:i}),s&&q.jsx(q0e,{className:v.expandIconWrapper,ownerState:g,children:s})]}))}),X0e=Y0e;function WX(e){return tt("MuiAlert",e)}const K0e=nt("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),JR=K0e;function qX(e){return tt("MuiIconButton",e)}const Z0e=nt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),YX=Z0e,J0e=["edge","children","className","color","disabled","disableFocusRipple","size"],Q0e=e=>{const{classes:t,disabled:n,color:r,edge:i,size:o}=e,s={root:["root",n&&"disabled",r!=="default"&&`color${Le(r)}`,i&&`edge${Le(i)}`,`size${Le(o)}`]};return it(s,qX,t)},eye=Te(Xr,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Le(n.color)}`],n.edge&&t[`edge${Le(n.edge)}`],t[`size${Le(n.size)}`]]}})(({theme:e,ownerState:t})=>M({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12}),({theme:e,ownerState:t})=>{var n;const r=(n=(e.vars||e).palette)==null?void 0:n[t.color];return M({},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&t.color!=="default"&&M({color:r==null?void 0:r.main},!t.disableRipple&&{"&:hover":M({},r&&{backgroundColor:e.vars?`rgba(${r.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),t.size==="small"&&{padding:5,fontSize:e.typography.pxToRem(18)},t.size==="large"&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${YX.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),tye=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiIconButton"}),{edge:i=!1,children:o,className:s,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=r,d=He(r,J0e),f=M({},r,{edge:i,color:a,disabled:l,disableFocusRipple:c,size:u}),h=Q0e(f);return q.jsx(eye,M({className:je(h.root,s),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,ownerState:f},d,{children:o}))}),$i=tye,nye=Un(q.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),rye=Un(q.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),iye=Un(q.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),oye=Un(q.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),XX=Un(q.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),sye=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],aye=e=>{const{variant:t,color:n,severity:r,classes:i}=e,o={root:["root",`${t}${Le(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return it(o,WX,i)},lye=Te(cs,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Le(n.color||n.severity)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?va:ya,r=e.palette.mode==="light"?ya:va,i=t.color||t.severity;return M({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},i&&t.variant==="standard"&&{color:e.vars?e.vars.palette.Alert[`${i}Color`]:n(e.palette[i].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${i}StandardBg`]:r(e.palette[i].light,.9),[`& .${JR.icon}`]:e.vars?{color:e.vars.palette.Alert[`${i}IconColor`]}:{color:e.palette[i].main}},i&&t.variant==="outlined"&&{color:e.vars?e.vars.palette.Alert[`${i}Color`]:n(e.palette[i].light,.6),border:`1px solid ${(e.vars||e).palette[i].light}`,[`& .${JR.icon}`]:e.vars?{color:e.vars.palette.Alert[`${i}IconColor`]}:{color:e.palette[i].main}},i&&t.variant==="filled"&&M({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${i}FilledColor`],backgroundColor:e.vars.palette.Alert[`${i}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[i].dark:e.palette[i].main,color:e.palette.getContrastText(e.palette[i].main)}))}),cye=Te("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),uye=Te("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),GF=Te("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),WF={success:q.jsx(nye,{fontSize:"inherit"}),warning:q.jsx(rye,{fontSize:"inherit"}),error:q.jsx(iye,{fontSize:"inherit"}),info:q.jsx(oye,{fontSize:"inherit"})},dye=I.forwardRef(function(t,n){var r,i,o,s,a,l;const c=ot({props:t,name:"MuiAlert"}),{action:u,children:d,className:f,closeText:h="Close",color:p,components:g={},componentsProps:v={},icon:m,iconMapping:y=WF,onClose:b,role:_="alert",severity:x="success",slotProps:w={},slots:S={},variant:C="standard"}=c,A=He(c,sye),T=M({},c,{color:p,severity:x,variant:C}),O=aye(T),R=(r=(i=S.closeButton)!=null?i:g.CloseButton)!=null?r:$i,L=(o=(s=S.closeIcon)!=null?s:g.CloseIcon)!=null?o:XX,D=(a=w.closeButton)!=null?a:v.closeButton,$=(l=w.closeIcon)!=null?l:v.closeIcon;return q.jsxs(lye,M({role:_,elevation:0,ownerState:T,className:je(O.root,f),ref:n},A,{children:[m!==!1?q.jsx(cye,{ownerState:T,className:O.icon,children:m||y[x]||WF[x]}):null,q.jsx(uye,{ownerState:T,className:O.message,children:d}),u!=null?q.jsx(GF,{ownerState:T,className:O.action,children:u}):null,u==null&&b?q.jsx(GF,{ownerState:T,className:O.action,children:q.jsx(R,M({size:"small","aria-label":h,title:h,color:"inherit",onClick:b},D,{children:q.jsx(L,M({fontSize:"small"},$))}))}):null]}))}),fye=dye;function KX(e){return tt("MuiTypography",e)}const hye=nt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),pye=hye,mye=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],gye=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:o,classes:s}=e,a={root:["root",o,e.align!=="inherit"&&`align${Le(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return it(a,KX,s)},vye=Te("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${Le(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>M({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),qF={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},yye={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},bye=e=>yye[e]||e,xye=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTypography"}),i=bye(r.color),o=m1(M({},r,{color:i})),{align:s="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:d=!1,variant:f="body1",variantMapping:h=qF}=o,p=He(o,mye),g=M({},o,{align:s,color:i,className:a,component:l,gutterBottom:c,noWrap:u,paragraph:d,variant:f,variantMapping:h}),v=l||(d?"p":h[f]||qF[f])||"span",m=gye(g);return q.jsx(vye,M({as:v,ref:n,ownerState:g,className:je(m.root,a)},p))}),xn=xye;function ZX(e){return tt("MuiAlertTitle",e)}const _ye=nt("MuiAlertTitle",["root"]),wye=_ye,Sye=["className"],Cye=e=>{const{classes:t}=e;return it({root:["root"]},ZX,t)},Aye=Te(xn,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,marginTop:-2})),Pye=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiAlertTitle"}),{className:i}=r,o=He(r,Sye),s=r,a=Cye(s);return q.jsx(Aye,M({gutterBottom:!0,component:"div",ownerState:s,ref:n,className:je(a.root,i)},o))}),Mye=Pye;function JX(e){return tt("MuiAppBar",e)}const Eye=nt("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]),Tye=Eye,Oye=["className","color","enableColorOnDark","position"],Iye=e=>{const{color:t,position:n,classes:r}=e,i={root:["root",`color${Le(t)}`,`position${Le(n)}`]};return it(i,JX,r)},o_=(e,t)=>e?`${e==null?void 0:e.replace(")","")}, ${t})`:t,Rye=Te(cs,{name:"MuiAppBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Le(n.position)}`],t[`color${Le(n.color)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[900];return M({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},t.position==="fixed"&&{position:"fixed",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},t.position==="absolute"&&{position:"absolute",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="sticky"&&{position:"sticky",zIndex:(e.vars||e).zIndex.appBar,top:0,left:"auto",right:0},t.position==="static"&&{position:"static"},t.position==="relative"&&{position:"relative"},!e.vars&&M({},t.color==="default"&&{backgroundColor:n,color:e.palette.getContrastText(n)},t.color&&t.color!=="default"&&t.color!=="inherit"&&t.color!=="transparent"&&{backgroundColor:e.palette[t.color].main,color:e.palette[t.color].contrastText},t.color==="inherit"&&{color:"inherit"},e.palette.mode==="dark"&&!t.enableColorOnDark&&{backgroundColor:null,color:null},t.color==="transparent"&&M({backgroundColor:"transparent",color:"inherit"},e.palette.mode==="dark"&&{backgroundImage:"none"})),e.vars&&M({},t.color==="default"&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette.AppBar.defaultBg:o_(e.vars.palette.AppBar.darkBg,e.vars.palette.AppBar.defaultBg),"--AppBar-color":t.enableColorOnDark?e.vars.palette.text.primary:o_(e.vars.palette.AppBar.darkColor,e.vars.palette.text.primary)},t.color&&!t.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":t.enableColorOnDark?e.vars.palette[t.color].main:o_(e.vars.palette.AppBar.darkBg,e.vars.palette[t.color].main),"--AppBar-color":t.enableColorOnDark?e.vars.palette[t.color].contrastText:o_(e.vars.palette.AppBar.darkColor,e.vars.palette[t.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:t.color==="inherit"?"inherit":"var(--AppBar-color)"},t.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),kye=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiAppBar"}),{className:i,color:o="primary",enableColorOnDark:s=!1,position:a="fixed"}=r,l=He(r,Oye),c=M({},r,{color:o,position:a,enableColorOnDark:s}),u=Iye(c);return q.jsx(Rye,M({square:!0,component:"header",ownerState:c,elevation:4,className:je(u.root,i,a==="fixed"&&"mui-fixed"),ref:n},l))}),Lye=kye;function da(e){return typeof e=="string"}function E0(e,t,n){return e===void 0||da(e)?t:M({},t,{ownerState:M({},t.ownerState,n)})}function $ye(e,t,n=(r,i)=>r===i){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}const Dye={disableDefaultClasses:!1},Bye=I.createContext(Dye);function Nye(e){const{disableDefaultClasses:t}=I.useContext(Bye);return n=>t?"":e(n)}function Cf(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function Fye(e,t,n){return typeof e=="function"?e(t,n):e}function YF(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function zye(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:o}=e;if(!t){const h=je(n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),p=M({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),g=M({},n,i,r);return h.length>0&&(g.className=h),Object.keys(p).length>0&&(g.style=p),{props:g,internalRef:void 0}}const s=Cf(M({},i,r)),a=YF(r),l=YF(i),c=t(s),u=je(c==null?void 0:c.className,n==null?void 0:n.className,o,i==null?void 0:i.className,r==null?void 0:r.className),d=M({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),f=M({},c,n,l,a);return u.length>0&&(f.className=u),Object.keys(d).length>0&&(f.style=d),{props:f,internalRef:c.ref}}const jye=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function vr(e){var t;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:o=!1}=e,s=He(e,jye),a=o?{}:Fye(r,i),{props:l,internalRef:c}=zye(M({},s,{externalSlotProps:a})),u=cn(c,a==null?void 0:a.ref,(t=e.additionalProps)==null?void 0:t.ref);return E0(n,M({},l,{ref:u}),i)}function Uye(e){const{badgeContent:t,invisible:n=!1,max:r=99,showZero:i=!1}=e,o=B5({badgeContent:t,max:r});let s=n;n===!1&&t===0&&!i&&(s=!0);const{badgeContent:a,max:l=r}=s?o:e,c=a&&Number(a)>l?`${l}+`:a;return{badgeContent:a,invisible:s,max:l,displayValue:c}}function XF(e){return e.substring(2).toLowerCase()}function Vye(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function QX(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:o="onTouchEnd"}=e,s=I.useRef(!1),a=I.useRef(null),l=I.useRef(!1),c=I.useRef(!1);I.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const u=cn(t.ref,a),d=tr(p=>{const g=c.current;c.current=!1;const v=kn(a.current);if(!l.current||!a.current||"clientX"in p&&Vye(p,v))return;if(s.current){s.current=!1;return}let m;p.composedPath?m=p.composedPath().indexOf(a.current)>-1:m=!v.documentElement.contains(p.target)||a.current.contains(p.target),!m&&(n||!g)&&i(p)}),f=p=>g=>{c.current=!0;const v=t.props[p];v&&v(g)},h={ref:u};return o!==!1&&(h[o]=f(o)),I.useEffect(()=>{if(o!==!1){const p=XF(o),g=kn(a.current),v=()=>{s.current=!0};return g.addEventListener(p,d),g.addEventListener("touchmove",v),()=>{g.removeEventListener(p,d),g.removeEventListener("touchmove",v)}}},[d,o]),r!==!1&&(h[r]=f(r)),I.useEffect(()=>{if(r!==!1){const p=XF(r),g=kn(a.current);return g.addEventListener(p,d),()=>{g.removeEventListener(p,d)}}},[d,r]),q.jsx(I.Fragment,{children:I.cloneElement(t,h)})}const Hye=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Gye(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function Wye(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function qye(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||Wye(e))}function Yye(e){const t=[],n=[];return Array.from(e.querySelectorAll(Hye)).forEach((r,i)=>{const o=Gye(r);o===-1||!qye(r)||(o===0?t.push(r):n.push({documentOrder:i,tabIndex:o,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(t)}function Xye(){return!0}function eK(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:o=Yye,isEnabled:s=Xye,open:a}=e,l=I.useRef(!1),c=I.useRef(null),u=I.useRef(null),d=I.useRef(null),f=I.useRef(null),h=I.useRef(!1),p=I.useRef(null),g=cn(t.ref,p),v=I.useRef(null);I.useEffect(()=>{!a||!p.current||(h.current=!n)},[n,a]),I.useEffect(()=>{if(!a||!p.current)return;const b=kn(p.current);return p.current.contains(b.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),h.current&&p.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[a]),I.useEffect(()=>{if(!a||!p.current)return;const b=kn(p.current),_=S=>{v.current=S,!(r||!s()||S.key!=="Tab")&&b.activeElement===p.current&&S.shiftKey&&(l.current=!0,u.current&&u.current.focus())},x=()=>{const S=p.current;if(S===null)return;if(!b.hasFocus()||!s()||l.current){l.current=!1;return}if(S.contains(b.activeElement)||r&&b.activeElement!==c.current&&b.activeElement!==u.current)return;if(b.activeElement!==f.current)f.current=null;else if(f.current!==null)return;if(!h.current)return;let C=[];if((b.activeElement===c.current||b.activeElement===u.current)&&(C=o(p.current)),C.length>0){var A,T;const O=!!((A=v.current)!=null&&A.shiftKey&&((T=v.current)==null?void 0:T.key)==="Tab"),R=C[0],L=C[C.length-1];typeof R!="string"&&typeof L!="string"&&(O?L.focus():R.focus())}else S.focus()};b.addEventListener("focusin",x),b.addEventListener("keydown",_,!0);const w=setInterval(()=>{b.activeElement&&b.activeElement.tagName==="BODY"&&x()},50);return()=>{clearInterval(w),b.removeEventListener("focusin",x),b.removeEventListener("keydown",_,!0)}},[n,r,i,s,a,o]);const m=b=>{d.current===null&&(d.current=b.relatedTarget),h.current=!0,f.current=b.target;const _=t.props.onFocus;_&&_(b)},y=b=>{d.current===null&&(d.current=b.relatedTarget),h.current=!0};return q.jsxs(I.Fragment,{children:[q.jsx("div",{tabIndex:a?0:-1,onFocus:y,ref:c,"data-testid":"sentinelStart"}),I.cloneElement(t,{ref:g,onFocus:m}),q.jsx("div",{tabIndex:a?0:-1,onFocus:y,ref:u,"data-testid":"sentinelEnd"})]})}var _o="top",$s="bottom",Ds="right",wo="left",c4="auto",x1=[_o,$s,Ds,wo],Wm="start",eb="end",Kye="clippingParents",tK="viewport",kv="popper",Zye="reference",KF=x1.reduce(function(e,t){return e.concat([t+"-"+Wm,t+"-"+eb])},[]),nK=[].concat(x1,[c4]).reduce(function(e,t){return e.concat([t,t+"-"+Wm,t+"-"+eb])},[]),Jye="beforeRead",Qye="read",ebe="afterRead",tbe="beforeMain",nbe="main",rbe="afterMain",ibe="beforeWrite",obe="write",sbe="afterWrite",abe=[Jye,Qye,ebe,tbe,nbe,rbe,ibe,obe,sbe];function hl(e){return e?(e.nodeName||"").toLowerCase():null}function Zo(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Gf(e){var t=Zo(e).Element;return e instanceof t||e instanceof Element}function Ts(e){var t=Zo(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function u4(e){if(typeof ShadowRoot>"u")return!1;var t=Zo(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function lbe(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},o=t.elements[n];!Ts(o)||!hl(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function cbe(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],o=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),a=s.reduce(function(l,c){return l[c]="",l},{});!Ts(i)||!hl(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}const ube={name:"applyStyles",enabled:!0,phase:"write",fn:lbe,effect:cbe,requires:["computeStyles"]};function al(e){return e.split("-")[0]}var Af=Math.max,x2=Math.min,qm=Math.round;function QR(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function rK(){return!/^((?!chrome|android).)*safari/i.test(QR())}function Ym(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&Ts(e)&&(i=e.offsetWidth>0&&qm(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&qm(r.height)/e.offsetHeight||1);var s=Gf(e)?Zo(e):window,a=s.visualViewport,l=!rK()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/o,d=r.width/i,f=r.height/o;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function d4(e){var t=Ym(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function iK(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&u4(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function mc(e){return Zo(e).getComputedStyle(e)}function dbe(e){return["table","td","th"].indexOf(hl(e))>=0}function ad(e){return((Gf(e)?e.ownerDocument:e.document)||window.document).documentElement}function KA(e){return hl(e)==="html"?e:e.assignedSlot||e.parentNode||(u4(e)?e.host:null)||ad(e)}function ZF(e){return!Ts(e)||mc(e).position==="fixed"?null:e.offsetParent}function fbe(e){var t=/firefox/i.test(QR()),n=/Trident/i.test(QR());if(n&&Ts(e)){var r=mc(e);if(r.position==="fixed")return null}var i=KA(e);for(u4(i)&&(i=i.host);Ts(i)&&["html","body"].indexOf(hl(i))<0;){var o=mc(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function _1(e){for(var t=Zo(e),n=ZF(e);n&&dbe(n)&&mc(n).position==="static";)n=ZF(n);return n&&(hl(n)==="html"||hl(n)==="body"&&mc(n).position==="static")?t:n||fbe(e)||t}function f4(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ay(e,t,n){return Af(e,x2(t,n))}function hbe(e,t,n){var r=ay(e,t,n);return r>n?n:r}function oK(){return{top:0,right:0,bottom:0,left:0}}function sK(e){return Object.assign({},oK(),e)}function aK(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var pbe=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,sK(typeof t!="number"?t:aK(t,x1))};function mbe(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=al(n.placement),l=f4(a),c=[wo,Ds].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var d=pbe(i.padding,n),f=d4(o),h=l==="y"?_o:wo,p=l==="y"?$s:Ds,g=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],v=s[l]-n.rects.reference[l],m=_1(o),y=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,b=g/2-v/2,_=d[h],x=y-f[u]-d[p],w=y/2-f[u]/2+b,S=ay(_,w,x),C=l;n.modifiersData[r]=(t={},t[C]=S,t.centerOffset=S-w,t)}}function gbe(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||iK(t.elements.popper,i)&&(t.elements.arrow=i))}const vbe={name:"arrow",enabled:!0,phase:"main",fn:mbe,effect:gbe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xm(e){return e.split("-")[1]}var ybe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bbe(e,t){var n=e.x,r=e.y,i=t.devicePixelRatio||1;return{x:qm(n*i)/i||0,y:qm(r*i)/i||0}}function JF(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,f=s.x,h=f===void 0?0:f,p=s.y,g=p===void 0?0:p,v=typeof u=="function"?u({x:h,y:g}):{x:h,y:g};h=v.x,g=v.y;var m=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=wo,_=_o,x=window;if(c){var w=_1(n),S="clientHeight",C="clientWidth";if(w===Zo(n)&&(w=ad(n),mc(w).position!=="static"&&a==="absolute"&&(S="scrollHeight",C="scrollWidth")),w=w,i===_o||(i===wo||i===Ds)&&o===eb){_=$s;var A=d&&w===x&&x.visualViewport?x.visualViewport.height:w[S];g-=A-r.height,g*=l?1:-1}if(i===wo||(i===_o||i===$s)&&o===eb){b=Ds;var T=d&&w===x&&x.visualViewport?x.visualViewport.width:w[C];h-=T-r.width,h*=l?1:-1}}var O=Object.assign({position:a},c&&ybe),R=u===!0?bbe({x:h,y:g},Zo(n)):{x:h,y:g};if(h=R.x,g=R.y,l){var L;return Object.assign({},O,(L={},L[_]=y?"0":"",L[b]=m?"0":"",L.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",L))}return Object.assign({},O,(t={},t[_]=y?g+"px":"",t[b]=m?h+"px":"",t.transform="",t))}function xbe(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:al(t.placement),variation:Xm(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,JF(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,JF(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const _be={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xbe,data:{}};var s_={passive:!0};function wbe(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=Zo(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,s_)}),a&&l.addEventListener("resize",n.update,s_),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,s_)}),a&&l.removeEventListener("resize",n.update,s_)}}const Sbe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:wbe,data:{}};var Cbe={left:"right",right:"left",bottom:"top",top:"bottom"};function rS(e){return e.replace(/left|right|bottom|top/g,function(t){return Cbe[t]})}var Abe={start:"end",end:"start"};function QF(e){return e.replace(/start|end/g,function(t){return Abe[t]})}function h4(e){var t=Zo(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function p4(e){return Ym(ad(e)).left+h4(e).scrollLeft}function Pbe(e,t){var n=Zo(e),r=ad(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var c=rK();(c||!c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+p4(e),y:l}}function Mbe(e){var t,n=ad(e),r=h4(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=Af(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Af(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+p4(e),l=-r.scrollTop;return mc(i||n).direction==="rtl"&&(a+=Af(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function m4(e){var t=mc(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function lK(e){return["html","body","#document"].indexOf(hl(e))>=0?e.ownerDocument.body:Ts(e)&&m4(e)?e:lK(KA(e))}function ly(e,t){var n;t===void 0&&(t=[]);var r=lK(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=Zo(r),s=i?[o].concat(o.visualViewport||[],m4(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(ly(KA(s)))}function ek(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ebe(e,t){var n=Ym(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function e6(e,t,n){return t===tK?ek(Pbe(e,n)):Gf(t)?Ebe(t,n):ek(Mbe(ad(e)))}function Tbe(e){var t=ly(KA(e)),n=["absolute","fixed"].indexOf(mc(e).position)>=0,r=n&&Ts(e)?_1(e):e;return Gf(r)?t.filter(function(i){return Gf(i)&&iK(i,r)&&hl(i)!=="body"}):[]}function Obe(e,t,n,r){var i=t==="clippingParents"?Tbe(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,c){var u=e6(e,c,r);return l.top=Af(u.top,l.top),l.right=x2(u.right,l.right),l.bottom=x2(u.bottom,l.bottom),l.left=Af(u.left,l.left),l},e6(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function cK(e){var t=e.reference,n=e.element,r=e.placement,i=r?al(r):null,o=r?Xm(r):null,s=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(i){case _o:l={x:s,y:t.y-n.height};break;case $s:l={x:s,y:t.y+t.height};break;case Ds:l={x:t.x+t.width,y:a};break;case wo:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=i?f4(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case Wm:l[c]=l[c]-(t[u]/2-n[u]/2);break;case eb:l[c]=l[c]+(t[u]/2-n[u]/2);break}}return l}function tb(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,o=n.strategy,s=o===void 0?e.strategy:o,a=n.boundary,l=a===void 0?Kye:a,c=n.rootBoundary,u=c===void 0?tK:c,d=n.elementContext,f=d===void 0?kv:d,h=n.altBoundary,p=h===void 0?!1:h,g=n.padding,v=g===void 0?0:g,m=sK(typeof v!="number"?v:aK(v,x1)),y=f===kv?Zye:kv,b=e.rects.popper,_=e.elements[p?y:f],x=Obe(Gf(_)?_:_.contextElement||ad(e.elements.popper),l,u,s),w=Ym(e.elements.reference),S=cK({reference:w,element:b,strategy:"absolute",placement:i}),C=ek(Object.assign({},b,S)),A=f===kv?C:w,T={top:x.top-A.top+m.top,bottom:A.bottom-x.bottom+m.bottom,left:x.left-A.left+m.left,right:A.right-x.right+m.right},O=e.modifiersData.offset;if(f===kv&&O){var R=O[i];Object.keys(T).forEach(function(L){var D=[Ds,$s].indexOf(L)>=0?1:-1,$=[_o,$s].indexOf(L)>=0?"y":"x";T[L]+=R[$]*D})}return T}function Ibe(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?nK:l,u=Xm(r),d=u?a?KF:KF.filter(function(p){return Xm(p)===u}):x1,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,g){return p[g]=tb(e,{placement:g,boundary:i,rootBoundary:o,padding:s})[al(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}function Rbe(e){if(al(e)===c4)return[];var t=rS(e);return[QF(e),t,QF(t)]}function kbe(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,g=n.allowedAutoPlacements,v=t.options.placement,m=al(v),y=m===v,b=l||(y||!p?[rS(v)]:Rbe(v)),_=[v].concat(b).reduce(function(pe,se){return pe.concat(al(se)===c4?Ibe(t,{placement:se,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:g}):se)},[]),x=t.rects.reference,w=t.rects.popper,S=new Map,C=!0,A=_[0],T=0;T<_.length;T++){var O=_[T],R=al(O),L=Xm(O)===Wm,D=[_o,$s].indexOf(R)>=0,$=D?"width":"height",z=tb(t,{placement:O,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),H=D?L?Ds:wo:L?$s:_o;x[$]>w[$]&&(H=rS(H));var B=rS(H),V=[];if(o&&V.push(z[R]<=0),a&&V.push(z[H]<=0,z[B]<=0),V.every(function(pe){return pe})){A=O,C=!1;break}S.set(O,V)}if(C)for(var J=p?3:1,K=function(se){var G=_.find(function(he){var Z=S.get(he);if(Z)return Z.slice(0,se).every(function(ae){return ae})});if(G)return A=G,"break"},ie=J;ie>0;ie--){var ce=K(ie);if(ce==="break")break}t.placement!==A&&(t.modifiersData[r]._skip=!0,t.placement=A,t.reset=!0)}}const Lbe={name:"flip",enabled:!0,phase:"main",fn:kbe,requiresIfExists:["offset"],data:{_skip:!1}};function t6(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function n6(e){return[_o,Ds,$s,wo].some(function(t){return e[t]>=0})}function $be(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=tb(t,{elementContext:"reference"}),a=tb(t,{altBoundary:!0}),l=t6(s,r),c=t6(a,i,o),u=n6(l),d=n6(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const Dbe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:$be};function Bbe(e,t,n){var r=al(e),i=[wo,_o].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[wo,Ds].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function Nbe(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=i===void 0?[0,0]:i,s=nK.reduce(function(u,d){return u[d]=Bbe(d,t.rects,o),u},{}),a=s[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=s}const Fbe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Nbe};function zbe(e){var t=e.state,n=e.name;t.modifiersData[n]=cK({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const jbe={name:"popperOffsets",enabled:!0,phase:"read",fn:zbe,data:{}};function Ube(e){return e==="x"?"y":"x"}function Vbe(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,g=p===void 0?0:p,v=tb(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),m=al(t.placement),y=Xm(t.placement),b=!y,_=f4(m),x=Ube(_),w=t.modifiersData.popperOffsets,S=t.rects.reference,C=t.rects.popper,A=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,T=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),O=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,R={x:0,y:0};if(w){if(o){var L,D=_==="y"?_o:wo,$=_==="y"?$s:Ds,z=_==="y"?"height":"width",H=w[_],B=H+v[D],V=H-v[$],J=h?-C[z]/2:0,K=y===Wm?S[z]:C[z],ie=y===Wm?-C[z]:-S[z],ce=t.elements.arrow,pe=h&&ce?d4(ce):{width:0,height:0},se=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:oK(),G=se[D],he=se[$],Z=ay(0,S[z],pe[z]),ae=b?S[z]/2-J-Z-G-T.mainAxis:K-Z-G-T.mainAxis,oe=b?-S[z]/2+J+Z+he+T.mainAxis:ie+Z+he+T.mainAxis,te=t.elements.arrow&&_1(t.elements.arrow),ve=te?_==="y"?te.clientTop||0:te.clientLeft||0:0,ne=(L=O==null?void 0:O[_])!=null?L:0,xe=H+ae-ne-ve,Ce=H+oe-ne,me=ay(h?x2(B,xe):B,H,h?Af(V,Ce):V);w[_]=me,R[_]=me-H}if(a){var X,Q=_==="x"?_o:wo,Re=_==="x"?$s:Ds,Pe=w[x],le=x==="y"?"height":"width",Oe=Pe+v[Q],Be=Pe-v[Re],De=[_o,wo].indexOf(m)!==-1,Ee=(X=O==null?void 0:O[x])!=null?X:0,Ie=De?Oe:Pe-S[le]-C[le]-Ee+T.altAxis,U=De?Pe+S[le]+C[le]-Ee-T.altAxis:Be,E=h&&De?hbe(Ie,Pe,U):ay(h?Ie:Oe,Pe,h?U:Be);w[x]=E,R[x]=E-Pe}t.modifiersData[r]=R}}const Hbe={name:"preventOverflow",enabled:!0,phase:"main",fn:Vbe,requiresIfExists:["offset"]};function Gbe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Wbe(e){return e===Zo(e)||!Ts(e)?h4(e):Gbe(e)}function qbe(e){var t=e.getBoundingClientRect(),n=qm(t.width)/e.offsetWidth||1,r=qm(t.height)/e.offsetHeight||1;return n!==1||r!==1}function Ybe(e,t,n){n===void 0&&(n=!1);var r=Ts(t),i=Ts(t)&&qbe(t),o=ad(t),s=Ym(e,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((hl(t)!=="body"||m4(o))&&(a=Wbe(t)),Ts(t)?(l=Ym(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=p4(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Xbe(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&i(l)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||i(o)}),r}function Kbe(e){var t=Xbe(e);return abe.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function Zbe(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Jbe(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var r6={placement:"bottom",modifiers:[],strategy:"absolute"};function i6(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Qbe(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,o=i===void 0?r6:i;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},r6,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(m){var y=typeof m=="function"?m(u.options):m;g(),u.options=Object.assign({},o,u.options,y),u.scrollParents={reference:Gf(a)?ly(a):a.contextElement?ly(a.contextElement):[],popper:ly(l)};var b=Kbe(Jbe([].concat(r,u.options.modifiers)));return u.orderedModifiers=b.filter(function(_){return _.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var m=u.elements,y=m.reference,b=m.popper;if(i6(y,b)){u.rects={reference:Ybe(y,_1(b),u.options.strategy==="fixed"),popper:d4(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(T){return u.modifiersData[T.name]=Object.assign({},T.data)});for(var _=0;_<u.orderedModifiers.length;_++){if(u.reset===!0){u.reset=!1,_=-1;continue}var x=u.orderedModifiers[_],w=x.fn,S=x.options,C=S===void 0?{}:S,A=x.name;typeof w=="function"&&(u=w({state:u,options:C,name:A,instance:h})||u)}}}},update:Zbe(function(){return new Promise(function(v){h.forceUpdate(),v(u)})}),destroy:function(){g(),f=!0}};if(!i6(a,l))return h;h.setOptions(c).then(function(v){!f&&c.onFirstUpdate&&c.onFirstUpdate(v)});function p(){u.orderedModifiers.forEach(function(v){var m=v.name,y=v.options,b=y===void 0?{}:y,_=v.effect;if(typeof _=="function"){var x=_({state:u,name:m,instance:h,options:b}),w=function(){};d.push(x||w)}})}function g(){d.forEach(function(v){return v()}),d=[]}return h}}var e1e=[Sbe,jbe,_be,ube,Fbe,Lbe,Hbe,vbe,Dbe],t1e=Qbe({defaultModifiers:e1e});function n1e(e){return typeof e=="function"?e():e}const g4=I.forwardRef(function(t,n){const{children:r,container:i,disablePortal:o=!1}=t,[s,a]=I.useState(null),l=cn(I.isValidElement(r)?r.ref:null,n);if(Yr(()=>{o||a(n1e(i)||document.body)},[i,o]),Yr(()=>{if(s&&!o)return Vm(n,s),()=>{Vm(n,null)}},[n,s,o]),o){if(I.isValidElement(r)){const c={ref:l};return I.cloneElement(r,c)}return q.jsx(I.Fragment,{children:r})}return q.jsx(I.Fragment,{children:s&&Nu.createPortal(r,s)})});function r1e(e){return tt("MuiPopper",e)}nt("MuiPopper",["root"]);const i1e=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],o1e=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function s1e(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function tk(e){return typeof e=="function"?e():e}function a1e(e){return e.nodeType!==void 0}const l1e=()=>it({root:["root"]},Nye(r1e)),c1e={},u1e=I.forwardRef(function(t,n){var r;const{anchorEl:i,children:o,direction:s,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:f,slotProps:h={},slots:p={},TransitionProps:g}=t,v=He(t,i1e),m=I.useRef(null),y=cn(m,n),b=I.useRef(null),_=cn(b,f),x=I.useRef(_);Yr(()=>{x.current=_},[_]),I.useImperativeHandle(f,()=>b.current,[]);const w=s1e(u,s),[S,C]=I.useState(w),[A,T]=I.useState(tk(i));I.useEffect(()=>{b.current&&b.current.forceUpdate()}),I.useEffect(()=>{i&&T(tk(i))},[i]),Yr(()=>{if(!A||!c)return;const $=B=>{C(B.placement)};let z=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:B})=>{$(B)}}];l!=null&&(z=z.concat(l)),d&&d.modifiers!=null&&(z=z.concat(d.modifiers));const H=t1e(A,m.current,M({placement:w},d,{modifiers:z}));return x.current(H),()=>{H.destroy(),x.current(null)}},[A,a,l,c,d,w]);const O={placement:S};g!==null&&(O.TransitionProps=g);const R=l1e(),L=(r=p.root)!=null?r:"div",D=vr({elementType:L,externalSlotProps:h.root,externalForwardedProps:v,additionalProps:{role:"tooltip",ref:y},ownerState:t,className:R.root});return q.jsx(L,M({},D,{children:typeof o=="function"?o(O):o}))}),d1e=I.forwardRef(function(t,n){const{anchorEl:r,children:i,container:o,direction:s="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:f=c1e,popperRef:h,style:p,transition:g=!1,slotProps:v={},slots:m={}}=t,y=He(t,o1e),[b,_]=I.useState(!0),x=()=>{_(!1)},w=()=>{_(!0)};if(!l&&!u&&(!g||b))return null;let S;if(o)S=o;else if(r){const T=tk(r);S=T&&a1e(T)?kn(T).body:kn(null).body}const C=!u&&l&&(!g||b)?"none":void 0,A=g?{in:u,onEnter:x,onExited:w}:void 0;return q.jsx(g4,{disablePortal:a,container:S,children:q.jsx(u1e,M({anchorEl:r,direction:s,disablePortal:a,modifiers:c,ref:n,open:g?!b:u,placement:d,popperOptions:f,popperRef:h,slotProps:v,slots:m},y,{style:M({position:"fixed",top:0,left:0,display:C},p),TransitionProps:A,children:i}))})});function f1e(e){const t=kn(e);return t.body===e?Ai(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function cy(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function o6(e){return parseInt(Ai(e).getComputedStyle(e).paddingRight,10)||0}function h1e(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function s6(e,t,n,r,i){const o=[t,n,...r];[].forEach.call(e.children,s=>{const a=o.indexOf(s)===-1,l=!h1e(s);a&&l&&cy(s,i)})}function BT(e,t){let n=-1;return e.some((r,i)=>t(r)?(n=i,!0):!1),n}function p1e(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(f1e(r)){const s=rX(kn(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${o6(r)+s}px`;const a=kn(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${o6(l)+s}px`})}let o;if(r.parentNode instanceof DocumentFragment)o=kn(r).body;else{const s=r.parentElement,a=Ai(r);o=(s==null?void 0:s.nodeName)==="HTML"&&a.getComputedStyle(s).overflowY==="scroll"?s:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{n.forEach(({value:o,el:s,property:a})=>{o?s.style.setProperty(a,o):s.style.removeProperty(a)})}}function m1e(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class uK{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&cy(t.modalRef,!1);const i=m1e(n);s6(n,t.mount,t.modalRef,i,!0);const o=BT(this.containers,s=>s.container===n);return o!==-1?(this.containers[o].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:i}),r)}mount(t,n){const r=BT(this.containers,o=>o.modals.indexOf(t)!==-1),i=this.containers[r];i.restore||(i.restore=p1e(i,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const i=BT(this.containers,s=>s.modals.indexOf(t)!==-1),o=this.containers[i];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(r,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&cy(t.modalRef,n),s6(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(i,1);else{const s=o.modals[o.modals.length-1];s.modalRef&&cy(s.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function g1e(e){return typeof e=="function"?e():e}function v1e(e){return e?e.props.hasOwnProperty("in"):!1}const y1e=new uK;function b1e(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=y1e,closeAfterTransition:o=!1,onTransitionEnter:s,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=e,f=I.useRef({}),h=I.useRef(null),p=I.useRef(null),g=cn(p,d),[v,m]=I.useState(!u),y=v1e(l);let b=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(b=!1);const _=()=>kn(h.current),x=()=>(f.current.modalRef=p.current,f.current.mount=h.current,f.current),w=()=>{i.mount(x(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},S=tr(()=>{const z=g1e(t)||_().body;i.add(x(),z),p.current&&w()}),C=I.useCallback(()=>i.isTopModal(x()),[i]),A=tr(z=>{h.current=z,z&&(u&&C()?w():p.current&&cy(p.current,b))}),T=I.useCallback(()=>{i.remove(x(),b)},[b,i]);I.useEffect(()=>()=>{T()},[T]),I.useEffect(()=>{u?S():(!y||!o)&&T()},[u,T,y,o,S]);const O=z=>H=>{var B;(B=z.onKeyDown)==null||B.call(z,H),!(H.key!=="Escape"||H.which===229||!C())&&(n||(H.stopPropagation(),c&&c(H,"escapeKeyDown")))},R=z=>H=>{var B;(B=z.onClick)==null||B.call(z,H),H.target===H.currentTarget&&c&&c(H,"backdropClick")};return{getRootProps:(z={})=>{const H=Cf(e);delete H.onTransitionEnter,delete H.onTransitionExited;const B=M({},H,z);return M({role:"presentation"},B,{onKeyDown:O(B),ref:g})},getBackdropProps:(z={})=>{const H=z;return M({"aria-hidden":!0},H,{onClick:R(H),open:u})},getTransitionProps:()=>{const z=()=>{m(!1),s&&s()},H=()=>{m(!0),a&&a(),o&&T()};return{onEnter:Zy(z,l==null?void 0:l.props.onEnter),onExited:Zy(H,l==null?void 0:l.props.onExited)}},rootRef:g,portalRef:A,isTopModal:C,exited:v,hasTransition:y}}function dK(e){const{children:t,defer:n=!1,fallback:r=null}=e,[i,o]=I.useState(!1);return Yr(()=>{n||o(!0)},[n]),I.useEffect(()=>{n&&o(!0)},[n]),q.jsx(I.Fragment,{children:i?t:r})}const x1e=2;function fK(e,t){return e-t}function Lv(e,t,n){return e==null?t:Math.min(Math.max(t,e),n)}function a6(e,t){var n;const{index:r}=(n=e.reduce((i,o,s)=>{const a=Math.abs(t-o);return i===null||a<i.distance||a===i.distance?{distance:a,index:s}:i},null))!=null?n:{};return r}function a_(e,t){if(t.current!==void 0&&e.changedTouches){const n=e;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===t.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function _2(e,t,n){return(e-t)*100/(n-t)}function _1e(e,t,n){return(n-t)*e+t}function w1e(e){if(Math.abs(e)<1){const n=e.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const t=e.toString().split(".")[1];return t?t.length:0}function S1e(e,t,n){const r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(w1e(t)))}function l6({values:e,newValue:t,index:n}){const r=e.slice();return r[n]=t,r.sort(fK)}function l_({sliderRef:e,activeIndex:t,setActive:n}){var r,i;const o=kn(e.current);if(!((r=e.current)!=null&&r.contains(o.activeElement))||Number(o==null||(i=o.activeElement)==null?void 0:i.getAttribute("data-index"))!==t){var s;(s=e.current)==null||s.querySelector(`[type="range"][data-index="${t}"]`).focus()}n&&n(t)}function c_(e,t){return typeof e=="number"&&typeof t=="number"?e===t:typeof e=="object"&&typeof t=="object"?$ye(e,t):!1}const C1e={horizontal:{offset:e=>({left:`${e}%`}),leap:e=>({width:`${e}%`})},"horizontal-reverse":{offset:e=>({right:`${e}%`}),leap:e=>({width:`${e}%`})},vertical:{offset:e=>({bottom:`${e}%`}),leap:e=>({height:`${e}%`})}},A1e=e=>e;let u_;function c6(){return u_===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?u_=CSS.supports("touch-action","none"):u_=!0),u_}function P1e(e){const{"aria-labelledby":t,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:o=!1,marks:s=!1,max:a=100,min:l=0,name:c,onChange:u,onChangeCommitted:d,orientation:f="horizontal",rootRef:h,scale:p=A1e,step:g=1,tabIndex:v,value:m}=e,y=I.useRef(),[b,_]=I.useState(-1),[x,w]=I.useState(-1),[S,C]=I.useState(!1),A=I.useRef(0),[T,O]=Wi({controlled:m,default:n??l,name:"Slider"}),R=u&&((Ee,Ie,U)=>{const E=Ee.nativeEvent||Ee,P=new E.constructor(E.type,E);Object.defineProperty(P,"target",{writable:!0,value:{value:Ie,name:c}}),u(P,Ie,U)}),L=Array.isArray(T);let D=L?T.slice().sort(fK):[T];D=D.map(Ee=>Lv(Ee,l,a));const $=s===!0&&g!==null?[...Array(Math.floor((a-l)/g)+1)].map((Ee,Ie)=>({value:l+g*Ie})):s||[],z=$.map(Ee=>Ee.value),{isFocusVisibleRef:H,onBlur:B,onFocus:V,ref:J}=_h(),[K,ie]=I.useState(-1),ce=I.useRef(),pe=cn(J,ce),se=cn(h,pe),G=Ee=>Ie=>{var U;const E=Number(Ie.currentTarget.getAttribute("data-index"));V(Ie),H.current===!0&&ie(E),w(E),Ee==null||(U=Ee.onFocus)==null||U.call(Ee,Ie)},he=Ee=>Ie=>{var U;B(Ie),H.current===!1&&ie(-1),w(-1),Ee==null||(U=Ee.onBlur)==null||U.call(Ee,Ie)};Yr(()=>{if(r&&ce.current.contains(document.activeElement)){var Ee;(Ee=document.activeElement)==null||Ee.blur()}},[r]),r&&b!==-1&&_(-1),r&&K!==-1&&ie(-1);const Z=Ee=>Ie=>{var U;(U=Ee.onChange)==null||U.call(Ee,Ie);const E=Number(Ie.currentTarget.getAttribute("data-index")),P=D[E],ee=z.indexOf(P);let ye=Ie.target.valueAsNumber;if($&&g==null){const be=z[z.length-1];ye>be?ye=be:ye<z[0]?ye=z[0]:ye=ye<P?z[ee-1]:z[ee+1]}if(ye=Lv(ye,l,a),L){i&&(ye=Lv(ye,D[E-1]||-1/0,D[E+1]||1/0));const be=ye;ye=l6({values:D,newValue:ye,index:E});let Me=E;i||(Me=ye.indexOf(be)),l_({sliderRef:ce,activeIndex:Me})}O(ye),ie(E),R&&!c_(ye,T)&&R(Ie,ye,E),d&&d(Ie,ye)},ae=I.useRef();let oe=f;o&&f==="horizontal"&&(oe+="-reverse");const te=({finger:Ee,move:Ie=!1})=>{const{current:U}=ce,{width:E,height:P,bottom:ee,left:ye}=U.getBoundingClientRect();let be;oe.indexOf("vertical")===0?be=(ee-Ee.y)/P:be=(Ee.x-ye)/E,oe.indexOf("-reverse")!==-1&&(be=1-be);let Me;if(Me=_1e(be,l,a),g)Me=S1e(Me,g,l);else{const Ge=a6(z,Me);Me=z[Ge]}Me=Lv(Me,l,a);let ze=0;if(L){Ie?ze=ae.current:ze=a6(D,Me),i&&(Me=Lv(Me,D[ze-1]||-1/0,D[ze+1]||1/0));const Ge=Me;Me=l6({values:D,newValue:Me,index:ze}),i&&Ie||(ze=Me.indexOf(Ge),ae.current=ze)}return{newValue:Me,activeIndex:ze}},ve=tr(Ee=>{const Ie=a_(Ee,y);if(!Ie)return;if(A.current+=1,Ee.type==="mousemove"&&Ee.buttons===0){ne(Ee);return}const{newValue:U,activeIndex:E}=te({finger:Ie,move:!0});l_({sliderRef:ce,activeIndex:E,setActive:_}),O(U),!S&&A.current>x1e&&C(!0),R&&!c_(U,T)&&R(Ee,U,E)}),ne=tr(Ee=>{const Ie=a_(Ee,y);if(C(!1),!Ie)return;const{newValue:U}=te({finger:Ie,move:!0});_(-1),Ee.type==="touchend"&&w(-1),d&&d(Ee,U),y.current=void 0,Ce()}),xe=tr(Ee=>{if(r)return;c6()||Ee.preventDefault();const Ie=Ee.changedTouches[0];Ie!=null&&(y.current=Ie.identifier);const U=a_(Ee,y);if(U!==!1){const{newValue:P,activeIndex:ee}=te({finger:U});l_({sliderRef:ce,activeIndex:ee,setActive:_}),O(P),R&&!c_(P,T)&&R(Ee,P,ee)}A.current=0;const E=kn(ce.current);E.addEventListener("touchmove",ve,{passive:!0}),E.addEventListener("touchend",ne,{passive:!0})}),Ce=I.useCallback(()=>{const Ee=kn(ce.current);Ee.removeEventListener("mousemove",ve),Ee.removeEventListener("mouseup",ne),Ee.removeEventListener("touchmove",ve),Ee.removeEventListener("touchend",ne)},[ne,ve]);I.useEffect(()=>{const{current:Ee}=ce;return Ee.addEventListener("touchstart",xe,{passive:c6()}),()=>{Ee.removeEventListener("touchstart",xe),Ce()}},[Ce,xe]),I.useEffect(()=>{r&&Ce()},[r,Ce]);const me=Ee=>Ie=>{var U;if((U=Ee.onMouseDown)==null||U.call(Ee,Ie),r||Ie.defaultPrevented||Ie.button!==0)return;Ie.preventDefault();const E=a_(Ie,y);if(E!==!1){const{newValue:ee,activeIndex:ye}=te({finger:E});l_({sliderRef:ce,activeIndex:ye,setActive:_}),O(ee),R&&!c_(ee,T)&&R(Ie,ee,ye)}A.current=0;const P=kn(ce.current);P.addEventListener("mousemove",ve,{passive:!0}),P.addEventListener("mouseup",ne)},X=_2(L?D[0]:l,l,a),Q=_2(D[D.length-1],l,a)-X,Re=(Ee={})=>{const Ie=Cf(Ee),U={onMouseDown:me(Ie||{})},E=M({},Ie,U);return M({},Ee,{ref:se},E)},Pe=Ee=>Ie=>{var U;(U=Ee.onMouseOver)==null||U.call(Ee,Ie);const E=Number(Ie.currentTarget.getAttribute("data-index"));w(E)},le=Ee=>Ie=>{var U;(U=Ee.onMouseLeave)==null||U.call(Ee,Ie),w(-1)};return{active:b,axis:oe,axisProps:C1e,dragging:S,focusedThumbIndex:K,getHiddenInputProps:(Ee={})=>{var Ie;const U=Cf(Ee),E={onChange:Z(U||{}),onFocus:G(U||{}),onBlur:he(U||{})},P=M({},U,E);return M({tabIndex:v,"aria-labelledby":t,"aria-orientation":f,"aria-valuemax":p(a),"aria-valuemin":p(l),name:c,type:"range",min:e.min,max:e.max,step:e.step===null&&e.marks?"any":(Ie=e.step)!=null?Ie:void 0,disabled:r},Ee,P,{style:M({},oX,{direction:o?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:Re,getThumbProps:(Ee={})=>{const Ie=Cf(Ee),U={onMouseOver:Pe(Ie||{}),onMouseLeave:le(Ie||{})};return M({},Ee,Ie,U)},marks:$,open:x,range:L,rootRef:se,trackLeap:Q,trackOffset:X,values:D,getThumbStyle:Ee=>({pointerEvents:b!==-1&&b!==Ee?"none":void 0})}}function M1e(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:i,resumeHideDuration:o}=e,s=I.useRef();I.useEffect(()=>{if(!i)return;function m(y){y.defaultPrevented||(y.key==="Escape"||y.key==="Esc")&&(r==null||r(y,"escapeKeyDown"))}return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[i,r]);const a=tr((m,y)=>{r==null||r(m,y)}),l=tr(m=>{!r||m==null||(clearTimeout(s.current),s.current=setTimeout(()=>{a(null,"timeout")},m))});I.useEffect(()=>(i&&l(t),()=>{clearTimeout(s.current)}),[i,t,l]);const c=m=>{r==null||r(m,"clickaway")},u=()=>{clearTimeout(s.current)},d=I.useCallback(()=>{t!=null&&l(o??t*.5)},[t,o,l]),f=m=>y=>{const b=m.onBlur;b==null||b(y),d()},h=m=>y=>{const b=m.onFocus;b==null||b(y),u()},p=m=>y=>{const b=m.onMouseEnter;b==null||b(y),u()},g=m=>y=>{const b=m.onMouseLeave;b==null||b(y),d()};return I.useEffect(()=>{if(!n&&i)return window.addEventListener("focus",d),window.addEventListener("blur",u),()=>{window.removeEventListener("focus",d),window.removeEventListener("blur",u)}},[n,d,i]),{getRootProps:(m={})=>{const y=M({},Cf(e),Cf(m));return M({role:"presentation"},m,y,{onBlur:f(y),onFocus:h(y),onMouseEnter:p(y),onMouseLeave:g(y)})},onClickAway:c}}const E1e=["onChange","maxRows","minRows","style","value"];function d_(e){return parseInt(e,10)||0}const T1e={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function u6(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflow}const hK=I.forwardRef(function(t,n){const{onChange:r,maxRows:i,minRows:o=1,style:s,value:a}=t,l=He(t,E1e),{current:c}=I.useRef(a!=null),u=I.useRef(null),d=cn(n,u),f=I.useRef(null),h=I.useRef(0),[p,g]=I.useState({outerHeightStyle:0}),v=I.useCallback(()=>{const _=u.current,w=Ai(_).getComputedStyle(_);if(w.width==="0px")return{outerHeightStyle:0};const S=f.current;S.style.width=w.width,S.value=_.value||t.placeholder||"x",S.value.slice(-1)===`
`&&(S.value+=" ");const C=w.boxSizing,A=d_(w.paddingBottom)+d_(w.paddingTop),T=d_(w.borderBottomWidth)+d_(w.borderTopWidth),O=S.scrollHeight;S.value="x";const R=S.scrollHeight;let L=O;o&&(L=Math.max(Number(o)*R,L)),i&&(L=Math.min(Number(i)*R,L)),L=Math.max(L,R);const D=L+(C==="border-box"?A+T:0),$=Math.abs(L-O)<=1;return{outerHeightStyle:D,overflow:$}},[i,o,t.placeholder]),m=(_,x)=>{const{outerHeightStyle:w,overflow:S}=x;return h.current<20&&(w>0&&Math.abs((_.outerHeightStyle||0)-w)>1||_.overflow!==S)?(h.current+=1,{overflow:S,outerHeightStyle:w}):_},y=I.useCallback(()=>{const _=v();u6(_)||g(x=>m(x,_))},[v]);Yr(()=>{const _=()=>{const O=v();u6(O)||Nu.flushSync(()=>{g(R=>m(R,O))})},x=()=>{h.current=0,_()};let w;const S=xh(x),C=u.current,A=Ai(C);A.addEventListener("resize",S);let T;return typeof ResizeObserver<"u"&&(T=new ResizeObserver(x),T.observe(C)),()=>{S.clear(),cancelAnimationFrame(w),A.removeEventListener("resize",S),T&&T.disconnect()}},[v]),Yr(()=>{y()}),I.useEffect(()=>{h.current=0},[a]);const b=_=>{h.current=0,c||y(),r&&r(_)};return q.jsxs(I.Fragment,{children:[q.jsx("textarea",M({value:a,onChange:b,ref:d,rows:o,style:M({height:p.outerHeightStyle,overflow:p.overflow?"hidden":void 0},s)},l)),q.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:f,tabIndex:-1,style:M({},T1e.shadow,s,{paddingTop:0,paddingBottom:0})})]})});function d6(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function pK(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:r,matchFrom:i="any",stringify:o,trim:s=!1}=e;return(a,{inputValue:l,getOptionLabel:c})=>{let u=s?l.trim():l;n&&(u=u.toLowerCase()),t&&(u=d6(u));const d=u?a.filter(f=>{let h=(o||c)(f);return n&&(h=h.toLowerCase()),t&&(h=d6(h)),i==="start"?h.indexOf(u)===0:h.indexOf(u)>-1}):a;return typeof r=="number"?d.slice(0,r):d}}function NT(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const O1e=pK(),f6=5,I1e=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function mK(e){const{unstable_isActiveElementInListbox:t=I1e,unstable_classNamePrefix:n="Mui",autoComplete:r=!1,autoHighlight:i=!1,autoSelect:o=!1,blurOnSelect:s=!1,clearOnBlur:a=!e.freeSolo,clearOnEscape:l=!1,componentName:c="useAutocomplete",defaultValue:u=e.multiple?[]:null,disableClearable:d=!1,disableCloseOnSelect:f=!1,disabled:h,disabledItemsFocusable:p=!1,disableListWrap:g=!1,filterOptions:v=O1e,filterSelectedOptions:m=!1,freeSolo:y=!1,getOptionDisabled:b,getOptionKey:_,getOptionLabel:x=Ae=>{var de;return(de=Ae.label)!=null?de:Ae},groupBy:w,handleHomeEndKeys:S=!e.freeSolo,id:C,includeInputInList:A=!1,inputValue:T,isOptionEqualToValue:O=(Ae,de)=>Ae===de,multiple:R=!1,onChange:L,onClose:D,onHighlightChange:$,onInputChange:z,onOpen:H,open:B,openOnFocus:V=!1,options:J,readOnly:K=!1,selectOnFocus:ie=!e.freeSolo,value:ce}=e,pe=Ls(C);let se=x;se=Ae=>{const de=x(Ae);return typeof de!="string"?String(de):de};const G=I.useRef(!1),he=I.useRef(!0),Z=I.useRef(null),ae=I.useRef(null),[oe,te]=I.useState(null),[ve,ne]=I.useState(-1),xe=i?0:-1,Ce=I.useRef(xe),[me,X]=Wi({controlled:ce,default:u,name:c}),[Q,Re]=Wi({controlled:T,default:"",name:c,state:"inputValue"}),[Pe,le]=I.useState(!1),Oe=I.useCallback((Ae,de)=>{if(!(R?me.length<de.length:de!==null)&&!a)return;let ke;if(R)ke="";else if(de==null)ke="";else{const qe=se(de);ke=typeof qe=="string"?qe:""}Q!==ke&&(Re(ke),z&&z(Ae,ke,"reset"))},[se,Q,R,z,Re,a,me]),[Be,De]=Wi({controlled:B,default:!1,name:c,state:"open"}),[Ee,Ie]=I.useState(!0),U=!R&&me!=null&&Q===se(me),E=Be&&!K,P=E?v(J.filter(Ae=>!(m&&(R?me:[me]).some(de=>de!==null&&O(Ae,de)))),{inputValue:U&&Ee?"":Q,getOptionLabel:se}):[],ee=B5({filteredOptions:P,value:me,inputValue:Q});I.useEffect(()=>{const Ae=me!==ee.value;Pe&&!Ae||y&&!Ae||Oe(null,me)},[me,Oe,Pe,ee.value,y]);const ye=Be&&P.length>0&&!K,be=tr(Ae=>{Ae===-1?Z.current.focus():oe.querySelector(`[data-tag-index="${Ae}"]`).focus()});I.useEffect(()=>{R&&ve>me.length-1&&(ne(-1),be(-1))},[me,R,ve,be]);function Me(Ae,de){if(!ae.current||Ae<0||Ae>=P.length)return-1;let fe=Ae;for(;;){const ke=ae.current.querySelector(`[data-option-index="${fe}"]`),qe=p?!1:!ke||ke.disabled||ke.getAttribute("aria-disabled")==="true";if(ke&&ke.hasAttribute("tabindex")&&!qe)return fe;if(de==="next"?fe=(fe+1)%P.length:fe=(fe-1+P.length)%P.length,fe===Ae)return-1}}const ze=tr(({event:Ae,index:de,reason:fe="auto"})=>{if(Ce.current=de,de===-1?Z.current.removeAttribute("aria-activedescendant"):Z.current.setAttribute("aria-activedescendant",`${pe}-option-${de}`),$&&$(Ae,de===-1?null:P[de],fe),!ae.current)return;const ke=ae.current.querySelector(`[role="option"].${n}-focused`);ke&&(ke.classList.remove(`${n}-focused`),ke.classList.remove(`${n}-focusVisible`));let qe=ae.current;if(ae.current.getAttribute("role")!=="listbox"&&(qe=ae.current.parentElement.querySelector('[role="listbox"]')),!qe)return;if(de===-1){qe.scrollTop=0;return}const st=ae.current.querySelector(`[data-option-index="${de}"]`);if(st&&(st.classList.add(`${n}-focused`),fe==="keyboard"&&st.classList.add(`${n}-focusVisible`),qe.scrollHeight>qe.clientHeight&&fe!=="mouse"&&fe!=="touch")){const Ct=st,ft=qe.clientHeight+qe.scrollTop,zt=Ct.offsetTop+Ct.offsetHeight;zt>ft?qe.scrollTop=zt-qe.clientHeight:Ct.offsetTop-Ct.offsetHeight*(w?1.3:0)<qe.scrollTop&&(qe.scrollTop=Ct.offsetTop-Ct.offsetHeight*(w?1.3:0))}}),Ge=tr(({event:Ae,diff:de,direction:fe="next",reason:ke="auto"})=>{if(!E)return;const st=Me((()=>{const Ct=P.length-1;if(de==="reset")return xe;if(de==="start")return 0;if(de==="end")return Ct;const ft=Ce.current+de;return ft<0?ft===-1&&A?-1:g&&Ce.current!==-1||Math.abs(de)>1?0:Ct:ft>Ct?ft===Ct+1&&A?-1:g||Math.abs(de)>1?Ct:0:ft})(),fe);if(ze({index:st,reason:ke,event:Ae}),r&&de!=="reset")if(st===-1)Z.current.value=Q;else{const Ct=se(P[st]);Z.current.value=Ct,Ct.toLowerCase().indexOf(Q.toLowerCase())===0&&Q.length>0&&Z.current.setSelectionRange(Q.length,Ct.length)}}),Xe=()=>{const Ae=(de,fe)=>{const ke=de?se(de):"",qe=fe?se(fe):"";return ke===qe};if(Ce.current!==-1&&ee.filteredOptions&&ee.filteredOptions.length!==P.length&&ee.inputValue===Q&&(R?me.length===ee.value.length&&ee.value.every((de,fe)=>se(me[fe])===se(de)):Ae(ee.value,me))){const de=ee.filteredOptions[Ce.current];if(de&&P.some(ke=>se(ke)===se(de)))return!0}return!1},ut=I.useCallback(()=>{if(!E||Xe())return;const Ae=R?me[0]:me;if(P.length===0||Ae==null){Ge({diff:"reset"});return}if(ae.current){if(Ae!=null){const de=P[Ce.current];if(R&&de&&NT(me,ke=>O(de,ke))!==-1)return;const fe=NT(P,ke=>O(ke,Ae));fe===-1?Ge({diff:"reset"}):ze({index:fe});return}if(Ce.current>=P.length-1){ze({index:P.length-1});return}ze({index:Ce.current})}},[P.length,R?!1:me,m,Ge,ze,E,Q,R]),rt=tr(Ae=>{Vm(ae,Ae),Ae&&ut()});I.useEffect(()=>{ut()},[ut]);const dt=Ae=>{Be||(De(!0),Ie(!0),H&&H(Ae))},yt=(Ae,de)=>{Be&&(De(!1),D&&D(Ae,de))},Ke=(Ae,de,fe,ke)=>{if(R){if(me.length===de.length&&me.every((qe,st)=>qe===de[st]))return}else if(me===de)return;L&&L(Ae,de,fe,ke),X(de)},gt=I.useRef(!1),ct=(Ae,de,fe="selectOption",ke="options")=>{let qe=fe,st=de;if(R){st=Array.isArray(me)?me.slice():[];const Ct=NT(st,ft=>O(de,ft));Ct===-1?st.push(de):ke!=="freeSolo"&&(st.splice(Ct,1),qe="removeOption")}Oe(Ae,st),Ke(Ae,st,qe,{option:de}),!f&&(!Ae||!Ae.ctrlKey&&!Ae.metaKey)&&yt(Ae,qe),(s===!0||s==="touch"&&gt.current||s==="mouse"&&!gt.current)&&Z.current.blur()};function mt(Ae,de){if(Ae===-1)return-1;let fe=Ae;for(;;){if(de==="next"&&fe===me.length||de==="previous"&&fe===-1)return-1;const ke=oe.querySelector(`[data-tag-index="${fe}"]`);if(!ke||!ke.hasAttribute("tabindex")||ke.disabled||ke.getAttribute("aria-disabled")==="true")fe+=de==="next"?1:-1;else return fe}}const Dt=(Ae,de)=>{if(!R)return;Q===""&&yt(Ae,"toggleInput");let fe=ve;ve===-1?Q===""&&de==="previous"&&(fe=me.length-1):(fe+=de==="next"?1:-1,fe<0&&(fe=0),fe===me.length&&(fe=-1)),fe=mt(fe,de),ne(fe),be(fe)},_e=Ae=>{G.current=!0,Re(""),z&&z(Ae,"","clear"),Ke(Ae,R?[]:null,"clear")},We=Ae=>de=>{if(Ae.onKeyDown&&Ae.onKeyDown(de),!de.defaultMuiPrevented&&(ve!==-1&&["ArrowLeft","ArrowRight"].indexOf(de.key)===-1&&(ne(-1),be(-1)),de.which!==229))switch(de.key){case"Home":E&&S&&(de.preventDefault(),Ge({diff:"start",direction:"next",reason:"keyboard",event:de}));break;case"End":E&&S&&(de.preventDefault(),Ge({diff:"end",direction:"previous",reason:"keyboard",event:de}));break;case"PageUp":de.preventDefault(),Ge({diff:-f6,direction:"previous",reason:"keyboard",event:de}),dt(de);break;case"PageDown":de.preventDefault(),Ge({diff:f6,direction:"next",reason:"keyboard",event:de}),dt(de);break;case"ArrowDown":de.preventDefault(),Ge({diff:1,direction:"next",reason:"keyboard",event:de}),dt(de);break;case"ArrowUp":de.preventDefault(),Ge({diff:-1,direction:"previous",reason:"keyboard",event:de}),dt(de);break;case"ArrowLeft":Dt(de,"previous");break;case"ArrowRight":Dt(de,"next");break;case"Enter":if(Ce.current!==-1&&E){const fe=P[Ce.current],ke=b?b(fe):!1;if(de.preventDefault(),ke)return;ct(de,fe,"selectOption"),r&&Z.current.setSelectionRange(Z.current.value.length,Z.current.value.length)}else y&&Q!==""&&U===!1&&(R&&de.preventDefault(),ct(de,Q,"createOption","freeSolo"));break;case"Escape":E?(de.preventDefault(),de.stopPropagation(),yt(de,"escape")):l&&(Q!==""||R&&me.length>0)&&(de.preventDefault(),de.stopPropagation(),_e(de));break;case"Backspace":if(R&&!K&&Q===""&&me.length>0){const fe=ve===-1?me.length-1:ve,ke=me.slice();ke.splice(fe,1),Ke(de,ke,"removeOption",{option:me[fe]})}break;case"Delete":if(R&&!K&&Q===""&&me.length>0&&ve!==-1){const fe=ve,ke=me.slice();ke.splice(fe,1),Ke(de,ke,"removeOption",{option:me[fe]})}break}},Ue=Ae=>{le(!0),V&&!G.current&&dt(Ae)},N=Ae=>{if(t(ae)){Z.current.focus();return}le(!1),he.current=!0,G.current=!1,o&&Ce.current!==-1&&E?ct(Ae,P[Ce.current],"blur"):o&&y&&Q!==""?ct(Ae,Q,"blur","freeSolo"):a&&Oe(Ae,me),yt(Ae,"blur")},k=Ae=>{const de=Ae.target.value;Q!==de&&(Re(de),Ie(!1),z&&z(Ae,de,"input")),de===""?!d&&!R&&Ke(Ae,null,"clear"):dt(Ae)},F=Ae=>{const de=Number(Ae.currentTarget.getAttribute("data-option-index"));Ce.current!==de&&ze({event:Ae,index:de,reason:"mouse"})},j=Ae=>{ze({event:Ae,index:Number(Ae.currentTarget.getAttribute("data-option-index")),reason:"touch"}),gt.current=!0},Y=Ae=>{const de=Number(Ae.currentTarget.getAttribute("data-option-index"));ct(Ae,P[de],"selectOption"),gt.current=!1},ue=Ae=>de=>{const fe=me.slice();fe.splice(Ae,1),Ke(de,fe,"removeOption",{option:me[Ae]})},ge=Ae=>{Be?yt(Ae,"toggleInput"):dt(Ae)},Se=Ae=>{Ae.currentTarget.contains(Ae.target)&&Ae.target.getAttribute("id")!==pe&&Ae.preventDefault()},Ne=Ae=>{Ae.currentTarget.contains(Ae.target)&&(Z.current.focus(),ie&&he.current&&Z.current.selectionEnd-Z.current.selectionStart===0&&Z.current.select(),he.current=!1)},Fe=Ae=>{!h&&(Q===""||!Be)&&ge(Ae)};let Ye=y&&Q.length>0;Ye=Ye||(R?me.length>0:me!==null);let at=P;return w&&(at=P.reduce((Ae,de,fe)=>{const ke=w(de);return Ae.length>0&&Ae[Ae.length-1].group===ke?Ae[Ae.length-1].options.push(de):Ae.push({key:fe,index:fe,group:ke,options:[de]}),Ae},[])),h&&Pe&&N(),{getRootProps:(Ae={})=>M({"aria-owns":ye?`${pe}-listbox`:null},Ae,{onKeyDown:We(Ae),onMouseDown:Se,onClick:Ne}),getInputLabelProps:()=>({id:`${pe}-label`,htmlFor:pe}),getInputProps:()=>({id:pe,value:Q,onBlur:N,onFocus:Ue,onChange:k,onMouseDown:Fe,"aria-activedescendant":E?"":null,"aria-autocomplete":r?"both":"list","aria-controls":ye?`${pe}-listbox`:void 0,"aria-expanded":ye,autoComplete:"off",ref:Z,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:h}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:_e}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:ge}),getTagProps:({index:Ae})=>M({key:Ae,"data-tag-index":Ae,tabIndex:-1},!K&&{onDelete:ue(Ae)}),getListboxProps:()=>({role:"listbox",id:`${pe}-listbox`,"aria-labelledby":`${pe}-label`,ref:rt,onMouseDown:Ae=>{Ae.preventDefault()}}),getOptionProps:({index:Ae,option:de})=>{var fe;const ke=(R?me:[me]).some(st=>st!=null&&O(de,st)),qe=b?b(de):!1;return{key:(fe=_==null?void 0:_(de))!=null?fe:se(de),tabIndex:-1,role:"option",id:`${pe}-option-${Ae}`,onMouseMove:F,onClick:Y,onTouchStart:j,"data-option-index":Ae,"aria-disabled":qe,"aria-selected":ke}},id:pe,inputValue:Q,value:me,dirty:Ye,expanded:E&&oe,popupOpen:E,focused:Pe||ve!==-1,anchorEl:oe,setAnchorEl:te,focusedTag:ve,groupedOptions:at}}const R1e=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],k1e=Te(d1e,{name:"MuiPopper",slot:"Root",overridesResolver:(e,t)=>t.root})({}),L1e=I.forwardRef(function(t,n){var r;const i=jA(),o=ot({props:t,name:"MuiPopper"}),{anchorEl:s,component:a,components:l,componentsProps:c,container:u,disablePortal:d,keepMounted:f,modifiers:h,open:p,placement:g,popperOptions:v,popperRef:m,transition:y,slots:b,slotProps:_}=o,x=He(o,R1e),w=(r=b==null?void 0:b.root)!=null?r:l==null?void 0:l.Root,S=M({anchorEl:s,container:u,disablePortal:d,keepMounted:f,modifiers:h,open:p,placement:g,popperOptions:v,popperRef:m,transition:y},x);return q.jsx(k1e,M({as:a,direction:i==null?void 0:i.direction,slots:{root:w},slotProps:_??c},S,{ref:n}))}),w1=L1e;function gK(e){return tt("MuiListSubheader",e)}const $1e=nt("MuiListSubheader",["root","colorPrimary","colorInherit","gutters","inset","sticky"]),D1e=$1e,B1e=["className","color","component","disableGutters","disableSticky","inset"],N1e=e=>{const{classes:t,color:n,disableGutters:r,inset:i,disableSticky:o}=e,s={root:["root",n!=="default"&&`color${Le(n)}`,!r&&"gutters",i&&"inset",!o&&"sticky"]};return it(s,gK,t)},F1e=Te("li",{name:"MuiListSubheader",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${Le(n.color)}`],!n.disableGutters&&t.gutters,n.inset&&t.inset,!n.disableSticky&&t.sticky]}})(({theme:e,ownerState:t})=>M({boxSizing:"border-box",lineHeight:"48px",listStyle:"none",color:(e.vars||e).palette.text.secondary,fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(14)},t.color==="primary"&&{color:(e.vars||e).palette.primary.main},t.color==="inherit"&&{color:"inherit"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.inset&&{paddingLeft:72},!t.disableSticky&&{position:"sticky",top:0,zIndex:1,backgroundColor:(e.vars||e).palette.background.paper})),vK=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiListSubheader"}),{className:i,color:o="default",component:s="li",disableGutters:a=!1,disableSticky:l=!1,inset:c=!1}=r,u=He(r,B1e),d=M({},r,{color:o,component:s,disableGutters:a,disableSticky:l,inset:c}),f=N1e(d);return q.jsx(F1e,M({as:s,className:je(f.root,i),ref:n,ownerState:d},u))});vK.muiSkipListHighlight=!0;const yK=vK,z1e=Un(q.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function bK(e){return tt("MuiChip",e)}const j1e=nt("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),fn=j1e,U1e=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],V1e=e=>{const{classes:t,disabled:n,size:r,color:i,iconColor:o,onDelete:s,clickable:a,variant:l}=e,c={root:["root",l,n&&"disabled",`size${Le(r)}`,`color${Le(i)}`,a&&"clickable",a&&`clickableColor${Le(i)}`,s&&"deletable",s&&`deletableColor${Le(i)}`,`${l}${Le(i)}`],label:["label",`label${Le(r)}`],avatar:["avatar",`avatar${Le(r)}`,`avatarColor${Le(i)}`],icon:["icon",`icon${Le(r)}`,`iconColor${Le(o)}`],deleteIcon:["deleteIcon",`deleteIcon${Le(r)}`,`deleteIconColor${Le(i)}`,`deleteIcon${Le(l)}Color${Le(i)}`]};return it(c,bK,t)},H1e=Te("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:i,clickable:o,onDelete:s,size:a,variant:l}=n;return[{[`& .${fn.avatar}`]:t.avatar},{[`& .${fn.avatar}`]:t[`avatar${Le(a)}`]},{[`& .${fn.avatar}`]:t[`avatarColor${Le(r)}`]},{[`& .${fn.icon}`]:t.icon},{[`& .${fn.icon}`]:t[`icon${Le(a)}`]},{[`& .${fn.icon}`]:t[`iconColor${Le(i)}`]},{[`& .${fn.deleteIcon}`]:t.deleteIcon},{[`& .${fn.deleteIcon}`]:t[`deleteIcon${Le(a)}`]},{[`& .${fn.deleteIcon}`]:t[`deleteIconColor${Le(r)}`]},{[`& .${fn.deleteIcon}`]:t[`deleteIcon${Le(l)}Color${Le(r)}`]},t.root,t[`size${Le(a)}`],t[`color${Le(r)}`],o&&t.clickable,o&&r!=="default"&&t[`clickableColor${Le(r)})`],s&&t.deletable,s&&r!=="default"&&t[`deletableColor${Le(r)}`],t[l],t[`${l}${Le(r)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return M({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${fn.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${fn.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${fn.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${fn.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${fn.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${fn.icon}`]:M({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&M({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},t.color!=="default"&&{color:"inherit"})),[`& .${fn.deleteIcon}`]:M({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:Et(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Et(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:Et(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${fn.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Et(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${fn.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>M({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Et(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${fn.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Et(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${fn.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>M({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${fn.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${fn.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${fn.avatar}`]:{marginLeft:4},[`& .${fn.avatarSmall}`]:{marginLeft:2},[`& .${fn.icon}`]:{marginLeft:4},[`& .${fn.iconSmall}`]:{marginLeft:2},[`& .${fn.deleteIcon}`]:{marginRight:5},[`& .${fn.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Et(e.palette[t.color].main,.7)}`,[`&.${fn.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${fn.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Et(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${fn.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:Et(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),G1e=Te("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${Le(r)}`]]}})(({ownerState:e})=>M({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.variant==="outlined"&&{paddingLeft:11,paddingRight:11},e.size==="small"&&{paddingLeft:8,paddingRight:8},e.size==="small"&&e.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function h6(e){return e.key==="Backspace"||e.key==="Delete"}const W1e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiChip"}),{avatar:i,className:o,clickable:s,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:f,onClick:h,onDelete:p,onKeyDown:g,onKeyUp:v,size:m="medium",variant:y="filled",tabIndex:b,skipFocusWhenDisabled:_=!1}=r,x=He(r,U1e),w=I.useRef(null),S=cn(w,n),C=V=>{V.stopPropagation(),p&&p(V)},A=V=>{V.currentTarget===V.target&&h6(V)&&V.preventDefault(),g&&g(V)},T=V=>{V.currentTarget===V.target&&(p&&h6(V)?p(V):V.key==="Escape"&&w.current&&w.current.blur()),v&&v(V)},O=s!==!1&&h?!0:s,R=O||p?Xr:l||"div",L=M({},r,{component:R,disabled:u,size:m,color:a,iconColor:I.isValidElement(d)&&d.props.color||a,onDelete:!!p,clickable:O,variant:y}),D=V1e(L),$=R===Xr?M({component:l||"div",focusVisibleClassName:D.focusVisible},p&&{disableRipple:!0}):{};let z=null;p&&(z=c&&I.isValidElement(c)?I.cloneElement(c,{className:je(c.props.className,D.deleteIcon),onClick:C}):q.jsx(z1e,{className:je(D.deleteIcon),onClick:C}));let H=null;i&&I.isValidElement(i)&&(H=I.cloneElement(i,{className:je(D.avatar,i.props.className)}));let B=null;return d&&I.isValidElement(d)&&(B=I.cloneElement(d,{className:je(D.icon,d.props.className)})),q.jsxs(H1e,M({as:R,className:je(D.root,o),disabled:O&&u?!0:void 0,onClick:h,onKeyDown:A,onKeyUp:T,ref:S,tabIndex:_&&u?-1:b,ownerState:L},$,x,{children:[H||B,q.jsx(G1e,{className:je(D.label),ownerState:L,children:f}),z]}))}),xK=W1e;function Ic({props:e,states:t,muiFormControl:n}){return t.reduce((r,i)=>(r[i]=e[i],n&&typeof e[i]>"u"&&(r[i]=n[i]),r),{})}const q1e=I.createContext(void 0),ZA=q1e;function Vs(){return I.useContext(ZA)}function v4(e){return q.jsx(Fme,M({},e,{defaultTheme:WA,themeId:fl}))}function p6(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function w2(e,t=!1){return e&&(p6(e.value)&&e.value!==""||t&&p6(e.defaultValue)&&e.defaultValue!=="")}function Y1e(e){return e.startAdornment}function _K(e){return tt("MuiInputBase",e)}const X1e=nt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),oo=X1e,K1e=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],JA=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${Le(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},QA=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Z1e=e=>{const{classes:t,color:n,disabled:r,error:i,endAdornment:o,focused:s,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:f,startAdornment:h,type:p}=e,g={root:["root",`color${Le(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",s&&"focused",a&&"formControl",f&&f!=="medium"&&`size${Le(f)}`,u&&"multiline",h&&"adornedStart",o&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",f==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",h&&"inputAdornedStart",o&&"inputAdornedEnd",d&&"readOnly"]};return it(g,_K,t)},eP=Te("div",{name:"MuiInputBase",slot:"Root",overridesResolver:JA})(({theme:e,ownerState:t})=>M({},e.typography.body1,{color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${oo.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"}},t.multiline&&M({padding:"4px 0 5px"},t.size==="small"&&{paddingTop:1}),t.fullWidth&&{width:"100%"})),tP=Te("input",{name:"MuiInputBase",slot:"Input",overridesResolver:QA})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light",r=M({color:"currentColor"},e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})}),i={opacity:"0 !important"},o=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return M({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${oo.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":o,"&:focus::-moz-placeholder":o,"&:focus:-ms-input-placeholder":o,"&:focus::-ms-input-placeholder":o},[`&.${oo.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},t.size==="small"&&{paddingTop:1},t.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},t.type==="search"&&{MozAppearance:"textfield"})}),J1e=q.jsx(v4,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Q1e=I.forwardRef(function(t,n){var r;const i=ot({props:t,name:"MuiInputBase"}),{"aria-describedby":o,autoComplete:s,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:f,disableInjectingGlobalStyles:h,endAdornment:p,fullWidth:g=!1,id:v,inputComponent:m="input",inputProps:y={},inputRef:b,maxRows:_,minRows:x,multiline:w=!1,name:S,onBlur:C,onChange:A,onClick:T,onFocus:O,onKeyDown:R,onKeyUp:L,placeholder:D,readOnly:$,renderSuffix:z,rows:H,slotProps:B={},slots:V={},startAdornment:J,type:K="text",value:ie}=i,ce=He(i,K1e),pe=y.value!=null?y.value:ie,{current:se}=I.useRef(pe!=null),G=I.useRef(),he=I.useCallback(E=>{},[]),Z=cn(G,b,y.ref,he),[ae,oe]=I.useState(!1),te=Vs(),ve=Ic({props:i,muiFormControl:te,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ve.focused=te?te.focused:ae,I.useEffect(()=>{!te&&f&&ae&&(oe(!1),C&&C())},[te,f,ae,C]);const ne=te&&te.onFilled,xe=te&&te.onEmpty,Ce=I.useCallback(E=>{w2(E)?ne&&ne():xe&&xe()},[ne,xe]);Yr(()=>{se&&Ce({value:pe})},[pe,Ce,se]);const me=E=>{if(ve.disabled){E.stopPropagation();return}O&&O(E),y.onFocus&&y.onFocus(E),te&&te.onFocus?te.onFocus(E):oe(!0)},X=E=>{C&&C(E),y.onBlur&&y.onBlur(E),te&&te.onBlur?te.onBlur(E):oe(!1)},Q=(E,...P)=>{if(!se){const ee=E.target||G.current;if(ee==null)throw new Error(Eo(1));Ce({value:ee.value})}y.onChange&&y.onChange(E,...P),A&&A(E,...P)};I.useEffect(()=>{Ce(G.current)},[]);const Re=E=>{G.current&&E.currentTarget===E.target&&G.current.focus(),T&&T(E)};let Pe=m,le=y;w&&Pe==="input"&&(H?le=M({type:void 0,minRows:H,maxRows:H},le):le=M({type:void 0,maxRows:_,minRows:x},le),Pe=hK);const Oe=E=>{Ce(E.animationName==="mui-auto-fill-cancel"?G.current:{value:"x"})};I.useEffect(()=>{te&&te.setAdornedStart(!!J)},[te,J]);const Be=M({},i,{color:ve.color||"primary",disabled:ve.disabled,endAdornment:p,error:ve.error,focused:ve.focused,formControl:te,fullWidth:g,hiddenLabel:ve.hiddenLabel,multiline:w,size:ve.size,startAdornment:J,type:K}),De=Z1e(Be),Ee=V.root||c.Root||eP,Ie=B.root||u.root||{},U=V.input||c.Input||tP;return le=M({},le,(r=B.input)!=null?r:u.input),q.jsxs(I.Fragment,{children:[!h&&J1e,q.jsxs(Ee,M({},Ie,!da(Ee)&&{ownerState:M({},Be,Ie.ownerState)},{ref:n,onClick:Re},ce,{className:je(De.root,Ie.className,l,$&&"MuiInputBase-readOnly"),children:[J,q.jsx(ZA.Provider,{value:null,children:q.jsx(U,M({ownerState:Be,"aria-invalid":ve.error,"aria-describedby":o,autoComplete:s,autoFocus:a,defaultValue:d,disabled:ve.disabled,id:v,onAnimationStart:Oe,name:S,placeholder:D,readOnly:$,required:ve.required,rows:H,value:pe,onKeyDown:R,onKeyUp:L,type:K},le,!da(U)&&{as:Pe,ownerState:M({},Be,le.ownerState)},{ref:Z,className:je(De.input,le.className,$&&"MuiInputBase-readOnly"),onBlur:X,onChange:Q,onFocus:me}))}),p,z?z(M({},ve,{startAdornment:J})):null]}))]})}),S1=Q1e;function wK(e){return tt("MuiInput",e)}const exe=M({},oo,nt("MuiInput",["root","underline","input"])),Xl=exe;function SK(e){return tt("MuiOutlinedInput",e)}const txe=M({},oo,nt("MuiOutlinedInput",["root","notchedOutline","input"])),Qs=txe;function CK(e){return tt("MuiFilledInput",e)}const nxe=M({},oo,nt("MuiFilledInput",["root","underline","input"])),so=nxe,y4=Un(q.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown");function AK(e){return tt("MuiAutocomplete",e)}const rxe=nt("MuiAutocomplete",["root","expanded","fullWidth","focused","focusVisible","tag","tagSizeSmall","tagSizeMedium","hasPopupIcon","hasClearIcon","inputRoot","input","inputFocused","endAdornment","clearIndicator","popupIndicator","popupIndicatorOpen","popper","popperDisablePortal","paper","listbox","loading","noOptions","option","groupLabel","groupUl"]),nn=rxe;var m6,g6;const ixe=["autoComplete","autoHighlight","autoSelect","blurOnSelect","ChipProps","className","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","componentsProps","defaultValue","disableClearable","disableCloseOnSelect","disabled","disabledItemsFocusable","disableListWrap","disablePortal","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","fullWidth","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","isOptionEqualToValue","groupBy","handleHomeEndKeys","id","includeInputInList","inputValue","limitTags","ListboxComponent","ListboxProps","loading","loadingText","multiple","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","PaperComponent","PopperComponent","popupIcon","readOnly","renderGroup","renderInput","renderOption","renderTags","selectOnFocus","size","slotProps","value"],oxe=["ref"],sxe=["key"],axe=e=>{const{classes:t,disablePortal:n,expanded:r,focused:i,fullWidth:o,hasClearIcon:s,hasPopupIcon:a,inputFocused:l,popupOpen:c,size:u}=e,d={root:["root",r&&"expanded",i&&"focused",o&&"fullWidth",s&&"hasClearIcon",a&&"hasPopupIcon"],inputRoot:["inputRoot"],input:["input",l&&"inputFocused"],tag:["tag",`tagSize${Le(u)}`],endAdornment:["endAdornment"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",c&&"popupIndicatorOpen"],popper:["popper",n&&"popperDisablePortal"],paper:["paper"],listbox:["listbox"],loading:["loading"],noOptions:["noOptions"],option:["option"],groupLabel:["groupLabel"],groupUl:["groupUl"]};return it(d,AK,t)},lxe=Te("div",{name:"MuiAutocomplete",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{fullWidth:r,hasClearIcon:i,hasPopupIcon:o,inputFocused:s,size:a}=n;return[{[`& .${nn.tag}`]:t.tag},{[`& .${nn.tag}`]:t[`tagSize${Le(a)}`]},{[`& .${nn.inputRoot}`]:t.inputRoot},{[`& .${nn.input}`]:t.input},{[`& .${nn.input}`]:s&&t.inputFocused},t.root,r&&t.fullWidth,o&&t.hasPopupIcon,i&&t.hasClearIcon]}})(({ownerState:e})=>M({[`&.${nn.focused} .${nn.clearIndicator}`]:{visibility:"visible"},"@media (pointer: fine)":{[`&:hover .${nn.clearIndicator}`]:{visibility:"visible"}}},e.fullWidth&&{width:"100%"},{[`& .${nn.tag}`]:M({margin:3,maxWidth:"calc(100% - 6px)"},e.size==="small"&&{margin:2,maxWidth:"calc(100% - 4px)"}),[`& .${nn.inputRoot}`]:{flexWrap:"wrap",[`.${nn.hasPopupIcon}&, .${nn.hasClearIcon}&`]:{paddingRight:30},[`.${nn.hasPopupIcon}.${nn.hasClearIcon}&`]:{paddingRight:56},[`& .${nn.input}`]:{width:0,minWidth:30}},[`& .${Xl.root}`]:{paddingBottom:1,"& .MuiInput-input":{padding:"4px 4px 4px 0px"}},[`& .${Xl.root}.${oo.sizeSmall}`]:{[`& .${Xl.input}`]:{padding:"2px 4px 3px 0"}},[`& .${Qs.root}`]:{padding:9,[`.${nn.hasPopupIcon}&, .${nn.hasClearIcon}&`]:{paddingRight:39},[`.${nn.hasPopupIcon}.${nn.hasClearIcon}&`]:{paddingRight:65},[`& .${nn.input}`]:{padding:"7.5px 4px 7.5px 5px"},[`& .${nn.endAdornment}`]:{right:9}},[`& .${Qs.root}.${oo.sizeSmall}`]:{paddingTop:6,paddingBottom:6,paddingLeft:6,[`& .${nn.input}`]:{padding:"2.5px 4px 2.5px 8px"}},[`& .${so.root}`]:{paddingTop:19,paddingLeft:8,[`.${nn.hasPopupIcon}&, .${nn.hasClearIcon}&`]:{paddingRight:39},[`.${nn.hasPopupIcon}.${nn.hasClearIcon}&`]:{paddingRight:65},[`& .${so.input}`]:{padding:"7px 4px"},[`& .${nn.endAdornment}`]:{right:9}},[`& .${so.root}.${oo.sizeSmall}`]:{paddingBottom:1,[`& .${so.input}`]:{padding:"2.5px 4px"}},[`& .${oo.hiddenLabel}`]:{paddingTop:8},[`& .${so.root}.${oo.hiddenLabel}`]:{paddingTop:0,paddingBottom:0,[`& .${nn.input}`]:{paddingTop:16,paddingBottom:17}},[`& .${so.root}.${oo.hiddenLabel}.${oo.sizeSmall}`]:{[`& .${nn.input}`]:{paddingTop:8,paddingBottom:9}},[`& .${nn.input}`]:M({flexGrow:1,textOverflow:"ellipsis",opacity:0},e.inputFocused&&{opacity:1})})),cxe=Te("div",{name:"MuiAutocomplete",slot:"EndAdornment",overridesResolver:(e,t)=>t.endAdornment})({position:"absolute",right:0,top:"calc(50% - 14px)"}),uxe=Te($i,{name:"MuiAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})({marginRight:-2,padding:4,visibility:"hidden"}),dxe=Te($i,{name:"MuiAutocomplete",slot:"PopupIndicator",overridesResolver:({ownerState:e},t)=>M({},t.popupIndicator,e.popupOpen&&t.popupIndicatorOpen)})(({ownerState:e})=>M({padding:2,marginRight:-2},e.popupOpen&&{transform:"rotate(180deg)"})),fxe=Te(w1,{name:"MuiAutocomplete",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${nn.option}`]:t.option},t.popper,n.disablePortal&&t.popperDisablePortal]}})(({theme:e,ownerState:t})=>M({zIndex:(e.vars||e).zIndex.modal},t.disablePortal&&{position:"absolute"})),hxe=Te(cs,{name:"MuiAutocomplete",slot:"Paper",overridesResolver:(e,t)=>t.paper})(({theme:e})=>M({},e.typography.body1,{overflow:"auto"})),pxe=Te("div",{name:"MuiAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),mxe=Te("div",{name:"MuiAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary,padding:"14px 16px"})),gxe=Te("div",{name:"MuiAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({listStyle:"none",margin:0,padding:"8px 0",maxHeight:"40vh",overflow:"auto",position:"relative",[`& .${nn.option}`]:{minHeight:48,display:"flex",overflow:"hidden",justifyContent:"flex-start",alignItems:"center",cursor:"pointer",paddingTop:6,boxSizing:"border-box",outline:"0",WebkitTapHighlightColor:"transparent",paddingBottom:6,paddingLeft:16,paddingRight:16,[e.breakpoints.up("sm")]:{minHeight:"auto"},[`&.${nn.focused}`]:{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},'&[aria-disabled="true"]':{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${nn.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},'&[aria-selected="true"]':{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Et(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${nn.focused}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${nn.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}}})),vxe=Te(yK,{name:"MuiAutocomplete",slot:"GroupLabel",overridesResolver:(e,t)=>t.groupLabel})(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,top:-8})),yxe=Te("ul",{name:"MuiAutocomplete",slot:"GroupUl",overridesResolver:(e,t)=>t.groupUl})({padding:0,[`& .${nn.option}`]:{paddingLeft:24}}),bxe=I.forwardRef(function(t,n){var r,i,o,s;const a=ot({props:t,name:"MuiAutocomplete"}),{autoComplete:l=!1,autoHighlight:c=!1,autoSelect:u=!1,blurOnSelect:d=!1,ChipProps:f,className:h,clearIcon:p=m6||(m6=q.jsx(XX,{fontSize:"small"})),clearOnBlur:g=!a.freeSolo,clearOnEscape:v=!1,clearText:m="Clear",closeText:y="Close",componentsProps:b={},defaultValue:_=a.multiple?[]:null,disableClearable:x=!1,disableCloseOnSelect:w=!1,disabled:S=!1,disabledItemsFocusable:C=!1,disableListWrap:A=!1,disablePortal:T=!1,filterSelectedOptions:O=!1,forcePopupIcon:R="auto",freeSolo:L=!1,fullWidth:D=!1,getLimitTagsText:$=de=>`+${de}`,getOptionLabel:z,groupBy:H,handleHomeEndKeys:B=!a.freeSolo,includeInputInList:V=!1,limitTags:J=-1,ListboxComponent:K="ul",ListboxProps:ie,loading:ce=!1,loadingText:pe="Loading…",multiple:se=!1,noOptionsText:G="No options",openOnFocus:he=!1,openText:Z="Open",PaperComponent:ae=cs,PopperComponent:oe=w1,popupIcon:te=g6||(g6=q.jsx(y4,{})),readOnly:ve=!1,renderGroup:ne,renderInput:xe,renderOption:Ce,renderTags:me,selectOnFocus:X=!a.freeSolo,size:Q="medium",slotProps:Re={}}=a,Pe=He(a,ixe),{getRootProps:le,getInputProps:Oe,getInputLabelProps:Be,getPopupIndicatorProps:De,getClearProps:Ee,getTagProps:Ie,getListboxProps:U,getOptionProps:E,value:P,dirty:ee,expanded:ye,id:be,popupOpen:Me,focused:ze,focusedTag:Ge,anchorEl:Xe,setAnchorEl:ut,inputValue:rt,groupedOptions:dt}=mK(M({},a,{componentName:"Autocomplete"})),yt=!x&&!S&&ee&&!ve,Ke=(!L||R===!0)&&R!==!1,{onMouseDown:gt}=Oe(),{ref:ct}=ie??{},mt=U(),{ref:Dt}=mt,_e=He(mt,oxe),We=cn(Dt,ct),N=z||(de=>{var fe;return(fe=de.label)!=null?fe:de}),k=M({},a,{disablePortal:T,expanded:ye,focused:ze,fullWidth:D,getOptionLabel:N,hasClearIcon:yt,hasPopupIcon:Ke,inputFocused:Ge===-1,popupOpen:Me,size:Q}),F=axe(k);let j;if(se&&P.length>0){const de=fe=>M({className:F.tag,disabled:S},Ie(fe));me?j=me(P,de,k):j=P.map((fe,ke)=>q.jsx(xK,M({label:N(fe),size:Q},de({index:ke}),f)))}if(J>-1&&Array.isArray(j)){const de=j.length-J;!ze&&de>0&&(j=j.splice(0,J),j.push(q.jsx("span",{className:F.tag,children:$(de)},j.length)))}const ue=ne||(de=>q.jsxs("li",{children:[q.jsx(vxe,{className:F.groupLabel,ownerState:k,component:"div",children:de.group}),q.jsx(yxe,{className:F.groupUl,ownerState:k,children:de.children})]},de.key)),Se=Ce||((de,fe)=>{const{key:ke}=de,qe=He(de,sxe);return q.jsx("li",M({},qe,{children:N(fe)}),ke)}),Ne=(de,fe)=>{const ke=E({option:de,index:fe});return Se(M({},ke,{className:F.option}),de,{selected:ke["aria-selected"],index:fe,inputValue:rt},k)},Fe=(r=Re.clearIndicator)!=null?r:b.clearIndicator,Ye=(i=Re.paper)!=null?i:b.paper,at=(o=Re.popper)!=null?o:b.popper,Ae=(s=Re.popupIndicator)!=null?s:b.popupIndicator;return q.jsxs(I.Fragment,{children:[q.jsx(lxe,M({ref:n,className:je(F.root,h),ownerState:k},le(Pe),{children:xe({id:be,disabled:S,fullWidth:!0,size:Q==="small"?"small":void 0,InputLabelProps:Be(),InputProps:M({ref:ut,className:F.inputRoot,startAdornment:j,onClick:de=>{de.target===de.currentTarget&&gt(de)}},(yt||Ke)&&{endAdornment:q.jsxs(cxe,{className:F.endAdornment,ownerState:k,children:[yt?q.jsx(uxe,M({},Ee(),{"aria-label":m,title:m,ownerState:k},Fe,{className:je(F.clearIndicator,Fe==null?void 0:Fe.className),children:p})):null,Ke?q.jsx(dxe,M({},De(),{disabled:S,"aria-label":Me?y:Z,title:Me?y:Z,ownerState:k},Ae,{className:je(F.popupIndicator,Ae==null?void 0:Ae.className),children:te})):null]})}),inputProps:M({className:F.input,disabled:S,readOnly:ve},Oe())})})),Xe?q.jsx(fxe,M({as:oe,disablePortal:T,style:{width:Xe?Xe.clientWidth:null},ownerState:k,role:"presentation",anchorEl:Xe,open:Me},at,{className:je(F.popper,at==null?void 0:at.className),children:q.jsxs(hxe,M({ownerState:k,as:ae},Ye,{className:je(F.paper,Ye==null?void 0:Ye.className),children:[ce&&dt.length===0?q.jsx(pxe,{className:F.loading,ownerState:k,children:pe}):null,dt.length===0&&!L&&!ce?q.jsx(mxe,{className:F.noOptions,ownerState:k,role:"presentation",onMouseDown:de=>{de.preventDefault()},children:G}):null,dt.length>0?q.jsx(gxe,M({as:K,className:F.listbox,ownerState:k},_e,ie,{ref:We,children:dt.map((de,fe)=>H?ue({key:de.key,group:de.group,children:de.options.map((ke,qe)=>Ne(ke,de.index+qe))}):Ne(de,fe))})):null]}))})):null]})}),xxe=bxe,_xe=Un(q.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function PK(e){return tt("MuiAvatar",e)}const wxe=nt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]),MK=wxe,Sxe=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],Cxe=e=>{const{classes:t,variant:n,colorDefault:r}=e;return it({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},PK,t)},Axe=Te("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>M({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.variant==="square"&&{borderRadius:0},t.colorDefault&&M({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}))),Pxe=Te("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Mxe=Te(_xe,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Exe({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){const[i,o]=I.useState(!1);return I.useEffect(()=>{if(!n&&!r)return;o(!1);let s=!0;const a=new Image;return a.onload=()=>{s&&o("loaded")},a.onerror=()=>{s&&o("error")},a.crossOrigin=e,a.referrerPolicy=t,a.src=n,r&&(a.srcset=r),()=>{s=!1}},[e,t,n,r]),i}const Txe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiAvatar"}),{alt:i,children:o,className:s,component:a="div",imgProps:l,sizes:c,src:u,srcSet:d,variant:f="circular"}=r,h=He(r,Sxe);let p=null;const g=Exe(M({},l,{src:u,srcSet:d})),v=u||d,m=v&&g!=="error",y=M({},r,{colorDefault:!m,component:a,variant:f}),b=Cxe(y);return m?p=q.jsx(Pxe,M({alt:i,srcSet:d,src:u,sizes:c,ownerState:y,className:b.img},l)):o!=null?p=o:v&&i?p=i[0]:p=q.jsx(Mxe,{ownerState:y,className:b.fallback}),q.jsx(Axe,M({as:a,ownerState:y,className:je(b.root,s),ref:n},h,{children:p}))}),EK=Txe;function TK(e){return tt("MuiAvatarGroup",e)}const Oxe=nt("MuiAvatarGroup",["root","avatar"]),OK=Oxe,Ixe=["children","className","component","componentsProps","max","renderSurplus","slotProps","spacing","total","variant"],v6={small:-16,medium:null},Rxe=e=>{const{classes:t}=e;return it({root:["root"],avatar:["avatar"]},TK,t)},kxe=Te("div",{name:"MuiAvatarGroup",slot:"Root",overridesResolver:(e,t)=>M({[`& .${OK.avatar}`]:t.avatar},t.root)})(({theme:e})=>({[`& .${MK.root}`]:{border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}},display:"flex",flexDirection:"row-reverse"})),Lxe=Te(EK,{name:"MuiAvatarGroup",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})(({theme:e})=>({border:`2px solid ${(e.vars||e).palette.background.default}`,boxSizing:"content-box",marginLeft:-8,"&:last-child":{marginLeft:0}})),$xe=I.forwardRef(function(t,n){var r;const i=ot({props:t,name:"MuiAvatarGroup"}),{children:o,className:s,component:a="div",componentsProps:l={},max:c=5,renderSurplus:u,slotProps:d={},spacing:f="medium",total:h,variant:p="circular"}=i,g=He(i,Ixe);let v=c<2?2:c;const m=M({},i,{max:c,spacing:f,component:a,variant:p}),y=Rxe(m),b=I.Children.toArray(o).filter(T=>I.isValidElement(T)),_=h||b.length;_===v&&(v+=1),v=Math.min(_+1,v);const x=Math.min(b.length,v-1),w=Math.max(_-v,_-x,0),S=u?u(w):`+${w}`,C=f&&v6[f]!==void 0?v6[f]:-f,A=(r=d.additionalAvatar)!=null?r:l.additionalAvatar;return q.jsxs(kxe,M({as:a,ownerState:m,className:je(y.root,s),ref:n},g,{children:[w?q.jsx(Lxe,M({ownerState:m,variant:p},A,{className:je(y.avatar,A==null?void 0:A.className),style:M({marginLeft:C},A==null?void 0:A.style),children:S})):null,b.slice(0,x).reverse().map((T,O)=>I.cloneElement(T,{className:je(T.props.className,y.avatar),style:M({marginLeft:O===x-1?void 0:C},T.props.style),variant:T.props.variant||p}))]}))}),Dxe=$xe,Bxe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Nxe={entering:{opacity:1},entered:{opacity:1}},Fxe=I.forwardRef(function(t,n){const r=Dn(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:f,onExit:h,onExited:p,onExiting:g,style:v,timeout:m=i,TransitionComponent:y=b1}=t,b=He(t,Bxe),_=I.useRef(null),x=cn(_,a.ref,n),w=D=>$=>{if(D){const z=_.current;$===void 0?D(z):D(z,$)}},S=w(f),C=w((D,$)=>{qA(D);const z=ba({style:v,timeout:m,easing:l},{mode:"enter"});D.style.webkitTransition=r.transitions.create("opacity",z),D.style.transition=r.transitions.create("opacity",z),u&&u(D,$)}),A=w(d),T=w(g),O=w(D=>{const $=ba({style:v,timeout:m,easing:l},{mode:"exit"});D.style.webkitTransition=r.transitions.create("opacity",$),D.style.transition=r.transitions.create("opacity",$),h&&h(D)}),R=w(p),L=D=>{o&&o(_.current,D)};return q.jsx(y,M({appear:s,in:c,nodeRef:_,onEnter:C,onEntered:A,onEntering:S,onExit:O,onExited:R,onExiting:T,addEndListener:L,timeout:m},b,{children:(D,$)=>I.cloneElement(a,M({style:M({opacity:0,visibility:D==="exited"&&!c?"hidden":void 0},Nxe[D],v,a.props.style),ref:x},$))}))}),b4=Fxe;function IK(e){return tt("MuiBackdrop",e)}const zxe=nt("MuiBackdrop",["root","invisible"]),jxe=zxe,Uxe=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Vxe=e=>{const{classes:t,invisible:n}=e;return it({root:["root",n&&"invisible"]},IK,t)},Hxe=Te("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})(({ownerState:e})=>M({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},e.invisible&&{backgroundColor:"transparent"})),Gxe=I.forwardRef(function(t,n){var r,i,o;const s=ot({props:t,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:u={},componentsProps:d={},invisible:f=!1,open:h,slotProps:p={},slots:g={},TransitionComponent:v=b4,transitionDuration:m}=s,y=He(s,Uxe),b=M({},s,{component:c,invisible:f}),_=Vxe(b),x=(r=p.root)!=null?r:d.root;return q.jsx(v,M({in:h,timeout:m},y,{children:q.jsx(Hxe,M({"aria-hidden":!0},x,{as:(i=(o=g.root)!=null?o:u.Root)!=null?i:c,className:je(_.root,l,x==null?void 0:x.className),ownerState:M({},b,x==null?void 0:x.ownerState),classes:_,ref:n,children:a}))}))}),x4=Gxe;function RK(e){return tt("MuiBadge",e)}const Wxe=nt("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),zl=Wxe,qxe=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],FT=10,zT=4,Yxe=e=>{const{color:t,anchorOrigin:n,invisible:r,overlap:i,variant:o,classes:s={}}=e,a={root:["root"],badge:["badge",o,r&&"invisible",`anchorOrigin${Le(n.vertical)}${Le(n.horizontal)}`,`anchorOrigin${Le(n.vertical)}${Le(n.horizontal)}${Le(i)}`,`overlap${Le(i)}`,t!=="default"&&`color${Le(t)}`]};return it(a,RK,s)},Xxe=Te("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Kxe=Te("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.badge,t[n.variant],t[`anchorOrigin${Le(n.anchorOrigin.vertical)}${Le(n.anchorOrigin.horizontal)}${Le(n.overlap)}`],n.color!=="default"&&t[`color${Le(n.color)}`],n.invisible&&t.invisible]}})(({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:FT*2,lineHeight:1,padding:"0 6px",height:FT*2,borderRadius:FT,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys(((t=e.vars)!=null?t:e).palette).filter(n=>{var r,i;return((r=e.vars)!=null?r:e).palette[n].main&&((i=e.vars)!=null?i:e).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:zT,height:zT*2,minWidth:zT*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${zl.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${zl.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${zl.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${zl.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${zl.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${zl.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${zl.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${zl.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}}),Zxe=I.forwardRef(function(t,n){var r,i,o,s,a,l;const c=ot({props:t,name:"MuiBadge"}),{anchorOrigin:u={vertical:"top",horizontal:"right"},className:d,component:f,components:h={},componentsProps:p={},children:g,overlap:v="rectangular",color:m="default",invisible:y=!1,max:b=99,badgeContent:_,slots:x,slotProps:w,showZero:S=!1,variant:C="standard"}=c,A=He(c,qxe),{badgeContent:T,invisible:O,max:R,displayValue:L}=Uye({max:b,invisible:y,badgeContent:_,showZero:S}),D=B5({anchorOrigin:u,color:m,overlap:v,variant:C,badgeContent:_}),$=O||T==null&&C!=="dot",{color:z=m,overlap:H=v,anchorOrigin:B=u,variant:V=C}=$?D:c,J=V!=="dot"?L:void 0,K=M({},c,{badgeContent:T,invisible:$,max:R,displayValue:J,showZero:S,anchorOrigin:B,color:z,overlap:H,variant:V}),ie=Yxe(K),ce=(r=(i=x==null?void 0:x.root)!=null?i:h.Root)!=null?r:Xxe,pe=(o=(s=x==null?void 0:x.badge)!=null?s:h.Badge)!=null?o:Kxe,se=(a=w==null?void 0:w.root)!=null?a:p.root,G=(l=w==null?void 0:w.badge)!=null?l:p.badge,he=vr({elementType:ce,externalSlotProps:se,externalForwardedProps:A,additionalProps:{ref:n,as:f},ownerState:K,className:je(se==null?void 0:se.className,ie.root,d)}),Z=vr({elementType:pe,externalSlotProps:G,ownerState:K,className:je(ie.badge,G==null?void 0:G.className)});return q.jsxs(ce,M({},he,{children:[g,q.jsx(pe,M({},Z,{children:J}))]}))}),Jxe=Zxe;function kK(e){return tt("MuiBottomNavigation",e)}const Qxe=nt("MuiBottomNavigation",["root"]),e_e=Qxe,t_e=["children","className","component","onChange","showLabels","value"],n_e=e=>{const{classes:t}=e;return it({root:["root"]},kK,t)},r_e=Te("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(e.vars||e).palette.background.paper})),i_e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiBottomNavigation"}),{children:i,className:o,component:s="div",onChange:a,showLabels:l=!1,value:c}=r,u=He(r,t_e),d=M({},r,{component:s,showLabels:l}),f=n_e(d);return q.jsx(r_e,M({as:s,className:je(f.root,o),ref:n,ownerState:d},u,{children:I.Children.map(i,(h,p)=>{if(!I.isValidElement(h))return null;const g=h.props.value===void 0?p:h.props.value;return I.cloneElement(h,{selected:g===c,showLabel:h.props.showLabel!==void 0?h.props.showLabel:l,value:g,onChange:a})})}))}),o_e=i_e;function LK(e){return tt("MuiBottomNavigationAction",e)}const s_e=nt("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),_4=s_e,a_e=["className","icon","label","onChange","onClick","selected","showLabel","value"],l_e=e=>{const{classes:t,showLabel:n,selected:r}=e;return it({root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]},LK,t)},c_e=Te(Xr,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})(({theme:e,ownerState:t})=>M({transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(e.vars||e).palette.text.secondary,flexDirection:"column",flex:"1"},!t.showLabel&&!t.selected&&{paddingTop:14},!t.showLabel&&!t.selected&&!t.label&&{paddingTop:0},{[`&.${_4.selected}`]:{color:(e.vars||e).palette.primary.main}})),u_e=Te("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e,ownerState:t})=>M({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s"},!t.showLabel&&!t.selected&&{opacity:0,transitionDelay:"0s"},{[`&.${_4.selected}`]:{fontSize:e.typography.pxToRem(14)}})),d_e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiBottomNavigationAction"}),{className:i,icon:o,label:s,onChange:a,onClick:l,value:c}=r,u=He(r,a_e),d=r,f=l_e(d),h=p=>{a&&a(p,c),l&&l(p)};return q.jsxs(c_e,M({ref:n,className:je(f.root,i),focusRipple:!0,onClick:h,ownerState:d},u,{children:[o,q.jsx(u_e,{className:f.label,ownerState:d,children:s})]}))}),f_e=d_e,h_e=nt("MuiBox",["root"]),$K=h_e,p_e=ju(),m_e=Vme({themeId:fl,defaultTheme:p_e,defaultClassName:$K.root,generateClassName:F5.generate}),g_e=m_e,v_e=Un(q.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),y_e=["slots","slotProps"],b_e=Te(Xr)(({theme:e})=>M({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`},e.palette.mode==="light"?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":M({},e.palette.mode==="light"?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}),"&:active":M({boxShadow:e.shadows[0]},e.palette.mode==="light"?{backgroundColor:Gm(e.palette.grey[200],.12)}:{backgroundColor:Gm(e.palette.grey[600],.12)})})),x_e=Te(v_e)({width:24,height:16});function __e(e){const{slots:t={},slotProps:n={}}=e,r=He(e,y_e),i=e;return q.jsx("li",{children:q.jsx(b_e,M({focusRipple:!0},r,{ownerState:i,children:q.jsx(x_e,M({as:t.CollapsedIcon,ownerState:i},n.collapsedIcon))}))})}function DK(e){return tt("MuiBreadcrumbs",e)}const w_e=nt("MuiBreadcrumbs",["root","ol","li","separator"]),BK=w_e,S_e=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],C_e=e=>{const{classes:t}=e;return it({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},DK,t)},A_e=Te(xn,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${BK.li}`]:t.li},t.root]})({}),P_e=Te("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),M_e=Te("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function E_e(e,t,n,r){return e.reduce((i,o,s)=>(s<e.length-1?i=i.concat(o,q.jsx(M_e,{"aria-hidden":!0,className:t,ownerState:r,children:n},`separator-${s}`)):i.push(o),i),[])}const T_e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiBreadcrumbs"}),{children:i,className:o,component:s="nav",slots:a={},slotProps:l={},expandText:c="Show path",itemsAfterCollapse:u=1,itemsBeforeCollapse:d=1,maxItems:f=8,separator:h="/"}=r,p=He(r,S_e),[g,v]=I.useState(!1),m=M({},r,{component:s,expanded:g,expandText:c,itemsAfterCollapse:u,itemsBeforeCollapse:d,maxItems:f,separator:h}),y=C_e(m),b=vr({elementType:a.CollapsedIcon,externalSlotProps:l.collapsedIcon,ownerState:m}),_=I.useRef(null),x=S=>{const C=()=>{v(!0);const A=_.current.querySelector("a[href],button,[tabindex]");A&&A.focus()};return d+u>=S.length?S:[...S.slice(0,d),q.jsx(__e,{"aria-label":c,slots:{CollapsedIcon:a.CollapsedIcon},slotProps:{collapsedIcon:b},onClick:C},"ellipsis"),...S.slice(S.length-u,S.length)]},w=I.Children.toArray(i).filter(S=>I.isValidElement(S)).map((S,C)=>q.jsx("li",{className:y.li,children:S},`child-${C}`));return q.jsx(A_e,M({ref:n,component:s,color:"text.secondary",className:je(y.root,o),ownerState:m},p,{children:q.jsx(P_e,{className:y.ol,ref:_,ownerState:m,children:E_e(g||f&&w.length<=f?w:x(w),y.separator,h,m)})}))}),O_e=T_e;function NK(e){return tt("MuiButton",e)}const I_e=nt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),T0=I_e,R_e=I.createContext({}),w4=R_e,k_e=I.createContext(void 0),S4=k_e,L_e=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],$_e=e=>{const{color:t,disableElevation:n,fullWidth:r,size:i,variant:o,classes:s}=e,a={root:["root",o,`${o}${Le(t)}`,`size${Le(i)}`,`${o}Size${Le(i)}`,t==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Le(i)}`],endIcon:["endIcon",`iconSize${Le(i)}`]},l=it(a,NK,s);return M({},s,l)},FK=e=>M({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),D_e=Te(Xr,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${Le(n.color)}`],t[`size${Le(n.size)}`],t[`${n.variant}Size${Le(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var n,r;const i=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],o=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return M({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":M({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:o,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":M({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${T0.focusVisible}`]:M({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${T0.disabled}`]:M({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${Et(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(n=(r=e.palette).getContrastText)==null?void 0:n.call(r,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:i,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${T0.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${T0.disabled}`]:{boxShadow:"none"}}),B_e=Te("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${Le(n.size)}`]]}})(({ownerState:e})=>M({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},FK(e))),N_e=Te("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${Le(n.size)}`]]}})(({ownerState:e})=>M({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},FK(e))),F_e=I.forwardRef(function(t,n){const r=I.useContext(w4),i=I.useContext(S4),o=N5(r,t),s=ot({props:o,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:f=!1,disableFocusRipple:h=!1,endIcon:p,focusVisibleClassName:g,fullWidth:v=!1,size:m="medium",startIcon:y,type:b,variant:_="text"}=s,x=He(s,L_e),w=M({},s,{color:l,component:c,disabled:d,disableElevation:f,disableFocusRipple:h,fullWidth:v,size:m,type:b,variant:_}),S=$_e(w),C=y&&q.jsx(B_e,{className:S.startIcon,ownerState:w,children:y}),A=p&&q.jsx(N_e,{className:S.endIcon,ownerState:w,children:p}),T=i||"";return q.jsxs(D_e,M({ownerState:w,className:je(r.className,S.root,u,T),component:c,disabled:d,focusRipple:!h,focusVisibleClassName:je(S.focusVisible,g),ref:n,type:b},x,{classes:S,children:[C,a,A]}))}),C4=F_e;function zK(e){return tt("MuiButtonGroup",e)}const z_e=nt("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),ci=z_e,j_e=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],U_e=(e,t)=>{const{ownerState:n}=e;return[{[`& .${ci.grouped}`]:t.grouped},{[`& .${ci.grouped}`]:t[`grouped${Le(n.orientation)}`]},{[`& .${ci.grouped}`]:t[`grouped${Le(n.variant)}`]},{[`& .${ci.grouped}`]:t[`grouped${Le(n.variant)}${Le(n.orientation)}`]},{[`& .${ci.grouped}`]:t[`grouped${Le(n.variant)}${Le(n.color)}`]},{[`& .${ci.firstButton}`]:t.firstButton},{[`& .${ci.lastButton}`]:t.lastButton},{[`& .${ci.middleButton}`]:t.middleButton},t.root,t[n.variant],n.disableElevation===!0&&t.disableElevation,n.fullWidth&&t.fullWidth,n.orientation==="vertical"&&t.vertical]},V_e=e=>{const{classes:t,color:n,disabled:r,disableElevation:i,fullWidth:o,orientation:s,variant:a}=e,l={root:["root",a,s==="vertical"&&"vertical",o&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${Le(s)}`,`grouped${Le(a)}`,`grouped${Le(a)}${Le(s)}`,`grouped${Le(a)}${Le(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return it(l,zK,t)},H_e=Te("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:U_e})(({theme:e,ownerState:t})=>M({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[2]},t.disableElevation&&{boxShadow:"none"},t.fullWidth&&{width:"100%"},t.orientation==="vertical"&&{flexDirection:"column"},{[`& .${ci.grouped}`]:M({minWidth:40,"&:hover":M({},t.variant==="contained"&&{boxShadow:"none"})},t.variant==="contained"&&{boxShadow:"none"}),[`& .${ci.firstButton},& .${ci.middleButton}`]:M({},t.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},t.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},t.variant==="text"&&t.orientation==="horizontal"&&{borderRight:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ci.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="text"&&t.orientation==="vertical"&&{borderBottom:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ci.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="text"&&t.color!=="inherit"&&{borderColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:Et(e.palette[t.color].main,.5)},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"transparent"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"transparent"},t.variant==="contained"&&t.orientation==="horizontal"&&{borderRight:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${ci.disabled}`]:{borderRight:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="contained"&&t.orientation==="vertical"&&{borderBottom:`1px solid ${(e.vars||e).palette.grey[400]}`,[`&.${ci.disabled}`]:{borderBottom:`1px solid ${(e.vars||e).palette.action.disabled}`}},t.variant==="contained"&&t.color!=="inherit"&&{borderColor:(e.vars||e).palette[t.color].dark},{"&:hover":M({},t.variant==="outlined"&&t.orientation==="horizontal"&&{borderRightColor:"currentColor"},t.variant==="outlined"&&t.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${ci.lastButton},& .${ci.middleButton}`]:M({},t.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},t.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},t.variant==="outlined"&&t.orientation==="horizontal"&&{marginLeft:-1},t.variant==="outlined"&&t.orientation==="vertical"&&{marginTop:-1})})),G_e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiButtonGroup"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,disableElevation:c=!1,disableFocusRipple:u=!1,disableRipple:d=!1,fullWidth:f=!1,orientation:h="horizontal",size:p="medium",variant:g="outlined"}=r,v=He(r,j_e),m=M({},r,{color:s,component:a,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:d,fullWidth:f,orientation:h,size:p,variant:g}),y=V_e(m),b=I.useMemo(()=>({className:y.grouped,color:s,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:d,fullWidth:f,size:p,variant:g}),[s,l,c,u,d,f,p,g,y.grouped]),_=zpe(i),x=_.length,w=S=>{const C=S===0,A=S===x-1;return C&&A?"":C?y.firstButton:A?y.lastButton:y.middleButton};return q.jsx(H_e,M({as:a,role:"group",className:je(y.root,o),ref:n,ownerState:m},v,{children:q.jsx(w4.Provider,{value:b,children:_.map((S,C)=>q.jsx(S4.Provider,{value:w(C),children:S},C))})}))}),W_e=G_e;function jK(e){return tt("MuiCard",e)}const q_e=nt("MuiCard",["root"]),Y_e=q_e,X_e=["className","raised"],K_e=e=>{const{classes:t}=e;return it({root:["root"]},jK,t)},Z_e=Te(cs,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),J_e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiCard"}),{className:i,raised:o=!1}=r,s=He(r,X_e),a=M({},r,{raised:o}),l=K_e(a);return q.jsx(Z_e,M({className:je(l.root,i),elevation:o?8:void 0,ref:n,ownerState:a},s))}),Q_e=J_e;function UK(e){return tt("MuiCardActionArea",e)}const ewe=nt("MuiCardActionArea",["root","focusVisible","focusHighlight"]),iS=ewe,twe=["children","className","focusVisibleClassName"],nwe=e=>{const{classes:t}=e;return it({root:["root"],focusHighlight:["focusHighlight"]},UK,t)},rwe=Te(Xr,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${iS.focusHighlight}`]:{opacity:(e.vars||e).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${iS.focusVisible} .${iS.focusHighlight}`]:{opacity:(e.vars||e).palette.action.focusOpacity}})),iwe=Te("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(e,t)=>t.focusHighlight})(({theme:e})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})})),owe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiCardActionArea"}),{children:i,className:o,focusVisibleClassName:s}=r,a=He(r,twe),l=r,c=nwe(l);return q.jsxs(rwe,M({className:je(c.root,o),focusVisibleClassName:je(s,c.focusVisible),ref:n,ownerState:l},a,{children:[i,q.jsx(iwe,{className:c.focusHighlight,ownerState:l})]}))}),swe=owe;function VK(e){return tt("MuiCardActions",e)}const awe=nt("MuiCardActions",["root","spacing"]),lwe=awe,cwe=["disableSpacing","className"],uwe=e=>{const{classes:t,disableSpacing:n}=e;return it({root:["root",!n&&"spacing"]},VK,t)},dwe=Te("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>M({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),fwe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiCardActions"}),{disableSpacing:i=!1,className:o}=r,s=He(r,cwe),a=M({},r,{disableSpacing:i}),l=uwe(a);return q.jsx(dwe,M({className:je(l.root,o),ownerState:a,ref:n},s))}),hwe=fwe;function HK(e){return tt("MuiCardContent",e)}const pwe=nt("MuiCardContent",["root"]),mwe=pwe,gwe=["className","component"],vwe=e=>{const{classes:t}=e;return it({root:["root"]},HK,t)},ywe=Te("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),bwe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiCardContent"}),{className:i,component:o="div"}=r,s=He(r,gwe),a=M({},r,{component:o}),l=vwe(a);return q.jsx(ywe,M({as:o,className:je(l.root,i),ownerState:a,ref:n},s))}),xwe=bwe;function GK(e){return tt("MuiCardHeader",e)}const _we=nt("MuiCardHeader",["root","avatar","action","content","title","subheader"]),nk=_we,wwe=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Swe=e=>{const{classes:t}=e;return it({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},GK,t)},Cwe=Te("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>M({[`& .${nk.title}`]:t.title,[`& .${nk.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),Awe=Te("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Pwe=Te("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Mwe=Te("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),Ewe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiCardHeader"}),{action:i,avatar:o,className:s,component:a="div",disableTypography:l=!1,subheader:c,subheaderTypographyProps:u,title:d,titleTypographyProps:f}=r,h=He(r,wwe),p=M({},r,{component:a,disableTypography:l}),g=Swe(p);let v=d;v!=null&&v.type!==xn&&!l&&(v=q.jsx(xn,M({variant:o?"body2":"h5",className:g.title,component:"span",display:"block"},f,{children:v})));let m=c;return m!=null&&m.type!==xn&&!l&&(m=q.jsx(xn,M({variant:o?"body2":"body1",className:g.subheader,color:"text.secondary",component:"span",display:"block"},u,{children:m}))),q.jsxs(Cwe,M({className:je(g.root,s),as:a,ref:n,ownerState:p},h,{children:[o&&q.jsx(Awe,{className:g.avatar,ownerState:p,children:o}),q.jsxs(Mwe,{className:g.content,ownerState:p,children:[v,m]}),i&&q.jsx(Pwe,{className:g.action,ownerState:p,children:i})]}))}),Twe=Ewe;function WK(e){return tt("MuiCardMedia",e)}const Owe=nt("MuiCardMedia",["root","media","img"]),Iwe=Owe,Rwe=["children","className","component","image","src","style"],kwe=e=>{const{classes:t,isMediaComponent:n,isImageComponent:r}=e;return it({root:["root",n&&"media",r&&"img"]},WK,t)},Lwe=Te("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:r,isImageComponent:i}=n;return[t.root,r&&t.media,i&&t.img]}})(({ownerState:e})=>M({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),$we=["video","audio","picture","iframe","img"],Dwe=["picture","img"],Bwe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiCardMedia"}),{children:i,className:o,component:s="div",image:a,src:l,style:c}=r,u=He(r,Rwe),d=$we.indexOf(s)!==-1,f=!d&&a?M({backgroundImage:`url("${a}")`},c):c,h=M({},r,{component:s,isMediaComponent:d,isImageComponent:Dwe.indexOf(s)!==-1}),p=kwe(h);return q.jsx(Lwe,M({className:je(p.root,o),as:s,role:!d&&a?"img":void 0,ref:n,style:f,ownerState:h,src:d?a||l:void 0},u,{children:i}))}),Nwe=Bwe;function Fwe(e){return tt("PrivateSwitchBase",e)}nt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const zwe=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],jwe=e=>{const{classes:t,checked:n,disabled:r,edge:i}=e,o={root:["root",n&&"checked",r&&"disabled",i&&`edge${Le(i)}`],input:["input"]};return it(o,Fwe,t)},Uwe=Te(Xr)(({ownerState:e})=>M({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),Vwe=Te("input",{shouldForwardProp:Br})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Hwe=I.forwardRef(function(t,n){const{autoFocus:r,checked:i,checkedIcon:o,className:s,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:d,id:f,inputProps:h,inputRef:p,name:g,onBlur:v,onChange:m,onFocus:y,readOnly:b,required:_=!1,tabIndex:x,type:w,value:S}=t,C=He(t,zwe),[A,T]=Wi({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),O=Vs(),R=V=>{y&&y(V),O&&O.onFocus&&O.onFocus(V)},L=V=>{v&&v(V),O&&O.onBlur&&O.onBlur(V)},D=V=>{if(V.nativeEvent.defaultPrevented)return;const J=V.target.checked;T(J),m&&m(V,J)};let $=l;O&&typeof $>"u"&&($=O.disabled);const z=w==="checkbox"||w==="radio",H=M({},t,{checked:A,disabled:$,disableFocusRipple:c,edge:u}),B=jwe(H);return q.jsxs(Uwe,M({component:"span",className:je(B.root,s),centerRipple:!0,focusRipple:!c,disabled:$,tabIndex:null,role:void 0,onFocus:R,onBlur:L,ownerState:H,ref:n},C,{children:[q.jsx(Vwe,M({autoFocus:r,checked:i,defaultChecked:a,className:B.input,disabled:$,id:z?f:void 0,name:g,onChange:D,readOnly:b,ref:p,required:_,ownerState:H,tabIndex:x,type:w},w==="checkbox"&&S===void 0?{}:{value:S},h)),A?o:d]}))}),A4=Hwe,Gwe=Un(q.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Wwe=Un(q.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),qwe=Un(q.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function qK(e){return tt("MuiCheckbox",e)}const Ywe=nt("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),oS=Ywe,Xwe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Kwe=e=>{const{classes:t,indeterminate:n,color:r,size:i}=e,o={root:["root",n&&"indeterminate",`color${Le(r)}`,`size${Le(i)}`]},s=it(o,qK,t);return M({},t,s)},Zwe=Te(A4,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.indeterminate&&t.indeterminate,t[`size${Le(n.size)}`],n.color!=="default"&&t[`color${Le(n.color)}`]]}})(({theme:e,ownerState:t})=>M({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${oS.checked}, &.${oS.indeterminate}`]:{color:(e.vars||e).palette[t.color].main},[`&.${oS.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),Jwe=q.jsx(Wwe,{}),Qwe=q.jsx(Gwe,{}),eSe=q.jsx(qwe,{}),tSe=I.forwardRef(function(t,n){var r,i;const o=ot({props:t,name:"MuiCheckbox"}),{checkedIcon:s=Jwe,color:a="primary",icon:l=Qwe,indeterminate:c=!1,indeterminateIcon:u=eSe,inputProps:d,size:f="medium",className:h}=o,p=He(o,Xwe),g=c?u:l,v=c?u:s,m=M({},o,{color:a,indeterminate:c,size:f}),y=Kwe(m);return q.jsx(Zwe,M({type:"checkbox",inputProps:M({"data-indeterminate":c},d),icon:I.cloneElement(g,{fontSize:(r=g.props.fontSize)!=null?r:f}),checkedIcon:I.cloneElement(v,{fontSize:(i=v.props.fontSize)!=null?i:f}),ownerState:m,ref:n,className:je(y.root,h)},p,{classes:y}))}),nSe=tSe;function YK(e){return tt("MuiCircularProgress",e)}const rSe=nt("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]),iSe=rSe,oSe=["className","color","disableShrink","size","style","thickness","value","variant"];let nP=e=>e,y6,b6,x6,_6;const Uc=44,sSe=ls(y6||(y6=nP`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),aSe=ls(b6||(b6=nP`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),lSe=e=>{const{classes:t,variant:n,color:r,disableShrink:i}=e,o={root:["root",n,`color${Le(r)}`],svg:["svg"],circle:["circle",`circle${Le(n)}`,i&&"circleDisableShrink"]};return it(o,YK,t)},cSe=Te("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${Le(n.color)}`]]}})(({ownerState:e,theme:t})=>M({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&ma(x6||(x6=nP`
      animation: ${0} 1.4s linear infinite;
    `),sSe)),uSe=Te("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),dSe=Te("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${Le(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>M({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&ma(_6||(_6=nP`
      animation: ${0} 1.4s ease-in-out infinite;
    `),aSe)),fSe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiCircularProgress"}),{className:i,color:o="primary",disableShrink:s=!1,size:a=40,style:l,thickness:c=3.6,value:u=0,variant:d="indeterminate"}=r,f=He(r,oSe),h=M({},r,{color:o,disableShrink:s,size:a,thickness:c,value:u,variant:d}),p=lSe(h),g={},v={},m={};if(d==="determinate"){const y=2*Math.PI*((Uc-c)/2);g.strokeDasharray=y.toFixed(3),m["aria-valuenow"]=Math.round(u),g.strokeDashoffset=`${((100-u)/100*y).toFixed(3)}px`,v.transform="rotate(-90deg)"}return q.jsx(cSe,M({className:je(p.root,i),style:M({width:a,height:a},v,l),ownerState:h,ref:n,role:"progressbar"},m,f,{children:q.jsx(uSe,{className:p.svg,ownerState:h,viewBox:`${Uc/2} ${Uc/2} ${Uc} ${Uc}`,children:q.jsx(dSe,{className:p.circle,style:g,ownerState:h,cx:Uc,cy:Uc,r:(Uc-c)/2,fill:"none",strokeWidth:c})})}))}),XK=fSe,hSe=Cge({createStyledComponent:Te("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${Le(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>ot({props:e,name:"MuiContainer"})}),KK=hSe;function pSe(e){return tt("MuiContainer",e)}const mSe=nt("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]),gSe=mSe,ZK=(e,t)=>M({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),JK=e=>M({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),vSe=(e,t=!1)=>{var n;const r={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([s,a])=>{var l;r[e.getColorSchemeSelector(s).replace(/\s*&/,"")]={colorScheme:(l=a.palette)==null?void 0:l.mode}});let i=M({html:ZK(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:M({margin:0},JK(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const o=(n=e.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return o&&(i=[i,o]),i};function ySe(e){const t=ot({props:e,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=t;return q.jsxs(I.Fragment,{children:[q.jsx(v4,{styles:i=>vSe(i,r)}),n]})}const bSe={track:"#2b2b2b",thumb:"#6b6b6b",active:"#959595"};function xSe(e=bSe){return{scrollbarColor:`${e.thumb} ${e.track}`,"&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:e.track},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:e.thumb,minHeight:24,border:`3px solid ${e.track}`},"&::-webkit-scrollbar-thumb:focus, & *::-webkit-scrollbar-thumb:focus":{backgroundColor:e.active},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:e.active},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:e.active},"&::-webkit-scrollbar-corner, & *::-webkit-scrollbar-corner":{backgroundColor:e.track}}}function QK(e){return tt("MuiModal",e)}const _Se=nt("MuiModal",["root","hidden","backdrop"]),wSe=_Se,SSe=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],CSe=e=>{const{open:t,exited:n,classes:r}=e;return it({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},QK,r)},ASe=Te("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(({theme:e,ownerState:t})=>M({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0},!t.open&&t.exited&&{visibility:"hidden"})),PSe=Te(x4,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),MSe=I.forwardRef(function(t,n){var r,i,o,s,a,l;const c=ot({name:"MuiModal",props:t}),{BackdropComponent:u=PSe,BackdropProps:d,className:f,closeAfterTransition:h=!1,children:p,container:g,component:v,components:m={},componentsProps:y={},disableAutoFocus:b=!1,disableEnforceFocus:_=!1,disableEscapeKeyDown:x=!1,disablePortal:w=!1,disableRestoreFocus:S=!1,disableScrollLock:C=!1,hideBackdrop:A=!1,keepMounted:T=!1,onBackdropClick:O,open:R,slotProps:L,slots:D}=c,$=He(c,SSe),z=M({},c,{closeAfterTransition:h,disableAutoFocus:b,disableEnforceFocus:_,disableEscapeKeyDown:x,disablePortal:w,disableRestoreFocus:S,disableScrollLock:C,hideBackdrop:A,keepMounted:T}),{getRootProps:H,getBackdropProps:B,getTransitionProps:V,portalRef:J,isTopModal:K,exited:ie,hasTransition:ce}=b1e(M({},z,{rootRef:n})),pe=M({},z,{exited:ie}),se=CSe(pe),G={};if(p.props.tabIndex===void 0&&(G.tabIndex="-1"),ce){const{onEnter:ne,onExited:xe}=V();G.onEnter=ne,G.onExited=xe}const he=(r=(i=D==null?void 0:D.root)!=null?i:m.Root)!=null?r:ASe,Z=(o=(s=D==null?void 0:D.backdrop)!=null?s:m.Backdrop)!=null?o:u,ae=(a=L==null?void 0:L.root)!=null?a:y.root,oe=(l=L==null?void 0:L.backdrop)!=null?l:y.backdrop,te=vr({elementType:he,externalSlotProps:ae,externalForwardedProps:$,getSlotProps:H,additionalProps:{ref:n,as:v},ownerState:pe,className:je(f,ae==null?void 0:ae.className,se==null?void 0:se.root,!pe.open&&pe.exited&&(se==null?void 0:se.hidden))}),ve=vr({elementType:Z,externalSlotProps:oe,additionalProps:d,getSlotProps:ne=>B(M({},ne,{onClick:xe=>{O&&O(xe),ne!=null&&ne.onClick&&ne.onClick(xe)}})),className:je(oe==null?void 0:oe.className,d==null?void 0:d.className,se==null?void 0:se.backdrop),ownerState:pe});return!T&&!R&&(!ce||ie)?null:q.jsx(g4,{ref:J,container:g,disablePortal:w,children:q.jsxs(he,M({},te,{children:[!A&&u?q.jsx(Z,M({},ve)):null,q.jsx(eK,{disableEnforceFocus:_,disableAutoFocus:b,disableRestoreFocus:S,isEnabled:K,open:R,children:I.cloneElement(p,G)})]}))})}),rP=MSe;function eZ(e){return tt("MuiDialog",e)}const ESe=nt("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),sS=ESe,TSe=I.createContext({}),tZ=TSe,OSe=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],ISe=Te(x4,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),RSe=e=>{const{classes:t,scroll:n,maxWidth:r,fullWidth:i,fullScreen:o}=e,s={root:["root"],container:["container",`scroll${Le(n)}`],paper:["paper",`paperScroll${Le(n)}`,`paperWidth${Le(String(r))}`,i&&"paperFullWidth",o&&"paperFullScreen"]};return it(s,eZ,t)},kSe=Te(rP,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),LSe=Te("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${Le(n.scroll)}`]]}})(({ownerState:e})=>M({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),$Se=Te(cs,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${Le(n.scroll)}`],t[`paperWidth${Le(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>M({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${sS.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${sS.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${sS.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),DSe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiDialog"}),i=Dn(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":s,"aria-labelledby":a,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:f=!1,fullScreen:h=!1,fullWidth:p=!1,maxWidth:g="sm",onBackdropClick:v,onClose:m,open:y,PaperComponent:b=cs,PaperProps:_={},scroll:x="paper",TransitionComponent:w=b4,transitionDuration:S=o,TransitionProps:C}=r,A=He(r,OSe),T=M({},r,{disableEscapeKeyDown:f,fullScreen:h,fullWidth:p,maxWidth:g,scroll:x}),O=RSe(T),R=I.useRef(),L=H=>{R.current=H.target===H.currentTarget},D=H=>{R.current&&(R.current=null,v&&v(H),m&&m(H,"backdropClick"))},$=Ls(a),z=I.useMemo(()=>({titleId:$}),[$]);return q.jsx(kSe,M({className:je(O.root,d),closeAfterTransition:!0,components:{Backdrop:ISe},componentsProps:{backdrop:M({transitionDuration:S,as:l},c)},disableEscapeKeyDown:f,onClose:m,open:y,ref:n,onClick:D,ownerState:T},A,{children:q.jsx(w,M({appear:!0,in:y,timeout:S,role:"presentation"},C,{children:q.jsx(LSe,{className:je(O.container),onMouseDown:L,ownerState:T,children:q.jsx($Se,M({as:b,elevation:24,role:"dialog","aria-describedby":s,"aria-labelledby":$},_,{className:je(O.paper,_.className),ownerState:T,children:q.jsx(tZ.Provider,{value:z,children:u})}))})}))}))}),BSe=DSe;function nZ(e){return tt("MuiDialogActions",e)}const NSe=nt("MuiDialogActions",["root","spacing"]),FSe=NSe,zSe=["className","disableSpacing"],jSe=e=>{const{classes:t,disableSpacing:n}=e;return it({root:["root",!n&&"spacing"]},nZ,t)},USe=Te("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>M({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),VSe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiDialogActions"}),{className:i,disableSpacing:o=!1}=r,s=He(r,zSe),a=M({},r,{disableSpacing:o}),l=jSe(a);return q.jsx(USe,M({className:je(l.root,i),ownerState:a,ref:n},s))}),HSe=VSe;function rZ(e){return tt("MuiDialogContent",e)}const GSe=nt("MuiDialogContent",["root","dividers"]),WSe=GSe;function iZ(e){return tt("MuiDialogTitle",e)}const qSe=nt("MuiDialogTitle",["root"]),oZ=qSe,YSe=["className","dividers"],XSe=e=>{const{classes:t,dividers:n}=e;return it({root:["root",n&&"dividers"]},rZ,t)},KSe=Te("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>M({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${oZ.root} + &`]:{paddingTop:0}})),ZSe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiDialogContent"}),{className:i,dividers:o=!1}=r,s=He(r,YSe),a=M({},r,{dividers:o}),l=XSe(a);return q.jsx(KSe,M({className:je(l.root,i),ownerState:a,ref:n},s))}),JSe=ZSe;function sZ(e){return tt("MuiDialogContentText",e)}const QSe=nt("MuiDialogContentText",["root"]),e2e=QSe,t2e=["children","className"],n2e=e=>{const{classes:t}=e,r=it({root:["root"]},sZ,t);return M({},t,r)},r2e=Te(xn,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),i2e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiDialogContentText"}),{className:i}=r,o=He(r,t2e),s=n2e(o);return q.jsx(r2e,M({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:o,className:je(s.root,i)},r,{classes:s}))}),o2e=i2e,s2e=["className","id"],a2e=e=>{const{classes:t}=e;return it({root:["root"]},iZ,t)},l2e=Te(xn,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),c2e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiDialogTitle"}),{className:i,id:o}=r,s=He(r,s2e),a=r,l=a2e(a),{titleId:c=o}=I.useContext(tZ);return q.jsx(l2e,M({component:"h2",className:je(l.root,i),ownerState:a,ref:n,variant:"h6",id:o??c},s))}),u2e=c2e;function aZ(e){return tt("MuiDivider",e)}const d2e=nt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),rk=d2e,f2e=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],h2e=e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:o,orientation:s,textAlign:a,variant:l}=e;return it({root:["root",t&&"absolute",l,o&&"light",s==="vertical"&&"vertical",i&&"flexItem",n&&"withChildren",n&&s==="vertical"&&"withChildrenVertical",a==="right"&&s!=="vertical"&&"textAlignRight",a==="left"&&s!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",s==="vertical"&&"wrapperVertical"]},aZ,r)},p2e=Te("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>M({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Et(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:e})=>M({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:e,ownerState:t})=>M({},t.children&&t.orientation!=="vertical"&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`}}),({theme:e,ownerState:t})=>M({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`}}),({ownerState:e})=>M({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),m2e=Te("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>M({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),lZ=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiDivider"}),{absolute:i=!1,children:o,className:s,component:a=o?"div":"hr",flexItem:l=!1,light:c=!1,orientation:u="horizontal",role:d=a!=="hr"?"separator":void 0,textAlign:f="center",variant:h="fullWidth"}=r,p=He(r,f2e),g=M({},r,{absolute:i,component:a,flexItem:l,light:c,orientation:u,role:d,textAlign:f,variant:h}),v=h2e(g);return q.jsx(p2e,M({as:a,className:je(v.root,s),role:d,ref:n,ownerState:g},p,{children:o?q.jsx(m2e,{className:v.wrapper,ownerState:g,children:o}):null}))});lZ.muiSkipListHighlight=!0;const g2e=lZ,v2e=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function y2e(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),o=Ai(t);let s;if(t.fakeTransform)s=t.fakeTransform;else{const c=o.getComputedStyle(t);s=c.getPropertyValue("-webkit-transform")||c.getPropertyValue("transform")}let a=0,l=0;if(s&&s!=="none"&&typeof s=="string"){const c=s.split("(")[1].split(")")[0].split(",");a=parseInt(c[4],10),l=parseInt(c[5],10)}return e==="left"?i?`translateX(${i.right+a-r.left}px)`:`translateX(${o.innerWidth+a-r.left}px)`:e==="right"?i?`translateX(-${r.right-i.left-a}px)`:`translateX(-${r.left+r.width-a}px)`:e==="up"?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${o.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}function b2e(e){return typeof e=="function"?e():e}function f_(e,t,n){const r=b2e(n),i=y2e(e,t,r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const x2e=I.forwardRef(function(t,n){const r=Dn(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},o={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:l,container:c,direction:u="down",easing:d=i,in:f,onEnter:h,onEntered:p,onEntering:g,onExit:v,onExited:m,onExiting:y,style:b,timeout:_=o,TransitionComponent:x=b1}=t,w=He(t,v2e),S=I.useRef(null),C=cn(l.ref,S,n),A=B=>V=>{B&&(V===void 0?B(S.current):B(S.current,V))},T=A((B,V)=>{f_(u,B,c),qA(B),h&&h(B,V)}),O=A((B,V)=>{const J=ba({timeout:_,style:b,easing:d},{mode:"enter"});B.style.webkitTransition=r.transitions.create("-webkit-transform",M({},J)),B.style.transition=r.transitions.create("transform",M({},J)),B.style.webkitTransform="none",B.style.transform="none",g&&g(B,V)}),R=A(p),L=A(y),D=A(B=>{const V=ba({timeout:_,style:b,easing:d},{mode:"exit"});B.style.webkitTransition=r.transitions.create("-webkit-transform",V),B.style.transition=r.transitions.create("transform",V),f_(u,B,c),v&&v(B)}),$=A(B=>{B.style.webkitTransition="",B.style.transition="",m&&m(B)}),z=B=>{s&&s(S.current,B)},H=I.useCallback(()=>{S.current&&f_(u,S.current,c)},[u,c]);return I.useEffect(()=>{if(f||u==="down"||u==="right")return;const B=xh(()=>{S.current&&f_(u,S.current,c)}),V=Ai(S.current);return V.addEventListener("resize",B),()=>{B.clear(),V.removeEventListener("resize",B)}},[u,f,c]),I.useEffect(()=>{f||H()},[f,H]),q.jsx(x,M({nodeRef:S,onEnter:T,onEntered:R,onEntering:O,onExit:D,onExited:$,onExiting:L,addEndListener:z,appear:a,in:f,timeout:_},w,{children:(B,V)=>I.cloneElement(l,M({ref:C,style:M({visibility:B==="exited"&&!f?"hidden":void 0},b,l.props.style)},V))}))}),cZ=x2e;function uZ(e){return tt("MuiDrawer",e)}const _2e=nt("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]),w2e=_2e,S2e=["BackdropProps"],C2e=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],dZ=(e,t)=>{const{ownerState:n}=e;return[t.root,(n.variant==="permanent"||n.variant==="persistent")&&t.docked,t.modal]},A2e=e=>{const{classes:t,anchor:n,variant:r}=e,i={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${Le(n)}`,r!=="temporary"&&`paperAnchorDocked${Le(n)}`]};return it(i,uZ,t)},P2e=Te(rP,{name:"MuiDrawer",slot:"Root",overridesResolver:dZ})(({theme:e})=>({zIndex:(e.vars||e).zIndex.drawer})),w6=Te("div",{shouldForwardProp:Br,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:dZ})({flex:"0 0 auto"}),M2e=Te(cs,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${Le(n.anchor)}`],n.variant!=="temporary"&&t[`paperAnchorDocked${Le(n.anchor)}`]]}})(({theme:e,ownerState:t})=>M({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(e.vars||e).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},t.anchor==="left"&&{left:0},t.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="right"&&{right:0},t.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},t.anchor==="left"&&t.variant!=="temporary"&&{borderRight:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="top"&&t.variant!=="temporary"&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="right"&&t.variant!=="temporary"&&{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},t.anchor==="bottom"&&t.variant!=="temporary"&&{borderTop:`1px solid ${(e.vars||e).palette.divider}`})),fZ={left:"right",right:"left",top:"down",bottom:"up"};function of(e){return["left","right"].indexOf(e)!==-1}function O0(e,t){return e.direction==="rtl"&&of(t)?fZ[t]:t}const E2e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiDrawer"}),i=Dn(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:a,children:l,className:c,elevation:u=16,hideBackdrop:d=!1,ModalProps:{BackdropProps:f}={},onClose:h,open:p=!1,PaperProps:g={},SlideProps:v,TransitionComponent:m=cZ,transitionDuration:y=o,variant:b="temporary"}=r,_=He(r.ModalProps,S2e),x=He(r,C2e),w=I.useRef(!1);I.useEffect(()=>{w.current=!0},[]);const S=O0(i,s),A=M({},r,{anchor:s,elevation:u,open:p,variant:b},x),T=A2e(A),O=q.jsx(M2e,M({elevation:b==="temporary"?u:0,square:!0},g,{className:je(T.paper,g.className),ownerState:A,children:l}));if(b==="permanent")return q.jsx(w6,M({className:je(T.root,T.docked,c),ownerState:A,ref:n},x,{children:O}));const R=q.jsx(m,M({in:p,direction:fZ[S],timeout:y,appear:w.current},v,{children:O}));return b==="persistent"?q.jsx(w6,M({className:je(T.root,T.docked,c),ownerState:A,ref:n},x,{children:R})):q.jsx(P2e,M({BackdropProps:M({},a,f,{transitionDuration:y}),className:je(T.root,T.modal,c),open:p,ownerState:A,onClose:h,hideBackdrop:d,ref:n},x,_,{children:R}))}),hZ=E2e;function pZ(e){return tt("MuiFab",e)}const T2e=nt("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),ik=T2e,O2e=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],I2e=e=>{const{color:t,variant:n,classes:r,size:i}=e,o={root:["root",n,`size${Le(i)}`,t==="inherit"?"colorInherit":t]},s=it(o,pZ,r);return M({},r,s)},R2e=Te(Xr,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>Br(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Le(n.size)}`],n.color==="inherit"&&t.colorInherit,t[Le(n.size)],t[n.color]]}})(({theme:e,ownerState:t})=>{var n,r;return M({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:(n=(r=e.palette).getContrastText)==null?void 0:n.call(r,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${ik.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},t.size==="small"&&{width:40,height:40},t.size==="medium"&&{width:48,height:48},t.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},t.variant==="extended"&&t.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},t.variant==="extended"&&t.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},t.color==="inherit"&&{color:"inherit"})},({theme:e,ownerState:t})=>M({},t.color!=="inherit"&&t.color!=="default"&&(e.vars||e).palette[t.color]!=null&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}}),({theme:e})=>({[`&.${ik.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),k2e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiFab"}),{children:i,className:o,color:s="default",component:a="button",disabled:l=!1,disableFocusRipple:c=!1,focusVisibleClassName:u,size:d="large",variant:f="circular"}=r,h=He(r,O2e),p=M({},r,{color:s,component:a,disabled:l,disableFocusRipple:c,size:d,variant:f}),g=I2e(p);return q.jsx(R2e,M({className:je(g.root,o),component:a,disabled:l,focusRipple:!c,focusVisibleClassName:je(g.focusVisible,u),ownerState:p,ref:n},h,{classes:g,children:i}))}),P4=k2e,L2e=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],$2e=e=>{const{classes:t,disableUnderline:n}=e,i=it({root:["root",!n&&"underline"],input:["input"]},CK,t);return M({},t,i)},D2e=Te(eP,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...JA(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{var n;const r=e.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",s=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return M({position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:s,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o}},[`&.${so.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o},[`&.${so.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:a}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(e.vars||e).palette[t.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${so.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${so.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${so.disabled}, .${so.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${so.disabled}:before`]:{borderBottomStyle:"dotted"}},t.startAdornment&&{paddingLeft:12},t.endAdornment&&{paddingRight:12},t.multiline&&M({padding:"25px 12px 8px"},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9}))}),B2e=Te(tP,{name:"MuiFilledInput",slot:"Input",overridesResolver:QA})(({theme:e,ownerState:t})=>M({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{paddingTop:21,paddingBottom:4},t.hiddenLabel&&{paddingTop:16,paddingBottom:17},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0},t.hiddenLabel&&t.size==="small"&&{paddingTop:8,paddingBottom:9},t.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),mZ=I.forwardRef(function(t,n){var r,i,o,s;const a=ot({props:t,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:f=!1,slotProps:h,slots:p={},type:g="text"}=a,v=He(a,L2e),m=M({},a,{fullWidth:u,inputComponent:d,multiline:f,type:g}),y=$2e(a),b={root:{ownerState:m},input:{ownerState:m}},_=h??c?Tr(b,h??c):b,x=(r=(i=p.root)!=null?i:l.Root)!=null?r:D2e,w=(o=(s=p.input)!=null?s:l.Input)!=null?o:B2e;return q.jsx(S1,M({slots:{root:x,input:w},componentsProps:_,fullWidth:u,inputComponent:d,multiline:f,ref:n,type:g},v,{classes:y}))});mZ.muiName="Input";const M4=mZ;function gZ(e){return tt("MuiFormControl",e)}const N2e=nt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]),F2e=N2e,z2e=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],j2e=e=>{const{classes:t,margin:n,fullWidth:r}=e,i={root:["root",n!=="none"&&`margin${Le(n)}`,r&&"fullWidth"]};return it(i,gZ,t)},U2e=Te("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>M({},t.root,t[`margin${Le(e.margin)}`],e.fullWidth&&t.fullWidth)})(({ownerState:e})=>M({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},e.margin==="normal"&&{marginTop:16,marginBottom:8},e.margin==="dense"&&{marginTop:8,marginBottom:4},e.fullWidth&&{width:"100%"})),V2e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiFormControl"}),{children:i,className:o,color:s="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:f=!1,margin:h="none",required:p=!1,size:g="medium",variant:v="outlined"}=r,m=He(r,z2e),y=M({},r,{color:s,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:f,margin:h,required:p,size:g,variant:v}),b=j2e(y),[_,x]=I.useState(()=>{let L=!1;return i&&I.Children.forEach(i,D=>{if(!sl(D,["Input","Select"]))return;const $=sl(D,["Select"])?D.props.input:D;$&&Y1e($.props)&&(L=!0)}),L}),[w,S]=I.useState(()=>{let L=!1;return i&&I.Children.forEach(i,D=>{sl(D,["Input","Select"])&&(w2(D.props,!0)||w2(D.props.inputProps,!0))&&(L=!0)}),L}),[C,A]=I.useState(!1);l&&C&&A(!1);const T=u!==void 0&&!l?u:C;let O;const R=I.useMemo(()=>({adornedStart:_,setAdornedStart:x,color:s,disabled:l,error:c,filled:w,focused:T,fullWidth:d,hiddenLabel:f,size:g,onBlur:()=>{A(!1)},onEmpty:()=>{S(!1)},onFilled:()=>{S(!0)},onFocus:()=>{A(!0)},registerEffect:O,required:p,variant:v}),[_,s,l,c,w,T,d,f,O,p,g,v]);return q.jsx(ZA.Provider,{value:R,children:q.jsx(U2e,M({as:a,ownerState:y,className:je(b.root,o),ref:n},m,{children:i}))})}),vZ=V2e,H2e=Yge({createStyledComponent:Te("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>ot({props:e,name:"MuiStack"})}),yZ=H2e,G2e=nt("MuiStack",["root"]),W2e=G2e;function bZ(e){return tt("MuiFormControlLabel",e)}const q2e=nt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Wp=q2e,Y2e=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],X2e=e=>{const{classes:t,disabled:n,labelPlacement:r,error:i,required:o}=e,s={root:["root",n&&"disabled",`labelPlacement${Le(r)}`,i&&"error",o&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return it(s,bZ,t)},K2e=Te("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Wp.label}`]:t.label},t.root,t[`labelPlacement${Le(n.labelPlacement)}`]]}})(({theme:e,ownerState:t})=>M({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Wp.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${Wp.label}`]:{[`&.${Wp.disabled}`]:{color:(e.vars||e).palette.text.disabled}}})),Z2e=Te("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${Wp.error}`]:{color:(e.vars||e).palette.error.main}})),J2e=I.forwardRef(function(t,n){var r,i;const o=ot({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:a={},control:l,disabled:c,disableTypography:u,label:d,labelPlacement:f="end",required:h,slotProps:p={}}=o,g=He(o,Y2e),v=Vs(),m=(r=c??l.props.disabled)!=null?r:v==null?void 0:v.disabled,y=h??l.props.required,b={disabled:m,required:y};["checked","name","onChange","value","inputRef"].forEach(A=>{typeof l.props[A]>"u"&&typeof o[A]<"u"&&(b[A]=o[A])});const _=Ic({props:o,muiFormControl:v,states:["error"]}),x=M({},o,{disabled:m,labelPlacement:f,required:y,error:_.error}),w=X2e(x),S=(i=p.typography)!=null?i:a.typography;let C=d;return C!=null&&C.type!==xn&&!u&&(C=q.jsx(xn,M({component:"span"},S,{className:je(w.label,S==null?void 0:S.className),children:C}))),q.jsxs(K2e,M({className:je(w.root,s),ownerState:x,ref:n},g,{children:[I.cloneElement(l,b),y?q.jsxs(yZ,{display:"block",children:[C,q.jsxs(Z2e,{ownerState:x,"aria-hidden":!0,className:w.asterisk,children:[" ","*"]})]}):C]}))}),Q2e=J2e;function xZ(e){return tt("MuiFormGroup",e)}const eCe=nt("MuiFormGroup",["root","row","error"]),tCe=eCe,nCe=["className","row"],rCe=e=>{const{classes:t,row:n,error:r}=e;return it({root:["root",n&&"row",r&&"error"]},xZ,t)},iCe=Te("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.row&&t.row]}})(({ownerState:e})=>M({display:"flex",flexDirection:"column",flexWrap:"wrap"},e.row&&{flexDirection:"row"})),oCe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiFormGroup"}),{className:i,row:o=!1}=r,s=He(r,nCe),a=Vs(),l=Ic({props:r,muiFormControl:a,states:["error"]}),c=M({},r,{row:o,error:l.error}),u=rCe(c);return q.jsx(iCe,M({className:je(u.root,i),ownerState:c,ref:n},s))}),_Z=oCe;function wZ(e){return tt("MuiFormHelperText",e)}const sCe=nt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),ok=sCe;var S6;const aCe=["children","className","component","disabled","error","filled","focused","margin","required","variant"],lCe=e=>{const{classes:t,contained:n,size:r,disabled:i,error:o,filled:s,focused:a,required:l}=e,c={root:["root",i&&"disabled",o&&"error",r&&`size${Le(r)}`,n&&"contained",a&&"focused",s&&"filled",l&&"required"]};return it(c,wZ,t)},cCe=Te("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${Le(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(({theme:e,ownerState:t})=>M({color:(e.vars||e).palette.text.secondary},e.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${ok.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${ok.error}`]:{color:(e.vars||e).palette.error.main}},t.size==="small"&&{marginTop:4},t.contained&&{marginLeft:14,marginRight:14})),uCe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiFormHelperText"}),{children:i,className:o,component:s="p"}=r,a=He(r,aCe),l=Vs(),c=Ic({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),u=M({},r,{component:s,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=lCe(u);return q.jsx(cCe,M({as:s,ownerState:u,className:je(d.root,o),ref:n},a,{children:i===" "?S6||(S6=q.jsx("span",{className:"notranslate",children:"​"})):i}))}),SZ=uCe;function CZ(e){return tt("MuiFormLabel",e)}const dCe=nt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),dm=dCe,fCe=["children","className","color","component","disabled","error","filled","focused","required"],hCe=e=>{const{classes:t,color:n,focused:r,disabled:i,error:o,filled:s,required:a}=e,l={root:["root",`color${Le(n)}`,i&&"disabled",o&&"error",s&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",o&&"error"]};return it(l,CZ,t)},AZ=Te("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>M({},t.root,e.color==="secondary"&&t.colorSecondary,e.filled&&t.filled)})(({theme:e,ownerState:t})=>M({color:(e.vars||e).palette.text.secondary},e.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${dm.focused}`]:{color:(e.vars||e).palette[t.color].main},[`&.${dm.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${dm.error}`]:{color:(e.vars||e).palette.error.main}})),pCe=Te("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(({theme:e})=>({[`&.${dm.error}`]:{color:(e.vars||e).palette.error.main}})),mCe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiFormLabel"}),{children:i,className:o,component:s="label"}=r,a=He(r,fCe),l=Vs(),c=Ic({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),u=M({},r,{color:c.color||"primary",component:s,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=hCe(u);return q.jsxs(AZ,M({as:s,ownerState:u,className:je(d.root,o),ref:n},a,{children:[i,c.required&&q.jsxs(pCe,{ownerState:u,"aria-hidden":!0,className:d.asterisk,children:[" ","*"]})]}))}),PZ=mCe,gCe=I.createContext(),C6=gCe;function MZ(e){return tt("MuiGrid",e)}const vCe=[0,1,2,3,4,5,6,7,8,9,10],yCe=["column-reverse","column","row-reverse","row"],bCe=["nowrap","wrap-reverse","wrap"],$v=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],xCe=nt("MuiGrid",["root","container","item","zeroMinWidth",...vCe.map(e=>`spacing-xs-${e}`),...yCe.map(e=>`direction-xs-${e}`),...bCe.map(e=>`wrap-xs-${e}`),...$v.map(e=>`grid-xs-${e}`),...$v.map(e=>`grid-sm-${e}`),...$v.map(e=>`grid-md-${e}`),...$v.map(e=>`grid-lg-${e}`),...$v.map(e=>`grid-xl-${e}`)]),Km=xCe,_Ce=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function fm(e){const t=parseFloat(e);return`${t}${String(e).replace(String(t),"")||"px"}`}function wCe({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((r,i)=>{let o={};if(t[i]&&(n=t[i]),!n)return r;if(n===!0)o={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")o={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const s=Sf({values:t.columns,breakpoints:e.breakpoints.values}),a=typeof s=="object"?s[i]:s;if(a==null)return r;const l=`${Math.round(n/a*1e8)/1e6}%`;let c={};if(t.container&&t.item&&t.columnSpacing!==0){const u=e.spacing(t.columnSpacing);if(u!=="0px"){const d=`calc(${l} + ${fm(u)})`;c={flexBasis:d,maxWidth:d}}}o=M({flexBasis:l,flexGrow:0,maxWidth:l},c)}return e.breakpoints.values[i]===0?Object.assign(r,o):r[e.breakpoints.up(i)]=o,r},{})}function SCe({theme:e,ownerState:t}){const n=Sf({values:t.direction,breakpoints:e.breakpoints.values});return Oo({theme:e},n,r=>{const i={flexDirection:r};return r.indexOf("column")===0&&(i[`& > .${Km.item}`]={maxWidth:"none"}),i})}function EZ({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(i=>{n===""&&t[i]!==0&&(n=i)});const r=Object.keys(e).sort((i,o)=>e[i]-e[o]);return r.slice(0,r.indexOf(n))}function CCe({theme:e,ownerState:t}){const{container:n,rowSpacing:r}=t;let i={};if(n&&r!==0){const o=Sf({values:r,breakpoints:e.breakpoints.values});let s;typeof o=="object"&&(s=EZ({breakpoints:e.breakpoints.values,values:o})),i=Oo({theme:e},o,(a,l)=>{var c;const u=e.spacing(a);return u!=="0px"?{marginTop:`-${fm(u)}`,[`& > .${Km.item}`]:{paddingTop:fm(u)}}:(c=s)!=null&&c.includes(l)?{}:{marginTop:0,[`& > .${Km.item}`]:{paddingTop:0}}})}return i}function ACe({theme:e,ownerState:t}){const{container:n,columnSpacing:r}=t;let i={};if(n&&r!==0){const o=Sf({values:r,breakpoints:e.breakpoints.values});let s;typeof o=="object"&&(s=EZ({breakpoints:e.breakpoints.values,values:o})),i=Oo({theme:e},o,(a,l)=>{var c;const u=e.spacing(a);return u!=="0px"?{width:`calc(100% + ${fm(u)})`,marginLeft:`-${fm(u)}`,[`& > .${Km.item}`]:{paddingLeft:fm(u)}}:(c=s)!=null&&c.includes(l)?{}:{width:"100%",marginLeft:0,[`& > .${Km.item}`]:{paddingLeft:0}}})}return i}function PCe(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach(i=>{const o=e[i];Number(o)>0&&r.push(n[`spacing-${i}-${String(o)}`])}),r}const MCe=Te("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:i,item:o,spacing:s,wrap:a,zeroMinWidth:l,breakpoints:c}=n;let u=[];r&&(u=PCe(s,c,t));const d=[];return c.forEach(f=>{const h=n[f];h&&d.push(t[`grid-${f}-${String(h)}`])}),[t.root,r&&t.container,o&&t.item,l&&t.zeroMinWidth,...u,i!=="row"&&t[`direction-xs-${String(i)}`],a!=="wrap"&&t[`wrap-xs-${String(a)}`],...d]}})(({ownerState:e})=>M({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),SCe,CCe,ACe,wCe);function ECe(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(r=>{const i=e[r];if(Number(i)>0){const o=`spacing-${r}-${String(i)}`;n.push(o)}}),n}const TCe=e=>{const{classes:t,container:n,direction:r,item:i,spacing:o,wrap:s,zeroMinWidth:a,breakpoints:l}=e;let c=[];n&&(c=ECe(o,l));const u=[];l.forEach(f=>{const h=e[f];h&&u.push(`grid-${f}-${String(h)}`)});const d={root:["root",n&&"container",i&&"item",a&&"zeroMinWidth",...c,r!=="row"&&`direction-xs-${String(r)}`,s!=="wrap"&&`wrap-xs-${String(s)}`,...u]};return it(d,MZ,t)},OCe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiGrid"}),{breakpoints:i}=Dn(),o=m1(r),{className:s,columns:a,columnSpacing:l,component:c="div",container:u=!1,direction:d="row",item:f=!1,rowSpacing:h,spacing:p=0,wrap:g="wrap",zeroMinWidth:v=!1}=o,m=He(o,_Ce),y=h||p,b=l||p,_=I.useContext(C6),x=u?a||12:_,w={},S=M({},m);i.keys.forEach(T=>{m[T]!=null&&(w[T]=m[T],delete S[T])});const C=M({},o,{columns:x,container:u,direction:d,item:f,rowSpacing:y,columnSpacing:b,wrap:g,zeroMinWidth:v,spacing:p},w,{breakpoints:i.keys}),A=TCe(C);return q.jsx(C6.Provider,{value:x,children:q.jsx(MCe,M({ownerState:C,className:je(A.root,s),as:c,ref:n},S))})}),I0=OCe,ICe=zge({createStyledComponent:Te("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(e,t)=>t.root}),componentName:"MuiGrid2",useThemeProps:e=>ot({props:e,name:"MuiGrid2"})}),RCe=ICe;function kCe(e){return tt("MuiGrid2",e)}const LCe=[0,1,2,3,4,5,6,7,8,9,10],$Ce=["column-reverse","column","row-reverse","row"],DCe=["nowrap","wrap-reverse","wrap"],Dv=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],BCe=nt("MuiGrid2",["root","container","item","zeroMinWidth",...LCe.map(e=>`spacing-xs-${e}`),...$Ce.map(e=>`direction-xs-${e}`),...DCe.map(e=>`wrap-xs-${e}`),...Dv.map(e=>`grid-xs-${e}`),...Dv.map(e=>`grid-sm-${e}`),...Dv.map(e=>`grid-md-${e}`),...Dv.map(e=>`grid-lg-${e}`),...Dv.map(e=>`grid-xl-${e}`)]),NCe=BCe,FCe=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function sk(e){return`scale(${e}, ${e**2})`}const zCe={entering:{opacity:1,transform:sk(1)},entered:{opacity:1,transform:"none"}},jT=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),TZ=I.forwardRef(function(t,n){const{addEndListener:r,appear:i=!0,children:o,easing:s,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:f,onExiting:h,style:p,timeout:g="auto",TransitionComponent:v=b1}=t,m=He(t,FCe),y=I.useRef(),b=I.useRef(),_=Dn(),x=I.useRef(null),w=cn(x,o.ref,n),S=$=>z=>{if($){const H=x.current;z===void 0?$(H):$(H,z)}},C=S(u),A=S(($,z)=>{qA($);const{duration:H,delay:B,easing:V}=ba({style:p,timeout:g,easing:s},{mode:"enter"});let J;g==="auto"?(J=_.transitions.getAutoHeightDuration($.clientHeight),b.current=J):J=H,$.style.transition=[_.transitions.create("opacity",{duration:J,delay:B}),_.transitions.create("transform",{duration:jT?J:J*.666,delay:B,easing:V})].join(","),l&&l($,z)}),T=S(c),O=S(h),R=S($=>{const{duration:z,delay:H,easing:B}=ba({style:p,timeout:g,easing:s},{mode:"exit"});let V;g==="auto"?(V=_.transitions.getAutoHeightDuration($.clientHeight),b.current=V):V=z,$.style.transition=[_.transitions.create("opacity",{duration:V,delay:H}),_.transitions.create("transform",{duration:jT?V:V*.666,delay:jT?H:H||V*.333,easing:B})].join(","),$.style.opacity=0,$.style.transform=sk(.75),d&&d($)}),L=S(f),D=$=>{g==="auto"&&(y.current=setTimeout($,b.current||0)),r&&r(x.current,$)};return I.useEffect(()=>()=>{clearTimeout(y.current)},[]),q.jsx(v,M({appear:i,in:a,nodeRef:x,onEnter:A,onEntered:T,onEntering:C,onExit:R,onExited:L,onExiting:O,addEndListener:D,timeout:g==="auto"?null:g},m,{children:($,z)=>I.cloneElement(o,M({style:M({opacity:0,transform:sk(.75),visibility:$==="exited"&&!a?"hidden":void 0},zCe[$],p,o.props.style),ref:w},z))}))});TZ.muiSupportAuto=!0;const nb=TZ;function jCe(e,t,n,r,i){const[o,s]=I.useState(()=>i&&n?n(e).matches:r?r(e).matches:t);return Yr(()=>{let a=!0;if(!n)return;const l=n(e),c=()=>{a&&s(l.matches)};return c(),l.addListener(c),()=>{a=!1,l.removeListener(c)}},[e,n]),o}const OZ=I.useSyncExternalStore;function UCe(e,t,n,r,i){const o=I.useCallback(()=>t,[t]),s=I.useMemo(()=>{if(i&&n)return()=>n(e).matches;if(r!==null){const{matches:u}=r(e);return()=>u}return o},[o,e,r,i,n]),[a,l]=I.useMemo(()=>{if(n===null)return[o,()=>()=>{}];const u=n(e);return[()=>u.matches,d=>(u.addListener(d),()=>{u.removeListener(d)})]},[o,n,e]);return OZ(l,a,s)}function IZ(e,t={}){const n=jA(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:o=r?window.matchMedia:null,ssrMatchMedia:s=null,noSsr:a=!1}=W5({name:"MuiUseMediaQuery",props:t,theme:n});let l=typeof e=="function"?e(n):e;return l=l.replace(/^@media( ?)/m,""),(OZ!==void 0?UCe:jCe)(l,i,o,s,a)}const VCe=["initialWidth","width"],hu=["xs","sm","md","lg","xl"],HCe=(e,t,n=!0)=>n?hu.indexOf(e)<=hu.indexOf(t):hu.indexOf(e)<hu.indexOf(t),GCe=(e,t,n=!1)=>n?hu.indexOf(t)<=hu.indexOf(e):hu.indexOf(t)<hu.indexOf(e),WCe=(e={})=>t=>{const{withTheme:n=!1,noSSR:r=!1,initialWidth:i}=e;function o(s){const a=Dn(),l=s.theme||a,c=W5({theme:l,name:"MuiWithWidth",props:s}),{initialWidth:u,width:d}=c,f=He(c,VCe),[h,p]=I.useState(!1);Yr(()=>{p(!0)},[]);const v=l.breakpoints.keys.slice().reverse().reduce((y,b)=>{const _=IZ(l.breakpoints.up(b));return!y&&_?b:y},null),m=M({width:d||(h||r?v:void 0)||u||i},n?{theme:l}:{},f);return m.width===void 0?null:q.jsx(t,M({},m))}return o};function qCe(e){const{children:t,only:n,width:r}=e,i=Dn();let o=!0;if(n)if(Array.isArray(n))for(let s=0;s<n.length;s+=1){const a=n[s];if(r===a){o=!1;break}}else n&&r===n&&(o=!1);if(o)for(let s=0;s<i.breakpoints.keys.length;s+=1){const a=i.breakpoints.keys[s],l=e[`${a}Up`],c=e[`${a}Down`];if(l&&HCe(a,r)||c&&GCe(a,r)){o=!1;break}}return o?q.jsx(I.Fragment,{children:t}):null}const YCe=WCe()(qCe);function XCe(e){return tt("PrivateHiddenCss",e)}nt("PrivateHiddenCss",["root","xlDown","xlUp","onlyXl","lgDown","lgUp","onlyLg","mdDown","mdUp","onlyMd","smDown","smUp","onlySm","xsDown","xsUp","onlyXs"]);const KCe=["children","className","only"],ZCe=e=>{const{classes:t,breakpoints:n}=e,r={root:["root",...n.map(({breakpoint:i,dir:o})=>o==="only"?`${o}${Le(i)}`:`${i}${Le(o)}`)]};return it(r,XCe,t)},JCe=Te("div",{name:"PrivateHiddenCss",slot:"Root"})(({theme:e,ownerState:t})=>{const n={display:"none"};return M({},t.breakpoints.map(({breakpoint:r,dir:i})=>i==="only"?{[e.breakpoints.only(r)]:n}:i==="up"?{[e.breakpoints.up(r)]:n}:{[e.breakpoints.down(r)]:n}).reduce((r,i)=>(Object.keys(i).forEach(o=>{r[o]=i[o]}),r),{}))});function QCe(e){const{children:t,className:n,only:r}=e,i=He(e,KCe),o=Dn(),s=[];for(let c=0;c<o.breakpoints.keys.length;c+=1){const u=o.breakpoints.keys[c],d=i[`${u}Up`],f=i[`${u}Down`];d&&s.push({breakpoint:u,dir:"up"}),f&&s.push({breakpoint:u,dir:"down"})}r&&(Array.isArray(r)?r:[r]).forEach(u=>{s.push({breakpoint:u,dir:"only"})});const a=M({},e,{breakpoints:s}),l=ZCe(a);return q.jsx(JCe,{className:je(l.root,n),ownerState:a,children:t})}const eAe=["implementation","lgDown","lgUp","mdDown","mdUp","smDown","smUp","xlDown","xlUp","xsDown","xsUp"];function tAe(e){const{implementation:t="js",lgDown:n=!1,lgUp:r=!1,mdDown:i=!1,mdUp:o=!1,smDown:s=!1,smUp:a=!1,xlDown:l=!1,xlUp:c=!1,xsDown:u=!1,xsUp:d=!1}=e,f=He(e,eAe);return t==="js"?q.jsx(YCe,M({lgDown:n,lgUp:r,mdDown:i,mdUp:o,smDown:s,smUp:a,xlDown:l,xlUp:c,xsDown:u,xsUp:d},f)):q.jsx(QCe,M({lgDown:n,lgUp:r,mdDown:i,mdUp:o,smDown:s,smUp:a,xlDown:l,xlUp:c,xsDown:u,xsUp:d},f))}function RZ(e){return tt("MuiIcon",e)}const nAe=nt("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]),rAe=nAe,iAe=["baseClassName","className","color","component","fontSize"],oAe=e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root",t!=="inherit"&&`color${Le(t)}`,`fontSize${Le(n)}`]};return it(i,RZ,r)},sAe=Te("span",{name:"MuiIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${Le(n.color)}`],t[`fontSize${Le(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>({userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,fontSize:{inherit:"inherit",small:e.typography.pxToRem(20),medium:e.typography.pxToRem(24),large:e.typography.pxToRem(36)}[t.fontSize],color:{primary:(e.vars||e).palette.primary.main,secondary:(e.vars||e).palette.secondary.main,info:(e.vars||e).palette.info.main,success:(e.vars||e).palette.success.main,warning:(e.vars||e).palette.warning.main,action:(e.vars||e).palette.action.active,error:(e.vars||e).palette.error.main,disabled:(e.vars||e).palette.action.disabled,inherit:void 0}[t.color]})),kZ=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiIcon"}),{baseClassName:i="material-icons",className:o,color:s="inherit",component:a="span",fontSize:l="medium"}=r,c=He(r,iAe),u=M({},r,{baseClassName:i,color:s,component:a,fontSize:l}),d=oAe(u);return q.jsx(sAe,M({as:a,className:je(i,"notranslate",d.root,o),ownerState:u,"aria-hidden":!0,ref:n},c))});kZ.muiName="Icon";const aAe=kZ;function LZ(e){return tt("MuiImageList",e)}const lAe=nt("MuiImageList",["root","masonry","quilted","standard","woven"]),cAe=lAe,$Z=I.createContext({}),uAe=["children","className","cols","component","rowHeight","gap","style","variant"],dAe=e=>{const{classes:t,variant:n}=e;return it({root:["root",n]},LZ,t)},fAe=Te("ul",{name:"MuiImageList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})(({ownerState:e})=>M({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},e.variant==="masonry"&&{display:"block"})),hAe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiImageList"}),{children:i,className:o,cols:s=2,component:a="ul",rowHeight:l="auto",gap:c=4,style:u,variant:d="standard"}=r,f=He(r,uAe),h=I.useMemo(()=>({rowHeight:l,gap:c,variant:d}),[l,c,d]);I.useEffect(()=>{},[]);const p=M(d==="masonry"?{columnCount:s,columnGap:c}:{gridTemplateColumns:`repeat(${s}, 1fr)`,gap:c},u),g=M({},r,{component:a,gap:c,rowHeight:l,variant:d}),v=dAe(g);return q.jsx(fAe,M({as:a,className:je(v.root,v[d],o),ref:n,style:p,ownerState:g},f,{children:q.jsx($Z.Provider,{value:h,children:i})}))}),pAe=hAe;function DZ(e){return tt("MuiImageListItem",e)}const mAe=nt("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),ak=mAe,gAe=["children","className","cols","component","rows","style"],vAe=e=>{const{classes:t,variant:n}=e;return it({root:["root",n],img:["img"]},DZ,t)},yAe=Te("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${ak.img}`]:t.img},t.root,t[n.variant]]}})(({ownerState:e})=>M({display:"block",position:"relative"},e.variant==="standard"&&{display:"flex",flexDirection:"column"},e.variant==="woven"&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},{[`& .${ak.img}`]:M({objectFit:"cover",width:"100%",height:"100%",display:"block"},e.variant==="standard"&&{height:"auto",flexGrow:1})})),bAe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiImageListItem"}),{children:i,className:o,cols:s=1,component:a="li",rows:l=1,style:c}=r,u=He(r,gAe),{rowHeight:d="auto",gap:f,variant:h}=I.useContext($Z);let p="auto";h==="woven"?p=void 0:d!=="auto"&&(p=d*l+f*(l-1));const g=M({},r,{cols:s,component:a,gap:f,rowHeight:d,rows:l,variant:h}),v=vAe(g);return q.jsx(yAe,M({as:a,className:je(v.root,v[h],o),ref:n,style:M({height:p,gridColumnEnd:h!=="masonry"?`span ${s}`:void 0,gridRowEnd:h!=="masonry"?`span ${l}`:void 0,marginBottom:h==="masonry"?f:void 0,breakInside:h==="masonry"?"avoid":void 0},c),ownerState:g},u,{children:I.Children.map(i,m=>I.isValidElement(m)?m.type==="img"||sl(m,["Image"])?I.cloneElement(m,{className:je(v.img,m.props.className)}):m:null)}))}),xAe=bAe;function BZ(e){return tt("MuiImageListItemBar",e)}const _Ae=nt("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]),wAe=_Ae,SAe=["actionIcon","actionPosition","className","subtitle","title","position"],CAe=e=>{const{classes:t,position:n,actionIcon:r,actionPosition:i}=e,o={root:["root",`position${Le(n)}`],titleWrap:["titleWrap",`titleWrap${Le(n)}`,r&&`titleWrapActionPos${Le(i)}`],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon",`actionIconActionPos${Le(i)}`]};return it(o,BZ,t)},AAe=Te("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Le(n.position)}`]]}})(({theme:e,ownerState:t})=>M({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:e.typography.fontFamily},t.position==="bottom"&&{bottom:0},t.position==="top"&&{top:0},t.position==="below"&&{position:"relative",background:"transparent",alignItems:"normal"})),PAe=Te("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.titleWrap,t[`titleWrap${Le(n.position)}`],n.actionIcon&&t[`titleWrapActionPos${Le(n.actionPosition)}`]]}})(({theme:e,ownerState:t})=>M({flexGrow:1,padding:"12px 16px",color:(e.vars||e).palette.common.white,overflow:"hidden"},t.position==="below"&&{padding:"6px 0 12px",color:"inherit"},t.actionIcon&&t.actionPosition==="left"&&{paddingLeft:0},t.actionIcon&&t.actionPosition==="right"&&{paddingRight:0})),MAe=Te("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:(e,t)=>t.title})(({theme:e})=>({fontSize:e.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})),EAe=Te("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:(e,t)=>t.subtitle})(({theme:e})=>({fontSize:e.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"})),TAe=Te("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.actionIcon,t[`actionIconActionPos${Le(n.actionPosition)}`]]}})(({ownerState:e})=>M({},e.actionPosition==="left"&&{order:-1})),OAe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiImageListItemBar"}),{actionIcon:i,actionPosition:o="right",className:s,subtitle:a,title:l,position:c="bottom"}=r,u=He(r,SAe),d=M({},r,{position:c,actionPosition:o}),f=CAe(d);return q.jsxs(AAe,M({ownerState:d,className:je(f.root,s),ref:n},u,{children:[q.jsxs(PAe,{ownerState:d,className:f.titleWrap,children:[q.jsx(MAe,{className:f.title,children:l}),a?q.jsx(EAe,{className:f.subtitle,children:a}):null]}),i?q.jsx(TAe,{ownerState:d,className:f.actionIcon,children:i}):null]}))}),IAe=OAe,RAe=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],kAe=e=>{const{classes:t,disableUnderline:n}=e,i=it({root:["root",!n&&"underline"],input:["input"]},wK,t);return M({},t,i)},LAe=Te(eP,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...JA(e,t),!n.disableUnderline&&t.underline]}})(({theme:e,ownerState:t})=>{let r=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(r=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),M({position:"relative"},t.formControl&&{"label + &":{marginTop:16}},!t.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[t.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Xl.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Xl.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Xl.disabled}, .${Xl.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${Xl.disabled}:before`]:{borderBottomStyle:"dotted"}})}),$Ae=Te(tP,{name:"MuiInput",slot:"Input",overridesResolver:QA})({}),NZ=I.forwardRef(function(t,n){var r,i,o,s;const a=ot({props:t,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:u,fullWidth:d=!1,inputComponent:f="input",multiline:h=!1,slotProps:p,slots:g={},type:v="text"}=a,m=He(a,RAe),y=kAe(a),_={root:{ownerState:{disableUnderline:l}}},x=p??u?Tr(p??u,_):_,w=(r=(i=g.root)!=null?i:c.Root)!=null?r:LAe,S=(o=(s=g.input)!=null?s:c.Input)!=null?o:$Ae;return q.jsx(S1,M({slots:{root:w,input:S},slotProps:x,fullWidth:d,inputComponent:f,multiline:h,ref:n,type:v},m,{classes:y}))});NZ.muiName="Input";const iP=NZ;function FZ(e){return tt("MuiInputAdornment",e)}const DAe=nt("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]),lk=DAe;var A6;const BAe=["children","className","component","disablePointerEvents","disableTypography","position","variant"],NAe=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Le(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},FAe=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:r,position:i,size:o,variant:s}=e,a={root:["root",n&&"disablePointerEvents",i&&`position${Le(i)}`,s,r&&"hiddenLabel",o&&`size${Le(o)}`]};return it(a,FZ,t)},zAe=Te("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:NAe})(({theme:e,ownerState:t})=>M({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},t.variant==="filled"&&{[`&.${lk.positionStart}&:not(.${lk.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),jAe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiInputAdornment"}),{children:i,className:o,component:s="div",disablePointerEvents:a=!1,disableTypography:l=!1,position:c,variant:u}=r,d=He(r,BAe),f=Vs()||{};let h=u;u&&f.variant,f&&!h&&(h=f.variant);const p=M({},r,{hiddenLabel:f.hiddenLabel,size:f.size,disablePointerEvents:a,position:c,variant:h}),g=FAe(p);return q.jsx(ZA.Provider,{value:null,children:q.jsx(zAe,M({as:s,ownerState:p,className:je(g.root,o),ref:n},d,{children:typeof i=="string"&&!l?q.jsx(xn,{color:"text.secondary",children:i}):q.jsxs(I.Fragment,{children:[c==="start"?A6||(A6=q.jsx("span",{className:"notranslate",children:"​"})):null,i]})}))})}),UAe=jAe;function zZ(e){return tt("MuiInputLabel",e)}const VAe=nt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]),HAe=VAe,GAe=["disableAnimation","margin","shrink","variant","className"],WAe=e=>{const{classes:t,formControl:n,size:r,shrink:i,disableAnimation:o,variant:s,required:a}=e,l={root:["root",n&&"formControl",!o&&"animated",i&&"shrink",r&&r!=="normal"&&`size${Le(r)}`,s],asterisk:[a&&"asterisk"]},c=it(l,zZ,t);return M({},t,c)},qAe=Te(PZ,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${dm.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(({theme:e,ownerState:t})=>M({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},t.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},t.size==="small"&&{transform:"translate(0, 17px) scale(1)"},t.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!t.disableAnimation&&{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})},t.variant==="filled"&&M({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},t.shrink&&M({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},t.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),t.variant==="outlined"&&M({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},t.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},t.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),YAe=I.forwardRef(function(t,n){const r=ot({name:"MuiInputLabel",props:t}),{disableAnimation:i=!1,shrink:o,className:s}=r,a=He(r,GAe),l=Vs();let c=o;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const u=Ic({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),d=M({},r,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required,focused:u.focused}),f=WAe(d);return q.jsx(qAe,M({"data-shrink":c,ownerState:d,ref:n,className:je(f.root,s)},a,{classes:f}))}),jZ=YAe;function UZ(e){return tt("MuiLinearProgress",e)}const XAe=nt("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]),KAe=XAe,ZAe=["className","color","value","valueBuffer","variant"];let Xg=e=>e,P6,M6,E6,T6,O6,I6;const ck=4,JAe=ls(P6||(P6=Xg`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),QAe=ls(M6||(M6=Xg`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),ePe=ls(E6||(E6=Xg`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),tPe=e=>{const{classes:t,variant:n,color:r}=e,i={root:["root",`color${Le(r)}`,n],dashed:["dashed",`dashedColor${Le(r)}`],bar1:["bar",`barColor${Le(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${Le(r)}`,n==="buffer"&&`color${Le(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return it(i,UZ,t)},E4=(e,t)=>t==="inherit"?"currentColor":e.vars?e.vars.palette.LinearProgress[`${t}Bg`]:e.palette.mode==="light"?ya(e.palette[t].main,.62):va(e.palette[t].main,.5),nPe=Te("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${Le(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>M({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:E4(t,e.color)},e.color==="inherit"&&e.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},e.variant==="buffer"&&{backgroundColor:"transparent"},e.variant==="query"&&{transform:"rotate(180deg)"})),rPe=Te("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.dashed,t[`dashedColor${Le(n.color)}`]]}})(({ownerState:e,theme:t})=>{const n=E4(t,e.color);return M({position:"absolute",marginTop:0,height:"100%",width:"100%"},e.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},ma(T6||(T6=Xg`
    animation: ${0} 3s infinite linear;
  `),ePe)),iPe=Te("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${Le(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar1Indeterminate,n.variant==="determinate"&&t.bar1Determinate,n.variant==="buffer"&&t.bar1Buffer]}})(({ownerState:e,theme:t})=>M({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.variant==="determinate"&&{transition:`transform .${ck}s linear`},e.variant==="buffer"&&{zIndex:1,transition:`transform .${ck}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&ma(O6||(O6=Xg`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),JAe)),oPe=Te("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.bar,t[`barColor${Le(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&t.bar2Indeterminate,n.variant==="buffer"&&t.bar2Buffer]}})(({ownerState:e,theme:t})=>M({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},e.variant!=="buffer"&&{backgroundColor:e.color==="inherit"?"currentColor":(t.vars||t).palette[e.color].main},e.color==="inherit"&&{opacity:.3},e.variant==="buffer"&&{backgroundColor:E4(t,e.color),transition:`transform .${ck}s linear`}),({ownerState:e})=>(e.variant==="indeterminate"||e.variant==="query")&&ma(I6||(I6=Xg`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),QAe)),sPe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiLinearProgress"}),{className:i,color:o="primary",value:s,valueBuffer:a,variant:l="indeterminate"}=r,c=He(r,ZAe),u=M({},r,{color:o,variant:l}),d=tPe(u),f=Dn(),h={},p={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&s!==void 0){h["aria-valuenow"]=Math.round(s),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let g=s-100;f.direction==="rtl"&&(g=-g),p.bar1.transform=`translateX(${g}%)`}if(l==="buffer"&&a!==void 0){let g=(a||0)-100;f.direction==="rtl"&&(g=-g),p.bar2.transform=`translateX(${g}%)`}return q.jsxs(nPe,M({className:je(d.root,i),ownerState:u,role:"progressbar"},h,{ref:n},c,{children:[l==="buffer"?q.jsx(rPe,{className:d.dashed,ownerState:u}):null,q.jsx(iPe,{className:d.bar1,ownerState:u,style:p.bar1}),l==="determinate"?null:q.jsx(oPe,{className:d.bar2,ownerState:u,style:p.bar2})]}))}),VZ=sPe;function HZ(e){return tt("MuiLink",e)}const aPe=nt("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),GZ=aPe,WZ={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},lPe=e=>WZ[e]||e,cPe=({theme:e,ownerState:t})=>{const n=lPe(t.color),r=Hm(e,`palette.${n}`,!1)||t.color,i=Hm(e,`palette.${n}Channel`);return"vars"in e&&i?`rgba(${i} / 0.4)`:Et(r,.4)},uPe=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],dPe=e=>{const{classes:t,component:n,focusVisible:r,underline:i}=e,o={root:["root",`underline${Le(i)}`,n==="button"&&"button",r&&"focusVisible"]};return it(o,HZ,t)},fPe=Te(xn,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`underline${Le(n.underline)}`],n.component==="button"&&t.button]}})(({theme:e,ownerState:t})=>M({},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},t.underline==="always"&&M({textDecoration:"underline"},t.color!=="inherit"&&{textDecorationColor:cPe({theme:e,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${GZ.focusVisible}`]:{outline:"auto"}})),hPe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiLink"}),{className:i,color:o="primary",component:s="a",onBlur:a,onFocus:l,TypographyClasses:c,underline:u="always",variant:d="inherit",sx:f}=r,h=He(r,uPe),{isFocusVisibleRef:p,onBlur:g,onFocus:v,ref:m}=_h(),[y,b]=I.useState(!1),_=cn(n,m),x=A=>{g(A),p.current===!1&&b(!1),a&&a(A)},w=A=>{v(A),p.current===!0&&b(!0),l&&l(A)},S=M({},r,{color:o,component:s,focusVisible:y,underline:u,variant:d}),C=dPe(S);return q.jsx(fPe,M({color:o,className:je(C.root,i),classes:c,component:s,onBlur:x,onFocus:w,ref:_,ownerState:S,variant:d,sx:[...Object.keys(WZ).includes(o)?[]:[{color:o}],...Array.isArray(f)?f:[f]]},h))}),qZ=hPe,pPe=I.createContext({}),Os=pPe;function YZ(e){return tt("MuiList",e)}const mPe=nt("MuiList",["root","padding","dense","subheader"]),gPe=mPe,vPe=["children","className","component","dense","disablePadding","subheader"],yPe=e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return it({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},YZ,t)},bPe=Te("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})(({ownerState:e})=>M({listStyle:"none",margin:0,padding:0,position:"relative"},!e.disablePadding&&{paddingTop:8,paddingBottom:8},e.subheader&&{paddingTop:0})),xPe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiList"}),{children:i,className:o,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=He(r,vPe),d=I.useMemo(()=>({dense:a}),[a]),f=M({},r,{component:s,dense:a,disablePadding:l}),h=yPe(f);return q.jsx(Os.Provider,{value:d,children:q.jsxs(bPe,M({as:s,className:je(h.root,o),ref:n,ownerState:f},u,{children:[c,i]}))})}),XZ=xPe;function KZ(e){return tt("MuiListItem",e)}const _Pe=nt("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]),sf=_Pe;function ZZ(e){return tt("MuiListItemButton",e)}const wPe=nt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]),af=wPe,SPe=["alignItems","autoFocus","component","children","dense","disableGutters","divider","focusVisibleClassName","selected","className"],CPe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters]},APe=e=>{const{alignItems:t,classes:n,dense:r,disabled:i,disableGutters:o,divider:s,selected:a}=e,c=it({root:["root",r&&"dense",!o&&"gutters",s&&"divider",i&&"disabled",t==="flex-start"&&"alignItemsFlexStart",a&&"selected"]},ZZ,n);return M({},n,c)},PPe=Te(Xr,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiListItemButton",slot:"Root",overridesResolver:CPe})(({theme:e,ownerState:t})=>M({display:"flex",flexGrow:1,justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minWidth:0,boxSizing:"border-box",textAlign:"left",paddingTop:8,paddingBottom:8,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${af.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Et(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${af.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${af.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Et(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${af.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${af.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.alignItems==="flex-start"&&{alignItems:"flex-start"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.dense&&{paddingTop:4,paddingBottom:4})),MPe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiListItemButton"}),{alignItems:i="center",autoFocus:o=!1,component:s="div",children:a,dense:l=!1,disableGutters:c=!1,divider:u=!1,focusVisibleClassName:d,selected:f=!1,className:h}=r,p=He(r,SPe),g=I.useContext(Os),v=I.useMemo(()=>({dense:l||g.dense||!1,alignItems:i,disableGutters:c}),[i,g.dense,l,c]),m=I.useRef(null);Yr(()=>{o&&m.current&&m.current.focus()},[o]);const y=M({},r,{alignItems:i,dense:v.dense,disableGutters:c,divider:u,selected:f}),b=APe(y),_=cn(m,n);return q.jsx(Os.Provider,{value:v,children:q.jsx(PPe,M({ref:_,href:p.href||p.to,component:(p.href||p.to)&&s==="div"?"button":s,focusVisibleClassName:je(b.focusVisible,d),ownerState:y,className:je(b.root,h)},p,{classes:b,children:a}))})}),EPe=MPe;function JZ(e){return tt("MuiListItemSecondaryAction",e)}const TPe=nt("MuiListItemSecondaryAction",["root","disableGutters"]),OPe=TPe,IPe=["className"],RPe=e=>{const{disableGutters:t,classes:n}=e;return it({root:["root",t&&"disableGutters"]},JZ,n)},kPe=Te("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})(({ownerState:e})=>M({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},e.disableGutters&&{right:0})),QZ=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiListItemSecondaryAction"}),{className:i}=r,o=He(r,IPe),s=I.useContext(Os),a=M({},r,{disableGutters:s.disableGutters}),l=RPe(a);return q.jsx(kPe,M({className:je(l.root,i),ownerState:a,ref:n},o))});QZ.muiName="ListItemSecondaryAction";const eJ=QZ,LPe=["className"],$Pe=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected","slotProps","slots"],DPe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.button&&t.button,n.hasSecondaryAction&&t.secondaryAction]},BPe=e=>{const{alignItems:t,button:n,classes:r,dense:i,disabled:o,disableGutters:s,disablePadding:a,divider:l,hasSecondaryAction:c,selected:u}=e;return it({root:["root",i&&"dense",!s&&"gutters",!a&&"padding",l&&"divider",o&&"disabled",n&&"button",t==="flex-start"&&"alignItemsFlexStart",c&&"secondaryAction",u&&"selected"],container:["container"]},KZ,r)},NPe=Te("div",{name:"MuiListItem",slot:"Root",overridesResolver:DPe})(({theme:e,ownerState:t})=>M({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!t.disablePadding&&M({paddingTop:8,paddingBottom:8},t.dense&&{paddingTop:4,paddingBottom:4},!t.disableGutters&&{paddingLeft:16,paddingRight:16},!!t.secondaryAction&&{paddingRight:48}),!!t.secondaryAction&&{[`& > .${af.root}`]:{paddingRight:48}},{[`&.${sf.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${sf.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Et(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${sf.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${sf.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.alignItems==="flex-start"&&{alignItems:"flex-start"},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},t.button&&{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${sf.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Et(e.palette.primary.main,e.palette.action.selectedOpacity)}}},t.hasSecondaryAction&&{paddingRight:48})),FPe=Te("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),zPe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiListItem"}),{alignItems:i="center",autoFocus:o=!1,button:s=!1,children:a,className:l,component:c,components:u={},componentsProps:d={},ContainerComponent:f="li",ContainerProps:{className:h}={},dense:p=!1,disabled:g=!1,disableGutters:v=!1,disablePadding:m=!1,divider:y=!1,focusVisibleClassName:b,secondaryAction:_,selected:x=!1,slotProps:w={},slots:S={}}=r,C=He(r.ContainerProps,LPe),A=He(r,$Pe),T=I.useContext(Os),O=I.useMemo(()=>({dense:p||T.dense||!1,alignItems:i,disableGutters:v}),[i,T.dense,p,v]),R=I.useRef(null);Yr(()=>{o&&R.current&&R.current.focus()},[o]);const L=I.Children.toArray(a),D=L.length&&sl(L[L.length-1],["ListItemSecondaryAction"]),$=M({},r,{alignItems:i,autoFocus:o,button:s,dense:O.dense,disabled:g,disableGutters:v,disablePadding:m,divider:y,hasSecondaryAction:D,selected:x}),z=BPe($),H=cn(R,n),B=S.root||u.Root||NPe,V=w.root||d.root||{},J=M({className:je(z.root,V.className,l),disabled:g},A);let K=c||"li";return s&&(J.component=c||"div",J.focusVisibleClassName=je(sf.focusVisible,b),K=Xr),D?(K=!J.component&&!c?"div":K,f==="li"&&(K==="li"?K="div":J.component==="li"&&(J.component="div")),q.jsx(Os.Provider,{value:O,children:q.jsxs(FPe,M({as:f,className:je(z.container,h),ref:H,ownerState:$},C,{children:[q.jsx(B,M({},V,!da(B)&&{as:K,ownerState:M({},$,V.ownerState)},J,{children:L})),L.pop()]}))})):q.jsx(Os.Provider,{value:O,children:q.jsxs(B,M({},V,{as:K,ref:H},!da(B)&&{ownerState:M({},$,V.ownerState)},J,{children:[L,_&&q.jsx(eJ,{children:_})]}))})}),jPe=zPe;function tJ(e){return tt("MuiListItemAvatar",e)}const UPe=nt("MuiListItemAvatar",["root","alignItemsFlexStart"]),VPe=UPe,HPe=["className"],GPe=e=>{const{alignItems:t,classes:n}=e;return it({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},tJ,n)},WPe=Te("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({ownerState:e})=>M({minWidth:56,flexShrink:0},e.alignItems==="flex-start"&&{marginTop:8})),qPe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiListItemAvatar"}),{className:i}=r,o=He(r,HPe),s=I.useContext(Os),a=M({},r,{alignItems:s.alignItems}),l=GPe(a);return q.jsx(WPe,M({className:je(l.root,i),ownerState:a,ref:n},o))}),YPe=qPe;function nJ(e){return tt("MuiListItemIcon",e)}const XPe=nt("MuiListItemIcon",["root","alignItemsFlexStart"]),uk=XPe,KPe=["className"],ZPe=e=>{const{alignItems:t,classes:n}=e;return it({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},nJ,n)},JPe=Te("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>M({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},t.alignItems==="flex-start"&&{marginTop:8})),QPe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiListItemIcon"}),{className:i}=r,o=He(r,KPe),s=I.useContext(Os),a=M({},r,{alignItems:s.alignItems}),l=ZPe(a);return q.jsx(JPe,M({className:je(l.root,i),ownerState:a,ref:n},o))}),eMe=QPe;function rJ(e){return tt("MuiListItemText",e)}const tMe=nt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),rb=tMe,nMe=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],rMe=e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:o}=e;return it({root:["root",n&&"inset",o&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},rJ,t)},iMe=Te("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${rb.primary}`]:t.primary},{[`& .${rb.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>M({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),oMe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiListItemText"}),{children:i,className:o,disableTypography:s=!1,inset:a=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=r,f=He(r,nMe),{dense:h}=I.useContext(Os);let p=l??i,g=u;const v=M({},r,{disableTypography:s,inset:a,primary:!!p,secondary:!!g,dense:h}),m=rMe(v);return p!=null&&p.type!==xn&&!s&&(p=q.jsx(xn,M({variant:h?"body2":"body1",className:m.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:p}))),g!=null&&g.type!==xn&&!s&&(g=q.jsx(xn,M({variant:"body2",className:m.secondary,color:"text.secondary",display:"block"},d,{children:g}))),q.jsxs(iMe,M({className:je(m.root,o),ownerState:v,ref:n},f,{children:[p,g]}))}),sMe=oMe,aMe=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function UT(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function R6(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function iJ(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.indexOf(t.keys.join(""))===0}function Bv(e,t,n,r,i,o){let s=!1,a=i(e,t,t?n:!1);for(;a;){if(a===e.firstChild){if(s)return!1;s=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!iJ(a,o)||l)a=i(e,a,n);else return a.focus(),!0}return!1}const lMe=I.forwardRef(function(t,n){const{actions:r,autoFocus:i=!1,autoFocusItem:o=!1,children:s,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=t,f=He(t,aMe),h=I.useRef(null),p=I.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Yr(()=>{i&&h.current.focus()},[i]),I.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(b,_)=>{const x=!h.current.style.width;if(b.clientHeight<h.current.clientHeight&&x){const w=`${rX(kn(b))}px`;h.current.style[_.direction==="rtl"?"paddingLeft":"paddingRight"]=w,h.current.style.width=`calc(100% + ${w})`}return h.current}}),[]);const g=b=>{const _=h.current,x=b.key,w=kn(_).activeElement;if(x==="ArrowDown")b.preventDefault(),Bv(_,w,c,l,UT);else if(x==="ArrowUp")b.preventDefault(),Bv(_,w,c,l,R6);else if(x==="Home")b.preventDefault(),Bv(_,null,c,l,UT);else if(x==="End")b.preventDefault(),Bv(_,null,c,l,R6);else if(x.length===1){const S=p.current,C=x.toLowerCase(),A=performance.now();S.keys.length>0&&(A-S.lastTime>500?(S.keys=[],S.repeating=!0,S.previousKeyMatched=!0):S.repeating&&C!==S.keys[0]&&(S.repeating=!1)),S.lastTime=A,S.keys.push(C);const T=w&&!S.repeating&&iJ(w,S);S.previousKeyMatched&&(T||Bv(_,w,!1,l,UT,S))?b.preventDefault():S.previousKeyMatched=!1}u&&u(b)},v=cn(h,n);let m=-1;I.Children.forEach(s,(b,_)=>{if(!I.isValidElement(b)){m===_&&(m+=1,m>=s.length&&(m=-1));return}b.props.disabled||(d==="selectedMenu"&&b.props.selected||m===-1)&&(m=_),m===_&&(b.props.disabled||b.props.muiSkipListHighlight||b.type.muiSkipListHighlight)&&(m+=1,m>=s.length&&(m=-1))});const y=I.Children.map(s,(b,_)=>{if(_===m){const x={};return o&&(x.autoFocus=!0),b.props.tabIndex===void 0&&d==="selectedMenu"&&(x.tabIndex=0),I.cloneElement(b,x)}return b});return q.jsx(XZ,M({role:"menu",ref:v,className:a,onKeyDown:g,tabIndex:i?0:-1},f,{children:y}))}),oJ=lMe;function sJ(e){return tt("MuiPopover",e)}const cMe=nt("MuiPopover",["root","paper"]),uMe=cMe,dMe=["onEntering"],fMe=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],hMe=["slotProps"];function dk(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function fk(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function k6(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function VT(e){return typeof e=="function"?e():e}const pMe=e=>{const{classes:t}=e;return it({root:["root"],paper:["paper"]},sJ,t)},aJ=Te(rP,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),T4=Te(cs,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),mMe=I.forwardRef(function(t,n){var r,i,o;const s=ot({props:t,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:f,className:h,container:p,elevation:g=8,marginThreshold:v=16,open:m,PaperProps:y={},slots:b,slotProps:_,transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:w=nb,transitionDuration:S="auto",TransitionProps:{onEntering:C}={},disableScrollLock:A=!1}=s,T=He(s.TransitionProps,dMe),O=He(s,fMe),R=(r=_==null?void 0:_.paper)!=null?r:y,L=I.useRef(),D=cn(L,R.ref),$=M({},s,{anchorOrigin:c,anchorReference:d,elevation:g,marginThreshold:v,externalPaperSlotProps:R,transformOrigin:x,TransitionComponent:w,transitionDuration:S,TransitionProps:T}),z=pMe($),H=I.useCallback(()=>{if(d==="anchorPosition")return u;const ne=VT(l),Ce=(ne&&ne.nodeType===1?ne:kn(L.current).body).getBoundingClientRect();return{top:Ce.top+dk(Ce,c.vertical),left:Ce.left+fk(Ce,c.horizontal)}},[l,c.horizontal,c.vertical,u,d]),B=I.useCallback(ne=>({vertical:dk(ne,x.vertical),horizontal:fk(ne,x.horizontal)}),[x.horizontal,x.vertical]),V=I.useCallback(ne=>{const xe={width:ne.offsetWidth,height:ne.offsetHeight},Ce=B(xe);if(d==="none")return{top:null,left:null,transformOrigin:k6(Ce)};const me=H();let X=me.top-Ce.vertical,Q=me.left-Ce.horizontal;const Re=X+xe.height,Pe=Q+xe.width,le=Ai(VT(l)),Oe=le.innerHeight-v,Be=le.innerWidth-v;if(v!==null&&X<v){const De=X-v;X-=De,Ce.vertical+=De}else if(v!==null&&Re>Oe){const De=Re-Oe;X-=De,Ce.vertical+=De}if(v!==null&&Q<v){const De=Q-v;Q-=De,Ce.horizontal+=De}else if(Pe>Be){const De=Pe-Be;Q-=De,Ce.horizontal+=De}return{top:`${Math.round(X)}px`,left:`${Math.round(Q)}px`,transformOrigin:k6(Ce)}},[l,d,H,B,v]),[J,K]=I.useState(m),ie=I.useCallback(()=>{const ne=L.current;if(!ne)return;const xe=V(ne);xe.top!==null&&(ne.style.top=xe.top),xe.left!==null&&(ne.style.left=xe.left),ne.style.transformOrigin=xe.transformOrigin,K(!0)},[V]);I.useEffect(()=>(A&&window.addEventListener("scroll",ie),()=>window.removeEventListener("scroll",ie)),[l,A,ie]);const ce=(ne,xe)=>{C&&C(ne,xe),ie()},pe=()=>{K(!1)};I.useEffect(()=>{m&&ie()}),I.useImperativeHandle(a,()=>m?{updatePosition:()=>{ie()}}:null,[m,ie]),I.useEffect(()=>{if(!m)return;const ne=xh(()=>{ie()}),xe=Ai(l);return xe.addEventListener("resize",ne),()=>{ne.clear(),xe.removeEventListener("resize",ne)}},[l,m,ie]);let se=S;S==="auto"&&!w.muiSupportAuto&&(se=void 0);const G=p||(l?kn(VT(l)).body:void 0),he=(i=b==null?void 0:b.root)!=null?i:aJ,Z=(o=b==null?void 0:b.paper)!=null?o:T4,ae=vr({elementType:Z,externalSlotProps:M({},R,{style:J?R.style:M({},R.style,{opacity:0})}),additionalProps:{elevation:g,ref:D},ownerState:$,className:je(z.paper,R==null?void 0:R.className)}),oe=vr({elementType:he,externalSlotProps:(_==null?void 0:_.root)||{},externalForwardedProps:O,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:G,open:m},ownerState:$,className:je(z.root,h)}),{slotProps:te}=oe,ve=He(oe,hMe);return q.jsx(he,M({},ve,!da(he)&&{slotProps:te,disableScrollLock:A},{children:q.jsx(w,M({appear:!0,in:m,onEntering:ce,onExited:pe,timeout:se},T,{children:q.jsx(Z,M({},ae,{children:f}))}))}))}),S2=mMe;function lJ(e){return tt("MuiMenu",e)}const gMe=nt("MuiMenu",["root","paper","list"]),vMe=gMe,yMe=["onEntering"],bMe=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],xMe={vertical:"top",horizontal:"right"},_Me={vertical:"top",horizontal:"left"},wMe=e=>{const{classes:t}=e;return it({root:["root"],paper:["paper"],list:["list"]},lJ,t)},SMe=Te(S2,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),CMe=Te(T4,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),AMe=Te(oJ,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),PMe=I.forwardRef(function(t,n){var r,i;const o=ot({props:t,name:"MuiMenu"}),{autoFocus:s=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:f,PaperProps:h={},PopoverClasses:p,transitionDuration:g="auto",TransitionProps:{onEntering:v}={},variant:m="selectedMenu",slots:y={},slotProps:b={}}=o,_=He(o.TransitionProps,yMe),x=He(o,bMe),w=Dn(),S=w.direction==="rtl",C=M({},o,{autoFocus:s,disableAutoFocusItem:c,MenuListProps:u,onEntering:v,PaperProps:h,transitionDuration:g,TransitionProps:_,variant:m}),A=wMe(C),T=s&&!c&&f,O=I.useRef(null),R=(V,J)=>{O.current&&O.current.adjustStyleForScrollbar(V,w),v&&v(V,J)},L=V=>{V.key==="Tab"&&(V.preventDefault(),d&&d(V,"tabKeyDown"))};let D=-1;I.Children.map(a,(V,J)=>{I.isValidElement(V)&&(V.props.disabled||(m==="selectedMenu"&&V.props.selected||D===-1)&&(D=J))});const $=(r=y.paper)!=null?r:CMe,z=(i=b.paper)!=null?i:h,H=vr({elementType:y.root,externalSlotProps:b.root,ownerState:C,className:[A.root,l]}),B=vr({elementType:$,externalSlotProps:z,ownerState:C,className:A.paper});return q.jsx(SMe,M({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:S?"right":"left"},transformOrigin:S?xMe:_Me,slots:{paper:$,root:y.root},slotProps:{root:H,paper:B},open:f,ref:n,transitionDuration:g,TransitionProps:M({onEntering:R},_),ownerState:C},x,{classes:p,children:q.jsx(AMe,M({onKeyDown:L,actions:O,autoFocus:s&&(D===-1||c),autoFocusItem:T,variant:m},u,{className:je(A.list,u.className),children:a}))}))}),C1=PMe;function cJ(e){return tt("MuiMenuItem",e)}const MMe=nt("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Sp=MMe,EMe=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],TMe=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},OMe=e=>{const{disabled:t,dense:n,divider:r,disableGutters:i,selected:o,classes:s}=e,l=it({root:["root",n&&"dense",t&&"disabled",!i&&"gutters",r&&"divider",o&&"selected"]},cJ,s);return M({},s,l)},IMe=Te(Xr,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:TMe})(({theme:e,ownerState:t})=>M({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Sp.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Et(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Sp.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Sp.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Et(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Sp.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Sp.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${rk.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${rk.inset}`]:{marginLeft:52},[`& .${rb.root}`]:{marginTop:0,marginBottom:0},[`& .${rb.inset}`]:{paddingLeft:36},[`& .${uk.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&M({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${uk.root} svg`]:{fontSize:"1.25rem"}}))),RMe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiMenuItem"}),{autoFocus:i=!1,component:o="li",dense:s=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:f}=r,h=He(r,EMe),p=I.useContext(Os),g=I.useMemo(()=>({dense:s||p.dense||!1,disableGutters:l}),[p.dense,s,l]),v=I.useRef(null);Yr(()=>{i&&v.current&&v.current.focus()},[i]);const m=M({},r,{dense:g.dense,divider:a,disableGutters:l}),y=OMe(r),b=cn(v,n);let _;return r.disabled||(_=d!==void 0?d:-1),q.jsx(Os.Provider,{value:g,children:q.jsx(IMe,M({ref:b,role:u,tabIndex:_,component:o,focusVisibleClassName:je(y.focusVisible,c),className:je(y.root,f)},h,{ownerState:m,classes:y}))})}),fo=RMe;function uJ(e){return tt("MuiMobileStepper",e)}const kMe=nt("MuiMobileStepper",["root","positionBottom","positionTop","positionStatic","dots","dot","dotActive","progress"]),LMe=kMe,$Me=["activeStep","backButton","className","LinearProgressProps","nextButton","position","steps","variant"],DMe=e=>{const{classes:t,position:n}=e,r={root:["root",`position${Le(n)}`],dots:["dots"],dot:["dot"],dotActive:["dotActive"],progress:["progress"]};return it(r,uJ,t)},BMe=Te(cs,{name:"MuiMobileStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Le(n.position)}`]]}})(({theme:e,ownerState:t})=>M({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",background:(e.vars||e).palette.background.default,padding:8},t.position==="bottom"&&{position:"fixed",bottom:0,left:0,right:0,zIndex:(e.vars||e).zIndex.mobileStepper},t.position==="top"&&{position:"fixed",top:0,left:0,right:0,zIndex:(e.vars||e).zIndex.mobileStepper})),NMe=Te("div",{name:"MuiMobileStepper",slot:"Dots",overridesResolver:(e,t)=>t.dots})(({ownerState:e})=>M({},e.variant==="dots"&&{display:"flex",flexDirection:"row"})),FMe=Te("div",{name:"MuiMobileStepper",slot:"Dot",shouldForwardProp:e=>y1(e)&&e!=="dotActive",overridesResolver:(e,t)=>{const{dotActive:n}=e;return[t.dot,n&&t.dotActive]}})(({theme:e,ownerState:t,dotActive:n})=>M({},t.variant==="dots"&&M({transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),backgroundColor:(e.vars||e).palette.action.disabled,borderRadius:"50%",width:8,height:8,margin:"0 2px"},n&&{backgroundColor:(e.vars||e).palette.primary.main}))),zMe=Te(VZ,{name:"MuiMobileStepper",slot:"Progress",overridesResolver:(e,t)=>t.progress})(({ownerState:e})=>M({},e.variant==="progress"&&{width:"50%"})),jMe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiMobileStepper"}),{activeStep:i=0,backButton:o,className:s,LinearProgressProps:a,nextButton:l,position:c="bottom",steps:u,variant:d="dots"}=r,f=He(r,$Me),h=M({},r,{activeStep:i,position:c,variant:d});let p;d==="progress"&&(u===1?p=100:p=Math.ceil(i/(u-1)*100));const g=DMe(h);return q.jsxs(BMe,M({square:!0,elevation:0,className:je(g.root,s),ref:n,ownerState:h},f,{children:[o,d==="text"&&q.jsxs(I.Fragment,{children:[i+1," / ",u]}),d==="dots"&&q.jsx(NMe,{ownerState:h,className:g.dots,children:[...new Array(u)].map((v,m)=>q.jsx(FMe,{className:je(g.dot,m===i&&g.dotActive),ownerState:h,dotActive:m===i},m))}),d==="progress"&&q.jsx(zMe,M({ownerState:h,className:g.progress,variant:"determinate",value:p},a)),l]}))}),UMe=jMe;function O4(e){return tt("MuiNativeSelect",e)}const VMe=nt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),oP=VMe,HMe=["className","disabled","error","IconComponent","inputRef","variant"],GMe=e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${Le(n)}`,o&&"iconOpen",r&&"disabled"]};return it(a,O4,t)},dJ=({ownerState:e,theme:t})=>M({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":M({},t.vars?{backgroundColor:`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:t.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${oP.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(t.vars||t).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},e.variant==="filled"&&{"&&&":{paddingRight:32}},e.variant==="outlined"&&{borderRadius:(t.vars||t).shape.borderRadius,"&:focus":{borderRadius:(t.vars||t).shape.borderRadius},"&&&":{paddingRight:32}}),WMe=Te("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Br,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${oP.multiple}`]:t.multiple}]}})(dJ),fJ=({ownerState:e,theme:t})=>M({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(t.vars||t).palette.action.active,[`&.${oP.disabled}`]:{color:(t.vars||t).palette.action.disabled}},e.open&&{transform:"rotate(180deg)"},e.variant==="filled"&&{right:7},e.variant==="outlined"&&{right:7}),qMe=Te("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Le(n.variant)}`],n.open&&t.iconOpen]}})(fJ),YMe=I.forwardRef(function(t,n){const{className:r,disabled:i,error:o,IconComponent:s,inputRef:a,variant:l="standard"}=t,c=He(t,HMe),u=M({},t,{disabled:i,variant:l,error:o}),d=GMe(u);return q.jsxs(I.Fragment,{children:[q.jsx(WMe,M({ownerState:u,className:je(d.select,r),disabled:i,ref:a||n},c)),t.multiple?null:q.jsx(qMe,{as:s,ownerState:u,className:d.icon})]})}),hJ=YMe,XMe=["className","children","classes","IconComponent","input","inputProps","variant"],KMe=["root"],ZMe=e=>{const{classes:t}=e;return it({root:["root"]},O4,t)},JMe=q.jsx(iP,{}),pJ=I.forwardRef(function(t,n){const r=ot({name:"MuiNativeSelect",props:t}),{className:i,children:o,classes:s={},IconComponent:a=y4,input:l=JMe,inputProps:c}=r,u=He(r,XMe),d=Vs(),f=Ic({props:r,muiFormControl:d,states:["variant"]}),h=M({},r,{classes:s}),p=ZMe(h),g=He(s,KMe);return q.jsx(I.Fragment,{children:I.cloneElement(l,M({inputComponent:hJ,inputProps:M({children:o,classes:g,IconComponent:a,variant:f.variant,type:void 0},c,l?l.props.inputProps:{}),ref:n},u,{className:je(p.root,l.props.className,i)}))})});pJ.muiName="Select";const QMe=pJ;var L6;const eEe=["children","classes","className","label","notched"],tEe=Te("fieldset",{shouldForwardProp:Br})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),nEe=Te("legend",{shouldForwardProp:Br})(({ownerState:e,theme:t})=>M({float:"unset",width:"auto",overflow:"hidden"},!e.withLabel&&{padding:0,lineHeight:"11px",transition:t.transitions.create("width",{duration:150,easing:t.transitions.easing.easeOut})},e.withLabel&&M({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:t.transitions.create("max-width",{duration:50,easing:t.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},e.notched&&{maxWidth:"100%",transition:t.transitions.create("max-width",{duration:100,easing:t.transitions.easing.easeOut,delay:50})})));function rEe(e){const{className:t,label:n,notched:r}=e,i=He(e,eEe),o=n!=null&&n!=="",s=M({},e,{notched:r,withLabel:o});return q.jsx(tEe,M({"aria-hidden":!0,className:t,ownerState:s},i,{children:q.jsx(nEe,{ownerState:s,children:o?q.jsx("span",{children:n}):L6||(L6=q.jsx("span",{className:"notranslate",children:"​"}))})}))}const iEe=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],oEe=e=>{const{classes:t}=e,r=it({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},SK,t);return M({},t,r)},sEe=Te(eP,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:JA})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return M({position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Qs.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Qs.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${Qs.focused} .${Qs.notchedOutline}`]:{borderColor:(e.vars||e).palette[t.color].main,borderWidth:2},[`&.${Qs.error} .${Qs.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Qs.disabled} .${Qs.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}},t.startAdornment&&{paddingLeft:14},t.endAdornment&&{paddingRight:14},t.multiline&&M({padding:"16.5px 14px"},t.size==="small"&&{padding:"8.5px 14px"}))}),aEe=Te(rEe,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}}),lEe=Te(tP,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:QA})(({theme:e,ownerState:t})=>M({padding:"16.5px 14px"},!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},t.size==="small"&&{padding:"8.5px 14px"},t.multiline&&{padding:0},t.startAdornment&&{paddingLeft:0},t.endAdornment&&{paddingRight:0})),mJ=I.forwardRef(function(t,n){var r,i,o,s,a;const l=ot({props:t,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:f,multiline:h=!1,notched:p,slots:g={},type:v="text"}=l,m=He(l,iEe),y=oEe(l),b=Vs(),_=Ic({props:l,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),x=M({},l,{color:_.color||"primary",disabled:_.disabled,error:_.error,focused:_.focused,formControl:b,fullWidth:u,hiddenLabel:_.hiddenLabel,multiline:h,size:_.size,type:v}),w=(r=(i=g.root)!=null?i:c.Root)!=null?r:sEe,S=(o=(s=g.input)!=null?s:c.Input)!=null?o:lEe;return q.jsx(S1,M({slots:{root:w,input:S},renderSuffix:C=>q.jsx(aEe,{ownerState:x,className:y.notchedOutline,label:f!=null&&f!==""&&_.required?a||(a=q.jsxs(I.Fragment,{children:[f," ","*"]})):f,notched:typeof p<"u"?p:!!(C.startAdornment||C.filled||C.focused)}),fullWidth:u,inputComponent:d,multiline:h,ref:n,type:v},m,{classes:M({},y,{notchedOutline:null})}))});mJ.muiName="Input";const I4=mJ;function gJ(e){return tt("MuiPagination",e)}const cEe=nt("MuiPagination",["root","ul","outlined","text"]),uEe=cEe,dEe=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function vJ(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:r=1,defaultPage:i=1,disabled:o=!1,hideNextButton:s=!1,hidePrevButton:a=!1,onChange:l,page:c,showFirstButton:u=!1,showLastButton:d=!1,siblingCount:f=1}=e,h=He(e,dEe),[p,g]=Wi({controlled:c,default:i,name:n,state:"page"}),v=(A,T)=>{c||g(T),l&&l(A,T)},m=(A,T)=>{const O=T-A+1;return Array.from({length:O},(R,L)=>A+L)},y=m(1,Math.min(t,r)),b=m(Math.max(r-t+1,t+1),r),_=Math.max(Math.min(p-f,r-t-f*2-1),t+2),x=Math.min(Math.max(p+f,t+f*2+2),b.length>0?b[0]-2:r-1),w=[...u?["first"]:[],...a?[]:["previous"],...y,..._>t+2?["start-ellipsis"]:t+1<r-t?[t+1]:[],...m(_,x),...x<r-t-1?["end-ellipsis"]:r-t>t?[r-t]:[],...b,...s?[]:["next"],...d?["last"]:[]],S=A=>{switch(A){case"first":return 1;case"previous":return p-1;case"next":return p+1;case"last":return r;default:return null}},C=w.map(A=>typeof A=="number"?{onClick:T=>{v(T,A)},type:"page",page:A,selected:A===p,disabled:o,"aria-current":A===p?"true":void 0}:{onClick:T=>{v(T,S(A))},type:A,page:S(A),selected:!1,disabled:o||A.indexOf("ellipsis")===-1&&(A==="next"||A==="last"?p>=r:p<=1)});return M({items:C},h)}function yJ(e){return tt("MuiPaginationItem",e)}const fEe=nt("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),No=fEe,hk=Un(q.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),pk=Un(q.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),$6=Un(q.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),D6=Un(q.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),hEe=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],bJ=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Le(n.size)}`],n.variant==="text"&&t[`text${Le(n.color)}`],n.variant==="outlined"&&t[`outlined${Le(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},pEe=e=>{const{classes:t,color:n,disabled:r,selected:i,size:o,shape:s,type:a,variant:l}=e,c={root:["root",`size${Le(o)}`,l,s,n!=="standard"&&`${l}${Le(n)}`,r&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[a]],icon:["icon"]};return it(c,yJ,t)},mEe=Te("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:bJ})(({theme:e,ownerState:t})=>M({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${No.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),gEe=Te(Xr,{name:"MuiPaginationItem",slot:"Root",overridesResolver:bJ})(({theme:e,ownerState:t})=>M({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${No.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${No.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${No.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Et(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${No.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Et(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${No.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>M({},t.variant==="text"&&{[`&.${No.selected}`]:M({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${No.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${No.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${No.selected}`]:M({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:Et(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:Et(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Et(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${No.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Et(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${No.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),vEe=Te("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>M({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),yEe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiPaginationItem"}),{className:i,color:o="standard",component:s,components:a={},disabled:l=!1,page:c,selected:u=!1,shape:d="circular",size:f="medium",slots:h={},type:p="page",variant:g="text"}=r,v=He(r,hEe),m=M({},r,{color:o,disabled:l,selected:u,shape:d,size:f,type:p,variant:g}),y=Dn(),b=pEe(m),x=(y.direction==="rtl"?{previous:h.next||a.next||D6,next:h.previous||a.previous||$6,last:h.first||a.first||hk,first:h.last||a.last||pk}:{previous:h.previous||a.previous||$6,next:h.next||a.next||D6,first:h.first||a.first||hk,last:h.last||a.last||pk})[p];return p==="start-ellipsis"||p==="end-ellipsis"?q.jsx(mEe,{ref:n,ownerState:m,className:je(b.root,i),children:"…"}):q.jsxs(gEe,M({ref:n,ownerState:m,component:s,disabled:l,className:je(b.root,i)},v,{children:[p==="page"&&c,x?q.jsx(vEe,{as:x,ownerState:m,className:b.icon}):null]}))}),xJ=yEe,bEe=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],xEe=e=>{const{classes:t,variant:n}=e;return it({root:["root",n],ul:["ul"]},gJ,t)},_Ee=Te("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),wEe=Te("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function SEe(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const CEe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiPagination"}),{boundaryCount:i=1,className:o,color:s="standard",count:a=1,defaultPage:l=1,disabled:c=!1,getItemAriaLabel:u=SEe,hideNextButton:d=!1,hidePrevButton:f=!1,renderItem:h=C=>q.jsx(xJ,M({},C)),shape:p="circular",showFirstButton:g=!1,showLastButton:v=!1,siblingCount:m=1,size:y="medium",variant:b="text"}=r,_=He(r,bEe),{items:x}=vJ(M({},r,{componentName:"Pagination"})),w=M({},r,{boundaryCount:i,color:s,count:a,defaultPage:l,disabled:c,getItemAriaLabel:u,hideNextButton:d,hidePrevButton:f,renderItem:h,shape:p,showFirstButton:g,showLastButton:v,siblingCount:m,size:y,variant:b}),S=xEe(w);return q.jsx(_Ee,M({"aria-label":"pagination navigation",className:je(S.root,o),ownerState:w,ref:n},_,{children:q.jsx(wEe,{className:S.ul,ownerState:w,children:x.map((C,A)=>q.jsx("li",{children:h(M({},C,{color:s,"aria-label":u(C.type,C.page,C.selected),shape:p,size:y,variant:b}))},A))})}))}),AEe=CEe,PEe=Un(q.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),MEe=Un(q.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),EEe=Te("span",{shouldForwardProp:Br})({position:"relative",display:"flex"}),TEe=Te(PEe)({transform:"scale(1)"}),OEe=Te(MEe)(({theme:e,ownerState:t})=>M({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest})},t.checked&&{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}));function _J(e){const{checked:t=!1,classes:n={},fontSize:r}=e,i=M({},e,{checked:t});return q.jsxs(EEe,{className:n.root,ownerState:i,children:[q.jsx(TEe,{fontSize:r,className:n.background,ownerState:i}),q.jsx(OEe,{fontSize:r,className:n.dot,ownerState:i})]})}const IEe=I.createContext(void 0),wJ=IEe;function SJ(){return I.useContext(wJ)}function CJ(e){return tt("MuiRadio",e)}const REe=nt("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),mk=REe,kEe=["checked","checkedIcon","color","icon","name","onChange","size","className"],LEe=e=>{const{classes:t,color:n,size:r}=e,i={root:["root",`color${Le(n)}`,r!=="medium"&&`size${Le(r)}`]};return M({},t,it(i,CJ,t))},$Ee=Te(A4,{shouldForwardProp:e=>Br(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size!=="medium"&&t[`size${Le(n.size)}`],t[`color${Le(n.color)}`]]}})(({theme:e,ownerState:t})=>M({color:(e.vars||e).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${t.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(t.color==="default"?e.palette.action.active:e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${mk.checked}`]:{color:(e.vars||e).palette[t.color].main}},{[`&.${mk.disabled}`]:{color:(e.vars||e).palette.action.disabled}}));function DEe(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}const B6=q.jsx(_J,{checked:!0}),N6=q.jsx(_J,{}),BEe=I.forwardRef(function(t,n){var r,i;const o=ot({props:t,name:"MuiRadio"}),{checked:s,checkedIcon:a=B6,color:l="primary",icon:c=N6,name:u,onChange:d,size:f="medium",className:h}=o,p=He(o,kEe),g=M({},o,{color:l,size:f}),v=LEe(g),m=SJ();let y=s;const b=Zy(d,m&&m.onChange);let _=u;return m&&(typeof y>"u"&&(y=DEe(m.value,o.value)),typeof _>"u"&&(_=m.name)),q.jsx($Ee,M({type:"radio",icon:I.cloneElement(c,{fontSize:(r=N6.props.fontSize)!=null?r:f}),checkedIcon:I.cloneElement(a,{fontSize:(i=B6.props.fontSize)!=null?i:f}),ownerState:g,classes:v,name:_,checked:y,onChange:b,ref:n,className:je(v.root,h)},p))}),NEe=BEe,FEe=["actions","children","defaultValue","name","onChange","value"],zEe=I.forwardRef(function(t,n){const{actions:r,children:i,defaultValue:o,name:s,onChange:a,value:l}=t,c=He(t,FEe),u=I.useRef(null),[d,f]=Wi({controlled:l,default:o,name:"RadioGroup"});I.useImperativeHandle(r,()=>({focus:()=>{let v=u.current.querySelector("input:not(:disabled):checked");v||(v=u.current.querySelector("input:not(:disabled)")),v&&v.focus()}}),[]);const h=cn(n,u),p=Ls(s),g=I.useMemo(()=>({name:p,onChange(v){f(v.target.value),a&&a(v,v.target.value)},value:d}),[p,a,f,d]);return q.jsx(wJ.Provider,{value:g,children:q.jsx(_Z,M({role:"radiogroup",ref:h},c,{children:i}))})}),jEe=zEe,UEe=Un(q.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),VEe=Un(q.jsx("path",{d:"M22 9.24l-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"}),"StarBorder");function AJ(e){return tt("MuiRating",e)}const HEe=nt("MuiRating",["root","sizeSmall","sizeMedium","sizeLarge","readOnly","disabled","focusVisible","visuallyHidden","pristine","label","labelEmptyValueActive","icon","iconEmpty","iconFilled","iconHover","iconFocus","iconActive","decimal"]),Cp=HEe,GEe=["value"],WEe=["className","defaultValue","disabled","emptyIcon","emptyLabelText","getLabelText","highlightSelectedOnly","icon","IconContainerComponent","max","name","onChange","onChangeActive","onMouseLeave","onMouseMove","precision","readOnly","size","value"];function qEe(e,t,n){return e<t?t:e>n?n:e}function YEe(e){const t=e.toString().split(".")[1];return t?t.length:0}function HT(e,t){if(e==null)return e;const n=Math.round(e/t)*t;return Number(n.toFixed(YEe(t)))}const XEe=e=>{const{classes:t,size:n,readOnly:r,disabled:i,emptyValueFocused:o,focusVisible:s}=e,a={root:["root",`size${Le(n)}`,i&&"disabled",s&&"focusVisible",r&&"readOnly"],label:["label","pristine"],labelEmptyValue:[o&&"labelEmptyValueActive"],icon:["icon"],iconEmpty:["iconEmpty"],iconFilled:["iconFilled"],iconHover:["iconHover"],iconFocus:["iconFocus"],iconActive:["iconActive"],decimal:["decimal"],visuallyHidden:["visuallyHidden"]};return it(a,AJ,t)},KEe=Te("span",{name:"MuiRating",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Cp.visuallyHidden}`]:t.visuallyHidden},t.root,t[`size${Le(n.size)}`],n.readOnly&&t.readOnly]}})(({theme:e,ownerState:t})=>M({display:"inline-flex",position:"relative",fontSize:e.typography.pxToRem(24),color:"#faaf00",cursor:"pointer",textAlign:"left",WebkitTapHighlightColor:"transparent",[`&.${Cp.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`&.${Cp.focusVisible} .${Cp.iconActive}`]:{outline:"1px solid #999"},[`& .${Cp.visuallyHidden}`]:oX},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(30)},t.readOnly&&{pointerEvents:"none"})),PJ=Te("label",{name:"MuiRating",slot:"Label",overridesResolver:({ownerState:e},t)=>[t.label,e.emptyValueFocused&&t.labelEmptyValueActive]})(({ownerState:e})=>M({cursor:"inherit"},e.emptyValueFocused&&{top:0,bottom:0,position:"absolute",outline:"1px solid #999",width:"100%"})),ZEe=Te("span",{name:"MuiRating",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.iconEmpty&&t.iconEmpty,n.iconFilled&&t.iconFilled,n.iconHover&&t.iconHover,n.iconFocus&&t.iconFocus,n.iconActive&&t.iconActive]}})(({theme:e,ownerState:t})=>M({display:"flex",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),pointerEvents:"none"},t.iconActive&&{transform:"scale(1.2)"},t.iconEmpty&&{color:(e.vars||e).palette.action.disabled})),JEe=Te("span",{name:"MuiRating",slot:"Decimal",shouldForwardProp:e=>y1(e)&&e!=="iconActive",overridesResolver:(e,t)=>{const{iconActive:n}=e;return[t.decimal,n&&t.iconActive]}})(({iconActive:e})=>M({position:"relative"},e&&{transform:"scale(1.2)"}));function QEe(e){const t=He(e,GEe);return q.jsx("span",M({},t))}function F6(e){const{classes:t,disabled:n,emptyIcon:r,focus:i,getLabelText:o,highlightSelectedOnly:s,hover:a,icon:l,IconContainerComponent:c,isActive:u,itemValue:d,labelProps:f,name:h,onBlur:p,onChange:g,onClick:v,onFocus:m,readOnly:y,ownerState:b,ratingValue:_,ratingValueRounded:x}=e,w=s?d===_:d<=_,S=d<=a,C=d<=i,A=d===x,T=Ls(),O=q.jsx(ZEe,{as:c,value:d,className:je(t.icon,w?t.iconFilled:t.iconEmpty,S&&t.iconHover,C&&t.iconFocus,u&&t.iconActive),ownerState:M({},b,{iconEmpty:!w,iconFilled:w,iconHover:S,iconFocus:C,iconActive:u}),children:r&&!w?r:l});return y?q.jsx("span",M({},f,{children:O})):q.jsxs(I.Fragment,{children:[q.jsxs(PJ,M({ownerState:M({},b,{emptyValueFocused:void 0}),htmlFor:T},f,{children:[O,q.jsx("span",{className:t.visuallyHidden,children:o(d)})]})),q.jsx("input",{className:t.visuallyHidden,onFocus:m,onBlur:p,onChange:g,onClick:v,disabled:n,value:d,id:T,type:"radio",name:h,checked:A})]})}const eTe=q.jsx(UEe,{fontSize:"inherit"}),tTe=q.jsx(VEe,{fontSize:"inherit"});function nTe(e){return`${e} Star${e!==1?"s":""}`}const rTe=I.forwardRef(function(t,n){const r=ot({name:"MuiRating",props:t}),{className:i,defaultValue:o=null,disabled:s=!1,emptyIcon:a=tTe,emptyLabelText:l="Empty",getLabelText:c=nTe,highlightSelectedOnly:u=!1,icon:d=eTe,IconContainerComponent:f=QEe,max:h=5,name:p,onChange:g,onChangeActive:v,onMouseLeave:m,onMouseMove:y,precision:b=1,readOnly:_=!1,size:x="medium",value:w}=r,S=He(r,WEe),C=Ls(p),[A,T]=Wi({controlled:w,default:o,name:"Rating"}),O=HT(A,b),R=Dn(),[{hover:L,focus:D},$]=I.useState({hover:-1,focus:-1});let z=O;L!==-1&&(z=L),D!==-1&&(z=D);const{isFocusVisibleRef:H,onBlur:B,onFocus:V,ref:J}=_h(),[K,ie]=I.useState(!1),ce=I.useRef(),pe=cn(J,ce,n),se=Ce=>{y&&y(Ce);const me=ce.current,{right:X,left:Q,width:Re}=me.getBoundingClientRect();let Pe;R.direction==="rtl"?Pe=(X-Ce.clientX)/Re:Pe=(Ce.clientX-Q)/Re;let le=HT(h*Pe+b/2,b);le=qEe(le,b,h),$(Oe=>Oe.hover===le&&Oe.focus===le?Oe:{hover:le,focus:le}),ie(!1),v&&L!==le&&v(Ce,le)},G=Ce=>{m&&m(Ce);const me=-1;$({hover:me,focus:me}),v&&L!==me&&v(Ce,me)},he=Ce=>{let me=Ce.target.value===""?null:parseFloat(Ce.target.value);L!==-1&&(me=L),T(me),g&&g(Ce,me)},Z=Ce=>{Ce.clientX===0&&Ce.clientY===0||($({hover:-1,focus:-1}),T(null),g&&parseFloat(Ce.target.value)===O&&g(Ce,null))},ae=Ce=>{V(Ce),H.current===!0&&ie(!0);const me=parseFloat(Ce.target.value);$(X=>({hover:X.hover,focus:me}))},oe=Ce=>{if(L!==-1)return;B(Ce),H.current===!1&&ie(!1);const me=-1;$(X=>({hover:X.hover,focus:me}))},[te,ve]=I.useState(!1),ne=M({},r,{defaultValue:o,disabled:s,emptyIcon:a,emptyLabelText:l,emptyValueFocused:te,focusVisible:K,getLabelText:c,icon:d,IconContainerComponent:f,max:h,precision:b,readOnly:_,size:x}),xe=XEe(ne);return q.jsxs(KEe,M({ref:pe,onMouseMove:se,onMouseLeave:G,className:je(xe.root,i,_&&"MuiRating-readOnly"),ownerState:ne,role:_?"img":null,"aria-label":_?c(z):null},S,{children:[Array.from(new Array(h)).map((Ce,me)=>{const X=me+1,Q={classes:xe,disabled:s,emptyIcon:a,focus:D,getLabelText:c,highlightSelectedOnly:u,hover:L,icon:d,IconContainerComponent:f,name:C,onBlur:oe,onChange:he,onClick:Z,onFocus:ae,ratingValue:z,ratingValueRounded:O,readOnly:_,ownerState:ne},Re=X===Math.ceil(z)&&(L!==-1||D!==-1);if(b<1){const Pe=Array.from(new Array(1/b));return q.jsx(JEe,{className:je(xe.decimal,Re&&xe.iconActive),ownerState:ne,iconActive:Re,children:Pe.map((le,Oe)=>{const Be=HT(X-1+(Oe+1)*b,b);return q.jsx(F6,M({},Q,{isActive:!1,itemValue:Be,labelProps:{style:Pe.length-1===Oe?{}:{width:Be===z?`${(Oe+1)*b*100}%`:"0%",overflow:"hidden",position:"absolute"}}}),Be)})},X)}return q.jsx(F6,M({},Q,{isActive:Re,itemValue:X}),X)}),!_&&!s&&q.jsxs(PJ,{className:je(xe.label,xe.labelEmptyValue),ownerState:ne,children:[q.jsx("input",{className:xe.visuallyHidden,value:"",id:`${C}-empty`,type:"radio",name:C,checked:O==null,onFocus:()=>ve(!0),onBlur:()=>ve(!1),onChange:he}),q.jsx("span",{className:xe.visuallyHidden,children:l})]})]}))}),iTe=rTe;function MJ(e){return tt("MuiScopedCssBaseline",e)}const oTe=nt("MuiScopedCssBaseline",["root"]),sTe=oTe,aTe=["className","component","enableColorScheme"],lTe=e=>{const{classes:t}=e;return it({root:["root"]},MJ,t)},cTe=Te("div",{name:"MuiScopedCssBaseline",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{const n={};return t.enableColorScheme&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([r,i])=>{var o;n[`&${e.getColorSchemeSelector(r).replace(/\s*&/,"")}`]={colorScheme:(o=i.palette)==null?void 0:o.mode}}),M({},ZK(e,t.enableColorScheme),JK(e),{"& *, & *::before, & *::after":{boxSizing:"inherit"},"& strong, & b":{fontWeight:e.typography.fontWeightBold}},n)}),uTe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiScopedCssBaseline"}),{className:i,component:o="div"}=r,s=He(r,aTe),a=M({},r,{component:o}),l=lTe(a);return q.jsx(cTe,M({as:o,className:je(l.root,i),ref:n,ownerState:a},s))}),dTe=uTe;function EJ(e){return tt("MuiSelect",e)}const fTe=nt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),Ap=fTe;var z6;const hTe=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],pTe=Te("div",{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${Ap.select}`]:t.select},{[`&.${Ap.select}`]:t[n.variant]},{[`&.${Ap.error}`]:t.error},{[`&.${Ap.multiple}`]:t.multiple}]}})(dJ,{[`&.${Ap.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),mTe=Te("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${Le(n.variant)}`],n.open&&t.iconOpen]}})(fJ),gTe=Te("input",{shouldForwardProp:e=>y1(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function j6(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function vTe(e){return e==null||typeof e=="string"&&!e.trim()}const yTe=e=>{const{classes:t,variant:n,disabled:r,multiple:i,open:o,error:s}=e,a={select:["select",n,r&&"disabled",i&&"multiple",s&&"error"],icon:["icon",`icon${Le(n)}`,o&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return it(a,EJ,t)},bTe=I.forwardRef(function(t,n){var r;const{"aria-describedby":i,"aria-label":o,autoFocus:s,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:f,displayEmpty:h,error:p=!1,IconComponent:g,inputRef:v,labelId:m,MenuProps:y={},multiple:b,name:_,onBlur:x,onChange:w,onClose:S,onFocus:C,onOpen:A,open:T,readOnly:O,renderValue:R,SelectDisplayProps:L={},tabIndex:D,value:$,variant:z="standard"}=t,H=He(t,hTe),[B,V]=Wi({controlled:$,default:d,name:"Select"}),[J,K]=Wi({controlled:T,default:u,name:"Select"}),ie=I.useRef(null),ce=I.useRef(null),[pe,se]=I.useState(null),{current:G}=I.useRef(T!=null),[he,Z]=I.useState(),ae=cn(n,v),oe=I.useCallback(Me=>{ce.current=Me,Me&&se(Me)},[]),te=pe==null?void 0:pe.parentNode;I.useImperativeHandle(ae,()=>({focus:()=>{ce.current.focus()},node:ie.current,value:B}),[B]),I.useEffect(()=>{u&&J&&pe&&!G&&(Z(a?null:te.clientWidth),ce.current.focus())},[pe,a]),I.useEffect(()=>{s&&ce.current.focus()},[s]),I.useEffect(()=>{if(!m)return;const Me=kn(ce.current).getElementById(m);if(Me){const ze=()=>{getSelection().isCollapsed&&ce.current.focus()};return Me.addEventListener("click",ze),()=>{Me.removeEventListener("click",ze)}}},[m]);const ve=(Me,ze)=>{Me?A&&A(ze):S&&S(ze),G||(Z(a?null:te.clientWidth),K(Me))},ne=Me=>{Me.button===0&&(Me.preventDefault(),ce.current.focus(),ve(!0,Me))},xe=Me=>{ve(!1,Me)},Ce=I.Children.toArray(l),me=Me=>{const ze=Ce.find(Ge=>Ge.props.value===Me.target.value);ze!==void 0&&(V(ze.props.value),w&&w(Me,ze))},X=Me=>ze=>{let Ge;if(ze.currentTarget.hasAttribute("tabindex")){if(b){Ge=Array.isArray(B)?B.slice():[];const Xe=B.indexOf(Me.props.value);Xe===-1?Ge.push(Me.props.value):Ge.splice(Xe,1)}else Ge=Me.props.value;if(Me.props.onClick&&Me.props.onClick(ze),B!==Ge&&(V(Ge),w)){const Xe=ze.nativeEvent||ze,ut=new Xe.constructor(Xe.type,Xe);Object.defineProperty(ut,"target",{writable:!0,value:{value:Ge,name:_}}),w(ut,Me)}b||ve(!1,ze)}},Q=Me=>{O||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Me.key)!==-1&&(Me.preventDefault(),ve(!0,Me))},Re=pe!==null&&J,Pe=Me=>{!Re&&x&&(Object.defineProperty(Me,"target",{writable:!0,value:{value:B,name:_}}),x(Me))};delete H["aria-invalid"];let le,Oe;const Be=[];let De=!1;(w2({value:B})||h)&&(R?le=R(B):De=!0);const Ee=Ce.map(Me=>{if(!I.isValidElement(Me))return null;let ze;if(b){if(!Array.isArray(B))throw new Error(Eo(2));ze=B.some(Ge=>j6(Ge,Me.props.value)),ze&&De&&Be.push(Me.props.children)}else ze=j6(B,Me.props.value),ze&&De&&(Oe=Me.props.children);return I.cloneElement(Me,{"aria-selected":ze?"true":"false",onClick:X(Me),onKeyUp:Ge=>{Ge.key===" "&&Ge.preventDefault(),Me.props.onKeyUp&&Me.props.onKeyUp(Ge)},role:"option",selected:ze,value:void 0,"data-value":Me.props.value})});De&&(b?Be.length===0?le=null:le=Be.reduce((Me,ze,Ge)=>(Me.push(ze),Ge<Be.length-1&&Me.push(", "),Me),[]):le=Oe);let Ie=he;!a&&G&&pe&&(Ie=te.clientWidth);let U;typeof D<"u"?U=D:U=f?null:0;const E=L.id||(_?`mui-component-select-${_}`:void 0),P=M({},t,{variant:z,value:B,open:Re,error:p}),ee=yTe(P),ye=M({},y.PaperProps,(r=y.slotProps)==null?void 0:r.paper),be=Ls();return q.jsxs(I.Fragment,{children:[q.jsx(pTe,M({ref:oe,tabIndex:U,role:"combobox","aria-controls":be,"aria-disabled":f?"true":void 0,"aria-expanded":Re?"true":"false","aria-haspopup":"listbox","aria-label":o,"aria-labelledby":[m,E].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Q,onMouseDown:f||O?null:ne,onBlur:Pe,onFocus:C},L,{ownerState:P,className:je(L.className,ee.select,c),id:E,children:vTe(le)?z6||(z6=q.jsx("span",{className:"notranslate",children:"​"})):le})),q.jsx(gTe,M({"aria-invalid":p,value:Array.isArray(B)?B.join(","):B,name:_,ref:ie,"aria-hidden":!0,onChange:me,tabIndex:-1,disabled:f,className:ee.nativeInput,autoFocus:s,ownerState:P},H)),q.jsx(mTe,{as:g,className:ee.icon,ownerState:P}),q.jsx(C1,M({id:`menu-${_||""}`,anchorEl:te,open:Re,onClose:xe,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},y,{MenuListProps:M({"aria-labelledby":m,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:be},y.MenuListProps),slotProps:M({},y.slotProps,{paper:M({},ye,{style:M({minWidth:Ie},ye!=null?ye.style:null)})}),children:Ee}))]})}),xTe=bTe,_Te=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],wTe=["root"],STe=e=>{const{classes:t}=e;return t},R4={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Br(e)&&e!=="variant",slot:"Root"},CTe=Te(iP,R4)(""),ATe=Te(I4,R4)(""),PTe=Te(M4,R4)(""),TJ=I.forwardRef(function(t,n){const r=ot({name:"MuiSelect",props:t}),{autoWidth:i=!1,children:o,classes:s={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=y4,id:d,input:f,inputProps:h,label:p,labelId:g,MenuProps:v,multiple:m=!1,native:y=!1,onClose:b,onOpen:_,open:x,renderValue:w,SelectDisplayProps:S,variant:C="outlined"}=r,A=He(r,_Te),T=y?hJ:xTe,O=Vs(),R=Ic({props:r,muiFormControl:O,states:["variant","error"]}),L=R.variant||C,D=M({},r,{variant:L,classes:s}),$=STe(D),z=He($,wTe),H=f||{standard:q.jsx(CTe,{ownerState:D}),outlined:q.jsx(ATe,{label:p,ownerState:D}),filled:q.jsx(PTe,{ownerState:D})}[L],B=cn(n,H.ref);return q.jsx(I.Fragment,{children:I.cloneElement(H,M({inputComponent:T,inputProps:M({children:o,error:R.error,IconComponent:u,variant:L,type:void 0,multiple:m},y?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:g,MenuProps:v,onClose:b,onOpen:_,open:x,renderValue:w,SelectDisplayProps:M({id:d},S)},h,{classes:h?Tr(z,h.classes):z},f?f.props.inputProps:{})},m&&y&&L==="outlined"?{notched:!0}:{},{ref:B,className:je(H.props.className,a,$.root)},!f&&{variant:L},A))})});TJ.muiName="Select";const A1=TJ;function OJ(e){return tt("MuiSkeleton",e)}const MTe=nt("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]),ETe=MTe,TTe=["animation","className","component","height","style","variant","width"];let C2=e=>e,U6,V6,H6,G6;const OTe=e=>{const{classes:t,variant:n,animation:r,hasChildren:i,width:o,height:s}=e;return it({root:["root",n,r,i&&"withChildren",i&&!o&&"fitContent",i&&!s&&"heightAuto"]},OJ,t)},ITe=ls(U6||(U6=C2`
  0% {
    opacity: 1;
  }

  50% {
    opacity: 0.4;
  }

  100% {
    opacity: 1;
  }
`)),RTe=ls(V6||(V6=C2`
  0% {
    transform: translateX(-100%);
  }

  50% {
    /* +0.5s of delay between each loop */
    transform: translateX(100%);
  }

  100% {
    transform: translateX(100%);
  }
`)),kTe=Te("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.animation!==!1&&t[n.animation],n.hasChildren&&t.withChildren,n.hasChildren&&!n.width&&t.fitContent,n.hasChildren&&!n.height&&t.heightAuto]}})(({theme:e,ownerState:t})=>{const n=GA(e.shape.borderRadius)||"px",r=ja(e.shape.borderRadius);return M({display:"block",backgroundColor:e.vars?e.vars.palette.Skeleton.bg:Et(e.palette.text.primary,e.palette.mode==="light"?.11:.13),height:"1.2em"},t.variant==="text"&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:`${r}${n}/${Math.round(r/.6*10)/10}${n}`,"&:empty:before":{content:'"\\00a0"'}},t.variant==="circular"&&{borderRadius:"50%"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.hasChildren&&{"& > *":{visibility:"hidden"}},t.hasChildren&&!t.width&&{maxWidth:"fit-content"},t.hasChildren&&!t.height&&{height:"auto"})},({ownerState:e})=>e.animation==="pulse"&&ma(H6||(H6=C2`
      animation: ${0} 2s ease-in-out 0.5s infinite;
    `),ITe),({ownerState:e,theme:t})=>e.animation==="wave"&&ma(G6||(G6=C2`
      position: relative;
      overflow: hidden;

      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */
      -webkit-mask-image: -webkit-radial-gradient(white, black);

      &::after {
        animation: ${0} 2s linear 0.5s infinite;
        background: linear-gradient(
          90deg,
          transparent,
          ${0},
          transparent
        );
        content: '';
        position: absolute;
        transform: translateX(-100%); /* Avoid flash during server-side hydration */
        bottom: 0;
        left: 0;
        right: 0;
        top: 0;
      }
    `),RTe,(t.vars||t).palette.action.hover)),LTe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiSkeleton"}),{animation:i="pulse",className:o,component:s="span",height:a,style:l,variant:c="text",width:u}=r,d=He(r,TTe),f=M({},r,{animation:i,component:s,variant:c,hasChildren:!!d.children}),h=OTe(f);return q.jsx(kTe,M({as:s,ref:n,className:je(h.root,o),ownerState:f},d,{style:M({width:u,height:a},l)}))}),$Te=LTe,DTe=e=>!e||!da(e);function IJ(e){return tt("MuiSlider",e)}const BTe=nt("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),As=BTe,NTe=e=>{const{open:t}=e;return{offset:je(t&&As.valueLabelOpen),circle:As.valueLabelCircle,label:As.valueLabelLabel}};function FTe(e){const{children:t,className:n,value:r}=e,i=NTe(e);return t?I.cloneElement(t,{className:je(t.props.className)},q.jsxs(I.Fragment,{children:[t.props.children,q.jsx("span",{className:je(i.offset,n),"aria-hidden":!0,children:q.jsx("span",{className:i.circle,children:q.jsx("span",{className:i.label,children:r})})})]})):null}const zTe=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function W6(e){return e}const RJ=Te("span",{name:"MuiSlider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`color${Le(n.color)}`],n.size!=="medium"&&t[`size${Le(n.size)}`],n.marked&&t.marked,n.orientation==="vertical"&&t.vertical,n.track==="inverted"&&t.trackInverted,n.track===!1&&t.trackFalse]}})(({theme:e,ownerState:t})=>M({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(e.vars||e).palette[t.color].main,WebkitTapHighlightColor:"transparent"},t.orientation==="horizontal"&&M({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},t.size==="small"&&{height:2},t.marked&&{marginBottom:20}),t.orientation==="vertical"&&M({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},t.size==="small"&&{width:2},t.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${As.disabled}`]:{pointerEvents:"none",cursor:"default",color:(e.vars||e).palette.grey[400]},[`&.${As.dragging}`]:{[`& .${As.thumb}, & .${As.track}`]:{transition:"none"}}})),kJ=Te("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(e,t)=>t.rail})(({ownerState:e})=>M({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},e.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track==="inverted"&&{opacity:1})),LJ=Te("span",{name:"MuiSlider",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?ya(e.palette[t.color].main,.62):va(e.palette[t.color].main,.5);return M({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:e.transitions.create(["left","width","bottom","height"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{border:"none"},t.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track===!1&&{display:"none"},t.track==="inverted"&&{backgroundColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n,borderColor:e.vars?e.vars.palette.Slider[`${t.color}Track`]:n})}),$J=Te("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.thumb,t[`thumbColor${Le(n.color)}`],n.size!=="medium"&&t[`thumbSize${Le(n.size)}`]]}})(({theme:e,ownerState:t})=>M({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},t.size==="small"&&{width:12,height:12},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&::before":M({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(e.vars||e).shadows[2]},t.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${As.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:Et(e.palette[t.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${As.active}`]:{boxShadow:`0px 0px 0px 14px ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.16)`:Et(e.palette[t.color].main,.16)}`},[`&.${As.disabled}`]:{"&:hover":{boxShadow:"none"}}})),DJ=Te(FTe,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(e,t)=>t.valueLabel})(({theme:e,ownerState:t})=>M({[`&.${As.valueLabelOpen}`]:{transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(1)`},zIndex:1,whiteSpace:"nowrap"},e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),transform:`${t.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(0)`,position:"absolute",backgroundColor:(e.vars||e).palette.grey[600],borderRadius:2,color:(e.vars||e).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},t.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},t.orientation==="vertical"&&{right:t.size==="small"?"20px":"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"}},t.size==="small"&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),BJ=Te("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:e=>y1(e)&&e!=="markActive",overridesResolver:(e,t)=>{const{markActive:n}=e;return[t.mark,n&&t.markActive]}})(({theme:e,ownerState:t,markActive:n})=>M({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},t.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},t.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(e.vars||e).palette.background.paper,opacity:.8})),NJ=Te("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:e=>y1(e)&&e!=="markLabelActive",overridesResolver:(e,t)=>t.markLabel})(({theme:e,ownerState:t,markLabelActive:n})=>M({},e.typography.body2,{color:(e.vars||e).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},t.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},t.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(e.vars||e).palette.text.primary})),jTe=e=>{const{disabled:t,dragging:n,marked:r,orientation:i,track:o,classes:s,color:a,size:l}=e,c={root:["root",t&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",o==="inverted"&&"trackInverted",o===!1&&"trackFalse",a&&`color${Le(a)}`,l&&`size${Le(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",t&&"disabled",l&&`thumbSize${Le(l)}`,a&&`thumbColor${Le(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return it(c,IJ,s)},UTe=({children:e})=>e,VTe=I.forwardRef(function(t,n){var r,i,o,s,a,l,c,u,d,f,h,p,g,v,m,y,b,_,x,w,S,C,A,T;const O=ot({props:t,name:"MuiSlider"}),L=Dn().direction==="rtl",{"aria-label":D,"aria-valuetext":$,"aria-labelledby":z,component:H="span",components:B={},componentsProps:V={},color:J="primary",classes:K,className:ie,disableSwap:ce=!1,disabled:pe=!1,getAriaLabel:se,getAriaValueText:G,marks:he=!1,max:Z=100,min:ae=0,orientation:oe="horizontal",size:te="medium",step:ve=1,scale:ne=W6,slotProps:xe,slots:Ce,track:me="normal",valueLabelDisplay:X="off",valueLabelFormat:Q=W6}=O,Re=He(O,zTe),Pe=M({},O,{isRtl:L,max:Z,min:ae,classes:K,disabled:pe,disableSwap:ce,orientation:oe,marks:he,color:J,size:te,step:ve,scale:ne,track:me,valueLabelDisplay:X,valueLabelFormat:Q}),{axisProps:le,getRootProps:Oe,getHiddenInputProps:Be,getThumbProps:De,open:Ee,active:Ie,axis:U,focusedThumbIndex:E,range:P,dragging:ee,marks:ye,values:be,trackOffset:Me,trackLeap:ze,getThumbStyle:Ge}=P1e(M({},Pe,{rootRef:n}));Pe.marked=ye.length>0&&ye.some(Ae=>Ae.label),Pe.dragging=ee,Pe.focusedThumbIndex=E;const Xe=jTe(Pe),ut=(r=(i=Ce==null?void 0:Ce.root)!=null?i:B.Root)!=null?r:RJ,rt=(o=(s=Ce==null?void 0:Ce.rail)!=null?s:B.Rail)!=null?o:kJ,dt=(a=(l=Ce==null?void 0:Ce.track)!=null?l:B.Track)!=null?a:LJ,yt=(c=(u=Ce==null?void 0:Ce.thumb)!=null?u:B.Thumb)!=null?c:$J,Ke=(d=(f=Ce==null?void 0:Ce.valueLabel)!=null?f:B.ValueLabel)!=null?d:DJ,gt=(h=(p=Ce==null?void 0:Ce.mark)!=null?p:B.Mark)!=null?h:BJ,ct=(g=(v=Ce==null?void 0:Ce.markLabel)!=null?v:B.MarkLabel)!=null?g:NJ,mt=(m=(y=Ce==null?void 0:Ce.input)!=null?y:B.Input)!=null?m:"input",Dt=(b=xe==null?void 0:xe.root)!=null?b:V.root,_e=(_=xe==null?void 0:xe.rail)!=null?_:V.rail,We=(x=xe==null?void 0:xe.track)!=null?x:V.track,Ue=(w=xe==null?void 0:xe.thumb)!=null?w:V.thumb,N=(S=xe==null?void 0:xe.valueLabel)!=null?S:V.valueLabel,k=(C=xe==null?void 0:xe.mark)!=null?C:V.mark,F=(A=xe==null?void 0:xe.markLabel)!=null?A:V.markLabel,j=(T=xe==null?void 0:xe.input)!=null?T:V.input,Y=vr({elementType:ut,getSlotProps:Oe,externalSlotProps:Dt,externalForwardedProps:Re,additionalProps:M({},DTe(ut)&&{as:H}),ownerState:M({},Pe,Dt==null?void 0:Dt.ownerState),className:[Xe.root,ie]}),ue=vr({elementType:rt,externalSlotProps:_e,ownerState:Pe,className:Xe.rail}),ge=vr({elementType:dt,externalSlotProps:We,additionalProps:{style:M({},le[U].offset(Me),le[U].leap(ze))},ownerState:M({},Pe,We==null?void 0:We.ownerState),className:Xe.track}),Se=vr({elementType:yt,getSlotProps:De,externalSlotProps:Ue,ownerState:M({},Pe,Ue==null?void 0:Ue.ownerState),className:Xe.thumb}),Ne=vr({elementType:Ke,externalSlotProps:N,ownerState:M({},Pe,N==null?void 0:N.ownerState),className:Xe.valueLabel}),Fe=vr({elementType:gt,externalSlotProps:k,ownerState:Pe,className:Xe.mark}),Ye=vr({elementType:ct,externalSlotProps:F,ownerState:Pe,className:Xe.markLabel}),at=vr({elementType:mt,getSlotProps:Be,externalSlotProps:j,ownerState:Pe});return q.jsxs(ut,M({},Y,{children:[q.jsx(rt,M({},ue)),q.jsx(dt,M({},ge)),ye.filter(Ae=>Ae.value>=ae&&Ae.value<=Z).map((Ae,de)=>{const fe=_2(Ae.value,ae,Z),ke=le[U].offset(fe);let qe;return me===!1?qe=be.indexOf(Ae.value)!==-1:qe=me==="normal"&&(P?Ae.value>=be[0]&&Ae.value<=be[be.length-1]:Ae.value<=be[0])||me==="inverted"&&(P?Ae.value<=be[0]||Ae.value>=be[be.length-1]:Ae.value>=be[0]),q.jsxs(I.Fragment,{children:[q.jsx(gt,M({"data-index":de},Fe,!da(gt)&&{markActive:qe},{style:M({},ke,Fe.style),className:je(Fe.className,qe&&Xe.markActive)})),Ae.label!=null?q.jsx(ct,M({"aria-hidden":!0,"data-index":de},Ye,!da(ct)&&{markLabelActive:qe},{style:M({},ke,Ye.style),className:je(Xe.markLabel,Ye.className,qe&&Xe.markLabelActive),children:Ae.label})):null]},de)}),be.map((Ae,de)=>{const fe=_2(Ae,ae,Z),ke=le[U].offset(fe),qe=X==="off"?UTe:Ke;return q.jsx(qe,M({},!da(qe)&&{valueLabelFormat:Q,valueLabelDisplay:X,value:typeof Q=="function"?Q(ne(Ae),de):Q,index:de,open:Ee===de||Ie===de||X==="on",disabled:pe},Ne,{children:q.jsx(yt,M({"data-index":de},Se,{className:je(Xe.thumb,Se.className,Ie===de&&Xe.active,E===de&&Xe.focusVisible),style:M({},ke,Ge(de),Se.style),children:q.jsx(mt,M({"data-index":de,"aria-label":se?se(de):D,"aria-valuenow":ne(Ae),"aria-labelledby":z,"aria-valuetext":G?G(ne(Ae),de):$,value:be[de]},at))}))}),de)})]}))}),HTe=VTe;function FJ(e){return tt("MuiSnackbarContent",e)}const GTe=nt("MuiSnackbarContent",["root","message","action"]),WTe=GTe,qTe=["action","className","message","role"],YTe=e=>{const{classes:t}=e;return it({root:["root"],action:["action"],message:["message"]},FJ,t)},XTe=Te(cs,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,n=Gm(e.palette.background.default,t);return M({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(n),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),KTe=Te("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),ZTe=Te("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),JTe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiSnackbarContent"}),{action:i,className:o,message:s,role:a="alert"}=r,l=He(r,qTe),c=r,u=YTe(c);return q.jsxs(XTe,M({role:a,square:!0,elevation:6,className:je(u.root,o),ownerState:c,ref:n},l,{children:[q.jsx(KTe,{className:u.message,ownerState:c,children:s}),i?q.jsx(ZTe,{className:u.action,ownerState:c,children:i}):null]}))}),zJ=JTe;function jJ(e){return tt("MuiSnackbar",e)}const QTe=nt("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]),e3e=QTe,t3e=["onEnter","onExited"],n3e=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],r3e=e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${Le(n.vertical)}${Le(n.horizontal)}`]};return it(r,jJ,t)},q6=Te("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${Le(n.anchorOrigin.vertical)}${Le(n.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return M({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:M({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&n,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),i3e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiSnackbar"}),i=Dn(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{action:s,anchorOrigin:{vertical:a,horizontal:l}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:u,className:d,ClickAwayListenerProps:f,ContentProps:h,disableWindowBlurListener:p=!1,message:g,open:v,TransitionComponent:m=nb,transitionDuration:y=o,TransitionProps:{onEnter:b,onExited:_}={}}=r,x=He(r.TransitionProps,t3e),w=He(r,n3e),S=M({},r,{anchorOrigin:{vertical:a,horizontal:l},autoHideDuration:c,disableWindowBlurListener:p,TransitionComponent:m,transitionDuration:y}),C=r3e(S),{getRootProps:A,onClickAway:T}=M1e(M({},S)),[O,R]=I.useState(!0),L=vr({elementType:q6,getSlotProps:A,externalForwardedProps:w,ownerState:S,additionalProps:{ref:n},className:[C.root,d]}),D=z=>{R(!0),_&&_(z)},$=(z,H)=>{R(!1),b&&b(z,H)};return!v&&O?null:q.jsx(QX,M({onClickAway:T},f,{children:q.jsx(q6,M({},L,{children:q.jsx(m,M({appear:!0,in:v,timeout:y,direction:a==="top"?"down":"up",onEnter:$,onExited:D},x,{children:u||q.jsx(zJ,M({message:g,action:s},h))}))}))}))}),o3e=i3e,s3e=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],a3e={entering:{transform:"none"},entered:{transform:"none"}},l3e=I.forwardRef(function(t,n){const r=Dn(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:o,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:f,onExit:h,onExited:p,onExiting:g,style:v,timeout:m=i,TransitionComponent:y=b1}=t,b=He(t,s3e),_=I.useRef(null),x=cn(_,a.ref,n),w=D=>$=>{if(D){const z=_.current;$===void 0?D(z):D(z,$)}},S=w(f),C=w((D,$)=>{qA(D);const z=ba({style:v,timeout:m,easing:l},{mode:"enter"});D.style.webkitTransition=r.transitions.create("transform",z),D.style.transition=r.transitions.create("transform",z),u&&u(D,$)}),A=w(d),T=w(g),O=w(D=>{const $=ba({style:v,timeout:m,easing:l},{mode:"exit"});D.style.webkitTransition=r.transitions.create("transform",$),D.style.transition=r.transitions.create("transform",$),h&&h(D)}),R=w(p),L=D=>{o&&o(_.current,D)};return q.jsx(y,M({appear:s,in:c,nodeRef:_,onEnter:C,onEntered:A,onEntering:S,onExit:O,onExited:R,onExiting:T,addEndListener:L,timeout:m},b,{children:(D,$)=>I.cloneElement(a,M({style:M({transform:"scale(0)",visibility:D==="exited"&&!c?"hidden":void 0},a3e[D],v,a.props.style),ref:x},$))}))}),UJ=l3e;function VJ(e){return tt("MuiSpeedDial",e)}const c3e=nt("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),R0=c3e,u3e=["ref"],d3e=["ariaLabel","FabProps","children","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"],f3e=["ref"],h3e=e=>{const{classes:t,open:n,direction:r}=e,i={root:["root",`direction${Le(r)}`],fab:["fab"],actions:["actions",!n&&"actionsClosed"]};return it(i,VJ,t)};function Nv(e){if(e==="up"||e==="down")return"vertical";if(e==="right"||e==="left")return"horizontal"}function p3e(e,t,n){return e<t?t:e>n?n:e}const Vc=32,h_=16,m3e=Te("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`direction${Le(n.direction)}`]]}})(({theme:e,ownerState:t})=>M({zIndex:(e.vars||e).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},t.direction==="up"&&{flexDirection:"column-reverse",[`& .${R0.actions}`]:{flexDirection:"column-reverse",marginBottom:-Vc,paddingBottom:h_+Vc}},t.direction==="down"&&{flexDirection:"column",[`& .${R0.actions}`]:{flexDirection:"column",marginTop:-Vc,paddingTop:h_+Vc}},t.direction==="left"&&{flexDirection:"row-reverse",[`& .${R0.actions}`]:{flexDirection:"row-reverse",marginRight:-Vc,paddingRight:h_+Vc}},t.direction==="right"&&{flexDirection:"row",[`& .${R0.actions}`]:{flexDirection:"row",marginLeft:-Vc,paddingLeft:h_+Vc}})),g3e=Te(P4,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(e,t)=>t.fab})(()=>({pointerEvents:"auto"})),v3e=Te("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.actions,!n.open&&t.actionsClosed]}})(({ownerState:e})=>M({display:"flex",pointerEvents:"auto"},!e.open&&{transition:"top 0s linear 0.2s",pointerEvents:"none"})),y3e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiSpeedDial"}),i=Dn(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{ariaLabel:s,FabProps:{ref:a}={},children:l,className:c,direction:u="up",hidden:d=!1,icon:f,onBlur:h,onClose:p,onFocus:g,onKeyDown:v,onMouseEnter:m,onMouseLeave:y,onOpen:b,open:_,TransitionComponent:x=UJ,transitionDuration:w=o,TransitionProps:S}=r,C=He(r.FabProps,u3e),A=He(r,d3e),[T,O]=Wi({controlled:_,default:!1,name:"SpeedDial",state:"open"}),R=M({},r,{open:T,direction:u}),L=h3e(R),D=I.useRef();I.useEffect(()=>()=>{clearTimeout(D.current)},[]);const $=I.useRef(0),z=I.useRef(),H=I.useRef([]);H.current=[H.current[0]];const B=I.useCallback(Z=>{H.current[0]=Z},[]),V=cn(a,B),J=(Z,ae)=>oe=>{H.current[Z+1]=oe,ae&&ae(oe)},K=Z=>{v&&v(Z);const ae=Z.key.replace("Arrow","").toLowerCase(),{current:oe=ae}=z;if(Z.key==="Escape"){O(!1),H.current[0].focus(),p&&p(Z,"escapeKeyDown");return}if(Nv(ae)===Nv(oe)&&Nv(ae)!==void 0){Z.preventDefault();const te=ae===oe?1:-1,ve=p3e($.current+te,0,H.current.length-1);H.current[ve].focus(),$.current=ve,z.current=oe}};I.useEffect(()=>{T||($.current=0,z.current=void 0)},[T]);const ie=Z=>{Z.type==="mouseleave"&&y&&y(Z),Z.type==="blur"&&h&&h(Z),clearTimeout(D.current),Z.type==="blur"?D.current=setTimeout(()=>{O(!1),p&&p(Z,"blur")}):(O(!1),p&&p(Z,"mouseLeave"))},ce=Z=>{C.onClick&&C.onClick(Z),clearTimeout(D.current),T?(O(!1),p&&p(Z,"toggle")):(O(!0),b&&b(Z,"toggle"))},pe=Z=>{Z.type==="mouseenter"&&m&&m(Z),Z.type==="focus"&&g&&g(Z),clearTimeout(D.current),T||(D.current=setTimeout(()=>{O(!0),b&&b(Z,{focus:"focus",mouseenter:"mouseEnter"}[Z.type])}))},se=s.replace(/^[^a-z]+|[^\w:.-]+/gi,""),G=I.Children.toArray(l).filter(Z=>I.isValidElement(Z)),he=G.map((Z,ae)=>{const oe=Z.props,{FabProps:{ref:te}={},tooltipPlacement:ve}=oe,ne=He(oe.FabProps,f3e),xe=ve||(Nv(u)==="vertical"?"left":"top");return I.cloneElement(Z,{FabProps:M({},ne,{ref:J(ae,te)}),delay:30*(T?ae:G.length-ae),open:T,tooltipPlacement:xe,id:`${se}-action-${ae}`})});return q.jsxs(m3e,M({className:je(L.root,c),ref:n,role:"presentation",onKeyDown:K,onBlur:ie,onFocus:pe,onMouseEnter:pe,onMouseLeave:ie,ownerState:R},A,{children:[q.jsx(x,M({in:!d,timeout:w,unmountOnExit:!0},S,{children:q.jsx(g3e,M({color:"primary","aria-label":s,"aria-haspopup":"true","aria-expanded":T,"aria-controls":`${se}-actions`},C,{onClick:ce,className:je(L.fab,C.className),ref:V,ownerState:R,children:I.isValidElement(f)&&sl(f,["SpeedDialIcon"])?I.cloneElement(f,{open:T}):f}))})),q.jsx(v3e,{id:`${se}-actions`,role:"menu","aria-orientation":Nv(u),className:je(L.actions,!T&&L.actionsClosed),ownerState:R,children:he})]}))}),b3e=y3e;function HJ(e){return tt("MuiTooltip",e)}const x3e=nt("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Ql=x3e,_3e=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function w3e(e){return Math.round(e*1e5)/1e5}const S3e=e=>{const{classes:t,disableInteractive:n,arrow:r,touch:i,placement:o}=e,s={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${Le(o.split("-")[0])}`],arrow:["arrow"]};return it(s,HJ,t)},C3e=Te(w1,{name:"MuiTooltip",slot:"Popper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.popper,!n.disableInteractive&&t.popperInteractive,n.arrow&&t.popperArrow,!n.open&&t.popperClose]}})(({theme:e,ownerState:t,open:n})=>M({zIndex:(e.vars||e).zIndex.tooltip,pointerEvents:"none"},!t.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},t.arrow&&{[`&[data-popper-placement*="bottom"] .${Ql.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Ql.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Ql.arrow}`]:M({},t.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Ql.arrow}`]:M({},t.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),A3e=Te("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.tooltip,n.touch&&t.touch,n.arrow&&t.tooltipArrow,t[`tooltipPlacement${Le(n.placement.split("-")[0])}`]]}})(({theme:e,ownerState:t})=>M({backgroundColor:e.vars?e.vars.palette.Tooltip.bg:Et(e.palette.grey[700],.92),borderRadius:(e.vars||e).shape.borderRadius,color:(e.vars||e).palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},t.arrow&&{position:"relative",margin:0},t.touch&&{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${w3e(16/14)}em`,fontWeight:e.typography.fontWeightRegular},{[`.${Ql.popper}[data-popper-placement*="left"] &`]:M({transformOrigin:"right center"},t.isRtl?M({marginLeft:"14px"},t.touch&&{marginLeft:"24px"}):M({marginRight:"14px"},t.touch&&{marginRight:"24px"})),[`.${Ql.popper}[data-popper-placement*="right"] &`]:M({transformOrigin:"left center"},t.isRtl?M({marginRight:"14px"},t.touch&&{marginRight:"24px"}):M({marginLeft:"14px"},t.touch&&{marginLeft:"24px"})),[`.${Ql.popper}[data-popper-placement*="top"] &`]:M({transformOrigin:"center bottom",marginBottom:"14px"},t.touch&&{marginBottom:"24px"}),[`.${Ql.popper}[data-popper-placement*="bottom"] &`]:M({transformOrigin:"center top",marginTop:"14px"},t.touch&&{marginTop:"24px"})})),P3e=Te("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(e,t)=>t.arrow})(({theme:e})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:e.vars?e.vars.palette.Tooltip.bg:Et(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let p_=!1,GT=null,Fv={x:0,y:0};function m_(e,t){return n=>{t&&t(n),e(n)}}const M3e=I.forwardRef(function(t,n){var r,i,o,s,a,l,c,u,d,f,h,p,g,v,m,y,b,_,x;const w=ot({props:t,name:"MuiTooltip"}),{arrow:S=!1,children:C,components:A={},componentsProps:T={},describeChild:O=!1,disableFocusListener:R=!1,disableHoverListener:L=!1,disableInteractive:D=!1,disableTouchListener:$=!1,enterDelay:z=100,enterNextDelay:H=0,enterTouchDelay:B=700,followCursor:V=!1,id:J,leaveDelay:K=0,leaveTouchDelay:ie=1500,onClose:ce,onOpen:pe,open:se,placement:G="bottom",PopperComponent:he,PopperProps:Z={},slotProps:ae={},slots:oe={},title:te,TransitionComponent:ve=nb,TransitionProps:ne}=w,xe=He(w,_3e),Ce=I.isValidElement(C)?C:q.jsx("span",{children:C}),me=Dn(),X=me.direction==="rtl",[Q,Re]=I.useState(),[Pe,le]=I.useState(null),Oe=I.useRef(!1),Be=D||V,De=I.useRef(),Ee=I.useRef(),Ie=I.useRef(),U=I.useRef(),[E,P]=Wi({controlled:se,default:!1,name:"Tooltip",state:"open"});let ee=E;const ye=Ls(J),be=I.useRef(),Me=I.useCallback(()=>{be.current!==void 0&&(document.body.style.WebkitUserSelect=be.current,be.current=void 0),clearTimeout(U.current)},[]);I.useEffect(()=>()=>{clearTimeout(De.current),clearTimeout(Ee.current),clearTimeout(Ie.current),Me()},[Me]);const ze=ft=>{clearTimeout(GT),p_=!0,P(!0),pe&&!ee&&pe(ft)},Ge=tr(ft=>{clearTimeout(GT),GT=setTimeout(()=>{p_=!1},800+K),P(!1),ce&&ee&&ce(ft),clearTimeout(De.current),De.current=setTimeout(()=>{Oe.current=!1},me.transitions.duration.shortest)}),Xe=ft=>{Oe.current&&ft.type!=="touchstart"||(Q&&Q.removeAttribute("title"),clearTimeout(Ee.current),clearTimeout(Ie.current),z||p_&&H?Ee.current=setTimeout(()=>{ze(ft)},p_?H:z):ze(ft))},ut=ft=>{clearTimeout(Ee.current),clearTimeout(Ie.current),Ie.current=setTimeout(()=>{Ge(ft)},K)},{isFocusVisibleRef:rt,onBlur:dt,onFocus:yt,ref:Ke}=_h(),[,gt]=I.useState(!1),ct=ft=>{dt(ft),rt.current===!1&&(gt(!1),ut(ft))},mt=ft=>{Q||Re(ft.currentTarget),yt(ft),rt.current===!0&&(gt(!0),Xe(ft))},Dt=ft=>{Oe.current=!0;const zt=Ce.props;zt.onTouchStart&&zt.onTouchStart(ft)},_e=Xe,We=ut,Ue=ft=>{Dt(ft),clearTimeout(Ie.current),clearTimeout(De.current),Me(),be.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",U.current=setTimeout(()=>{document.body.style.WebkitUserSelect=be.current,Xe(ft)},B)},N=ft=>{Ce.props.onTouchEnd&&Ce.props.onTouchEnd(ft),Me(),clearTimeout(Ie.current),Ie.current=setTimeout(()=>{Ge(ft)},ie)};I.useEffect(()=>{if(!ee)return;function ft(zt){(zt.key==="Escape"||zt.key==="Esc")&&Ge(zt)}return document.addEventListener("keydown",ft),()=>{document.removeEventListener("keydown",ft)}},[Ge,ee]);const k=cn(Ce.ref,Ke,Re,n);!te&&te!==0&&(ee=!1);const F=I.useRef(),j=ft=>{const zt=Ce.props;zt.onMouseMove&&zt.onMouseMove(ft),Fv={x:ft.clientX,y:ft.clientY},F.current&&F.current.update()},Y={},ue=typeof te=="string";O?(Y.title=!ee&&ue&&!L?te:null,Y["aria-describedby"]=ee?ye:null):(Y["aria-label"]=ue?te:null,Y["aria-labelledby"]=ee&&!ue?ye:null);const ge=M({},Y,xe,Ce.props,{className:je(xe.className,Ce.props.className),onTouchStart:Dt,ref:k},V?{onMouseMove:j}:{}),Se={};$||(ge.onTouchStart=Ue,ge.onTouchEnd=N),L||(ge.onMouseOver=m_(_e,ge.onMouseOver),ge.onMouseLeave=m_(We,ge.onMouseLeave),Be||(Se.onMouseOver=_e,Se.onMouseLeave=We)),R||(ge.onFocus=m_(mt,ge.onFocus),ge.onBlur=m_(ct,ge.onBlur),Be||(Se.onFocus=mt,Se.onBlur=ct));const Ne=I.useMemo(()=>{var ft;let zt=[{name:"arrow",enabled:!!Pe,options:{element:Pe,padding:4}}];return(ft=Z.popperOptions)!=null&&ft.modifiers&&(zt=zt.concat(Z.popperOptions.modifiers)),M({},Z.popperOptions,{modifiers:zt})},[Pe,Z]),Fe=M({},w,{isRtl:X,arrow:S,disableInteractive:Be,placement:G,PopperComponentProp:he,touch:Oe.current}),Ye=S3e(Fe),at=(r=(i=oe.popper)!=null?i:A.Popper)!=null?r:C3e,Ae=(o=(s=(a=oe.transition)!=null?a:A.Transition)!=null?s:ve)!=null?o:nb,de=(l=(c=oe.tooltip)!=null?c:A.Tooltip)!=null?l:A3e,fe=(u=(d=oe.arrow)!=null?d:A.Arrow)!=null?u:P3e,ke=E0(at,M({},Z,(f=ae.popper)!=null?f:T.popper,{className:je(Ye.popper,Z==null?void 0:Z.className,(h=(p=ae.popper)!=null?p:T.popper)==null?void 0:h.className)}),Fe),qe=E0(Ae,M({},ne,(g=ae.transition)!=null?g:T.transition),Fe),st=E0(de,M({},(v=ae.tooltip)!=null?v:T.tooltip,{className:je(Ye.tooltip,(m=(y=ae.tooltip)!=null?y:T.tooltip)==null?void 0:m.className)}),Fe),Ct=E0(fe,M({},(b=ae.arrow)!=null?b:T.arrow,{className:je(Ye.arrow,(_=(x=ae.arrow)!=null?x:T.arrow)==null?void 0:_.className)}),Fe);return q.jsxs(I.Fragment,{children:[I.cloneElement(Ce,ge),q.jsx(at,M({as:he??w1,placement:G,anchorEl:V?{getBoundingClientRect:()=>({top:Fv.y,left:Fv.x,right:Fv.x,bottom:Fv.y,width:0,height:0})}:Q,popperRef:F,open:Q?ee:!1,id:ye,transition:!0},Se,ke,{popperOptions:Ne,children:({TransitionProps:ft})=>q.jsx(Ae,M({timeout:me.transitions.duration.shorter},ft,qe,{children:q.jsxs(de,M({},st,{children:[te,S?q.jsx(fe,M({},Ct,{ref:le})):null]}))}))}))]})}),k4=M3e;function GJ(e){return tt("MuiSpeedDialAction",e)}const E3e=nt("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),WJ=E3e,T3e=["className","delay","FabProps","icon","id","open","TooltipClasses","tooltipOpen","tooltipPlacement","tooltipTitle"],O3e=e=>{const{open:t,tooltipPlacement:n,classes:r}=e,i={fab:["fab",!t&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${Le(n)}`,!t&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return it(i,GJ,r)},I3e=Te(P4,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.fab,!n.open&&t.fabClosed]}})(({theme:e,ownerState:t})=>M({margin:8,color:(e.vars||e).palette.text.secondary,backgroundColor:(e.vars||e).palette.background.paper,"&:hover":{backgroundColor:e.vars?e.vars.palette.SpeedDialAction.fabHoverBg:Gm(e.palette.background.paper,.15)},transition:`${e.transitions.create("transform",{duration:e.transitions.duration.shorter})}, opacity 0.8s`,opacity:1},!t.open&&{opacity:0,transform:"scale(0)"})),R3e=Te("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.staticTooltip,!n.open&&t.staticTooltipClosed,t[`tooltipPlacement${Le(n.tooltipPlacement)}`]]}})(({theme:e,ownerState:t})=>({position:"relative",display:"flex",alignItems:"center",[`& .${WJ.staticTooltipLabel}`]:M({transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.shorter}),opacity:1},!t.open&&{opacity:0,transform:"scale(0.5)"},t.tooltipPlacement==="left"&&{transformOrigin:"100% 50%",right:"100%",marginRight:8},t.tooltipPlacement==="right"&&{transformOrigin:"0% 50%",left:"100%",marginLeft:8})})),k3e=Te("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(e,t)=>t.staticTooltipLabel})(({theme:e})=>M({position:"absolute"},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.paper,borderRadius:(e.vars||e).shape.borderRadius,boxShadow:(e.vars||e).shadows[1],color:(e.vars||e).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"})),L3e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiSpeedDialAction"}),{className:i,delay:o=0,FabProps:s={},icon:a,id:l,open:c,TooltipClasses:u,tooltipOpen:d=!1,tooltipPlacement:f="left",tooltipTitle:h}=r,p=He(r,T3e),g=M({},r,{tooltipPlacement:f}),v=O3e(g),[m,y]=I.useState(d),b=()=>{y(!1)},_=()=>{y(!0)},x={transitionDelay:`${o}ms`},w=q.jsx(I3e,M({size:"small",className:je(v.fab,i),tabIndex:-1,role:"menuitem",ownerState:g},s,{style:M({},x,s.style),children:a}));return d?q.jsxs(R3e,M({id:l,ref:n,className:v.staticTooltip,ownerState:g},p,{children:[q.jsx(k3e,{style:x,id:`${l}-label`,className:v.staticTooltipLabel,ownerState:g,children:h}),I.cloneElement(w,{"aria-labelledby":`${l}-label`})]})):(!c&&m&&y(!1),q.jsx(k4,M({id:l,ref:n,title:h,placement:f,onClose:b,onOpen:_,open:c&&m,classes:u},p,{children:w})))}),$3e=L3e,D3e=Un(q.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");function qJ(e){return tt("MuiSpeedDialIcon",e)}const B3e=nt("MuiSpeedDialIcon",["root","icon","iconOpen","iconWithOpenIconOpen","openIcon","openIconOpen"]),nu=B3e,N3e=["className","icon","open","openIcon"],F3e=e=>{const{classes:t,open:n,openIcon:r}=e;return it({root:["root"],icon:["icon",n&&"iconOpen",r&&n&&"iconWithOpenIconOpen"],openIcon:["openIcon",n&&"openIconOpen"]},qJ,t)},z3e=Te("span",{name:"MuiSpeedDialIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${nu.icon}`]:t.icon},{[`& .${nu.icon}`]:n.open&&t.iconOpen},{[`& .${nu.icon}`]:n.open&&n.openIcon&&t.iconWithOpenIconOpen},{[`& .${nu.openIcon}`]:t.openIcon},{[`& .${nu.openIcon}`]:n.open&&t.openIconOpen},t.root]}})(({theme:e,ownerState:t})=>({height:24,[`& .${nu.icon}`]:M({transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.short})},t.open&&M({transform:"rotate(45deg)"},t.openIcon&&{opacity:0})),[`& .${nu.openIcon}`]:M({position:"absolute",transition:e.transitions.create(["transform","opacity"],{duration:e.transitions.duration.short}),opacity:0,transform:"rotate(-45deg)"},t.open&&{transform:"rotate(0deg)",opacity:1})})),YJ=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiSpeedDialIcon"}),{className:i,icon:o,openIcon:s}=r,a=He(r,N3e),l=r,c=F3e(l);function u(d,f){return I.isValidElement(d)?I.cloneElement(d,{className:f}):d}return q.jsxs(z3e,M({className:je(c.root,i),ref:n,ownerState:l},a,{children:[s?u(s,c.openIcon):null,o?u(o,c.icon):q.jsx(D3e,{className:c.icon})]}))});YJ.muiName="SpeedDialIcon";const j3e=YJ,XJ=I.createContext({});function U3e(){return I.useContext(XJ)}const Sh=XJ,KJ=I.createContext({});function V3e(){return I.useContext(KJ)}const Kg=KJ;function ZJ(e){return tt("MuiStep",e)}const H3e=nt("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]),G3e=H3e,W3e=["active","children","className","component","completed","disabled","expanded","index","last"],q3e=e=>{const{classes:t,orientation:n,alternativeLabel:r,completed:i}=e;return it({root:["root",n,r&&"alternativeLabel",i&&"completed"]},ZJ,t)},Y3e=Te("div",{name:"MuiStep",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>M({},e.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},e.alternativeLabel&&{flex:1,position:"relative"})),X3e=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiStep"}),{active:i,children:o,className:s,component:a="div",completed:l,disabled:c,expanded:u=!1,index:d,last:f}=r,h=He(r,W3e),{activeStep:p,connector:g,alternativeLabel:v,orientation:m,nonLinear:y}=I.useContext(Sh);let[b=!1,_=!1,x=!1]=[i,l,c];p===d?b=i!==void 0?i:!0:!y&&p>d?_=l!==void 0?l:!0:!y&&p<d&&(x=c!==void 0?c:!0);const w=I.useMemo(()=>({index:d,last:f,expanded:u,icon:d+1,active:b,completed:_,disabled:x}),[d,f,u,b,_,x]),S=M({},r,{active:b,orientation:m,alternativeLabel:v,completed:_,disabled:x,expanded:u,component:a}),C=q3e(S),A=q.jsxs(Y3e,M({as:a,className:je(C.root,s),ref:n,ownerState:S},h,{children:[g&&v&&d!==0?g:null,o]}));return q.jsx(Kg.Provider,{value:w,children:g&&!v&&d!==0?q.jsxs(I.Fragment,{children:[g,A]}):A})}),K3e=X3e,Z3e=Un(q.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),J3e=Un(q.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function JJ(e){return tt("MuiStepIcon",e)}const Q3e=nt("MuiStepIcon",["root","active","completed","error","text"]),aS=Q3e;var Y6;const eOe=["active","className","completed","error","icon"],tOe=e=>{const{classes:t,active:n,completed:r,error:i}=e;return it({root:["root",n&&"active",r&&"completed",i&&"error"],text:["text"]},JJ,t)},WT=Te(y2,{name:"MuiStepIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),color:(e.vars||e).palette.text.disabled,[`&.${aS.completed}`]:{color:(e.vars||e).palette.primary.main},[`&.${aS.active}`]:{color:(e.vars||e).palette.primary.main},[`&.${aS.error}`]:{color:(e.vars||e).palette.error.main}})),nOe=Te("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(e,t)=>t.text})(({theme:e})=>({fill:(e.vars||e).palette.primary.contrastText,fontSize:e.typography.caption.fontSize,fontFamily:e.typography.fontFamily})),rOe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiStepIcon"}),{active:i=!1,className:o,completed:s=!1,error:a=!1,icon:l}=r,c=He(r,eOe),u=M({},r,{active:i,completed:s,error:a}),d=tOe(u);if(typeof l=="number"||typeof l=="string"){const f=je(o,d.root);return a?q.jsx(WT,M({as:J3e,className:f,ref:n,ownerState:u},c)):s?q.jsx(WT,M({as:Z3e,className:f,ref:n,ownerState:u},c)):q.jsxs(WT,M({className:f,ref:n,ownerState:u},c,{children:[Y6||(Y6=q.jsx("circle",{cx:"12",cy:"12",r:"12"})),q.jsx(nOe,{className:d.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:l})]}))}return l}),QJ=rOe;function eQ(e){return tt("MuiStepLabel",e)}const iOe=nt("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),ec=iOe,oOe=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],sOe=e=>{const{classes:t,orientation:n,active:r,completed:i,error:o,disabled:s,alternativeLabel:a}=e;return it({root:["root",n,o&&"error",s&&"disabled",a&&"alternativeLabel"],label:["label",r&&"active",i&&"completed",o&&"error",s&&"disabled",a&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",i&&"completed",o&&"error",s&&"disabled",a&&"alternativeLabel"],labelContainer:["labelContainer",a&&"alternativeLabel"]},eQ,t)},aOe=Te("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation]]}})(({ownerState:e})=>M({display:"flex",alignItems:"center",[`&.${ec.alternativeLabel}`]:{flexDirection:"column"},[`&.${ec.disabled}`]:{cursor:"default"}},e.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),lOe=Te("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(e,t)=>t.label})(({theme:e})=>M({},e.typography.body2,{display:"block",transition:e.transitions.create("color",{duration:e.transitions.duration.shortest}),[`&.${ec.active}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${ec.completed}`]:{color:(e.vars||e).palette.text.primary,fontWeight:500},[`&.${ec.alternativeLabel}`]:{marginTop:16},[`&.${ec.error}`]:{color:(e.vars||e).palette.error.main}})),cOe=Te("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(e,t)=>t.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${ec.alternativeLabel}`]:{paddingRight:0}})),uOe=Te("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(e,t)=>t.labelContainer})(({theme:e})=>({width:"100%",color:(e.vars||e).palette.text.secondary,[`&.${ec.alternativeLabel}`]:{textAlign:"center"}})),tQ=I.forwardRef(function(t,n){var r;const i=ot({props:t,name:"MuiStepLabel"}),{children:o,className:s,componentsProps:a={},error:l=!1,icon:c,optional:u,slotProps:d={},StepIconComponent:f,StepIconProps:h}=i,p=He(i,oOe),{alternativeLabel:g,orientation:v}=I.useContext(Sh),{active:m,disabled:y,completed:b,icon:_}=I.useContext(Kg),x=c||_;let w=f;x&&!w&&(w=QJ);const S=M({},i,{active:m,alternativeLabel:g,completed:b,disabled:y,error:l,orientation:v}),C=sOe(S),A=(r=d.label)!=null?r:a.label;return q.jsxs(aOe,M({className:je(C.root,s),ref:n,ownerState:S},p,{children:[x||w?q.jsx(cOe,{className:C.iconContainer,ownerState:S,children:q.jsx(w,M({completed:b,active:m,error:l,icon:x},h))}):null,q.jsxs(uOe,{className:C.labelContainer,ownerState:S,children:[o?q.jsx(lOe,M({ownerState:S},A,{className:je(C.label,A==null?void 0:A.className),children:o})):null,u]})]}))});tQ.muiName="StepLabel";const nQ=tQ;function rQ(e){return tt("MuiStepButton",e)}const dOe=nt("MuiStepButton",["root","horizontal","vertical","touchRipple"]),gk=dOe,fOe=["children","className","icon","optional"],hOe=e=>{const{classes:t,orientation:n}=e;return it({root:["root",n],touchRipple:["touchRipple"]},rQ,t)},pOe=Te(Xr,{name:"MuiStepButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${gk.touchRipple}`]:t.touchRipple},t.root,t[n.orientation]]}})(({ownerState:e})=>M({width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},e.orientation==="vertical"&&{justifyContent:"flex-start",padding:"8px",margin:"-8px"},{[`& .${gk.touchRipple}`]:{color:"rgba(0, 0, 0, 0.3)"}})),mOe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiStepButton"}),{children:i,className:o,icon:s,optional:a}=r,l=He(r,fOe),{disabled:c,active:u}=I.useContext(Kg),{orientation:d}=I.useContext(Sh),f=M({},r,{orientation:d}),h=hOe(f),p={icon:s,optional:a},g=sl(i,["StepLabel"])?I.cloneElement(i,p):q.jsx(nQ,M({},p,{children:i}));return q.jsx(pOe,M({focusRipple:!0,disabled:c,TouchRippleProps:{className:h.touchRipple},className:je(h.root,o),ref:n,ownerState:f,"aria-current":u?"step":void 0},l,{children:g}))}),gOe=mOe;function iQ(e){return tt("MuiStepConnector",e)}const vOe=nt("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]),yOe=vOe,bOe=["className"],xOe=e=>{const{classes:t,orientation:n,alternativeLabel:r,active:i,completed:o,disabled:s}=e,a={root:["root",n,r&&"alternativeLabel",i&&"active",o&&"completed",s&&"disabled"],line:["line",`line${Le(n)}`]};return it(a,iQ,t)},_Oe=Te("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel,n.completed&&t.completed]}})(({ownerState:e})=>M({flex:"1 1 auto"},e.orientation==="vertical"&&{marginLeft:12},e.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),wOe=Te("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.line,t[`line${Le(n.orientation)}`]]}})(({ownerState:e,theme:t})=>{const n=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return M({display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:n},e.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},e.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),SOe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiStepConnector"}),{className:i}=r,o=He(r,bOe),{alternativeLabel:s,orientation:a="horizontal"}=I.useContext(Sh),{active:l,disabled:c,completed:u}=I.useContext(Kg),d=M({},r,{alternativeLabel:s,orientation:a,active:l,completed:u,disabled:c}),f=xOe(d);return q.jsx(_Oe,M({className:je(f.root,i),ref:n,ownerState:d},o,{children:q.jsx(wOe,{className:f.line,ownerState:d})}))}),oQ=SOe;function sQ(e){return tt("MuiStepContent",e)}const COe=nt("MuiStepContent",["root","last","transition"]),AOe=COe,POe=["children","className","TransitionComponent","transitionDuration","TransitionProps"],MOe=e=>{const{classes:t,last:n}=e;return it({root:["root",n&&"last"],transition:["transition"]},sQ,t)},EOe=Te("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.last&&t.last]}})(({ownerState:e,theme:t})=>M({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600]}`},e.last&&{borderLeft:"none"})),TOe=Te(YA,{name:"MuiStepContent",slot:"Transition",overridesResolver:(e,t)=>t.transition})({}),OOe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiStepContent"}),{children:i,className:o,TransitionComponent:s=YA,transitionDuration:a="auto",TransitionProps:l}=r,c=He(r,POe);I.useContext(Sh);const{active:u,last:d,expanded:f}=I.useContext(Kg),h=M({},r,{last:d}),p=MOe(h);let g=a;return a==="auto"&&!s.muiSupportAuto&&(g=void 0),q.jsx(EOe,M({className:je(p.root,o),ref:n,ownerState:h},c,{children:q.jsx(TOe,M({as:s,in:u||f,className:p.transition,ownerState:h,timeout:g,unmountOnExit:!0},l,{children:i}))}))}),IOe=OOe;function aQ(e){return tt("MuiStepper",e)}const ROe=nt("MuiStepper",["root","horizontal","vertical","alternativeLabel"]),kOe=ROe,LOe=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],$Oe=e=>{const{orientation:t,alternativeLabel:n,classes:r}=e;return it({root:["root",t,n&&"alternativeLabel"]},aQ,r)},DOe=Te("div",{name:"MuiStepper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.orientation],n.alternativeLabel&&t.alternativeLabel]}})(({ownerState:e})=>M({display:"flex"},e.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},e.orientation==="vertical"&&{flexDirection:"column"},e.alternativeLabel&&{alignItems:"flex-start"})),BOe=q.jsx(oQ,{}),NOe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:o=!1,children:s,className:a,component:l="div",connector:c=BOe,nonLinear:u=!1,orientation:d="horizontal"}=r,f=He(r,LOe),h=M({},r,{alternativeLabel:o,orientation:d,component:l}),p=$Oe(h),g=I.Children.toArray(s).filter(Boolean),v=g.map((y,b)=>I.cloneElement(y,M({index:b,last:b+1===g.length},y.props))),m=I.useMemo(()=>({activeStep:i,alternativeLabel:o,connector:c,nonLinear:u,orientation:d}),[i,o,c,u,d]);return q.jsx(Sh.Provider,{value:m,children:q.jsx(DOe,M({as:l,ownerState:h,className:je(p.root,a),ref:n},f,{children:v}))})}),FOe=NOe,zOe=["anchor","classes","className","width","style"],jOe=Te("div",{shouldForwardProp:Br})(({theme:e,ownerState:t})=>M({position:"fixed",top:0,left:0,bottom:0,zIndex:e.zIndex.drawer-1},t.anchor==="left"&&{right:"auto"},t.anchor==="right"&&{left:"auto",right:0},t.anchor==="top"&&{bottom:"auto",right:0},t.anchor==="bottom"&&{top:"auto",bottom:0,right:0})),UOe=I.forwardRef(function(t,n){const{anchor:r,classes:i={},className:o,width:s,style:a}=t,l=He(t,zOe),c=t;return q.jsx(jOe,M({className:je("PrivateSwipeArea-root",i.root,i[`anchor${Le(r)}`],o),ref:n,style:M({[of(r)?"width":"height"]:s},a),ownerState:c},l))}),VOe=UOe,HOe=["BackdropProps"],GOe=["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","allowSwipeInChildren","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"],g_=3,qT=20;let Tl=null;function YT(e,t,n){return e==="right"?n.body.offsetWidth-t[0].pageX:t[0].pageX}function XT(e,t,n){return e==="bottom"?n.innerHeight-t[0].clientY:t[0].clientY}function zv(e,t){return e?t.clientWidth:t.clientHeight}function X6(e,t,n,r){return Math.min(Math.max(n?t-e:r+t-e,0),r)}function WOe(e,t){const n=[];for(;e&&e!==t.parentElement;){const r=Ai(t).getComputedStyle(e);r.getPropertyValue("position")==="absolute"||r.getPropertyValue("overflow-x")==="hidden"||(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push(e),e=e.parentElement}return n}function qOe({domTreeShapes:e,start:t,current:n,anchor:r}){const i={scrollPosition:{x:"scrollLeft",y:"scrollTop"},scrollLength:{x:"scrollWidth",y:"scrollHeight"},clientLength:{x:"clientWidth",y:"clientHeight"}};return e.some(o=>{let s=n>=t;(r==="top"||r==="left")&&(s=!s);const a=r==="left"||r==="right"?"x":"y",l=Math.round(o[i.scrollPosition[a]]),c=l>0,u=l+o[i.clientLength[a]]<o[i.scrollLength[a]];return!!(s&&u||!s&&c)})}const YOe=typeof navigator<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent),XOe=I.forwardRef(function(t,n){const r=g1({name:"MuiSwipeableDrawer",props:t}),i=Dn(),o={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{anchor:s="left",disableBackdropTransition:a=!1,disableDiscovery:l=!1,disableSwipeToOpen:c=YOe,hideBackdrop:u,hysteresis:d=.52,allowSwipeInChildren:f=!1,minFlingVelocity:h=450,ModalProps:{BackdropProps:p}={},onClose:g,onOpen:v,open:m=!1,PaperProps:y={},SwipeAreaProps:b,swipeAreaWidth:_=20,transitionDuration:x=o,variant:w="temporary"}=r,S=He(r.ModalProps,HOe),C=He(r,GOe),[A,T]=I.useState(!1),O=I.useRef({isSwiping:null}),R=I.useRef(),L=I.useRef(),D=I.useRef(),$=cn(y.ref,D),z=I.useRef(!1),H=I.useRef();Yr(()=>{H.current=null},[m]);const B=I.useCallback((ce,pe={})=>{const{mode:se=null,changeTransition:G=!0}=pe,he=O0(i,s),Z=["right","bottom"].indexOf(he)!==-1?1:-1,ae=of(s),oe=ae?`translate(${Z*ce}px, 0)`:`translate(0, ${Z*ce}px)`,te=D.current.style;te.webkitTransform=oe,te.transform=oe;let ve="";if(se&&(ve=i.transitions.create("all",ba({easing:void 0,style:void 0,timeout:x},{mode:se}))),G&&(te.webkitTransition=ve,te.transition=ve),!a&&!u){const ne=L.current.style;ne.opacity=1-ce/zv(ae,D.current),G&&(ne.webkitTransition=ve,ne.transition=ve)}},[s,a,u,i,x]),V=tr(ce=>{if(!z.current)return;if(Tl=null,z.current=!1,Nu.flushSync(()=>{T(!1)}),!O.current.isSwiping){O.current.isSwiping=null;return}O.current.isSwiping=null;const pe=O0(i,s),se=of(s);let G;se?G=YT(pe,ce.changedTouches,kn(ce.currentTarget)):G=XT(pe,ce.changedTouches,Ai(ce.currentTarget));const he=se?O.current.startX:O.current.startY,Z=zv(se,D.current),ae=X6(G,he,m,Z),oe=ae/Z;if(Math.abs(O.current.velocity)>h&&(H.current=Math.abs((Z-ae)/O.current.velocity)*1e3),m){O.current.velocity>h||oe>d?g():B(0,{mode:"exit"});return}O.current.velocity<-h||1-oe>d?v():B(zv(se,D.current),{mode:"enter"})}),J=(ce=!1)=>{if(!A){(ce||!(l&&f))&&Nu.flushSync(()=>{T(!0)});const pe=of(s);!m&&D.current&&B(zv(pe,D.current)+(l?15:-qT),{changeTransition:!1}),O.current.velocity=0,O.current.lastTime=null,O.current.lastTranslate=null,O.current.paperHit=!1,z.current=!0}},K=tr(ce=>{if(!D.current||!z.current||Tl!==null&&Tl!==O.current)return;J(!0);const pe=O0(i,s),se=of(s),G=YT(pe,ce.touches,kn(ce.currentTarget)),he=XT(pe,ce.touches,Ai(ce.currentTarget));if(m&&D.current.contains(ce.target)&&Tl===null){const ve=WOe(ce.target,D.current);if(qOe({domTreeShapes:ve,start:se?O.current.startX:O.current.startY,current:se?G:he,anchor:s})){Tl=!0;return}Tl=O.current}if(O.current.isSwiping==null){const ve=Math.abs(G-O.current.startX),ne=Math.abs(he-O.current.startY),xe=se?ve>ne&&ve>g_:ne>ve&&ne>g_;if(xe&&ce.cancelable&&ce.preventDefault(),xe===!0||(se?ne>g_:ve>g_)){if(O.current.isSwiping=xe,!xe){V(ce);return}O.current.startX=G,O.current.startY=he,!l&&!m&&(se?O.current.startX-=qT:O.current.startY-=qT)}}if(!O.current.isSwiping)return;const Z=zv(se,D.current);let ae=se?O.current.startX:O.current.startY;m&&!O.current.paperHit&&(ae=Math.min(ae,Z));const oe=X6(se?G:he,ae,m,Z);if(m)if(O.current.paperHit)oe===0&&(O.current.startX=G,O.current.startY=he);else if(se?G<Z:he<Z)O.current.paperHit=!0,O.current.startX=G,O.current.startY=he;else return;O.current.lastTranslate===null&&(O.current.lastTranslate=oe,O.current.lastTime=performance.now()+1);const te=(oe-O.current.lastTranslate)/(performance.now()-O.current.lastTime)*1e3;O.current.velocity=O.current.velocity*.4+te*.6,O.current.lastTranslate=oe,O.current.lastTime=performance.now(),ce.cancelable&&ce.preventDefault(),B(oe)}),ie=tr(ce=>{if(ce.defaultPrevented||ce.defaultMuiPrevented||m&&(u||!L.current.contains(ce.target))&&!D.current.contains(ce.target))return;const pe=O0(i,s),se=of(s),G=YT(pe,ce.touches,kn(ce.currentTarget)),he=XT(pe,ce.touches,Ai(ce.currentTarget));if(!m){var Z;if(c||!(ce.target===R.current||(Z=D.current)!=null&&Z.contains(ce.target)&&(typeof f=="function"?f(ce,R.current,D.current):f)))return;if(se){if(G>_)return}else if(he>_)return}ce.defaultMuiPrevented=!0,Tl=null,O.current.startX=G,O.current.startY=he,J()});return I.useEffect(()=>{if(w==="temporary"){const ce=kn(D.current);return ce.addEventListener("touchstart",ie),ce.addEventListener("touchmove",K,{passive:!m}),ce.addEventListener("touchend",V),()=>{ce.removeEventListener("touchstart",ie),ce.removeEventListener("touchmove",K,{passive:!m}),ce.removeEventListener("touchend",V)}}},[w,m,ie,K,V]),I.useEffect(()=>()=>{Tl===O.current&&(Tl=null)},[]),I.useEffect(()=>{m||T(!1)},[m]),q.jsxs(I.Fragment,{children:[q.jsx(hZ,M({open:w==="temporary"&&A?!0:m,variant:w,ModalProps:M({BackdropProps:M({},p,{ref:L})},w==="temporary"&&{keepMounted:!0},S),hideBackdrop:u,PaperProps:M({},y,{style:M({pointerEvents:w==="temporary"&&!m&&!f?"none":""},y.style),ref:$}),anchor:s,transitionDuration:H.current||x,onClose:g,ref:n},C)),!c&&w==="temporary"&&q.jsx(dK,{children:q.jsx(VOe,M({anchor:s,ref:R,width:_},b))})]})}),KOe=XOe;function lQ(e){return tt("MuiSwitch",e)}const ZOe=nt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),ki=ZOe,JOe=["className","color","edge","size","sx"],QOe=e=>{const{classes:t,edge:n,size:r,color:i,checked:o,disabled:s}=e,a={root:["root",n&&`edge${Le(n)}`,`size${Le(r)}`],switchBase:["switchBase",`color${Le(i)}`,o&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},l=it(a,lQ,t);return M({},t,l)},eIe=Te("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${Le(n.edge)}`],t[`size${Le(n.size)}`]]}})(({ownerState:e})=>M({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${ki.thumb}`]:{width:16,height:16},[`& .${ki.switchBase}`]:{padding:4,[`&.${ki.checked}`]:{transform:"translateX(16px)"}}})),tIe=Te(A4,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${ki.input}`]:t.input},n.color!=="default"&&t[`color${Le(n.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${ki.checked}`]:{transform:"translateX(20px)"},[`&.${ki.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${ki.checked} + .${ki.track}`]:{opacity:.5},[`&.${ki.disabled} + .${ki.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${ki.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:t})=>M({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${ki.checked}`]:{color:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${ki.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t.color}DisabledColor`]:`${e.palette.mode==="light"?ya(e.palette[t.color].main,.62):va(e.palette[t.color].main,.55)}`}},[`&.${ki.checked} + .${ki.track}`]:{backgroundColor:(e.vars||e).palette[t.color].main}})),nIe=Te("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),rIe=Te("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),iIe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiSwitch"}),{className:i,color:o="primary",edge:s=!1,size:a="medium",sx:l}=r,c=He(r,JOe),u=M({},r,{color:o,edge:s,size:a}),d=QOe(u),f=q.jsx(rIe,{className:d.thumb,ownerState:u});return q.jsxs(eIe,{className:je(d.root,i),sx:l,ownerState:u,children:[q.jsx(tIe,M({type:"checkbox",icon:f,checkedIcon:f,ref:n,ownerState:u},c,{classes:M({},d,{root:d.switchBase})})),q.jsx(nIe,{className:d.track,ownerState:u})]})}),oIe=iIe;function cQ(e){return tt("MuiTab",e)}const sIe=nt("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),ru=sIe,aIe=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],lIe=e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:i,icon:o,label:s,selected:a,disabled:l}=e,c={root:["root",o&&s&&"labelIcon",`textColor${Le(n)}`,r&&"fullWidth",i&&"wrapped",a&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return it(c,cQ,t)},cIe=Te(Xr,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Le(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>M({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${ru.iconWrapper}`]:M({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${ru.selected}`]:{opacity:1},[`&.${ru.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${ru.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${ru.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${ru.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${ru.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),uIe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTab"}),{className:i,disabled:o=!1,disableFocusRipple:s=!1,fullWidth:a,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:f,onClick:h,onFocus:p,selected:g,selectionFollowsFocus:v,textColor:m="inherit",value:y,wrapped:b=!1}=r,_=He(r,aIe),x=M({},r,{disabled:o,disableFocusRipple:s,selected:g,icon:!!l,iconPosition:c,label:!!d,fullWidth:a,textColor:m,wrapped:b}),w=lIe(x),S=l&&d&&I.isValidElement(l)?I.cloneElement(l,{className:je(w.iconWrapper,l.props.className)}):l,C=T=>{!g&&f&&f(T,y),h&&h(T)},A=T=>{v&&!g&&f&&f(T,y),p&&p(T)};return q.jsxs(cIe,M({focusRipple:!s,className:je(w.root,i),ref:n,role:"tab","aria-selected":g,disabled:o,onClick:C,onFocus:A,ownerState:x,tabIndex:g?0:-1},_,{children:[c==="top"||c==="start"?q.jsxs(I.Fragment,{children:[S,d]}):q.jsxs(I.Fragment,{children:[d,S]}),u]}))}),dIe=uIe,fIe=I.createContext(),uQ=fIe;function dQ(e){return tt("MuiTable",e)}const hIe=nt("MuiTable",["root","stickyHeader"]),pIe=hIe,mIe=["className","component","padding","size","stickyHeader"],gIe=e=>{const{classes:t,stickyHeader:n}=e;return it({root:["root",n&&"stickyHeader"]},dQ,t)},vIe=Te("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>M({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":M({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),K6="table",yIe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTable"}),{className:i,component:o=K6,padding:s="normal",size:a="medium",stickyHeader:l=!1}=r,c=He(r,mIe),u=M({},r,{component:o,padding:s,size:a,stickyHeader:l}),d=gIe(u),f=I.useMemo(()=>({padding:s,size:a,stickyHeader:l}),[s,a,l]);return q.jsx(uQ.Provider,{value:f,children:q.jsx(vIe,M({as:o,role:o===K6?null:"table",ref:n,className:je(d.root,i),ownerState:u},c))})}),bIe=yIe,xIe=I.createContext(),P1=xIe;function fQ(e){return tt("MuiTableBody",e)}const _Ie=nt("MuiTableBody",["root"]),wIe=_Ie,SIe=["className","component"],CIe=e=>{const{classes:t}=e;return it({root:["root"]},fQ,t)},AIe=Te("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),PIe={variant:"body"},Z6="tbody",MIe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTableBody"}),{className:i,component:o=Z6}=r,s=He(r,SIe),a=M({},r,{component:o}),l=CIe(a);return q.jsx(P1.Provider,{value:PIe,children:q.jsx(AIe,M({className:je(l.root,i),as:o,ref:n,role:o===Z6?null:"rowgroup",ownerState:a},s))})}),EIe=MIe;function hQ(e){return tt("MuiTableCell",e)}const TIe=nt("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),pQ=TIe,OIe=["align","className","component","padding","scope","size","sortDirection","variant"],IIe=e=>{const{classes:t,variant:n,align:r,padding:i,size:o,stickyHeader:s}=e,a={root:["root",n,s&&"stickyHeader",r!=="inherit"&&`align${Le(r)}`,i!=="normal"&&`padding${Le(i)}`,`size${Le(o)}`]};return it(a,hQ,t)},RIe=Te("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Le(n.size)}`],n.padding!=="normal"&&t[`padding${Le(n.padding)}`],n.align!=="inherit"&&t[`align${Le(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>M({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?ya(Et(e.palette.divider,1),.88):va(Et(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${pQ.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),kIe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTableCell"}),{align:i="inherit",className:o,component:s,padding:a,scope:l,size:c,sortDirection:u,variant:d}=r,f=He(r,OIe),h=I.useContext(uQ),p=I.useContext(P1),g=p&&p.variant==="head";let v;s?v=s:v=g?"th":"td";let m=l;v==="td"?m=void 0:!m&&g&&(m="col");const y=d||p&&p.variant,b=M({},r,{align:i,component:v,padding:a||(h&&h.padding?h.padding:"normal"),size:c||(h&&h.size?h.size:"medium"),sortDirection:u,stickyHeader:y==="head"&&h&&h.stickyHeader,variant:y}),_=IIe(b);let x=null;return u&&(x=u==="asc"?"ascending":"descending"),q.jsx(RIe,M({as:v,ref:n,className:je(_.root,o),"aria-sort":x,scope:m,ownerState:b},f))}),A2=kIe;function mQ(e){return tt("MuiTableContainer",e)}const LIe=nt("MuiTableContainer",["root"]),$Ie=LIe,DIe=["className","component"],BIe=e=>{const{classes:t}=e;return it({root:["root"]},mQ,t)},NIe=Te("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),FIe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTableContainer"}),{className:i,component:o="div"}=r,s=He(r,DIe),a=M({},r,{component:o}),l=BIe(a);return q.jsx(NIe,M({ref:n,as:o,className:je(l.root,i),ownerState:a},s))}),zIe=FIe;function gQ(e){return tt("MuiTableFooter",e)}const jIe=nt("MuiTableFooter",["root"]),UIe=jIe,VIe=["className","component"],HIe=e=>{const{classes:t}=e;return it({root:["root"]},gQ,t)},GIe=Te("tfoot",{name:"MuiTableFooter",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-footer-group"}),WIe={variant:"footer"},J6="tfoot",qIe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTableFooter"}),{className:i,component:o=J6}=r,s=He(r,VIe),a=M({},r,{component:o}),l=HIe(a);return q.jsx(P1.Provider,{value:WIe,children:q.jsx(GIe,M({as:o,className:je(l.root,i),ref:n,role:o===J6?null:"rowgroup",ownerState:a},s))})}),YIe=qIe;function vQ(e){return tt("MuiTableHead",e)}const XIe=nt("MuiTableHead",["root"]),KIe=XIe,ZIe=["className","component"],JIe=e=>{const{classes:t}=e;return it({root:["root"]},vQ,t)},QIe=Te("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),eRe={variant:"head"},Q6="thead",tRe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTableHead"}),{className:i,component:o=Q6}=r,s=He(r,ZIe),a=M({},r,{component:o}),l=JIe(a);return q.jsx(P1.Provider,{value:eRe,children:q.jsx(QIe,M({as:o,className:je(l.root,i),ref:n,role:o===Q6?null:"rowgroup",ownerState:a},s))})}),nRe=tRe;function yQ(e){return tt("MuiToolbar",e)}const rRe=nt("MuiToolbar",["root","gutters","regular","dense"]),iRe=rRe,oRe=["className","component","disableGutters","variant"],sRe=e=>{const{classes:t,disableGutters:n,variant:r}=e;return it({root:["root",!n&&"gutters",r]},yQ,t)},aRe=Te("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})(({theme:e,ownerState:t})=>M({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},t.variant==="dense"&&{minHeight:48}),({theme:e,ownerState:t})=>t.variant==="regular"&&e.mixins.toolbar),lRe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiToolbar"}),{className:i,component:o="div",disableGutters:s=!1,variant:a="regular"}=r,l=He(r,oRe),c=M({},r,{component:o,disableGutters:s,variant:a}),u=sRe(c);return q.jsx(aRe,M({as:o,className:je(u.root,i),ref:n,ownerState:c},l))}),bQ=lRe,xQ=Un(q.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),_Q=Un(q.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),cRe=["backIconButtonProps","count","disabled","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","slots","slotProps"],uRe=I.forwardRef(function(t,n){var r,i,o,s,a,l,c,u;const{backIconButtonProps:d,count:f,disabled:h=!1,getItemAriaLabel:p,nextIconButtonProps:g,onPageChange:v,page:m,rowsPerPage:y,showFirstButton:b,showLastButton:_,slots:x={},slotProps:w={}}=t,S=He(t,cRe),C=Dn(),A=ae=>{v(ae,0)},T=ae=>{v(ae,m-1)},O=ae=>{v(ae,m+1)},R=ae=>{v(ae,Math.max(0,Math.ceil(f/y)-1))},L=(r=x.firstButton)!=null?r:$i,D=(i=x.lastButton)!=null?i:$i,$=(o=x.nextButton)!=null?o:$i,z=(s=x.previousButton)!=null?s:$i,H=(a=x.firstButtonIcon)!=null?a:hk,B=(l=x.lastButtonIcon)!=null?l:pk,V=(c=x.nextButtonIcon)!=null?c:_Q,J=(u=x.previousButtonIcon)!=null?u:xQ,K=C.direction==="rtl"?D:L,ie=C.direction==="rtl"?$:z,ce=C.direction==="rtl"?z:$,pe=C.direction==="rtl"?L:D,se=C.direction==="rtl"?w.lastButton:w.firstButton,G=C.direction==="rtl"?w.nextButton:w.previousButton,he=C.direction==="rtl"?w.previousButton:w.nextButton,Z=C.direction==="rtl"?w.firstButton:w.lastButton;return q.jsxs("div",M({ref:n},S,{children:[b&&q.jsx(K,M({onClick:A,disabled:h||m===0,"aria-label":p("first",m),title:p("first",m)},se,{children:C.direction==="rtl"?q.jsx(B,M({},w.lastButtonIcon)):q.jsx(H,M({},w.firstButtonIcon))})),q.jsx(ie,M({onClick:T,disabled:h||m===0,color:"inherit","aria-label":p("previous",m),title:p("previous",m)},G??d,{children:C.direction==="rtl"?q.jsx(V,M({},w.nextButtonIcon)):q.jsx(J,M({},w.previousButtonIcon))})),q.jsx(ce,M({onClick:O,disabled:h||(f!==-1?m>=Math.ceil(f/y)-1:!1),color:"inherit","aria-label":p("next",m),title:p("next",m)},he??g,{children:C.direction==="rtl"?q.jsx(J,M({},w.previousButtonIcon)):q.jsx(V,M({},w.nextButtonIcon))})),_&&q.jsx(pe,M({onClick:R,disabled:h||m>=Math.ceil(f/y)-1,"aria-label":p("last",m),title:p("last",m)},Z,{children:C.direction==="rtl"?q.jsx(H,M({},w.firstButtonIcon)):q.jsx(B,M({},w.lastButtonIcon))}))]}))}),dRe=uRe;function wQ(e){return tt("MuiTablePagination",e)}const fRe=nt("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]),hm=fRe;var ez;const hRe=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","disabled","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton","slotProps","slots"],pRe=Te(A2,{name:"MuiTablePagination",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({overflow:"auto",color:(e.vars||e).palette.text.primary,fontSize:e.typography.pxToRem(14),"&:last-child":{padding:0}})),mRe=Te(bQ,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(e,t)=>M({[`& .${hm.actions}`]:t.actions},t.toolbar)})(({theme:e})=>({minHeight:52,paddingRight:2,[`${e.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[e.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${hm.actions}`]:{flexShrink:0,marginLeft:20}})),gRe=Te("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(e,t)=>t.spacer})({flex:"1 1 100%"}),vRe=Te("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(e,t)=>t.selectLabel})(({theme:e})=>M({},e.typography.body2,{flexShrink:0})),yRe=Te(A1,{name:"MuiTablePagination",slot:"Select",overridesResolver:(e,t)=>M({[`& .${hm.selectIcon}`]:t.selectIcon,[`& .${hm.select}`]:t.select},t.input,t.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${hm.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),bRe=Te(fo,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(e,t)=>t.menuItem})({}),xRe=Te("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(e,t)=>t.displayedRows})(({theme:e})=>M({},e.typography.body2,{flexShrink:0}));function _Re({from:e,to:t,count:n}){return`${e}–${t} of ${n!==-1?n:`more than ${t}`}`}function wRe(e){return`Go to ${e} page`}const SRe=e=>{const{classes:t}=e;return it({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},wQ,t)},CRe=I.forwardRef(function(t,n){var r;const i=ot({props:t,name:"MuiTablePagination"}),{ActionsComponent:o=dRe,backIconButtonProps:s,className:a,colSpan:l,component:c=A2,count:u,disabled:d=!1,getItemAriaLabel:f=wRe,labelDisplayedRows:h=_Re,labelRowsPerPage:p="Rows per page:",nextIconButtonProps:g,onPageChange:v,onRowsPerPageChange:m,page:y,rowsPerPage:b,rowsPerPageOptions:_=[10,25,50,100],SelectProps:x={},showFirstButton:w=!1,showLastButton:S=!1,slotProps:C={},slots:A={}}=i,T=He(i,hRe),O=i,R=SRe(O),L=(r=C==null?void 0:C.select)!=null?r:x,D=L.native?"option":bRe;let $;(c===A2||c==="td")&&($=l||1e3);const z=Ls(L.id),H=Ls(L.labelId),B=()=>u===-1?(y+1)*b:b===-1?u:Math.min(u,(y+1)*b);return q.jsx(pRe,M({colSpan:$,ref:n,as:c,ownerState:O,className:je(R.root,a)},T,{children:q.jsxs(mRe,{className:R.toolbar,children:[q.jsx(gRe,{className:R.spacer}),_.length>1&&q.jsx(vRe,{className:R.selectLabel,id:H,children:p}),_.length>1&&q.jsx(yRe,M({variant:"standard"},!L.variant&&{input:ez||(ez=q.jsx(S1,{}))},{value:b,onChange:m,id:z,labelId:H},L,{classes:M({},L.classes,{root:je(R.input,R.selectRoot,(L.classes||{}).root),select:je(R.select,(L.classes||{}).select),icon:je(R.selectIcon,(L.classes||{}).icon)}),disabled:d,children:_.map(V=>I.createElement(D,M({},!da(D)&&{ownerState:O},{className:R.menuItem,key:V.label?V.label:V,value:V.value?V.value:V}),V.label?V.label:V))})),q.jsx(xRe,{className:R.displayedRows,children:h({from:u===0?0:y*b+1,to:B(),count:u===-1?-1:u,page:y})}),q.jsx(o,{className:R.actions,backIconButtonProps:s,count:u,nextIconButtonProps:g,onPageChange:v,page:y,rowsPerPage:b,showFirstButton:w,showLastButton:S,slotProps:C.actions,slots:A.actions,getItemAriaLabel:f,disabled:d})]})}))}),ARe=CRe;function SQ(e){return tt("MuiTableRow",e)}const PRe=nt("MuiTableRow",["root","selected","hover","head","footer"]),vk=PRe,MRe=["className","component","hover","selected"],ERe=e=>{const{classes:t,selected:n,hover:r,head:i,footer:o}=e;return it({root:["root",n&&"selected",r&&"hover",i&&"head",o&&"footer"]},SQ,t)},TRe=Te("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${vk.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${vk.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:Et(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Et(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),tz="tr",ORe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTableRow"}),{className:i,component:o=tz,hover:s=!1,selected:a=!1}=r,l=He(r,MRe),c=I.useContext(P1),u=M({},r,{component:o,hover:s,selected:a,head:c&&c.variant==="head",footer:c&&c.variant==="footer"}),d=ERe(u);return q.jsx(TRe,M({as:o,ref:n,className:je(d.root,i),role:o===tz?null:"row",ownerState:u},l))}),IRe=ORe,RRe=Un(q.jsx("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward");function CQ(e){return tt("MuiTableSortLabel",e)}const kRe=nt("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]),lS=kRe,LRe=["active","children","className","direction","hideSortIcon","IconComponent"],$Re=e=>{const{classes:t,direction:n,active:r}=e,i={root:["root",r&&"active"],icon:["icon",`iconDirection${Le(n)}`]};return it(i,CQ,t)},DRe=Te(Xr,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.active&&t.active]}})(({theme:e})=>({cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(e.vars||e).palette.text.secondary},"&:hover":{color:(e.vars||e).palette.text.secondary,[`& .${lS.icon}`]:{opacity:.5}},[`&.${lS.active}`]:{color:(e.vars||e).palette.text.primary,[`& .${lS.icon}`]:{opacity:1,color:(e.vars||e).palette.text.secondary}}})),BRe=Te("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,t[`iconDirection${Le(n.direction)}`]]}})(({theme:e,ownerState:t})=>M({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:e.transitions.create(["opacity","transform"],{duration:e.transitions.duration.shorter}),userSelect:"none"},t.direction==="desc"&&{transform:"rotate(0deg)"},t.direction==="asc"&&{transform:"rotate(180deg)"})),NRe=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTableSortLabel"}),{active:i=!1,children:o,className:s,direction:a="asc",hideSortIcon:l=!1,IconComponent:c=RRe}=r,u=He(r,LRe),d=M({},r,{active:i,direction:a,hideSortIcon:l,IconComponent:c}),f=$Re(d);return q.jsxs(DRe,M({className:je(f.root,s),component:"span",disableRipple:!0,ownerState:d,ref:n},u,{children:[o,l&&!i?null:q.jsx(BRe,{as:c,className:je(f.icon),ownerState:d})]}))}),FRe=NRe;function zRe(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function jRe(e,t,n,r={},i=()=>{}){const{ease:o=zRe,duration:s=300}=r;let a=null;const l=t[e];let c=!1;const u=()=>{c=!0},d=f=>{if(c){i(new Error("Animation cancelled"));return}a===null&&(a=f);const h=Math.min(1,(f-a)/s);if(t[e]=o(h)*(n-l)+l,h>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(d)};return l===n?(i(new Error("Element already at target position")),u):(requestAnimationFrame(d),u)}const URe=["onChange"],VRe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function HRe(e){const{onChange:t}=e,n=He(e,URe),r=I.useRef(),i=I.useRef(null),o=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return Yr(()=>{const s=xh(()=>{const l=r.current;o(),l!==r.current&&t(r.current)}),a=Ai(i.current);return a.addEventListener("resize",s),()=>{s.clear(),a.removeEventListener("resize",s)}},[t]),I.useEffect(()=>{o(),t(r.current)},[t]),q.jsx("div",M({style:VRe,ref:i},n))}function AQ(e){return tt("MuiTabScrollButton",e)}const GRe=nt("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),PQ=GRe,WRe=["className","slots","slotProps","direction","orientation","disabled"],qRe=e=>{const{classes:t,orientation:n,disabled:r}=e;return it({root:["root",n,r&&"disabled"]},AQ,t)},YRe=Te(Xr,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})(({ownerState:e})=>M({width:40,flexShrink:0,opacity:.8,[`&.${PQ.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),XRe=I.forwardRef(function(t,n){var r,i;const o=ot({props:t,name:"MuiTabScrollButton"}),{className:s,slots:a={},slotProps:l={},direction:c}=o,u=He(o,WRe),f=Dn().direction==="rtl",h=M({isRtl:f},o),p=qRe(h),g=(r=a.StartScrollButtonIcon)!=null?r:xQ,v=(i=a.EndScrollButtonIcon)!=null?i:_Q,m=vr({elementType:g,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:h}),y=vr({elementType:v,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:h});return q.jsx(YRe,M({component:"div",className:je(p.root,s),ref:n,role:null,ownerState:h,tabIndex:null},u,{children:c==="left"?q.jsx(g,M({},m)):q.jsx(v,M({},y))}))}),MQ=XRe;function EQ(e){return tt("MuiTabs",e)}const KRe=nt("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),cS=KRe,ZRe=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],nz=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,rz=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,v_=(e,t,n)=>{let r=!1,i=n(e,t);for(;i;){if(i===e.firstChild){if(r)return;r=!0}const o=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||o)i=n(e,i);else{i.focus();return}}},JRe=e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:o,centered:s,scrollButtonsHideMobile:a,classes:l}=e;return it({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",o&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",s&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},EQ,l)},QRe=Te("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${cS.scrollButtons}`]:t.scrollButtons},{[`& .${cS.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>M({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${cS.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),eke=Te("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})(({ownerState:e})=>M({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),tke=Te("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})(({ownerState:e})=>M({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),nke=Te("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>M({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),rke=Te(HRe)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),iz={},ike=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTabs"}),i=Dn(),o=i.direction==="rtl",{"aria-label":s,"aria-labelledby":a,action:l,centered:c=!1,children:u,className:d,component:f="div",allowScrollButtonsMobile:h=!1,indicatorColor:p="primary",onChange:g,orientation:v="horizontal",ScrollButtonComponent:m=MQ,scrollButtons:y="auto",selectionFollowsFocus:b,slots:_={},slotProps:x={},TabIndicatorProps:w={},TabScrollButtonProps:S={},textColor:C="primary",value:A,variant:T="standard",visibleScrollbar:O=!1}=r,R=He(r,ZRe),L=T==="scrollable",D=v==="vertical",$=D?"scrollTop":"scrollLeft",z=D?"top":"left",H=D?"bottom":"right",B=D?"clientHeight":"clientWidth",V=D?"height":"width",J=M({},r,{component:f,allowScrollButtonsMobile:h,indicatorColor:p,orientation:v,vertical:D,scrollButtons:y,textColor:C,variant:T,visibleScrollbar:O,fixed:!L,hideScrollbar:L&&!O,scrollableX:L&&!D,scrollableY:L&&D,centered:c&&!L,scrollButtonsHideMobile:!h}),K=JRe(J),ie=vr({elementType:_.StartScrollButtonIcon,externalSlotProps:x.startScrollButtonIcon,ownerState:J}),ce=vr({elementType:_.EndScrollButtonIcon,externalSlotProps:x.endScrollButtonIcon,ownerState:J}),[pe,se]=I.useState(!1),[G,he]=I.useState(iz),[Z,ae]=I.useState(!1),[oe,te]=I.useState(!1),[ve,ne]=I.useState(!1),[xe,Ce]=I.useState({overflow:"hidden",scrollbarWidth:0}),me=new Map,X=I.useRef(null),Q=I.useRef(null),Re=()=>{const Ge=X.current;let Xe;if(Ge){const rt=Ge.getBoundingClientRect();Xe={clientWidth:Ge.clientWidth,scrollLeft:Ge.scrollLeft,scrollTop:Ge.scrollTop,scrollLeftNormalized:Fpe(Ge,i.direction),scrollWidth:Ge.scrollWidth,top:rt.top,bottom:rt.bottom,left:rt.left,right:rt.right}}let ut;if(Ge&&A!==!1){const rt=Q.current.children;if(rt.length>0){const dt=rt[me.get(A)];ut=dt?dt.getBoundingClientRect():null}}return{tabsMeta:Xe,tabMeta:ut}},Pe=tr(()=>{const{tabsMeta:Ge,tabMeta:Xe}=Re();let ut=0,rt;if(D)rt="top",Xe&&Ge&&(ut=Xe.top-Ge.top+Ge.scrollTop);else if(rt=o?"right":"left",Xe&&Ge){const yt=o?Ge.scrollLeftNormalized+Ge.clientWidth-Ge.scrollWidth:Ge.scrollLeft;ut=(o?-1:1)*(Xe[rt]-Ge[rt]+yt)}const dt={[rt]:ut,[V]:Xe?Xe[V]:0};if(isNaN(G[rt])||isNaN(G[V]))he(dt);else{const yt=Math.abs(G[rt]-dt[rt]),Ke=Math.abs(G[V]-dt[V]);(yt>=1||Ke>=1)&&he(dt)}}),le=(Ge,{animation:Xe=!0}={})=>{Xe?jRe($,X.current,Ge,{duration:i.transitions.duration.standard}):X.current[$]=Ge},Oe=Ge=>{let Xe=X.current[$];D?Xe+=Ge:(Xe+=Ge*(o?-1:1),Xe*=o&&iX()==="reverse"?-1:1),le(Xe)},Be=()=>{const Ge=X.current[B];let Xe=0;const ut=Array.from(Q.current.children);for(let rt=0;rt<ut.length;rt+=1){const dt=ut[rt];if(Xe+dt[B]>Ge){rt===0&&(Xe=Ge);break}Xe+=dt[B]}return Xe},De=()=>{Oe(-1*Be())},Ee=()=>{Oe(Be())},Ie=I.useCallback(Ge=>{Ce({overflow:null,scrollbarWidth:Ge})},[]),U=()=>{const Ge={};Ge.scrollbarSizeListener=L?q.jsx(rke,{onChange:Ie,className:je(K.scrollableX,K.hideScrollbar)}):null;const ut=L&&(y==="auto"&&(Z||oe)||y===!0);return Ge.scrollButtonStart=ut?q.jsx(m,M({slots:{StartScrollButtonIcon:_.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:ie},orientation:v,direction:o?"right":"left",onClick:De,disabled:!Z},S,{className:je(K.scrollButtons,S.className)})):null,Ge.scrollButtonEnd=ut?q.jsx(m,M({slots:{EndScrollButtonIcon:_.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:ce},orientation:v,direction:o?"left":"right",onClick:Ee,disabled:!oe},S,{className:je(K.scrollButtons,S.className)})):null,Ge},E=tr(Ge=>{const{tabsMeta:Xe,tabMeta:ut}=Re();if(!(!ut||!Xe)){if(ut[z]<Xe[z]){const rt=Xe[$]+(ut[z]-Xe[z]);le(rt,{animation:Ge})}else if(ut[H]>Xe[H]){const rt=Xe[$]+(ut[H]-Xe[H]);le(rt,{animation:Ge})}}}),P=tr(()=>{L&&y!==!1&&ne(!ve)});I.useEffect(()=>{const Ge=xh(()=>{X.current&&Pe()});let Xe;const ut=yt=>{yt.forEach(Ke=>{Ke.removedNodes.forEach(gt=>{var ct;(ct=Xe)==null||ct.unobserve(gt)}),Ke.addedNodes.forEach(gt=>{var ct;(ct=Xe)==null||ct.observe(gt)})}),Ge(),P()},rt=Ai(X.current);rt.addEventListener("resize",Ge);let dt;return typeof ResizeObserver<"u"&&(Xe=new ResizeObserver(Ge),Array.from(Q.current.children).forEach(yt=>{Xe.observe(yt)})),typeof MutationObserver<"u"&&(dt=new MutationObserver(ut),dt.observe(Q.current,{childList:!0})),()=>{var yt,Ke;Ge.clear(),rt.removeEventListener("resize",Ge),(yt=dt)==null||yt.disconnect(),(Ke=Xe)==null||Ke.disconnect()}},[Pe,P]),I.useEffect(()=>{const Ge=Array.from(Q.current.children),Xe=Ge.length;if(typeof IntersectionObserver<"u"&&Xe>0&&L&&y!==!1){const ut=Ge[0],rt=Ge[Xe-1],dt={root:X.current,threshold:.99},yt=mt=>{ae(!mt[0].isIntersecting)},Ke=new IntersectionObserver(yt,dt);Ke.observe(ut);const gt=mt=>{te(!mt[0].isIntersecting)},ct=new IntersectionObserver(gt,dt);return ct.observe(rt),()=>{Ke.disconnect(),ct.disconnect()}}},[L,y,ve,u==null?void 0:u.length]),I.useEffect(()=>{se(!0)},[]),I.useEffect(()=>{Pe()}),I.useEffect(()=>{E(iz!==G)},[E,G]),I.useImperativeHandle(l,()=>({updateIndicator:Pe,updateScrollButtons:P}),[Pe,P]);const ee=q.jsx(nke,M({},w,{className:je(K.indicator,w.className),ownerState:J,style:M({},G,w.style)}));let ye=0;const be=I.Children.map(u,Ge=>{if(!I.isValidElement(Ge))return null;const Xe=Ge.props.value===void 0?ye:Ge.props.value;me.set(Xe,ye);const ut=Xe===A;return ye+=1,I.cloneElement(Ge,M({fullWidth:T==="fullWidth",indicator:ut&&!pe&&ee,selected:ut,selectionFollowsFocus:b,onChange:g,textColor:C,value:Xe},ye===1&&A===!1&&!Ge.props.tabIndex?{tabIndex:0}:{}))}),Me=Ge=>{const Xe=Q.current,ut=kn(Xe).activeElement;if(ut.getAttribute("role")!=="tab")return;let dt=v==="horizontal"?"ArrowLeft":"ArrowUp",yt=v==="horizontal"?"ArrowRight":"ArrowDown";switch(v==="horizontal"&&o&&(dt="ArrowRight",yt="ArrowLeft"),Ge.key){case dt:Ge.preventDefault(),v_(Xe,ut,rz);break;case yt:Ge.preventDefault(),v_(Xe,ut,nz);break;case"Home":Ge.preventDefault(),v_(Xe,null,nz);break;case"End":Ge.preventDefault(),v_(Xe,null,rz);break}},ze=U();return q.jsxs(QRe,M({className:je(K.root,d),ownerState:J,ref:n,as:f},R,{children:[ze.scrollButtonStart,ze.scrollbarSizeListener,q.jsxs(eke,{className:K.scroller,ownerState:J,style:{overflow:xe.overflow,[D?`margin${o?"Left":"Right"}`:"marginBottom"]:O?void 0:-xe.scrollbarWidth},ref:X,children:[q.jsx(tke,{"aria-label":s,"aria-labelledby":a,"aria-orientation":v==="vertical"?"vertical":null,className:K.flexContainer,ownerState:J,onKeyDown:Me,ref:Q,role:"tablist",children:be}),pe&&ee]}),ze.scrollButtonEnd]}))}),oke=ike;function TQ(e){return tt("MuiTextField",e)}const ske=nt("MuiTextField",["root"]),ake=ske,lke=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],cke={standard:iP,filled:M4,outlined:I4},uke=e=>{const{classes:t}=e;return it({root:["root"]},TQ,t)},dke=Te(vZ,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),fke=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiTextField"}),{autoComplete:i,autoFocus:o=!1,children:s,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:d=!1,FormHelperTextProps:f,fullWidth:h=!1,helperText:p,id:g,InputLabelProps:v,inputProps:m,InputProps:y,inputRef:b,label:_,maxRows:x,minRows:w,multiline:S=!1,name:C,onBlur:A,onChange:T,onFocus:O,placeholder:R,required:L=!1,rows:D,select:$=!1,SelectProps:z,type:H,value:B,variant:V="outlined"}=r,J=He(r,lke),K=M({},r,{autoFocus:o,color:l,disabled:u,error:d,fullWidth:h,multiline:S,required:L,select:$,variant:V}),ie=uke(K),ce={};V==="outlined"&&(v&&typeof v.shrink<"u"&&(ce.notched=v.shrink),ce.label=_),$&&((!z||!z.native)&&(ce.id=void 0),ce["aria-describedby"]=void 0);const pe=Ls(g),se=p&&pe?`${pe}-helper-text`:void 0,G=_&&pe?`${pe}-label`:void 0,he=cke[V],Z=q.jsx(he,M({"aria-describedby":se,autoComplete:i,autoFocus:o,defaultValue:c,fullWidth:h,multiline:S,name:C,rows:D,maxRows:x,minRows:w,type:H,value:B,id:pe,inputRef:b,onBlur:A,onChange:T,onFocus:O,placeholder:R,inputProps:m},ce,y));return q.jsxs(dke,M({className:je(ie.root,a),disabled:u,error:d,fullWidth:h,ref:n,required:L,color:l,variant:V,ownerState:K},J,{children:[_!=null&&_!==""&&q.jsx(jZ,M({htmlFor:pe,id:G},v,{children:_})),$?q.jsx(A1,M({"aria-describedby":se,id:pe,labelId:G,value:B,input:Z},z,{children:s})):Z,p&&q.jsx(SZ,M({id:se},f,{children:p}))]}))}),OQ=fke;function IQ(e){return tt("MuiToggleButton",e)}const hke=nt("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),yk=hke,pke=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],mke=e=>{const{classes:t,fullWidth:n,selected:r,disabled:i,size:o,color:s}=e,a={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${Le(o)}`,s]};return it(a,IQ,t)},gke=Te(Xr,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`size${Le(n.size)}`]]}})(({theme:e,ownerState:t})=>{let n=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,r;return e.vars&&(n=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,r=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),M({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${yk.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Et(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${yk.selected}`]:{color:n,backgroundColor:e.vars?`rgba(${r} / ${e.vars.palette.action.selectedOpacity})`:Et(n,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${r} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Et(n,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${r} / ${e.vars.palette.action.selectedOpacity})`:Et(n,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),vke=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiToggleButton"}),{children:i,className:o,color:s="standard",disabled:a=!1,disableFocusRipple:l=!1,fullWidth:c=!1,onChange:u,onClick:d,selected:f,size:h="medium",value:p}=r,g=He(r,pke),v=M({},r,{color:s,disabled:a,disableFocusRipple:l,fullWidth:c,size:h}),m=mke(v),y=b=>{d&&(d(b,p),b.defaultPrevented)||u&&u(b,p)};return q.jsx(gke,M({className:je(m.root,o),disabled:a,focusRipple:!l,ref:n,onClick:y,onChange:u,value:p,ownerState:v,"aria-pressed":f},g,{children:i}))}),yke=vke;function bke(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}function RQ(e){return tt("MuiToggleButtonGroup",e)}const xke=nt("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth"]),Ba=xke,_ke=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],wke=e=>{const{classes:t,orientation:n,fullWidth:r,disabled:i}=e,o={root:["root",n==="vertical"&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${Le(n)}`,i&&"disabled"]};return it(o,RQ,t)},Ske=Te("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Ba.grouped}`]:t.grouped},{[`& .${Ba.grouped}`]:t[`grouped${Le(n.orientation)}`]},t.root,n.orientation==="vertical"&&t.vertical,n.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>M({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${Ba.grouped}`]:M({},e.orientation==="horizontal"?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${Ba.selected} + .${Ba.grouped}.${Ba.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${Ba.selected} + .${Ba.grouped}.${Ba.selected}`]:{borderTop:0,marginTop:0}})})),Cke=I.forwardRef(function(t,n){const r=ot({props:t,name:"MuiToggleButtonGroup"}),{children:i,className:o,color:s="standard",disabled:a=!1,exclusive:l=!1,fullWidth:c=!1,onChange:u,orientation:d="horizontal",size:f="medium",value:h}=r,p=He(r,_ke),g=M({},r,{disabled:a,fullWidth:c,orientation:d,size:f}),v=wke(g),m=(b,_)=>{if(!u)return;const x=h&&h.indexOf(_);let w;h&&x>=0?(w=h.slice(),w.splice(x,1)):w=h?h.concat(_):[_],u(b,w)},y=(b,_)=>{u&&u(b,h===_?null:_)};return q.jsx(Ske,M({role:"group",className:je(v.root,o),ref:n,ownerState:g},p,{children:I.Children.map(i,b=>I.isValidElement(b)?I.cloneElement(b,{className:je(v.grouped,b.props.className),onChange:l?y:m,selected:b.props.selected===void 0?bke(b.props.value,h):b.props.selected,size:b.props.size||f,fullWidth:c,color:b.props.color||s,disabled:b.props.disabled||a}):null)}))}),Ake=Cke,Pke=["getTrigger","target"];function Mke(e,t){const{disableHysteresis:n=!1,threshold:r=100,target:i}=t,o=e.current;return i&&(e.current=i.pageYOffset!==void 0?i.pageYOffset:i.scrollTop),!n&&o!==void 0&&e.current<o?!1:e.current>r}const Eke=typeof window<"u"?window:null;function Tke(e={}){const{getTrigger:t=Mke,target:n=Eke}=e,r=He(e,Pke),i=I.useRef(),[o,s]=I.useState(()=>t(i,r));return I.useEffect(()=>{const a=()=>{s(t(i,M({target:n},r)))};return a(),n.addEventListener("scroll",a,{passive:!0}),()=>{n.removeEventListener("scroll",a,{passive:!0})}},[n,t,JSON.stringify(r)]),o}/**
 * @mui/material v5.15.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */const Oke=Object.freeze(Object.defineProperty({__proto__:null,Accordion:u0e,AccordionActions:v0e,AccordionDetails:C0e,AccordionSummary:X0e,Alert:fye,AlertTitle:Mye,AppBar:Lye,Autocomplete:xxe,Avatar:EK,AvatarGroup:Dxe,Backdrop:x4,Badge:Jxe,BottomNavigation:o_e,BottomNavigationAction:f_e,Box:g_e,Breadcrumbs:O_e,Button:C4,ButtonBase:Xr,ButtonGroup:W_e,ButtonGroupButtonContext:S4,ButtonGroupContext:w4,Card:Q_e,CardActionArea:swe,CardActions:hwe,CardContent:xwe,CardHeader:Twe,CardMedia:Nwe,Checkbox:nSe,Chip:xK,CircularProgress:XK,ClickAwayListener:QX,Collapse:YA,Container:KK,CssBaseline:ySe,Dialog:BSe,DialogActions:HSe,DialogContent:JSe,DialogContentText:o2e,DialogTitle:u2e,Divider:g2e,Drawer:hZ,Experimental_CssVarsProvider:EX,Fab:P4,Fade:b4,FilledInput:M4,FormControl:vZ,FormControlLabel:Q2e,FormGroup:_Z,FormHelperText:SZ,FormLabel:PZ,FormLabelRoot:AZ,GlobalStyles:v4,Grid:I0,Grow:nb,Hidden:tAe,Icon:aAe,IconButton:$i,ImageList:pAe,ImageListItem:xAe,ImageListItemBar:IAe,Input:iP,InputAdornment:UAe,InputBase:S1,InputLabel:jZ,LinearProgress:VZ,Link:qZ,List:XZ,ListItem:jPe,ListItemAvatar:YPe,ListItemButton:EPe,ListItemIcon:eMe,ListItemSecondaryAction:eJ,ListItemText:sMe,ListSubheader:yK,Menu:C1,MenuItem:fo,MenuList:oJ,MobileStepper:UMe,Modal:rP,ModalManager:uK,NativeSelect:QMe,NoSsr:dK,OutlinedInput:I4,Pagination:AEe,PaginationItem:xJ,Paper:cs,Popover:S2,PopoverPaper:T4,PopoverRoot:aJ,Popper:w1,Portal:g4,Radio:NEe,RadioGroup:jEe,Rating:iTe,ScopedCssBaseline:dTe,Select:A1,Skeleton:$Te,Slide:cZ,Slider:HTe,SliderMark:BJ,SliderMarkLabel:NJ,SliderRail:kJ,SliderRoot:RJ,SliderThumb:$J,SliderTrack:LJ,SliderValueLabel:DJ,Snackbar:o3e,SnackbarContent:zJ,SpeedDial:b3e,SpeedDialAction:$3e,SpeedDialIcon:j3e,Stack:yZ,Step:K3e,StepButton:gOe,StepConnector:oQ,StepContent:IOe,StepContext:Kg,StepIcon:QJ,StepLabel:nQ,Stepper:FOe,StepperContext:Sh,StyledEngineProvider:KY,SvgIcon:y2,SwipeableDrawer:KOe,Switch:oIe,THEME_ID:fl,Tab:dIe,TabScrollButton:MQ,Table:bIe,TableBody:EIe,TableCell:A2,TableContainer:zIe,TableFooter:YIe,TableHead:nRe,TablePagination:ARe,TableRow:IRe,TableSortLabel:FRe,Tabs:oke,TextField:OQ,TextareaAutosize:hK,ThemeProvider:r4,ToggleButton:yke,ToggleButtonGroup:Ake,Toolbar:bQ,Tooltip:k4,Typography:xn,Unstable_Grid2:RCe,Unstable_TrapFocus:eK,Zoom:UJ,accordionActionsClasses:f0e,accordionClasses:M0,accordionDetailsClasses:b0e,accordionSummaryClasses:vf,adaptV4Theme:xX,alertClasses:JR,alertTitleClasses:wye,alpha:Et,appBarClasses:Tye,autocompleteClasses:nn,avatarClasses:MK,avatarGroupClasses:OK,backdropClasses:jxe,badgeClasses:zl,bottomNavigationActionClasses:_4,bottomNavigationClasses:e_e,boxClasses:$K,breadcrumbsClasses:BK,buttonBaseClasses:HX,buttonClasses:T0,buttonGroupClasses:ci,capitalize:Le,cardActionAreaClasses:iS,cardActionsClasses:lwe,cardClasses:Y_e,cardContentClasses:mwe,cardHeaderClasses:nk,cardMediaClasses:Iwe,checkboxClasses:oS,chipClasses:fn,circularProgressClasses:iSe,collapseClasses:qve,colors:PY,containerClasses:gSe,createChainedFunction:Zy,createFilterOptions:pK,createMuiTheme:_X,createStyles:SX,createSvgIcon:Un,createTheme:ju,css:ma,darkScrollbar:xSe,darken:va,debounce:xh,decomposeColor:ga,deprecatedPropType:eX,dialogActionsClasses:FSe,dialogClasses:sS,dialogContentClasses:WSe,dialogContentTextClasses:e2e,dialogTitleClasses:oZ,dividerClasses:rk,drawerClasses:w2e,duration:HA,easing:n4,emphasize:Gm,experimentalStyled:Te,experimental_extendTheme:o4,experimental_sx:IX,fabClasses:ik,filledInputClasses:so,formControlClasses:F2e,formControlLabelClasses:Wp,formGroupClasses:tCe,formHelperTextClasses:ok,formLabelClasses:dm,generateUtilityClass:tt,generateUtilityClasses:nt,getAccordionActionsUtilityClass:jX,getAccordionDetailsUtilityClass:UX,getAccordionSummaryUtilityClass:GX,getAccordionUtilityClass:zX,getAlertTitleUtilityClass:ZX,getAlertUtilityClass:WX,getAppBarUtilityClass:JX,getAutocompleteUtilityClass:AK,getAvatarGroupUtilityClass:TK,getAvatarUtilityClass:PK,getBackdropUtilityClass:IK,getBadgeUtilityClass:RK,getBottomNavigationActionUtilityClass:LK,getBottomNavigationUtilityClass:kK,getBreadcrumbsUtilityClass:DK,getButtonBaseUtilityClass:VX,getButtonGroupUtilityClass:zK,getButtonUtilityClass:NK,getCardActionAreaUtilityClass:UK,getCardActionsUtilityClass:VK,getCardContentUtilityClass:HK,getCardHeaderUtilityClass:GK,getCardMediaUtilityClass:WK,getCardUtilityClass:jK,getCheckboxUtilityClass:qK,getChipUtilityClass:bK,getCircularProgressUtilityClass:YK,getCollapseUtilityClass:DX,getContainerUtilityClass:pSe,getContrastRatio:X5,getDialogActionsUtilityClass:nZ,getDialogContentTextUtilityClass:sZ,getDialogContentUtilityClass:rZ,getDialogTitleUtilityClass:iZ,getDialogUtilityClass:eZ,getDividerUtilityClass:aZ,getDrawerUtilityClass:uZ,getFabUtilityClass:pZ,getFilledInputUtilityClass:CK,getFormControlLabelUtilityClasses:bZ,getFormControlUtilityClasses:gZ,getFormGroupUtilityClass:xZ,getFormHelperTextUtilityClasses:wZ,getFormLabelUtilityClasses:CZ,getGrid2UtilityClass:kCe,getGridUtilityClass:MZ,getIconButtonUtilityClass:qX,getIconUtilityClass:RZ,getImageListItemBarUtilityClass:BZ,getImageListItemUtilityClass:DZ,getImageListUtilityClass:LZ,getInitColorSchemeScript:OX,getInputAdornmentUtilityClass:FZ,getInputBaseUtilityClass:_K,getInputLabelUtilityClasses:zZ,getInputUtilityClass:wK,getLinearProgressUtilityClass:UZ,getLinkUtilityClass:HZ,getListItemAvatarUtilityClass:tJ,getListItemButtonUtilityClass:ZZ,getListItemIconUtilityClass:nJ,getListItemSecondaryActionClassesUtilityClass:JZ,getListItemTextUtilityClass:rJ,getListItemUtilityClass:KZ,getListSubheaderUtilityClass:gK,getListUtilityClass:YZ,getLuminance:Jy,getMenuItemUtilityClass:cJ,getMenuUtilityClass:lJ,getMobileStepperUtilityClass:uJ,getModalUtilityClass:QK,getNativeSelectUtilityClasses:O4,getOffsetLeft:fk,getOffsetTop:dk,getOutlinedInputUtilityClass:SK,getOverlayAlpha:Qy,getPaginationItemUtilityClass:yJ,getPaginationUtilityClass:gJ,getPaperUtilityClass:NX,getPopoverUtilityClass:sJ,getRadioUtilityClass:CJ,getRatingUtilityClass:AJ,getScopedCssBaselineUtilityClass:MJ,getSelectUtilityClasses:EJ,getSkeletonUtilityClass:OJ,getSliderUtilityClass:IJ,getSnackbarContentUtilityClass:FJ,getSnackbarUtilityClass:jJ,getSpeedDialActionUtilityClass:GJ,getSpeedDialIconUtilityClass:qJ,getSpeedDialUtilityClass:VJ,getStepButtonUtilityClass:rQ,getStepConnectorUtilityClass:iQ,getStepContentUtilityClass:sQ,getStepIconUtilityClass:JJ,getStepLabelUtilityClass:eQ,getStepUtilityClass:ZJ,getStepperUtilityClass:aQ,getSvgIconUtilityClass:RX,getSwitchUtilityClass:lQ,getTabScrollButtonUtilityClass:AQ,getTabUtilityClass:cQ,getTableBodyUtilityClass:fQ,getTableCellUtilityClass:hQ,getTableContainerUtilityClass:mQ,getTableFooterUtilityClass:gQ,getTableHeadUtilityClass:vQ,getTablePaginationUtilityClass:wQ,getTableRowUtilityClass:SQ,getTableSortLabelUtilityClass:CQ,getTableUtilityClass:dQ,getTabsUtilityClass:EQ,getTextFieldUtilityClass:TQ,getToggleButtonGroupUtilityClass:RQ,getToggleButtonUtilityClass:IQ,getToolbarUtilityClass:yQ,getTooltipUtilityClass:HJ,getTouchRippleUtilityClass:P0e,getTypographyUtilityClass:KX,grid2Classes:NCe,gridClasses:Km,hexToRgb:Y5,hslToRgb:UA,iconButtonClasses:YX,iconClasses:rAe,imageListClasses:cAe,imageListItemBarClasses:wAe,imageListItemClasses:ak,inputAdornmentClasses:lk,inputBaseClasses:oo,inputClasses:Xl,inputLabelClasses:HAe,isMuiElement:sl,keyframes:ls,lighten:ya,linearProgressClasses:KAe,linkClasses:GZ,listClasses:gPe,listItemAvatarClasses:VPe,listItemButtonClasses:af,listItemClasses:sf,listItemIconClasses:uk,listItemSecondaryActionClasses:OPe,listItemTextClasses:rb,listSubheaderClasses:D1e,makeStyles:AX,menuClasses:vMe,menuItemClasses:Sp,mobileStepperClasses:LMe,modalClasses:wSe,nativeSelectClasses:oP,outlinedInputClasses:Qs,ownerDocument:kn,ownerWindow:Ai,paginationClasses:uEe,paginationItemClasses:No,paperClasses:e0e,popoverClasses:uMe,private_createMixins:t4,private_createTypography:VA,private_excludeVariablesFromRoot:s4,radioClasses:mk,ratingClasses:Cp,recomposeColor:qg,requirePropFactory:tX,responsiveFontSizes:CX,rgbToHex:pX,scopedCssBaselineClasses:sTe,selectClasses:Ap,setRef:Vm,shouldSkipGeneratingVar:i4,skeletonClasses:ETe,sliderClasses:As,snackbarClasses:e3e,snackbarContentClasses:WTe,speedDialActionClasses:WJ,speedDialClasses:R0,speedDialIconClasses:nu,stackClasses:W2e,stepButtonClasses:gk,stepClasses:G3e,stepConnectorClasses:yOe,stepContentClasses:AOe,stepIconClasses:aS,stepLabelClasses:ec,stepperClasses:kOe,styled:Te,svgIconClasses:kve,switchClasses:ki,tabClasses:ru,tabScrollButtonClasses:PQ,tableBodyClasses:wIe,tableCellClasses:pQ,tableClasses:pIe,tableContainerClasses:$Ie,tableFooterClasses:UIe,tableHeadClasses:KIe,tablePaginationClasses:hm,tableRowClasses:vk,tableSortLabelClasses:lS,tabsClasses:cS,textFieldClasses:ake,toggleButtonClasses:yk,toggleButtonGroupClasses:Ba,toolbarClasses:iRe,tooltipClasses:Ql,touchRippleClasses:Vo,typographyClasses:pye,unstable_ClassNameGenerator:LX,unstable_composeClasses:it,unstable_createMuiStrictModeTheme:wX,unstable_getUnit:GA,unstable_toUnitless:ja,unstable_useEnhancedEffect:Yr,unstable_useId:Ls,unsupportedProp:nX,useAutocomplete:mK,useColorScheme:TX,useControlled:Wi,useEventCallback:tr,useForkRef:cn,useFormControl:Vs,useIsFocusVisible:_h,useMediaQuery:IZ,usePagination:vJ,useRadioGroup:SJ,useScrollTrigger:Tke,useStepContext:V3e,useStepperContext:U3e,useTheme:Dn,useThemeProps:ot,withStyles:PX,withTheme:MX},Symbol.toStringTag,{value:"Module"}));var P2={},L4={};const Ike=Zi(PY),Rke=Zi(Ive);var kke=function(t){return Lke(t)&&!$ke(t)};function Lke(e){return!!e&&typeof e=="object"}function $ke(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Nke(e)}var Dke=typeof Symbol=="function"&&Symbol.for,Bke=Dke?Symbol.for("react.element"):60103;function Nke(e){return e.$$typeof===Bke}function Fke(e){return Array.isArray(e)?[]:{}}function ib(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Zm(Fke(e),e,t):e}function zke(e,t,n){return e.concat(t).map(function(r){return ib(r,n)})}function jke(e,t){if(!t.customMerge)return Zm;var n=t.customMerge(e);return typeof n=="function"?n:Zm}function Uke(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function oz(e){return Object.keys(e).concat(Uke(e))}function kQ(e,t){try{return t in e}catch{return!1}}function Vke(e,t){return kQ(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Hke(e,t,n){var r={};return n.isMergeableObject(e)&&oz(e).forEach(function(i){r[i]=ib(e[i],n)}),oz(t).forEach(function(i){Vke(e,i)||(kQ(e,i)&&n.isMergeableObject(t[i])?r[i]=jke(i,n)(e[i],t[i],n):r[i]=ib(t[i],n))}),r}function Zm(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||zke,n.isMergeableObject=n.isMergeableObject||kke,n.cloneUnlessOtherwiseSpecified=ib;var r=Array.isArray(t),i=Array.isArray(e),o=r===i;return o?r?n.arrayMerge(e,t,n):Hke(e,t,n):ib(t,n)}Zm.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(r,i){return Zm(r,i,n)},{})};var Gke=Zm,Wke=Gke;(function(e){var t=we&&we.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.createJBrowseTheme=e.createJBrowseBaseTheme=e.defaultThemes=void 0;const n=Ike,r=Rke,i=t(Wke),o="#0D233F",s="#721E63",a="#135560",l="#FFB11D",c=(0,r.createTheme)();function u(){return{palette:{mode:void 0,primary:{main:o},secondary:{main:s},tertiary:c.palette.augmentColor({color:{main:a}}),quaternary:c.palette.augmentColor({color:{main:l}}),stopCodon:"#e22",startCodon:"#3e3",bases:{A:c.palette.augmentColor({color:n.green}),C:c.palette.augmentColor({color:n.blue}),G:c.palette.augmentColor({color:n.orange}),T:c.palette.augmentColor({color:n.red})}},components:{MuiLink:{styleOverrides:{root:({theme:x})=>({color:x.palette.tertiary.main})}}}}}function d(){return{name:"Default (from config)",...u()}}function f(){return{name:"Light (stock)",...u()}}function h(){return{name:"Dark (stock)",palette:{mode:"dark",primary:{main:o},secondary:{main:s},tertiary:c.palette.augmentColor({color:{main:a}}),quaternary:c.palette.augmentColor({color:{main:l}}),stopCodon:"#e22",startCodon:"#3e3",bases:{A:c.palette.augmentColor({color:n.green}),C:c.palette.augmentColor({color:n.blue}),G:c.palette.augmentColor({color:n.orange}),T:c.palette.augmentColor({color:n.red})}},components:{MuiAppBar:{defaultProps:{enableColorOnDark:!0},styleOverrides:{primary:x=>x.theme.palette.primary.main}}}}}function p(){return{name:"Dark (minimal)",palette:{mode:"dark",primary:{main:n.grey[700]},secondary:{main:n.grey[800]},tertiary:c.palette.augmentColor({color:{main:n.grey[900]}}),quaternary:c.palette.augmentColor({color:{main:l}}),stopCodon:"#e22",startCodon:"#3e3",bases:{A:c.palette.augmentColor({color:n.green}),C:c.palette.augmentColor({color:n.blue}),G:c.palette.augmentColor({color:n.orange}),T:c.palette.augmentColor({color:n.red})}}}}function g(){return{name:"Light (minimal)",palette:{primary:{main:n.grey[900]},secondary:{main:n.grey[800]},tertiary:c.palette.augmentColor({color:{main:n.grey[900]}}),quaternary:c.palette.augmentColor({color:{main:l}}),stopCodon:"#e22",startCodon:"#3e3",bases:{A:c.palette.augmentColor({color:n.green}),C:c.palette.augmentColor({color:n.blue}),G:c.palette.augmentColor({color:n.orange}),T:c.palette.augmentColor({color:n.red})}}}}e.defaultThemes={default:d(),lightStock:f(),lightMinimal:g(),darkMinimal:p(),darkStock:h()};function v(x){var w,S,C,A,T,O;return{components:{MuiButton:{defaultProps:{size:"small"},styleOverrides:{root:R=>{const{theme:L}=R;return L.palette.mode==="dark"?{color:L.palette.text.primary}:void 0}}},MuiAccordion:{defaultProps:{disableGutters:!0,TransitionProps:{timeout:150}}},MuiFilledInput:{defaultProps:{margin:"dense"}},MuiFormControl:{defaultProps:{margin:"dense",size:"small"}},MuiFormHelperText:{defaultProps:{margin:"dense"}},MuiIconButton:{defaultProps:{size:"small"}},MuiInputBase:{defaultProps:{margin:"dense"}},MuiAutocomplete:{defaultProps:{size:"small"}},MuiInputLabel:{defaultProps:{margin:"dense"}},MuiToolbar:{defaultProps:{variant:"dense"}},MuiListItem:{defaultProps:{dense:!0}},MuiOutlinedInput:{defaultProps:{margin:"dense"}},MuiFab:{defaultProps:{size:"small"},styleOverrides:{secondary:{backgroundColor:(S=(w=x==null?void 0:x.palette)===null||w===void 0?void 0:w.quaternary)===null||S===void 0?void 0:S.main}}},MuiTable:{defaultProps:{size:"small"}},MuiPopover:{defaultProps:{transitionDuration:0}},MuiMenu:{defaultProps:{transitionDuration:0}},MuiMenuItem:{defaultProps:{dense:!0}},MuiTextField:{defaultProps:{margin:"dense",variant:"standard"}},MuiLink:{styleOverrides:{root:({theme:R})=>({color:R.palette.text.secondary})}},MuiCheckbox:{styleOverrides:{root:({theme:R})=>R.palette.mode==="dark"?{color:R.palette.text.secondary,"&.Mui-checked":{color:R.palette.text.secondary}}:void 0}},MuiRadio:{styleOverrides:{root:({theme:R})=>R.palette.mode==="dark"?{color:R.palette.text.secondary,"&.Mui-checked":{color:R.palette.text.secondary}}:void 0}},MuiFormLabel:{styleOverrides:{root:({theme:R})=>R.palette.mode==="dark"?{color:R.palette.text.secondary,"&.Mui-focused":{color:R.palette.text.secondary}}:void 0}},MuiAccordionSummary:{styleOverrides:{root:{backgroundColor:(A=(C=x==null?void 0:x.palette)===null||C===void 0?void 0:C.tertiary)===null||A===void 0?void 0:A.main},content:{color:(O=(T=x==null?void 0:x.palette)===null||T===void 0?void 0:T.tertiary)===null||O===void 0?void 0:O.contrastText}}},MuiToggleButtonGroup:{defaultProps:{size:"small"}}}}}function m(x){return(0,i.default)({palette:x==null?void 0:x.palette,typography:{fontSize:12},spacing:4,...v(x)},x||{})}e.createJBrowseBaseTheme=m;function y(x={},w=e.defaultThemes,S="default"){return(0,r.createTheme)(m(S==="default"?(0,i.default)(w.default,b(x)):_(w[S])||w.default))}e.createJBrowseTheme=y;function b(x={}){var w,S;return!((w=x==null?void 0:x.palette)===null||w===void 0)&&w.tertiary&&(x=(0,i.default)(x,{palette:{tertiary:c.palette.augmentColor("color"in x.palette.tertiary?x.palette.tertiary:{color:x.palette.tertiary})}})),!((S=x==null?void 0:x.palette)===null||S===void 0)&&S.quaternary&&(x=(0,i.default)(x,{palette:{quaternary:c.palette.augmentColor("color"in x.palette.quaternary?x.palette.quaternary:{color:x.palette.quaternary})}})),x}function _(x={}){var w,S;return x=b(x),!((w=x==null?void 0:x.palette)===null||w===void 0)&&w.quaternary||(x=(0,i.default)(x,{palette:{quaternary:c.palette.augmentColor({color:{main:"#aaa"}})}})),!((S=x==null?void 0:x.palette)===null||S===void 0)&&S.tertiary||(x=(0,i.default)(x,{palette:{tertiary:c.palette.augmentColor({color:{main:"#aaa"}})}})),x}})(L4);var Jm={},qke=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jm,"__esModule",{value:!0});Jm.LogoFull=Jm.Logomark=void 0;const zr=qke(I);function LQ(e){return e==="black"?{midnight:"#808080",forrest:"#666666",grape:"#4d4d4d",mandarin:"#333333",gray:"#1a1a1a"}:e==="white"?{midnight:"#ffffff",forrest:"#e6e6e6",grape:"#cccccc",mandarin:"#b3b3b3",gray:"#999999"}:{midnight:"#0d233f",forrest:"#135560",grape:"#721e63",mandarin:"#ffb11d",gray:"#dadada"}}function Yke({variant:e}){return zr.default.createElement("svg",{viewBox:"0 0 175 175"},zr.default.createElement($Q,{variant:e}))}Jm.Logomark=Yke;function Xke({variant:e}){return zr.default.createElement("svg",{viewBox:"0 0 641 175"},zr.default.createElement(Kke,{variant:e}),zr.default.createElement($Q,{variant:e}))}Jm.LogoFull=Xke;function $Q({variant:e}){const t=LQ(e);return zr.default.createElement(zr.default.Fragment,null,zr.default.createElement("path",{style:{fill:t.midnight},d:"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z"}),zr.default.createElement("path",{style:{fill:t.forrest},d:"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z"}),zr.default.createElement("path",{style:{fill:t.grape},d:"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z"}),zr.default.createElement("path",{style:{fill:t.mandarin},d:"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z"}),zr.default.createElement("path",{style:{fill:t.gray},d:"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z"}))}function Kke({variant:e}){const t=LQ(e);return zr.default.createElement("g",{"aria-label":"JBrowse",transform:"translate(213.084 144.241)",style:{fill:t.midnight}},zr.default.createElement("path",{d:"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z"}),zr.default.createElement("path",{d:"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z"}),zr.default.createElement("path",{d:"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z"}),zr.default.createElement("path",{d:"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z"}),zr.default.createElement("path",{d:"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z"}),zr.default.createElement("path",{d:"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z"}),zr.default.createElement("path",{d:"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z"}))}var $4={};const Ro=Zi(Oke),ld=Zi(Eue),DQ=Object.fromEntries?Object.fromEntries:e=>{if(!e||!e[Symbol.iterator])throw new Error("Object.fromEntries() requires a single iterable argument");const t={};return Object.keys(e).forEach(n=>{const[r,i]=e[n];t[r]=i}),t};function Qm(e){return Object.keys(e)}function D4(e,t){if(!e)throw new Error(t)}function B4(e,t){return t}const N4=e=>{const t=e.length;let n=0,r="";for(;n<t;n++){const i=e[n];if(i==null)continue;let o;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))o=N4(i);else{D4(!B4(i,!1)),o="";for(const s in i)i[s]&&s&&(o&&(o+=" "),o+=s)}break}default:o=i}o&&(r&&(r+=" "),r+=o)}return r};function Zke(e,t){const n=I.useRef();return(!n.current||t.length!==n.current.prevDeps.length||n.current.prevDeps.map((r,i)=>r===t[i]).indexOf(!1)>=0)&&(n.current={v:e(),prevDeps:[...t]}),n.current.v}function Jke(e){return e instanceof Object&&!("styles"in e)&&!("length"in e)&&!("__emotion_styles"in e)}const{createCssAndCx:Qke}=(()=>{function e(n,r,i){const o=[],s=zY(n,o,i);return o.length<2?i:s+r(o)}function t(n){const{cache:r}=n,i=(...s)=>{const a=SA(s,r.registered);k5(r,a,!1);const l=`${r.key}-${a.name}`;e:{const c=s[0];if(!Jke(c))break e;sz.saveClassNameCSSObjectMapping(r,l,c)}return l};return{css:i,cx:(...s)=>{const a=N4(s),l=sz.fixClassName(r,a,i);return e(r.registered,i,l)}}}return{createCssAndCx:t}})();function BQ(e){const{useCache:t}=e;function n(){const r=t(),{css:i,cx:o}=Zke(()=>Qke({cache:r}),[r]);return{css:i,cx:o}}return{useCssAndCx:n}}const sz=(()=>{const e=new WeakMap;return{saveClassNameCSSObjectMapping:(t,n,r)=>{let i=e.get(t);i===void 0&&(i=new Map,e.set(t,i)),i.set(n,r)},fixClassName:(()=>{function t(n){let r=!1;return n.map(([i,o])=>{if(o===void 0)return i;let s;if(r)s={"&&":o};else{s=i;for(const a in o)if(a.startsWith("@media")){r=!0;break}}return s})}return(n,r,i)=>{const o=e.get(n);return N4(t(r.split(" ").map(s=>[s,o==null?void 0:o.get(s)])).map(s=>typeof s=="string"?s:i(s)))}})()}})();function eg(e){if(!(e instanceof Object)||typeof e=="function")return e;const t=[];for(const n in e){const r=e[n],i=typeof r;if(!(i==="string"||i==="number"&&!isNaN(r)||i==="boolean"||r===void 0||r===null))return e;t.push(`${n}:${i}_${r}`)}return"xSqLiJdLMd9s"+t.join("|")}function F4(e,t,n){if(!(t instanceof Object))return e;const r={};return Qm(e).forEach(i=>r[i]=n(e[i],t[i])),Qm(t).forEach(i=>{if(i in e)return;const o=t[i];typeof o=="string"&&(r[i]=o)}),r}const z4=({classes:e,theme:t,muiStyleOverridesParams:n,css:r,cx:i,name:o})=>{var s,a;e:{if(o==="makeStyle no name"){o=void 0;break e}if(n!==void 0&&o===void 0)throw new Error("To use muiStyleOverridesParams, you must specify a name using .withName('MyComponent')")}let l;try{l=o===void 0?void 0:((a=(s=t.components)===null||s===void 0?void 0:s[o])===null||a===void 0?void 0:a.styleOverrides)||void 0}catch{}const c=I.useMemo(()=>{if(l===void 0)return;const u={};for(const d in l){const f=l[d];f instanceof Object&&(u[d]=r(typeof f=="function"?f(Object.assign({theme:t,ownerState:n==null?void 0:n.ownerState},n==null?void 0:n.props)):f))}return u},[l,eg(n==null?void 0:n.props),eg(n==null?void 0:n.ownerState),r]);return e=I.useMemo(()=>F4(e,c,i),[e,c,i]),{classes:e}};let eLe=0;function j4(e){const{useTheme:t,cache:n}=e,{useCache:r}=FQ({cacheProvidedAtInception:n}),{useCssAndCx:i}=BQ({useCache:r});function o(a){const{name:l,uniqId:c=`${eLe++}`}=a??{},u=typeof l!="object"?l:Object.keys(l)[0];return function(d){const f=typeof d=="function"?d:()=>d;return function(p,g){const v=t();let{css:m,cx:y}=i();const b=r();let _=I.useMemo(()=>{const x={},w=typeof Proxy<"u"&&new Proxy({},{get:(A,T)=>(typeof T=="symbol"&&D4(!1),x[T]=`${b.key}-${c}${u!==void 0?`-${u}`:""}-${T}-ref`)}),S=f(v,p,w||{}),C=DQ(Qm(S).map(A=>{const T=S[A];return T.label||(T.label=`${u!==void 0?`${u}-`:""}${A}`),[A,`${m(T)}${B4(A,A in x)?` ${x[A]}`:""}`]}));return Qm(x).forEach(A=>{A in C||(C[A]=x[A])}),C},[b,m,y,v,eg(p)]);{const x=g==null?void 0:g.props.classes;_=I.useMemo(()=>F4(_,x,y),[_,eg(x),y])}{const x=z4({classes:_,css:m,cx:y,name:u??"makeStyle no name",idOfUseStyles:c,muiStyleOverridesParams:g,theme:v});x.classes!==void 0&&(_=x.classes),x.css!==void 0&&(m=x.css),x.cx!==void 0&&(y=x.cx)}return{classes:_,theme:v,css:m,cx:y}}}}function s(){const a=t(),{css:l,cx:c}=i();return{theme:a,css:l,cx:c}}return{makeStyles:o,useStyles:s}}const NQ=I.createContext(void 0);function tLe(e){const{children:t,value:n}=e;return $e.createElement(NQ.Provider,{value:n},t)}const{createUseCache:FQ}=(()=>{function e(){return I.useContext(NQ)}function t(n){const{cacheProvidedAtInception:r}=n;function i(){var o;const s=vpe(),a=e(),l=(o=r??a)!==null&&o!==void 0?o:s;if(l===null)throw new Error(["In order to get SSR working with tss-react you need to explicitly provide an Emotion cache.","MUI users be aware: This is not an error strictly related to tss-react, with or without tss-react,","MUI needs an Emotion cache to be provided for SSR to work.","Here is the MUI documentation related to SSR setup: https://mui.com/material-ui/guides/server-rendering/","TSS provides helper that makes the process of setting up SSR easier: https://docs.tss-react.dev/ssr"].join(`
`));return l}return{useCache:i}}return{createUseCache:t}})();function az(e){return e.charAt(0).toUpperCase()+e.slice(1)}var lz=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function zQ(e){const{useTheme:t,cache:n}=e,{makeStyles:r}=j4({useTheme:t,cache:n});function i(o,s,a){const l=typeof o=="string"?(()=>{const h=o,p=function(g){var{children:v}=g,m=lz(g,["children"]);return I.createElement(h,m,v)};return Object.defineProperty(p,"name",{value:az(h)}),p})():o,c=(()=>{{const{name:h}=a??{};if(h!==void 0)return typeof h!="object"?h:Object.keys(h)[0]}{const h=l.displayName;if(typeof h=="string"&&h!=="")return h}{const{name:h}=l;if(h)return h.replace(/\$/g,"usd")}})(),u=r(Object.assign(Object.assign({},a),{name:c}))(typeof s=="function"?(h,p,g)=>uz(s(h,p,g)):uz(s));function d(h){for(const p in h)if(p!=="root")return!0;return!1}const f=I.forwardRef(function(h,p){const{className:g,classes:v}=h,m=lz(h,["className","classes"]),{classes:y,cx:b}=u(h,{props:h}),_=b(y.root,g);return jQ.set(y,Object.assign(Object.assign({},y),{root:_})),$e.createElement(l,Object.assign({ref:p,className:d(y)?g:_},typeof o=="string"?{}:{classes:y},m))});return c!==void 0&&(f.displayName=`${az(c)}WithStyles`,Object.defineProperty(f,"name",{value:f.displayName})),f}return i.getClasses=nLe,{withStyles:i}}const jQ=new WeakMap,cz="getClasses should only be used in conjunction with withStyles";function nLe(e){const t=e.classes;if(t===void 0)throw new Error(cz);const n=jQ.get(t);if(n===void 0)throw new Error(cz);return n}function uz(e){const t={},n={};return Object.keys(e).forEach(r=>(r.startsWith("@media")?n:t)[r]=e[r]),Object.keys(n).forEach(r=>{const i=n[r];Object.keys(i).forEach(o=>{var s;return t[o]=Object.assign(Object.assign({},(s=t[o])!==null&&s!==void 0?s:{}),{[r]:i[o]})})}),t}const rLe=!(typeof document=="object"&&typeof(document==null?void 0:document.getElementById)=="function")&&!(typeof jest<"u")&&!(typeof mocha<"u")&&!(typeof __vitest_worker__<"u");var iLe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function U4(e){const{useContext:t,usePlugin:n,cache:r}=e,{useCache:i}=FQ({cacheProvidedAtInception:r}),{useCssAndCx:o}=BQ({useCache:i});return{tss:uS({useContext:t,useCache:i,useCssAndCx:o,usePlugin:n??(({classes:l,cx:c,css:u})=>({classes:l,cx:c,css:u})),name:void 0,doesUseNestedSelectors:!1})}}let oLe=0;const KT=[];function uS(e){const{useContext:t,useCache:n,useCssAndCx:r,usePlugin:i,name:o,doesUseNestedSelectors:s}=e;return{withParams:()=>uS(Object.assign({},e)),withName:a=>uS(Object.assign(Object.assign({},e),{name:typeof a!="object"?a:Object.keys(a)[0]})),withNestedSelectors:()=>uS(Object.assign(Object.assign({},e),{doesUseNestedSelectors:!0})),create:a=>{const l=`x${oLe++}`,c=typeof a=="function"?a:()=>a;return function(d){var f,h,p;const g=d??{},{classesOverrides:v}=g,m=iLe(g,["classesOverrides"]),y=t(),{css:b,cx:_}=r(),x=n();let w=I.useMemo(()=>{const C={},A=c(Object.assign(Object.assign(Object.assign({},d),y),s?{classes:typeof Proxy>"u"?{}:new Proxy({},{get:(O,R)=>{if(typeof R=="symbol"&&D4(!1),rLe){{let L=KT.find(D=>D.name===o&&D.idOfUseStyles===l);L===void 0&&(L={name:o,idOfUseStyles:l,nestedSelectorRuleNames:new Set},KT.push(L)),L.nestedSelectorRuleNames.add(R)}if(KT.find(L=>L.name===o&&L.idOfUseStyles!==l&&L.nestedSelectorRuleNames.has(R))!==void 0)throw new Error([`tss-react: Duplicate nested selector "${R}" detected in ${o===void 0?`useStyles named "${o}"`:"anonymous useStyles function"}.`,"In SSR setups, this may lead to CSS class name collisions, causing nested selectors to target elements outside of the intended scope.",'Solution: Ensure each useStyles using nested selectors has a unique name. Use tss.withName("UniqueName").withNestedSelectors<...>()... to set a name.'].join(`
`))}return C[R]=`${x.key}-${l}${o!==void 0?`-${o}`:""}-${R}-ref`}})}:{})),T=DQ(Qm(A).map(O=>{const R=A[O];return R.label||(R.label=`${o!==void 0?`${o}-`:""}${O}`),[O,`${b(R)}${B4(O,O in C)?` ${C[O]}`:""}`]}));return Qm(C).forEach(O=>{O in T||(T[O]=C[O])}),T},[x,b,_,eg(d),...Object.values(y)]);w=I.useMemo(()=>F4(w,v,_),[w,eg(v),_]);const S=i(Object.assign(Object.assign({classes:w,css:b,cx:_,idOfUseStyles:l,name:o},y),m));return Object.assign({classes:(f=S.classes)!==null&&f!==void 0?f:w,css:(h=S.css)!==null&&h!==void 0?h:b,cx:(p=S.cx)!==null&&p!==void 0?p:_},y)}}}}function sLe(e){const{styles:t}=e;return $e.createElement(GY,{styles:ma(t)})}function UQ(e){return Object.assign(Object.assign({},j4(e)),zQ(e))}const{tss:VQ}=U4({useContext:()=>({})}),aLe=VQ.create({}),lLe=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:sLe,TssCacheProvider:tLe,createMakeAndWithStyles:UQ,createMakeStyles:j4,createTss:U4,createWithStyles:zQ,keyframes:ls,tss:VQ,useStyles:aLe},Symbol.toStringTag,{value:"Module"})),{makeStyles:M1,withStyles:cLe}=UQ({useTheme:Dn}),{tss:HQ}=U4({useContext:function(){return{theme:Dn()}},usePlugin:z4}),uLe=HQ.create({}),dLe=Object.freeze(Object.defineProperty({__proto__:null,makeStyles:M1,tss:HQ,useMuiThemeStyleOverridesPlugin:z4,useStyles:uLe,withStyles:cLe},Symbol.toStringTag,{value:"Module"})),cd=Zi(dLe);var sP={},tg={};const Rc=Zi(Ufe);var tc={},GQ={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.nanoid=e.customAlphabet=e.customRandom=e.random=e.urlAlphabet=void 0,e.urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let t=o=>crypto.getRandomValues(new Uint8Array(o));e.random=t;let n=(o,s,a)=>{let l=(2<<Math.log(o.length-1)/Math.LN2)-1,c=-~(1.6*l*s/o.length);return(u=s)=>{let d="";for(;;){let f=a(c),h=c;for(;h--;)if(d+=o[f[h]&l]||"",d.length===u)return d}}};e.customRandom=n;let r=(o,s=21)=>(0,e.customRandom)(o,s,e.random);e.customAlphabet=r;let i=(o=21)=>crypto.getRandomValues(new Uint8Array(o)).reduce((s,a)=>(a&=63,a<36?s+=a.toString(36):a<62?s+=(a-26).toString(36).toUpperCase():a>62?s+="-":s+="_",s),"");e.nanoid=i})(GQ);(function(e){var t=we&&we.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.FileLocation=e.UriLocation=e.UriLocationRaw=e.BlobLocation=e.LocalPathLocation=e.Region=e.NoAssemblyRegion=e.PropTypes=e.ElementId=void 0;const n=Rc,r=t(XY),i=ld,o=GQ;e.ElementId=n.types.optional(n.types.identifier,()=>(0,o.nanoid)()),e.PropTypes={Region:r.default.shape({refName:r.default.string.isRequired,start:r.default.number.isRequired,end:r.default.number.isRequired}),ConfigSchema:i.PropTypes.objectOrObservableObject,Feature:r.default.shape({get:r.default.func.isRequired,id:r.default.func.isRequired})},e.NoAssemblyRegion=n.types.model("NoAssemblyRegion",{refName:n.types.string,start:n.types.number,end:n.types.number,reversed:n.types.optional(n.types.boolean,!1)}).actions(s=>({setRefName(a){s.refName=a}})),e.Region=n.types.compose("Region",e.NoAssemblyRegion,n.types.model({assemblyName:n.types.string})),e.LocalPathLocation=n.types.model("LocalPathLocation",{locationType:n.types.literal("LocalPathLocation"),localPath:n.types.string}),e.BlobLocation=n.types.model("BlobLocation",{locationType:n.types.literal("BlobLocation"),name:n.types.string,blobId:n.types.string}),e.UriLocationRaw=n.types.model("UriLocation",{locationType:n.types.literal("UriLocation"),uri:n.types.string,baseUri:n.types.maybe(n.types.string),internetAccountId:n.types.maybe(n.types.string),internetAccountPreAuthorization:n.types.maybe(n.types.model("InternetAccountPreAuthorization",{internetAccountType:n.types.string,authInfo:n.types.frozen()}))}),e.UriLocation=n.types.snapshotProcessor(e.UriLocationRaw,{postProcessor:s=>{const{baseUri:a,...l}=s;return a?s:l}}),e.FileLocation=n.types.snapshotProcessor(n.types.union(e.LocalPathLocation,e.UriLocation,e.BlobLocation),{preProcessor(s){if(!s)return;const{locationType:a,...l}=s;if(!a){const{uri:c,localPath:u,blob:d}=l;let f="";return c!==void 0?f="UriLocation":u!==void 0?f="LocalPathLocation":d!==void 0&&(f="BlobLocation"),{...l,locationType:f}}return s}})})(tc);var V4={},aP={},H4={},G4={exports:{}},WQ={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(WQ);var ir=WQ.exports,ZT={exports:{}},JT={exports:{}},qQ={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(qQ);var lP=qQ.exports,QT={exports:{}},dz;function fLe(){return dz||(dz=1,function(e){var t=lP.default;function n(r,i){if(t(r)!="object"||!r)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var s=o.call(r,i||"default");if(t(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(QT)),QT.exports}var fz;function YQ(){return fz||(fz=1,function(e){var t=lP.default,n=fLe();function r(i){var o=n(i,"string");return t(o)=="symbol"?o:String(o)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(JT)),JT.exports}var hz;function W4(){return hz||(hz=1,function(e){var t=YQ();function n(r,i,o){return i=t(i),i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(ZT)),ZT.exports}var e3={exports:{}},pz;function Zg(){return pz||(pz=1,function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(e3)),e3.exports}var t3={exports:{}},mz;function Jg(){return mz||(mz=1,function(e){var t=YQ();function n(i,o){for(var s=0;s<o.length;s++){var a=o[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,t(a.key),a)}}function r(i,o,s){return o&&n(i.prototype,o),s&&n(i,s),Object.defineProperty(i,"prototype",{writable:!1}),i}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(t3)),t3.exports}var Gs={},n3={exports:{}},r3={exports:{}},i3={exports:{}},gz;function XQ(){return gz||(gz=1,function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=n[i];return o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(i3)),i3.exports}var vz;function hLe(){return vz||(vz=1,function(e){var t=XQ();function n(r){if(Array.isArray(r))return t(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(r3)),r3.exports}var o3={exports:{}},yz;function pLe(){return yz||(yz=1,function(e){function t(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(o3)),o3.exports}var s3={exports:{}},bz;function KQ(){return bz||(bz=1,function(e){var t=XQ();function n(r,i){if(r){if(typeof r=="string")return t(r,i);var o=Object.prototype.toString.call(r).slice(8,-1);if(o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set")return Array.from(r);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(r,i)}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(s3)),s3.exports}var a3={exports:{}},xz;function mLe(){return xz||(xz=1,function(e){function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(a3)),a3.exports}var _z;function gLe(){return _z||(_z=1,function(e){var t=hLe(),n=pLe(),r=KQ(),i=mLe();function o(s){return t(s)||n(s)||r(s)||i()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(n3)),n3.exports}var wz;function vLe(){if(wz)return Gs;wz=1;var e=ir,t=e(gLe()),n={functions:"Jexl Function",transforms:"Transform"};return Gs.ArrayLiteral=function(r){return this.evalArray(r.value)},Gs.BinaryExpression=function(r){var i=this,o=this._grammar.elements[r.operator];if(o.evalOnDemand){var s=function(l){return{eval:function(){return i.eval(l)}}};return o.evalOnDemand(s(r.left),s(r.right))}return this.Promise.all([this.eval(r.left),this.eval(r.right)]).then(function(a){return o.eval(a[0],a[1])})},Gs.ConditionalExpression=function(r){var i=this;return this.eval(r.test).then(function(o){return o?r.consequent?i.eval(r.consequent):o:i.eval(r.alternate)})},Gs.FilterExpression=function(r){var i=this;return this.eval(r.subject).then(function(o){return r.relative?i._filterRelative(o,r.expr):i._filterStatic(o,r.expr)})},Gs.Identifier=function(r){return r.from?this.eval(r.from).then(function(i){if(i!=null)return Array.isArray(i)&&(i=i[0]),i[r.value]}):r.relative?this._relContext[r.value]:this._context[r.value]},Gs.Literal=function(r){return r.value},Gs.ObjectLiteral=function(r){return this.evalMap(r.value)},Gs.FunctionCall=function(r){var i=n[r.pool];if(!i)throw new Error("Corrupt AST: Pool '".concat(r.pool,"' not found"));var o=this._grammar[r.pool],s=o[r.name];if(!s)throw new Error("".concat(i," ").concat(r.name," is not defined."));return this.evalArray(r.args||[]).then(function(a){return s.apply(void 0,(0,t.default)(a))})},Gs.UnaryExpression=function(r){var i=this;return this.eval(r.right).then(function(o){return i._grammar.elements[r.operator].eval(o)})},Gs}var l3,Sz;function yLe(){if(Sz)return l3;Sz=1;var e=ir,t=e(Zg()),n=e(Jg()),r=vLe(),i=function(){function o(s,a,l){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Promise;(0,t.default)(this,o),this._grammar=s,this._context=a||{},this._relContext=l||this._context,this.Promise=c}return(0,n.default)(o,[{key:"eval",value:function(a){var l=this;return this.Promise.resolve().then(function(){return r[a.type].call(l,a)})}},{key:"evalArray",value:function(a){var l=this;return this.Promise.all(a.map(function(c){return l.eval(c)}))}},{key:"evalMap",value:function(a){var l=this,c=Object.keys(a),u={},d=c.map(function(f){return l.eval(a[f])});return this.Promise.all(d).then(function(f){return f.forEach(function(h,p){u[c[p]]=h}),u})}},{key:"_filterRelative",value:function(a,l){var c=this,u=[];return Array.isArray(a)||(a=a===void 0?[]:[a]),a.forEach(function(d){var f=new o(c._grammar,c._context,d,c.Promise);u.push(f.eval(l))}),this.Promise.all(u).then(function(d){var f=[];return d.forEach(function(h,p){h&&f.push(a[p])}),f})}},{key:"_filterStatic",value:function(a,l){return this.eval(l).then(function(c){return typeof c=="boolean"?c?a:void 0:a[c]})}}]),o}();return l3=i,l3}var c3,Cz;function bLe(){if(Cz)return c3;Cz=1;var e=ir,t=e(Zg()),n=e(Jg()),r=/^-?(?:(?:[0-9]*\.[0-9]+)|[0-9]+)$/,i=/^[a-zA-Zа-яА-Я_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$][a-zA-Zа-яА-Я0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$]*$/,o=/\\\\/,s=/^\s*$/,a=["'(?:(?:\\\\')|[^'])*'",'"(?:(?:\\\\")|[^"])*"',"\\s+","\\btrue\\b","\\bfalse\\b"],l=["[a-zA-Zа-яА-Я_À-ÖØ-öø-ÿ\\$][a-zA-Z0-9а-яА-Я_À-ÖØ-öø-ÿ\\$]*","(?:(?:[0-9]*\\.[0-9]+)|[0-9]+)"],c=["binaryOp","unaryOp","openParen","openBracket","question","colon"],u=function(){function d(f){(0,t.default)(this,d),this._grammar=f}return(0,n.default)(d,[{key:"getElements",value:function(h){var p=this._getSplitRegex();return h.split(p).filter(function(g){return g})}},{key:"getTokens",value:function(h){for(var p=[],g=!1,v=0;v<h.length;v++)this._isWhitespace(h[v])?p.length&&(p[p.length-1].raw+=h[v]):h[v]==="-"&&this._isNegative(p)?g=!0:(g&&(h[v]="-"+h[v],g=!1),p.push(this._createToken(h[v])));return g&&p.push(this._createToken("-")),p}},{key:"tokenize",value:function(h){var p=this.getElements(h);return this.getTokens(p)}},{key:"_createToken",value:function(h){var p={type:"literal",value:h,raw:h};if(h[0]==='"'||h[0]==="'")p.value=this._unquote(h);else if(h.match(r))p.value=parseFloat(h);else if(h==="true"||h==="false")p.value=h==="true";else if(this._grammar.elements[h])p.type=this._grammar.elements[h].type;else if(h.match(i))p.type="identifier";else throw new Error("Invalid expression token: ".concat(h));return p}},{key:"_escapeRegExp",value:function(h){return h=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),h.match(i)&&(h="\\b"+h+"\\b"),h}},{key:"_getSplitRegex",value:function(){var h=this;if(!this._splitRegex){var p=Object.keys(this._grammar.elements).sort(function(g,v){return v.length-g.length}).map(function(g){return h._escapeRegExp(g)},this);this._splitRegex=new RegExp("("+[a.join("|"),p.join("|"),l.join("|")].join("|")+")")}return this._splitRegex}},{key:"_isNegative",value:function(h){return h.length?c.some(function(p){return p===h[h.length-1].type}):!0}},{key:"_isWhitespace",value:function(h){return!!h.match(s)}},{key:"_unquote",value:function(h){var p=h[0],g=new RegExp("\\\\"+p,"g");return h.substr(1,h.length-2).replace(g,p).replace(o,"\\")}}]),d}();return c3=u,c3}var Nr={},Az;function ZQ(){return Az||(Az=1,Nr.argVal=function(e){e&&this._cursor.args.push(e)},Nr.arrayStart=function(){this._placeAtCursor({type:"ArrayLiteral",value:[]})},Nr.arrayVal=function(e){e&&this._cursor.value.push(e)},Nr.binaryOp=function(e){for(var t=this._grammar.elements[e.value].precedence||0,n=this._cursor._parent;n&&n.operator&&this._grammar.elements[n.operator].precedence>=t;)this._cursor=n,n=n._parent;var r={type:"BinaryExpression",operator:e.value,left:this._cursor};this._setParent(this._cursor,r),this._cursor=n,this._placeAtCursor(r)},Nr.dot=function(){this._nextIdentEncapsulate=this._cursor&&this._cursor.type!=="UnaryExpression"&&(this._cursor.type!=="BinaryExpression"||this._cursor.type==="BinaryExpression"&&this._cursor.right),this._nextIdentRelative=!this._cursor||this._cursor&&!this._nextIdentEncapsulate,this._nextIdentRelative&&(this._relative=!0)},Nr.filter=function(e){this._placeBeforeCursor({type:"FilterExpression",expr:e,relative:this._subParser.isRelative(),subject:this._cursor})},Nr.functionCall=function(){this._placeBeforeCursor({type:"FunctionCall",name:this._cursor.value,args:[],pool:"functions"})},Nr.identifier=function(e){var t={type:"Identifier",value:e.value};this._nextIdentEncapsulate?(t.from=this._cursor,this._placeBeforeCursor(t),this._nextIdentEncapsulate=!1):(this._nextIdentRelative&&(t.relative=!0,this._nextIdentRelative=!1),this._placeAtCursor(t))},Nr.literal=function(e){this._placeAtCursor({type:"Literal",value:e.value})},Nr.objKey=function(e){this._curObjKey=e.value},Nr.objStart=function(){this._placeAtCursor({type:"ObjectLiteral",value:{}})},Nr.objVal=function(e){this._cursor.value[this._curObjKey]=e},Nr.subExpression=function(e){this._placeAtCursor(e)},Nr.ternaryEnd=function(e){this._cursor.alternate=e},Nr.ternaryMid=function(e){this._cursor.consequent=e},Nr.ternaryStart=function(){this._tree={type:"ConditionalExpression",test:this._tree},this._cursor=this._tree},Nr.transform=function(e){this._placeBeforeCursor({type:"FunctionCall",name:e.value,args:[this._cursor],pool:"transforms"})},Nr.unaryOp=function(e){this._placeAtCursor({type:"UnaryExpression",operator:e.value})}),Nr}var u3={},Pz;function xLe(){if(Pz)return u3;Pz=1;var e=ZQ();return u3.states={expectOperand:{tokenTypes:{literal:{toState:"expectBinOp"},identifier:{toState:"identifier"},unaryOp:{},openParen:{toState:"subExpression"},openCurl:{toState:"expectObjKey",handler:e.objStart},dot:{toState:"traverse"},openBracket:{toState:"arrayVal",handler:e.arrayStart}}},expectBinOp:{tokenTypes:{binaryOp:{toState:"expectOperand"},pipe:{toState:"expectTransform"},dot:{toState:"traverse"},question:{toState:"ternaryMid",handler:e.ternaryStart}},completable:!0},expectTransform:{tokenTypes:{identifier:{toState:"postTransform",handler:e.transform}}},expectObjKey:{tokenTypes:{identifier:{toState:"expectKeyValSep",handler:e.objKey},closeCurl:{toState:"expectBinOp"}}},expectKeyValSep:{tokenTypes:{colon:{toState:"objVal"}}},postTransform:{tokenTypes:{openParen:{toState:"argVal"},binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},pipe:{toState:"expectTransform"}},completable:!0},postArgs:{tokenTypes:{binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},pipe:{toState:"expectTransform"}},completable:!0},identifier:{tokenTypes:{binaryOp:{toState:"expectOperand"},dot:{toState:"traverse"},openBracket:{toState:"filter"},openParen:{toState:"argVal",handler:e.functionCall},pipe:{toState:"expectTransform"},question:{toState:"ternaryMid",handler:e.ternaryStart}},completable:!0},traverse:{tokenTypes:{identifier:{toState:"identifier"}}},filter:{subHandler:e.filter,endStates:{closeBracket:"identifier"}},subExpression:{subHandler:e.subExpression,endStates:{closeParen:"expectBinOp"}},argVal:{subHandler:e.argVal,endStates:{comma:"argVal",closeParen:"postArgs"}},objVal:{subHandler:e.objVal,endStates:{comma:"expectObjKey",closeCurl:"expectBinOp"}},arrayVal:{subHandler:e.arrayVal,endStates:{comma:"arrayVal",closeBracket:"expectBinOp"}},ternaryMid:{subHandler:e.ternaryMid,endStates:{colon:"ternaryEnd"}},ternaryEnd:{subHandler:e.ternaryEnd,completable:!0}},u3}var d3,Mz;function _Le(){if(Mz)return d3;Mz=1;var e=ir,t=e(Zg()),n=e(Jg()),r=ZQ(),i=xLe().states,o=function(){function s(a,l,c){(0,t.default)(this,s),this._grammar=a,this._state="expectOperand",this._tree=null,this._exprStr=l||"",this._relative=!1,this._stopMap=c||{}}return(0,n.default)(s,[{key:"addToken",value:function(l){if(this._state==="complete")throw new Error("Cannot add a new token to a completed Parser");var c=i[this._state],u=this._exprStr;if(this._exprStr+=l.raw,c.subHandler){this._subParser||this._startSubExpression(u);var d=this._subParser.addToken(l);if(d){if(this._endSubExpression(),this._parentStop)return d;this._state=d}}else if(c.tokenTypes[l.type]){var f=c.tokenTypes[l.type],h=r[l.type];f.handler&&(h=f.handler),h&&h.call(this,l),f.toState&&(this._state=f.toState)}else{if(this._stopMap[l.type])return this._stopMap[l.type];throw new Error("Token ".concat(l.raw," (").concat(l.type,") unexpected in expression: ").concat(this._exprStr))}return!1}},{key:"addTokens",value:function(l){l.forEach(this.addToken,this)}},{key:"complete",value:function(){if(this._cursor&&!i[this._state].completable)throw new Error("Unexpected end of expression: ".concat(this._exprStr));return this._subParser&&this._endSubExpression(),this._state="complete",this._cursor?this._tree:null}},{key:"isRelative",value:function(){return this._relative}},{key:"_endSubExpression",value:function(){i[this._state].subHandler.call(this,this._subParser.complete()),this._subParser=null}},{key:"_placeAtCursor",value:function(l){this._cursor?(this._cursor.right=l,this._setParent(l,this._cursor)):this._tree=l,this._cursor=l}},{key:"_placeBeforeCursor",value:function(l){this._cursor=this._cursor._parent,this._placeAtCursor(l)}},{key:"_setParent",value:function(l,c){Object.defineProperty(l,"_parent",{value:c,writable:!0})}},{key:"_startSubExpression",value:function(l){var c=i[this._state].endStates;c||(this._parentStop=!0,c=this._stopMap),this._subParser=new s(this._grammar,l,c)}}]),s}();return d3=o,d3}var f3,Ez;function wLe(){if(Ez)return f3;Ez=1;var e=ir,t=e(Zg()),n=e(Jg()),r=function(){function i(o){(0,t.default)(this,i),o(this._resolve.bind(this),this._reject.bind(this))}return(0,n.default)(i,[{key:"catch",value:function(s){if(this.error)try{this._resolve(s(this.error))}catch(a){this._reject(a)}return this}},{key:"then",value:function(s,a){if(!this.error)try{this._resolve(s(this.value))}catch(l){this._reject(l)}return a&&this.catch(a),this}},{key:"_reject",value:function(s){this.value=void 0,this.error=s}},{key:"_resolve",value:function(s){s instanceof i?s.error?this._reject(s.error):this._resolve(s.value):(this.value=s,this.error=void 0)}}]),i}();return r.all=function(i){return new r(function(o){var s=i.map(function(a){for(;a instanceof r;){if(a.error)throw Error(a.error);a=a.value}return a});o(s)})},r.resolve=function(i){return new r(function(o){return o(i)})},r.reject=function(i){return new r(function(o,s){return s(i)})},f3=r,f3}var h3,Tz;function SLe(){if(Tz)return h3;Tz=1;var e=ir,t=e(Zg()),n=e(Jg()),r=yLe(),i=bLe(),o=_Le(),s=wLe(),a=function(){function l(c,u){(0,t.default)(this,l),this._grammar=c,this._exprStr=u,this._ast=null}return(0,n.default)(l,[{key:"compile",value:function(){var u=new i(this._grammar),d=new o(this._grammar),f=u.tokenize(this._exprStr);return d.addTokens(f),this._ast=d.complete(),this}},{key:"eval",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._eval(u,Promise)}},{key:"evalSync",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=this._eval(u,s);if(d.error)throw d.error;return d.value}},{key:"_eval",value:function(u,d){var f=this;return d.resolve().then(function(){var h=f._getAst(),p=new r(f._grammar,u,void 0,d);return p.eval(h)})}},{key:"_getAst",value:function(){return this._ast||this.compile(),this._ast}}]),l}();return h3=a,h3}var p3={},Oz;function CLe(){return Oz||(Oz=1,p3.getGrammar=function(){return{elements:{".":{type:"dot"},"[":{type:"openBracket"},"]":{type:"closeBracket"},"|":{type:"pipe"},"{":{type:"openCurl"},"}":{type:"closeCurl"},":":{type:"colon"},",":{type:"comma"},"(":{type:"openParen"},")":{type:"closeParen"},"?":{type:"question"},"+":{type:"binaryOp",precedence:30,eval:function(t,n){return t+n}},"-":{type:"binaryOp",precedence:30,eval:function(t,n){return t-n}},"*":{type:"binaryOp",precedence:40,eval:function(t,n){return t*n}},"/":{type:"binaryOp",precedence:40,eval:function(t,n){return t/n}},"//":{type:"binaryOp",precedence:40,eval:function(t,n){return Math.floor(t/n)}},"%":{type:"binaryOp",precedence:50,eval:function(t,n){return t%n}},"^":{type:"binaryOp",precedence:50,eval:function(t,n){return Math.pow(t,n)}},"==":{type:"binaryOp",precedence:20,eval:function(t,n){return t==n}},"!=":{type:"binaryOp",precedence:20,eval:function(t,n){return t!=n}},">":{type:"binaryOp",precedence:20,eval:function(t,n){return t>n}},">=":{type:"binaryOp",precedence:20,eval:function(t,n){return t>=n}},"<":{type:"binaryOp",precedence:20,eval:function(t,n){return t<n}},"<=":{type:"binaryOp",precedence:20,eval:function(t,n){return t<=n}},"&&":{type:"binaryOp",precedence:10,evalOnDemand:function(t,n){return t.eval().then(function(r){return r&&n.eval()})}},"||":{type:"binaryOp",precedence:10,evalOnDemand:function(t,n){return t.eval().then(function(r){return r||n.eval()})}},in:{type:"binaryOp",precedence:20,eval:function(t,n){return typeof n=="string"?n.indexOf(t)!==-1:Array.isArray(n)?n.some(function(r){return r===t}):!1}},"!":{type:"unaryOp",precedence:1/0,eval:function(t){return!t}}},functions:{},transforms:{}}}),p3}var q4=ir,ALe=q4(W4()),PLe=q4(Zg()),MLe=q4(Jg()),ELe=SLe(),TLe=CLe(),OLe=TLe.getGrammar,JQ=function(){function e(){(0,PLe.default)(this,e),this.expr=this.expr.bind(this),this._grammar=OLe()}return(0,MLe.default)(e,[{key:"addBinaryOp",value:function(n,r,i,o){this._addGrammarElement(n,(0,ALe.default)({type:"binaryOp",precedence:r},o?"evalOnDemand":"eval",i))}},{key:"addFunction",value:function(n,r){this._grammar.functions[n]=r}},{key:"addFunctions",value:function(n){for(var r in n)this._grammar.functions[r]=n[r]}},{key:"addUnaryOp",value:function(n,r){this._addGrammarElement(n,{type:"unaryOp",weight:1/0,eval:r})}},{key:"addTransform",value:function(n,r){this._grammar.transforms[n]=r}},{key:"addTransforms",value:function(n){for(var r in n)this._grammar.transforms[r]=n[r]}},{key:"compile",value:function(n){var r=this.createExpression(n);return r.compile()}},{key:"createExpression",value:function(n){return new ELe(this._grammar,n)}},{key:"getFunction",value:function(n){return this._grammar.functions[n]}},{key:"getTransform",value:function(n){return this._grammar.transforms[n]}},{key:"eval",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.createExpression(n);return i.eval(r)}},{key:"evalSync",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.createExpression(n);return i.evalSync(r)}},{key:"expr",value:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var s=n.reduce(function(a,l,c){var u=c<i.length?i[c]:"";return a+=l+u,a},"");return this.createExpression(s)}},{key:"removeOp",value:function(n){this._grammar.elements[n]&&(this._grammar.elements[n].type==="binaryOp"||this._grammar.elements[n].type==="unaryOp")&&delete this._grammar.elements[n]}},{key:"_addGrammarElement",value:function(n,r){this._grammar.elements[n]=r}}]),e}();G4.exports=new JQ;G4.exports.Jexl=JQ;var ILe=G4.exports,RLe=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(H4,"__esModule",{value:!0});const kLe=RLe(ILe);function LLe(){const e=new kLe.default.Jexl;return e.addFunction("get",(t,n)=>t.get(n)),e.addFunction("parent",t=>t.parent()),e.addFunction("id",t=>t.id()),e.addFunction("cast",t=>t),e.addFunction("log",t=>(console.log(t),t)),e.addFunction("max",Math.max),e.addFunction("min",Math.min),e.addFunction("sqrt",Math.sqrt),e.addFunction("ceil",Math.ceil),e.addFunction("floor",Math.floor),e.addFunction("round",Math.round),e.addFunction("abs",Math.abs),e.addFunction("log10",Math.log10),e.addFunction("parseInt",Number.parseInt),e.addFunction("parseFloat",Number.parseFloat),e.addFunction("split",(t,n)=>t.split(n)),e.addFunction("charAt",(t,n)=>t.charAt(n)),e.addFunction("charCodeAt",(t,n)=>t.charCodeAt(n)),e.addFunction("codePointAt",(t,n)=>t.codePointAt(n)),e.addFunction("startsWith",(t,n,r)=>t.startsWith(n,r)),e.addFunction("endsWith",(t,n,r)=>t.endsWith(n,r)),e.addFunction("padEnd",(t,n,r)=>t.padEnd(n,r)),e.addFunction("padStart",(t,n,r)=>t.padStart(n,r)),e.addFunction("repeat",(t,n)=>t.repeat(n)),e.addFunction("replace",(t,n,r)=>t.replace(n,r)),e.addFunction("replaceAll",(t,n,r)=>t.replaceAll(n,r)),e.addFunction("slice",(t,n,r)=>t.slice(n,r)),e.addFunction("startsWith",(t,n,r)=>t.startsWith(n,r)),e.addFunction("substring",(t,n,r)=>t.substring(n,r)),e.addFunction("toLowerCase",t=>t.toLowerCase()),e.addFunction("toUpperCase",t=>t.toUpperCase()),e.addFunction("trim",t=>t.trim()),e.addFunction("trimEnd",t=>t.trimEnd()),e.addFunction("trimStart",t=>t.trimStart()),e.addFunction("getTag",(t,n)=>{const r=t.get("tags");return r?r[n]:t.get(n)}),e.addBinaryOp("&",15,(t,n)=>t&n),e}H4.default=LLe;var $Le=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(aP,"__esModule",{value:!0});aP.stringToJexlExpression=void 0;const DLe=$Le(H4),m3={};function BLe(e,t){const n=`nosig|${e}`;if(!m3[n]){if(!e.startsWith("jexl:"))throw new Error("string does not appear to be in jexl format");const i=e.split("jexl:")[1],o=t?t.compile(`${i}`):(0,DLe.default)().compile(`${i}`);m3[n]=o}return m3[n]}aP.stringToJexlExpression=BLe;var _l={},NLe=function(t){return typeof t=="object"&&t!==null};const QQ=Zi(Rce);var Pf={},eee={};Object.defineProperty(eee,"__esModule",{value:!0});(function(e){var t=we&&we.__createBinding||(Object.create?function(R,L,D,$){$===void 0&&($=D);var z=Object.getOwnPropertyDescriptor(L,D);(!z||("get"in z?!L.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return L[D]}}),Object.defineProperty(R,$,z)}:function(R,L,D,$){$===void 0&&($=D),R[$]=L[D]}),n=we&&we.__exportStar||function(R,L){for(var D in R)D!=="default"&&!Object.prototype.hasOwnProperty.call(L,D)&&t(L,R,D)};Object.defineProperty(e,"__esModule",{value:!0}),e.isRetryException=e.isAuthNeededException=e.RetryError=e.AuthNeededError=e.isBlobLocation=e.isLocalPathLocation=e.isUriLocation=e.isAbstractMenuManager=e.isRootModelWithInternetAccounts=e.isAppRootModel=e.isTrackViewModel=e.isDisplayModel=e.isTrackModel=e.isViewModel=e.isSelectionContainer=e.isSessionWithSessionPlugins=e.isSessionModelWithConnectionEditing=e.isSessionModelWithConnections=e.isSessionModelWithWidgets=e.isSessionWithShareURL=e.isSessionWithAddTracks=e.isSessionModelWithConfigEditing=e.isSessionModel=e.isViewContainer=void 0;const r=Rc;n(eee,e);function i(R){return(0,r.isStateTreeNode)(R)&&"removeView"in R&&"addView"in R&&"views"in R}e.isViewContainer=i;function o(R){return typeof R=="object"&&R!==null&&"rpcManager"in R&&"configuration"in R}e.isSessionModel=o;function s(R){return o(R)&&"editConfiguration"in R}e.isSessionModelWithConfigEditing=s;function a(R){return o(R)&&"addTrackConf"in R&&!R.disableAddTracks}e.isSessionWithAddTracks=a;function l(R){return o(R)&&"shareURL"in R&&!!R.shareURL}e.isSessionWithShareURL=l;function c(R){return o(R)&&"widgets"in R}e.isSessionModelWithWidgets=c;function u(R){return o(R)&&"makeConnection"in R}e.isSessionModelWithConnections=u;function d(R){return o(R)&&"addConnectionConf"in R}e.isSessionModelWithConnectionEditing=d;function f(R){return o(R)&&"sessionPlugins"in R}e.isSessionWithSessionPlugins=f;function h(R){return typeof R=="object"&&R!==null&&"selection"in R&&"setSelection"in R}e.isSelectionContainer=h;function p(R){return typeof R=="object"&&R!==null&&"width"in R&&"setWidth"in R}e.isViewModel=p;function g(R){return typeof R=="object"&&R!==null&&"configuration"in R&&R.configuration.trackId}e.isTrackModel=g;function v(R){return typeof R=="object"&&R!==null&&"configuration"in R&&R.configuration.displayId}e.isDisplayModel=v;function m(R){return typeof R=="object"&&R!==null&&"showTrack"in R&&"hideTrack"in R}e.isTrackViewModel=m;function y(R){return typeof R=="object"&&R!==null&&"isAssemblyEditing"in R&&"findAppropriateInternetAccount"in R}e.isAppRootModel=y;function b(R){return typeof R=="object"&&R!==null&&"internetAccounts"in R&&"findAppropriateInternetAccount"in R}e.isRootModelWithInternetAccounts=b;function _(R){return typeof R=="object"&&R!==null&&"appendMenu"in R&&"appendToSubMenu"in R}e.isAbstractMenuManager=_;function x(R){return typeof R=="object"&&R!==null&&"uri"in R&&!!R.uri}e.isUriLocation=x;function w(R){return typeof R=="object"&&R!==null&&"localPath"in R&&!!R.localPath}e.isLocalPathLocation=w;function S(R){return typeof R=="object"&&R!==null&&"blobId"in R&&!!R.blobId}e.isBlobLocation=S;class C extends Error{constructor(L,D){super(L),this.message=L,this.url=D,this.name="AuthNeededError",Object.setPrototypeOf(this,C.prototype)}}e.AuthNeededError=C;class A extends Error{constructor(L,D){super(L),this.message=L,this.internetAccountId=D,this.name="RetryError"}}e.RetryError=A;function T(R){return R instanceof Error&&(R.name==="AuthNeededError"||R.url!==void 0)}e.isAuthNeededException=T;function O(R){return R.name==="RetryError"||R.internetAccountId!==void 0}e.isRetryException=O})(Pf);var ho={},tee={},Mn={},Qg={},An={};Object.defineProperty(An,"__esModule",{value:!0});An.isFunction=void 0;function FLe(e){return typeof e=="function"}An.isFunction=FLe;var ni={},E1={},wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.createErrorClass=void 0;function zLe(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}wl.createErrorClass=zLe;Object.defineProperty(E1,"__esModule",{value:!0});E1.UnsubscriptionError=void 0;var jLe=wl;E1.UnsubscriptionError=jLe.createErrorClass(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});Ca.arrRemove=void 0;function ULe(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}Ca.arrRemove=ULe;var Iz=we&&we.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Rz=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},kz=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(ni,"__esModule",{value:!0});ni.isSubscription=ni.EMPTY_SUBSCRIPTION=ni.Subscription=void 0;var uy=An,g3=E1,Lz=Ca,Y4=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Iz(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(g){t={error:g}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var u=this.initialTeardown;if(uy.isFunction(u))try{u()}catch(g){o=g instanceof g3.UnsubscriptionError?g.errors:[g]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=Iz(d),h=f.next();!h.done;h=f.next()){var p=h.value;try{$z(p)}catch(g){o=o??[],g instanceof g3.UnsubscriptionError?o=kz(kz([],Rz(o)),Rz(g.errors)):o.push(g)}}}catch(g){r={error:g}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(o)throw new g3.UnsubscriptionError(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)$z(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Lz.arrRemove(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Lz.arrRemove(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}();ni.Subscription=Y4;ni.EMPTY_SUBSCRIPTION=Y4.EMPTY;function VLe(e){return e instanceof Y4||e&&"closed"in e&&uy.isFunction(e.remove)&&uy.isFunction(e.add)&&uy.isFunction(e.unsubscribe)}ni.isSubscription=VLe;function $z(e){uy.isFunction(e)?e():e.unsubscribe()}var ud={};Object.defineProperty(ud,"__esModule",{value:!0});ud.config=void 0;ud.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var T1={},X4={};(function(e){var t=we&&we.__read||function(r,i){var o=typeof Symbol=="function"&&r[Symbol.iterator];if(!o)return r;var s=o.call(r),a,l=[],c;try{for(;(i===void 0||i-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(u){c={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(c)throw c.error}}return l},n=we&&we.__spreadArray||function(r,i){for(var o=0,s=i.length,a=r.length;o<s;o++,a++)r[a]=i[o];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(r,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a=e.timeoutProvider.delegate;return a!=null&&a.setTimeout?a.setTimeout.apply(a,n([r,i],t(o))):setTimeout.apply(void 0,n([r,i],t(o)))},clearTimeout:function(r){var i=e.timeoutProvider.delegate;return((i==null?void 0:i.clearTimeout)||clearTimeout)(r)},delegate:void 0}})(X4);Object.defineProperty(T1,"__esModule",{value:!0});T1.reportUnhandledError=void 0;var HLe=ud,GLe=X4;function WLe(e){GLe.timeoutProvider.setTimeout(function(){var t=HLe.config.onUnhandledError;if(t)t(e);else throw e})}T1.reportUnhandledError=WLe;var oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.noop=void 0;function qLe(){}oi.noop=qLe;var Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.createNotification=Za.nextNotification=Za.errorNotification=Za.COMPLETE_NOTIFICATION=void 0;Za.COMPLETE_NOTIFICATION=function(){return cP("C",void 0,void 0)}();function YLe(e){return cP("E",void 0,e)}Za.errorNotification=YLe;function XLe(e){return cP("N",e,void 0)}Za.nextNotification=XLe;function cP(e,t,n){return{kind:e,value:t,error:n}}Za.createNotification=cP;var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.captureError=Uu.errorContext=void 0;var nee=ud,yf=null;function KLe(e){if(nee.config.useDeprecatedSynchronousErrorHandling){var t=!yf;if(t&&(yf={errorThrown:!1,error:null}),e(),t){var n=yf,r=n.errorThrown,i=n.error;if(yf=null,r)throw i}}else e()}Uu.errorContext=KLe;function ZLe(e){nee.config.useDeprecatedSynchronousErrorHandling&&yf&&(yf.errorThrown=!0,yf.error=e)}Uu.captureError=ZLe;(function(e){var t=we&&we.__extends||function(){var y=function(b,_){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(x[S]=w[S])},y(b,_)};return function(b,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");y(b,_);function x(){this.constructor=b}b.prototype=_===null?Object.create(_):(x.prototype=_.prototype,new x)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var n=An,r=ni,i=ud,o=T1,s=oi,a=Za,l=X4,c=Uu,u=function(y){t(b,y);function b(_){var x=y.call(this)||this;return x.isStopped=!1,_?(x.destination=_,r.isSubscription(_)&&_.add(x)):x.destination=e.EMPTY_OBSERVER,x}return b.create=function(_,x,w){return new p(_,x,w)},b.prototype.next=function(_){this.isStopped?m(a.nextNotification(_),this):this._next(_)},b.prototype.error=function(_){this.isStopped?m(a.errorNotification(_),this):(this.isStopped=!0,this._error(_))},b.prototype.complete=function(){this.isStopped?m(a.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},b.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,y.prototype.unsubscribe.call(this),this.destination=null)},b.prototype._next=function(_){this.destination.next(_)},b.prototype._error=function(_){try{this.destination.error(_)}finally{this.unsubscribe()}},b.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},b}(r.Subscription);e.Subscriber=u;var d=Function.prototype.bind;function f(y,b){return d.call(y,b)}var h=function(){function y(b){this.partialObserver=b}return y.prototype.next=function(b){var _=this.partialObserver;if(_.next)try{_.next(b)}catch(x){g(x)}},y.prototype.error=function(b){var _=this.partialObserver;if(_.error)try{_.error(b)}catch(x){g(x)}else g(b)},y.prototype.complete=function(){var b=this.partialObserver;if(b.complete)try{b.complete()}catch(_){g(_)}},y}(),p=function(y){t(b,y);function b(_,x,w){var S=y.call(this)||this,C;if(n.isFunction(_)||!_)C={next:_??void 0,error:x??void 0,complete:w??void 0};else{var A;S&&i.config.useDeprecatedNextContext?(A=Object.create(_),A.unsubscribe=function(){return S.unsubscribe()},C={next:_.next&&f(_.next,A),error:_.error&&f(_.error,A),complete:_.complete&&f(_.complete,A)}):C=_}return S.destination=new h(C),S}return b}(u);e.SafeSubscriber=p;function g(y){i.config.useDeprecatedSynchronousErrorHandling?c.captureError(y):o.reportUnhandledError(y)}function v(y){throw y}function m(y,b){var _=i.config.onStoppedNotification;_&&l.timeoutProvider.setTimeout(function(){return _(y,b)})}e.EMPTY_OBSERVER={closed:!0,next:s.noop,error:v,complete:s.noop}})(Qg);var Ch={};Object.defineProperty(Ch,"__esModule",{value:!0});Ch.observable=void 0;Ch.observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();var gc={},si={};Object.defineProperty(si,"__esModule",{value:!0});si.identity=void 0;function JLe(e){return e}si.identity=JLe;Object.defineProperty(gc,"__esModule",{value:!0});gc.pipeFromArray=gc.pipe=void 0;var QLe=si;function e$e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ree(e)}gc.pipe=e$e;function ree(e){return e.length===0?QLe.identity:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}gc.pipeFromArray=ree;Object.defineProperty(Mn,"__esModule",{value:!0});Mn.Observable=void 0;var bk=Qg,t$e=ni,n$e=Ch,r$e=gc,i$e=ud,v3=An,o$e=Uu,s$e=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=l$e(t)?t:new bk.SafeSubscriber(t,n,r);return o$e.errorContext(function(){var s=i,a=s.operator,l=s.source;o.add(a?a.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=Dz(n),new n(function(i,o){var s=new bk.SafeSubscriber({next:function(a){try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[n$e.observable]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r$e.pipeFromArray(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=Dz(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();Mn.Observable=s$e;function Dz(e){var t;return(t=e??i$e.config.Promise)!==null&&t!==void 0?t:Promise}function a$e(e){return e&&v3.isFunction(e.next)&&v3.isFunction(e.error)&&v3.isFunction(e.complete)}function l$e(e){return e&&e instanceof bk.Subscriber||a$e(e)&&t$e.isSubscription(e)}var Ah={},O1={},bt={};Object.defineProperty(bt,"__esModule",{value:!0});bt.operate=bt.hasLift=void 0;var c$e=An;function iee(e){return c$e.isFunction(e==null?void 0:e.lift)}bt.hasLift=iee;function u$e(e){return function(t){if(iee(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}bt.operate=u$e;var Tt={},d$e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Tt,"__esModule",{value:!0});Tt.OperatorSubscriber=Tt.createOperatorSubscriber=void 0;var f$e=Qg;function h$e(e,t,n,r,i){return new oee(e,t,n,r,i)}Tt.createOperatorSubscriber=h$e;var oee=function(e){d$e(t,e);function t(n,r,i,o,s,a){var l=e.call(this,n)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(u){n.error(u)}}:e.prototype._next,l._error=o?function(c){try{o(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(f$e.Subscriber);Tt.OperatorSubscriber=oee;Object.defineProperty(O1,"__esModule",{value:!0});O1.refCount=void 0;var p$e=bt,m$e=Tt;function g$e(){return p$e.operate(function(e,t){var n=null;e._refCount++;var r=m$e.createOperatorSubscriber(t,void 0,void 0,void 0,function(){if(!e||e._refCount<=0||0<--e._refCount){n=null;return}var i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}O1.refCount=g$e;var v$e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(Ah,"__esModule",{value:!0});Ah.ConnectableObservable=void 0;var y$e=Mn,Bz=ni,b$e=O1,x$e=Tt,_$e=bt,w$e=function(e){v$e(t,e);function t(n,r){var i=e.call(this)||this;return i.source=n,i.subjectFactory=r,i._subject=null,i._refCount=0,i._connection=null,_$e.hasLift(n)&&(i.lift=n.lift),i}return t.prototype._subscribe=function(n){return this.getSubject().subscribe(n)},t.prototype.getSubject=function(){var n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var n=this._connection;this._subject=this._connection=null,n==null||n.unsubscribe()},t.prototype.connect=function(){var n=this,r=this._connection;if(!r){r=this._connection=new Bz.Subscription;var i=this.getSubject();r.add(this.source.subscribe(x$e.createOperatorSubscriber(i,void 0,function(){n._teardown(),i.complete()},function(o){n._teardown(),i.error(o)},function(){return n._teardown()}))),r.closed&&(this._connection=null,r=Bz.Subscription.EMPTY)}return r},t.prototype.refCount=function(){return b$e.refCount()(this)},t}(y$e.Observable);Ah.ConnectableObservable=w$e;var uP={},see={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}})(see);var K4={};(function(e){var t=we&&we.__read||function(i,o){var s=typeof Symbol=="function"&&i[Symbol.iterator];if(!s)return i;var a=s.call(i),l,c=[],u;try{for(;(o===void 0||o-- >0)&&!(l=a.next()).done;)c.push(l.value)}catch(d){u={error:d}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(u)throw u.error}}return c},n=we&&we.__spreadArray||function(i,o){for(var s=0,a=o.length,l=i.length;s<a;s++,l++)i[l]=o[s];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var r=ni;e.animationFrameProvider={schedule:function(i){var o=requestAnimationFrame,s=cancelAnimationFrame,a=e.animationFrameProvider.delegate;a&&(o=a.requestAnimationFrame,s=a.cancelAnimationFrame);var l=o(function(c){s=void 0,i(c)});return new r.Subscription(function(){return s==null?void 0:s(l)})},requestAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=e.animationFrameProvider.delegate;return((s==null?void 0:s.requestAnimationFrame)||requestAnimationFrame).apply(void 0,n([],t(i)))},cancelAnimationFrame:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=e.animationFrameProvider.delegate;return((s==null?void 0:s.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,n([],t(i)))},delegate:void 0}})(K4);Object.defineProperty(uP,"__esModule",{value:!0});uP.animationFrames=void 0;var S$e=Mn,C$e=see,Nz=K4;function A$e(e){return e?aee(e):P$e}uP.animationFrames=A$e;function aee(e){return new S$e.Observable(function(t){var n=e||C$e.performanceTimestampProvider,r=n.now(),i=0,o=function(){t.closed||(i=Nz.animationFrameProvider.requestAnimationFrame(function(s){i=0;var a=n.now();t.next({timestamp:e?a:s,elapsed:a-r}),o()}))};return o(),function(){i&&Nz.animationFrameProvider.cancelAnimationFrame(i)}})}var P$e=aee(),Lr={},I1={};Object.defineProperty(I1,"__esModule",{value:!0});I1.ObjectUnsubscribedError=void 0;var M$e=wl;I1.ObjectUnsubscribedError=M$e.createErrorClass(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}});var lee=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),E$e=we&&we.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.AnonymousSubject=Lr.Subject=void 0;var Fz=Mn,xk=ni,T$e=I1,O$e=Ca,y3=Uu,cee=function(e){lee(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new _k(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new T$e.ObjectUnsubscribedError},t.prototype.next=function(n){var r=this;y3.errorContext(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=E$e(r.currentObservers),a=s.next();!a.done;a=s.next()){var l=a.value;l.next(n)}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;y3.errorContext(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;y3.errorContext(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?xk.EMPTY_SUBSCRIPTION:(this.currentObservers=null,a.push(n),new xk.Subscription(function(){r.currentObservers=null,O$e.arrRemove(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new Fz.Observable;return n.source=this,n},t.create=function(n,r){return new _k(n,r)},t}(Fz.Observable);Lr.Subject=cee;var _k=function(e){lee(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:xk.EMPTY_SUBSCRIPTION},t}(cee);Lr.AnonymousSubject=_k;var R1={},I$e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(R1,"__esModule",{value:!0});R1.BehaviorSubject=void 0;var R$e=Lr,k$e=function(e){I$e(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(R$e.Subject);R1.BehaviorSubject=k$e;var ev={},dP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}})(dP);var L$e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(ev,"__esModule",{value:!0});ev.ReplaySubject=void 0;var $$e=Lr,D$e=dP,B$e=function(e){L$e(t,e);function t(n,r,i){n===void 0&&(n=1/0),r===void 0&&(r=1/0),i===void 0&&(i=D$e.dateTimestampProvider);var o=e.call(this)||this;return o._bufferSize=n,o._windowTime=r,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=r===1/0,o._bufferSize=Math.max(1,n),o._windowTime=Math.max(1,r),o}return t.prototype.next=function(n){var r=this,i=r.isStopped,o=r._buffer,s=r._infiniteTimeWindow,a=r._timestampProvider,l=r._windowTime;i||(o.push(n),!s&&o.push(a.now()+l)),this._trimBuffer(),e.prototype.next.call(this,n)},t.prototype._subscribe=function(n){this._throwIfClosed(),this._trimBuffer();for(var r=this._innerSubscribe(n),i=this,o=i._infiniteTimeWindow,s=i._buffer,a=s.slice(),l=0;l<a.length&&!n.closed;l+=o?1:2)n.next(a[l]);return this._checkFinalizedStatuses(n),r},t.prototype._trimBuffer=function(){var n=this,r=n._bufferSize,i=n._timestampProvider,o=n._buffer,s=n._infiniteTimeWindow,a=(s?1:2)*r;if(r<1/0&&a<o.length&&o.splice(0,o.length-a),!s){for(var l=i.now(),c=0,u=1;u<o.length&&o[u]<=l;u+=2)c=u;c&&o.splice(0,c+1)}},t}($$e.Subject);ev.ReplaySubject=B$e;var tv={},N$e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(tv,"__esModule",{value:!0});tv.AsyncSubject=void 0;var F$e=Lr,z$e=function(e){N$e(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._value=null,n._hasValue=!1,n._isComplete=!1,n}return t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r._hasValue,s=r._value,a=r.thrownError,l=r.isStopped,c=r._isComplete;i?n.error(a):(l||c)&&(o&&n.next(s),n.complete())},t.prototype.next=function(n){this.isStopped||(this._value=n,this._hasValue=!0)},t.prototype.complete=function(){var n=this,r=n._hasValue,i=n._value,o=n._isComplete;o||(this._isComplete=!0,r&&e.prototype.next.call(this,i),e.prototype.complete.call(this))},t}(F$e.Subject);tv.AsyncSubject=z$e;var uee={},fP={},dd={},hP={},j$e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(hP,"__esModule",{value:!0});hP.Action=void 0;var U$e=ni,V$e=function(e){j$e(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(U$e.Subscription);hP.Action=V$e;var dee={};(function(e){var t=we&&we.__read||function(r,i){var o=typeof Symbol=="function"&&r[Symbol.iterator];if(!o)return r;var s=o.call(r),a,l=[],c;try{for(;(i===void 0||i-- >0)&&!(a=s.next()).done;)l.push(a.value)}catch(u){c={error:u}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(c)throw c.error}}return l},n=we&&we.__spreadArray||function(r,i){for(var o=0,s=i.length,a=r.length;o<s;o++,a++)r[a]=i[o];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(r,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a=e.intervalProvider.delegate;return a!=null&&a.setInterval?a.setInterval.apply(a,n([r,i],t(o))):setInterval.apply(void 0,n([r,i],t(o)))},clearInterval:function(r){var i=e.intervalProvider.delegate;return((i==null?void 0:i.clearInterval)||clearInterval)(r)},delegate:void 0}})(dee);var H$e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(dd,"__esModule",{value:!0});dd.AsyncAction=void 0;var G$e=hP,zz=dee,W$e=Ca,q$e=function(e){H$e(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),zz.intervalProvider.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&zz.intervalProvider.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,W$e.arrRemove(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(G$e.Action);dd.AsyncAction=q$e;var fee={},ng={};Object.defineProperty(ng,"__esModule",{value:!0});ng.TestTools=ng.Immediate=void 0;var Y$e=1,b3,M2={};function jz(e){return e in M2?(delete M2[e],!0):!1}ng.Immediate={setImmediate:function(e){var t=Y$e++;return M2[t]=!0,b3||(b3=Promise.resolve()),b3.then(function(){return jz(t)&&e()}),t},clearImmediate:function(e){jz(e)}};ng.TestTools={pending:function(){return Object.keys(M2).length}};(function(e){var t=we&&we.__read||function(s,a){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c=l.call(s),u,d=[],f;try{for(;(a===void 0||a-- >0)&&!(u=c.next()).done;)d.push(u.value)}catch(h){f={error:h}}finally{try{u&&!u.done&&(l=c.return)&&l.call(c)}finally{if(f)throw f.error}}return d},n=we&&we.__spreadArray||function(s,a){for(var l=0,c=a.length,u=s.length;l<c;l++,u++)s[u]=a[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var r=ng,i=r.Immediate.setImmediate,o=r.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var l=e.immediateProvider.delegate;return((l==null?void 0:l.setImmediate)||i).apply(void 0,n([],t(s)))},clearImmediate:function(s){var a=e.immediateProvider.delegate;return((a==null?void 0:a.clearImmediate)||o)(s)},delegate:void 0}})(fee);var X$e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(fP,"__esModule",{value:!0});fP.AsapAction=void 0;var K$e=dd,Uz=fee,Z$e=function(e){X$e(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n._scheduled||(n._scheduled=Uz.immediateProvider.setImmediate(n.flush.bind(n,void 0))))},t.prototype.recycleAsyncId=function(n,r,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,n,r,i);var s=n.actions;r!=null&&((o=s[s.length-1])===null||o===void 0?void 0:o.id)!==r&&(Uz.immediateProvider.clearImmediate(r),n._scheduled===r&&(n._scheduled=void 0))},t}(K$e.AsyncAction);fP.AsapAction=Z$e;var pP={},fd={},k1={};Object.defineProperty(k1,"__esModule",{value:!0});k1.Scheduler=void 0;var J$e=dP,Q$e=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=J$e.dateTimestampProvider.now,e}();k1.Scheduler=Q$e;var e5e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(fd,"__esModule",{value:!0});fd.AsyncScheduler=void 0;var Vz=k1,t5e=function(e){e5e(t,e);function t(n,r){r===void 0&&(r=Vz.Scheduler.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(Vz.Scheduler);fd.AsyncScheduler=t5e;var n5e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(pP,"__esModule",{value:!0});pP.AsapScheduler=void 0;var r5e=fd,i5e=function(e){n5e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(n){this._active=!0;var r=this._scheduled;this._scheduled=void 0;var i=this.actions,o;n=n||i.shift();do if(o=n.execute(n.state,n.delay))break;while((n=i[0])&&n.id===r&&i.shift());if(this._active=!1,o){for(;(n=i[0])&&n.id===r&&i.shift();)n.unsubscribe();throw o}},t}(r5e.AsyncScheduler);pP.AsapScheduler=i5e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var t=fP,n=pP;e.asapScheduler=new n.AsapScheduler(t.AsapAction),e.asap=e.asapScheduler})(uee);var ko={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var t=dd,n=fd;e.asyncScheduler=new n.AsyncScheduler(t.AsyncAction),e.async=e.asyncScheduler})(ko);var hee={},mP={},o5e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(mP,"__esModule",{value:!0});mP.QueueAction=void 0;var s5e=dd,a5e=function(e){o5e(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.schedule=function(n,r){return r===void 0&&(r=0),r>0?e.prototype.schedule.call(this,n,r):(this.delay=r,this.state=n,this.scheduler.flush(this),this)},t.prototype.execute=function(n,r){return r>0||this.closed?e.prototype.execute.call(this,n,r):this._execute(n,r)},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!=null&&i>0||i==null&&this.delay>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.flush(this),0)},t}(s5e.AsyncAction);mP.QueueAction=a5e;var gP={},l5e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(gP,"__esModule",{value:!0});gP.QueueScheduler=void 0;var c5e=fd,u5e=function(e){l5e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(c5e.AsyncScheduler);gP.QueueScheduler=u5e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var t=mP,n=gP;e.queueScheduler=new n.QueueScheduler(t.QueueAction),e.queue=e.queueScheduler})(hee);var pee={},vP={},d5e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(vP,"__esModule",{value:!0});vP.AnimationFrameAction=void 0;var f5e=dd,Hz=K4,h5e=function(e){d5e(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i}return t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),i!==null&&i>0?e.prototype.requestAsyncId.call(this,n,r,i):(n.actions.push(this),n._scheduled||(n._scheduled=Hz.animationFrameProvider.requestAnimationFrame(function(){return n.flush(void 0)})))},t.prototype.recycleAsyncId=function(n,r,i){var o;if(i===void 0&&(i=0),i!=null?i>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,n,r,i);var s=n.actions;r!=null&&((o=s[s.length-1])===null||o===void 0?void 0:o.id)!==r&&(Hz.animationFrameProvider.cancelAnimationFrame(r),n._scheduled=void 0)},t}(f5e.AsyncAction);vP.AnimationFrameAction=h5e;var yP={},p5e=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(yP,"__esModule",{value:!0});yP.AnimationFrameScheduler=void 0;var m5e=fd,g5e=function(e){p5e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.flush=function(n){this._active=!0;var r=this._scheduled;this._scheduled=void 0;var i=this.actions,o;n=n||i.shift();do if(o=n.execute(n.state,n.delay))break;while((n=i[0])&&n.id===r&&i.shift());if(this._active=!1,o){for(;(n=i[0])&&n.id===r&&i.shift();)n.unsubscribe();throw o}},t}(m5e.AsyncScheduler);yP.AnimationFrameScheduler=g5e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var t=vP,n=yP;e.animationFrameScheduler=new n.AnimationFrameScheduler(t.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler})(pee);var rg={},mee=we&&we.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(rg,"__esModule",{value:!0});rg.VirtualAction=rg.VirtualTimeScheduler=void 0;var v5e=dd,y5e=ni,b5e=fd,x5e=function(e){mee(t,e);function t(n,r){n===void 0&&(n=gee),r===void 0&&(r=1/0);var i=e.call(this,n,function(){return i.frame})||this;return i.maxFrames=r,i.frame=0,i.index=-1,i}return t.prototype.flush=function(){for(var n=this,r=n.actions,i=n.maxFrames,o,s;(s=r[0])&&s.delay<=i&&(r.shift(),this.frame=s.delay,!(o=s.execute(s.state,s.delay))););if(o){for(;s=r.shift();)s.unsubscribe();throw o}},t.frameTimeFactor=10,t}(b5e.AsyncScheduler);rg.VirtualTimeScheduler=x5e;var gee=function(e){mee(t,e);function t(n,r,i){i===void 0&&(i=n.index+=1);var o=e.call(this,n,r)||this;return o.scheduler=n,o.work=r,o.index=i,o.active=!0,o.index=n.index=i,o}return t.prototype.schedule=function(n,r){if(r===void 0&&(r=0),Number.isFinite(r)){if(!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)}else return y5e.Subscription.EMPTY},t.prototype.requestAsyncId=function(n,r,i){i===void 0&&(i=0),this.delay=n.frame+i;var o=n.actions;return o.push(this),o.sort(t.sortActions),1},t.prototype.recycleAsyncId=function(n,r,i){},t.prototype._execute=function(n,r){if(this.active===!0)return e.prototype._execute.call(this,n,r)},t.sortActions=function(n,r){return n.delay===r.delay?n.index===r.index?0:n.index>r.index?1:-1:n.delay>r.delay?1:-1},t}(v5e.AsyncAction);rg.VirtualAction=gee;var bP={},xa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var t=Mn;e.EMPTY=new t.Observable(function(i){return i.complete()});function n(i){return i?r(i):e.EMPTY}e.empty=n;function r(i){return new t.Observable(function(o){return i.schedule(function(){return o.complete()})})}})(xa);var nv={},qr={},Ph={};Object.defineProperty(Ph,"__esModule",{value:!0});Ph.isScheduler=void 0;var _5e=An;function w5e(e){return e&&_5e.isFunction(e.schedule)}Ph.isScheduler=w5e;Object.defineProperty(qr,"__esModule",{value:!0});qr.popNumber=qr.popScheduler=qr.popResultSelector=void 0;var S5e=An,C5e=Ph;function Z4(e){return e[e.length-1]}function A5e(e){return S5e.isFunction(Z4(e))?e.pop():void 0}qr.popResultSelector=A5e;function P5e(e){return C5e.isScheduler(Z4(e))?e.pop():void 0}qr.popScheduler=P5e;function M5e(e,t){return typeof Z4(e)=="number"?e.pop():t}qr.popNumber=M5e;var Aa={},L1={},xP={},$t={},rv={};Object.defineProperty(rv,"__esModule",{value:!0});rv.isArrayLike=void 0;rv.isArrayLike=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};var $1={};Object.defineProperty($1,"__esModule",{value:!0});$1.isPromise=void 0;var E5e=An;function T5e(e){return E5e.isFunction(e==null?void 0:e.then)}$1.isPromise=T5e;var D1={};Object.defineProperty(D1,"__esModule",{value:!0});D1.isInteropObservable=void 0;var O5e=Ch,I5e=An;function R5e(e){return I5e.isFunction(e[O5e.observable])}D1.isInteropObservable=R5e;var B1={};Object.defineProperty(B1,"__esModule",{value:!0});B1.isAsyncIterable=void 0;var k5e=An;function L5e(e){return Symbol.asyncIterator&&k5e.isFunction(e==null?void 0:e[Symbol.asyncIterator])}B1.isAsyncIterable=L5e;var N1={};Object.defineProperty(N1,"__esModule",{value:!0});N1.createInvalidObservableTypeError=void 0;function $5e(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}N1.createInvalidObservableTypeError=$5e;var F1={},Wf={};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.iterator=Wf.getSymbolIterator=void 0;function vee(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}Wf.getSymbolIterator=vee;Wf.iterator=vee();Object.defineProperty(F1,"__esModule",{value:!0});F1.isIterable=void 0;var D5e=Wf,B5e=An;function N5e(e){return B5e.isFunction(e==null?void 0:e[D5e.iterator])}F1.isIterable=N5e;var Vu={},F5e=we&&we.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},pm=we&&we.__await||function(e){return this instanceof pm?(this.v=e,this):new pm(e)},z5e=we&&we.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(f){r[f]&&(i[f]=function(h){return new Promise(function(p,g){o.push([f,h,p,g])>1||a(f,h)})})}function a(f,h){try{l(r[f](h))}catch(p){d(o[0][3],p)}}function l(f){f.value instanceof pm?Promise.resolve(f.value.v).then(c,u):d(o[0][2],f)}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),o.shift(),o.length&&a(o[0][0],o[0][1])}};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.isReadableStreamLike=Vu.readableStreamLikeToAsyncGenerator=void 0;var j5e=An;function U5e(e){return z5e(this,arguments,function(){var n,r,i,o;return F5e(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,pm(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,pm(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,pm(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}Vu.readableStreamLikeToAsyncGenerator=U5e;function V5e(e){return j5e.isFunction(e==null?void 0:e.getReader)}Vu.isReadableStreamLike=V5e;var H5e=we&&we.__awaiter||function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})},G5e=we&&we.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},W5e=we&&we.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof wk=="function"?wk(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,l){s=e[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}},wk=we&&we.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty($t,"__esModule",{value:!0});$t.fromReadableStreamLike=$t.fromAsyncIterable=$t.fromIterable=$t.fromPromise=$t.fromArrayLike=$t.fromInteropObservable=$t.innerFrom=void 0;var q5e=rv,Y5e=$1,iv=Mn,X5e=D1,K5e=B1,Z5e=N1,J5e=F1,yee=Vu,Q5e=An,e4e=T1,t4e=Ch;function n4e(e){if(e instanceof iv.Observable)return e;if(e!=null){if(X5e.isInteropObservable(e))return bee(e);if(q5e.isArrayLike(e))return xee(e);if(Y5e.isPromise(e))return _ee(e);if(K5e.isAsyncIterable(e))return J4(e);if(J5e.isIterable(e))return wee(e);if(yee.isReadableStreamLike(e))return See(e)}throw Z5e.createInvalidObservableTypeError(e)}$t.innerFrom=n4e;function bee(e){return new iv.Observable(function(t){var n=e[t4e.observable]();if(Q5e.isFunction(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}$t.fromInteropObservable=bee;function xee(e){return new iv.Observable(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}$t.fromArrayLike=xee;function _ee(e){return new iv.Observable(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,e4e.reportUnhandledError)})}$t.fromPromise=_ee;function wee(e){return new iv.Observable(function(t){var n,r;try{for(var i=wk(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}$t.fromIterable=wee;function J4(e){return new iv.Observable(function(t){r4e(e,t).catch(function(n){return t.error(n)})})}$t.fromAsyncIterable=J4;function See(e){return J4(yee.readableStreamLikeToAsyncGenerator(e))}$t.fromReadableStreamLike=See;function r4e(e,t){var n,r,i,o;return H5e(this,void 0,void 0,function(){var s,a;return G5e(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=W5e(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}var Mh={},Pa={};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.executeSchedule=void 0;function i4e(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}Pa.executeSchedule=i4e;Object.defineProperty(Mh,"__esModule",{value:!0});Mh.observeOn=void 0;var x3=Pa,o4e=bt,s4e=Tt;function a4e(e,t){return t===void 0&&(t=0),o4e.operate(function(n,r){n.subscribe(s4e.createOperatorSubscriber(r,function(i){return x3.executeSchedule(r,e,function(){return r.next(i)},t)},function(){return x3.executeSchedule(r,e,function(){return r.complete()},t)},function(i){return x3.executeSchedule(r,e,function(){return r.error(i)},t)}))})}Mh.observeOn=a4e;var Eh={};Object.defineProperty(Eh,"__esModule",{value:!0});Eh.subscribeOn=void 0;var l4e=bt;function c4e(e,t){return t===void 0&&(t=0),l4e.operate(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}Eh.subscribeOn=c4e;Object.defineProperty(xP,"__esModule",{value:!0});xP.scheduleObservable=void 0;var u4e=$t,d4e=Mh,f4e=Eh;function h4e(e,t){return u4e.innerFrom(e).pipe(f4e.subscribeOn(t),d4e.observeOn(t))}xP.scheduleObservable=h4e;var _P={};Object.defineProperty(_P,"__esModule",{value:!0});_P.schedulePromise=void 0;var p4e=$t,m4e=Mh,g4e=Eh;function v4e(e,t){return p4e.innerFrom(e).pipe(g4e.subscribeOn(t),m4e.observeOn(t))}_P.schedulePromise=v4e;var wP={};Object.defineProperty(wP,"__esModule",{value:!0});wP.scheduleArray=void 0;var y4e=Mn;function b4e(e,t){return new y4e.Observable(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}wP.scheduleArray=b4e;var z1={};Object.defineProperty(z1,"__esModule",{value:!0});z1.scheduleIterable=void 0;var x4e=Mn,_4e=Wf,w4e=An,Gz=Pa;function S4e(e,t){return new x4e.Observable(function(n){var r;return Gz.executeSchedule(n,t,function(){r=e[_4e.iterator](),Gz.executeSchedule(n,t,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return w4e.isFunction(r==null?void 0:r.return)&&r.return()}})}z1.scheduleIterable=S4e;var j1={};Object.defineProperty(j1,"__esModule",{value:!0});j1.scheduleAsyncIterable=void 0;var C4e=Mn,Wz=Pa;function A4e(e,t){if(!e)throw new Error("Iterable cannot be null");return new C4e.Observable(function(n){Wz.executeSchedule(n,t,function(){var r=e[Symbol.asyncIterator]();Wz.executeSchedule(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}j1.scheduleAsyncIterable=A4e;var SP={};Object.defineProperty(SP,"__esModule",{value:!0});SP.scheduleReadableStreamLike=void 0;var P4e=j1,M4e=Vu;function E4e(e,t){return P4e.scheduleAsyncIterable(M4e.readableStreamLikeToAsyncGenerator(e),t)}SP.scheduleReadableStreamLike=E4e;Object.defineProperty(L1,"__esModule",{value:!0});L1.scheduled=void 0;var T4e=xP,O4e=_P,I4e=wP,R4e=z1,k4e=j1,L4e=D1,$4e=$1,D4e=rv,B4e=F1,N4e=B1,F4e=N1,z4e=Vu,j4e=SP;function U4e(e,t){if(e!=null){if(L4e.isInteropObservable(e))return T4e.scheduleObservable(e,t);if(D4e.isArrayLike(e))return I4e.scheduleArray(e,t);if($4e.isPromise(e))return O4e.schedulePromise(e,t);if(N4e.isAsyncIterable(e))return k4e.scheduleAsyncIterable(e,t);if(B4e.isIterable(e))return R4e.scheduleIterable(e,t);if(z4e.isReadableStreamLike(e))return j4e.scheduleReadableStreamLike(e,t)}throw F4e.createInvalidObservableTypeError(e)}L1.scheduled=U4e;Object.defineProperty(Aa,"__esModule",{value:!0});Aa.from=void 0;var V4e=L1,H4e=$t;function G4e(e,t){return t?V4e.scheduled(e,t):H4e.innerFrom(e)}Aa.from=G4e;Object.defineProperty(nv,"__esModule",{value:!0});nv.of=void 0;var W4e=qr,q4e=Aa;function Y4e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=W4e.popScheduler(e);return q4e.from(e,n)}nv.of=Y4e;var U1={};Object.defineProperty(U1,"__esModule",{value:!0});U1.throwError=void 0;var X4e=Mn,K4e=An;function Z4e(e,t){var n=K4e.isFunction(e)?e:function(){return e},r=function(i){return i.error(n())};return new X4e.Observable(t?function(i){return t.schedule(r,0,i)}:r)}U1.throwError=Z4e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var t=xa,n=nv,r=U1,i=An;(function(a){a.NEXT="N",a.ERROR="E",a.COMPLETE="C"})(e.NotificationKind||(e.NotificationKind={}));var o=function(){function a(l,c,u){this.kind=l,this.value=c,this.error=u,this.hasValue=l==="N"}return a.prototype.observe=function(l){return s(this,l)},a.prototype.do=function(l,c,u){var d=this,f=d.kind,h=d.value,p=d.error;return f==="N"?l==null?void 0:l(h):f==="E"?c==null?void 0:c(p):u==null?void 0:u()},a.prototype.accept=function(l,c,u){var d;return i.isFunction((d=l)===null||d===void 0?void 0:d.next)?this.observe(l):this.do(l,c,u)},a.prototype.toObservable=function(){var l=this,c=l.kind,u=l.value,d=l.error,f=c==="N"?n.of(u):c==="E"?r.throwError(function(){return d}):c==="C"?t.EMPTY:0;if(!f)throw new TypeError("Unexpected notification kind "+c);return f},a.createNext=function(l){return new a("N",l)},a.createError=function(l){return new a("E",void 0,l)},a.createComplete=function(){return a.completeNotification},a.completeNotification=new a("C"),a}();e.Notification=o;function s(a,l){var c,u,d,f=a,h=f.kind,p=f.value,g=f.error;if(typeof h!="string")throw new TypeError('Invalid notification, missing "kind"');h==="N"?(c=l.next)===null||c===void 0||c.call(l,p):h==="E"?(u=l.error)===null||u===void 0||u.call(l,g):(d=l.complete)===null||d===void 0||d.call(l)}e.observeNotification=s})(bP);var CP={};Object.defineProperty(CP,"__esModule",{value:!0});CP.isObservable=void 0;var J4e=Mn,qz=An;function Q4e(e){return!!e&&(e instanceof J4e.Observable||qz.isFunction(e.lift)&&qz.isFunction(e.subscribe))}CP.isObservable=Q4e;var AP={},Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.EmptyError=void 0;var eDe=wl;Sl.EmptyError=eDe.createErrorClass(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});Object.defineProperty(AP,"__esModule",{value:!0});AP.lastValueFrom=void 0;var tDe=Sl;function nDe(e,t){var n=typeof t=="object";return new Promise(function(r,i){var o=!1,s;e.subscribe({next:function(a){s=a,o=!0},error:i,complete:function(){o?r(s):n?r(t.defaultValue):i(new tDe.EmptyError)}})})}AP.lastValueFrom=nDe;var PP={};Object.defineProperty(PP,"__esModule",{value:!0});PP.firstValueFrom=void 0;var rDe=Sl,iDe=Qg;function oDe(e,t){var n=typeof t=="object";return new Promise(function(r,i){var o=new iDe.SafeSubscriber({next:function(s){r(s),o.unsubscribe()},error:i,complete:function(){n?r(t.defaultValue):i(new rDe.EmptyError)}});e.subscribe(o)})}PP.firstValueFrom=oDe;var V1={};Object.defineProperty(V1,"__esModule",{value:!0});V1.ArgumentOutOfRangeError=void 0;var sDe=wl;V1.ArgumentOutOfRangeError=sDe.createErrorClass(function(e){return function(){e(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}});var H1={};Object.defineProperty(H1,"__esModule",{value:!0});H1.NotFoundError=void 0;var aDe=wl;H1.NotFoundError=aDe.createErrorClass(function(e){return function(n){e(this),this.name="NotFoundError",this.message=n}});var G1={};Object.defineProperty(G1,"__esModule",{value:!0});G1.SequenceError=void 0;var lDe=wl;G1.SequenceError=lDe.createErrorClass(function(e){return function(n){e(this),this.name="SequenceError",this.message=n}});var E2={},ov={};Object.defineProperty(ov,"__esModule",{value:!0});ov.isValidDate=void 0;function cDe(e){return e instanceof Date&&!isNaN(e)}ov.isValidDate=cDe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var t=ko,n=ov,r=bt,i=$t,o=wl,s=Tt,a=Pa;e.TimeoutError=o.createErrorClass(function(u){return function(f){f===void 0&&(f=null),u(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=f}});function l(u,d){var f=n.isValidDate(u)?{first:u}:typeof u=="number"?{each:u}:u,h=f.first,p=f.each,g=f.with,v=g===void 0?c:g,m=f.scheduler,y=m===void 0?d??t.asyncScheduler:m,b=f.meta,_=b===void 0?null:b;if(h==null&&p==null)throw new TypeError("No timeout provided.");return r.operate(function(x,w){var S,C,A=null,T=0,O=function(R){C=a.executeSchedule(w,y,function(){try{S.unsubscribe(),i.innerFrom(v({meta:_,lastValue:A,seen:T})).subscribe(w)}catch(L){w.error(L)}},R)};S=x.subscribe(s.createOperatorSubscriber(w,function(R){C==null||C.unsubscribe(),T++,w.next(A=R),p>0&&O(p)},void 0,void 0,function(){C!=null&&C.closed||C==null||C.unsubscribe(),A=null})),!T&&O(h!=null?typeof h=="number"?h:+h-y.now():p)})}e.timeout=l;function c(u){throw new e.TimeoutError(u)}})(E2);var MP={},W1={},Cl={},Al={};Object.defineProperty(Al,"__esModule",{value:!0});Al.map=void 0;var uDe=bt,dDe=Tt;function fDe(e,t){return uDe.operate(function(n,r){var i=0;n.subscribe(dDe.createOperatorSubscriber(r,function(o){r.next(e.call(t,o,i++))}))})}Al.map=fDe;var hDe=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},pDe=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.mapOneOrManyArgs=void 0;var mDe=Al,gDe=Array.isArray;function vDe(e,t){return gDe(t)?e.apply(void 0,pDe([],hDe(t))):e(t)}function yDe(e){return mDe.map(function(t){return vDe(e,t)})}Cl.mapOneOrManyArgs=yDe;var bDe=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Yz=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(W1,"__esModule",{value:!0});W1.bindCallbackInternals=void 0;var xDe=Ph,_De=Mn,wDe=Eh,SDe=Cl,CDe=Mh,ADe=tv;function Sk(e,t,n,r){if(n)if(xDe.isScheduler(n))r=n;else return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return Sk(e,t,r).apply(this,i).pipe(SDe.mapOneOrManyArgs(n))};return r?function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return Sk(e,t).apply(this,i).pipe(wDe.subscribeOn(r),CDe.observeOn(r))}:function(){for(var i=this,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=new ADe.AsyncSubject,l=!0;return new _De.Observable(function(c){var u=a.subscribe(c);if(l){l=!1;var d=!1,f=!1;t.apply(i,Yz(Yz([],bDe(o)),[function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];if(e){var g=h.shift();if(g!=null){a.error(g);return}}a.next(1<h.length?h:h[0]),f=!0,d&&a.complete()}])),f&&a.complete(),d=!0}return u})}}W1.bindCallbackInternals=Sk;Object.defineProperty(MP,"__esModule",{value:!0});MP.bindCallback=void 0;var PDe=W1;function MDe(e,t,n){return PDe.bindCallbackInternals(!1,e,t,n)}MP.bindCallback=MDe;var EP={};Object.defineProperty(EP,"__esModule",{value:!0});EP.bindNodeCallback=void 0;var EDe=W1;function TDe(e,t,n){return EDe.bindCallbackInternals(!0,e,t,n)}EP.bindNodeCallback=TDe;var Hu={},q1={};Object.defineProperty(q1,"__esModule",{value:!0});q1.argsArgArrayOrObject=void 0;var ODe=Array.isArray,IDe=Object.getPrototypeOf,RDe=Object.prototype,kDe=Object.keys;function LDe(e){if(e.length===1){var t=e[0];if(ODe(t))return{args:t,keys:null};if($De(t)){var n=kDe(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}q1.argsArgArrayOrObject=LDe;function $De(e){return e&&typeof e=="object"&&IDe(e)===RDe}var Y1={};Object.defineProperty(Y1,"__esModule",{value:!0});Y1.createObject=void 0;function DDe(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}Y1.createObject=DDe;Object.defineProperty(Hu,"__esModule",{value:!0});Hu.combineLatestInit=Hu.combineLatest=void 0;var BDe=Mn,NDe=q1,Cee=Aa,Aee=si,FDe=Cl,Xz=qr,zDe=Y1,jDe=Tt,UDe=Pa;function VDe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Xz.popScheduler(e),r=Xz.popResultSelector(e),i=NDe.argsArgArrayOrObject(e),o=i.args,s=i.keys;if(o.length===0)return Cee.from([],n);var a=new BDe.Observable(Pee(o,n,s?function(l){return zDe.createObject(s,l)}:Aee.identity));return r?a.pipe(FDe.mapOneOrManyArgs(r)):a}Hu.combineLatest=VDe;function Pee(e,t,n){return n===void 0&&(n=Aee.identity),function(r){Kz(t,function(){for(var i=e.length,o=new Array(i),s=i,a=i,l=function(u){Kz(t,function(){var d=Cee.from(e[u],t),f=!1;d.subscribe(jDe.createOperatorSubscriber(r,function(h){o[u]=h,f||(f=!0,a--),a||r.next(n(o.slice()))},function(){--s||r.complete()}))},r)},c=0;c<i;c++)l(c)},r)}}Hu.combineLatestInit=Pee;function Kz(e,t,n){e?UDe.executeSchedule(n,e,t):t()}var Th={},sv={},Oh={},Ma={},av={};Object.defineProperty(av,"__esModule",{value:!0});av.mergeInternals=void 0;var HDe=$t,GDe=Pa,Zz=Tt;function WDe(e,t,n,r,i,o,s,a){var l=[],c=0,u=0,d=!1,f=function(){d&&!l.length&&!c&&t.complete()},h=function(g){return c<r?p(g):l.push(g)},p=function(g){o&&t.next(g),c++;var v=!1;HDe.innerFrom(n(g,u++)).subscribe(Zz.createOperatorSubscriber(t,function(m){i==null||i(m),o?h(m):t.next(m)},function(){v=!0},void 0,function(){if(v)try{c--;for(var m=function(){var y=l.shift();s?GDe.executeSchedule(t,s,function(){return p(y)}):p(y)};l.length&&c<r;)m();f()}catch(y){t.error(y)}}))};return e.subscribe(Zz.createOperatorSubscriber(t,h,function(){d=!0,f()})),function(){a==null||a()}}av.mergeInternals=WDe;Object.defineProperty(Ma,"__esModule",{value:!0});Ma.mergeMap=void 0;var qDe=Al,YDe=$t,XDe=bt,KDe=av,ZDe=An;function Mee(e,t,n){return n===void 0&&(n=1/0),ZDe.isFunction(t)?Mee(function(r,i){return qDe.map(function(o,s){return t(r,o,i,s)})(YDe.innerFrom(e(r,i)))},n):(typeof t=="number"&&(n=t),XDe.operate(function(r,i){return KDe.mergeInternals(r,i,e,n)}))}Ma.mergeMap=Mee;Object.defineProperty(Oh,"__esModule",{value:!0});Oh.mergeAll=void 0;var JDe=Ma,QDe=si;function eBe(e){return e===void 0&&(e=1/0),JDe.mergeMap(QDe.identity,e)}Oh.mergeAll=eBe;Object.defineProperty(sv,"__esModule",{value:!0});sv.concatAll=void 0;var tBe=Oh;function nBe(){return tBe.mergeAll(1)}sv.concatAll=nBe;Object.defineProperty(Th,"__esModule",{value:!0});Th.concat=void 0;var rBe=sv,iBe=qr,oBe=Aa;function sBe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return rBe.concatAll()(oBe.from(e,iBe.popScheduler(e)))}Th.concat=sBe;var TP={},Ih={};Object.defineProperty(Ih,"__esModule",{value:!0});Ih.defer=void 0;var aBe=Mn,lBe=$t;function cBe(e){return new aBe.Observable(function(t){lBe.innerFrom(e()).subscribe(t)})}Ih.defer=cBe;Object.defineProperty(TP,"__esModule",{value:!0});TP.connectable=void 0;var uBe=Lr,dBe=Mn,fBe=Ih,hBe={connector:function(){return new uBe.Subject},resetOnDisconnect:!0};function pBe(e,t){t===void 0&&(t=hBe);var n=null,r=t.connector,i=t.resetOnDisconnect,o=i===void 0?!0:i,s=r(),a=new dBe.Observable(function(l){return s.subscribe(l)});return a.connect=function(){return(!n||n.closed)&&(n=fBe.defer(function(){return e}).subscribe(s),o&&n.add(function(){return s=r()})),n},a}TP.connectable=pBe;var OP={};Object.defineProperty(OP,"__esModule",{value:!0});OP.forkJoin=void 0;var mBe=Mn,gBe=q1,vBe=$t,yBe=qr,bBe=Tt,xBe=Cl,_Be=Y1;function wBe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=yBe.popResultSelector(e),r=gBe.argsArgArrayOrObject(e),i=r.args,o=r.keys,s=new mBe.Observable(function(a){var l=i.length;if(!l){a.complete();return}for(var c=new Array(l),u=l,d=l,f=function(p){var g=!1;vBe.innerFrom(i[p]).subscribe(bBe.createOperatorSubscriber(a,function(v){g||(g=!0,d--),c[p]=v},function(){return u--},void 0,function(){(!u||!g)&&(d||a.next(o?_Be.createObject(o,c):c),a.complete())}))},h=0;h<l;h++)f(h)});return n?s.pipe(xBe.mapOneOrManyArgs(n)):s}OP.forkJoin=wBe;var IP={},SBe=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o};Object.defineProperty(IP,"__esModule",{value:!0});IP.fromEvent=void 0;var CBe=$t,ABe=Mn,PBe=Ma,MBe=rv,qf=An,EBe=Cl,TBe=["addListener","removeListener"],OBe=["addEventListener","removeEventListener"],IBe=["on","off"];function Ck(e,t,n,r){if(qf.isFunction(n)&&(r=n,n=void 0),r)return Ck(e,t,n).pipe(EBe.mapOneOrManyArgs(r));var i=SBe(LBe(e)?OBe.map(function(a){return function(l){return e[a](t,l,n)}}):RBe(e)?TBe.map(Jz(e,t)):kBe(e)?IBe.map(Jz(e,t)):[],2),o=i[0],s=i[1];if(!o&&MBe.isArrayLike(e))return PBe.mergeMap(function(a){return Ck(a,t,n)})(CBe.innerFrom(e));if(!o)throw new TypeError("Invalid event target");return new ABe.Observable(function(a){var l=function(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return a.next(1<c.length?c:c[0])};return o(l),function(){return s(l)}})}IP.fromEvent=Ck;function Jz(e,t){return function(n){return function(r){return e[n](t,r)}}}function RBe(e){return qf.isFunction(e.addListener)&&qf.isFunction(e.removeListener)}function kBe(e){return qf.isFunction(e.on)&&qf.isFunction(e.off)}function LBe(e){return qf.isFunction(e.addEventListener)&&qf.isFunction(e.removeEventListener)}var RP={};Object.defineProperty(RP,"__esModule",{value:!0});RP.fromEventPattern=void 0;var $Be=Mn,DBe=An,BBe=Cl;function Eee(e,t,n){return n?Eee(e,t).pipe(BBe.mapOneOrManyArgs(n)):new $Be.Observable(function(r){var i=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return r.next(s.length===1?s[0]:s)},o=e(i);return DBe.isFunction(t)?function(){return t(i,o)}:void 0})}RP.fromEventPattern=Eee;var kP={},NBe=we&&we.__generator||function(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(kP,"__esModule",{value:!0});kP.generate=void 0;var Qz=si,FBe=Ph,zBe=Ih,jBe=z1;function UBe(e,t,n,r,i){var o,s,a,l;arguments.length===1?(o=e,l=o.initialState,t=o.condition,n=o.iterate,s=o.resultSelector,a=s===void 0?Qz.identity:s,i=o.scheduler):(l=e,!r||FBe.isScheduler(r)?(a=Qz.identity,i=r):a=r);function c(){var u;return NBe(this,function(d){switch(d.label){case 0:u=l,d.label=1;case 1:return!t||t(u)?[4,a(u)]:[3,4];case 2:d.sent(),d.label=3;case 3:return u=n(u),[3,1];case 4:return[2]}})}return zBe.defer(i?function(){return jBe.scheduleIterable(c(),i)}:c)}kP.generate=UBe;var LP={};Object.defineProperty(LP,"__esModule",{value:!0});LP.iif=void 0;var VBe=Ih;function HBe(e,t,n){return VBe.defer(function(){return e()?t:n})}LP.iif=HBe;var X1={},Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.timer=void 0;var GBe=Mn,WBe=ko,qBe=Ph,YBe=ov;function XBe(e,t,n){e===void 0&&(e=0),n===void 0&&(n=WBe.async);var r=-1;return t!=null&&(qBe.isScheduler(t)?n=t:r=t),new GBe.Observable(function(i){var o=YBe.isValidDate(e)?+e-n.now():e;o<0&&(o=0);var s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}Pl.timer=XBe;Object.defineProperty(X1,"__esModule",{value:!0});X1.interval=void 0;var KBe=ko,ZBe=Pl;function JBe(e,t){return e===void 0&&(e=0),t===void 0&&(t=KBe.asyncScheduler),e<0&&(e=0),ZBe.timer(e,e,t)}X1.interval=JBe;var $P={};Object.defineProperty($P,"__esModule",{value:!0});$P.merge=void 0;var QBe=Oh,eNe=$t,tNe=xa,ej=qr,nNe=Aa;function rNe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=ej.popScheduler(e),r=ej.popNumber(e,1/0),i=e;return i.length?i.length===1?eNe.innerFrom(i[0]):QBe.mergeAll(r)(nNe.from(i,n)):tNe.EMPTY}$P.merge=rNe;var Ak={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var t=Mn,n=oi;e.NEVER=new t.Observable(n.noop);function r(){return e.NEVER}e.never=r})(Ak);var K1={},kc={};Object.defineProperty(kc,"__esModule",{value:!0});kc.argsOrArgArray=void 0;var iNe=Array.isArray;function oNe(e){return e.length===1&&iNe(e[0])?e[0]:e}kc.argsOrArgArray=oNe;Object.defineProperty(K1,"__esModule",{value:!0});K1.onErrorResumeNext=void 0;var sNe=Mn,aNe=kc,lNe=Tt,tj=oi,cNe=$t;function uNe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=aNe.argsOrArgArray(e);return new sNe.Observable(function(r){var i=0,o=function(){if(i<n.length){var s=void 0;try{s=cNe.innerFrom(n[i++])}catch{o();return}var a=new lNe.OperatorSubscriber(r,void 0,tj.noop,tj.noop);s.subscribe(a),a.add(o)}else r.complete()};o()})}K1.onErrorResumeNext=uNe;var DP={};Object.defineProperty(DP,"__esModule",{value:!0});DP.pairs=void 0;var dNe=Aa;function fNe(e,t){return dNe.from(Object.entries(e),t)}DP.pairs=fNe;var BP={},NP={};Object.defineProperty(NP,"__esModule",{value:!0});NP.not=void 0;function hNe(e,t){return function(n,r){return!e.call(t,n,r)}}NP.not=hNe;var Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.filter=void 0;var pNe=bt,mNe=Tt;function gNe(e,t){return pNe.operate(function(n,r){var i=0;n.subscribe(mNe.createOperatorSubscriber(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}Lc.filter=gNe;Object.defineProperty(BP,"__esModule",{value:!0});BP.partition=void 0;var vNe=NP,nj=Lc,rj=$t;function yNe(e,t,n){return[nj.filter(t,n)(rj.innerFrom(e)),nj.filter(vNe.not(t,n))(rj.innerFrom(e))]}BP.partition=yNe;var Yf={};Object.defineProperty(Yf,"__esModule",{value:!0});Yf.raceInit=Yf.race=void 0;var bNe=Mn,Tee=$t,xNe=kc,_Ne=Tt;function wNe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=xNe.argsOrArgArray(e),e.length===1?Tee.innerFrom(e[0]):new bNe.Observable(Oee(e))}Yf.race=wNe;function Oee(e){return function(t){for(var n=[],r=function(o){n.push(Tee.innerFrom(e[o]).subscribe(_Ne.createOperatorSubscriber(t,function(s){if(n){for(var a=0;a<n.length;a++)a!==o&&n[a].unsubscribe();n=null}t.next(s)})))},i=0;n&&!t.closed&&i<e.length;i++)r(i)}}Yf.raceInit=Oee;var FP={};Object.defineProperty(FP,"__esModule",{value:!0});FP.range=void 0;var SNe=Mn,CNe=xa;function ANe(e,t,n){if(t==null&&(t=e,e=0),t<=0)return CNe.EMPTY;var r=t+e;return new SNe.Observable(n?function(i){var o=e;return n.schedule(function(){o<r?(i.next(o++),this.schedule()):i.complete()})}:function(i){for(var o=e;o<r&&!i.closed;)i.next(o++);i.complete()})}FP.range=ANe;var zP={};Object.defineProperty(zP,"__esModule",{value:!0});zP.using=void 0;var PNe=Mn,MNe=$t,ENe=xa;function TNe(e,t){return new PNe.Observable(function(n){var r=e(),i=t(r),o=i?MNe.innerFrom(i):ENe.EMPTY;return o.subscribe(n),function(){r&&r.unsubscribe()}})}zP.using=TNe;var lv={},ONe=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},INe=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(lv,"__esModule",{value:!0});lv.zip=void 0;var RNe=Mn,kNe=$t,LNe=kc,$Ne=xa,DNe=Tt,BNe=qr;function NNe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=BNe.popResultSelector(e),r=LNe.argsOrArgArray(e);return r.length?new RNe.Observable(function(i){var o=r.map(function(){return[]}),s=r.map(function(){return!1});i.add(function(){o=s=null});for(var a=function(c){kNe.innerFrom(r[c]).subscribe(DNe.createOperatorSubscriber(i,function(u){if(o[c].push(u),o.every(function(f){return f.length})){var d=o.map(function(f){return f.shift()});i.next(n?n.apply(void 0,INe([],ONe(d))):d),o.some(function(f,h){return!f.length&&s[h]})&&i.complete()}},function(){s[c]=!0,!o[c].length&&i.complete()}))},l=0;!i.closed&&l<r.length;l++)a(l);return function(){o=s=null}}):$Ne.EMPTY}lv.zip=NNe;var Iee={};Object.defineProperty(Iee,"__esModule",{value:!0});var Z1={};Object.defineProperty(Z1,"__esModule",{value:!0});Z1.audit=void 0;var FNe=bt,zNe=$t,ij=Tt;function jNe(e){return FNe.operate(function(t,n){var r=!1,i=null,o=null,s=!1,a=function(){if(o==null||o.unsubscribe(),o=null,r){r=!1;var c=i;i=null,n.next(c)}s&&n.complete()},l=function(){o=null,s&&n.complete()};t.subscribe(ij.createOperatorSubscriber(n,function(c){r=!0,i=c,o||zNe.innerFrom(e(c)).subscribe(o=ij.createOperatorSubscriber(n,a,l))},function(){s=!0,(!r||!o||o.closed)&&n.complete()}))})}Z1.audit=jNe;var jP={};Object.defineProperty(jP,"__esModule",{value:!0});jP.auditTime=void 0;var UNe=ko,VNe=Z1,HNe=Pl;function GNe(e,t){return t===void 0&&(t=UNe.asyncScheduler),VNe.audit(function(){return HNe.timer(e,t)})}jP.auditTime=GNe;var UP={};Object.defineProperty(UP,"__esModule",{value:!0});UP.buffer=void 0;var WNe=bt,qNe=oi,oj=Tt,YNe=$t;function XNe(e){return WNe.operate(function(t,n){var r=[];return t.subscribe(oj.createOperatorSubscriber(n,function(i){return r.push(i)},function(){n.next(r),n.complete()})),YNe.innerFrom(e).subscribe(oj.createOperatorSubscriber(n,function(){var i=r;r=[],n.next(i)},qNe.noop)),function(){r=null}})}UP.buffer=XNe;var VP={},_3=we&&we.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(VP,"__esModule",{value:!0});VP.bufferCount=void 0;var KNe=bt,ZNe=Tt,JNe=Ca;function QNe(e,t){return t===void 0&&(t=null),t=t??e,KNe.operate(function(n,r){var i=[],o=0;n.subscribe(ZNe.createOperatorSubscriber(r,function(s){var a,l,c,u,d=null;o++%t===0&&i.push([]);try{for(var f=_3(i),h=f.next();!h.done;h=f.next()){var p=h.value;p.push(s),e<=p.length&&(d=d??[],d.push(p))}}catch(m){a={error:m}}finally{try{h&&!h.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}if(d)try{for(var g=_3(d),v=g.next();!v.done;v=g.next()){var p=v.value;JNe.arrRemove(i,p),r.next(p)}}catch(m){c={error:m}}finally{try{v&&!v.done&&(u=g.return)&&u.call(g)}finally{if(c)throw c.error}}},function(){var s,a;try{for(var l=_3(i),c=l.next();!c.done;c=l.next()){var u=c.value;r.next(u)}}catch(d){s={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}r.complete()},void 0,function(){i=null}))})}VP.bufferCount=QNe;var HP={},eFe=we&&we.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(HP,"__esModule",{value:!0});HP.bufferTime=void 0;var tFe=ni,nFe=bt,rFe=Tt,iFe=Ca,oFe=ko,sFe=qr,sj=Pa;function aFe(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=(t=sFe.popScheduler(r))!==null&&t!==void 0?t:oFe.asyncScheduler,s=(n=r[0])!==null&&n!==void 0?n:null,a=r[1]||1/0;return nFe.operate(function(l,c){var u=[],d=!1,f=function(g){var v=g.buffer,m=g.subs;m.unsubscribe(),iFe.arrRemove(u,g),c.next(v),d&&h()},h=function(){if(u){var g=new tFe.Subscription;c.add(g);var v=[],m={buffer:v,subs:g};u.push(m),sj.executeSchedule(g,o,function(){return f(m)},e)}};s!==null&&s>=0?sj.executeSchedule(c,o,h,s,!0):d=!0,h();var p=rFe.createOperatorSubscriber(c,function(g){var v,m,y=u.slice();try{for(var b=eFe(y),_=b.next();!_.done;_=b.next()){var x=_.value,w=x.buffer;w.push(g),a<=w.length&&f(x)}}catch(S){v={error:S}}finally{try{_&&!_.done&&(m=b.return)&&m.call(b)}finally{if(v)throw v.error}}},function(){for(;u!=null&&u.length;)c.next(u.shift().buffer);p==null||p.unsubscribe(),c.complete(),c.unsubscribe()},void 0,function(){return u=null});l.subscribe(p)})}HP.bufferTime=aFe;var GP={},lFe=we&&we.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(GP,"__esModule",{value:!0});GP.bufferToggle=void 0;var cFe=ni,uFe=bt,aj=$t,w3=Tt,lj=oi,dFe=Ca;function fFe(e,t){return uFe.operate(function(n,r){var i=[];aj.innerFrom(e).subscribe(w3.createOperatorSubscriber(r,function(o){var s=[];i.push(s);var a=new cFe.Subscription,l=function(){dFe.arrRemove(i,s),r.next(s),a.unsubscribe()};a.add(aj.innerFrom(t(o)).subscribe(w3.createOperatorSubscriber(r,l,lj.noop)))},lj.noop)),n.subscribe(w3.createOperatorSubscriber(r,function(o){var s,a;try{for(var l=lFe(i),c=l.next();!c.done;c=l.next()){var u=c.value;u.push(o)}}catch(d){s={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}},function(){for(;i.length>0;)r.next(i.shift());r.complete()}))})}GP.bufferToggle=fFe;var WP={};Object.defineProperty(WP,"__esModule",{value:!0});WP.bufferWhen=void 0;var hFe=bt,pFe=oi,cj=Tt,mFe=$t;function gFe(e){return hFe.operate(function(t,n){var r=null,i=null,o=function(){i==null||i.unsubscribe();var s=r;r=[],s&&n.next(s),mFe.innerFrom(e()).subscribe(i=cj.createOperatorSubscriber(n,o,pFe.noop))};o(),t.subscribe(cj.createOperatorSubscriber(n,function(s){return r==null?void 0:r.push(s)},function(){r&&n.next(r),n.complete()},void 0,function(){return r=i=null}))})}WP.bufferWhen=gFe;var qP={};Object.defineProperty(qP,"__esModule",{value:!0});qP.catchError=void 0;var vFe=$t,yFe=Tt,bFe=bt;function Ree(e){return bFe.operate(function(t,n){var r=null,i=!1,o;r=t.subscribe(yFe.createOperatorSubscriber(n,void 0,void 0,function(s){o=vFe.innerFrom(e(s,Ree(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}qP.catchError=Ree;var YP={},J1={},Q1={},ex={},hd={},tx={};Object.defineProperty(tx,"__esModule",{value:!0});tx.scanInternals=void 0;var xFe=Tt;function _Fe(e,t,n,r,i){return function(o,s){var a=n,l=t,c=0;o.subscribe(xFe.createOperatorSubscriber(s,function(u){var d=c++;l=a?e(l,u,d):(a=!0,u),r&&s.next(l)},i&&function(){a&&s.next(l),s.complete()}))}}tx.scanInternals=_Fe;Object.defineProperty(hd,"__esModule",{value:!0});hd.reduce=void 0;var wFe=tx,SFe=bt;function CFe(e,t){return SFe.operate(wFe.scanInternals(e,t,arguments.length>=2,!1,!0))}hd.reduce=CFe;Object.defineProperty(ex,"__esModule",{value:!0});ex.toArray=void 0;var AFe=hd,PFe=bt,MFe=function(e,t){return e.push(t),e};function EFe(){return PFe.operate(function(e,t){AFe.reduce(MFe,[])(e).subscribe(t)})}ex.toArray=EFe;Object.defineProperty(Q1,"__esModule",{value:!0});Q1.joinAllInternals=void 0;var TFe=si,OFe=Cl,IFe=gc,RFe=Ma,kFe=ex;function LFe(e,t){return IFe.pipe(kFe.toArray(),RFe.mergeMap(function(n){return e(n)}),t?OFe.mapOneOrManyArgs(t):TFe.identity)}Q1.joinAllInternals=LFe;Object.defineProperty(J1,"__esModule",{value:!0});J1.combineLatestAll=void 0;var $Fe=Hu,DFe=Q1;function BFe(e){return DFe.joinAllInternals($Fe.combineLatest,e)}J1.combineLatestAll=BFe;Object.defineProperty(YP,"__esModule",{value:!0});YP.combineAll=void 0;var NFe=J1;YP.combineAll=NFe.combineLatestAll;var XP={},KP={},uj=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},dj=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(KP,"__esModule",{value:!0});KP.combineLatest=void 0;var FFe=Hu,zFe=bt,jFe=kc,UFe=Cl,VFe=gc,HFe=qr;function kee(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=HFe.popResultSelector(e);return n?VFe.pipe(kee.apply(void 0,dj([],uj(e))),UFe.mapOneOrManyArgs(n)):zFe.operate(function(r,i){FFe.combineLatestInit(dj([r],uj(jFe.argsOrArgArray(e))))(i)})}KP.combineLatest=kee;var GFe=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},WFe=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(XP,"__esModule",{value:!0});XP.combineLatestWith=void 0;var qFe=KP;function YFe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qFe.combineLatest.apply(void 0,WFe([],GFe(e)))}XP.combineLatestWith=YFe;var nx={};Object.defineProperty(nx,"__esModule",{value:!0});nx.concatMap=void 0;var fj=Ma,XFe=An;function KFe(e,t){return XFe.isFunction(t)?fj.mergeMap(e,t,1):fj.mergeMap(e,1)}nx.concatMap=KFe;var ZP={};Object.defineProperty(ZP,"__esModule",{value:!0});ZP.concatMapTo=void 0;var hj=nx,ZFe=An;function JFe(e,t){return ZFe.isFunction(t)?hj.concatMap(function(){return e},t):hj.concatMap(function(){return e})}ZP.concatMapTo=JFe;var JP={},QP={},QFe=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},e6e=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(QP,"__esModule",{value:!0});QP.concat=void 0;var t6e=bt,n6e=sv,r6e=qr,i6e=Aa;function o6e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r6e.popScheduler(e);return t6e.operate(function(r,i){n6e.concatAll()(i6e.from(e6e([r],QFe(e)),n)).subscribe(i)})}QP.concat=o6e;var s6e=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},a6e=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(JP,"__esModule",{value:!0});JP.concatWith=void 0;var l6e=QP;function c6e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l6e.concat.apply(void 0,a6e([],s6e(e)))}JP.concatWith=c6e;var cv={},eM={};Object.defineProperty(eM,"__esModule",{value:!0});eM.fromSubscribable=void 0;var u6e=Mn;function d6e(e){return new u6e.Observable(function(t){return e.subscribe(t)})}eM.fromSubscribable=d6e;Object.defineProperty(cv,"__esModule",{value:!0});cv.connect=void 0;var f6e=Lr,h6e=$t,p6e=bt,m6e=eM,g6e={connector:function(){return new f6e.Subject}};function v6e(e,t){t===void 0&&(t=g6e);var n=t.connector;return p6e.operate(function(r,i){var o=n();h6e.innerFrom(e(m6e.fromSubscribable(o))).subscribe(i),i.add(r.subscribe(o))})}cv.connect=v6e;var tM={};Object.defineProperty(tM,"__esModule",{value:!0});tM.count=void 0;var y6e=hd;function b6e(e){return y6e.reduce(function(t,n,r){return!e||e(n,r)?t+1:t},0)}tM.count=b6e;var nM={};Object.defineProperty(nM,"__esModule",{value:!0});nM.debounce=void 0;var x6e=bt,_6e=oi,pj=Tt,w6e=$t;function S6e(e){return x6e.operate(function(t,n){var r=!1,i=null,o=null,s=function(){if(o==null||o.unsubscribe(),o=null,r){r=!1;var a=i;i=null,n.next(a)}};t.subscribe(pj.createOperatorSubscriber(n,function(a){o==null||o.unsubscribe(),r=!0,i=a,o=pj.createOperatorSubscriber(n,s,_6e.noop),w6e.innerFrom(e(a)).subscribe(o)},function(){s(),n.complete()},void 0,function(){i=o=null}))})}nM.debounce=S6e;var rM={};Object.defineProperty(rM,"__esModule",{value:!0});rM.debounceTime=void 0;var C6e=ko,A6e=bt,P6e=Tt;function M6e(e,t){return t===void 0&&(t=C6e.asyncScheduler),A6e.operate(function(n,r){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var c=o;o=null,r.next(c)}};function l(){var c=s+e,u=t.now();if(u<c){i=this.schedule(void 0,c-u),r.add(i);return}a()}n.subscribe(P6e.createOperatorSubscriber(r,function(c){o=c,s=t.now(),i||(i=t.schedule(l,e),r.add(i))},function(){a(),r.complete()},void 0,function(){o=i=null}))})}rM.debounceTime=M6e;var Rh={};Object.defineProperty(Rh,"__esModule",{value:!0});Rh.defaultIfEmpty=void 0;var E6e=bt,T6e=Tt;function O6e(e){return E6e.operate(function(t,n){var r=!1;t.subscribe(T6e.createOperatorSubscriber(n,function(i){r=!0,n.next(i)},function(){r||n.next(e),n.complete()}))})}Rh.defaultIfEmpty=O6e;var iM={},rx={},kh={};Object.defineProperty(kh,"__esModule",{value:!0});kh.take=void 0;var I6e=xa,R6e=bt,k6e=Tt;function L6e(e){return e<=0?function(){return I6e.EMPTY}:R6e.operate(function(t,n){var r=0;t.subscribe(k6e.createOperatorSubscriber(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}kh.take=L6e;var ix={};Object.defineProperty(ix,"__esModule",{value:!0});ix.ignoreElements=void 0;var $6e=bt,D6e=Tt,B6e=oi;function N6e(){return $6e.operate(function(e,t){e.subscribe(D6e.createOperatorSubscriber(t,B6e.noop))})}ix.ignoreElements=N6e;var ox={};Object.defineProperty(ox,"__esModule",{value:!0});ox.mapTo=void 0;var F6e=Al;function z6e(e){return F6e.map(function(){return e})}ox.mapTo=z6e;Object.defineProperty(rx,"__esModule",{value:!0});rx.delayWhen=void 0;var j6e=Th,mj=kh,U6e=ix,V6e=ox,H6e=Ma,G6e=$t;function Lee(e,t){return t?function(n){return j6e.concat(t.pipe(mj.take(1),U6e.ignoreElements()),n.pipe(Lee(e)))}:H6e.mergeMap(function(n,r){return G6e.innerFrom(e(n,r)).pipe(mj.take(1),V6e.mapTo(n))})}rx.delayWhen=Lee;Object.defineProperty(iM,"__esModule",{value:!0});iM.delay=void 0;var W6e=ko,q6e=rx,Y6e=Pl;function X6e(e,t){t===void 0&&(t=W6e.asyncScheduler);var n=Y6e.timer(e,t);return q6e.delayWhen(function(){return n})}iM.delay=X6e;var oM={};Object.defineProperty(oM,"__esModule",{value:!0});oM.dematerialize=void 0;var K6e=bP,Z6e=bt,J6e=Tt;function Q6e(){return Z6e.operate(function(e,t){e.subscribe(J6e.createOperatorSubscriber(t,function(n){return K6e.observeNotification(n,t)}))})}oM.dematerialize=Q6e;var sM={};Object.defineProperty(sM,"__esModule",{value:!0});sM.distinct=void 0;var eze=bt,gj=Tt,tze=oi,nze=$t;function rze(e,t){return eze.operate(function(n,r){var i=new Set;n.subscribe(gj.createOperatorSubscriber(r,function(o){var s=e?e(o):o;i.has(s)||(i.add(s),r.next(o))})),t&&nze.innerFrom(t).subscribe(gj.createOperatorSubscriber(r,function(){return i.clear()},tze.noop))})}sM.distinct=rze;var sx={};Object.defineProperty(sx,"__esModule",{value:!0});sx.distinctUntilChanged=void 0;var ize=si,oze=bt,sze=Tt;function aze(e,t){return t===void 0&&(t=ize.identity),e=e??lze,oze.operate(function(n,r){var i,o=!0;n.subscribe(sze.createOperatorSubscriber(r,function(s){var a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}sx.distinctUntilChanged=aze;function lze(e,t){return e===t}var aM={};Object.defineProperty(aM,"__esModule",{value:!0});aM.distinctUntilKeyChanged=void 0;var cze=sx;function uze(e,t){return cze.distinctUntilChanged(function(n,r){return t?t(n[e],r[e]):n[e]===r[e]})}aM.distinctUntilKeyChanged=uze;var lM={},Lh={};Object.defineProperty(Lh,"__esModule",{value:!0});Lh.throwIfEmpty=void 0;var dze=Sl,fze=bt,hze=Tt;function pze(e){return e===void 0&&(e=mze),fze.operate(function(t,n){var r=!1;t.subscribe(hze.createOperatorSubscriber(n,function(i){r=!0,n.next(i)},function(){return r?n.complete():n.error(e())}))})}Lh.throwIfEmpty=pze;function mze(){return new dze.EmptyError}Object.defineProperty(lM,"__esModule",{value:!0});lM.elementAt=void 0;var vj=V1,gze=Lc,vze=Lh,yze=Rh,bze=kh;function xze(e,t){if(e<0)throw new vj.ArgumentOutOfRangeError;var n=arguments.length>=2;return function(r){return r.pipe(gze.filter(function(i,o){return o===e}),bze.take(1),n?yze.defaultIfEmpty(t):vze.throwIfEmpty(function(){return new vj.ArgumentOutOfRangeError}))}}lM.elementAt=xze;var cM={},_ze=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},wze=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(cM,"__esModule",{value:!0});cM.endWith=void 0;var Sze=Th,Cze=nv;function Aze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return Sze.concat(n,Cze.of.apply(void 0,wze([],_ze(e))))}}cM.endWith=Aze;var uM={};Object.defineProperty(uM,"__esModule",{value:!0});uM.every=void 0;var Pze=bt,Mze=Tt;function Eze(e,t){return Pze.operate(function(n,r){var i=0;n.subscribe(Mze.createOperatorSubscriber(r,function(o){e.call(t,o,i++,n)||(r.next(!1),r.complete())},function(){r.next(!0),r.complete()}))})}uM.every=Eze;var dM={},ax={},lx={};Object.defineProperty(lx,"__esModule",{value:!0});lx.exhaustMap=void 0;var Tze=Al,yj=$t,Oze=bt,bj=Tt;function $ee(e,t){return t?function(n){return n.pipe($ee(function(r,i){return yj.innerFrom(e(r,i)).pipe(Tze.map(function(o,s){return t(r,o,i,s)}))}))}:Oze.operate(function(n,r){var i=0,o=null,s=!1;n.subscribe(bj.createOperatorSubscriber(r,function(a){o||(o=bj.createOperatorSubscriber(r,void 0,function(){o=null,s&&r.complete()}),yj.innerFrom(e(a,i++)).subscribe(o))},function(){s=!0,!o&&r.complete()}))})}lx.exhaustMap=$ee;Object.defineProperty(ax,"__esModule",{value:!0});ax.exhaustAll=void 0;var Ize=lx,Rze=si;function kze(){return Ize.exhaustMap(Rze.identity)}ax.exhaustAll=kze;Object.defineProperty(dM,"__esModule",{value:!0});dM.exhaust=void 0;var Lze=ax;dM.exhaust=Lze.exhaustAll;var fM={};Object.defineProperty(fM,"__esModule",{value:!0});fM.expand=void 0;var $ze=bt,Dze=av;function Bze(e,t,n){return t===void 0&&(t=1/0),t=(t||0)<1?1/0:t,$ze.operate(function(r,i){return Dze.mergeInternals(r,i,e,t,void 0,!0,n)})}fM.expand=Bze;var hM={};Object.defineProperty(hM,"__esModule",{value:!0});hM.finalize=void 0;var Nze=bt;function Fze(e){return Nze.operate(function(t,n){try{t.subscribe(n)}finally{n.add(e)}})}hM.finalize=Fze;var Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});Xf.createFind=Xf.find=void 0;var zze=bt,jze=Tt;function Uze(e,t){return zze.operate(Dee(e,t,"value"))}Xf.find=Uze;function Dee(e,t,n){var r=n==="index";return function(i,o){var s=0;i.subscribe(jze.createOperatorSubscriber(o,function(a){var l=s++;e.call(t,a,l,i)&&(o.next(r?l:a),o.complete())},function(){o.next(r?-1:void 0),o.complete()}))}}Xf.createFind=Dee;var pM={};Object.defineProperty(pM,"__esModule",{value:!0});pM.findIndex=void 0;var Vze=bt,Hze=Xf;function Gze(e,t){return Vze.operate(Hze.createFind(e,t,"index"))}pM.findIndex=Gze;var mM={};Object.defineProperty(mM,"__esModule",{value:!0});mM.first=void 0;var Wze=Sl,qze=Lc,Yze=kh,Xze=Rh,Kze=Lh,Zze=si;function Jze(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?qze.filter(function(i,o){return e(i,o,r)}):Zze.identity,Yze.take(1),n?Xze.defaultIfEmpty(t):Kze.throwIfEmpty(function(){return new Wze.EmptyError}))}}mM.first=Jze;var gM={};Object.defineProperty(gM,"__esModule",{value:!0});gM.groupBy=void 0;var Qze=Mn,eje=$t,tje=Lr,nje=bt,xj=Tt;function rje(e,t,n,r){return nje.operate(function(i,o){var s;!t||typeof t=="function"?s=t:(n=t.duration,s=t.element,r=t.connector);var a=new Map,l=function(p){a.forEach(p),p(o)},c=function(p){return l(function(g){return g.error(p)})},u=0,d=!1,f=new xj.OperatorSubscriber(o,function(p){try{var g=e(p),v=a.get(g);if(!v){a.set(g,v=r?r():new tje.Subject);var m=h(g,v);if(o.next(m),n){var y=xj.createOperatorSubscriber(v,function(){v.complete(),y==null||y.unsubscribe()},void 0,void 0,function(){return a.delete(g)});f.add(eje.innerFrom(n(m)).subscribe(y))}}v.next(s?s(p):p)}catch(b){c(b)}},function(){return l(function(p){return p.complete()})},c,function(){return a.clear()},function(){return d=!0,u===0});i.subscribe(f);function h(p,g){var v=new Qze.Observable(function(m){u++;var y=g.subscribe(m);return function(){y.unsubscribe(),--u===0&&d&&f.unsubscribe()}});return v.key=p,v}})}gM.groupBy=rje;var vM={};Object.defineProperty(vM,"__esModule",{value:!0});vM.isEmpty=void 0;var ije=bt,oje=Tt;function sje(){return ije.operate(function(e,t){e.subscribe(oje.createOperatorSubscriber(t,function(){t.next(!1),t.complete()},function(){t.next(!0),t.complete()}))})}vM.isEmpty=sje;var yM={},cx={},aje=we&&we.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(cx,"__esModule",{value:!0});cx.takeLast=void 0;var lje=xa,cje=bt,uje=Tt;function dje(e){return e<=0?function(){return lje.EMPTY}:cje.operate(function(t,n){var r=[];t.subscribe(uje.createOperatorSubscriber(n,function(i){r.push(i),e<r.length&&r.shift()},function(){var i,o;try{for(var s=aje(r),a=s.next();!a.done;a=s.next()){var l=a.value;n.next(l)}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}n.complete()},void 0,function(){r=null}))})}cx.takeLast=dje;Object.defineProperty(yM,"__esModule",{value:!0});yM.last=void 0;var fje=Sl,hje=Lc,pje=cx,mje=Lh,gje=Rh,vje=si;function yje(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?hje.filter(function(i,o){return e(i,o,r)}):vje.identity,pje.takeLast(1),n?gje.defaultIfEmpty(t):mje.throwIfEmpty(function(){return new fje.EmptyError}))}}yM.last=yje;var bM={};Object.defineProperty(bM,"__esModule",{value:!0});bM.materialize=void 0;var S3=bP,bje=bt,xje=Tt;function _je(){return bje.operate(function(e,t){e.subscribe(xje.createOperatorSubscriber(t,function(n){t.next(S3.Notification.createNext(n))},function(){t.next(S3.Notification.createComplete()),t.complete()},function(n){t.next(S3.Notification.createError(n)),t.complete()}))})}bM.materialize=_je;var xM={};Object.defineProperty(xM,"__esModule",{value:!0});xM.max=void 0;var wje=hd,Sje=An;function Cje(e){return wje.reduce(Sje.isFunction(e)?function(t,n){return e(t,n)>0?t:n}:function(t,n){return t>n?t:n})}xM.max=Cje;var _M={};Object.defineProperty(_M,"__esModule",{value:!0});_M.flatMap=void 0;var Aje=Ma;_M.flatMap=Aje.mergeMap;var wM={};Object.defineProperty(wM,"__esModule",{value:!0});wM.mergeMapTo=void 0;var _j=Ma,Pje=An;function Mje(e,t,n){return n===void 0&&(n=1/0),Pje.isFunction(t)?_j.mergeMap(function(){return e},t,n):(typeof t=="number"&&(n=t),_j.mergeMap(function(){return e},n))}wM.mergeMapTo=Mje;var SM={};Object.defineProperty(SM,"__esModule",{value:!0});SM.mergeScan=void 0;var Eje=bt,Tje=av;function Oje(e,t,n){return n===void 0&&(n=1/0),Eje.operate(function(r,i){var o=t;return Tje.mergeInternals(r,i,function(s,a){return e(o,s,a)},n,function(s){o=s},!1,void 0,function(){return o=null})})}SM.mergeScan=Oje;var CM={},AM={},Ije=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Rje=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(AM,"__esModule",{value:!0});AM.merge=void 0;var kje=bt,Lje=kc,$je=Oh,wj=qr,Dje=Aa;function Bje(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=wj.popScheduler(e),r=wj.popNumber(e,1/0);return e=Lje.argsOrArgArray(e),kje.operate(function(i,o){$je.mergeAll(r)(Dje.from(Rje([i],Ije(e)),n)).subscribe(o)})}AM.merge=Bje;var Nje=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Fje=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(CM,"__esModule",{value:!0});CM.mergeWith=void 0;var zje=AM;function jje(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return zje.merge.apply(void 0,Fje([],Nje(e)))}CM.mergeWith=jje;var PM={};Object.defineProperty(PM,"__esModule",{value:!0});PM.min=void 0;var Uje=hd,Vje=An;function Hje(e){return Uje.reduce(Vje.isFunction(e)?function(t,n){return e(t,n)<0?t:n}:function(t,n){return t<n?t:n})}PM.min=Hje;var uv={};Object.defineProperty(uv,"__esModule",{value:!0});uv.multicast=void 0;var Gje=Ah,Sj=An,Wje=cv;function qje(e,t){var n=Sj.isFunction(e)?e:function(){return e};return Sj.isFunction(t)?Wje.connect(t,{connector:n}):function(r){return new Gje.ConnectableObservable(r,n)}}uv.multicast=qje;var ig={},Yje=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Xje=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(ig,"__esModule",{value:!0});ig.onErrorResumeNext=ig.onErrorResumeNextWith=void 0;var Kje=kc,Zje=K1;function Bee(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Kje.argsOrArgArray(e);return function(r){return Zje.onErrorResumeNext.apply(void 0,Xje([r],Yje(n)))}}ig.onErrorResumeNextWith=Bee;ig.onErrorResumeNext=Bee;var MM={};Object.defineProperty(MM,"__esModule",{value:!0});MM.pairwise=void 0;var Jje=bt,Qje=Tt;function e8e(){return Jje.operate(function(e,t){var n,r=!1;e.subscribe(Qje.createOperatorSubscriber(t,function(i){var o=n;n=i,r&&t.next([o,i]),r=!0}))})}MM.pairwise=e8e;var EM={};Object.defineProperty(EM,"__esModule",{value:!0});EM.pluck=void 0;var t8e=Al;function n8e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(n===0)throw new Error("list of properties cannot be empty.");return t8e.map(function(r){for(var i=r,o=0;o<n;o++){var s=i==null?void 0:i[e[o]];if(typeof s<"u")i=s;else return}return i})}EM.pluck=n8e;var TM={};Object.defineProperty(TM,"__esModule",{value:!0});TM.publish=void 0;var r8e=Lr,i8e=uv,o8e=cv;function s8e(e){return e?function(t){return o8e.connect(e)(t)}:function(t){return i8e.multicast(new r8e.Subject)(t)}}TM.publish=s8e;var OM={};Object.defineProperty(OM,"__esModule",{value:!0});OM.publishBehavior=void 0;var a8e=R1,l8e=Ah;function c8e(e){return function(t){var n=new a8e.BehaviorSubject(e);return new l8e.ConnectableObservable(t,function(){return n})}}OM.publishBehavior=c8e;var IM={};Object.defineProperty(IM,"__esModule",{value:!0});IM.publishLast=void 0;var u8e=tv,d8e=Ah;function f8e(){return function(e){var t=new u8e.AsyncSubject;return new d8e.ConnectableObservable(e,function(){return t})}}IM.publishLast=f8e;var RM={};Object.defineProperty(RM,"__esModule",{value:!0});RM.publishReplay=void 0;var h8e=ev,p8e=uv,Cj=An;function m8e(e,t,n,r){n&&!Cj.isFunction(n)&&(r=n);var i=Cj.isFunction(n)?n:void 0;return function(o){return p8e.multicast(new h8e.ReplaySubject(e,t,r),i)(o)}}RM.publishReplay=m8e;var kM={},g8e=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},v8e=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(kM,"__esModule",{value:!0});kM.raceWith=void 0;var y8e=Yf,b8e=bt,x8e=si;function _8e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?b8e.operate(function(n,r){y8e.raceInit(v8e([n],g8e(e)))(r)}):x8e.identity}kM.raceWith=_8e;var LM={};Object.defineProperty(LM,"__esModule",{value:!0});LM.repeat=void 0;var w8e=xa,S8e=bt,Aj=Tt,C8e=$t,A8e=Pl;function P8e(e){var t,n=1/0,r;return e!=null&&(typeof e=="object"?(t=e.count,n=t===void 0?1/0:t,r=e.delay):n=e),n<=0?function(){return w8e.EMPTY}:S8e.operate(function(i,o){var s=0,a,l=function(){if(a==null||a.unsubscribe(),a=null,r!=null){var u=typeof r=="number"?A8e.timer(r):C8e.innerFrom(r(s)),d=Aj.createOperatorSubscriber(o,function(){d.unsubscribe(),c()});u.subscribe(d)}else c()},c=function(){var u=!1;a=i.subscribe(Aj.createOperatorSubscriber(o,void 0,function(){++s<n?a?l():u=!0:o.complete()})),u&&l()};c()})}LM.repeat=P8e;var $M={};Object.defineProperty($M,"__esModule",{value:!0});$M.repeatWhen=void 0;var M8e=$t,E8e=Lr,T8e=bt,Pj=Tt;function O8e(e){return T8e.operate(function(t,n){var r,i=!1,o,s=!1,a=!1,l=function(){return a&&s&&(n.complete(),!0)},c=function(){return o||(o=new E8e.Subject,M8e.innerFrom(e(o)).subscribe(Pj.createOperatorSubscriber(n,function(){r?u():i=!0},function(){s=!0,l()}))),o},u=function(){a=!1,r=t.subscribe(Pj.createOperatorSubscriber(n,void 0,function(){a=!0,!l()&&c().next()})),i&&(r.unsubscribe(),r=null,i=!1,u())};u()})}$M.repeatWhen=O8e;var DM={};Object.defineProperty(DM,"__esModule",{value:!0});DM.retry=void 0;var I8e=bt,Mj=Tt,R8e=si,k8e=Pl,L8e=$t;function $8e(e){e===void 0&&(e=1/0);var t;e&&typeof e=="object"?t=e:t={count:e};var n=t.count,r=n===void 0?1/0:n,i=t.delay,o=t.resetOnSuccess,s=o===void 0?!1:o;return r<=0?R8e.identity:I8e.operate(function(a,l){var c=0,u,d=function(){var f=!1;u=a.subscribe(Mj.createOperatorSubscriber(l,function(h){s&&(c=0),l.next(h)},void 0,function(h){if(c++<r){var p=function(){u?(u.unsubscribe(),u=null,d()):f=!0};if(i!=null){var g=typeof i=="number"?k8e.timer(i):L8e.innerFrom(i(h,c)),v=Mj.createOperatorSubscriber(l,function(){v.unsubscribe(),p()},function(){l.complete()});g.subscribe(v)}else p()}else l.error(h)})),f&&(u.unsubscribe(),u=null,d())};d()})}DM.retry=$8e;var BM={};Object.defineProperty(BM,"__esModule",{value:!0});BM.retryWhen=void 0;var D8e=$t,B8e=Lr,N8e=bt,Ej=Tt;function F8e(e){return N8e.operate(function(t,n){var r,i=!1,o,s=function(){r=t.subscribe(Ej.createOperatorSubscriber(n,void 0,void 0,function(a){o||(o=new B8e.Subject,D8e.innerFrom(e(o)).subscribe(Ej.createOperatorSubscriber(n,function(){return r?s():i=!0}))),o&&o.next(a)})),i&&(r.unsubscribe(),r=null,i=!1,s())};s()})}BM.retryWhen=F8e;var ux={};Object.defineProperty(ux,"__esModule",{value:!0});ux.sample=void 0;var z8e=$t,j8e=bt,U8e=oi,Tj=Tt;function V8e(e){return j8e.operate(function(t,n){var r=!1,i=null;t.subscribe(Tj.createOperatorSubscriber(n,function(o){r=!0,i=o})),z8e.innerFrom(e).subscribe(Tj.createOperatorSubscriber(n,function(){if(r){r=!1;var o=i;i=null,n.next(o)}},U8e.noop))})}ux.sample=V8e;var NM={};Object.defineProperty(NM,"__esModule",{value:!0});NM.sampleTime=void 0;var H8e=ko,G8e=ux,W8e=X1;function q8e(e,t){return t===void 0&&(t=H8e.asyncScheduler),G8e.sample(W8e.interval(e,t))}NM.sampleTime=q8e;var FM={};Object.defineProperty(FM,"__esModule",{value:!0});FM.scan=void 0;var Y8e=bt,X8e=tx;function K8e(e,t){return Y8e.operate(X8e.scanInternals(e,t,arguments.length>=2,!0))}FM.scan=K8e;var zM={};Object.defineProperty(zM,"__esModule",{value:!0});zM.sequenceEqual=void 0;var Z8e=bt,J8e=Tt,Q8e=$t;function eUe(e,t){return t===void 0&&(t=function(n,r){return n===r}),Z8e.operate(function(n,r){var i=Oj(),o=Oj(),s=function(l){r.next(l),r.complete()},a=function(l,c){var u=J8e.createOperatorSubscriber(r,function(d){var f=c.buffer,h=c.complete;f.length===0?h?s(!1):l.buffer.push(d):!t(d,f.shift())&&s(!1)},function(){l.complete=!0;var d=c.complete,f=c.buffer;d&&s(f.length===0),u==null||u.unsubscribe()});return u};n.subscribe(a(i,o)),Q8e.innerFrom(e).subscribe(a(o,i))})}zM.sequenceEqual=eUe;function Oj(){return{buffer:[],complete:!1}}var dx={},tUe=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},nUe=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(dx,"__esModule",{value:!0});dx.share=void 0;var Nee=$t,rUe=Lr,Fee=Qg,iUe=bt;function oUe(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new rUe.Subject}:t,r=e.resetOnError,i=r===void 0?!0:r,o=e.resetOnComplete,s=o===void 0?!0:o,a=e.resetOnRefCountZero,l=a===void 0?!0:a;return function(c){var u,d,f,h=0,p=!1,g=!1,v=function(){d==null||d.unsubscribe(),d=void 0},m=function(){v(),u=f=void 0,p=g=!1},y=function(){var b=u;m(),b==null||b.unsubscribe()};return iUe.operate(function(b,_){h++,!g&&!p&&v();var x=f=f??n();_.add(function(){h--,h===0&&!g&&!p&&(d=C3(y,l))}),x.subscribe(_),!u&&h>0&&(u=new Fee.SafeSubscriber({next:function(w){return x.next(w)},error:function(w){g=!0,v(),d=C3(m,i,w),x.error(w)},complete:function(){p=!0,v(),d=C3(m,s),x.complete()}}),Nee.innerFrom(b).subscribe(u))})(c)}}dx.share=oUe;function C3(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new Fee.SafeSubscriber({next:function(){i.unsubscribe(),e()}});return Nee.innerFrom(t.apply(void 0,nUe([],tUe(n)))).subscribe(i)}}var jM={};Object.defineProperty(jM,"__esModule",{value:!0});jM.shareReplay=void 0;var sUe=ev,aUe=dx;function lUe(e,t,n){var r,i,o,s,a=!1;return e&&typeof e=="object"?(r=e.bufferSize,s=r===void 0?1/0:r,i=e.windowTime,t=i===void 0?1/0:i,o=e.refCount,a=o===void 0?!1:o,n=e.scheduler):s=e??1/0,aUe.share({connector:function(){return new sUe.ReplaySubject(s,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}jM.shareReplay=lUe;var UM={};Object.defineProperty(UM,"__esModule",{value:!0});UM.single=void 0;var cUe=Sl,uUe=G1,dUe=H1,fUe=bt,hUe=Tt;function pUe(e){return fUe.operate(function(t,n){var r=!1,i,o=!1,s=0;t.subscribe(hUe.createOperatorSubscriber(n,function(a){o=!0,(!e||e(a,s++,t))&&(r&&n.error(new uUe.SequenceError("Too many matching values")),r=!0,i=a)},function(){r?(n.next(i),n.complete()):n.error(o?new dUe.NotFoundError("No matching values"):new cUe.EmptyError)}))})}UM.single=pUe;var VM={};Object.defineProperty(VM,"__esModule",{value:!0});VM.skip=void 0;var mUe=Lc;function gUe(e){return mUe.filter(function(t,n){return e<=n})}VM.skip=gUe;var HM={};Object.defineProperty(HM,"__esModule",{value:!0});HM.skipLast=void 0;var vUe=si,yUe=bt,bUe=Tt;function xUe(e){return e<=0?vUe.identity:yUe.operate(function(t,n){var r=new Array(e),i=0;return t.subscribe(bUe.createOperatorSubscriber(n,function(o){var s=i++;if(s<e)r[s]=o;else{var a=s%e,l=r[a];r[a]=o,n.next(l)}})),function(){r=null}})}HM.skipLast=xUe;var GM={};Object.defineProperty(GM,"__esModule",{value:!0});GM.skipUntil=void 0;var _Ue=bt,Ij=Tt,wUe=$t,SUe=oi;function CUe(e){return _Ue.operate(function(t,n){var r=!1,i=Ij.createOperatorSubscriber(n,function(){i==null||i.unsubscribe(),r=!0},SUe.noop);wUe.innerFrom(e).subscribe(i),t.subscribe(Ij.createOperatorSubscriber(n,function(o){return r&&n.next(o)}))})}GM.skipUntil=CUe;var WM={};Object.defineProperty(WM,"__esModule",{value:!0});WM.skipWhile=void 0;var AUe=bt,PUe=Tt;function MUe(e){return AUe.operate(function(t,n){var r=!1,i=0;t.subscribe(PUe.createOperatorSubscriber(n,function(o){return(r||(r=!e(o,i++)))&&n.next(o)}))})}WM.skipWhile=MUe;var qM={};Object.defineProperty(qM,"__esModule",{value:!0});qM.startWith=void 0;var Rj=Th,EUe=qr,TUe=bt;function OUe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=EUe.popScheduler(e);return TUe.operate(function(r,i){(n?Rj.concat(e,r,n):Rj.concat(e,r)).subscribe(i)})}qM.startWith=OUe;var YM={},$h={};Object.defineProperty($h,"__esModule",{value:!0});$h.switchMap=void 0;var IUe=$t,RUe=bt,kj=Tt;function kUe(e,t){return RUe.operate(function(n,r){var i=null,o=0,s=!1,a=function(){return s&&!i&&r.complete()};n.subscribe(kj.createOperatorSubscriber(r,function(l){i==null||i.unsubscribe();var c=0,u=o++;IUe.innerFrom(e(l,u)).subscribe(i=kj.createOperatorSubscriber(r,function(d){return r.next(t?t(l,d,u,c++):d)},function(){i=null,a()}))},function(){s=!0,a()}))})}$h.switchMap=kUe;Object.defineProperty(YM,"__esModule",{value:!0});YM.switchAll=void 0;var LUe=$h,$Ue=si;function DUe(){return LUe.switchMap($Ue.identity)}YM.switchAll=DUe;var XM={};Object.defineProperty(XM,"__esModule",{value:!0});XM.switchMapTo=void 0;var Lj=$h,BUe=An;function NUe(e,t){return BUe.isFunction(t)?Lj.switchMap(function(){return e},t):Lj.switchMap(function(){return e})}XM.switchMapTo=NUe;var KM={};Object.defineProperty(KM,"__esModule",{value:!0});KM.switchScan=void 0;var FUe=$h,zUe=bt;function jUe(e,t){return zUe.operate(function(n,r){var i=t;return FUe.switchMap(function(o,s){return e(i,o,s)},function(o,s){return i=s,s})(n).subscribe(r),function(){i=null}})}KM.switchScan=jUe;var ZM={};Object.defineProperty(ZM,"__esModule",{value:!0});ZM.takeUntil=void 0;var UUe=bt,VUe=Tt,HUe=$t,GUe=oi;function WUe(e){return UUe.operate(function(t,n){HUe.innerFrom(e).subscribe(VUe.createOperatorSubscriber(n,function(){return n.complete()},GUe.noop)),!n.closed&&t.subscribe(n)})}ZM.takeUntil=WUe;var JM={};Object.defineProperty(JM,"__esModule",{value:!0});JM.takeWhile=void 0;var qUe=bt,YUe=Tt;function XUe(e,t){return t===void 0&&(t=!1),qUe.operate(function(n,r){var i=0;n.subscribe(YUe.createOperatorSubscriber(r,function(o){var s=e(o,i++);(s||t)&&r.next(o),!s&&r.complete()}))})}JM.takeWhile=XUe;var QM={};Object.defineProperty(QM,"__esModule",{value:!0});QM.tap=void 0;var KUe=An,ZUe=bt,JUe=Tt,QUe=si;function e9e(e,t,n){var r=KUe.isFunction(e)||t||n?{next:e,error:t,complete:n}:e;return r?ZUe.operate(function(i,o){var s;(s=r.subscribe)===null||s===void 0||s.call(r);var a=!0;i.subscribe(JUe.createOperatorSubscriber(o,function(l){var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},function(){var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},function(l){var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},function(){var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):QUe.identity}QM.tap=e9e;var fx={};Object.defineProperty(fx,"__esModule",{value:!0});fx.throttle=void 0;var t9e=bt,$j=Tt,n9e=$t;function r9e(e,t){return t9e.operate(function(n,r){var i=t??{},o=i.leading,s=o===void 0?!0:o,a=i.trailing,l=a===void 0?!1:a,c=!1,u=null,d=null,f=!1,h=function(){d==null||d.unsubscribe(),d=null,l&&(v(),f&&r.complete())},p=function(){d=null,f&&r.complete()},g=function(m){return d=n9e.innerFrom(e(m)).subscribe($j.createOperatorSubscriber(r,h,p))},v=function(){if(c){c=!1;var m=u;u=null,r.next(m),!f&&g(m)}};n.subscribe($j.createOperatorSubscriber(r,function(m){c=!0,u=m,!(d&&!d.closed)&&(s?v():g(m))},function(){f=!0,!(l&&c&&d&&!d.closed)&&r.complete()}))})}fx.throttle=r9e;var eE={};Object.defineProperty(eE,"__esModule",{value:!0});eE.throttleTime=void 0;var i9e=ko,o9e=fx,s9e=Pl;function a9e(e,t,n){t===void 0&&(t=i9e.asyncScheduler);var r=s9e.timer(e,t);return o9e.throttle(function(){return r},n)}eE.throttleTime=a9e;var og={};Object.defineProperty(og,"__esModule",{value:!0});og.TimeInterval=og.timeInterval=void 0;var l9e=ko,c9e=bt,u9e=Tt;function d9e(e){return e===void 0&&(e=l9e.asyncScheduler),c9e.operate(function(t,n){var r=e.now();t.subscribe(u9e.createOperatorSubscriber(n,function(i){var o=e.now(),s=o-r;r=o,n.next(new zee(i,s))}))})}og.timeInterval=d9e;var zee=function(){function e(t,n){this.value=t,this.interval=n}return e}();og.TimeInterval=zee;var tE={};Object.defineProperty(tE,"__esModule",{value:!0});tE.timeoutWith=void 0;var f9e=ko,h9e=ov,p9e=E2;function m9e(e,t,n){var r,i,o;if(n=n??f9e.async,h9e.isValidDate(e)?r=e:typeof e=="number"&&(i=e),t)o=function(){return t};else throw new TypeError("No observable provided to switch to");if(r==null&&i==null)throw new TypeError("No timeout provided.");return p9e.timeout({first:r,each:i,scheduler:n,with:o})}tE.timeoutWith=m9e;var nE={};Object.defineProperty(nE,"__esModule",{value:!0});nE.timestamp=void 0;var g9e=dP,v9e=Al;function y9e(e){return e===void 0&&(e=g9e.dateTimestampProvider),v9e.map(function(t){return{value:t,timestamp:e.now()}})}nE.timestamp=y9e;var rE={};Object.defineProperty(rE,"__esModule",{value:!0});rE.window=void 0;var Dj=Lr,b9e=bt,Bj=Tt,x9e=oi,_9e=$t;function w9e(e){return b9e.operate(function(t,n){var r=new Dj.Subject;n.next(r.asObservable());var i=function(o){r.error(o),n.error(o)};return t.subscribe(Bj.createOperatorSubscriber(n,function(o){return r==null?void 0:r.next(o)},function(){r.complete(),n.complete()},i)),_9e.innerFrom(e).subscribe(Bj.createOperatorSubscriber(n,function(){r.complete(),n.next(r=new Dj.Subject)},x9e.noop,i)),function(){r==null||r.unsubscribe(),r=null}})}rE.window=w9e;var iE={},S9e=we&&we.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(iE,"__esModule",{value:!0});iE.windowCount=void 0;var Nj=Lr,C9e=bt,A9e=Tt;function P9e(e,t){t===void 0&&(t=0);var n=t>0?t:e;return C9e.operate(function(r,i){var o=[new Nj.Subject],s=0;i.next(o[0].asObservable()),r.subscribe(A9e.createOperatorSubscriber(i,function(a){var l,c;try{for(var u=S9e(o),d=u.next();!d.done;d=u.next()){var f=d.value;f.next(a)}}catch(g){l={error:g}}finally{try{d&&!d.done&&(c=u.return)&&c.call(u)}finally{if(l)throw l.error}}var h=s-e+1;if(h>=0&&h%n===0&&o.shift().complete(),++s%n===0){var p=new Nj.Subject;o.push(p),i.next(p.asObservable())}},function(){for(;o.length>0;)o.shift().complete();i.complete()},function(a){for(;o.length>0;)o.shift().error(a);i.error(a)},function(){o=null}))})}iE.windowCount=P9e;var oE={};Object.defineProperty(oE,"__esModule",{value:!0});oE.windowTime=void 0;var M9e=Lr,E9e=ko,T9e=ni,O9e=bt,I9e=Tt,R9e=Ca,k9e=qr,Fj=Pa;function L9e(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=(t=k9e.popScheduler(r))!==null&&t!==void 0?t:E9e.asyncScheduler,s=(n=r[0])!==null&&n!==void 0?n:null,a=r[1]||1/0;return O9e.operate(function(l,c){var u=[],d=!1,f=function(v){var m=v.window,y=v.subs;m.complete(),y.unsubscribe(),R9e.arrRemove(u,v),d&&h()},h=function(){if(u){var v=new T9e.Subscription;c.add(v);var m=new M9e.Subject,y={window:m,subs:v,seen:0};u.push(y),c.next(m.asObservable()),Fj.executeSchedule(v,o,function(){return f(y)},e)}};s!==null&&s>=0?Fj.executeSchedule(c,o,h,s,!0):d=!0,h();var p=function(v){return u.slice().forEach(v)},g=function(v){p(function(m){var y=m.window;return v(y)}),v(c),c.unsubscribe()};return l.subscribe(I9e.createOperatorSubscriber(c,function(v){p(function(m){m.window.next(v),a<=++m.seen&&f(m)})},function(){return g(function(v){return v.complete()})},function(v){return g(function(m){return m.error(v)})})),function(){u=null}})}oE.windowTime=L9e;var sE={},$9e=we&&we.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(sE,"__esModule",{value:!0});sE.windowToggle=void 0;var D9e=Lr,B9e=ni,N9e=bt,zj=$t,A3=Tt,jj=oi,F9e=Ca;function z9e(e,t){return N9e.operate(function(n,r){var i=[],o=function(s){for(;0<i.length;)i.shift().error(s);r.error(s)};zj.innerFrom(e).subscribe(A3.createOperatorSubscriber(r,function(s){var a=new D9e.Subject;i.push(a);var l=new B9e.Subscription,c=function(){F9e.arrRemove(i,a),a.complete(),l.unsubscribe()},u;try{u=zj.innerFrom(t(s))}catch(d){o(d);return}r.next(a.asObservable()),l.add(u.subscribe(A3.createOperatorSubscriber(r,c,jj.noop,o)))},jj.noop)),n.subscribe(A3.createOperatorSubscriber(r,function(s){var a,l,c=i.slice();try{for(var u=$9e(c),d=u.next();!d.done;d=u.next()){var f=d.value;f.next(s)}}catch(h){a={error:h}}finally{try{d&&!d.done&&(l=u.return)&&l.call(u)}finally{if(a)throw a.error}}},function(){for(;0<i.length;)i.shift().complete();r.complete()},o,function(){for(;0<i.length;)i.shift().unsubscribe()}))})}sE.windowToggle=z9e;var aE={};Object.defineProperty(aE,"__esModule",{value:!0});aE.windowWhen=void 0;var j9e=Lr,U9e=bt,Uj=Tt,V9e=$t;function H9e(e){return U9e.operate(function(t,n){var r,i,o=function(a){r.error(a),n.error(a)},s=function(){i==null||i.unsubscribe(),r==null||r.complete(),r=new j9e.Subject,n.next(r.asObservable());var a;try{a=V9e.innerFrom(e())}catch(l){o(l);return}a.subscribe(i=Uj.createOperatorSubscriber(n,s,s,o))};s(),t.subscribe(Uj.createOperatorSubscriber(n,function(a){return r.next(a)},function(){r.complete(),n.complete()},o,function(){i==null||i.unsubscribe(),r=null}))})}aE.windowWhen=H9e;var lE={},Vj=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},Hj=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(lE,"__esModule",{value:!0});lE.withLatestFrom=void 0;var G9e=bt,Gj=Tt,W9e=$t,q9e=si,Y9e=oi,X9e=qr;function K9e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=X9e.popResultSelector(e);return G9e.operate(function(r,i){for(var o=e.length,s=new Array(o),a=e.map(function(){return!1}),l=!1,c=function(d){W9e.innerFrom(e[d]).subscribe(Gj.createOperatorSubscriber(i,function(f){s[d]=f,!l&&!a[d]&&(a[d]=!0,(l=a.every(q9e.identity))&&(a=null))},Y9e.noop))},u=0;u<o;u++)c(u);r.subscribe(Gj.createOperatorSubscriber(i,function(d){if(l){var f=Hj([d],Vj(s));i.next(n?n.apply(void 0,Hj([],Vj(f))):f)}}))})}lE.withLatestFrom=K9e;var cE={};Object.defineProperty(cE,"__esModule",{value:!0});cE.zipAll=void 0;var Z9e=lv,J9e=Q1;function Q9e(e){return J9e.joinAllInternals(Z9e.zip,e)}cE.zipAll=Q9e;var uE={},dE={},e7e=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},t7e=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(dE,"__esModule",{value:!0});dE.zip=void 0;var n7e=lv,r7e=bt;function i7e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r7e.operate(function(n,r){n7e.zip.apply(void 0,t7e([n],e7e(e))).subscribe(r)})}dE.zip=i7e;var o7e=we&&we.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},s7e=we&&we.__spreadArray||function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};Object.defineProperty(uE,"__esModule",{value:!0});uE.zipWith=void 0;var a7e=dE;function l7e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a7e.zip.apply(void 0,s7e([],o7e(e)))}uE.zipWith=l7e;(function(e){var t=we&&we.__createBinding||(Object.create?function(jh,Uh,El,kd){kd===void 0&&(kd=El),Object.defineProperty(jh,kd,{enumerable:!0,get:function(){return Uh[El]}})}:function(jh,Uh,El,kd){kd===void 0&&(kd=El),jh[kd]=Uh[El]}),n=we&&we.__exportStar||function(jh,Uh){for(var El in jh)El!=="default"&&!Object.prototype.hasOwnProperty.call(Uh,El)&&t(Uh,jh,El)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var r=Mn;Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return r.Observable}});var i=Ah;Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return i.ConnectableObservable}});var o=Ch;Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return o.observable}});var s=uP;Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return s.animationFrames}});var a=Lr;Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return a.Subject}});var l=R1;Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return l.BehaviorSubject}});var c=ev;Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return c.ReplaySubject}});var u=tv;Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return u.AsyncSubject}});var d=uee;Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return d.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return d.asapScheduler}});var f=ko;Object.defineProperty(e,"async",{enumerable:!0,get:function(){return f.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return f.asyncScheduler}});var h=hee;Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return h.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return h.queueScheduler}});var p=pee;Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return p.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return p.animationFrameScheduler}});var g=rg;Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return g.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return g.VirtualAction}});var v=k1;Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return v.Scheduler}});var m=ni;Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return m.Subscription}});var y=Qg;Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return y.Subscriber}});var b=bP;Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return b.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return b.NotificationKind}});var _=gc;Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return _.pipe}});var x=oi;Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return x.noop}});var w=si;Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return w.identity}});var S=CP;Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return S.isObservable}});var C=AP;Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return C.lastValueFrom}});var A=PP;Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return A.firstValueFrom}});var T=V1;Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return T.ArgumentOutOfRangeError}});var O=Sl;Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return O.EmptyError}});var R=H1;Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return R.NotFoundError}});var L=I1;Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return L.ObjectUnsubscribedError}});var D=G1;Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return D.SequenceError}});var $=E2;Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return $.TimeoutError}});var z=E1;Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return z.UnsubscriptionError}});var H=MP;Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return H.bindCallback}});var B=EP;Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return B.bindNodeCallback}});var V=Hu;Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return V.combineLatest}});var J=Th;Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return J.concat}});var K=TP;Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return K.connectable}});var ie=Ih;Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return ie.defer}});var ce=xa;Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return ce.empty}});var pe=OP;Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return pe.forkJoin}});var se=Aa;Object.defineProperty(e,"from",{enumerable:!0,get:function(){return se.from}});var G=IP;Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return G.fromEvent}});var he=RP;Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return he.fromEventPattern}});var Z=kP;Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return Z.generate}});var ae=LP;Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return ae.iif}});var oe=X1;Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return oe.interval}});var te=$P;Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return te.merge}});var ve=Ak;Object.defineProperty(e,"never",{enumerable:!0,get:function(){return ve.never}});var ne=nv;Object.defineProperty(e,"of",{enumerable:!0,get:function(){return ne.of}});var xe=K1;Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return xe.onErrorResumeNext}});var Ce=DP;Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return Ce.pairs}});var me=BP;Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return me.partition}});var X=Yf;Object.defineProperty(e,"race",{enumerable:!0,get:function(){return X.race}});var Q=FP;Object.defineProperty(e,"range",{enumerable:!0,get:function(){return Q.range}});var Re=U1;Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return Re.throwError}});var Pe=Pl;Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return Pe.timer}});var le=zP;Object.defineProperty(e,"using",{enumerable:!0,get:function(){return le.using}});var Oe=lv;Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return Oe.zip}});var Be=L1;Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Be.scheduled}});var De=xa;Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return De.EMPTY}});var Ee=Ak;Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return Ee.NEVER}}),n(Iee,e);var Ie=ud;Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Ie.config}});var U=Z1;Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return U.audit}});var E=jP;Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return E.auditTime}});var P=UP;Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return P.buffer}});var ee=VP;Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return ee.bufferCount}});var ye=HP;Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return ye.bufferTime}});var be=GP;Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return be.bufferToggle}});var Me=WP;Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return Me.bufferWhen}});var ze=qP;Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return ze.catchError}});var Ge=YP;Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return Ge.combineAll}});var Xe=J1;Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return Xe.combineLatestAll}});var ut=XP;Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return ut.combineLatestWith}});var rt=sv;Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return rt.concatAll}});var dt=nx;Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return dt.concatMap}});var yt=ZP;Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return yt.concatMapTo}});var Ke=JP;Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return Ke.concatWith}});var gt=cv;Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return gt.connect}});var ct=tM;Object.defineProperty(e,"count",{enumerable:!0,get:function(){return ct.count}});var mt=nM;Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return mt.debounce}});var Dt=rM;Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return Dt.debounceTime}});var _e=Rh;Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return _e.defaultIfEmpty}});var We=iM;Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return We.delay}});var Ue=rx;Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return Ue.delayWhen}});var N=oM;Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return N.dematerialize}});var k=sM;Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return k.distinct}});var F=sx;Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return F.distinctUntilChanged}});var j=aM;Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return j.distinctUntilKeyChanged}});var Y=lM;Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return Y.elementAt}});var ue=cM;Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return ue.endWith}});var ge=uM;Object.defineProperty(e,"every",{enumerable:!0,get:function(){return ge.every}});var Se=dM;Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Se.exhaust}});var Ne=ax;Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Ne.exhaustAll}});var Fe=lx;Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Fe.exhaustMap}});var Ye=fM;Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return Ye.expand}});var at=Lc;Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return at.filter}});var Ae=hM;Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Ae.finalize}});var de=Xf;Object.defineProperty(e,"find",{enumerable:!0,get:function(){return de.find}});var fe=pM;Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return fe.findIndex}});var ke=mM;Object.defineProperty(e,"first",{enumerable:!0,get:function(){return ke.first}});var qe=gM;Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return qe.groupBy}});var st=ix;Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return st.ignoreElements}});var Ct=vM;Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Ct.isEmpty}});var ft=yM;Object.defineProperty(e,"last",{enumerable:!0,get:function(){return ft.last}});var zt=Al;Object.defineProperty(e,"map",{enumerable:!0,get:function(){return zt.map}});var Cr=ox;Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return Cr.mapTo}});var jt=bM;Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return jt.materialize}});var Ze=xM;Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Ze.max}});var Pt=Oh;Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Pt.mergeAll}});var Wt=_M;Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return Wt.flatMap}});var un=Ma;Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return un.mergeMap}});var Ut=wM;Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Ut.mergeMapTo}});var rn=SM;Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return rn.mergeScan}});var Jt=CM;Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return Jt.mergeWith}});var gn=PM;Object.defineProperty(e,"min",{enumerable:!0,get:function(){return gn.min}});var Kr=uv;Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return Kr.multicast}});var Zt=Mh;Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return Zt.observeOn}});var hr=ig;Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return hr.onErrorResumeNextWith}});var Fh=MM;Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return Fh.pairwise}});var Fc=EM;Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Fc.pluck}});var _v=TM;Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return _v.publish}});var vd=OM;Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return vd.publishBehavior}});var yd=IM;Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return yd.publishLast}});var bd=RM;Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return bd.publishReplay}});var xd=kM;Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return xd.raceWith}});var _d=hd;Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return _d.reduce}});var wd=LM;Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return wd.repeat}});var Rx=$M;Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Rx.repeatWhen}});var Sd=DM;Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return Sd.retry}});var Cd=BM;Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Cd.retryWhen}});var Ad=O1;Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return Ad.refCount}});var Pd=ux;Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return Pd.sample}});var Md=NM;Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return Md.sampleTime}});var Ed=FM;Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Ed.scan}});var Td=zM;Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return Td.sequenceEqual}});var Od=dx;Object.defineProperty(e,"share",{enumerable:!0,get:function(){return Od.share}});var Id=jM;Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return Id.shareReplay}});var Ta=UM;Object.defineProperty(e,"single",{enumerable:!0,get:function(){return Ta.single}});var zh=VM;Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return zh.skip}});var kx=HM;Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return kx.skipLast}});var ds=GM;Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return ds.skipUntil}});var Rd=WM;Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return Rd.skipWhile}});var wv=qM;Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return wv.startWith}});var Sv=Eh;Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return Sv.subscribeOn}});var Rie=YM;Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Rie.switchAll}});var kie=$h;Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return kie.switchMap}});var Lie=XM;Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Lie.switchMapTo}});var $ie=KM;Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return $ie.switchScan}});var Die=kh;Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Die.take}});var Bie=cx;Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Bie.takeLast}});var Nie=ZM;Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Nie.takeUntil}});var Fie=JM;Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return Fie.takeWhile}});var zie=QM;Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return zie.tap}});var jie=fx;Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return jie.throttle}});var Uie=eE;Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Uie.throttleTime}});var Vie=Lh;Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Vie.throwIfEmpty}});var Hie=og;Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Hie.timeInterval}});var Gie=E2;Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Gie.timeout}});var Wie=tE;Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Wie.timeoutWith}});var qie=nE;Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return qie.timestamp}});var Yie=ex;Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return Yie.toArray}});var Xie=rE;Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Xie.window}});var Kie=iE;Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return Kie.windowCount}});var Zie=oE;Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Zie.windowTime}});var Jie=sE;Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Jie.windowToggle}});var Qie=aE;Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return Qie.windowWhen}});var eoe=lE;Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return eoe.withLatestFrom}});var toe=cE;Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return toe.zipAll}});var noe=uE;Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return noe.zipWith}})})(tee);Object.defineProperty(ho,"__esModule",{value:!0});ho.isAbortException=ho.observeAbortSignal=ho.makeAbortError=ho.abortBreakPoint=ho.checkAbortSignal=void 0;const Wj=tee;class c7e extends Error{}function jee(e){if(e){if(!(e instanceof AbortSignal))throw new TypeError("must pass an AbortSignal");if(e.aborted)throw Uee()}}ho.checkAbortSignal=jee;function u7e(e){return new Promise(t=>setTimeout(t,e))}async function d7e(e){await u7e(1),jee(e)}ho.abortBreakPoint=d7e;function Uee(){if(typeof DOMException<"u")return new DOMException("aborted","AbortError");const e=new c7e("aborted");return e.code="ERR_ABORTED",e}ho.makeAbortError=Uee;function f7e(e){return e?(0,Wj.fromEvent)(e,"abort"):Wj.Observable.create()}ho.observeAbortSignal=f7e;function h7e(e){return e instanceof Error&&(e.name==="AbortError"||e.code==="ERR_ABORTED"||!!/\b(aborted|aborterror)\b/i.test(e.message))}ho.isAbortException=h7e;var fE={};Object.defineProperty(fE,"__esModule",{value:!0});const P3=I;function p7e(){const e=(0,P3.useRef)(null),[t,n]=(0,P3.useState)({width:void 0,height:void 0});return(0,P3.useEffect)(()=>{if(!e.current)return;const r=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:void 0;if(!r)return;const i=new r(o=>{n({width:o[0].contentRect.width,height:o[0].contentRect.height})});return i.observe(e.current),()=>{i.disconnect()}},[]),[e,t]}fE.default=p7e;var Vee={},m7e={grad:.9,turn:360,rad:360/(2*Math.PI)},Ol=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},di=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},Ps=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e>t?e:t},Hee=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},qj=function(e){return{r:Ps(e.r,0,255),g:Ps(e.g,0,255),b:Ps(e.b,0,255),a:Ps(e.a)}},M3=function(e){return{r:di(e.r),g:di(e.g),b:di(e.b),a:di(e.a,3)}},g7e=/^#([0-9a-f]{3,8})$/i,y_=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Gee=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),s=o-Math.min(t,n,r),a=s?o===t?(n-r)/s:o===n?2+(r-t)/s:4+(t-n)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*100:0,v:o/255*100,a:i}},Wee=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),s=r*(1-n),a=r*(1-(t-o)*n),l=r*(1-(1-t+o)*n),c=o%6;return{r:255*[r,a,s,s,l,r][c],g:255*[l,r,r,a,s,s][c],b:255*[s,s,l,r,r,a][c],a:i}},Yj=function(e){return{h:Hee(e.h),s:Ps(e.s,0,100),l:Ps(e.l,0,100),a:Ps(e.a)}},Xj=function(e){return{h:di(e.h),s:di(e.s),l:di(e.l),a:di(e.a,3)}},Kj=function(e){return Wee((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},dy=function(e){return{h:(t=Gee(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},v7e=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y7e=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b7e=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,x7e=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Pk={string:[[function(e){var t=g7e.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?di(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?di(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=b7e.exec(e)||x7e.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:qj({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=v7e.exec(e)||y7e.exec(e);if(!t)return null;var n,r,i=Yj({h:(n=t[1],r=t[2],r===void 0&&(r="deg"),Number(n)*(m7e[r]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Kj(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=i===void 0?1:i;return Ol(t)&&Ol(n)&&Ol(r)?qj({r:Number(t),g:Number(n),b:Number(r),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,o=i===void 0?1:i;if(!Ol(t)||!Ol(n)||!Ol(r))return null;var s=Yj({h:Number(t),s:Number(n),l:Number(r),a:Number(o)});return Kj(s)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,o=i===void 0?1:i;if(!Ol(t)||!Ol(n)||!Ol(r))return null;var s=function(a){return{h:Hee(a.h),s:Ps(a.s,0,100),v:Ps(a.v,0,100),a:Ps(a.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(o)});return Wee(s)},"hsv"]]},Zj=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},qee=function(e){return typeof e=="string"?Zj(e.trim(),Pk.string):typeof e=="object"&&e!==null?Zj(e,Pk.object):[null,void 0]},_7e=function(e){return qee(e)[1]},E3=function(e,t){var n=dy(e);return{h:n.h,s:Ps(n.s+100*t,0,100),l:n.l,a:n.a}},T3=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Jj=function(e,t){var n=dy(e);return{h:n.h,s:n.s,l:Ps(n.l+100*t,0,100),a:n.a}},ob=function(){function e(t){this.parsed=qee(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return di(T3(this.rgba),2)},e.prototype.isDark=function(){return T3(this.rgba)<.5},e.prototype.isLight=function(){return T3(this.rgba)>=.5},e.prototype.toHex=function(){return t=M3(this.rgba),n=t.r,r=t.g,i=t.b,s=(o=t.a)<1?y_(di(255*o)):"","#"+y_(n)+y_(r)+y_(i)+s;var t,n,r,i,o,s},e.prototype.toRgb=function(){return M3(this.rgba)},e.prototype.toRgbString=function(){return t=M3(this.rgba),n=t.r,r=t.g,i=t.b,(o=t.a)<1?"rgba("+n+", "+r+", "+i+", "+o+")":"rgb("+n+", "+r+", "+i+")";var t,n,r,i,o},e.prototype.toHsl=function(){return Xj(dy(this.rgba))},e.prototype.toHslString=function(){return t=Xj(dy(this.rgba)),n=t.h,r=t.s,i=t.l,(o=t.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+o+")":"hsl("+n+", "+r+"%, "+i+"%)";var t,n,r,i,o},e.prototype.toHsv=function(){return t=Gee(this.rgba),{h:di(t.h),s:di(t.s),v:di(t.v),a:di(t.a,3)};var t},e.prototype.invert=function(){return gs({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),gs(E3(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),gs(E3(this.rgba,-t))},e.prototype.grayscale=function(){return gs(E3(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),gs(Jj(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),gs(Jj(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?gs({r:(n=this.rgba).r,g:n.g,b:n.b,a:t}):di(this.rgba.a,3);var n},e.prototype.hue=function(t){var n=dy(this.rgba);return typeof t=="number"?gs({h:t,s:n.s,l:n.l,a:n.a}):di(n.h)},e.prototype.isEqual=function(t){return this.toHex()===gs(t).toHex()},e}(),gs=function(e){return e instanceof ob?e:new ob(e)},Qj=[],Q4=function(e){e.forEach(function(t){Qj.indexOf(t)<0&&(t(ob,Pk),Qj.push(t))})},w7e=function(){return new ob({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};const S7e=Object.freeze(Object.defineProperty({__proto__:null,Colord:ob,colord:gs,extend:Q4,getFormat:_7e,random:w7e},Symbol.toStringTag,{value:"Module"})),e8=Zi(S7e);var Ja=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=1),e>n?n:e>t?e:t},O3=function(e){var t=e/255;return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},I3=function(e){return 255*(e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e)},eD=96.422,tD=100,nD=82.521,C7e=function(e){var t,n,r={x:.9555766*(t=e).x+-.0230393*t.y+.0631636*t.z,y:-.0282895*t.x+1.0099416*t.y+.0210077*t.z,z:.0122982*t.x+-.020483*t.y+1.3299098*t.z};return n={r:I3(.032404542*r.x-.015371385*r.y-.004985314*r.z),g:I3(-.00969266*r.x+.018760108*r.y+41556e-8*r.z),b:I3(556434e-9*r.x-.002040259*r.y+.010572252*r.z),a:e.a},{r:Ja(n.r,0,255),g:Ja(n.g,0,255),b:Ja(n.b,0,255),a:Ja(n.a)}},A7e=function(e){var t=O3(e.r),n=O3(e.g),r=O3(e.b);return function(i){return{x:Ja(i.x,0,eD),y:Ja(i.y,0,tD),z:Ja(i.z,0,nD),a:Ja(i.a)}}(function(i){return{x:1.0478112*i.x+.0228866*i.y+-.050127*i.z,y:.0295424*i.x+.9904844*i.y+-.0170491*i.z,z:-.0092345*i.x+.0150436*i.y+.7521316*i.z,a:i.a}}({x:100*(.4124564*t+.3575761*n+.1804375*r),y:100*(.2126729*t+.7151522*n+.072175*r),z:100*(.0193339*t+.119192*n+.9503041*r),a:e.a}))},fy=216/24389,mm=24389/27,t8=function(e){var t=A7e(e),n=t.x/eD,r=t.y/tD,i=t.z/nD;return n=n>fy?Math.cbrt(n):(mm*n+16)/116,{l:116*(r=r>fy?Math.cbrt(r):(mm*r+16)/116)-16,a:500*(n-r),b:200*(r-(i=i>fy?Math.cbrt(i):(mm*i+16)/116)),alpha:t.a}},P7e=function(e,t,n){var r,i=t8(e),o=t8(t);return function(s){var a=(s.l+16)/116,l=s.a/500+a,c=a-s.b/200;return C7e({x:(Math.pow(l,3)>fy?Math.pow(l,3):(116*l-16)/mm)*eD,y:(s.l>8?Math.pow((s.l+16)/116,3):s.l/mm)*tD,z:(Math.pow(c,3)>fy?Math.pow(c,3):(116*c-16)/mm)*nD,a:s.alpha})}({l:Ja((r={l:i.l*(1-n)+o.l*n,a:i.a*(1-n)+o.a*n,b:i.b*(1-n)+o.b*n,alpha:i.alpha*(1-n)+o.alpha*n}).l,0,400),a:r.a,b:r.b,alpha:Ja(r.alpha)})},M7e=function(e){function t(n,r,i){i===void 0&&(i=5);for(var o=[],s=1/(i-1),a=0;a<=i-1;a++)o.push(n.mix(r,s*a));return o}e.prototype.mix=function(n,r){r===void 0&&(r=.5);var i=n instanceof e?n:new e(n),o=P7e(this.toRgb(),i.toRgb(),r);return new e(o)},e.prototype.tints=function(n){return t(this,"#fff",n)},e.prototype.shades=function(n){return t(this,"#000",n)},e.prototype.tones=function(n){return t(this,"#808080",n)}};function rD(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var o={};e.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(s!=null&&s.closest){var u=this.toRgb(),d=1/0,f="black";if(!o.length)for(var h in n)o[h]=new e(n[h]).toRgb();for(var p in n){var g=(a=u,l=o[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));g<d&&(d=g,f=p)}return f}},t.string.push([function(s){var a=s.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new e(l).toRgb():null},"name"])}const E7e=Object.freeze(Object.defineProperty({__proto__:null,default:rD},Symbol.toStringTag,{value:"Module"})),T7e=Zi(E7e);(function(e){var t=we&&we.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.colord=e.Colord=void 0;const n=e8,r=t(M7e),i=t(T7e);(0,n.extend)([r.default,i.default]);var o=e8;Object.defineProperty(e,"Colord",{enumerable:!0,get:function(){return o.Colord}}),Object.defineProperty(e,"colord",{enumerable:!0,get:function(){return o.colord}})})(Vee);var sg={};Object.defineProperty(sg,"__esModule",{value:!0});sg.whenPresent=sg.when=void 0;const O7e=QQ,I7e=ho;function Yee(e,{timeout:t,signal:n,name:r}={}){return new Promise((i,o)=>{let s=!1;const a=(0,O7e.when)(e);let l,c=()=>{};t&&(l=setTimeout(()=>{s||(s=!0,a.cancel(),o(new Error(`timed out waiting for ${r||"whenPresent"}`)))},t),c=()=>l&&clearTimeout(l)),n&&n.addEventListener("abort",()=>{s||(s=!0,a.cancel(),c(),o((0,I7e.makeAbortError)()))}),a.then(()=>{s||(s=!0,c(),i(!0))}).catch(u=>{s||(s=!0,c(),o(u))})})}sg.when=Yee;async function R7e(e,t={}){return await Yee(()=>{const n=e();return n!=null},t),e()}sg.whenPresent=R7e;var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.isContainedWithin=Pu.doesIntersect2=Pu.intersection2=void 0;function k7e(e,t,n,r){return t>n&&e<r&&r-n&&t-e?e>n?t<r?[e,t]:[e,r]:t<r?[n,t]:[n,r]:[]}Pu.intersection2=k7e;function L7e(e,t,n,r){return t>n&&e<r}Pu.doesIntersect2=L7e;function $7e(e,t,n,r){return n<=e&&r>=t}Pu.isContainedWithin=$7e;var hE={};Object.defineProperty(hE,"__esModule",{value:!0});hE.dedupe=void 0;function D7e(e,t=JSON.stringify){const n=[],r=new Set;for(const i of e){const o=t(i);r.has(o)||(n.push(i),r.add(o))}return n}hE.dedupe=D7e;var yi={},Xee=!1,T2={},pE={};const sb={METHOD:"method",PROPERTY:"property"};class Kee{constructor(t,n){this.inst=t,this.args=n}}class B7e extends Kee{constructor(t,n){super(t,n),this.type=sb.METHOD}execute(t){t[this.inst](...this.args)}}class N7e extends Kee{constructor(t,n){super(t,n),this.type=sb.PROPERTY}execute(t){t[this.inst]=this.args[0]}}const F7e={[sb.METHOD]:B7e,[sb.PROPERTY]:N7e};class Zee{constructor(t,n,r){return new F7e[t](n,r)}}Object.entries(sb).forEach(([e,t])=>{Object.defineProperty(Zee,e,{value:t,configurable:!1,enumerable:!0,writable:!1})});pE=Zee;const Jee=Object.freeze({METHODS:["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearHitRegions","clearRect","clip","closePath","drawFocusIfNeeded","drawImage","ellipse","fill","fillRect","fillText","lineTo","moveTo","putImageData","quadraticCurveTo","rect","removeHitRegion","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],PROPERTIES:["direction","fillStyle","filter","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline"]}),Fa=Object.freeze({sequence:Symbol.for("sequence"),push:Symbol.for("push"),fromJSON:Symbol.for("fromJSON")});class iD{constructor(t=null){this[Fa.sequence]=[],t&&this[Fa.fromJSON](t)}[Fa.fromJSON](t={sequence:[]}){t.sequence.forEach(({type:n,inst:r,args:i})=>{this[Fa.push](n,r,i)})}[Fa.push](t,n,r){this[Fa.sequence].push(new pE(t,n,r))}execute(t){t.save(),this[Fa.sequence].forEach(n=>n.execute(t)),t.restore()}toJSON(){return{sequence:this[Fa.sequence]}}}Jee.METHODS.forEach(e=>{Object.defineProperty(iD.prototype,e,{value:function(...n){this[Fa.push](pE.METHOD,e,n)},writable:!1,enumerable:!0,configurable:!1})});Jee.PROPERTIES.forEach(e=>{Object.defineProperty(iD.prototype,e,{get(){throw`Invalid canvas sequencer interaction, cannot get ${e}.`},set(t){this[Fa.push](pE.PROPERTY,e,[t])},enumerable:!0,configurable:!1})});T2=iD;var Qee={};const n8=Object.freeze({sequence:Symbol.for("sequence"),push:Symbol.for("push")});function z7e(e,t){const n=e.replace(/^\{|\}$/gu,"");return n!==e?t.hasOwnProperty(n)?t[n]:n:e}class j7e extends T2{build(t={}){const n=new T2;return this[n8.sequence].forEach(({type:r,inst:i,args:o})=>{const s=o.map(a=>typeof a=="string"?z7e(a,t):a);n[n8.push](r,i,s)}),n}execute(){throw new TypeError("Cannot execute a blueprint.")}}Qee=j7e;var ete={CanvasSequence:T2,CanvasBlueprint:Qee},U7e=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yi,"__esModule",{value:!0});yi.drawImageOntoCanvasContext=yi.ImageBitmapType=yi.createImageBitmap=yi.createCanvas=void 0;const V7e=U7e(Xee),tte=ete;function H7e(e,t){e.serializedCommands?new tte.CanvasSequence(e.serializedCommands).execute(t):t.drawImage(e,0,0)}yi.drawImageOntoCanvasContext=H7e;const r8={realOffscreenCanvas:typeof OffscreenCanvas=="function",node:V7e.default};r8.realOffscreenCanvas?(yi.createCanvas=(e,t)=>new OffscreenCanvas(e,t),yi.createImageBitmap=window.createImageBitmap||self.createImageBitmap,yi.ImageBitmapType=window.ImageBitmap||self.ImageBitmap):r8.node?(yi.createCanvas=(...e)=>nodeCreateCanvas(...e),yi.createImageBitmap=async(e,...t)=>{if(t.length>0)throw new Error("only one-argument uses of createImageBitmap are supported by the node offscreencanvas ponyfill");const n=e.toDataURL(),r=new nodeImage;return new Promise((i,o)=>{r.onload=()=>i(r),r.onerror=o,r.src=n})}):(yi.createCanvas=(e,t)=>{const n=new tte.CanvasSequence;return{width:e,height:t,getContext(){return n}}},yi.createImageBitmap=async e=>{const t=e.getContext("2d");return{height:e.height,width:e.width,serializedCommands:t.toJSON(),containsNoTransferables:!0}},yi.ImageBitmapType=String);var Mu={},hx={};Object.defineProperty(hx,"__esModule",{value:!0});hx.blobToDataURL=void 0;function G7e(e){const t=new FileReader;return new Promise((n,r)=>{t.onload=i=>{i.target?n(i.target.result):r(new Error("unknown result reading blob from canvas"))},t.readAsDataURL(e)})}hx.blobToDataURL=G7e;var R3={exports:{}};/*!!
 *  Canvas 2 Svg v1.0.15
 *  A low level canvas to SVG converter. Uses a mock canvas context to build an SVG document.
 *
 *  Licensed under the MIT license:
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Author:
 *  Kerry Liu
 *
 *  Copyright (c) 2014 Gliffy Inc.
 */var i8;function W7e(){return i8||(i8=1,function(e){(function(){var t,n,r,i,o;function s(f,h){var p=Object.keys(h),g;for(g=0;g<p.length;g++)f=f.replace(new RegExp("\\{"+p[g]+"\\}","gi"),h[p[g]]);return f}function a(f){var h,p,g;if(!f)throw new Error("cannot create a random attribute name for an undefined object");h="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",p="";do for(p="",g=0;g<12;g++)p+=h[Math.floor(Math.random()*h.length)];while(f[p]);return p}function l(f,h){var p,g,v={},m;for(f=f.split(","),h=h||10,p=0;p<f.length;p+=2)g="&"+f[p+1]+";",m=parseInt(f[p],h),v[g]="&#"+m+";";return v["\\xa0"]="&#160;",v}function c(f){var h={left:"start",right:"end",center:"middle",start:"start",end:"end"};return h[f]||h.start}function u(f){var h={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return h[f]||h.alphabetic}o=l("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"}},r=function(f,h){this.__root=f,this.__ctx=h},r.prototype.addColorStop=function(f,h){var p=this.__ctx.__createElement("stop"),g,v;p.setAttribute("offset",f),h.indexOf("rgba")!==-1?(g=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,v=g.exec(h),p.setAttribute("stop-color",s("rgb({r},{g},{b})",{r:v[1],g:v[2],b:v[3]})),p.setAttribute("stop-opacity",v[4])):p.setAttribute("stop-color",h),this.__root.appendChild(p)},i=function(f,h){this.__root=f,this.__ctx=h},n=function(f){var h={width:500,height:500,enableMirroring:!1},p;if(arguments.length>1?(p=h,p.width=arguments[0],p.height=arguments[1]):f?p=f:p=h,!(this instanceof n))return new n(p);this.width=p.width||h.width,this.height=p.height||h.height,this.enableMirroring=p.enableMirroring!==void 0?p.enableMirroring:h.enableMirroring,this.canvas=this,this.__document=p.document||document,this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d"),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)},n.prototype.__createElement=function(f,h,p){typeof h>"u"&&(h={});var g=this.__document.createElementNS("http://www.w3.org/2000/svg",f),v=Object.keys(h),m,y;for(p&&(g.setAttribute("fill","none"),g.setAttribute("stroke","none")),m=0;m<v.length;m++)y=v[m],g.setAttribute(y,h[y]);return g},n.prototype.__setDefaultStyles=function(){var f=Object.keys(t),h,p;for(h=0;h<f.length;h++)p=f[h],this[p]=t[p].canvas},n.prototype.__applyStyleState=function(f){var h=Object.keys(f),p,g;for(p=0;p<h.length;p++)g=h[p],this[g]=f[g]},n.prototype.__getStyleState=function(){var f,h={},p=Object.keys(t),g;for(f=0;f<p.length;f++)g=p[f],h[g]=this[g];return h},n.prototype.__applyStyleToCurrentElement=function(f){var h=Object.keys(t),p,g,v,m,y,b;for(p=0;p<h.length;p++)if(g=t[h[p]],v=this[h[p]],g.apply)if(g.apply.indexOf("fill")!==-1&&v instanceof i){if(v.__ctx)for(;v.__ctx.__defs.childNodes.length;)m=v.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[m]=m,this.__defs.appendChild(v.__ctx.__defs.childNodes[0]);this.__currentElement.setAttribute("fill",s("url(#{id})",{id:v.__root.getAttribute("id")}))}else g.apply.indexOf("fill")!==-1&&v instanceof r?this.__currentElement.setAttribute("fill",s("url(#{id})",{id:v.__root.getAttribute("id")})):g.apply.indexOf(f)!==-1&&g.svg!==v&&((g.svgAttr==="stroke"||g.svgAttr==="fill")&&v.indexOf("rgba")!==-1?(y=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi,b=y.exec(v),this.__currentElement.setAttribute(g.svgAttr,s("rgb({r},{g},{b})",{r:b[1],g:b[2],b:b[3]})),this.__currentElement.setAttribute(g.svgAttr+"-opacity",b[4])):this.__currentElement.setAttribute(g.svgAttr,v))},n.prototype.__closestGroupOrSvg=function(f){return f=f||this.__currentElement,f.nodeName==="g"||f.nodeName==="svg"?f:this.__closestGroupOrSvg(f.parentNode)},n.prototype.getSerializedSvg=function(f){var h=new XMLSerializer().serializeToString(this.__root),p,g,v,m,y,b;if(b=/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi,b.test(h)&&(h=h.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),f)for(p=Object.keys(o),g=0;g<p.length;g++)v=p[g],m=o[v],y=new RegExp(v,"gi"),y.test(h)&&(h=h.replace(y,m));return h},n.prototype.getSvg=function(){return this.__root},n.prototype.save=function(){var f=this.__createElement("g"),h=this.__closestGroupOrSvg();this.__groupStack.push(h),h.appendChild(f),this.__currentElement=f,this.__stack.push(this.__getStyleState())},n.prototype.restore=function(){this.__currentElement=this.__groupStack.pop();var f=this.__stack.pop();this.__applyStyleState(f)},n.prototype.__addTransform=function(f){var h=this.__closestGroupOrSvg();if(h.childNodes.length>0){var p=this.__createElement("g");h.appendChild(p),this.__currentElement=p}var g=this.__currentElement.getAttribute("transform");g?g+=" ":g="",g+=f,this.__currentElement.setAttribute("transform",g)},n.prototype.scale=function(f,h){h===void 0&&(h=f),this.__addTransform(s("scale({x},{y})",{x:f,y:h}))},n.prototype.rotate=function(f){var h=f*180/Math.PI;this.__addTransform(s("rotate({angle},{cx},{cy})",{angle:h,cx:0,cy:0}))},n.prototype.translate=function(f,h){this.__addTransform(s("translate({x},{y})",{x:f,y:h}))},n.prototype.transform=function(f,h,p,g,v,m){this.__addTransform(s("matrix({a},{b},{c},{d},{e},{f})",{a:f,b:h,c:p,d:g,e:v,f:m}))},n.prototype.beginPath=function(){var f,h;this.__currentDefaultPath="",this.__currentPosition={},f=this.__createElement("path",{},!0),h=this.__closestGroupOrSvg(),h.appendChild(f),this.__currentElement=f},n.prototype.__applyCurrentDefaultPath=function(){if(this.__currentElement.nodeName==="path"){var f=this.__currentDefaultPath;this.__currentElement.setAttribute("d",f)}else throw new Error("Attempted to apply path command to node "+this.__currentElement.nodeName)},n.prototype.__addPathCommand=function(f){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=f},n.prototype.moveTo=function(f,h){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:f,y:h},this.__addPathCommand(s("M {x} {y}",{x:f,y:h}))},n.prototype.closePath=function(){this.__addPathCommand("Z")},n.prototype.lineTo=function(f,h){this.__currentPosition={x:f,y:h},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(s("L {x} {y}",{x:f,y:h})):this.__addPathCommand(s("M {x} {y}",{x:f,y:h}))},n.prototype.bezierCurveTo=function(f,h,p,g,v,m){this.__currentPosition={x:v,y:m},this.__addPathCommand(s("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:f,cp1y:h,cp2x:p,cp2y:g,x:v,y:m}))},n.prototype.quadraticCurveTo=function(f,h,p,g){this.__currentPosition={x:p,y:g},this.__addPathCommand(s("Q {cpx} {cpy} {x} {y}",{cpx:f,cpy:h,x:p,y:g}))};var d=function(f){var h=Math.sqrt(f[0]*f[0]+f[1]*f[1]);return[f[0]/h,f[1]/h]};n.prototype.arcTo=function(f,h,p,g,v){var m=this.__currentPosition&&this.__currentPosition.x,y=this.__currentPosition&&this.__currentPosition.y;if(!(typeof m>"u"||typeof y>"u")){if(v<0)throw new Error("IndexSizeError: The radius provided ("+v+") is negative.");if(m===f&&y===h||f===p&&h===g||v===0){this.lineTo(f,h);return}var b=d([m-f,y-h]),_=d([p-f,g-h]);if(b[0]*_[1]===b[1]*_[0]){this.lineTo(f,h);return}var x=b[0]*_[0]+b[1]*_[1],w=Math.acos(Math.abs(x)),S=d([b[0]+_[0],b[1]+_[1]]),C=v/Math.sin(w/2),A=f+C*S[0],T=h+C*S[1],O=[-b[1],b[0]],R=[_[1],-_[0]],L=function(z){var H=z[0],B=z[1];return B>=0?Math.acos(H):-Math.acos(H)},D=L(O),$=L(R);this.lineTo(A+O[0]*v,T+O[1]*v),this.arc(A,T,v,D,$)}},n.prototype.stroke=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},n.prototype.fill=function(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},n.prototype.rect=function(f,h,p,g){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(f,h),this.lineTo(f+p,h),this.lineTo(f+p,h+g),this.lineTo(f,h+g),this.lineTo(f,h),this.closePath()},n.prototype.fillRect=function(f,h,p,g){var v,m;v=this.__createElement("rect",{x:f,y:h,width:p,height:g},!0),m=this.__closestGroupOrSvg(),m.appendChild(v),this.__currentElement=v,this.__applyStyleToCurrentElement("fill")},n.prototype.strokeRect=function(f,h,p,g){var v,m;v=this.__createElement("rect",{x:f,y:h,width:p,height:g},!0),m=this.__closestGroupOrSvg(),m.appendChild(v),this.__currentElement=v,this.__applyStyleToCurrentElement("stroke")},n.prototype.clearRect=function(f,h,p,g){var v,m=this.__closestGroupOrSvg();v=this.__createElement("rect",{x:f,y:h,width:p,height:g,fill:"#FFFFFF"},!0),m.appendChild(v)},n.prototype.createLinearGradient=function(f,h,p,g){var v=this.__createElement("linearGradient",{id:a(this.__ids),x1:f+"px",x2:p+"px",y1:h+"px",y2:g+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(v),new r(v,this)},n.prototype.createRadialGradient=function(f,h,p,g,v,m){var y=this.__createElement("radialGradient",{id:a(this.__ids),cx:g+"px",cy:v+"px",r:m+"px",fx:f+"px",fy:h+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(y),new r(y,this)},n.prototype.__parseFont=function(){var f=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\"\sa-z]+?)\s*$/i,h=f.exec(this.font),p={style:h[1]||"normal",size:h[4]||"10px",family:h[6]||"sans-serif",weight:h[3]||"normal",decoration:h[2]||"normal",href:null};return this.__fontUnderline==="underline"&&(p.decoration="underline"),this.__fontHref&&(p.href=this.__fontHref),p},n.prototype.__wrapTextLink=function(f,h){if(f.href){var p=this.__createElement("a");return p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f.href),p.appendChild(h),p}return h},n.prototype.__applyText=function(f,h,p,g){var v=this.__parseFont(),m=this.__closestGroupOrSvg(),y=this.__createElement("text",{"font-family":v.family,"font-size":v.size,"font-style":v.style,"font-weight":v.weight,"text-decoration":v.decoration,x:h,y:p,"text-anchor":c(this.textAlign),"dominant-baseline":u(this.textBaseline)},!0);y.appendChild(this.__document.createTextNode(f)),this.__currentElement=y,this.__applyStyleToCurrentElement(g),m.appendChild(this.__wrapTextLink(v,y))},n.prototype.fillText=function(f,h,p){this.__applyText(f,h,p,"fill")},n.prototype.strokeText=function(f,h,p){this.__applyText(f,h,p,"stroke")},n.prototype.measureText=function(f){return this.__ctx.font=this.font,this.__ctx.measureText(f)},n.prototype.arc=function(f,h,p,g,v,m){if(g!==v){g=g%(2*Math.PI),v=v%(2*Math.PI),g===v&&(v=(v+2*Math.PI-.001*(m?-1:1))%(2*Math.PI));var y=f+p*Math.cos(v),b=h+p*Math.sin(v),_=f+p*Math.cos(g),x=h+p*Math.sin(g),w=m?0:1,S=0,C=v-g;C<0&&(C+=2*Math.PI),m?S=C>Math.PI?0:1:S=C>Math.PI?1:0,this.lineTo(_,x),this.__addPathCommand(s("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:p,ry:p,xAxisRotation:0,largeArcFlag:S,sweepFlag:w,endX:y,endY:b})),this.__currentPosition={x:y,y:b}}},n.prototype.clip=function(){var f=this.__closestGroupOrSvg(),h=this.__createElement("clipPath"),p=a(this.__ids),g=this.__createElement("g");f.removeChild(this.__currentElement),h.setAttribute("id",p),h.appendChild(this.__currentElement),this.__defs.appendChild(h),f.setAttribute("clip-path",s("url(#{id})",{id:p})),f.appendChild(g),this.__currentElement=g},n.prototype.drawImage=function(){var f=Array.prototype.slice.call(arguments),h=f[0],p,g,v,m,y=0,b=0,_,x,w,S,C,A,T,O,R,L,D;if(f.length===3)p=f[1],g=f[2],_=h.width,x=h.height,v=_,m=x;else if(f.length===5)p=f[1],g=f[2],v=f[3],m=f[4],_=h.width,x=h.height;else if(f.length===9)y=f[1],b=f[2],_=f[3],x=f[4],p=f[5],g=f[6],v=f[7],m=f[8];else throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);if(w=this.__closestGroupOrSvg(),T=this.__currentElement,h instanceof n){for(S=h.getSvg(),C=S.childNodes[0];C.childNodes.length;)D=C.childNodes[0].getAttribute("id"),this.__ids[D]=D,this.__defs.appendChild(C.childNodes[0]);A=S.childNodes[1],w.appendChild(A),this.__currentElement=A,this.translate(p,g),this.__currentElement=T}else(h.nodeName==="CANVAS"||h.nodeName==="IMG")&&(O=this.__createElement("image"),O.setAttribute("width",v),O.setAttribute("height",m),O.setAttribute("preserveAspectRatio","none"),(y||b||_!==h.width||x!==h.height)&&(R=this.__document.createElement("canvas"),R.width=v,R.height=m,L=R.getContext("2d"),L.drawImage(h,y,b,_,x,0,0,v,m),h=R),O.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h.nodeName==="CANVAS"?h.toDataURL():h.getAttribute("src")),w.appendChild(O),this.__currentElement=O,this.translate(p,g),this.__currentElement=T)},n.prototype.createPattern=function(f,h){var p=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),g=a(this.__ids),v;return p.setAttribute("id",g),p.setAttribute("width",f.width),p.setAttribute("height",f.height),f.nodeName==="CANVAS"||f.nodeName==="IMG"?(v=this.__document.createElementNS("http://www.w3.org/2000/svg","image"),v.setAttribute("width",f.width),v.setAttribute("height",f.height),v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f.nodeName==="CANVAS"?f.toDataURL():f.getAttribute("src")),p.appendChild(v),this.__defs.appendChild(p)):f instanceof n&&(p.appendChild(f.__root.childNodes[1]),this.__defs.appendChild(p)),new i(p,this)},n.prototype.drawFocusRing=function(){},n.prototype.createImageData=function(){},n.prototype.getImageData=function(){},n.prototype.putImageData=function(){},n.prototype.globalCompositeOperation=function(){},n.prototype.setTransform=function(){},typeof window=="object"&&(window.C2S=n),e.exports=n})()}(R3)),R3.exports}var q7e=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),Y7e=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),X7e=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&q7e(t,e,n);return Y7e(t,e),t},K7e=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.ReactRendering=Mu.getSerializedSvg=Mu.renderToAbstractCanvas=void 0;const k0=K7e(I),nte=ete,k3=yi,Z7e=hx;async function J7e(e,t,n,r){const{exportSVG:i,highResolutionScaling:o=1}=n;if(i)if(i.rasterizeLayers){const s=i.scale||o,a=(0,k3.createCanvas)(Math.ceil(e*s),t*s),l=a.getContext("2d");if(!l)throw new Error("2d canvas rendering not supported on this platform");return l.scale(s,s),{...await r(l),reactElement:k0.default.createElement("image",{width:e,height:t,xlinkHref:"convertToBlob"in a?await(0,Z7e.blobToDataURL)(await a.convertToBlob({type:"image/png"})):a.toDataURL("image/png")})}}else{const s=new nte.CanvasSequence;return{...await r(s),canvasRecordedData:s.toJSON()}}else{const s=o,a=(0,k3.createCanvas)(Math.ceil(e*s),t*s),l=a.getContext("2d");if(!l)throw new Error("2d canvas rendering not supported on this platform");return l.scale(s,s),{...await r(l),imageData:await(0,k3.createImageBitmap)(a)}}}Mu.renderToAbstractCanvas=J7e;async function Q7e(e){const{width:t,height:n,canvasRecordedData:r}=e,i=await Promise.resolve().then(()=>X7e(W7e())),o=new i.default(t,n);return new nte.CanvasSequence(r).execute(o),o.getSvg().innerHTML}Mu.getSerializedSvg=Q7e;function eVe({rendering:e}){return k0.default.createElement(k0.default.Fragment,null,k0.default.isValidElement(e.reactElement)?e.reactElement:k0.default.createElement("g",{dangerouslySetInnerHTML:{__html:e.html||""}}))}Mu.ReactRendering=eVe;var px={};Object.defineProperty(px,"__esModule",{value:!0});px.isFeature=void 0;function tVe(e){return typeof e=="object"&&e!==null&&typeof e.get=="function"&&typeof e.id=="function"}px.isFeature=tVe;function o8(e){return"uniqueId"in e&&typeof e.data!="object"}class O2{constructor(t){var n;o8(t)?this.data=t:(this.data=t.data||{},this.parentHandle=t.parent);const r=o8(t)?t.uniqueId:t.id;if(r==null)throw new Error("SimpleFeature requires a unique `id` or `data.uniqueId` attribute");if(this.uniqueId=String(r),!(this.data.aliases||this.data.end-this.data.start>=0))throw new Error(`invalid feature data, end less than start. end: ${this.data.end} start: ${this.data.start}`);this.data.subfeatures&&(this.subfeatures=(n=this.data.subfeatures)===null||n===void 0?void 0:n.map((i,o)=>typeof i.get!="function"?new O2({id:i.uniqueId||`${r}-${o}`,data:{strand:this.data.strand,...i},parent:this}):i))}get(t){return t==="subfeatures"?this.subfeatures:t==="parent"?this.parent():this.data[t]}set(t,n){this.data[t]=n}tags(){return Object.keys(this.data)}id(){return this.uniqueId}parent(){return this.parentHandle}children(){return this.get("subfeatures")}toJSON(){const t={...this.data,uniqueId:this.id()},n=this.parent();n&&(t.parentId=n.id());const r=this.children();return r&&(t.subfeatures=r.map(i=>i.toJSON())),t}static fromJSON(t){return new O2({...t})}}px.default=O2;(function(e){var t=we&&we.__createBinding||(Object.create?function(k,F,j,Y){Y===void 0&&(Y=j);var ue=Object.getOwnPropertyDescriptor(F,j);(!ue||("get"in ue?!F.__esModule:ue.writable||ue.configurable))&&(ue={enumerable:!0,get:function(){return F[j]}}),Object.defineProperty(k,Y,ue)}:function(k,F,j,Y){Y===void 0&&(Y=j),k[Y]=F[j]}),n=we&&we.__exportStar||function(k,F){for(var j in k)j!=="default"&&!Object.prototype.hasOwnProperty.call(F,j)&&t(F,k,j)},r=we&&we.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(e,"__esModule",{value:!0}),e.toLocale=e.getBpDisplayStr=e.isSupportedIndexingAdapter=e.bytesForRegions=e.objectHash=e.hashCode=e.updateStatus=e.generateCodonTable=e.defaultCodonTable=e.defaultStops=e.defaultStarts=e.measureText=e.rIC=e.complement=e.reverse=e.revcom=e.isElectron=e.stringify=e.shorten=e.minmax=e.renameRegionsIfNeeded=e.renameRegionIfNeeded=e.makeAbortableReaction=e.findLast=e.findLastIndex=e.iterMap=e.bpSpanPx=e.featureSpanPx=e.cartesianToPolar=e.polarToCartesian=e.degToRad=e.radToDeg=e.bpToPx=e.clamp=e.compareLocStrings=e.compareLocs=e.parseLocString=e.parseLocStringOneBased=e.assembleLocStringFast=e.assembleLocString=e.getContainingDisplay=e.getContainingTrack=e.getContainingView=e.getSession=e.findParentThatIs=e.springAnimate=e.findParentThat=e.useDebouncedCallback=e.useWidthSetter=e.useDebounce=void 0,e.blobToDataURL=e.isFeature=e.SimpleFeature=e.renderToStaticMarkup=e.stripAlpha=e.gatherOverlaps=e.mergeIntervals=e.notEmpty=e.groupBy=e.avg=e.sum=e.min=e.max=e.localStorageSetItem=e.localStorageGetItem=e.getEnv=e.measureGridWidth=e.linkify=e.coarseStripHTML=e.getStr=e.getUriLink=e.useLocalStorage=e.getLayoutId=e.getViewParams=e.getTickDisplayStr=void 0;const i=I,o=r(NLe),s=Rc,a=QQ,l=Pf,c=ho,u=Pf,d=r(fE),f=Vee,h=Nu;n(Pf,e),n(ho,e),n(sg,e),n(Pu,e),n(hE,e),n(yi,e),n(Mu,e);function p(k,F){const[j,Y]=(0,i.useState)(k);return(0,i.useEffect)(()=>{const ue=setTimeout(()=>{Y(k)},F);return()=>{clearTimeout(ue)}},[k,F]),j}e.useDebounce=p;function g(k,F){const[j,{width:Y}]=(0,d.default)();return(0,i.useEffect)(()=>{Y&&(0,s.isAlive)(k)&&requestAnimationFrame(()=>k.setWidth(Y-Number.parseInt(F,10)*2))},[F,k,Y]),j}e.useWidthSetter=g;function v(k,F=400){const j=(0,i.useRef)(),Y=(0,i.useRef)();function ue(){Y.current&&clearTimeout(Y.current)}return(0,i.useEffect)(()=>ue,[]),function(...Se){j.current=Se,ue(),Y.current=setTimeout(()=>{j.current&&k(...j.current)},F)}}e.useDebouncedCallback=v;function m(k,F){if(!(0,s.hasParent)(k))throw new Error("node does not have parent");let j=(0,s.getParent)(k);for(;j&&(0,s.isAlive)(j);){if(F(j))return j;if((0,s.hasParent)(j))j=(0,s.getParent)(j);else break}throw new Error("no matching node found")}e.findParentThat=m;function y(k,F,j,Y=()=>{},ue=0,ge=170,Se=26){ue||(ue=Math.abs(F-k)/1e3);let Fe;function Ye(at){const Ae=Date.now();let de=at.lastPosition,fe=at.lastTime||Ae,ke=at.lastVelocity||0;Ae>fe+64&&(fe=Ae);const qe=Math.floor(Ae-fe);for(let zt=0;zt<qe;++zt){const Cr=-ge*(de-F),jt=-Se*ke,Ze=(Cr+jt)/1;ke+=Ze*1/1e3,de+=ke*1/1e3}const st=Math.abs(ke)<=ue,Ct=ge!==0?Math.abs(F-de)<=ue:!0;st&&Ct?(j(F),Y()):(j(de),Fe=requestAnimationFrame(()=>Ye({lastPosition:de,lastTime:Ae,lastVelocity:ke})))}return[()=>Ye({lastPosition:k}),()=>cancelAnimationFrame(Fe)]}e.springAnimate=y;function b(k,F){return m(k,F)}e.findParentThatIs=b;function _(k){try{return b(k,l.isSessionModel)}catch{throw new Error("no session model found!")}}e.getSession=_;function x(k){try{return b(k,l.isViewModel)}catch{throw new Error("no containing view found")}}e.getContainingView=x;function w(k){try{return b(k,l.isTrackModel)}catch{throw new Error("no containing track found")}}e.getContainingTrack=w;function S(k){try{return b(k,l.isDisplayModel)}catch{throw new Error("no containing display found")}}e.getContainingDisplay=S;function C(k){return A(k,Ee)}e.assembleLocString=C;function A(k,F=j=>j){const{assemblyName:j,refName:Y,start:ue,end:ge,reversed:Se}=k,Ne=j?`{${j}}`:"";let Fe;ue!==void 0?Fe=`:${F(ue+1)}`:ge!==void 0?Fe=":1":Fe="";let Ye;ge!==void 0?Ye=ue!==void 0&&ue+1===ge?"":`..${F(ge)}`:Ye=ue!==void 0?"..":"";let at="";return Se&&(at="[rev]"),`${Ne}${Y}${Fe}${Ye}${at}`}e.assembleLocStringFast=A;function T(k,F){if(!k)throw new Error("no location string provided, could not parse");let j=!1;k.endsWith("[rev]")&&(j=!0,k=k.replace(/\[rev]$/,"")),k=k.replace(/\s/,"");const Y=k.match(/({(.+)})?(.+)/);if(!Y)throw new Error(`invalid location string: "${k}"`);const[,,ue,ge]=Y;if(!ue&&ge.startsWith("{}"))throw new Error(`no assembly name was provided in location "${ge}"`);const Se=ge.lastIndexOf(":");if(Se===-1){if(F(ge,ue))return{assemblyName:ue,refName:ge,reversed:j};throw new Error(`Unknown reference sequence "${ge}"`)}const Ne=ge.slice(0,Se),Fe=ge.slice(Se+1);if(F(Ne,ue)&&F(ge,ue))throw new Error(`ambiguous location string: "${k}"`);if(F(Ne,ue))if(Fe){const Ye=Fe.match(/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)(-?(\d+|\d{1,3}(,\d{3})*))$/),at=Fe.match(/^(-?(\d+|\d{1,3}(,\d{3})*))(\.\.|-)?$/);if(Ye){const[,Ae,,,,de]=Ye;if(Ae!==void 0&&de!==void 0)return{assemblyName:ue,refName:Ne,start:+Ae.replaceAll(",",""),end:+de.replaceAll(",",""),reversed:j}}else if(at){const[,Ae,,,de]=at;if(Ae!==void 0)return de?{assemblyName:ue,refName:Ne,start:+Ae.replaceAll(",",""),reversed:j}:{assemblyName:ue,refName:Ne,start:+Ae.replaceAll(",",""),end:+Ae.replaceAll(",",""),reversed:j}}else throw new Error(`could not parse range "${Fe}" on location "${k}"`)}else return{assemblyName:ue,refName:Ne,reversed:j};else if(F(ge,ue))return{assemblyName:ue,refName:ge,reversed:j};throw new Error(`unknown reference sequence name in location "${k}"`)}e.parseLocStringOneBased=T;function O(k,F){const j=T(k,F);return typeof j.start=="number"&&(j.start-=1),j}e.parseLocString=O;function R(k,F){const j=k.assemblyName||F.assemblyName?(k.assemblyName||"").localeCompare(F.assemblyName||""):0;if(j)return j;const Y=k.refName||F.refName?(k.refName||"").localeCompare(F.refName||""):0;if(Y)return Y;if(k.start!==void 0&&F.start!==void 0){const ue=k.start-F.start;if(ue)return ue}if(k.end!==void 0&&F.end!==void 0){const ue=k.end-F.end;if(ue)return ue}return 0}e.compareLocs=R;function L(k,F,j){const Y=O(k,j),ue=O(F,j);return R(Y,ue)}e.compareLocStrings=L;function D(k,F,j){return k<F?F:k>j?j:k}e.clamp=D;function $(k){return Math.round(k*10)/10}function z(k,{reversed:F,end:j=0,start:Y=0},ue){return $((F?j-k:k-Y)/ue)}e.bpToPx=z;const H=180/Math.PI,B=Math.PI/180;function V(k){return k*H%360}e.radToDeg=V;function J(k){return k*B%(2*Math.PI)}e.degToRad=J;function K(k,F){return[k*Math.cos(F),k*Math.sin(F)]}e.polarToCartesian=K;function ie(k,F){const j=Math.sqrt(k*k+F*F),Y=Math.atan(F/k);return[j,Y]}e.cartesianToPolar=ie;function ce(k,F,j){return pe(k.get("start"),k.get("end"),F,j)}e.featureSpanPx=ce;function pe(k,F,j,Y){const ue=z(k,j,Y),ge=z(F,j,Y);return j.reversed?[ge,ue]:[ue,ge]}e.bpSpanPx=pe;function se(k,F,j){const Y=Array.from({length:j||0});let ue=0;for(const ge of k)Y[ue]=F(ge),ue+=1;return Y}e.iterMap=se;function G(k,F){let j=k.length;for(;j--;)if(F(k[j],j,k))return j;return-1}e.findLastIndex=G;function he(k,F){let j=k.length;for(;j--;)if(F(k[j],j,k))return k[j]}e.findLast=he;function Z(k,F,j,Y,ue,ge,Se){let Ne;function Fe(Ye){(0,c.isAbortException)(Ye)||((0,s.isAlive)(k)?Se(Ye):console.error(Ye))}(0,s.addDisposer)(k,(0,a.reaction)(()=>{try{return F(k)}catch(Ye){Fe(Ye);return}},async(Ye,at)=>{if(Ne&&!Ne.signal.aborted&&Ne.abort(),!(0,s.isAlive)(k))return;Ne=new AbortController;const Ae=Ne;ue(Ae);try{const de=await j(Ye,Ae.signal,k,at);(0,c.checkAbortSignal)(Ae.signal),(0,s.isAlive)(k)&&ge(de)}catch(de){Ae&&!Ae.signal.aborted&&Ae.abort(),Fe(de)}},Y)),(0,s.addDisposer)(k,()=>{Ne&&!Ne.signal.aborted&&Ne.abort()})}e.makeAbortableReaction=Z;function ae(k,F){if((0,s.isStateTreeNode)(F)&&!(0,s.isAlive)(F))return F;if(F&&(k!=null&&k[F.refName])){F=(0,s.isStateTreeNode)(F)?{...(0,s.getSnapshot)(F)}:{...F};const j=k[F.refName];if(j)return{...F,refName:j,originalRefName:F.refName}}return F}e.renameRegionIfNeeded=ae;async function oe(k,F){const{regions:j=[],adapterConfig:Y}=F;if(!F.sessionId)throw new Error("sessionId is required");const ue=j.map(Se=>Se.assemblyName),ge=Object.fromEntries(await Promise.all([...new Set(ue)].map(async Se=>[Se,await k.getRefNameMapForAdapter(Y,Se,F)])));return{...F,regions:j.map((Se,Ne)=>ae(ge[ue[Ne]],Se))}}e.renameRegionsIfNeeded=oe;function te(k,F){return[Math.min(k,F),Math.max(k,F)]}e.minmax=te;function ve(k,F=70,j=30){return k.length>F?k.slice(0,j)+"..."+k.slice(-j):k}e.shorten=ve;function ne({refName:k,coord:F,assemblyName:j,oob:Y},ue){return[j&&ue?`{${j}}`:"",k?`${ve(k)}:${Ee(F)}${Y?" (out of bounds)":""}`:""].join("")}e.stringify=ne,e.isElectron=/electron/i.test(typeof navigator<"u"?navigator.userAgent:"");function xe(k){return Ce((0,e.complement)(k))}e.revcom=xe;function Ce(k){return k.split("").reverse().join("")}e.reverse=Ce,e.complement=(()=>{const k=/[ACGT]/gi,F={S:"S",w:"w",T:"A",r:"y",a:"t",N:"N",K:"M",x:"x",d:"h",Y:"R",V:"B",y:"r",M:"K",h:"d",k:"m",C:"G",g:"c",t:"a",A:"T",n:"n",W:"W",X:"X",m:"k",v:"b",B:"V",s:"s",H:"D",c:"g",D:"H",b:"v",R:"Y",G:"C"};return j=>j.replaceAll(k,Y=>F[Y]||"")})(),e.rIC=typeof jest>"u"?typeof window<"u"&&window.requestIdleCallback?window.requestIdleCallback:k=>setTimeout(()=>k(),1):k=>k();const me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625];function X(k,F=10){var j;const Y=.5279276315789471,ue=String(k);let ge=0;for(let Se=0;Se<ue.length;Se++){const Ne=ue.charCodeAt(Se);ge+=(j=me[Ne])!==null&&j!==void 0?j:Y}return ge*F}e.measureText=X,e.defaultStarts=["ATG"],e.defaultStops=["TAA","TAG","TGA"],e.defaultCodonTable={TCA:"S",TCC:"S",TCG:"S",TCT:"S",TTC:"F",TTT:"F",TTA:"L",TTG:"L",TAC:"Y",TAT:"Y",TAA:"*",TAG:"*",TGC:"C",TGT:"C",TGA:"*",TGG:"W",CTA:"L",CTC:"L",CTG:"L",CTT:"L",CCA:"P",CCC:"P",CCG:"P",CCT:"P",CAC:"H",CAT:"H",CAA:"Q",CAG:"Q",CGA:"R",CGC:"R",CGG:"R",CGT:"R",ATA:"I",ATC:"I",ATT:"I",ATG:"M",ACA:"T",ACC:"T",ACG:"T",ACT:"T",AAC:"N",AAT:"N",AAA:"K",AAG:"K",AGC:"S",AGT:"S",AGA:"R",AGG:"R",GTA:"V",GTC:"V",GTG:"V",GTT:"V",GCA:"A",GCC:"A",GCG:"A",GCT:"A",GAC:"D",GAT:"D",GAA:"E",GAG:"E",GGA:"G",GGC:"G",GGG:"G",GGT:"G"};function Q(k){const F={};return Object.keys(k).forEach(j=>{const Y=k[j],ue=[];for(let ge=0;ge<3;ge++){const Se=j.charAt(ge);ue[ge]=[],ue[ge][0]=Se.toUpperCase(),ue[ge][1]=Se.toLowerCase()}for(let ge=0;ge<2;ge++){const Se=ue[0][ge];for(let Ne=0;Ne<2;Ne++){const Fe=ue[1][Ne];for(let Ye=0;Ye<2;Ye++){const at=ue[2][Ye],Ae=Se+Fe+at;F[Ae]=Y}}}}),F}e.generateCodonTable=Q;async function Re(k,F,j){F(k);const Y=await j();return F(""),Y}e.updateStatus=Re;function Pe(k){let F=0;if(k.length===0)return F;for(let j=0;j<k.length;j++){const Y=k.charCodeAt(j);F=(F<<5)-F+Y,F|=0}return F}e.hashCode=Pe;function le(k){return`${Pe(JSON.stringify(k))}`}e.objectHash=le;async function Oe(k,F){return(await Promise.all(k.map(Y=>F.blocksForRange(Y.refName,Y.start,Y.end)))).flat().map(Y=>({start:Y.minv.blockPosition,end:Y.maxv.blockPosition+65535})).reduce((Y,ue)=>Y+ue.end-ue.start,0)}e.bytesForRegions=Oe;function Be(k){return["Gff3TabixAdapter","VcfTabixAdapter","Gff3Adapter","VcfAdapter"].includes(k)}e.isSupportedIndexingAdapter=Be;function De(k){let F;return Math.floor(k/1e6)>0?F=`${Number.parseFloat((k/1e6).toPrecision(3))}Mbp`:Math.floor(k/1e3)>0?F=`${Number.parseFloat((k/1e3).toPrecision(3))}Kbp`:F=`${Ee(Math.floor(k))}bp`,F}e.getBpDisplayStr=De;function Ee(k){return k.toLocaleString("en-US")}e.toLocale=Ee;function Ie(k,F){return Math.floor(F/1e3)>0?`${Ee(Number.parseFloat((k/1e6).toFixed(2)))}M`:`${Ee(Math.floor(k))}`}e.getTickDisplayStr=Ie;function U(k,F){const{dynamicBlocks:j,staticBlocks:Y,offsetPx:ue}=x(k),ge=(j==null?void 0:j.contentBlocks[0])||{},Se=(Y==null?void 0:Y.contentBlocks[0])||{},Ne=(Y==null?void 0:Y.contentBlocks[1])||{};return{offsetPx:F?0:ue-Se.offsetPx,offsetPx1:F?0:ue-Ne.offsetPx,start:ge.start,end:ge.end}}e.getViewParams=U;function E({sessionId:k,layoutId:F}){return k+"-"+F}e.getLayoutId=E;function P(k,F){const[j,Y]=(0,i.useState)(()=>{if(typeof window>"u")return F;try{const ge=window.localStorage.getItem(k);return ge?JSON.parse(ge):F}catch(ge){return console.error(ge),F}});return[j,ge=>{try{const Se=ge instanceof Function?ge(j):ge;Y(Se),typeof window<"u"&&window.localStorage.setItem(k,JSON.stringify(Se))}catch(Se){console.error(Se)}}]}e.useLocalStorage=P;function ee(k){const{uri:F,baseUri:j=""}=k;let Y;try{Y=new URL(F,j).href}catch{Y=F}return Y}e.getUriLink=ee;function ye(k){return(0,o.default)(k)?(0,u.isUriLocation)(k)?ee(k):JSON.stringify(k):String(k)}e.getStr=ye;function be(k){return k.replaceAll(/(<([^>]+)>)/gi,"")}e.coarseStripHTML=be;function Me(k){const F=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi;return k.replaceAll(F,`$1<a href='$2' target="_blank">$2</a>`)}e.linkify=Me;function ze(k,F){const{padding:j=30,minWidth:Y=80,fontSize:ue=12,maxWidth:ge=1e3,stripHTML:Se=!1}=F||{};return rt(k.map(Ne=>ye(Ne)).map(Ne=>Se?be(Ne):Ne).map(Ne=>X(Ne,ue)).map(Ne=>Math.min(Math.max(Ne+j,Y),ge)))}e.measureGridWidth=ze;function Ge(k){return(0,s.getEnv)(k)}e.getEnv=Ge;function Xe(k){return typeof localStorage<"u"?localStorage.getItem(k):void 0}e.localStorageGetItem=Xe;function ut(k,F){return typeof localStorage<"u"?localStorage.setItem(k,F):void 0}e.localStorageSetItem=ut;function rt(k,F=-1/0){let j=F;for(const Y of k)j=Y>j?Y:j;return j}e.max=rt;function dt(k,F=1/0){let j=F;for(const Y of k)j=Y<j?Y:j;return j}e.min=dt;function yt(k){let F=0;for(const j of k)F+=j;return F}e.sum=yt;function Ke(k){return yt(k)/k.length}e.avg=Ke;function gt(k,F){var j;const Y={};for(const ue of k)(Y[j=F(ue)]||(Y[j]=[])).push(ue);return Y}e.groupBy=gt;function ct(k){return k!=null}e.notEmpty=ct;function mt(k,F=5e3){if(k.length<=1)return k;const j=[];let Y=null;k=k.sort((ue,ge)=>ue.start-ge.start),j.push(k[0]);for(let ue=1;ue<k.length;ue++)Y=j.at(-1),Y.end+F<k[ue].start-F?j.push(k[ue]):Y.end<k[ue].end&&(Y.end=Math.max(Y.end,k[ue].end),j.pop(),j.push(Y));return j}e.mergeIntervals=mt;function Dt(k){const F={};for(const j of k)F[j.refName]||(F[j.refName]=[]),F[j.refName].push(j);return Object.values(F).flatMap(j=>mt(j.sort((Y,ue)=>Y.start-ue.start)))}e.gatherOverlaps=Dt;function _e(k){return(0,f.colord)(k).alpha(1).toHex()}e.stripAlpha=_e;function We(k,F){const j=document.createElement("div");return(0,h.flushSync)(()=>{F?F(j).render(k):(0,h.render)(k,j)}),j.innerHTML.replace("&gt;",">").replace("&lt;","<")}e.renderToStaticMarkup=We;var Ue=px;Object.defineProperty(e,"SimpleFeature",{enumerable:!0,get:function(){return r(Ue).default}}),Object.defineProperty(e,"isFeature",{enumerable:!0,get:function(){return Ue.isFeature}});var N=hx;Object.defineProperty(e,"blobToDataURL",{enumerable:!0,get:function(){return N.blobToDataURL}})})(_l);Object.defineProperty(V4,"__esModule",{value:!0});const cr=Rc,nVe=aP,rVe=tc,iVe=_l;function oVe(){return!0}const sVe={stringArray:cr.types.array(cr.types.string),stringArrayMap:cr.types.map(cr.types.array(cr.types.string)),numberMap:cr.types.map(cr.types.number),boolean:cr.types.boolean,color:cr.types.refinement("Color",cr.types.string,oVe),integer:cr.types.integer,number:cr.types.number,string:cr.types.string,text:cr.types.string,fileLocation:rVe.FileLocation,frozen:cr.types.frozen()},s8={stringArray:[],stringArrayMap:{},numberMap:{},boolean:!0,color:"black",integer:1,number:1,string:"",text:"",fileLocation:{uri:"/path/to/resource.txt",locationType:"UriLocation"},frozen:{}},L3=e=>({views:{get valueJSON(){return e.value}}}),a8=e=>({views:{get valueJSON(){return JSON.stringify(e.value)}}}),l8={fileLocation:a8,number:L3,integer:L3,boolean:L3,frozen:a8,stringArray:e=>({views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add(t){e.value.push(t)},removeAtIndex(t){e.value.splice(t,1)},setAtIndex(t,n){e.value[t]=n}}}),stringArrayMap:e=>({views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add(t,n){e.value.set(t,n)},remove(t){e.value.delete(t)},addToKey(t,n){const r=e.value.get(t);if(!r)throw new Error(`${t} not found`);r.push(n)},removeAtKeyIndex(t,n){const r=e.value.get(t);if(!r)throw new Error(`${t} not found`);r.splice(n,1)},setAtKeyIndex(t,n,r){const i=e.value.get(t);if(!i)throw new Error(`${t} not found`);i[n]=r}}}),numberMap:e=>({views:{get valueJSON(){return JSON.stringify(e.value)}},actions:{add(t,n){e.value.set(t,n)},remove(t){e.value.delete(t)}}})},aVe=cr.types.refinement("JexlString",cr.types.string,e=>e.startsWith("jexl:"));function lVe(e){return e!=null&&e.toJSON?e.toJSON():`"${e}"`}function cVe(e,{description:t="",model:n,type:r,defaultValue:i,contextVariable:o=[]}){if(!r)throw new Error("type name required");if(n||(n=sVe[r]),!n)throw new Error(`no builtin config slot type "${r}", and no 'model' param provided`);if(i===void 0)throw new Error("no 'defaultValue' provided");const s=`${e.charAt(0).toUpperCase()}${e.slice(1)}ConfigSlot`;let a=cr.types.model(s,{name:cr.types.literal(e),description:cr.types.literal(t),type:cr.types.literal(r),value:cr.types.optional(cr.types.union(aVe,n),i)}).volatile(()=>({contextVariable:o})).views(u=>({get isCallback(){return String(u.value).startsWith("jexl:")}})).views(u=>({get expr(){if(u.isCallback){const{pluginManager:d}=(0,iVe.getEnv)(u);return!d&&typeof jest>"u"&&console.warn("no pluginManager detected on config env (if you dynamically instantiate a config, for example in renderProps for your display model, check that you add the env argument)"),(0,nVe.stringToJexlExpression)(String(u.value),d==null?void 0:d.jexl)}return{evalSync:()=>u.value}},get valueJSON(){if(!u.isCallback)return lVe(u.value)}})).preProcessSnapshot(u=>typeof u=="object"&&u.name===e?u:{name:e,description:t,type:r,value:u}).postProcessSnapshot(u=>typeof u.value=="object"?JSON.stringify(u.value)!==JSON.stringify(i)?u.value:void 0:u.value!==i?u.value:void 0).actions(u=>({set(d){u.value=d},reset(){u.value=i},convertToCallback(){u.isCallback||(u.value=`jexl:${u.valueJSON||"''"}`)},convertToValue(){if(u.isCallback){try{const d=u.expr.evalSync();if(d!==void 0){u.value=d;return}}catch{}if(u.value=i,u.isCallback){if(!(r in s8))throw new Error(`no fallbackDefault defined for type ${r}`);u.value=s8[r]}}}}));l8[r]&&(a=a.extend(l8[r]));const c=cr.types.optional(a,{name:e,type:r,description:t,value:i});return Object.defineProperty(c,"isJBrowseConfigurationSlot",{value:!0}),c}V4.default=cVe;var _i={},co={};Object.defineProperty(co,"__esModule",{value:!0});co.resolveLateType=co.getEnumerationValues=co.getDefaultValue=co.getPropertyType=co.getUnionSubTypes=co.getSubType=void 0;const Eu=Rc;function Mk(e){let t;if((0,Eu.isOptionalType)(e))t=e._subtype||e.type;else if((0,Eu.isArrayType)(e)||(0,Eu.isMapType)(e))t=e._subtype||e._subType||e.subType;else{if(typeof e.getSubType=="function")return e.getSubType();throw new TypeError("unsupported mst type")}if(!t)throw new Error("failed to get subtype");return t}co.getSubType=Mk;function rte(e){if(!(0,Eu.isUnionType)(e))throw new TypeError("not an MST union type");const t=e._types||e.types||Mk(e)._types||Mk(e).types;if(!t)throw new Error("failed to extract subtypes from mst union");return t}co.getUnionSubTypes=rte;function uVe(e,t){return e.properties[t]}co.getPropertyType=uVe;function dVe(e){if(!(0,Eu.isOptionalType)(e))throw new TypeError("type must be an optional type");return e._defaultValue||e.defaultValue}co.getDefaultValue=dVe;function fVe(e){return rte(e).map(n=>n.value)}co.getEnumerationValues=fVe;function hVe(e){return!(0,Eu.isUnionType)(e)&&!(0,Eu.isArrayType)(e)&&(0,Eu.isLateType)(e)?e.getSubType():e}co.resolveLateType=hVe;Object.defineProperty(_i,"__esModule",{value:!0});_i.isConfigurationSlotType=_i.isConfigurationModel=_i.isConfigurationSchemaType=_i.isBareConfigurationSchemaType=_i.getTypeNamesFromExplicitlyTypedUnion=_i.getConf=_i.readConfObject=void 0;const pr=Rc,pu=co;function I2(e,t,n={}){if(!e)throw new TypeError("must provide conf object to read");if(!t)return JSON.parse(JSON.stringify((0,pr.getSnapshot)(e)));if(typeof t=="string"){let r=e[t];if(!r&&(0,pr.isStateTreeNode)(e)&&(0,pr.isMapType)((0,pr.getType)(e))&&(r=e.get(t)),!r)return;if(r.expr){const i=r.expr.evalSync(n);return(0,pr.isStateTreeNode)(i)?JSON.parse(JSON.stringify((0,pr.getSnapshot)(i))):i}return(0,pr.isStateTreeNode)(r)?JSON.parse(JSON.stringify((0,pr.getSnapshot)(r))):r}if(Array.isArray(t)){const r=t[0];if(t.length>1){const i=t.slice(1);let o=e[r];return!o&&(0,pr.isStateTreeNode)(e)&&(0,pr.isMapType)((0,pr.getType)(e))&&(o=e.get(r)),o?I2(o,i,n):void 0}return I2(e,r,n)}throw new TypeError("slotPath must be a string or array")}_i.readConfObject=I2;function pVe(e,t,n){if(!e)throw new TypeError("must provide a model object");const{configuration:r}=e;if(ste(r))return I2(r,t,n);throw new TypeError("cannot getConf on this model, it has no configuration")}_i.getConf=pVe;function ite(e){if((0,pr.isType)(e)&&(e=(0,pu.resolveLateType)(e),(0,pr.isUnionType)(e))){const t=[];return(0,pu.getUnionSubTypes)(e).forEach(n=>{n=(0,pu.resolveLateType)(n);let r=ite(n);if(r.length||(r=[(0,pu.getDefaultValue)(n).type]),!r[0])throw new Error(`invalid config schema type ${n}`);t.push(...r)}),t}return[]}_i.getTypeNamesFromExplicitlyTypedUnion=ite;function ote(e){return!!((0,pr.isType)(e)&&((0,pr.isModelType)(e)&&("isJBrowseConfigurationSchema"in e||e.name.includes("ConfigurationSchema"))||(0,pr.isLateType)(e)))}_i.isBareConfigurationSchemaType=ote;function qp(e){return(0,pr.isType)(e)?ote(e)?!0:(0,pr.isUnionType)(e)?(0,pu.getUnionSubTypes)(e).every(t=>qp(t)||t.name==="undefined"):!!((0,pr.isOptionalType)(e)&&qp((0,pu.getSubType)(e))||(0,pr.isArrayType)(e)&&qp((0,pu.getSubType)(e))||(0,pr.isMapType)(e)&&qp((0,pu.getSubType)(e))):!1}_i.isConfigurationSchemaType=qp;function ste(e){return(0,pr.isStateTreeNode)(e)&&qp((0,pr.getType)(e))}_i.isConfigurationModel=ste;function mVe(e){return typeof e=="object"&&e!==null&&"isJBrowseConfigurationSlot"in e}_i.isConfigurationSlotType=mVe;var gVe=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tg,"__esModule",{value:!0});tg.ConfigurationReference=tg.ConfigurationSchema=void 0;const ms=Rc,c8=tc,vVe=gVe(V4),u8=_i;function yVe(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null&&Object.keys(e).length===0}function bVe(e){return Array.isArray(e)&&e.length===0}function xVe(e,t,n={}){var r;if(typeof e!="string")throw new Error("first arg must be string name of the model that this config schema goes with");let i=t,o=n;return!((r=n.baseConfiguration)===null||r===void 0)&&r.jbrowseSchemaDefinition&&(i={...n.baseConfiguration.jbrowseSchemaDefinition,...i},o={...n.baseConfiguration.jbrowseSchemaOptions,...n},delete o.baseConfiguration),{schemaDefinition:i,options:o}}function _Ve(e,t,n){const r={};let i;if(n.explicitlyTyped&&(r.type=ms.types.optional(ms.types.literal(e),e)),n.explicitIdentifier&&n.implicitIdentifier)throw new Error(`Cannot have both explicit and implicit identifiers in ${e}`);n.explicitIdentifier?typeof n.explicitIdentifier=="string"?(r[n.explicitIdentifier]=ms.types.identifier,i=n.explicitIdentifier):(r.id=ms.types.identifier,i="id"):n.implicitIdentifier&&(typeof n.implicitIdentifier=="string"?(r[n.implicitIdentifier]=c8.ElementId,i=n.implicitIdentifier):(r.id=c8.ElementId,i="id"));const o={isJBrowseConfigurationSchema:!0,jbrowseSchema:{modelName:e,definition:t,options:n}};Object.entries(t).forEach(([u,d])=>{if((0,ms.isType)(d)&&(0,ms.isLateType)(d)||(0,u8.isConfigurationSchemaType)(d))r[u]=d;else if(typeof d=="string"||typeof d=="number")o[u]=d;else if(typeof d=="object"){if(!d.type)throw new Error(`no type set for config slot ${e}.${u}`);try{r[u]=(0,vVe.default)(u,d)}catch(f){throw new Error(`invalid config slot definition for ${e}.${u}: ${f}`)}}else throw new Error(`invalid configuration schema definition, "${u}" must be either a valid configuration slot definition, a constant, or a nested configuration schema`)});let s=ms.types.model(`${e}ConfigurationSchema`,r).actions(u=>({setSubschema(d,f){if(!(0,u8.isConfigurationSchemaType)(r[d]))throw new Error(`${d} is not a subschema, cannot replace`);const h=(0,ms.isStateTreeNode)(f)?f:r[d].create(f);return u[d]=h,h}}));Object.keys(o).length&&(s=s.volatile(()=>o)),n.actions&&(s=s.actions(n.actions)),n.views&&(s=s.views(n.views)),n.extend&&(s=s.extend(n.extend));const a=i?{[i]:"placeholderId"}:{},l=n.explicitlyTyped?{type:e,...a}:a,c=(0,ms.getSnapshot)(s.create(l));return s=s.postProcessSnapshot(u=>{const d={};let f=!0;for(const[h,p]of Object.entries(u))f&&(typeof c[h]=="object"&&typeof p=="object"?JSON.stringify(c[h])!==JSON.stringify(p)&&(f=!1):c[h]!==p&&(f=!1)),p!==void 0&&o[h]===void 0&&!yVe(p)&&!bVe(p)&&(d[h]=p);return f?{}:d}),n.preProcessSnapshot&&(s=s.preProcessSnapshot(n.preProcessSnapshot)),ms.types.optional(s,l)}function wVe(e,t,n){const{schemaDefinition:r,options:i}=xVe(e,t,n),o=_Ve(e,r,i);return o.isJBrowseConfigurationSchema=!0,o.jbrowseSchemaDefinition=r,o.jbrowseSchemaOptions=i,o}tg.ConfigurationSchema=wVe;function SVe(e){return ms.types.union(ms.types.reference(e),e)}tg.ConfigurationReference=SVe;(function(e){var t=we&&we.__createBinding||(Object.create?function(i,o,s,a){a===void 0&&(a=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(i,a,l)}:function(i,o,s,a){a===void 0&&(a=s),i[a]=o[s]}),n=we&&we.__exportStar||function(i,o){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationReference=e.ConfigurationSchema=void 0;var r=tg;Object.defineProperty(e,"ConfigurationSchema",{enumerable:!0,get:function(){return r.ConfigurationSchema}}),Object.defineProperty(e,"ConfigurationReference",{enumerable:!0,get:function(){return r.ConfigurationReference}}),n(_i,e)})(sP);var CVe=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),AVe=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),PVe=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&CVe(t,e,n);return AVe(t,e),t};Object.defineProperty($4,"__esModule",{value:!0});const b_=PVe(I),d8=Ro,MVe=ld,EVe=cd,TVe=sP,OVe=_l,IVe=(0,EVe.makeStyles)()({importFormEntry:{minWidth:180}}),RVe=(0,MVe.observer)(function({session:e,onChange:t,selected:n,InputProps:r,TextFieldProps:i,localStorageKey:o,helperText:s="Select assembly to view"}){const{classes:a}=IVe(),{assemblyNames:l,assemblyManager:c}=e,u=new URLSearchParams(window.location.search).get("config"),[d,f]=typeof jest>"u"&&o?(0,OVe.useLocalStorage)(`lastAssembly-${[window.location.host+window.location.pathname,u,o].join("-")}`,n):(0,b_.useState)(n),h=l.includes(d||"")?d:n;(0,b_.useEffect)(()=>{h&&h!==n&&t(h)},[h,t,n]);const p=l.length?"":"No configured assemblies";return b_.default.createElement(d8.TextField,{select:!0,label:"Assembly",variant:"outlined",helperText:p||s,value:h||"",inputProps:{"data-testid":"assembly-selector"},onChange:g=>f(g.target.value),error:!!p,InputProps:r,disabled:!!p,className:a.importFormEntry,...i},l.map(g=>{const v=c.get(g),m=v?(0,TVe.getConf)(v,"displayName"):"";return b_.default.createElement(d8.MenuItem,{key:g,value:g},m||g)}))});$4.default=RVe;var mE={},Kf={},gE={},$3={};const kVe=Zi(Bve);var f8;function ji(){return f8||(f8=1,function(e){"use client";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=kVe}($3)),$3}var LVe=ir;Object.defineProperty(gE,"__esModule",{value:!0});gE.default=void 0;var $Ve=LVe(ji()),DVe=q,BVe=(0,$Ve.default)((0,DVe.jsx)("path",{d:"m10 17 5-5-5-5v10z"}),"ArrowRight");gE.default=BVe;var vE={},NVe=ir;Object.defineProperty(vE,"__esModule",{value:!0});vE.default=void 0;var FVe=NVe(ji()),zVe=q,jVe=(0,FVe.default)((0,zVe.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");vE.default=jVe;var yE={},UVe=ir;Object.defineProperty(yE,"__esModule",{value:!0});yE.default=void 0;var VVe=UVe(ji()),HVe=q,GVe=(0,VVe.default)((0,HVe.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");yE.default=GVe;var bE={},WVe=ir;Object.defineProperty(bE,"__esModule",{value:!0});bE.default=void 0;var qVe=WVe(ji()),YVe=q,XVe=(0,qVe.default)((0,YVe.jsx)("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonChecked");bE.default=XVe;var xE={},KVe=ir;Object.defineProperty(xE,"__esModule",{value:!0});xE.default=void 0;var ZVe=KVe(ji()),JVe=q,QVe=(0,ZVe.default)((0,JVe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked");xE.default=QVe;var eHe=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),tHe=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),nHe=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&eHe(t,e,n);return tHe(t,e),t},mx=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kf,"__esModule",{value:!0});Kf.MenuItemEndDecoration=void 0;const pn=nHe(I),jl=Ro,rHe=cd,iHe=mx(gE),oHe=mx(vE),sHe=mx(yE),aHe=mx(bE),lHe=mx(xE),cHe=_l,ate=(0,rHe.makeStyles)()({paper:{position:"fixed",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",top:0,left:0,outline:0},menuItemEndDecoration:{padding:0,margin:0,height:16}});function Ek(e){const{classes:t}=ate(),{type:n}=e;let r,i;"checked"in e&&({checked:r,disabled:i}=e);let o;switch(n){case"subMenu":{o=pn.default.createElement(iHe.default,{color:"action"});break}case"checkbox":{if(r){const s=i?"inherit":void 0;o=pn.default.createElement(oHe.default,{color:s})}else o=pn.default.createElement(sHe.default,{color:"action"});break}case"radio":{if(r){const s=i?"inherit":void 0;o=pn.default.createElement(aHe.default,{color:s})}else o=pn.default.createElement(lHe.default,{color:"action"});break}}return pn.default.createElement("div",{className:t.menuItemEndDecoration},o)}Kf.MenuItemEndDecoration=Ek;function lte(e){return e.type!=="divider"&&e.type!=="subHeader"&&!e.disabled}function uHe(e,t){const n=e.slice(t+1).findIndex(lte);return n===-1?n:t+1+n}function dHe(e,t){return(0,cHe.findLastIndex)(e.slice(0,t),lte)}const cte=pn.default.forwardRef(function(t,n){const[r,i]=(0,pn.useState)(),[o,s]=(0,pn.useState)(),[a,l]=(0,pn.useState)(!1),[c,u]=(0,pn.useState)(),[d,f]=(0,pn.useState)(),h=(0,pn.useRef)(null),{classes:p}=ate(),{menuItems:g,onMenuItemClick:v,open:m,onClose:y,anchorEl:b,top:_=!1}=t;(0,pn.useEffect)(()=>{m||(i(void 0),s(void 0))},[m]),(0,pn.useEffect)(()=>{const A=m&&!!r;let T;return A&&!a?T=setTimeout(()=>{l(!0)},300):!A&&a&&(T=setTimeout(()=>{l(!1)},300)),()=>{clearTimeout(T)}},[a,m,r]),(0,pn.useEffect)(()=>{if(b){const A=b.getBoundingClientRect();d?(A.top!==d.top||A.left+A.width!==d.left)&&f({top:A.top,left:A.left+A.width}):f({top:A.top,left:A.left+A.width})}else d||f({})},[d,b]);const x=g.some(A=>"icon"in A&&A.icon),w={};function S(A){return T=>{v(T,A)}}const C=pn.default.createElement(pn.default.Fragment,null,pn.default.createElement(jl.MenuList,{autoFocusItem:m&&!a,dense:!0},g.sort((A,T)=>(T.priority||0)-(A.priority||0)).map((A,T)=>{if(A.type==="divider")return pn.default.createElement(jl.Divider,{key:`divider-${T}`,component:"li"});if(A.type==="subHeader")return pn.default.createElement(jl.ListSubheader,{key:`subHeader-${A.label}-${T}`},A.label);let O=null,R=null;if(A.icon){const D=A.icon;O=pn.default.createElement(jl.ListItemIcon,null,pn.default.createElement(D,null))}"subMenu"in A?R=pn.default.createElement(Ek,{type:"subMenu"}):(A.type==="checkbox"||A.type==="radio")&&(R=pn.default.createElement(Ek,{type:A.type,checked:A.checked,disabled:A.disabled}));const L="onClick"in A?S(A.onClick):void 0;return pn.default.createElement(jl.MenuItem,{key:A.id||String(A.label),style:w,selected:T===c,onClick:L,onMouseMove:D=>{D.currentTarget!==document.activeElement&&(D.currentTarget.focus(),u(T)),"subMenu"in A?o!==T&&(i(D.currentTarget),s(T)):(i(void 0),s(void 0))},onKeyDown:D=>{switch(D.key){case"ArrowLeft":case"Escape":{y&&y(D,"escapeKeyDown");break}case"ArrowUp":{u(dHe(g,T));break}case"ArrowDown":{const $=uHe(g,T);u($);break}default:"subMenu"in A&&(D.key==="ArrowRight"||D.key==="Enter")&&(i(D.currentTarget),s(T),l(!0))}},disabled:!!A.disabled},O,pn.default.createElement(jl.ListItemText,{primary:A.label,secondary:A.subLabel,inset:x&&!A.icon}),R)})),g.map((A,T)=>{let O=null;return"subMenu"in A&&(O=pn.default.createElement(cte,{key:A.id||String(A.label),anchorEl:r,open:a&&o===T,onClose:()=>{l(!1),i(void 0)},onMenuItemClick:v,menuItems:A.subMenu})),O}));return _?C:pn.default.createElement(jl.Grow,{in:m,style:{transformOrigin:"0 0 0"},ref:n},pn.default.createElement(jl.Paper,{elevation:8,ref:h,className:p.paper,style:{...d}},C))});function fHe(e){const{open:t,onClose:n,menuItems:r,onMenuItemClick:i,...o}=e;return pn.default.createElement(jl.Popover,{open:t,onClose:n,BackdropProps:{invisible:!0},anchorOrigin:{vertical:"bottom",horizontal:"right",...o.anchorOrigin},transformOrigin:{vertical:"top",horizontal:"left",...o.transformOrigin},...o},pn.default.createElement(cte,{open:t,onClose:n,menuItems:r,onMenuItemClick:i,top:!0}))}Kf.default=fHe;var Mi={},D3={exports:{}},B3={exports:{}},h8;function hHe(){return h8||(h8=1,function(e){function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(B3)),B3.exports}var N3={exports:{}},p8;function pHe(){return p8||(p8=1,function(e){function t(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,s,a,l,c=[],u=!0,d=!1;try{if(a=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;u=!1}else for(;!(u=(o=a.call(i)).done)&&(c.push(o.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&i.return!=null&&(l=i.return(),Object(l)!==l))return}finally{if(d)throw s}}return c}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(N3)),N3.exports}var F3={exports:{}},m8;function mHe(){return m8||(m8=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(F3)),F3.exports}var g8;function gHe(){return g8||(g8=1,function(e){var t=hHe(),n=pHe(),r=KQ(),i=mHe();function o(s,a){return t(s)||n(s,a)||r(s,a)||i()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(D3)),D3.exports}var x_={},v8;function vHe(){if(v8)return x_;v8=1;var e=lP;Object.defineProperty(x_,"__esModule",{value:!0}),x_.useEvent=i;var t=r(I);function n(o){if(typeof WeakMap!="function")return null;var s=new WeakMap,a=new WeakMap;return(n=function(c){return c?a:s})(o)}function r(o,s){if(!s&&o&&o.__esModule)return o;if(o===null||e(o)!=="object"&&typeof o!="function")return{default:o};var a=n(s);if(a&&a.has(o))return a.get(o);var l={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in o)if(u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)){var d=c?Object.getOwnPropertyDescriptor(o,u):null;d&&(d.get||d.set)?Object.defineProperty(l,u,d):l[u]=o[u]}return l.default=o,a&&a.set(o,l),l}function i(o){if(typeof window>"u")return o;var s=t.useRef(null);return t.useLayoutEffect(function(){s.current=o}),t.useCallback(function(){for(var a,l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];(a=s.current)===null||a===void 0||a.call.apply(a,[s].concat(c))},[])}return x_}var ute=ir;Object.defineProperty(Mi,"__esModule",{value:!0});Mi.anchorRef=_He;Mi.bindContextMenu=SHe;Mi.bindDialog=IHe;Mi.bindDoubleClick=MHe;Mi.bindFocus=PHe;Mi.bindHover=AHe;Mi.bindMenu=THe;Mi.bindPopover=EHe;Mi.bindPopper=OHe;Mi.bindToggle=CHe;Mi.bindTrigger=wHe;Mi.initCoreState=void 0;Mi.usePopupState=xHe;var dS=ute(W4()),yHe=ute(gHe()),Ld=I,jv=vHe();function y8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y8(Object(n),!0).forEach(function(r){(0,dS.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var b8={};function bHe(e,t){b8[e]||(b8[e]=!0,console.error("[material-ui-popup-state] WARNING",t))}var dte={isOpen:!1,setAnchorElUsed:!1,anchorEl:void 0,anchorPosition:void 0,hovered:!1,focused:!1,_openEventType:null,_childPopupState:null,_deferNextOpen:!1,_deferNextClose:!1};Mi.initCoreState=dte;function xHe(e){var t=e.parentPopupState,n=e.popupId,r=e.variant,i=e.disableAutoFocus,o=(0,Ld.useRef)(!0);(0,Ld.useEffect)(function(){return o.current=!0,function(){o.current=!1}},[]);var s=(0,Ld.useState)(dte),a=(0,yHe.default)(s,2),l=a[0],c=a[1],u=(0,Ld.useCallback)(function(x){o.current&&c(x)},[]),d=(0,Ld.useCallback)(function(x){return u(function(w){return ln(ln({},w),{},{setAnchorElUsed:!0,anchorEl:x??void 0})})},[]),f=(0,jv.useEvent)(function(x){return l.isOpen?g(x):h(x),l}),h=(0,jv.useEvent)(function(x){var w=x instanceof Element?void 0:x,S=x instanceof Element?x:(x==null?void 0:x.currentTarget)instanceof Element?x.currentTarget:void 0;if((w==null?void 0:w.type)==="touchstart"){u(function(R){return ln(ln({},R),{},{_deferNextOpen:!0})});return}var C=w==null?void 0:w.clientX,A=w==null?void 0:w.clientY,T=typeof C=="number"&&typeof A=="number"?{left:C,top:A}:void 0,O=function(L){if(!x&&!L.setAnchorElUsed&&r!=="dialog"&&bHe("missingEventOrAnchorEl","eventOrAnchorEl should be defined if setAnchorEl is not used"),t){if(!t.isOpen)return L;setTimeout(function(){return t._setChildPopupState(_)})}var D=ln(ln({},L),{},{isOpen:!0,anchorPosition:T,hovered:(w==null?void 0:w.type)==="mouseover"||L.hovered,focused:(w==null?void 0:w.type)==="focus"||L.focused,_openEventType:w==null?void 0:w.type});return w!=null&&w.currentTarget?L.setAnchorElUsed||(D.anchorEl=w==null?void 0:w.currentTarget):S&&(D.anchorEl=S),D};u(function(R){return R._deferNextOpen?(setTimeout(function(){return u(O)},0),ln(ln({},R),{},{_deferNextOpen:!1})):O(R)})}),p=function(w){var S=w._childPopupState;return setTimeout(function(){S==null||S.close(),t==null||t._setChildPopupState(null)}),ln(ln({},w),{},{isOpen:!1,hovered:!1,focused:!1})},g=(0,jv.useEvent)(function(x){var w=x instanceof Element?void 0:x;if((w==null?void 0:w.type)==="touchstart"){u(function(S){return ln(ln({},S),{},{_deferNextClose:!0})});return}u(function(S){return S._deferNextClose?(setTimeout(function(){return u(p)},0),ln(ln({},S),{},{_deferNextClose:!1})):p(S)})}),v=(0,Ld.useCallback)(function(x,w){x?h(w):g(w)},[]),m=(0,jv.useEvent)(function(x){var w=x.relatedTarget;u(function(S){return S.hovered&&!(w instanceof Element&&Tk(w,_))?S.focused?ln(ln({},S),{},{hovered:!1}):p(S):S})}),y=(0,jv.useEvent)(function(x){if(x){var w=x.relatedTarget;u(function(S){return S.focused&&!(w instanceof Element&&Tk(w,_))?S.hovered?ln(ln({},S),{},{focused:!1}):p(S):S})}}),b=(0,Ld.useCallback)(function(x){return u(function(w){return ln(ln({},w),{},{_childPopupState:x})})},[]),_=ln(ln({},l),{},{setAnchorEl:d,popupId:n,variant:r,open:h,close:g,toggle:f,setOpen:v,onBlur:y,onMouseLeave:m,disableAutoFocus:i??!!(l.hovered||l.focused),_setChildPopupState:b});return _}function _He(e){var t=e.setAnchorEl;return t}function gx(e){var t=e.isOpen,n=e.popupId,r=e.variant;return ln({},r==="popover"?{"aria-haspopup":!0,"aria-controls":t&&n!=null?n:void 0}:r==="popper"?{"aria-describedby":t&&n!=null?n:void 0}:void 0)}function wHe(e){return ln(ln({},gx(e)),{},{onClick:e.open,onTouchStart:e.open})}function SHe(e){return ln(ln({},gx(e)),{},{onContextMenu:function(n){n.preventDefault(),e.open(n)}})}function CHe(e){return ln(ln({},gx(e)),{},{onClick:e.toggle,onTouchStart:e.toggle})}function AHe(e){var t=e.open,n=e.onMouseLeave;return ln(ln({},gx(e)),{},{onTouchStart:t,onMouseOver:t,onMouseLeave:n})}function PHe(e){var t=e.open,n=e.onBlur;return ln(ln({},gx(e)),{},{onFocus:t,onBlur:n})}function MHe(e){var t,n=e.isOpen,r=e.open,i=e.popupId,o=e.variant;return t={},(0,dS.default)(t,o==="popover"?"aria-controls":"aria-describedby",n?i:null),(0,dS.default)(t,"aria-haspopup",o==="popover"?!0:void 0),(0,dS.default)(t,"onDoubleClick",r),t}function EHe(e){var t=e.isOpen,n=e.anchorEl,r=e.anchorPosition,i=e.close,o=e.popupId,s=e.onMouseLeave,a=e.disableAutoFocus,l=e._openEventType,c=l==="contextmenu";return ln({id:o,anchorEl:n,anchorPosition:r,anchorReference:c?"anchorPosition":"anchorEl",open:t,onClose:i,onMouseLeave:s},a&&{disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0})}function THe(e){var t=e.isOpen,n=e.anchorEl,r=e.anchorPosition,i=e.close,o=e.popupId,s=e.onMouseLeave,a=e.disableAutoFocus,l=e._openEventType,c=l==="contextmenu";return ln({id:o,anchorEl:n,anchorPosition:r,anchorReference:c?"anchorPosition":"anchorEl",open:t,onClose:i,onMouseLeave:s},a&&{autoFocus:!1,disableAutoFocusItem:!0,disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0})}function OHe(e){var t=e.isOpen,n=e.anchorEl,r=e.popupId,i=e.onMouseLeave;return{id:r,anchorEl:n,open:t,onMouseLeave:i}}function IHe(e){var t=e.isOpen,n=e.close;return{open:t,onClose:n}}function RHe(e,t){var n=t.popupId;if(!n)return null;var r=typeof e.getRootNode=="function"?e.getRootNode():document;return typeof r.getElementById=="function"?r.getElementById(n):null}function Tk(e,t){var n=t.anchorEl,r=t._childPopupState;return x8(n,e)||x8(RHe(e,t),e)||r!=null&&Tk(e,r)}function x8(e,t){if(!e)return!1;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}var fte={};const kHe=Zi(She);var __={},_8;function LHe(){if(_8)return __;_8=1,Object.defineProperty(__,"__esModule",{value:!0}),__.interopRequireDefault=e;function e(t){var n=t;return n.__esModule?n.default:t}return __}(function(e){var t=ir,n=lP;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=t(kHe),i=t(W4()),o=c(I),s=Ro,a=LHe();function l(g){if(typeof WeakMap!="function")return null;var v=new WeakMap,m=new WeakMap;return(l=function(b){return b?m:v})(g)}function c(g,v){if(!v&&g&&g.__esModule)return g;if(g===null||n(g)!=="object"&&typeof g!="function")return{default:g};var m=l(v);if(m&&m.has(g))return m.get(g);var y={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _ in g)if(_!=="default"&&Object.prototype.hasOwnProperty.call(g,_)){var x=b?Object.getOwnPropertyDescriptor(g,_):null;x&&(x.get||x.set)?Object.defineProperty(y,_,x):y[_]=g[_]}return y.default=g,m&&m.set(g,y),y}function u(g,v){var m=Object.keys(g);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(g);v&&(y=y.filter(function(b){return Object.getOwnPropertyDescriptor(g,b).enumerable})),m.push.apply(m,y)}return m}function d(g){for(var v=1;v<arguments.length;v++){var m=arguments[v]!=null?arguments[v]:{};v%2?u(Object(m),!0).forEach(function(y){(0,i.default)(g,y,m[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(m)):u(Object(m)).forEach(function(y){Object.defineProperty(g,y,Object.getOwnPropertyDescriptor(m,y))})}return g}var f=(0,a.interopRequireDefault)(s.Menu),h=o.forwardRef(function(v,m){var y;return o.createElement(f,(0,r.default)({},v,{ref:m,style:d({pointerEvents:"none"},v.style),PaperProps:d(d({},v.PaperProps),{},{style:d({pointerEvents:"auto"},(y=v.PaperProps)===null||y===void 0?void 0:y.style)})}))}),p=h;e.default=p})(fte);var _E={},$He=ir;Object.defineProperty(_E,"__esModule",{value:!0});_E.default=void 0;var DHe=$He(ji()),BHe=q,NHe=(0,DHe.default)((0,BHe.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");_E.default=NHe;var FHe=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),zHe=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),jHe=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&FHe(t,e,n);return zHe(t,e),t},hte=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mE,"__esModule",{value:!0});const sn=jHe(I),nc=Ro,w8=Kf,hy=Mi,UHe=hte(fte),VHe=hte(_E),ag=sn.default.createContext({parentPopupState:null,rootPopupState:null});function HHe({onClick:e,closeAfterItemClick:t,...n}){const{rootPopupState:r}=(0,sn.useContext)(ag);if(!r)throw new Error("must be used inside a CascadingMenu");return sn.default.createElement(nc.MenuItem,{...n,onClick:i=>{t&&r.close(),e==null||e(i)}})}function GHe({title:e,Icon:t,inset:n,popupId:r,...i}){const{parentPopupState:o}=(0,sn.useContext)(ag),s=(0,hy.usePopupState)({popupId:r,variant:"popover",parentPopupState:o});return sn.default.createElement(sn.default.Fragment,null,sn.default.createElement(nc.MenuItem,{...(0,hy.bindHover)(s),...(0,hy.bindFocus)(s)},t?sn.default.createElement(nc.ListItemIcon,null,sn.default.createElement(t,null)):null,sn.default.createElement(nc.ListItemText,{primary:e,inset:n}),sn.default.createElement(VHe.default,null)),sn.default.createElement(WHe,{...i,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},popupState:s}))}function WHe({popupState:e,onMenuItemClick:t,menuItems:n,classes:r,...i}){const{rootPopupState:o}=(0,sn.useContext)(ag),s=(0,sn.useMemo)(()=>({rootPopupState:o||e,parentPopupState:e}),[o,e]);return sn.default.createElement(ag.Provider,{value:s},sn.default.createElement(UHe.default,{...i,...(0,hy.bindMenu)(e)}))}function qHe({popupState:e,onMenuItemClick:t,menuItems:n,...r}){const{rootPopupState:i}=(0,sn.useContext)(ag),o=(0,sn.useMemo)(()=>({rootPopupState:i||e,parentPopupState:e}),[i,e]);return sn.default.createElement(ag.Provider,{value:o},sn.default.createElement(nc.Menu,{...r,...(0,hy.bindMenu)(e)}))}function YHe({item:e}){return"subMenu"in e?sn.default.createElement(w8.MenuItemEndDecoration,{type:"subMenu"}):e.type==="checkbox"||e.type==="radio"?sn.default.createElement(w8.MenuItemEndDecoration,{type:e.type,checked:e.checked,disabled:e.disabled}):null}function pte({onMenuItemClick:e,closeAfterItemClick:t,menuItems:n,...r}){function i(s){return a=>{e(a,s)}}const o=n.some(s=>"icon"in s&&s.icon);return sn.default.createElement(sn.default.Fragment,null,n.map((s,a)=>"subMenu"in s?sn.default.createElement(GHe,{key:`subMenu-${s.label}-${a}`,popupId:`subMenu-${s.label}`,title:s.label,Icon:s.icon,inset:o&&!s.icon,onMenuItemClick:e,menuItems:s.subMenu},sn.default.createElement(pte,{...r,closeAfterItemClick:t,onMenuItemClick:e,menuItems:s.subMenu})):s.type==="divider"?sn.default.createElement(nc.Divider,{key:`divider-${a}`,component:"li"}):s.type==="subHeader"?sn.default.createElement(nc.ListSubheader,{key:`subHeader-${s.label}-${a}`},s.label):sn.default.createElement(HHe,{key:`${s.label}-${a}`,closeAfterItemClick:t,onClick:"onClick"in s?i(s.onClick):void 0,disabled:!!s.disabled},s.icon?sn.default.createElement(nc.ListItemIcon,null,sn.default.createElement(s.icon,null)):null," ",sn.default.createElement(nc.ListItemText,{primary:s.label,secondary:s.subLabel,inset:o&&!s.icon}),sn.default.createElement("div",{style:{flexGrow:1,minWidth:10}}),sn.default.createElement(YHe,{item:s}))))}function XHe(e){const{closeAfterItemClick:t=!0,...n}=e;return sn.default.createElement(qHe,{...n},sn.default.createElement(pte,{...n,closeAfterItemClick:t}))}mE.default=XHe;var vx={};const oD=I.createContext(null),z3={didCatch:!1,error:null};class mte extends I.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=z3}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:o,reason:"imperative-api"}),this.setState(z3)}}componentDidCatch(t,n){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&n.error!==null&&KHe(t.resetKeys,i)){var o,s;(o=(s=this.props).onReset)===null||o===void 0||o.call(s,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(z3)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:i}=this.props,{didCatch:o,error:s}=this.state;let a=t;if(o){const l={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")a=n(l);else if(r)a=I.createElement(r,l);else if(i===null||I.isValidElement(i))a=i;else throw s}return I.createElement(oD.Provider,{value:{didCatch:o,error:s,resetErrorBoundary:this.resetErrorBoundary}},a)}}function KHe(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}function ZHe(e){if(e==null||typeof e.didCatch!="boolean"||typeof e.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function JHe(){const e=I.useContext(oD);ZHe(e);const[t,n]=I.useState({error:null,hasError:!1}),r=I.useMemo(()=>({resetBoundary:()=>{e.resetErrorBoundary(),n({error:null,hasError:!1})},showBoundary:i=>n({error:i,hasError:!0})}),[e.resetErrorBoundary]);if(t.hasError)throw t.error;return r}function QHe(e,t){const n=I.forwardRef((i,o)=>I.createElement(mte,t,I.createElement(e,{...i,ref:o}))),r=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary(".concat(r,")"),n}const eGe=Object.freeze(Object.defineProperty({__proto__:null,ErrorBoundary:mte,ErrorBoundaryContext:oD,useErrorBoundary:JHe,withErrorBoundary:QHe},Symbol.toStringTag,{value:"Module"})),tGe=Zi(eGe);var wE={},nGe=ir;Object.defineProperty(wE,"__esModule",{value:!0});wE.default=void 0;var rGe=nGe(ji()),iGe=q,oGe=(0,rGe.default)((0,iGe.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");wE.default=oGe;var yx={},sGe=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(yx,"__esModule",{value:!0});const S8=sGe(I);function aGe(e){let t="";const n="is not assignable",r=e.indexOf(n);if(r!==-1){const i=e.slice(0,r+n.length),o=i.match(/.*at path "(.*)" snapshot `(.*)` is not assignable/m);o&&(e=`Failed to load element at ${o[1]}...Failed element had snapshot`,t=o[2]);const s=i.match(/.*snapshot `(.*)` is not assignable/);s&&(e="Failed to load element...Failed element had snapshot",t=s[1])}return t}const lGe=({error:e})=>{const t=`${e}`,n=aGe(t);return S8.default.createElement("div",{style:{padding:4,margin:4,overflow:"auto",maxHeight:200,background:"#f88",border:"1px solid black"}},t.slice(0,1e4),n?S8.default.createElement("pre",{style:{background:"lightgrey",border:"1px solid black",margin:20}},JSON.stringify(JSON.parse(n),null,2)):null)};yx.default=lGe;var sD=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vx,"__esModule",{value:!0});const Fo=sD(I),Hc=Ro,cGe=ld,uGe=cd,dGe=tGe,fGe=sD(wE),hGe=sD(yx),pGe=(0,uGe.makeStyles)()(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}));function mGe({error:e}){return Fo.default.createElement("div",{style:{width:800,margin:40}},Fo.default.createElement(hGe.default,{error:e}))}const gGe=(0,cGe.observer)(function(e){const{classes:t}=pGe(),{title:n,header:r,children:i,onClose:o}=e,s=(0,Hc.useTheme)();return Fo.default.createElement(Hc.Dialog,{...e},Fo.default.createElement(Hc.ScopedCssBaseline,null,Fo.default.isValidElement(r)?Fo.default.createElement(Fo.default.Fragment,null,r):Fo.default.createElement(Hc.DialogTitle,null,n,o?Fo.default.createElement(Hc.IconButton,{className:t.closeButton,onClick:()=>{o()}},Fo.default.createElement(fGe.default,null)):null),Fo.default.createElement(Hc.Divider,null),Fo.default.createElement(dGe.ErrorBoundary,{FallbackComponent:mGe},Fo.default.createElement(Hc.ThemeProvider,{theme:(0,Hc.createTheme)(s,{components:{MuiInputBase:{styleOverrides:{input:{boxSizing:"content-box!important"}}}}})},i))))});vx.default=gGe;var aD={},vGe=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),yGe=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),bGe=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&vGe(t,e,n);return yGe(t,e),t},xGe=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(aD,"__esModule",{value:!0});const Il=bGe(I),j3=Ro,_Ge=cd,wGe=xGe(fE),SGe=(0,_Ge.makeStyles)()(e=>({input:{},inputBase:{},typography:{top:6,left:2,position:"absolute",whiteSpace:"nowrap",visibility:"hidden"},inputRoot:{padding:e.spacing(.5)},inputFocused:{borderStyle:"solid",borderWidth:2}})),CGe=Il.default.forwardRef(function(t,n){const{value:r,setValue:i,variant:o,...s}=t,[a,{width:l}]=(0,wGe.default)(),[c,u]=(0,Il.useState)(),[d,f]=(0,Il.useState)(null),[h,p]=(0,Il.useState)(!1);(0,Il.useEffect)(()=>{h&&(d==null||d.blur(),p(!1))},[h,d]);const{classes:g}=SGe(t,{props:t}),v=(0,j3.useTheme)(),m=c===void 0?r:c;return Il.default.createElement("div",{...s,ref:n},Il.default.createElement("div",{style:{position:"relative"}},Il.default.createElement(j3.Typography,{ref:a,component:"span",variant:o,className:g.typography},m)),Il.default.createElement(j3.InputBase,{inputRef:y=>f(y),className:g.inputBase,inputProps:{style:{width:l,...o&&o!=="inherit"?v.typography[o]:{}}},classes:{input:g.input,root:g.inputRoot,focused:g.inputFocused},value:m,onChange:y=>u(y.target.value),onKeyDown:y=>{y.key==="Enter"?d==null||d.blur():y.key==="Escape"&&(u(void 0),p(!0))},onBlur:()=>{i(c||r||""),u(void 0)}}))});aD.default=CGe;var SE={},gte=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(SE,"__esModule",{value:!0});const qh=gte(I),Uv=Ro,AGe=gte(vx);function PGe({onClose:e,open:t,onFactoryReset:n}){function r(i){i==="reset"&&n(),e()}return qh.default.createElement(AGe.default,{title:"Reset",onClose:()=>r(),open:t},qh.default.createElement(Uv.DialogContent,null,qh.default.createElement(Uv.DialogContentText,null,"Are you sure you want to reset? This will restore the default configuration.")),qh.default.createElement(Uv.DialogActions,null,qh.default.createElement(Uv.Button,{onClick:()=>r(),color:"primary"},"Cancel"),qh.default.createElement(Uv.Button,{onClick:()=>r("reset"),color:"primary",variant:"contained"},"OK")))}SE.default=PGe;var lD={},MGe=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),EGe=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),TGe=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&MGe(t,e,n);return EGe(t,e),t},vte=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lD,"__esModule",{value:!0});const Uo=TGe(I),Pp=Ro,OGe=vte(SE),IGe=vte(yx),RGe=({onFactoryReset:e,resetButtonText:t})=>{const[n,r]=(0,Uo.useState)(!1);return Uo.default.createElement(Uo.default.Fragment,null,Uo.default.createElement(Pp.Button,{"data-testid":"fatal-error",color:"primary",variant:"contained",onClick:()=>r(!0)},t),Uo.default.createElement(OGe.default,{onClose:()=>r(!1),open:n,onFactoryReset:e}))};function kGe({componentStack:e,error:t="No error message provided",onFactoryReset:n,resetButtonText:r="Factory Reset"}){return Uo.default.createElement(Pp.Dialog,{maxWidth:"xl",open:!0},Uo.default.createElement(Pp.DialogTitle,null,"Fatal error"),Uo.default.createElement(Pp.DialogContent,null,Uo.default.createElement(IGe.default,{error:t}),Uo.default.createElement("pre",null,e)),Uo.default.createElement(Pp.DialogActions,null,Uo.default.createElement(Pp.Button,{color:"secondary",variant:"contained",onClick:()=>window.location.reload()},"Refresh"),Uo.default.createElement(RGe,{onFactoryReset:n,resetButtonText:r})))}lD.default=kGe;var yte={},cD={},uD={},dD={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTrackName=e.generateUnknownTrackConf=e.generateUnsupportedTrackConf=e.guessTrackType=e.guessAdapter=e.getFileName=e.makeIndexType=e.makeIndex=e.storeBlobLocation=e.setBlobMap=e.getBlobMap=e.getBlob=e.UNSUPPORTED=e.UNKNOWN=e.getParentRenderProps=e.getRpcSessionId=e.getTrackAssemblyNames=void 0;const t=Rc,n=_l,r=sP;function i(x){const w=(0,r.getConf)(x,"assemblyNames");if(!w){const S=(0,t.getParent)(x.configuration);if("sequence"in S)return[(0,r.readConfObject)(S,"name")]}return w}e.getTrackAssemblyNames=i;function o(x){let w;for(let S=x;!(0,t.isRoot)(S);S=(0,t.getParent)(S))"rpcSessionId"in S&&(w=S.rpcSessionId);if(!w)throw new Error("getRpcSessionId failed, no parent node in the state tree has an `rpcSessionId` attribute");return w}e.getRpcSessionId=o;function s(x){for(let w=(0,t.getParent)(x);!(0,t.isRoot)(w);w=(0,t.getParent)(w))if("renderProps"in w)return w.renderProps();return{}}e.getParentRenderProps=s,e.UNKNOWN="UNKNOWN",e.UNSUPPORTED="UNSUPPORTED";let a={};function l(x){return a[x]}e.getBlob=l;function c(){return a}e.getBlobMap=c;function u(x){a=x}e.setBlobMap=u;let d=0;function f(x){if(x&&"blob"in x){const w=`b${+Date.now()}-${d++}`;return a[w]=x.blob,{name:x==null?void 0:x.blob.name,blobId:w,locationType:"BlobLocation"}}return x}e.storeBlobLocation=f;function h(x,w){return"uri"in x?{uri:x.uri+w,locationType:"UriLocation"}:"localPath"in x?{localPath:x.localPath+w,locationType:"LocalPathLocation"}:x}e.makeIndex=h;function p(x,w,S){return x!=null&&x.toUpperCase().endsWith(w)?w:S}e.makeIndexType=p;function g(x){const w="uri"in x?x.uri:void 0,S="localPath"in x?x.localPath:void 0,C="blobId"in x?x:void 0;return(C==null?void 0:C.name)||(w==null?void 0:w.slice(w.lastIndexOf("/")+1))||(S==null?void 0:S.slice(S.lastIndexOf("/")+1))||""}e.getFileName=g;function v(x,w,S,C){if(C){const{pluginManager:A}=(0,n.getEnv)(C),O=A.evaluateExtensionPoint("Core-guessAdapterForLocation",(R,L,D)=>{})(x,w,S);if(O)return O}return{type:e.UNKNOWN}}e.guessAdapter=v;function m(x,w){if(w){const S=(0,n.getSession)(w),A=(0,n.getEnv)(S).pluginManager.evaluateExtensionPoint("Core-guessTrackTypeForLocation",T=>{})(x);if(A)return A}return"FeatureTrack"}e.guessTrackType=m;function y(x,w,S){const C={type:"FeatureTrack",name:`${x} (Unsupported)`,description:`Support not yet implemented for "${w}"`,category:S,trackId:""};return C.trackId=(0,n.objectHash)(C),C}e.generateUnsupportedTrackConf=y;function b(x,w,S){const C={type:"FeatureTrack",name:`${x} (Unknown)`,description:`Could not determine track type for "${w}"`,category:S,trackId:""};return C.trackId=(0,n.objectHash)(C),C}e.generateUnknownTrackConf=b;function _(x,w){const S=(0,r.readConfObject)(x,"name");if(!S&&(0,r.readConfObject)(x,"type")==="ReferenceSequenceTrack"){const C=w.assemblies.find(A=>A.sequence===x);return C?`Reference sequence (${(0,r.readConfObject)(C,"displayName")||(0,r.readConfObject)(C,"name")})`:"Reference sequence"}return S}e.getTrackName=_})(dD);var LGe=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uD,"__esModule",{value:!0});const Gc=LGe(I),$d=Ro,$Ge=cd,DGe=_l,C8=dD;function BGe(e){return"localPath"in e}function A8(e){return"blobId"in e}const NGe=(0,$Ge.makeStyles)()(e=>({filename:{marginLeft:e.spacing(1)}}));function FGe({location:e,setLocation:t}){const{classes:n}=NGe(),r=e&&(A8(e)&&e.name||BGe(e)&&e.localPath),i=e&&A8(e)&&!(0,C8.getBlob)(e.blobId);return Gc.default.createElement($d.Box,{display:"flex",flexDirection:"row",alignItems:"center"},Gc.default.createElement($d.Box,null,Gc.default.createElement($d.FormControl,{fullWidth:!0},Gc.default.createElement($d.Button,{variant:"outlined",component:"label"},"Choose File",Gc.default.createElement("input",{type:"file",hidden:!0,onChange:({target:o})=>{var s;const a=(s=o==null?void 0:o.files)===null||s===void 0?void 0:s[0];a&&(DGe.isElectron?t({localPath:a.path,locationType:"LocalPathLocation"}):t((0,C8.storeBlobLocation)({blob:a})))}})))),Gc.default.createElement($d.Box,null,Gc.default.createElement($d.Typography,{component:"span",className:n.filename,color:r?"initial":"textSecondary"},r||"No file chosen"),i?Gc.default.createElement($d.Typography,{color:"error"},"(need to reload)"):null))}uD.default=FGe;var fD={},zGe=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fD,"__esModule",{value:!0});const jGe=zGe(I),UGe=Ro,VGe=ld,HGe=Pf,GGe=(0,VGe.observer)(function({location:e,setLocation:t,label:n}){return jGe.default.createElement(UGe.TextField,{fullWidth:!0,variant:"outlined",inputProps:{"data-testid":"urlInput"},defaultValue:e&&(0,HGe.isUriLocation)(e)?e.uri:"",label:n||"Enter URL",onChange:r=>{t({uri:r.target.value.trim(),locationType:"UriLocation"})}})});fD.default=GGe;var CE={},WGe=ir;Object.defineProperty(CE,"__esModule",{value:!0});var bte=CE.default=void 0,qGe=WGe(ji()),YGe=q,XGe=(0,qGe.default)((0,YGe.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");bte=CE.default=XGe;var KGe=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),ZGe=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),JGe=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&KGe(t,e,n);return ZGe(t,e),t},hD=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cD,"__esModule",{value:!0});const lr=JGe(I),QGe=ld,zo=Ro,Vv=Pf,eWe=hD(uD),tWe=hD(fD),U3=_l,nWe=hD(CE),P8=2;function rWe(e){const{title:t,children:n,...r}=e;return lr.default.createElement(zo.Tooltip,{title:t||""},lr.default.createElement(zo.ToggleButton,{...r},n))}function M8(e,t){return typeof e=="string"&&e.length>t?`${e.slice(0,Math.max(0,t))}…`:e}const iWe=(0,QGe.observer)(function(e){const{location:t,name:n,description:r,rootModel:i,setLocation:o}=e,s=!t||(0,Vv.isUriLocation)(t)?"url":"file",[a,l]=(0,lr.useState)(t&&"internetAccountId"in t&&t.internetAccountId?t.internetAccountId:s),c=(0,Vv.isAppRootModel)(i)?i.internetAccounts.filter(x=>x.type!=="HTTPBasicInternetAccount"):[],[u,d]=(0,U3.useLocalStorage)("fileSelector-recentlyUsedInternetAccounts",[]),f=Object.fromEntries(c.map(x=>[x.internetAccountId,x])),h=[...new Set(c.map(x=>x.internetAccountId))].sort((x,w)=>u.indexOf(x)-u.indexOf(w)),p=h.slice(0,P8),g=h.slice(P8),[v,m]=(0,lr.useState)(null),y=f[a],b=(0,lr.useCallback)(x=>{o({...x,...(0,Vv.isUriLocation)(x)?{internetAccountId:y==null?void 0:y.internetAccountId}:{}})},[o,y]);(0,lr.useEffect)(()=>{y&&(0,Vv.isUriLocation)(t)&&t.internetAccountId!==y.internetAccountId&&b(t)},[t,y,b]);let _=lr.default.createElement(tWe.default,{...e,setLocation:b,label:y==null?void 0:y.selectorLabel});if(a==="file"&&(_=lr.default.createElement(eWe.default,{...e})),y!=null&&y.SelectorComponent){const{SelectorComponent:x}=y;_=lr.default.createElement(x,{...e,setLocation:b})}return lr.default.createElement(lr.default.Fragment,null,lr.default.createElement(zo.Box,{display:"flex"},lr.default.createElement(zo.InputLabel,{shrink:!0},n)),lr.default.createElement(zo.Box,{display:"flex",flexDirection:"row"},lr.default.createElement(zo.Box,null,lr.default.createElement(zo.ToggleButtonGroup,{value:a,exclusive:!0,onChange:(x,w)=>{d([...new Set([w,...u].filter(U3.notEmpty))]),w&&l(w),(0,Vv.isUriLocation)(t)&&b(t)},"aria-label":"file, url, or account picker"},new URLSearchParams(window.location.search).get("adminKey")?null:lr.default.createElement(zo.ToggleButton,{value:"file","aria-label":"local file"},"File"),lr.default.createElement(zo.ToggleButton,{value:"url","aria-label":"url"},"URL"),p.map(x=>{const{internetAccountId:w,name:S,toggleContents:C}=f[x];return lr.default.createElement(rWe,{key:x,value:w,title:S},typeof C=="string"?M8(C,5):C||M8(S,5))}),g.length>0?lr.default.createElement(zo.ToggleButton,{onClick:x=>m(x.target),selected:!1},"More",lr.default.createElement(nWe.default,null)):null),lr.default.createElement(zo.Menu,{open:!!v,anchorEl:v,onClose:()=>m(null),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},g==null?void 0:g.map(x=>{const{internetAccountId:w,name:S}=f[x];return lr.default.createElement(zo.MenuItem,{key:x,value:w,onClick:()=>{d([...new Set([w,...u].filter(U3.notEmpty))]),l(w),m(null)}},S)})))),_,lr.default.createElement(zo.FormHelperText,null,r))});cD.default=iWe;(function(e){var t=we&&we.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=cD;Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t(n).default}})})(yte);var pD={};const oWe=Zi(lLe);var sWe=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pD,"__esModule",{value:!0});const aWe=sWe(I),lWe=Ro,cWe=cd,uWe=oWe,dWe=(0,cWe.makeStyles)()({dots:{"&::after":{display:"inline-block",content:'""',width:"1em",textAlign:"left",animation:`${(0,uWe.keyframes)`
      0% {
        content: '';
      }
      25% {
          content: '.';
      }
      50% {
        content: '..';
      }
      75% {
        content: '...';
      }
      `} 1.2s infinite ease-in-out`}}});function fWe({message:e,variant:t="body2",...n}){const{classes:r}=dWe();return aWe.default.createElement(lWe.Typography,{className:r.dots,...n,variant:t},`${e||"Loading"}`)}pD.default=fWe;var mD={},hWe=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),pWe=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mWe=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&hWe(t,e,n);return pWe(t,e),t};Object.defineProperty(mD,"__esModule",{value:!0});const w_=mWe(I),gWe=yi;function vWe(e){const{width:t,height:n,highResolutionScaling:r=1,style:i={},imageData:o,blockKey:s,showSoftClip:a}=e,[l,c]=(0,w_.useState)(!1),u=(0,w_.useRef)(null);(0,w_.useEffect)(()=>{if(!o)return;const p=u.current;if(!p)return;const g=p.getContext("2d");g&&((0,gWe.drawImageOntoCanvasContext)(o,g),c(!0))},[o]);const d=a?"_softclipped":"",f=s?"_"+s:"",h=`prerendered_canvas${d}${f}${l?"_done":""}`;return w_.default.createElement("canvas",{"data-testid":h,ref:u,width:t*r,height:n*r,style:{width:t,height:n,...i}})}mD.default=vWe;var gD={},yWe=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),bWe=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),xWe=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&yWe(t,e,n);return bWe(t,e),t};Object.defineProperty(gD,"__esModule",{value:!0});const V3=xWe(I),_We=cd,wWe=ld,SWe=sP,CWe=(0,_We.makeStyles)()({hoverLabel:{border:"1px solid black",position:"absolute",background:"#fffa",pointerEvents:"none",zIndex:1e4}}),AWe=(0,wWe.observer)(function({offsetX:e,offsetY:t,configuration:n,feature:r,timeout:i=300}){const{classes:o}=CWe(),[s,a]=(0,V3.useState)(!1);if((0,V3.useEffect)(()=>{const l=setTimeout(()=>a(!0),i);return()=>clearTimeout(l)}),r&&s){const l=(0,SWe.readConfObject)(n,"mouseover",{feature:r});return V3.default.createElement("div",{className:o.hoverLabel,style:{left:e,top:t}},l)}return null});gD.default=AWe;var vD={},xte=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vD,"__esModule",{value:!0});const Yh=xte(I),PWe=ld,Hv=Ro,MWe=xte(vx),EWe=(0,PWe.observer)(function({model:e,handleClose:t}){return Yh.default.createElement(MWe.default,{maxWidth:"xl",open:!0,onClose:t,title:"Reference sequence"},Yh.default.createElement(Hv.DialogContent,null,Yh.default.createElement(Hv.Typography,null,"Are you sure you want to return to the import form? This will lose your current view")),Yh.default.createElement(Hv.DialogActions,null,Yh.default.createElement(Hv.Button,{onClick:()=>{e.clearView(),t()},variant:"contained",color:"primary",autoFocus:!0},"OK"),Yh.default.createElement(Hv.Button,{onClick:()=>t(),color:"secondary",variant:"contained"},"Cancel")))});vD.default=EWe;var yD={},TWe=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),OWe=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),IWe=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&TWe(t,e,n);return OWe(t,e),t};Object.defineProperty(yD,"__esModule",{value:!0});const Gv=IWe(I),RWe=cd,kWe=(0,RWe.makeStyles)()({horizontalHandle:{cursor:"row-resize",width:"100%"},verticalHandle:{cursor:"col-resize",height:"100%"},flexbox_verticalHandle:{cursor:"col-resize",alignSelf:"stretch"},flexbox_horizontalHandle:{cursor:"row-resize",alignSelf:"stretch"}});function LWe({onDrag:e,vertical:t=!1,flexbox:n=!1,className:r,onMouseDown:i,...o}){const[s,a]=(0,Gv.useState)(!1),l=(0,Gv.useRef)(0),c=(0,Gv.useRef)(0),{classes:u,cx:d}=kWe();(0,Gv.useEffect)(()=>{function h(g){g.preventDefault();const v=t?g.clientX:g.clientY,m=l.current-v,y=v-c.current;c.current=v,e(y,m)}function p(){a(!1)}return s?(window.addEventListener("mousemove",h,!0),window.addEventListener("mouseup",p,!0),()=>{window.removeEventListener("mousemove",h,!0),window.removeEventListener("mouseup",p,!0)}):()=>{}},[s,e,t]);let f;return n?f=t?u.flexbox_verticalHandle:u.flexbox_horizontalHandle:t?f=u.verticalHandle:f=u.horizontalHandle,Gv.default.createElement("div",{"data-resizer":"true",onMouseDown:h=>{h.preventDefault();const p=t?h.clientX:h.clientY;l.current=p,c.current=p,a(!0),i==null||i(h)},className:d(f,r),...o})}yD.default=LWe;var bD={};/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var $We=/["'&<>]/,DWe=BWe;function BWe(e){var t=""+e,n=$We.exec(t);if(!n)return t;var r,i="",o=0,s=0;for(o=n.index;o<t.length;o++){switch(t.charCodeAt(o)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#39;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==o&&(i+=t.substring(s,o)),s=o+1,i+=r}return s!==o?i+t.substring(s,o):i}/*! @license DOMPurify 3.0.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.7/LICENSE */const{entries:_te,setPrototypeOf:E8,isFrozen:NWe,getPrototypeOf:FWe,getOwnPropertyDescriptor:xD}=Object;let{freeze:Ki,seal:_a,create:wte}=Object,{apply:Ok,construct:Ik}=typeof Reflect<"u"&&Reflect;Ki||(Ki=function(t){return t});_a||(_a=function(t){return t});Ok||(Ok=function(t,n,r){return t.apply(n,r)});Ik||(Ik=function(t,n){return new t(...n)});const S_=Bs(Array.prototype.forEach),T8=Bs(Array.prototype.pop),Wv=Bs(Array.prototype.push),fS=Bs(String.prototype.toLowerCase),H3=Bs(String.prototype.toString),zWe=Bs(String.prototype.match),qv=Bs(String.prototype.replace),jWe=Bs(String.prototype.indexOf),UWe=Bs(String.prototype.trim),Lo=Bs(RegExp.prototype.test),Yv=VWe(TypeError);function Bs(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Ok(e,t,r)}}function VWe(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ik(e,n)}}function on(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fS;E8&&E8(e,null);let r=t.length;for(;r--;){let i=t[r];if(typeof i=="string"){const o=n(i);o!==i&&(NWe(t)||(t[r]=o),i=o)}e[i]=!0}return e}function HWe(e){for(let t=0;t<e.length;t++)xD(e,t)===void 0&&(e[t]=null);return e}function tf(e){const t=wte(null);for(const[n,r]of _te(e))xD(e,n)!==void 0&&(Array.isArray(r)?t[n]=HWe(r):typeof r=="object"&&r.constructor===Object?t[n]=tf(r):t[n]=r);return t}function C_(e,t){for(;e!==null;){const r=xD(e,t);if(r){if(r.get)return Bs(r.get);if(typeof r.value=="function")return Bs(r.value)}e=FWe(e)}function n(r){return console.warn("fallback value for",r),null}return n}const O8=Ki(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),G3=Ki(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),W3=Ki(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),GWe=Ki(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),q3=Ki(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),WWe=Ki(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),I8=Ki(["#text"]),R8=Ki(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Y3=Ki(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),k8=Ki(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),A_=Ki(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),qWe=_a(/\{\{[\w\W]*|[\w\W]*\}\}/gm),YWe=_a(/<%[\w\W]*|[\w\W]*%>/gm),XWe=_a(/\${[\w\W]*}/gm),KWe=_a(/^data-[\-\w.\u00B7-\uFFFF]/),ZWe=_a(/^aria-[\-\w]+$/),Ste=_a(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),JWe=_a(/^(?:\w+script|data):/i),QWe=_a(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Cte=_a(/^html$/i);var L8=Object.freeze({__proto__:null,MUSTACHE_EXPR:qWe,ERB_EXPR:YWe,TMPLIT_EXPR:XWe,DATA_ATTR:KWe,ARIA_ATTR:ZWe,IS_ALLOWED_URI:Ste,IS_SCRIPT_OR_DATA:JWe,ATTR_WHITESPACE:QWe,DOCTYPE_NAME:Cte});const eqe=function(){return typeof window>"u"?null:window},tqe=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const o="dompurify"+(r?"#"+r:"");try{return t.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Ate(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:eqe();const t=de=>Ate(de);if(t.version="3.0.7",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;let{document:n}=e;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:h}=e,p=l.prototype,g=C_(p,"cloneNode"),v=C_(p,"nextSibling"),m=C_(p,"childNodes"),y=C_(p,"parentNode");if(typeof s=="function"){const de=n.createElement("template");de.content&&de.content.ownerDocument&&(n=de.content.ownerDocument)}let b,_="";const{implementation:x,createNodeIterator:w,createDocumentFragment:S,getElementsByTagName:C}=n,{importNode:A}=r;let T={};t.isSupported=typeof _te=="function"&&typeof y=="function"&&x&&x.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:O,ERB_EXPR:R,TMPLIT_EXPR:L,DATA_ATTR:D,ARIA_ATTR:$,IS_SCRIPT_OR_DATA:z,ATTR_WHITESPACE:H}=L8;let{IS_ALLOWED_URI:B}=L8,V=null;const J=on({},[...O8,...G3,...W3,...q3,...I8]);let K=null;const ie=on({},[...R8,...Y3,...k8,...A_]);let ce=Object.seal(wte(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),pe=null,se=null,G=!0,he=!0,Z=!1,ae=!0,oe=!1,te=!1,ve=!1,ne=!1,xe=!1,Ce=!1,me=!1,X=!0,Q=!1;const Re="user-content-";let Pe=!0,le=!1,Oe={},Be=null;const De=on({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ee=null;const Ie=on({},["audio","video","img","source","image","track"]);let U=null;const E=on({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),P="http://www.w3.org/1998/Math/MathML",ee="http://www.w3.org/2000/svg",ye="http://www.w3.org/1999/xhtml";let be=ye,Me=!1,ze=null;const Ge=on({},[P,ee,ye],H3);let Xe=null;const ut=["application/xhtml+xml","text/html"],rt="text/html";let dt=null,yt=null;const Ke=n.createElement("form"),gt=function(fe){return fe instanceof RegExp||fe instanceof Function},ct=function(){let fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(yt&&yt===fe)){if((!fe||typeof fe!="object")&&(fe={}),fe=tf(fe),Xe=ut.indexOf(fe.PARSER_MEDIA_TYPE)===-1?rt:fe.PARSER_MEDIA_TYPE,dt=Xe==="application/xhtml+xml"?H3:fS,V="ALLOWED_TAGS"in fe?on({},fe.ALLOWED_TAGS,dt):J,K="ALLOWED_ATTR"in fe?on({},fe.ALLOWED_ATTR,dt):ie,ze="ALLOWED_NAMESPACES"in fe?on({},fe.ALLOWED_NAMESPACES,H3):Ge,U="ADD_URI_SAFE_ATTR"in fe?on(tf(E),fe.ADD_URI_SAFE_ATTR,dt):E,Ee="ADD_DATA_URI_TAGS"in fe?on(tf(Ie),fe.ADD_DATA_URI_TAGS,dt):Ie,Be="FORBID_CONTENTS"in fe?on({},fe.FORBID_CONTENTS,dt):De,pe="FORBID_TAGS"in fe?on({},fe.FORBID_TAGS,dt):{},se="FORBID_ATTR"in fe?on({},fe.FORBID_ATTR,dt):{},Oe="USE_PROFILES"in fe?fe.USE_PROFILES:!1,G=fe.ALLOW_ARIA_ATTR!==!1,he=fe.ALLOW_DATA_ATTR!==!1,Z=fe.ALLOW_UNKNOWN_PROTOCOLS||!1,ae=fe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,oe=fe.SAFE_FOR_TEMPLATES||!1,te=fe.WHOLE_DOCUMENT||!1,xe=fe.RETURN_DOM||!1,Ce=fe.RETURN_DOM_FRAGMENT||!1,me=fe.RETURN_TRUSTED_TYPE||!1,ne=fe.FORCE_BODY||!1,X=fe.SANITIZE_DOM!==!1,Q=fe.SANITIZE_NAMED_PROPS||!1,Pe=fe.KEEP_CONTENT!==!1,le=fe.IN_PLACE||!1,B=fe.ALLOWED_URI_REGEXP||Ste,be=fe.NAMESPACE||ye,ce=fe.CUSTOM_ELEMENT_HANDLING||{},fe.CUSTOM_ELEMENT_HANDLING&&gt(fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ce.tagNameCheck=fe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&gt(fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ce.attributeNameCheck=fe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),fe.CUSTOM_ELEMENT_HANDLING&&typeof fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ce.allowCustomizedBuiltInElements=fe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),oe&&(he=!1),Ce&&(xe=!0),Oe&&(V=on({},I8),K=[],Oe.html===!0&&(on(V,O8),on(K,R8)),Oe.svg===!0&&(on(V,G3),on(K,Y3),on(K,A_)),Oe.svgFilters===!0&&(on(V,W3),on(K,Y3),on(K,A_)),Oe.mathMl===!0&&(on(V,q3),on(K,k8),on(K,A_))),fe.ADD_TAGS&&(V===J&&(V=tf(V)),on(V,fe.ADD_TAGS,dt)),fe.ADD_ATTR&&(K===ie&&(K=tf(K)),on(K,fe.ADD_ATTR,dt)),fe.ADD_URI_SAFE_ATTR&&on(U,fe.ADD_URI_SAFE_ATTR,dt),fe.FORBID_CONTENTS&&(Be===De&&(Be=tf(Be)),on(Be,fe.FORBID_CONTENTS,dt)),Pe&&(V["#text"]=!0),te&&on(V,["html","head","body"]),V.table&&(on(V,["tbody"]),delete pe.tbody),fe.TRUSTED_TYPES_POLICY){if(typeof fe.TRUSTED_TYPES_POLICY.createHTML!="function")throw Yv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof fe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Yv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=fe.TRUSTED_TYPES_POLICY,_=b.createHTML("")}else b===void 0&&(b=tqe(h,i)),b!==null&&typeof _=="string"&&(_=b.createHTML(""));Ki&&Ki(fe),yt=fe}},mt=on({},["mi","mo","mn","ms","mtext"]),Dt=on({},["foreignobject","desc","title","annotation-xml"]),_e=on({},["title","style","font","a","script"]),We=on({},[...G3,...W3,...GWe]),Ue=on({},[...q3,...WWe]),N=function(fe){let ke=y(fe);(!ke||!ke.tagName)&&(ke={namespaceURI:be,tagName:"template"});const qe=fS(fe.tagName),st=fS(ke.tagName);return ze[fe.namespaceURI]?fe.namespaceURI===ee?ke.namespaceURI===ye?qe==="svg":ke.namespaceURI===P?qe==="svg"&&(st==="annotation-xml"||mt[st]):!!We[qe]:fe.namespaceURI===P?ke.namespaceURI===ye?qe==="math":ke.namespaceURI===ee?qe==="math"&&Dt[st]:!!Ue[qe]:fe.namespaceURI===ye?ke.namespaceURI===ee&&!Dt[st]||ke.namespaceURI===P&&!mt[st]?!1:!Ue[qe]&&(_e[qe]||!We[qe]):!!(Xe==="application/xhtml+xml"&&ze[fe.namespaceURI]):!1},k=function(fe){Wv(t.removed,{element:fe});try{fe.parentNode.removeChild(fe)}catch{fe.remove()}},F=function(fe,ke){try{Wv(t.removed,{attribute:ke.getAttributeNode(fe),from:ke})}catch{Wv(t.removed,{attribute:null,from:ke})}if(ke.removeAttribute(fe),fe==="is"&&!K[fe])if(xe||Ce)try{k(ke)}catch{}else try{ke.setAttribute(fe,"")}catch{}},j=function(fe){let ke=null,qe=null;if(ne)fe="<remove></remove>"+fe;else{const ft=zWe(fe,/^[\r\n\t ]+/);qe=ft&&ft[0]}Xe==="application/xhtml+xml"&&be===ye&&(fe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+fe+"</body></html>");const st=b?b.createHTML(fe):fe;if(be===ye)try{ke=new f().parseFromString(st,Xe)}catch{}if(!ke||!ke.documentElement){ke=x.createDocument(be,"template",null);try{ke.documentElement.innerHTML=Me?_:st}catch{}}const Ct=ke.body||ke.documentElement;return fe&&qe&&Ct.insertBefore(n.createTextNode(qe),Ct.childNodes[0]||null),be===ye?C.call(ke,te?"html":"body")[0]:te?ke.documentElement:Ct},Y=function(fe){return w.call(fe.ownerDocument||fe,fe,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null)},ue=function(fe){return fe instanceof d&&(typeof fe.nodeName!="string"||typeof fe.textContent!="string"||typeof fe.removeChild!="function"||!(fe.attributes instanceof u)||typeof fe.removeAttribute!="function"||typeof fe.setAttribute!="function"||typeof fe.namespaceURI!="string"||typeof fe.insertBefore!="function"||typeof fe.hasChildNodes!="function")},ge=function(fe){return typeof a=="function"&&fe instanceof a},Se=function(fe,ke,qe){T[fe]&&S_(T[fe],st=>{st.call(t,ke,qe,yt)})},Ne=function(fe){let ke=null;if(Se("beforeSanitizeElements",fe,null),ue(fe))return k(fe),!0;const qe=dt(fe.nodeName);if(Se("uponSanitizeElement",fe,{tagName:qe,allowedTags:V}),fe.hasChildNodes()&&!ge(fe.firstElementChild)&&Lo(/<[/\w]/g,fe.innerHTML)&&Lo(/<[/\w]/g,fe.textContent))return k(fe),!0;if(!V[qe]||pe[qe]){if(!pe[qe]&&Ye(qe)&&(ce.tagNameCheck instanceof RegExp&&Lo(ce.tagNameCheck,qe)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(qe)))return!1;if(Pe&&!Be[qe]){const st=y(fe)||fe.parentNode,Ct=m(fe)||fe.childNodes;if(Ct&&st){const ft=Ct.length;for(let zt=ft-1;zt>=0;--zt)st.insertBefore(g(Ct[zt],!0),v(fe))}}return k(fe),!0}return fe instanceof l&&!N(fe)||(qe==="noscript"||qe==="noembed"||qe==="noframes")&&Lo(/<\/no(script|embed|frames)/i,fe.innerHTML)?(k(fe),!0):(oe&&fe.nodeType===3&&(ke=fe.textContent,S_([O,R,L],st=>{ke=qv(ke,st," ")}),fe.textContent!==ke&&(Wv(t.removed,{element:fe.cloneNode()}),fe.textContent=ke)),Se("afterSanitizeElements",fe,null),!1)},Fe=function(fe,ke,qe){if(X&&(ke==="id"||ke==="name")&&(qe in n||qe in Ke))return!1;if(!(he&&!se[ke]&&Lo(D,ke))){if(!(G&&Lo($,ke))){if(!K[ke]||se[ke]){if(!(Ye(fe)&&(ce.tagNameCheck instanceof RegExp&&Lo(ce.tagNameCheck,fe)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(fe))&&(ce.attributeNameCheck instanceof RegExp&&Lo(ce.attributeNameCheck,ke)||ce.attributeNameCheck instanceof Function&&ce.attributeNameCheck(ke))||ke==="is"&&ce.allowCustomizedBuiltInElements&&(ce.tagNameCheck instanceof RegExp&&Lo(ce.tagNameCheck,qe)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(qe))))return!1}else if(!U[ke]){if(!Lo(B,qv(qe,H,""))){if(!((ke==="src"||ke==="xlink:href"||ke==="href")&&fe!=="script"&&jWe(qe,"data:")===0&&Ee[fe])){if(!(Z&&!Lo(z,qv(qe,H,"")))){if(qe)return!1}}}}}}return!0},Ye=function(fe){return fe.indexOf("-")>0},at=function(fe){Se("beforeSanitizeAttributes",fe,null);const{attributes:ke}=fe;if(!ke)return;const qe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:K};let st=ke.length;for(;st--;){const Ct=ke[st],{name:ft,namespaceURI:zt,value:Cr}=Ct,jt=dt(ft);let Ze=ft==="value"?Cr:UWe(Cr);if(qe.attrName=jt,qe.attrValue=Ze,qe.keepAttr=!0,qe.forceKeepAttr=void 0,Se("uponSanitizeAttribute",fe,qe),Ze=qe.attrValue,qe.forceKeepAttr||(F(ft,fe),!qe.keepAttr))continue;if(!ae&&Lo(/\/>/i,Ze)){F(ft,fe);continue}oe&&S_([O,R,L],Wt=>{Ze=qv(Ze,Wt," ")});const Pt=dt(fe.nodeName);if(Fe(Pt,jt,Ze)){if(Q&&(jt==="id"||jt==="name")&&(F(ft,fe),Ze=Re+Ze),b&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!zt)switch(h.getAttributeType(Pt,jt)){case"TrustedHTML":{Ze=b.createHTML(Ze);break}case"TrustedScriptURL":{Ze=b.createScriptURL(Ze);break}}try{zt?fe.setAttributeNS(zt,ft,Ze):fe.setAttribute(ft,Ze),T8(t.removed)}catch{}}}Se("afterSanitizeAttributes",fe,null)},Ae=function de(fe){let ke=null;const qe=Y(fe);for(Se("beforeSanitizeShadowDOM",fe,null);ke=qe.nextNode();)Se("uponSanitizeShadowNode",ke,null),!Ne(ke)&&(ke.content instanceof o&&de(ke.content),at(ke));Se("afterSanitizeShadowDOM",fe,null)};return t.sanitize=function(de){let fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ke=null,qe=null,st=null,Ct=null;if(Me=!de,Me&&(de="<!-->"),typeof de!="string"&&!ge(de))if(typeof de.toString=="function"){if(de=de.toString(),typeof de!="string")throw Yv("dirty is not a string, aborting")}else throw Yv("toString is not a function");if(!t.isSupported)return de;if(ve||ct(fe),t.removed=[],typeof de=="string"&&(le=!1),le){if(de.nodeName){const Cr=dt(de.nodeName);if(!V[Cr]||pe[Cr])throw Yv("root node is forbidden and cannot be sanitized in-place")}}else if(de instanceof a)ke=j("<!---->"),qe=ke.ownerDocument.importNode(de,!0),qe.nodeType===1&&qe.nodeName==="BODY"||qe.nodeName==="HTML"?ke=qe:ke.appendChild(qe);else{if(!xe&&!oe&&!te&&de.indexOf("<")===-1)return b&&me?b.createHTML(de):de;if(ke=j(de),!ke)return xe?null:me?_:""}ke&&ne&&k(ke.firstChild);const ft=Y(le?de:ke);for(;st=ft.nextNode();)Ne(st)||(st.content instanceof o&&Ae(st.content),at(st));if(le)return de;if(xe){if(Ce)for(Ct=S.call(ke.ownerDocument);ke.firstChild;)Ct.appendChild(ke.firstChild);else Ct=ke;return(K.shadowroot||K.shadowrootmode)&&(Ct=A.call(r,Ct,!0)),Ct}let zt=te?ke.outerHTML:ke.innerHTML;return te&&V["!doctype"]&&ke.ownerDocument&&ke.ownerDocument.doctype&&ke.ownerDocument.doctype.name&&Lo(Cte,ke.ownerDocument.doctype.name)&&(zt="<!DOCTYPE "+ke.ownerDocument.doctype.name+`>
`+zt),oe&&S_([O,R,L],Cr=>{zt=qv(zt,Cr," ")}),b&&me?b.createHTML(zt):zt},t.setConfig=function(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ct(de),ve=!0},t.clearConfig=function(){yt=null,ve=!1},t.isValidAttribute=function(de,fe,ke){yt||ct({});const qe=dt(de),st=dt(fe);return Fe(qe,st,ke)},t.addHook=function(de,fe){typeof fe=="function"&&(T[de]=T[de]||[],Wv(T[de],fe))},t.removeHook=function(de){if(T[de])return T8(T[de])},t.removeHooks=function(de){T[de]&&(T[de]=[])},t.removeAllHooks=function(){T={}},t}var nqe=Ate(),rqe=nqe,_D=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bD,"__esModule",{value:!0});const iqe=_D(I),oqe=_D(DWe),$8=_D(rqe),sqe=_l,aqe=["a","b","br","code","div","em","h1","h2","h3","h4","h5","h6","i","img","li","p","pre","span","small","strong","table","tbody","sup","sub","td","tfoot","th","thead","tr","u","ul"];let D8=!1;const lqe=new RegExp(aqe.map(e=>`<${e}\\b[^>]*>`).join("|"),"i");function cqe(e){return lqe.test(e)}function uqe({html:e,className:t}){const n=(0,sqe.linkify)(e),r=cqe(n)?n:(0,oqe.default)(n);return D8||(D8=!0,$8.default.addHook("afterSanitizeAttributes",i=>{i.tagName==="A"&&(i.setAttribute("rel","noopener noreferrer"),i.setAttribute("target","_blank"))})),iqe.default.createElement("span",{className:t,dangerouslySetInnerHTML:{__html:$8.default.sanitize(r)}})}bD.default=uqe;(function(e){var t=we&&we.__createBinding||(Object.create?function(_,x,w,S){S===void 0&&(S=w);var C=Object.getOwnPropertyDescriptor(x,w);(!C||("get"in C?!x.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return x[w]}}),Object.defineProperty(_,S,C)}:function(_,x,w,S){S===void 0&&(S=w),_[S]=x[w]}),n=we&&we.__exportStar||function(_,x){for(var w in _)w!=="default"&&!Object.prototype.hasOwnProperty.call(x,w)&&t(x,_,w)},r=we&&we.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0}),e.SanitizedHTML=e.ResizeHandle=e.ReturnToImportFormDialog=e.Tooltip=e.PrerenderedCanvas=e.Menu=e.LoadingEllipses=e.FileSelector=e.FatalErrorDialog=e.FactoryResetDialog=e.ErrorMessage=e.EditableTypography=e.Dialog=e.CascadingMenu=e.AssemblySelector=e.Logomark=e.LogoFull=void 0,n(L4,e);var i=Jm;Object.defineProperty(e,"LogoFull",{enumerable:!0,get:function(){return i.LogoFull}}),Object.defineProperty(e,"Logomark",{enumerable:!0,get:function(){return i.Logomark}});var o=$4;Object.defineProperty(e,"AssemblySelector",{enumerable:!0,get:function(){return r(o).default}});var s=mE;Object.defineProperty(e,"CascadingMenu",{enumerable:!0,get:function(){return r(s).default}});var a=vx;Object.defineProperty(e,"Dialog",{enumerable:!0,get:function(){return r(a).default}});var l=aD;Object.defineProperty(e,"EditableTypography",{enumerable:!0,get:function(){return r(l).default}});var c=yx;Object.defineProperty(e,"ErrorMessage",{enumerable:!0,get:function(){return r(c).default}});var u=SE;Object.defineProperty(e,"FactoryResetDialog",{enumerable:!0,get:function(){return r(u).default}});var d=lD;Object.defineProperty(e,"FatalErrorDialog",{enumerable:!0,get:function(){return r(d).default}});var f=yte;Object.defineProperty(e,"FileSelector",{enumerable:!0,get:function(){return r(f).default}});var h=pD;Object.defineProperty(e,"LoadingEllipses",{enumerable:!0,get:function(){return r(h).default}});var p=Kf;Object.defineProperty(e,"Menu",{enumerable:!0,get:function(){return r(p).default}});var g=mD;Object.defineProperty(e,"PrerenderedCanvas",{enumerable:!0,get:function(){return r(g).default}});var v=gD;Object.defineProperty(e,"Tooltip",{enumerable:!0,get:function(){return r(v).default}});var m=vD;Object.defineProperty(e,"ReturnToImportFormDialog",{enumerable:!0,get:function(){return r(m).default}});var y=yD;Object.defineProperty(e,"ResizeHandle",{enumerable:!0,get:function(){return r(y).default}});var b=bD;Object.defineProperty(e,"SanitizedHTML",{enumerable:!0,get:function(){return r(b).default}}),n(Kf,e)})(P2);const dqe=`CLUSTAL O(1.2.3) multiple sequence alignment
UniProt/Swiss-Prot|P26898|IL2RA_SHEEP      MEPSLLMWRFFVFIVVPGCVTEACHDDPPSLRNA----------MFKVLRYE----VGTM
UniProt/Swiss-Prot|P01590|IL2RA_MOUSE      MEPRLLMLGFLSLTIVPSCRAELCLYDPPEVPNA----------TFKALSYK----NGTI
UniProt/Swiss-Prot|P41690|IL2RA_FELCA      MEPSLLLWGILTFVVVHGHVTELCDENPPDIQHA----------TFKALTYK----TGTM
UniProt/Swiss-Prot|P01589|IL2RA_HUMAN      MDSYLLMWGLLTFIMVPGCQAELCDDDPPEIPHA----------TFKAMAYK----EGTM
UniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU      MDPYLLMWGLLTFITVPGCQAELCDDDPPKITHA----------TFKAVAYK----EGTM
UniProt/Swiss-Prot|Q95118|IL2RG_BOVIN      -----------------------------------LLMWGLLT-----------------
UniProt/Swiss-Prot|P40321|IL2RG_CANFA      MLKPPLPLRSLLFLQLSLLGVGLNSTVPMPNGNEDIT------PDFFLTATPSETLSVSS
UniProt/Swiss-Prot|P26896|IL2RB_RAT        MATVDLSWRLPLYILLLLLATT--------------------------------WVSAAV
UniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE       PLPLRSLLFLQLPLLGVGLNP------------------PLPLRSLLFLQLPLLGVGLNP
UniProt/Swiss-Prot|P36835|IL2_CAPHI        -----------LLGVGLNPKFLTP------------------------------------
UniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO        MLKPPLPLRSLLFLQLPLLGVGLNPKFLTPSGNEDIGGKPGTGGDFFLTSTPAGTLDVST
UniProt/Swiss-Prot|Q29416|IL2_CANFA        --------------LFLQLSLLG-------------------------------------
`,fqe=`CLUSTAL O(1.2.4) multiple sequence alignment


sp|P69905|HBA_HUMAN       MVLSPADKTNVKAAWGKVGAHAGEYGAEALERMFLSFPTTKTYFPHFDLSHGSAQVKGHG	60
sp|P01942|HBA_MOUSE       MVLSGEDKSNIKAAWGKIGGHGAEYGAEALERMFASFPTTKTYFPHFDVSHGSAQVKGHG	60
sp|P13786|HBAZ_CAPHI      MSLTRTERTIILSLWSKISTQADVIGTETLERLFSCYPQAKTYFPHFDLHSGSAQLRAHG	60
                          * *:  ::: : : *.*:. :.   *:*:***:* .:* :********:  ****::.**

sp|P69905|HBA_HUMAN       KKVADALTNAVAHVDDMPNALSALSDLHAHKLRVDPVNFKLLSHCLLVTLAAHLPAEFTP	120
sp|P01942|HBA_MOUSE       KKVADALASAAGHLDDLPGALSALSDLHAHKLRVDPVNFKLLSHCLLVTLASHHPADFTP	120
sp|P13786|HBAZ_CAPHI      SKVVAAVGDAVKSIDNVTSALSKLSELHAYVLRVDPVNFKFLSHCLLVTLASHFPADFTA	120
                          .**. *: .*.  :*:: .*** **:***: *********:**********:* **:**

sp|P69905|HBA_HUMAN       AVHASLDKFLASVSTVLTSKYR	142
sp|P01942|HBA_MOUSE       AVHASLDKFLASVSTVLTSKYR	142
sp|P13786|HBAZ_CAPHI      DAHAAWDKFLSIVSGVLTEKYR	142
                           .**: ****: ** ***.***`,hqe="(((UniProt/Swiss-Prot|P26898|IL2RA_SHEEP:0.24036,(UniProt/Swiss-Prot|P41690|IL2RA_FELCA:0.17737,(UniProt/Swiss-Prot|P01589|IL2RA_HUMAN:0.03906,UniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU:0.03787):0.13033):0.04964):0.02189,UniProt/Swiss-Prot|P01590|IL2RA_MOUSE:0.23072):0.06814,(((UniProt/Swiss-Prot|Q95118|IL2RG_BOVIN:0.09600,UniProt/Swiss-Prot|P40321|IL2RG_CANFA:0.09845):0.25333,UniProt/Swiss-Prot|Q29416|IL2_CANFA:-0.35055):0.10231,(UniProt/Swiss-Prot|P26896|IL2RB_RAT:0.33631,UniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO:-0.33631):0.10166):0.01607,(UniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE:0.32378,UniProt/Swiss-Prot|P36835|IL2_CAPHI:-0.32378):0.09999)";async function Dd(e,t,n){e.setError(void 0);try{t&&await e.setMSAFilehandle(t),n&&await e.setTreeFilehandle(n)}catch(r){e.setError(r)}}const Wc=({onClick:e,model:t,children:n})=>$e.createElement("li",null,$e.createElement(qZ,{onClick:r=>{t.setError(void 0),r.preventDefault(),e()},href:"#"},$e.createElement(xn,{display:"inline"},n))),pqe=Cn(({model:e})=>{const[t,n]=I.useState(),[r,i]=I.useState(),{error:o}=e;return $e.createElement(KK,null,$e.createElement("div",{style:{width:"50%"}},o?$e.createElement("div",{style:{padding:20}},$e.createElement(xn,{color:"error"},"Error: ",`${o}`)):null,$e.createElement(xn,null,"Open an MSA file (stockholm or clustal format) and/or a tree file (newick format)."),$e.createElement(xn,{color:"error"},"Note: you can open up just an MSA or just a tree, both are not required. Some MSA files e.g. stockholm format have an embedded tree also and this is fine, and opening a separate tree file is not required.")),$e.createElement(I0,{container:!0,spacing:10,justifyContent:"center",alignItems:"center"},$e.createElement(I0,{item:!0},$e.createElement(xn,null,"MSA file or URL"),$e.createElement(P2.FileSelector,{location:t,setLocation:n}),$e.createElement(xn,null,"Tree file or URL"),$e.createElement(P2.FileSelector,{location:r,setLocation:i})),$e.createElement(I0,{item:!0},$e.createElement(C4,{onClick:()=>Dd(e,t,r),variant:"contained",color:"primary",disabled:!t&&!r},"Open")),$e.createElement(I0,{item:!0},$e.createElement(xn,null,"Examples"),$e.createElement("ul",null,$e.createElement(Wc,{model:e,onClick:()=>Dd(e,void 0,{uri:"https://jbrowse.org/genomes/newick_trees/sarscov2phylo.pub.ft.nh",locationType:"UriLocation"})},"230k COVID-19 samples (tree only)"),$e.createElement(Wc,{model:e,onClick:()=>{e.setData({msa:dqe,tree:hqe})}},"Small protein MSA+tree"),$e.createElement(Wc,{model:e,onClick:()=>{e.setData({msa:fqe})}},"Small MSA only"),$e.createElement(Wc,{model:e,onClick:()=>Dd(e,{uri:"https://ihh.github.io/abrowse/build/pfam-cov2.stock",locationType:"UriLocation"})},"PFAM SARS-CoV2 multi-stockholm"),$e.createElement(Wc,{model:e,onClick:()=>Dd(e,{uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/Lysine.stock",locationType:"UriLocation"})},"Lysine stockholm file"),$e.createElement(Wc,{model:e,onClick:()=>Dd(e,{uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/PF01601_full.txt",locationType:"UriLocation"})},"PF01601 stockholm file (SARS-CoV2 spike protein)"),$e.createElement(Wc,{model:e,onClick:()=>Dd(e,{uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/europe_covid.fa",locationType:"UriLocation"})},"Europe COVID full genomes (LR883044.1 and 199 other sequences)"),$e.createElement(Wc,{model:e,onClick:()=>Dd(e,{uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.fa",locationType:"UriLocation"},{uri:"https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.nh",locationType:"UriLocation"})},"MAFFT+VeryFastTree(17.9k samples)")))))});var wD={},mqe=ir;Object.defineProperty(wD,"__esModule",{value:!0});var SD=wD.default=void 0,gqe=mqe(ji()),vqe=q,yqe=(0,gqe.default)((0,vqe.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"}),"Assignment");SD=wD.default=yqe;const bqe=M1()({guide:{pointerEvents:"none",height:"100%",width:1,position:"absolute",zIndex:10}}),xqe=Cn(function({model:e,coordX:t}){const{treeAreaWidth:n}=e,{classes:r}=bqe();return $e.createElement($e.Fragment,null,$e.createElement(k4,{open:!0,placement:"top",title:`${e.pxToBp(t)+1}`,arrow:!0},$e.createElement("div",{style:{left:t+n,position:"absolute",height:1}})),$e.createElement("div",{className:r.guide,style:{left:t+n,background:"red"}}))}),_qe=M1()(e=>({rubberband:{height:"100%",background:"tertiary"in e.palette&&e.palette.tertiary?Et(e.palette.tertiary.main,.7):Et(e.palette.primary.main,.7),position:"absolute",zIndex:10,textAlign:"center",overflow:"hidden"},rubberbandControl:{cursor:"crosshair",width:"100%",minHeight:8},rubberbandText:{color:e.palette.tertiary?e.palette.tertiary.contrastText:e.palette.primary.contrastText},popover:{mouseEvents:"none",cursor:"crosshair"},paper:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}));function wqe({model:e,ControlComponent:t=$e.createElement("div",null)}){const{treeAreaWidth:n}=e,[r,i]=I.useState(),[o,s]=I.useState(),[a,l]=I.useState(),[c,u]=I.useState(),d=I.useRef(null),f=I.useRef(null),{classes:h}=_qe(),p=r!==void 0&&a===void 0;I.useEffect(()=>{function O(L){if(d.current&&p){const D=L.clientX-d.current.getBoundingClientRect().left;s(D)}}function R(L){if(r!==void 0&&d.current){const{clientX:D,clientY:$}=L,z=d.current,H=D-z.getBoundingClientRect().left;l({offsetX:H,clientX:D,clientY:$}),u(void 0)}}return p?(window.addEventListener("mousemove",O),window.addEventListener("mouseup",R),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",R)}):()=>{}},[r,p,a]),I.useEffect(()=>{!p&&o!==void 0&&r!==void 0&&Math.abs(o-r)<=3&&y()},[p,o,r,e.colWidth]);function g(O){O.preventDefault(),O.stopPropagation();const R=O.clientX-O.target.getBoundingClientRect().left;i(R),s(R)}function v(O){const R=O.target;u(O.clientX-R.getBoundingClientRect().left)}function m(){u(void 0),e.clearAnnotationClickBoundaries()}function y(){l(void 0),i(void 0),s(void 0)}function b(O,R){R(),y()}if(r===void 0)return $e.createElement($e.Fragment,null,c!==void 0?$e.createElement(xqe,{model:e,coordX:c}):null,$e.createElement("div",{"data-testid":"rubberband_controls",className:h.rubberbandControl,role:"presentation",ref:d,onMouseDown:g,onMouseOut:m,onMouseMove:v},t));const _=a?a.offsetX:o||0,x=_<r?_:r,w=Math.abs(_-r),S=e.pxToBp(x),C=e.pxToBp(x+w),A=Math.ceil(w/e.colWidth),T=[{label:"Create annotation",icon:SD,onClick:()=>{e.setAnnotationClickBoundaries(S,C),y()}}];return $e.createElement($e.Fragment,null,f.current?$e.createElement($e.Fragment,null,$e.createElement(S2,{className:h.popover,classes:{paper:h.paper},open:!0,anchorEl:f.current,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"right"},keepMounted:!0,disableRestoreFocus:!0},$e.createElement(xn,null,S+1)),$e.createElement(S2,{className:h.popover,classes:{paper:h.paper},open:!0,anchorEl:f.current,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,disableRestoreFocus:!0},$e.createElement(xn,null,C+1))):null,$e.createElement("div",{ref:f,className:h.rubberband,style:{left:x+n,width:w}},$e.createElement(xn,{variant:"h6",className:h.rubberbandText},A.toLocaleString("en-US")," bp")),$e.createElement("div",{"data-testid":"rubberband_controls",className:h.rubberbandControl,role:"presentation",ref:d,onMouseDown:g,onMouseOut:m,onMouseMove:v},t),a?$e.createElement(P2.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:a.clientX,top:a.clientY},onMenuItemClick:b,open:!!a,onClose:y,menuItems:T}):null)}const Sqe=Cn(wqe);function Cqe(e,t,n){e=Math.abs(e);const r=t*e;let o=10**parseInt(Number(r).toExponential().split(/e/i)[1],10);for(;o<r&&(o*=2,!(o>=r));)o*=2.5;o=Math.max(o,5);const s=o/e;let a=0;return!(o%10)&&s/10>=n?a=o/10:!(o%5)&&s/5>=n?a=o/5:!(o%2)&&s/2>=n&&(a=o/2),{majorPitch:o,minorPitch:a}}function Aqe(e,t,n,r=!0,i=!0){const o=Cqe(n,60,15);let s=e,a=t;if(s===null||a===null)return[];n<0&&([s,a]=[a,s]),s-=Math.abs(20*n),a+=Math.abs(20*n)+1;const l=o.minorPitch||o.majorPitch;let c=0;const u=[];for(let d=Math.ceil(s/l)*l;d<a;d+=l)i&&d%(o.majorPitch*2)?(u.push({type:"minor",base:d-1,index:c}),c+=1):r&&!(d%(o.majorPitch*2))&&(u.push({type:"major",base:d-1,index:c}),c+=1);return u}function Pte(e){return e<999?String(e):`${Pte(~~(e/1e3))},${`00${~~(e%1e3)}`.slice(-3,0)}`}const Pqe=M1()({majorTickLabel:{fontSize:"11px"},majorTick:{stroke:"#555"},minorTick:{stroke:"#999"}});function Mqe({start:e,end:t,bpPerPx:n,reversed:r,major:i,minor:o}){const{classes:s}=Pqe(),a=Aqe(e,t,n,i,o);return $e.createElement($e.Fragment,null,a.map(l=>{const c=(r?t-l.base:l.base-e)/n;return $e.createElement("line",{key:l.base,x1:c,x2:c,y1:11,y2:l.type==="major"?17:15,strokeWidth:1,stroke:l.type==="major"?"#555":"#999",className:l.type==="major"?s.majorTick:s.minorTick,"data-bp":l.base})}),a.filter(l=>l.type==="major").map(l=>{const c=(r?t-l.base:l.base-e)/n;return $e.createElement("text",{x:c,y:10,key:`label-${l.base}`,textAnchor:"middle",style:{fontSize:"11px"},className:s.majorTickLabel},Pte(l.base+1))}))}const Eqe=Cn(function({model:e}){const{MSA:t,colWidth:n,msaAreaWidth:r,rulerHeight:i,resizeHandleWidth:o,scrollX:s,blocksX:a,blockSize:l}=e,c=I.useRef(null),u=a[0];return t?$e.createElement("div",{ref:c,style:{position:"relative",width:r,cursor:"crosshair",overflow:"hidden",height:i,background:"#ccc"}},$e.createElement("svg",{style:{width:a.length*l,position:"absolute",left:s+u+o,pointerEvents:"none"}},$e.createElement(Mqe,{key:u,start:u/n,end:u/n+l*a.length/n,bpPerPx:1/n}))):null}),Tqe=Cn(({model:e})=>{const{treeWidth:t}=e;return $e.createElement("div",{style:{width:t}})});var CD={},Oqe=ir;Object.defineProperty(CD,"__esModule",{value:!0});var Mte=CD.default=void 0,Iqe=Oqe(ji()),Rqe=q,kqe=(0,Iqe.default)((0,Rqe.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"}),"FolderOpen");Mte=CD.default=kqe;var AD={},Lqe=ir;Object.defineProperty(AD,"__esModule",{value:!0});var Ete=AD.default=void 0,$qe=Lqe(ji()),Dqe=q,Bqe=(0,$qe.default)((0,Dqe.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");Ete=AD.default=Bqe;var PD={},Nqe=ir;Object.defineProperty(PD,"__esModule",{value:!0});var Tte=PD.default=void 0,Fqe=Nqe(ji()),zqe=q,jqe=(0,Fqe.default)((0,zqe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"Help");Tte=PD.default=jqe;var MD={},Uqe=ir;Object.defineProperty(MD,"__esModule",{value:!0});var Ote=MD.default=void 0,Vqe=Uqe(ji()),Hqe=q,Gqe=(0,Vqe.default)((0,Hqe.jsx)("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"}),"List");Ote=MD.default=Gqe;var Ite={},Wqe=we&&we.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),qqe=we&&we.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Yqe=we&&we.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Wqe(t,e,n);return qqe(t,e),t},Xqe=we&&we.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ite,"__esModule",{value:!0});const Xv=Yqe(I),Kqe=Xqe(mE),Zqe=Ro,Jqe=ld,X3=Mi,Qqe=(0,Jqe.observer)(function({children:t,menuItems:n,closeAfterItemClick:r=!0,stopPropagation:i,setOpen:o,onClick:s,...a}){const l=(0,X3.usePopupState)({popupId:"viewMenu",variant:"popover"}),{onClick:c,onTouchStart:u,...d}=(0,X3.bindTrigger)(l),{isOpen:f}=l;return(0,Xv.useEffect)(()=>{o==null||o(f)},[f,o]),Xv.default.createElement(Xv.default.Fragment,null,Xv.default.createElement(Zqe.IconButton,{onClick:h=>{i&&h.stopPropagation(),c(h),s==null||s()},onTouchStart:h=>{i&&h.stopPropagation(),u(h),s==null||s()},...d,...a,disabled:n.length===0},t),Xv.default.createElement(Kqe.default,{...(0,X3.bindPopover)(l),onMenuItemClick:(h,p)=>p(),menuItems:n,closeAfterItemClick:r,popupState:l}))});var eYe=Ite.default=Qqe,ED={},tYe=ir;Object.defineProperty(ED,"__esModule",{value:!0});var Rte=ED.default=void 0,nYe=tYe(ji()),rYe=q,iYe=(0,nYe.default)((0,rYe.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");Rte=ED.default=iYe;var TD={},oYe=ir;Object.defineProperty(TD,"__esModule",{value:!0});var kte=TD.default=void 0,sYe=oYe(ji()),B8=q,aYe=(0,sYe.default)([(0,B8.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},"0"),(0,B8.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"},"1")],"ZoomIn");kte=TD.default=aYe;var OD={},lYe=ir;Object.defineProperty(OD,"__esModule",{value:!0});var Lte=OD.default=void 0,cYe=lYe(ji()),uYe=q,dYe=(0,cYe.default)((0,uYe.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}),"ZoomOut");Lte=OD.default=dYe;const fYe=Cn(function({model:t}){const{colWidth:n,rowHeight:r}=t;return $e.createElement($e.Fragment,null,$e.createElement($i,{onClick:()=>{t.setColWidth(Math.ceil(n*1.5)),t.setRowHeight(Math.ceil(r*1.5))}},$e.createElement(kte,null)),$e.createElement($i,{onClick:()=>{t.setColWidth(Math.max(1,Math.floor(n*.75))),t.setRowHeight(Math.max(1.5,Math.floor(r*.75)))}},$e.createElement(Lte,null)),$e.createElement(eYe,{menuItems:[{label:"Decrease row height",onClick:()=>{t.setRowHeight(Math.max(1.5,r*.75))}},{label:"Increase row height",onClick:()=>{t.setRowHeight(r*1.5)}},{label:"Decrease col width",onClick:()=>{t.setColWidth(Math.max(1,n*.75))}},{label:"Increase col width",onClick:()=>{t.setColWidth(n*1.5)}},{label:"Reset zoom to default",onClick:()=>{t.setColWidth(16),t.setRowHeight(20)}}]},$e.createElement(Rte,null)))}),hYe=Cn(function({model:e}){const{currentAlignment:t,alignmentNames:n}=e;return n.length>0?$e.createElement(A1,{native:!0,value:t,size:"small",onChange:r=>{e.setCurrentAlignment(+r.target.value),e.setScrollX(0),e.setScrollY(0)}},n.map((r,i)=>$e.createElement("option",{key:`${r}-${i}`,value:i},r))):null}),pYe=I.lazy(()=>bh(()=>import("./SettingsDlg-clvDMYlF.js"),__vite__mapDeps([]),import.meta.url)),mYe=I.lazy(()=>bh(()=>import("./AboutDlg-kwhd-rh6.js"),__vite__mapDeps([]),import.meta.url)),gYe=I.lazy(()=>bh(()=>import("./MetadataDlg-SPhhzz2l.js"),__vite__mapDeps([0,1,2]),import.meta.url)),vYe=I.lazy(()=>bh(()=>import("./TracklistDlg-VpL5NvQg.js"),__vite__mapDeps([]),import.meta.url)),yYe=Cn(({model:e})=>{const{mouseOverRowName:t,mouseCol:n}=e;return $e.createElement("div",null,$e.createElement(xn,{display:"inline"},"Row name: ",t),$e.createElement("span",{style:{marginLeft:10}}),$e.createElement(xn,{display:"inline"},"Position: ",n))}),bYe=Cn(function({model:e}){const[t,n]=I.useState(!1),[r,i]=I.useState(!1),[o,s]=I.useState(!1),[a,l]=I.useState(!1);return $e.createElement("div",{style:{display:"flex"}},$e.createElement($i,{onClick:async()=>{try{e.setData({tree:"",msa:""}),e.clearSelectedStructures(),e.setScrollY(0),e.setScrollX(0),e.setCurrentAlignment(0),await e.setTreeFilehandle(void 0),await e.setMSAFilehandle(void 0)}catch(c){console.error(c),e.setError(c)}}},$e.createElement(Mte,null)),$e.createElement($i,{onClick:()=>n(!0)},$e.createElement(Ete,null)),$e.createElement($i,{onClick:()=>s(!0)},$e.createElement(SD,null)),$e.createElement($i,{onClick:()=>l(!0)},$e.createElement(Ote,null)),$e.createElement(I.Suspense,{fallback:null},t?$e.createElement(pYe,{model:e,onClose:()=>n(!1)}):null,r?$e.createElement(mYe,{onClose:()=>i(!1)}):null,o?$e.createElement(gYe,{model:e,onClose:()=>s(!1)}):null,a?$e.createElement(vYe,{model:e,onClose:()=>l(!1)}):null),$e.createElement(hYe,{model:e}),$e.createElement(fYe,{model:e}),$e.createElement(yYe,{model:e}),$e.createElement(xYe,null),$e.createElement($i,{onClick:()=>i(!0)},$e.createElement(Tte,null)))});function xYe(){return $e.createElement("div",{style:{flex:1}})}var N8=!1,lf,Rk,kk,hS,pS,$te,mS,Lk,$k,Dk,Dte,Bk,Nk,Bte,Nte;function to(){if(!N8){N8=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Bk=/\b(iPhone|iP[ao]d)/.exec(e),Nk=/\b(iP[ao]d)/.exec(e),Dk=/Android/i.exec(e),Bte=/FBAN\/\w+;/i.exec(e),Nte=/Mobile/i.exec(e),Dte=!!/Win64/.exec(e),t){lf=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,lf&&document&&document.documentMode&&(lf=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(e);$te=r?parseFloat(r[1])+4:lf,Rk=t[2]?parseFloat(t[2]):NaN,kk=t[3]?parseFloat(t[3]):NaN,hS=t[4]?parseFloat(t[4]):NaN,hS?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),pS=t&&t[1]?parseFloat(t[1]):NaN):pS=NaN}else lf=Rk=kk=pS=hS=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);mS=i?parseFloat(i[1].replace("_",".")):!0}else mS=!1;Lk=!!n[2],$k=!!n[3]}else mS=Lk=$k=!1}}var Fk={ie:function(){return to()||lf},ieCompatibilityMode:function(){return to()||$te>lf},ie64:function(){return Fk.ie()&&Dte},firefox:function(){return to()||Rk},opera:function(){return to()||kk},webkit:function(){return to()||hS},safari:function(){return Fk.webkit()},chrome:function(){return to()||pS},windows:function(){return to()||Lk},osx:function(){return to()||mS},linux:function(){return to()||$k},iphone:function(){return to()||Bk},mobile:function(){return to()||Bk||Nk||Dk||Nte},nativeApp:function(){return to()||Bte},android:function(){return to()||Dk},ipad:function(){return to()||Nk}},_Ye=Fk,P_=!!(typeof window<"u"&&window.document&&window.document.createElement),wYe={canUseDOM:P_,canUseWorkers:typeof Worker<"u",canUseEventListeners:P_&&!!(window.addEventListener||window.attachEvent),canUseViewport:P_&&!!window.screen,isInWorker:!P_},SYe=wYe,Fte=SYe,zte;Fte.canUseDOM&&(zte=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function CYe(e,t){if(!Fte.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&zte&&e==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var AYe=CYe,PYe=_Ye,MYe=AYe,F8=10,z8=40,j8=800;function jte(e){var t=0,n=0,r=0,i=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),r=t*F8,i=n*F8,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||i)&&e.deltaMode&&(e.deltaMode==1?(r*=z8,i*=z8):(r*=j8,i*=j8)),r&&!t&&(t=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:t,spinY:n,pixelX:r,pixelY:i}}jte.getEventType=function(){return PYe.firefox()?"DOMMouseScroll":MYe("wheel")?"wheel":"mousewheel"};var EYe=jte,TYe=EYe;const ID=Dg(TYe),OYe=I.lazy(()=>bh(()=>import("./TrackInfoDlg-gPujlICd.js"),__vite__mapDeps([3,2]),import.meta.url)),IYe=M1()({button:{padding:0}}),RYe=Cn(function({model:e,track:t}){const[n,r]=I.useState(),[i,o]=I.useState(!1),{rowHeight:s,treeAreaWidth:a}=e,{height:l,model:{name:c}}=t,{classes:u}=IYe(),d=Math.max(8,s-8);return $e.createElement("div",{style:{width:a,height:l,flexShrink:0,textAlign:"right",fontSize:d}},c," ",$e.createElement($i,{className:u.button,style:{width:d,height:d},onClick:f=>r(f.currentTarget)},$e.createElement(bte,null)),n?$e.createElement(C1,{anchorEl:n,transitionDuration:0,open:!0,onClose:()=>r(void 0)},$e.createElement(fo,{dense:!0,onClick:()=>{e.toggleTrack(t.model.id),r(void 0)}},"Close"),$e.createElement(fo,{dense:!0,onClick:()=>{o(!0),r(void 0)}},"Get info")):null,i?$e.createElement(I.Suspense,{fallback:null},$e.createElement(OYe,{model:t.model,onClose:()=>o(!1)})):null)}),kYe=Cn(function({model:e,track:t}){const{resizeHandleWidth:n}=e,{model:{height:r,error:i}}=t,o=I.useRef(null),s=I.useRef(!1),a=I.useRef(0);return I.useEffect(()=>{const l=o.current;if(!l)return;function c(u){const d=ID(u);a.current+=d.pixelX,s.current||(s.current=!0,requestAnimationFrame(()=>{e.doScrollX(-a.current),a.current=0,s.current=!1})),u.preventDefault()}return l.addEventListener("wheel",c),()=>{l.removeEventListener("wheel",c)}},[e]),$e.createElement("div",{key:t.id,style:{display:"flex",height:r}},$e.createElement(RYe,{model:e,track:t}),$e.createElement("div",{style:{width:n,flexShrink:0}}),$e.createElement("div",{ref:o},i?$e.createElement("div",{style:{color:"red",fontSize:10}},`${i}`):$e.createElement(t.ReactComponent,{model:e,track:t})))}),LYe=Cn(function({model:e}){const{resizeHandleWidth:t}=e,[n,r]=I.useState(!1),i=I.useRef(!1),o=I.useRef(0);return I.useEffect(()=>{function s(l){l.preventDefault();const c=l.clientX;if(o.current===0)o.current=l.clientX;else{const u=c-o.current;u&&(i.current||(i.current=!0,window.requestAnimationFrame(()=>{e.setTreeAreaWidth(e.treeAreaWidth+u),i.current=!1,o.current=l.clientX})))}}function a(){o.current=0,n&&r(!1)}return n?(document.addEventListener("mousemove",s,!0),document.addEventListener("mouseup",a,!0),()=>{document.removeEventListener("mousemove",s,!0),document.removeEventListener("mouseup",a,!0)}):()=>{}},[n,e]),$e.createElement("div",null,$e.createElement("div",{onMouseDown:()=>r(!0),style:{cursor:"ew-resize",height:"100%",width:t,background:"rgba(200,200,200)",position:"relative"}}))}),$Ye=Cn(function({model:e}){const{resizeHandleWidth:t}=e,[n,r]=I.useState(!1),i=I.useRef(!1),o=I.useRef(0);return I.useEffect(()=>{function s(l){l.preventDefault();const c=l.clientY;if(o.current===0)o.current=l.clientY;else{const u=c-o.current;u&&(i.current||(i.current=!0,window.requestAnimationFrame(()=>{e.setHeight(e.height+u),i.current=!1,o.current=l.clientY})))}}function a(){o.current=0,n&&r(!1)}return n?(document.addEventListener("mousemove",s,!0),document.addEventListener("mouseup",a,!0),()=>{document.removeEventListener("mousemove",s,!0),document.removeEventListener("mouseup",a,!0)}):()=>{}},[n,e]),$e.createElement("div",null,$e.createElement("div",{onMouseDown:()=>r(!0),style:{cursor:"ns-resize",width:"100%",height:t,background:"rgba(200,200,200)",position:"relative"}}))});function DYe(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function BYe(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}Q4([rD]);function zk(e,t){return Object.fromEntries(Object.entries(e).map(t))}function RD(e,t="node",n=0){var r;const i=`${t}-${n}`;return{...e,id:i,name:e.name||i,branchset:((r=e.branchset)===null||r===void 0?void 0:r.map((o,s)=>RD(o,`${i}-${s}`,n+1)))||[]}}function Ute(e,t){return zk(e,([n,r])=>[n,t.palette.getContrastText(gs(r).toHex())])}function NYe(e){return e==null?void 0:e.split(`
`).map(t=>t.trim()).filter(t=>!!t&&!t.startsWith("#")).map(t=>{const[n,r,i,o,s,a,l,c,u]=t.split("	");return{seq_id:n,source:r,type:i,start:+o,end:+s,score:+a,strand:l,phase:c,...Object.fromEntries(u.split(";").map(d=>d.trim()).filter(d=>!!d).map(d=>d.split("=")).map(([d,f])=>[d.trim(),decodeURIComponent(f).trim().split(",").join(" ")]))}})}function U8(e,t){let n="",r=0;for(let i=0;i<t.length;i++)i===e[r]?r++:n+=t[i];return n}function Vte(e,t,n){var r;e.len=(t+=Math.max(e.data.length||0,0))*n,(r=e.children)===null||r===void 0||r.forEach(i=>{Vte(i,t,n)})}function Hte(e){return(e.data.length||1)+(e.children&&BYe(e.children,Hte)||0)}function Gte(e){e.children&&(e._children=e.children,e._children.forEach(Gte),e.children=null)}function V8(e,t,n){return Math.min(Math.max(t,e),n)}Q4([rD]);const FYe={clustal:{G:"orange",P:"orange",S:"orange",T:"orange",H:"red",K:"red",R:"red",F:"blue",W:"blue",Y:"blue",I:"green",L:"green",M:"green",V:"green"},lesk:{G:"orange",A:"orange",S:"orange",T:"orange",C:"green",V:"green",I:"green",L:"green",P:"green",F:"green",Y:"green",M:"green",W:"green",N:"magenta",Q:"magenta",H:"magenta",D:"red",E:"red",K:"blue",R:"blue"},maeditor:{A:"lightgreen",G:"lightgreen",C:"green",D:"darkgreen",E:"darkgreen",N:"darkgreen",Q:"darkgreen",I:"blue",L:"blue",M:"blue",V:"blue",F:"#c8a2c8",W:"#c8a2c8",Y:"#c8a2c8",H:"darkblue",K:"orange",R:"orange",P:"pink",S:"red",T:"red"},percent_identity_dynamic:{},flower:{A:"#b18a51",C:"#ff5701",D:"#01a578",E:"#2da0a1",F:"#fa559d",G:"#b1c23c",H:"#0194f9",I:"#f27663",K:"#7fc3d7",L:"#df6e75",M:"#fe9daf",N:"#0bcec6",P:"#4fa32a",Q:"#7295ae",R:"#83bff1",S:"#b4bd9b",T:"#d2b576",V:"#fd997b",W:"#ff2ded",Y:"#c96ecf"},rainbow_dna:{A:"#3737f5",C:"#37f537",G:"#f5f537",T:"#f53737",U:"#f53737"},clustalx_protein:{A:"#197fe5",C:"#e57f7f",D:"#cc4ccc",E:"#cc4ccc",F:"#197fe5",G:"#e5994c",H:"#19b2b2",I:"#197fe5",K:"#e53319",L:"#197fe5",M:"#197fe5",N:"#19cc19",P:"#cccc00",Q:"#19cc19",R:"#e53319",S:"#19cc19",T:"#19cc19",V:"#197fe5",W:"#197fe5",Y:"#19b2b2"},clustalx_protein_dynamic:{},clustalx_dna:{A:"#e53319",C:"#197fe5",G:"#e5994c",T:"#19cc19",U:"#19cc19"},jalview_buried:{A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},jalview_hydrophobicity:{A:"#ad0052",R:"#0000ff",N:"#0c00f3",D:"#0c00f3",C:"#c2003d",Q:"#0c00f3",E:"#0c00f3",G:"#6a0095",H:"#1500ea",I:"#ff0000",L:"#ea0015",K:"#0000ff",M:"#b0004f",F:"#cb0034",P:"#4600b9",S:"#5e00a1",T:"#61009e",W:"#5b00a4",Y:"#4f00b0",V:"#f60009",B:"#0c00f3",X:"#680097",Z:"#0c00f3"},jalview_prophelix:{A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},jalview_propstrand:{A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},jalview_propturn:{A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},jalview_taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00"},jalview_zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf"},cinema:{H:"blue",K:"blue",R:"blue",D:"red",E:"red",S:"green",T:"green",N:"green",Q:"green",A:"white",V:"white",L:"white",I:"white",M:"white",F:"magenta",W:"magenta",Y:"magenta",P:"brown",G:"brown",C:"yellow",B:"gray",Z:"gray",X:"gray","-":"gray",".":"gray"}},zYe=zk(FYe,([e,t])=>[e,zk(t,([n,r])=>[n,gs(r).toHex()])]);function jYe(e,t,n,r){const i=Object.values(e).reduce(($,z)=>$+z,0),o=t.columns[n][r],{W:s=0,L:a=0,V:l=0,I:c=0,M:u=0,A:d=0,F:f=0,C:h=0,H:p=0,P:g=0,R:v=0,K:m=0,Q:y=0,E:b=0,D:_=0,T:x=0,S:w=0,G:S=0,Y:C=0,N:A=0}=e,T=s+a+l+c+u+d+f+h+p+g+C,O=m+v,R=y+b,L=b+_,D=x+w;if(T/i>.6&&(o==="W"||o==="L"||o==="V"||o==="A"||o==="I"||o==="M"||o==="F"||o==="C"))return"rgb(128,179,230)";if((o==="K"||o==="R")&&(O/i>.6||m/i>.8||v/i>.8||y/i>.8))return"#d88";if(o==="E"&&(O/i>.6||R/i>.5||b/i>.8||y/i>.8||_/i>.8))return"rgb(192, 72, 192)";if(o==="D"&&(O/i>.6||L/i>.5||m/i>.8||v/i>.8||y/i>.8))return"rgb(204, 77, 204)";if(o==="N"&&(A/i>.5||C/i>.85)||o==="Q"&&(O/i>.6||R/i>.6||y/i>.85||b/i>.85||m/i>.85||v/i>.85))return"#8f8";if((o==="S"||o==="T")&&(T/i>.6||D/i>.5||w/i>.85||x/i>.85))return"rgb(26,204,26)";if(o==="C"&&h/i>.85)return"rgb(240, 128, 128)";if(o==="G"&&S/i>0)return"rgb(240, 144, 72)";if(o==="P"&&g/i>0)return"rgb(204, 204, 0)";if((o==="H"||o==="Y")&&(T/i>.6||s>.85||C>.85||d>.85||h>.85||g>.85||y>.85||f>.85||p>.85||c>.85||a>.85||u>.85||l>.85))return"rgb(26, 179, 179)"}function UYe(e,t,n,r){const i=Object.values(e).reduce((d,f)=>d+f,0),o=t.columns[n][r],s=Object.entries(e);let a=0,l="";for(const d of s)d[1]>a&&d[0]!=="-"&&(l=d[0],a=d[1]);const c=a/i,u=`hsl(240, 30%, ${100*Math.max(1-a/i/3,.3)}%)`;if(c>.4&&o===l)return u}function VYe({model:e,offsetX:t,offsetY:n,contrastScheme:r,ctx:i}){var o,s;const{hierarchy:a,bgColor:l,colorSchemeName:c,colorScheme:u,colStats:d,columns:f,blockSize:h,colWidth:p,rowHeight:g,highResScaleFactor:v}=e;i.resetTransform(),i.scale(v,v),i.clearRect(0,0,h,h),i.translate(-t,g/2-n),i.textAlign="center",i.font=i.font.replace(/\d+px/,`${Math.max(8,g-8)}px`);const m=a.leaves(),y=h,b=Math.max(0,Math.floor((n-g)/g)),_=Math.max(0,Math.ceil((n+y+g)/g)),x=Math.max(0,Math.floor(t/p)),w=Math.max(0,Math.ceil((t+y)/p)),S=m.slice(b,_);for(const C of S){const{x:A,data:{name:T}}=C,O=(o=f[T])===null||o===void 0?void 0:o.slice(x,w);for(let R=0;R<(O==null?void 0:O.length);R++){const L=O[R],D=c==="clustalx_protein_dynamic"?jYe(d[x+R],e,T,x+R):c==="percent_identity_dynamic"?UYe(d[x+R],e,T,x+R):u[L.toUpperCase()];if(l){const $=R*p+t-t%p;i.fillStyle=D||"white",i.fillRect($,A-g,p,g)}}}if(g>=5&&p>g/2)for(const C of S){const{x:A,data:{name:T}}=C,O=(s=f[T])===null||s===void 0?void 0:s.slice(x,w);for(let R=0;R<(O==null?void 0:O.length);R++){const L=O[R],D=u[L.toUpperCase()],$=r[L.toUpperCase()]||"black",z=R*p+t-t%p;i.fillStyle=l?$:D||"black",i.fillText(L,z+p/2,A-g/4)}}}const HYe=Cn(function({model:e,offsetX:t,offsetY:n}){const{colWidth:r,rowHeight:i,scrollY:o,scrollX:s,colorScheme:a,blockSize:l,highResScaleFactor:c}=e,u=Dn(),d=I.useMemo(()=>Ute(a,u),[a,u]),f=I.useRef(null);return I.useEffect(()=>{var h;const p=(h=f.current)===null||h===void 0?void 0:h.getContext("2d");if(p)return rl(()=>{VYe({ctx:p,offsetX:t,offsetY:n,contrastScheme:d,model:e})})},[e,t,n,d]),$e.createElement("canvas",{ref:f,onMouseMove:h=>{if(!f.current)return;const{left:p,top:g}=f.current.getBoundingClientRect(),v=h.clientX-p+t,m=h.clientY-g+n;e.setMousePos(Math.floor(v/r)+1,Math.floor(m/i))},onMouseLeave:()=>e.setMousePos(),width:l*c,height:l*c,style:{position:"absolute",top:o+n,left:s+t,width:l,height:l}})}),GYe=Cn(function({model:e}){const{MSA:t,msaFilehandle:n,height:r,msaAreaWidth:i,blocks2d:o}=e,s=I.useRef(null),a=I.useRef(!1),l=I.useRef(0),c=I.useRef(0),u=I.useRef(0),d=I.useRef(0),[f,h]=I.useState(!1);return I.useEffect(()=>{const p=s.current;if(!p)return;function g(v){const m=ID(v);l.current+=m.pixelX,c.current+=m.pixelY,a.current||(a.current=!0,requestAnimationFrame(()=>{e.doScrollX(-l.current),e.doScrollY(-c.current),l.current=0,c.current=0,a.current=!1})),v.preventDefault()}return p.addEventListener("wheel",g),()=>{p.removeEventListener("wheel",g)}},[e]),I.useEffect(()=>{let p=()=>{};function g(m){m.preventDefault();const y=m.clientX,b=m.clientY,_=y-u.current,x=b-d.current;(_||x)&&(a.current||(a.current=!0,window.requestAnimationFrame(()=>{e.doScrollX(_),e.doScrollY(x),a.current=!1,u.current=m.clientX,d.current=m.clientY})))}function v(){u.current=0,f&&h(!1)}return f&&(window.addEventListener("mousemove",g,!0),window.addEventListener("mouseup",v,!0),p=()=>{window.removeEventListener("mousemove",g,!0),window.removeEventListener("mouseup",v,!0)}),p},[e,f]),$e.createElement("div",{ref:s,onMouseDown:p=>{const g=p.target;g.draggable||g.dataset.resizer||p.button===0&&(u.current=p.clientX,d.current=p.clientY,h(!0))},onMouseUp:p=>{p.preventDefault(),h(!1)},onMouseLeave:p=>{p.preventDefault()},style:{position:"relative",height:r,width:i,overflow:"hidden"}},!t&&!n?null:t?o.map(([p,g])=>$e.createElement(HYe,{key:`${p}_${g}`,model:e,offsetX:p,offsetY:g})):$e.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"}},$e.createElement(XK,null),$e.createElement(xn,null,"Loading...")))});function WYe({ctx:e,model:t}){const{mouseCol:n,colWidth:r,treeAreaWidth:i,resizeHandleWidth:o,width:s,height:a,rowHeight:l,scrollX:c,scrollY:u,mouseRow:d,mouseCol2:f,rulerHeight:h,totalTrackAreaHeight:p}=t;if(e.resetTransform(),e.clearRect(0,0,s,a),n!==void 0){e.fillStyle="rgba(0,0,0,0.15)";const g=(n-1)*r+c+i+o;e.fillRect(g,0,r,a)}if(d!==void 0){e.fillStyle="rgba(0,0,0,0.15)";const g=d*l+u+h+p;e.fillRect(i+o,g,s,l)}if(f!==void 0){e.fillStyle="rgba(255,255,0,0.2)";const g=(f-1)*r+c+i+o;e.fillRect(g,0,r,a)}}const qYe=Cn(function({model:e}){const t=I.useRef(null),{height:n,width:r}=e;return I.useEffect(()=>{var i;const o=(i=t.current)===null||i===void 0?void 0:i.getContext("2d");if(o)return rl(()=>{WYe({ctx:o,model:e})})},[e]),$e.createElement("canvas",{ref:t,width:r,height:n,style:{position:"absolute",top:0,left:0,width:r,height:n,zIndex:1e3,pointerEvents:"none"}})});function YYe({model:e}){return $e.createElement($e.Fragment,null,$e.createElement(GYe,{model:e}),$e.createElement(qYe,{model:e}))}function XYe(e,t,n,r,i){Wte(e,t,n||0,r||e.length-1,i||KYe)}function Wte(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=t-n+1,a=Math.log(o),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(o-l)/o)*(s-o/2<0?-1:1),u=Math.max(n,Math.floor(t-s*l/o+c)),d=Math.min(r,Math.floor(t+(o-s)*l/o+c));Wte(e,t,u,d,i)}var f=e[t],h=n,p=r;for(Kv(e,n,t),i(e[r],f)>0&&Kv(e,n,r);h<p;){for(Kv(e,h,p),h++,p--;i(e[h],f)<0;)h++;for(;i(e[p],f)>0;)p--}i(e[n],f)===0?Kv(e,n,p):(p++,Kv(e,p,r)),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function Kv(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function KYe(e,t){return e<t?-1:e>t?1:0}class qte{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let n=this.data;const r=[];if(!E_(t,n))return r;const i=this.toBBox,o=[];for(;n;){for(let s=0;s<n.children.length;s++){const a=n.children[s],l=n.leaf?i(a):a;E_(t,l)&&(n.leaf?r.push(a):Z3(t,l)?this._all(a,r):o.push(a))}n=o.pop()}return r}collides(t){let n=this.data;if(!E_(t,n))return!1;const r=[];for(;n;){for(let i=0;i<n.children.length;i++){const o=n.children[i],s=n.leaf?this.toBBox(o):o;if(E_(t,s)){if(n.leaf||Z3(t,s))return!0;r.push(o)}}n=r.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let r=0;r<t.length;r++)this.insert(t[r]);return this}let n=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Mp([]),this}remove(t,n){if(!t)return this;let r=this.data;const i=this.toBBox(t),o=[],s=[];let a,l,c;for(;r||o.length;){if(r||(r=o.pop(),l=o[o.length-1],a=s.pop(),c=!0),r.leaf){const u=ZYe(t,r.children,n);if(u!==-1)return r.children.splice(u,1),o.push(r),this._condense(o),this}!c&&!r.leaf&&Z3(r,i)?(o.push(r),s.push(a),a=0,l=r,r=r.children[0]):l?(a++,r=l.children[a],c=!1):r=null}return this}toBBox(t){return t}compareMinX(t,n){return t.minX-n.minX}compareMinY(t,n){return t.minY-n.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,n){const r=[];for(;t;)t.leaf?n.push(...t.children):r.push(...t.children),t=r.pop();return n}_build(t,n,r,i){const o=r-n+1;let s=this._maxEntries,a;if(o<=s)return a=Mp(t.slice(n,r+1)),Xh(a,this.toBBox),a;i||(i=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,i-1))),a=Mp([]),a.leaf=!1,a.height=i;const l=Math.ceil(o/s),c=l*Math.ceil(Math.sqrt(s));H8(t,n,r,c,this.compareMinX);for(let u=n;u<=r;u+=c){const d=Math.min(u+c-1,r);H8(t,u,d,l,this.compareMinY);for(let f=u;f<=d;f+=l){const h=Math.min(f+l-1,d);a.children.push(this._build(t,f,h,i-1))}}return Xh(a,this.toBBox),a}_chooseSubtree(t,n,r,i){for(;i.push(n),!(n.leaf||i.length-1===r);){let o=1/0,s=1/0,a;for(let l=0;l<n.children.length;l++){const c=n.children[l],u=K3(c),d=eXe(t,c)-u;d<s?(s=d,o=u<o?u:o,a=c):d===s&&u<o&&(o=u,a=c)}n=a||n.children[0]}return n}_insert(t,n,r){const i=r?t:this.toBBox(t),o=[],s=this._chooseSubtree(i,this.data,n,o);for(s.children.push(t),$0(s,i);n>=0&&o[n].children.length>this._maxEntries;)this._split(o,n),n--;this._adjustParentBBoxes(i,o,n)}_split(t,n){const r=t[n],i=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,i);const s=this._chooseSplitIndex(r,o,i),a=Mp(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,Xh(r,this.toBBox),Xh(a,this.toBBox),n?t[n-1].children.push(a):this._splitRoot(r,a)}_splitRoot(t,n){this.data=Mp([t,n]),this.data.height=t.height+1,this.data.leaf=!1,Xh(this.data,this.toBBox)}_chooseSplitIndex(t,n,r){let i,o=1/0,s=1/0;for(let a=n;a<=r-n;a++){const l=L0(t,0,a,this.toBBox),c=L0(t,a,r,this.toBBox),u=tXe(l,c),d=K3(l)+K3(c);u<o?(o=u,i=a,s=d<s?d:s):u===o&&d<s&&(s=d,i=a)}return i||r-n}_chooseSplitAxis(t,n,r){const i=t.leaf?this.compareMinX:JYe,o=t.leaf?this.compareMinY:QYe,s=this._allDistMargin(t,n,r,i),a=this._allDistMargin(t,n,r,o);s<a&&t.children.sort(i)}_allDistMargin(t,n,r,i){t.children.sort(i);const o=this.toBBox,s=L0(t,0,n,o),a=L0(t,r-n,r,o);let l=M_(s)+M_(a);for(let c=n;c<r-n;c++){const u=t.children[c];$0(s,t.leaf?o(u):u),l+=M_(s)}for(let c=r-n-1;c>=n;c--){const u=t.children[c];$0(a,t.leaf?o(u):u),l+=M_(a)}return l}_adjustParentBBoxes(t,n,r){for(let i=r;i>=0;i--)$0(n[i],t)}_condense(t){for(let n=t.length-1,r;n>=0;n--)t[n].children.length===0?n>0?(r=t[n-1].children,r.splice(r.indexOf(t[n]),1)):this.clear():Xh(t[n],this.toBBox)}}function ZYe(e,t,n){if(!n)return t.indexOf(e);for(let r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function Xh(e,t){L0(e,0,e.children.length,t,e)}function L0(e,t,n,r,i){i||(i=Mp(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let o=t;o<n;o++){const s=e.children[o];$0(i,e.leaf?r(s):s)}return i}function $0(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function JYe(e,t){return e.minX-t.minX}function QYe(e,t){return e.minY-t.minY}function K3(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function M_(e){return e.maxX-e.minX+(e.maxY-e.minY)}function eXe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function tXe(e,t){const n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),o=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function Z3(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function E_(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function Mp(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function H8(e,t,n,r,i){const o=[t,n];for(;o.length;){if(n=o.pop(),t=o.pop(),n-t<=r)continue;const s=t+Math.ceil((n-t)/r/2)*r;XYe(e,s,t,n,i),o.push(t,s,s,n)}}const nXe=I.lazy(()=>bh(()=>import("./TreeNodeInfoDlg-mpBjqmzZ.js"),__vite__mapDeps([4,1,2]),import.meta.url)),rXe=Cn(function({node:e,onClose:t,model:n}){var r,i;const{structures:o}=n,s=e?n.getRowData(e.name):void 0;return $e.createElement($e.Fragment,null,$e.createElement(C1,{anchorReference:"anchorPosition",anchorPosition:{top:e.y,left:e.x},transitionDuration:0,keepMounted:!0,open:!!e,onClose:t},$e.createElement(fo,{dense:!0,disabled:!0},e.name),$e.createElement(fo,{dense:!0,onClick:()=>{n.setDialogComponent(nXe,{info:n.getRowData(e.name),model:n,nodeName:e.name}),t()}},"More info..."),(r=o[e.name])===null||r===void 0?void 0:r.map(a=>n.selectedStructures.some(l=>l.id===e.name)?$e.createElement(fo,{key:JSON.stringify(a),dense:!0,onClick:()=>{n.removeStructureFromSelection({structure:a,id:e.name}),t()}},"Remove PDB from selection (",a.pdb,")"):$e.createElement(fo,{key:JSON.stringify(a),dense:!0,onClick:()=>{n.addStructureToSelection({structure:a,id:e.name}),t()}},"Add PDB to selection (",a.pdb,")")),(i=s==null?void 0:s.data.accession)===null||i===void 0?void 0:i.map(a=>$e.createElement(fo,{dense:!0,key:a,onClick:()=>{n.addUniprotTrack({name:s==null?void 0:s.data.name,accession:a}),t()}},"Open UniProt track (",a,")"))))}),iXe=Cn(function({node:e,model:t,onClose:n}){return $e.createElement(C1,{anchorReference:"anchorPosition",anchorPosition:{left:e.x,top:e.y},transitionDuration:0,keepMounted:!0,open:!!e,onClose:n},$e.createElement(fo,{dense:!0,disabled:!0},e.name),$e.createElement(fo,{dense:!0,onClick:()=>{t.toggleCollapsed(e.id),n()}},t.collapsed.includes(e.id)?"Expand this node":"Collapse this node"),$e.createElement(fo,{dense:!0,onClick:()=>{t.showOnly===e.id?t.setShowOnly(void 0):t.setShowOnly(e.id),n()}},t.showOnly===e.id?"Disable show only this node":"Show only this node"))}),cf=600,R2=5,uf=3.5,py=uf*2;function oXe({offsetY:e,ctx:t,model:n}){const{hierarchy:r,showBranchLen:i,blockSize:o}=n;for(const{source:s,target:a}of r.links()){const l=i?"len":"y",{x:c,[l]:u}=s,{x:d,[l]:f}=a,h=Math.min(c,d),p=Math.max(c,d);e+o>=h&&p>=e&&(t.beginPath(),t.moveTo(u,c),t.lineTo(u,d),t.lineTo(f,d),t.stroke())}}function sXe({ctx:e,clickMap:t,offsetY:n,model:r}){const{hierarchy:i,showBranchLen:o,collapsed:s,blockSize:a}=r;for(const l of i.descendants()){const c=o?"len":"y",{x:u,[c]:d,data:f}=l,{branchset:h,id:p="",name:g=""}=f;h.length&&u>n-R2&&u<n+a+R2&&(e.strokeStyle="black",e.fillStyle=s.includes(p)?"black":"white",e.beginPath(),e.arc(d,u,uf,0,2*Math.PI),e.fill(),e.stroke(),t.insert({minX:d-uf,maxX:d-uf+py,minY:u-uf,maxY:u-uf+py,branch:!0,id:p,name:g}))}}function aXe({model:e,offsetY:t,ctx:n,clickMap:r}){var i;const{rowHeight:o,showBranchLen:s,treeMetadata:a,hierarchy:l,blockSize:c,labelsAlignRight:u,drawTree:d,structures:f,treeAreaWidth:h,margin:p,noTree:g}=e;u?(n.textAlign="right",n.setLineDash([1,3])):n.textAlign="start";for(const v of l.leaves()){const{x:m,y,data:{name:b,id:_},len:x}=v,w=((i=a[b])===null||i===void 0?void 0:i.genome)||b;if(m>t-R2&&m<t+c+R2){const S=m+o/4,C=s?x:y,{width:A}=n.measureText(w),T=n.measureText("M").width,O=f[b];if(n.fillStyle=O?"blue":"black",!d&&!u)n.fillText(w,0,S),r.insert({minX:0,maxX:A,minY:S-T,maxY:S,name:b,id:_});else if(u){const L=h-2-p.left;if(d&&!g){const{width:D}=n.measureText(w);n.moveTo(C+uf+2,m),n.lineTo(L-2-D,m),n.stroke()}n.fillText(w,L,S),r.insert({minX:h-p.left-A,maxX:h-p.left,minY:S-T,maxY:S,name:b,id:_})}else n.fillText(w,C+py,S),r.insert({minX:C+py,maxX:C+py+A,minY:S-T,maxY:S,name:b,id:_})}}n.setLineDash([])}function lXe({model:e,clickMap:t,ctx:n,offsetY:r}){t.clear();const{noTree:i,drawTree:o,drawNodeBubbles:s,treeWidth:a,highResScaleFactor:l,margin:c,blockSize:u,rowHeight:d}=e;n.resetTransform(),n.scale(l,l),n.clearRect(0,0,a+cf,u),n.translate(c.left,-r);const f=n.font;n.font=f.replace(/\d+px/,`${Math.max(8,d-8)}px`),!i&&o&&(oXe({ctx:n,offsetY:r,model:e}),s&&sXe({ctx:n,offsetY:r,clickMap:t,model:e})),d>=5&&aXe({ctx:n,offsetY:r,model:e,clickMap:t})}const cXe=Cn(function({model:e,offsetY:t}){const n=I.useRef(null),r=I.useRef(new qte),i=I.useRef(null),[o,s]=I.useState(),[a,l]=I.useState(),[c,u]=I.useState(),{scrollY:d,treeWidth:f,margin:h,blockSize:p,highResScaleFactor:g}=e;I.useEffect(()=>{var y;const b=(y=n.current)===null||y===void 0?void 0:y.getContext("2d");if(b)return rl(()=>{lXe({ctx:b,model:e,offsetY:t,clickMap:r.current})})},[e,t]),I.useEffect(()=>{var y;const b=(y=i.current)===null||y===void 0?void 0:y.getContext("2d");if(b&&(b.resetTransform(),b.clearRect(0,0,f+cf,p),b.translate(h.left,-t),c)){const{minX:_,maxX:x,minY:w,maxY:S}=c;b.fillStyle="rgba(0,0,0,0.1)",b.fillRect(_,w,x-_,S-w)}},[c,h.left,t,p,f]);function v(y){const b=y.nativeEvent.offsetX-h.left,_=y.nativeEvent.offsetY,[x]=r.current.search({minX:b,maxX:b+1,minY:_+t,maxY:_+1+t});return x&&x.branch?{...x,x:y.clientX,y:y.clientY}:void 0}function m(y){const b=y.nativeEvent.offsetX-h.left,_=y.nativeEvent.offsetY,[x]=r.current.search({minX:b,maxX:b+1,minY:_+t,maxY:_+1+t});return x&&!x.branch?{...x,x:y.clientX,y:y.clientY}:void 0}return $e.createElement($e.Fragment,null,o!=null&&o.id?$e.createElement(iXe,{node:o,model:e,onClose:()=>s(void 0)}):null,a!=null&&a.id?$e.createElement(rXe,{node:a,model:e,onClose:()=>l(void 0)}):null,$e.createElement("canvas",{width:(f+cf)*g,height:p*g,style:{width:f+cf,height:p,top:d+t,left:0,position:"absolute"},onMouseMove:y=>{if(!n.current)return;const b=m(y)||v(y);n.current.style.cursor=b?"pointer":"default",u(m(y))},onClick:y=>{const{clientX:b,clientY:_}=y,x=v(y);x!=null&&x.id&&s({...x,x:b,y:_});const w=m(y);w!=null&&w.id&&l({...w,x:b,y:_})},ref:n}),$e.createElement("canvas",{style:{width:f+cf,height:p,top:d+t,left:0,position:"absolute",pointerEvents:"none",zIndex:100},width:f+cf,height:p,ref:i}))}),uXe=Cn(function({model:e}){const t=I.useRef(null),n=I.useRef(!1),r=I.useRef(0),i=I.useRef(0),{treeWidth:o,height:s,blocksY:a}=e,[l,c]=I.useState(!1);I.useEffect(()=>{const h=t.current;if(!h)return;function p(g){const v=ID(g);r.current+=v.pixelY,n.current||(n.current=!0,requestAnimationFrame(()=>{e.doScrollY(-r.current),r.current=0,n.current=!1})),g.preventDefault()}return h.addEventListener("wheel",p),()=>{h.removeEventListener("wheel",p)}},[e]),I.useEffect(()=>{let h=()=>{};function p(v){v.preventDefault();const y=v.clientY-i.current;y&&(n.current||(n.current=!0,window.requestAnimationFrame(()=>{e.doScrollY(y),n.current=!1,i.current=v.clientY})))}function g(){i.current=0,l&&c(!1)}return l&&(window.addEventListener("mousemove",p,!0),window.addEventListener("mouseup",g,!0),h=()=>{window.removeEventListener("mousemove",p,!0),window.removeEventListener("mouseup",g,!0)}),h},[e,l]);function u(h){const p=h.target;p.draggable||p.dataset.resizer||h.button===0&&(i.current=h.clientY,c(!0))}function d(h){h.preventDefault(),c(!1)}function f(h){h.preventDefault()}return $e.createElement("div",{ref:t,onMouseDown:u,onMouseUp:d,onMouseLeave:f,style:{height:s,position:"relative",overflow:"hidden",width:o+cf}},a.map(h=>$e.createElement(cXe,{key:h,model:e,offsetY:h})))}),dXe=Cn(function({model:e}){const{treeAreaWidth:t}=e;return $e.createElement("div",{style:{flexShrink:0,width:t}},$e.createElement(uXe,{model:e}))}),fXe=I.lazy(()=>bh(()=>import("./AnnotationDlg-MrGw1bs_.js"),__vite__mapDeps([]),import.meta.url)),hXe=Cn(function({model:e}){const{done:t,initialized:n}=e;return $e.createElement("div",null,n?t?$e.createElement(pXe,{model:e}):$e.createElement(xn,{variant:"h4"},"Loading..."):$e.createElement(pqe,{model:e}))}),pXe=Cn(function({model:e}){const{treeAreaWidth:t,height:n,turnedOnTracks:r}=e;return $e.createElement("div",null,$e.createElement("div",{style:{height:n,overflow:"hidden"}},$e.createElement(bYe,{model:e}),$e.createElement("div",{style:{position:"relative"}},$e.createElement("div",{style:{display:"flex"}},$e.createElement("div",{style:{flexShrink:0,width:t}},$e.createElement(Tqe,{model:e})),$e.createElement(Sqe,{model:e,ControlComponent:$e.createElement(Eqe,{model:e})})),r==null?void 0:r.map(i=>$e.createElement(kYe,{key:i.model.id,model:e,track:i})),$e.createElement("div",{style:{display:"flex"}},$e.createElement(dXe,{model:e}),$e.createElement(LYe,{model:e}),$e.createElement(YYe,{model:e})))),$e.createElement($Ye,{model:e}),e.DialogComponent?$e.createElement(I.Suspense,{fallback:null},$e.createElement(e.DialogComponent,{...e.DialogProps||{},onClose:()=>e.setDialogComponent()})):null,e.annotPos?$e.createElement(I.Suspense,{fallback:null},$e.createElement(fXe,{data:e.annotPos,model:e,onClose:()=>e.clearAnnotationClickBoundaries()})):null)});function mXe(e,t){return e.parent===t.parent?1:2}function gXe(e){return e.reduce(vXe,0)/e.length}function vXe(e,t){return e+t.x}function yXe(e){return 1+e.reduce(bXe,0)}function bXe(e,t){return Math.max(e,t.y)}function xXe(e){for(var t;t=e.children;)e=t[0];return e}function _Xe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function wXe(){var e=mXe,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(f){var h=f.children;h?(f.x=gXe(h),f.y=yXe(h)):(f.x=s?a+=e(f,s):0,f.y=0,s=f)});var l=xXe(o),c=_Xe(o),u=l.x-e(l,c)/2,d=c.x+e(c,l)/2;return o.eachAfter(r?function(f){f.x=(f.x-o.x)*t,f.y=(o.y-f.y)*n}:function(f){f.x=(f.x-u)/(d-u)*t,f.y=(1-(o.y?f.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function SXe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function CXe(){return this.eachAfter(SXe)}function AXe(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function PXe(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function MXe(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function EXe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function TXe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function OXe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function IXe(e){for(var t=this,n=RXe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function RXe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function kXe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function LXe(){return Array.from(this)}function $Xe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function DXe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*BXe(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function kD(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=zXe)):t===void 0&&(t=FXe);for(var n=new k2(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new k2(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(UXe)}function NXe(){return kD(this).eachBefore(jXe)}function FXe(e){return e.children}function zXe(e){return Array.isArray(e)?e[1]:null}function jXe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function UXe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function k2(e){this.data=e,this.depth=this.height=0,this.parent=null}k2.prototype=kD.prototype={constructor:k2,count:CXe,each:AXe,eachAfter:MXe,eachBefore:PXe,find:EXe,sum:TXe,sort:OXe,path:IXe,ancestors:kXe,descendants:LXe,leaves:$Xe,links:DXe,copy:NXe,[Symbol.iterator]:BXe};var D0={};const Yte={};var lg={},AE={};AE.byteLength=GXe;AE.toByteArray=qXe;AE.fromByteArray=KXe;var qa=[],vs=[],VXe=typeof Uint8Array<"u"?Uint8Array:Array,J3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Kh=0,HXe=J3.length;Kh<HXe;++Kh)qa[Kh]=J3[Kh],vs[J3.charCodeAt(Kh)]=Kh;vs[45]=62;vs[95]=63;function Xte(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function GXe(e){var t=Xte(e),n=t[0],r=t[1];return(n+r)*3/4-r}function WXe(e,t,n){return(t+n)*3/4-n}function qXe(e){var t,n=Xte(e),r=n[0],i=n[1],o=new VXe(WXe(e,r,i)),s=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)t=vs[e.charCodeAt(l)]<<18|vs[e.charCodeAt(l+1)]<<12|vs[e.charCodeAt(l+2)]<<6|vs[e.charCodeAt(l+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=t&255;return i===2&&(t=vs[e.charCodeAt(l)]<<2|vs[e.charCodeAt(l+1)]>>4,o[s++]=t&255),i===1&&(t=vs[e.charCodeAt(l)]<<10|vs[e.charCodeAt(l+1)]<<4|vs[e.charCodeAt(l+2)]>>2,o[s++]=t>>8&255,o[s++]=t&255),o}function YXe(e){return qa[e>>18&63]+qa[e>>12&63]+qa[e>>6&63]+qa[e&63]}function XXe(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),i.push(YXe(r));return i.join("")}function KXe(e){for(var t,n=e.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(XXe(e,s,s+o>a?a:s+o));return r===1?(t=e[n-1],i.push(qa[t>>2]+qa[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(qa[t>>10]+qa[t>>4&63]+qa[t<<2&63]+"=")),i.join("")}var LD={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */LD.read=function(e,t,n,r,i){var o,s,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-u)-1,h>>=-u,u+=a;u>0;o=o*256+e[t+d],d+=f,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=s*256+e[t+d],d+=f,u-=8);if(o===0)o=1-c;else{if(o===l)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-c}return(h?-1:1)*s*Math.pow(2,o-r)};LD.write=function(e,t,n,r,i,o){var s,a,l,c=o*8-i-1,u=(1<<c)-1,d=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?t+=f/l:t+=f*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(t*l-1)*Math.pow(2,i),s=s+d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+h]=a&255,h+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;e[n+h]=s&255,h+=p,s/=256,c-=8);e[n+h-p]|=g*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=AE,n=LD,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const U=new Uint8Array(1),E={foo:function(){return 42}};return Object.setPrototypeOf(E,Uint8Array.prototype),Object.setPrototypeOf(U,E),U.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(U){if(U>i)throw new RangeError('The value "'+U+'" is invalid for option "size"');const E=new Uint8Array(U);return Object.setPrototypeOf(E,a.prototype),E}function a(U,E,P){if(typeof U=="number"){if(typeof E=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(U)}return l(U,E,P)}a.poolSize=8192;function l(U,E,P){if(typeof U=="string")return f(U,E);if(ArrayBuffer.isView(U))return p(U);if(U==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(Oe(U,ArrayBuffer)||U&&Oe(U.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Oe(U,SharedArrayBuffer)||U&&Oe(U.buffer,SharedArrayBuffer)))return g(U,E,P);if(typeof U=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ee=U.valueOf&&U.valueOf();if(ee!=null&&ee!==U)return a.from(ee,E,P);const ye=v(U);if(ye)return ye;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof U[Symbol.toPrimitive]=="function")return a.from(U[Symbol.toPrimitive]("string"),E,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}a.from=function(U,E,P){return l(U,E,P)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(U){if(typeof U!="number")throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function u(U,E,P){return c(U),U<=0?s(U):E!==void 0?typeof P=="string"?s(U).fill(E,P):s(U).fill(E):s(U)}a.alloc=function(U,E,P){return u(U,E,P)};function d(U){return c(U),s(U<0?0:m(U)|0)}a.allocUnsafe=function(U){return d(U)},a.allocUnsafeSlow=function(U){return d(U)};function f(U,E){if((typeof E!="string"||E==="")&&(E="utf8"),!a.isEncoding(E))throw new TypeError("Unknown encoding: "+E);const P=b(U,E)|0;let ee=s(P);const ye=ee.write(U,E);return ye!==P&&(ee=ee.slice(0,ye)),ee}function h(U){const E=U.length<0?0:m(U.length)|0,P=s(E);for(let ee=0;ee<E;ee+=1)P[ee]=U[ee]&255;return P}function p(U){if(Oe(U,Uint8Array)){const E=new Uint8Array(U);return g(E.buffer,E.byteOffset,E.byteLength)}return h(U)}function g(U,E,P){if(E<0||U.byteLength<E)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<E+(P||0))throw new RangeError('"length" is outside of buffer bounds');let ee;return E===void 0&&P===void 0?ee=new Uint8Array(U):P===void 0?ee=new Uint8Array(U,E):ee=new Uint8Array(U,E,P),Object.setPrototypeOf(ee,a.prototype),ee}function v(U){if(a.isBuffer(U)){const E=m(U.length)|0,P=s(E);return P.length===0||U.copy(P,0,0,E),P}if(U.length!==void 0)return typeof U.length!="number"||Be(U.length)?s(0):h(U);if(U.type==="Buffer"&&Array.isArray(U.data))return h(U.data)}function m(U){if(U>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return U|0}function y(U){return+U!=U&&(U=0),a.alloc(+U)}a.isBuffer=function(E){return E!=null&&E._isBuffer===!0&&E!==a.prototype},a.compare=function(E,P){if(Oe(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),Oe(P,Uint8Array)&&(P=a.from(P,P.offset,P.byteLength)),!a.isBuffer(E)||!a.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===P)return 0;let ee=E.length,ye=P.length;for(let be=0,Me=Math.min(ee,ye);be<Me;++be)if(E[be]!==P[be]){ee=E[be],ye=P[be];break}return ee<ye?-1:ye<ee?1:0},a.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(E,P){if(!Array.isArray(E))throw new TypeError('"list" argument must be an Array of Buffers');if(E.length===0)return a.alloc(0);let ee;if(P===void 0)for(P=0,ee=0;ee<E.length;++ee)P+=E[ee].length;const ye=a.allocUnsafe(P);let be=0;for(ee=0;ee<E.length;++ee){let Me=E[ee];if(Oe(Me,Uint8Array))be+Me.length>ye.length?(a.isBuffer(Me)||(Me=a.from(Me)),Me.copy(ye,be)):Uint8Array.prototype.set.call(ye,Me,be);else if(a.isBuffer(Me))Me.copy(ye,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=Me.length}return ye};function b(U,E){if(a.isBuffer(U))return U.length;if(ArrayBuffer.isView(U)||Oe(U,ArrayBuffer))return U.byteLength;if(typeof U!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const P=U.length,ee=arguments.length>2&&arguments[2]===!0;if(!ee&&P===0)return 0;let ye=!1;for(;;)switch(E){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return X(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P*2;case"hex":return P>>>1;case"base64":return Pe(U).length;default:if(ye)return ee?-1:X(U).length;E=(""+E).toLowerCase(),ye=!0}}a.byteLength=b;function _(U,E,P){let ee=!1;if((E===void 0||E<0)&&(E=0),E>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0,E>>>=0,P<=E))return"";for(U||(U="utf8");;)switch(U){case"hex":return V(this,E,P);case"utf8":case"utf-8":return D(this,E,P);case"ascii":return H(this,E,P);case"latin1":case"binary":return B(this,E,P);case"base64":return L(this,E,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,E,P);default:if(ee)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),ee=!0}}a.prototype._isBuffer=!0;function x(U,E,P){const ee=U[E];U[E]=U[P],U[P]=ee}a.prototype.swap16=function(){const E=this.length;if(E%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let P=0;P<E;P+=2)x(this,P,P+1);return this},a.prototype.swap32=function(){const E=this.length;if(E%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let P=0;P<E;P+=4)x(this,P,P+3),x(this,P+1,P+2);return this},a.prototype.swap64=function(){const E=this.length;if(E%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let P=0;P<E;P+=8)x(this,P,P+7),x(this,P+1,P+6),x(this,P+2,P+5),x(this,P+3,P+4);return this},a.prototype.toString=function(){const E=this.length;return E===0?"":arguments.length===0?D(this,0,E):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(E){if(!a.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:a.compare(this,E)===0},a.prototype.inspect=function(){let E="";const P=e.INSPECT_MAX_BYTES;return E=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(E+=" ... "),"<Buffer "+E+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(E,P,ee,ye,be){if(Oe(E,Uint8Array)&&(E=a.from(E,E.offset,E.byteLength)),!a.isBuffer(E))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);if(P===void 0&&(P=0),ee===void 0&&(ee=E?E.length:0),ye===void 0&&(ye=0),be===void 0&&(be=this.length),P<0||ee>E.length||ye<0||be>this.length)throw new RangeError("out of range index");if(ye>=be&&P>=ee)return 0;if(ye>=be)return-1;if(P>=ee)return 1;if(P>>>=0,ee>>>=0,ye>>>=0,be>>>=0,this===E)return 0;let Me=be-ye,ze=ee-P;const Ge=Math.min(Me,ze),Xe=this.slice(ye,be),ut=E.slice(P,ee);for(let rt=0;rt<Ge;++rt)if(Xe[rt]!==ut[rt]){Me=Xe[rt],ze=ut[rt];break}return Me<ze?-1:ze<Me?1:0};function w(U,E,P,ee,ye){if(U.length===0)return-1;if(typeof P=="string"?(ee=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),P=+P,Be(P)&&(P=ye?0:U.length-1),P<0&&(P=U.length+P),P>=U.length){if(ye)return-1;P=U.length-1}else if(P<0)if(ye)P=0;else return-1;if(typeof E=="string"&&(E=a.from(E,ee)),a.isBuffer(E))return E.length===0?-1:S(U,E,P,ee,ye);if(typeof E=="number")return E=E&255,typeof Uint8Array.prototype.indexOf=="function"?ye?Uint8Array.prototype.indexOf.call(U,E,P):Uint8Array.prototype.lastIndexOf.call(U,E,P):S(U,[E],P,ee,ye);throw new TypeError("val must be string, number or Buffer")}function S(U,E,P,ee,ye){let be=1,Me=U.length,ze=E.length;if(ee!==void 0&&(ee=String(ee).toLowerCase(),ee==="ucs2"||ee==="ucs-2"||ee==="utf16le"||ee==="utf-16le")){if(U.length<2||E.length<2)return-1;be=2,Me/=2,ze/=2,P/=2}function Ge(ut,rt){return be===1?ut[rt]:ut.readUInt16BE(rt*be)}let Xe;if(ye){let ut=-1;for(Xe=P;Xe<Me;Xe++)if(Ge(U,Xe)===Ge(E,ut===-1?0:Xe-ut)){if(ut===-1&&(ut=Xe),Xe-ut+1===ze)return ut*be}else ut!==-1&&(Xe-=Xe-ut),ut=-1}else for(P+ze>Me&&(P=Me-ze),Xe=P;Xe>=0;Xe--){let ut=!0;for(let rt=0;rt<ze;rt++)if(Ge(U,Xe+rt)!==Ge(E,rt)){ut=!1;break}if(ut)return Xe}return-1}a.prototype.includes=function(E,P,ee){return this.indexOf(E,P,ee)!==-1},a.prototype.indexOf=function(E,P,ee){return w(this,E,P,ee,!0)},a.prototype.lastIndexOf=function(E,P,ee){return w(this,E,P,ee,!1)};function C(U,E,P,ee){P=Number(P)||0;const ye=U.length-P;ee?(ee=Number(ee),ee>ye&&(ee=ye)):ee=ye;const be=E.length;ee>be/2&&(ee=be/2);let Me;for(Me=0;Me<ee;++Me){const ze=parseInt(E.substr(Me*2,2),16);if(Be(ze))return Me;U[P+Me]=ze}return Me}function A(U,E,P,ee){return le(X(E,U.length-P),U,P,ee)}function T(U,E,P,ee){return le(Q(E),U,P,ee)}function O(U,E,P,ee){return le(Pe(E),U,P,ee)}function R(U,E,P,ee){return le(Re(E,U.length-P),U,P,ee)}a.prototype.write=function(E,P,ee,ye){if(P===void 0)ye="utf8",ee=this.length,P=0;else if(ee===void 0&&typeof P=="string")ye=P,ee=this.length,P=0;else if(isFinite(P))P=P>>>0,isFinite(ee)?(ee=ee>>>0,ye===void 0&&(ye="utf8")):(ye=ee,ee=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-P;if((ee===void 0||ee>be)&&(ee=be),E.length>0&&(ee<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");ye||(ye="utf8");let Me=!1;for(;;)switch(ye){case"hex":return C(this,E,P,ee);case"utf8":case"utf-8":return A(this,E,P,ee);case"ascii":case"latin1":case"binary":return T(this,E,P,ee);case"base64":return O(this,E,P,ee);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,E,P,ee);default:if(Me)throw new TypeError("Unknown encoding: "+ye);ye=(""+ye).toLowerCase(),Me=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(U,E,P){return E===0&&P===U.length?t.fromByteArray(U):t.fromByteArray(U.slice(E,P))}function D(U,E,P){P=Math.min(U.length,P);const ee=[];let ye=E;for(;ye<P;){const be=U[ye];let Me=null,ze=be>239?4:be>223?3:be>191?2:1;if(ye+ze<=P){let Ge,Xe,ut,rt;switch(ze){case 1:be<128&&(Me=be);break;case 2:Ge=U[ye+1],(Ge&192)===128&&(rt=(be&31)<<6|Ge&63,rt>127&&(Me=rt));break;case 3:Ge=U[ye+1],Xe=U[ye+2],(Ge&192)===128&&(Xe&192)===128&&(rt=(be&15)<<12|(Ge&63)<<6|Xe&63,rt>2047&&(rt<55296||rt>57343)&&(Me=rt));break;case 4:Ge=U[ye+1],Xe=U[ye+2],ut=U[ye+3],(Ge&192)===128&&(Xe&192)===128&&(ut&192)===128&&(rt=(be&15)<<18|(Ge&63)<<12|(Xe&63)<<6|ut&63,rt>65535&&rt<1114112&&(Me=rt))}}Me===null?(Me=65533,ze=1):Me>65535&&(Me-=65536,ee.push(Me>>>10&1023|55296),Me=56320|Me&1023),ee.push(Me),ye+=ze}return z(ee)}const $=4096;function z(U){const E=U.length;if(E<=$)return String.fromCharCode.apply(String,U);let P="",ee=0;for(;ee<E;)P+=String.fromCharCode.apply(String,U.slice(ee,ee+=$));return P}function H(U,E,P){let ee="";P=Math.min(U.length,P);for(let ye=E;ye<P;++ye)ee+=String.fromCharCode(U[ye]&127);return ee}function B(U,E,P){let ee="";P=Math.min(U.length,P);for(let ye=E;ye<P;++ye)ee+=String.fromCharCode(U[ye]);return ee}function V(U,E,P){const ee=U.length;(!E||E<0)&&(E=0),(!P||P<0||P>ee)&&(P=ee);let ye="";for(let be=E;be<P;++be)ye+=De[U[be]];return ye}function J(U,E,P){const ee=U.slice(E,P);let ye="";for(let be=0;be<ee.length-1;be+=2)ye+=String.fromCharCode(ee[be]+ee[be+1]*256);return ye}a.prototype.slice=function(E,P){const ee=this.length;E=~~E,P=P===void 0?ee:~~P,E<0?(E+=ee,E<0&&(E=0)):E>ee&&(E=ee),P<0?(P+=ee,P<0&&(P=0)):P>ee&&(P=ee),P<E&&(P=E);const ye=this.subarray(E,P);return Object.setPrototypeOf(ye,a.prototype),ye};function K(U,E,P){if(U%1!==0||U<0)throw new RangeError("offset is not uint");if(U+E>P)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(E,P,ee){E=E>>>0,P=P>>>0,ee||K(E,P,this.length);let ye=this[E],be=1,Me=0;for(;++Me<P&&(be*=256);)ye+=this[E+Me]*be;return ye},a.prototype.readUintBE=a.prototype.readUIntBE=function(E,P,ee){E=E>>>0,P=P>>>0,ee||K(E,P,this.length);let ye=this[E+--P],be=1;for(;P>0&&(be*=256);)ye+=this[E+--P]*be;return ye},a.prototype.readUint8=a.prototype.readUInt8=function(E,P){return E=E>>>0,P||K(E,1,this.length),this[E]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(E,P){return E=E>>>0,P||K(E,2,this.length),this[E]|this[E+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(E,P){return E=E>>>0,P||K(E,2,this.length),this[E]<<8|this[E+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(E,P){return E=E>>>0,P||K(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+this[E+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(E,P){return E=E>>>0,P||K(E,4,this.length),this[E]*16777216+(this[E+1]<<16|this[E+2]<<8|this[E+3])},a.prototype.readBigUInt64LE=Ee(function(E){E=E>>>0,ne(E,"offset");const P=this[E],ee=this[E+7];(P===void 0||ee===void 0)&&xe(E,this.length-8);const ye=P+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24,be=this[++E]+this[++E]*2**8+this[++E]*2**16+ee*2**24;return BigInt(ye)+(BigInt(be)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ee(function(E){E=E>>>0,ne(E,"offset");const P=this[E],ee=this[E+7];(P===void 0||ee===void 0)&&xe(E,this.length-8);const ye=P*2**24+this[++E]*2**16+this[++E]*2**8+this[++E],be=this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+ee;return(BigInt(ye)<<BigInt(32))+BigInt(be)}),a.prototype.readIntLE=function(E,P,ee){E=E>>>0,P=P>>>0,ee||K(E,P,this.length);let ye=this[E],be=1,Me=0;for(;++Me<P&&(be*=256);)ye+=this[E+Me]*be;return be*=128,ye>=be&&(ye-=Math.pow(2,8*P)),ye},a.prototype.readIntBE=function(E,P,ee){E=E>>>0,P=P>>>0,ee||K(E,P,this.length);let ye=P,be=1,Me=this[E+--ye];for(;ye>0&&(be*=256);)Me+=this[E+--ye]*be;return be*=128,Me>=be&&(Me-=Math.pow(2,8*P)),Me},a.prototype.readInt8=function(E,P){return E=E>>>0,P||K(E,1,this.length),this[E]&128?(255-this[E]+1)*-1:this[E]},a.prototype.readInt16LE=function(E,P){E=E>>>0,P||K(E,2,this.length);const ee=this[E]|this[E+1]<<8;return ee&32768?ee|4294901760:ee},a.prototype.readInt16BE=function(E,P){E=E>>>0,P||K(E,2,this.length);const ee=this[E+1]|this[E]<<8;return ee&32768?ee|4294901760:ee},a.prototype.readInt32LE=function(E,P){return E=E>>>0,P||K(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},a.prototype.readInt32BE=function(E,P){return E=E>>>0,P||K(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},a.prototype.readBigInt64LE=Ee(function(E){E=E>>>0,ne(E,"offset");const P=this[E],ee=this[E+7];(P===void 0||ee===void 0)&&xe(E,this.length-8);const ye=this[E+4]+this[E+5]*2**8+this[E+6]*2**16+(ee<<24);return(BigInt(ye)<<BigInt(32))+BigInt(P+this[++E]*2**8+this[++E]*2**16+this[++E]*2**24)}),a.prototype.readBigInt64BE=Ee(function(E){E=E>>>0,ne(E,"offset");const P=this[E],ee=this[E+7];(P===void 0||ee===void 0)&&xe(E,this.length-8);const ye=(P<<24)+this[++E]*2**16+this[++E]*2**8+this[++E];return(BigInt(ye)<<BigInt(32))+BigInt(this[++E]*2**24+this[++E]*2**16+this[++E]*2**8+ee)}),a.prototype.readFloatLE=function(E,P){return E=E>>>0,P||K(E,4,this.length),n.read(this,E,!0,23,4)},a.prototype.readFloatBE=function(E,P){return E=E>>>0,P||K(E,4,this.length),n.read(this,E,!1,23,4)},a.prototype.readDoubleLE=function(E,P){return E=E>>>0,P||K(E,8,this.length),n.read(this,E,!0,52,8)},a.prototype.readDoubleBE=function(E,P){return E=E>>>0,P||K(E,8,this.length),n.read(this,E,!1,52,8)};function ie(U,E,P,ee,ye,be){if(!a.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if(E>ye||E<be)throw new RangeError('"value" argument is out of bounds');if(P+ee>U.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(E,P,ee,ye){if(E=+E,P=P>>>0,ee=ee>>>0,!ye){const ze=Math.pow(2,8*ee)-1;ie(this,E,P,ee,ze,0)}let be=1,Me=0;for(this[P]=E&255;++Me<ee&&(be*=256);)this[P+Me]=E/be&255;return P+ee},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(E,P,ee,ye){if(E=+E,P=P>>>0,ee=ee>>>0,!ye){const ze=Math.pow(2,8*ee)-1;ie(this,E,P,ee,ze,0)}let be=ee-1,Me=1;for(this[P+be]=E&255;--be>=0&&(Me*=256);)this[P+be]=E/Me&255;return P+ee},a.prototype.writeUint8=a.prototype.writeUInt8=function(E,P,ee){return E=+E,P=P>>>0,ee||ie(this,E,P,1,255,0),this[P]=E&255,P+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(E,P,ee){return E=+E,P=P>>>0,ee||ie(this,E,P,2,65535,0),this[P]=E&255,this[P+1]=E>>>8,P+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(E,P,ee){return E=+E,P=P>>>0,ee||ie(this,E,P,2,65535,0),this[P]=E>>>8,this[P+1]=E&255,P+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(E,P,ee){return E=+E,P=P>>>0,ee||ie(this,E,P,4,4294967295,0),this[P+3]=E>>>24,this[P+2]=E>>>16,this[P+1]=E>>>8,this[P]=E&255,P+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(E,P,ee){return E=+E,P=P>>>0,ee||ie(this,E,P,4,4294967295,0),this[P]=E>>>24,this[P+1]=E>>>16,this[P+2]=E>>>8,this[P+3]=E&255,P+4};function ce(U,E,P,ee,ye){ve(E,ee,ye,U,P,7);let be=Number(E&BigInt(4294967295));U[P++]=be,be=be>>8,U[P++]=be,be=be>>8,U[P++]=be,be=be>>8,U[P++]=be;let Me=Number(E>>BigInt(32)&BigInt(4294967295));return U[P++]=Me,Me=Me>>8,U[P++]=Me,Me=Me>>8,U[P++]=Me,Me=Me>>8,U[P++]=Me,P}function pe(U,E,P,ee,ye){ve(E,ee,ye,U,P,7);let be=Number(E&BigInt(4294967295));U[P+7]=be,be=be>>8,U[P+6]=be,be=be>>8,U[P+5]=be,be=be>>8,U[P+4]=be;let Me=Number(E>>BigInt(32)&BigInt(4294967295));return U[P+3]=Me,Me=Me>>8,U[P+2]=Me,Me=Me>>8,U[P+1]=Me,Me=Me>>8,U[P]=Me,P+8}a.prototype.writeBigUInt64LE=Ee(function(E,P=0){return ce(this,E,P,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ee(function(E,P=0){return pe(this,E,P,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(E,P,ee,ye){if(E=+E,P=P>>>0,!ye){const Ge=Math.pow(2,8*ee-1);ie(this,E,P,ee,Ge-1,-Ge)}let be=0,Me=1,ze=0;for(this[P]=E&255;++be<ee&&(Me*=256);)E<0&&ze===0&&this[P+be-1]!==0&&(ze=1),this[P+be]=(E/Me>>0)-ze&255;return P+ee},a.prototype.writeIntBE=function(E,P,ee,ye){if(E=+E,P=P>>>0,!ye){const Ge=Math.pow(2,8*ee-1);ie(this,E,P,ee,Ge-1,-Ge)}let be=ee-1,Me=1,ze=0;for(this[P+be]=E&255;--be>=0&&(Me*=256);)E<0&&ze===0&&this[P+be+1]!==0&&(ze=1),this[P+be]=(E/Me>>0)-ze&255;return P+ee},a.prototype.writeInt8=function(E,P,ee){return E=+E,P=P>>>0,ee||ie(this,E,P,1,127,-128),E<0&&(E=255+E+1),this[P]=E&255,P+1},a.prototype.writeInt16LE=function(E,P,ee){return E=+E,P=P>>>0,ee||ie(this,E,P,2,32767,-32768),this[P]=E&255,this[P+1]=E>>>8,P+2},a.prototype.writeInt16BE=function(E,P,ee){return E=+E,P=P>>>0,ee||ie(this,E,P,2,32767,-32768),this[P]=E>>>8,this[P+1]=E&255,P+2},a.prototype.writeInt32LE=function(E,P,ee){return E=+E,P=P>>>0,ee||ie(this,E,P,4,2147483647,-2147483648),this[P]=E&255,this[P+1]=E>>>8,this[P+2]=E>>>16,this[P+3]=E>>>24,P+4},a.prototype.writeInt32BE=function(E,P,ee){return E=+E,P=P>>>0,ee||ie(this,E,P,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),this[P]=E>>>24,this[P+1]=E>>>16,this[P+2]=E>>>8,this[P+3]=E&255,P+4},a.prototype.writeBigInt64LE=Ee(function(E,P=0){return ce(this,E,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ee(function(E,P=0){return pe(this,E,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function se(U,E,P,ee,ye,be){if(P+ee>U.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function G(U,E,P,ee,ye){return E=+E,P=P>>>0,ye||se(U,E,P,4),n.write(U,E,P,ee,23,4),P+4}a.prototype.writeFloatLE=function(E,P,ee){return G(this,E,P,!0,ee)},a.prototype.writeFloatBE=function(E,P,ee){return G(this,E,P,!1,ee)};function he(U,E,P,ee,ye){return E=+E,P=P>>>0,ye||se(U,E,P,8),n.write(U,E,P,ee,52,8),P+8}a.prototype.writeDoubleLE=function(E,P,ee){return he(this,E,P,!0,ee)},a.prototype.writeDoubleBE=function(E,P,ee){return he(this,E,P,!1,ee)},a.prototype.copy=function(E,P,ee,ye){if(!a.isBuffer(E))throw new TypeError("argument should be a Buffer");if(ee||(ee=0),!ye&&ye!==0&&(ye=this.length),P>=E.length&&(P=E.length),P||(P=0),ye>0&&ye<ee&&(ye=ee),ye===ee||E.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(ee<0||ee>=this.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("sourceEnd out of bounds");ye>this.length&&(ye=this.length),E.length-P<ye-ee&&(ye=E.length-P+ee);const be=ye-ee;return this===E&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(P,ee,ye):Uint8Array.prototype.set.call(E,this.subarray(ee,ye),P),be},a.prototype.fill=function(E,P,ee,ye){if(typeof E=="string"){if(typeof P=="string"?(ye=P,P=0,ee=this.length):typeof ee=="string"&&(ye=ee,ee=this.length),ye!==void 0&&typeof ye!="string")throw new TypeError("encoding must be a string");if(typeof ye=="string"&&!a.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);if(E.length===1){const Me=E.charCodeAt(0);(ye==="utf8"&&Me<128||ye==="latin1")&&(E=Me)}}else typeof E=="number"?E=E&255:typeof E=="boolean"&&(E=Number(E));if(P<0||this.length<P||this.length<ee)throw new RangeError("Out of range index");if(ee<=P)return this;P=P>>>0,ee=ee===void 0?this.length:ee>>>0,E||(E=0);let be;if(typeof E=="number")for(be=P;be<ee;++be)this[be]=E;else{const Me=a.isBuffer(E)?E:a.from(E,ye),ze=Me.length;if(ze===0)throw new TypeError('The value "'+E+'" is invalid for argument "value"');for(be=0;be<ee-P;++be)this[be+P]=Me[be%ze]}return this};const Z={};function ae(U,E,P){Z[U]=class extends P{constructor(){super(),Object.defineProperty(this,"message",{value:E.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,this.stack,delete this.name}get code(){return U}set code(ye){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ye,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(U,E){return`The "${U}" argument must be of type number. Received type ${typeof E}`},TypeError),ae("ERR_OUT_OF_RANGE",function(U,E,P){let ee=`The value of "${U}" is out of range.`,ye=P;return Number.isInteger(P)&&Math.abs(P)>2**32?ye=oe(String(P)):typeof P=="bigint"&&(ye=String(P),(P>BigInt(2)**BigInt(32)||P<-(BigInt(2)**BigInt(32)))&&(ye=oe(ye)),ye+="n"),ee+=` It must be ${E}. Received ${ye}`,ee},RangeError);function oe(U){let E="",P=U.length;const ee=U[0]==="-"?1:0;for(;P>=ee+4;P-=3)E=`_${U.slice(P-3,P)}${E}`;return`${U.slice(0,P)}${E}`}function te(U,E,P){ne(E,"offset"),(U[E]===void 0||U[E+P]===void 0)&&xe(E,U.length-(P+1))}function ve(U,E,P,ee,ye,be){if(U>P||U<E){const Me=typeof E=="bigint"?"n":"";let ze;throw be>3?E===0||E===BigInt(0)?ze=`>= 0${Me} and < 2${Me} ** ${(be+1)*8}${Me}`:ze=`>= -(2${Me} ** ${(be+1)*8-1}${Me}) and < 2 ** ${(be+1)*8-1}${Me}`:ze=`>= ${E}${Me} and <= ${P}${Me}`,new Z.ERR_OUT_OF_RANGE("value",ze,U)}te(ee,ye,be)}function ne(U,E){if(typeof U!="number")throw new Z.ERR_INVALID_ARG_TYPE(E,"number",U)}function xe(U,E,P){throw Math.floor(U)!==U?(ne(U,P),new Z.ERR_OUT_OF_RANGE(P||"offset","an integer",U)):E<0?new Z.ERR_BUFFER_OUT_OF_BOUNDS:new Z.ERR_OUT_OF_RANGE(P||"offset",`>= ${P?1:0} and <= ${E}`,U)}const Ce=/[^+/0-9A-Za-z-_]/g;function me(U){if(U=U.split("=")[0],U=U.trim().replace(Ce,""),U.length<2)return"";for(;U.length%4!==0;)U=U+"=";return U}function X(U,E){E=E||1/0;let P;const ee=U.length;let ye=null;const be=[];for(let Me=0;Me<ee;++Me){if(P=U.charCodeAt(Me),P>55295&&P<57344){if(!ye){if(P>56319){(E-=3)>-1&&be.push(239,191,189);continue}else if(Me+1===ee){(E-=3)>-1&&be.push(239,191,189);continue}ye=P;continue}if(P<56320){(E-=3)>-1&&be.push(239,191,189),ye=P;continue}P=(ye-55296<<10|P-56320)+65536}else ye&&(E-=3)>-1&&be.push(239,191,189);if(ye=null,P<128){if((E-=1)<0)break;be.push(P)}else if(P<2048){if((E-=2)<0)break;be.push(P>>6|192,P&63|128)}else if(P<65536){if((E-=3)<0)break;be.push(P>>12|224,P>>6&63|128,P&63|128)}else if(P<1114112){if((E-=4)<0)break;be.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw new Error("Invalid code point")}return be}function Q(U){const E=[];for(let P=0;P<U.length;++P)E.push(U.charCodeAt(P)&255);return E}function Re(U,E){let P,ee,ye;const be=[];for(let Me=0;Me<U.length&&!((E-=2)<0);++Me)P=U.charCodeAt(Me),ee=P>>8,ye=P%256,be.push(ye),be.push(ee);return be}function Pe(U){return t.toByteArray(me(U))}function le(U,E,P,ee){let ye;for(ye=0;ye<ee&&!(ye+P>=E.length||ye>=U.length);++ye)E[ye+P]=U[ye];return ye}function Oe(U,E){return U instanceof E||U!=null&&U.constructor!=null&&U.constructor.name!=null&&U.constructor.name===E.name}function Be(U){return U!==U}const De=function(){const U="0123456789abcdef",E=new Array(256);for(let P=0;P<16;++P){const ee=P*16;for(let ye=0;ye<16;++ye)E[ee+ye]=U[P]+U[ye]}return E}();function Ee(U){return typeof BigInt>"u"?Ie:U}function Ie(){throw new Error("BigInt not supported")}})(lg);class Kte{async getBufferFromResponse(t){if(typeof t.buffer=="function")return t.buffer();if(typeof t.arrayBuffer=="function"){const n=await t.arrayBuffer();return lg.Buffer.from(n)}else throw new TypeError("invalid HTTP response object, has no buffer method, and no arrayBuffer method")}constructor(t,n={}){this.baseOverrides={},this.url=t;const r=n.fetch||globalThis.fetch.bind(globalThis);if(!r)throw new TypeError("no fetch function supplied, and none found in global environment");n.overrides&&(this.baseOverrides=n.overrides),this.fetchImplementation=r}async fetch(t,n){let r;try{r=await this.fetchImplementation(t,n)}catch(i){if(`${i}`.includes("Failed to fetch"))console.warn(`generic-filehandle: refetching ${t} to attempt to work around chrome CORS header caching bug`),r=await this.fetchImplementation(t,{...n,cache:"reload"});else throw i}return r}async read(t,n=0,r,i=0,o={}){const{headers:s={},signal:a,overrides:l={}}=o;r<1/0?s.range=`bytes=${i}-${i+r}`:r===1/0&&i!==0&&(s.range=`bytes=${i}-`);const c={...this.baseOverrides,...l,headers:{...s,...l.headers,...this.baseOverrides.headers},method:"GET",redirect:"follow",mode:"cors",signal:a},u=await this.fetch(this.url,c);if(!u.ok)throw new Error(`HTTP ${u.status} ${u.statusText} ${this.url}`);if(u.status===200&&i===0||u.status===206){const d=await this.getBufferFromResponse(u),f=d.copy(t,n,0,Math.min(r,d.length)),h=u.headers.get("content-range"),p=/\/(\d+)$/.exec(h||"");return p&&p[1]&&(this._stat={size:parseInt(p[1],10)}),{bytesRead:f,buffer:t}}throw u.status===200?new Error("${this.url} fetch returned status 200, expected 206"):new Error(`HTTP ${u.status} fetching ${this.url}`)}async readFile(t={}){let n,r;typeof t=="string"?(n=t,r={}):(n=t.encoding,r=t,delete r.encoding);const{headers:i={},signal:o,overrides:s={}}=r,a={headers:i,method:"GET",redirect:"follow",mode:"cors",signal:o,...this.baseOverrides,...s},l=await this.fetch(this.url,a);if(!l)throw new Error("generic-filehandle failed to fetch");if(l.status!==200)throw Object.assign(new Error(`HTTP ${l.status} fetching ${this.url}`),{status:l.status});if(n==="utf8")return l.text();if(n)throw new Error(`unsupported encoding: ${n}`);return this.getBufferFromResponse(l)}async stat(){if(!this._stat){const t=lg.Buffer.allocUnsafe(10);if(await this.read(t,0,10,0),!this._stat)throw new Error(`unable to determine size of file at ${this.url}`)}return this._stat}async close(){}}function G8(e){const t=new FileReader;return new Promise((n,r)=>{t.onerror=()=>{t.abort(),r(new Error("problem reading blob"))},t.onabort=()=>{r(new Error("blob reading was aborted"))},t.onload=()=>{t.result&&typeof t.result!="string"?n(t.result):r(new Error("unknown error reading blob"))},t.readAsArrayBuffer(e)})}function ZXe(e){const t=new FileReader;return new Promise((n,r)=>{t.onerror=()=>{t.abort(),r(new Error("problem reading blob"))},t.onabort=()=>{r(new Error("blob reading was aborted"))},t.onload=()=>{t.result&&typeof t.result=="string"?n(t.result):r(new Error("unknown error reading blob"))},t.readAsText(e)})}class JXe{constructor(t){this.blob=t,this.size=t.size}async read(t,n=0,r,i=0){if(!r)return{bytesRead:0,buffer:t};const o=i,s=o+r,a=await G8(this.blob.slice(o,s)),l=lg.Buffer.from(a);return{bytesRead:l.copy(t,n),buffer:l}}async readFile(t){let n;if(typeof t=="string"?n=t:n=t&&t.encoding,n==="utf8")return ZXe(this.blob);if(n)throw new Error(`unsupported encoding: ${n}`);const r=await G8(this.blob);return lg.Buffer.from(r)}async stat(){return{size:this.size}}async close(){}}function Zte(e,t={}){return new Kte(e,t)}function QXe(e,t,n,r={}){if(n!==void 0)return n;if(e!==void 0)return Zte(e,r);if(t!==void 0)return new Yte(t,r);throw new Error("no url, path, or filehandle provided, cannot open")}const eKe=Object.freeze(Object.defineProperty({__proto__:null,BlobFile:JXe,LocalFile:Yte,RemoteFile:Kte,fromUrl:Zte,open:QXe},Symbol.toStringTag,{value:"Module"})),Jte=Zi(eKe);var Zf={};class tKe{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,n){this.cache.set(t,n),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){const n=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,n),n}}set(t,n){return this.cache.has(t)?this.cache.set(t,n):this._set(t,n),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){const n=this.cache.delete(t);return n&&this._size--,this.oldCache.delete(t)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache)yield t;for(const t of this.oldCache){const[n]=t;this.cache.has(n)||(yield t)}}get size(){let t=0;for(const n of this.oldCache.keys())this.cache.has(n)||t++;return this._size+t}}var nKe=tKe;const W8=Dg(nKe);function rKe(e){if(typeof e!="string")return{};const t={};return e.toLowerCase().replace(/(?:^|(?:\s*,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(r,i,o,s)=>{const a=o||s;return t[i]=a?a.toLowerCase():!0,""})?{}:(Object.keys(t).forEach(r=>{if(/^[\d]+$/.test(t[r]))try{const i=parseInt(t[r],10);Number.isNaN(i)||(t[r]=i)}catch{}}),t)}class iKe{constructor({minimumTTL:t}){this.minimumTTL=t}calculateChunkExpirationDate(t){const{headers:n={},requestDate:r,responseDate:i}=t;let o=i||r;if(!o){if(!n.date)return;o=new Date(n.date)}const s=l=>new Date(o.getTime()+l);if(/\bno-cache\b/.test(n.pragma))return s(this.minimumTTL);const a=rKe(n["cache-control"]);if(a["no-cache"]||a["no-store"]||a["must-revalidate"])return s(this.minimumTTL);if(a["max-age"]!==void 0){const l=a["max-age"]*1e3;return s(Math.max(l,this.minimumTTL))}else{if(this._coerceToDate(n.expires))return this._coerceToDate(n.expires);if(this._coerceToDate(n["last-modified"])){const l=this._coerceToDate(n["last-modified"]),c=(o.getTime()-l.getTime())/10;return s(c)}}}_coerceToDate(t){if(t){if(t instanceof Date)return t;if(typeof t=="string"||typeof t=="number")return new Date(t)}}cachedChunkIsValid(t){const n=this.calculateChunkExpirationDate(t);return!n||new Date<=n}chunkIsCacheable(){return!0}}var PE={};Object.defineProperty(PE,"__esModule",{value:!0});function $D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DD(e,t,n){return t&&q8(e.prototype,t),n&&q8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oKe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jk(e,t)}function cg(e){return cg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cg(e)}function jk(e,t){return jk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},jk(e,t)}function sKe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aKe(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B0(e)}function lKe(e){var t=sKe();return function(){var r=cg(e),i;if(t){var o=cg(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return aKe(this,i)}}function cKe(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=cg(e),e!==null););return e}function gS(){return typeof Reflect<"u"&&Reflect.get?gS=Reflect.get.bind():gS=function(t,n,r){var i=cKe(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(arguments.length<3?t:r):o.value}},gS.apply(this,arguments)}var Y8=function(){function e(){$D(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return DD(e,[{key:"addEventListener",value:function(n,r,i){n in this.listeners||(this.listeners[n]=[]),this.listeners[n].push({callback:r,options:i})}},{key:"removeEventListener",value:function(n,r){if(n in this.listeners){for(var i=this.listeners[n],o=0,s=i.length;o<s;o++)if(i[o].callback===r){i.splice(o,1);return}}}},{key:"dispatchEvent",value:function(n){if(n.type in this.listeners){for(var r=this.listeners[n.type],i=r.slice(),o=0,s=i.length;o<s;o++){var a=i[o];try{a.callback.call(this,n)}catch(l){Promise.resolve().then(function(){throw l})}a.options&&a.options.once&&this.removeEventListener(n.type,a.callback)}return!n.defaultPrevented}}}]),e}(),BD=function(e){oKe(n,e);var t=lKe(n);function n(){var r;return $D(this,n),r=t.call(this),r.listeners||Y8.call(B0(r)),Object.defineProperty(B0(r),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(B0(r),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(B0(r),"reason",{value:void 0,writable:!0,configurable:!0}),r}return DD(n,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(i){i.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,i)),gS(cg(n.prototype),"dispatchEvent",this).call(this,i)}}]),n}(Y8),Qte=function(){function e(){$D(this,e),Object.defineProperty(this,"signal",{value:new BD,writable:!0,configurable:!0})}return DD(e,[{key:"abort",value:function(n){var r;try{r=new Event("abort")}catch{typeof document<"u"?document.createEvent?(r=document.createEvent("Event"),r.initEvent("abort",!1,!1)):(r=document.createEventObject(),r.type="abort"):r={type:"abort",bubbles:!1,cancelable:!1}}var i=n;if(i===void 0)if(typeof document>"u")i=new Error("This operation was aborted"),i.name="AbortError";else try{i=new DOMException("signal is aborted without reason")}catch{i=new Error("This operation was aborted"),i.name="AbortError"}this.signal.reason=i,this.signal.dispatchEvent(r)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();typeof Symbol<"u"&&Symbol.toStringTag&&(Qte.prototype[Symbol.toStringTag]="AbortController",BD.prototype[Symbol.toStringTag]="AbortSignal");function uKe(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof e.Request=="function"&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}function dKe(e){typeof e=="function"&&(e={fetch:e});var t=e,n=t.fetch,r=t.Request,i=r===void 0?n.Request:r,o=t.AbortController,s=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,a=s===void 0?!1:s;if(!uKe({fetch:n,Request:i,AbortController:o,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:a}))return{fetch:n,Request:l};var l=i;(l&&!l.prototype.hasOwnProperty("signal")||a)&&(l=function(f,h){var p;h&&h.signal&&(p=h.signal,delete h.signal);var g=new i(f,h);return p&&Object.defineProperty(g,"signal",{writable:!1,enumerable:!1,configurable:!0,value:p}),g},l.prototype=i.prototype);var c=n,u=function(f,h){var p=l&&l.prototype.isPrototypeOf(f)?f.signal:h?h.signal:void 0;if(p){var g;try{g=new DOMException("Aborted","AbortError")}catch{g=new Error("Aborted"),g.name="AbortError"}if(p.aborted)return Promise.reject(g);var v=new Promise(function(m,y){p.addEventListener("abort",function(){return y(g)},{once:!0})});return h&&h.signal&&delete h.signal,Promise.race([v,c(f,h)])}return c(f,h)};return{fetch:u,Request:l}}var fKe=PE.AbortController=Qte,hKe=PE.AbortSignal=BD;PE.abortableFetch=dKe;var L2=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")};let pKe=typeof L2().AbortController>"u"?fKe:L2().AbortController;typeof L2().AbortController>"u"||L2().AbortSignal;class mKe{constructor({frequency:t=100,fetch:n,maxExtraSize:r=32e3,maxFetchSize:i=1e6}){this.requestQueues={},this.fetchCallback=n,this.frequency=t,this.maxExtraSize=r,this.maxFetchSize=i}_canAggregate(t,n){return n.start<=t.end+this.maxExtraSize&&n.end-n.start+t.end-t.start<this.maxFetchSize}_allSignalsFired(t){return new Promise(n=>{let r=t.filter(i=>!i.aborted).length;t.forEach(i=>{i.addEventListener("abort",()=>{r-=1,r||n()})})}).catch(n=>{console.error(n)})}_dispatch({url:t,start:n,end:r,requests:i}){const o=new pKe,s=[];i.forEach(({requestOptions:a})=>{a&&a.signal&&s.push(a.signal)}),s.length===i.length&&this._allSignalsFired(s).then(()=>o.abort()),this.fetchCallback(t,n,r-1,{signal:o.signal}).then(a=>{const l=a.buffer;i.forEach(({start:c,end:u,resolve:d})=>{d({headers:a.headers,buffer:l.slice(c-n,u-n)})})},a=>{i.forEach(({reject:l})=>l(a))})}_aggregateAndDispatch(){Object.entries(this.requestQueues).forEach(([t,n])=>{if(!n||!n.length)return;const r=[];if(n.forEach(o=>{var s;const{requestOptions:a,reject:l}=o;!((s=a==null?void 0:a.signal)===null||s===void 0)&&s.aborted?l(Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})):r.push(o)}),r.sort((o,s)=>o.start-s.start),n.length=0,!r.length)return;let i;for(let o=0;o<r.length;o+=1){const s=r[o];i&&this._canAggregate(i,s)?(i.requests.push(s),i.end=s.end):(i&&this._dispatch(i),i={requests:[s],url:t,start:s.start,end:s.end})}i&&this._dispatch(i)})}_enQueue(t,n){this.requestQueues[t]||(this.requestQueues[t]=[]),this.requestQueues[t].push(n)}fetch(t,n,r,i={}){return new Promise((o,s)=>{this._enQueue(t,{start:n,end:r,resolve:o,reject:s,requestOptions:i}),this.timeout||(this.timeout=setTimeout(()=>{this.timeout=void 0,this._aggregateAndDispatch()},this.frequency||1))})}}async function gKe(e,t,n,r={}){const i=new Date,o=Object.assign({method:"GET",headers:{range:`bytes=${t}-${n}`}},r),s=await fetch(e,o),a=new Date;if(s.status!==206&&s.status!==200)throw new Error(`HTTP ${s.status} when fetching ${e} bytes ${t}-${n}`);if(s.status===200)throw new Error(`HTTP ${s.status} when fetching ${e} bytes ${t}-${n}`);const l=await s.arrayBuffer().then(c=>Buffer.from(c));return{headers:s.headers.map,requestDate:i,responseDate:a,buffer:l}}function vKe(e){return e.name==="AbortError"||e.code==="ERR_ABORTED"||!!e.message.match(/\b(aborted|AbortError)\b/i)}class yKe{constructor({fetch:t=gKe,size:n=1e7,chunkSize:r=32768,aggregationTime:i=100,minimumTTL:o=1e3,maxFetchSize:s=r*4,maxExtraFetch:a=r}){this.aggregator=new mKe({fetch:t,frequency:i,maxFetchSize:s,maxExtraSize:a}),this.chunkSize=r,this.chunkCache=new W8({maxSize:Math.floor(n/r)||1}),this.cacheSemantics=new iKe({minimumTTL:o}),this.stats=new W8({maxSize:20})}async getRange(t,n=0,r,i={}){let o=r;if(o===void 0){const d=await this.stat(t);if(d.size===void 0)throw new Error("length not specified, and could not determine size of the remote file");o=d.size-n}const s=Math.floor(n/this.chunkSize),a=Math.floor((n+o-1)/this.chunkSize),l=new Array(a-s+1);for(let d=s;d<=a;d+=1)l[d-s]=this._getChunk(t,d,i).then(f=>f&&{headers:f.headers,buffer:f.buffer,chunkNumber:d});let c=await Promise.all(l);if(c=c.filter(d=>!!d),!c.length)return{headers:{},buffer:Buffer.allocUnsafe(0)};const u=n-c[0].chunkNumber*this.chunkSize;return{headers:this._makeHeaders(c[0].headers,n,n+o-1),buffer:this._makeBuffer(c,u,o)}}_makeBuffer(t,n,r){if(t.length===1)return t[0].buffer.slice(n,n+r);if(t.length===0)return Buffer.allocUnsafe(0);const i=t.map(l=>l.buffer),o=i.shift().slice(n);let s=i.pop(),a=o.length+i.reduce((l,c)=>l+c.length,0)+s.length-r;return a<0&&(a=0),s=s.slice(0,s.length-a),Buffer.concat([o,...i,s])}async stat(t){let n=this.stats.get(t);if(!n){const r=await this._getChunk(t,0);if(this._recordStatsIfNecessary(t,r),n=this.stats.get(t),!n)throw new Error(`failed to retrieve file size for ${t}`)}return n}_headersToStats(t){const{headers:n}=t,r={};if(n["content-range"]){const i=n["content-range"].match(/\d+-\d+\/(\d+)/);i&&(r.size=parseInt(i[1],10),Number.isNaN(r.size)&&delete r.size)}return n["last-modified"]&&(r.mtime=new Date(n["last-modified"]),r.mtime.toString()==="Invalid Date"&&delete r.mtime,r.mtime&&(r.mtimeMs=r.mtime.getTime())),r}_makeHeaders(t,n,r){const i=Object.assign({},t||{});i["content-length"]=r-n;const s=(i["content-range"]||"").match(/\d+-\d+\/(\d+)/);return s&&(i["content-range"]=`${n}-${r-1}/${s[1]}`,i["x-resource-length"]=s[1]),i}async _getChunk(t,n,r){const i=`${t}/${n}`,o=this.chunkCache.get(i);if(o){let f,h;try{f=await o}catch(p){if(vKe(p))h=!0;else throw p}return h||!this.cacheSemantics.cachedChunkIsValid(f)?(this._uncacheIfSame(i,o),this._getChunk(t,n,r)):(this._recordStatsIfNecessary(t,f),f)}const s=n*this.chunkSize;let a=s+this.chunkSize;const l=this.stats.get(t);if(l&&l.size){if(s>=l.size)return;a>=l.size&&(a=l.size)}let c=!1;const u=this.aggregator.fetch(t,s,a,r).catch(f=>{throw c=!0,this._uncacheIfSame(i,u),f});c||this.chunkCache.set(i,u);const d=await u;return this._recordStatsIfNecessary(t,d),this.cacheSemantics.chunkIsCacheable(d)||this._uncacheIfSame(i,u),d}_recordStatsIfNecessary(t,n){this.stats.has(t)||this.stats.set(t,this._headersToStats(n))}_uncacheIfSame(t,n){this.chunkCache.get(t)===n&&this.chunkCache.delete(t)}reset(){this.stats.clear(),this.chunkCache.clear()}}const bKe=Object.freeze(Object.defineProperty({__proto__:null,HttpRangeFetcher:yKe},Symbol.toStringTag,{value:"Module"})),xKe=Zi(bKe);Object.defineProperty(Zf,"__esModule",{value:!0});Zf.RemoteFileWithRangeCache=Zf.clearCache=void 0;const _Ke=xKe,wKe=lg,SKe=Jte,Uk={};function CKe(e,t,n,r={}){const i=Uk[e];if(!i)throw new Error(`fetch not registered for ${e}`);return i(e,t,n,r)}const ene=new _Ke.HttpRangeFetcher({fetch:CKe,size:500*1024**2,chunkSize:128*1024,maxFetchSize:100*1024**2,minimumTTL:24*60*60*1e3});function AKe(){ene.reset()}Zf.clearCache=AKe;class PKe extends SKe.RemoteFile{async fetch(t,n){Uk[String(t)]||(Uk[String(t)]=this.fetchBinaryRange.bind(this));const r=n==null?void 0:n.headers;let i;if(r&&(r instanceof Headers?i=r.get("range"):Array.isArray(r)?[,i]=r.find(([o])=>o==="range")||[void 0,void 0]:i=r.range),i){const o=/bytes=(\d+)-(\d+)/.exec(i);if(o){const[,s,a]=o,l=Number.parseInt(s,10),c=Number.parseInt(a,10),u=await ene.getRange(t,l,c-l+1,{signal:n==null?void 0:n.signal}),{headers:d}=u;return new Response(u.buffer,{status:206,headers:d})}}return super.fetch(t,n)}async fetchBinaryRange(t,n,r,i={}){const o=new Date,s={...i.headers,range:`bytes=${n}-${r}`},a=await super.fetch(t,{...i,headers:s}),l=new Date;if(a.status!==206){const d=`HTTP ${a.status} (${a.statusText}) when fetching ${t} bytes ${n}-${r}`,f=" (should be 206 for range requests)";throw new Error(`${d}${a.status===200?f:""}`)}const c={};for(const[d,f]of a.headers.entries())c[d]=f;const u=await a.arrayBuffer();return{headers:c,requestDate:o,responseDate:l,buffer:wKe.Buffer.from(u)}}}Zf.RemoteFileWithRangeCache=PKe;(function(e){var t=we&&we.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteFileWithRangeCache=e.getFetcher=e.openLocation=e.resolveUriLocation=void 0;const n=Jte,r=t(Xee),i=Zf,o=Pf,s=dD,a=_l;function l(v){return"localPath"in v}function c(v){return"blobId"in v}function u(v){return v.baseUri?{...v,uri:new URL(v.uri,v.baseUri).href}:v}e.resolveUriLocation=u;function d(v,m){if(!v)throw new Error("must provide a location to openLocation");if(l(v)){if(!v.localPath)throw new Error("No local path provided");if(r.default||a.isElectron)return new n.LocalFile(v.localPath);throw new Error("can't use local files in the browser")}if(c(v)){const y=(0,s.getBlob)(v.blobId);if(!y)throw new Error(`file ("${v.name}") was opened locally from a previous session. To restore it, go to track settings and reopen the file`);return new n.BlobFile(y)}if((0,o.isUriLocation)(v)){if(!v.uri)throw new Error("No URI provided");const y=u(v);if(m){const b=h(v,m);if(b)return b.openLocation(y)}return new i.RemoteFileWithRangeCache(y.uri,{fetch:p})}throw new Error("invalid fileLocation")}e.openLocation=d;function f(v,m){if(!(0,o.isUriLocation)(v))throw new Error(`Not a valid UriLocation: ${JSON.stringify(v)}`);if(m){const y=h(v,m);if(y)return y.getFetcher(v)}return p}e.getFetcher=f;function h(v,m){const{rootModel:y}=m;if(y&&(0,o.isRootModelWithInternetAccounts)(y))return y.findAppropriateInternetAccount(v);if(v.internetAccountPreAuthorization){if(!v.internetAccountPreAuthorization.authInfo.token)throw new Error("Failed to obtain token from internet account. Try reloading the page");return m.getInternetAccountType(v.internetAccountPreAuthorization.internetAccountType).stateModel.create({type:v.internetAccountPreAuthorization.internetAccountType,configuration:v.internetAccountPreAuthorization.authInfo.configuration})}}async function p(v,m){var y;const b=await fetch(v,m);if(b.status===401&&(!((y=b.headers.get("WWW-Authenticate"))===null||y===void 0)&&y.includes("Basic")))throw new o.AuthNeededError("Accessing HTTPBasic resource without authentication",v.toString());return b}var g=Zf;Object.defineProperty(e,"RemoteFileWithRangeCache",{enumerable:!0,get:function(){return g.RemoteFileWithRangeCache}})})(D0);var ME={};Object.defineProperty(ME,"__esModule",{value:!0});ME.BaseViewModelWithDisplayedRegions=void 0;const vS=Rc,MKe=tc,EKe=tc,tne=vS.types.model("BaseView",{id:MKe.ElementId,displayName:vS.types.maybe(vS.types.string),minimized:!1}).volatile(()=>({width:800})).views(()=>({menuItems(){return[]}})).actions(e=>({setDisplayName(t){e.displayName=t},setWidth(t){e.width=t},setMinimized(t){e.minimized=t}}));var TKe=ME.default=tne;ME.BaseViewModelWithDisplayedRegions=tne.props({displayedRegions:vS.types.array(EKe.Region)});var nne={exports:{}};(function(e){const t=function(){let $={gf:{},gc:{},gs:{},gr:{},seqname:[],seqdata:{}};return Object.keys($).forEach(z=>this[z]=$[z]),this},n=/^# STOCKHOLM 1.0/,r=/^\/\/\s*$/,i=/^#=GF\s+(\S+)\s+(.*?)\s*$/,o=/^#=GC\s+(\S+)\s+(.*?)\s*$/,s=/^#=GS\s+(\S+)\s+(\S+)\s+(.*?)\s*$/,a=/^#=GR\s+(\S+)\s+(\S+)\s+(.*?)\s*$/,l=/^\s*(\S+)\s+(\S+)\s*$/,c=/\S/,u="No format header: # STOCKHOLM 1.0",d="No format footer: //",f="Malformed line",h=$=>"(At line "+($+1)+") ",p=$=>n.test($),g=$=>{try{y($,{strict:!0})}catch{return!1}return!0},v=$=>{throw new Error($)},m=$=>console.warn($),y=($,z)=>{z=z||{};const H=z.quiet?()=>null:m,B=z.strict?v:H;let V=[],J=null;return $.split(`
`).forEach((ie,ce)=>{const pe=()=>{J||(B(h(ce)+u),J=new t)};let se;n.test(ie)?(J&&B(h(ce)+d),J=new t):r.test(ie)?(J?V.push(J):B(h(ce)+u),J=null):(se=i.exec(ie))?(pe(),J.gf[se[1]]=J.gf[se[1]]||[],J.gf[se[1]].push(se[2])):(se=o.exec(ie))?(pe(),J.gc[se[1]]=J.gc[se[1]]||"",J.gc[se[1]]+=se[2]):(se=s.exec(ie))?(pe(),J.gs[se[2]]=J.gs[se[2]]||{},J.gs[se[2]][se[1]]=J.gs[se[2]][se[1]]||[],J.gs[se[2]][se[1]].push(se[3])):(se=a.exec(ie))?(pe(),J.gr[se[2]]=J.gr[se[2]]||{},J.gr[se[2]][se[1]]=J.gr[se[2]][se[1]]||"",J.gr[se[2]][se[1]]+=se[3]):(se=l.exec(ie))?(pe(),J.seqdata[se[1]]||(J.seqdata[se[1]]="",J.seqname.push(se[1])),J.seqdata[se[1]]+=se[2]):c.test(ie)&&v(h(ce)+f)}),J&&(B("Warning: no end line //"),V.push(J)),V},b=($,z)=>{const H=y($,z);return H.length===0&&v("No alignments found"),H.length>1&&v("More than one alignment found"),H[0]},_=($,z)=>{let H=new t;return z=z||Object.keys($),z.forEach(B=>H.addRow(B,$[B])),H},x=$=>{let z=new t;return $.forEach(H=>z.addRow(H[0],H[1])),z};t.prototype.rows=function(){return this.seqname.length},t.prototype.columns=function(){let $=0;return this.seqname.forEach(z=>{$=Math.max($,this.seqdata[z].length)}),Object.keys(this.gr).forEach(z=>Object.keys(this.gr[z]).forEach(H=>{$=Math.max($,this.gr[z][H].length)})),$},t.prototype.allNames=function(){let $={},z=[],H=V=>{$[V]||($[V]=!0,z.push(V))},B=V=>V.forEach(H);return B(this.seqname),B(Object.keys(this.seqdata)),Object.keys(this.gr).forEach(V=>B(Object.keys(this.gr[V]))),Object.keys(this.gs).forEach(V=>B(Object.keys(this.gs[V]))),z},t.prototype.allTags=function(){let $={};const z=H=>Object.keys(H).forEach(B=>$[B]=!0);return z(this.gc),z(this.gf),z(this.gr),z(this.gs),Object.keys($).sort()},t.prototype.addRow=function($,z){return this.seqdata[$]&&v("Duplicate row name"),this.seqname.push($),this.seqdata[$]=z||"",this},t.prototype.deleteRow=function($){return this.seqdata[$]||v("Row not found"),this.seqname=this.seqname.filter(z=>z!==$),delete this.seqdata[$],Object.keys(this.gr).forEach(z=>delete this.gr[z][$]),Object.keys(this.gs).forEach(z=>delete this.gs[z][$]),this};const w=($,z)=>{let H={};return Object.keys($).forEach(B=>H[B]=z($[B])),H},S=$=>w($,z=>z.slice(0)),C=$=>w($,z=>S(z));t.prototype.copy=function(){let $=new t;return $.seqname=this.seqname.slice(0),$.seqdata=S(this.seqdata),$.gf=S(this.gf),$.gc=S(this.gc),$.gs=C(this.gs),$.gr=C(this.gr),$};const A=($,z)=>z.map(H=>$[H]).join(""),T=($,z)=>w($,H=>A(H,z)),O=($,z)=>w($,H=>T(H,z));t.prototype.extractColumns=function($){const z=this.columns(),H=$.filter(V=>V<0||V>=z);H.length&&v("Bad column indices: "+H.join(","));let B=new t;return B.seqname=this.seqname.slice(0),B.seqdata=T(this.seqdata,$),B.gf=S(this.gf),B.gc=T(this.gc,$),B.gs=C(this.gs),B.gr=O(this.gr,$),B},t.prototype.extractColumnRange=function($,z){return this.extractColumns(new Array(z+1-$).fill(0).map((H,B)=>$+B))},t.prototype.defaultGapChars=".-",t.prototype.seqpos2col=function($,z){z=z||this.defaultGapChars,this.seqdata[$]||v("Row not found");const H=this.seqdata[$];return H.split("").map((B,V)=>z.indexOf(H[V])<0?V:-1).filter(B=>B>=0)},t.prototype.col2seqpos=function($,z){z=z||this.defaultGapChars,this.seqdata[$]||v("Row not found");const H=this.seqdata[$];let B=-1;return H.split("").map((V,J)=>z.indexOf(H[J])<0?++B:B+.5)};function R($,z){for(;$.length<z;)$=" "+$;return $}function L($,z){for(;$.length<z;)$=$+" ";return $}function D($){return R("",$)}t.prototype.toString=function($){$=$||{width:80,indentNames:!1};const z=this.allNames(),H=this.columns(),B=Math.max.apply(null,z.map(se=>se.length).concat([0])),V=Math.max.apply(null,this.allTags().map(se=>se.length).concat([0])),J=V?V+6:0,K=$.width?Math.max(1,$.width-B-J-1):H,ie=$.indentNames?R:L,ce=$.indentNames?(se,G)=>R(se,V)+" "+R(G,B):(se,G)=>L(se+" "+G,V+B+1);let pe=[0];for(let se=K;se<H;se+=K)pe.push(se);return`# STOCKHOLM 1.0
`+Object.keys(this.gf).sort().map(se=>this.gf[se].map(G=>"#=GF "+ie(se,V)+" "+G+`
`).join("")).join("")+Object.keys(this.gs).sort().map(se=>Object.keys(this.gs[se]).map(G=>this.gs[se][G].map(he=>"#=GS "+ce(se,G)+" "+he+`
`).join("")).join("")).join("")+pe.map(se=>Object.keys(this.gc).sort().map(G=>"#=GC "+ie(G,V)+D(B+2)+this.gc[G].substr(se,K)+`
`).join("")+z.map(G=>Object.keys(this.gr).filter(he=>this.gr[he][G]).sort().map(he=>"#=GR "+ce(he,G)+" "+this.gr[he][G].substr(se,K)+`
`).join("")+(this.seqdata[G]?ie(G,B+J)+" "+this.seqdata[G].substr(se,K)+`
`:"")).join("")).join(`
`)+`//
`},t.prototype.toFasta=function($){$=$||{width:80};const z=this.columns(),H=$.width||z;let B=[0];for(let V=H;V<z;V+=H)B.push(V);return this.allNames().map(V=>this.seqdata[V]?">"+V+`
`+B.map(J=>this.seqdata[V].substr(J,H)+`
`).join(""):"").join("")},t.prototype.toRowList=function($){return this.allNames().filter(z=>this.seqdata[z]).map(z=>[z,this.seqdata[z]])},e.exports={sniff:p,validate:g,parse:b,parseAll:y,fromSeqIndex:_,fromRowList:x,Stockholm:t}})(nne);var OKe=nne.exports,IKe=OKe;const rne=Dg(IKe),RKe=Cn(function({track:e,model:t,offsetX:n}){const{blockSize:r,scrollX:i,bgColor:o,colorScheme:s,colWidth:a,rowHeight:l,highResScaleFactor:c}=t,{model:{customColorScheme:u,data:d}}=e,f=u||s,h=Dn(),p=I.useRef(null),g=I.useMemo(()=>Ute(f,h),[f,h]);return I.useEffect(()=>{if(!p.current)return;const v=p.current.getContext("2d");if(!v)return;v.resetTransform(),v.scale(c,c),v.clearRect(0,0,r,l),v.translate(-n,0),v.textAlign="center",v.font=v.font.replace(/\d+px/,`${Math.max(8,l-8)}px`);const m=Math.max(0,Math.floor(n/a)),y=Math.max(0,Math.ceil((n+r)/a)),b=d==null?void 0:d.slice(m,y);for(let _=0;b&&_<b.length;_++){const x=b[_],w=f[x.toUpperCase()];if(o){const S=_*a+n-n%a;v.fillStyle=w||"white",v.fillRect(S,0,a,l),l>=10&&a>=l/2&&(v.fillStyle=g[x.toUpperCase()]||"black",v.fillText(x,S+a/2,l/2+1))}}},[o,r,a,l,n,g,f,c,d]),$e.createElement("canvas",{ref:p,height:l*c,width:r*c,style:{position:"absolute",left:i+n,width:r,height:l}})}),kKe=Cn(function({track:e,model:t}){const{blocksX:n,msaAreaWidth:r,rowHeight:i}=t;return $e.createElement("div",{style:{position:"relative",height:i,width:r,overflow:"hidden"}},n.map(o=>$e.createElement(RKe,{key:o,track:e,model:t,offsetX:o})))});class LKe{constructor({maxHeight:t=1e4}={}){this.maxHeightReached=!1,this.rbush=new qte,this.rectangles=new Map,this.maxHeight=Math.ceil(t),this.pTotalHeight=0}addRect(t,n,r,i,o){const s=this.rectangles.get(t);if(s)return s.minY;let a=0;for(;this.rbush.collides({minX:n,minY:a,maxX:r,maxY:a+i})&&a<=this.maxHeight;)a+=1;const l={minX:n,minY:a,maxX:r,maxY:a+i,id:t,data:o};return this.rbush.insert(l),this.rectangles.set(t,l),this.pTotalHeight=Math.max(this.pTotalHeight,a),a}get totalHeight(){return this.pTotalHeight}}const $Ke=Cn(function({track:e,model:t,offsetX:n}){const{blockSize:r,colWidth:i,blanks:o,rowHeight:s,highResScaleFactor:a,scrollX:l}=t,{height:c,features:u,associatedRowName:d}=e.model,f=Pn(u)?u1(u):u,h=I.useMemo(()=>{const m=new LKe;return f==null||f.forEach((y,b)=>{const{start:_,end:x}=y;if(d){const w=t.rowSpecificBpToPx(d,_-1),S=t.rowSpecificBpToPx(d,x);m.addRect(`${b}`,w,S,s,y)}else{const w=t.globalBpToPx(_-1),S=t.globalBpToPx(x);m.addRect(`${b}`,w,S,s,y)}}),m},[s,f,d,t,o]),p=I.useRef(null),g=I.useRef(null),v=I.useRef(null);return I.useEffect(()=>{if(!p.current)return;const m=p.current.getContext("2d");if(!m)return;m.resetTransform(),m.scale(a,a),m.clearRect(0,0,r,c),m.translate(-n,0),m.textAlign="center",m.font=m.font.replace(/\d+px/,`${Math.max(8,s-8)}px`);const y=Math.max(0,Math.floor(n/i));m.fillStyle="goldenrod",h.rectangles.forEach(b=>{const{minX:_,maxX:x,minY:w,maxY:S}=b,C=(_-y)*i+n-n%i,A=(x-y)*i+n-n%i;A-C>0&&m.fillRect(C,w,A-C,(S-w)/2)})},[d,r,i,h.rectangles,t,s,c,n,a,u,o]),I.useEffect(()=>{var m,y,b,_;if(!g.current)return;const x=g.current.getContext("2d");if(x){x.resetTransform(),x.scale(a,a),x.clearRect(0,0,r,c),x.translate(-n,0),x.textAlign="center",x.font=x.font.replace(/\d+px/,`${Math.max(8,s-8)}px`),x.fillStyle="black",x.textAlign="left";for(const w of h.rectangles.values()){const{minX:S,maxX:C,maxY:A,minY:T,data:O}=w,R=S*i,L=C*i,D=O;if(L-R>0){const $=(y=(m=D.attributes)===null||m===void 0?void 0:m.Note)===null||y===void 0?void 0:y[0],z=(_=(b=D.attributes)===null||b===void 0?void 0:b.Name)===null||_===void 0?void 0:_[0],H=D.type;x.fillText([H,z,$].filter(B=>!!B).join(" - "),Math.max(Math.min(-l,L),R),T+(A-T))}}}},[r,i,l,a,c,h.rectangles,n,u,t,s,o]),u?$e.createElement($e.Fragment,null,$e.createElement("canvas",{ref:p,height:c*a,width:r*a,style:{position:"absolute",left:l+n,width:r,height:c}}),$e.createElement("canvas",{ref:g,height:c*a,width:r*a,style:{position:"absolute",left:l+n,width:r,height:c}}),$e.createElement("canvas",{ref:v,height:c*a,width:r*a,style:{position:"absolute",left:l+n,width:r,height:c}})):null}),X8=Cn(function({model:e,track:t}){const{blocksX:n,msaAreaWidth:r}=e,{height:i}=t.model;return $e.createElement("div",{style:{position:"relative",height:i,width:r,overflow:"hidden"}},n.map(o=>$e.createElement($Ke,{track:t,key:o,model:e,offsetX:o})))});var ab={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.parseBlocks=uo.parseBlock=uo.getSeqBounds=uo.getFirstNonEmptyLine=uo.parseHeader=uo.parseVersion=void 0;function ine(e){const t=e.match(/\(?(\d+(\.\d+)+)\)?/);return t&&t.length>1?t[1]:""}uo.parseVersion=ine;function DKe(e){const t=["CLUSTAL","PROBCONS","MUSCLE","MSAPROBS","Kalign"];t.find(r=>e.startsWith(r))||console.warn(`${e} is not a known CLUSTAL header: ${t.join(",")}, proceeding but could indicate an issue`);const n=ine(e);return{info:e,version:n}}uo.parseHeader=DKe;function one(e){let t=e.next();for(;!t.done&&t.value.trim()==="";)t=e.next();return t.value}uo.getFirstNonEmptyLine=one;function sne(e){const t=e.split(/\s+/),n=e.slice(t[0].length),r=t[0].length+n.indexOf(t[1]),i=r+t[1].length;return[r,i]}uo.getSeqBounds=sne;function Vk(e){let t=one(e);const n=[];let r="";if(!t)return;for(;t;)t[0]!==" "?n.push(t):r=t,t=e.next().value;const[i,o]=sne(n[0]),a=n.map(d=>d.split(/\s+/)).map(d=>d[0]),l=n.map(d=>d.slice(i,o));let c=r.slice(i,o);const u=l[0].length-c.length;return u&&(c+=" ".repeat(u)),{ids:a,seqs:l,consensus:c}}uo.parseBlock=Vk;function BKe(e){let t;const n=Vk(e);if(n!==void 0)for(;t=Vk(e);){for(let r=0;r<t.seqs.length;r++)n.seqs[r]+=t.seqs[r];n.consensus+=t.consensus}return n}uo.parseBlocks=BKe;Object.defineProperty(ab,"__esModule",{value:!0});var ane=ab.parse=ab.parseIter=void 0;const Q3=uo;function lne(e){const t=Q3.getFirstNonEmptyLine(e);if(!t)throw new Error("Empty file received");const n=Q3.parseHeader(t),r=Q3.parseBlocks(e);if(r===void 0)throw new Error("No blocks parsed");const i=r.seqs.map((s,a)=>({id:r.ids[a],seq:s})),{consensus:o}=r;if(o.length!=i[0].seq.length)throw new Error(`Consensus length != sequence length. Con ${o.length} seq ${i[0].seq.length}`);return{consensus:o,alns:i,header:n}}ab.parseIter=lne;function NKe(e){const t=e.split(`
`)[Symbol.iterator]();return lne(t)}ane=ab.parse=NKe;class FKe{constructor(t){this.MSA=ane(t)}getMSA(){return this.MSA}getRow(t){var n;return(n=this.MSA.alns.find(r=>r.id===t))===null||n===void 0?void 0:n.seq.split("")}getWidth(){return this.MSA.alns[0].seq.length}getRowData(){}getHeader(){return this.MSA.header}getNames(){return this.MSA.alns.map(t=>t.id)}getStructures(){return{}}get alignmentNames(){return[]}getTree(){return{id:"root",name:"root",noTree:!0,branchset:this.getNames().map(t=>({id:t,name:t,branchset:[]}))}}get seqConsensus(){return this.MSA.consensus}get secondaryStructureConsensus(){}get tracks(){var t;return!((t=this.seqConsensus)===null||t===void 0)&&t.trim()?[{id:"seqConsensus",name:"Sequence consensus",data:this.seqConsensus,customColorScheme:{"*":"white",":":"grey",".":"darkgrey"," ":"black"}}]:[]}}function cne(e){var t;const n=[];let r={};const i=e.split(/\s*(;|\(|\)|,|:)\s*/);for(let o=0;o<i.length;o++){const s=i[o],a={};switch(s){case"(":r.branchset=[a],n.push(r),r=a;break;case",":(t=n.at(-1))===null||t===void 0||t.branchset.push(a),r=a;break;case")":r=n.pop();break;case":":break;default:{const l=i[o-1];l===")"||l==="("||l===","?r.name=s:l===":"&&(r.length=parseFloat(s))}}}return r}class zKe{constructor(t,n){const r=rne.parseAll(t);this.data=r,this.MSA=r[n]}getMSA(){return this.MSA}getRow(t){var n,r;return(r=(n=this.MSA)===null||n===void 0?void 0:n.seqdata[t])===null||r===void 0?void 0:r.split("")}getWidth(){var t;const n=Object.keys((t=this.MSA)===null||t===void 0?void 0:t.seqdata)[0];return this.getRow(n).length}get alignmentNames(){return this.data.map((t,n)=>{var r;return((r=t.gf.DE)===null||r===void 0?void 0:r[0])||`Alignment ${n+1}`})}getHeader(){var t,n;return{General:this.MSA.gf,Accessions:(t=this.MSA.gs)===null||t===void 0?void 0:t.AC,Dbxref:(n=this.MSA.gs)===null||n===void 0?void 0:n.DR}}getRowData(t){var n,r,i,o;return{name:t,accession:(r=(n=this.MSA.gs)===null||n===void 0?void 0:n.AC)===null||r===void 0?void 0:r[t],dbxref:(o=(i=this.MSA.gs)===null||i===void 0?void 0:i.DR)===null||o===void 0?void 0:o[t]}}getNames(){return Object.keys(this.MSA.seqdata)}getSeqCoords(){}getStructures(){var t;const n=/PDB; +(\S+) +(\S); ([0-9]+)-([0-9]+)/,r=this.MSA,i=Object.entries(((t=r.gs)===null||t===void 0?void 0:t.DR)||{}).map(([s,a])=>[s,n.exec(a)]).filter(s=>!!s[1]).map(([s,a])=>{const l=a[1].toLowerCase(),c=a[2],u=+a[3],d=+a[4];return{id:s,pdb:l,chain:c,startPos:u,endPos:d}}),o={};for(const s of i){const{id:a,...l}=s;o[a]||(o[a]=[]),o[a].push(l)}return o}getTree(){var t,n,r;const i=(r=(n=(t=this.MSA)===null||t===void 0?void 0:t.gf)===null||n===void 0?void 0:n.NH)===null||r===void 0?void 0:r[0];return i?RD(cne(i)):{id:"root",name:"root",noTree:!0,branchset:this.getNames().map(o=>({id:o,branchset:[],name:o}))}}get seqConsensus(){var t;return(t=this.MSA.gc)===null||t===void 0?void 0:t.seq_cons}get secondaryStructureConsensus(){var t;return(t=this.MSA.gc)===null||t===void 0?void 0:t.SS_cons}get tracks(){return[{id:"seqConsensus",name:"Sequence consensus",data:this.seqConsensus,customColorScheme:{}},{id:"secondaryStruct",name:"Secondary-structure",data:this.secondaryStructureConsensus,customColorScheme:{">":"pink","<":"lightblue"}}]}}function jKe(e){return e.split(">").filter(t=>/\S/.test(t)).map(t=>{const[n,...r]=t.split(`
`),[i,...o]=n.split(" "),s=o.join(" "),l=r.join("").replaceAll(/\s/g,"");return{id:i,description:s,sequence:l}})}class UKe{constructor(t){this.MSA={seqdata:Object.fromEntries(jKe(t).map(n=>[`${n.id}`,n.sequence]))}}getMSA(){return this.MSA}getRowData(){}getNames(){return Object.keys(this.MSA.seqdata)}getRow(t){var n,r;return(r=(n=this.MSA)===null||n===void 0?void 0:n.seqdata[t])===null||r===void 0?void 0:r.split("")}getWidth(){var t;const n=Object.keys((t=this.MSA)===null||t===void 0?void 0:t.seqdata)[0];return this.getRow(n).length}getStructures(){return{}}get alignmentNames(){return[]}getHeader(){return{}}getTree(){return{id:"root",name:"root",noTree:!0,branchset:this.getNames().map(t=>({id:t,branchset:[],name:t}))}}get seqConsensus(){}get secondaryStructureConsensus(){}get tracks(){return[]}}const VKe=kt.model({id:kt.string,accession:kt.string,name:kt.string,associatedRowName:kt.string,height:kt.optional(kt.number,100)}).volatile(()=>({error:void 0,data:void 0})).actions(e=>({setError(t){e.error=t},setData(t){e.data=t}})).actions(e=>({afterCreate(){ry(e,rl(async()=>{try{const{accession:t}=e,r=`https://rest.uniprot.org/uniprotkb/${t==null?void 0:t.replace(/\.[^/.]+$/,"")}.gff`,i=await fetch(r);if(!i.ok)throw new Error(`HTTP ${i.status} fetching ${r}: ${await i.text()}`);e.setData(await i.text())}catch(t){console.error(t),e.setError(t)}}))}})).views(e=>({get loading(){return!e.data},get features(){return NYe(e.data)}})),HKe=kt.model({id:kt.identifier,structure:kt.model({pdb:kt.string,startPos:kt.number,endPos:kt.number}),range:kt.maybe(kt.string)}),GKe=kt.compose(TKe,kt.model("MsaView",{id:tc.ElementId,type:kt.literal("MsaView"),height:kt.optional(kt.number,550),treeAreaWidth:kt.optional(kt.number,400),treeWidth:kt.optional(kt.number,300),rowHeight:20,scrollY:0,scrollX:0,resizeHandleWidth:5,blockSize:1e3,mouseRow:kt.maybe(kt.number),mouseCol:kt.maybe(kt.number),selectedStructures:kt.array(HKe),labelsAlignRight:!1,colWidth:16,showBranchLen:!0,bgColor:!0,drawTree:!0,drawNodeBubbles:!0,highResScaleFactor:2,colorSchemeName:"maeditor",treeFilehandle:kt.maybe(tc.FileLocation),msaFilehandle:kt.maybe(tc.FileLocation),treeMetadataFilehandle:kt.maybe(tc.FileLocation),currentAlignment:0,collapsed:kt.array(kt.string),showOnly:kt.maybe(kt.string),boxTracks:kt.array(VKe),turnedOffTracks:kt.map(kt.boolean),annotatedRegions:kt.array(kt.model({start:kt.number,end:kt.number,attributes:kt.frozen()})),data:kt.optional(kt.model({tree:kt.maybe(kt.string),msa:kt.maybe(kt.string),treeMetadata:kt.maybe(kt.string)}).actions(e=>({setTree(t){e.tree=t},setMSA(t){e.msa=t},setTreeMetadata(t){e.treeMetadata=t}})),{tree:"",msa:""})})).volatile(()=>({rulerHeight:20,error:void 0,margin:{left:20,top:20},DialogComponent:void 0,DialogProps:void 0,annotPos:void 0})).actions(e=>({setDialogComponent(t,n){e.DialogComponent=t,e.DialogProps=n},setHeight(t){e.height=t},addStructureToSelection(t){e.selectedStructures.push(t)},removeStructureFromSelection(t){const n=e.selectedStructures.find(r=>r.id===t.id);n&&e.selectedStructures.remove(n)},toggleStructureSelection(t){const n=e.selectedStructures.find(r=>r.id===t.id);n?e.selectedStructures.remove(n):e.selectedStructures.push(t)},clearSelectedStructures(){e.selectedStructures=[]},setError(t){e.error=t},setMousePos(t,n){e.mouseCol=t,e.mouseRow=n},setRowHeight(t){e.rowHeight=t},setColWidth(t){e.colWidth=t},setColorSchemeName(t){e.colorSchemeName=t},setScrollY(t){e.scrollY=t},setScrollX(t){e.scrollX=t},setTreeAreaWidth(t){e.treeAreaWidth=t},setTreeWidth(t){e.treeWidth=t},setCurrentAlignment(t){e.currentAlignment=t},toggleLabelsAlignRight(){e.labelsAlignRight=!e.labelsAlignRight},toggleDrawTree(){e.drawTree=!e.drawTree},toggleCollapsed(t){e.collapsed.includes(t)?e.collapsed.remove(t):e.collapsed.push(t)},setShowOnly(t){e.showOnly=t},toggleBranchLen(){e.showBranchLen=!e.showBranchLen},toggleBgColor(){e.bgColor=!e.bgColor},toggleNodeBubbles(){e.drawNodeBubbles=!e.drawNodeBubbles},setData(t){e.data=t},async setMSAFilehandle(t){e.msaFilehandle=t},async setTreeFilehandle(t){if(t&&"blobId"in t){const n=await D0.openLocation(t).readFile("utf8");this.setTree(n)}else e.treeFilehandle=t},setMSA(t){e.data.setMSA(t)},setTree(t){e.data.setTree(t)},setTreeMetadata(t){e.data.setTreeMetadata(t)},afterCreate(){ry(e,rl(async()=>{const{treeFilehandle:t}=e;if(t)try{this.setTree(await D0.openLocation(t).readFile("utf8"))}catch(n){console.error(n),this.setError(n)}})),ry(e,rl(async()=>{const{treeMetadataFilehandle:t}=e;if(t)try{this.setTreeMetadata(await D0.openLocation(t).readFile("utf8"))}catch(n){console.error(n),this.setError(n)}})),ry(e,rl(async()=>{const{msaFilehandle:t}=e;if(t)try{this.setMSA(await D0.openLocation(t).readFile("utf8"))}catch(n){console.error(n),this.setError(n)}}))}})).views(e=>{let t=[],n=[],r=0,i=0;return{get initialized(){return(e.data.msa||e.data.tree||e.msaFilehandle||e.treeFilehandle)&&!e.error},get blocksX(){const{scrollX:o,blockSize:s,colWidth:a}=e,l=-(s*Math.floor(o/s))-s,c=[];for(let u=l;u<l+s*3;u+=s)u+s>0&&c.push(u);return(JSON.stringify(c)!==JSON.stringify(t)||a!==r)&&(t=c,r=a),t},get blocksY(){const{scrollY:o,blockSize:s,rowHeight:a}=e,l=-(s*Math.floor(o/s))-2*s,c=[];for(let u=l;u<l+s*3;u+=s)u+s>0&&c.push(u);return(JSON.stringify(c)!==JSON.stringify(n)||a!==i)&&(n=c,i=a),n}}}).views(e=>({get blocks2d(){return e.blocksY.flatMap(t=>e.blocksX.map(n=>[n,t]))},get done(){return e.initialized&&(e.data.msa||e.data.tree)},get colorScheme(){return zYe[e.colorSchemeName]},get header(){var t;return((t=this.MSA)===null||t===void 0?void 0:t.getHeader())||{}},getRowData(t){var n;const r=t.match(/\S+\/(\d+)-(\d+)/);return{data:((n=this.MSA)===null||n===void 0?void 0:n.getRowData(t))||{},...r&&{range:{start:+r[1],end:+r[2]}}}},get currentAlignmentName(){return this.alignmentNames[e.currentAlignment]},get alignmentNames(){var t;return((t=this.MSA)===null||t===void 0?void 0:t.alignmentNames)||[]},get noTree(){return!!this.tree.noTree},get menuItems(){return[]},get treeMetadata(){return e.data.treeMetadata?JSON.parse(e.data.treeMetadata):{}},get MSA(){const t=e.data.msa;return t?rne.sniff(t)?new zKe(t,e.currentAlignment):t.startsWith(">")?new UKe(t):new FKe(t):null},get numColumns(){var t;return((((t=this.MSA)===null||t===void 0?void 0:t.getWidth())||0)-this.blanks.length)*e.colWidth},get tree(){var t;return e.data.tree?RD(cne(e.data.tree)):((t=this.MSA)===null||t===void 0?void 0:t.getTree())||{noTree:!0,branchset:[],id:"empty",name:"empty"}},get rowNames(){return this.hierarchy.leaves().map(t=>t.data.name)},get mouseOverRowName(){return e.mouseRow!==void 0?this.rowNames[e.mouseRow]:void 0},getMouseOverResidue(t){return this.columns[t]},get root(){let t=kD(this.tree,n=>n.branchset).sum(n=>n.branchset?0:1).sort((n,r)=>DYe(n.data.length||1,r.data.length||1));if(e.showOnly){const n=t.find(r=>r.data.id===e.showOnly);n&&(t=n)}return e.collapsed.length&&e.collapsed.map(n=>t.find(r=>r.data.id===n)).filter(n=>!!n).map(n=>Gte(n)),t},get structures(){var t;return((t=this.MSA)===null||t===void 0?void 0:t.getStructures())||{}},get inverseStructures(){return Object.fromEntries(Object.entries(this.structures).flatMap(([t,n])=>n.map(r=>[r.pdb,{id:t}])))},get msaAreaWidth(){return e.width-e.treeAreaWidth},get blanks(){var t;const n=[],r=this.hierarchy.leaves().map(({data:i})=>{var o;return(o=this.MSA)===null||o===void 0?void 0:o.getRow(i.name)}).filter(i=>!!i);for(let i=0;i<((t=r[0])===null||t===void 0?void 0:t.length);i++){let o=0;for(const s of r)s[i]==="-"&&o++;o===r.length&&n.push(i)}return n},get rows(){return this.hierarchy.leaves().map(({data:t})=>{var n;return[t.name,(n=this.MSA)===null||n===void 0?void 0:n.getRow(t.name)]}).filter(t=>!!t[1])},get columns(){return Object.fromEntries(this.rows.map((t,n)=>[t[0],this.columns2d[n]]))},get columns2d(){return this.rows.map(t=>t[1]).map(t=>U8(this.blanks,t))},get colStats(){const t=[],n=this.columns2d;for(const r of n)for(let i=0;i<r.length;i++){const o=t[i]||{};o[r[i]]||(o[r[i]]=0),o[r[i]]++,t[i]=o}return t},get hierarchy(){const t=this.root;return wXe().size([this.totalHeight,e.treeWidth]).separation(()=>1)(t),Vte(t,t.data.length=0,e.treeWidth/Hte(t)),t},get totalHeight(){return this.root.leaves().length*e.rowHeight}})).actions(e=>({addUniprotTrack(t){e.boxTracks.some(n=>n.name===t.name)?e.turnedOffTracks.has(t.name)&&this.toggleTrack(t.name):e.boxTracks.push({...t,id:t.name,associatedRowName:t.name})},doScrollY(t){e.scrollY=V8(-e.totalHeight+10,e.scrollY+t,0)},doScrollX(t){e.scrollX=V8(-e.numColumns+(e.msaAreaWidth-100),e.scrollX+t,0)},setMouseoveredColumn(t,n,r){var i;let o=0,s=0;const{id:a}=e.inverseStructures[r.slice(0,-4)]||{},l=(i=e.MSA)===null||i===void 0?void 0:i.getRow(a);if(l){for(s=0;s<l.length&&o<t;s++)l[s]!=="-"&&o++;e.mouseCol=o+1}else e.mouseCol=void 0},toggleTrack(t){e.turnedOffTracks.has(t)?e.turnedOffTracks.delete(t):e.turnedOffTracks.set(t,!0)}})).views(e=>({get secondaryStructureConsensus(){var t;return(t=e.MSA)===null||t===void 0?void 0:t.secondaryStructureConsensus},get seqConsensus(){var t;return(t=e.MSA)===null||t===void 0?void 0:t.seqConsensus},get conservation(){if(e.columns2d.length)for(let t=0;t<e.columns2d[0].length;t++){const n=[];for(const r of e.columns2d)n.push(r[t])}return["a"]},get tracks(){const t=e.blanks,n=e.MSA?e.MSA.tracks.map(o=>{const{data:s}=o;return{model:{...o,data:s?U8(t,s):void 0,height:e.rowHeight},ReactComponent:kKe}}):[],r=e.boxTracks.filter(o=>!!e.rows.some(s=>s[0]===o.name)).map(o=>({model:o,ReactComponent:X8})),i=e.annotatedRegions.length>0?[{model:{features:e.annotatedRegions,height:100,id:"annotations",name:"User-created annotations",data:e.annotatedRegions.map(o=>{const s=o.attributes?Object.entries(o.attributes).map(([a,l])=>`${a}=${l.join(",")}`).join(";"):".";return["MSA_refcoord",".",".",o.start,o.end,".",".",".",s].join("	")}).join(`
`)},ReactComponent:X8}]:[];return[...n,...r,...i]},get turnedOnTracks(){return this.tracks.filter(t=>!e.turnedOffTracks.has(t.model.id))},pxToBp(t){return Math.floor((t-e.scrollX)/e.colWidth)},rowSpecificBpToPx(t,n){var r;const{rowNames:i,rows:o}=e,s=i.indexOf(t),a=o[s][1],c=((r=e.getRowData(t).range)===null||r===void 0?void 0:r.start)||0,u=n-c,d=new Set(e.blanks);if(u<0)return 0;let f=0,h=0;for(;h<a.length&&!(a[h]!=="-"&&f++===u);h++);let p=0;for(let g=0;g<a.length;g++)d.has(g)&&g<h+1&&p++;return h-p},globalBpToPx(t){var n;let r=0;const i=new Set(e.blanks);for(let o=0;o<((n=e.rows[0])===null||n===void 0?void 0:n[1].length);o++)i.has(o)&&o<t+1&&r++;return t-r},relativePxToBp(t,n){const{rowNames:r,rows:i}=e,o=r.indexOf(t);if(o!==-1){const s=i[o][1];let a=0;for(let l=0;l<n;l++)if(s[l]!=="-")a++;else if(a>=n)break;return a}return 0},getPos(t){let n=0;for(let r=0,i=0;r<t;r++,n++)for(;n===e.blanks[i];)i++,n++;return n}})).actions(e=>({addAnnotation(t,n,r){e.annotatedRegions.push({start:e.getPos(t),end:e.getPos(n),attributes:r})},setAnnotationClickBoundaries(t,n){e.annotPos={left:t,right:n}},clearAnnotationClickBoundaries(){e.annotPos=void 0}})).views(e=>({get totalTrackAreaHeight(){return _l.sum(e.turnedOnTracks.map(t=>t.model.height))}})).postProcessSnapshot(e=>{const t=e,{data:{tree:n,msa:r,treeMetadata:i},...o}=t;return{data:{...!e.treeFilehandle&&{tree:n},...!e.msaFilehandle&&{msa:r},...!e.treeMetadataFilehandle&&{treeMetadata:i}},...o}}),WKe=kt.model({msaview:GKe,nglSelection:kt.optional(kt.string,"")}).actions(e=>({setNGLSelection(t){e.nglSelection=t}}));Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e});Math.sign===void 0&&(Math.sign=function(e){return e<0?-1:e>0?1:+e});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e);for(let n=1;n<arguments.length;n++){const r=arguments[n];if(r!=null)for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t});const qKe="118",YKe=0,K8=1,XKe=2,une=1,KKe=2,N0=3,dv=0,Zr=1,bx=2,dne=1,ac=0,Tu=1,Hk=2,Z8=3,J8=4,ZKe=5,Ep=100,JKe=101,QKe=102,Q8=103,eU=104,eZe=200,tZe=201,nZe=202,rZe=203,fne=204,hne=205,iZe=206,oZe=207,sZe=208,aZe=209,lZe=210,cZe=0,uZe=1,dZe=2,Gk=3,fZe=4,hZe=5,pZe=6,mZe=7,EE=0,gZe=1,vZe=2,gm=0,yZe=1,bZe=2,xZe=3,_Ze=4,wZe=5,ND=300,FD=301,zD=302,pne=303,jD=304,xx=306,UD=307,$2=1e3,po=1001,D2=1002,Nn=1003,Wk=1004,qk=1005,Wr=1006,mne=1007,TE=1008,Jf=1009,SZe=1010,CZe=1011,B2=1012,AZe=1013,yS=1014,Kl=1015,N2=1016,PZe=1017,MZe=1018,EZe=1019,my=1020,TZe=1021,Mf=1022,So=1023,OZe=1024,IZe=1025,RZe=So,vm=1026,lb=1027,kZe=1028,LZe=1029,$Ze=1030,DZe=1031,BZe=1032,NZe=1033,tU=33776,nU=33777,rU=33778,iU=33779,oU=35840,sU=35841,aU=35842,lU=35843,FZe=36196,cU=37492,uU=37496,zZe=37808,jZe=37809,UZe=37810,VZe=37811,HZe=37812,GZe=37813,WZe=37814,qZe=37815,YZe=37816,XZe=37817,KZe=37818,ZZe=37819,JZe=37820,QZe=37821,eJe=36492,tJe=37840,nJe=37841,rJe=37842,iJe=37843,oJe=37844,sJe=37845,aJe=37846,lJe=37847,cJe=37848,uJe=37849,dJe=37850,fJe=37851,hJe=37852,pJe=37853,mJe=2200,gJe=2201,vJe=2202,F2=2300,bS=2301,eO=2302,ug=2400,Yp=2401,z2=2402,VD=2500,gne=2501,yJe=0,Ni=3e3,_x=3001,HD=3007,GD=3002,bJe=3003,vne=3004,yne=3005,bne=3006,xJe=3200,_Je=3201,fv=0,wJe=1,tO=7680,SJe=519,OE=35044,cb=35048;function $c(){}Object.assign($c.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const i=r.indexOf(t);i!==-1&&r.splice(i,1)}},dispatchEvent:function(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let i=0,o=r.length;i<o;i++)r[i].call(this,e)}}});const gi=[];for(let e=0;e<256;e++)gi[e]=(e<16?"0":"")+e.toString(16);const Xt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(gi[e&255]+gi[e>>8&255]+gi[e>>16&255]+gi[e>>24&255]+"-"+gi[t&255]+gi[t>>8&255]+"-"+gi[t>>16&15|64]+gi[t>>24&255]+"-"+gi[n&63|128]+gi[n>>8&255]+"-"+gi[n>>16&255]+gi[n>>24&255]+gi[r&255]+gi[r>>8&255]+gi[r>>16&255]+gi[r>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Xt.DEG2RAD},radToDeg:function(e){return e*Xt.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),c=o((t+r)/2),u=s((t+r)/2),d=o((t-r)/2),f=s((t-r)/2),h=o((r-t)/2),p=s((r-t)/2);switch(i){case"XYX":e.set(a*u,l*d,l*f,a*c);break;case"YZY":e.set(l*f,a*u,l*d,a*c);break;case"ZXZ":e.set(l*d,l*f,a*u,a*c);break;case"XZX":e.set(a*u,l*p,l*h,a*c);break;case"YXY":e.set(l*h,a*u,l*p,a*c);break;case"ZYZ":e.set(l*p,l*h,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};function et(e=0,t=0){this.x=e,this.y=t}Object.defineProperties(et.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}});Object.assign(et.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}});function Si(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(Si.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,s,a,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=i,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},extractBasis:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],d=n[2],f=n[5],h=n[8],p=r[0],g=r[3],v=r[6],m=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=o*p+s*m+a*_,i[3]=o*g+s*y+a*x,i[6]=o*v+s*b+a*w,i[1]=l*p+c*m+u*_,i[4]=l*g+c*y+u*x,i[7]=l*v+c*b+u*w,i[2]=d*p+f*m+h*_,i[5]=d*g+f*y+h*x,i[8]=d*v+f*b+h*w,this},multiplyScalar:function(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*o*c-t*s*l-n*i*c+n*s*a+r*i*l-r*o*a},getInverse:function(e,t){t!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const n=e.elements,r=this.elements,i=n[0],o=n[1],s=n[2],a=n[3],l=n[4],c=n[5],u=n[6],d=n[7],f=n[8],h=f*l-c*d,p=c*u-f*a,g=d*a-l*u,v=i*h+o*p+s*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/v;return r[0]=h*m,r[1]=(s*d-f*o)*m,r[2]=(c*o-s*l)*m,r[3]=p*m,r[4]=(f*i-s*u)*m,r[5]=(s*a-c*i)*m,r[6]=g*m,r[7]=(o*u-d*i)*m,r[8]=(l*i-o*a)*m,this},transpose:function(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,s){const a=Math.cos(i),l=Math.sin(i);this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-r*l,r*a,-r*(-l*o+a*s)+s+t,0,0,1)},scale:function(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],s=r[6],a=r[1],l=r[4],c=r[7];return r[0]=t*i+n*a,r[3]=t*o+n*l,r[6]=t*s+n*c,r[1]=-n*i+t*a,r[4]=-n*o+t*l,r[7]=-n*s+t*c,this},translate:function(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});let Zh;const Qf={getDataURL:function(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Zh===void 0&&(Zh=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Zh.width=e.width,Zh.height=e.height;const n=Zh.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Zh}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let CJe=0;function Wn(e,t,n,r,i,o,s,a,l,c){Object.defineProperty(this,"id",{value:CJe++}),this.uuid=Xt.generateUUID(),this.name="",this.image=e!==void 0?e:Wn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=t!==void 0?t:Wn.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:po,this.wrapT=r!==void 0?r:po,this.magFilter=i!==void 0?i:Wr,this.minFilter=o!==void 0?o:TE,this.anisotropy=l!==void 0?l:1,this.format=s!==void 0?s:So,this.internalFormat=null,this.type=a!==void 0?a:Jf,this.offset=new et(0,0),this.repeat=new et(1,1),this.center=new et(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Si,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c!==void 0?c:Ni,this.version=0,this.onUpdate=null}Wn.DEFAULT_IMAGE=void 0;Wn.DEFAULT_MAPPING=ND;Wn.prototype=Object.assign(Object.create($c.prototype),{constructor:Wn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=Xt.generateUUID()),!t&&e.images[r.uuid]===void 0){let i;if(Array.isArray(r)){i=[];for(let o=0,s=r.length;o<s;o++)i.push(Qf.getDataURL(r[o]))}else i=Qf.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ND)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case $2:e.x=e.x-Math.floor(e.x);break;case po:e.x=e.x<0?0:1;break;case D2:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case $2:e.y=e.y-Math.floor(e.y);break;case po:e.y=e.y<0?0:1;break;case D2:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}});Object.defineProperty(Wn.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function In(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}Object.defineProperties(In.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}});Object.assign(In.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){let t,n,r,i;const a=e.elements,l=a[0],c=a[4],u=a[8],d=a[1],f=a[5],h=a[9],p=a[2],g=a[6],v=a[10];if(Math.abs(c-d)<.01&&Math.abs(u-p)<.01&&Math.abs(h-g)<.01){if(Math.abs(c+d)<.1&&Math.abs(u+p)<.1&&Math.abs(h+g)<.1&&Math.abs(l+f+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(l+1)/2,b=(f+1)/2,_=(v+1)/2,x=(c+d)/4,w=(u+p)/4,S=(h+g)/4;return y>b&&y>_?y<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(y),r=x/n,i=w/n):b>_?b<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(b),n=x/r,i=S/r):_<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(_),n=w/i,r=S/i),this.set(n,r,i,t),this}let m=Math.sqrt((g-h)*(g-h)+(u-p)*(u-p)+(d-c)*(d-c));return Math.abs(m)<.001&&(m=1),this.x=(g-h)/m,this.y=(u-p)/m,this.z=(d-c)/m,this.w=Math.acos((l+f+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}});function qi(e,t,n){this.width=e,this.height=t,this.scissor=new In(0,0,e,t),this.scissorTest=!1,this.viewport=new In(0,0,e,t),n=n||{},this.texture=new Wn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Wr,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!0,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}qi.prototype=Object.assign(Object.create($c.prototype),{constructor:qi,isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function dU(e,t,n){qi.call(this,e,t,n),this.samples=4}dU.prototype=Object.assign(Object.create(qi.prototype),{constructor:dU,isWebGLMultisampleRenderTarget:!0,copy:function(e){return qi.prototype.copy.call(this,e),this.samples=e.samples,this}});function Fn(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}Object.assign(Fn,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,s){let a=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=i[o+0],f=i[o+1],h=i[o+2],p=i[o+3];if(u!==p||a!==d||l!==f||c!==h){let g=1-s,v=a*d+l*f+c*h+u*p,m=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){const _=Math.sqrt(y),x=Math.atan2(_,v*m);g=Math.sin(g*x)/_,s=Math.sin(s*x)/_}const b=s*m;if(a=a*g+d*b,l=l*g+f*b,c=c*g+h*b,u=u*g+p*b,g===1-s){const _=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=_,l*=_,c*=_,u*=_}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u},multiplyQuaternionsFlat:function(e,t,n,r,i,o){const s=n[r],a=n[r+1],l=n[r+2],c=n[r+3],u=i[o],d=i[o+1],f=i[o+2],h=i[o+3];return e[t]=s*h+c*u+a*f-l*d,e[t+1]=a*h+c*d+l*u-s*f,e[t+2]=l*h+c*f+s*d-a*u,e[t+3]=c*h-s*u-a*d-l*f,e}});Object.defineProperties(Fn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}});Object.assign(Fn.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,o=e.order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),d=a(n/2),f=a(r/2),h=a(i/2);switch(o){case"XYZ":this._x=d*c*u+l*f*h,this._y=l*f*u-d*c*h,this._z=l*c*h+d*f*u,this._w=l*c*u-d*f*h;break;case"YXZ":this._x=d*c*u+l*f*h,this._y=l*f*u-d*c*h,this._z=l*c*h-d*f*u,this._w=l*c*u+d*f*h;break;case"ZXY":this._x=d*c*u-l*f*h,this._y=l*f*u+d*c*h,this._z=l*c*h+d*f*u,this._w=l*c*u-d*f*h;break;case"ZYX":this._x=d*c*u-l*f*h,this._y=l*f*u+d*c*h,this._z=l*c*h-d*f*u,this._w=l*c*u+d*f*h;break;case"YZX":this._x=d*c*u+l*f*h,this._y=l*f*u+d*c*h,this._z=l*c*h-d*f*u,this._w=l*c*u-d*f*h;break;case"XZY":this._x=d*c*u-l*f*h,this._y=l*f*u-d*c*h,this._z=l*c*h+d*f*u,this._w=l*c*u+d*f*h;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],u=t[10],d=n+s+u;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(c-a)*f,this._y=(i-l)*f,this._z=(o-r)*f}else if(n>s&&n>u){const f=2*Math.sqrt(1+n-s-u);this._w=(c-a)/f,this._x=.25*f,this._y=(r+o)/f,this._z=(i+l)/f}else if(s>u){const f=2*Math.sqrt(1+s-n-u);this._w=(i-l)/f,this._x=(r+o)/f,this._y=.25*f,this._z=(a+c)/f}else{const f=2*Math.sqrt(1+u-n-s);this._w=(o-r)/f,this._x=(i+l)/f,this._y=(a+c)/f,this._z=.25*f}return this._onChangeCallback(),this},setFromUnitVectors:function(e,t){let r=e.dot(t)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Xt.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+o*s+r*l-i*a,this._y=r*c+o*a+i*s-n*l,this._z=i*c+o*l+n*a-r*s,this._w=o*c-n*s-r*a-i*l,this._onChangeCallback(),this},slerp:function(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const f=1-t;return this._w=f*o+t*this._w,this._x=f*n+t*this._x,this._y=f*r+t*this._y,this._z=f*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=o*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return t===void 0&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},fromBufferAttribute:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});const nO=new W,fU=new Fn;function W(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}Object.assign(W.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(fU.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(fU.setFromAxisAngle(e,t))},applyMatrix3:function(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,s=e.z,a=e.w,l=a*t+o*r-s*n,c=a*n+s*t-i*r,u=a*r+i*n-o*t,d=-i*t-o*n-s*r;return this.x=l*a+d*-i+c*-s-u*-o,this.y=c*a+d*-o+u*-i-l*-s,this.z=u*a+d*-s+l*-o-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this},cross:function(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,s=t.y,a=t.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this},projectOnVector:function(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)},projectOnPlane:function(e){return nO.copy(this).projectOnVector(e),this.sub(nO)},reflect:function(e){return this.sub(nO.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Xt.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,t*4)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,t*3)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return t===void 0&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return n!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});const Jh=new W,Ws=new lt,AJe=new W(0,0,0),PJe=new W(1,1,1),qc=new W,T_=new W,$o=new W;function lt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(lt.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,s,a,l,c,u,d,f,h,p,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=s,v[13]=a,v[2]=l,v[6]=c,v[10]=u,v[14]=d,v[3]=f,v[7]=h,v[11]=p,v[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new lt().fromArray(this.elements)},copy:function(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){const t=this.elements,n=e.elements,r=1/Jh.setFromMatrixColumn(e,0).length(),i=1/Jh.setFromMatrixColumn(e,1).length(),o=1/Jh.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if(e.order==="XYZ"){const d=o*c,f=o*u,h=s*c,p=s*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=f+h*l,t[5]=d-p*l,t[9]=-s*a,t[2]=p-d*l,t[6]=h+f*l,t[10]=o*a}else if(e.order==="YXZ"){const d=a*c,f=a*u,h=l*c,p=l*u;t[0]=d+p*s,t[4]=h*s-f,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-s,t[2]=f*s-h,t[6]=p+d*s,t[10]=o*a}else if(e.order==="ZXY"){const d=a*c,f=a*u,h=l*c,p=l*u;t[0]=d-p*s,t[4]=-o*u,t[8]=h+f*s,t[1]=f+h*s,t[5]=o*c,t[9]=p-d*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if(e.order==="ZYX"){const d=o*c,f=o*u,h=s*c,p=s*u;t[0]=a*c,t[4]=h*l-f,t[8]=d*l+p,t[1]=a*u,t[5]=p*l+d,t[9]=f*l-h,t[2]=-l,t[6]=s*a,t[10]=o*a}else if(e.order==="YZX"){const d=o*a,f=o*l,h=s*a,p=s*l;t[0]=a*c,t[4]=p-d*u,t[8]=h*u+f,t[1]=u,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=f*u+h,t[10]=d-p*u}else if(e.order==="XZY"){const d=o*a,f=o*l,h=s*a,p=s*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=d*u+p,t[5]=o*c,t[9]=f*u-h,t[2]=h*u-f,t[6]=s*c,t[10]=p*u+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(AJe,e,PJe)},lookAt:function(e,t,n){const r=this.elements;return $o.subVectors(e,t),$o.lengthSq()===0&&($o.z=1),$o.normalize(),qc.crossVectors(n,$o),qc.lengthSq()===0&&(Math.abs(n.z)===1?$o.x+=1e-4:$o.z+=1e-4,$o.normalize(),qc.crossVectors(n,$o)),qc.normalize(),T_.crossVectors($o,qc),r[0]=qc.x,r[4]=T_.x,r[8]=$o.x,r[1]=qc.y,r[5]=T_.y,r[9]=$o.y,r[2]=qc.z,r[6]=T_.z,r[10]=$o.z,this},multiply:function(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],u=n[5],d=n[9],f=n[13],h=n[2],p=n[6],g=n[10],v=n[14],m=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],S=r[8],C=r[12],A=r[1],T=r[5],O=r[9],R=r[13],L=r[2],D=r[6],$=r[10],z=r[14],H=r[3],B=r[7],V=r[11],J=r[15];return i[0]=o*x+s*A+a*L+l*H,i[4]=o*w+s*T+a*D+l*B,i[8]=o*S+s*O+a*$+l*V,i[12]=o*C+s*R+a*z+l*J,i[1]=c*x+u*A+d*L+f*H,i[5]=c*w+u*T+d*D+f*B,i[9]=c*S+u*O+d*$+f*V,i[13]=c*C+u*R+d*z+f*J,i[2]=h*x+p*A+g*L+v*H,i[6]=h*w+p*T+g*D+v*B,i[10]=h*S+p*O+g*$+v*V,i[14]=h*C+p*R+g*z+v*J,i[3]=m*x+y*A+b*L+_*H,i[7]=m*w+y*T+b*D+_*B,i[11]=m*S+y*O+b*$+_*V,i[15]=m*C+y*R+b*z+_*J,this},multiplyScalar:function(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],u=e[6],d=e[10],f=e[14],h=e[3],p=e[7],g=e[11],v=e[15];return h*(+i*a*u-r*l*u-i*s*d+n*l*d+r*s*f-n*a*f)+p*(+t*a*f-t*l*d+i*o*d-r*o*f+r*l*c-i*a*c)+g*(+t*l*u-t*s*f-i*o*u+n*o*f+i*s*c-n*l*c)+v*(-r*s*c-t*a*u+t*s*d+r*o*u-n*o*d+n*a*c)},transpose:function(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){t!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const n=this.elements,r=e.elements,i=r[0],o=r[1],s=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],f=r[8],h=r[9],p=r[10],g=r[11],v=r[12],m=r[13],y=r[14],b=r[15],_=h*y*d-m*p*d+m*u*g-c*y*g-h*u*b+c*p*b,x=v*p*d-f*y*d-v*u*g+l*y*g+f*u*b-l*p*b,w=f*m*d-v*h*d+v*c*g-l*m*g-f*c*b+l*h*b,S=v*h*u-f*m*u-v*c*p+l*m*p+f*c*y-l*h*y,C=i*_+o*x+s*w+a*S;if(C===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/C;return n[0]=_*A,n[1]=(m*p*a-h*y*a-m*s*g+o*y*g+h*s*b-o*p*b)*A,n[2]=(c*y*a-m*u*a+m*s*d-o*y*d-c*s*b+o*u*b)*A,n[3]=(h*u*a-c*p*a-h*s*d+o*p*d+c*s*g-o*u*g)*A,n[4]=x*A,n[5]=(f*y*a-v*p*a+v*s*g-i*y*g-f*s*b+i*p*b)*A,n[6]=(v*u*a-l*y*a-v*s*d+i*y*d+l*s*b-i*u*b)*A,n[7]=(l*p*a-f*u*a+f*s*d-i*p*d-l*s*g+i*u*g)*A,n[8]=w*A,n[9]=(v*h*a-f*m*a-v*o*g+i*m*g+f*o*b-i*h*b)*A,n[10]=(l*m*a-v*c*a+v*o*d-i*m*d-l*o*b+i*c*b)*A,n[11]=(f*c*a-l*h*a-f*o*d+i*h*d+l*o*g-i*c*g)*A,n[12]=S*A,n[13]=(f*m*s-v*h*s+v*o*p-i*m*p-f*o*y+i*h*y)*A,n[14]=(v*c*s-l*m*s-v*o*u+i*m*u+l*o*y-i*c*y)*A,n[15]=(l*h*s-f*c*s+f*o*u-i*h*u-l*o*p+i*c*p)*A,this},scale:function(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,s=e.y,a=e.z,l=i*o,c=i*s;return this.set(l*o+n,l*s-r*a,l*a+r*s,0,l*s+r*a,c*s+n,c*a-r*o,0,l*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){const r=this.elements,i=t._x,o=t._y,s=t._z,a=t._w,l=i+i,c=o+o,u=s+s,d=i*l,f=i*c,h=i*u,p=o*c,g=o*u,v=s*u,m=a*l,y=a*c,b=a*u,_=n.x,x=n.y,w=n.z;return r[0]=(1-(p+v))*_,r[1]=(f+b)*_,r[2]=(h-y)*_,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(d+v))*x,r[6]=(g+m)*x,r[7]=0,r[8]=(h+y)*w,r[9]=(g-m)*w,r[10]=(1-(d+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){const r=this.elements;let i=Jh.set(r[0],r[1],r[2]).length(),o=Jh.set(r[4],r[5],r[6]).length(),s=Jh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Ws.copy(this);const l=1/i,c=1/o,u=1/s;return Ws.elements[0]*=l,Ws.elements[1]*=l,Ws.elements[2]*=l,Ws.elements[4]*=c,Ws.elements[5]*=c,Ws.elements[6]*=c,Ws.elements[8]*=u,Ws.elements[9]*=u,Ws.elements[10]*=u,t.setFromRotationMatrix(Ws),n.x=i,n.y=o,n.z=s,this},makePerspective:function(e,t,n,r,i,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,a=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),d=-(o+i)/(o-i),f=-2*o*i/(o-i);return s[0]=a,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){const s=this.elements,a=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*a,d=(n+r)*l,f=(o+i)*c;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){t===void 0&&(t=0);for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}});const hU=new lt,pU=new Fn;function Gu(e=0,t=0,n=0,r=Gu.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}Gu.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];Gu.DefaultOrder="XYZ";Object.defineProperties(Gu.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}});Object.assign(Gu.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){const r=Xt.clamp,i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],f=i[6],h=i[10];switch(t=t||this._order,t){case"XYZ":this._y=Math.asin(r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,o)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n!==!1&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return hU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(hU,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return pU.setFromEuler(this),this.setFromQuaternion(pU,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new W(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});function WD(){this.mask=1}Object.assign(WD.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return(this.mask&e.mask)!==0}});let MJe=0;const mU=new W,Qh=new Fn,Rl=new lt,O_=new W,Zv=new W,EJe=new W,TJe=new Fn,gU=new W(1,0,0),vU=new W(0,1,0),yU=new W(0,0,1),OJe={type:"added"},IJe={type:"removed"};function _t(){Object.defineProperty(this,"id",{value:MJe++}),this.uuid=Xt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_t.DefaultUp.clone();const e=new W,t=new Gu,n=new Fn,r=new W(1,1,1);function i(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(i),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new lt},normalMatrix:{value:new Si}}),this.matrix=new lt,this.matrixWorld=new lt,this.matrixAutoUpdate=_t.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new WD,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}_t.DefaultUp=new W(0,1,0);_t.DefaultMatrixAutoUpdate=!0;_t.prototype=Object.assign(Object.create($c.prototype),{constructor:_t,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Qh.setFromAxisAngle(e,t),this.quaternion.multiply(Qh),this},rotateOnWorldAxis:function(e,t){return Qh.setFromAxisAngle(e,t),this.quaternion.premultiply(Qh),this},rotateX:function(e){return this.rotateOnAxis(gU,e)},rotateY:function(e){return this.rotateOnAxis(vU,e)},rotateZ:function(e){return this.rotateOnAxis(yU,e)},translateOnAxis:function(e,t){return mU.copy(e).applyQuaternion(this.quaternion),this.position.add(mU.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(gU,e)},translateY:function(e){return this.translateOnAxis(vU,e)},translateZ:function(e){return this.translateOnAxis(yU,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Rl.getInverse(this.matrixWorld))},lookAt:function(e,t,n){e.isVector3?O_.copy(e):O_.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Zv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Rl.lookAt(Zv,O_,this.up):Rl.lookAt(O_,Zv,this.up),this.quaternion.setFromRotationMatrix(Rl),r&&(Rl.extractRotation(r.matrixWorld),Qh.setFromRotationMatrix(Rl),this.quaternion.premultiply(Qh.inverse()))},add:function(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(OJe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(IJe)),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Rl.getInverse(this.matrixWorld),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Rl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Rl),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}},getWorldPosition:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new W),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Fn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Zv,e,EJe),e},getWorldScale:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new W),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Zv,TJe,e),e},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new W),this.updateMatrixWorld(!0);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON());function i(s,a){return s[a.uuid]===void 0&&(s[a.uuid]=a.toJSON(e)),a.uuid}if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const a=s.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){const u=a[l];i(e.shapes,u)}else i(e.shapes,a)}}if(this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let a=0,l=this.material.length;a<l;a++)s.push(i(e.materials,this.material[a]));r.material=s}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){const s=o(e.geometries),a=o(e.materials),l=o(e.textures),c=o(e.images),u=o(e.shapes);s.length>0&&(n.geometries=s),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),u.length>0&&(n.shapes=u)}return n.object=r,n;function o(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(t===void 0&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}});function dg(){_t.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}dg.prototype=Object.assign(Object.create(_t.prototype),{constructor:dg,isScene:!0,copy:function(e,t){return _t.prototype.copy.call(this,e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){const t=_t.prototype.toJSON.call(this,e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.environment!==null&&(t.object.environment=this.environment.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});const kl=[new W,new W,new W,new W,new W,new W,new W,new W],Jv=new W,rO=new zn,ep=new W,tp=new W,np=new W,Yc=new W,Xc=new W,Bd=new W,Qv=new W,I_=new W,R_=new W,Nd=new W;function zn(e,t){this.min=e!==void 0?e:new W(1/0,1/0,1/0),this.max=t!==void 0?t:new W(-1/0,-1/0,-1/0)}Object.assign(zn.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.length;a<l;a+=3){const c=e[a],u=e[a+1],d=e[a+2];c<t&&(t=c),u<n&&(n=u),d<r&&(r=d),c>i&&(i=c),u>o&&(o=u),d>s&&(s=d)}return this.min.set(t,n,r),this.max.set(i,o,s),this},setFromBufferAttribute:function(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.count;a<l;a++){const c=e.getX(a),u=e.getY(a),d=e.getZ(a);c<t&&(t=c),u<n&&(n=u),d<r&&(r=d),c>i&&(i=c),u>o&&(o=u),d>s&&(s=d)}return this.min.set(t,n,r),this.max.set(i,o,s),this},setFromPoints:function(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){const n=Jv.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new W),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new W),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),rO.copy(t.boundingBox),rO.applyMatrix4(e.matrixWorld),this.union(rO));const n=e.children;for(let r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return t===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new W),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,Jv),Jv.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(Qv),I_.subVectors(this.max,Qv),ep.subVectors(e.a,Qv),tp.subVectors(e.b,Qv),np.subVectors(e.c,Qv),Yc.subVectors(tp,ep),Xc.subVectors(np,tp),Bd.subVectors(ep,np);let t=[0,-Yc.z,Yc.y,0,-Xc.z,Xc.y,0,-Bd.z,Bd.y,Yc.z,0,-Yc.x,Xc.z,0,-Xc.x,Bd.z,0,-Bd.x,-Yc.y,Yc.x,0,-Xc.y,Xc.x,0,-Bd.y,Bd.x,0];return!iO(t,ep,tp,np,I_)||(t=[1,0,0,0,1,0,0,0,1],!iO(t,ep,tp,np,I_))?!1:(R_.crossVectors(Yc,Xc),t=[R_.x,R_.y,R_.z],iO(t,ep,tp,np,I_))},clampPoint:function(e,t){return t===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new W),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return Jv.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(Jv).length()*.5,e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()?this:(kl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),kl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),kl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),kl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),kl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),kl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),kl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),kl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(kl),this)},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});function iO(e,t,n,r,i){for(let o=0,s=e.length-3;o<=s;o+=3){Nd.fromArray(e,o);const a=i.x*Math.abs(Nd.x)+i.y*Math.abs(Nd.y)+i.z*Math.abs(Nd.z),l=t.dot(Nd),c=n.dot(Nd),u=r.dot(Nd);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const RJe=new zn;function Dc(e,t){this.center=e!==void 0?e:new W,this.radius=t!==void 0?t:-1}Object.assign(Dc.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){const n=this.center;t!==void 0?n.copy(t):RJe.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){const n=this.center.distanceToSquared(e);return t===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new W),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new zn),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});const Ll=new W,oO=new W,k_=new W,Kc=new W,sO=new W,L_=new W,aO=new W;function hv(e,t){this.origin=e!==void 0?e:new W,this.direction=t!==void 0?t:new W(0,0,-1)}Object.assign(hv.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return t===void 0&&(console.warn("THREE.Ray: .at() target is now required"),t=new W),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Ll)),this},closestPointToPoint:function(e,t){t===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new W),t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){const t=Ll.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ll.copy(this.direction).multiplyScalar(t).add(this.origin),Ll.distanceToSquared(e))},distanceSqToSegment:function(e,t,n,r){oO.copy(e).add(t).multiplyScalar(.5),k_.copy(t).sub(e).normalize(),Kc.copy(this.origin).sub(oO);const i=e.distanceTo(t)*.5,o=-this.direction.dot(k_),s=Kc.dot(this.direction),a=-Kc.dot(k_),l=Kc.lengthSq(),c=Math.abs(1-o*o);let u,d,f,h;if(c>0)if(u=o*a-s,d=o*s-a,h=i*c,u>=0)if(d>=-h)if(d<=h){const p=1/c;u*=p,d*=p,f=u*(u+o*d+2*s)+d*(o*u+d+2*a)+l}else d=i,u=Math.max(0,-(o*d+s)),f=-u*u+d*(d+2*a)+l;else d=-i,u=Math.max(0,-(o*d+s)),f=-u*u+d*(d+2*a)+l;else d<=-h?(u=Math.max(0,-(-o*i+s)),d=u>0?-i:Math.min(Math.max(-i,-a),i),f=-u*u+d*(d+2*a)+l):d<=h?(u=0,d=Math.min(Math.max(-i,-a),i),f=d*(d+2*a)+l):(u=Math.max(0,-(o*i+s)),d=u>0?i:Math.min(Math.max(-i,-a),i),f=-u*u+d*(d+2*a)+l);else d=o>0?-i:i,u=Math.max(0,-(o*d+s)),f=-u*u+d*(d+2*a)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),r&&r.copy(k_).multiplyScalar(d).add(oO),f},intersectSphere:function(e,t){Ll.subVectors(e.center,this.origin);const n=Ll.dot(this.direction),r=Ll.dot(Ll)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return s<0&&a<0?null:s<0?this.at(a,t):this.at(s,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)},intersectsPlane:function(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){let n,r,i,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),n>o||i>r||((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),u>=0?(s=(e.min.z-d.z)*u,a=(e.max.z-d.z)*u):(s=(e.max.z-d.z)*u,a=(e.min.z-d.z)*u),n>a||s>r)||((s>n||n!==n)&&(n=s),(a<r||r!==r)&&(r=a),r<0)?null:this.at(n>=0?n:r,t)},intersectsBox:function(e){return this.intersectBox(e,Ll)!==null},intersectTriangle:function(e,t,n,r,i){sO.subVectors(t,e),L_.subVectors(n,e),aO.crossVectors(sO,L_);let o=this.direction.dot(aO),s;if(o>0){if(r)return null;s=1}else if(o<0)s=-1,o=-o;else return null;Kc.subVectors(this.origin,e);const a=s*this.direction.dot(L_.crossVectors(Kc,L_));if(a<0)return null;const l=s*this.direction.dot(sO.cross(Kc));if(l<0||a+l>o)return null;const c=-s*Kc.dot(aO);return c<0?null:this.at(c/o,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});const lO=new W,kJe=new W,LJe=new Si;function Ha(e,t){this.normal=e!==void 0?e:new W(1,0,0),this.constant=t!==void 0?t:0}Object.assign(Ha.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){const r=lO.subVectors(n,t).cross(kJe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return t===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new W),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){t===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new W);const n=e.delta(lO),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):void 0;const i=-(e.start.dot(this.normal)+this.constant)/r;if(!(i<0||i>1))return t.copy(n).multiplyScalar(i).add(e.start)},intersectsLine:function(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new W),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){const n=t||LJe.getNormalMatrix(e),r=this.coplanarPoint(lO).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});const Zs=new W,Vl=new W,cO=new W,$l=new W,rp=new W,ip=new W,bU=new W,uO=new W,dO=new W,fO=new W;function wi(e,t,n){this.a=e!==void 0?e:new W,this.b=t!==void 0?t:new W,this.c=n!==void 0?n:new W}Object.assign(wi,{getNormal:function(e,t,n,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new W),r.subVectors(n,t),Zs.subVectors(e,t),r.cross(Zs);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(e,t,n,r,i){Zs.subVectors(r,t),Vl.subVectors(n,t),cO.subVectors(e,t);const o=Zs.dot(Zs),s=Zs.dot(Vl),a=Zs.dot(cO),l=Vl.dot(Vl),c=Vl.dot(cO),u=o*l-s*s;if(i===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new W),u===0)return i.set(-2,-1,-1);const d=1/u,f=(l*a-s*c)*d,h=(o*c-s*a)*d;return i.set(1-f-h,h,f)},containsPoint:function(e,t,n,r){return wi.getBarycoord(e,t,n,r,$l),$l.x>=0&&$l.y>=0&&$l.x+$l.y<=1},getUV:function(e,t,n,r,i,o,s,a){return this.getBarycoord(e,t,n,r,$l),a.set(0,0),a.addScaledVector(i,$l.x),a.addScaledVector(o,$l.y),a.addScaledVector(s,$l.z),a},isFrontFacing:function(e,t,n,r){return Zs.subVectors(n,t),Vl.subVectors(e,t),Zs.cross(Vl).dot(r)<0}});Object.assign(wi.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Zs.subVectors(this.c,this.b),Vl.subVectors(this.a,this.b),Zs.cross(Vl).length()*.5},getMidpoint:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new W),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return wi.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Ha),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return wi.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return wi.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return wi.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return wi.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){t===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new W);const n=this.a,r=this.b,i=this.c;let o,s;rp.subVectors(r,n),ip.subVectors(i,n),uO.subVectors(e,n);const a=rp.dot(uO),l=ip.dot(uO);if(a<=0&&l<=0)return t.copy(n);dO.subVectors(e,r);const c=rp.dot(dO),u=ip.dot(dO);if(c>=0&&u<=c)return t.copy(r);const d=a*u-c*l;if(d<=0&&a>=0&&c<=0)return o=a/(a-c),t.copy(n).addScaledVector(rp,o);fO.subVectors(e,i);const f=rp.dot(fO),h=ip.dot(fO);if(h>=0&&f<=h)return t.copy(i);const p=f*l-a*h;if(p<=0&&l>=0&&h<=0)return s=l/(l-h),t.copy(n).addScaledVector(ip,s);const g=c*h-f*u;if(g<=0&&u-c>=0&&f-h>=0)return bU.subVectors(i,r),s=(u-c)/(u-c+(f-h)),t.copy(r).addScaledVector(bU,s);const v=1/(g+p+d);return o=p*v,s=d*v,t.copy(n).addScaledVector(rp,o).addScaledVector(ip,s)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});const xne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},qs={h:0,s:0,l:0},$_={h:0,s:0,l:0};function ht(e,t,n){return t===void 0&&n===void 0?this.set(e):this.setRGB(e,t,n)}function hO(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*6*(2/3-n):e}function pO(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function mO(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}Object.assign(ht.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=Xt.euclideanModulo(e,1),t=Xt.clamp(t,0,1),n=Xt.clamp(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=hO(i,r,e+1/3),this.g=hO(i,r,e),this.b=hO(i,r,e-1/3)}return this},setStyle:function(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let r;const i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){const s=parseFloat(r[1])/360,a=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(s,a,l)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){const r=n[1],i=r.length;if(i===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(i===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){const t=xne[e];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return t===void 0&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){t===void 0&&(t=2);const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=pO(e.r),this.g=pO(e.g),this.b=pO(e.b),this},copyLinearToSRGB:function(e){return this.r=mO(e.r),this.g=mO(e.g),this.b=mO(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return this.r*255<<16^this.g*255<<8^this.b*255<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);let s,a;const l=(o+i)/2;if(o===i)s=0,a=0;else{const c=i-o;switch(a=l<=.5?c/(i+o):c/(2-i-o),i){case t:s=(n-r)/c+(n<r?6:0);break;case n:s=(r-t)/c+2;break;case r:s=(t-n)/c+4;break}s/=6}return e.h=s,e.s=a,e.l=l,e},getStyle:function(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"},offsetHSL:function(e,t,n){return this.getHSL(qs),qs.h+=e,qs.s+=t,qs.l+=n,this.setHSL(qs.h,qs.s,qs.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(qs),e.getHSL($_);const n=Xt.lerp(qs.h,$_.h,t),r=Xt.lerp(qs.s,$_.s,t),i=Xt.lerp(qs.l,$_.l,t);return this.setHSL(n,r,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return t===void 0&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return e===void 0&&(e=[]),t===void 0&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},fromBufferAttribute:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}});ht.NAMES=xne;function Ef(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new W,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new ht,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=o!==void 0?o:0}Object.assign(Ef.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});let $Je=0;function Gt(){Object.defineProperty(this,"id",{value:$Je++}),this.uuid=Xt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=Tu,this.side=dv,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=fne,this.blendDst=hne,this.blendEquation=Ep,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Gk,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=SJe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=tO,this.stencilZFail=tO,this.stencilZPass=tO,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Gt.prototype=Object.assign(Object.create($c.prototype),{constructor:Gt,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===dne;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}},toJSON:function(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Tu&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==dv&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function r(i){const o=[];for(const s in i){const a=i[s];delete a.metadata,o.push(a)}return o}if(t){const i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Gt.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function wa(e){Gt.call(this),this.type="MeshBasicMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=EE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}wa.prototype=Object.create(Gt.prototype);wa.prototype.constructor=wa;wa.prototype.isMeshBasicMaterial=!0;wa.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const qn=new W,D_=new et;function Rt(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=OE,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(Rt.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(Rt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new ht),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new et),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new W),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new In),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},applyMatrix3:function(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)D_.fromBufferAttribute(this,t),D_.applyMatrix3(e),this.setXY(t,D_.x,D_.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix3(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)qn.x=this.getX(t),qn.y=this.getY(t),qn.z=this.getZ(t),qn.applyMatrix4(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)qn.x=this.getX(t),qn.y=this.getY(t),qn.z=this.getZ(t),qn.applyNormalMatrix(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)qn.x=this.getX(t),qn.y=this.getY(t),qn.z=this.getZ(t),qn.transformDirection(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function Yk(e,t,n){Rt.call(this,new Int8Array(e),t,n)}Yk.prototype=Object.create(Rt.prototype);Yk.prototype.constructor=Yk;function Xk(e,t,n){Rt.call(this,new Uint8Array(e),t,n)}Xk.prototype=Object.create(Rt.prototype);Xk.prototype.constructor=Xk;function Kk(e,t,n){Rt.call(this,new Uint8ClampedArray(e),t,n)}Kk.prototype=Object.create(Rt.prototype);Kk.prototype.constructor=Kk;function Zk(e,t,n){Rt.call(this,new Int16Array(e),t,n)}Zk.prototype=Object.create(Rt.prototype);Zk.prototype.constructor=Zk;function ub(e,t,n){Rt.call(this,new Uint16Array(e),t,n)}ub.prototype=Object.create(Rt.prototype);ub.prototype.constructor=ub;function Jk(e,t,n){Rt.call(this,new Int32Array(e),t,n)}Jk.prototype=Object.create(Rt.prototype);Jk.prototype.constructor=Jk;function db(e,t,n){Rt.call(this,new Uint32Array(e),t,n)}db.prototype=Object.create(Rt.prototype);db.prototype.constructor=db;function St(e,t,n){Rt.call(this,new Float32Array(e),t,n)}St.prototype=Object.create(Rt.prototype);St.prototype.constructor=St;function Qk(e,t,n){Rt.call(this,new Float64Array(e),t,n)}Qk.prototype=Object.create(Rt.prototype);Qk.prototype.constructor=Qk;function _ne(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(_ne.prototype,{computeGroups:function(e){const t=[];let n,r,i;const o=e.faces;for(r=0;r<o.length;r++){const s=o[r];s.materialIndex!==i&&(i=s.materialIndex,n!==void 0&&(n.count=r*3-n.start,t.push(n)),n={start:r*3,materialIndex:i})}n!==void 0&&(n.count=r*3-n.start,t.push(n)),this.groups=t},fromGeometry:function(e){const t=e.faces,n=e.vertices,r=e.faceVertexUvs,i=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,s=e.morphTargets,a=s.length;let l;if(a>0){l=[];for(let v=0;v<a;v++)l[v]={name:s[v].name,data:[]};this.morphTargets.position=l}const c=e.morphNormals,u=c.length;let d;if(u>0){d=[];for(let v=0;v<u;v++)d[v]={name:c[v].name,data:[]};this.morphTargets.normal=d}const f=e.skinIndices,h=e.skinWeights,p=f.length===n.length,g=h.length===n.length;n.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let v=0;v<t.length;v++){const m=t[v];this.vertices.push(n[m.a],n[m.b],n[m.c]);const y=m.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{const _=m.normal;this.normals.push(_,_,_)}const b=m.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{const _=m.color;this.colors.push(_,_,_)}if(i===!0){const _=r[0][v];_!==void 0?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",v),this.uvs.push(new et,new et,new et))}if(o===!0){const _=r[1][v];_!==void 0?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",v),this.uvs2.push(new et,new et,new et))}for(let _=0;_<a;_++){const x=s[_].vertices;l[_].data.push(x[m.a],x[m.b],x[m.c])}for(let _=0;_<u;_++){const x=c[_].vertexNormals[v];d[_].data.push(x.a,x.b,x.c)}p&&this.skinIndices.push(f[m.a],f[m.b],f[m.c]),g&&this.skinWeights.push(h[m.a],h[m.b],h[m.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}});function wne(e){if(e.length===0)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}let DJe=1;const ka=new lt,gO=new _t,op=new W,Do=new zn,e0=new zn,ai=new W;function wt(){Object.defineProperty(this,"id",{value:DJe+=2}),this.uuid=Xt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}wt.prototype=Object.assign(Object.create($c.prototype),{constructor:wt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(wne(e)>65535?db:ub)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const i=new Si().getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return ka.makeRotationX(e),this.applyMatrix4(ka),this},rotateY:function(e){return ka.makeRotationY(e),this.applyMatrix4(ka),this},rotateZ:function(e){return ka.makeRotationZ(e),this.applyMatrix4(ka),this},translate:function(e,t,n){return ka.makeTranslation(e,t,n),this.applyMatrix4(ka),this},scale:function(e,t,n){return ka.makeScale(e,t,n),this.applyMatrix4(ka),this},lookAt:function(e){return gO.lookAt(e),gO.updateMatrix(),this.applyMatrix4(gO.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(op).negate(),this.translate(op.x,op.y,op.z),this},setFromObject:function(e){const t=e.geometry;if(e.isPoints||e.isLine){const n=new St(t.vertices.length*3,3),r=new St(t.colors.length*3,3);if(this.setAttribute("position",n.copyVector3sArray(t.vertices)),this.setAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){const i=new St(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new St(t,3)),this},updateFromObject:function(e){let t=e.geometry;if(e.isMesh){let n=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(n=void 0,t.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}if(t.verticesNeedUpdate===!0){const n=this.attributes.position;n!==void 0&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1}if(t.normalsNeedUpdate===!0){const n=this.attributes.normal;n!==void 0&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1}if(t.colorsNeedUpdate===!0){const n=this.attributes.color;n!==void 0&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1}if(t.uvsNeedUpdate){const n=this.attributes.uv;n!==void 0&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1}if(t.lineDistancesNeedUpdate){const n=this.attributes.lineDistance;n!==void 0&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1}return t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new _ne().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){const t=new Float32Array(e.vertices.length*3);if(this.setAttribute("position",new Rt(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){const n=new Float32Array(e.normals.length*3);this.setAttribute("normal",new Rt(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){const n=new Float32Array(e.colors.length*3);this.setAttribute("color",new Rt(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){const n=new Float32Array(e.uvs.length*2);this.setAttribute("uv",new Rt(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){const n=new Float32Array(e.uvs2.length*2);this.setAttribute("uv2",new Rt(n,2).copyVector2sArray(e.uvs2))}this.groups=e.groups;for(const n in e.morphTargets){const r=[],i=e.morphTargets[n];for(let o=0,s=i.length;o<s;o++){const a=i[o],l=new St(a.data.length*3,3);l.name=a.name,r.push(l.copyVector3sArray(a.data))}this.morphAttributes[n]=r}if(e.skinIndices.length>0){const n=new St(e.skinIndices.length*4,4);this.setAttribute("skinIndex",n.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){const n=new St(e.skinWeights.length*4,4);this.setAttribute("skinWeight",n.copyVector4sArray(e.skinWeights))}return e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new zn);const e=this.attributes.position,t=this.morphAttributes.position;if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const i=t[n];Do.setFromBufferAttribute(i),this.morphTargetsRelative?(ai.addVectors(this.boundingBox.min,Do.min),this.boundingBox.expandByPoint(ai),ai.addVectors(this.boundingBox.max,Do.max),this.boundingBox.expandByPoint(ai)):(this.boundingBox.expandByPoint(Do.min),this.boundingBox.expandByPoint(Do.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Dc);const e=this.attributes.position,t=this.morphAttributes.position;if(e){const n=this.boundingSphere.center;if(Do.setFromBufferAttribute(e),t)for(let i=0,o=t.length;i<o;i++){const s=t[i];e0.setFromBufferAttribute(s),this.morphTargetsRelative?(ai.addVectors(Do.min,e0.min),Do.expandByPoint(ai),ai.addVectors(Do.max,e0.max),Do.expandByPoint(ai)):(Do.expandByPoint(e0.min),Do.expandByPoint(e0.max))}Do.getCenter(n);let r=0;for(let i=0,o=e.count;i<o;i++)ai.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(ai));if(t)for(let i=0,o=t.length;i<o;i++){const s=t[i],a=this.morphTargetsRelative;for(let l=0,c=s.count;l<c;l++)ai.fromBufferAttribute(s,l),a&&(op.fromBufferAttribute(e,l),ai.add(op)),r=Math.max(r,n.distanceToSquared(ai))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Rt(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let d=0,f=n.count;d<f;d++)n.setXYZ(d,0,0,0);const r=new W,i=new W,o=new W,s=new W,a=new W,l=new W,c=new W,u=new W;if(e)for(let d=0,f=e.count;d<f;d+=3){const h=e.getX(d+0),p=e.getX(d+1),g=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,p),o.fromBufferAttribute(t,g),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,h),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,g),s.add(c),a.add(c),l.add(c),n.setXYZ(h,s.x,s.y,s.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(g,l.x,l.y,l.z)}else for(let d=0,f=t.count;d<f;d+=3)r.fromBufferAttribute(t,d+0),i.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(d+0,c.x,c.y,c.z),n.setXYZ(d+1,c.x,c.y,c.z),n.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(e.attributes[r]===void 0)continue;const o=n[r].array,s=e.attributes[r],a=s.array,l=s.itemSize*t,c=Math.min(a.length,o.length-l);for(let u=0,d=l;u<c;u++,d++)o[d]=a[u]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ai.fromBufferAttribute(e,t),ai.normalize(),e.setXYZ(t,ai.x,ai.y,ai.z)},toNonIndexed:function(){function e(s,a){const l=s.array,c=s.itemSize,u=s.normalized,d=new l.constructor(a.length*c);let f=0,h=0;for(let p=0,g=a.length;p<g;p++){f=a[p]*c;for(let v=0;v<c;v++)d[h++]=l[f++]}return new Rt(d,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const t=new wt,n=this.index.array,r=this.attributes;for(const s in r){const a=r[s],l=e(a,n);t.setAttribute(s,l)}const i=this.morphAttributes;for(const s in i){const a=[],l=i[s];for(let c=0,u=l.length;c<u;c++){const d=l[c],f=e(d,n);a.push(f)}t.morphAttributes[s]=a}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const l=o[s];t.addGroup(l.start,l.count,l.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const a=this.parameters;for(const l in a)a[l]!==void 0&&(e[l]=a[l]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const l=n[a],c=l.toJSON(e.data);l.name!==""&&(c.name=l.name),e.data.attributes[a]=c}const r={};let i=!1;for(const a in this.morphAttributes){const l=this.morphAttributes[a],c=[];for(let u=0,d=l.length;u<d;u++){const f=l[u],h=f.toJSON(e.data);f.name!==""&&(h.name=f.name),c.push(h)}c.length>0&&(r[a]=c,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e},clone:function(){return new wt().copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const c=r[l];this.setAttribute(l,c.clone(t))}const i=e.morphAttributes;for(const l in i){const c=[],u=i[l];for(let d=0,f=u.length;d<f;d++)c.push(u[d].clone(t));this.morphAttributes[l]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const u=o[l];this.addGroup(u.start,u.count,u.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const a=e.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const xU=new lt,Fd=new hv,vO=new Dc,Zc=new W,Jc=new W,Qc=new W,yO=new W,bO=new W,xO=new W,B_=new W,N_=new W,F_=new W,Xp=new et,Kp=new et,Zp=new et,gy=new W,z_=new W;function Gn(e,t){_t.call(this),this.type="Mesh",this.geometry=e!==void 0?e:new wt,this.material=t!==void 0?t:new wa,this.updateMorphTargets()}Gn.prototype=Object.assign(Object.create(_t.prototype),{constructor:Gn,isMesh:!0,copy:function(e){return _t.prototype.copy.call(this,e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=r.length;i<o;i++){const s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(r===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),vO.copy(n.boundingSphere),vO.applyMatrix4(i),e.ray.intersectsSphere(vO)===!1)||(xU.getInverse(i),Fd.copy(e.ray).applyMatrix4(xU),n.boundingBox!==null&&Fd.intersectsBox(n.boundingBox)===!1))return;let o;if(n.isBufferGeometry){const s=n.index,a=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,d=n.attributes.uv2,f=n.groups,h=n.drawRange;if(s!==null)if(Array.isArray(r))for(let p=0,g=f.length;p<g;p++){const v=f[p],m=r[v.materialIndex],y=Math.max(v.start,h.start),b=Math.min(v.start+v.count,h.start+h.count);for(let _=y,x=b;_<x;_+=3){const w=s.getX(_),S=s.getX(_+1),C=s.getX(_+2);o=j_(this,m,e,Fd,a,l,c,u,d,w,S,C),o&&(o.faceIndex=Math.floor(_/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const p=Math.max(0,h.start),g=Math.min(s.count,h.start+h.count);for(let v=p,m=g;v<m;v+=3){const y=s.getX(v),b=s.getX(v+1),_=s.getX(v+2);o=j_(this,r,e,Fd,a,l,c,u,d,y,b,_),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}else if(a!==void 0)if(Array.isArray(r))for(let p=0,g=f.length;p<g;p++){const v=f[p],m=r[v.materialIndex],y=Math.max(v.start,h.start),b=Math.min(v.start+v.count,h.start+h.count);for(let _=y,x=b;_<x;_+=3){const w=_,S=_+1,C=_+2;o=j_(this,m,e,Fd,a,l,c,u,d,w,S,C),o&&(o.faceIndex=Math.floor(_/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const p=Math.max(0,h.start),g=Math.min(a.count,h.start+h.count);for(let v=p,m=g;v<m;v+=3){const y=v,b=v+1,_=v+2;o=j_(this,r,e,Fd,a,l,c,u,d,y,b,_),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}}else if(n.isGeometry){const s=Array.isArray(r),a=n.vertices,l=n.faces;let c;const u=n.faceVertexUvs[0];u.length>0&&(c=u);for(let d=0,f=l.length;d<f;d++){const h=l[d],p=s?r[h.materialIndex]:r;if(p===void 0)continue;const g=a[h.a],v=a[h.b],m=a[h.c];if(o=Sne(this,p,e,Fd,g,v,m,gy),o){if(c&&c[d]){const y=c[d];Xp.copy(y[0]),Kp.copy(y[1]),Zp.copy(y[2]),o.uv=wi.getUV(gy,g,v,m,Xp,Kp,Zp,new et)}o.face=h,o.faceIndex=d,t.push(o)}}}}});function Sne(e,t,n,r,i,o,s,a){let l;if(t.side===Zr?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,t.side!==bx,a),l===null)return null;z_.copy(a),z_.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(z_);return c<n.near||c>n.far?null:{distance:c,point:z_.clone(),object:e}}function j_(e,t,n,r,i,o,s,a,l,c,u,d){Zc.fromBufferAttribute(i,c),Jc.fromBufferAttribute(i,u),Qc.fromBufferAttribute(i,d);const f=e.morphTargetInfluences;if(t.morphTargets&&o&&f){B_.set(0,0,0),N_.set(0,0,0),F_.set(0,0,0);for(let p=0,g=o.length;p<g;p++){const v=f[p],m=o[p];v!==0&&(yO.fromBufferAttribute(m,c),bO.fromBufferAttribute(m,u),xO.fromBufferAttribute(m,d),s?(B_.addScaledVector(yO,v),N_.addScaledVector(bO,v),F_.addScaledVector(xO,v)):(B_.addScaledVector(yO.sub(Zc),v),N_.addScaledVector(bO.sub(Jc),v),F_.addScaledVector(xO.sub(Qc),v)))}Zc.add(B_),Jc.add(N_),Qc.add(F_)}e.isSkinnedMesh&&(e.boneTransform(c,Zc),e.boneTransform(u,Jc),e.boneTransform(d,Qc));const h=Sne(e,t,n,r,Zc,Jc,Qc,gy);if(h){a&&(Xp.fromBufferAttribute(a,c),Kp.fromBufferAttribute(a,u),Zp.fromBufferAttribute(a,d),h.uv=wi.getUV(gy,Zc,Jc,Qc,Xp,Kp,Zp,new et)),l&&(Xp.fromBufferAttribute(l,c),Kp.fromBufferAttribute(l,u),Zp.fromBufferAttribute(l,d),h.uv2=wi.getUV(gy,Zc,Jc,Qc,Xp,Kp,Zp,new et));const p=new Ef(c,u,d);wi.getNormal(Zc,Jc,Qc,p.normal),h.face=p}return h}let BJe=0;const La=new lt,_O=new _t,U_=new W;function Ft(){Object.defineProperty(this,"id",{value:BJe+=2}),this.uuid=Xt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Ft.prototype=Object.assign(Object.create($c.prototype),{constructor:Ft,isGeometry:!0,applyMatrix4:function(e){const t=new Si().getNormalMatrix(e);for(let n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(let n=0,r=this.faces.length;n<r;n++){const i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(let o=0,s=i.vertexNormals.length;o<s;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return La.makeRotationX(e),this.applyMatrix4(La),this},rotateY:function(e){return La.makeRotationY(e),this.applyMatrix4(La),this},rotateZ:function(e){return La.makeRotationZ(e),this.applyMatrix4(La),this},translate:function(e,t,n){return La.makeTranslation(e,t,n),this.applyMatrix4(La),this},scale:function(e,t,n){return La.makeScale(e,t,n),this.applyMatrix4(La),this},lookAt:function(e){return _O.lookAt(e),_O.updateMatrix(),this.applyMatrix4(_O.matrix),this},fromBufferGeometry:function(e){const t=this,n=e.index!==null?e.index:void 0,r=e.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const i=r.position,o=r.normal,s=r.color,a=r.uv,l=r.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let d=0;d<i.count;d++)t.vertices.push(new W().fromBufferAttribute(i,d)),s!==void 0&&t.colors.push(new ht().fromBufferAttribute(s,d));function c(d,f,h,p){const g=s===void 0?[]:[t.colors[d].clone(),t.colors[f].clone(),t.colors[h].clone()],v=o===void 0?[]:[new W().fromBufferAttribute(o,d),new W().fromBufferAttribute(o,f),new W().fromBufferAttribute(o,h)],m=new Ef(d,f,h,v,g,p);t.faces.push(m),a!==void 0&&t.faceVertexUvs[0].push([new et().fromBufferAttribute(a,d),new et().fromBufferAttribute(a,f),new et().fromBufferAttribute(a,h)]),l!==void 0&&t.faceVertexUvs[1].push([new et().fromBufferAttribute(l,d),new et().fromBufferAttribute(l,f),new et().fromBufferAttribute(l,h)])}const u=e.groups;if(u.length>0)for(let d=0;d<u.length;d++){const f=u[d],h=f.start,p=f.count;for(let g=h,v=h+p;g<v;g+=3)n!==void 0?c(n.getX(g),n.getX(g+1),n.getX(g+2),f.materialIndex):c(g,g+1,g+2,f.materialIndex)}else if(n!==void 0)for(let d=0;d<n.count;d+=3)c(n.getX(d),n.getX(d+1),n.getX(d+2));else for(let d=0;d<i.count;d+=3)c(d,d+1,d+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(U_).negate(),this.translate(U_.x,U_.y,U_.z),this},normalize:function(){this.computeBoundingSphere();const e=this.boundingSphere.center,t=this.boundingSphere.radius,n=t===0?1:1/t,r=new lt;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){const e=new W,t=new W;for(let n=0,r=this.faces.length;n<r;n++){const i=this.faces[n],o=this.vertices[i.a],s=this.vertices[i.b],a=this.vertices[i.c];e.subVectors(a,s),t.subVectors(o,s),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){e===void 0&&(e=!0);const t=new Array(this.vertices.length);for(let n=0,r=this.vertices.length;n<r;n++)t[n]=new W;if(e){const n=new W,r=new W;for(let i=0,o=this.faces.length;i<o;i++){const s=this.faces[i],a=this.vertices[s.a],l=this.vertices[s.b],c=this.vertices[s.c];n.subVectors(c,l),r.subVectors(a,l),n.cross(r),t[s.a].add(n),t[s.b].add(n),t[s.c].add(n)}}else{this.computeFaceNormals();for(let n=0,r=this.faces.length;n<r;n++){const i=this.faces[n];t[i.a].add(i.normal),t[i.b].add(i.normal),t[i.c].add(i.normal)}}for(let n=0,r=this.vertices.length;n<r;n++)t[n].normalize();for(let n=0,r=this.faces.length;n<r;n++){const i=this.faces[n],o=i.vertexNormals;o.length===3?(o[0].copy(t[i.a]),o[1].copy(t[i.b]),o[2].copy(t[i.c])):(o[0]=t[i.a].clone(),o[1]=t[i.b].clone(),o[2]=t[i.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){const n=this.faces[e],r=n.vertexNormals;r.length===3?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let t=0,n=this.faces.length;t<n;t++){const r=this.faces[t];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(let i=0,o=r.vertexNormals.length;i<o;i++)r.__originalVertexNormals[i]?r.__originalVertexNormals[i].copy(r.vertexNormals[i]):r.__originalVertexNormals[i]=r.vertexNormals[i].clone()}const e=new Ft;e.faces=this.faces;for(let t=0,n=this.morphTargets.length;t<n;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];const i=this.morphNormals[t].faceNormals,o=this.morphNormals[t].vertexNormals;for(let s=0,a=this.faces.length;s<a;s++){const l=new W,c={a:new W,b:new W,c:new W};i.push(l),o.push(c)}}const r=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let i=0,o=this.faces.length;i<o;i++){const s=this.faces[i],a=r.faceNormals[i],l=r.vertexNormals[i];a.copy(s.normal),l.a.copy(s.vertexNormals[0]),l.b.copy(s.vertexNormals[1]),l.c.copy(s.vertexNormals[2])}}for(let t=0,n=this.faces.length;t<n;t++){const r=this.faces[t];r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new zn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Dc),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let r,i=this.vertices.length,o=this.vertices,s=e.vertices,a=this.faces,l=e.faces,c=this.colors,u=e.colors;n===void 0&&(n=0),t!==void 0&&(r=new Si().getNormalMatrix(t));for(let d=0,f=s.length;d<f;d++){const p=s[d].clone();t!==void 0&&p.applyMatrix4(t),o.push(p)}for(let d=0,f=u.length;d<f;d++)c.push(u[d].clone());for(let d=0,f=l.length;d<f;d++){let h=l[d],p,g,v,m=h.vertexNormals,y=h.vertexColors;p=new Ef(h.a+i,h.b+i,h.c+i),p.normal.copy(h.normal),r!==void 0&&p.normal.applyMatrix3(r).normalize();for(let b=0,_=m.length;b<_;b++)g=m[b].clone(),r!==void 0&&g.applyMatrix3(r).normalize(),p.vertexNormals.push(g);p.color.copy(h.color);for(let b=0,_=y.length;b<_;b++)v=y[b],p.vertexColors.push(v.clone());p.materialIndex=h.materialIndex+n,a.push(p)}for(let d=0,f=e.faceVertexUvs.length;d<f;d++){const h=e.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(let p=0,g=h.length;p<g;p++){const v=h[p],m=[];for(let y=0,b=v.length;y<b;y++)m.push(v[y].clone());this.faceVertexUvs[d].push(m)}}},mergeMesh:function(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){const e={},t=[],n=[],i=Math.pow(10,4);for(let a=0,l=this.vertices.length;a<l;a++){const c=this.vertices[a],u=Math.round(c.x*i)+"_"+Math.round(c.y*i)+"_"+Math.round(c.z*i);e[u]===void 0?(e[u]=a,t.push(this.vertices[a]),n[a]=t.length-1):n[a]=n[e[u]]}const o=[];for(let a=0,l=this.faces.length;a<l;a++){const c=this.faces[a];c.a=n[c.a],c.b=n[c.b],c.c=n[c.c];const u=[c.a,c.b,c.c];for(let d=0;d<3;d++)if(u[d]===u[(d+1)%3]){o.push(a);break}}for(let a=o.length-1;a>=0;a--){const l=o[a];this.faces.splice(l,1);for(let c=0,u=this.faceVertexUvs.length;c<u;c++)this.faceVertexUvs[c].splice(l,1)}const s=this.vertices.length-t.length;return this.vertices=t,s},setFromPoints:function(e){this.vertices=[];for(let t=0,n=e.length;t<n;t++){const r=e[t];this.vertices.push(new W(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){const e=this.faces,t=e.length;for(let a=0;a<t;a++)e[a]._id=a;function n(a,l){return a.materialIndex-l.materialIndex}e.sort(n);const r=this.faceVertexUvs[0],i=this.faceVertexUvs[1];let o,s;r&&r.length===t&&(o=[]),i&&i.length===t&&(s=[]);for(let a=0;a<t;a++){const l=e[a]._id;o&&o.push(r[l]),s&&s.push(i[l])}o&&(this.faceVertexUvs[0]=o),s&&(this.faceVertexUvs[1]=s)},toJSON:function(){const e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){const h=this.parameters;for(const p in h)h[p]!==void 0&&(e[p]=h[p]);return e}const t=[];for(let h=0;h<this.vertices.length;h++){const p=this.vertices[h];t.push(p.x,p.y,p.z)}const n=[],r=[],i={},o=[],s={},a=[],l={};for(let h=0;h<this.faces.length;h++){const p=this.faces[h],g=!0,v=!1,m=this.faceVertexUvs[0][h]!==void 0,y=p.normal.length()>0,b=p.vertexNormals.length>0,_=p.color.r!==1||p.color.g!==1||p.color.b!==1,x=p.vertexColors.length>0;let w=0;if(w=c(w,0,0),w=c(w,1,g),w=c(w,2,v),w=c(w,3,m),w=c(w,4,y),w=c(w,5,b),w=c(w,6,_),w=c(w,7,x),n.push(w),n.push(p.a,p.b,p.c),n.push(p.materialIndex),m){const S=this.faceVertexUvs[0][h];n.push(f(S[0]),f(S[1]),f(S[2]))}if(y&&n.push(u(p.normal)),b){const S=p.vertexNormals;n.push(u(S[0]),u(S[1]),u(S[2]))}if(_&&n.push(d(p.color)),x){const S=p.vertexColors;n.push(d(S[0]),d(S[1]),d(S[2]))}}function c(h,p,g){return g?h|1<<p:h&~(1<<p)}function u(h){const p=h.x.toString()+h.y.toString()+h.z.toString();return i[p]!==void 0||(i[p]=r.length/3,r.push(h.x,h.y,h.z)),i[p]}function d(h){const p=h.r.toString()+h.g.toString()+h.b.toString();return s[p]!==void 0||(s[p]=o.length,o.push(h.getHex())),s[p]}function f(h){const p=h.x.toString()+h.y.toString();return l[p]!==void 0||(l[p]=a.length/2,a.push(h.x,h.y)),l[p]}return e.data={},e.data.vertices=t,e.data.normals=r,o.length>0&&(e.data.colors=o),a.length>0&&(e.data.uvs=[a]),e.data.faces=n,e},clone:function(){return new Ft().copy(this)},copy:function(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;const t=e.vertices;for(let d=0,f=t.length;d<f;d++)this.vertices.push(t[d].clone());const n=e.colors;for(let d=0,f=n.length;d<f;d++)this.colors.push(n[d].clone());const r=e.faces;for(let d=0,f=r.length;d<f;d++)this.faces.push(r[d].clone());for(let d=0,f=e.faceVertexUvs.length;d<f;d++){const h=e.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(let p=0,g=h.length;p<g;p++){const v=h[p],m=[];for(let y=0,b=v.length;y<b;y++){const _=v[y];m.push(_.clone())}this.faceVertexUvs[d].push(m)}}const i=e.morphTargets;for(let d=0,f=i.length;d<f;d++){const h={};if(h.name=i[d].name,i[d].vertices!==void 0){h.vertices=[];for(let p=0,g=i[d].vertices.length;p<g;p++)h.vertices.push(i[d].vertices[p].clone())}if(i[d].normals!==void 0){h.normals=[];for(let p=0,g=i[d].normals.length;p<g;p++)h.normals.push(i[d].normals[p].clone())}this.morphTargets.push(h)}const o=e.morphNormals;for(let d=0,f=o.length;d<f;d++){const h={};if(o[d].vertexNormals!==void 0){h.vertexNormals=[];for(let p=0,g=o[d].vertexNormals.length;p<g;p++){const v=o[d].vertexNormals[p],m={};m.a=v.a.clone(),m.b=v.b.clone(),m.c=v.c.clone(),h.vertexNormals.push(m)}}if(o[d].faceNormals!==void 0){h.faceNormals=[];for(let p=0,g=o[d].faceNormals.length;p<g;p++)h.faceNormals.push(o[d].faceNormals[p].clone())}this.morphNormals.push(h)}const s=e.skinWeights;for(let d=0,f=s.length;d<f;d++)this.skinWeights.push(s[d].clone());const a=e.skinIndices;for(let d=0,f=a.length;d<f;d++)this.skinIndices.push(a[d].clone());const l=e.lineDistances;for(let d=0,f=l.length;d<f;d++)this.lineDistances.push(l[d]);const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class NJe extends Ft{constructor(t,n,r,i,o,s){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:s},this.fromBufferGeometry(new wx(t,n,r,i,o,s)),this.mergeVertices()}}class wx extends wt{constructor(t,n,r,i,o,s){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;t=t||1,n=n||1,r=r||1,i=Math.floor(i)||1,o=Math.floor(o)||1,s=Math.floor(s)||1;const l=[],c=[],u=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,r,n,t,s,o,0),p("z","y","x",1,-1,r,n,-t,s,o,1),p("x","z","y",1,1,t,r,n,i,s,2),p("x","z","y",1,-1,t,r,-n,i,s,3),p("x","y","z",1,-1,t,n,r,i,o,4),p("x","y","z",-1,-1,t,n,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new St(c,3)),this.setAttribute("normal",new St(u,3)),this.setAttribute("uv",new St(d,2));function p(g,v,m,y,b,_,x,w,S,C,A){const T=_/S,O=x/C,R=_/2,L=x/2,D=w/2,$=S+1,z=C+1;let H=0,B=0;const V=new W;for(let J=0;J<z;J++){const K=J*O-L;for(let ie=0;ie<$;ie++){const ce=ie*T-R;V[g]=ce*y,V[v]=K*b,V[m]=D,c.push(V.x,V.y,V.z),V[g]=0,V[v]=0,V[m]=w>0?1:-1,u.push(V.x,V.y,V.z),d.push(ie/S),d.push(1-J/C),H+=1}}for(let J=0;J<C;J++)for(let K=0;K<S;K++){const ie=f+K+$*J,ce=f+K+$*(J+1),pe=f+(K+1)+$*(J+1),se=f+(K+1)+$*J;l.push(ie,ce,se),l.push(ce,pe,se),B+=6}a.addGroup(h,B,A),h+=B,f+=H}}}function fg(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Ri(e){const t={};for(let n=0;n<e.length;n++){const r=fg(e[n]);for(const i in r)t[i]=r[i]}return t}const xS={clone:fg,merge:Ri};var FJe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,zJe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function ri(e){Gt.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=FJe,this.fragmentShader=zJe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}ri.prototype=Object.create(Gt.prototype);ri.prototype.constructor=ri;ri.prototype.isShaderMaterial=!0;ri.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fg(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this};ri.prototype.toJSON=function(e){const t=Gt.prototype.toJSON.call(this,e);t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t};function vc(){_t.call(this),this.type="Camera",this.matrixWorldInverse=new lt,this.projectionMatrix=new lt,this.projectionMatrixInverse=new lt}vc.prototype=Object.assign(Object.create(_t.prototype),{constructor:vc,isCamera:!0,copy:function(e,t){return _t.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new W),this.updateMatrixWorld(!0);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){_t.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){_t.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function Ur(e,t,n,r){vc.call(this),this.type="PerspectiveCamera",this.fov=e!==void 0?e:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=r!==void 0?r:2e3,this.focus=10,this.aspect=t!==void 0?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Ur.prototype=Object.assign(Object.create(vc.prototype),{constructor:Ur,isPerspectiveCamera:!0,copy:function(e,t){return vc.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=Xt.RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(Xt.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return Xt.RAD2DEG*2*Math.atan(Math.tan(Xt.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){let e=this.near,t=e*Math.tan(Xt.DEG2RAD*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){const a=o.fullWidth,l=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/l,r*=o.width/a,n*=o.height/l}const s=this.filmOffset;s!==0&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=_t.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const sp=90,ap=1;function fb(e,t,n){if(_t.call(this),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const r=new Ur(sp,ap,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new W(1,0,0)),this.add(r);const i=new Ur(sp,ap,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new W(-1,0,0)),this.add(i);const o=new Ur(sp,ap,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new W(0,1,0)),this.add(o);const s=new Ur(sp,ap,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new W(0,-1,0)),this.add(s);const a=new Ur(sp,ap,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new W(0,0,1)),this.add(a);const l=new Ur(sp,ap,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new W(0,0,-1)),this.add(l),this.update=function(c,u){this.parent===null&&this.updateMatrixWorld();const d=c.xr.enabled,f=c.getRenderTarget();c.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,c.setRenderTarget(n,0),c.render(u,r),c.setRenderTarget(n,1),c.render(u,i),c.setRenderTarget(n,2),c.render(u,o),c.setRenderTarget(n,3),c.render(u,s),c.setRenderTarget(n,4),c.render(u,a),n.texture.generateMipmaps=h,c.setRenderTarget(n,5),c.render(u,l),c.setRenderTarget(f),c.xr.enabled=d},this.clear=function(c,u,d,f){const h=c.getRenderTarget();for(let p=0;p<6;p++)c.setRenderTarget(n,p),c.clear(u,d,f);c.setRenderTarget(h)}}fb.prototype=Object.create(_t.prototype);fb.prototype.constructor=fb;function hb(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),qi.call(this,e,e,t)}hb.prototype=Object.create(qi.prototype);hb.prototype.constructor=hb;hb.prototype.isWebGLCubeRenderTarget=!0;hb.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;const n=new dg,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","	vWorldDirection = transformDirection( position, modelMatrix );","	#include <begin_vertex>","	#include <project_vertex>","}"].join(`
`),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#include <common>","void main() {","	vec3 direction = normalize( vWorldDirection );","	vec2 sampleUV = equirectUv( direction );","	gl_FragColor = texture2D( tEquirect, sampleUV );","}"].join(`
`)},i=new ri({name:"CubemapFromEquirect",uniforms:fg(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Zr,blending:ac});i.uniforms.tEquirect.value=t;const o=new Gn(new wx(5,5,5),i);return n.add(o),new fb(1,10,this).update(e,n),o.geometry.dispose(),o.material.dispose(),this};function yc(e,t,n,r,i,o,s,a,l,c,u,d){Wn.call(this,null,o,s,a,l,c,r,i,u,d),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=l!==void 0?l:Nn,this.minFilter=c!==void 0?c:Nn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}yc.prototype=Object.create(Wn.prototype);yc.prototype.constructor=yc;yc.prototype.isDataTexture=!0;const lp=new Dc,V_=new W;function Sx(e,t,n,r,i,o){this.planes=[e!==void 0?e:new Ha,t!==void 0?t:new Ha,n!==void 0?n:new Ha,r!==void 0?r:new Ha,i!==void 0?i:new Ha,o!==void 0?o:new Ha]}Object.assign(Sx.prototype,{set:function(e,t,n,r,i,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromProjectionMatrix:function(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],s=n[3],a=n[4],l=n[5],c=n[6],u=n[7],d=n[8],f=n[9],h=n[10],p=n[11],g=n[12],v=n[13],m=n[14],y=n[15];return t[0].setComponents(s-r,u-a,p-d,y-g).normalize(),t[1].setComponents(s+r,u+a,p+d,y+g).normalize(),t[2].setComponents(s+i,u+l,p+f,y+v).normalize(),t[3].setComponents(s-i,u-l,p-f,y-v).normalize(),t[4].setComponents(s-o,u-c,p-h,y-m).normalize(),t[5].setComponents(s+o,u+c,p+h,y+m).normalize(),this},intersectsObject:function(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),lp.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(lp)},intersectsSprite:function(e){return lp.center.set(0,0,0),lp.radius=.7071067811865476,lp.applyMatrix4(e.matrixWorld),this.intersectsSphere(lp)},intersectsSphere:function(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:function(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(V_.x=r.normal.x>0?e.max.x:e.min.x,V_.y=r.normal.y>0?e.max.y:e.min.y,V_.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(V_)<0)return!1}return!0},containsPoint:function(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});const xt={common:{diffuse:{value:new ht(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Si},uv2Transform:{value:new Si},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new et(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ht(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ht(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Si}},sprite:{diffuse:{value:new ht(15658734)},opacity:{value:1},center:{value:new et(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Si}}};function Cne(){let e=null,t=!1,n=null,r=null;function i(o,s){n(o,s),r=e.requestAnimationFrame(i)}return{start:function(){t!==!0&&n!==null&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(o){n=o},setContext:function(o){e=o}}}function jJe(e,t){const n=t.isWebGL2,r=new WeakMap;function i(c,u){const d=c.array,f=c.usage,h=e.createBuffer();e.bindBuffer(u,h),e.bufferData(u,d,f),c.onUploadCallback();let p=5126;return d instanceof Float32Array?p=5126:d instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):d instanceof Uint16Array?p=5123:d instanceof Int16Array?p=5122:d instanceof Uint32Array?p=5125:d instanceof Int32Array?p=5124:d instanceof Int8Array?p=5120:d instanceof Uint8Array&&(p=5121),{buffer:h,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function o(c,u,d){const f=u.array,h=u.updateRange;e.bindBuffer(d,c),h.count===-1?e.bufferSubData(d,0,f):(n?e.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):e.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1)}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),r.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=r.get(c);u&&(e.deleteBuffer(u.buffer),r.delete(c))}function l(c,u){c.isInterleavedBufferAttribute&&(c=c.data);const d=r.get(c);d===void 0?r.set(c,i(c,u)):d.version<c.version&&(o(d.buffer,c,u),d.version=c.version)}return{get:s,remove:a,update:l}}function pb(e,t,n,r){Ft.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new hg(e,t,n,r)),this.mergeVertices()}pb.prototype=Object.create(Ft.prototype);pb.prototype.constructor=pb;function hg(e,t,n,r){wt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},e=e||1,t=t||1;const i=e/2,o=t/2,s=Math.floor(n)||1,a=Math.floor(r)||1,l=s+1,c=a+1,u=e/s,d=t/a,f=[],h=[],p=[],g=[];for(let v=0;v<c;v++){const m=v*d-o;for(let y=0;y<l;y++){const b=y*u-i;h.push(b,-m,0),p.push(0,0,1),g.push(y/s),g.push(1-v/a)}}for(let v=0;v<a;v++)for(let m=0;m<s;m++){const y=m+l*v,b=m+l*(v+1),_=m+1+l*(v+1),x=m+1+l*v;f.push(y,b,x),f.push(b,_,x)}this.setIndex(f),this.setAttribute("position",new St(h,3)),this.setAttribute("normal",new St(p,3)),this.setAttribute("uv",new St(g,2))}hg.prototype=Object.create(wt.prototype);hg.prototype.constructor=hg;var UJe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,VJe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,HJe=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,GJe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,WJe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,qJe="vec3 transformed = vec3( position );",YJe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,XJe=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE  = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS  = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha  = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,KJe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ZJe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,JJe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,QJe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,eQe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,tQe=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,nQe=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,rQe=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,iQe=`#ifdef USE_COLOR
	vColor.xyz = color.xyz;
#endif`,oQe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
  return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,sQe=`#ifdef ENVMAP_TYPE_CUBE_UV
#define cubeUV_maxMipLevel 8.0
#define cubeUV_minMipLevel 4.0
#define cubeUV_maxTileSize 256.0
#define cubeUV_minTileSize 16.0
float getFace(vec3 direction) {
    vec3 absDirection = abs(direction);
    float face = -1.0;
    if (absDirection.x > absDirection.z) {
      if (absDirection.x > absDirection.y)
        face = direction.x > 0.0 ? 0.0 : 3.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    } else {
      if (absDirection.z > absDirection.y)
        face = direction.z > 0.0 ? 2.0 : 5.0;
      else
        face = direction.y > 0.0 ? 1.0 : 4.0;
    }
    return face;
}
vec2 getUV(vec3 direction, float face) {
    vec2 uv;
    if (face == 0.0) {
      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {
      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {
      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {
      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {
      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {
      uv = vec2(direction.x, direction.y) / abs(direction.z);    }
    return 0.5 * (uv + 1.0);
}
vec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
  float face = getFace(direction);
  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
  mipInt = max(mipInt, cubeUV_minMipLevel);
  float faceSize = exp2(mipInt);
  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
  vec2 uv = getUV(direction, face) * (faceSize - 1.0);
  vec2 f = fract(uv);
  uv += 0.5 - f;
  if (face > 2.0) {
    uv.y += faceSize;
    face -= 3.0;
  }
  uv.x += face * faceSize;
  if(mipInt < cubeUV_maxMipLevel){
    uv.y += 2.0 * cubeUV_maxTileSize;
  }
  uv.y += filterInt * 2.0 * cubeUV_minTileSize;
  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
  uv *= texelSize;
  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x += texelSize;
  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.y += texelSize;
  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  uv.x -= texelSize;
  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
  vec3 tm = mix(tl, tr, f.x);
  vec3 bm = mix(bl, br, f.x);
  return mix(tm, bm, f.y);
}
#define r0 1.0
#define v0 0.339
#define m0 -2.0
#define r1 0.8
#define v1 0.276
#define m1 -1.0
#define r4 0.4
#define v4 0.046
#define m4 2.0
#define r5 0.305
#define v5 0.016
#define m5 3.0
#define r6 0.21
#define v6 0.0038
#define m6 4.0
float roughnessToMip(float roughness) {
  float mip = 0.0;
  if (roughness >= r1) {
    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
  } else if (roughness >= r4) {
    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
  } else if (roughness >= r5) {
    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
  } else if (roughness >= r6) {
    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
  } else {
    mip = -2.0 * log2(1.16 * roughness);  }
  return mip;
}
vec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {
  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);
  float mipF = fract(mip);
  float mipInt = floor(mip);
  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);
  if (mipF == 0.0) {
    return vec4(color0, 1.0);
  } else {
    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);
    return vec4(mix(color0, color1, mipF), 1.0);
  }
}
#endif`,aQe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,lQe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,cQe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,uQe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,dQe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,fQe="gl_FragColor = linearToOutputTexel( gl_FragColor );",hQe=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value )  {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,pQe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		}  else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#elif defined( ENVMAP_TYPE_EQUIREC )
		reflectVec = normalize( reflectVec );
		vec2 sampleUV = equirectUv( reflectVec );
		vec4 envColor = texture2D( envMap, sampleUV );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,mQe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,gQe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,vQe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,yQe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) { 
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,bQe=`#ifdef USE_FOG
	fogDepth = -mvPosition.z;
#endif`,xQe=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,_Qe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,wQe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,SQe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,CQe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,AQe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,PQe=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,MQe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,EQe=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
		  vec3 reflectVec = reflect( -viewDir, normal );
		  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
		  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#elif defined( ENVMAP_TYPE_EQUIREC )
			vec2 sampleUV = equirectUv( reflectVec );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
			#else
				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,TQe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,OQe=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3	diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,IQe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,RQe=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3	diffuseColor;
	vec3	specularColor;
	float	specularShininess;
	float	specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,kQe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,LQe=`struct PhysicalMaterial {
	vec3	diffuseColor;
	float	specularRoughness;
	vec3	specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,$Qe=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,DQe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,BQe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,NQe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,FQe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,zQe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,jQe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,UQe=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,VQe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,HQe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,GQe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,WQe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,qQe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,YQe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,XQe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
	uniform float morphTargetInfluences[ 8 ];
	#else
	uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,KQe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
	transformed += morphTarget4 * morphTargetInfluences[ 4 ];
	transformed += morphTarget5 * morphTargetInfluences[ 5 ];
	transformed += morphTarget6 * morphTargetInfluences[ 6 ];
	transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,ZQe=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,JQe=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,QQe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,eet=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,tet=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,net=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,ret=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,iet=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,oet=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,set=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,aet=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,cet=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,uet=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,det=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,fet=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,het=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,pet=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,met=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,get=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,vet=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,yet=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bet=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,xet=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,_et=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,wet=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Cet=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Aet=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Pet=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Met=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Eet=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Tet=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Oet=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Iet=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Ret=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ket=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Let=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$et=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Det=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Bet=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Net=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Fet=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,zet=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,jet=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Uet=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Vet=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Het=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Get=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wet=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qet=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Yet=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Xet=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ket=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Zet=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jet=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qet=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSPARENCY
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSPARENCY
	uniform float transparency;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSPARENCY
		diffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ett=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ttt=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,ntt=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,rtt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,itt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ott=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,stt=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,att=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ltt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const tn={alphamap_fragment:UJe,alphamap_pars_fragment:VJe,alphatest_fragment:HJe,aomap_fragment:GJe,aomap_pars_fragment:WJe,begin_vertex:qJe,beginnormal_vertex:YJe,bsdfs:XJe,bumpmap_pars_fragment:KJe,clipping_planes_fragment:ZJe,clipping_planes_pars_fragment:JJe,clipping_planes_pars_vertex:QJe,clipping_planes_vertex:eQe,color_fragment:tQe,color_pars_fragment:nQe,color_pars_vertex:rQe,color_vertex:iQe,common:oQe,cube_uv_reflection_fragment:sQe,defaultnormal_vertex:aQe,displacementmap_pars_vertex:lQe,displacementmap_vertex:cQe,emissivemap_fragment:uQe,emissivemap_pars_fragment:dQe,encodings_fragment:fQe,encodings_pars_fragment:hQe,envmap_fragment:pQe,envmap_common_pars_fragment:mQe,envmap_pars_fragment:gQe,envmap_pars_vertex:vQe,envmap_physical_pars_fragment:EQe,envmap_vertex:yQe,fog_vertex:bQe,fog_pars_vertex:xQe,fog_fragment:_Qe,fog_pars_fragment:wQe,gradientmap_pars_fragment:SQe,lightmap_fragment:CQe,lightmap_pars_fragment:AQe,lights_lambert_vertex:PQe,lights_pars_begin:MQe,lights_toon_fragment:TQe,lights_toon_pars_fragment:OQe,lights_phong_fragment:IQe,lights_phong_pars_fragment:RQe,lights_physical_fragment:kQe,lights_physical_pars_fragment:LQe,lights_fragment_begin:$Qe,lights_fragment_maps:DQe,lights_fragment_end:BQe,logdepthbuf_fragment:NQe,logdepthbuf_pars_fragment:FQe,logdepthbuf_pars_vertex:zQe,logdepthbuf_vertex:jQe,map_fragment:UQe,map_pars_fragment:VQe,map_particle_fragment:HQe,map_particle_pars_fragment:GQe,metalnessmap_fragment:WQe,metalnessmap_pars_fragment:qQe,morphnormal_vertex:YQe,morphtarget_pars_vertex:XQe,morphtarget_vertex:KQe,normal_fragment_begin:ZQe,normal_fragment_maps:JQe,normalmap_pars_fragment:QQe,clearcoat_normal_fragment_begin:eet,clearcoat_normal_fragment_maps:tet,clearcoat_pars_fragment:net,packing:ret,premultiplied_alpha_fragment:iet,project_vertex:oet,dithering_fragment:set,dithering_pars_fragment:aet,roughnessmap_fragment:cet,roughnessmap_pars_fragment:uet,shadowmap_pars_fragment:det,shadowmap_pars_vertex:fet,shadowmap_vertex:het,shadowmask_pars_fragment:pet,skinbase_vertex:met,skinning_pars_vertex:get,skinning_vertex:vet,skinnormal_vertex:yet,specularmap_fragment:bet,specularmap_pars_fragment:xet,tonemapping_fragment:_et,tonemapping_pars_fragment:wet,uv_pars_fragment:Cet,uv_pars_vertex:Aet,uv_vertex:Pet,uv2_pars_fragment:Met,uv2_pars_vertex:Eet,uv2_vertex:Tet,worldpos_vertex:Oet,background_frag:Iet,background_vert:Ret,cube_frag:ket,cube_vert:Let,depth_frag:$et,depth_vert:Det,distanceRGBA_frag:Bet,distanceRGBA_vert:Net,equirect_frag:Fet,equirect_vert:zet,linedashed_frag:jet,linedashed_vert:Uet,meshbasic_frag:Vet,meshbasic_vert:Het,meshlambert_frag:Get,meshlambert_vert:Wet,meshmatcap_frag:qet,meshmatcap_vert:Yet,meshtoon_frag:Xet,meshtoon_vert:Ket,meshphong_frag:Zet,meshphong_vert:Jet,meshphysical_frag:Qet,meshphysical_vert:ett,normal_frag:ttt,normal_vert:ntt,points_frag:rtt,points_vert:itt,shadow_frag:ott,shadow_vert:stt,sprite_frag:att,sprite_vert:ltt},Wl={basic:{uniforms:Ri([xt.common,xt.specularmap,xt.envmap,xt.aomap,xt.lightmap,xt.fog]),vertexShader:tn.meshbasic_vert,fragmentShader:tn.meshbasic_frag},lambert:{uniforms:Ri([xt.common,xt.specularmap,xt.envmap,xt.aomap,xt.lightmap,xt.emissivemap,xt.fog,xt.lights,{emissive:{value:new ht(0)}}]),vertexShader:tn.meshlambert_vert,fragmentShader:tn.meshlambert_frag},phong:{uniforms:Ri([xt.common,xt.specularmap,xt.envmap,xt.aomap,xt.lightmap,xt.emissivemap,xt.bumpmap,xt.normalmap,xt.displacementmap,xt.fog,xt.lights,{emissive:{value:new ht(0)},specular:{value:new ht(1118481)},shininess:{value:30}}]),vertexShader:tn.meshphong_vert,fragmentShader:tn.meshphong_frag},standard:{uniforms:Ri([xt.common,xt.envmap,xt.aomap,xt.lightmap,xt.emissivemap,xt.bumpmap,xt.normalmap,xt.displacementmap,xt.roughnessmap,xt.metalnessmap,xt.fog,xt.lights,{emissive:{value:new ht(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag},toon:{uniforms:Ri([xt.common,xt.aomap,xt.lightmap,xt.emissivemap,xt.bumpmap,xt.normalmap,xt.displacementmap,xt.gradientmap,xt.fog,xt.lights,{emissive:{value:new ht(0)}}]),vertexShader:tn.meshtoon_vert,fragmentShader:tn.meshtoon_frag},matcap:{uniforms:Ri([xt.common,xt.bumpmap,xt.normalmap,xt.displacementmap,xt.fog,{matcap:{value:null}}]),vertexShader:tn.meshmatcap_vert,fragmentShader:tn.meshmatcap_frag},points:{uniforms:Ri([xt.points,xt.fog]),vertexShader:tn.points_vert,fragmentShader:tn.points_frag},dashed:{uniforms:Ri([xt.common,xt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tn.linedashed_vert,fragmentShader:tn.linedashed_frag},depth:{uniforms:Ri([xt.common,xt.displacementmap]),vertexShader:tn.depth_vert,fragmentShader:tn.depth_frag},normal:{uniforms:Ri([xt.common,xt.bumpmap,xt.normalmap,xt.displacementmap,{opacity:{value:1}}]),vertexShader:tn.normal_vert,fragmentShader:tn.normal_frag},sprite:{uniforms:Ri([xt.sprite,xt.fog]),vertexShader:tn.sprite_vert,fragmentShader:tn.sprite_frag},background:{uniforms:{uvTransform:{value:new Si},t2D:{value:null}},vertexShader:tn.background_vert,fragmentShader:tn.background_frag},cube:{uniforms:Ri([xt.envmap,{opacity:{value:1}}]),vertexShader:tn.cube_vert,fragmentShader:tn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tn.equirect_vert,fragmentShader:tn.equirect_frag},distanceRGBA:{uniforms:Ri([xt.common,xt.displacementmap,{referencePosition:{value:new W},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tn.distanceRGBA_vert,fragmentShader:tn.distanceRGBA_frag},shadow:{uniforms:Ri([xt.lights,xt.fog,{color:{value:new ht(0)},opacity:{value:1}}]),vertexShader:tn.shadow_vert,fragmentShader:tn.shadow_frag}};Wl.physical={uniforms:Ri([Wl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new et(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new ht(0)},transparency:{value:0}}]),vertexShader:tn.meshphysical_vert,fragmentShader:tn.meshphysical_frag};function ctt(e,t,n,r){const i=new ht(0);let o=0,s,a,l=null,c=0,u=null;function d(h,p,g,v){let m=p.isScene===!0?p.background:null;const y=e.xr,b=y.getSession&&y.getSession();if(b&&b.environmentBlendMode==="additive"&&(m=null),m===null?f(i,o):m&&m.isColor&&(f(m,1),v=!0),(e.autoClear||v)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLCubeRenderTarget||m.mapping===xx)){a===void 0&&(a=new Gn(new wx(1,1,1),new ri({name:"BackgroundCubeMaterial",uniforms:fg(Wl.cube.uniforms),vertexShader:Wl.cube.vertexShader,fragmentShader:Wl.cube.fragmentShader,side:Zr,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(x,w,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(a));const _=m.isWebGLCubeRenderTarget?m.texture:m;a.material.uniforms.envMap.value=_,a.material.uniforms.flipEnvMap.value=_.isCubeTexture?-1:1,(l!==m||c!==_.version||u!==e.toneMapping)&&(a.material.needsUpdate=!0,l=m,c=_.version,u=e.toneMapping),h.unshift(a,a.geometry,a.material,0,0,null)}else m&&m.isTexture&&(s===void 0&&(s=new Gn(new hg(2,2),new ri({name:"BackgroundMaterial",uniforms:fg(Wl.background.uniforms),vertexShader:Wl.background.vertexShader,fragmentShader:Wl.background.fragmentShader,side:dv,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(s)),s.material.uniforms.t2D.value=m,m.matrixAutoUpdate===!0&&m.updateMatrix(),s.material.uniforms.uvTransform.value.copy(m.matrix),(l!==m||c!==m.version||u!==e.toneMapping)&&(s.material.needsUpdate=!0,l=m,c=m.version,u=e.toneMapping),h.unshift(s,s.geometry,s.material,0,0,null))}function f(h,p){t.buffers.color.setClear(h.r,h.g,h.b,p,r)}return{getClearColor:function(){return i},setClearColor:function(h,p){i.set(h),o=p!==void 0?p:1,f(i,o)},getClearAlpha:function(){return o},setClearAlpha:function(h){o=h,f(i,o)},render:d}}function utt(e,t,n,r){const i=e.getParameter(34921),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||o!==null,a={},l=g(null);let c=l;function u(L,D,$,z,H){let B=!1;if(s){const V=p(z,$,D);c!==V&&(c=V,f(c.object)),B=v(z),B&&m(z)}else{const V=D.wireframe===!0;(c.geometry!==z.id||c.program!==$.id||c.wireframe!==V)&&(c.geometry=z.id,c.program=$.id,c.wireframe=V,B=!0)}L.isInstancedMesh===!0&&(B=!0),H!==null&&n.update(H,34963),B&&(S(L,D,$,z),H!==null&&e.bindBuffer(34963,n.get(H).buffer))}function d(){return r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()}function f(L){return r.isWebGL2?e.bindVertexArray(L):o.bindVertexArrayOES(L)}function h(L){return r.isWebGL2?e.deleteVertexArray(L):o.deleteVertexArrayOES(L)}function p(L,D,$){const z=$.wireframe===!0;let H=a[L.id];H===void 0&&(H={},a[L.id]=H);let B=H[D.id];B===void 0&&(B={},H[D.id]=B);let V=B[z];return V===void 0&&(V=g(d()),B[z]=V),V}function g(L){const D=[],$=[],z=[];for(let H=0;H<i;H++)D[H]=0,$[H]=0,z[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:$,attributeDivisors:z,object:L,attributes:{}}}function v(L){const D=c.attributes,$=L.attributes;if(Object.keys(D).length!==Object.keys($).length)return!0;for(const z in $){const H=D[z],B=$[z];if(H.attribute!==B||H.data!==B.data)return!0}return!1}function m(L){const D={},$=L.attributes;for(const z in $){const H=$[z],B={};B.attribute=H,H.data&&(B.data=H.data),D[z]=B}c.attributes=D}function y(){const L=c.newAttributes;for(let D=0,$=L.length;D<$;D++)L[D]=0}function b(L){_(L,0)}function _(L,D){const $=c.newAttributes,z=c.enabledAttributes,H=c.attributeDivisors;$[L]=1,z[L]===0&&(e.enableVertexAttribArray(L),z[L]=1),H[L]!==D&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,D),H[L]=D)}function x(){const L=c.newAttributes,D=c.enabledAttributes;for(let $=0,z=D.length;$<z;$++)D[$]!==L[$]&&(e.disableVertexAttribArray($),D[$]=0)}function w(L,D,$,z,H,B){r.isWebGL2===!0&&($===5124||$===5125)?e.vertexAttribIPointer(L,D,$,z,H,B):e.vertexAttribPointer(L,D,$,z,H,B)}function S(L,D,$,z){if(r.isWebGL2===!1&&(L.isInstancedMesh||z.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;y();const H=z.attributes,B=$.getAttributes(),V=D.defaultAttributeValues;for(const J in B){const K=B[J];if(K>=0){const ie=H[J];if(ie!==void 0){const ce=ie.normalized,pe=ie.itemSize,se=n.get(ie);if(se===void 0)continue;const G=se.buffer,he=se.type,Z=se.bytesPerElement;if(ie.isInterleavedBufferAttribute){const ae=ie.data,oe=ae.stride,te=ie.offset;ae&&ae.isInstancedInterleavedBuffer?(_(K,ae.meshPerAttribute),z._maxInstanceCount===void 0&&(z._maxInstanceCount=ae.meshPerAttribute*ae.count)):b(K),e.bindBuffer(34962,G),w(K,pe,he,ce,oe*Z,te*Z)}else ie.isInstancedBufferAttribute?(_(K,ie.meshPerAttribute),z._maxInstanceCount===void 0&&(z._maxInstanceCount=ie.meshPerAttribute*ie.count)):b(K),e.bindBuffer(34962,G),w(K,pe,he,ce,0,0)}else if(J==="instanceMatrix"){const ce=n.get(L.instanceMatrix);if(ce===void 0)continue;const pe=ce.buffer,se=ce.type;_(K+0,1),_(K+1,1),_(K+2,1),_(K+3,1),e.bindBuffer(34962,pe),e.vertexAttribPointer(K+0,4,se,!1,64,0),e.vertexAttribPointer(K+1,4,se,!1,64,16),e.vertexAttribPointer(K+2,4,se,!1,64,32),e.vertexAttribPointer(K+3,4,se,!1,64,48)}else if(V!==void 0){const ce=V[J];if(ce!==void 0)switch(ce.length){case 2:e.vertexAttrib2fv(K,ce);break;case 3:e.vertexAttrib3fv(K,ce);break;case 4:e.vertexAttrib4fv(K,ce);break;default:e.vertexAttrib1fv(K,ce)}}}}x()}function C(){O();for(const L in a){const D=a[L];for(const $ in D){const z=D[$];for(const H in z)h(z[H].object),delete z[H];delete D[$]}delete a[L]}}function A(L){if(a[L.id]===void 0)return;const D=a[L.id];for(const $ in D){const z=D[$];for(const H in z)h(z[H].object),delete z[H];delete D[$]}delete a[L.id]}function T(L){for(const D in a){const $=a[D];if($[L.id]===void 0)continue;const z=$[L.id];for(const H in z)h(z[H].object),delete z[H];delete $[L.id]}}function O(){R(),c!==l&&(c=l,f(c.object))}function R(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:O,resetDefaultState:R,dispose:C,releaseStatesOfGeometry:A,releaseStatesOfProgram:T,initAttributes:y,enableAttribute:b,disableUnusedAttributes:x}}function dtt(e,t,n,r){const i=r.isWebGL2;let o;function s(c){o=c}function a(c,u){e.drawArrays(o,c,u),n.update(u,o)}function l(c,u,d,f){if(f===0)return;let h,p;if(i)h=e,p="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[p](o,u,d,f),n.update(d,o,f)}this.setMode=s,this.render=a,this.renderInstances=l}function ftt(e,t,n){let r;function i(){if(r!==void 0)return r;const w=t.get("EXT_texture_filter_anisotropic");return w!==null?r=e.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT):r=0,r}function o(w){if(w==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";w="mediump"}return w==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&e instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=n.logarithmicDepthBuffer===!0,u=e.getParameter(34930),d=e.getParameter(35660),f=e.getParameter(3379),h=e.getParameter(34076),p=e.getParameter(34921),g=e.getParameter(36347),v=e.getParameter(36348),m=e.getParameter(36349),y=d>0,b=s||!!t.get("OES_texture_float"),_=y&&b,x=s?e.getParameter(36183):0;return{isWebGL2:s,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:h,maxAttributes:p,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:m,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:_,maxSamples:x}}function htt(){const e=this;let t=null,n=0,r=!1,i=!1;const o=new Ha,s=new Si,a={value:null,needsUpdate:!1};this.uniform=a,this.numPlanes=0,this.numIntersection=0,this.init=function(u,d,f){const h=u.length!==0||d||n!==0||r;return r=d,t=c(u,f,0),n=u.length,h},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,l()},this.setState=function(u,d,f,h,p,g){if(!r||u===null||u.length===0||i&&!f)i?c(null):l();else{const v=i?0:n,m=v*4;let y=p.clippingState||null;a.value=y,y=c(u,h,m,g);for(let b=0;b!==m;++b)y[b]=t[b];p.clippingState=y,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=v}};function l(){a.value!==t&&(a.value=t,a.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(u,d,f,h){let p=u!==null?u.length:0,g=null;if(p!==0){if(g=a.value,h!==!0||g===null){const v=f+p*4,m=d.matrixWorldInverse;s.getNormalMatrix(m),(g===null||g.length<v)&&(g=new Float32Array(v));for(let y=0,b=f;y!==p;++y,b+=4)o.copy(u[y]).applyMatrix4(m,s),o.normal.toArray(g,b),g[b+3]=o.constant}a.value=g,a.needsUpdate=!0}return e.numPlanes=p,e.numIntersection=0,g}}function ptt(e){const t={};return{get:function(n){if(t[n]!==void 0)return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function mtt(e,t,n,r){const i=new WeakMap,o=new WeakMap;function s(d){const f=d.target,h=i.get(f);h.index!==null&&t.remove(h.index);for(const g in h.attributes)t.remove(h.attributes[g]);f.removeEventListener("dispose",s),i.delete(f);const p=o.get(h);p&&(t.remove(p),o.delete(h)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(d,f){let h=i.get(f);return h||(f.addEventListener("dispose",s),f.isBufferGeometry?h=f:f.isGeometry&&(f._bufferGeometry===void 0&&(f._bufferGeometry=new wt().setFromObject(d)),h=f._bufferGeometry),i.set(f,h),n.memory.geometries++,h)}function l(d){const f=d.attributes;for(const p in f)t.update(f[p],34962);const h=d.morphAttributes;for(const p in h){const g=h[p];for(let v=0,m=g.length;v<m;v++)t.update(g[v],34962)}}function c(d){const f=[],h=d.index,p=d.attributes.position;let g=0;if(h!==null){const y=h.array;g=h.version;for(let b=0,_=y.length;b<_;b+=3){const x=y[b+0],w=y[b+1],S=y[b+2];f.push(x,w,w,S,S,x)}}else{const y=p.array;g=p.version;for(let b=0,_=y.length/3-1;b<_;b+=3){const x=b+0,w=b+1,S=b+2;f.push(x,w,w,S,S,x)}}const v=new(wne(f)>65535?db:ub)(f,1);v.version=g;const m=o.get(d);m&&t.remove(m),o.set(d,v)}function u(d){const f=o.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&c(d)}else c(d);return o.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function gtt(e,t,n,r){const i=r.isWebGL2;let o;function s(f){o=f}let a,l;function c(f){a=f.type,l=f.bytesPerElement}function u(f,h){e.drawElements(o,h,a,f*l),n.update(h,o)}function d(f,h,p,g){if(g===0)return;let v,m;if(i)v=e,m="drawElementsInstanced";else if(v=t.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[m](o,p,a,h*l,g),n.update(p,o,g)}this.setMode=s,this.setIndex=c,this.render=u,this.renderInstances=d}function vtt(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(a=a||1,n.calls++,s){case 4:n.triangles+=a*(o/3);break;case 1:n.lines+=a*(o/2);break;case 3:n.lines+=a*(o-1);break;case 2:n.lines+=a*o;break;case 0:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:i,update:r}}function ytt(e,t){return e[0]-t[0]}function btt(e,t){return Math.abs(t[1])-Math.abs(e[1])}function xtt(e){const t={},n=new Float32Array(8),r=[];for(let o=0;o<8;o++)r[o]=[o,0];function i(o,s,a,l){const c=o.morphTargetInfluences,u=c===void 0?0:c.length;let d=t[s.id];if(d===void 0){d=[];for(let v=0;v<u;v++)d[v]=[v,0];t[s.id]=d}for(let v=0;v<u;v++){const m=d[v];m[0]=v,m[1]=c[v]}d.sort(btt);for(let v=0;v<8;v++)v<u&&d[v][1]?(r[v][0]=d[v][0],r[v][1]=d[v][1]):(r[v][0]=Number.MAX_SAFE_INTEGER,r[v][1]=0);r.sort(ytt);const f=a.morphTargets&&s.morphAttributes.position,h=a.morphNormals&&s.morphAttributes.normal;let p=0;for(let v=0;v<8;v++){const m=r[v],y=m[0],b=m[1];y!==Number.MAX_SAFE_INTEGER&&b?(f&&s.getAttribute("morphTarget"+v)!==f[y]&&s.setAttribute("morphTarget"+v,f[y]),h&&s.getAttribute("morphNormal"+v)!==h[y]&&s.setAttribute("morphNormal"+v,h[y]),n[v]=b,p+=b):(f&&s.getAttribute("morphTarget"+v)!==void 0&&s.deleteAttribute("morphTarget"+v),h&&s.getAttribute("morphNormal"+v)!==void 0&&s.deleteAttribute("morphNormal"+v),n[v]=0)}const g=s.morphTargetsRelative?1:1-p;l.getUniforms().setValue(e,"morphTargetBaseInfluence",g),l.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:i}}function _tt(e,t,n,r){let i=new WeakMap;function o(a){const l=r.render.frame,c=a.geometry,u=t.get(a,c);return i.get(u)!==l&&(c.isGeometry&&u.updateFromObject(a),t.update(u),i.set(u,l)),a.isInstancedMesh&&n.update(a.instanceMatrix,34962),u}function s(){i=new WeakMap}return{update:o,dispose:s}}function Wu(e,t,n,r,i,o,s,a,l,c){e=e!==void 0?e:[],t=t!==void 0?t:FD,s=s!==void 0?s:Mf,Wn.call(this,e,t,n,r,i,o,s,a,l,c),this.flipY=!1}Wu.prototype=Object.create(Wn.prototype);Wu.prototype.constructor=Wu;Wu.prototype.isCubeTexture=!0;Object.defineProperty(Wu.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});function mb(e,t,n,r){Wn.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=Nn,this.minFilter=Nn,this.wrapR=po,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}mb.prototype=Object.create(Wn.prototype);mb.prototype.constructor=mb;mb.prototype.isDataTexture2DArray=!0;function gb(e,t,n,r){Wn.call(this,null),this.image={data:e||null,width:t||1,height:n||1,depth:r||1},this.magFilter=Nn,this.minFilter=Nn,this.wrapR=po,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}gb.prototype=Object.create(Wn.prototype);gb.prototype.constructor=gb;gb.prototype.isDataTexture3D=!0;const Ane=new Wn,wtt=new mb,Stt=new gb,Pne=new Wu,_U=[],wU=[],SU=new Float32Array(16),CU=new Float32Array(9),AU=new Float32Array(4);function pv(e,t,n){const r=e[0];if(r<=0||r>0)return e;let i=t*n,o=_U[i];if(o===void 0&&(o=new Float32Array(i),_U[i]=o),t!==0){r.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=n,e[s].toArray(o,a)}return o}function Ns(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Jo(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Mne(e,t){let n=wU[t];n===void 0&&(n=new Int32Array(t),wU[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ctt(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Att(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ns(n,t))return;e.uniform2fv(this.addr,t),Jo(n,t)}}function Ptt(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ns(n,t))return;e.uniform3fv(this.addr,t),Jo(n,t)}}function Mtt(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ns(n,t))return;e.uniform4fv(this.addr,t),Jo(n,t)}}function Ett(e,t){const n=this.cache,r=t.elements;if(r===void 0){if(Ns(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Jo(n,t)}else{if(Ns(n,r))return;AU.set(r),e.uniformMatrix2fv(this.addr,!1,AU),Jo(n,r)}}function Ttt(e,t){const n=this.cache,r=t.elements;if(r===void 0){if(Ns(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Jo(n,t)}else{if(Ns(n,r))return;CU.set(r),e.uniformMatrix3fv(this.addr,!1,CU),Jo(n,r)}}function Ott(e,t){const n=this.cache,r=t.elements;if(r===void 0){if(Ns(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Jo(n,t)}else{if(Ns(n,r))return;SU.set(r),e.uniformMatrix4fv(this.addr,!1,SU),Jo(n,r)}}function Itt(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Ane,i)}function Rtt(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||wtt,i)}function ktt(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Stt,i)}function Ltt(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Pne,i)}function $tt(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Dtt(e,t){const n=this.cache;Ns(n,t)||(e.uniform2iv(this.addr,t),Jo(n,t))}function Btt(e,t){const n=this.cache;Ns(n,t)||(e.uniform3iv(this.addr,t),Jo(n,t))}function Ntt(e,t){const n=this.cache;Ns(n,t)||(e.uniform4iv(this.addr,t),Jo(n,t))}function Ftt(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function ztt(e){switch(e){case 5126:return Ctt;case 35664:return Att;case 35665:return Ptt;case 35666:return Mtt;case 35674:return Ett;case 35675:return Ttt;case 35676:return Ott;case 5124:case 35670:return $tt;case 35667:case 35671:return Dtt;case 35668:case 35672:return Btt;case 35669:case 35673:return Ntt;case 5125:return Ftt;case 35678:case 36198:case 36298:case 36306:case 35682:return Itt;case 35679:case 36299:case 36307:return ktt;case 35680:case 36300:case 36308:case 36293:return Ltt;case 36289:case 36303:case 36311:case 36292:return Rtt}}function jtt(e,t){e.uniform1fv(this.addr,t)}function Utt(e,t){e.uniform1iv(this.addr,t)}function Vtt(e,t){e.uniform2iv(this.addr,t)}function Htt(e,t){e.uniform3iv(this.addr,t)}function Gtt(e,t){e.uniform4iv(this.addr,t)}function Wtt(e,t){const n=pv(t,this.size,2);e.uniform2fv(this.addr,n)}function qtt(e,t){const n=pv(t,this.size,3);e.uniform3fv(this.addr,n)}function Ytt(e,t){const n=pv(t,this.size,4);e.uniform4fv(this.addr,n)}function Xtt(e,t){const n=pv(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Ktt(e,t){const n=pv(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ztt(e,t){const n=pv(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Jtt(e,t,n){const r=t.length,i=Mne(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTexture2D(t[o]||Ane,i[o])}function Qtt(e,t,n){const r=t.length,i=Mne(n,r);e.uniform1iv(this.addr,i);for(let o=0;o!==r;++o)n.safeSetTextureCube(t[o]||Pne,i[o])}function ent(e){switch(e){case 5126:return jtt;case 35664:return Wtt;case 35665:return qtt;case 35666:return Ytt;case 35674:return Xtt;case 35675:return Ktt;case 35676:return Ztt;case 5124:case 35670:return Utt;case 35667:case 35671:return Vtt;case 35668:case 35672:return Htt;case 35669:case 35673:return Gtt;case 35678:case 36198:case 36298:case 36306:case 35682:return Jtt;case 35680:case 36300:case 36308:case 36293:return Qtt}}function tnt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=ztt(t.type)}function Ene(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=ent(t.type)}Ene.prototype.updateCache=function(e){let t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Jo(t,e)};function Tne(e){this.id=e,this.seq=[],this.map={}}Tne.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const s=r[i];s.setValue(e,t[s.id],n)}};const wO=/([\w\d_]+)(\])?(\[|\.)?/g;function PU(e,t){e.seq.push(t),e.map[t.id]=t}function nnt(e,t,n){const r=e.name,i=r.length;for(wO.lastIndex=0;;){const o=wO.exec(r),s=wO.lastIndex;let a=o[1],l=o[2]==="]",c=o[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===i){PU(n,c===void 0?new tnt(a,e,t):new Ene(a,e,t));break}else{let d=n.map[a];d===void 0&&(d=new Tne(a),PU(n,d)),n=d}}}function Ou(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const i=e.getActiveUniform(t,r),o=e.getUniformLocation(t,i.name);nnt(i,o,this)}}Ou.prototype.setValue=function(e,t,n,r){const i=this.map[t];i!==void 0&&i.setValue(e,n,r)};Ou.prototype.setOptional=function(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)};Ou.upload=function(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const s=t[i],a=n[s.id];a.needsUpdate!==!1&&s.setValue(e,a.value,r)}};Ou.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const o=e[r];o.id in t&&n.push(o)}return n};function MU(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let rnt=0;function int(e){const t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function One(e){switch(e){case Ni:return["Linear","( value )"];case _x:return["sRGB","( value )"];case GD:return["RGBE","( value )"];case vne:return["RGBM","( value, 7.0 )"];case yne:return["RGBM","( value, 16.0 )"];case bne:return["RGBD","( value, 256.0 )"];case HD:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case bJe:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function EU(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();if(r&&i==="")return"";const o=e.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+`
`+i+int(o)}function t0(e,t){const n=One(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function ont(e,t){const n=One(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function snt(e,t){let n;switch(t){case yZe:n="Linear";break;case bZe:n="Reinhard";break;case xZe:n="OptimizedCineon";break;case _Ze:n="ACESFilmic";break;case wZe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ant(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(F0).join(`
`)}function lnt(e){const t=[];for(const n in e){const r=e[n];r!==!1&&t.push("#define "+n+" "+r)}return t.join(`
`)}function cnt(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const s=e.getActiveAttrib(t,i).name;n[s]=e.getAttribLocation(t,s)}return n}function F0(e){return e!==""}function TU(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function OU(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const unt=/^[ \t]*#include +<([\w\d./]+)>/gm;function eL(e){return e.replace(unt,dnt)}function dnt(e,t){const n=tn[t];if(n===void 0)throw new Error("Can not resolve #include <"+t+">");return eL(n)}const fnt=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,hnt=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function IU(e){return e.replace(hnt,Ine).replace(fnt,pnt)}function pnt(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ine(e,t,n,r)}function Ine(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function RU(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function mnt(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===une?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===KKe?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===N0&&(t="SHADOWMAP_TYPE_VSM"),t}function gnt(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case FD:case zD:t="ENVMAP_TYPE_CUBE";break;case xx:case UD:t="ENVMAP_TYPE_CUBE_UV";break;case pne:case jD:t="ENVMAP_TYPE_EQUIREC";break}return t}function vnt(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case zD:case jD:t="ENVMAP_MODE_REFRACTION";break}return t}function ynt(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case EE:t="ENVMAP_BLENDING_MULTIPLY";break;case gZe:t="ENVMAP_BLENDING_MIX";break;case vZe:t="ENVMAP_BLENDING_ADD";break}return t}function bnt(e,t,n,r){const i=e.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=mnt(n),c=gnt(n),u=vnt(n),d=ynt(n),f=e.gammaFactor>0?e.gammaFactor:1,h=n.isWebGL2?"":ant(n),p=lnt(o),g=i.createProgram();let v,m;if(n.isRawShaderMaterial?(v=[p].filter(F0).join(`
`),v.length>0&&(v+=`
`),m=[h,p].filter(F0).join(`
`),m.length>0&&(m+=`
`)):(v=[RU(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(F0).join(`
`),m=[h,RU(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==gm?"#define TONE_MAPPING":"",n.toneMapping!==gm?tn.tonemapping_pars_fragment:"",n.toneMapping!==gm?snt("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",tn.encodings_pars_fragment,n.map?t0("mapTexelToLinear",n.mapEncoding):"",n.matcap?t0("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?t0("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?t0("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?t0("lightMapTexelToLinear",n.lightMapEncoding):"",ont("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(F0).join(`
`)),s=eL(s),s=TU(s,n),s=OU(s,n),a=eL(a),a=TU(a,n),a=OU(a,n),s=IU(s),a=IU(a),n.isWebGL2&&!n.isRawShaderMaterial){let C=!1;const A=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&s.match(A)!==null&&a.match(A)!==null&&(C=!0,s=s.replace(A,""),a=a.replace(A,"")),v=[`#version 300 es
`,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,m=[`#version 300 es
`,"#define varying in",C?"":"out highp vec4 pc_fragColor;",C?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m}const y=v+s,b=m+a,_=MU(i,35633,y),x=MU(i,35632,b);if(i.attachShader(g,_),i.attachShader(g,x),n.index0AttributeName!==void 0?i.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),e.debug.checkShaderErrors){const C=i.getProgramInfoLog(g).trim(),A=i.getShaderInfoLog(_).trim(),T=i.getShaderInfoLog(x).trim();let O=!0,R=!0;if(i.getProgramParameter(g,35714)===!1){O=!1;const L=EU(i,_,"vertex"),D=EU(i,x,"fragment");console.error("THREE.WebGLProgram: shader error: ",i.getError(),"35715",i.getProgramParameter(g,35715),"gl.getProgramInfoLog",C,L,D)}else C!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):(A===""||T==="")&&(R=!1);R&&(this.diagnostics={runnable:O,programLog:C,vertexShader:{log:A,prefix:v},fragmentShader:{log:T,prefix:m}})}i.deleteShader(_),i.deleteShader(x);let w;this.getUniforms=function(){return w===void 0&&(w=new Ou(i,g)),w};let S;return this.getAttributes=function(){return S===void 0&&(S=cnt(i,g)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=rnt++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=_,this.fragmentShader=x,this}function xnt(e,t,n,r){const i=[],o=n.isWebGL2,s=n.logarithmicDepthBuffer,a=n.floatVertexTextures,l=n.maxVertexUniforms,c=n.vertexTextures;let u=n.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function h(_,x){let w;if(x){const S=Wl[x];w={name:_.name||_.type,uniforms:xS.clone(S.uniforms),vertexShader:S.vertexShader,fragmentShader:S.fragmentShader}}else w={name:_.name||_.type,uniforms:_.uniforms,vertexShader:_.vertexShader,fragmentShader:_.fragmentShader};return w}function p(_){const w=_.skeleton.bones;if(a)return 1024;{const C=Math.floor((l-20)/4),A=Math.min(C,w.length);return A<w.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+w.length+" bones. This GPU supports "+A+"."),0):A}}function g(_){let x;return _?_.isTexture?x=_.encoding:_.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),x=_.texture.encoding):x=Ni,x}function v(_,x,w,S,C,A,T){const O=S.fog,R=_.isMeshStandardMaterial?S.environment:null,L=_.envMap||R,D=d[_.type],$=T.isSkinnedMesh?p(T):0;_.precision!==null&&(u=n.getMaxPrecision(_.precision),u!==_.precision&&console.warn("THREE.WebGLProgram.getParameters:",_.precision,"not supported, using",u,"instead."));const z=h(_,D);_.onBeforeCompile(z,e);const H=e.getRenderTarget();return{isWebGL2:o,shaderID:D,shaderName:z.name,uniforms:z.uniforms,vertexShader:z.vertexShader,fragmentShader:z.fragmentShader,defines:_.defines,isRawShaderMaterial:_.isRawShaderMaterial,isShaderMaterial:_.isShaderMaterial,precision:u,instancing:T.isInstancedMesh===!0,supportsVertexTextures:c,outputEncoding:H!==null?g(H.texture):e.outputEncoding,map:!!_.map,mapEncoding:g(_.map),matcap:!!_.matcap,matcapEncoding:g(_.matcap),envMap:!!L,envMapMode:L&&L.mapping,envMapEncoding:g(L),envMapCubeUV:!!L&&(L.mapping===xx||L.mapping===UD),lightMap:!!_.lightMap,lightMapEncoding:g(_.lightMap),aoMap:!!_.aoMap,emissiveMap:!!_.emissiveMap,emissiveMapEncoding:g(_.emissiveMap),bumpMap:!!_.bumpMap,normalMap:!!_.normalMap,objectSpaceNormalMap:_.normalMapType===wJe,tangentSpaceNormalMap:_.normalMapType===fv,clearcoatMap:!!_.clearcoatMap,clearcoatRoughnessMap:!!_.clearcoatRoughnessMap,clearcoatNormalMap:!!_.clearcoatNormalMap,displacementMap:!!_.displacementMap,roughnessMap:!!_.roughnessMap,metalnessMap:!!_.metalnessMap,specularMap:!!_.specularMap,alphaMap:!!_.alphaMap,gradientMap:!!_.gradientMap,sheen:!!_.sheen,combine:_.combine,vertexTangents:_.normalMap&&_.vertexTangents,vertexColors:_.vertexColors,vertexUvs:!!_.map||!!_.bumpMap||!!_.normalMap||!!_.specularMap||!!_.alphaMap||!!_.emissiveMap||!!_.roughnessMap||!!_.metalnessMap||!!_.clearcoatMap||!!_.clearcoatRoughnessMap||!!_.clearcoatNormalMap||!!_.displacementMap,uvsVertexOnly:!(_.map||_.bumpMap||_.normalMap||_.specularMap||_.alphaMap||_.emissiveMap||_.roughnessMap||_.metalnessMap||_.clearcoatNormalMap)&&!!_.displacementMap,fog:!!O,useFog:_.fog,fogExp2:O&&O.isFogExp2,flatShading:_.flatShading,sizeAttenuation:_.sizeAttenuation,logarithmicDepthBuffer:s,skinning:_.skinning&&$>0,maxBones:$,useVertexTexture:a,morphTargets:_.morphTargets,morphNormals:_.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:x.directional.length,numPointLights:x.point.length,numSpotLights:x.spot.length,numRectAreaLights:x.rectArea.length,numHemiLights:x.hemi.length,numDirLightShadows:x.directionalShadowMap.length,numPointLightShadows:x.pointShadowMap.length,numSpotLightShadows:x.spotShadowMap.length,numClippingPlanes:C,numClipIntersection:A,dithering:_.dithering,shadowMapEnabled:e.shadowMap.enabled&&w.length>0,shadowMapType:e.shadowMap.type,toneMapping:_.toneMapped?e.toneMapping:gm,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:_.premultipliedAlpha,alphaTest:_.alphaTest,doubleSided:_.side===bx,flipSided:_.side===Zr,depthPacking:_.depthPacking!==void 0?_.depthPacking:!1,index0AttributeName:_.index0AttributeName,extensionDerivatives:_.extensions&&_.extensions.derivatives,extensionFragDepth:_.extensions&&_.extensions.fragDepth,extensionDrawBuffers:_.extensions&&_.extensions.drawBuffers,extensionShaderTextureLOD:_.extensions&&_.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||t.get("EXT_frag_depth")!==null,rendererExtensionDrawBuffers:o||t.get("WEBGL_draw_buffers")!==null,rendererExtensionShaderTextureLod:o||t.get("EXT_shader_texture_lod")!==null,customProgramCacheKey:_.customProgramCacheKey()}}function m(_){const x=[];if(_.shaderID?x.push(_.shaderID):(x.push(_.fragmentShader),x.push(_.vertexShader)),_.defines!==void 0)for(const w in _.defines)x.push(w),x.push(_.defines[w]);if(_.isRawShaderMaterial===void 0){for(let w=0;w<f.length;w++)x.push(_[f[w]]);x.push(e.outputEncoding),x.push(e.gammaFactor)}return x.push(_.customProgramCacheKey),x.join()}function y(_,x){let w;for(let S=0,C=i.length;S<C;S++){const A=i[S];if(A.cacheKey===x){w=A,++w.usedTimes;break}}return w===void 0&&(w=new bnt(e,x,_,r),i.push(w)),w}function b(_){if(--_.usedTimes===0){const x=i.indexOf(_);i[x]=i[i.length-1],i.pop(),_.destroy()}}return{getParameters:v,getProgramCacheKey:m,acquireProgram:y,releaseProgram:b,programs:i}}function _nt(){let e=new WeakMap;function t(o){let s=e.get(o);return s===void 0&&(s={},e.set(o,s)),s}function n(o){e.delete(o)}function r(o,s,a){e.get(o)[s]=a}function i(){e=new WeakMap}return{get:t,remove:n,update:r,dispose:i}}function wnt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Snt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function kU(){const e=[];let t=0;const n=[],r=[],i={id:-1};function o(){t=0,n.length=0,r.length=0}function s(d,f,h,p,g,v){let m=e[t];return m===void 0?(m={id:d.id,object:d,geometry:f,material:h,program:h.program||i,groupOrder:p,renderOrder:d.renderOrder,z:g,group:v},e[t]=m):(m.id=d.id,m.object=d,m.geometry=f,m.material=h,m.program=h.program||i,m.groupOrder=p,m.renderOrder=d.renderOrder,m.z=g,m.group=v),t++,m}function a(d,f,h,p,g,v){const m=s(d,f,h,p,g,v);(h.transparent===!0?r:n).push(m)}function l(d,f,h,p,g,v){const m=s(d,f,h,p,g,v);(h.transparent===!0?r:n).unshift(m)}function c(d,f){n.length>1&&n.sort(d||wnt),r.length>1&&r.sort(f||Snt)}function u(){for(let d=t,f=e.length;d<f;d++){const h=e[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.program=null,h.group=null}}return{opaque:n,transparent:r,init:o,push:a,unshift:l,finish:u,sort:c}}function Cnt(){let e=new WeakMap;function t(i){const o=i.target;o.removeEventListener("dispose",t),e.delete(o)}function n(i,o){const s=e.get(i);let a;return s===void 0?(a=new kU,e.set(i,new WeakMap),e.get(i).set(o,a),i.addEventListener("dispose",t)):(a=s.get(o),a===void 0&&(a=new kU,s.set(o,a))),a}function r(){e=new WeakMap}return{get:n,dispose:r}}function Ant(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new W,color:new ht};break;case"SpotLight":n={position:new W,direction:new W,color:new ht,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new W,color:new ht,distance:0,decay:0};break;case"HemisphereLight":n={direction:new W,skyColor:new ht,groundColor:new ht};break;case"RectAreaLight":n={color:new ht,position:new W,halfWidth:new W,halfHeight:new W};break}return e[t.id]=n,n}}}function Pnt(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new et,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let Mnt=0;function Ent(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Tnt(){const e=new Ant,t=Pnt(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let a=0;a<9;a++)n.probe.push(new W);const r=new W,i=new lt,o=new lt;function s(a,l,c){let u=0,d=0,f=0;for(let S=0;S<9;S++)n.probe[S].set(0,0,0);let h=0,p=0,g=0,v=0,m=0,y=0,b=0,_=0;const x=c.matrixWorldInverse;a.sort(Ent);for(let S=0,C=a.length;S<C;S++){const A=a[S],T=A.color,O=A.intensity,R=A.distance,L=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)u+=T.r*O,d+=T.g*O,f+=T.b*O;else if(A.isLightProbe)for(let D=0;D<9;D++)n.probe[D].addScaledVector(A.sh.coefficients[D],O);else if(A.isDirectionalLight){const D=e.get(A);if(D.color.copy(A.color).multiplyScalar(A.intensity),D.direction.setFromMatrixPosition(A.matrixWorld),r.setFromMatrixPosition(A.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(x),A.castShadow){const $=A.shadow,z=t.get(A);z.shadowBias=$.bias,z.shadowNormalBias=$.normalBias,z.shadowRadius=$.radius,z.shadowMapSize=$.mapSize,n.directionalShadow[h]=z,n.directionalShadowMap[h]=L,n.directionalShadowMatrix[h]=A.shadow.matrix,y++}n.directional[h]=D,h++}else if(A.isSpotLight){const D=e.get(A);if(D.position.setFromMatrixPosition(A.matrixWorld),D.position.applyMatrix4(x),D.color.copy(T).multiplyScalar(O),D.distance=R,D.direction.setFromMatrixPosition(A.matrixWorld),r.setFromMatrixPosition(A.target.matrixWorld),D.direction.sub(r),D.direction.transformDirection(x),D.coneCos=Math.cos(A.angle),D.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),D.decay=A.decay,A.castShadow){const $=A.shadow,z=t.get(A);z.shadowBias=$.bias,z.shadowNormalBias=$.normalBias,z.shadowRadius=$.radius,z.shadowMapSize=$.mapSize,n.spotShadow[g]=z,n.spotShadowMap[g]=L,n.spotShadowMatrix[g]=A.shadow.matrix,_++}n.spot[g]=D,g++}else if(A.isRectAreaLight){const D=e.get(A);D.color.copy(T).multiplyScalar(O),D.position.setFromMatrixPosition(A.matrixWorld),D.position.applyMatrix4(x),o.identity(),i.copy(A.matrixWorld),i.premultiply(x),o.extractRotation(i),D.halfWidth.set(A.width*.5,0,0),D.halfHeight.set(0,A.height*.5,0),D.halfWidth.applyMatrix4(o),D.halfHeight.applyMatrix4(o),n.rectArea[v]=D,v++}else if(A.isPointLight){const D=e.get(A);if(D.position.setFromMatrixPosition(A.matrixWorld),D.position.applyMatrix4(x),D.color.copy(A.color).multiplyScalar(A.intensity),D.distance=A.distance,D.decay=A.decay,A.castShadow){const $=A.shadow,z=t.get(A);z.shadowBias=$.bias,z.shadowNormalBias=$.normalBias,z.shadowRadius=$.radius,z.shadowMapSize=$.mapSize,z.shadowCameraNear=$.camera.near,z.shadowCameraFar=$.camera.far,n.pointShadow[p]=z,n.pointShadowMap[p]=L,n.pointShadowMatrix[p]=A.shadow.matrix,b++}n.point[p]=D,p++}else if(A.isHemisphereLight){const D=e.get(A);D.direction.setFromMatrixPosition(A.matrixWorld),D.direction.transformDirection(x),D.direction.normalize(),D.skyColor.copy(A.color).multiplyScalar(O),D.groundColor.copy(A.groundColor).multiplyScalar(O),n.hemi[m]=D,m++}}n.ambient[0]=u,n.ambient[1]=d,n.ambient[2]=f;const w=n.hash;(w.directionalLength!==h||w.pointLength!==p||w.spotLength!==g||w.rectAreaLength!==v||w.hemiLength!==m||w.numDirectionalShadows!==y||w.numPointShadows!==b||w.numSpotShadows!==_)&&(n.directional.length=h,n.spot.length=g,n.rectArea.length=v,n.point.length=p,n.hemi.length=m,n.directionalShadow.length=y,n.directionalShadowMap.length=y,n.pointShadow.length=b,n.pointShadowMap.length=b,n.spotShadow.length=_,n.spotShadowMap.length=_,n.directionalShadowMatrix.length=y,n.pointShadowMatrix.length=b,n.spotShadowMatrix.length=_,w.directionalLength=h,w.pointLength=p,w.spotLength=g,w.rectAreaLength=v,w.hemiLength=m,w.numDirectionalShadows=y,w.numPointShadows=b,w.numSpotShadows=_,n.version=Mnt++)}return{setup:s,state:n}}function LU(){const e=new Tnt,t=[],n=[];function r(){t.length=0,n.length=0}function i(l){t.push(l)}function o(l){n.push(l)}function s(l){e.setup(t,n,l)}return{init:r,state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:s,pushLight:i,pushShadow:o}}function Ont(){let e=new WeakMap;function t(i){const o=i.target;o.removeEventListener("dispose",t),e.delete(o)}function n(i,o){let s;return e.has(i)===!1?(s=new LU,e.set(i,new WeakMap),e.get(i).set(o,s),i.addEventListener("dispose",t)):e.get(i).has(o)===!1?(s=new LU,e.get(i).set(o,s)):s=e.get(i).get(o),s}function r(){e=new WeakMap}return{get:n,dispose:r}}function eh(e){Gt.call(this),this.type="MeshDepthMaterial",this.depthPacking=xJe,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}eh.prototype=Object.create(Gt.prototype);eh.prototype.constructor=eh;eh.prototype.isMeshDepthMaterial=!0;eh.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};function th(e){Gt.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new W,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}th.prototype=Object.create(Gt.prototype);th.prototype.constructor=th;th.prototype.isMeshDistanceMaterial=!0;th.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var Int=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
  float mean = 0.0;
  float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );
  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
    #ifdef HORIZONAL_PASS
      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
      mean += distribution.x;
      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
    #else
      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );
      mean += depth;
      squared_mean += depth * depth;
    #endif
  }
  mean = mean * HALF_SAMPLE_RATE;
  squared_mean = squared_mean * HALF_SAMPLE_RATE;
  float std_dev = sqrt( squared_mean - mean * mean );
  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,Rnt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function Rne(e,t,n){let r=new Sx;const i=new et,o=new et,s=new In,a=[],l=[],c={},u={0:Zr,1:dv,2:bx},d=new ri({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new et},radius:{value:4}},vertexShader:Rnt,fragmentShader:Int}),f=d.clone();f.defines.HORIZONAL_PASS=1;const h=new wt;h.setAttribute("position",new Rt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Gn(h,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=une,this.render=function(x,w,S){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||x.length===0)return;const C=e.getRenderTarget(),A=e.getActiveCubeFace(),T=e.getActiveMipmapLevel(),O=e.state;O.setBlending(ac),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);for(let R=0,L=x.length;R<L;R++){const D=x[R],$=D.shadow;if($.autoUpdate===!1&&$.needsUpdate===!1)continue;if($===void 0){console.warn("THREE.WebGLShadowMap:",D,"has no shadow.");continue}i.copy($.mapSize);const z=$.getFrameExtents();if(i.multiply(z),o.copy($.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(o.x=Math.floor(n/z.x),i.x=o.x*z.x,$.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/z.y),i.y=o.y*z.y,$.mapSize.y=o.y)),$.map===null&&!$.isPointLightShadow&&this.type===N0){const B={minFilter:Wr,magFilter:Wr,format:So};$.map=new qi(i.x,i.y,B),$.map.texture.name=D.name+".shadowMap",$.mapPass=new qi(i.x,i.y,B),$.camera.updateProjectionMatrix()}if($.map===null){const B={minFilter:Nn,magFilter:Nn,format:So};$.map=new qi(i.x,i.y,B),$.map.texture.name=D.name+".shadowMap",$.camera.updateProjectionMatrix()}e.setRenderTarget($.map),e.clear();const H=$.getViewportCount();for(let B=0;B<H;B++){const V=$.getViewport(B);s.set(o.x*V.x,o.y*V.y,o.x*V.z,o.y*V.w),O.viewport(s),$.updateMatrices(D,B),r=$.getFrustum(),_(w,S,$.camera,D,this.type)}!$.isPointLightShadow&&this.type===N0&&v($,S),$.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(C,A,T)};function v(x,w){const S=t.update(p);d.uniforms.shadow_pass.value=x.map.texture,d.uniforms.resolution.value=x.mapSize,d.uniforms.radius.value=x.radius,e.setRenderTarget(x.mapPass),e.clear(),e.renderBufferDirect(w,null,S,d,p,null),f.uniforms.shadow_pass.value=x.mapPass.texture,f.uniforms.resolution.value=x.mapSize,f.uniforms.radius.value=x.radius,e.setRenderTarget(x.map),e.clear(),e.renderBufferDirect(w,null,S,f,p,null)}function m(x,w,S){const C=x<<0|w<<1|S<<2;let A=a[C];return A===void 0&&(A=new eh({depthPacking:_Je,morphTargets:x,skinning:w}),a[C]=A),A}function y(x,w,S){const C=x<<0|w<<1|S<<2;let A=l[C];return A===void 0&&(A=new th({morphTargets:x,skinning:w}),l[C]=A),A}function b(x,w,S,C,A,T,O){let R=null,L=m,D=x.customDepthMaterial;if(C.isPointLight===!0&&(L=y,D=x.customDistanceMaterial),D===void 0){let $=!1;S.morphTargets===!0&&($=w.morphAttributes&&w.morphAttributes.position&&w.morphAttributes.position.length>0);let z=!1;x.isSkinnedMesh===!0&&(S.skinning===!0?z=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",x));const H=x.isInstancedMesh===!0;R=L($,z,H)}else R=D;if(e.localClippingEnabled&&S.clipShadows===!0&&S.clippingPlanes.length!==0){const $=R.uuid,z=S.uuid;let H=c[$];H===void 0&&(H={},c[$]=H);let B=H[z];B===void 0&&(B=R.clone(),H[z]=B),R=B}return R.visible=S.visible,R.wireframe=S.wireframe,O===N0?R.side=S.shadowSide!==null?S.shadowSide:S.side:R.side=S.shadowSide!==null?S.shadowSide:u[S.side],R.clipShadows=S.clipShadows,R.clippingPlanes=S.clippingPlanes,R.clipIntersection=S.clipIntersection,R.wireframeLinewidth=S.wireframeLinewidth,R.linewidth=S.linewidth,C.isPointLight===!0&&R.isMeshDistanceMaterial===!0&&(R.referencePosition.setFromMatrixPosition(C.matrixWorld),R.nearDistance=A,R.farDistance=T),R}function _(x,w,S,C,A){if(x.visible===!1)return;if(x.layers.test(w.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&A===N0)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,x.matrixWorld);const R=t.update(x),L=x.material;if(Array.isArray(L)){const D=R.groups;for(let $=0,z=D.length;$<z;$++){const H=D[$],B=L[H.materialIndex];if(B&&B.visible){const V=b(x,R,B,C,S.near,S.far,A);e.renderBufferDirect(S,null,R,V,x,H)}}}else if(L.visible){const D=b(x,R,L,C,S.near,S.far,A);e.renderBufferDirect(S,null,R,D,x,null)}}const O=x.children;for(let R=0,L=O.length;R<L;R++)_(O[R],w,S,C,A)}}function knt(e,t,n){const r=n.isWebGL2;function i(){let le=!1;const Oe=new In;let Be=null;const De=new In(0,0,0,0);return{setMask:function(Ee){Be!==Ee&&!le&&(e.colorMask(Ee,Ee,Ee,Ee),Be=Ee)},setLocked:function(Ee){le=Ee},setClear:function(Ee,Ie,U,E,P){P===!0&&(Ee*=E,Ie*=E,U*=E),Oe.set(Ee,Ie,U,E),De.equals(Oe)===!1&&(e.clearColor(Ee,Ie,U,E),De.copy(Oe))},reset:function(){le=!1,Be=null,De.set(-1,0,0,0)}}}function o(){let le=!1,Oe=null,Be=null,De=null;return{setTest:function(Ee){Ee?J(2929):K(2929)},setMask:function(Ee){Oe!==Ee&&!le&&(e.depthMask(Ee),Oe=Ee)},setFunc:function(Ee){if(Be!==Ee){if(Ee)switch(Ee){case cZe:e.depthFunc(512);break;case uZe:e.depthFunc(519);break;case dZe:e.depthFunc(513);break;case Gk:e.depthFunc(515);break;case fZe:e.depthFunc(514);break;case hZe:e.depthFunc(518);break;case pZe:e.depthFunc(516);break;case mZe:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);Be=Ee}},setLocked:function(Ee){le=Ee},setClear:function(Ee){De!==Ee&&(e.clearDepth(Ee),De=Ee)},reset:function(){le=!1,Oe=null,Be=null,De=null}}}function s(){let le=!1,Oe=null,Be=null,De=null,Ee=null,Ie=null,U=null,E=null,P=null;return{setTest:function(ee){le||(ee?J(2960):K(2960))},setMask:function(ee){Oe!==ee&&!le&&(e.stencilMask(ee),Oe=ee)},setFunc:function(ee,ye,be){(Be!==ee||De!==ye||Ee!==be)&&(e.stencilFunc(ee,ye,be),Be=ee,De=ye,Ee=be)},setOp:function(ee,ye,be){(Ie!==ee||U!==ye||E!==be)&&(e.stencilOp(ee,ye,be),Ie=ee,U=ye,E=be)},setLocked:function(ee){le=ee},setClear:function(ee){P!==ee&&(e.clearStencil(ee),P=ee)},reset:function(){le=!1,Oe=null,Be=null,De=null,Ee=null,Ie=null,U=null,E=null,P=null}}}const a=new i,l=new o,c=new s;let u={},d=null,f=null,h=null,p=null,g=null,v=null,m=null,y=null,b=null,_=!1,x=null,w=null,S=null,C=null,A=null;const T=e.getParameter(35661);let O=!1,R=0;const L=e.getParameter(7938);L.indexOf("WebGL")!==-1?(R=parseFloat(/^WebGL\ ([0-9])/.exec(L)[1]),O=R>=1):L.indexOf("OpenGL ES")!==-1&&(R=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(L)[1]),O=R>=2);let D=null,$={};const z=new In,H=new In;function B(le,Oe,Be){const De=new Uint8Array(4),Ee=e.createTexture();e.bindTexture(le,Ee),e.texParameteri(le,10241,9728),e.texParameteri(le,10240,9728);for(let Ie=0;Ie<Be;Ie++)e.texImage2D(Oe+Ie,0,6408,1,1,0,6408,5121,De);return Ee}const V={};V[3553]=B(3553,3553,1),V[34067]=B(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),J(2929),l.setFunc(Gk),he(!1),Z(K8),J(2884),se(ac);function J(le){u[le]!==!0&&(e.enable(le),u[le]=!0)}function K(le){u[le]!==!1&&(e.disable(le),u[le]=!1)}function ie(le){return d!==le?(e.useProgram(le),d=le,!0):!1}const ce={[Ep]:32774,[JKe]:32778,[QKe]:32779};if(r)ce[Q8]=32775,ce[eU]=32776;else{const le=t.get("EXT_blend_minmax");le!==null&&(ce[Q8]=le.MIN_EXT,ce[eU]=le.MAX_EXT)}const pe={[eZe]:0,[tZe]:1,[nZe]:768,[fne]:770,[lZe]:776,[sZe]:774,[iZe]:772,[rZe]:769,[hne]:771,[aZe]:775,[oZe]:773};function se(le,Oe,Be,De,Ee,Ie,U,E){if(le===ac){f&&(K(3042),f=!1);return}if(f||(J(3042),f=!0),le!==ZKe){if(le!==h||E!==_){if((p!==Ep||m!==Ep)&&(e.blendEquation(32774),p=Ep,m=Ep),E)switch(le){case Tu:e.blendFuncSeparate(1,771,1,771);break;case Hk:e.blendFunc(1,1);break;case Z8:e.blendFuncSeparate(0,0,769,771);break;case J8:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case Tu:e.blendFuncSeparate(770,771,1,771);break;case Hk:e.blendFunc(770,1);break;case Z8:e.blendFunc(0,769);break;case J8:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}g=null,v=null,y=null,b=null,h=le,_=E}return}Ee=Ee||Oe,Ie=Ie||Be,U=U||De,(Oe!==p||Ee!==m)&&(e.blendEquationSeparate(ce[Oe],ce[Ee]),p=Oe,m=Ee),(Be!==g||De!==v||Ie!==y||U!==b)&&(e.blendFuncSeparate(pe[Be],pe[De],pe[Ie],pe[U]),g=Be,v=De,y=Ie,b=U),h=le,_=null}function G(le,Oe){le.side===bx?K(2884):J(2884);let Be=le.side===Zr;Oe&&(Be=!Be),he(Be),le.blending===Tu&&le.transparent===!1?se(ac):se(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.premultipliedAlpha),l.setFunc(le.depthFunc),l.setTest(le.depthTest),l.setMask(le.depthWrite),a.setMask(le.colorWrite);const De=le.stencilWrite;c.setTest(De),De&&(c.setMask(le.stencilWriteMask),c.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),c.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),oe(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits)}function he(le){x!==le&&(le?e.frontFace(2304):e.frontFace(2305),x=le)}function Z(le){le!==YKe?(J(2884),le!==w&&(le===K8?e.cullFace(1029):le===XKe?e.cullFace(1028):e.cullFace(1032))):K(2884),w=le}function ae(le){le!==S&&(O&&e.lineWidth(le),S=le)}function oe(le,Oe,Be){le?(J(32823),(C!==Oe||A!==Be)&&(e.polygonOffset(Oe,Be),C=Oe,A=Be)):K(32823)}function te(le){le?J(3089):K(3089)}function ve(le){le===void 0&&(le=33984+T-1),D!==le&&(e.activeTexture(le),D=le)}function ne(le,Oe){D===null&&ve();let Be=$[D];Be===void 0&&(Be={type:void 0,texture:void 0},$[D]=Be),(Be.type!==le||Be.texture!==Oe)&&(e.bindTexture(le,Oe||V[le]),Be.type=le,Be.texture=Oe)}function xe(){const le=$[D];le!==void 0&&le.type!==void 0&&(e.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function Ce(){try{e.compressedTexImage2D.apply(e,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function me(){try{e.texImage2D.apply(e,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function X(){try{e.texImage3D.apply(e,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Q(le){z.equals(le)===!1&&(e.scissor(le.x,le.y,le.z,le.w),z.copy(le))}function Re(le){H.equals(le)===!1&&(e.viewport(le.x,le.y,le.z,le.w),H.copy(le))}function Pe(){u={},D=null,$={},d=null,h=null,x=null,w=null,a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:J,disable:K,useProgram:ie,setBlending:se,setMaterial:G,setFlipSided:he,setCullFace:Z,setLineWidth:ae,setPolygonOffset:oe,setScissorTest:te,activeTexture:ve,bindTexture:ne,unbindTexture:xe,compressedTexImage2D:Ce,texImage2D:me,texImage3D:X,scissor:Q,viewport:Re,reset:Pe}}function Lnt(e,t,n,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,d=i.maxSamples,f=new WeakMap;let h,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(X,Q){return p?new OffscreenCanvas(X,Q):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(X,Q,Re,Pe){let le=1;if((X.width>Pe||X.height>Pe)&&(le=Pe/Math.max(X.width,X.height)),le<1||Q===!0)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){const Oe=Q?Xt.floorPowerOfTwo:Math.floor,Be=Oe(le*X.width),De=Oe(le*X.height);h===void 0&&(h=g(Be,De));const Ee=Re?g(Be,De):h;return Ee.width=Be,Ee.height=De,Ee.getContext("2d").drawImage(X,0,0,Be,De),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X.width+"x"+X.height+") to ("+Be+"x"+De+")."),Ee}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X.width+"x"+X.height+")."),X;return X}function m(X){return Xt.isPowerOfTwo(X.width)&&Xt.isPowerOfTwo(X.height)}function y(X){return a?!1:X.wrapS!==po||X.wrapT!==po||X.minFilter!==Nn&&X.minFilter!==Wr}function b(X,Q){return X.generateMipmaps&&Q&&X.minFilter!==Nn&&X.minFilter!==Wr}function _(X,Q,Re,Pe){e.generateMipmap(X);const le=r.get(Q);le.__maxMipLevel=Math.log(Math.max(Re,Pe))*Math.LOG2E}function x(X,Q,Re){if(a===!1)return Q;if(X!==null){if(e[X]!==void 0)return e[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Pe=Q;return Q===6403&&(Re===5126&&(Pe=33326),Re===5131&&(Pe=33325),Re===5121&&(Pe=33321)),Q===6407&&(Re===5126&&(Pe=34837),Re===5131&&(Pe=34843),Re===5121&&(Pe=32849)),Q===6408&&(Re===5126&&(Pe=34836),Re===5131&&(Pe=34842),Re===5121&&(Pe=32856)),(Pe===33325||Pe===33326||Pe===34842||Pe===34836)&&t.get("EXT_color_buffer_float"),Pe}function w(X){return X===Nn||X===Wk||X===qk?9728:9729}function S(X){const Q=X.target;Q.removeEventListener("dispose",S),A(Q),Q.isVideoTexture&&f.delete(Q),s.memory.textures--}function C(X){const Q=X.target;Q.removeEventListener("dispose",C),T(Q),s.memory.textures--}function A(X){const Q=r.get(X);Q.__webglInit!==void 0&&(e.deleteTexture(Q.__webglTexture),r.remove(X))}function T(X){const Q=r.get(X),Re=r.get(X.texture);if(X){if(Re.__webglTexture!==void 0&&e.deleteTexture(Re.__webglTexture),X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let Pe=0;Pe<6;Pe++)e.deleteFramebuffer(Q.__webglFramebuffer[Pe]),Q.__webglDepthbuffer&&e.deleteRenderbuffer(Q.__webglDepthbuffer[Pe]);else e.deleteFramebuffer(Q.__webglFramebuffer),Q.__webglDepthbuffer&&e.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&e.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer&&e.deleteRenderbuffer(Q.__webglColorRenderbuffer),Q.__webglDepthRenderbuffer&&e.deleteRenderbuffer(Q.__webglDepthRenderbuffer);r.remove(X.texture),r.remove(X)}}let O=0;function R(){O=0}function L(){const X=O;return X>=l&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+l),O+=1,X}function D(X,Q){const Re=r.get(X);if(X.isVideoTexture&&ve(X),X.version>0&&Re.__version!==X.version){const Pe=X.image;if(Pe===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(Re,X,Q);return}}n.activeTexture(33984+Q),n.bindTexture(3553,Re.__webglTexture)}function $(X,Q){const Re=r.get(X);if(X.version>0&&Re.__version!==X.version){ce(Re,X,Q);return}n.activeTexture(33984+Q),n.bindTexture(35866,Re.__webglTexture)}function z(X,Q){const Re=r.get(X);if(X.version>0&&Re.__version!==X.version){ce(Re,X,Q);return}n.activeTexture(33984+Q),n.bindTexture(32879,Re.__webglTexture)}function H(X,Q){if(X.image.length!==6)return;const Re=r.get(X);if(X.version>0&&Re.__version!==X.version){ie(Re,X),n.activeTexture(33984+Q),n.bindTexture(34067,Re.__webglTexture),e.pixelStorei(37440,X.flipY);const Pe=X&&(X.isCompressedTexture||X.image[0].isCompressedTexture),le=X.image[0]&&X.image[0].isDataTexture,Oe=[];for(let P=0;P<6;P++)!Pe&&!le?Oe[P]=v(X.image[P],!1,!0,c):Oe[P]=le?X.image[P].image:X.image[P];const Be=Oe[0],De=m(Be)||a,Ee=o.convert(X.format),Ie=o.convert(X.type),U=x(X.internalFormat,Ee,Ie);K(34067,X,De);let E;if(Pe){for(let P=0;P<6;P++){E=Oe[P].mipmaps;for(let ee=0;ee<E.length;ee++){const ye=E[ee];X.format!==So&&X.format!==Mf?Ee!==null?n.compressedTexImage2D(34069+P,ee,U,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+P,ee,U,ye.width,ye.height,0,Ee,Ie,ye.data)}}Re.__maxMipLevel=E.length-1}else{E=X.mipmaps;for(let P=0;P<6;P++)if(le){n.texImage2D(34069+P,0,U,Oe[P].width,Oe[P].height,0,Ee,Ie,Oe[P].data);for(let ee=0;ee<E.length;ee++){const be=E[ee].image[P].image;n.texImage2D(34069+P,ee+1,U,be.width,be.height,0,Ee,Ie,be.data)}}else{n.texImage2D(34069+P,0,U,Ee,Ie,Oe[P]);for(let ee=0;ee<E.length;ee++){const ye=E[ee];n.texImage2D(34069+P,ee+1,U,Ee,Ie,ye.image[P])}}Re.__maxMipLevel=E.length}b(X,De)&&_(34067,X,Be.width,Be.height),Re.__version=X.version,X.onUpdate&&X.onUpdate(X)}else n.activeTexture(33984+Q),n.bindTexture(34067,Re.__webglTexture)}function B(X,Q){n.activeTexture(33984+Q),n.bindTexture(34067,r.get(X).__webglTexture)}const V={[$2]:10497,[po]:33071,[D2]:33648},J={[Nn]:9728,[Wk]:9984,[qk]:9986,[Wr]:9729,[mne]:9985,[TE]:9987};function K(X,Q,Re){Re?(e.texParameteri(X,10242,V[Q.wrapS]),e.texParameteri(X,10243,V[Q.wrapT]),(X===32879||X===35866)&&e.texParameteri(X,32882,V[Q.wrapR]),e.texParameteri(X,10240,J[Q.magFilter]),e.texParameteri(X,10241,J[Q.minFilter])):(e.texParameteri(X,10242,33071),e.texParameteri(X,10243,33071),(X===32879||X===35866)&&e.texParameteri(X,32882,33071),(Q.wrapS!==po||Q.wrapT!==po)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(X,10240,w(Q.magFilter)),e.texParameteri(X,10241,w(Q.minFilter)),Q.minFilter!==Nn&&Q.minFilter!==Wr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const Pe=t.get("EXT_texture_filter_anisotropic");if(Pe){if(Q.type===Kl&&t.get("OES_texture_float_linear")===null||Q.type===N2&&(a||t.get("OES_texture_half_float_linear"))===null)return;(Q.anisotropy>1||r.get(Q).__currentAnisotropy)&&(e.texParameterf(X,Pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,i.getMaxAnisotropy())),r.get(Q).__currentAnisotropy=Q.anisotropy)}}function ie(X,Q){X.__webglInit===void 0&&(X.__webglInit=!0,Q.addEventListener("dispose",S),X.__webglTexture=e.createTexture(),s.memory.textures++)}function ce(X,Q,Re){let Pe=3553;Q.isDataTexture2DArray&&(Pe=35866),Q.isDataTexture3D&&(Pe=32879),ie(X,Q),n.activeTexture(33984+Re),n.bindTexture(Pe,X.__webglTexture),e.pixelStorei(37440,Q.flipY),e.pixelStorei(37441,Q.premultiplyAlpha),e.pixelStorei(3317,Q.unpackAlignment);const le=y(Q)&&m(Q.image)===!1,Oe=v(Q.image,le,!1,u),Be=m(Oe)||a,De=o.convert(Q.format);let Ee=o.convert(Q.type),Ie=x(Q.internalFormat,De,Ee);K(Pe,Q,Be);let U;const E=Q.mipmaps;if(Q.isDepthTexture)Ie=6402,a?Q.type===Kl?Ie=36012:Q.type===yS?Ie=33190:Q.type===my?Ie=35056:Ie=33189:Q.type===Kl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Q.format===vm&&Ie===6402&&Q.type!==B2&&Q.type!==yS&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Q.type=B2,Ee=o.convert(Q.type)),Q.format===lb&&Ie===6402&&(Ie=34041,Q.type!==my&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Q.type=my,Ee=o.convert(Q.type))),n.texImage2D(3553,0,Ie,Oe.width,Oe.height,0,De,Ee,null);else if(Q.isDataTexture)if(E.length>0&&Be){for(let P=0,ee=E.length;P<ee;P++)U=E[P],n.texImage2D(3553,P,Ie,U.width,U.height,0,De,Ee,U.data);Q.generateMipmaps=!1,X.__maxMipLevel=E.length-1}else n.texImage2D(3553,0,Ie,Oe.width,Oe.height,0,De,Ee,Oe.data),X.__maxMipLevel=0;else if(Q.isCompressedTexture){for(let P=0,ee=E.length;P<ee;P++)U=E[P],Q.format!==So&&Q.format!==Mf?De!==null?n.compressedTexImage2D(3553,P,Ie,U.width,U.height,0,U.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,P,Ie,U.width,U.height,0,De,Ee,U.data);X.__maxMipLevel=E.length-1}else if(Q.isDataTexture2DArray)n.texImage3D(35866,0,Ie,Oe.width,Oe.height,Oe.depth,0,De,Ee,Oe.data),X.__maxMipLevel=0;else if(Q.isDataTexture3D)n.texImage3D(32879,0,Ie,Oe.width,Oe.height,Oe.depth,0,De,Ee,Oe.data),X.__maxMipLevel=0;else if(E.length>0&&Be){for(let P=0,ee=E.length;P<ee;P++)U=E[P],n.texImage2D(3553,P,Ie,De,Ee,U);Q.generateMipmaps=!1,X.__maxMipLevel=E.length-1}else n.texImage2D(3553,0,Ie,De,Ee,Oe),X.__maxMipLevel=0;b(Q,Be)&&_(Pe,Q,Oe.width,Oe.height),X.__version=Q.version,Q.onUpdate&&Q.onUpdate(Q)}function pe(X,Q,Re,Pe){const le=o.convert(Q.texture.format),Oe=o.convert(Q.texture.type),Be=x(Q.texture.internalFormat,le,Oe);n.texImage2D(Pe,0,Be,Q.width,Q.height,0,le,Oe,null),e.bindFramebuffer(36160,X),e.framebufferTexture2D(36160,Re,Pe,r.get(Q.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function se(X,Q,Re){if(e.bindRenderbuffer(36161,X),Q.depthBuffer&&!Q.stencilBuffer){let Pe=33189;if(Re){const le=Q.depthTexture;le&&le.isDepthTexture&&(le.type===Kl?Pe=36012:le.type===yS&&(Pe=33190));const Oe=te(Q);e.renderbufferStorageMultisample(36161,Oe,Pe,Q.width,Q.height)}else e.renderbufferStorage(36161,Pe,Q.width,Q.height);e.framebufferRenderbuffer(36160,36096,36161,X)}else if(Q.depthBuffer&&Q.stencilBuffer){if(Re){const Pe=te(Q);e.renderbufferStorageMultisample(36161,Pe,35056,Q.width,Q.height)}else e.renderbufferStorage(36161,34041,Q.width,Q.height);e.framebufferRenderbuffer(36160,33306,36161,X)}else{const Pe=o.convert(Q.texture.format),le=o.convert(Q.texture.type),Oe=x(Q.texture.internalFormat,Pe,le);if(Re){const Be=te(Q);e.renderbufferStorageMultisample(36161,Be,Oe,Q.width,Q.height)}else e.renderbufferStorage(36161,Oe,Q.width,Q.height)}e.bindRenderbuffer(36161,null)}function G(X,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,X),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Q.depthTexture).__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),D(Q.depthTexture,0);const Pe=r.get(Q.depthTexture).__webglTexture;if(Q.depthTexture.format===vm)e.framebufferTexture2D(36160,36096,3553,Pe,0);else if(Q.depthTexture.format===lb)e.framebufferTexture2D(36160,33306,3553,Pe,0);else throw new Error("Unknown depthTexture format")}function he(X){const Q=r.get(X),Re=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture){if(Re)throw new Error("target.depthTexture not supported in Cube render targets");G(Q.__webglFramebuffer,X)}else if(Re){Q.__webglDepthbuffer=[];for(let Pe=0;Pe<6;Pe++)e.bindFramebuffer(36160,Q.__webglFramebuffer[Pe]),Q.__webglDepthbuffer[Pe]=e.createRenderbuffer(),se(Q.__webglDepthbuffer[Pe],X,!1)}else e.bindFramebuffer(36160,Q.__webglFramebuffer),Q.__webglDepthbuffer=e.createRenderbuffer(),se(Q.__webglDepthbuffer,X,!1);e.bindFramebuffer(36160,null)}function Z(X){const Q=r.get(X),Re=r.get(X.texture);X.addEventListener("dispose",C),Re.__webglTexture=e.createTexture(),s.memory.textures++;const Pe=X.isWebGLCubeRenderTarget===!0,le=X.isWebGLMultisampleRenderTarget===!0,Oe=m(X)||a;if(a&&X.texture.format===Mf&&(X.texture.type===Kl||X.texture.type===N2)&&(X.texture.format=So,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Pe){Q.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)Q.__webglFramebuffer[Be]=e.createFramebuffer()}else if(Q.__webglFramebuffer=e.createFramebuffer(),le)if(a){Q.__webglMultisampledFramebuffer=e.createFramebuffer(),Q.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,Q.__webglColorRenderbuffer);const Be=o.convert(X.texture.format),De=o.convert(X.texture.type),Ee=x(X.texture.internalFormat,Be,De),Ie=te(X);e.renderbufferStorageMultisample(36161,Ie,Ee,X.width,X.height),e.bindFramebuffer(36160,Q.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,Q.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),X.depthBuffer&&(Q.__webglDepthRenderbuffer=e.createRenderbuffer(),se(Q.__webglDepthRenderbuffer,X,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Pe){n.bindTexture(34067,Re.__webglTexture),K(34067,X.texture,Oe);for(let Be=0;Be<6;Be++)pe(Q.__webglFramebuffer[Be],X,36064,34069+Be);b(X.texture,Oe)&&_(34067,X.texture,X.width,X.height),n.bindTexture(34067,null)}else n.bindTexture(3553,Re.__webglTexture),K(3553,X.texture,Oe),pe(Q.__webglFramebuffer,X,36064,3553),b(X.texture,Oe)&&_(3553,X.texture,X.width,X.height),n.bindTexture(3553,null);X.depthBuffer&&he(X)}function ae(X){const Q=X.texture,Re=m(X)||a;if(b(Q,Re)){const Pe=X.isWebGLCubeRenderTarget?34067:3553,le=r.get(Q).__webglTexture;n.bindTexture(Pe,le),_(Pe,Q,X.width,X.height),n.bindTexture(Pe,null)}}function oe(X){if(X.isWebGLMultisampleRenderTarget)if(a){const Q=r.get(X);e.bindFramebuffer(36008,Q.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,Q.__webglFramebuffer);const Re=X.width,Pe=X.height;let le=16384;X.depthBuffer&&(le|=256),X.stencilBuffer&&(le|=1024),e.blitFramebuffer(0,0,Re,Pe,0,0,Re,Pe,le,9728),e.bindFramebuffer(36160,Q.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function te(X){return a&&X.isWebGLMultisampleRenderTarget?Math.min(d,X.samples):0}function ve(X){const Q=s.render.frame;f.get(X)!==Q&&(f.set(X,Q),X.update())}let ne=!1,xe=!1;function Ce(X,Q){X&&X.isWebGLRenderTarget&&(ne===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ne=!0),X=X.texture),D(X,Q)}function me(X,Q){X&&X.isWebGLCubeRenderTarget&&(xe===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),xe=!0),X=X.texture),X&&X.isCubeTexture||Array.isArray(X.image)&&X.image.length===6?H(X,Q):B(X,Q)}this.allocateTextureUnit=L,this.resetTextureUnits=R,this.setTexture2D=D,this.setTexture2DArray=$,this.setTexture3D=z,this.setTextureCube=H,this.setTextureCubeDynamic=B,this.setupRenderTarget=Z,this.updateRenderTargetMipmap=ae,this.updateMultisampleRenderTarget=oe,this.safeSetTexture2D=Ce,this.safeSetTextureCube=me}function $nt(e,t,n){const r=n.isWebGL2;function i(o){let s;if(o===Jf)return 5121;if(o===PZe)return 32819;if(o===MZe)return 32820;if(o===EZe)return 33635;if(o===SZe)return 5120;if(o===CZe)return 5122;if(o===B2)return 5123;if(o===AZe)return 5124;if(o===yS)return 5125;if(o===Kl)return 5126;if(o===N2)return r?5131:(s=t.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===TZe)return 6406;if(o===Mf)return 6407;if(o===So)return 6408;if(o===OZe)return 6409;if(o===IZe)return 6410;if(o===vm)return 6402;if(o===lb)return 34041;if(o===kZe)return 6403;if(o===LZe)return 36244;if(o===$Ze)return 33319;if(o===DZe)return 33320;if(o===BZe)return 36248;if(o===NZe)return 36249;if(o===tU||o===nU||o===rU||o===iU)if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===tU)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===nU)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===rU)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===iU)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===oU||o===sU||o===aU||o===lU)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===oU)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===sU)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===aU)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===lU)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===FZe)return s=t.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if((o===cU||o===uU)&&(s=t.get("WEBGL_compressed_texture_etc"),s!==null)){if(o===cU)return s.COMPRESSED_RGB8_ETC2;if(o===uU)return s.COMPRESSED_RGBA8_ETC2_EAC}if(o===zZe||o===jZe||o===UZe||o===VZe||o===HZe||o===GZe||o===WZe||o===qZe||o===YZe||o===XZe||o===KZe||o===ZZe||o===JZe||o===QZe||o===tJe||o===nJe||o===rJe||o===iJe||o===oJe||o===sJe||o===aJe||o===lJe||o===cJe||o===uJe||o===dJe||o===fJe||o===hJe||o===pJe)return s=t.get("WEBGL_compressed_texture_astc"),s!==null?o:null;if(o===eJe)return s=t.get("EXT_texture_compression_bptc"),s!==null?o:null;if(o===my)return r?34042:(s=t.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}function tL(e){Ur.call(this),this.cameras=e||[]}tL.prototype=Object.assign(Object.create(Ur.prototype),{constructor:tL,isArrayCamera:!0});function Tn(){_t.call(this),this.type="Group"}Tn.prototype=Object.assign(Object.create(_t.prototype),{constructor:Tn,isGroup:!0});function j2(){this._targetRay=null,this._grip=null}Object.assign(j2.prototype,{constructor:j2,getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Tn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Tn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this},update:function(e,t,n){let r=null,i=null;const o=this._targetRay,s=this._grip;return e&&(o!==null&&(r=t.getPose(e.targetRaySpace,n),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),s!==null&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)))),o!==null&&(o.visible=r!==null),s!==null&&(s.visible=i!==null),this}});function kne(e,t){const n=this;let r=null,i=1,o=null,s="local-floor",a=null;const l=[],c=new Map,u=new Ur;u.layers.enable(1),u.viewport=new In;const d=new Ur;d.layers.enable(2),d.viewport=new In;const f=[u,d],h=new tL;h.layers.enable(1),h.layers.enable(2);let p=null,g=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(O){let R=l[O];return R===void 0&&(R=new j2,l[O]=R),R.getTargetRaySpace()},this.getControllerGrip=function(O){let R=l[O];return R===void 0&&(R=new j2,l[O]=R),R.getGripSpace()};function v(O){const R=c.get(O.inputSource);R&&R.dispatchEvent({type:O.type})}function m(){c.forEach(function(O,R){O.disconnect(R)}),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),T.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(O){o=O,T.setContext(r),T.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(O){i=O,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(O){s=O,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return r},this.setSession=function(O){if(r=O,r!==null){r.addEventListener("select",v),r.addEventListener("selectstart",v),r.addEventListener("selectend",v),r.addEventListener("squeeze",v),r.addEventListener("squeezestart",v),r.addEventListener("squeezeend",v),r.addEventListener("end",m);const R=t.getContextAttributes();R.xrCompatible!==!0&&t.makeXRCompatible();const L={antialias:R.antialias,alpha:R.alpha,depth:R.depth,stencil:R.stencil,framebufferScaleFactor:i},D=new XRWebGLLayer(r,t,L);r.updateRenderState({baseLayer:D}),r.requestReferenceSpace(s).then(y),r.addEventListener("inputsourceschange",b)}};function b(O){const R=r.inputSources;for(let L=0;L<l.length;L++)c.set(R[L],l[L]);for(let L=0;L<O.removed.length;L++){const D=O.removed[L],$=c.get(D);$&&($.dispatchEvent({type:"disconnected",data:D}),c.delete(D))}for(let L=0;L<O.added.length;L++){const D=O.added[L],$=c.get(D);$&&$.dispatchEvent({type:"connected",data:D})}}const _=new W,x=new W;function w(O,R,L){_.setFromMatrixPosition(R.matrixWorld),x.setFromMatrixPosition(L.matrixWorld);const D=_.distanceTo(x),$=R.projectionMatrix.elements,z=L.projectionMatrix.elements,H=$[14]/($[10]-1),B=$[14]/($[10]+1),V=($[9]+1)/$[5],J=($[9]-1)/$[5],K=($[8]-1)/$[0],ie=(z[8]+1)/z[0],ce=H*K,pe=H*ie,se=D/(-K+ie),G=se*-K;R.matrixWorld.decompose(O.position,O.quaternion,O.scale),O.translateX(G),O.translateZ(se),O.matrixWorld.compose(O.position,O.quaternion,O.scale),O.matrixWorldInverse.getInverse(O.matrixWorld);const he=H+se,Z=B+se,ae=ce-G,oe=pe+(D-G),te=V*B/Z*he,ve=J*B/Z*he;O.projectionMatrix.makePerspective(ae,oe,te,ve,he,Z)}function S(O,R){R===null?O.matrixWorld.copy(O.matrix):O.matrixWorld.multiplyMatrices(R.matrixWorld,O.matrix),O.matrixWorldInverse.getInverse(O.matrixWorld)}this.getCamera=function(O){h.near=d.near=u.near=O.near,h.far=d.far=u.far=O.far,(p!==h.near||g!==h.far)&&(r.updateRenderState({depthNear:h.near,depthFar:h.far}),p=h.near,g=h.far);const R=O.parent,L=h.cameras;S(h,R);for(let $=0;$<L.length;$++)S(L[$],R);O.matrixWorld.copy(h.matrixWorld);const D=O.children;for(let $=0,z=D.length;$<z;$++)D[$].updateMatrixWorld(!0);return L.length===2?w(h,u,d):h.projectionMatrix.copy(u.projectionMatrix),h};let C=null;function A(O,R){if(a=R.getViewerPose(o),a!==null){const D=a.views,$=r.renderState.baseLayer;e.setFramebuffer($.framebuffer);let z=!1;D.length!==h.cameras.length&&(h.cameras.length=0,z=!0);for(let H=0;H<D.length;H++){const B=D[H],V=$.getViewport(B),J=f[H];J.matrix.fromArray(B.transform.matrix),J.projectionMatrix.fromArray(B.projectionMatrix),J.viewport.set(V.x,V.y,V.width,V.height),H===0&&h.matrix.copy(J.matrix),z===!0&&h.cameras.push(J)}}const L=r.inputSources;for(let D=0;D<l.length;D++){const $=l[D],z=L[D];$.update(z,R,o)}C&&C(O,R)}const T=new Cne;T.setAnimationLoop(A),this.setAnimationLoop=function(O){C=O},this.dispose=function(){}}Object.assign(kne.prototype,$c.prototype);function Dnt(e){function t(m,y){m.fogColor.value.copy(y.color),y.isFog?(m.fogNear.value=y.near,m.fogFar.value=y.far):y.isFogExp2&&(m.fogDensity.value=y.density)}function n(m,y,b,_,x){y.isMeshBasicMaterial?r(m,y):y.isMeshLambertMaterial?(r(m,y),l(m,y)):y.isMeshToonMaterial?(r(m,y),u(m,y)):y.isMeshPhongMaterial?(r(m,y),c(m,y)):y.isMeshStandardMaterial?(r(m,y,b),y.isMeshPhysicalMaterial?f(m,y,b):d(m,y,b)):y.isMeshMatcapMaterial?(r(m,y),h(m,y)):y.isMeshDepthMaterial?(r(m,y),p(m,y)):y.isMeshDistanceMaterial?(r(m,y),g(m,y)):y.isMeshNormalMaterial?(r(m,y),v(m,y)):y.isLineBasicMaterial?(i(m,y),y.isLineDashedMaterial&&o(m,y)):y.isPointsMaterial?s(m,y,_,x):y.isSpriteMaterial?a(m,y):y.isShadowMaterial?(m.color.value.copy(y.color),m.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function r(m,y,b){m.opacity.value=y.opacity,y.color&&m.diffuse.value.copy(y.color),y.emissive&&m.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(m.map.value=y.map),y.alphaMap&&(m.alphaMap.value=y.alphaMap),y.specularMap&&(m.specularMap.value=y.specularMap);const _=y.envMap||b;_&&(m.envMap.value=_,m.flipEnvMap.value=_.isCubeTexture?-1:1,m.reflectivity.value=y.reflectivity,m.refractionRatio.value=y.refractionRatio,m.maxMipLevel.value=e.get(_).__maxMipLevel),y.lightMap&&(m.lightMap.value=y.lightMap,m.lightMapIntensity.value=y.lightMapIntensity),y.aoMap&&(m.aoMap.value=y.aoMap,m.aoMapIntensity.value=y.aoMapIntensity);let x;y.map?x=y.map:y.specularMap?x=y.specularMap:y.displacementMap?x=y.displacementMap:y.normalMap?x=y.normalMap:y.bumpMap?x=y.bumpMap:y.roughnessMap?x=y.roughnessMap:y.metalnessMap?x=y.metalnessMap:y.alphaMap?x=y.alphaMap:y.emissiveMap&&(x=y.emissiveMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix));let w;y.aoMap?w=y.aoMap:y.lightMap&&(w=y.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),m.uv2Transform.value.copy(w.matrix))}function i(m,y){m.diffuse.value.copy(y.color),m.opacity.value=y.opacity}function o(m,y){m.dashSize.value=y.dashSize,m.totalSize.value=y.dashSize+y.gapSize,m.scale.value=y.scale}function s(m,y,b,_){m.diffuse.value.copy(y.color),m.opacity.value=y.opacity,m.size.value=y.size*b,m.scale.value=_*.5,y.map&&(m.map.value=y.map),y.alphaMap&&(m.alphaMap.value=y.alphaMap);let x;y.map?x=y.map:y.alphaMap&&(x=y.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function a(m,y){m.diffuse.value.copy(y.color),m.opacity.value=y.opacity,m.rotation.value=y.rotation,y.map&&(m.map.value=y.map),y.alphaMap&&(m.alphaMap.value=y.alphaMap);let b;y.map?b=y.map:y.alphaMap&&(b=y.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uvTransform.value.copy(b.matrix))}function l(m,y){y.emissiveMap&&(m.emissiveMap.value=y.emissiveMap)}function c(m,y){m.specular.value.copy(y.specular),m.shininess.value=Math.max(y.shininess,1e-4),y.emissiveMap&&(m.emissiveMap.value=y.emissiveMap),y.bumpMap&&(m.bumpMap.value=y.bumpMap,m.bumpScale.value=y.bumpScale,y.side===Zr&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,m.normalScale.value.copy(y.normalScale),y.side===Zr&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias)}function u(m,y){y.gradientMap&&(m.gradientMap.value=y.gradientMap),y.emissiveMap&&(m.emissiveMap.value=y.emissiveMap),y.bumpMap&&(m.bumpMap.value=y.bumpMap,m.bumpScale.value=y.bumpScale,y.side===Zr&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,m.normalScale.value.copy(y.normalScale),y.side===Zr&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias)}function d(m,y,b){m.roughness.value=y.roughness,m.metalness.value=y.metalness,y.roughnessMap&&(m.roughnessMap.value=y.roughnessMap),y.metalnessMap&&(m.metalnessMap.value=y.metalnessMap),y.emissiveMap&&(m.emissiveMap.value=y.emissiveMap),y.bumpMap&&(m.bumpMap.value=y.bumpMap,m.bumpScale.value=y.bumpScale,y.side===Zr&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,m.normalScale.value.copy(y.normalScale),y.side===Zr&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias),(y.envMap||b)&&(m.envMapIntensity.value=y.envMapIntensity)}function f(m,y,b){d(m,y,b),m.reflectivity.value=y.reflectivity,m.clearcoat.value=y.clearcoat,m.clearcoatRoughness.value=y.clearcoatRoughness,y.sheen&&m.sheen.value.copy(y.sheen),y.clearcoatMap&&(m.clearcoatMap.value=y.clearcoatMap),y.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap),y.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),m.clearcoatNormalMap.value=y.clearcoatNormalMap,y.side===Zr&&m.clearcoatNormalScale.value.negate()),m.transparency.value=y.transparency}function h(m,y){y.matcap&&(m.matcap.value=y.matcap),y.bumpMap&&(m.bumpMap.value=y.bumpMap,m.bumpScale.value=y.bumpScale,y.side===Zr&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,m.normalScale.value.copy(y.normalScale),y.side===Zr&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias)}function p(m,y){y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias)}function g(m,y){y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias),m.referencePosition.value.copy(y.referencePosition),m.nearDistance.value=y.nearDistance,m.farDistance.value=y.farDistance}function v(m,y){y.bumpMap&&(m.bumpMap.value=y.bumpMap,m.bumpScale.value=y.bumpScale,y.side===Zr&&(m.bumpScale.value*=-1)),y.normalMap&&(m.normalMap.value=y.normalMap,m.normalScale.value.copy(y.normalScale),y.side===Zr&&m.normalScale.value.negate()),y.displacementMap&&(m.displacementMap.value=y.displacementMap,m.displacementScale.value=y.displacementScale,m.displacementBias.value=y.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function Cx(e){e=e||{};const t=e.canvas!==void 0?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=e.context!==void 0?e.context:null,r=e.alpha!==void 0?e.alpha:!1,i=e.depth!==void 0?e.depth:!0,o=e.stencil!==void 0?e.stencil:!0,s=e.antialias!==void 0?e.antialias:!1,a=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,l=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,c=e.powerPreference!==void 0?e.powerPreference:"default",u=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1;let d=null,f=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ni,this.physicallyCorrectLights=!1,this.toneMapping=gm,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const h=this;let p=!1,g=null,v=0,m=0,y=null,b=null,_=-1,x=null,w=null;const S=new In,C=new In;let A=null,T=t.width,O=t.height,R=1,L=null,D=null;const $=new In(0,0,T,O),z=new In(0,0,T,O);let H=!1;const B=new Sx,V=new htt;let J=!1,K=!1;const ie=new lt,ce=new W,pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function se(){return y===null?R:1}let G=n;function he(_e,We){for(let Ue=0;Ue<_e.length;Ue++){const N=_e[Ue],k=t.getContext(N,We);if(k!==null)return k}return null}try{const _e={alpha:r,depth:i,stencil:o,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(t.addEventListener("webglcontextlost",ee,!1),t.addEventListener("webglcontextrestored",ye,!1),G===null){const We=["webgl2","webgl","experimental-webgl"];if(h.isWebGL1Renderer===!0&&We.shift(),G=he(We,_e),G===null)throw he(We)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}G.getShaderPrecisionFormat===void 0&&(G.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(_e){throw console.error("THREE.WebGLRenderer: "+_e.message),_e}let Z,ae,oe,te,ve,ne,xe,Ce,me,X,Q,Re,Pe,le,Oe,Be,De,Ee,Ie;function U(){Z=new ptt(G),ae=new ftt(G,Z,e),ae.isWebGL2===!1&&(Z.get("WEBGL_depth_texture"),Z.get("OES_texture_float"),Z.get("OES_texture_half_float"),Z.get("OES_texture_half_float_linear"),Z.get("OES_standard_derivatives"),Z.get("OES_element_index_uint"),Z.get("OES_vertex_array_object"),Z.get("ANGLE_instanced_arrays")),Z.get("OES_texture_float_linear"),Ee=new $nt(G,Z,ae),oe=new knt(G,Z,ae),oe.scissor(C.copy(z).multiplyScalar(R).floor()),oe.viewport(S.copy($).multiplyScalar(R).floor()),te=new vtt,ve=new _nt,ne=new Lnt(G,Z,oe,ve,ae,Ee,te),xe=new jJe(G,ae),Ie=new utt(G,Z,xe,ae),Ce=new mtt(G,xe,te,Ie),me=new _tt(G,Ce,xe,te),Oe=new xtt(G),X=new xnt(h,Z,ae,Ie),Q=new Dnt(ve),Re=new Cnt,Pe=new Ont,le=new ctt(h,oe,me,a),Be=new dtt(G,Z,te,ae),De=new gtt(G,Z,te,ae),te.programs=X.programs,h.capabilities=ae,h.extensions=Z,h.properties=ve,h.renderLists=Re,h.state=oe,h.info=te}U();const E=new kne(h,G);this.xr=E;const P=new Rne(h,me,ae.maxTextureSize);this.shadowMap=P,this.getContext=function(){return G},this.getContextAttributes=function(){return G.getContextAttributes()},this.forceContextLoss=function(){const _e=Z.get("WEBGL_lose_context");_e&&_e.loseContext()},this.forceContextRestore=function(){const _e=Z.get("WEBGL_lose_context");_e&&_e.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(_e){_e!==void 0&&(R=_e,this.setSize(T,O,!1))},this.getSize=function(_e){return _e===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),_e=new et),_e.set(T,O)},this.setSize=function(_e,We,Ue){if(E.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}T=_e,O=We,t.width=Math.floor(_e*R),t.height=Math.floor(We*R),Ue!==!1&&(t.style.width=_e+"px",t.style.height=We+"px"),this.setViewport(0,0,_e,We)},this.getDrawingBufferSize=function(_e){return _e===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),_e=new et),_e.set(T*R,O*R).floor()},this.setDrawingBufferSize=function(_e,We,Ue){T=_e,O=We,R=Ue,t.width=Math.floor(_e*Ue),t.height=Math.floor(We*Ue),this.setViewport(0,0,_e,We)},this.getCurrentViewport=function(_e){return _e===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),_e=new In),_e.copy(S)},this.getViewport=function(_e){return _e.copy($)},this.setViewport=function(_e,We,Ue,N){_e.isVector4?$.set(_e.x,_e.y,_e.z,_e.w):$.set(_e,We,Ue,N),oe.viewport(S.copy($).multiplyScalar(R).floor())},this.getScissor=function(_e){return _e.copy(z)},this.setScissor=function(_e,We,Ue,N){_e.isVector4?z.set(_e.x,_e.y,_e.z,_e.w):z.set(_e,We,Ue,N),oe.scissor(C.copy(z).multiplyScalar(R).floor())},this.getScissorTest=function(){return H},this.setScissorTest=function(_e){oe.setScissorTest(H=_e)},this.setOpaqueSort=function(_e){L=_e},this.setTransparentSort=function(_e){D=_e},this.getClearColor=function(){return le.getClearColor()},this.setClearColor=function(){le.setClearColor.apply(le,arguments)},this.getClearAlpha=function(){return le.getClearAlpha()},this.setClearAlpha=function(){le.setClearAlpha.apply(le,arguments)},this.clear=function(_e,We,Ue){let N=0;(_e===void 0||_e)&&(N|=16384),(We===void 0||We)&&(N|=256),(Ue===void 0||Ue)&&(N|=1024),G.clear(N)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ee,!1),t.removeEventListener("webglcontextrestored",ye,!1),Re.dispose(),Pe.dispose(),ve.dispose(),me.dispose(),Ie.dispose(),E.dispose(),rt.stop()};function ee(_e){_e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function ye(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1,U()}function be(_e){const We=_e.target;We.removeEventListener("dispose",be),Me(We)}function Me(_e){ze(_e),ve.remove(_e)}function ze(_e){const We=ve.get(_e).program;_e.program=void 0,We!==void 0&&X.releaseProgram(We)}function Ge(_e,We){_e.render(function(Ue){h.renderBufferImmediate(Ue,We)})}this.renderBufferImmediate=function(_e,We){Ie.initAttributes();const Ue=ve.get(_e);_e.hasPositions&&!Ue.position&&(Ue.position=G.createBuffer()),_e.hasNormals&&!Ue.normal&&(Ue.normal=G.createBuffer()),_e.hasUvs&&!Ue.uv&&(Ue.uv=G.createBuffer()),_e.hasColors&&!Ue.color&&(Ue.color=G.createBuffer());const N=We.getAttributes();_e.hasPositions&&(G.bindBuffer(34962,Ue.position),G.bufferData(34962,_e.positionArray,35048),Ie.enableAttribute(N.position),G.vertexAttribPointer(N.position,3,5126,!1,0,0)),_e.hasNormals&&(G.bindBuffer(34962,Ue.normal),G.bufferData(34962,_e.normalArray,35048),Ie.enableAttribute(N.normal),G.vertexAttribPointer(N.normal,3,5126,!1,0,0)),_e.hasUvs&&(G.bindBuffer(34962,Ue.uv),G.bufferData(34962,_e.uvArray,35048),Ie.enableAttribute(N.uv),G.vertexAttribPointer(N.uv,2,5126,!1,0,0)),_e.hasColors&&(G.bindBuffer(34962,Ue.color),G.bufferData(34962,_e.colorArray,35048),Ie.enableAttribute(N.color),G.vertexAttribPointer(N.color,3,5126,!1,0,0)),Ie.disableUnusedAttributes(),G.drawArrays(4,0,_e.count),_e.count=0},this.renderBufferDirect=function(_e,We,Ue,N,k,F){We===null&&(We=pe);const j=k.isMesh&&k.matrixWorld.determinant()<0,Y=ct(_e,We,N,k);oe.setMaterial(N,j);let ue=Ue.index;const ge=Ue.attributes.position;if(ue===null){if(ge===void 0||ge.count===0)return}else if(ue.count===0)return;let Se=1;N.wireframe===!0&&(ue=Ce.getWireframeAttribute(Ue),Se=2),(N.morphTargets||N.morphNormals)&&Oe.update(k,Ue,N,Y),Ie.setup(k,N,Y,Ue,ue);let Ne,Fe=Be;ue!==null&&(Ne=xe.get(ue),Fe=De,Fe.setIndex(Ne));const Ye=ue!==null?ue.count:ge.count,at=Ue.drawRange.start*Se,Ae=Ue.drawRange.count*Se,de=F!==null?F.start*Se:0,fe=F!==null?F.count*Se:1/0,ke=Math.max(at,de),qe=Math.min(Ye,at+Ae,de+fe)-1,st=Math.max(0,qe-ke+1);if(st!==0){if(k.isMesh)N.wireframe===!0?(oe.setLineWidth(N.wireframeLinewidth*se()),Fe.setMode(1)):Fe.setMode(4);else if(k.isLine){let Ct=N.linewidth;Ct===void 0&&(Ct=1),oe.setLineWidth(Ct*se()),k.isLineSegments?Fe.setMode(1):k.isLineLoop?Fe.setMode(2):Fe.setMode(3)}else k.isPoints?Fe.setMode(0):k.isSprite&&Fe.setMode(4);if(k.isInstancedMesh)Fe.renderInstances(Ue,ke,st,k.count);else if(Ue.isInstancedBufferGeometry){const Ct=Math.min(Ue.instanceCount,Ue._maxInstanceCount);Fe.renderInstances(Ue,ke,st,Ct)}else Fe.render(ke,st)}},this.compile=function(_e,We){f=Pe.get(_e,We),f.init(),_e.traverse(function(N){N.isLight&&(f.pushLight(N),N.castShadow&&f.pushShadow(N))}),f.setupLights(We);const Ue=new WeakMap;_e.traverse(function(N){let k=N.material;if(k)if(Array.isArray(k))for(let F=0;F<k.length;F++){let j=k[F];Ue.has(j)===!1&&(gt(j,_e,N),Ue.set(j))}else Ue.has(k)===!1&&(gt(k,_e,N),Ue.set(k))})};let Xe=null;function ut(_e){E.isPresenting||Xe&&Xe(_e)}const rt=new Cne;rt.setAnimationLoop(ut),typeof window<"u"&&rt.setContext(window),this.setAnimationLoop=function(_e){Xe=_e,E.setAnimationLoop(_e),_e===null?rt.stop():rt.start()},this.render=function(_e,We){let Ue,N;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Ue=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),N=arguments[3]),We!==void 0&&We.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(p===!0)return;Ie.resetDefaultState(),_=-1,x=null,_e.autoUpdate===!0&&_e.updateMatrixWorld(),We.parent===null&&We.updateMatrixWorld(),E.enabled===!0&&E.isPresenting===!0&&(We=E.getCamera(We)),_e.isScene===!0&&_e.onBeforeRender(h,_e,We,Ue||y),f=Pe.get(_e,We),f.init(),ie.multiplyMatrices(We.projectionMatrix,We.matrixWorldInverse),B.setFromProjectionMatrix(ie),K=this.localClippingEnabled,J=V.init(this.clippingPlanes,K,We),d=Re.get(_e,We),d.init(),dt(_e,We,0,h.sortObjects),d.finish(),h.sortObjects===!0&&d.sort(L,D),J===!0&&V.beginShadows();const k=f.state.shadowsArray;P.render(k,_e,We),f.setupLights(We),J===!0&&V.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ue!==void 0&&this.setRenderTarget(Ue),le.render(d,_e,We,N);const F=d.opaque,j=d.transparent;F.length>0&&yt(F,_e,We),j.length>0&&yt(j,_e,We),_e.isScene===!0&&_e.onAfterRender(h,_e,We),y!==null&&(ne.updateRenderTargetMipmap(y),ne.updateMultisampleRenderTarget(y)),oe.buffers.depth.setTest(!0),oe.buffers.depth.setMask(!0),oe.buffers.color.setMask(!0),oe.setPolygonOffset(!1),d=null,f=null};function dt(_e,We,Ue,N){if(_e.visible===!1)return;if(_e.layers.test(We.layers)){if(_e.isGroup)Ue=_e.renderOrder;else if(_e.isLOD)_e.autoUpdate===!0&&_e.update(We);else if(_e.isLight)f.pushLight(_e),_e.castShadow&&f.pushShadow(_e);else if(_e.isSprite){if(!_e.frustumCulled||B.intersectsSprite(_e)){N&&ce.setFromMatrixPosition(_e.matrixWorld).applyMatrix4(ie);const j=me.update(_e),Y=_e.material;Y.visible&&d.push(_e,j,Y,Ue,ce.z,null)}}else if(_e.isImmediateRenderObject)N&&ce.setFromMatrixPosition(_e.matrixWorld).applyMatrix4(ie),d.push(_e,null,_e.material,Ue,ce.z,null);else if((_e.isMesh||_e.isLine||_e.isPoints)&&(_e.isSkinnedMesh&&_e.skeleton.frame!==te.render.frame&&(_e.skeleton.update(),_e.skeleton.frame=te.render.frame),!_e.frustumCulled||B.intersectsObject(_e))){N&&ce.setFromMatrixPosition(_e.matrixWorld).applyMatrix4(ie);const j=me.update(_e),Y=_e.material;if(Array.isArray(Y)){const ue=j.groups;for(let ge=0,Se=ue.length;ge<Se;ge++){const Ne=ue[ge],Fe=Y[Ne.materialIndex];Fe&&Fe.visible&&d.push(_e,j,Fe,Ue,ce.z,Ne)}}else Y.visible&&d.push(_e,j,Y,Ue,ce.z,null)}}const F=_e.children;for(let j=0,Y=F.length;j<Y;j++)dt(F[j],We,Ue,N)}function yt(_e,We,Ue){const N=We.isScene===!0?We.overrideMaterial:null;for(let k=0,F=_e.length;k<F;k++){const j=_e[k],Y=j.object,ue=j.geometry,ge=N===null?j.material:N,Se=j.group;if(Ue.isArrayCamera){w=Ue;const Ne=Ue.cameras;for(let Fe=0,Ye=Ne.length;Fe<Ye;Fe++){const at=Ne[Fe];Y.layers.test(at.layers)&&(oe.viewport(S.copy(at.viewport)),f.setupLights(at),Ke(Y,We,at,ue,ge,Se))}}else w=null,Ke(Y,We,Ue,ue,ge,Se)}}function Ke(_e,We,Ue,N,k,F){if(_e.onBeforeRender(h,We,Ue,N,k,F),f=Pe.get(We,w||Ue),_e.modelViewMatrix.multiplyMatrices(Ue.matrixWorldInverse,_e.matrixWorld),_e.normalMatrix.getNormalMatrix(_e.modelViewMatrix),_e.isImmediateRenderObject){const j=ct(Ue,We,k,_e);oe.setMaterial(k),Ie.reset(),Ge(_e,j)}else h.renderBufferDirect(Ue,We,N,k,_e,F);_e.onAfterRender(h,We,Ue,N,k,F),f=Pe.get(We,w||Ue)}function gt(_e,We,Ue){We.isScene!==!0&&(We=pe);const N=ve.get(_e),k=f.state.lights,F=f.state.shadowsArray,j=k.state.version,Y=X.getParameters(_e,k.state,F,We,V.numPlanes,V.numIntersection,Ue),ue=X.getProgramCacheKey(Y);let ge=N.program,Se=!0;if(ge===void 0)_e.addEventListener("dispose",be);else if(ge.cacheKey!==ue)ze(_e);else if(N.lightsStateVersion!==j)N.lightsStateVersion=j,Se=!1;else{if(Y.shaderID!==void 0)return;Se=!1}Se&&(ge=X.acquireProgram(Y,ue),N.program=ge,N.uniforms=Y.uniforms,N.outputEncoding=Y.outputEncoding,_e.program=ge);const Ne=ge.getAttributes();if(_e.morphTargets){_e.numSupportedMorphTargets=0;for(let Ae=0;Ae<h.maxMorphTargets;Ae++)Ne["morphTarget"+Ae]>=0&&_e.numSupportedMorphTargets++}if(_e.morphNormals){_e.numSupportedMorphNormals=0;for(let Ae=0;Ae<h.maxMorphNormals;Ae++)Ne["morphNormal"+Ae]>=0&&_e.numSupportedMorphNormals++}const Fe=N.uniforms;(!_e.isShaderMaterial&&!_e.isRawShaderMaterial||_e.clipping===!0)&&(N.numClippingPlanes=V.numPlanes,N.numIntersection=V.numIntersection,Fe.clippingPlanes=V.uniform),N.environment=_e.isMeshStandardMaterial?We.environment:null,N.fog=We.fog,N.needsLights=Dt(_e),N.lightsStateVersion=j,N.needsLights&&(Fe.ambientLightColor.value=k.state.ambient,Fe.lightProbe.value=k.state.probe,Fe.directionalLights.value=k.state.directional,Fe.directionalLightShadows.value=k.state.directionalShadow,Fe.spotLights.value=k.state.spot,Fe.spotLightShadows.value=k.state.spotShadow,Fe.rectAreaLights.value=k.state.rectArea,Fe.pointLights.value=k.state.point,Fe.pointLightShadows.value=k.state.pointShadow,Fe.hemisphereLights.value=k.state.hemi,Fe.directionalShadowMap.value=k.state.directionalShadowMap,Fe.directionalShadowMatrix.value=k.state.directionalShadowMatrix,Fe.spotShadowMap.value=k.state.spotShadowMap,Fe.spotShadowMatrix.value=k.state.spotShadowMatrix,Fe.pointShadowMap.value=k.state.pointShadowMap,Fe.pointShadowMatrix.value=k.state.pointShadowMatrix);const Ye=N.program.getUniforms(),at=Ou.seqWithValue(Ye.seq,Fe);N.uniformsList=at}function ct(_e,We,Ue,N){We.isScene!==!0&&(We=pe),ne.resetTextureUnits();const k=We.fog,F=Ue.isMeshStandardMaterial?We.environment:null,j=y===null?h.outputEncoding:y.texture.encoding,Y=ve.get(Ue),ue=f.state.lights;if(J===!0&&(K===!0||_e!==x)){const Ae=_e===x&&Ue.id===_;V.setState(Ue.clippingPlanes,Ue.clipIntersection,Ue.clipShadows,_e,Y,Ae)}Ue.version===Y.__version?(Y.program===void 0||Ue.fog&&Y.fog!==k||Y.environment!==F||Y.needsLights&&Y.lightsStateVersion!==ue.state.version||Y.numClippingPlanes!==void 0&&(Y.numClippingPlanes!==V.numPlanes||Y.numIntersection!==V.numIntersection)||Y.outputEncoding!==j)&&gt(Ue,We,N):(gt(Ue,We,N),Y.__version=Ue.version);let ge=!1,Se=!1,Ne=!1;const Fe=Y.program,Ye=Fe.getUniforms(),at=Y.uniforms;if(oe.useProgram(Fe.program)&&(ge=!0,Se=!0,Ne=!0),Ue.id!==_&&(_=Ue.id,Se=!0),ge||x!==_e){if(Ye.setValue(G,"projectionMatrix",_e.projectionMatrix),ae.logarithmicDepthBuffer&&Ye.setValue(G,"logDepthBufFC",2/(Math.log(_e.far+1)/Math.LN2)),x!==_e&&(x=_e,Se=!0,Ne=!0),Ue.isShaderMaterial||Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshStandardMaterial||Ue.envMap){const Ae=Ye.map.cameraPosition;Ae!==void 0&&Ae.setValue(G,ce.setFromMatrixPosition(_e.matrixWorld))}(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial)&&Ye.setValue(G,"isOrthographic",_e.isOrthographicCamera===!0),(Ue.isMeshPhongMaterial||Ue.isMeshToonMaterial||Ue.isMeshLambertMaterial||Ue.isMeshBasicMaterial||Ue.isMeshStandardMaterial||Ue.isShaderMaterial||Ue.isShadowMaterial||Ue.skinning)&&Ye.setValue(G,"viewMatrix",_e.matrixWorldInverse)}if(Ue.skinning){Ye.setOptional(G,N,"bindMatrix"),Ye.setOptional(G,N,"bindMatrixInverse");const Ae=N.skeleton;if(Ae){const de=Ae.bones;if(ae.floatVertexTextures){if(Ae.boneTexture===void 0){let fe=Math.sqrt(de.length*4);fe=Xt.ceilPowerOfTwo(fe),fe=Math.max(fe,4);const ke=new Float32Array(fe*fe*4);ke.set(Ae.boneMatrices);const qe=new yc(ke,fe,fe,So,Kl);Ae.boneMatrices=ke,Ae.boneTexture=qe,Ae.boneTextureSize=fe}Ye.setValue(G,"boneTexture",Ae.boneTexture,ne),Ye.setValue(G,"boneTextureSize",Ae.boneTextureSize)}else Ye.setOptional(G,Ae,"boneMatrices")}}return(Se||Y.receiveShadow!==N.receiveShadow)&&(Y.receiveShadow=N.receiveShadow,Ye.setValue(G,"receiveShadow",N.receiveShadow)),Se&&(Ye.setValue(G,"toneMappingExposure",h.toneMappingExposure),Y.needsLights&&mt(at,Ne),k&&Ue.fog&&Q.refreshFogUniforms(at,k),Q.refreshMaterialUniforms(at,Ue,F,R,O),at.ltc_1!==void 0&&(at.ltc_1.value=xt.LTC_1),at.ltc_2!==void 0&&(at.ltc_2.value=xt.LTC_2),Ou.upload(G,Y.uniformsList,at,ne)),Ue.isShaderMaterial&&Ue.uniformsNeedUpdate===!0&&(Ou.upload(G,Y.uniformsList,at,ne),Ue.uniformsNeedUpdate=!1),Ue.isSpriteMaterial&&Ye.setValue(G,"center",N.center),Ye.setValue(G,"modelViewMatrix",N.modelViewMatrix),Ye.setValue(G,"normalMatrix",N.normalMatrix),Ye.setValue(G,"modelMatrix",N.matrixWorld),Fe}function mt(_e,We){_e.ambientLightColor.needsUpdate=We,_e.lightProbe.needsUpdate=We,_e.directionalLights.needsUpdate=We,_e.directionalLightShadows.needsUpdate=We,_e.pointLights.needsUpdate=We,_e.pointLightShadows.needsUpdate=We,_e.spotLights.needsUpdate=We,_e.spotLightShadows.needsUpdate=We,_e.rectAreaLights.needsUpdate=We,_e.hemisphereLights.needsUpdate=We}function Dt(_e){return _e.isMeshLambertMaterial||_e.isMeshToonMaterial||_e.isMeshPhongMaterial||_e.isMeshStandardMaterial||_e.isShadowMaterial||_e.isShaderMaterial&&_e.lights===!0}this.setFramebuffer=function(_e){g!==_e&&y===null&&G.bindFramebuffer(36160,_e),g=_e},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return m},this.getRenderTarget=function(){return y},this.setRenderTarget=function(_e,We,Ue){y=_e,v=We,m=Ue,_e&&ve.get(_e).__webglFramebuffer===void 0&&ne.setupRenderTarget(_e);let N=g,k=!1;if(_e){const F=ve.get(_e).__webglFramebuffer;_e.isWebGLCubeRenderTarget?(N=F[We||0],k=!0):_e.isWebGLMultisampleRenderTarget?N=ve.get(_e).__webglMultisampledFramebuffer:N=F,S.copy(_e.viewport),C.copy(_e.scissor),A=_e.scissorTest}else S.copy($).multiplyScalar(R).floor(),C.copy(z).multiplyScalar(R).floor(),A=H;if(b!==N&&(G.bindFramebuffer(36160,N),b=N),oe.viewport(S),oe.scissor(C),oe.setScissorTest(A),k){const F=ve.get(_e.texture);G.framebufferTexture2D(36160,36064,34069+(We||0),F.__webglTexture,Ue||0)}},this.readRenderTargetPixels=function(_e,We,Ue,N,k,F,j){if(!(_e&&_e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Y=ve.get(_e).__webglFramebuffer;if(_e.isWebGLCubeRenderTarget&&j!==void 0&&(Y=Y[j]),Y){let ue=!1;Y!==b&&(G.bindFramebuffer(36160,Y),ue=!0);try{const ge=_e.texture,Se=ge.format,Ne=ge.type;if(Se!==So&&Ee.convert(Se)!==G.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(Ne!==Jf&&Ee.convert(Ne)!==G.getParameter(35738)&&!(Ne===Kl&&(ae.isWebGL2||Z.get("OES_texture_float")||Z.get("WEBGL_color_buffer_float")))&&!(Ne===N2&&(ae.isWebGL2?Z.get("EXT_color_buffer_float"):Z.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}G.checkFramebufferStatus(36160)===36053?We>=0&&We<=_e.width-N&&Ue>=0&&Ue<=_e.height-k&&G.readPixels(We,Ue,N,k,Ee.convert(Se),Ee.convert(Ne),F):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{ue&&G.bindFramebuffer(36160,b)}}},this.copyFramebufferToTexture=function(_e,We,Ue){Ue===void 0&&(Ue=0);const N=Math.pow(2,-Ue),k=Math.floor(We.image.width*N),F=Math.floor(We.image.height*N),j=Ee.convert(We.format);ne.setTexture2D(We,0),G.copyTexImage2D(3553,Ue,j,_e.x,_e.y,k,F,0),oe.unbindTexture()},this.copyTextureToTexture=function(_e,We,Ue,N){N===void 0&&(N=0);const k=We.image.width,F=We.image.height,j=Ee.convert(Ue.format),Y=Ee.convert(Ue.type);ne.setTexture2D(Ue,0),G.pixelStorei(37440,Ue.flipY),G.pixelStorei(37441,Ue.premultiplyAlpha),G.pixelStorei(3317,Ue.unpackAlignment),We.isDataTexture?G.texSubImage2D(3553,N,_e.x,_e.y,k,F,j,Y,We.image.data):We.isCompressedTexture?G.compressedTexSubImage2D(3553,N,_e.x,_e.y,We.mipmaps[0].width,We.mipmaps[0].height,j,We.mipmaps[0].data):G.texSubImage2D(3553,N,_e.x,_e.y,j,Y,We.image),N===0&&Ue.generateMipmaps&&G.generateMipmap(3553),oe.unbindTexture()},this.initTexture=function(_e){ne.setTexture2D(_e,0),oe.unbindTexture()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function $U(e){Cx.call(this,e)}$U.prototype=Object.assign(Object.create(Cx.prototype),{constructor:$U,isWebGL1Renderer:!0});function nL(e,t){this.name="",this.color=new ht(e),this.density=t!==void 0?t:25e-5}Object.assign(nL.prototype,{isFogExp2:!0,clone:function(){return new nL(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}});function U2(e,t,n){this.name="",this.color=new ht(e),this.near=t!==void 0?t:1,this.far=n!==void 0?n:1e3}Object.assign(U2.prototype,{isFog:!0,clone:function(){return new U2(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}});function Ms(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=OE,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Xt.generateUUID()}Object.defineProperty(Ms.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(Ms.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return t===void 0&&(t=0),this.array.set(e,t),this},clone:function(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xt.generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new Ms(t,this.stride);return n.setUsage(this.usage),n},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Xt.generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const zd=new W;function nh(e,t,n,r){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r===!0}Object.defineProperties(nh.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}});Object.assign(nh.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)zd.x=this.getX(t),zd.y=this.getY(t),zd.z=this.getZ(t),zd.applyMatrix4(e),this.setXYZ(t,zd.x,zd.y,zd.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this},clone:function(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return new Rt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new nh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let i=0;i<this.itemSize;i++)t.push(this.data.array[r+i])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function rh(e){Gt.call(this),this.type="SpriteMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}rh.prototype=Object.create(Gt.prototype);rh.prototype.constructor=rh;rh.prototype.isSpriteMaterial=!0;rh.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};let cp;const n0=new W,up=new W,dp=new W,fp=new et,r0=new et,Lne=new lt,H_=new W,i0=new W,G_=new W,DU=new et,SO=new et,BU=new et;function rL(e){if(_t.call(this),this.type="Sprite",cp===void 0){cp=new wt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ms(t,5);cp.setIndex([0,1,2,0,2,3]),cp.setAttribute("position",new nh(n,3,0,!1)),cp.setAttribute("uv",new nh(n,2,3,!1))}this.geometry=cp,this.material=e!==void 0?e:new rh,this.center=new et(.5,.5)}rL.prototype=Object.assign(Object.create(_t.prototype),{constructor:rL,isSprite:!0,raycast:function(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),up.setFromMatrixScale(this.matrixWorld),Lne.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),dp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&up.multiplyScalar(-dp.z);const n=this.material.rotation;let r,i;n!==0&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;W_(H_.set(-.5,-.5,0),dp,o,up,r,i),W_(i0.set(.5,-.5,0),dp,o,up,r,i),W_(G_.set(.5,.5,0),dp,o,up,r,i),DU.set(0,0),SO.set(1,0),BU.set(1,1);let s=e.ray.intersectTriangle(H_,i0,G_,!1,n0);if(s===null&&(W_(i0.set(-.5,.5,0),dp,o,up,r,i),SO.set(0,1),s=e.ray.intersectTriangle(H_,G_,i0,!1,n0),s===null))return;const a=e.ray.origin.distanceTo(n0);a<e.near||a>e.far||t.push({distance:a,point:n0.clone(),uv:wi.getUV(n0,H_,i0,G_,DU,SO,BU,new et),face:null,object:this})},copy:function(e){return _t.prototype.copy.call(this,e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}});function W_(e,t,n,r,i,o){fp.subVectors(e,n).addScalar(.5).multiply(r),i!==void 0?(r0.x=o*fp.x-i*fp.y,r0.y=i*fp.x+o*fp.y):r0.copy(fp),e.copy(t),e.x+=r0.x,e.y+=r0.y,e.applyMatrix4(Lne)}const q_=new W,NU=new W;function V2(){_t.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}V2.prototype=Object.assign(Object.create(_t.prototype),{constructor:V2,isLOD:!0,copy:function(e){_t.prototype.copy.call(this,e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const i=t[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){t===void 0&&(t=0),t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){q_.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(q_);this.getObjectForDistance(r).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){q_.setFromMatrixPosition(e.matrixWorld),NU.setFromMatrixPosition(this.matrixWorld);const n=q_.distanceTo(NU)/e.zoom;t[0].object.visible=!0;let r,i;for(r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}},toJSON:function(e){const t=_t.prototype.toJSON.call(this,e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}});function iL(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Gn.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new lt,this.bindMatrixInverse=new lt}iL.prototype=Object.assign(Object.create(Gn.prototype),{constructor:iL,isSkinnedMesh:!0,copy:function(e){return Gn.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new In,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Gn.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const e=new W,t=new In,n=new In,r=new W,i=new lt;return function(o,s){const a=this.skeleton,l=this.geometry;t.fromBufferAttribute(l.attributes.skinIndex,o),n.fromBufferAttribute(l.attributes.skinWeight,o),e.fromBufferAttribute(l.attributes.position,o).applyMatrix4(this.bindMatrix),s.set(0,0,0);for(let c=0;c<4;c++){const u=n.getComponent(c);if(u!==0){const d=t.getComponent(c);i.multiplyMatrices(a.bones[d].matrixWorld,a.boneInverses[d]),s.addScaledVector(r.copy(e).applyMatrix4(i),u)}}return s.applyMatrix4(this.bindMatrixInverse)}}()});const FU=new lt,Bnt=new lt;function oL(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,t===void 0)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new lt)}}Object.assign(oL.prototype,{calculateInverses:function(){this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++){const n=new lt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.getInverse(this.boneInverses[e])}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.getInverse(n.parent.matrixWorld),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=e.length;i<o;i++){const s=e[i]?e[i].matrixWorld:Bnt;FU.multiplyMatrices(s,t[i]),FU.toArray(n,i*16)}r!==void 0&&(r.needsUpdate=!0)},clone:function(){return new oL(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function zU(){_t.call(this),this.type="Bone"}zU.prototype=Object.assign(Object.create(_t.prototype),{constructor:zU,isBone:!0});const jU=new lt,UU=new lt,Y_=[],o0=new Gn;function sL(e,t,n){Gn.call(this,e,t),this.instanceMatrix=new Rt(new Float32Array(n*16),16),this.count=n,this.frustumCulled=!1}sL.prototype=Object.assign(Object.create(Gn.prototype),{constructor:sL,isInstancedMesh:!0,copy:function(e){return Gn.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),this.count=e.count,this},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,e*16)},raycast:function(e,t){const n=this.matrixWorld,r=this.count;if(o0.geometry=this.geometry,o0.material=this.material,o0.material!==void 0)for(let i=0;i<r;i++){this.getMatrixAt(i,jU),UU.multiplyMatrices(n,jU),o0.matrixWorld=UU,o0.raycast(e,Y_);for(let o=0,s=Y_.length;o<s;o++){const a=Y_[o];a.instanceId=i,a.object=this,t.push(a)}Y_.length=0}},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,e*16)},updateMorphTargets:function(){}});function $r(e){Gt.call(this),this.type="LineBasicMaterial",this.color=new ht(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}$r.prototype=Object.create(Gt.prototype);$r.prototype.constructor=$r;$r.prototype.isLineBasicMaterial=!0;$r.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const VU=new W,HU=new W,GU=new lt,X_=new hv,K_=new Dc;function Fs(e,t,n){n===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),_t.call(this),this.type="Line",this.geometry=e!==void 0?e:new wt,this.material=t!==void 0?t:new $r,this.updateMorphTargets()}Fs.prototype=Object.assign(Object.create(_t.prototype),{constructor:Fs,isLine:!0,copy:function(e){return _t.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,i=t.count;r<i;r++)VU.fromBufferAttribute(t,r-1),HU.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=VU.distanceTo(HU);e.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;n[0]=0;for(let r=1,i=t.length;r<i;r++)n[r]=n[r-1],n[r]+=t[r-1].distanceTo(t[r])}return this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),K_.copy(n.boundingSphere),K_.applyMatrix4(r),K_.radius+=i,e.ray.intersectsSphere(K_)===!1)return;GU.getInverse(r),X_.copy(e.ray).applyMatrix4(GU);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,a=new W,l=new W,c=new W,u=new W,d=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){const f=n.index,p=n.attributes.position.array;if(f!==null){const g=f.array;for(let v=0,m=g.length-1;v<m;v+=d){const y=g[v],b=g[v+1];if(a.fromArray(p,y*3),l.fromArray(p,b*3),X_.distanceSqToSegment(a,l,u,c)>s)continue;u.applyMatrix4(this.matrixWorld);const x=e.ray.origin.distanceTo(u);x<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(let g=0,v=p.length/3-1;g<v;g+=d){if(a.fromArray(p,3*g),l.fromArray(p,3*g+3),X_.distanceSqToSegment(a,l,u,c)>s)continue;u.applyMatrix4(this.matrixWorld);const y=e.ray.origin.distanceTo(u);y<e.near||y>e.far||t.push({distance:y,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const f=n.vertices,h=f.length;for(let p=0;p<h-1;p+=d){if(X_.distanceSqToSegment(f[p],f[p+1],u,c)>s)continue;u.applyMatrix4(this.matrixWorld);const v=e.ray.origin.distanceTo(u);v<e.near||v>e.far||t.push({distance:v,point:c.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=r.length;i<o;i++){const s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Z_=new W,J_=new W;function Sr(e,t){Fs.call(this,e,t),this.type="LineSegments"}Sr.prototype=Object.assign(Object.create(Fs.prototype),{constructor:Sr,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,i=t.count;r<i;r+=2)Z_.fromBufferAttribute(t,r),J_.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+Z_.distanceTo(J_);e.setAttribute("lineDistance",new St(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){const t=e.vertices,n=e.lineDistances;for(let r=0,i=t.length;r<i;r+=2)Z_.copy(t[r]),J_.copy(t[r+1]),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+Z_.distanceTo(J_)}return this}});function aL(e,t){Fs.call(this,e,t),this.type="LineLoop"}aL.prototype=Object.assign(Object.create(Fs.prototype),{constructor:aL,isLineLoop:!0});function ih(e){Gt.call(this),this.type="PointsMaterial",this.color=new ht(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}ih.prototype=Object.create(Gt.prototype);ih.prototype.constructor=ih;ih.prototype.isPointsMaterial=!0;ih.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const WU=new lt,lL=new hv,Q_=new Dc,ew=new W;function vb(e,t){_t.call(this),this.type="Points",this.geometry=e!==void 0?e:new wt,this.material=t!==void 0?t:new ih,this.updateMorphTargets()}vb.prototype=Object.assign(Object.create(_t.prototype),{constructor:vb,isPoints:!0,copy:function(e){return _t.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),Q_.copy(n.boundingSphere),Q_.applyMatrix4(r),Q_.radius+=i,e.ray.intersectsSphere(Q_)===!1)return;WU.getInverse(r),lL.copy(e.ray).applyMatrix4(WU);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){const a=n.index,c=n.attributes.position.array;if(a!==null){const u=a.array;for(let d=0,f=u.length;d<f;d++){const h=u[d];ew.fromArray(c,h*3),CO(ew,h,s,r,e,t,this)}}else for(let u=0,d=c.length/3;u<d;u++)ew.fromArray(c,u*3),CO(ew,u,s,r,e,t,this)}else{const a=n.vertices;for(let l=0,c=a.length;l<c;l++)CO(a[l],l,s,r,e,t,this)}},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let i=0,o=r.length;i<o;i++){const s=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=i}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function CO(e,t,n,r,i,o,s){const a=lL.distanceSqToPoint(e);if(a<n){const l=new W;lL.closestPointToPoint(e,l),l.applyMatrix4(r);const c=i.ray.origin.distanceTo(l);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:s})}}function qU(e,t,n,r,i,o,s,a,l){Wn.call(this,e,t,n,r,i,o,s,a,l),this.format=s!==void 0?s:Mf,this.minFilter=o!==void 0?o:Wr,this.magFilter=i!==void 0?i:Wr,this.generateMipmaps=!1}qU.prototype=Object.assign(Object.create(Wn.prototype),{constructor:qU,isVideoTexture:!0,update:function(){const e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function yb(e,t,n,r,i,o,s,a,l,c,u,d){Wn.call(this,null,o,s,a,l,c,r,i,u,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}yb.prototype=Object.create(Wn.prototype);yb.prototype.constructor=yb;yb.prototype.isCompressedTexture=!0;function bb(e,t,n,r,i,o,s,a,l){Wn.call(this,e,t,n,r,i,o,s,a,l),this.needsUpdate=!0}bb.prototype=Object.create(Wn.prototype);bb.prototype.constructor=bb;bb.prototype.isCanvasTexture=!0;function H2(e,t,n,r,i,o,s,a,l,c){if(c=c!==void 0?c:vm,c!==vm&&c!==lb)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===vm&&(n=B2),n===void 0&&c===lb&&(n=my),Wn.call(this,null,r,i,o,s,a,c,n,l),this.image={width:e,height:t},this.magFilter=s!==void 0?s:Nn,this.minFilter=a!==void 0?a:Nn,this.flipY=!1,this.generateMipmaps=!1}H2.prototype=Object.create(Wn.prototype);H2.prototype.constructor=H2;H2.prototype.isDepthTexture=!0;function G2(e){wt.call(this),this.type="WireframeGeometry";const t=[],n=[0,0],r={},i=["a","b","c"];if(e&&e.isGeometry){const o=e.faces;for(let s=0,a=o.length;s<a;s++){const l=o[s];for(let c=0;c<3;c++){const u=l[i[c]],d=l[i[(c+1)%3]];n[0]=Math.min(u,d),n[1]=Math.max(u,d);const f=n[0]+","+n[1];r[f]===void 0&&(r[f]={index1:n[0],index2:n[1]})}}for(const s in r){const a=r[s];let l=e.vertices[a.index1];t.push(l.x,l.y,l.z),l=e.vertices[a.index2],t.push(l.x,l.y,l.z)}}else if(e&&e.isBufferGeometry){let o=new W;if(e.index!==null){const s=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],f=d.start,h=d.count;for(let p=f,g=f+h;p<g;p+=3)for(let v=0;v<3;v++){const m=a.getX(p+v),y=a.getX(p+(v+1)%3);n[0]=Math.min(m,y),n[1]=Math.max(m,y);const b=n[0]+","+n[1];r[b]===void 0&&(r[b]={index1:n[0],index2:n[1]})}}for(const c in r){const u=r[c];o.fromBufferAttribute(s,u.index1),t.push(o.x,o.y,o.z),o.fromBufferAttribute(s,u.index2),t.push(o.x,o.y,o.z)}}else{const s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c;o.fromBufferAttribute(s,u),t.push(o.x,o.y,o.z);const d=3*a+(c+1)%3;o.fromBufferAttribute(s,d),t.push(o.x,o.y,o.z)}}}this.setAttribute("position",new St(t,3))}G2.prototype=Object.create(wt.prototype);G2.prototype.constructor=G2;function W2(e,t,n){Ft.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new xb(e,t,n)),this.mergeVertices()}W2.prototype=Object.create(Ft.prototype);W2.prototype.constructor=W2;function xb(e,t,n){wt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};const r=[],i=[],o=[],s=[],a=1e-5,l=new W,c=new W,u=new W,d=new W,f=new W;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const h=t+1;for(let p=0;p<=n;p++){const g=p/n;for(let v=0;v<=t;v++){const m=v/t;e(m,g,c),i.push(c.x,c.y,c.z),m-a>=0?(e(m-a,g,u),d.subVectors(c,u)):(e(m+a,g,u),d.subVectors(u,c)),g-a>=0?(e(m,g-a,u),f.subVectors(c,u)):(e(m,g+a,u),f.subVectors(u,c)),l.crossVectors(d,f).normalize(),o.push(l.x,l.y,l.z),s.push(m,g)}}for(let p=0;p<n;p++)for(let g=0;g<t;g++){const v=p*h+g,m=p*h+g+1,y=(p+1)*h+g+1,b=(p+1)*h+g;r.push(v,m,b),r.push(m,y,b)}this.setIndex(r),this.setAttribute("position",new St(i,3)),this.setAttribute("normal",new St(o,3)),this.setAttribute("uv",new St(s,2))}xb.prototype=Object.create(wt.prototype);xb.prototype.constructor=xb;function q2(e,t,n,r){Ft.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Qo(e,t,n,r)),this.mergeVertices()}q2.prototype=Object.create(Ft.prototype);q2.prototype.constructor=q2;function Qo(e,t,n,r){wt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;const i=[],o=[];s(r),l(n),c(),this.setAttribute("position",new St(i,3)),this.setAttribute("normal",new St(i.slice(),3)),this.setAttribute("uv",new St(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function s(m){const y=new W,b=new W,_=new W;for(let x=0;x<t.length;x+=3)f(t[x+0],y),f(t[x+1],b),f(t[x+2],_),a(y,b,_,m)}function a(m,y,b,_){const x=Math.pow(2,_),w=[];for(let S=0;S<=x;S++){w[S]=[];const C=m.clone().lerp(b,S/x),A=y.clone().lerp(b,S/x),T=x-S;for(let O=0;O<=T;O++)O===0&&S===x?w[S][O]=C:w[S][O]=C.clone().lerp(A,O/T)}for(let S=0;S<x;S++)for(let C=0;C<2*(x-S)-1;C++){const A=Math.floor(C/2);C%2===0?(d(w[S][A+1]),d(w[S+1][A]),d(w[S][A])):(d(w[S][A+1]),d(w[S+1][A+1]),d(w[S+1][A]))}}function l(m){const y=new W;for(let b=0;b<i.length;b+=3)y.x=i[b+0],y.y=i[b+1],y.z=i[b+2],y.normalize().multiplyScalar(m),i[b+0]=y.x,i[b+1]=y.y,i[b+2]=y.z}function c(){const m=new W;for(let y=0;y<i.length;y+=3){m.x=i[y+0],m.y=i[y+1],m.z=i[y+2];const b=g(m)/2/Math.PI+.5,_=v(m)/Math.PI+.5;o.push(b,1-_)}h(),u()}function u(){for(let m=0;m<o.length;m+=6){const y=o[m+0],b=o[m+2],_=o[m+4],x=Math.max(y,b,_),w=Math.min(y,b,_);x>.9&&w<.1&&(y<.2&&(o[m+0]+=1),b<.2&&(o[m+2]+=1),_<.2&&(o[m+4]+=1))}}function d(m){i.push(m.x,m.y,m.z)}function f(m,y){const b=m*3;y.x=e[b+0],y.y=e[b+1],y.z=e[b+2]}function h(){const m=new W,y=new W,b=new W,_=new W,x=new et,w=new et,S=new et;for(let C=0,A=0;C<i.length;C+=9,A+=6){m.set(i[C+0],i[C+1],i[C+2]),y.set(i[C+3],i[C+4],i[C+5]),b.set(i[C+6],i[C+7],i[C+8]),x.set(o[A+0],o[A+1]),w.set(o[A+2],o[A+3]),S.set(o[A+4],o[A+5]),_.copy(m).add(y).add(b).divideScalar(3);const T=g(_);p(x,A+0,m,T),p(w,A+2,y,T),p(S,A+4,b,T)}}function p(m,y,b,_){_<0&&m.x===1&&(o[y]=m.x-1),b.x===0&&b.z===0&&(o[y]=_/2/Math.PI+.5)}function g(m){return Math.atan2(m.z,-m.x)}function v(m){return Math.atan2(-m.y,Math.sqrt(m.x*m.x+m.z*m.z))}}Qo.prototype=Object.create(wt.prototype);Qo.prototype.constructor=Qo;function Y2(e,t){Ft.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new pg(e,t)),this.mergeVertices()}Y2.prototype=Object.create(Ft.prototype);Y2.prototype.constructor=Y2;function pg(e,t){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];Qo.call(this,n,r,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}pg.prototype=Object.create(Qo.prototype);pg.prototype.constructor=pg;function X2(e,t){Ft.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new oh(e,t)),this.mergeVertices()}X2.prototype=Object.create(Ft.prototype);X2.prototype.constructor=X2;function oh(e,t){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Qo.call(this,n,r,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}oh.prototype=Object.create(Qo.prototype);oh.prototype.constructor=oh;function K2(e,t){Ft.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new sh(e,t)),this.mergeVertices()}K2.prototype=Object.create(Ft.prototype);K2.prototype.constructor=K2;function sh(e,t){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Qo.call(this,r,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}sh.prototype=Object.create(Qo.prototype);sh.prototype.constructor=sh;function Z2(e,t){Ft.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new _b(e,t)),this.mergeVertices()}Z2.prototype=Object.create(Ft.prototype);Z2.prototype.constructor=Z2;function _b(e,t){const n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Qo.call(this,i,o,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}_b.prototype=Object.create(Qo.prototype);_b.prototype.constructor=_b;function J2(e,t,n,r,i,o){Ft.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},o!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");const s=new mg(e,t,n,r,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}J2.prototype=Object.create(Ft.prototype);J2.prototype.constructor=J2;function mg(e,t,n,r,i){wt.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const s=new W,a=new W,l=new et;let c=new W;const u=[],d=[],f=[],h=[];p(),this.setIndex(h),this.setAttribute("position",new St(u,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(f,2));function p(){for(let y=0;y<t;y++)g(y);g(i===!1?t:0),m(),v()}function g(y){c=e.getPointAt(y/t,c);const b=o.normals[y],_=o.binormals[y];for(let x=0;x<=r;x++){const w=x/r*Math.PI*2,S=Math.sin(w),C=-Math.cos(w);a.x=C*b.x+S*_.x,a.y=C*b.y+S*_.y,a.z=C*b.z+S*_.z,a.normalize(),d.push(a.x,a.y,a.z),s.x=c.x+n*a.x,s.y=c.y+n*a.y,s.z=c.z+n*a.z,u.push(s.x,s.y,s.z)}}function v(){for(let y=1;y<=t;y++)for(let b=1;b<=r;b++){const _=(r+1)*(y-1)+(b-1),x=(r+1)*y+(b-1),w=(r+1)*y+b,S=(r+1)*(y-1)+b;h.push(_,x,S),h.push(x,w,S)}}function m(){for(let y=0;y<=t;y++)for(let b=0;b<=r;b++)l.x=y/t,l.y=b/r,f.push(l.x,l.y)}}mg.prototype=Object.create(wt.prototype);mg.prototype.constructor=mg;mg.prototype.toJSON=function(){const e=wt.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e};function Q2(e,t,n,r,i,o,s){Ft.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},s!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new wb(e,t,n,r,i,o)),this.mergeVertices()}Q2.prototype=Object.create(Ft.prototype);Q2.prototype.constructor=Q2;function wb(e,t,n,r,i,o){wt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;const s=[],a=[],l=[],c=[],u=new W,d=new W,f=new W,h=new W,p=new W,g=new W,v=new W;for(let y=0;y<=n;++y){const b=y/n*i*Math.PI*2;m(b,i,o,e,f),m(b+.01,i,o,e,h),g.subVectors(h,f),v.addVectors(h,f),p.crossVectors(g,v),v.crossVectors(p,g),p.normalize(),v.normalize();for(let _=0;_<=r;++_){const x=_/r*Math.PI*2,w=-t*Math.cos(x),S=t*Math.sin(x);u.x=f.x+(w*v.x+S*p.x),u.y=f.y+(w*v.y+S*p.y),u.z=f.z+(w*v.z+S*p.z),a.push(u.x,u.y,u.z),d.subVectors(u,f).normalize(),l.push(d.x,d.y,d.z),c.push(y/n),c.push(_/r)}}for(let y=1;y<=n;y++)for(let b=1;b<=r;b++){const _=(r+1)*(y-1)+(b-1),x=(r+1)*y+(b-1),w=(r+1)*y+b,S=(r+1)*(y-1)+b;s.push(_,x,S),s.push(x,w,S)}this.setIndex(s),this.setAttribute("position",new St(a,3)),this.setAttribute("normal",new St(l,3)),this.setAttribute("uv",new St(c,2));function m(y,b,_,x,w){const S=Math.cos(y),C=Math.sin(y),A=_/b*y,T=Math.cos(A);w.x=x*(2+T)*.5*S,w.y=x*(2+T)*C*.5,w.z=x*Math.sin(A)*.5}}wb.prototype=Object.create(wt.prototype);wb.prototype.constructor=wb;function eC(e,t,n,r,i){Ft.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new gg(e,t,n,r,i)),this.mergeVertices()}eC.prototype=Object.create(Ft.prototype);eC.prototype.constructor=eC;function gg(e,t,n,r,i){wt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||Math.PI*2;const o=[],s=[],a=[],l=[],c=new W,u=new W,d=new W;for(let f=0;f<=n;f++)for(let h=0;h<=r;h++){const p=h/r*i,g=f/n*Math.PI*2;u.x=(e+t*Math.cos(g))*Math.cos(p),u.y=(e+t*Math.cos(g))*Math.sin(p),u.z=t*Math.sin(g),s.push(u.x,u.y,u.z),c.x=e*Math.cos(p),c.y=e*Math.sin(p),d.subVectors(u,c).normalize(),a.push(d.x,d.y,d.z),l.push(h/r),l.push(f/n)}for(let f=1;f<=n;f++)for(let h=1;h<=r;h++){const p=(r+1)*f+h-1,g=(r+1)*(f-1)+h-1,v=(r+1)*(f-1)+h,m=(r+1)*f+h;o.push(p,g,m),o.push(g,v,m)}this.setIndex(o),this.setAttribute("position",new St(s,3)),this.setAttribute("normal",new St(a,3)),this.setAttribute("uv",new St(l,2))}gg.prototype=Object.create(wt.prototype);gg.prototype.constructor=gg;const Nnt={triangulate:function(e,t,n){n=n||2;let r=t&&t.length,i=r?t[0]*n:e.length,o=$ne(e,0,i,n,!0),s=[];if(!o||o.next===o.prev)return s;let a,l,c,u,d,f,h;if(r&&(o=Vnt(e,t,o,n)),e.length>80*n){a=c=e[0],l=u=e[1];for(let p=n;p<i;p+=n)d=e[p],f=e[p+1],d<a&&(a=d),f<l&&(l=f),d>c&&(c=d),f>u&&(u=f);h=Math.max(c-a,u-l),h=h!==0?1/h:0}return Sb(o,s,n,a,l,h),s}};function $ne(e,t,n,r,i){let o,s;if(i===ert(e,t,n,r)>0)for(o=t;o<n;o+=r)s=YU(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=YU(o,e[o],e[o+1],s);return s&&IE(s,s.next)&&(Ab(s),s=s.next),s}function qu(e,t){if(!e)return e;t||(t=e);let n=e,r;do if(r=!1,!n.steiner&&(IE(n,n.next)||xr(n.prev,n,n.next)===0)){if(Ab(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function Sb(e,t,n,r,i,o,s){if(!e)return;!s&&o&&Ynt(e,r,i,o);let a=e,l,c;for(;e.prev!==e.next;){if(l=e.prev,c=e.next,o?znt(e,r,i,o):Fnt(e)){t.push(l.i/n),t.push(e.i/n),t.push(c.i/n),Ab(e),e=c.next,a=c.next;continue}if(e=c,e===a){s?s===1?(e=jnt(qu(e),t,n),Sb(e,t,n,r,i,o,2)):s===2&&Unt(e,t,n,r,i,o):Sb(qu(e),t,n,r,i,o,1);break}}}function Fnt(e){let t=e.prev,n=e,r=e.next;if(xr(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(Jp(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&xr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function znt(e,t,n,r){let i=e.prev,o=e,s=e.next;if(xr(i,o,s)>=0)return!1;let a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,l=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,u=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,d=cL(a,l,t,n,r),f=cL(c,u,t,n,r),h=e.prevZ,p=e.nextZ;for(;h&&h.z>=d&&p&&p.z<=f;){if(h!==e.prev&&h!==e.next&&Jp(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&xr(h.prev,h,h.next)>=0||(h=h.prevZ,p!==e.prev&&p!==e.next&&Jp(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&xr(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;h&&h.z>=d;){if(h!==e.prev&&h!==e.next&&Jp(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&xr(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&Jp(i.x,i.y,o.x,o.y,s.x,s.y,p.x,p.y)&&xr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function jnt(e,t,n){let r=e;do{let i=r.prev,o=r.next.next;!IE(i,o)&&Dne(i,r,r.next,o)&&Cb(i,o)&&Cb(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),Ab(r),Ab(r.next),r=e=o),r=r.next}while(r!==e);return qu(r)}function Unt(e,t,n,r,i,o){let s=e;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&Znt(s,a)){let l=Bne(s,a);s=qu(s,s.next),l=qu(l,l.next),Sb(s,t,n,r,i,o),Sb(l,t,n,r,i,o);return}a=a.next}s=s.next}while(s!==e)}function Vnt(e,t,n,r){let i=[],o,s,a,l,c;for(o=0,s=t.length;o<s;o++)a=t[o]*r,l=o<s-1?t[o+1]*r:e.length,c=$ne(e,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Knt(c));for(i.sort(Hnt),o=0;o<i.length;o++)Gnt(i[o],n),n=qu(n,n.next);return n}function Hnt(e,t){return e.x-t.x}function Gnt(e,t){if(t=Wnt(e,t),t){const n=Bne(t,e);qu(t,t.next),qu(n,n.next)}}function Wnt(e,t){let n=t,r=e.x,i=e.y,o=-1/0,s;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){let f=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=r&&f>o){if(o=f,f===r){if(i===n.y)return n;if(i===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!s)return null;if(r===o)return s;let a=s,l=s.x,c=s.y,u=1/0,d;n=s;do r>=n.x&&n.x>=l&&r!==n.x&&Jp(i<c?r:o,i,l,c,i<c?o:r,i,n.x,n.y)&&(d=Math.abs(i-n.y)/(r-n.x),Cb(n,e)&&(d<u||d===u&&(n.x>s.x||n.x===s.x&&qnt(s,n)))&&(s=n,u=d)),n=n.next;while(n!==a);return s}function qnt(e,t){return xr(e.prev,e,t.prev)<0&&xr(t.next,e,e.next)<0}function Ynt(e,t,n,r){let i=e;do i.z===null&&(i.z=cL(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,Xnt(i)}function Xnt(e){let t,n,r,i,o,s,a,l,c=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ,!!r);t++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1);return e}function cL(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Knt(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function Jp(e,t,n,r,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(r-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function Znt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Jnt(e,t)&&(Cb(e,t)&&Cb(t,e)&&Qnt(e,t)&&(xr(e.prev,e,t.prev)||xr(e,t.prev,t))||IE(e,t)&&xr(e.prev,e,e.next)>0&&xr(t.prev,t,t.next)>0)}function xr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function IE(e,t){return e.x===t.x&&e.y===t.y}function Dne(e,t,n,r){const i=nw(xr(e,t,n)),o=nw(xr(e,t,r)),s=nw(xr(n,r,e)),a=nw(xr(n,r,t));return!!(i!==o&&s!==a||i===0&&tw(e,n,t)||o===0&&tw(e,r,t)||s===0&&tw(n,e,r)||a===0&&tw(n,t,r))}function tw(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function nw(e){return e>0?1:e<0?-1:0}function Jnt(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Dne(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Cb(e,t){return xr(e.prev,e,e.next)<0?xr(e,t,e.next)>=0&&xr(e,e.prev,t)>=0:xr(e,t,e.prev)<0||xr(e,e.next,t)<0}function Qnt(e,t){let n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function Bne(e,t){let n=new uL(e.i,e.x,e.y),r=new uL(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function YU(e,t,n,r){const i=new uL(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ab(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function uL(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ert(e,t,n,r){let i=0;for(let o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}const Iu={area:function(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return n*.5},isClockWise:function(e){return Iu.area(e)<0},triangulateShape:function(e,t){const n=[],r=[],i=[];XU(e),KU(n,e);let o=e.length;t.forEach(XU);for(let a=0;a<t.length;a++)r.push(o),o+=t[a].length,KU(n,t[a]);const s=Nnt.triangulate(n,r);for(let a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function XU(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function KU(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function vg(e,t){Ft.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new bc(e,t)),this.mergeVertices()}vg.prototype=Object.create(Ft.prototype);vg.prototype.constructor=vg;vg.prototype.toJSON=function(){const e=Ft.prototype.toJSON.call(this),t=this.parameters.shapes,n=this.parameters.options;return Nne(t,n,e)};function bc(e,t){wt.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let s=0,a=e.length;s<a;s++){const l=e[s];o(l)}this.setAttribute("position",new St(r,3)),this.setAttribute("uv",new St(i,2)),this.computeVertexNormals();function o(s){const a=[],l=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1;let u=t.depth!==void 0?t.depth:100,d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:6,h=t.bevelSize!==void 0?t.bevelSize:f-2,p=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,m=t.UVGenerator!==void 0?t.UVGenerator:trt;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);let y,b=!1,_,x,w,S;v&&(y=v.getSpacedPoints(c),b=!0,d=!1,_=v.computeFrenetFrames(c,!1),x=new W,w=new W,S=new W),d||(g=0,f=0,h=0,p=0);const C=s.extractPoints(l);let A=C.shape;const T=C.holes;if(!Iu.isClockWise(A)){A=A.reverse();for(let te=0,ve=T.length;te<ve;te++){const ne=T[te];Iu.isClockWise(ne)&&(T[te]=ne.reverse())}}const R=Iu.triangulateShape(A,T),L=A;for(let te=0,ve=T.length;te<ve;te++){const ne=T[te];A=A.concat(ne)}function D(te,ve,ne){return ve||console.error("THREE.ExtrudeGeometry: vec does not exist"),ve.clone().multiplyScalar(ne).add(te)}const $=A.length,z=R.length;function H(te,ve,ne){let xe,Ce,me;const X=te.x-ve.x,Q=te.y-ve.y,Re=ne.x-te.x,Pe=ne.y-te.y,le=X*X+Q*Q,Oe=X*Pe-Q*Re;if(Math.abs(Oe)>Number.EPSILON){const Be=Math.sqrt(le),De=Math.sqrt(Re*Re+Pe*Pe),Ee=ve.x-Q/Be,Ie=ve.y+X/Be,U=ne.x-Pe/De,E=ne.y+Re/De,P=((U-Ee)*Pe-(E-Ie)*Re)/(X*Pe-Q*Re);xe=Ee+X*P-te.x,Ce=Ie+Q*P-te.y;const ee=xe*xe+Ce*Ce;if(ee<=2)return new et(xe,Ce);me=Math.sqrt(ee/2)}else{let Be=!1;X>Number.EPSILON?Re>Number.EPSILON&&(Be=!0):X<-Number.EPSILON?Re<-Number.EPSILON&&(Be=!0):Math.sign(Q)===Math.sign(Pe)&&(Be=!0),Be?(xe=-Q,Ce=X,me=Math.sqrt(le)):(xe=X,Ce=Q,me=Math.sqrt(le/2))}return new et(xe/me,Ce/me)}const B=[];for(let te=0,ve=L.length,ne=ve-1,xe=te+1;te<ve;te++,ne++,xe++)ne===ve&&(ne=0),xe===ve&&(xe=0),B[te]=H(L[te],L[ne],L[xe]);const V=[];let J,K=B.concat();for(let te=0,ve=T.length;te<ve;te++){const ne=T[te];J=[];for(let xe=0,Ce=ne.length,me=Ce-1,X=xe+1;xe<Ce;xe++,me++,X++)me===Ce&&(me=0),X===Ce&&(X=0),J[xe]=H(ne[xe],ne[me],ne[X]);V.push(J),K=K.concat(J)}for(let te=0;te<g;te++){const ve=te/g,ne=f*Math.cos(ve*Math.PI/2),xe=h*Math.sin(ve*Math.PI/2)+p;for(let Ce=0,me=L.length;Ce<me;Ce++){const X=D(L[Ce],B[Ce],xe);G(X.x,X.y,-ne)}for(let Ce=0,me=T.length;Ce<me;Ce++){const X=T[Ce];J=V[Ce];for(let Q=0,Re=X.length;Q<Re;Q++){const Pe=D(X[Q],J[Q],xe);G(Pe.x,Pe.y,-ne)}}}const ie=h+p;for(let te=0;te<$;te++){const ve=d?D(A[te],K[te],ie):A[te];b?(w.copy(_.normals[0]).multiplyScalar(ve.x),x.copy(_.binormals[0]).multiplyScalar(ve.y),S.copy(y[0]).add(w).add(x),G(S.x,S.y,S.z)):G(ve.x,ve.y,0)}for(let te=1;te<=c;te++)for(let ve=0;ve<$;ve++){const ne=d?D(A[ve],K[ve],ie):A[ve];b?(w.copy(_.normals[te]).multiplyScalar(ne.x),x.copy(_.binormals[te]).multiplyScalar(ne.y),S.copy(y[te]).add(w).add(x),G(S.x,S.y,S.z)):G(ne.x,ne.y,u/c*te)}for(let te=g-1;te>=0;te--){const ve=te/g,ne=f*Math.cos(ve*Math.PI/2),xe=h*Math.sin(ve*Math.PI/2)+p;for(let Ce=0,me=L.length;Ce<me;Ce++){const X=D(L[Ce],B[Ce],xe);G(X.x,X.y,u+ne)}for(let Ce=0,me=T.length;Ce<me;Ce++){const X=T[Ce];J=V[Ce];for(let Q=0,Re=X.length;Q<Re;Q++){const Pe=D(X[Q],J[Q],xe);b?G(Pe.x,Pe.y+y[c-1].y,y[c-1].x+ne):G(Pe.x,Pe.y,u+ne)}}}ce(),pe();function ce(){const te=r.length/3;if(d){let ve=0,ne=$*ve;for(let xe=0;xe<z;xe++){const Ce=R[xe];he(Ce[2]+ne,Ce[1]+ne,Ce[0]+ne)}ve=c+g*2,ne=$*ve;for(let xe=0;xe<z;xe++){const Ce=R[xe];he(Ce[0]+ne,Ce[1]+ne,Ce[2]+ne)}}else{for(let ve=0;ve<z;ve++){const ne=R[ve];he(ne[2],ne[1],ne[0])}for(let ve=0;ve<z;ve++){const ne=R[ve];he(ne[0]+$*c,ne[1]+$*c,ne[2]+$*c)}}n.addGroup(te,r.length/3-te,0)}function pe(){const te=r.length/3;let ve=0;se(L,ve),ve+=L.length;for(let ne=0,xe=T.length;ne<xe;ne++){const Ce=T[ne];se(Ce,ve),ve+=Ce.length}n.addGroup(te,r.length/3-te,1)}function se(te,ve){let ne=te.length;for(;--ne>=0;){const xe=ne;let Ce=ne-1;Ce<0&&(Ce=te.length-1);for(let me=0,X=c+g*2;me<X;me++){const Q=$*me,Re=$*(me+1),Pe=ve+xe+Q,le=ve+Ce+Q,Oe=ve+Ce+Re,Be=ve+xe+Re;Z(Pe,le,Oe,Be)}}}function G(te,ve,ne){a.push(te),a.push(ve),a.push(ne)}function he(te,ve,ne){ae(te),ae(ve),ae(ne);const xe=r.length/3,Ce=m.generateTopUV(n,r,xe-3,xe-2,xe-1);oe(Ce[0]),oe(Ce[1]),oe(Ce[2])}function Z(te,ve,ne,xe){ae(te),ae(ve),ae(xe),ae(ve),ae(ne),ae(xe);const Ce=r.length/3,me=m.generateSideWallUV(n,r,Ce-6,Ce-3,Ce-2,Ce-1);oe(me[0]),oe(me[1]),oe(me[3]),oe(me[1]),oe(me[2]),oe(me[3])}function ae(te){r.push(a[te*3+0]),r.push(a[te*3+1]),r.push(a[te*3+2])}function oe(te){i.push(te.x),i.push(te.y)}}}bc.prototype=Object.create(wt.prototype);bc.prototype.constructor=bc;bc.prototype.toJSON=function(){const e=wt.prototype.toJSON.call(this),t=this.parameters.shapes,n=this.parameters.options;return Nne(t,n,e)};const trt={generateTopUV:function(e,t,n,r,i){const o=t[n*3],s=t[n*3+1],a=t[r*3],l=t[r*3+1],c=t[i*3],u=t[i*3+1];return[new et(o,s),new et(a,l),new et(c,u)]},generateSideWallUV:function(e,t,n,r,i,o){const s=t[n*3],a=t[n*3+1],l=t[n*3+2],c=t[r*3],u=t[r*3+1],d=t[r*3+2],f=t[i*3],h=t[i*3+1],p=t[i*3+2],g=t[o*3],v=t[o*3+1],m=t[o*3+2];return Math.abs(a-u)<.01?[new et(s,1-l),new et(c,1-d),new et(f,1-p),new et(g,1-m)]:[new et(a,1-l),new et(u,1-d),new et(h,1-p),new et(v,1-m)]}};function Nne(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function tC(e,t){Ft.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Pb(e,t)),this.mergeVertices()}tC.prototype=Object.create(Ft.prototype);tC.prototype.constructor=tC;function Pb(e,t){t=t||{};const n=t.font;if(!(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ft;const r=n.generateShapes(e,t.size);t.depth=t.height!==void 0?t.height:50,t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),bc.call(this,r,t),this.type="TextBufferGeometry"}Pb.prototype=Object.create(bc.prototype);Pb.prototype.constructor=Pb;function nC(e,t,n,r,i,o,s){Ft.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new yg(e,t,n,r,i,o,s)),this.mergeVertices()}nC.prototype=Object.create(Ft.prototype);nC.prototype.constructor=nC;function yg(e,t,n,r,i,o,s){wt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=r!==void 0?r:0,i=i!==void 0?i:Math.PI*2,o=o!==void 0?o:0,s=s!==void 0?s:Math.PI;const a=Math.min(o+s,Math.PI);let l=0;const c=[],u=new W,d=new W,f=[],h=[],p=[],g=[];for(let v=0;v<=n;v++){const m=[],y=v/n;let b=0;v==0&&o==0?b=.5/t:v==n&&a==Math.PI&&(b=-.5/t);for(let _=0;_<=t;_++){const x=_/t;u.x=-e*Math.cos(r+x*i)*Math.sin(o+y*s),u.y=e*Math.cos(o+y*s),u.z=e*Math.sin(r+x*i)*Math.sin(o+y*s),h.push(u.x,u.y,u.z),d.copy(u).normalize(),p.push(d.x,d.y,d.z),g.push(x+b,1-y),m.push(l++)}c.push(m)}for(let v=0;v<n;v++)for(let m=0;m<t;m++){const y=c[v][m+1],b=c[v][m],_=c[v+1][m],x=c[v+1][m+1];(v!==0||o>0)&&f.push(y,b,x),(v!==n-1||a<Math.PI)&&f.push(b,_,x)}this.setIndex(f),this.setAttribute("position",new St(h,3)),this.setAttribute("normal",new St(p,3)),this.setAttribute("uv",new St(g,2))}yg.prototype=Object.create(wt.prototype);yg.prototype.constructor=yg;function rC(e,t,n,r,i,o){Ft.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Mb(e,t,n,r,i,o)),this.mergeVertices()}rC.prototype=Object.create(Ft.prototype);rC.prototype.constructor=rC;function Mb(e,t,n,r,i,o){wt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=i!==void 0?i:0,o=o!==void 0?o:Math.PI*2,n=n!==void 0?Math.max(3,n):8,r=r!==void 0?Math.max(1,r):1;const s=[],a=[],l=[],c=[];let u=e;const d=(t-e)/r,f=new W,h=new et;for(let p=0;p<=r;p++){for(let g=0;g<=n;g++){const v=i+g/n*o;f.x=u*Math.cos(v),f.y=u*Math.sin(v),a.push(f.x,f.y,f.z),l.push(0,0,1),h.x=(f.x/t+1)/2,h.y=(f.y/t+1)/2,c.push(h.x,h.y)}u+=d}for(let p=0;p<r;p++){const g=p*(n+1);for(let v=0;v<n;v++){const m=v+g,y=m,b=m+n+1,_=m+n+2,x=m+1;s.push(y,b,x),s.push(b,_,x)}}this.setIndex(s),this.setAttribute("position",new St(a,3)),this.setAttribute("normal",new St(l,3)),this.setAttribute("uv",new St(c,2))}Mb.prototype=Object.create(wt.prototype);Mb.prototype.constructor=Mb;function iC(e,t,n,r){Ft.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Eb(e,t,n,r)),this.mergeVertices()}iC.prototype=Object.create(Ft.prototype);iC.prototype.constructor=iC;function Eb(e,t,n,r){wt.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||Math.PI*2,r=Xt.clamp(r,0,Math.PI*2);const i=[],o=[],s=[],a=1/t,l=new W,c=new et;for(let u=0;u<=t;u++){const d=n+u*a*r,f=Math.sin(d),h=Math.cos(d);for(let p=0;p<=e.length-1;p++)l.x=e[p].x*f,l.y=e[p].y,l.z=e[p].x*h,o.push(l.x,l.y,l.z),c.x=u/t,c.y=p/(e.length-1),s.push(c.x,c.y)}for(let u=0;u<t;u++)for(let d=0;d<e.length-1;d++){const f=d+u*e.length,h=f,p=f+e.length,g=f+e.length+1,v=f+1;i.push(h,p,v),i.push(p,g,v)}if(this.setIndex(i),this.setAttribute("position",new St(o,3)),this.setAttribute("uv",new St(s,2)),this.computeVertexNormals(),r===Math.PI*2){const u=this.attributes.normal.array,d=new W,f=new W,h=new W,p=t*e.length*3;for(let g=0,v=0;g<e.length;g++,v+=3)d.x=u[v+0],d.y=u[v+1],d.z=u[v+2],f.x=u[p+v+0],f.y=u[p+v+1],f.z=u[p+v+2],h.addVectors(d,f).normalize(),u[v+0]=u[p+v+0]=h.x,u[v+1]=u[p+v+1]=h.y,u[v+2]=u[p+v+2]=h.z}}Eb.prototype=Object.create(wt.prototype);Eb.prototype.constructor=Eb;function bg(e,t){Ft.call(this),this.type="ShapeGeometry",typeof t=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new xg(e,t)),this.mergeVertices()}bg.prototype=Object.create(Ft.prototype);bg.prototype.constructor=bg;bg.prototype.toJSON=function(){const e=Ft.prototype.toJSON.call(this),t=this.parameters.shapes;return Fne(t,e)};function xg(e,t){wt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;const n=[],r=[],i=[],o=[];let s=0,a=0;if(Array.isArray(e)===!1)l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(s,a,c),s+=a,a=0;this.setIndex(n),this.setAttribute("position",new St(r,3)),this.setAttribute("normal",new St(i,3)),this.setAttribute("uv",new St(o,2));function l(c){const u=r.length/3,d=c.extractPoints(t);let f=d.shape;const h=d.holes;Iu.isClockWise(f)===!1&&(f=f.reverse());for(let g=0,v=h.length;g<v;g++){const m=h[g];Iu.isClockWise(m)===!0&&(h[g]=m.reverse())}const p=Iu.triangulateShape(f,h);for(let g=0,v=h.length;g<v;g++){const m=h[g];f=f.concat(m)}for(let g=0,v=f.length;g<v;g++){const m=f[g];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(let g=0,v=p.length;g<v;g++){const m=p[g],y=m[0]+u,b=m[1]+u,_=m[2]+u;n.push(y,b,_),a+=3}}}xg.prototype=Object.create(wt.prototype);xg.prototype.constructor=xg;xg.prototype.toJSON=function(){const e=wt.prototype.toJSON.call(this),t=this.parameters.shapes;return Fne(t,e)};function Fne(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function oC(e,t){wt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=t!==void 0?t:1;const n=[],r=Math.cos(Xt.DEG2RAD*t),i=[0,0],o={};let s,a,l;const c=["a","b","c"];let u;e.isBufferGeometry?(u=new Ft,u.fromBufferGeometry(e)):u=e.clone(),u.mergeVertices(),u.computeFaceNormals();const d=u.vertices,f=u.faces;for(let h=0,p=f.length;h<p;h++){const g=f[h];for(let v=0;v<3;v++)s=g[c[v]],a=g[c[(v+1)%3]],i[0]=Math.min(s,a),i[1]=Math.max(s,a),l=i[0]+","+i[1],o[l]===void 0?o[l]={index1:i[0],index2:i[1],face1:h,face2:void 0}:o[l].face2=h}for(l in o){const h=o[l];if(h.face2===void 0||f[h.face1].normal.dot(f[h.face2].normal)<=r){let p=d[h.index1];n.push(p.x,p.y,p.z),p=d[h.index2],n.push(p.x,p.y,p.z)}}this.setAttribute("position",new St(n,3))}oC.prototype=Object.create(wt.prototype);oC.prototype.constructor=oC;function _g(e,t,n,r,i,o,s,a){Ft.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a},this.fromBufferGeometry(new xc(e,t,n,r,i,o,s,a)),this.mergeVertices()}_g.prototype=Object.create(Ft.prototype);_g.prototype.constructor=_g;function xc(e,t,n,r,i,o,s,a){wt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a};const l=this;e=e!==void 0?e:1,t=t!==void 0?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=o!==void 0?o:!1,s=s!==void 0?s:0,a=a!==void 0?a:Math.PI*2;const c=[],u=[],d=[],f=[];let h=0;const p=[],g=n/2;let v=0;m(),o===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new St(u,3)),this.setAttribute("normal",new St(d,3)),this.setAttribute("uv",new St(f,2));function m(){const b=new W,_=new W;let x=0;const w=(t-e)/n;for(let S=0;S<=i;S++){const C=[],A=S/i,T=A*(t-e)+e;for(let O=0;O<=r;O++){const R=O/r,L=R*a+s,D=Math.sin(L),$=Math.cos(L);_.x=T*D,_.y=-A*n+g,_.z=T*$,u.push(_.x,_.y,_.z),b.set(D,w,$).normalize(),d.push(b.x,b.y,b.z),f.push(R,1-A),C.push(h++)}p.push(C)}for(let S=0;S<r;S++)for(let C=0;C<i;C++){const A=p[C][S],T=p[C+1][S],O=p[C+1][S+1],R=p[C][S+1];c.push(A,T,R),c.push(T,O,R),x+=6}l.addGroup(v,x,0),v+=x}function y(b){let _,x;const w=new et,S=new W;let C=0;const A=b===!0?e:t,T=b===!0?1:-1;_=h;for(let O=1;O<=r;O++)u.push(0,g*T,0),d.push(0,T,0),f.push(.5,.5),h++;x=h;for(let O=0;O<=r;O++){const L=O/r*a+s,D=Math.cos(L),$=Math.sin(L);S.x=A*$,S.y=g*T,S.z=A*D,u.push(S.x,S.y,S.z),d.push(0,T,0),w.x=D*.5+.5,w.y=$*.5*T+.5,f.push(w.x,w.y),h++}for(let O=0;O<r;O++){const R=_+O,L=x+O;b===!0?c.push(L,L+1,R):c.push(L+1,L,R),C+=3}l.addGroup(v,C,b===!0?1:2),v+=C}}xc.prototype=Object.create(wt.prototype);xc.prototype.constructor=xc;function sC(e,t,n,r,i,o,s){_g.call(this,0,e,t,n,r,i,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}sC.prototype=Object.create(_g.prototype);sC.prototype.constructor=sC;function Tb(e,t,n,r,i,o,s){xc.call(this,0,e,t,n,r,i,o,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:s}}Tb.prototype=Object.create(xc.prototype);Tb.prototype.constructor=Tb;function aC(e,t,n,r){Ft.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Ob(e,t,n,r)),this.mergeVertices()}aC.prototype=Object.create(Ft.prototype);aC.prototype.constructor=aC;function Ob(e,t,n,r){wt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=t!==void 0?Math.max(3,t):8,n=n!==void 0?n:0,r=r!==void 0?r:Math.PI*2;const i=[],o=[],s=[],a=[],l=new W,c=new et;o.push(0,0,0),s.push(0,0,1),a.push(.5,.5);for(let u=0,d=3;u<=t;u++,d+=3){const f=n+u/t*r;l.x=e*Math.cos(f),l.y=e*Math.sin(f),o.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(o[d]/e+1)/2,c.y=(o[d+1]/e+1)/2,a.push(c.x,c.y)}for(let u=1;u<=t;u++)i.push(u,u+1,0);this.setIndex(i),this.setAttribute("position",new St(o,3)),this.setAttribute("normal",new St(s,3)),this.setAttribute("uv",new St(a,2))}Ob.prototype=Object.create(wt.prototype);Ob.prototype.constructor=Ob;var Ui=Object.freeze({__proto__:null,WireframeGeometry:G2,ParametricGeometry:W2,ParametricBufferGeometry:xb,TetrahedronGeometry:Y2,TetrahedronBufferGeometry:pg,OctahedronGeometry:X2,OctahedronBufferGeometry:oh,IcosahedronGeometry:K2,IcosahedronBufferGeometry:sh,DodecahedronGeometry:Z2,DodecahedronBufferGeometry:_b,PolyhedronGeometry:q2,PolyhedronBufferGeometry:Qo,TubeGeometry:J2,TubeBufferGeometry:mg,TorusKnotGeometry:Q2,TorusKnotBufferGeometry:wb,TorusGeometry:eC,TorusBufferGeometry:gg,TextGeometry:tC,TextBufferGeometry:Pb,SphereGeometry:nC,SphereBufferGeometry:yg,RingGeometry:rC,RingBufferGeometry:Mb,PlaneGeometry:pb,PlaneBufferGeometry:hg,LatheGeometry:iC,LatheBufferGeometry:Eb,ShapeGeometry:bg,ShapeBufferGeometry:xg,ExtrudeGeometry:vg,ExtrudeBufferGeometry:bc,EdgesGeometry:oC,ConeGeometry:sC,ConeBufferGeometry:Tb,CylinderGeometry:_g,CylinderBufferGeometry:xc,CircleGeometry:aC,CircleBufferGeometry:Ob,BoxGeometry:NJe,BoxBufferGeometry:wx});function wg(e){Gt.call(this),this.type="ShadowMaterial",this.color=new ht(0),this.transparent=!0,this.setValues(e)}wg.prototype=Object.create(Gt.prototype);wg.prototype.constructor=wg;wg.prototype.isShadowMaterial=!0;wg.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.color.copy(e.color),this};function Yu(e){ri.call(this,e),this.type="RawShaderMaterial"}Yu.prototype=Object.create(ri.prototype);Yu.prototype.constructor=Yu;Yu.prototype.isRawShaderMaterial=!0;function _c(e){Gt.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ht(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fv,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}_c.prototype=Object.create(Gt.prototype);_c.prototype.constructor=_c;_c.prototype.isMeshStandardMaterial=!0;_c.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this};function Sg(e){_c.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new et(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(e)}Sg.prototype=Object.create(_c.prototype);Sg.prototype.constructor=Sg;Sg.prototype.isMeshPhysicalMaterial=!0;Sg.prototype.copy=function(e){return _c.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new ht).copy(e.sheen):this.sheen=null,this.transparency=e.transparency,this};function ah(e){Gt.call(this),this.type="MeshPhongMaterial",this.color=new ht(16777215),this.specular=new ht(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fv,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=EE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}ah.prototype=Object.create(Gt.prototype);ah.prototype.constructor=ah;ah.prototype.isMeshPhongMaterial=!0;ah.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Cg(e){Gt.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ht(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fv,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Cg.prototype=Object.create(Gt.prototype);Cg.prototype.constructor=Cg;Cg.prototype.isMeshToonMaterial=!0;Cg.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Ag(e){Gt.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fv,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Ag.prototype=Object.create(Gt.prototype);Ag.prototype.constructor=Ag;Ag.prototype.isMeshNormalMaterial=!0;Ag.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Pg(e){Gt.call(this),this.type="MeshLambertMaterial",this.color=new ht(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ht(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=EE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Pg.prototype=Object.create(Gt.prototype);Pg.prototype.constructor=Pg;Pg.prototype.isMeshLambertMaterial=!0;Pg.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Mg(e){Gt.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ht(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fv,this.normalScale=new et(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Mg.prototype=Object.create(Gt.prototype);Mg.prototype.constructor=Mg;Mg.prototype.isMeshMatcapMaterial=!0;Mg.prototype.copy=function(e){return Gt.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Eg(e){$r.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Eg.prototype=Object.create($r.prototype);Eg.prototype.constructor=Eg;Eg.prototype.isLineDashedMaterial=!0;Eg.prototype.copy=function(e){return $r.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var nrt=Object.freeze({__proto__:null,ShadowMaterial:wg,SpriteMaterial:rh,RawShaderMaterial:Yu,ShaderMaterial:ri,PointsMaterial:ih,MeshPhysicalMaterial:Sg,MeshStandardMaterial:_c,MeshPhongMaterial:ah,MeshToonMaterial:Cg,MeshNormalMaterial:Ag,MeshLambertMaterial:Pg,MeshDepthMaterial:eh,MeshDistanceMaterial:th,MeshBasicMaterial:wa,MeshMatcapMaterial:Mg,LineDashedMaterial:Eg,LineBasicMaterial:$r,Material:Gt});const mr={arraySlice:function(e,t,n){return mr.isTypedArray(e)?new e.constructor(e.subarray(t,n!==void 0?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(i,o){return e[i]-e[o]}const n=e.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(t),r},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,s=0;s!==r;++o){const a=n[o]*t;for(let l=0;l!==t;++l)i[s++]=e[a+l]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;o!==void 0&&o[r]===void 0;)o=e[i++];if(o===void 0)return;let s=o[r];if(s!==void 0)if(Array.isArray(s))do s=o[r],s!==void 0&&(t.push(o.time),n.push.apply(n,s)),o=e[i++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[r],s!==void 0&&(t.push(o.time),s.toArray(n,n.length)),o=e[i++];while(o!==void 0);else do s=o[r],s!==void 0&&(t.push(o.time),n.push(s)),o=e[i++];while(o!==void 0)},subclip:function(e,t,n,r,i){i=i||30;const o=e.clone();o.name=t;const s=[];for(let l=0;l<o.tracks.length;++l){const c=o.tracks[l],u=c.getValueSize(),d=[],f=[];for(let h=0;h<c.times.length;++h){const p=c.times[h]*i;if(!(p<n||p>=r)){d.push(c.times[h]);for(let g=0;g<u;++g)f.push(c.values[h*u+g])}}d.length!==0&&(c.times=mr.convertArray(d,c.times.constructor),c.values=mr.convertArray(f,c.values.constructor),s.push(c))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=e),(r===void 0||r<=0)&&(r=30);const i=e.tracks.length,o=t/r;for(let s=0;s<i;++s){const a=n.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=e.tracks.find(function(p){return p.name===a.name&&p.ValueTypeName===l});if(c===void 0)continue;const u=a.getValueSize(),d=a.times.length-1;let f;if(o<=a.times[0])f=mr.arraySlice(a.values,0,a.valueSize);else if(o>=a.times[d]){const p=d*u;f=mr.arraySlice(a.values,p)}else{const p=a.createInterpolant();p.evaluate(o),f=p.resultBuffer}l==="quaternion"&&new Fn(f[0],f[1],f[2],f[3]).normalize().conjugate().toArray(f);const h=c.times.length;for(let p=0;p<h;++p){const g=p*u;if(l==="quaternion")Fn.multiplyQuaternionsFlat(c.values,g,f,0,c.values,g);else for(let v=0;v<u;++v)c.values[g+v]-=f[v]}}return e.blendMode=gne,e}};function Is(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}Object.assign(Is.prototype,{evaluate:function(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let s=n+2;;){if(r===void 0){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=i)){const s=t[1];e<s&&(n=2,i=s);for(let a=n-2;;){if(i===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0;break n}break e}for(;n<o;){const s=n+o>>>1;e<t[s]?o=s:n=s+1}if(r=t[n],i=t[n-1],i===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(Is.prototype,{beforeStart_:Is.prototype.copySampleValue_,afterEnd_:Is.prototype.copySampleValue_});function dL(e,t,n,r){Is.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}dL.prototype=Object.assign(Object.create(Is.prototype),{constructor:dL,DefaultSettings_:{endingStart:ug,endingEnd:ug},intervalChanged_:function(e,t,n){let r=this.parameterPositions,i=e-2,o=e+1,s=r[i],a=r[o];if(s===void 0)switch(this.getSettings_().endingStart){case Yp:i=e,s=2*t-n;break;case z2:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(a===void 0)switch(this.getSettings_().endingEnd){case Yp:o=e,a=2*n-t;break;case z2:o=1,a=n+r[1]-r[0];break;default:o=e-1,a=t}const l=(n-t)*.5,c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,f=this._weightNext,h=(n-t)/(r-t),p=h*h,g=p*h,v=-d*g+2*d*p-d*h,m=(1+d)*g+(-1.5-2*d)*p+(-.5+d)*h+1,y=(-1-f)*g+(1.5+f)*p+.5*h,b=f*g-f*p;for(let _=0;_!==s;++_)i[_]=v*o[c+_]+m*o[l+_]+y*o[a+_]+b*o[u+_];return i}});function lC(e,t,n,r){Is.call(this,e,t,n,r)}lC.prototype=Object.assign(Object.create(Is.prototype),{constructor:lC,interpolate_:function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=(n-t)/(r-t),u=1-c;for(let d=0;d!==s;++d)i[d]=o[l+d]*u+o[a+d]*c;return i}});function fL(e,t,n,r){Is.call(this,e,t,n,r)}fL.prototype=Object.assign(Object.create(Is.prototype),{constructor:fL,interpolate_:function(e){return this.copySampleValue_(e-1)}});function Fi(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mr.convertArray(t,this.TimeBufferType),this.values=mr.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}Object.assign(Fi,{toJSON:function(e){const t=e.constructor;let n;if(t.toJSON!==void 0)n=t.toJSON(e);else{n={name:e.name,times:mr.convertArray(e.times,Array),values:mr.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}});Object.assign(Fi.prototype,{constructor:Fi,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:bS,InterpolantFactoryMethodDiscrete:function(e){return new fL(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new lC(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new dL(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case F2:t=this.InterpolantFactoryMethodDiscrete;break;case bS:t=this.InterpolantFactoryMethodLinear;break;case eO:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return F2;case this.InterpolantFactoryMethodLinear:return bS;case this.InterpolantFactoryMethodSmooth:return eO}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this},scale:function(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;o!==-1&&n[o]>t;)--o;if(++o,i!==0||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const s=this.getValueSize();this.times=mr.arraySlice(n,i,o),this.values=mr.arraySlice(this.values,i*s,o*s)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;i===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==i;s++){const a=n[s];if(typeof a=="number"&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,a),e=!1;break}if(o!==null&&o>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,a,o),e=!1;break}o=a}if(r!==void 0&&mr.isTypedArray(r))for(let s=0,a=r.length;s!==a;++s){const l=r[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),e=!1;break}}return e},optimize:function(){const e=mr.arraySlice(this.times),t=mr.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===eO,i=e.length-1;let o=1;for(let s=1;s<i;++s){let a=!1;const l=e[s],c=e[s+1];if(l!==c&&(s!==1||l!==l[0]))if(r)a=!0;else{const u=s*n,d=u-n,f=u+n;for(let h=0;h!==n;++h){const p=t[u+h];if(p!==t[d+h]||p!==t[f+h]){a=!0;break}}}if(a){if(s!==o){e[o]=e[s];const u=s*n,d=o*n;for(let f=0;f!==n;++f)t[d+f]=t[u+f]}++o}}if(i>0){e[o]=e[i];for(let s=i*n,a=o*n,l=0;l!==n;++l)t[a+l]=t[s+l];++o}return o!==e.length?(this.times=mr.arraySlice(e,0,o),this.values=mr.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this},clone:function(){const e=mr.arraySlice(this.times,0),t=mr.arraySlice(this.values,0),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}});function hL(e,t,n){Fi.call(this,e,t,n)}hL.prototype=Object.assign(Object.create(Fi.prototype),{constructor:hL,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:F2,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function pL(e,t,n,r){Fi.call(this,e,t,n,r)}pL.prototype=Object.assign(Object.create(Fi.prototype),{constructor:pL,ValueTypeName:"color"});function Ib(e,t,n,r){Fi.call(this,e,t,n,r)}Ib.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Ib,ValueTypeName:"number"});function mL(e,t,n,r){Is.call(this,e,t,n,r)}mL.prototype=Object.assign(Object.create(Is.prototype),{constructor:mL,interpolate_:function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(r-t);let l=e*s;for(let c=l+s;l!==c;l+=4)Fn.slerpFlat(i,0,o,l-s,o,l,a);return i}});function cC(e,t,n,r){Fi.call(this,e,t,n,r)}cC.prototype=Object.assign(Object.create(Fi.prototype),{constructor:cC,ValueTypeName:"quaternion",DefaultInterpolation:bS,InterpolantFactoryMethodLinear:function(e){return new mL(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function gL(e,t,n,r){Fi.call(this,e,t,n,r)}gL.prototype=Object.assign(Object.create(Fi.prototype),{constructor:gL,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:F2,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Rb(e,t,n,r){Fi.call(this,e,t,n,r)}Rb.prototype=Object.assign(Object.create(Fi.prototype),{constructor:Rb,ValueTypeName:"vector"});function ia(e,t,n,r){this.name=e,this.tracks=n,this.duration=t!==void 0?t:-1,this.blendMode=r!==void 0?r:VD,this.uuid=Xt.generateUUID(),this.duration<0&&this.resetDuration()}function rrt(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ib;case"vector":case"vector2":case"vector3":case"vector4":return Rb;case"color":return pL;case"quaternion":return cC;case"bool":case"boolean":return hL;case"string":return gL}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function irt(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=rrt(e.type);if(e.times===void 0){const n=[],r=[];mr.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(ia,{parse:function(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let i=0,o=n.length;i!==o;++i)t.push(irt(n[i]).scale(r));return new ia(e.name,e.duration,t,e.blendMode)},toJSON:function(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=n.length;i!==o;++i)t.push(Fi.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){const i=t.length,o=[];for(let s=0;s<i;s++){let a=[],l=[];a.push((s+i-1)%i,s,(s+1)%i),l.push(0,1,0);const c=mr.getKeyframeOrder(a);a=mr.sortedArray(a,1,c),l=mr.sortedArray(l,1,c),!r&&a[0]===0&&(a.push(i),l.push(l[0])),o.push(new Ib(".morphTargetInfluences["+t[s].name+"]",a,l).scale(1/n))}return new ia(e,-1,o)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let s=0,a=e.length;s<a;s++){const l=e[s],c=l.name.match(i);if(c&&c.length>1){const u=c[1];let d=r[u];d||(r[u]=d=[]),d.push(l)}}const o=[];for(const s in r)o.push(ia.CreateFromMorphTargetSequence(s,r[s],t,n));return o},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,d,f,h,p){if(f.length!==0){const g=[],v=[];mr.flattenJSON(f,g,v,h),g.length!==0&&p.push(new u(d,g,v))}},r=[],i=e.name||"default",o=e.fps||30,s=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let u=0;u<l.length;u++){const d=l[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let h;for(h=0;h<d.length;h++)if(d[h].morphTargets)for(let p=0;p<d[h].morphTargets.length;p++)f[d[h].morphTargets[p]]=-1;for(const p in f){const g=[],v=[];for(let m=0;m!==d[h].morphTargets.length;++m){const y=d[h];g.push(y.time),v.push(y.morphTarget===p?1:0)}r.push(new Ib(".morphTargetInfluence["+p+"]",g,v))}a=f.length*(o||1)}else{const f=".bones["+t[u].name+"]";n(Rb,f+".position",d,"pos",r),n(cC,f+".quaternion",d,"rot",r),n(Rb,f+".scale",d,"scl",r)}}return r.length===0?null:new ia(i,a,r,s)}});Object.assign(ia.prototype,{resetDuration:function(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const i=this.tracks[n];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new ia(this.name,this.duration,e,this.blendMode)}});const Tg={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function zne(e,t,n){const r=this;let i=!1,o=0,s=0,a;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(c){s++,i===!1&&r.onStart!==void 0&&r.onStart(c,o,s),i=!0},this.itemEnd=function(c){o++,r.onProgress!==void 0&&r.onProgress(c,o,s),o===s&&(i=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,u){return l.push(c,u),this},this.removeHandler=function(c){const u=l.indexOf(c);return u!==-1&&l.splice(u,2),this},this.getHandler=function(c){for(let u=0,d=l.length;u<d;u+=2){const f=l[u],h=l[u+1];if(f.global&&(f.lastIndex=0),f.test(c))return h}return null}}const ort=new zne;function Bn(e){this.manager=e!==void 0?e:ort,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(Bn.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise(function(r,i){n.load(e,r,t,i)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const Ys={};function pl(e){Bn.call(this,e)}pl.prototype=Object.assign(Object.create(Bn.prototype),{constructor:pl,load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Tg.get(e);if(o!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(Ys[e]!==void 0){Ys[e].push({onLoad:t,onProgress:n,onError:r});return}const s=/^data:(.*?)(;base64)?,(.*)$/,a=e.match(s);let l;if(a){const c=a[1],u=!!a[2];let d=a[3];d=decodeURIComponent(d),u&&(d=atob(d));try{let f;const h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":const p=new Uint8Array(d.length);for(let v=0;v<d.length;v++)p[v]=d.charCodeAt(v);h==="blob"?f=new Blob([p.buffer],{type:c}):f=p.buffer;break;case"document":f=new DOMParser().parseFromString(d,c);break;case"json":f=JSON.parse(d);break;default:f=d;break}setTimeout(function(){t&&t(f),i.manager.itemEnd(e)},0)}catch(f){setTimeout(function(){r&&r(f),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{Ys[e]=[],Ys[e].push({onLoad:t,onProgress:n,onError:r}),l=new XMLHttpRequest,l.open("GET",e,!0),l.addEventListener("load",function(c){const u=this.response,d=Ys[e];if(delete Ys[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Tg.add(e,u);for(let f=0,h=d.length;f<h;f++){const p=d[f];p.onLoad&&p.onLoad(u)}i.manager.itemEnd(e)}else{for(let f=0,h=d.length;f<h;f++){const p=d[f];p.onError&&p.onError(c)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),l.addEventListener("progress",function(c){const u=Ys[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onProgress&&h.onProgress(c)}},!1),l.addEventListener("error",function(c){const u=Ys[e];delete Ys[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onError&&h.onError(c)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),l.addEventListener("abort",function(c){const u=Ys[e];delete Ys[e];for(let d=0,f=u.length;d<f;d++){const h=u[d];h.onError&&h.onError(c)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const c in this.requestHeader)l.setRequestHeader(c,this.requestHeader[c]);l.send(null)}return i.manager.itemStart(e),l},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}});function ZU(e){Bn.call(this,e)}ZU.prototype=Object.assign(Object.create(Bn.prototype),{constructor:ZU,load:function(e,t,n,r){const i=this,o=new pl(i.manager);o.setPath(i.path),o.load(e,function(s){try{t(i.parse(JSON.parse(s)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}},n,r)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const r=ia.parse(e[n]);t.push(r)}return t}});function JU(e){Bn.call(this,e)}JU.prototype=Object.assign(Object.create(Bn.prototype),{constructor:JU,load:function(e,t,n,r){const i=this,o=[],s=new yb;s.image=o;const a=new pl(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer");let l=0;function c(u){a.load(e[u],function(d){const f=i.parse(d,!0);o[u]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},l+=1,l===6&&(f.mipmapCount===1&&(s.minFilter=Wr),s.format=f.format,s.needsUpdate=!0,t&&t(s))},n,r)}if(Array.isArray(e))for(let u=0,d=e.length;u<d;++u)c(u);else a.load(e,function(u){const d=i.parse(u,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let h=0;h<f;h++){o[h]={mipmaps:[]};for(let p=0;p<d.mipmapCount;p++)o[h].mipmaps.push(d.mipmaps[h*d.mipmapCount+p]),o[h].format=d.format,o[h].width=d.width,o[h].height=d.height}}else s.image.width=d.width,s.image.height=d.height,s.mipmaps=d.mipmaps;d.mipmapCount===1&&(s.minFilter=Wr),s.format=d.format,s.needsUpdate=!0,t&&t(s)},n,r);return s}});function QU(e){Bn.call(this,e)}QU.prototype=Object.assign(Object.create(Bn.prototype),{constructor:QU,load:function(e,t,n,r){const i=this,o=new yc,s=new pl(this.manager);return s.setResponseType("arraybuffer"),s.setPath(this.path),s.load(e,function(a){const l=i.parse(a);l&&(l.image!==void 0?o.image=l.image:l.data!==void 0&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=l.wrapS!==void 0?l.wrapS:po,o.wrapT=l.wrapT!==void 0?l.wrapT:po,o.magFilter=l.magFilter!==void 0?l.magFilter:Wr,o.minFilter=l.minFilter!==void 0?l.minFilter:Wr,o.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(o.format=l.format),l.type!==void 0&&(o.type=l.type),l.mipmaps!==void 0&&(o.mipmaps=l.mipmaps,o.minFilter=TE),l.mipmapCount===1&&(o.minFilter=Wr),o.needsUpdate=!0,t&&t(o,l))},n,r),o}});function kb(e){Bn.call(this,e)}kb.prototype=Object.assign(Object.create(Bn.prototype),{constructor:kb,load:function(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Tg.get(e);if(o!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;const s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),Tg.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(c){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),r&&r(c),i.manager.itemError(e),i.manager.itemEnd(e)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),i.manager.itemStart(e),s.src=e,s}});function vL(e){Bn.call(this,e)}vL.prototype=Object.assign(Object.create(Bn.prototype),{constructor:vL,load:function(e,t,n,r){const i=new Wu,o=new kb(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(l){o.load(e[l],function(c){i.images[l]=c,s++,s===6&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(let l=0;l<e.length;++l)a(l);return i}});function yL(e){Bn.call(this,e)}yL.prototype=Object.assign(Object.create(Bn.prototype),{constructor:yL,load:function(e,t,n,r){const i=new Wn,o=new kb(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(s){i.image=s;const a=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;i.format=a?Mf:So,i.needsUpdate=!0,t!==void 0&&t(i)},n,r),i}});function Bt(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Bt.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){e===void 0&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){e===void 0&&(e=5);const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let r=0,i=n.length,o;t?o=t:o=e*n[i-1];let s=0,a=i-1,l;for(;s<=a;)if(r=Math.floor(s+(a-s)/2),l=n[r]-o,l<0)s=r+1;else if(l>0)a=r-1;else{a=r;break}if(r=a,n[r]===o)return r/(i-1);const c=n[r],d=n[r+1]-c,f=(o-c)/d;return(r+f)/(i-1)},getTangent:function(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),s=this.getPoint(i),a=t||(o.isVector2?new et:new W);return a.copy(s).sub(o).normalize(),a},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new W,r=[],i=[],o=[],s=new W,a=new lt;for(let f=0;f<=e;f++){const h=f/e;r[f]=this.getTangentAt(h,new W),r[f].normalize()}i[0]=new W,o[0]=new W;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],s),o[0].crossVectors(r[0],i[0]);for(let f=1;f<=e;f++){if(i[f]=i[f-1].clone(),o[f]=o[f-1].clone(),s.crossVectors(r[f-1],r[f]),s.length()>Number.EPSILON){s.normalize();const h=Math.acos(Xt.clamp(r[f-1].dot(r[f]),-1,1));i[f].applyMatrix4(a.makeRotationAxis(s,h))}o[f].crossVectors(r[f],i[f])}if(t===!0){let f=Math.acos(Xt.clamp(i[0].dot(i[e]),-1,1));f/=e,r[0].dot(s.crossVectors(i[0],i[e]))>0&&(f=-f);for(let h=1;h<=e;h++)i[h].applyMatrix4(a.makeRotationAxis(r[h],f*h)),o[h].crossVectors(r[h],i[h])}return{tangents:r,normals:i,binormals:o}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});function zs(e,t,n,r,i,o,s,a){Bt.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}zs.prototype=Object.create(Bt.prototype);zs.prototype.constructor=zs;zs.prototype.isEllipseCurve=!0;zs.prototype.getPoint=function(e,t){const n=t||new et,r=Math.PI*2;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(o?i=0:i=r),this.aClockwise===!0&&!o&&(i===r?i=-r:i=i-r);const s=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=a-this.aX,f=l-this.aY;a=d*c-f*u+this.aX,l=d*u+f*c+this.aY}return n.set(a,l)};zs.prototype.copy=function(e){return Bt.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};zs.prototype.toJSON=function(){const e=Bt.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e};zs.prototype.fromJSON=function(e){return Bt.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};function Lb(e,t,n,r,i,o){zs.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}Lb.prototype=Object.create(zs.prototype);Lb.prototype.constructor=Lb;Lb.prototype.isArcCurve=!0;function qD(){let e=0,t=0,n=0,r=0;function i(o,s,a,l){e=o,t=a,n=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,c){i(s,a,c*(a-o),c*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,c,u,d){let f=(s-o)/c-(a-o)/(c+u)+(a-s)/u,h=(a-s)/u-(l-s)/(u+d)+(l-a)/d;f*=u,h*=u,i(s,a,f,h)},calc:function(o){const s=o*o,a=s*o;return e+t*o+n*s+r*a}}}const rw=new W,AO=new qD,PO=new qD,MO=new qD;function es(e,t,n,r){Bt.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}es.prototype=Object.create(Bt.prototype);es.prototype.constructor=es;es.prototype.isCatmullRomCurve3=!0;es.prototype.getPoint=function(e,t){const n=t||new W,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let s=Math.floor(o),a=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/i)+1)*i:a===0&&s===i-1&&(s=i-2,a=1);let l,c,u,d;if(this.closed||s>0?l=r[(s-1)%i]:(rw.subVectors(r[0],r[1]).add(r[0]),l=rw),c=r[s%i],u=r[(s+1)%i],this.closed||s+2<i?d=r[(s+2)%i]:(rw.subVectors(r[i-1],r[i-2]).add(r[i-1]),d=rw),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let h=Math.pow(l.distanceToSquared(c),f),p=Math.pow(c.distanceToSquared(u),f),g=Math.pow(u.distanceToSquared(d),f);p<1e-4&&(p=1),h<1e-4&&(h=p),g<1e-4&&(g=p),AO.initNonuniformCatmullRom(l.x,c.x,u.x,d.x,h,p,g),PO.initNonuniformCatmullRom(l.y,c.y,u.y,d.y,h,p,g),MO.initNonuniformCatmullRom(l.z,c.z,u.z,d.z,h,p,g)}else this.curveType==="catmullrom"&&(AO.initCatmullRom(l.x,c.x,u.x,d.x,this.tension),PO.initCatmullRom(l.y,c.y,u.y,d.y,this.tension),MO.initCatmullRom(l.z,c.z,u.z,d.z,this.tension));return n.set(AO.calc(a),PO.calc(a),MO.calc(a)),n};es.prototype.copy=function(e){Bt.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};es.prototype.toJSON=function(){const e=Bt.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e};es.prototype.fromJSON=function(e){Bt.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new W().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};function e9(e,t,n,r,i){const o=(r-t)*.5,s=(i-n)*.5,a=e*e,l=e*a;return(2*n-2*r+o+s)*l+(-3*n+3*r-2*o-s)*a+o*e+n}function srt(e,t){const n=1-e;return n*n*t}function art(e,t){return 2*(1-e)*e*t}function lrt(e,t){return e*e*t}function vy(e,t,n,r){return srt(e,t)+art(e,n)+lrt(e,r)}function crt(e,t){const n=1-e;return n*n*n*t}function urt(e,t){const n=1-e;return 3*n*n*e*t}function drt(e,t){return 3*(1-e)*e*e*t}function frt(e,t){return e*e*e*t}function yy(e,t,n,r,i){return crt(e,t)+urt(e,n)+drt(e,r)+frt(e,i)}function ml(e,t,n,r){Bt.call(this),this.type="CubicBezierCurve",this.v0=e||new et,this.v1=t||new et,this.v2=n||new et,this.v3=r||new et}ml.prototype=Object.create(Bt.prototype);ml.prototype.constructor=ml;ml.prototype.isCubicBezierCurve=!0;ml.prototype.getPoint=function(e,t){const n=t||new et,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(yy(e,r.x,i.x,o.x,s.x),yy(e,r.y,i.y,o.y,s.y)),n};ml.prototype.copy=function(e){return Bt.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};ml.prototype.toJSON=function(){const e=Bt.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};ml.prototype.fromJSON=function(e){return Bt.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function wc(e,t,n,r){Bt.call(this),this.type="CubicBezierCurve3",this.v0=e||new W,this.v1=t||new W,this.v2=n||new W,this.v3=r||new W}wc.prototype=Object.create(Bt.prototype);wc.prototype.constructor=wc;wc.prototype.isCubicBezierCurve3=!0;wc.prototype.getPoint=function(e,t){const n=t||new W,r=this.v0,i=this.v1,o=this.v2,s=this.v3;return n.set(yy(e,r.x,i.x,o.x,s.x),yy(e,r.y,i.y,o.y,s.y),yy(e,r.z,i.z,o.z,s.z)),n};wc.prototype.copy=function(e){return Bt.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};wc.prototype.toJSON=function(){const e=Bt.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};wc.prototype.fromJSON=function(e){return Bt.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function ts(e,t){Bt.call(this),this.type="LineCurve",this.v1=e||new et,this.v2=t||new et}ts.prototype=Object.create(Bt.prototype);ts.prototype.constructor=ts;ts.prototype.isLineCurve=!0;ts.prototype.getPoint=function(e,t){const n=t||new et;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};ts.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};ts.prototype.getTangent=function(e,t){const n=t||new et;return n.copy(this.v2).sub(this.v1).normalize(),n};ts.prototype.copy=function(e){return Bt.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};ts.prototype.toJSON=function(){const e=Bt.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};ts.prototype.fromJSON=function(e){return Bt.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function gl(e,t){Bt.call(this),this.type="LineCurve3",this.v1=e||new W,this.v2=t||new W}gl.prototype=Object.create(Bt.prototype);gl.prototype.constructor=gl;gl.prototype.isLineCurve3=!0;gl.prototype.getPoint=function(e,t){const n=t||new W;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};gl.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};gl.prototype.copy=function(e){return Bt.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};gl.prototype.toJSON=function(){const e=Bt.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};gl.prototype.fromJSON=function(e){return Bt.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function vl(e,t,n){Bt.call(this),this.type="QuadraticBezierCurve",this.v0=e||new et,this.v1=t||new et,this.v2=n||new et}vl.prototype=Object.create(Bt.prototype);vl.prototype.constructor=vl;vl.prototype.isQuadraticBezierCurve=!0;vl.prototype.getPoint=function(e,t){const n=t||new et,r=this.v0,i=this.v1,o=this.v2;return n.set(vy(e,r.x,i.x,o.x),vy(e,r.y,i.y,o.y)),n};vl.prototype.copy=function(e){return Bt.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};vl.prototype.toJSON=function(){const e=Bt.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};vl.prototype.fromJSON=function(e){return Bt.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Sc(e,t,n){Bt.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new W,this.v1=t||new W,this.v2=n||new W}Sc.prototype=Object.create(Bt.prototype);Sc.prototype.constructor=Sc;Sc.prototype.isQuadraticBezierCurve3=!0;Sc.prototype.getPoint=function(e,t){const n=t||new W,r=this.v0,i=this.v1,o=this.v2;return n.set(vy(e,r.x,i.x,o.x),vy(e,r.y,i.y,o.y),vy(e,r.z,i.z,o.z)),n};Sc.prototype.copy=function(e){return Bt.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Sc.prototype.toJSON=function(){const e=Bt.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Sc.prototype.fromJSON=function(e){return Bt.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function yl(e){Bt.call(this),this.type="SplineCurve",this.points=e||[]}yl.prototype=Object.create(Bt.prototype);yl.prototype.constructor=yl;yl.prototype.isSplineCurve=!0;yl.prototype.getPoint=function(e,t){const n=t||new et,r=this.points,i=(r.length-1)*e,o=Math.floor(i),s=i-o,a=r[o===0?o:o-1],l=r[o],c=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(e9(s,a.x,l.x,c.x,u.x),e9(s,a.y,l.y,c.y,u.y)),n};yl.prototype.copy=function(e){Bt.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this};yl.prototype.toJSON=function(){const e=Bt.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e};yl.prototype.fromJSON=function(e){Bt.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new et().fromArray(r))}return this};var bL=Object.freeze({__proto__:null,ArcCurve:Lb,CatmullRomCurve3:es,CubicBezierCurve:ml,CubicBezierCurve3:wc,EllipseCurve:zs,LineCurve:ts,LineCurve3:gl,QuadraticBezierCurve:vl,QuadraticBezierCurve3:Sc,SplineCurve:yl});function mu(){Bt.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}mu.prototype=Object.assign(Object.create(Bt.prototype),{constructor:mu,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ts(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=t){const i=n[r]-t,o=this.curves[r],s=o.getLength(),a=s===0?0:1-i/s;return o.getPointAt(a)}r++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e===void 0&&(e=40);const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],s=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s);for(let l=0;l<a.length;l++){const c=a[l];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Bt.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=Bt.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Bt.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new bL[r.type]().fromJSON(r))}return this}});function Ya(e){mu.call(this),this.type="Path",this.currentPoint=new et,e&&this.setFromPoints(e)}Ya.prototype=Object.assign(Object.create(mu.prototype),{constructor:Ya,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new ts(this.currentPoint.clone(),new et(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,r){const i=new vl(this.currentPoint.clone(),new et(e,t),new et(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(e,t,n,r,i,o){const s=new ml(this.currentPoint.clone(),new et(e,t),new et(n,r),new et(i,o));return this.curves.push(s),this.currentPoint.set(i,o),this},splineThru:function(e){const t=[this.currentPoint.clone()].concat(e),n=new yl(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,r,i,o){const s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+s,t+a,n,r,i,o),this},absarc:function(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this},ellipse:function(e,t,n,r,i,o,s,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,s,a),this},absellipse:function(e,t,n,r,i,o,s,a){const l=new zs(e,t,n,r,i,o,s,a);if(this.curves.length>0){const u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(e){return mu.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=mu.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return mu.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}});function Tf(e){Ya.call(this,e),this.uuid=Xt.generateUUID(),this.type="Shape",this.holes=[]}Tf.prototype=Object.assign(Object.create(Ya.prototype),{constructor:Tf,getPointsHoles:function(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ya.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){const e=Ya.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Ya.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new Ya().fromJSON(r))}return this}});function nr(e,t){_t.call(this),this.type="Light",this.color=new ht(e),this.intensity=t!==void 0?t:1,this.receiveShadow=void 0}nr.prototype=Object.assign(Object.create(_t.prototype),{constructor:nr,isLight:!0,copy:function(e){return _t.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=_t.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}});function xL(e,t,n){nr.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(_t.DefaultUp),this.updateMatrix(),this.groundColor=new ht(t)}xL.prototype=Object.assign(Object.create(nr.prototype),{constructor:xL,isHemisphereLight:!0,copy:function(e){return nr.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});function Cc(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new et(512,512),this.map=null,this.mapPass=null,this.matrix=new lt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Sx,this._frameExtents=new et(1,1),this._viewportCount=1,this._viewports=[new In(0,0,1,1)]}Object.assign(Cc.prototype,{_projScreenMatrix:new lt,_lightPositionWorld:new W,_lookTarget:new W,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),r.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}});function _L(){Cc.call(this,new Ur(50,1,.5,500))}_L.prototype=Object.assign(Object.create(Cc.prototype),{constructor:_L,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=Xt.RAD2DEG*2*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;(n!==t.fov||r!==t.aspect||i!==t.far)&&(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),Cc.prototype.updateMatrices.call(this,e)}});function uC(e,t,n,r,i,o){nr.call(this,e,t),this.type="SpotLight",this.position.copy(_t.DefaultUp),this.updateMatrix(),this.target=new _t,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(s){this.intensity=s/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=r!==void 0?r:Math.PI/3,this.penumbra=i!==void 0?i:0,this.decay=o!==void 0?o:1,this.shadow=new _L}uC.prototype=Object.assign(Object.create(nr.prototype),{constructor:uC,isSpotLight:!0,copy:function(e){return nr.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function wL(){Cc.call(this,new Ur(90,1,.5,500)),this._frameExtents=new et(4,2),this._viewportCount=6,this._viewports=[new In(2,1,1,1),new In(0,1,1,1),new In(3,1,1,1),new In(1,1,1,1),new In(3,0,1,1),new In(1,0,1,1)],this._cubeDirections=[new W(1,0,0),new W(-1,0,0),new W(0,0,1),new W(0,0,-1),new W(0,1,0),new W(0,-1,0)],this._cubeUps=[new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,1,0),new W(0,0,1),new W(0,0,-1)]}wL.prototype=Object.assign(Object.create(Cc.prototype),{constructor:wL,isPointLightShadow:!0,updateMatrices:function(e,t){t===void 0&&(t=0);const n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,s=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),s.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s)}});function SL(e,t,n,r){nr.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(i){this.intensity=i/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=r!==void 0?r:1,this.shadow=new wL}SL.prototype=Object.assign(Object.create(nr.prototype),{constructor:SL,isPointLight:!0,copy:function(e){return nr.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});function Xu(e,t,n,r,i,o){vc.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e!==void 0?e:-1,this.right=t!==void 0?t:1,this.top=n!==void 0?n:1,this.bottom=r!==void 0?r:-1,this.near=i!==void 0?i:.1,this.far=o!==void 0?o:2e3,this.updateProjectionMatrix()}Xu.prototype=Object.assign(Object.create(vc.prototype),{constructor:Xu,isOrthographicCamera:!0,copy:function(e,t){return vc.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,s=r+t,a=r-t;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=l*this.view.offsetX,o=i+l*this.view.width,s-=c*this.view.offsetY,a=s-c*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){const t=_t.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}});function CL(){Cc.call(this,new Xu(-5,5,5,-5,.5,500))}CL.prototype=Object.assign(Object.create(Cc.prototype),{constructor:CL,isDirectionalLightShadow:!0,updateMatrices:function(e){Cc.prototype.updateMatrices.call(this,e)}});function AL(e,t){nr.call(this,e,t),this.type="DirectionalLight",this.position.copy(_t.DefaultUp),this.updateMatrix(),this.target=new _t,this.shadow=new CL}AL.prototype=Object.assign(Object.create(nr.prototype),{constructor:AL,isDirectionalLight:!0,copy:function(e){return nr.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function dC(e,t){nr.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}dC.prototype=Object.assign(Object.create(nr.prototype),{constructor:dC,isAmbientLight:!0});function PL(e,t,n,r){nr.call(this,e,t),this.type="RectAreaLight",this.width=n!==void 0?n:10,this.height=r!==void 0?r:10}PL.prototype=Object.assign(Object.create(nr.prototype),{constructor:PL,isRectAreaLight:!0,copy:function(e){return nr.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=nr.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});function YD(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new W)}Object.assign(YD.prototype,{isSphericalHarmonics3:!0,set:function(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*i)),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],1.092548*(n*i)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*i),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],2*.429043*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t},add:function(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},addScaledSH:function(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this},scale:function(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return new this.constructor().copy(this)},fromArray:function(e,t){t===void 0&&(t=0);const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this},toArray:function(e,t){e===void 0&&(e=[]),t===void 0&&(t=0);const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}});Object.assign(YD,{getBasisAt:function(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}});function fa(e,t){nr.call(this,void 0,t),this.type="LightProbe",this.sh=e!==void 0?e:new YD}fa.prototype=Object.assign(Object.create(nr.prototype),{constructor:fa,isLightProbe:!0,copy:function(e){return nr.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=nr.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}});function ML(e){Bn.call(this,e),this.textures={}}ML.prototype=Object.assign(Object.create(Bn.prototype),{constructor:ML,load:function(e,t,n,r){const i=this,o=new pl(i.manager);o.setPath(i.path),o.load(e,function(s){try{t(i.parse(JSON.parse(s)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}},n,r)},parse:function(e){const t=this.textures;function n(i){return t[i]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",i),t[i]}const r=new nrt[e.type];if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=new ht().setHex(e.sheen)),e.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular.setHex(e.specular),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(r.skinning=e.skinning),e.morphTargets!==void 0&&(r.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(r.morphNormals=e.morphNormals),e.dithering!==void 0&&(r.dithering=e.dithering),e.vertexTangents!==void 0&&(r.vertexTangents=e.vertexTangents),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const i in e.uniforms){const o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=new ht().setHex(o.value);break;case"v2":r.uniforms[i].value=new et().fromArray(o.value);break;case"v3":r.uniforms[i].value=new W().fromArray(o.value);break;case"v4":r.uniforms[i].value=new In().fromArray(o.value);break;case"m3":r.uniforms[i].value=new Si().fromArray(o.value);case"m4":r.uniforms[i].value=new lt().fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let i=e.normalScale;Array.isArray(i)===!1&&(i=[i,i]),r.normalScale=new et().fromArray(i)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new et().fromArray(e.clearcoatNormalScale)),r},setTextures:function(e){return this.textures=e,this}});const jne={decodeText:function(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}};function fC(){wt.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}fC.prototype=Object.assign(Object.create(wt.prototype),{constructor:fC,isInstancedBufferGeometry:!0,copy:function(e){return wt.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const e=wt.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}});function EL(e,t,n,r){typeof n=="number"&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Rt.call(this,e,t,n),this.meshPerAttribute=r||1}EL.prototype=Object.assign(Object.create(Rt.prototype),{constructor:EL,isInstancedBufferAttribute:!0,copy:function(e){return Rt.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=Rt.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}});function TL(e){Bn.call(this,e)}TL.prototype=Object.assign(Object.create(Bn.prototype),{constructor:TL,load:function(e,t,n,r){const i=this,o=new pl(i.manager);o.setPath(i.path),o.load(e,function(s){try{t(i.parse(JSON.parse(s)))}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}},n,r)},parse:function(e){const t={},n={};function r(f,h){if(t[h]!==void 0)return t[h];const g=f.interleavedBuffers[h],v=i(f,g.buffer),m=new iw[g.type](v),y=new Ms(m,g.stride);return y.uuid=g.uuid,t[h]=y,y}function i(f,h){if(n[h]!==void 0)return n[h];const g=f.arrayBuffers[h],v=new Uint32Array(g).buffer;return n[h]=v,v}const o=e.isInstancedBufferGeometry?new fC:new wt,s=e.data.index;if(s!==void 0){const f=new iw[s.type](s.array);o.setIndex(new Rt(f,1))}const a=e.data.attributes;for(const f in a){const h=a[f];let p;if(h.isInterleavedBufferAttribute){const g=r(e.data,h.data);p=new nh(g,h.itemSize,h.offset,h.normalized)}else{const g=new iw[h.type](h.array),v=h.isInstancedBufferAttribute?EL:Rt;p=new v(g,h.itemSize,h.normalized)}h.name!==void 0&&(p.name=h.name),o.setAttribute(f,p)}const l=e.data.morphAttributes;if(l)for(const f in l){const h=l[f],p=[];for(let g=0,v=h.length;g<v;g++){const m=h[g];let y;if(m.isInterleavedBufferAttribute){const b=r(e.data,m.data);y=new nh(b,m.itemSize,m.offset,m.normalized)}else{const b=new iw[m.type](m.array);y=new Rt(b,m.itemSize,m.normalized)}m.name!==void 0&&(y.name=m.name),p.push(y)}o.morphAttributes[f]=p}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let f=0,h=u.length;f!==h;++f){const p=u[f];o.addGroup(p.start,p.count,p.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const f=new W;d.center!==void 0&&f.fromArray(d.center),o.boundingSphere=new Dc(f,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}});const iw={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function OL(e){Bn.call(this,e)}OL.prototype=Object.assign(Object.create(Bn.prototype),{constructor:OL,load:function(e,t,n,r){const i=this,o=this.path===""?jne.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const s=new pl(i.manager);s.setPath(this.path),s.load(e,function(a){let l=null;try{l=JSON.parse(a)}catch(u){r!==void 0&&r(u),console.error("THREE:ObjectLoader: Can't parse "+e+".",u.message);return}const c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}i.parse(l,t)},n,r)},parse:function(e,t){const n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){t!==void 0&&t(a)}),o=this.parseTextures(e.textures,i),s=this.parseMaterials(e.materials,o),a=this.parseObject(e.object,r,s);return e.animations&&(a.animations=this.parseAnimations(e.animations)),(e.images===void 0||e.images.length===0)&&t!==void 0&&t(a),a},parseShape:function(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const i=new Tf().fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){const n={};let r;if(e!==void 0){const i=new TL;for(let o=0,s=e.length;o<s;o++){let a;const l=e[o];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Ui[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Ui[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Ui[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Ui[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Ui[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Ui[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Ui[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Ui[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Ui[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Ui[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Ui[l.type](new bL[l.path.type]().fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Ui[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Ui[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":r=[];for(let u=0,d=l.shapes.length;u<d;u++){const f=t[l.shapes[u]];r.push(f)}a=new Ui[l.type](r,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":r=[];for(let u=0,d=l.shapes.length;u<d;u++){const f=t[l.shapes[u]];r.push(f)}const c=l.options.extrudePath;c!==void 0&&(l.options.extrudePath=new bL[c.type]().fromJSON(c)),a=new Ui[l.type](r,l.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n},parseMaterials:function(e,t){const n={},r={};if(e!==void 0){const i=new ML;i.setTextures(t);for(let o=0,s=e.length;o<s;o++){const a=e[o];if(a.type==="MultiMaterial"){const l=[];for(let c=0;c<a.materials.length;c++){const u=a.materials[c];n[u.uuid]===void 0&&(n[u.uuid]=i.parse(u)),l.push(n[u.uuid])}r[a.uuid]=l}else n[a.uuid]===void 0&&(n[a.uuid]=i.parse(a)),r[a.uuid]=n[a.uuid]}}return r},parseAnimations:function(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],i=ia.parse(r);r.uuid!==void 0&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){const n=this,r={};let i;function o(s){return n.manager.itemStart(s),i.load(s,function(){n.manager.itemEnd(s)},void 0,function(){n.manager.itemError(s),n.manager.itemEnd(s)})}if(e!==void 0&&e.length>0){const s=new zne(t);i=new kb(s),i.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.url;if(Array.isArray(u)){r[c.uuid]=[];for(let d=0,f=u.length;d<f;d++){const h=u[d],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:n.resourcePath+h;r[c.uuid].push(o(p))}}else{const d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;r[c.uuid]=o(d)}}}return r},parseTextures:function(e,t){function n(i,o){return typeof i=="number"?i:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",i),o[i])}const r={};if(e!==void 0)for(let i=0,o=e.length;i<o;i++){const s=e[i];s.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),t[s.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",s.image);let a;Array.isArray(t[s.image])?a=new Wu(t[s.image]):a=new Wn(t[s.image]),a.needsUpdate=!0,a.uuid=s.uuid,s.name!==void 0&&(a.name=s.name),s.mapping!==void 0&&(a.mapping=n(s.mapping,hrt)),s.offset!==void 0&&a.offset.fromArray(s.offset),s.repeat!==void 0&&a.repeat.fromArray(s.repeat),s.center!==void 0&&a.center.fromArray(s.center),s.rotation!==void 0&&(a.rotation=s.rotation),s.wrap!==void 0&&(a.wrapS=n(s.wrap[0],t9),a.wrapT=n(s.wrap[1],t9)),s.format!==void 0&&(a.format=s.format),s.type!==void 0&&(a.type=s.type),s.encoding!==void 0&&(a.encoding=s.encoding),s.minFilter!==void 0&&(a.minFilter=n(s.minFilter,n9)),s.magFilter!==void 0&&(a.magFilter=n(s.magFilter,n9)),s.anisotropy!==void 0&&(a.anisotropy=s.anisotropy),s.flipY!==void 0&&(a.flipY=s.flipY),s.premultiplyAlpha!==void 0&&(a.premultiplyAlpha=s.premultiplyAlpha),s.unpackAlignment!==void 0&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(e,t,n){let r;function i(l){return t[l]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",l),t[l]}function o(l){if(l!==void 0){if(Array.isArray(l)){const c=[];for(let u=0,d=l.length;u<d;u++){const f=l[u];n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),c.push(n[f])}return c}return n[l]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",l),n[l]}}let s,a;switch(e.type){case"Scene":r=new dg,e.background!==void 0&&Number.isInteger(e.background)&&(r.background=new ht(e.background)),e.fog!==void 0&&(e.fog.type==="Fog"?r.fog=new U2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(r.fog=new nL(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new Ur(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(r.focus=e.focus),e.zoom!==void 0&&(r.zoom=e.zoom),e.filmGauge!==void 0&&(r.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(r.filmOffset=e.filmOffset),e.view!==void 0&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Xu(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(r.zoom=e.zoom),e.view!==void 0&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new dC(e.color,e.intensity);break;case"DirectionalLight":r=new AL(e.color,e.intensity);break;case"PointLight":r=new SL(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new PL(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new uC(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new xL(e.color,e.groundColor,e.intensity);break;case"LightProbe":r=new fa().fromJSON(e);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":s=i(e.geometry),a=o(e.material),r=new Gn(s,a);break;case"InstancedMesh":s=i(e.geometry),a=o(e.material);const l=e.count,c=e.instanceMatrix;r=new sL(s,a,l),r.instanceMatrix=new Rt(new Float32Array(c.array),16);break;case"LOD":r=new V2;break;case"Line":r=new Fs(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new aL(i(e.geometry),o(e.material));break;case"LineSegments":r=new Sr(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new vb(i(e.geometry),o(e.material));break;case"Sprite":r=new rL(o(e.material));break;case"Group":r=new Tn;break;default:r=new _t}if(r.uuid=e.uuid,e.name!==void 0&&(r.name=e.name),e.matrix!==void 0?(r.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(e.position!==void 0&&r.position.fromArray(e.position),e.rotation!==void 0&&r.rotation.fromArray(e.rotation),e.quaternion!==void 0&&r.quaternion.fromArray(e.quaternion),e.scale!==void 0&&r.scale.fromArray(e.scale)),e.castShadow!==void 0&&(r.castShadow=e.castShadow),e.receiveShadow!==void 0&&(r.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(r.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(r.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(r.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&r.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(r.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(r.visible=e.visible),e.frustumCulled!==void 0&&(r.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(r.renderOrder=e.renderOrder),e.userData!==void 0&&(r.userData=e.userData),e.layers!==void 0&&(r.layers.mask=e.layers),e.children!==void 0){const l=e.children;for(let c=0;c<l.length;c++)r.add(this.parseObject(l[c],t,n))}if(e.type==="LOD"){e.autoUpdate!==void 0&&(r.autoUpdate=e.autoUpdate);const l=e.levels;for(let c=0;c<l.length;c++){const u=l[c],d=r.getObjectByProperty("uuid",u.object);d!==void 0&&r.addLevel(d,u.distance)}}return r}});const hrt={UVMapping:ND,CubeReflectionMapping:FD,CubeRefractionMapping:zD,EquirectangularReflectionMapping:pne,EquirectangularRefractionMapping:jD,CubeUVReflectionMapping:xx,CubeUVRefractionMapping:UD},t9={RepeatWrapping:$2,ClampToEdgeWrapping:po,MirroredRepeatWrapping:D2},n9={NearestFilter:Nn,NearestMipmapNearestFilter:Wk,NearestMipmapLinearFilter:qk,LinearFilter:Wr,LinearMipmapNearestFilter:mne,LinearMipmapLinearFilter:TE};function r9(e){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Bn.call(this,e),this.options={premultiplyAlpha:"none"}}r9.prototype=Object.assign(Object.create(Bn.prototype),{constructor:r9,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Tg.get(e);if(o!==void 0)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;fetch(e).then(function(s){return s.blob()}).then(function(s){return createImageBitmap(s,i.options)}).then(function(s){Tg.add(e,s),t&&t(s),i.manager.itemEnd(e)}).catch(function(s){r&&r(s),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)}});function Une(){this.type="ShapePath",this.color=new ht,this.subPaths=[],this.currentPath=null}Object.assign(Une.prototype,{moveTo:function(e,t){return this.currentPath=new Ya,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this},bezierCurveTo:function(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(m){const y=[];for(let b=0,_=m.length;b<_;b++){const x=m[b],w=new Tf;w.curves=x.curves,y.push(w)}return y}function r(m,y){const b=y.length;let _=!1;for(let x=b-1,w=0;w<b;x=w++){let S=y[x],C=y[w],A=C.x-S.x,T=C.y-S.y;if(Math.abs(T)>Number.EPSILON){if(T<0&&(S=y[w],A=-A,C=y[x],T=-T),m.y<S.y||m.y>C.y)continue;if(m.y===S.y){if(m.x===S.x)return!0}else{const O=T*(m.x-S.x)-A*(m.y-S.y);if(O===0)return!0;if(O<0)continue;_=!_}}else{if(m.y!==S.y)continue;if(C.x<=m.x&&m.x<=S.x||S.x<=m.x&&m.x<=C.x)return!0}}return _}const i=Iu.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return n(o);let s,a,l,c=[];if(o.length===1)return a=o[0],l=new Tf,l.curves=a.curves,c.push(l),c;let u=!i(o[0].getPoints());u=e?!u:u;const d=[],f=[];let h=[],p=0,g;f[p]=void 0,h[p]=[];for(let m=0,y=o.length;m<y;m++)a=o[m],g=a.getPoints(),s=i(g),s=e?!s:s,s?(!u&&f[p]&&p++,f[p]={s:new Tf,p:g},f[p].s.curves=a.curves,u&&p++,h[p]=[]):h[p].push({h:a,p:g[0]});if(!f[0])return n(o);if(f.length>1){let m=!1;const y=[];for(let b=0,_=f.length;b<_;b++)d[b]=[];for(let b=0,_=f.length;b<_;b++){const x=h[b];for(let w=0;w<x.length;w++){const S=x[w];let C=!0;for(let A=0;A<f.length;A++)r(S.p,f[A].p)&&(b!==A&&y.push({froms:b,tos:A,hole:w}),C?(C=!1,d[A].push(S)):m=!0);C&&d[b].push(S)}}y.length>0&&(m||(h=d))}let v;for(let m=0,y=f.length;m<y;m++){l=f[m].s,c.push(l),v=h[m];for(let b=0,_=v.length;b<_;b++)l.holes.push(v[b].h)}return c}});function Vne(e){this.type="Font",this.data=e}Object.assign(Vne.prototype,{isFont:!0,generateShapes:function(e,t){t===void 0&&(t=100);const n=[],r=prt(e,t,this.data);for(let i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}});function prt(e,t,n){const r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,s=[];let a=0,l=0;for(let c=0;c<r.length;c++){const u=r[c];if(u===`
`)a=0,l-=o;else{const d=mrt(u,i,a,l,n);a+=d.offsetX,s.push(d.path)}}return s}function mrt(e,t,n,r,i){const o=i.glyphs[e]||i.glyphs["?"];if(!o){console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");return}const s=new Une;let a,l,c,u,d,f,h,p;if(o.o){const g=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let v=0,m=g.length;v<m;)switch(g[v++]){case"m":a=g[v++]*t+n,l=g[v++]*t+r,s.moveTo(a,l);break;case"l":a=g[v++]*t+n,l=g[v++]*t+r,s.lineTo(a,l);break;case"q":c=g[v++]*t+n,u=g[v++]*t+r,d=g[v++]*t+n,f=g[v++]*t+r,s.quadraticCurveTo(d,f,c,u);break;case"b":c=g[v++]*t+n,u=g[v++]*t+r,d=g[v++]*t+n,f=g[v++]*t+r,h=g[v++]*t+n,p=g[v++]*t+r,s.bezierCurveTo(d,f,h,p,c,u);break}}return{offsetX:o.ha*t,path:s}}function i9(e){Bn.call(this,e)}i9.prototype=Object.assign(Object.create(Bn.prototype),{constructor:i9,load:function(e,t,n,r){const i=this,o=new pl(this.manager);o.setPath(this.path),o.load(e,function(s){let a;try{a=JSON.parse(s)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),a=JSON.parse(s.substring(65,s.length-2))}const l=i.parse(a);t&&t(l)},n,r)},parse:function(e){return new Vne(e)}});let ow;const Hne={getContext:function(){return ow===void 0&&(ow=new(window.AudioContext||window.webkitAudioContext)),ow},setContext:function(e){ow=e}};function IL(e){Bn.call(this,e)}IL.prototype=Object.assign(Object.create(Bn.prototype),{constructor:IL,load:function(e,t,n,r){const i=this,o=new pl(i.manager);o.setResponseType("arraybuffer"),o.setPath(i.path),o.load(e,function(s){try{const a=s.slice(0);Hne.getContext().decodeAudioData(a,function(c){t(c)})}catch(a){r?r(a):console.error(a),i.manager.itemError(e)}},n,r)}});function o9(e,t,n){fa.call(this,void 0,n);const r=new ht().set(e),i=new ht().set(t),o=new W(r.r,r.g,r.b),s=new W(i.r,i.g,i.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(l)}o9.prototype=Object.assign(Object.create(fa.prototype),{constructor:o9,isHemisphereLightProbe:!0,copy:function(e){return fa.prototype.copy.call(this,e),this},toJSON:function(e){return fa.prototype.toJSON.call(this,e)}});function s9(e,t){fa.call(this,void 0,t);const n=new ht().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}s9.prototype=Object.assign(Object.create(fa.prototype),{constructor:s9,isAmbientLightProbe:!0,copy:function(e){return fa.prototype.copy.call(this,e),this},toJSON:function(e){return fa.prototype.toJSON.call(this,e)}});const a9=new lt,l9=new lt;function Gne(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ur,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ur,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(Gne.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const r=e.projectionMatrix.clone(),i=t.eyeSep/2,o=i*t.near/t.focus,s=t.near*Math.tan(Xt.DEG2RAD*t.fov*.5)/t.zoom;let a,l;l9.elements[12]=-i,a9.elements[12]=i,a=-s*t.aspect+o,l=s*t.aspect+o,r.elements[0]=2*t.near/(l-a),r.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(r),a=-s*t.aspect-o,l=s*t.aspect-o,r.elements[0]=2*t.near/(l-a),r.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(l9),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(a9)}});function Wne(e){this.autoStart=e!==void 0?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Wne.prototype,{start:function(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=(typeof performance>"u"?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});const jd=new W,c9=new Fn,grt=new W,Ud=new W;function u9(){_t.call(this),this.type="AudioListener",this.context=Hne.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Wne}u9.prototype=Object.assign(Object.create(_t.prototype),{constructor:u9,getInput:function(){return this.gain},removeFilter:function(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){_t.prototype.updateMatrixWorld.call(this,e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(jd,c9,grt),Ud.set(0,0,-1).applyQuaternion(c9),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(jd.x,r),t.positionY.linearRampToValueAtTime(jd.y,r),t.positionZ.linearRampToValueAtTime(jd.z,r),t.forwardX.linearRampToValueAtTime(Ud.x,r),t.forwardY.linearRampToValueAtTime(Ud.y,r),t.forwardZ.linearRampToValueAtTime(Ud.z,r),t.upX.linearRampToValueAtTime(n.x,r),t.upY.linearRampToValueAtTime(n.y,r),t.upZ.linearRampToValueAtTime(n.z,r)}else t.setPosition(jd.x,jd.y,jd.z),t.setOrientation(Ud.x,Ud.y,Ud.z,n.x,n.y,n.z)}});function $b(e){_t.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}$b.prototype=Object.assign(Object.create(_t.prototype),{constructor:$b,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(e===void 0&&(e=0),this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()},pause:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});const Vd=new W,d9=new Fn,vrt=new W,Hd=new W;function f9(e){$b.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}f9.prototype=Object.assign(Object.create($b.prototype),{constructor:f9,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(e){if(_t.prototype.updateMatrixWorld.call(this,e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Vd,d9,vrt),Hd.set(0,0,1).applyQuaternion(d9);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Vd.x,n),t.positionY.linearRampToValueAtTime(Vd.y,n),t.positionZ.linearRampToValueAtTime(Vd.z,n),t.orientationX.linearRampToValueAtTime(Hd.x,n),t.orientationY.linearRampToValueAtTime(Hd.y,n),t.orientationZ.linearRampToValueAtTime(Hd.z,n)}else t.setPosition(Vd.x,Vd.y,Vd.z),t.setOrientation(Hd.x,Hd.y,Hd.z)}});function qne(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t!==void 0?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}Object.assign(qne.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}});function Yne(e,t,n){this.binding=e,this.valueSize=n;let r,i,o;switch(t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(Yne.prototype,{accumulate:function(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let s=0;s!==r;++s)n[i+s]=n[s];o=t}else{o+=t;const s=t/o;this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const a=t*this._origIndex;this._mixBufferRegion(n,r,a,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){s.setValue(n,r);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*4+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){Fn.slerpFlat(e,t,e,t,e,n,r)},_slerpAdditive:function(e,t,n,r,i){const o=this._workIndex*i;Fn.multiplyQuaternionsFlat(e,o,e,t,e,n),Fn.slerpFlat(e,t,e,t,e,o,r)},_lerp:function(e,t,n,r,i){const o=1-r;for(let s=0;s!==i;++s){const a=t+s;e[a]=e[a]*o+e[n+s]*r}},_lerpAdditive:function(e,t,n,r,i){for(let o=0;o!==i;++o){const s=t+o;e[s]=e[s]+e[n+o]*r}}});const XD="\\[\\]\\.:\\/",yrt=new RegExp("["+XD+"]","g"),KD="[^"+XD+"]",brt="[^"+XD.replace("\\.","")+"]",xrt=/((?:WC+[\/:])*)/.source.replace("WC",KD),_rt=/(WCOD+)?/.source.replace("WCOD",brt),wrt=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",KD),Srt=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",KD),Crt=new RegExp("^"+xrt+_rt+wrt+Srt+"$"),Art=["material","materials","bones"];function Xne(e,t,n){const r=n||Yi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}Object.assign(Xne.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}});function Yi(e,t,n){this.path=t,this.parsedPath=n||Yi.parseTrackName(t),this.node=Yi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(Yi,{Composite:Xne,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Yi.Composite(e,t,n):new Yi(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(yrt,"")},parseTrackName:function(e){const t=Crt.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const i=n.nodeName.substring(r+1);Art.indexOf(i)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(i){for(let o=0;o<i.length;o++){const s=i[o];if(s.name===t||s.uuid===t)return s;const a=n(s.children);if(a)return a}return null},r=n(e.children);if(r)return r}return null}});Object.assign(Yi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)t[n++]=r[i]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.targetObject[this.propertyName]=t[n]},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=t[n++]},function(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Yi.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let l=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===l){l=c;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const o=e[r];if(o===void 0){const l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(i!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[i]!==void 0&&(i=e.morphTargetDictionary[i])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else o.fromArray!==void 0&&o.toArray!==void 0?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(Yi.prototype,{_getValue_unbound:Yi.prototype.getValue,_setValue_unbound:Yi.prototype.setValue});function Prt(){this.uuid=Xt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}Object.assign(Prt.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let s,a=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const d=arguments[c],f=d.uuid;let h=t[f];if(h===void 0){h=a++,t[f]=h,e.push(d);for(let p=0,g=o;p!==g;++p)i[p].push(new Yi(d,n[p],r[p]))}else if(h<l){s=e[h];const p=--l,g=e[p];t[g.uuid]=h,e[h]=g,t[f]=p,e[p]=d;for(let v=0,m=o;v!==m;++v){const y=i[v],b=y[p];let _=y[h];y[h]=b,_===void 0&&(_=new Yi(d,n[v],r[v])),y[p]=_}}else e[h]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const a=arguments[o],l=a.uuid,c=t[l];if(c!==void 0&&c>=i){const u=i++,d=e[u];t[d.uuid]=c,e[c]=d,t[l]=u,e[u]=a;for(let f=0,h=r;f!==h;++f){const p=n[f],g=p[u],v=p[c];p[c]=g,p[u]=v}}}this.nCachedObjects_=i},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],c=l.uuid,u=t[c];if(u!==void 0)if(delete t[c],u<i){const d=--i,f=e[d],h=--o,p=e[h];t[f.uuid]=u,e[u]=f,t[p.uuid]=d,e[d]=p,e.pop();for(let g=0,v=r;g!==v;++g){const m=n[g],y=m[d],b=m[h];m[u]=y,m[d]=b,m.pop()}}else{const d=--o,f=e[d];t[f.uuid]=u,e[u]=f,e.pop();for(let h=0,p=r;h!==p;++h){const g=n[h];g[u]=g[d],g.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){let n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(r!==void 0)return i[r];const o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),s.push(t),i.push(u);for(let d=c,f=a.length;d!==f;++d){const h=a[d];u[d]=new Yi(h,e,t)}return u},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s],l=e[s];t[l]=n,o[n]=a,o.pop(),i[n]=i[s],i.pop(),r[n]=r[s],r.pop()}}});function Kne(e,t,n,r){this._mixer=e,this._clip=t,this._localRoot=n||null,this.blendMode=r||t.blendMode;const i=t.tracks,o=i.length,s=new Array(o),a={endingStart:ug,endingEnd:ug};for(let l=0;l!==o;++l){const c=i[l].createInterpolant(null);s[l]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=gJe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}Object.assign(Kne.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const r=this._clip.duration,i=e._clip.duration,o=i/r,s=r/i;e.warp(1,o,t),this.warp(s,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let s=this._timeScaleInterpolant;s===null&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=i,a[1]=i+n,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const i=this._startTime;if(i!==null){const a=(e-i)*n;if(a<0||n===0)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const a=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case gne:for(let c=0,u=a.length;c!==u;++c)a[c].evaluate(o),l[c].accumulateAdditive(s);break;case VD:default:for(let c=0,u=a.length;c!==u;++c)a[c].evaluate(o),l[c].accumulate(r,s)}}},_updateWeight:function(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===vJe;if(e===0)return i===-1?r:o&&(i&1)===1?t-r:r;if(n===mJe){i===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(i===-1&&(e>=0?(i=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const s=Math.floor(r/t);r-=t*s,i+=Math.abs(s);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(a===1){const l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=r;if(o&&(i&1)===1)return t-r}return r},_setEndings:function(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Yp,r.endingEnd=Yp):(e?r.endingStart=this.zeroSlopeAtStart?Yp:ug:r.endingStart=z2,t?r.endingEnd=this.zeroSlopeAtEnd?Yp:ug:r.endingEnd=z2)},_scheduleFading:function(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const s=o.parameterPositions,a=o.sampleValues;return s[0]=i,a[0]=t,s[1]=i+e,a[1]=n,this}});function h9(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}h9.prototype=Object.assign(Object.create($c.prototype),{constructor:h9,_bindAction:function(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];c===void 0&&(c={},l[a]=c);for(let u=0;u!==i;++u){const d=r[u],f=d.name;let h=c[f];if(h!==void 0)o[u]=h;else{if(h=o[u],h!==void 0){h._cacheIndex===null&&(++h.referenceCount,this._addInactiveBinding(h,a,f));continue}const p=t&&t._propertyBindings[u].binding.parsedPath;h=new Yne(Yi.create(n,f,p),d.ValueTypeName,d.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,a,f),o[u]=h}s[u].resultBuffer=h.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,i=this._actionsByClip[r];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const i=t[n];i.useCount++===0&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const i=t[n];--i.useCount===0&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,s=o[i],a=s.knownActions,l=a[a.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),e._byClipCacheIndex=null;const u=s.actionByRoot,d=(e._localRoot||this._root).uuid;delete u[d],a.length===0&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const i=t[n];--i.referenceCount===0&&this._removeInactiveBinding(i)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,s=o[r],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[i],Object.keys(s).length===0&&delete o[r]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new lC(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const r=t||this._root,i=r.uuid;let o=typeof e=="string"?ia.findByName(r,e):e;const s=o!==null?o.uuid:e;let a=this._actionsByClip[s],l=null;if(n===void 0&&(o!==null?n=o.blendMode:n=VD),a!==void 0){const u=a.actionByRoot[i];if(u!==void 0&&u.blendMode===n)return u;l=a.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;const c=new Kne(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,s,i),c},existingAction:function(e,t){const n=t||this._root,r=n.uuid,i=typeof e=="string"?ia.findByName(n,e):e,o=i?i.uuid:e,s=this._actionsByClip[o];return s!==void 0&&s.actionByRoot[r]||null},stopAllAction:function(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(r,e,i,o);const s=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)s[l].apply(o);return this},setTime:function(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(i!==void 0){const o=i.knownActions;for(let s=0,a=o.length;s!==a;++s){const l=o[s];this._deactivateAction(l);const c=l._cacheIndex,u=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const s=n[o].actionByRoot,a=s[t];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}const r=this._bindingsByRootAndName,i=r[t];if(i!==void 0)for(const o in i){const s=i[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});function Db(e){typeof e=="string"&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}Db.prototype.clone=function(){return new Db(this.value.clone===void 0?this.value:this.value.clone())};function p9(e,t,n){Ms.call(this,e,t),this.meshPerAttribute=n||1}p9.prototype=Object.assign(Object.create(Ms.prototype),{constructor:p9,isInstancedInterleavedBuffer:!0,copy:function(e){return Ms.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=Ms.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=Ms.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}});function Zne(e,t,n,r){this.ray=new hv(e,t),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new WD,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function m9(e,t){return e.distance-t.distance}function RL(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),r===!0){const i=e.children;for(let o=0,s=i.length;o<s;o++)RL(i[o],t,n,!0)}}Object.assign(Zne.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){const r=n||[];return RL(e,this,r,t),r.sort(m9),r},intersectObjects:function(e,t,n){const r=n||[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(let i=0,o=e.length;i<o;i++)RL(e[i],this,r,t);return r.sort(m9),r}});function Mrt(e,t,n){return this.radius=e!==void 0?e:1,this.phi=t!==void 0?t:0,this.theta=n!==void 0?n:0,this}Object.assign(Mrt.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Xt.clamp(t/this.radius,-1,1))),this}});function Ert(e,t,n){return this.radius=e!==void 0?e:1,this.theta=t!==void 0?t:0,this.y=n!==void 0?n:0,this}Object.assign(Ert.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}});const g9=new et;function Jne(e,t){this.min=e!==void 0?e:new et(1/0,1/0),this.max=t!==void 0?t:new et(-1/0,-1/0)}Object.assign(Jne.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){const n=g9.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new et),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new et),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return t===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new et),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return t===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new et),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return g9.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});const v9=new W,sw=new W;function Qne(e,t){this.start=e!==void 0?e:new W,this.end=t!==void 0?t:new W}Object.assign(Qne.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return e===void 0&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new W),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return e===void 0&&(console.warn("THREE.Line3: .delta() target is now required"),e=new W),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return t===void 0&&(console.warn("THREE.Line3: .at() target is now required"),t=new W),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){v9.subVectors(e,this.start),sw.subVectors(this.end,this.start);const n=sw.dot(sw);let i=sw.dot(v9)/n;return t&&(i=Xt.clamp(i,0,1)),i},closestPointToPoint:function(e,t,n){const r=this.closestPointToPointParameter(e,t);return n===void 0&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new W),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});function hC(e){_t.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}hC.prototype=Object.create(_t.prototype);hC.prototype.constructor=hC;hC.prototype.isImmediateRenderObject=!0;const y9=new W;function Bb(e,t){_t.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new wt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,s=1,a=32;o<a;o++,s++){const l=o/a*Math.PI*2,c=s/a*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new St(r,3));const i=new $r({fog:!1,toneMapped:!1});this.cone=new Sr(n,i),this.add(this.cone),this.update()}Bb.prototype=Object.create(_t.prototype);Bb.prototype.constructor=Bb;Bb.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()};Bb.prototype.update=function(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),y9.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(y9),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};const eu=new W,aw=new lt,EO=new lt;function ere(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,ere(e.children[n]));return t}function Og(e){const t=ere(e),n=new wt,r=[],i=[],o=new ht(0,0,1),s=new ht(0,1,0);for(let l=0;l<t.length;l++){const c=t[l];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(s.r,s.g,s.b))}n.setAttribute("position",new St(r,3)),n.setAttribute("color",new St(i,3));const a=new $r({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});Sr.call(this,n,a),this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}Og.prototype=Object.create(Sr.prototype);Og.prototype.constructor=Og;Og.prototype.isSkeletonHelper=!0;Og.prototype.updateMatrixWorld=function(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");EO.getInverse(this.root.matrixWorld);for(let i=0,o=0;i<t.length;i++){const s=t[i];s.parent&&s.parent.isBone&&(aw.multiplyMatrices(EO,s.matrixWorld),eu.setFromMatrixPosition(aw),r.setXYZ(o,eu.x,eu.y,eu.z),aw.multiplyMatrices(EO,s.parent.matrixWorld),eu.setFromMatrixPosition(aw),r.setXYZ(o+1,eu.x,eu.y,eu.z),o+=2)}n.getAttribute("position").needsUpdate=!0,_t.prototype.updateMatrixWorld.call(this,e)};function Nb(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;const r=new yg(t,4,2),i=new wa({wireframe:!0,fog:!1,toneMapped:!1});Gn.call(this,r,i),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}Nb.prototype=Object.create(Gn.prototype);Nb.prototype.constructor=Nb;Nb.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()};Nb.prototype.update=function(){this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)};const Trt=new W,b9=new ht,x9=new ht;function Fb(e,t,n){_t.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new oh(t);r.rotateY(Math.PI*.5),this.material=new wa({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(i.count*3);r.setAttribute("color",new Rt(o,3)),this.add(new Gn(r,this.material)),this.update()}Fb.prototype=Object.create(_t.prototype);Fb.prototype.constructor=Fb;Fb.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()};Fb.prototype.update=function(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");b9.copy(this.light.color),x9.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const i=n<r/2?b9:x9;t.setXYZ(n,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(Trt.setFromMatrixPosition(this.light.matrixWorld).negate())};function kL(e,t,n,r){e=e||10,t=t||10,n=new ht(n!==void 0?n:4473924),r=new ht(r!==void 0?r:8947848);const i=t/2,o=e/t,s=e/2,a=[],l=[];for(let d=0,f=0,h=-s;d<=t;d++,h+=o){a.push(-s,0,h,s,0,h),a.push(h,0,-s,h,0,s);const p=d===i?n:r;p.toArray(l,f),f+=3,p.toArray(l,f),f+=3,p.toArray(l,f),f+=3,p.toArray(l,f),f+=3}const c=new wt;c.setAttribute("position",new St(a,3)),c.setAttribute("color",new St(l,3));const u=new $r({vertexColors:!0,toneMapped:!1});Sr.call(this,c,u),this.type="GridHelper"}kL.prototype=Object.assign(Object.create(Sr.prototype),{constructor:kL,copy:function(e){return Sr.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return new this.constructor().copy(this)}});function LL(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new ht(i!==void 0?i:4473924),o=new ht(o!==void 0?o:8947848);const s=[],a=[];for(let u=0;u<=t;u++){const d=u/t*(Math.PI*2),f=Math.sin(d)*e,h=Math.cos(d)*e;s.push(0,0,0),s.push(f,0,h);const p=u&1?i:o;a.push(p.r,p.g,p.b),a.push(p.r,p.g,p.b)}for(let u=0;u<=n;u++){const d=u&1?i:o,f=e-e/n*u;for(let h=0;h<r;h++){let p=h/r*(Math.PI*2),g=Math.sin(p)*f,v=Math.cos(p)*f;s.push(g,0,v),a.push(d.r,d.g,d.b),p=(h+1)/r*(Math.PI*2),g=Math.sin(p)*f,v=Math.cos(p)*f,s.push(g,0,v),a.push(d.r,d.g,d.b)}}const l=new wt;l.setAttribute("position",new St(s,3)),l.setAttribute("color",new St(a,3));const c=new $r({vertexColors:!0,toneMapped:!1});Sr.call(this,l,c),this.type="PolarGridHelper"}LL.prototype=Object.create(Sr.prototype);LL.prototype.constructor=LL;const _9=new W,lw=new W,w9=new W;function zb(e,t,n){_t.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,t===void 0&&(t=1);let r=new wt;r.setAttribute("position",new St([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new $r({fog:!1,toneMapped:!1});this.lightPlane=new Fs(r,i),this.add(this.lightPlane),r=new wt,r.setAttribute("position",new St([0,0,0,0,0,1],3)),this.targetLine=new Fs(r,i),this.add(this.targetLine),this.update()}zb.prototype=Object.create(_t.prototype);zb.prototype.constructor=zb;zb.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()};zb.prototype.update=function(){_9.setFromMatrixPosition(this.light.matrixWorld),lw.setFromMatrixPosition(this.light.target.matrixWorld),w9.subVectors(lw,_9),this.lightPlane.lookAt(lw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lw),this.targetLine.scale.z=w9.length()};const cw=new W,Ar=new vc;function pC(e){const t=new wt,n=new $r({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},s=new ht(16755200),a=new ht(16711680),l=new ht(43775),c=new ht(16777215),u=new ht(3355443);d("n1","n2",s),d("n2","n4",s),d("n4","n3",s),d("n3","n1",s),d("f1","f2",s),d("f2","f4",s),d("f4","f3",s),d("f3","f1",s),d("n1","f1",s),d("n2","f2",s),d("n3","f3",s),d("n4","f4",s),d("p","n1",a),d("p","n2",a),d("p","n3",a),d("p","n4",a),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",c),d("p","c",u),d("cn1","cn2",u),d("cn3","cn4",u),d("cf1","cf2",u),d("cf3","cf4",u);function d(h,p,g){f(h,g),f(p,g)}function f(h,p){r.push(0,0,0),i.push(p.r,p.g,p.b),o[h]===void 0&&(o[h]=[]),o[h].push(r.length/3-1)}t.setAttribute("position",new St(r,3)),t.setAttribute("color",new St(i,3)),Sr.call(this,t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}pC.prototype=Object.create(Sr.prototype);pC.prototype.constructor=pC;pC.prototype.update=function(){const e=this.geometry,t=this.pointMap,n=1,r=1;Ar.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Or("c",t,e,Ar,0,0,-1),Or("t",t,e,Ar,0,0,1),Or("n1",t,e,Ar,-n,-r,-1),Or("n2",t,e,Ar,n,-r,-1),Or("n3",t,e,Ar,-n,r,-1),Or("n4",t,e,Ar,n,r,-1),Or("f1",t,e,Ar,-n,-r,1),Or("f2",t,e,Ar,n,-r,1),Or("f3",t,e,Ar,-n,r,1),Or("f4",t,e,Ar,n,r,1),Or("u1",t,e,Ar,n*.7,r*1.1,-1),Or("u2",t,e,Ar,-n*.7,r*1.1,-1),Or("u3",t,e,Ar,0,r*2,-1),Or("cf1",t,e,Ar,-n,0,1),Or("cf2",t,e,Ar,n,0,1),Or("cf3",t,e,Ar,0,-r,1),Or("cf4",t,e,Ar,0,r,1),Or("cn1",t,e,Ar,-n,0,-1),Or("cn2",t,e,Ar,n,0,-1),Or("cn3",t,e,Ar,0,-r,-1),Or("cn4",t,e,Ar,0,r,-1),e.getAttribute("position").needsUpdate=!0};function Or(e,t,n,r,i,o,s){cw.set(i,o,s).unproject(r);const a=t[e];if(a!==void 0){const l=n.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],cw.x,cw.y,cw.z)}}const uw=new zn;function lh(e,t){this.object=e,t===void 0&&(t=16776960);const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),i=new wt;i.setIndex(new Rt(n,1)),i.setAttribute("position",new Rt(r,3)),Sr.call(this,i,new $r({color:t,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}lh.prototype=Object.create(Sr.prototype);lh.prototype.constructor=lh;lh.prototype.update=function(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&uw.setFromObject(this.object),uw.isEmpty())return;const t=uw.min,n=uw.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()};lh.prototype.setFromObject=function(e){return this.object=e,this.update(),this};lh.prototype.copy=function(e){return Sr.prototype.copy.call(this,e),this.object=e.object,this};lh.prototype.clone=function(){return new this.constructor().copy(this)};function mC(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],i=new wt;i.setIndex(new Rt(n,1)),i.setAttribute("position",new St(r,3)),Sr.call(this,i,new $r({color:t,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}mC.prototype=Object.create(Sr.prototype);mC.prototype.constructor=mC;mC.prototype.updateMatrixWorld=function(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),_t.prototype.updateMatrixWorld.call(this,e))};function gC(e,t,n){this.plane=e,this.size=t===void 0?1:t;const r=n!==void 0?n:16776960,i=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new wt;o.setAttribute("position",new St(i,3)),o.computeBoundingSphere(),Fs.call(this,o,new $r({color:r,toneMapped:!1})),this.type="PlaneHelper";const s=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],a=new wt;a.setAttribute("position",new St(s,3)),a.computeBoundingSphere(),this.add(new Gn(a,new wa({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}gC.prototype=Object.create(Fs.prototype);gC.prototype.constructor=gC;gC.prototype.updateMatrixWorld=function(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Zr:dv,this.lookAt(this.plane.normal),_t.prototype.updateMatrixWorld.call(this,e)};const S9=new W;let dw,TO;function Ku(e,t,n,r,i,o){_t.call(this),this.type="ArrowHelper",e===void 0&&(e=new W(0,0,1)),t===void 0&&(t=new W(0,0,0)),n===void 0&&(n=1),r===void 0&&(r=16776960),i===void 0&&(i=.2*n),o===void 0&&(o=.2*i),dw===void 0&&(dw=new wt,dw.setAttribute("position",new St([0,0,0,0,1,0],3)),TO=new xc(0,.5,1,5,1),TO.translate(0,-.5,0)),this.position.copy(t),this.line=new Fs(dw,new $r({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Gn(TO,new wa({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}Ku.prototype=Object.create(_t.prototype);Ku.prototype.constructor=Ku;Ku.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{S9.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(S9,t)}};Ku.prototype.setLength=function(e,t,n){t===void 0&&(t=.2*e),n===void 0&&(n=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()};Ku.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)};Ku.prototype.copy=function(e){return _t.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this};Ku.prototype.clone=function(){return new this.constructor().copy(this)};function $L(e){e=e||1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new wt;r.setAttribute("position",new St(t,3)),r.setAttribute("color",new St(n,3));const i=new $r({vertexColors:!0,toneMapped:!1});Sr.call(this,r,i),this.type="AxesHelper"}$L.prototype=Object.create(Sr.prototype);$L.prototype.constructor=$L;const ym=4,Ru=8,za=Math.pow(2,Ru),tre=[.125,.215,.35,.446,.526,.582],nre=Ru-ym+1+tre.length,Tp=20,Qa={[Ni]:0,[_x]:1,[GD]:2,[vne]:3,[yne]:4,[bne]:5,[HD]:6},OO=new Xu,{_lodPlanes:s0,_sizeLods:C9,_sigmas:fw}=Irt();let IO=null;const nf=(1+Math.sqrt(5))/2,hp=1/nf,A9=[new W(1,1,1),new W(-1,1,1),new W(1,1,-1),new W(-1,1,-1),new W(0,nf,hp),new W(0,nf,-hp),new W(hp,0,nf),new W(-hp,0,nf),new W(nf,hp,0),new W(-nf,hp,0)];function P9(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=Rrt(Tp),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}P9.prototype={constructor:P9,fromScene:function(e,t=0,n=.1,r=100){IO=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i},fromEquirectangular:function(e){return this._fromTexture(e)},fromCubemap:function(e){return this._fromTexture(e)},compileCubemapShader:function(){this._cubemapShader===null&&(this._cubemapShader=T9(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){this._equirectShader===null&&(this._equirectShader=E9(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<s0.length;e++)s0[e].dispose()},_cleanup:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(IO),e.scissorTest=!1,hw(e,0,0,e.width,e.height)},_fromTexture:function(e){IO=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t},_allocateTargets:function(e){const t={magFilter:Nn,minFilter:Nn,generateMipmaps:!1,type:Jf,format:RZe,encoding:Ort(e)?e.encoding:GD,depthBuffer:!1,stencilBuffer:!1},n=M9(t);return n.depthBuffer=!e,this._pingPongRenderTarget=M9(t),n},_compileMaterial:function(e){const t=new Gn(s0[0],e);this._renderer.compile(t,OO)},_sceneToCubeUV:function(e,t,n,r){const s=new Ur(90,1,t,n),a=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.outputEncoding,d=c.toneMapping,f=c.getClearColor(),h=c.getClearAlpha();c.toneMapping=gm,c.outputEncoding=Ni;let p=e.background;if(p&&p.isColor){p.convertSRGBToLinear();const g=Math.max(p.r,p.g,p.b),v=Math.min(Math.max(Math.ceil(Math.log2(g)),-128),127);p=p.multiplyScalar(Math.pow(2,-v));const m=(v+128)/255;c.setClearColor(p,m),e.background=null}for(let g=0;g<6;g++){const v=g%3;v==0?(s.up.set(0,a[g],0),s.lookAt(l[g],0,0)):v==1?(s.up.set(0,0,a[g]),s.lookAt(0,l[g],0)):(s.up.set(0,a[g],0),s.lookAt(0,0,l[g])),hw(r,v*za,g>2?za:0,za,za),c.setRenderTarget(r),c.render(e,s)}c.toneMapping=d,c.outputEncoding=u,c.setClearColor(f,h)},_textureToCubeUV:function(e,t){const n=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=T9()):this._equirectShader==null&&(this._equirectShader=E9());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new Gn(s0[0],r),o=r.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=Qa[e.encoding],o.outputEncoding.value=Qa[t.texture.encoding],hw(t,0,0,3*za,2*za),n.setRenderTarget(t),n.render(i,OO)},_applyPMREM:function(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<nre;r++){const i=Math.sqrt(fw[r]*fw[r]-fw[r-1]*fw[r-1]),o=A9[(r-1)%A9.length];this._blur(e,r-1,r,i,o)}t.autoClear=n},_blur:function(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)},_halfBlur:function(e,t,n,r,i,o,s){const a=this._renderer,l=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new Gn(s0[r],l),d=l.uniforms,f=C9[n]-1,h=isFinite(i)?Math.PI/(2*f):2*Math.PI/(2*Tp-1),p=i/h,g=isFinite(i)?1+Math.floor(c*p):Tp;g>Tp&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Tp}`);const v=[];let m=0;for(let x=0;x<Tp;++x){const w=x/p,S=Math.exp(-w*w/2);v.push(S),x==0?m+=S:x<g&&(m+=2*S)}for(let x=0;x<v.length;x++)v[x]=v[x]/m;d.envMap.value=e.texture,d.samples.value=g,d.weights.value=v,d.latitudinal.value=o==="latitudinal",s&&(d.poleAxis.value=s),d.dTheta.value=h,d.mipInt.value=Ru-n,d.inputEncoding.value=Qa[e.texture.encoding],d.outputEncoding.value=Qa[e.texture.encoding];const y=C9[r],b=3*Math.max(0,za-2*y),_=(r===0?0:2*za)+2*y*(r>Ru-ym?r-Ru+ym:0);hw(t,b,_,3*y,2*y),a.setRenderTarget(t),a.render(u,OO)}};function Ort(e){return e===void 0||e.type!==Jf?!1:e.encoding===Ni||e.encoding===_x||e.encoding===HD}function Irt(){const e=[],t=[],n=[];let r=Ru;for(let i=0;i<nre;i++){const o=Math.pow(2,r);t.push(o);let s=1/o;i>Ru-ym?s=tre[i-Ru+ym-1]:i==0&&(s=0),n.push(s);const a=1/(o-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],d=6,f=6,h=3,p=2,g=1,v=new Float32Array(h*f*d),m=new Float32Array(p*f*d),y=new Float32Array(g*f*d);for(let _=0;_<d;_++){const x=_%3*2/3-1,w=_>2?0:-1,S=[x,w,0,x+2/3,w,0,x+2/3,w+1,0,x,w,0,x+2/3,w+1,0,x,w+1,0];v.set(S,h*f*_),m.set(u,p*f*_);const C=[_,_,_,_,_,_];y.set(C,g*f*_)}const b=new wt;b.setAttribute("position",new Rt(v,h)),b.setAttribute("uv",new Rt(m,p)),b.setAttribute("faceIndex",new Rt(y,g)),e.push(b),r>ym&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function M9(e){const t=new qi(3*za,3*za,e);return t.texture.mapping=xx,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function hw(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Rrt(e){const t=new Float32Array(e),n=new W(0,1,0);return new Yu({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Qa[Ni]},outputEncoding:{value:Qa[Ni]}},vertexShader:ZD(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform int samples;
uniform float weights[n];
uniform bool latitudinal;
uniform float dTheta;
uniform float mipInt;
uniform vec3 poleAxis;

${JD()}

#define ENVMAP_TYPE_CUBE_UV
#include <cube_uv_reflection_fragment>

vec3 getSample(float theta, vec3 axis) {
	float cosTheta = cos(theta);
	// Rodrigues' axis-angle rotation
	vec3 sampleDirection = vOutputDirection * cosTheta
		+ cross(axis, vOutputDirection) * sin(theta)
		+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);
	return bilinearCubeUV(envMap, sampleDirection, mipInt);
}

void main() {
	vec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);
	if (all(equal(axis, vec3(0.0))))
		axis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);
	axis = normalize(axis);
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb += weights[0] * getSample(0.0, axis);
	for (int i = 1; i < n; i++) {
		if (i >= samples)
			break;
		float theta = dTheta * float(i);
		gl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);
		gl_FragColor.rgb += weights[i] * getSample(theta, axis);
	}
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:ac,depthTest:!1,depthWrite:!1})}function E9(){const e=new et(1,1);return new Yu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Qa[Ni]},outputEncoding:{value:Qa[Ni]}},vertexShader:ZD(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform sampler2D envMap;
uniform vec2 texelSize;

${JD()}

#include <common>

void main() {
	gl_FragColor = vec4(0.0);
	vec3 outputDirection = normalize(vOutputDirection);
	vec2 uv = equirectUv( outputDirection );
	vec2 f = fract(uv / texelSize - 0.5);
	uv -= f * texelSize;
	vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x += texelSize.x;
	vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.y += texelSize.y;
	vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	uv.x -= texelSize.x;
	vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;
	vec3 tm = mix(tl, tr, f.x);
	vec3 bm = mix(bl, br, f.x);
	gl_FragColor.rgb = mix(tm, bm, f.y);
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:ac,depthTest:!1,depthWrite:!1})}function T9(){return new Yu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Qa[Ni]},outputEncoding:{value:Qa[Ni]}},vertexShader:ZD(),fragmentShader:`
precision mediump float;
precision mediump int;
varying vec3 vOutputDirection;
uniform samplerCube envMap;

${JD()}

void main() {
	gl_FragColor = vec4(0.0);
	gl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;
	gl_FragColor = linearToOutputTexel(gl_FragColor);
}
		`,blending:ac,depthTest:!1,depthWrite:!1})}function ZD(){return`
precision mediump float;
precision mediump int;
attribute vec3 position;
attribute vec2 uv;
attribute float faceIndex;
varying vec3 vOutputDirection;

// RH coordinate system; PMREM face-indexing convention
vec3 getDirection(vec2 uv, float face) {
	uv = 2.0 * uv - 1.0;
	vec3 direction = vec3(uv, 1.0);
	if (face == 0.0) {
		direction = direction.zyx; // ( 1, v, u ) pos x
	} else if (face == 1.0) {
		direction = direction.xzy;
		direction.xz *= -1.0; // ( -u, 1, -v ) pos y
	} else if (face == 2.0) {
		direction.x *= -1.0; // ( -u, v, 1 ) pos z
	} else if (face == 3.0) {
		direction = direction.zyx;
		direction.xz *= -1.0; // ( -1, v, -u ) neg x
	} else if (face == 4.0) {
		direction = direction.xzy;
		direction.xy *= -1.0; // ( -u, -1, v ) neg y
	} else if (face == 5.0) {
		direction.z *= -1.0; // ( u, v, -1 ) neg z
	}
	return direction;
}

void main() {
	vOutputDirection = getDirection(uv, faceIndex);
	gl_Position = vec4( position, 1.0 );
}
	`}function JD(){return`
uniform int inputEncoding;
uniform int outputEncoding;

#include <encodings_pars_fragment>

vec4 inputTexelToLinear(vec4 value){
	if(inputEncoding == 0){
		return value;
	}else if(inputEncoding == 1){
		return sRGBToLinear(value);
	}else if(inputEncoding == 2){
		return RGBEToLinear(value);
	}else if(inputEncoding == 3){
		return RGBMToLinear(value, 7.0);
	}else if(inputEncoding == 4){
		return RGBMToLinear(value, 16.0);
	}else if(inputEncoding == 5){
		return RGBDToLinear(value, 256.0);
	}else{
		return GammaToLinear(value, 2.2);
	}
}

vec4 linearToOutputTexel(vec4 value){
	if(outputEncoding == 0){
		return value;
	}else if(outputEncoding == 1){
		return LinearTosRGB(value);
	}else if(outputEncoding == 2){
		return LinearToRGBE(value);
	}else if(outputEncoding == 3){
		return LinearToRGBM(value, 7.0);
	}else if(outputEncoding == 4){
		return LinearToRGBM(value, 16.0);
	}else if(outputEncoding == 5){
		return LinearToRGBD(value, 256.0);
	}else{
		return LinearToGamma(value, 2.2);
	}
}

vec4 envMapTexelToLinear(vec4 color) {
	return inputTexelToLinear(color);
}
	`}Bt.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Bt.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};Object.assign(mu.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const t=new Ft;for(let n=0,r=e.length;n<r;n++){const i=e[n];t.vertices.push(new W(i.x,i.y,i.z||0))}return t}});Object.assign(Ya.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}});Object.create(es.prototype);Object.create(es.prototype);function rre(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),es.call(this,e),this.type="catmullrom"}rre.prototype=Object.create(es.prototype);Object.assign(rre.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});kL.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};Og.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(Bn.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),jne.extractUrlBase(e)}});Bn.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(OL.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}});Object.assign(Jne.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(zn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(Dc.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Sx.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)};Qne.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)};Object.assign(Xt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Xt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Xt.ceilPowerOfTwo(e)}});Object.assign(Si.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(lt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new W().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}});Ha.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};Fn.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)};Object.assign(hv.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}});Object.assign(wi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}});Object.assign(wi,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),wi.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),wi.getNormal(e,t,n,r)}});Object.assign(Tf.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new vg(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new bg(this,e)}});Object.assign(et.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(W.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(In.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Ft.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.assign(_t.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.defineProperties(_t.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Gn.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Gn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),yJe},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(V2.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(oL.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});iL.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Bt.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}});Ur.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(nr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(Rt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===cb},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(cb)}}});Object.assign(Rt.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?cb:OE),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(wt.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new Rt(arguments[1],arguments[2]))):e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t)},addDrawCall:function(e,t,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.defineProperties(wt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(fC.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}});Object.defineProperties(Zne.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}});Object.defineProperties(Ms.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===cb},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}});Object.assign(Ms.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?cb:OE),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(bc.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.defineProperties(Db.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}});Object.defineProperties(Gt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ht}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===dne}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}});Object.defineProperties(ah.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ri.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});Object.assign(Cx.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(Cx.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=e===!0?_x:Ni}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Rne.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(qi.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});Object.defineProperties($b.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return new IL().load(e,function(r){t.setBuffer(r)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}});qne.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};fb.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};Qf.crossOrigin=void 0;Qf.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new yL;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o};Qf.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new vL;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o};Qf.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Qf.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:qKe}}));var vC={exports:{}};vC.exports;(function(e,t){/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */(function(){var n,r,i,o,s,a,l,c,u,d,f,h,p,g,v,m,y,b,_,x,w,S,C,A,T,O,R,L,D,$,z,H,B,V,J,K,ie,ce,pe,se,G,he,Z,ae,oe,te,ve,ne,xe,Ce,me,X,Q,Re,Pe,le,Oe,Be,De,Ee,Ie,U,E,P,ee,ye,be,Me,ze,Ge,Xe,ut,rt,dt,yt,Ke,gt,ct,mt,Dt,_e,We,Ue=[].slice;ct=function(){var N,k,F,j,Y;for(N={},Y="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),j=0,k=Y.length;j<k;j++)F=Y[j],N["[object "+F+"]"]=F.toLowerCase();return function(ue){var ge;return ge=Object.prototype.toString.call(ue),N[ge]||"object"}}(),ve=function(N,k,F){return k==null&&(k=0),F==null&&(F=1),N<k&&(N=k),N>F&&(N=F),N},mt=function(N){return N.length>=3?Array.prototype.slice.call(N):N[0]},w=function(N){var k,F;for(N._clipped=!1,N._unclipped=N.slice(0),k=F=0;F<3;k=++F)k<3?((N[k]<0||N[k]>255)&&(N._clipped=!0),N[k]<0&&(N[k]=0),N[k]>255&&(N[k]=255)):k===3&&(N[k]<0&&(N[k]=0),N[k]>1&&(N[k]=1));return N._clipped||delete N._unclipped,N},o=Math.PI,rt=Math.round,C=Math.cos,L=Math.floor,le=Math.pow,ne=Math.log,yt=Math.sin,Ke=Math.sqrt,g=Math.atan2,me=Math.max,p=Math.abs,l=o*2,s=o/3,r=o/180,a=180/o,x=function(){return arguments[0]instanceof n?arguments[0]:function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,arguments,function(){})},x.default=x,h=[],e!==null&&e.exports!=null&&(e.exports=x),ut=t!==null?t:this,ut.chroma=x,x.version="1.4.1",f={},u=[],d=!1,n=function(){function N(){var k,F,j,Y,ue,ge,Se,Ne,Fe;for(ge=this,F=[],Ne=0,Y=arguments.length;Ne<Y;Ne++)k=arguments[Ne],k!=null&&F.push(k);if(F.length>1&&(Se=F[F.length-1]),f[Se]!=null)ge._rgb=w(f[Se](mt(F.slice(0,-1))));else{for(d||(u=u.sort(function(Ye,at){return at.p-Ye.p}),d=!0),Fe=0,ue=u.length;Fe<ue&&(j=u[Fe],Se=j.test.apply(j,F),!Se);Fe++);Se&&(ge._rgb=w(f[Se].apply(f,F)))}ge._rgb==null&&console.warn("unknown format: "+F),ge._rgb==null&&(ge._rgb=[0,0,0]),ge._rgb.length===3&&ge._rgb.push(1)}return N.prototype.toString=function(){return this.hex()},N}(),x._input=f;/**
	ColorBrewer colors for chroma.js

	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
	Pennsylvania State University.

	Licensed under the Apache License, Version 2.0 (the "License"); 
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at	
	http://www.apache.org/licenses/LICENSE-2.0

	Unless required by applicable law or agreed to in writing, software distributed
	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
	CONDITIONS OF ANY KIND, either express or implied. See the License for the
	specific language governing permissions and limitations under the License.

    @preserve
 */x.brewer=b={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var N,k;k=[];for(N in b)k.push(b[N.toLowerCase()]=b[N]);return k}(),Dt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},x.colors=Dt,he=function(){var N,k,F,j,Y,ue,ge,Se,Ne;return k=mt(arguments),Y=k[0],N=k[1],F=k[2],Se=(Y+16)/116,ge=isNaN(N)?Se:Se+N/500,Ne=isNaN(F)?Se:Se-F/200,Se=i.Yn*Z(Se),ge=i.Xn*Z(ge),Ne=i.Zn*Z(Ne),ue=We(3.2404542*ge-1.5371385*Se-.4985314*Ne),j=We(-.969266*ge+1.8760108*Se+.041556*Ne),F=We(.0556434*ge-.2040259*Se+1.0572252*Ne),[ue,j,F,k.length>3?k[3]:1]},We=function(N){return 255*(N<=.00304?12.92*N:1.055*le(N,1/2.4)-.055)},Z=function(N){return N>i.t1?N*N*N:i.t2*(N-i.t0)},i={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},P=function(){var N,k,F,j,Y,ue,ge,Se;return j=mt(arguments),F=j[0],k=j[1],N=j[2],Y=ze(F,k,N),ue=Y[0],ge=Y[1],Se=Y[2],[116*ge-16,500*(ue-ge),200*(ge-Se)]},Ge=function(N){return(N/=255)<=.04045?N/12.92:le((N+.055)/1.055,2.4)},_e=function(N){return N>i.t3?le(N,1/3):N/i.t2+i.t0},ze=function(){var N,k,F,j,Y,ue,ge;return j=mt(arguments),F=j[0],k=j[1],N=j[2],F=Ge(F),k=Ge(k),N=Ge(N),Y=_e((.4124564*F+.3575761*k+.1804375*N)/i.Xn),ue=_e((.2126729*F+.7151522*k+.072175*N)/i.Yn),ge=_e((.0193339*F+.119192*k+.9503041*N)/i.Zn),[Y,ue,ge]},x.lab=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["lab"]),function(){})},f.lab=he,n.prototype.lab=function(){return P(this._rgb)},v=function(N){var k,F,j,Y,ue,ge,Se,Ne,Fe,Ye,at;return N=function(){var Ae,de,fe;for(fe=[],de=0,Ae=N.length;de<Ae;de++)Y=N[de],fe.push(x(Y));return fe}(),N.length===2?(Fe=function(){var Ae,de,fe;for(fe=[],de=0,Ae=N.length;de<Ae;de++)Y=N[de],fe.push(Y.lab());return fe}(),ue=Fe[0],ge=Fe[1],k=function(Ae){var de,fe;return fe=function(){var ke,qe;for(qe=[],de=ke=0;ke<=2;de=++ke)qe.push(ue[de]+Ae*(ge[de]-ue[de]));return qe}(),x.lab.apply(x,fe)}):N.length===3?(Ye=function(){var Ae,de,fe;for(fe=[],de=0,Ae=N.length;de<Ae;de++)Y=N[de],fe.push(Y.lab());return fe}(),ue=Ye[0],ge=Ye[1],Se=Ye[2],k=function(Ae){var de,fe;return fe=function(){var ke,qe;for(qe=[],de=ke=0;ke<=2;de=++ke)qe.push((1-Ae)*(1-Ae)*ue[de]+2*(1-Ae)*Ae*ge[de]+Ae*Ae*Se[de]);return qe}(),x.lab.apply(x,fe)}):N.length===4?(at=function(){var Ae,de,fe;for(fe=[],de=0,Ae=N.length;de<Ae;de++)Y=N[de],fe.push(Y.lab());return fe}(),ue=at[0],ge=at[1],Se=at[2],Ne=at[3],k=function(Ae){var de,fe;return fe=function(){var ke,qe;for(qe=[],de=ke=0;ke<=2;de=++ke)qe.push((1-Ae)*(1-Ae)*(1-Ae)*ue[de]+3*(1-Ae)*(1-Ae)*Ae*ge[de]+3*(1-Ae)*Ae*Ae*Se[de]+Ae*Ae*Ae*Ne[de]);return qe}(),x.lab.apply(x,fe)}):N.length===5&&(F=v(N.slice(0,3)),j=v(N.slice(2,5)),k=function(Ae){return Ae<.5?F(Ae*2):j((Ae-.5)*2)}),k},x.bezier=function(N){var k;return k=v(N),k.scale=function(){return x.scale(k)},k},x.cubehelix=function(N,k,F,j,Y){var ue,ge,Se;return N==null&&(N=300),k==null&&(k=-1.5),F==null&&(F=1),j==null&&(j=1),Y==null&&(Y=[0,1]),ue=0,ct(Y)==="array"?ge=Y[1]-Y[0]:(ge=0,Y=[Y,Y]),Se=function(Ne){var Fe,Ye,at,Ae,de,fe,ke,qe,st;return Fe=l*((N+120)/360+k*Ne),ke=le(Y[0]+ge*Ne,j),fe=ue!==0?F[0]+Ne*ue:F,Ye=fe*ke*(1-ke)/2,Ae=C(Fe),st=yt(Fe),qe=ke+Ye*(-.14861*Ae+1.78277*st),de=ke+Ye*(-.29227*Ae-.90649*st),at=ke+Ye*(1.97294*Ae),x(w([qe*255,de*255,at*255,1]))},Se.start=function(Ne){return Ne==null?N:(N=Ne,Se)},Se.rotations=function(Ne){return Ne==null?k:(k=Ne,Se)},Se.gamma=function(Ne){return Ne==null?j:(j=Ne,Se)},Se.hue=function(Ne){return Ne==null?F:(F=Ne,ct(F)==="array"?(ue=F[1]-F[0],ue===0&&(F=F[1])):ue=0,Se)},Se.lightness=function(Ne){return Ne==null?Y:(ct(Ne)==="array"?(Y=Ne,ge=Ne[1]-Ne[0]):(Y=[Ne,Ne],ge=0),Se)},Se.scale=function(){return x.scale(Se)},Se.hue(F),Se},x.random=function(){var N,k,F;for(k="0123456789abcdef",N="#",F=0;F<6;++F)N+=k.charAt(L(Math.random()*16));return new n(N)},h=[],J=function(N,k,F,j){var Y,ue,ge,Se;for(F==null&&(F=.5),j==null&&(j="rgb"),ct(N)!=="object"&&(N=x(N)),ct(k)!=="object"&&(k=x(k)),ge=0,ue=h.length;ge<ue;ge++)if(Y=h[ge],j===Y[0]){Se=Y[1](N,k,F,j);break}if(Se==null)throw"color mode "+j+" is not supported";return Se.alpha(N.alpha()+F*(k.alpha()-N.alpha()))},x.interpolate=J,n.prototype.interpolate=function(N,k,F){return J(this,N,k,F)},x.mix=J,n.prototype.mix=n.prototype.interpolate,f.rgb=function(){var N,k,F,j;k=mt(arguments),F=[];for(N in k)j=k[N],F.push(j);return F},x.rgb=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["rgb"]),function(){})},n.prototype.rgb=function(N){return N==null&&(N=!0),N?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},n.prototype.rgba=function(N){return N==null&&(N=!0),N?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},u.push({p:3,test:function(N){var k;if(k=mt(arguments),ct(k)==="array"&&k.length===3||k.length===4&&ct(k[3])==="number"&&k[3]>=0&&k[3]<=1)return"rgb"}}),f.lrgb=f.rgb,ce=function(N,k,F,j){var Y,ue;return Y=N._rgb,ue=k._rgb,new n(Ke(le(Y[0],2)*(1-F)+le(ue[0],2)*F),Ke(le(Y[1],2)*(1-F)+le(ue[1],2)*F),Ke(le(Y[2],2)*(1-F)+le(ue[2],2)*F),j)},c=function(N){var k,F,j,Y,ue,ge;for(F=1/N.length,ge=[0,0,0,0],Y=0,j=N.length;Y<j;Y++)k=N[Y],ue=k._rgb,ge[0]+=le(ue[0],2)*F,ge[1]+=le(ue[1],2)*F,ge[2]+=le(ue[2],2)*F,ge[3]+=ue[3]*F;return ge[0]=Ke(ge[0]),ge[1]=Ke(ge[1]),ge[2]=Ke(ge[2]),ge[3]>1&&(ge[3]=1),new n(w(ge))},h.push(["lrgb",ce]),x.average=function(N,k){var F,j,Y,ue,ge,Se,Ne,Fe,Ye,at,Ae,de,fe;if(k==null&&(k="rgb"),Ye=N.length,N=N.map(function(ke){return x(ke)}),Ne=N.splice(0,1)[0],k==="lrgb")return c(N);de=Ne.get(k),ue=[],ge=0,Se=0;for(Fe in de)de[Fe]=de[Fe]||0,ue.push(isNaN(de[Fe])?0:1),k.charAt(Fe)==="h"&&!isNaN(de[Fe])&&(F=de[Fe]/180*o,ge+=C(F),Se+=yt(F));for(j=Ne.alpha(),Ae=0,at=N.length;Ae<at;Ae++){Y=N[Ae],fe=Y.get(k),j+=Y.alpha();for(Fe in de)isNaN(fe[Fe])||(ue[Fe]+=1,k.charAt(Fe)==="h"?(F=fe[Fe]/180*o,ge+=C(F),Se+=yt(F)):de[Fe]+=fe[Fe])}for(Fe in de)if(k.charAt(Fe)==="h"){for(F=g(Se/ue[Fe],ge/ue[Fe])/o*180;F<0;)F+=360;for(;F>=360;)F-=360;de[Fe]=F}else de[Fe]=de[Fe]/ue[Fe];return x(de,k).alpha(j/Ye)},$=function(N){var k,F,j,Y,ue,ge;if(N.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(N.length===4||N.length===7)&&(N=N.substr(1)),N.length===3&&(N=N.split(""),N=N[0]+N[0]+N[1]+N[1]+N[2]+N[2]),ge=parseInt(N,16),Y=ge>>16,j=ge>>8&255,F=ge&255,[Y,j,F,1];if(N.match(/^#?([A-Fa-f0-9]{8})$/))return N.length===9&&(N=N.substr(1)),ge=parseInt(N,16),Y=ge>>24&255,j=ge>>16&255,F=ge>>8&255,k=rt((ge&255)/255*100)/100,[Y,j,F,k];if(f.css!=null&&(ue=f.css(N)))return ue;throw"unknown color: "+N},Ee=function(N,k){var F,j,Y,ue,ge,Se,Ne;return k==null&&(k="auto"),ge=N[0],Y=N[1],j=N[2],F=N[3],k==="auto"&&(k=F<1?"rgba":"rgb"),ge=Math.round(ge),Y=Math.round(Y),j=Math.round(j),Ne=ge<<16|Y<<8|j,Se="000000"+Ne.toString(16),Se=Se.substr(Se.length-6),ue="0"+rt(F*255).toString(16),ue=ue.substr(ue.length-2),"#"+function(){switch(k.toLowerCase()){case"rgba":return Se+ue;case"argb":return ue+Se;default:return Se}}()},f.hex=function(N){return $(N)},x.hex=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["hex"]),function(){})},n.prototype.hex=function(N){return N==null&&(N="auto"),Ee(this._rgb,N)},u.push({p:4,test:function(N){if(arguments.length===1&&ct(N)==="string")return"hex"}}),B=function(){var N,k,F,j,Y,ue,ge,Se,Ne,Fe,Ye,at,Ae,de;if(N=mt(arguments),Y=N[0],Ye=N[1],ge=N[2],Ye===0)Ne=j=k=ge*255;else{for(de=[0,0,0],F=[0,0,0],Ae=ge<.5?ge*(1+Ye):ge+Ye-ge*Ye,at=2*ge-Ae,Y/=360,de[0]=Y+1/3,de[1]=Y,de[2]=Y-1/3,ue=Se=0;Se<=2;ue=++Se)de[ue]<0&&(de[ue]+=1),de[ue]>1&&(de[ue]-=1),6*de[ue]<1?F[ue]=at+(Ae-at)*6*de[ue]:2*de[ue]<1?F[ue]=Ae:3*de[ue]<2?F[ue]=at+(Ae-at)*(2/3-de[ue])*6:F[ue]=at;Fe=[rt(F[0]*255),rt(F[1]*255),rt(F[2]*255)],Ne=Fe[0],j=Fe[1],k=Fe[2]}return N.length>3?[Ne,j,k,N[3]]:[Ne,j,k]},U=function(N,k,F){var j,Y,ue,ge,Se;return N!==void 0&&N.length>=3&&(ge=N,N=ge[0],k=ge[1],F=ge[2]),N/=255,k/=255,F/=255,ue=Math.min(N,k,F),me=Math.max(N,k,F),Y=(me+ue)/2,me===ue?(Se=0,j=Number.NaN):Se=Y<.5?(me-ue)/(me+ue):(me-ue)/(2-me-ue),N===me?j=(k-F)/(me-ue):k===me?j=2+(F-N)/(me-ue):F===me&&(j=4+(N-k)/(me-ue)),j*=60,j<0&&(j+=360),[j,Se,Y]},x.hsl=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["hsl"]),function(){})},f.hsl=B,n.prototype.hsl=function(){return U(this._rgb)},V=function(){var N,k,F,j,Y,ue,ge,Se,Ne,Fe,Ye,at,Ae,de,fe,ke,qe,st;if(N=mt(arguments),Y=N[0],ke=N[1],st=N[2],st*=255,ke===0)Ne=j=k=st;else switch(Y===360&&(Y=0),Y>360&&(Y-=360),Y<0&&(Y+=360),Y/=60,ue=L(Y),F=Y-ue,ge=st*(1-ke),Se=st*(1-ke*F),qe=st*(1-ke*(1-F)),ue){case 0:Fe=[st,qe,ge],Ne=Fe[0],j=Fe[1],k=Fe[2];break;case 1:Ye=[Se,st,ge],Ne=Ye[0],j=Ye[1],k=Ye[2];break;case 2:at=[ge,st,qe],Ne=at[0],j=at[1],k=at[2];break;case 3:Ae=[ge,Se,st],Ne=Ae[0],j=Ae[1],k=Ae[2];break;case 4:de=[qe,ge,st],Ne=de[0],j=de[1],k=de[2];break;case 5:fe=[st,ge,Se],Ne=fe[0],j=fe[1],k=fe[2]}return[Ne,j,k,N.length>3?N[3]:1]},E=function(){var N,k,F,j,Y,ue,ge,Se,Ne;return ge=mt(arguments),ue=ge[0],F=ge[1],N=ge[2],Y=Math.min(ue,F,N),me=Math.max(ue,F,N),k=me-Y,Ne=me/255,me===0?(j=Number.NaN,Se=0):(Se=k/me,ue===me&&(j=(F-N)/k),F===me&&(j=2+(N-ue)/k),N===me&&(j=4+(ue-F)/k),j*=60,j<0&&(j+=360)),[j,Se,Ne]},x.hsv=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["hsv"]),function(){})},f.hsv=V,n.prototype.hsv=function(){return E(this._rgb)},Re=function(N){var k,F,j;return ct(N)==="number"&&N>=0&&N<=16777215?(j=N>>16,F=N>>8&255,k=N&255,[j,F,k,1]):(console.warn("unknown num color: "+N),[0,0,0,1])},be=function(){var N,k,F,j;return j=mt(arguments),F=j[0],k=j[1],N=j[2],(F<<16)+(k<<8)+N},x.num=function(N){return new n(N,"num")},n.prototype.num=function(N){return N==null&&(N="rgb"),be(this._rgb,N)},f.num=Re,u.push({p:1,test:function(N){if(arguments.length===1&&ct(N)==="number"&&N>=0&&N<=16777215)return"num"}}),D=function(){var N,k,F,j,Y,ue,ge,Se,Ne,Fe,Ye,at,Ae,de,fe,ke,qe,st,Ct,ft;if(F=mt(arguments),Se=F[0],Y=F[1],k=F[2],Y=Y/100,ge=ge/100*255,N=Y*255,Y===0)at=ge=j=k;else switch(Se===360&&(Se=0),Se>360&&(Se-=360),Se<0&&(Se+=360),Se/=60,Ne=L(Se),ue=Se-Ne,Fe=k*(1-Y),Ye=Fe+N*(1-ue),Ct=Fe+N*ue,ft=Fe+N,Ne){case 0:Ae=[ft,Ct,Fe],at=Ae[0],ge=Ae[1],j=Ae[2];break;case 1:de=[Ye,ft,Fe],at=de[0],ge=de[1],j=de[2];break;case 2:fe=[Fe,ft,Ct],at=fe[0],ge=fe[1],j=fe[2];break;case 3:ke=[Fe,Ye,ft],at=ke[0],ge=ke[1],j=ke[2];break;case 4:qe=[Ct,Fe,ft],at=qe[0],ge=qe[1],j=qe[2];break;case 5:st=[ft,Fe,Ye],at=st[0],ge=st[1],j=st[2]}return[at,ge,j,F.length>3?F[3]:1]},De=function(){var N,k,F,j,Y,ue,ge,Se,Ne;return Ne=mt(arguments),Se=Ne[0],Y=Ne[1],k=Ne[2],ge=Math.min(Se,Y,k),me=Math.max(Se,Y,k),j=me-ge,F=j*100/255,N=ge/(255-j)*100,j===0?ue=Number.NaN:(Se===me&&(ue=(Y-k)/j),Y===me&&(ue=2+(k-Se)/j),k===me&&(ue=4+(Se-Y)/j),ue*=60,ue<0&&(ue+=360)),[ue,F,N]},x.hcg=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["hcg"]),function(){})},f.hcg=D,n.prototype.hcg=function(){return De(this._rgb)},A=function(N){var k,F,j,Y,ue,ge,Se,Ne;if(N=N.toLowerCase(),x.colors!=null&&x.colors[N])return $(x.colors[N]);if(ue=N.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(Se=ue.slice(1,4),Y=ge=0;ge<=2;Y=++ge)Se[Y]=+Se[Y];Se[3]=1}else if(ue=N.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(Se=ue.slice(1,5),Y=Ne=0;Ne<=3;Y=++Ne)Se[Y]=+Se[Y];else if(ue=N.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(Se=ue.slice(1,4),Y=k=0;k<=2;Y=++k)Se[Y]=rt(Se[Y]*2.55);Se[3]=1}else if(ue=N.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(Se=ue.slice(1,5),Y=F=0;F<=2;Y=++F)Se[Y]=rt(Se[Y]*2.55);Se[3]=+Se[3]}else(ue=N.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(j=ue.slice(1,4),j[1]*=.01,j[2]*=.01,Se=B(j),Se[3]=1):(ue=N.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(j=ue.slice(1,4),j[1]*=.01,j[2]*=.01,Se=B(j),Se[3]=+ue[4]);return Se},Be=function(N){var k;if(k=N[3]<1?"rgba":"rgb",k==="rgb")return k+"("+N.slice(0,3).map(rt).join(",")+")";if(k==="rgba")return k+"("+N.slice(0,3).map(rt).join(",")+","+N[3]+")"},Xe=function(N){return rt(N*100)/100},H=function(N,k){var F;return F=k<1?"hsla":"hsl",N[0]=Xe(N[0]||0),N[1]=Xe(N[1]*100)+"%",N[2]=Xe(N[2]*100)+"%",F==="hsla"&&(N[3]=k),F+"("+N.join(",")+")"},f.css=function(N){return A(N)},x.css=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["css"]),function(){})},n.prototype.css=function(N){if(N==null&&(N="rgb"),N.slice(0,3)==="rgb")return Be(this._rgb);if(N.slice(0,3)==="hsl")return H(this.hsl(),this.alpha())},f.named=function(N){return $(Dt[N])},u.push({p:5,test:function(N){if(arguments.length===1&&Dt[N]!=null)return"named"}}),n.prototype.name=function(N){var k,F;arguments.length&&(Dt[N]&&(this._rgb=$(Dt[N])),this._rgb[3]=1),k=this.hex("rgb");for(F in Dt)if(k===Dt[F])return F;return k},ae=function(){var N,k,F,j;return j=mt(arguments),F=j[0],N=j[1],k=j[2],k=k*r,[F,C(k)*N,yt(k)*N]},oe=function(){var N,k,F,j,Y,ue,ge,Se,Ne,Fe,Ye;return F=mt(arguments),Se=F[0],Y=F[1],ge=F[2],Fe=ae(Se,Y,ge),N=Fe[0],k=Fe[1],j=Fe[2],Ye=he(N,k,j),Ne=Ye[0],ue=Ye[1],j=Ye[2],[Ne,ue,j,F.length>3?F[3]:1]},G=function(){var N,k,F,j,Y,ue;return ue=mt(arguments),Y=ue[0],N=ue[1],k=ue[2],F=Ke(N*N+k*k),j=(g(k,N)*a+360)%360,rt(F*1e4)===0&&(j=Number.NaN),[Y,F,j]},ee=function(){var N,k,F,j,Y,ue,ge;return ue=mt(arguments),Y=ue[0],F=ue[1],k=ue[2],ge=P(Y,F,k),j=ge[0],N=ge[1],k=ge[2],G(j,N,k)},x.lch=function(){var N;return N=mt(arguments),new n(N,"lch")},x.hcl=function(){var N;return N=mt(arguments),new n(N,"hcl")},f.lch=oe,f.hcl=function(){var N,k,F,j;return j=mt(arguments),k=j[0],N=j[1],F=j[2],oe([F,N,k])},n.prototype.lch=function(){return ee(this._rgb)},n.prototype.hcl=function(){return ee(this._rgb).reverse()},Oe=function(N){var k,F,j,Y,ue,ge,Se,Ne,Fe;return N==null&&(N="rgb"),Ne=mt(arguments),Se=Ne[0],Y=Ne[1],k=Ne[2],Se=Se/255,Y=Y/255,k=k/255,ue=1-Math.max(Se,Math.max(Y,k)),j=ue<1?1/(1-ue):0,F=(1-Se-ue)*j,ge=(1-Y-ue)*j,Fe=(1-k-ue)*j,[F,ge,Fe,ue]},S=function(){var N,k,F,j,Y,ue,ge,Se,Ne;return k=mt(arguments),j=k[0],ge=k[1],Ne=k[2],ue=k[3],N=k.length>4?k[4]:1,ue===1?[0,0,0,N]:(Se=j>=1?0:255*(1-j)*(1-ue),Y=ge>=1?0:255*(1-ge)*(1-ue),F=Ne>=1?0:255*(1-Ne)*(1-ue),[Se,Y,F,N])},f.cmyk=function(){return S(mt(arguments))},x.cmyk=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["cmyk"]),function(){})},n.prototype.cmyk=function(){return Oe(this._rgb)},f.gl=function(){var N,k,F,j,Y;for(j=(function(){var ue,ge;ue=mt(arguments),ge=[];for(k in ue)Y=ue[k],ge.push(Y);return ge}).apply(this,arguments),N=F=0;F<=2;N=++F)j[N]*=255;return j},x.gl=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["gl"]),function(){})},n.prototype.gl=function(){var N;return N=this._rgb,[N[0]/255,N[1]/255,N[2]/255,N[3]]},ye=function(N,k,F){var j;return j=mt(arguments),N=j[0],k=j[1],F=j[2],N=xe(N),k=xe(k),F=xe(F),.2126*N+.7152*k+.0722*F},xe=function(N){return N/=255,N<=.03928?N/12.92:le((N+.055)/1.055,2.4)},se=function(N,k,F,j){var Y,ue;return Y=N._rgb,ue=k._rgb,new n(Y[0]+F*(ue[0]-Y[0]),Y[1]+F*(ue[1]-Y[1]),Y[2]+F*(ue[2]-Y[2]),j)},h.push(["rgb",se]),n.prototype.luminance=function(N,k){var F,j,Y,ue,ge;return k==null&&(k="rgb"),arguments.length?(ue=this._rgb,N===0?ue=[0,0,0,this._rgb[3]]:N===1?ue=[255,255,255,this[3]]:(F=ye(this._rgb),j=1e-7,Y=20,ge=function(Se,Ne){var Fe,Ye;return Ye=Se.interpolate(Ne,.5,k),Fe=Ye.luminance(),Math.abs(N-Fe)<j||!Y--?Ye:Fe>N?ge(Se,Ye):ge(Ye,Ne)},F>N?ue=ge(x("black"),this).rgba():ue=ge(this,x("white")).rgba()),x(ue).alpha(this.alpha())):ye(this._rgb)},gt=function(N){var k,F,j,Y;return Y=N/100,Y<66?(j=255,F=-155.25485562709179-.44596950469579133*(F=Y-2)+104.49216199393888*ne(F),k=Y<20?0:-254.76935184120902+.8274096064007395*(k=Y-10)+115.67994401066147*ne(k)):(j=351.97690566805693+.114206453784165*(j=Y-55)-40.25366309332127*ne(j),F=325.4494125711974+.07943456536662342*(F=Y-50)-28.0852963507957*ne(F),k=255),[j,F,k]},Me=function(){var N,k,F,j,Y,ue,ge,Se;for(ue=mt(arguments),Y=ue[0],ue[1],N=ue[2],j=1e3,F=4e4,k=.4;F-j>k;)Se=(F+j)*.5,ge=gt(Se),ge[2]/ge[0]>=N/Y?F=Se:j=Se;return rt(Se)},x.temperature=x.kelvin=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["temperature"]),function(){})},f.temperature=f.kelvin=f.K=gt,n.prototype.temperature=function(){return Me(this._rgb)},n.prototype.kelvin=n.prototype.temperature,x.contrast=function(N,k){var F,j,Y,ue;return((Y=ct(N))==="string"||Y==="number")&&(N=new n(N)),((ue=ct(k))==="string"||ue==="number")&&(k=new n(k)),F=N.luminance(),j=k.luminance(),F>j?(F+.05)/(j+.05):(j+.05)/(F+.05)},x.distance=function(N,k,F){var j,Y,ue,ge,Se,Ne,Fe;F==null&&(F="lab"),((Se=ct(N))==="string"||Se==="number")&&(N=new n(N)),((Ne=ct(k))==="string"||Ne==="number")&&(k=new n(k)),ue=N.get(F),ge=k.get(F),Fe=0;for(Y in ue)j=(ue[Y]||0)-(ge[Y]||0),Fe+=j*j;return Math.sqrt(Fe)},x.deltaE=function(N,k,F,j){var Y,ue,ge,Se,Ne,Fe,Ye,at,Ae,de,fe,ke,qe,st,Ct,ft,zt,Cr,jt,Ze,Pt,Wt,un,Ut,rn,Jt,gn;for(F==null&&(F=1),j==null&&(j=1),((zt=ct(N))==="string"||zt==="number")&&(N=new n(N)),((Cr=ct(k))==="string"||Cr==="number")&&(k=new n(k)),jt=N.lab(),Y=jt[0],ge=jt[1],Ne=jt[2],Ze=k.lab(),ue=Ze[0],Se=Ze[1],Fe=Ze[2],Ye=Ke(ge*ge+Ne*Ne),at=Ke(Se*Se+Fe*Fe),un=Y<16?.511:.040975*Y/(1+.01765*Y),Pt=.0638*Ye/(1+.0131*Ye)+.638,ft=Ye<1e-6?0:g(Ne,ge)*180/o;ft<0;)ft+=360;for(;ft>=360;)ft-=360;return Ut=ft>=164&&ft<=345?.56+p(.2*C(o*(ft+168)/180)):.36+p(.4*C(o*(ft+35)/180)),Ae=Ye*Ye*Ye*Ye,Ct=Ke(Ae/(Ae+1900)),Wt=Pt*(Ct*Ut+1-Ct),st=Y-ue,qe=Ye-at,fe=ge-Se,ke=Ne-Fe,de=fe*fe+ke*ke-qe*qe,rn=st/(F*un),Jt=qe/(j*Pt),gn=Wt,Ke(rn*rn+Jt*Jt+de/(gn*gn))},n.prototype.get=function(N){var k,F,j,Y,ue,ge;return j=this,ue=N.split("."),Y=ue[0],k=ue[1],ge=j[Y](),k?(F=Y.indexOf(k),F>-1?ge[F]:console.warn("unknown channel "+k+" in mode "+Y)):ge},n.prototype.set=function(N,k){var F,j,Y,ue,ge,Se;if(Y=this,ge=N.split("."),ue=ge[0],F=ge[1],F)if(Se=Y[ue](),j=ue.indexOf(F),j>-1)if(ct(k)==="string")switch(k.charAt(0)){case"+":Se[j]+=+k;break;case"-":Se[j]+=+k;break;case"*":Se[j]*=+k.substr(1);break;case"/":Se[j]/=+k.substr(1);break;default:Se[j]=+k}else Se[j]=k;else console.warn("unknown channel "+F+" in mode "+ue);else Se=k;return x(Se,ue).alpha(Y.alpha())},n.prototype.clipped=function(){return this._rgb._clipped||!1},n.prototype.alpha=function(N){return arguments.length?x.rgb([this._rgb[0],this._rgb[1],this._rgb[2],N]):this._rgb[3]},n.prototype.darken=function(N){var k,F;return N==null&&(N=1),F=this,k=F.lab(),k[0]-=i.Kn*N,x.lab(k).alpha(F.alpha())},n.prototype.brighten=function(N){return N==null&&(N=1),this.darken(-N)},n.prototype.darker=n.prototype.darken,n.prototype.brighter=n.prototype.brighten,n.prototype.saturate=function(N){var k,F;return N==null&&(N=1),F=this,k=F.lch(),k[1]+=N*i.Kn,k[1]<0&&(k[1]=0),x.lch(k).alpha(F.alpha())},n.prototype.desaturate=function(N){return N==null&&(N=1),this.saturate(-N)},n.prototype.premultiply=function(){var N,k;return k=this.rgb(),N=this.alpha(),x(k[0]*N,k[1]*N,k[2]*N,N)},m=function(N,k,F){if(!m[F])throw"unknown blend mode "+F;return m[F](N,k)},y=function(N){return function(k,F){var j,Y;return j=x(F).rgb(),Y=x(k).rgb(),x(N(j,Y),"rgb")}},R=function(N){return function(k,F){var j,Y,ue;for(ue=[],j=Y=0;Y<=3;j=++Y)ue[j]=N(k[j],F[j]);return ue}},Q=function(N,k){return N},X=function(N,k){return N*k/255},T=function(N,k){return N>k?k:N},te=function(N,k){return N>k?N:k},dt=function(N,k){return 255*(1-(1-N/255)*(1-k/255))},Pe=function(N,k){return k<128?2*N*k/255:255*(1-2*(1-N/255)*(1-k/255))},_=function(N,k){return 255*(1-(1-k/255)/(N/255))},O=function(N,k){return N===255||(N=255*(k/255)/(1-N/255),N>255)?255:N},m.normal=y(R(Q)),m.multiply=y(R(X)),m.screen=y(R(dt)),m.overlay=y(R(Pe)),m.darken=y(R(T)),m.lighten=y(R(te)),m.dodge=y(R(O)),m.burn=y(R(_)),x.blend=m,x.analyze=function(N){var k,F,j,Y;for(j={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},F=0,k=N.length;F<k;F++)Y=N[F],Y!=null&&!isNaN(Y)&&(j.values.push(Y),j.sum+=Y,Y<j.min&&(j.min=Y),Y>j.max&&(j.max=Y),j.count+=1);return j.domain=[j.min,j.max],j.limits=function(ue,ge){return x.limits(j,ue,ge)},j},x.scale=function(N,k){var F,j,Y,ue,ge,Se,Ne,Fe,Ye,at,Ae,de,fe,ke,qe,st,Ct,ft,zt,Cr,jt;return Ye="rgb",at=x("#ccc"),ke=0,ge=[0,1],fe=[],de=[0,0],F=!1,Y=[],Ae=!1,Fe=0,Ne=1,ue=!1,j={},qe=!0,Se=1,Cr=function(Ze){var Pt,Wt,un,Ut,rn,Jt;if(Ze==null&&(Ze=["#fff","#000"]),Ze!=null&&ct(Ze)==="string"&&x.brewer!=null&&(Ze=x.brewer[Ze]||x.brewer[Ze.toLowerCase()]||Ze),ct(Ze)==="array"){for(Ze.length===1&&(Ze=[Ze[0],Ze[0]]),Ze=Ze.slice(0),Pt=un=0,Ut=Ze.length-1;0<=Ut?un<=Ut:un>=Ut;Pt=0<=Ut?++un:--un)Wt=Ze[Pt],ct(Wt)==="string"&&(Ze[Pt]=x(Wt));for(fe.length=0,Pt=Jt=0,rn=Ze.length-1;0<=rn?Jt<=rn:Jt>=rn;Pt=0<=rn?++Jt:--Jt)fe.push(Pt/(Ze.length-1))}return zt(),Y=Ze},Ct=function(Ze){var Pt,Wt;if(F!=null){for(Wt=F.length-1,Pt=0;Pt<Wt&&Ze>=F[Pt];)Pt++;return Pt-1}return 0},jt=function(Ze){return Ze},ft=function(Ze,Pt){var Wt,un,Ut,rn,Jt,gn,Kr,Zt;if(Pt==null&&(Pt=!1),isNaN(Ze)||Ze===null)return at;if(Pt?Zt=Ze:F&&F.length>2?(Wt=Ct(Ze),Zt=Wt/(F.length-2)):Ne!==Fe?Zt=(Ze-Fe)/(Ne-Fe):Zt=1,Pt||(Zt=jt(Zt)),Se!==1&&(Zt=le(Zt,Se)),Zt=de[0]+Zt*(1-de[0]-de[1]),Zt=Math.min(1,Math.max(0,Zt)),rn=Math.floor(Zt*1e4),qe&&j[rn])un=j[rn];else{if(ct(Y)==="array")for(Ut=Jt=0,Kr=fe.length-1;0<=Kr?Jt<=Kr:Jt>=Kr;Ut=0<=Kr?++Jt:--Jt){if(gn=fe[Ut],Zt<=gn){un=Y[Ut];break}if(Zt>=gn&&Ut===fe.length-1){un=Y[Ut];break}if(Zt>gn&&Zt<fe[Ut+1]){Zt=(Zt-gn)/(fe[Ut+1]-gn),un=x.interpolate(Y[Ut],Y[Ut+1],Zt,Ye);break}}else ct(Y)==="function"&&(un=Y(Zt));qe&&(j[rn]=un)}return un},zt=function(){return j={}},Cr(N),st=function(Ze){var Pt;return Pt=x(ft(Ze)),Ae&&Pt[Ae]?Pt[Ae]():Pt},st.classes=function(Ze){var Pt;return Ze!=null?(ct(Ze)==="array"?(F=Ze,ge=[Ze[0],Ze[Ze.length-1]]):(Pt=x.analyze(ge),Ze===0?F=[Pt.min,Pt.max]:F=x.limits(Pt,"e",Ze)),st):F},st.domain=function(Ze){var Pt,Wt,un,Ut,rn,Jt,gn;if(!arguments.length)return ge;if(Fe=Ze[0],Ne=Ze[Ze.length-1],fe=[],un=Y.length,Ze.length===un&&Fe!==Ne)for(rn=0,Ut=Ze.length;rn<Ut;rn++)Wt=Ze[rn],fe.push((Wt-Fe)/(Ne-Fe));else for(Pt=gn=0,Jt=un-1;0<=Jt?gn<=Jt:gn>=Jt;Pt=0<=Jt?++gn:--gn)fe.push(Pt/(un-1));return ge=[Fe,Ne],st},st.mode=function(Ze){return arguments.length?(Ye=Ze,zt(),st):Ye},st.range=function(Ze,Pt){return Cr(Ze,Pt),st},st.out=function(Ze){return Ae=Ze,st},st.spread=function(Ze){return arguments.length?(ke=Ze,st):ke},st.correctLightness=function(Ze){return Ze==null&&(Ze=!0),ue=Ze,zt(),ue?jt=function(Pt){var Wt,un,Ut,rn,Jt,gn,Kr,Zt,hr;for(Wt=ft(0,!0).lab()[0],un=ft(1,!0).lab()[0],Kr=Wt>un,Ut=ft(Pt,!0).lab()[0],Jt=Wt+(un-Wt)*Pt,rn=Ut-Jt,Zt=0,hr=1,gn=20;Math.abs(rn)>.01&&gn-- >0;)(function(){return Kr&&(rn*=-1),rn<0?(Zt=Pt,Pt+=(hr-Pt)*.5):(hr=Pt,Pt+=(Zt-Pt)*.5),Ut=ft(Pt,!0).lab()[0],rn=Ut-Jt})();return Pt}:jt=function(Pt){return Pt},st},st.padding=function(Ze){return Ze!=null?(ct(Ze)==="number"&&(Ze=[Ze,Ze]),de=Ze,st):de},st.colors=function(Ze,Pt){var Wt,un,Ut,rn,Jt,gn,Kr,Zt;if(arguments.length<2&&(Pt="hex"),Jt=[],arguments.length===0)Jt=Y.slice(0);else if(Ze===1)Jt=[st(.5)];else if(Ze>1)un=ge[0],Wt=ge[1]-un,Jt=(function(){gn=[];for(var hr=0;0<=Ze?hr<Ze:hr>Ze;0<=Ze?hr++:hr--)gn.push(hr);return gn}).apply(this).map(function(hr){return st(un+hr/(Ze-1)*Wt)});else{if(N=[],Kr=[],F&&F.length>2)for(Ut=Zt=1,rn=F.length;1<=rn?Zt<rn:Zt>rn;Ut=1<=rn?++Zt:--Zt)Kr.push((F[Ut-1]+F[Ut])*.5);else Kr=ge;Jt=Kr.map(function(hr){return st(hr)})}return x[Pt]&&(Jt=Jt.map(function(hr){return hr[Pt]()})),Jt},st.cache=function(Ze){return Ze!=null?(qe=Ze,st):qe},st.gamma=function(Ze){return Ze!=null?(Se=Ze,st):Se},st.nodata=function(Ze){return Ze!=null?(at=x(Ze),st):at},st},x.scales==null&&(x.scales={}),x.scales.cool=function(){return x.scale([x.hsl(180,1,.9),x.hsl(250,.7,.4)])},x.scales.hot=function(){return x.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},x.analyze=function(N,k,F){var j,Y,ue,ge,Se,Ne,Fe;if(Se={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},F==null&&(F=function(){return!0}),j=function(Ye){Ye!=null&&!isNaN(Ye)&&(Se.values.push(Ye),Se.sum+=Ye,Ye<Se.min&&(Se.min=Ye),Ye>Se.max&&(Se.max=Ye),Se.count+=1)},Fe=function(Ye,at){if(F(Ye,at))return k!=null&&ct(k)==="function"?j(k(Ye)):k!=null&&ct(k)==="string"||ct(k)==="number"?j(Ye[k]):j(Ye)},ct(N)==="array")for(ge=0,ue=N.length;ge<ue;ge++)Ne=N[ge],Fe(Ne);else for(Y in N)Ne=N[Y],Fe(Ne,Y);return Se.domain=[Se.min,Se.max],Se.limits=function(Ye,at){return x.limits(Se,Ye,at)},Se},x.limits=function(N,k,F){var j,Y,ue,ge,Se,Ne,Fe,Ye,at,Ae,de,fe,ke,qe,st,Ct,ft,zt,Cr,jt,Ze,Pt,Wt,un,Ut,rn,Jt,gn,Kr,Zt,hr,Fh,Fc,_v,vd,yd,bd,xd,_d,wd,Rx,Sd,Cd,Ad,Pd,Md,Ed,Td,Od,Id,Ta,zh,kx,ds,Rd;if(k==null&&(k="equal"),F==null&&(F=7),ct(N)==="array"&&(N=x.analyze(N)),Ut=N.min,me=N.max,N.sum,ds=N.values.sort(function(wv,Sv){return wv-Sv}),F===1)return[Ut,me];if(Wt=[],k.substr(0,1)==="c"&&(Wt.push(Ut),Wt.push(me)),k.substr(0,1)==="e"){for(Wt.push(Ut),jt=hr=1,vd=F-1;1<=vd?hr<=vd:hr>=vd;jt=1<=vd?++hr:--hr)Wt.push(Ut+jt/F*(me-Ut));Wt.push(me)}else if(k.substr(0,1)==="l"){if(Ut<=0)throw"Logarithmic scales are only possible for values > 0";for(rn=Math.LOG10E*ne(Ut),un=Math.LOG10E*ne(me),Wt.push(Ut),jt=Rd=1,yd=F-1;1<=yd?Rd<=yd:Rd>=yd;jt=1<=yd?++Rd:--Rd)Wt.push(le(10,rn+jt/F*(un-rn)));Wt.push(me)}else if(k.substr(0,1)==="q"){for(Wt.push(Ut),jt=j=1,Sd=F-1;1<=Sd?j<=Sd:j>=Sd;jt=1<=Sd?++j:--j)Fh=(ds.length-1)*jt/F,Fc=L(Fh),Fc===Fh?Wt.push(ds[Fc]):(_v=Fh-Fc,Wt.push(ds[Fc]*(1-_v)+ds[Fc+1]*_v));Wt.push(me)}else if(k.substr(0,1)==="k"){for(gn=ds.length,qe=new Array(gn),zt=new Array(F),Id=!0,Kr=0,Ct=null,Ct=[],Ct.push(Ut),jt=Y=1,Cd=F-1;1<=Cd?Y<=Cd:Y>=Cd;jt=1<=Cd?++Y:--Y)Ct.push(Ut+jt/F*(me-Ut));for(Ct.push(me);Id;){for(Ze=ue=0,Ad=F-1;0<=Ad?ue<=Ad:ue>=Ad;Ze=0<=Ad?++ue:--ue)zt[Ze]=0;for(jt=ge=0,Pd=gn-1;0<=Pd?ge<=Pd:ge>=Pd;jt=0<=Pd?++ge:--ge){for(kx=ds[jt],Jt=Number.MAX_VALUE,Ze=Se=0,Md=F-1;0<=Md?Se<=Md:Se>=Md;Ze=0<=Md?++Se:--Se)Cr=p(Ct[Ze]-kx),Cr<Jt&&(Jt=Cr,st=Ze);zt[st]++,qe[jt]=st}for(Zt=new Array(F),Ze=Ne=0,Ed=F-1;0<=Ed?Ne<=Ed:Ne>=Ed;Ze=0<=Ed?++Ne:--Ne)Zt[Ze]=null;for(jt=Fe=0,Td=gn-1;0<=Td?Fe<=Td:Fe>=Td;jt=0<=Td?++Fe:--Fe)ft=qe[jt],Zt[ft]===null?Zt[ft]=ds[jt]:Zt[ft]+=ds[jt];for(Ze=Ye=0,Od=F-1;0<=Od?Ye<=Od:Ye>=Od;Ze=0<=Od?++Ye:--Ye)Zt[Ze]*=1/zt[Ze];for(Id=!1,Ze=at=0,bd=F-1;0<=bd?at<=bd:at>=bd;Ze=0<=bd?++at:--at)if(Zt[Ze]!==Ct[jt]){Id=!0;break}Ct=Zt,Kr++,Kr>200&&(Id=!1)}for(Pt={},Ze=Ae=0,xd=F-1;0<=xd?Ae<=xd:Ae>=xd;Ze=0<=xd?++Ae:--Ae)Pt[Ze]=[];for(jt=de=0,_d=gn-1;0<=_d?de<=_d:de>=_d;jt=0<=_d?++de:--de)ft=qe[jt],Pt[ft].push(ds[jt]);for(Ta=[],Ze=fe=0,wd=F-1;0<=wd?fe<=wd:fe>=wd;Ze=0<=wd?++fe:--fe)Ta.push(Pt[Ze][0]),Ta.push(Pt[Ze][Pt[Ze].length-1]);for(Ta=Ta.sort(function(wv,Sv){return wv-Sv}),Wt.push(Ta[0]),jt=ke=1,Rx=Ta.length-1;ke<=Rx;jt=ke+=2)zh=Ta[jt],!isNaN(zh)&&Wt.indexOf(zh)===-1&&Wt.push(zh)}return Wt},z=function(N,k,F){var j,Y,ue,ge;return j=mt(arguments),N=j[0],k=j[1],F=j[2],isNaN(N)&&(N=0),N/=360,N<1/3?(Y=(1-k)/3,ge=(1+k*C(l*N)/C(s-l*N))/3,ue=1-(Y+ge)):N<2/3?(N-=1/3,ge=(1-k)/3,ue=(1+k*C(l*N)/C(s-l*N))/3,Y=1-(ge+ue)):(N-=2/3,ue=(1-k)/3,Y=(1+k*C(l*N)/C(s-l*N))/3,ge=1-(ue+Y)),ge=ve(F*ge*3),ue=ve(F*ue*3),Y=ve(F*Y*3),[ge*255,ue*255,Y*255,j.length>3?j[3]:1]},Ie=function(){var N,k,F,j,Y,ue,ge,Se;return ge=mt(arguments),ue=ge[0],k=ge[1],N=ge[2],l=Math.PI*2,ue/=255,k/=255,N/=255,Y=Math.min(ue,k,N),j=(ue+k+N)/3,Se=1-Y/j,Se===0?F=0:(F=(ue-k+(ue-N))/2,F/=Math.sqrt((ue-k)*(ue-k)+(ue-N)*(k-N)),F=Math.acos(F),N>k&&(F=l-F),F/=l),[F*360,Se,j]},x.hsi=function(){return function(N,k,F){F.prototype=N.prototype;var j=new F,Y=N.apply(j,k);return Object(Y)===Y?Y:j}(n,Ue.call(arguments).concat(["hsi"]),function(){})},f.hsi=z,n.prototype.hsi=function(){return Ie(this._rgb)},K=function(N,k,F,j){var Y,ue,ge,Se,Ne,Fe,Ye,at,Ae,de,fe,ke;return j==="hsl"?(fe=N.hsl(),ke=k.hsl()):j==="hsv"?(fe=N.hsv(),ke=k.hsv()):j==="hcg"?(fe=N.hcg(),ke=k.hcg()):j==="hsi"?(fe=N.hsi(),ke=k.hsi()):(j==="lch"||j==="hcl")&&(j="hcl",fe=N.hcl(),ke=k.hcl()),j.substr(0,1)==="h"&&(ge=fe[0],Ae=fe[1],Fe=fe[2],Se=ke[0],de=ke[1],Ye=ke[2]),!isNaN(ge)&&!isNaN(Se)?(Se>ge&&Se-ge>180?Y=Se-(ge+360):Se<ge&&ge-Se>180?Y=Se+360-ge:Y=Se-ge,ue=ge+F*Y):isNaN(ge)?isNaN(Se)?ue=Number.NaN:(ue=Se,(Fe===1||Fe===0)&&j!=="hsv"&&(at=de)):(ue=ge,(Ye===1||Ye===0)&&j!=="hsv"&&(at=Ae)),at==null&&(at=Ae+F*(de-Ae)),Ne=Fe+F*(Ye-Fe),x[j](ue,at,Ne)},h=h.concat(function(){var N,k,F,j;for(F=["hsv","hsl","hsi","hcl","lch","hcg"],j=[],k=0,N=F.length;k<N;k++)Ce=F[k],j.push([Ce,K]);return j}()),pe=function(N,k,F,j){var Y,ue;return Y=N.num(),ue=k.num(),x.num(Y+(ue-Y)*F,"num")},h.push(["num",pe]),ie=function(N,k,F,j){var Y,ue;return Y=N.lab(),ue=k.lab(),new n(Y[0]+F*(ue[0]-Y[0]),Y[1]+F*(ue[1]-Y[1]),Y[2]+F*(ue[2]-Y[2]),j)},h.push(["lab",ie])}).call(we)})(vC,vC.exports);var krt=vC.exports,ire={exports:{}};(function(e){/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */(function(t){function n(s,a,l,c,u){this._listener=a,this._isOnce=l,this.context=c,this._signal=s,this._priority=u||0}n.prototype={active:!0,params:null,execute:function(s){var a,l;return this.active&&this._listener&&(l=this.params?this.params.concat(s):s,a=this._listener.apply(this.context,l),this._isOnce&&this.detach()),a},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};function r(s,a){if(typeof s!="function")throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",a))}function i(){this._bindings=[],this._prevParams=null;var s=this;this.dispatch=function(){i.prototype.dispatch.apply(s,arguments)}}i.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(s,a,l,c){var u=this._indexOfListener(s,l),d;if(u!==-1){if(d=this._bindings[u],d.isOnce()!==a)throw new Error("You cannot add"+(a?"":"Once")+"() then add"+(a?"Once":"")+"() the same listener without removing the relationship first.")}else d=new n(this,s,a,l,c),this._addBinding(d);return this.memorize&&this._prevParams&&d.execute(this._prevParams),d},_addBinding:function(s){var a=this._bindings.length;do--a;while(this._bindings[a]&&s._priority<=this._bindings[a]._priority);this._bindings.splice(a+1,0,s)},_indexOfListener:function(s,a){for(var l=this._bindings.length,c;l--;)if(c=this._bindings[l],c._listener===s&&c.context===a)return l;return-1},has:function(s,a){return this._indexOfListener(s,a)!==-1},add:function(s,a,l){return r(s,"add"),this._registerListener(s,!1,a,l)},addOnce:function(s,a,l){return r(s,"addOnce"),this._registerListener(s,!0,a,l)},remove:function(s,a){r(s,"remove");var l=this._indexOfListener(s,a);return l!==-1&&(this._bindings[l]._destroy(),this._bindings.splice(l,1)),s},removeAll:function(){for(var s=this._bindings.length;s--;)this._bindings[s]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(s){if(this.active){var a=Array.prototype.slice.call(arguments),l=this._bindings.length,c;if(this.memorize&&(this._prevParams=a),!!l){c=this._bindings.slice(),this._shouldPropagate=!0;do l--;while(c[l]&&this._shouldPropagate&&c[l].execute(a)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var o=i;o.Signal=i,e.exports?e.exports=o:t.signals=o})(we)})(ire);var Ht=ire.exports,ore={};(function(e){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(a){return i(s(a),arguments)}function r(a,l){return n.apply(null,[a].concat(l||[]))}function i(a,l){var c=1,u=a.length,d,f="",h,p,g,v,m,y,b,_;for(h=0;h<u;h++)if(typeof a[h]=="string")f+=a[h];else if(typeof a[h]=="object"){if(g=a[h],g.keys)for(d=l[c],p=0;p<g.keys.length;p++){if(d==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[p],g.keys[p-1]));d=d[g.keys[p]]}else g.param_no?d=l[g.param_no]:d=l[c++];if(t.not_type.test(g.type)&&t.not_primitive.test(g.type)&&d instanceof Function&&(d=d()),t.numeric_arg.test(g.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(n("[sprintf] expecting number but found %T",d));switch(t.number.test(g.type)&&(b=d>=0),g.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,g.width?parseInt(g.width):0);break;case"e":d=g.precision?parseFloat(d).toExponential(g.precision):parseFloat(d).toExponential();break;case"f":d=g.precision?parseFloat(d).toFixed(g.precision):parseFloat(d);break;case"g":d=g.precision?String(Number(d.toPrecision(g.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=g.precision?d.substring(0,g.precision):d;break;case"t":d=String(!!d),d=g.precision?d.substring(0,g.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=g.precision?d.substring(0,g.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=g.precision?d.substring(0,g.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}t.json.test(g.type)?f+=d:(t.number.test(g.type)&&(!b||g.sign)?(_=b?"+":"-",d=d.toString().replace(t.sign,"")):_="",m=g.pad_char?g.pad_char==="0"?"0":g.pad_char.charAt(1):" ",y=g.width-(_+d).length,v=g.width&&y>0?m.repeat(y):"",f+=g.align?_+d+v:m==="0"?_+v+d:v+_+d)}return f}var o=Object.create(null);function s(a){if(o[a])return o[a];for(var l=a,c,u=[],d=0;l;){if((c=t.text.exec(l))!==null)u.push(c[0]);else if((c=t.modulo.exec(l))!==null)u.push("%");else if((c=t.placeholder.exec(l))!==null){if(c[2]){d|=1;var f=[],h=c[2],p=[];if((p=t.key.exec(h))!==null)for(f.push(p[1]);(h=h.substring(p[0].length))!=="";)if((p=t.key_access.exec(h))!==null)f.push(p[1]);else if((p=t.index_access.exec(h))!==null)f.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=f}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");u.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");l=l.substring(c[0].length)}return o[a]=u}e.sprintf=n,e.vsprintf=r,typeof window<"u"&&(window.sprintf=n,window.vsprintf=r)})()})(ore);function Lrt(e){if(typeof window>"u")return;const t=new RegExp(`${e}=([^&#=]*)`).exec(window.location.search);return t?decodeURIComponent(t[1]):void 0}function re(e,t){return e!==void 0?e:t}function ns(e,t){const n=Object.assign({},e);for(const r in t)e[r]===void 0&&(n[r]=t[r]);return n}function sre(e,t){for(const n in t){const r=t[n];r!==void 0&&(e[n]=r)}return e}function QD(){const e=window.location.protocol;return e.match(/http(s)?:/gi)===null?"http:":e}function $rt(){if(typeof window>"u")return!1;const e=window.navigator.userAgent;return/Opera|OPR/.test(e)?"Opera":/Chrome/i.test(e)?"Chrome":/Firefox/i.test(e)?"Firefox":/Mobile(\/.*)? Safari/i.test(e)?"Mobile Safari":/MSIE/i.test(e)?"Internet Explorer":!!/Safari/i.test(e)&&"Safari"}function Drt(e,t){return e<t?-1:e>t?1:0}function rf(e,t,n=Drt){let r=0,i=e.length-1;for(;r<=i;){const o=r+i>>1,s=n(t,e[o]);if(s>0)r=o+1;else{if(!(s<0))return o;i=o-1}}return-r-1}function eB(e,t,n){const r=function(o,s){let a=o.length-1;if(o[a]<s)return-1;let l=0;for(;l<=a;){const c=l+a>>1;o[c]>=s?a=c-1:l=c+1}return a+1}(e,t),i=function(o,s){if(o[0]>s)return-1;let a=0,l=o.length-1;for(;a<=l;){const c=a+l>>1;o[c]>s?l=c-1:a=c+1}return a-1}(e,n);return r===-1||i===-1||r>i?0:i-r+1}function tB(e){return e.sort().filter(function(t,n,r){return n===0||t!==r[n-1]})}function yC(e){if(e.length>28672){const n=[];for(let r=0;r<e.length;r+=28672)n.push(String.fromCharCode.apply(null,e.subarray(r,r+28672)));return n.join("")}return String.fromCharCode.apply(null,e)}function are(e,t){switch(e){case"int8":return new Int8Array(t);case"int16":return new Int16Array(t);case"int32":return new Int32Array(t);case"uint8":return new Uint8Array(t);case"uint16":return new Uint16Array(t);case"uint32":return new Uint32Array(t);case"float32":return new Float32Array(t);default:throw new Error("arrayType unknown: "+e)}}function bl(e,t){return new(t>65535?Uint32Array:Uint16Array)(e)}function mv(e){return e.buffer&&e.buffer instanceof ArrayBuffer?e.buffer:e}function RE(e,t){return e===void 0?e=new t:Array.isArray(e)&&(e=new t().fromArray(e)),e}function Of(e){return RE(e,W)}function z0(e){return RE(e,lt)}function DL(e){return RE(e,Fn)}function RO(e){return t=e,n=Float32Array,t instanceof n?t:new n(t);var t,n}function O9(e){return re(e,"").toString().toLowerCase()}class pd{constructor(t){this.name=t,this._dict={}}add(t,n){this._dict[O9(t)]=n}get(t){return this._dict[O9(t)]}get names(){return Object.keys(this._dict)}}function br(e){return .01745*e}const Brt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),pw=new Array(36);function nB(){let e,t=0;for(let n=0;n<36;n++)n===8||n===13||n===18||n===23?pw[n]="-":n===14?pw[n]="4":(t<=2&&(t=33554432+16777216*Math.random()|0),e=15&t,t>>=4,pw[n]=Brt[n===19?3&e|8:e]);return pw.join("")}function BL(e,t,n){return Math.max(t,Math.min(n,e))}function ys(e,t,n){return e+(t-e)*n}function ql(e,t,n,r,i,o){const s=(n-e)*o,a=(r-t)*o,l=i*i;return(2*t-2*n+s+a)*(i*l)+(-3*t+3*n-2*s-a)*l+s*i+t}function Ax(e,t,n){var r;return r=function(i,o,s){return(i-o)/(s-o)}(n,e,t),(n=BL(r,0,1))*n*(3-2*n)}var lre="sRGB";const Nrt={scale:"uniform",mode:"hcl",domain:[0,1],value:16777215,reverse:!1},_S=new ht;function wn(e,t,n){const r=n.value;return n.value=function(i,o){let s=r.bind(this,i,o)();return lre=="linear"?(_S.set(s),_S.convertSRGBToLinear(),_S.getHex()):s},n}class _n{constructor(t={}){this.parameters=ns(t,Nrt),typeof this.parameters.value=="string"&&(this.parameters.value=_S.set(this.parameters.value).getHex()),this.parameters.structure&&(this.atomProxy=this.parameters.structure.getAtomProxy())}getScale(t={}){const n=ns(t,this.parameters);return n.scale==="rainbow"?n.scale=["red","orange","yellow","green","blue"]:n.scale==="rwb"&&(n.scale=["red","white","blue"]),n.reverse&&(n.domain=n.domain.slice().reverse()),krt.scale(n.scale).mode(n.mode).domain(n.domain).out("num")}colorToArray(t,n=[],r=0){return n[r]=(t>>16&255)/255,n[r+1]=(t>>8&255)/255,n[r+2]=(255&t)/255,n}atomColorToArray(t,n,r){return this.colorToArray(this.atomColor?this.atomColor(t):0,n,r)}bondColor(t,n){return this.atomProxy&&this.atomColor?(this.atomProxy.index=n?t.atomIndex1:t.atomIndex2,this.atomColor(this.atomProxy)):0}bondColorToArray(t,n,r,i){return this.colorToArray(this.bondColor(t,n),r,i)}volumeColorToArray(t,n,r){return this.colorToArray(this.volumeColor?this.volumeColor(t):0,n,r)}positionColorToArray(t,n,r){return this.colorToArray(this.positionColor?this.positionColor(t):0,n,r)}}var Lt;(function(e){e[e.PROTEIN=1]="PROTEIN",e[e.NUCLEIC=2]="NUCLEIC",e[e.RNA=3]="RNA",e[e.DNA=4]="DNA",e[e.POLYMER=5]="POLYMER",e[e.WATER=6]="WATER",e[e.HELIX=7]="HELIX",e[e.SHEET=8]="SHEET",e[e.TURN=9]="TURN",e[e.BACKBONE=10]="BACKBONE",e[e.SIDECHAIN=11]="SIDECHAIN",e[e.ALL=12]="ALL",e[e.HETERO=13]="HETERO",e[e.ION=14]="ION",e[e.SACCHARIDE=15]="SACCHARIDE",e[e.SUGAR=15]="SUGAR",e[e.BONDED=16]="BONDED",e[e.RING=17]="RING",e[e.AROMATICRING=18]="AROMATICRING",e[e.METAL=19]="METAL",e[e.POLARH=20]="POLARH",e[e.NONE=21]="NONE"})(Lt||(Lt={}));const I9=["*","","ALL"],Frt=["NONE"],rB=[Lt.BACKBONE,Lt.SIDECHAIN,Lt.BONDED,Lt.RING,Lt.AROMATICRING,Lt.METAL,Lt.POLARH],cre=[Lt.POLYMER,Lt.WATER],zrt=["ALA","GLY","SER"],jrt=["CYS","SER","THR"],Urt=["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL"],Vrt=["PHE","TRP","TYR","HIS"],Hrt=["ASN","GLN"],Grt=["ASP","GLU"],Wrt=["ARG","HIS","LYS"],qrt=["ARG","ASP","GLU","HIS","LYS"],Yrt=["ASN","ARG","ASP","CYS","GLY","GLN","GLU","HIS","LYS","SER","THR","TYR"],Xrt=["ALA","ILE","LEU","MET","PHE","PRO","TRP","VAL"],Krt=["HIS","PHE","PRO","TRP","TYR"],Zrt=["ALA","GLY","ILE","LEU","VAL"];function Jrt(e,t){if(t.atomname===void 0&&t.element===void 0&&t.altloc===void 0&&t.atomindex===void 0&&t.keyword===void 0&&t.inscode===void 0&&t.resname===void 0&&t.sstruc===void 0&&t.resno===void 0&&t.chainname===void 0&&t.model===void 0)return-1;if(t.keyword!==void 0&&(t.keyword===Lt.BACKBONE&&!e.isBackbone()||t.keyword===Lt.SIDECHAIN&&!e.isSidechain()||t.keyword===Lt.BONDED&&!e.isBonded()||t.keyword===Lt.RING&&!e.isRing()||t.keyword===Lt.AROMATICRING&&!e.isAromatic()||t.keyword===Lt.HETERO&&!e.isHetero()||t.keyword===Lt.PROTEIN&&!e.isProtein()||t.keyword===Lt.NUCLEIC&&!e.isNucleic()||t.keyword===Lt.RNA&&!e.isRna()||t.keyword===Lt.DNA&&!e.isDna()||t.keyword===Lt.POLYMER&&!e.isPolymer()||t.keyword===Lt.WATER&&!e.isWater()||t.keyword===Lt.HELIX&&!e.isHelix()||t.keyword===Lt.SHEET&&!e.isSheet()||t.keyword===Lt.TURN&&!e.isTurn()||t.keyword===Lt.ION&&!e.isIon()||t.keyword===Lt.SACCHARIDE&&!e.isSaccharide()||t.keyword===Lt.METAL&&!e.isMetal()||t.keyword===Lt.POLARH&&!e.isPolarHydrogen())||t.atomname!==void 0&&t.atomname!==e.atomname||t.element!==void 0&&t.element!==e.element||t.altloc!==void 0&&t.altloc!==e.altloc||t.atomindex!==void 0&&rf(t.atomindex,e.index)<0)return!1;if(t.resname!==void 0){if(Array.isArray(t.resname)){if(!t.resname.includes(e.resname))return!1}else if(t.resname!==e.resname)return!1}if(t.sstruc!==void 0&&t.sstruc!==e.sstruc)return!1;if(t.resno!==void 0){if(Array.isArray(t.resno)&&t.resno.length===2){if(t.resno[0]>e.resno||t.resno[1]<e.resno)return!1}else if(t.resno!==e.resno)return!1}return(t.inscode===void 0||t.inscode===e.inscode)&&(t.chainname===void 0||t.chainname===e.chainname)&&(t.model===void 0||t.model===e.modelIndex)}function Qrt(e,t){if(t.resname===void 0&&t.resno===void 0&&t.inscode===void 0&&t.sstruc===void 0&&t.model===void 0&&t.chainname===void 0&&t.atomindex===void 0&&(t.keyword===void 0||rB.includes(t.keyword)))return-1;if(t.keyword!==void 0&&(t.keyword===Lt.HETERO&&!e.isHetero()||t.keyword===Lt.PROTEIN&&!e.isProtein()||t.keyword===Lt.NUCLEIC&&!e.isNucleic()||t.keyword===Lt.RNA&&!e.isRna()||t.keyword===Lt.DNA&&!e.isDna()||t.keyword===Lt.POLYMER&&!e.isPolymer()||t.keyword===Lt.WATER&&!e.isWater()||t.keyword===Lt.HELIX&&!e.isHelix()||t.keyword===Lt.SHEET&&!e.isSheet()||t.keyword===Lt.TURN&&!e.isTurn()||t.keyword===Lt.ION&&!e.isIon()||t.keyword===Lt.SACCHARIDE&&!e.isSaccharide())||t.atomindex!==void 0&&eB(t.atomindex,e.atomOffset,e.atomEnd)===0)return!1;if(t.resname!==void 0){if(Array.isArray(t.resname)){if(!t.resname.includes(e.resname))return!1}else if(t.resname!==e.resname)return!1}if(t.sstruc!==void 0&&t.sstruc!==e.sstruc)return!1;if(t.resno!==void 0){if(Array.isArray(t.resno)&&t.resno.length===2){if(t.resno[0]>e.resno||t.resno[1]<e.resno)return!1}else if(t.resno!==e.resno)return!1}return(t.inscode===void 0||t.inscode===e.inscode)&&(t.chainname===void 0||t.chainname===e.chainname)&&(t.model===void 0||t.model===e.modelIndex)}function eit(e,t){return t.chainname!==void 0||t.model!==void 0||t.atomindex!==void 0||t.keyword!==void 0&&cre.includes(t.keyword)&&e.entity?t.keyword!==void 0&&(t.keyword===Lt.POLYMER&&!e.entity.isPolymer()||t.keyword===Lt.WATER&&!e.entity.isWater())?!1:(t.atomindex===void 0||eB(t.atomindex,e.atomOffset,e.atomEnd)!==0)&&(t.chainname===void 0||t.chainname===e.chainname)&&(t.model===void 0||t.model===e.modelIndex):-1}function tit(e,t){return t.model===void 0&&t.atomindex===void 0?-1:(t.atomindex===void 0||eB(t.atomindex,e.atomOffset,e.atomEnd)!==0)&&(t.model===void 0||t.model===e.index)}function Px(e,t){if(e===null||e.error||!e.rules||e.rules.length===0)return!1;const n=e.rules.length,r=!e.negate,i=!!e.negate,o=[];for(let s=0;s<n;++s){const a=e.rules[s];a.hasOwnProperty("operator")&&(o[s]=Px(a,t))}return function(s){const a=e.operator==="AND";let l=!1;for(let c=0;c<n;++c){const u=e.rules[c];let d;if(u.hasOwnProperty("operator")){const f=o[c];if(d=f!==!1?f(s):-1,d===-1){l=!0;continue}if(d===!0){if(a)continue;return r}if(a)return i}else{if(u.keyword===Lt.ALL){if(a)continue;return r}if(u.keyword===Lt.NONE){if(a)continue;return i}if(d=t(s,u),d!==-1){if(d===!0){if(a)continue;return r}if(a)return i}else l=!0}}return l?-1:a?r:i}}function Mx(e,t){if(e.error||!e.rules||e.rules.length===0)return e;const n=e.rules.length,r={operator:e.operator,rules:[]};e.hasOwnProperty("negate")&&(r.negate=e.negate);for(let i=0;i<n;++i){const o=e.rules[i];if(o.hasOwnProperty("operator")){const s=Mx(o,t);s!==null&&r.rules.push(s)}else t(o)||r.rules.push(o)}return r.rules.length>0?e:null}function R9(e,t=!1){let n=e;return t&&(n=Mx(e,function(r){return r.keyword!==void 0&&!rB.includes(r.keyword)||r.model!==void 0||r.chainname!==void 0||r.resname!==void 0||r.resno!==void 0||r.sstruc!==void 0})),Px(n,Jrt)}function k9(e,t=!1){let n=e;return t&&(n=Mx(e,function(r){return!(r.keyword===void 0||!rB.includes(r.keyword))||r.model!==void 0||r.chainname!==void 0||r.atomname!==void 0||r.element!==void 0||r.altloc!==void 0})),Px(n,Qrt)}function L9(e,t=!1){let n=e;return t&&(n=Mx(e,function(r){return r.keyword!==void 0&&!cre.includes(r.keyword)||r.resname!==void 0||r.resno!==void 0||r.atomname!==void 0||r.element!==void 0||r.altloc!==void 0||r.sstruc!==void 0||r.inscode!==void 0})),Px(n,eit)}function $9(e,t=!1){let n=e;return t&&(n=Mx(e,function(r){return r.keyword!==void 0||r.chainname!==void 0||r.resname!==void 0||r.resno!==void 0||r.atomname!==void 0||r.element!==void 0||r.altloc!==void 0||r.sstruc!==void 0||r.inscode!==void 0})),Px(n,tit)}class Xn{constructor(t){this.signals={stringChanged:new Ht.Signal},this.setString(t)}get type(){return"selection"}setString(t,n){if(t===void 0&&(t=this.string||""),t===this.string)return;try{this.selection=function(i){let o={operator:void 0,rules:[]};if(!i)return o;let s,a,l=o;const c=[];(i=i.replace(/\(/g," ( ").replace(/\)/g," ) ").trim()).charAt(0)==="("&&i.substr(-1)===")"&&(i=i.slice(1,-1).trim());const u=i.split(/\s+/),d=g=>{s={operator:g,rules:[]},l===void 0?(l=s,o=s):(l.rules.push(s),c.push(l),l=s)},f=function(g){a=l,l=c.pop(),l===void 0&&(d(g),h(a))},h=function(g){l.rules.push(g)};let p=!1;for(let g=0;g<u.length;++g){const v=u[g],m=v.toUpperCase();if(v==="("){p=!1,d();continue}if(v===")"){f(),l.negate&&f();continue}if(p>0)if(m==="NOT")p=1;else if(p===1)p=2;else{if(p!==2)throw new Error("something went wrong with 'not'");p=!1,f()}if(m==="AND"){if(l.operator==="OR"){const C=l.rules.pop();d("AND"),h(C)}else l.operator="AND";continue}if(m==="OR"){l.operator==="AND"?f("OR"):l.operator="OR";continue}if(v.toUpperCase()==="NOT"){p=1,d(),l.negate=!0;continue}if(+m!=+m){const C=Lt[m];if(C!==void 0){h({keyword:C});continue}}if(m==="HYDROGEN"){h({operator:"OR",rules:[{element:"H"},{element:"D"}]});continue}if(m==="SMALL"){h({resname:zrt});continue}if(m==="NUCLEOPHILIC"){h({resname:jrt});continue}if(m==="HYDROPHOBIC"){h({resname:Urt});continue}if(m==="AROMATIC"){h({resname:Vrt});continue}if(m==="AMIDE"){h({resname:Hrt});continue}if(m==="ACIDIC"){h({resname:Grt});continue}if(m==="BASIC"){h({resname:Wrt});continue}if(m==="CHARGED"){h({resname:qrt});continue}if(m==="POLAR"){h({resname:Yrt});continue}if(m==="NONPOLAR"){h({resname:Xrt});continue}if(m==="CYCLIC"){h({resname:Krt});continue}if(m==="ALIPHATIC"){h({resname:Zrt});continue}if(m==="SIDECHAINATTACHED"){h({operator:"OR",rules:[{keyword:Lt.SIDECHAIN},{operator:"AND",negate:!1,rules:[{keyword:Lt.PROTEIN},{operator:"OR",negate:!1,rules:[{atomname:"CA"},{atomname:"BB"}]}]},{operator:"AND",negate:!1,rules:[{resname:"PRO"},{atomname:"N"}]},{operator:"AND",negate:!1,rules:[{keyword:Lt.NUCLEIC},{operator:"OR",negate:!0,rules:[{atomname:"P"},{atomname:"OP1"},{atomname:"OP2"},{atomname:"O3'"},{atomname:"O3*"},{atomname:"HO3'"},{atomname:"O5'"},{atomname:"O5*"},{atomname:"HO5'"},{atomname:"C5'"},{atomname:"C5*"},{atomname:"H5'"},{atomname:"H5''"}]}]}]});continue}if(m==="APOLARH"){h({operator:"AND",negate:!1,rules:[{element:"H"},{negate:!0,operator:void 0,rules:[{keyword:Lt.POLARH}]}]});continue}if(m==="LIGAND"){h({operator:"AND",rules:[{operator:"OR",rules:[{operator:"AND",rules:[{keyword:Lt.HETERO},{negate:!0,operator:void 0,rules:[{keyword:Lt.POLYMER}]}]},{negate:!0,operator:void 0,rules:[{keyword:Lt.POLYMER}]}]},{negate:!0,operator:void 0,rules:[{operator:"OR",rules:[{keyword:Lt.WATER},{keyword:Lt.ION}]}]}]});continue}if(I9.indexOf(m)!==-1){h({keyword:Lt.ALL});continue}if(v.charAt(0)==="@"){const C=v.substr(1).split(",").map(A=>parseInt(A));C.sort(function(A,T){return A-T}),h({atomindex:C});continue}if(v.charAt(0)==="#"){console.error("# for element selection deprecated, use _"),h({element:m.substr(1)});continue}if(v.charAt(0)==="_"){h({element:m.substr(1)});continue}if(v[0]==="["&&v[v.length-1]==="]"){const C=m.substr(1,v.length-2).split(","),A=C.length>1?C:C[0];h({resname:A});continue}if(v.length>=1&&v.length<=4&&v[0]!=="^"&&v[0]!==":"&&v[0]!=="."&&v[0]!=="%"&&v[0]!=="/"&&isNaN(parseInt(v))){h({resname:m});continue}const y={operator:"AND",rules:[]},b=v.split("/");if(b.length>1&&b[1]){if(isNaN(parseInt(b[1])))throw new Error("model must be an integer");y.rules.push({model:parseInt(b[1])})}const _=b[0].split("%");_.length>1&&y.rules.push({altloc:_[1]});const x=_[0].split(".");if(x.length>1&&x[1]){if(x[1].length>4)throw new Error("atomname must be one to four characters");y.rules.push({atomname:x[1].substring(0,4).toUpperCase()})}const w=x[0].split(":");w.length>1&&w[1]&&y.rules.push({chainname:w[1]});const S=w[0].split("^");if(S.length>1&&y.rules.push({inscode:S[1]}),S[0]){let C,A;S[0][0]==="-"&&(S[0]=S[0].substr(1),C=!0),S[0].includes("--")&&(S[0]=S[0].replace("--","-"),A=!0);let T=S[0].split("-");if(T.length===1){let O=parseInt(T[0]);if(isNaN(O))throw new Error("resi must be an integer");C&&(O*=-1),y.rules.push({resno:O})}else{if(T.length!==2)throw new Error("resi range must contain one '-'");{const O=T.map(R=>parseInt(R));C&&(O[0]*=-1),A&&(O[1]*=-1),y.rules.push({resno:[O[0],O[1]]})}}}if(y.rules.length===1)h(y.rules[0]);else{if(!(y.rules.length>1))throw new Error("empty selection chunk");h(y)}}return o.operator===void 0&&o.rules.length===1&&o.rules[0].hasOwnProperty("operator")&&(o=o.rules[0]),o}(t)}catch(i){this.selection={error:i.message}}const r=this.selection;this.string=t,this.test=R9(r),this.residueTest=k9(r),this.chainTest=L9(r),this.modelTest=$9(r),this.atomOnlyTest=R9(r,!0),this.residueOnlyTest=k9(r,!0),this.chainOnlyTest=L9(r,!0),this.modelOnlyTest=$9(r,!0),n||this.signals.stringChanged.dispatch(this.string)}isAllSelection(){return I9.includes(this.string.toUpperCase())}isNoneSelection(){return Frt.includes(this.string.toUpperCase())}}class nit extends _n{constructor(t){super(t),this.colormakerList=[],this.selectionList=[],(t.dataList||[]).forEach(n=>{const[r,i,o={}]=n;Qt.hasScheme(r)?Object.assign(o,{scheme:r,structure:this.parameters.structure}):Object.assign(o,{scheme:"uniform",value:new ht(r).getHex()}),this.colormakerList.push(Qt.getScheme(o)),this.selectionList.push(new Xn(i))})}atomColor(t){for(let n=0,r=this.selectionList.length;n<r;++n){const i=this.selectionList[n].test;if(i&&i(t))return this.colormakerList[n].atomColor(t)}return 16777215}}const rit={"":"",OrRd:"[S] Orange-Red",PuBu:"[S] Purple-Blue",BuPu:"[S] Blue-Purple",Oranges:"[S] Oranges",BuGn:"[S] Blue-Green",YlOrBr:"[S] Yellow-Orange-Brown",YlGn:"[S] Yellow-Green",Reds:"[S] Reds",RdPu:"[S] Red-Purple",Greens:"[S] Greens",YlGnBu:"[S] Yellow-Green-Blue",Purples:"[S] Purples",GnBu:"[S] Green-Blue",Greys:"[S] Greys",YlOrRd:"[S] Yellow-Orange-Red",PuRd:"[S] Purple-Red",Blues:"[S] Blues",PuBuGn:"[S] Purple-Blue-Green",Viridis:"[D] Viridis",Spectral:"[D] Spectral",RdYlGn:"[D] Red-Yellow-Green",RdBu:"[D] Red-Blue",PiYG:"[D] Pink-Yellowgreen",PRGn:"[D] Purplered-Green",RdYlBu:"[D] Red-Yellow-Blue",BrBG:"[D] Brown-Bluegreen",RdGy:"[D] Red-Grey",PuOr:"[D] Purple-Orange",Set1:"[Q] Set1",Set2:"[Q] Set2",Set3:"[Q] Set3",Dark2:"[Q] Dark2",Paired:"[Q] Paired",Pastel1:"[Q] Pastel1",Pastel2:"[Q] Pastel2",Accent:"[Q] Accent",rainbow:"[?] Rainbow",rwb:"[?] Red-White-Blue"},iit={"":"",rgb:"Red Green Blue",hsv:"Hue Saturation Value",hsl:"Hue Saturation Lightness",hsi:"Hue Saturation Intensity",lab:"CIE L*a*b*",hcl:"Hue Chroma Lightness"};function ure(e){const t=e;return e.forEach(function(n){n.__deps&&Array.prototype.push.apply(t,ure(n.__deps))}),t}function oit(e){return tB(ure(e)).map(function(t){return t.toString()}).join(`


`)}function sit(e){const t=e.data.__name,n=e.data.__postId;if(t===void 0)console.error("message __name undefined");else if(self.func===void 0)console.error("worker func undefined",t);else{const r=function(i,o){i=i||{},n!==void 0&&(i.__postId=n);try{self.postMessage(i,o)}catch(s){console.error("self.postMessage:",s),self.postMessage(i)}};self.func(e,r)}}function ait(e,t){let n=`'use strict';

`+oit(t);return n+=`


self.func = `+e.toString()+";",n+=`


self.onmessage = `+sit.toString()+";",new Blob([n],{type:"application/javascript"})}const dre=$rt();let fre=!1;try{const e=Object.defineProperty({},"passive",{get:function(){fre=!0}});window.addEventListener("test",t=>{},e)}catch{}const hre=typeof window<"u"&&window.orientation!==void 0;let su=!1;function D9(e){su=e}let ll=!1;function B9(e){ll=e}const Ve={log:Function.prototype.bind.call(console.log,console),info:Function.prototype.bind.call(console.info,console),warn:Function.prototype.bind.call(console.warn,console),error:Function.prototype.bind.call(console.error,console),time:Function.prototype.bind.call(console.time,console),timeEnd:Function.prototype.bind.call(console.timeEnd,console)};let a0={color:"green",labelColor:8421504,labelAttachment:"bottom-center",labelSize:.7,labelZOffset:.5,labelYOffset:.1,labelBorder:!0,labelBorderColor:13882323,labelBorderWidth:.25,lineOpacity:.8,linewidth:5,opacity:.6,labelUnit:"angstrom",arcVisible:!0,planeVisible:!1},Je=!!(kO=Lrt("debug"))&&(typeof kO!="string"||/^1|true|t|yes|y$/i.test(kO));var kO;const lit=["ngl","js"],by=new class{constructor(){this.activeWorkerCount=0,this._funcDict={},this._depsDict={},this._blobDict={}}add(e,t,n){this._funcDict[e]=t,this._depsDict[e]=n}get(e){return this._blobDict[e]||(this._blobDict[e]=ait(this._funcDict[e],this._depsDict[e])),this._blobDict[e]}},Qt=new class{constructor(){this.schemes={},this.userSchemes={}}getScheme(e){const t=((e||{}).scheme||"").toLowerCase();let n;return n=t in this.schemes?this.schemes[t]:t in this.userSchemes?this.userSchemes[t]:_n,new n(e)}getSchemes(){const e={};return Object.keys(this.schemes).forEach(function(t){e[t]=t}),Object.keys(this.userSchemes).forEach(function(t){e[t]=t.split("|")[1]}),e}getScales(){return rit}getModes(){return iit}add(e,t){e=e.toLowerCase(),this.schemes[e]=t}addScheme(e,t){return e instanceof _n||(e=this._createScheme(e)),this._addUserScheme(e,t)}_addUserScheme(e,t){t=t||"";const n=`${nB()}|${t}`.toLowerCase();return this.userSchemes[n]=e,n}removeScheme(e){e=e.toLowerCase(),delete this.userSchemes[e]}_createScheme(e){const t=function(n){_n.call(this,n),e.call(this,n)};return(t.prototype=_n.prototype).constructor=_n,t}addSelectionScheme(e,t){return this._addUserScheme(class extends nit{constructor(n){super(Object.assign({dataList:e},n))}},t)}hasScheme(e){return(e=e.toLowerCase())in this.schemes||e in this.userSchemes}},ku=new pd("datasource"),Zn=new pd("representatation"),Nt=new class extends pd{constructor(){super("parser")}__hasObjName(e,t){const n=this.get(e);return n&&n.prototype.__objName===t}isTrajectory(e){return this.__hasObjName(e,"frames")}isStructure(e){return this.__hasObjName(e,"structure")}isVolume(e){return this.__hasObjName(e,"volume")}isSurface(e){return this.__hasObjName(e,"surface")}isBinary(e){const t=this.get(e);return t&&t.prototype.isBinary}isXml(e){const t=this.get(e);return t&&t.prototype.isXml}isJson(e){const t=this.get(e);return t&&t.prototype.isJson}getTrajectoryExtensions(){return this.names.filter(e=>this.isTrajectory(e))}getStructureExtensions(){return this.names.filter(e=>this.isStructure(e))}getVolumeExtensions(){return this.names.filter(e=>this.isVolume(e))}getSurfaceExtensions(){return this.names.filter(e=>this.isSurface(e))}},dn=new pd("shader"),iB=new pd("decompressor"),Ig=new pd("component"),us=new pd("buffer"),hs=new pd("picker");let LO;class pre{constructor(t,n={}){this.chunkSize=10485760,this.newline=`
`,this.__pointer=0,this.__partialLine="",this.compressed=re(n.compressed,!1),this.binary=re(n.binary,!1),this.json=re(n.json,!1),this.xml=re(n.xml,!1),this.src=t}isBinary(){return this.binary||this.compressed}read(){return this._read().then(t=>{const n=this.compressed?iB.get(this.compressed):void 0;return this.compressed&&n?this.data=n(t):((this.binary||this.compressed)&&t instanceof ArrayBuffer&&(t=new Uint8Array(t)),this.data=t),this.data})}_chunk(t,n){return n=Math.min(this.data.length,n),t===0&&this.data.length===n?this.data:this.isBinary()?this.data.subarray(t,n):this.data.substring(t,n)}chunk(t){const n=t+this.chunkSize;return this._chunk(t,n)}peekLines(t){const n=this.data,r=n.length,i=this.isBinary()?this.newline.charCodeAt(0):this.newline;let o,s=0;for(o=0;o<r&&(n[o]===i&&++s,s!==t);++o);const a=this._chunk(0,o+1);return this.chunkToLines(a,"",o>r).lines}chunkCount(){return Math.floor(this.data.length/this.chunkSize)+1}asText(){return this.isBinary()?yC(this.data):this.data}chunkToLines(t,n,r){const i=this.newline;if(!this.isBinary()&&t.length===this.data.length)return{lines:t.split(i),partialLine:""};let o=[];const s=this.isBinary()?yC(t):t,a=s.lastIndexOf(i);if(a===-1)n+=s;else{const l=n+s.substr(0,a);o=o.concat(l.split(i)),n=a===s.length-i.length?"":s.substr(a+i.length)}return r&&n!==""&&o.push(n),{lines:o,partialLine:n}}nextChunk(){const t=this.__pointer;if(!(t>this.data.length))return this.__pointer+=this.chunkSize,this.chunk(t)}nextChunkOfLines(){const t=this.nextChunk();if(t===void 0)return;const n=this.__pointer>this.data.length,r=this.chunkToLines(t,this.__partialLine,n);return this.__partialLine=r.partialLine,r.lines}eachChunk(t){const n=this.chunkSize,r=this.data.length,i=this.chunkCount();for(let o=0;o<r;o+=n)t(this.chunk(o),Math.round(o/n),i)}eachChunkOfLines(t){this.eachChunk((n,r,i)=>{const o=r===i+1,s=this.chunkToLines(n,this.__partialLine,o);this.__partialLine=s.partialLine,t(s.lines,r,i)})}dispose(){delete this.src}}class cit extends pre{_read(){return new Promise((t,n)=>{const r=this.src,i=new FileReader;i.onload=o=>{o.target&&t(o.target.result)},i.onerror=o=>n(o),this.binary||this.compressed?i.readAsArrayBuffer(r):i.readAsText(r)})}}class uit extends pre{_read(){return new Promise((t,n)=>{const r=this.src,i=new XMLHttpRequest;i.open("GET",r,!0),i.addEventListener("load",()=>{if(i.status===200||i.status===304||i.status===0)try{t(i.response)}catch(o){n(o)}else n(i.statusText)},!1),i.addEventListener("error",o=>n("network error"),!1),this.isBinary()?i.responseType="arraybuffer":this.json?i.responseType="json":this.xml?i.responseType="document":i.responseType="text",i.send()})}}class mre{constructor(t,n={}){this.parameters=ns(n,{ext:"",compressed:!1,binary:Nt.isBinary(n.ext||""),name:"",dir:"",path:"",protocol:""});const r={compressed:this.parameters.compressed,binary:this.parameters.binary,json:Nt.isJson(this.parameters.ext),xml:Nt.isXml(this.parameters.ext)};typeof File<"u"&&t instanceof File||typeof Blob<"u"&&t instanceof Blob?this.streamer=new cit(t,r):this.streamer=new uit(t,r)}}class dit extends mre{constructor(t,n={}){super(t,n),this.parserParams={voxelSize:n.voxelSize,firstModelOnly:n.firstModelOnly,asTrajectory:n.asTrajectory,cAlphaOnly:n.cAlphaOnly,delimiter:n.delimiter,comment:n.comment,columnNames:n.columnNames,inferBonds:n.inferBonds,name:this.parameters.name,path:this.parameters.path}}load(){return new(Nt.get(this.parameters.ext))(this.streamer,this.parserParams).parse()}}class fit{constructor(t,n,r){this.name=n,this.path=r,this.signals={elementAdded:new Ht.Signal,elementRemoved:new Ht.Signal,nameChanged:new Ht.Signal},this.type="Script",this.dir=r.substring(0,r.lastIndexOf("/")+1);try{this.fn=new Function("stage","__name","__path","__dir",t)}catch(i){Ve.error("Script compilation failed",i),this.fn=function(){}}}run(t){return new Promise((n,r)=>{try{this.fn.apply(null,[t,this.name,this.path,this.dir]),n()}catch(i){Ve.error("Script.fn",i),r(i)}})}}class hit extends mre{load(){return this.streamer.read().then(()=>new fit(this.streamer.asText(),this.parameters.name,this.parameters.path))}}function Co(e){const t=iB.names;let n,r,i="";n=e instanceof File?e.name:e instanceof Blob?"":e;const o=n.lastIndexOf("?"),s=o!==-1?n.substring(o):"";n=n.substring(0,o===-1?n.length:o);const a=n.replace(/^.*[\\/]/,"");let l=a.substring(0,a.lastIndexOf("."));const c=a.split(".");let u=c.length>1?(c.pop()||"").toLowerCase():"";const d=n.match(/^(.+):\/\/(.+)$/);d&&(i=d[1].toLowerCase(),n=d[2]||"");const f=n.substring(0,n.lastIndexOf("/")+1);if(t.includes(u)){r=u;const h=n.length-u.length-1;u=(n.substr(0,h).split(".").pop()||"").toLowerCase();const p=l.length-u.length-1;l=l.substr(0,p)}else r=!1;return{path:n,name:a,ext:u,base:l,dir:f,compressed:r,protocol:i,query:s,src:e}}function pit(e){let t=Co(e);const n=ku.get(t.protocol);return n&&(t=Co(n.getUrl(t.src)),!t.ext&&n.getExt&&(t.ext=n.getExt(e))),t}function N9(e,t={}){const n=Object.assign(pit(e),t);let r;return Nt.names.includes(n.ext)?r=new dit(n.src,n):lit.includes(n.ext)&&(r=new hit(n.src,n)),r?r.load():Promise.reject(new Error(`autoLoad: ext '${n.ext}' unknown`))}const $O=[];class mit{constructor(t,n={}){this._mark=0,this._marks=[],this.offset=0,this.littleEndian=!0;let r=!1;t===void 0&&(t=8192),typeof t=="number"?t=new ArrayBuffer(t):r=!0;const i=n.offset?n.offset>>>0:0;let o=t.byteLength-i,s=i;t instanceof ArrayBuffer||(t.byteLength!==t.buffer.byteLength&&(s=t.byteOffset+i),t=t.buffer),this._lastWrittenByte=r?o:0,this.buffer=t,this.length=o,this.byteLength=o,this.byteOffset=s,this._data=new DataView(this.buffer,s,o)}available(t){return t===void 0&&(t=1),this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t){return t===void 0&&(t=1),this.offset+=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t){if(t===void 0&&(t=1),!this.available(t)){const n=2*(this.offset+t),r=new Uint8Array(n);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t){t===void 0&&(t=1);for(var n=new Uint8Array(t),r=0;r<t;r++)n[r]=this.readByte();return n}readInt16(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){$O.length=t;for(var n=0;n<t;n++)$O[n]=this.readChar();return $O.join("")}writeBoolean(t=!1){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(var n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(var n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this._lastWrittenByte)}_updateLastWrittenByte(){this.offset>this._lastWrittenByte&&(this._lastWrittenByte=this.offset)}}class gre{constructor(){this.count=0,this.signals={countChanged:new Ht.Signal}}clear(){this.change(-this.count)}change(t){this.count+=t,this.signals.countChanged.dispatch(t,this.count),this.count<0&&Ve.warn("Counter.count below zero",this.count)}increment(){this.change(1)}decrement(){this.change(-1)}listen(t){this.change(t.count),t.signals.countChanged.add(this.change,this)}unlisten(t){const n=t.signals.countChanged;n.has(this.change,this)&&n.remove(this.change,this)}onZeroOnce(t,n){if(this.count===0)t.call(n);else{const r=()=>{this.count===0&&(this.signals.countChanged.remove(r,this),t.call(n))};this.signals.countChanged.add(r,this)}}dispose(){this.clear(),this.signals.countChanged.dispose()}}dn.add("shader/BasicLine.vert",`void main(){
#include begin_vertex
#include project_vertex
}`),dn.add("shader/BasicLine.frag",`uniform vec3 uColor;
#include common
#include fog_pars_fragment
void main(){
gl_FragColor = vec4( uColor, 1.0 );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
}`),dn.add("shader/Quad.vert",`varying vec2 vUv;
void main() {
vUv = uv;
gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`),dn.add("shader/Quad.frag",`varying vec2 vUv;
uniform sampler2D tForeground;
uniform float scale;
void main() {
vec4 foreground = texture2D( tForeground, vUv );
gl_FragColor = foreground * scale;
}`);class git{constructor(){this.signals={updated:new Ht.Signal},this.maxDuration=-1/0,this.minDuration=1/0,this.avgDuration=14,this.lastDuration=1/0,this.prevFpsTime=0,this.lastFps=1/0,this.lastFrames=1,this.frames=0,this.count=0,this.begin()}update(){this.startTime=this.end(),this.currentTime=this.startTime,this.signals.updated.dispatch()}begin(){this.startTime=window.performance.now(),this.lastFrames=this.frames}end(){const t=window.performance.now();return this.count+=1,this.frames+=1,this.lastDuration=t-this.startTime,this.minDuration=Math.min(this.minDuration,this.lastDuration),this.maxDuration=Math.max(this.maxDuration,this.lastDuration),this.avgDuration-=this.avgDuration/30,this.avgDuration+=this.lastDuration/30,t>this.prevFpsTime+1e3&&(this.lastFps=this.frames,this.prevFpsTime=t,this.frames=0),t}}dn.add("shader/chunk/fog_fragment.glsl",`#ifdef USE_FOG
float depth = length( vViewPosition );
#ifdef FOG_EXP2
float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );
#else
float fogFactor = smoothstep( fogNear, fogFar, depth );
#endif
gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`),dn.add("shader/chunk/interior_fragment.glsl",`if( gl_FrontFacing == false ){
#ifdef USE_INTERIOR_COLOR
outgoingLight.xyz = interiorColor;
#else
#ifdef DIFFUSE_INTERIOR
outgoingLight.xyz = vColor;
#endif
#endif
outgoingLight.xyz *= 1.0 - interiorDarkening;
}`),dn.add("shader/chunk/matrix_scale.glsl",`float matrixScale( in mat4 m ){
vec4 r = m[ 0 ];
return sqrt( r[ 0 ] * r[ 0 ] + r[ 1 ] * r[ 1 ] + r[ 2 ] * r[ 2 ] );
}`),dn.add("shader/chunk/nearclip_vertex.glsl",`#ifdef NEAR_CLIP
if( vViewPosition.z < clipNear - 5.0 )
gl_Position.z = 2.0 * gl_Position.w;
#endif`),dn.add("shader/chunk/nearclip_fragment.glsl",`#ifdef NEAR_CLIP
if( vViewPosition.z < clipNear )
discard;
#endif`),dn.add("shader/chunk/opaque_back_fragment.glsl",`#ifdef OPAQUE_BACK
#ifdef FLIP_SIDED
if( gl_FrontFacing == true ){
gl_FragColor.a = 1.0;
}
#else
if( gl_FrontFacing == false ){
gl_FragColor.a = 1.0;
}
#endif
#endif`),dn.add("shader/chunk/radiusclip_vertex.glsl",`#ifdef RADIUS_CLIP
if( distance( vViewPosition, vClipCenter ) > clipRadius + 5.0 )
gl_Position.z = 2.0 * gl_Position.w;
#endif`),dn.add("shader/chunk/radiusclip_fragment.glsl",`#ifdef RADIUS_CLIP
if( distance( vViewPosition, vClipCenter ) > clipRadius )
discard;
#endif`),dn.add("shader/chunk/unpack_color.glsl",`vec3 unpackColor(float f) {
vec3 color;
color.r = floor(f / 256.0 / 256.0);
color.g = floor((f - color.r * 256.0 * 256.0) / 256.0);
color.b = floor(f - color.r * 256.0 * 256.0 - color.g * 256.0);
return color / 255.0;
}`);const vit=/^(?!\/\/)\s*#include\s+(\S+)/gim,DO={};function j0(e,t={}){let n=e+"|";for(const r in t)n+=r+":"+t[r];if(!DO[n]){const r=function(o){if(o===void 0)return"";const s=[];for(const a in o){const l=o[a];l&&s.push(`#define ${a} ${l}`)}return s.join(`
`)+`
`}(t);let i=dn.get(`shader/${e}`);if(!i)throw new Error(`empty shader, '${e}'`);i=i.replace(vit,function(o,s){const a=`shader/chunk/${s}.glsl`,l=dn.get(a)||tn[s];if(!l)throw new Error(`empty chunk, '${s}'`);return l}),DO[n]=r+i}return DO[n]}if(typeof WebGLRenderingContext<"u"){const e=WebGLRenderingContext.prototype,t=e.getShaderParameter;e.getShaderParameter=function(){return!Je||t.apply(this,arguments)};const n=e.getShaderInfoLog;e.getShaderInfoLog=function(){return Je?n.apply(this,arguments):""};const r=e.getProgramParameter;e.getProgramParameter=function(o,s){return!Je&&s===e.LINK_STATUS||r.apply(this,arguments)};const i=e.getProgramInfoLog;e.getProgramInfoLog=function(){return Je?i.apply(this,arguments):""}}const vre=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];vre.forEach(e=>{e.forEach(t=>{t[0]*=.0625,t[1]*=.0625})});class yit{constructor(t,n,r,i){this.canvas=document.createElement("canvas"),this._viewer=r,this._factor=re(i.factor,2),this._antialias=re(i.antialias,!1),this._onProgress=i.onProgress,this._onFinish=i.onFinish,this._antialias&&(this._factor*=2),this._n=this._factor*this._factor,this._width=this._viewer.width,this._height=this._viewer.height,this._antialias?(this.canvas.width=this._width*this._factor/2,this.canvas.height=this._height*this._factor/2):(this.canvas.width=this._width*this._factor,this.canvas.height=this._height*this._factor),this._ctx=this.canvas.getContext("2d"),this._viewerSampleLevel=r.sampleLevel,this._viewer.setSampling(-1)}_renderTile(t){const n=this._viewer,r=this._width,i=this._height,o=this._factor,s=t%o*r,a=Math.floor(t/o)*i;if(n.camera.setViewOffset(r*o,i*o,s,a,r,i),n.render(),this._antialias){const l=Math.round((s+r)/2)-Math.round(s/2),c=Math.round((a+i)/2)-Math.round(a/2);this._ctx.drawImage(n.renderer.domElement,Math.round(s/2),Math.round(a/2),l,c)}else this._ctx.drawImage(n.renderer.domElement,Math.floor(s),Math.floor(a),Math.ceil(r),Math.ceil(i));typeof this._onProgress=="function"&&this._onProgress(t+1,this._n,!1)}_finalize(){this._viewer.setSampling(this._viewerSampleLevel),this._viewer.camera.view=null,typeof this._onFinish=="function"&&this._onFinish(this._n+1,this._n,!1)}render(){for(let t=0;t<=this._n;++t)t===this._n?this._finalize():this._renderTile(t)}renderAsync(){let t=0;const n=this._n,r=()=>{t===n?this._finalize():this._renderTile(t),t+=1};for(let i=0;i<=n;++i)setTimeout(r,0)}}const BO=2*Math.PI,yre=180/Math.PI;function NO(e,t,n=1,r=0,i){const o=i?i.length:e.length/n;let s=0,a=0;if(i)for(let l=0;l<o;++l){const c=(e[i[l]*n+r]+t)%t/t*BO-Math.PI;s+=Math.cos(c),a+=Math.sin(c)}else for(let l=r;l<o;l+=n){const c=(e[l]+t)%t/t*BO-Math.PI;s+=Math.cos(c),a+=Math.sin(c)}return s/=o,a/=o,(Math.atan2(a,s)+Math.PI)/BO*t}function cl(e,t,n,r=0){const i=e.length,o=n||new Float32Array(i);for(let s=0;s<i;s+=3)o[r+s+0]=(e[s+0]+t[s+0])/2,o[r+s+1]=(e[s+1]+t[s+1])/2,o[r+s+2]=(e[s+2]+t[s+2])/2;return o}function kE(e,t){const n=e.length,r=new Float32Array(n);for(let i=0;i<n;i+=3)r[i+0]=t[i+0]-e[i+0],r[i+1]=t[i+1]-e[i+1],r[i+2]=t[i+2]-e[i+2];return r}function rs(e,t,n){const r=n||new Float32Array(e);for(let i=0;i<e;++i)r[i]=t;return r}function En(e,t,n,r,i){const o=i||new Float32Array(3*e);for(let s=0;s<e;++s){const a=3*s;o[a+0]=t,o[a+1]=n,o[a+2]=r}return o}function gv(e){const t=new Float32Array(e);for(let n=0;n<e;++n)t[n]=n;return t}function NL(e,t,n=0,r){const i=r||new Float32Array(e*t);for(let o=0;o<e;++o){const s=n+o*t;for(let a=0;a<t;++a)i[s+a]=o}return i}function FO(e,t){const n=e.length,r=new Float32Array(n*t);for(let i=0;i<n;++i){const o=i*t,s=e[i];for(let a=0;a<t;++a)r[o+a]=s}return r}function Vr(e,t,n,r,i){for(let o=0;o<i;++o)t[r+o]=e[n+o]}function F9(e,t,n,r){Vr(e,e,t,n,r)}function wS(e){let t=-1/0;for(let n=0,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function SS(e){let t=1/0;for(let n=0,r=e.length;n<r;++n)e[n]<t&&(t=e[n]);return t}function oB(e,t=1,n=0){const r=e.length;let i=0;for(let o=n;o<r;o+=t)i+=e[o];return i}function CS(e,t=1,n=0){return oB(e,t,n)/(e.length/t)}const bit={trim:!1,factor:1,antialias:!1,transparent:!1,onProgress:void 0};function xit(e,t={}){const{trim:n,factor:r,antialias:i,transparent:o}=ns(t,bit),s=e.renderer,a=e.camera,l=s.getClearAlpha(),c=s.getClearColor();function u(h=!1){let p=r;i&&(p*=2),h&&(p=1/p),e.scene.traverse(function(g){const v=g.material;v&&v.linewidth&&(v.linewidth*=p),v&&v.uniforms&&v.uniforms.size&&v.uniforms.size.__seen===void 0&&(v.uniforms.size.value*=p,v.uniforms.size.__seen=!0),v&&v.uniforms&&v.uniforms.linewidth&&v.uniforms.linewidth.__seen===void 0&&(v.uniforms.linewidth.value*=p,v.uniforms.linewidth.__seen=!0)}),e.scene.traverse(function(g){const v=g.material;v&&v.uniforms&&v.uniforms.size&&delete v.uniforms.size.__seen,v&&v.uniforms&&v.uniforms.linewidth&&delete v.uniforms.linewidth.__seen})}function d(h){if(n){const p=c;return function(g,v,m,y,b){const _=g.height,x=g.width,w=g.getContext("2d").getImageData(0,0,x,_).data;let S,C,A,T;for(A=!1,C=0;C<_;C++){for(S=0;S<x;S++)if(T=4*(C*x+S),w[T]!==v||w[T+1]!==m||w[T+2]!==y||w[T+3]!==b){A=!0;break}if(A)break}const O=C;for(A=!1,S=0;S<x;S++){for(C=0;C<_;C++)if(T=4*(C*x+S),w[T]!==v||w[T+1]!==m||w[T+2]!==y||w[T+3]!==b){A=!0;break}if(A)break}const R=S;for(A=!1,C=_-1;C>=0;C--){for(S=x-1;S>=0;S--)if(T=4*(C*x+S),w[T]!==v||w[T+1]!==m||w[T+2]!==y||w[T+3]!==b){A=!0;break}if(A)break}const L=C;for(A=!1,S=x-1;S>=0;S--){for(C=_-1;C>=0;C--)if(T=4*(C*x+S),w[T]!==v||w[T+1]!==m||w[T+2]!==y||w[T+3]!==b){A=!0;break}if(A)break}const D=S,$=document.createElement("canvas");return $.width=D-R,$.height=L-O,$.getContext("2d").drawImage(g,R,O,$.width,$.height,0,0,$.width,$.height),$}(h,o?0:255*p.r,o?0:255*p.g,o?0:255*p.b,o?0:255)}return h}function f(h,p,g){typeof t.onProgress=="function"&&t.onProgress(h,p,g)}return new Promise(function(h,p){const g=new yit(s,a,e,{factor:r,antialias:i,onProgress:f,onFinish:function(v,m){d(g.canvas).toBlob(function(y){s.setClearAlpha(l),u(!0),e.requestRender(),f(m,m,!0),y?h(y):p("error creating image")},"image/png")}});s.setClearAlpha(o?0:1),u(),g.renderAsync()})}const zO=new W,z9=new lt,j9=new lt,U9=new et,bC=new lt,xC=new lt;function jO(e,t){bC.getInverse(t.projectionMatrix),xC.copy(t.projectionMatrix).transpose(),e.traverse(function(n){const r=n.material;if(!r)return;const i=r.uniforms;i&&(i.projectionMatrixInverse&&i.projectionMatrixInverse.value.copy(bC),i.projectionMatrixTranspose&&i.projectionMatrixTranspose.value.copy(xC))})}function V9(e,t,n){const r=e.createShader(n);return r?(e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.log(`error compiling shader ${r}: ${e.getShaderInfoLog(r)}`),e.deleteShader(r),null)):void console.log(`error creating WebGL shader ${n}`)}function UO(e,t){const n=e.getExtension(t);return n||console.log(`extension '${t}' not available`),n}const _it=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);function mw(e){const t=document.createElement("canvas");t.width=16,t.height=16,t.style.width="16px",t.style.height="16px";const n=t.getContext("webgl")||t.getContext("experimental-webgl");if(!n)return console.log(`error creating webgl context for ${e}`),!1;if(!(n instanceof WebGLRenderingContext))return console.log("Got unexpected type for WebGL rendering context"),!1;UO(n,"OES_texture_float"),UO(n,"OES_texture_half_float"),UO(n,"WEBGL_color_buffer_float");const r=V9(n,`
attribute vec4 a_position;

void main() {
  gl_Position = a_position;
}`,n.VERTEX_SHADER),i=V9(n,`
precision mediump float;
uniform vec4 u_color;
uniform sampler2D u_texture;

void main() {
  gl_FragColor = texture2D(u_texture, vec2(0.5, 0.5)) * u_color;
}`,n.FRAGMENT_SHADER);if(!r||!i)return!1;const o=function(p,g,v,m){const y=p.createProgram();return y?(g.forEach(b=>p.attachShader(y,b)),v&&v.forEach((b,_)=>{p.bindAttribLocation(y,m?m[_]:_,b)}),p.linkProgram(y),p.getProgramParameter(y,p.LINK_STATUS)?y:(console.log(`error linking program: ${p.getProgramInfoLog(y)}`),p.deleteProgram(y),null)):void console.log("error creating WebGL program")}(n,[r,i]);if(!o)return console.log("error creating WebGL program"),!1;n.useProgram(o);const s=n.getAttribLocation(o,"a_position"),a=n.getUniformLocation(o,"u_color");if(!a)return console.log("error getting 'u_color' uniform location"),!1;const l=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,l),n.bufferData(n.ARRAY_BUFFER,_it,n.STATIC_DRAW),n.enableVertexAttribArray(s),n.vertexAttribPointer(s,2,n.FLOAT,!1,0,0);const c=n.createTexture(),u=new Uint8Array([255,255,255,255]);n.bindTexture(n.TEXTURE_2D,c),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,u);const d=n.createTexture();n.bindTexture(n.TEXTURE_2D,d),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,1,1,0,n.RGBA,e,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);const f=n.createFramebuffer();if(n.bindFramebuffer(n.FRAMEBUFFER,f),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,d,0),n.checkFramebufferStatus(n.FRAMEBUFFER)!==n.FRAMEBUFFER_COMPLETE)return console.log(`error creating framebuffer for ${e}`),!1;n.bindTexture(n.TEXTURE_2D,c),n.uniform4fv(a,[0,10,20,1]),n.drawArrays(n.TRIANGLES,0,6),n.bindTexture(n.TEXTURE_2D,d),n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(1,0,0,1),n.clear(n.COLOR_BUFFER_BIT),n.uniform4fv(a,[0,.1,.05,1]),n.drawArrays(n.TRIANGLES,0,6);const h=new Uint8Array(4);if(n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,h),h[0]!==0||h[1]<248||h[2]<248||h[3]<254)return console.log(`not able to actually render to ${e} texture`),!1;if(e===n.FLOAT){n.bindFramebuffer(n.FRAMEBUFFER,f);const p=new Float32Array(4);n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,p);const g=n.getError();if(g)return console.log(`error reading pixels as float: '${function(v,m){switch(m){case v.NO_ERROR:return"no error";case v.INVALID_ENUM:return"invalid enum";case v.INVALID_VALUE:return"invalid value";case v.INVALID_OPERATION:return"invalid operation";case v.INVALID_FRAMEBUFFER_OPERATION:return"invalid framebuffer operation";case v.OUT_OF_MEMORY:return"out of memory";case v.CONTEXT_LOST_WEBGL:return"context lost"}return"unknown error"}(n,g)}'`),!1}return!0}const wit=new Float32Array(100),Sit=new Uint8Array(100),H9=[12,7,13,17,11,6,8,18,16,2,14,22,10,1,3,9,19,23,21,15,5,0,4,24,20],gw=new lt;function Cit(e,t,n,r,i){const o=i.uniforms,s=[];if(o&&(o.objectId&&(o.objectId.value=su?this.id:this.id/255,s.push("objectId")),(o.modelViewMatrixInverse||o.modelViewMatrixInverseTranspose||o.modelViewProjectionMatrix||o.modelViewProjectionMatrixInverse)&&this.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,this.matrixWorld),o.modelViewMatrixInverse&&(o.modelViewMatrixInverse.value.getInverse(this.modelViewMatrix),s.push("modelViewMatrixInverse")),o.modelViewMatrixInverseTranspose&&(o.modelViewMatrixInverse?o.modelViewMatrixInverseTranspose.value.copy(o.modelViewMatrixInverse.value).transpose():o.modelViewMatrixInverseTranspose.value.getInverse(this.modelViewMatrix).transpose(),s.push("modelViewMatrixInverseTranspose")),o.modelViewProjectionMatrix&&(o.modelViewProjectionMatrix.value.multiplyMatrices(n.projectionMatrix,this.modelViewMatrix),s.push("modelViewProjectionMatrix")),o.modelViewProjectionMatrixInverse&&(o.modelViewProjectionMatrix?(gw.copy(o.modelViewProjectionMatrix.value),o.modelViewProjectionMatrixInverse.value.getInverse(gw)):(gw.multiplyMatrices(n.projectionMatrix,this.modelViewMatrix),o.modelViewProjectionMatrixInverse.value.getInverse(gw)),s.push("modelViewProjectionMatrixInverse")),s.length)){const a=e.properties.get(i);if(a.program){const l=e.getContext(),c=a.program;l.useProgram(c.program);const u=c.getUniforms();s.forEach(function(d){u.setValue(l,d,o[d].value)})}}}class Ait{constructor(t){if(this.boundingBox=new zn,this.boundingBoxSize=new W,this.boundingBoxLength=0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this.distVector=new W,this.signals={ticked:new Ht.Signal,rendered:new Ht.Signal},typeof t=="string"){const n=document.getElementById(t);this.container=n===null?document.createElement("div"):n}else t instanceof HTMLElement?this.container=t:this.container=document.createElement("div");if(this.container===document.body)this.width=window.innerWidth||1,this.height=window.innerHeight||1;else{const n=this.container.getBoundingClientRect();this.width=n.width||1,this.height=n.height||1,this.container.style.overflow="hidden"}this.wrapper=document.createElement("div"),this.wrapper.style.position="relative",this.container.appendChild(this.wrapper),this._initParams(),this._initStats(),this._initCamera(),this._initScene(),this._initRenderer()!==!1?(this._initHelper(),this.setBackground(),this.setFog(),this.animate=this.animate.bind(this)):Ve.error("Viewer: could not initialize renderer")}_initParams(){this.parameters={fogColor:new ht(0),fogNear:50,fogFar:100,backgroundColor:new ht(0),cameraType:"perspective",cameraFov:40,cameraEyeSep:.3,cameraZ:-80,clipNear:0,clipFar:100,clipDist:10,clipMode:"scene",clipScale:"relative",lightColor:new ht(14540253),lightIntensity:1,ambientColor:new ht(14540253),ambientIntensity:.2,sampleLevel:0,rendererEncoding:Ni}}_initCamera(){const t=new W(0,0,0),{width:n,height:r}=this;this.perspectiveCamera=new Ur(this.parameters.cameraFov,n/r),this.perspectiveCamera.position.z=this.parameters.cameraZ,this.perspectiveCamera.lookAt(t),this.orthographicCamera=new Xu(n/-2,n/2,r/2,r/-2),this.orthographicCamera.position.z=this.parameters.cameraZ,this.orthographicCamera.lookAt(t),this.stereoCamera=new Gne,this.stereoCamera.aspect=.5,this.stereoCamera.eyeSep=this.parameters.cameraEyeSep;const i=this.parameters.cameraType;if(i==="orthographic")this.camera=this.orthographicCamera;else{if(i!=="perspective"&&i!=="stereo")throw new Error(`Unknown cameraType '${i}'`);this.camera=this.perspectiveCamera}this.camera.updateProjectionMatrix()}_initStats(){this.stats=new git}_initScene(){this.scene||(this.scene=new dg,this.scene.name="scene"),this.rotationGroup=new Tn,this.rotationGroup.name="rotationGroup",this.scene.add(this.rotationGroup),this.translationGroup=new Tn,this.translationGroup.name="translationGroup",this.rotationGroup.add(this.translationGroup),this.modelGroup=new Tn,this.modelGroup.name="modelGroup",this.translationGroup.add(this.modelGroup),this.pickingGroup=new Tn,this.pickingGroup.name="pickingGroup",this.translationGroup.add(this.pickingGroup),this.backgroundGroup=new Tn,this.backgroundGroup.name="backgroundGroup",this.translationGroup.add(this.backgroundGroup),this.helperGroup=new Tn,this.helperGroup.name="helperGroup",this.translationGroup.add(this.helperGroup),this.scene.fog=new U2(this.parameters.fogColor.getHex()),this.spotLight=new uC(this.parameters.lightColor.getHex(),this.parameters.lightIntensity),this.scene.add(this.spotLight),this.ambientLight=new dC(this.parameters.ambientColor.getHex(),this.parameters.ambientIntensity),this.scene.add(this.ambientLight)}_initRenderer(){const t=window.devicePixelRatio,{width:n,height:r}=this;try{this.renderer=new Cx({preserveDrawingBuffer:!0,alpha:!0,antialias:!0})}catch{return this.wrapper.innerHTML='<div style="display:flex;align-items:center;justify-content:center;height:100%;"><p style="padding:15px;text-align:center;">Your browser/graphics card does not seem to support <a target="_blank" href="https://en.wikipedia.org/wiki/WebGL">WebGL</a>.<br/><br/>Find out how to get it <a target="_blank" href="http://get.webgl.org/">here</a>.</p></div>',!1}this.renderer.setPixelRatio(t),this.renderer.setSize(n,r),this.renderer.autoClear=!1,this.renderer.sortObjects=!0,this.renderer.outputEncoding=this.parameters.rendererEncoding;const i=this.renderer.getContext();this.renderer.capabilities.isWebGL2?(B9(!0),D9(this.renderer.extensions.get("EXT_color_buffer_float")),this.supportsHalfFloat=!0):(B9(this.renderer.extensions.get("EXT_frag_depth")),this.renderer.extensions.get("OES_element_index_uint"),D9(this.renderer.extensions.get("OES_texture_float")&&this.renderer.extensions.get("WEBGL_color_buffer_float")||this.renderer.extensions.get("OES_texture_float")&&mw(i.FLOAT)),this.renderer.extensions.get("OES_texture_float"),this.supportsHalfFloat=this.renderer.extensions.get("OES_texture_half_float")&&mw(36193)),this.wrapper.appendChild(this.renderer.domElement);const o=n*t,s=r*t;Je&&console.log(JSON.stringify({Browser:dre,OES_texture_float:!!this.renderer.extensions.get("OES_texture_float"),OES_texture_half_float:!!this.renderer.extensions.get("OES_texture_half_float"),WEBGL_color_buffer_float:!!this.renderer.extensions.get("WEBGL_color_buffer_float"),"testTextureSupport Float":mw(i.FLOAT),"testTextureSupport HalfFloat":mw(36193),"this.supportsHalfFloat":this.supportsHalfFloat,SupportsReadPixelsFloat:su},null,2)),this.pickingTarget=new qi(o,s,{minFilter:Nn,magFilter:Nn,stencilBuffer:!1,format:So,type:su?Kl:Jf}),this.pickingTarget.texture.generateMipmaps=!1,this.pickingTarget.texture.encoding=this.parameters.rendererEncoding,this.renderer.setRenderTarget(this.pickingTarget),this.renderer.clear(),this.renderer.setRenderTarget(null),this.sampleTarget=new qi(o,s,{minFilter:Wr,magFilter:Wr,format:So}),this.sampleTarget.texture.encoding=this.parameters.rendererEncoding,this.holdTarget=new qi(o,s,{minFilter:Nn,magFilter:Nn,format:So,type:Jf}),this.holdTarget.texture.encoding=this.parameters.rendererEncoding,this.compositeUniforms={tForeground:new Db(this.sampleTarget.texture),scale:new Db(1)},this.compositeMaterial=new ri({uniforms:this.compositeUniforms,vertexShader:j0("Quad.vert"),fragmentShader:j0("Quad.frag"),premultipliedAlpha:!0,transparent:!0,blending:Hk,depthTest:!1,depthWrite:!1}),this.compositeCamera=new Xu(-1,1,1,-1,0,1),this.compositeScene=new dg,this.compositeScene.name="compositeScene",this.compositeScene.add(new Gn(new pb(2,2),this.compositeMaterial))}_initHelper(){const t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new wt;r.setIndex(new Rt(t,1)),r.setAttribute("position",new Rt(n,3));const i=new ri({uniforms:{uColor:{value:new ht("skyblue")}},vertexShader:j0("BasicLine.vert"),fragmentShader:j0("BasicLine.frag")});this.boundingBoxMesh=new Sr(r,i),this.helperGroup.add(this.boundingBoxMesh)}updateHelper(){const t=this.boundingBoxMesh.geometry.attributes.position,n=t.array,{min:r,max:i}=this.boundingBox;n[0]=i.x,n[1]=i.y,n[2]=i.z,n[3]=r.x,n[4]=i.y,n[5]=i.z,n[6]=r.x,n[7]=r.y,n[8]=i.z,n[9]=i.x,n[10]=r.y,n[11]=i.z,n[12]=i.x,n[13]=i.y,n[14]=r.z,n[15]=r.x,n[16]=i.y,n[17]=r.z,n[18]=r.x,n[19]=r.y,n[20]=r.z,n[21]=i.x,n[22]=r.y,n[23]=r.z,t.needsUpdate=!0,this.boundingBox.isEmpty()||this.boundingBoxMesh.geometry.computeBoundingSphere()}get cameraDistance(){return Math.abs(this.camera.position.z)}set cameraDistance(t){this.camera.position.z=-t}add(t,n){n?n.forEach(r=>this.addBuffer(t,r)):this.addBuffer(t),t.group.name="meshGroup",t.wireframeGroup.name="wireframeGroup",t.parameters.background?(this.backgroundGroup.add(t.group),this.backgroundGroup.add(t.wireframeGroup)):(this.modelGroup.add(t.group),this.modelGroup.add(t.wireframeGroup)),t.pickable&&this.pickingGroup.add(t.pickingGroup),Je&&this.updateHelper()}addBuffer(t,n){function r(s){s instanceof Tn?s.children.forEach(r):(s.userData.buffer=t,s.userData.instance=n,s.onBeforeRender=Cit)}const i=t.getMesh();n&&i.applyMatrix4(n.matrix),r(i),t.group.add(i);const o=t.getWireframeMesh();if(n&&(o.matrix.copy(i.matrix),o.position.copy(i.position),o.quaternion.copy(i.quaternion),o.scale.copy(i.scale)),r(o),t.wireframeGroup.add(o),t.pickable){const s=t.getPickingMesh();n&&(s.matrix.copy(i.matrix),s.position.copy(i.position),s.quaternion.copy(i.quaternion),s.scale.copy(i.scale)),r(s),t.pickingGroup.add(s)}n?this._updateBoundingBox(t.geometry,t.matrix,n.matrix):this._updateBoundingBox(t.geometry,t.matrix)}remove(t){this.translationGroup.children.forEach(function(n){n.remove(t.group),n.remove(t.wireframeGroup)}),t.pickable&&this.pickingGroup.remove(t.pickingGroup),this.updateBoundingBox(),Je&&this.updateHelper()}_updateBoundingBox(t,n,r){const i=this.boundingBox;function o(a,l,c){a.boundingBox==null&&a.computeBoundingBox();const u=a.boundingBox.clone();l&&u.applyMatrix4(l),c&&u.applyMatrix4(c),u.min.equals(u.max)&&u.expandByScalar(5),i.union(u)}function s(a){if(a.geometry!==void 0){let l,c;a.userData.buffer&&(l=a.userData.buffer.matrix),a.userData.instance&&(c=a.userData.instance.matrix),o(a.geometry,l,c)}}t?o(t,n,r):(i.makeEmpty(),this.modelGroup.traverse(s),this.backgroundGroup.traverse(s)),i.getSize(this.boundingBoxSize),this.boundingBoxLength=this.boundingBoxSize.length()}updateBoundingBox(){this._updateBoundingBox(),Je&&this.updateHelper()}getPickingPixels(){const{width:t,height:n}=this,r=t*n*4,i=su?new Float32Array(r):new Uint8Array(r);return this.render(!0),this.renderer.readRenderTargetPixels(this.pickingTarget,0,0,t,n,i),i}getImage(t){return new Promise(n=>{if(t){const{width:r,height:i}=this,o=r*i*4;let s=this.getPickingPixels();if(su){const u=new Uint8Array(o);for(let d=0;d<o;++d)u[d]=Math.round(255*s[d]);s=u}const a=document.createElement("canvas");a.width=r,a.height=i;const l=a.getContext("2d"),c=l.getImageData(0,0,r,i);c.data.set(s),l.putImageData(c,0,0),a.toBlob(n,"image/png")}else this.renderer.domElement.toBlob(n,"image/png")})}makeImage(t={}){return xit(this,t)}setLight(t,n,r,i){const o=this.parameters;t!==void 0&&o.lightColor.set(t),n!==void 0&&(o.lightIntensity=n),r!==void 0&&o.ambientColor.set(r),i!==void 0&&(o.ambientIntensity=i),this.requestRender()}setFog(t,n,r){const i=this.parameters;t!==void 0&&i.fogColor.set(t),n!==void 0&&(i.fogNear=n),r!==void 0&&(i.fogFar=r),this.requestRender()}setBackground(t){const n=this.parameters;t&&n.backgroundColor.set(t),this.setFog(n.backgroundColor),this.renderer.setClearColor(n.backgroundColor,0),this.renderer.domElement.style.backgroundColor=n.backgroundColor.getStyle(),this.requestRender()}setSampling(t){t!==void 0&&(this.parameters.sampleLevel=t,this.sampleLevel=t),this.requestRender()}setOutputEncoding(t){this.parameters.rendererEncoding=t,this.renderer.outputEncoding=t,this.pickingTarget.texture.encoding=t,this.sampleTarget.texture.encoding=t,this.holdTarget.texture.encoding=t}setColorWorkflow(t){if(t!="linear"&&t!="sRGB")throw new Error(`setColorWorkflow: invalid color workflow ${t}`);lre=t=="linear"?"linear":"sRGB",this.setOutputEncoding(t=="linear"?_x:Ni),this.requestRender()}setCamera(t,n,r){const i=this.parameters;if(t&&(i.cameraType=t),n&&(i.cameraFov=n),r&&(i.cameraEyeSep=r),i.cameraType==="orthographic")this.camera!==this.orthographicCamera&&(this.camera=this.orthographicCamera,this.camera.position.copy(this.perspectiveCamera.position),this.camera.up.copy(this.perspectiveCamera.up),this.updateZoom());else{if(i.cameraType!=="perspective"&&i.cameraType!=="stereo")throw new Error(`Unknown cameraType '${i.cameraType}'`);this.camera!==this.perspectiveCamera&&(this.camera=this.perspectiveCamera,this.camera.position.copy(this.orthographicCamera.position),this.camera.up.copy(this.orthographicCamera.up))}this.perspectiveCamera.fov=i.cameraFov,this.stereoCamera.eyeSep=i.cameraEyeSep,this.camera.updateProjectionMatrix(),this.requestRender()}setClip(t,n,r,i,o){const s=this.parameters;t!==void 0&&(s.clipNear=t),n!==void 0&&(s.clipFar=n),r!==void 0&&(s.clipDist=r),i!==void 0&&(s.clipMode=i),o!==void 0&&(s.clipScale=o),this.requestRender()}setSize(t,n){this.width=t||1,this.height=n||1,this.perspectiveCamera.aspect=this.width/this.height,this.orthographicCamera.left=-this.width/2,this.orthographicCamera.right=this.width/2,this.orthographicCamera.top=this.height/2,this.orthographicCamera.bottom=-this.height/2,this.camera.updateProjectionMatrix();const r=window.devicePixelRatio;this.renderer.setPixelRatio(r),this.renderer.setSize(t,n);const i=this.width*r,o=this.height*r;this.pickingTarget.setSize(i,o),this.sampleTarget.setSize(i,o),this.holdTarget.setSize(i,o),this.requestRender()}handleResize(){if(this.container===document.body)this.setSize(window.innerWidth,window.innerHeight);else{const t=this.container.getBoundingClientRect();this.setSize(t.width,t.height)}}updateInfo(t){const{memory:n,render:r}=this.info;if(t)n.programs=0,n.geometries=0,n.textures=0,r.calls=0,r.vertices=0,r.points=0;else{const i=this.renderer.info,o=i.memory,s=i.render;n.geometries=o.geometries,n.textures=o.textures,r.calls+=s.calls,r.faces+=s.triangles,r.points+=s.points}}animate(){if(this.signals.ticked.dispatch(this.stats),window.performance.now()-this.stats.startTime>500&&!this.isStill&&this.sampleLevel<3&&this.sampleLevel!==-1){const t=this.sampleLevel;this.sampleLevel=3,this.renderPending=!0,this.render(),this.isStill=!0,this.sampleLevel=t,Je&&Ve.log("rendered still frame")}this.frameRequest=window.requestAnimationFrame(this.animate)}pick(t,n){if(this.parameters.cameraType==="stereo")return{pid:0,instance:void 0,picker:void 0};t*=window.devicePixelRatio,n*=window.devicePixelRatio,t=Math.max(t-2,0),n=Math.max(n-2,0);let r,i,o=0;const s=su?wit:Sit;this.render(!0),this.renderer.readRenderTargetPixels(this.pickingTarget,t,n,5,5,s);for(let a=0;a<H9.length;a++){const l=4*H9[a],c=Math.round(s[l+3]),u=this.pickingGroup.getObjectById(c);u&&(r=u.userData.instance,i=u.userData.buffer.picking,o=su?Math.round(255*s[l])<<16&16711680|Math.round(255*s[l+1])<<8&65280|255&Math.round(255*s[l+2]):s[l]<<16|s[l+1]<<8|s[l+2])}return{pid:o,instance:r,picker:i}}requestRender(){this.renderPending||(window.performance.now()-this.stats.startTime>22&&(this.stats.begin(),this.isStill=!1),this.renderPending=!0,window.requestAnimationFrame(()=>{this.render(),this.stats.update()}))}updateZoom(){const t=br(this.perspectiveCamera.fov),n=2*Math.tan(t/2)*this.cameraDistance;this.orthographicCamera.zoom=this.height/n}absoluteToRelative(t){return 50*(1-t/this.bRadius)}relativeToAbsolute(t){return this.bRadius*(1-t/50)}__updateClipping(){const t=this.parameters;this.bRadius=Math.max(10,.5*this.boundingBoxLength),isFinite(this.bRadius)||(this.bRadius=50),this.camera.getWorldPosition(this.distVector),this.cDist=this.distVector.length(),this.cDist||(this.cameraDistance=Math.abs(t.cameraZ),this.cDist=Math.abs(t.cameraZ));const n=this.scene.fog;if(n.color.set(t.fogColor),t.clipMode==="camera")this.camera.near=t.clipNear,this.camera.far=t.clipFar,n.near=t.fogNear,n.far=t.fogFar;else if(t.clipScale==="absolute")this.camera.near=this.cDist-t.clipNear,this.camera.far=this.cDist+t.clipFar,n.near=this.cDist-t.fogNear,n.far=this.cDist+t.fogFar;else{const r=(50-t.clipNear)/50,i=-(50-t.clipFar)/50;this.camera.near=this.cDist-this.bRadius*r,this.camera.far=this.cDist+this.bRadius*i;const o=(50-t.fogNear)/50,s=-(50-t.fogFar)/50;n.near=this.cDist-this.bRadius*o,n.far=this.cDist+this.bRadius*s}t.clipMode!=="camera"&&(this.camera.type==="PerspectiveCamera"?(this.camera.near=Math.max(.1,t.clipDist,this.camera.near),this.camera.far=Math.max(1,this.camera.far),n.near=Math.max(.1,n.near),n.far=Math.max(1,n.far)):this.camera.type==="OrthographicCamera"&&t.clipDist>0&&(this.camera.near=Math.max(t.clipDist,this.camera.near)))}__updateCamera(){const t=this.camera;t.updateMatrix(),t.updateMatrixWorld(!0),t.updateProjectionMatrix(),function(n,r,i,o,s){let a=new et;i.getSize(a);const l=a.height,c=i.getPixelRatio(),u=r.type==="OrthographicCamera";U9.set(a.width,a.height),bC.getInverse(r.projectionMatrix),xC.copy(r.projectionMatrix).transpose(),n.traverse(function(d){const f=d.material;if(!f)return;const h=f.uniforms;if(h){if(f.clipNear){const p=(50-f.clipNear)/50,g=o-s*p;h.clipNear.value=g}h.canvasHeight&&(h.canvasHeight.value=l),h.resolution&&h.resolution.value.copy(U9),h.pixelRatio&&(h.pixelRatio.value=c),h.projectionMatrixInverse&&h.projectionMatrixInverse.value.copy(bC),h.projectionMatrixTranspose&&h.projectionMatrixTranspose.value.copy(xC),h.ortho&&(h.ortho.value=u)}})}(this.scene,t,this.renderer,this.cDist,this.bRadius),function(n,r){n.traverseVisible(function(i){if(!(i instanceof vb&&i.userData.buffer.parameters.sortParticles))return;const o=i.geometry.attributes,s=o.position.count;if(s===0)return;let a,l,c,u,d,f,h,p;z9.multiplyMatrices(r.matrixWorldInverse,i.matrixWorld),j9.multiplyMatrices(r.projectionMatrix,z9),i.userData.sortData?(a=i.userData.sortData,c=a.__zArray,l=a.__sortArray,u=a.__cmpFn):(c=new Float32Array(s),l=new Uint32Array(s),u=function(g,v){const m=c[g],y=c[v];return m>y?1:m<y?-1:0},a={__zArray:c,__sortArray:l,__cmpFn:u},i.userData.sortData=a);for(let g=0;g<s;++g)zO.fromArray(o.position.array,3*g),zO.applyMatrix4(j9),c[g]=-zO.z,l[g]=g;(function(g,v,m=0,y){v=v||function(O,R){return O>R?1:O<R?-1:0};const b=[];let _,x,w,S=-1,C=m,A=y=(y||g.length)-1;function T(O,R){const L=g[O];g[O]=g[R],g[R]=L}for(;;)if(A-C<=25){for(let O=C+1;O<=A;++O){for(_=g[O],x=O-1;x>=C&&v(g[x],_)>0;)g[x+1]=g[x],--x;g[x+1]=_}if(S===-1)break;A=b[S--],C=b[S--]}else{for(x=C+1,w=A,T(C+A>>1,x),v(g[C],g[A])>0&&T(C,A),v(g[x],g[A])>0&&T(x,A),v(g[C],g[x])>0&&T(C,x),_=g[x];;){do x++;while(v(g[x],_)<0);do w--;while(v(g[w],_)>0);if(w<x)break;T(x,w)}g[C+1]=g[w],g[w]=_,A-x+1>=w-C?(b[++S]=x,b[++S]=A,A=w-1):(b[++S]=C,b[++S]=w-1,C=x)}})(l,u);for(let g in o){const v=o[g],m=v.array,y=v.itemSize;a[g]||(a[g]=new Float32Array(y*s)),p=a[g],a[g]=m;for(let b=0;b<s;++b){d=l[b];for(let _=0;_<y;++_)f=d*y+_,h=b*y+_,p[h]=m[f]}o[g].array=p,o[g].needsUpdate=!0}})}(this.scene,t)}__setVisibility(t,n,r,i){this.modelGroup.visible=t,this.pickingGroup.visible=n,this.backgroundGroup.visible=r,this.helperGroup.visible=i}__updateLights(){this.spotLight.color.set(this.parameters.lightColor),this.spotLight.intensity=this.parameters.lightIntensity,this.distVector.copy(this.camera.position).setLength(100*this.boundingBoxLength),this.spotLight.position.copy(this.camera.position).add(this.distVector),this.ambientLight.color.set(this.parameters.ambientColor),this.ambientLight.intensity=this.parameters.ambientIntensity}__renderPickingGroup(t){this.renderer.setRenderTarget(this.pickingTarget||null),this.renderer.clear(),this.__setVisibility(!1,!0,!1,!1),this.renderer.render(this.scene,t),this.renderer.setRenderTarget(null),this.updateInfo()}__renderModelGroup(t,n){this.renderer.setRenderTarget(n||null),this.renderer.clear(),this.__setVisibility(!1,!1,!0,!1),this.renderer.render(this.scene,t),this.renderer.clear(!1,!0,!0),this.updateInfo(),this.__setVisibility(!0,!1,!1,Je),this.renderer.render(this.scene,t),this.renderer.setRenderTarget(null),this.updateInfo()}__renderSuperSample(t,n){const r=vre[Math.max(0,Math.min(this.sampleLevel,5))],i=1/r.length;this.compositeUniforms.tForeground.value=this.sampleTarget.texture;let o=this.sampleTarget.width;const s=this.sampleTarget.height;this.parameters.cameraType==="stereo"&&(o/=2);for(let a=0;a<r.length;++a){const l=r[a];t.setViewOffset(o,s,l[0],l[1],o,s),t.updateProjectionMatrix(),jO(this.scene,t);let c=i;c+=.03125*((a+.5)/r.length-.5),this.compositeUniforms.scale.value=c,this.__renderModelGroup(t,this.sampleTarget),this.renderer.setRenderTarget(this.holdTarget),a===0&&this.renderer.clear(),this.renderer.render(this.compositeScene,this.compositeCamera)}this.compositeUniforms.scale.value=1,this.compositeUniforms.tForeground.value=this.holdTarget.texture,t.clearViewOffset(),this.renderer.setRenderTarget(n||null),this.renderer.clear(),this.renderer.render(this.compositeScene,this.compositeCamera)}__renderStereo(t=!1,n){const r=this.stereoCamera;r.update(this.perspectiveCamera);const i=this.renderer;let o=new et;i.getSize(o),i.setScissorTest(!0),i.setScissor(0,0,o.width/2,o.height),i.setViewport(0,0,o.width/2,o.height),jO(this.scene,r.cameraL),this.__render(t,r.cameraL),i.setScissor(o.width/2,0,o.width/2,o.height),i.setViewport(o.width/2,0,o.width/2,o.height),jO(this.scene,r.cameraR),this.__render(t,r.cameraR),i.setScissorTest(!1),i.setViewport(0,0,o.width,o.height)}__render(t=!1,n,r){t?this.lastRenderedPicking||this.__renderPickingGroup(n):this.sampleLevel>0&&this.parameters.cameraType!=="stereo"?this.__renderSuperSample(n,r):this.__renderModelGroup(n,r)}render(t=!1,n){if(this.rendering)Ve.warn("'tried to call 'render' from within 'render'");else{this.rendering=!0;try{this.__updateClipping(),this.__updateCamera(),this.__updateLights(),this.updateInfo(!0),this.parameters.cameraType==="stereo"?this.__renderStereo(t,n):this.__render(t,this.camera,n),this.lastRenderedPicking=t}finally{this.rendering=!1,this.renderPending=!1}this.signals.rendered.dispatch()}}clear(){Ve.log("scene cleared"),this.scene.remove(this.rotationGroup),this._initScene(),this.renderer.clear()}dispose(){this.renderer.dispose(),window.cancelAnimationFrame(this.frameRequest)}}function G9(e){const t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;return Math.sqrt(t*t+n*n)}class Pit{constructor(t,n={}){this.domElement=t,this.signals={moved:new Ht.Signal,scrolled:new Ht.Signal,dragged:new Ht.Signal,dropped:new Ht.Signal,clicked:new Ht.Signal,hovered:new Ht.Signal,doubleClicked:new Ht.Signal},this.position=new et,this.prevPosition=new et,this.down=new et,this.canvasPosition=new et,this.prevClickCP=new et,this.moving=!1,this.hovering=!0,this.scrolled=!1,this.lastMoved=1/0,this.which=0,this.buttons=0,this.pressed=!1,this.altKey=!1,this.ctrlKey=!1,this.metaKey=!1,this.shiftKey=!1,this.domElement.style.touchAction="none",this.hoverTimeout=re(n.hoverTimeout,50),this.handleScroll=re(n.handleScroll,!0),this.doubleClickSpeed=re(n.doubleClickSpeed,500),this._listen=this._listen.bind(this),this._onMousewheel=this._onMousewheel.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMousedown=this._onMousedown.bind(this),this._onMouseup=this._onMouseup.bind(this),this._onContextmenu=this._onContextmenu.bind(this),this._onTouchstart=this._onTouchstart.bind(this),this._onTouchend=this._onTouchend.bind(this),this._onTouchmove=this._onTouchmove.bind(this),this._listen();const r={passive:!1};document.addEventListener("mousewheel",this._onMousewheel,r),document.addEventListener("wheel",this._onMousewheel,r),document.addEventListener("MozMousePixelScroll",this._onMousewheel,r),document.addEventListener("mousemove",this._onMousemove,r),document.addEventListener("mousedown",this._onMousedown,r),document.addEventListener("mouseup",this._onMouseup,r),document.addEventListener("contextmenu",this._onContextmenu,r),document.addEventListener("touchstart",this._onTouchstart,r),document.addEventListener("touchend",this._onTouchend,r),document.addEventListener("touchmove",this._onTouchmove,r)}get key(){let t=0;return this.altKey&&(t+=1),this.ctrlKey&&(t+=2),this.metaKey&&(t+=4),this.shiftKey&&(t+=8),t}setParameters(t={}){this.hoverTimeout=re(t.hoverTimeout,this.hoverTimeout)}_listen(){const t=window.performance.now(),n=this.canvasPosition;this.doubleClickPending&&t-this.lastClicked>this.doubleClickSpeed&&(this.doubleClickPending=!1),t-this.lastMoved>this.hoverTimeout&&(this.moving=!1),(this.scrolled||!this.moving&&!this.hovering)&&(this.scrolled=!1,this.hoverTimeout!==-1&&this.overElement&&(this.hovering=!0,this.signals.hovered.dispatch(n.x,n.y))),this.frameRequest=window.requestAnimationFrame(this._listen)}_onMousewheel(t){if(t.target!==this.domElement||!this.handleScroll)return;t.preventDefault(),this._setKeys(t);let n=0;"deltaY"in t&&"deltaMode"in t&&t.deltaY!==void 0&&t.deltaMode!==void 0?n=t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?.025*-t.deltaY:t.deltaMode===WheelEvent.DOM_DELTA_LINE?-t.deltaY*(2.5/3):2.5*-t.deltaY:"deltaY"in t&&!("detail"in t)?n=.025*-t.deltaY:t.wheelDelta!==void 0?n=.025*-t.wheelDelta:t.wheelDeltaY!==void 0?n=.025*-t.wheelDeltaY:t.detail!==void 0&&(n=-t.detail/3),this.signals.scrolled.dispatch(n),setTimeout(()=>{this.scrolled=!0},this.hoverTimeout)}_onMousemove(t){t.target===this.domElement?(t.preventDefault(),this.overElement=!0):this.overElement=!1,this._setKeys(t),this.moving=!0,this.hovering=!1,this.lastMoved=window.performance.now(),this.prevPosition.copy(this.position),this.position.set(t.clientX,t.clientY),this._setCanvasPosition(t);const n=this.prevPosition.x-this.position.x,r=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(n,r),this.pressed&&this.signals.dragged.dispatch(n,r)}_onMousedown(t){t.target===this.domElement&&(t.preventDefault(),this._setKeys(t),this.moving=!1,this.hovering=!1,this.down.set(t.clientX,t.clientY),this.position.set(t.clientX,t.clientY),this.which=t.which,this.buttons=function(n){if(typeof n=="object"){if("buttons"in n)return n.buttons;if("which"in n){const r=n.which;if(r===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in n){const r=n.button;if(r===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0}(t),this.pressed=!0,this._setCanvasPosition(t))}_onMouseup(t){t.target===this.domElement&&t.preventDefault(),this._setKeys(t);const n=this.canvasPosition;this._distance()<4&&(this.lastClicked=window.performance.now(),this.doubleClickPending&&this.prevClickCP.distanceTo(n)<4&&(this.signals.doubleClicked.dispatch(n.x,n.y),this.doubleClickPending=!1),this.signals.clicked.dispatch(n.x,n.y),this.doubleClickPending=!0,this.prevClickCP.copy(n)),this.which=void 0,this.buttons=void 0,this.pressed=void 0}_onContextmenu(t){t.target===this.domElement&&t.preventDefault()}_onTouchstart(t){if(t.target===this.domElement)switch(t.preventDefault(),this.pressed=!0,t.touches.length){case 1:this.moving=!1,this.hovering=!1,this.down.set(t.touches[0].pageX,t.touches[0].pageY),this.position.set(t.touches[0].pageX,t.touches[0].pageY),this._setCanvasPosition(t.touches[0]);break;case 2:this.down.set((t.touches[0].pageX+t.touches[1].pageX)/2,(t.touches[0].pageY+t.touches[1].pageY)/2),this.position.set((t.touches[0].pageX+t.touches[1].pageX)/2,(t.touches[0].pageY+t.touches[1].pageY)/2),this.lastTouchDistance=G9(t)}}_onTouchend(t){t.target===this.domElement&&t.preventDefault(),this.which=void 0,this.buttons=void 0,this.pressed=void 0}_onTouchmove(t){switch(t.target===this.domElement?(t.preventDefault(),this.overElement=!0):this.overElement=!1,t.touches.length){case 1:{this._setKeys(t),this.which=1,this.buttons=1,this.moving=!0,this.hovering=!1,this.lastMoved=window.performance.now(),this.prevPosition.copy(this.position),this.position.set(t.touches[0].pageX,t.touches[0].pageY),this._setCanvasPosition(t.touches[0]);const n=this.prevPosition.x-this.position.x,r=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(n,r),this.pressed&&this.signals.dragged.dispatch(n,r);break}case 2:{const n=G9(t),r=n-this.lastTouchDistance;if(this.lastTouchDistance=n,this.prevPosition.copy(this.position),this.position.set((t.touches[0].pageX+t.touches[1].pageX)/2,(t.touches[0].pageY+t.touches[1].pageY)/2),Math.abs(r)>2&&this.handleScroll&&this.position.distanceTo(this.prevPosition)<2)this.which=0,this.buttons=0,this.signals.scrolled.dispatch(r/2);else{this.which=3,this.buttons=2;const i=this.prevPosition.x-this.position.x,o=this.prevPosition.y-this.position.y;this.signals.moved.dispatch(i,o),this.pressed&&this.signals.dragged.dispatch(i,o)}}}}_distance(){return this.position.distanceTo(this.down)}_setCanvasPosition(t){const n=this.domElement.getBoundingClientRect();let r,i;"clientX"in t&&"clientY"in t?(r=t.clientX-n.left,i=t.clientY-n.top):(r=t.offsetX,i=t.offsetY),this.canvasPosition.set(r,n.height-i)}_setKeys(t){this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.metaKey=t.metaKey,this.shiftKey=t.shiftKey}dispose(){document.removeEventListener("mousewheel",this._onMousewheel),document.removeEventListener("wheel",this._onMousewheel),document.removeEventListener("MozMousePixelScroll",this._onMousewheel),document.removeEventListener("mousemove",this._onMousemove),document.removeEventListener("mousedown",this._onMousedown),document.removeEventListener("mouseup",this._onMouseup),document.removeEventListener("contextmenu",this._onContextmenu),document.removeEventListener("touchstart",this._onTouchstart),document.removeEventListener("touchend",this._onTouchend),document.removeEventListener("touchmove",this._onTouchmove),window.cancelAnimationFrame(this.frameRequest)}}const VO=new lt,HO=new lt,W9=new lt,no=new lt,q9=new lt,fs=new W,l0=new Fn,Y9=new Fn,Dl=new lt,Gd=new W,vw=new W;class Mit{constructor(t,n={}){this.stage=t,this.rotateSpeed=re(n.rotateSpeed,2),this.zoomSpeed=re(n.zoomSpeed,1.2),this.panSpeed=re(n.panSpeed,1),this.viewer=t.viewer,this.mouse=t.mouseObserver,this.controls=t.viewerControls}get component(){return this.stage.transformComponent}get atom(){return this.stage.transformAtom}_setPanVector(t,n,r=0){const i=this.controls.getCanvasScaleFactor(r);Gd.set(t,n,0),Gd.multiplyScalar(this.panSpeed*i)}_getRotateXY(t,n){return[this.rotateSpeed*-t*.01,this.rotateSpeed*n*.01]}_getCameraRotation(t){return t.extractRotation(this.viewer.camera.matrixWorld),t.multiply(HO.makeRotationY(Math.PI)),t}_transformPanVector(){this.component&&(Dl.extractRotation(this.component.transform),Dl.premultiply(this.viewer.rotationGroup.matrix),Dl.getInverse(Dl),Dl.multiply(this._getCameraRotation(no)),Gd.applyMatrix4(Dl))}zoom(t){this.controls.zoom(this.zoomSpeed*t*.02)}pan(t,n){this._setPanVector(t,n),Dl.getInverse(this.viewer.rotationGroup.matrix),Dl.multiply(this._getCameraRotation(no)),Gd.applyMatrix4(Dl),this.controls.translate(Gd)}panComponent(t,n){this.component&&(this._setPanVector(t,n),this._transformPanVector(),this.component.position.add(Gd),this.component.updateMatrix())}panAtom(t,n){this.atom&&this.component&&(this.atom.positionToVector3(vw),vw.add(this.viewer.translationGroup.position),vw.applyMatrix4(this.viewer.rotationGroup.matrix),this._setPanVector(t,n,vw.z),this._transformPanVector(),this.atom.positionAdd(Gd),this.component.updateRepresentations({position:!0}))}rotate(t,n){const[r,i]=this._getRotateXY(t,n);this._getCameraRotation(no),fs.set(1,0,0),fs.applyMatrix4(no),l0.setFromAxisAngle(fs,i),fs.set(0,1,0),fs.applyMatrix4(no),Y9.setFromAxisAngle(fs,r),l0.multiply(Y9),no.makeRotationFromQuaternion(l0),this.controls.applyMatrix(no)}zRotate(t,n){const r=this.rotateSpeed*((-t+n)/-2)*.01;W9.makeRotationZ(r),this.controls.applyMatrix(W9)}rotateComponent(t,n){if(!this.component)return;const[r,i]=this._getRotateXY(t,n);this._getCameraRotation(q9),no.extractRotation(this.component.transform),no.premultiply(this.viewer.rotationGroup.matrix),no.getInverse(no),no.premultiply(q9),fs.set(1,0,0),fs.applyMatrix4(no),VO.makeRotationAxis(fs,i),fs.set(0,1,0),fs.applyMatrix4(no),HO.makeRotationAxis(fs,r),VO.multiply(HO),l0.setFromRotationMatrix(VO),this.component.quaternion.premultiply(l0),this.component.quaternion.normalize(),this.component.updateMatrix()}}const pp=new W;class Eit{constructor(t,n){this.stage=n,this.pid=t.pid,this.picker=t.picker,this.instance=t.instance,this.stage=n,this.controls=n.viewerControls,this.mouse=n.mouseObserver}get type(){return this.picker.type}get altKey(){return this.mouse.altKey}get ctrlKey(){return this.mouse.ctrlKey}get metaKey(){return this.mouse.metaKey}get shiftKey(){return this.mouse.shiftKey}get canvasPosition(){return this.mouse.canvasPosition}get component(){return this.stage.getComponentsByObject(this.picker.data).list[0]}get object(){return this.picker.getObject(this.pid)}get position(){return this.picker.getPosition(this.pid,this.instance,this.component)}get closestBondAtom(){if(this.type!=="bond"||!this.bond)return;const t=this.bond,n=this.controls,r=this.canvasPosition,i=t.atom1.positionToVector3(),o=t.atom2.positionToVector3();i.applyMatrix4(this.component.matrix),o.applyMatrix4(this.component.matrix);const s=n.getPositionOnCanvas(i),a=n.getPositionOnCanvas(o);return c=s,u=a,(l=r).distanceTo(c)<l.distanceTo(u)?t.atom1:t.atom2;var l,c,u}get closeAtom(){const t=this.canvasPosition,n=this.closestBondAtom;if(!n)return;const r=n.positionToVector3().applyMatrix4(this.component.matrix),i=this.controls.getPositionOnCanvas(r);n.positionToVector3(pp),this.instance&&pp.applyMatrix4(this.instance.matrix),pp.applyMatrix4(this.component.matrix);const o=this.controls.viewer;pp.add(o.translationGroup.position),pp.applyMatrix4(o.rotationGroup.matrix);const s=this.controls.getCanvasScaleFactor(pp.z),a=this.component.getMaxRepresentationRadius(n.index);return t.distanceTo(i)<=a/s?n:void 0}get arrow(){return this._objectIfType("arrow")}get atom(){return this._objectIfType("atom")}get axes(){return this._objectIfType("axes")}get bond(){return this._objectIfType("bond")}get box(){return this._objectIfType("box")}get cone(){return this._objectIfType("cone")}get clash(){return this._objectIfType("clash")}get contact(){return this._objectIfType("contact")}get cylinder(){return this._objectIfType("cylinder")}get distance(){return this._objectIfType("distance")}get ellipsoid(){return this._objectIfType("ellipsoid")}get octahedron(){return this._objectIfType("octahedron")}get point(){return this._objectIfType("point")}get mesh(){return this._objectIfType("mesh")}get slice(){return this._objectIfType("slice")}get sphere(){return this._objectIfType("sphere")}get tetrahedron(){return this._objectIfType("tetrahedron")}get torus(){return this._objectIfType("torus")}get surface(){return this._objectIfType("surface")}get unitcell(){return this._objectIfType("unitcell")}get unknown(){return this._objectIfType("unknown")}get volume(){return this._objectIfType("volume")}get wideline(){return this._objectIfType("wideline")}_objectIfType(t){return this.type===t?this.object:void 0}getLabel(){const t=this.atom||this.closeAtom;let n="nothing";return this.arrow?n=this.arrow.name:t?n=`atom: ${t.qualifiedName()} (${t.structure.name})`:this.axes?n="axes":this.bond?n=`bond: ${this.bond.atom1.qualifiedName()} - ${this.bond.atom2.qualifiedName()} (${this.bond.structure.name})`:this.box?n=this.box.name:this.cone?n=this.cone.name:this.clash?n=`clash: ${this.clash.clash.sele1} - ${this.clash.clash.sele2}`:this.contact?n=`${this.contact.type}: ${this.contact.atom1.qualifiedName()} - ${this.contact.atom2.qualifiedName()} (${this.contact.atom1.structure.name})`:this.cylinder?n=this.cylinder.name:this.distance?n=`distance: ${this.distance.atom1.qualifiedName()} - ${this.distance.atom2.qualifiedName()} (${this.distance.structure.name})`:this.ellipsoid?n=this.ellipsoid.name:this.octahedron?n=this.octahedron.name:this.point?n=this.point.name:this.mesh?n=`mesh: ${this.mesh.name||this.mesh.serial} (${this.mesh.shape.name})`:this.slice?n=`slice: ${this.slice.value.toPrecision(3)} (${this.slice.volume.name})`:this.sphere?n=this.sphere.name:this.surface?n=`surface: ${this.surface.surface.name}`:this.tetrahedron?n=this.tetrahedron.name:this.torus?n=this.torus.name:this.unitcell?n=`unitcell: ${this.unitcell.unitcell.spacegroup} (${this.unitcell.structure.name})`:this.unknown?n="unknown":this.volume?n=`volume: ${this.volume.value.toPrecision(3)} (${this.volume.volume.name})`:this.wideline&&(n=this.wideline.name),n}}class Tit{constructor(t){this.stage=t,this.viewer=t.viewer}pick(t,n){const r=this.viewer.pick(t,n);if(r.picker&&r.picker.type!=="ignore"&&r.pid!==void 0){const i=r.picker.array;if(!(i&&r.pid>=i.length))return new Eit(r,this.stage);console.error("pid >= picker.array.length")}}}const X9=new Fn,K9=new W,Z9=new W,GO=new W,Oit=new W,J9=new lt,Q9=new W,e7=new lt;class Iit{constructor(t){this.stage=t,this.signals={changed:new Ht.Signal},this.viewer=t.viewer}get position(){return this.viewer.translationGroup.position}get rotation(){return this.viewer.rotationGroup.quaternion}changed(){this.viewer.requestRender(),this.signals.changed.dispatch()}getPositionOnCanvas(t,n){const r=RE(n,et),i=this.viewer;return GO.copy(t).add(i.translationGroup.position).applyMatrix4(i.rotationGroup.matrix).project(i.camera),r.set((GO.x+1)*i.width/2,(GO.y+1)*i.height/2)}getCanvasScaleFactor(t=0){const n=this.viewer.camera;if(n instanceof Xu)return 1/n.zoom;{t=Math.abs(t),t+=this.getCameraDistance();const r=br(n.fov);return 2*t*Math.tan(r/2)/this.viewer.height}}getOrientation(t){const n=z0(t);n.copy(this.viewer.rotationGroup.matrix);const r=this.getCameraDistance();return n.scale(Oit.set(r,r,r)),n.setPosition(this.viewer.translationGroup.position),n}orient(t){z0(t).decompose(K9,X9,Z9);const n=this.viewer;n.rotationGroup.setRotationFromQuaternion(X9),n.translationGroup.position.copy(K9),n.cameraDistance=Z9.z,n.updateZoom(),this.changed()}translate(t){this.viewer.translationGroup.position.add(Of(t)),this.changed()}center(t){this.viewer.translationGroup.position.copy(Of(t)).negate(),this.changed()}zoom(t){this.distance(this.getCameraDistance()*(1-t))}getCameraDistance(){return this.viewer.cameraDistance}distance(t){this.viewer.cameraDistance=Math.max(Math.abs(t),.2),this.viewer.updateZoom(),this.changed()}spin(t,n){J9.getInverse(this.viewer.rotationGroup.matrix),Q9.copy(Of(t)).applyMatrix4(J9),this.viewer.rotationGroup.rotateOnAxis(Q9,n),this.changed()}rotate(t){this.viewer.rotationGroup.setRotationFromQuaternion(DL(t)),this.changed()}align(t){e7.getInverse(z0(t)),this.viewer.rotationGroup.setRotationFromMatrix(e7),this.changed()}applyMatrix(t){this.viewer.rotationGroup.applyMatrix4(z0(t)),this.changed()}}class Dh{constructor(t,n,...r){this.pausedTime=-1,this.elapsedDuration=0,this.pausedDuration=0,this.ignoreGlobalToggle=!1,this._paused=!1,this._resolveList=[],this.duration=re(t,1e3),this.controls=n,this.startTime=window.performance.now(),this._init(...r)}get done(){return this.alpha===1}get paused(){return this._paused}tick(t){if(!this._paused)return this.elapsedDuration=t.currentTime-this.startTime-this.pausedDuration,this.duration===0?this.alpha=1:this.alpha=Ax(0,1,this.elapsedDuration/this.duration),this._tick(t),this.done&&this._resolveList.forEach(n=>n()),this.done}pause(t){t&&(this._hold=!0),this.pausedTime===-1&&(this.pausedTime=window.performance.now()),this._paused=!0}resume(t){!t&&this._hold||(this.pausedDuration+=window.performance.now()-this.pausedTime,this._paused=!1,this._hold=!1,this.pausedTime=-1)}toggle(){this._paused?this.resume():this.pause()}then(t){let n;return n=this.done?Promise.resolve():new Promise(r=>this._resolveList.push(r)),n.then(t)}}class t7 extends Dh{constructor(t,n,...r){super(re(t,1/0),n,...r)}_init(t,n){Array.isArray(t)?this.axis=new W().fromArray(t):this.axis=re(t,new W(0,1,0)),this.angle=re(n,.01)}_tick(t){this.axis&&this.angle&&this.controls.spin(this.axis,this.angle*t.lastDuration/16)}}class n7 extends Dh{constructor(t,n,...r){super(re(t,1/0),n,...r),this.angleSum=0,this.direction=1}_init(t,n,r){Array.isArray(t)?this.axis=new W().fromArray(t):this.axis=re(t,new W(0,1,0)),this.angleStep=re(n,.01),this.angleEnd=re(r,.2)}_tick(t){if(!this.axis||!this.angleStep||!this.angleEnd)return;const n=Ax(0,1,Math.abs(this.angleSum)/this.angleEnd),r=this.angleStep*this.direction*(1.1-n);this.controls.spin(this.axis,r*t.lastDuration/16),this.angleSum+=this.angleStep,this.angleSum>=this.angleEnd&&(this.direction*=-1,this.angleSum=-this.angleEnd)}}class r7 extends Dh{_init(t,n){this.moveFrom=Of(re(t,new W)),this.moveTo=Of(re(n,new W))}_tick(){this.controls.position.lerpVectors(this.moveFrom,this.moveTo,this.alpha).negate(),this.controls.changed()}}class Rit extends Dh{_init(t,n){this.zoomFrom=t,this.zoomTo=n}_tick(){this.controls.distance(ys(this.zoomFrom,this.zoomTo,this.alpha))}}class kit extends Dh{constructor(){super(...arguments),this._currentRotation=new Fn}_init(t,n){this.rotateFrom=DL(t),this.rotateTo=DL(n),this._currentRotation=new Fn}_tick(){this._currentRotation.copy(this.rotateFrom).slerp(this.rotateTo,this.alpha),this.controls.rotate(this._currentRotation)}}class Lit extends Dh{_init(t,n,r){this.valueFrom=t,this.valueTo=n,this.callback=r}_tick(){this.callback(ys(this.valueFrom,this.valueTo,this.alpha))}}class $it extends Dh{_init(t){this.callback=t}_tick(){this.alpha===1&&this.callback()}}class i7{constructor(t=[]){this._resolveList=[],this._list=t}get done(){return this._list.every(t=>t.done)}then(t){let n;return n=this.done?Promise.resolve():new Promise(r=>{this._resolveList.push(r),this._list.forEach(i=>{i.then(()=>{this._resolveList.forEach(o=>{o()}),this._resolveList.length=0})})}),n.then(t)}}class Dit{constructor(t){this.stage=t,this.animationList=[],this.finishedList=[],this.viewer=t.viewer,this.controls=t.viewerControls}get paused(){return this.animationList.every(t=>t.paused)}add(t){return t.duration===0?t.tick(this.viewer.stats):this.animationList.push(t),t}remove(t){const n=this.animationList,r=n.indexOf(t);r>-1&&n.splice(r,1)}run(t){const n=this.finishedList,r=this.animationList,i=r.length;for(let s=0;s<i;++s){const a=r[s];a.tick(t)&&n.push(a)}const o=n.length;if(o){for(let s=0;s<o;++s)this.remove(n[s]);n.length=0}}spin(t,n,r){return this.add(new t7(r,this.controls,t,n))}rock(t,n,r,i){return this.add(new n7(i,this.controls,t,n,r))}rotate(t,n){const r=this.viewer.rotationGroup.quaternion.clone();return this.add(new kit(n,this.controls,r,t))}move(t,n){const r=this.controls.position.clone().negate();return this.add(new r7(n,this.controls,r,t))}zoom(t,n){const r=this.viewer.camera.position.z;return this.add(new Rit(n,this.controls,r,t))}zoomMove(t,n,r){return new i7([this.move(t,r),this.zoom(n,r)])}orient(t,n){const r=new W,i=new Fn,o=new W;return z0(t).decompose(r,i,o),new i7([this.move(r.negate(),n),this.rotate(i,n),this.zoom(-o.x,n)])}value(t,n,r,i){return this.add(new Lit(i,this.controls,t,n,r))}timeout(t,n){return this.add(new $it(n,this.controls,t))}spinComponent(t,n,r,i){return this.add(new t7(i,t.controls,n,r))}rockComponent(t,n,r,i,o){return this.add(new n7(o,t.controls,n,r,i))}moveComponent(t,n,r){const i=t.controls.position.clone().negate();return this.add(new r7(r,t.controls,i,n))}pause(){this.animationList.forEach(t=>t.pause())}resume(){this.animationList.forEach(t=>t.resume())}toggle(){this.paused?this.resume():this.pause()}clear(){this.animationList.length=0}dispose(){this.clear()}}class Bit{constructor(t,n){if(this.fn=t,this.queue=[],this.pending=!1,this.next=this.next.bind(this),n){for(let r=0,i=n.length;r<i;++r)this.queue.push(n[r]);this.next()}}run(t){this.fn(t,this.next)}next(){const t=this.queue.shift();t!==void 0?(this.pending=!0,setTimeout(()=>this.run(t))):this.pending=!1}push(t){this.queue.push(t),this.pending||this.next()}kill(){this.queue.length=0}length(){return this.queue.length}}class Ex{constructor(t,n,r){this.type="",this.parameters={lazy:{type:"boolean"},clipNear:{type:"range",step:1,max:100,min:0,buffer:!0},clipRadius:{type:"number",precision:1,max:1e3,min:0,buffer:!0},clipCenter:{type:"vector3",precision:1,buffer:!0},flatShaded:{type:"boolean",buffer:!0},opacity:{type:"range",step:.01,max:1,min:0,buffer:!0},depthWrite:{type:"boolean",buffer:!0},side:{type:"select",buffer:!0,options:{front:"front",back:"back",double:"double"}},wireframe:{type:"boolean",buffer:!0},colorData:{type:"hidden",update:"color"},colorScheme:{type:"select",update:"color",options:{}},colorScale:{type:"select",update:"color",options:Qt.getScales()},colorReverse:{type:"boolean",update:"color"},colorValue:{type:"color",update:"color"},colorDomain:{type:"hidden",update:"color"},colorMode:{type:"select",update:"color",options:Qt.getModes()},roughness:{type:"range",step:.01,max:1,min:0,buffer:!0},metalness:{type:"range",step:.01,max:1,min:0,buffer:!0},diffuse:{type:"color",buffer:!0},diffuseInterior:{type:"boolean",buffer:!0},useInteriorColor:{type:"boolean",buffer:!0},interiorColor:{type:"color",buffer:!0},interiorDarkening:{type:"range",step:.01,max:1,min:0,buffer:!0},matrix:{type:"hidden",buffer:!0},disablePicking:{type:"boolean",rebuild:!0}},this.viewer=n,this.tasks=new gre,this.queue=new Bit(this.make.bind(this)),this.bufferList=[],this.parameters.colorScheme&&(this.parameters.colorScheme.options=Qt.getSchemes()),this.toBePrepared=!1}init(t){const n=t||{};this.clipNear=re(n.clipNear,0),this.clipRadius=re(n.clipRadius,0),this.clipCenter=re(n.clipCenter,new W),this.flatShaded=re(n.flatShaded,!1),this.side=re(n.side,"double"),this.opacity=re(n.opacity,1),this.depthWrite=re(n.depthWrite,!0),this.wireframe=re(n.wireframe,!1),this.setColor(n.color,n),this.colorData=re(n.colorData,void 0),this.colorScheme=re(n.colorScheme,"uniform"),this.colorScale=re(n.colorScale,""),this.colorReverse=re(n.colorReverse,!1),this.colorValue=re(n.colorValue,9474192),this.colorDomain=re(n.colorDomain,void 0),this.colorMode=re(n.colorMode,"hcl"),this.visible=re(n.visible,!0),this.quality=re(n.quality,void 0),this.roughness=re(n.roughness,.4),this.metalness=re(n.metalness,0),this.diffuse=re(n.diffuse,16777215),this.diffuseInterior=re(n.diffuseInterior,!1),this.useInteriorColor=re(n.useInteriorColor,!1),this.interiorColor=re(n.interiorColor,2236962),this.interiorDarkening=re(n.interiorDarkening,0),this.lazy=re(n.lazy,!1),this.lazyProps={build:!1,bufferParams:{},what:{}},this.matrix=re(n.matrix,new lt),this.disablePicking=re(n.disablePicking,!1);const r=this.parameters;r.sphereDetail===!0&&(r.sphereDetail={type:"integer",max:3,min:0,rebuild:"impostor"}),r.radialSegments===!0&&(r.radialSegments={type:"integer",max:25,min:5,rebuild:"impostor"}),r.openEnded===!0&&(r.openEnded={type:"boolean",rebuild:"impostor",buffer:!0}),r.disableImpostor===!0&&(r.disableImpostor={type:"boolean",rebuild:!0}),n.quality==="low"?(r.sphereDetail&&(this.sphereDetail=0),r.radialSegments&&(this.radialSegments=5)):n.quality==="medium"?(r.sphereDetail&&(this.sphereDetail=1),r.radialSegments&&(this.radialSegments=10)):n.quality==="high"?(r.sphereDetail&&(this.sphereDetail=2),r.radialSegments&&(this.radialSegments=20)):(r.sphereDetail&&(this.sphereDetail=re(n.sphereDetail,1)),r.radialSegments&&(this.radialSegments=re(n.radialSegments,10))),r.openEnded&&(this.openEnded=re(n.openEnded,!0)),r.disableImpostor&&(this.disableImpostor=re(n.disableImpostor,!1))}getColorParams(t){return Object.assign({data:this.colorData,scheme:this.colorScheme,scale:this.colorScale,reverse:this.colorReverse,value:this.colorValue,domain:this.colorDomain,mode:this.colorMode,colorSpace:this.colorSpace},t)}getBufferParams(t={}){return Object.assign({clipNear:this.clipNear,clipRadius:this.clipRadius,clipCenter:this.clipCenter,flatShaded:this.flatShaded,opacity:this.opacity,depthWrite:this.depthWrite,side:this.side,wireframe:this.wireframe,roughness:this.roughness,metalness:this.metalness,diffuse:this.diffuse,diffuseInterior:this.diffuseInterior,useInteriorColor:this.useInteriorColor,interiorColor:this.interiorColor,interiorDarkening:this.interiorDarkening,matrix:this.matrix,disablePicking:this.disablePicking},t)}setColor(t,n){const r=Object.keys(Qt.getSchemes());if(typeof t=="string"&&r.includes(t.toLowerCase()))n?n.colorScheme=t:this.setParameters({colorScheme:t});else if(t!==void 0){let i=new ht(t).getHex();n?(n.colorScheme="uniform",n.colorValue=i):this.setParameters({colorScheme:"uniform",colorValue:i})}return this}prepare(t){}create(){}update(t){this.build()}build(t){if(!this.lazy||this.visible&&this.opacity){if(!this.toBePrepared)return this.tasks.increment(),void this.make();this.queue.length()>0?(this.tasks.change(1-this.queue.length()),this.queue.kill()):this.tasks.increment(),this.queue.push(t||!1)}else this.lazyProps.build=!0}make(t,n){Je&&Ve.time("Representation.make "+this.type);const r=()=>{t?(this.update(t),this.viewer.requestRender(),this.tasks.decrement(),n&&n()):(this.clear(),this.create(),this.manualAttach||this.disposed||(Je&&Ve.time("Representation.attach "+this.type),this.attach(()=>{Je&&Ve.timeEnd("Representation.attach "+this.type),this.tasks.decrement(),n&&n()}))),Je&&Ve.timeEnd("Representation.make "+this.type)};this.toBePrepared?this.prepare(r):r()}attach(t){this.setVisibility(this.visible),t()}setVisibility(t,n){if(this.visible=t,this.visible&&this.opacity){const r=this.lazyProps,i=r.bufferParams,o=r.what;if(r.build)return r.build=!1,this.build(),this;(Object.keys(i).length||Object.keys(o).length)&&(r.bufferParams={},r.what={},this.updateParameters(i,o))}return this.bufferList.forEach(function(r){r.setVisibility(t)}),n||this.viewer.requestRender(),this}setParameters(t,n={},r=!1){const i=t||{},o=this.parameters,s={};this.opacity||i.opacity===void 0||(this.lazyProps.build?(this.lazyProps.build=!1,r=!0):(Object.assign(s,this.lazyProps.bufferParams),Object.assign(n,this.lazyProps.what),this.lazyProps.bufferParams={},this.lazyProps.what={})),this.setColor(i.color,i);for(let a in i)i[a]!==void 0&&o[a]!=null&&(o[a].int&&(i[a]=parseInt(i[a])),o[a].float&&(i[a]=parseFloat(i[a])),i[a]!==this[a]||i[a].equals&&!i[a].equals(this[a]))&&(this[a]&&this[a].copy&&i[a].copy?this[a].copy(i[a]):this[a]&&this[a].set?this[a].set(i[a]):this[a]=i[a],o[a].buffer&&(o[a].buffer===!0?s[a]=i[a]:s[o[a].buffer]=i[a]),o[a].update&&(n[o[a].update]=!0),!o[a].rebuild||o[a].rebuild==="impostor"&&ll&&!this.disableImpostor||(r=!0));return r?this.build():this.updateParameters(s,n),this}updateParameters(t={},n){if(this.lazy&&(!this.visible||!this.opacity)&&t.hasOwnProperty("opacity")===!1)return Object.assign(this.lazyProps.bufferParams,t),void Object.assign(this.lazyProps.what,n);this.bufferList.forEach(function(r){r.setParameters(t)}),Object.keys(n).length&&this.update(n),this.viewer.requestRender()}getParameters(){const t={lazy:this.lazy,visible:this.visible,quality:this.quality};return Object.keys(this.parameters).forEach(n=>{this.parameters[n]!==null&&(t[n]=this[n])}),t}clear(){this.bufferList.forEach(t=>{this.viewer.remove(t),t.dispose()}),this.bufferList.length=0,this.viewer.requestRender()}dispose(){this.disposed=!0,this.queue.kill(),this.tasks.dispose(),this.clear()}}class bre{constructor(t){this.pending=0,this.postCount=0,this.onmessageDict={},this.onerrorDict={},this.name=t,this.blobUrl=window.URL.createObjectURL(by.get(t)),this.worker=new Worker(this.blobUrl),by.activeWorkerCount+=1,this.worker.onmessage=n=>{this.pending-=1;const r=n.data.__postId;Je&&Ve.timeEnd("Worker.postMessage "+t+" #"+r);const i=this.onmessageDict[r];i&&i.call(this.worker,n),delete this.onmessageDict[r],delete this.onerrorDict[r]},this.worker.onerror=n=>{if(this.pending-=1,n.data){const r=n.data.__postId,i=this.onerrorDict[r];i?i.call(this.worker,n):Ve.error("Worker.onerror",r,t,n),delete this.onmessageDict[r],delete this.onerrorDict[r]}else Ve.error("Worker.onerror",t,n)}}post(t={},n,r,i){this.onmessageDict[this.postCount]=r,this.onerrorDict[this.postCount]=i,t.__name=this.name,t.__postId=this.postCount,t.__debug=Je,Je&&Ve.time(`Worker.postMessage ${this.name} #${this.postCount}`);try{this.worker.postMessage(t,n)}catch(o){Ve.error("worker.post:",o),this.worker.postMessage(t)}return this.pending+=1,this.postCount+=1,this}terminate(){this.worker?(this.worker.terminate(),window.URL.revokeObjectURL(this.blobUrl),by.activeWorkerCount-=1):Ve.log("no worker to terminate")}}class FL{constructor(t,n=2){this.pool=[],this.count=0,this.maxCount=Math.min(8,n),this.name=t}post(t={},n,r,i){const o=this.getNextWorker();return o?o.post(t,n,r,i):console.error("unable to get worker from pool"),this}terminate(){this.pool.forEach(function(t){t.terminate()})}getNextWorker(){let t,n=1/0;for(let r=0;r<this.maxCount;++r){if(r>=this.count){t=new bre(this.name),this.pool.push(t),this.count+=1;break}const i=this.pool[r];if(i.pending===0){t=i;break}i.pending<n&&(n=i.pending,t=i)}return t}}function zL(e){const t=e.length,n=t/3;let r=0,i=0,o=0;for(let s=0;s<t;s+=3)r+=e[s+0],i+=e[s+1],o+=e[s+2];return new W(r/n,i/n,o/n)}function If(e,t,n){return n?e.sub(n).projectOnVector(t).add(n):e.projectOnVector(t),e}function jb(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0;for(let a=0,l=e.length;a<l;a+=3){const c=e[a],u=e[a+1],d=e[a+2];c<t&&(t=c),u<n&&(n=u),d<r&&(r=d),c>i&&(i=c),u>o&&(o=u),d>s&&(s=d)}return[Vt([t,n,r]),Vt([i,o,s])]}function LE(e,t){for(let n=0,r=t.length;n<r;n+=3){const i=t[n],o=t[n+1],s=t[n+2];t[n]=e[0]*i+e[4]*o+e[8]*s+e[12],t[n+1]=e[1]*i+e[5]*o+e[9]*s+e[13],t[n+2]=e[2]*i+e[6]*o+e[10]*s+e[14]}}function sB(e,t){for(let n=0,r=t.length;n<r;n+=3){const i=t[n],o=t[n+1],s=t[n+2];t[n]=e[0]*i+e[3]*o+e[6]*s,t[n+1]=e[1]*i+e[4]*o+e[7]*s,t[n+2]=e[2]*i+e[5]*o+e[8]*s}}function xre(e){for(let t=0,n=e.length;t<n;t+=3){const r=e[t],i=e[t+1],o=e[t+2],s=r*r+i*i+o*o;if(s>0){const a=1/Math.sqrt(s);e[t]=r*a,e[t+1]=i*a,e[t+2]=o*a}}}function Vt(e){return new Float32Array(e||3)}function Ao(e,t,n){const r=t[0],i=t[1],o=t[2],s=n[0],a=n[1],l=n[2];e[0]=i*l-o*a,e[1]=o*s-r*l,e[2]=r*a-i*s}function io(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ur(e,t,n){e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2]}function ra(e,t,n){e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2]}function Hi(e,t,n=0){e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2]}function qt(e,t,n=0){t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2]}function _re(e){return e[0]*e[0]+e[1]*e[1]+e[2]*e[2]}function Lu(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}function Qp(e,t,n){On(e,t,1/n)}function On(e,t,n){e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n}function yr(e,t){const n=_re(t);n==0?(e[0]=t[0],e[1]=t[1],e[2]=t[2]):On(e,t,1/Math.sqrt(n))}function wre(e,t,n){e[0]=t[0]-n,e[1]=t[1]-n,e[2]=t[2]-n}function AS(e,t,n){e[0]=t[0]+n,e[1]=t[1]+n,e[2]=t[2]+n}function jL(e,t){e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2])}function U0(e,t){e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2])}function $E(e,t){e[0]=-t[0],e[1]=-t[1],e[2]=-t[2]}function Nit(e,t){const n=e[0],r=e[1],i=e[2],o=t[0],s=t[1],a=t[2],l=r*a-i*s,c=i*o-n*a,u=n*s-r*o,d=Math.sqrt(l*l+c*c+u*u),f=n*o+r*s+i*a;return Math.atan2(d,f)}function Fit(e,t=9){const n=Math.floor(t/2),r=e.position1.length/3,i=3*(n*r),o=1/t,s=kE(e.position1,e.position2),a=new Float32Array(i),l=new Float32Array(i),c=new W;for(let h=0;h<r;++h){const p=3*h;c.set(s[p],s[p+1],s[p+2]);const g=e.position1[p],v=e.position1[p+1],m=e.position1[p+2];for(let y=0;y<n;++y){const b=n*p+3*y,_=o*(2*y+1),x=o*(2*y+2);a[b]=g+c.x*_,a[b+1]=v+c.y*_,a[b+2]=m+c.z*_,l[b]=g+c.x*x,l[b+1]=v+c.y*x,l[b+2]=m+c.z*x}}const u=cl(a,l),d=function(h,p){const g=h.length/3,v=new Float32Array(g*p*3);for(let m=0;m<g;++m){const y=3*m,b=m*p*3,_=h[y+0],x=h[y+1],w=h[y+2];for(let S=0;S<p;++S){const C=b+3*S;v[C+0]=_,v[C+1]=x,v[C+2]=w}}return v}(e.color,n),f={position:u,position1:a,position2:l,color:d,color2:d};return e.radius&&(f.radius=FO(e.radius,n)),e.picking&&e.picking.array&&(e.picking.array=FO(e.picking.array,n),f.picking=e.picking),e.primitiveId&&(f.primitiveId=FO(e.primitiveId,n)),f}function Sre(e,t=.1){const n=kE(e.position1,e.position2),r=[],i=[],o=[],s=e.radius?[]:void 0,a=e.picking?[]:void 0,l=e.primitiveId?[]:void 0,c=new W,u=e.position1.length/3;let d=0;for(let m=0;m<u;++m){const y=3*m;c.set(n[y],n[y+1],n[y+2]);const b=c.length()/t,_=Math.floor(b/2),x=1/b,w=e.position1[y],S=e.position1[y+1],C=e.position1[y+2];for(let A=0;A<_;++A){const T=3*d+3*A,O=x*(2*A+1),R=x*(2*A+2);r[T]=w+c.x*O,r[T+1]=S+c.y*O,r[T+2]=C+c.z*O,i[T]=w+c.x*R,i[T+1]=S+c.y*R,i[T+2]=C+c.z*R,e.color&&(o[T]=e.color[y],o[T+1]=e.color[y+1],o[T+2]=e.color[y+2]),s&&(s[d+A]=e.radius[m]),a&&(e.picking.array?a[d+A]=e.picking.array[m]:a[d+A]=m),l&&(l[d+A]=e.primitiveId[m])}d+=_}const f=new Float32Array(r),h=new Float32Array(i),p=cl(f,h),g=new Float32Array(o),v={position:p,position1:f,position2:h,color:g,color2:g};return s&&(v.radius=new Float32Array(s)),a&&e.picking&&(e.picking.array=new Float32Array(a),v.picking=e.picking),l&&(v.primitiveId=new Float32Array(l)),v}function UL(e,t=.1){const n=kE(e.position1,e.position2),r=[],i=[],o=[],s=e.radius?[]:void 0,a=e.picking?[]:void 0,l=e.primitiveId?[]:void 0,c=new W,u=e.position1.length/3;let d=t,f=!0,h=0,p=0,g=0;for(let x=0;x<u;++x){const w=3*x,S=e.position1[w],C=e.position1[w+1],A=e.position1[w+2];c.set(n[w],n[w+1],n[w+2]);const T=c.length();f&&(r[p]=S,r[p+1]=C,r[p+2]=A);let O=d;const R=1/T;for(;O<T;){const L=f?i:r;L[p]=S+c.x*O*R,L[p+1]=C+c.y*O*R,L[p+2]=A+c.z*O*R,f&&(h++,p=3*h),f=!f,d=t,O+=t}f&&(i[p]=e.position2[w],i[p+1]=e.position2[w+1],i[p+2]=e.position2[w+2],h++,p=3*h),d=O-T;for(let L=g;L<h;L++){if(e.color){const D=3*L;o[D]=e.color[w],o[D+1]=e.color[w+1],o[D+2]=e.color[w+2]}s&&(s[L]=e.radius[x]),a&&(e.picking.array?a[L]=e.picking.array[x]:a[L]=x),l&&(l[L]=e.primitiveId[x])}g=h}if(!f&&u>0){const x=3*h;i[x]=e.position2[3*u-3],i[x+1]=e.position2[3*u-2],i[x+1]=e.position2[3*u-1]}const v=new Float32Array(r),m=new Float32Array(i),y=cl(v,m),b=new Float32Array(o),_={position:y,position1:v,position2:m,color:b,color2:b};return s&&(_.radius=new Float32Array(s)),a&&e.picking&&(e.picking.array=new Float32Array(a),_.picking=e.picking),l&&(_.primitiveId=new Float32Array(l)),_}FL.prototype.constructor=FL,jb.__deps=[Vt],Qp.__deps=[On],yr.__deps=[On,_re];const Zu=new W;class Ju{static get Picker(){return hs.get(this.type)}static get Buffer(){return us.get(this.type)}static getShapeKey(t){return this.type+t[0].toUpperCase()+t.substr(1)}static expandBoundingBox(t,n){}static valueToShape(t,n,r){const i=t._primitiveData[this.getShapeKey(n)];switch(this.fields[n]){case"v3":case"c":s=i,(o=r).toArray!==void 0?o=o.toArray():o.x!==void 0?o=[o.x,o.y,o.z]:o.r!==void 0&&(o=[o.r,o.g,o.b]),s.push.apply(s,o);break;default:i.push(r)}var o,s}static objectToShape(t,n){Object.keys(this.fields).forEach(r=>{this.valueToShape(t,r,n[r])}),this.valueToShape(t,"name",n.name),this.expandBoundingBox(t.boundingBox,n)}static valueFromShape(t,n,r){const i=t._primitiveData[this.getShapeKey(r)];switch(this.fields[r]){case"v3":return new W().fromArray(i,3*n);case"c":return new ht().fromArray(i,3*n);default:return i[n]}}static objectFromShape(t,n){let r=this.valueFromShape(t,n,"name");r===void 0&&(r=`${this.type}: ${n} (${t.name})`);const i={shape:t,name:r};return Object.keys(this.fields).forEach(o=>{i[o]=this.valueFromShape(t,n,o)}),i}static arrayFromShape(t,n){const r=t._primitiveData[this.getShapeKey(n)];return this.fields[n]==="s"?r:new Float32Array(r)}static dataFromShape(t){const n={};return this.Picker&&(n.picking=new this.Picker(t)),Object.keys(this.fields).forEach(r=>{n[r]=this.arrayFromShape(t,r)}),n}static bufferFromShape(t,n){return new this.Buffer(this.dataFromShape(t),n)}}Ju.type="",Ju.fields={};class Rg extends Ju{static positionFromShape(t,n){return this.valueFromShape(t,n,"position")}static expandBoundingBox(t,n){t.expandByPoint(Zu.fromArray(n.position))}}Rg.type="sphere",Rg.fields={position:"v3",color:"c",radius:"f"};class ch extends Ju{static positionFromShape(t,n){return this.valueFromShape(t,n,"position")}static expandBoundingBox(t,n){t.expandByPoint(Zu.fromArray(n.position))}}ch.type="box",ch.fields={position:"v3",color:"c",size:"f",heightAxis:"v3",depthAxis:"v3"};class DE extends ch{}DE.type="octahedron";class BE extends ch{}BE.type="tetrahedron";class uh extends Ju{static positionFromShape(t,n){const r=this.valueFromShape(t,n,"position1"),i=this.valueFromShape(t,n,"position2");return r.add(i).multiplyScalar(.5)}static expandBoundingBox(t,n){t.expandByPoint(Zu.fromArray(n.position1)),t.expandByPoint(Zu.fromArray(n.position2))}static bufferFromShape(t,n={}){let r=this.dataFromShape(t);return this.type==="cylinder"&&n.dashedCylinder&&(r=Sre(r)),new this.Buffer(r,n)}}uh.type="cylinder",uh.fields={position1:"v3",position2:"v3",color:"c",radius:"f"};class NE extends uh{}NE.type="arrow";class FE extends uh{}FE.type="cone";class kg extends Rg{}kg.type="ellipsoid",kg.fields={position:"v3",color:"c",radius:"f",majorAxis:"v3",minorAxis:"v3"};class zE extends kg{}zE.type="torus";class _C extends Ju{static positionFromShape(t,n){return this.valueFromShape(t,n,"position")}static expandBoundingBox(t,n){t.expandByPoint(Zu.fromArray(n.position))}}_C.type="text",_C.fields={position:"v3",color:"c",size:"f",text:"s"};class Ub extends Ju{static positionFromShape(t,n){return this.valueFromShape(t,n,"position")}static expandBoundingBox(t,n){t.expandByPoint(Zu.fromArray(n.position))}}Ub.type="point",Ub.fields={position:"v3",color:"c"};class Vb extends Ju{static positionFromShape(t,n){const r=this.valueFromShape(t,n,"position1"),i=this.valueFromShape(t,n,"position2");return r.add(i).multiplyScalar(.5)}static expandBoundingBox(t,n){t.expandByPoint(Zu.fromArray(n.position1)),t.expandByPoint(Zu.fromArray(n.position2))}}Vb.type="wideline",Vb.fields={position1:"v3",position2:"v3",color:"c"};class Hb{constructor(t,n){this.exp=3;const r=n||function(v){const{x:m,y,z:b}=v,_=new zn,x=m.length,{min:w,max:S}=_;for(let C=0;C<x;C++)w.x=Math.min(m[C],w.x),w.y=Math.min(y[C],w.y),w.z=Math.min(b[C],w.z),S.x=Math.max(m[C],S.x),S.y=Math.max(y[C],S.y),S.z=Math.max(b[C],S.z);return _}(t);this.minX=r.min.x,this.minY=r.min.y,this.minZ=r.min.z,this.boundX=1+(r.max.x-this.minX>>this.exp),this.boundY=1+(r.max.y-this.minY>>this.exp),this.boundZ=1+(r.max.z-this.minZ>>this.exp);const i=this.boundX*this.boundY*this.boundZ,o=t.count!==void 0?t.count:t.x.length,s=t.x,a=t.y,l=t.z;let c=0;const u=new Uint32Array(i),d=new Int32Array(o);for(let v=0;v<o;++v){const m=s[v]-this.minX>>this.exp,y=a[v]-this.minY>>this.exp,b=l[v]-this.minZ>>this.exp,_=(m*this.boundY+y)*this.boundZ+b;(u[_]+=1)===1&&(c+=1),d[v]=_}const f=new Uint16Array(c);for(let v=0,m=0;v<i;++v){const y=u[v];y>0&&(u[v]=m+1,f[m]=y,m+=1)}const h=new Uint32Array(c);for(let v=1;v<c;++v)h[v]+=h[v-1]+f[v-1];const p=new Uint16Array(c),g=new Int32Array(o);for(let v=0;v<o;++v){const m=u[d[v]];if(m>0){const y=m-1;g[h[y]+p[y]]=v,p[y]+=1}}this.grid=u,this.bucketCount=f,this.bucketOffset=h,this.bucketArray=g,this.xArray=s,this.yArray=a,this.zArray=l}within(t,n,r,i){const o=[];return this.eachWithin(t,n,r,i,s=>o.push(s)),o}eachWithin(t,n,r,i,o){const s=i*i,a=Math.max(0,t-i-this.minX>>this.exp),l=Math.max(0,n-i-this.minY>>this.exp),c=Math.max(0,r-i-this.minZ>>this.exp),u=Math.min(this.boundX,1+(t+i-this.minX>>this.exp)),d=Math.min(this.boundY,1+(n+i-this.minY>>this.exp)),f=Math.min(this.boundZ,1+(r+i-this.minZ>>this.exp));for(let h=a;h<u;++h)for(let p=l;p<d;++p)for(let g=c;g<f;++g){const v=(h*this.boundY+p)*this.boundZ+g,m=this.grid[v];if(m>0){const y=m-1,b=this.bucketOffset[y],_=b+this.bucketCount[y];for(let x=b;x<_;++x){const w=this.bucketArray[x],S=this.xArray[w]-t,C=this.yArray[w]-n,A=this.zArray[w]-r,T=S*S+C*C+A*A;T<=s&&o(w,T)}}}}}class vv{constructor(t=0){this._fields=this._defaultFields,this._init(0)}get _defaultFields(){return[]}_init(t){this.length=t,this.count=0;for(let n=0,r=this._fields.length;n<r;++n){const[i,o,s]=this._fields[n];this._initField(i,o,s)}}_initField(t,n,r){this[t]=are(r,this.length*n)}addField(t,n,r){this._fields.push([t,n,r]),this._initField(t,n,r)}resize(t){this.length=Math.round(t||0),this.count=Math.min(this.count,this.length);for(let n=0,r=this._fields.length;n<r;++n){const i=this._fields[n][0],o=this._fields[n][1],s=this.length*o,a=new this[i].constructor(s);this[i].length>s?a.set(this[i].subarray(0,s)):a.set(this[i]),this[i]=a}}growIfFull(){if(this.count>=this.length){const t=Math.round(1.5*this.length);this.resize(Math.max(256,t))}}copyFrom(t,n,r,i){for(let o=0,s=this._fields.length;o<s;++o){const a=this._fields[o][0],l=this._fields[o][1],c=this[a],u=t[a];for(let d=0;d<i;++d){const f=l*(n+d),h=l*(r+d);for(let p=0;p<l;++p)c[f+p]=u[h+p]}}}copyWithin(t,n,r){for(let i=0,o=this._fields.length;i<o;++i){const s=this._fields[i][0],a=this._fields[i][1],l=this[s];for(let c=0;c<r;++c){const u=a*(t+c),d=a*(n+c);for(let f=0;f<a;++f)l[u+f]=l[d+f]}}}sort(t){Ve.time("Store.sort");const n=this,r=new this.constructor(1);(function i(o,s){if(o<s){let c=Math.floor((o+s)/2),u=o,d=s;do{for(;t(u,c)<0;)u+=1;for(;t(d,c)>0;)d-=1;u<=d&&(u===c?c=d:d===c&&(c=u),(a=u)!==(l=d)&&(r.copyFrom(n,0,a,1),n.copyWithin(a,l,1),n.copyFrom(r,l,0,1)),u+=1,d-=1)}while(u<=d);i(o,d),i(u,s)}var a,l})(0,this.count-1),Ve.timeEnd("Store.sort")}clear(){this.count=0}dispose(){for(let t=0,n=this._fields.length;t<n;++t)delete this[this._fields[t][0]]}}class zit extends vv{get _defaultFields(){return[["index1",1,"int32"],["index2",1,"int32"],["type",1,"int8"]]}addContact(t,n,r){this.growIfFull();const i=this.count;t<n?(this.index1[i]=t,this.index2[i]=n):(this.index2[i]=t,this.index1[i]=n),r&&(this.type[i]=r),this.count+=1}}function yw(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24}class Jr{constructor(t,n){this.length=t,this._words=new Uint32Array(t+32>>>5),n===!0&&this.setAll()}get(t){return(this._words[t>>>5]&1<<t)!=0}set(t){this._words[t>>>5]|=1<<t}clear(t){this._words[t>>>5]&=~(1<<t)}flip(t){this._words[t>>>5]^=1<<t}_assignRange(t,n,r){if(n<t)return;const i=this._words,o=r===!0?4294967295:0,s=t>>>5,a=n>>>5;for(let u=s+1;u<a;++u)i[u]=o;const l=s<<5,c=a<<5;if(r===!0)if(n-t<32)for(let u=t,d=n+1;u<d;++u)i[u>>>5]|=1<<u;else{for(let u=t,d=l+32;u<d;++u)i[u>>>5]|=1<<u;for(let u=c,d=n+1;u<d;++u)i[u>>>5]|=1<<u}else if(n-t<32)for(let u=t,d=n+1;u<d;++u)i[u>>>5]&=~(1<<u);else{for(let u=t,d=l+32;u<d;++u)i[u>>>5]&=~(1<<u);for(let u=c,d=n+1;u<d;++u)i[u>>>5]&=~(1<<u)}return this}setRange(t,n){return this._assignRange(t,n,!0)}clearRange(t,n){return this._assignRange(t,n,!1)}setBits(...t){const n=this._words,r=t.length;for(let i=0;i<r;++i){const o=t[i];n[o>>>5]|=1<<o}return this}clearBits(...t){const n=this._words,r=t.length;for(let i=0;i<r;++i){const o=t[i];n[o>>>5]&=~(1<<o)}return this}setAll(){return this._assignRange(0,this.length-1,!0)}clearAll(){return this._assignRange(0,this.length-1,!1)}flipAll(){const t=this._words.length,n=this._words,r=32-this.length%32;for(let i=0;i<t-1;++i)n[i]=~n[i];return n[t-1]=~(n[t-1]<<r)>>>r,this}_isRangeValue(t,n,r){if(n<t)return;const i=this._words,o=r===!0?4294967295:0,s=t>>>5,a=n>>>5;for(let l=s+1;l<a;++l)if(i[l]!==o)return!1;if(n-t<32){for(let l=t,c=n+1;l<c;++l)if(!!(i[l>>>5]&1<<l)!==r)return!1}else{const l=a<<5;for(let c=t,u=(s<<5)+32;c<u;++c)if(!!(i[c>>>5]&1<<c)!==r)return!1;for(let c=l,u=n+1;c<u;++c)if(!!(i[c>>>5]&1<<c)!==r)return!1}return!0}isRangeSet(t,n){return this._isRangeValue(t,n,!0)}isRangeClear(t,n){return this._isRangeValue(t,n,!1)}isAllSet(){return this._isRangeValue(0,this.length-1,!0)}isAllClear(){return this._isRangeValue(0,this.length-1,!1)}isSet(...t){const n=this._words,r=t.length;for(let i=0;i<r;++i){const o=t[i];if(!(n[o>>>5]&1<<o))return!1}return!0}isClear(...t){const n=this._words,r=t.length;for(let i=0;i<r;++i){const o=t[i];if(n[o>>>5]&1<<o)return!1}return!0}isEqualTo(t){const n=this._words,r=t._words,i=Math.min(n.length,r.length);for(let o=0;o<i;++o)if(n[o]!==r[o])return!1;return!0}getSize(){const t=this._words.length,n=this._words;let r=0;for(let i=0;i<t;++i)r+=yw(n[i]);return r}difference(t){const n=this._words,r=t._words,i=Math.min(n.length,r.length);for(let o=0;o<i;++o)n[o]=n[o]&~r[o];for(let o=n.length;o<i;++o)n[o]=0;return this}union(t){const n=this._words,r=t._words,i=Math.min(n.length,r.length);for(let o=0;o<i;++o)n[o]|=r[o];for(let o=n.length;o<i;++o)n[o]=0;return this}intersection(t){const n=this._words,r=t._words,i=Math.min(n.length,r.length);for(let o=0;o<i;++o)n[o]&=r[o];for(let o=n.length;o<i;++o)n[o]=0;return this}intersects(t){const n=this._words,r=t._words,i=Math.min(n.length,r.length);for(let o=0;o<i;++o)if(n[o]&r[o])return!0;return!1}getIntersectionSize(t){const n=this._words,r=t._words,i=Math.min(n.length,r.length);let o=0;for(let s=0;s<i;++s)o+=yw(n[s]&r[s]);return o}makeIntersection(t){const n=this._words,r=t._words,i=Math.min(n.length,r.length),o=new Uint32Array(i),s=Object.create(Jr.prototype);s._words=o,s.length=Math.min(this.length,t.length);for(let a=0;a<i;++a)o[a]=n[a]&r[a];return s}forEach(t){const n=this._words.length,r=this._words;let i=0;for(let o=0;o<n;++o){let s=r[o];for(;s!==0;){const a=s&-s;t((o<<5)+yw(a-1),i),s^=a,++i}}}toArray(){const t=this._words,n=new Array(this.getSize()),r=this._words.length;let i=0;for(let o=0;o<r;++o){let s=t[o];for(;s!==0;){const a=s&-s;n[i++]=(o<<5)+yw(a-1),s^=a}}return n}toString(){return"{"+this.toArray().join(",")+"}"}toSeleString(){const t=this.toArray().join(",");return t?"@"+t:"NONE"}clone(){const t=Object.create(Jr.prototype);return t.length=this.length,t._words=new Uint32Array(this._words),t}}function Cre(e){const{edgeCount:t,nodeCount:n,nodeArray1:r,nodeArray2:i}=e,o=new Uint8Array(n),s=new Int32Array(n);for(let c=0;c<t;++c)o[r[c]]+=1,o[i[c]]+=1;for(let c=1;c<n;++c)s[c]+=s[c-1]+o[c-1];const a=2*t,l=new Int32Array(a);for(let c=0;c<a;++c)l[c]=-1;for(let c=0;c<t;++c){const u=r[c],d=i[c];let f=s[u];for(;l[f]!==-1&&f<a;)f+=1;l[f]=c;let h=s[d];for(;l[h]!==-1&&h<a;)h+=1;l[h]=c}return{countArray:o,offsetArray:s,indexArray:l}}function li(e=0,t=0){return{type:e,group:t,x:0,y:0,z:0,atomSet:[]}}function Ir(e,t){e.x+=t.x,e.y+=t.y,e.z+=t.z,e.atomSet.push(t.index)}function Rr(e,t){const n=t.atomSet.length;if(n>0){const{types:r,groups:i,centers:o,atomSets:s}=e;r.push(t.type),i.push(t.group),o.x.push(t.x/n),o.y.push(t.y/n),o.z.push(t.z/n),s.push(t.atomSet)}}const dh=0,jit=["D-BETA-PEPTIDE, C-GAMMA LINKING","D-GAMMA-PEPTIDE, C-DELTA LINKING","D-PEPTIDE COOH CARBOXY TERMINUS","D-PEPTIDE NH3 AMINO TERMINUS","D-PEPTIDE LINKING","L-BETA-PEPTIDE, C-GAMMA LINKING","L-GAMMA-PEPTIDE, C-DELTA LINKING","L-PEPTIDE COOH CARBOXY TERMINUS","L-PEPTIDE NH3 AMINO TERMINUS","L-PEPTIDE LINKING","PEPTIDE LINKING","PEPTIDE-LIKE"],Uit=["RNA OH 3 PRIME TERMINUS","RNA OH 5 PRIME TERMINUS","RNA LINKING"],Vit=["DNA OH 3 PRIME TERMINUS","DNA OH 5 PRIME TERMINUS","DNA LINKING","L-DNA LINKING","L-RNA LINKING"],Are=["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","SACCHARIDE"],Hit=["NON-POLYMER"].concat(["OTHER"],Are),Pre=["h","g","i"],Mre=["e","b"],Ere=["s","t","l",""],Tre={H:1,D:1,T:1,HE:2,LI:3,BE:4,B:5,C:6,N:7,O:8,F:9,NE:10,NA:11,MG:12,AL:13,SI:14,P:15,S:16,CL:17,AR:18,K:19,CA:20,SC:21,TI:22,V:23,CR:24,MN:25,FE:26,CO:27,NI:28,CU:29,ZN:30,GA:31,GE:32,AS:33,SE:34,BR:35,KR:36,RB:37,SR:38,Y:39,ZR:40,NB:41,MO:42,TC:43,RU:44,RH:45,PD:46,AG:47,CD:48,IN:49,SN:50,SB:51,TE:52,I:53,XE:54,CS:55,BA:56,LA:57,CE:58,PR:59,ND:60,PM:61,SM:62,EU:63,GD:64,TB:65,DY:66,HO:67,ER:68,TM:69,YB:70,LU:71,HF:72,TA:73,W:74,RE:75,OS:76,IR:77,PT:78,AU:79,HG:80,TL:81,PB:82,BI:83,PO:84,AT:85,RN:86,FR:87,RA:88,AC:89,TH:90,PA:91,U:92,NP:93,PU:94,AM:95,CM:96,BK:97,CF:98,ES:99,FM:100,MD:101,NO:102,LR:103,RF:104,DB:105,SG:106,BH:107,HS:108,MT:109,DS:110,RG:111,CN:112,NH:113,FL:114,MC:115,LV:116,TS:117,OG:118},Git={1:1.1,2:1.4,3:1.81,4:1.53,5:1.92,6:1.7,7:1.55,8:1.52,9:1.47,10:1.54,11:2.27,12:1.73,13:1.84,14:2.1,15:1.8,16:1.8,17:1.75,18:1.88,19:2.75,20:2.31,21:2.3,22:2.15,23:2.05,24:2.05,25:2.05,26:2.05,27:2,28:2,29:2,30:2.1,31:1.87,32:2.11,33:1.85,34:1.9,35:1.83,36:2.02,37:3.03,38:2.49,39:2.4,40:2.3,41:2.15,42:2.1,43:2.05,44:2.05,45:2,46:2.05,47:2.1,48:2.2,49:2.2,50:1.93,51:2.17,52:2.06,53:1.98,54:2.16,55:3.43,56:2.68,57:2.5,58:2.48,59:2.47,60:2.45,61:2.43,62:2.42,63:2.4,64:2.38,65:2.37,66:2.35,67:2.33,68:2.32,69:2.3,70:2.28,71:2.27,72:2.25,73:2.2,74:2.1,75:2.05,76:2,77:2,78:2.05,79:2.1,80:2.05,81:1.96,82:2.02,83:2.07,84:1.97,85:2.02,86:2.2,87:3.48,88:2.83,89:2,90:2.4,91:2,92:2.3,93:2,94:2,95:2,96:2,97:2,98:2,99:2,100:2,101:2,102:2,103:2,104:2,105:2,106:2,107:2,108:2,109:2,110:2,111:2,112:2,113:2,114:2,115:2,116:2,117:2,118:2},Wit={1:.31,2:.28,3:1.28,4:.96,5:.84,6:.76,7:.71,8:.66,9:.57,10:.58,11:1.66,12:1.41,13:1.21,14:1.11,15:1.07,16:1.05,17:1.02,18:1.06,19:2.03,20:1.76,21:1.7,22:1.6,23:1.53,24:1.39,25:1.39,26:1.32,27:1.26,28:1.24,29:1.32,30:1.22,31:1.22,32:1.2,33:1.19,34:1.2,35:1.2,36:1.16,37:2.2,38:1.95,39:1.9,40:1.75,41:1.64,42:1.54,43:1.47,44:1.46,45:1.42,46:1.39,47:1.45,48:1.44,49:1.42,50:1.39,51:1.39,52:1.38,53:1.39,54:1.4,55:2.44,56:2.15,57:2.07,58:2.04,59:2.03,60:2.01,61:1.99,62:1.98,63:1.98,64:1.96,65:1.94,66:1.92,67:1.92,68:1.89,69:1.9,70:1.87,71:1.87,72:1.75,73:1.7,74:1.62,75:1.51,76:1.44,77:1.41,78:1.36,79:1.36,80:1.32,81:1.45,82:1.46,83:1.48,84:1.4,85:1.5,86:1.5,87:2.6,88:2.21,89:2.15,90:2.06,91:2,92:1.96,93:1.9,94:1.87,95:1.8,96:1.69,97:1.6,98:1.6,99:1.6,100:1.6,101:1.6,102:1.6,103:1.6,104:1.6,105:1.6,106:1.6,107:1.6,108:1.6,109:1.6,110:1.6,111:1.6,112:1.6,113:1.6,114:1.6,115:1.6,116:1.6,117:1.6,118:1.6},o7={1:[1],2:[0],3:[1],4:[2],5:[3],6:[4],7:[3],8:[2],9:[1],10:[0],11:[1],12:[2],13:[6],14:[6],15:[3,5,7],16:[2,4,6],17:[1],18:[0],19:[1],20:[2],31:[3],32:[4],33:[3,5],34:[2,4,6],35:[1],36:[0],37:[1],38:[2],49:[3],50:[4],51:[3,5],52:[2],53:[1,2,5],54:[0,2],55:[1],56:[2],81:[3],82:[4],83:[3],84:[2],85:[1],86:[0],87:[1],88:[2]},qit={1:1,2:2,3:1,4:2,5:3,6:4,7:5,8:6,9:7,10:8,11:1,12:2,13:3,14:4,15:5,16:6,17:7,18:8,19:1,20:2,21:3,22:4,23:5,24:6,25:7,26:8,27:9,28:10,29:11,30:2,31:3,32:4,33:5,34:6,35:7,36:8,37:1,38:2,39:3,40:4,41:5,42:6,43:7,44:8,45:9,46:10,47:11,48:2,49:3,50:4,51:5,52:6,53:7,54:8,55:1,56:2,57:3,58:4,59:3,60:4,61:5,62:6,63:7,64:8,65:9,66:10,67:11,68:12,69:13,70:14,71:15,72:4,73:5,74:6,75:7,76:8,77:9,78:10,79:11,80:2,81:3,82:4,83:5,84:6,85:7,86:8,87:1,88:2,89:3,90:4,91:3,92:4,93:5,94:6,95:7,96:8,97:9,98:10,99:11,100:12,101:13,102:14,103:15,104:2,105:2,106:2,107:2,108:2,109:2,110:2,111:2,112:2,113:3,114:4,115:5,116:6,117:7,118:8},s7={ALA:[.17,.5,.33],ARG:[.81,1.81,1],ASN:[.42,.85,.43],ASP:[1.23,3.64,2.41],ASH:[-.07,.43,.5],CYS:[-.24,-.02,.22],GLN:[.58,.77,.19],GLU:[2.02,3.63,1.61],GLH:[-.01,.11,.12],GLY:[.01,1.15,1.14],HIS:[.17,.11,-.06],ILE:[-.31,-1.12,-.81],LEU:[-.56,-1.25,-.69],LYS:[.99,2.8,1.81],MET:[-.23,-.67,-.44],PHE:[-1.13,-1.71,-.58],PRO:[.45,.14,-.31],SER:[.13,.46,.33],THR:[.14,.25,.11],TRP:[-1.85,-2.09,-.24],TYR:[-.94,-.71,.23],VAL:[.07,-.46,-.53]},Yit=[0,0,0],wC={HIS:"H",ARG:"R",LYS:"K",ILE:"I",PHE:"F",LEU:"L",TRP:"W",ALA:"A",MET:"M",PRO:"P",CYS:"C",ASN:"N",VAL:"V",GLY:"G",SER:"S",GLN:"Q",TYR:"Y",ASP:"D",GLU:"E",THR:"T",SEC:"U",PYL:"O"},bm=Object.keys(wC),Ore=["A","C","T","G","U","I"],Ire=["DA","DC","DT","DG","DU","DI"],Xit=["A","G","I","DA","DG","DI"],xy=Ore.concat(Ire),SC=["SOL","WAT","HOH","H2O","W","DOD","D3O","TIP3","TIP4","SPC"],Kit=["118","119","1AL","1CU","2FK","2HP","2OF","3CO","3MT","3NI","3OF","3P8","4MO","4PU","543","6MO","ACT","AG","AL","ALF","AM","ATH","AU","AU3","AUC","AZI","BA","BCT","BEF","BF4","BO4","BR","BS3","BSY","CA","CAC","CD","CD1","CD3","CD5","CE","CHT","CL","CO","CO3","CO5","CON","CR","CS","CSB","CU","CU1","CU3","CUA","CUZ","CYN","DME","DMI","DSC","DTI","DY","E4N","EDR","EMC","ER3","EU","EU3","F","FE","FE2","FPO","GA","GD3","GEP","HAI","HG","HGC","IN","IOD","IR","IR3","IRI","IUM","K","KO4","LA","LCO","LCP","LI","LU","MAC","MG","MH2","MH3","MLI","MLT","MMC","MN","MN3","MN5","MN6","MO1","MO2","MO3","MO4","MO5","MO6","MOO","MOS","MOW","MW1","MW2","MW3","NA","NA2","NA5","NA6","NAO","NAW","NCO","NET","NH4","NI","NI1","NI2","NI3","NO2","NO3","NRU","O4M","OAA","OC1","OC2","OC3","OC4","OC5","OC6","OC7","OC8","OCL","OCM","OCN","OCO","OF1","OF2","OF3","OH","OS","OS4","OXL","PB","PBM","PD","PDV","PER","PI","PO3","PO4","PR","PT","PT4","PTN","RB","RH3","RHD","RU","SB","SCN","SE4","SEK","SM","SMO","SO3","SO4","SR","T1A","TB","TBA","TCN","TEA","TH","THE","TL","TMA","TRA","UNX","V","VN3","VO4","W","WO5","Y1","YB","YB2","YH","YT3","ZCM","ZN","ZN2","ZN3","ZNO","ZO3","OHX"],Zit=["045","0AT","0BD","0MK","0NZ","0TS","0V4","0XY","0YT","10M","147","149","14T","15L","16G","18T","18Y","1AR","1BW","1GL","1GN","1JB","1LL","1NA","1S3","26M","26Q","26R","26V","26W","26Y","27C","289","291","293","2DG","2F8","2FG","2FL","2FP","2GL","2M4","2M5","32O","34V","3CM","3DO","3DY","3FM","3LR","3MF","3MG","3SA","3ZW","46D","46M","46Z","48Z","4CQ","4GC","4NN","50A","5DI","5GF","5MM","5RP","5SA","5SP","64K","6PG","6SA","7JZ","7SA","A1Q","A2G","AAB","AAL","AAO","ABC","ABD","ABE","ABF","ABL","ACG","ACI","ACR","ACX","ADA","ADG","ADR","AF1","AFD","AFL","AFO","AFP","AFR","AGC","AGH","AGL","AHR","AIG","ALL","ALX","AMU","AOG","AOS","ARA","ARB","ARE","ARI","ASG","ASO","AXP","AXR","B0D","B16","B2G","B4G","B6D","B8D","B9D","BBK","BCD","BDG","BDP","BDR","BEM","BFP","BGC","BGL","BGP","BGS","BHG","BMA","BMX","BNG","BNX","BOG","BRI","BXF","BXP","BXX","BXY","C3X","C4X","C5X","CAP","CBI","CBK","CBS","CDR","CEG","CGF","CHO","CR1","CR6","CRA","CT3","CTO","CTR","CTT","D6G","DAF","DAG","DDA","DDB","DDL","DEL","DFR","DFX","DG0","DGC","DGD","DGM","DGS","DIG","DLF","DLG","DMU","DNO","DOM","DP5","DQQ","DQR","DR2","DR3","DR4","DRI","DSR","DT6","DVC","E4P","E5G","EAG","EBG","EBQ","EGA","EJT","EPG","ERE","ERI","F1P","F1X","F6P","FBP","FCA","FCB","FCT","FDP","FDQ","FFC","FIX","FMO","FRU","FSI","FU4","FUB","FUC","FUD","FUL","FXP","G16","G1P","G2F","G3I","G4D","G4S","G6D","G6P","G6S","GAC","GAD","GAL","GC1","GC4","GCD","GCN","GCO","GCS","GCT","GCU","GCV","GCW","GCX","GE1","GFG","GFP","GIV","GL0","GL2","GL5","GL6","GL7","GL9","GLA","GLB","GLC","GLD","GLF","GLG","GLO","GLP","GLS","GLT","GLW","GMH","GN1","GNX","GP1","GP4","GPH","GPM","GQ1","GQ2","GQ4","GS1","GS4","GSA","GSD","GTE","GTH","GTK","GTR","GTZ","GU0","GU1","GU2","GU3","GU4","GU5","GU6","GU8","GU9","GUF","GUP","GUZ","GYP","GYV","H2P","HDL","HMS","HS2","HSD","HSG","HSH","HSJ","HSQ","HSR","HSU","HSX","HSY","HSZ","IAB","IDG","IDR","IDS","IDT","IDU","IDX","IDY","IMK","IN1","IPT","ISL","KBG","KD2","KDA","KDM","KDO","KFN","KO1","KO2","KTU","L6S","LAG","LAI","LAK","LAO","LAT","LB2","LBT","LCN","LDY","LGC","LGU","LM2","LMT","LMU","LOG","LOX","LPK","LSM","LTM","LVZ","LXB","LXZ","M1F","M3M","M6P","M8C","MA1","MA2","MA3","MAB","MAG","MAL","MAN","MAT","MAV","MAW","MBG","MCU","MDA","MDM","MDP","MFA","MFB","MFU","MG5","MGA","MGL","MLB","MMA","MMN","MN0","MRP","MTT","MUG","MVP","MXY","N1L","N9S","NAA","NAG","NBG","NDG","NED","NG1","NG6","NGA","NGB","NGC","NGE","NGF","NGL","NGS","NGY","NHF","NM6","NM9","NTF","NTO","NTP","NXD","NYT","OPG","OPM","ORP","OX2","P3M","P53","P6P","PA5","PNA","PNG","PNW","PRP","PSJ","PSV","PTQ","QDK","QPS","QV4","R1P","R1X","R2B","R5P","RAA","RAE","RAF","RAM","RAO","RAT","RB5","RBL","RCD","RDP","REL","RER","RF5","RG1","RGG","RHA","RIB","RIP","RNS","RNT","ROB","ROR","RPA","RST","RUB","RUU","RZM","S6P","S7P","SA0","SCR","SDD","SF6","SF9","SG4","SG5","SG6","SG7","SGA","SGC","SGD","SGN","SGS","SHB","SHG","SI3","SIO","SOE","SOL","SSG","SUC","SUP","SUS","T6P","T6T","TAG","TCB","TDG","TGK","TGY","TH1","TIA","TM5","TM6","TM9","TMR","TMX","TOA","TOC","TRE","TYV","UCD","UDC","VG1","X0X","X1X","X2F","X4S","X5S","X6X","XBP","XDN","XDP","XIF","XIM","XLF","XLS","XMM","XUL","XXR","XYP","XYS","YO5","Z3Q","Z6J","Z9M","ZDC","ZDM"],Jit=["CA","C","N","O","O1","O2","OC1","OC2","OX1","OXT","OT1","OT2","H","H1","H2","H3","HA","HN","BB"],Rre=["P","OP1","OP2","HOP2","HOP3","O2'","O3'","O4'","O5'","C1'","C2'","C3'","C4'","C5'","H1'","H2'","H2''","HO2'","H3'","H4'","H5'","H5''","HO3'","HO5'","O2*","O3*","O4*","O5*","C1*","C2*","C3*","C4*","C5*"],V0={1:{trace:"CA",direction1:"C",direction2:["O","OC1","O1","OX1","OXT","OT1","OT2"],backboneStart:"N",backboneEnd:"C"},2:{trace:["C4'","C4*"],direction1:["C1'","C1*"],direction2:["C3'","C3*"],backboneStart:"P",backboneEnd:["O3'","O3*"]},3:{trace:["C3'","C3*"],direction1:["C2'","C2*"],direction2:["O4'","O4*"],backboneStart:"P",backboneEnd:["O3'","O3*"]},4:{trace:["CA","BB"],backboneStart:["CA","BB"],backboneEnd:["CA","BB"]},5:{trace:["C4'","C4*","P"],backboneStart:["C4'","C4*","P"],backboneEnd:["C4'","C4*","P"]},6:{trace:["C3'","C3*","C2'","P"],backboneStart:["C3'","C3*","C2'","P"],backboneEnd:["C3'","C3*","C2'","P"]}};V0[dh]={};const a7={HD:"H",HS:"H",A:"C",NA:"N",NS:"N",OA:"O",OS:"O",SA:"S",G0:"C",G1:"C",G2:"C",G3:"C",CG0:"C",CG1:"C",CG2:"C",CG3:"C",W:"O"};function bw(e){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;default:return 8}}const l7=new Map([[2,br(180)],[3,br(120)],[4,br(109.4721)],[6,br(90)]]);function xw(e,t){let n=[];const r=new W,i=new W;return r.subVectors(t,e),e.eachBondedAtom(o=>{o.number!==1&&(i.subVectors(o,e),n.push(r.angleTo(i)))}),n}function c7(e,t){const n=e.clone(),r=new W;r.subVectors(t,e);const i=[new W,new W];let o=0;if(e.eachBondedAtom(a=>{o>1||a.number!==1&&(n.index=a.index,i[o++].subVectors(a,e))}),o===1&&n.eachBondedAtom(a=>{o>1||a.number!==1&&a.index!==e.index&&i[o++].subVectors(a,e)}),o!==2)return;const s=i[0].cross(i[1]);return Math.abs(Math.PI/2-s.angleTo(r))}function Qit(e,t){const n=e.structure,r=n.atomCount,i=new Int8Array(r),o=new Int8Array(r),s=new Int8Array(r),a=new Int8Array(r);return n.eachAtom(l=>{const c=l.index,[u,d,f,h]=function(p,g){const v=p.bondToElementCount(1);let m=p.formalCharge||0;const y=g.assignCharge==="always"||g.assignCharge==="auto"&&m===0,b=g.assignH==="always"||g.assignH==="auto"&&v===0,_=p.bondCount,x=function(T){let O=0;return T.eachBond(R=>O+=R.bondOrder),O}(p),w=function(T){const O=T.structure.getBondProxy(),R=T.number,L=R===8||R===7;if(L&&T.bondCount===4)return!1;let D=!1;return T.eachBond($=>{if($.bondOrder>1)D=!0;else if(L){const z=$.getOtherAtom(T);z.eachBond(H=>{if(H.bondOrder>1){const B=z.number;if((B===15||B===16)&&H.getOtherAtom(z).number===8)return;D=!0}},O)}}),D}(p),S=x-_>0;let C=0,A=8;switch(p.number){case 1:y&&(_===0?(m=1,A=0):_===1&&(m=0,A=1));break;case 6:y&&(m=0),b&&(C=Math.max(0,4-x-Math.abs(m))),A=bw(_+C+Math.max(0,-m));break;case 7:if(y)if(b)if(w&&x<4)m=_-v==1&&x-v==2?1:0;else{let T=!1;p.eachBondedAtom(O=>{(O.number===16||O.isMetal())&&(T=!0)}),m=T?0:1}else m=x-3;b&&(C=Math.max(0,3-x+m)),A=bw(w&&!S?_+C-m:_+C+1-m);break;case 8:y&&(b||(m=x-2),x===1&&p.eachBondedAtom(T=>{T.eachBond(O=>{const R=O.getOtherAtom(T);R.index!==p.index&&R.number===8&&O.bondOrder===2&&(m=-1)})})),b&&(C=Math.max(0,2-x+m)),A=bw(w&&!S?_+C-m+1:_+C-m+2);break;case 16:y&&(b||(m=x<=3&&!p.bondToElementCount(8)?x-2:0)),b&&x<2&&(C=Math.max(0,2-x+m)),x<=3&&(A=bw(_+C-m+2));break;case 9:case 17:case 35:case 53:case 85:y&&(m=x-1);break;case 3:case 11:case 19:case 37:case 55:case 87:y&&(m=1-x);break;case 4:case 12:case 20:case 38:case 56:case 88:y&&(m=2-x);break;default:console.warn("Requested charge, protonation for an unhandled element",p.element)}return[m,C,C+v,A]}(l,t);i[c]=u,o[c]=d,s[c]=f,a[c]=h}),{charge:i,implicitH:o,totalH:s,idealGeometry:a}}function Op(e){if(e["@valenceModel"])return e["@valenceModel"];const t=Qit(e,{assignCharge:"auto",assignH:"auto"});return e["@valenceModel"]=t,t}function u7(e){return e.number===15&&e.bondToElementCount(8)===e.bondCount}const eot=["ARG","HIS","LYS"],tot=["GLU","ASP"];function not(e,t){return e===2&&t===1||e===1&&t===2}function rot(e,t){return e===3&&t===3}function iot(e,t){return e===3&&t===1||e===1&&t===3}function d7(e){return e.resname==="HIS"&&e.number==7&&e.isRing()}function oot(e,t){return e===5&&t===4||e===4&&t===5}function sot(e,t){return e===9&&t===5||e===5&&t===9}const aot=[3,11,19,37,55,12,20,38,56,13,31,49,81,21,50,82,83,51,80];function lot(e,t){return e===12?t===11||t===12:e===13?t===10:void 0}const cot=[17,35,53,85],uot=[7,8,16],dot=[6,7,15,16],fot=br(180),hot=br(120);function f7(e,t,n){return!kre(e,t,n)&&(e.modelIndex!==t.modelIndex||e.altloc&&t.altloc&&e.altloc!==t.altloc)}const sr={maxHydrophobicDist:4,maxHbondDist:3.5,maxHbondSulfurDist:4.1,maxHbondAccAngle:45,maxHbondDonAngle:45,maxHbondAccPlaneAngle:90,maxHbondDonPlaneAngle:30,maxPiStackingDist:5.5,maxPiStackingOffset:2,maxPiStackingAngle:30,maxCationPiDist:6,maxCationPiOffset:2,maxIonicDist:5,maxHalogenBondDist:4,maxHalogenBondAngle:30,maxMetalDist:3,refineSaltBridges:!0,masterModelIndex:-1,lineOfSightDistFactor:1};function kre(e,t,n){return e.modelIndex===n&&t.modelIndex!==n||t.modelIndex===n&&e.modelIndex!==n}function c0(e,t,n){return!kre(e,t,n)&&(e.modelIndex!==t.modelIndex||e.residueIndex===t.residueIndex||e.altloc&&t.altloc&&e.altloc!==t.altloc)}function pot(e){const t={types:[],groups:[],centers:{x:[],y:[],z:[]},atomSets:[]};return Je&&Ve.time("calculateFeatures"),function(n,r){const{charge:i}=Op(n.data),o={};n.eachResidue(s=>{if(eot.includes(s.resname)){const a=li(1);s.eachAtom(l=>{l.number===7&&l.isSidechain()&&Ir(a,l)}),Rr(r,a)}else bm.includes(s.resname)||s.isNucleic()||(s.eachAtom(a=>{let l=!1;const c=li(1);(function(u){let d=0;return u.number===6&&u.bondCount===3&&u.bondToElementCount(7)===3&&u.eachBondedAtom(f=>{f.bondCount-f.bondToElementCount(1)==1&&++d}),d===2})(a)?(c.group=8,l=!0):function(u){let d=0;return u.number===6&&u.bondCount===3&&u.bondToElementCount(7)===2&&u.bondToElementCount(6)===1&&u.eachBondedAtom(f=>{f.bondCount-f.bondToElementCount(1)==1&&++d}),d===2}(a)&&(c.group=9,l=!0),l&&(a.eachBondedAtom(u=>{u.number===7&&(o[u.index]=!0,Ir(c,u))}),Rr(r,c))}),s.eachAtom(a=>{const l=li(1);i[a.index]>0&&(o[a.index]||(Ir(l,a),Rr(r,l)))}))})}(e,t),function(n,r){const{charge:i}=Op(n.data),o={};n.eachResidue(s=>{if(tot.includes(s.resname)){const a=li(2);s.eachAtom(l=>{l.number===8&&l.isSidechain()&&Ir(a,l)}),Rr(r,a)}else if(xy.includes(s.resname)){const a=li(2);s.eachAtom(l=>{u7(l)&&(a.group=6,l.eachBondedAtom(c=>{c.number===8&&Ir(a,c)}),Rr(r,a))})}else bm.includes(s.resname)||xy.includes(s.resname)||(s.eachAtom(a=>{let l=!1;const c=li(2);(function(u){return u.number===16&&u.bondToElementCount(8)===3})(a)?(c.group=4,l=!0):u7(a)?(c.group=6,l=!0):function(u){return u.number===16&&u.bondToElementCount(8)===4}(a)?(c.group=5,l=!0):function(u){let d=0;return u.number===6&&u.bondToElementCount(8)===2&&u.bondToElementCount(6)===1&&u.eachBondedAtom(f=>{f.number===8&&f.bondCount-f.bondToElementCount(1)==1&&++d}),d===2}(a)&&(c.group=10,l=!0),l&&(a.eachBondedAtom(u=>{u.number===8&&(o[u.index]=!0,Ir(c,u))}),Rr(r,c))}),s.eachAtom(a=>{const l=li(2);i[a.index]<0&&(o[a.index]||(Ir(l,a),Rr(r,l)))}))})}(e,t),function(n,r){const i=n.getAtomProxy();n.eachResidue(o=>{const s=o.getAromaticRings();if(s){const a=o.atomOffset;s.forEach(l=>{const c=li(3);l.forEach(u=>{i.index=u+a,Ir(c,i)}),Rr(r,c)})}})}(e,t),function(n,r){const{charge:i,implicitH:o,idealGeometry:s}=Op(n.data);n.eachAtom(a=>{const l=li(5),c=a.number;if(c===8)Ir(l,a),Rr(r,l);else if(c===7){if(d7(a))Ir(l,a),Rr(r,l);else if(i[a.index]<1){const u=a.bondCount+o[a.index],d=s[a.index];(d===4&&u<4||d===3&&u<3||d===2&&u<2)&&(Ir(l,a),Rr(r,l))}}else c===16&&(a.resname!=="CYS"&&a.resname!=="MET"&&a.formalCharge!==-1||(Ir(l,a),Rr(r,l)))})}(e,t),function(n,r){const{totalH:i}=Op(n.data);n.eachAtom(o=>{const s=li(4),a=o.number;(d7(o)||i[o.index]>0&&(a===7||a===8||a===16))&&(Ir(s,o),Rr(r,s))})}(e,t),function(n,r){const{totalH:i}=Op(n.data);n.eachAtom(o=>{if(o.number===6&&i[o.index]>0&&(o.bondToElementCount(7)>0||o.bondToElementCount(8)>0||function(s){if(!s.isAromatic())return!1;const a=s.residueType.getRings();if(!a)return!1;let l=!1;return a.rings.forEach(c=>{l||c.some(u=>s.index-s.residueAtomOffset===u)&&(l=c.some(u=>{const d=s.residueType.atomTypeIdList[u],f=s.atomMap.get(d).number;return f===7||f===8}))}),l}(o))){const s=li(9);Ir(s,o),Rr(r,s)}})}(e,t),function(n,r){n.eachAtom(i=>{let o=!1,s=!1;const a=bm.includes(i.resname),l=xy.includes(i.resname);if(a||l?a?i.number===8?(["ASP","GLU","SER","THR","TYR","ASN","GLN"].includes(i.resname)&&i.isSidechain()||i.isBackbone())&&(o=!0,s=!0):i.number===16&&i.resname==="CYS"?(o=!0,s=!0):i.number===7&&i.resname==="HIS"&&i.isSidechain()&&(o=!0):l&&(i.number===8&&i.isBackbone()?(o=!0,s=!0):["N3","N4","N7"].includes(i.atomname)?o=!0:["O2","O4","O6"].includes(i.atomname)&&(o=!0,s=!0)):i.isHalogen()||i.number===8||i.number===16?(o=!0,s=!0):i.number===7&&(o=!0),o){const c=li(11);Ir(c,i),Rr(r,c)}if(s){const c=li(10);Ir(c,i),Rr(r,c)}})}(e,t),function(n,r){n.eachAtom(i=>{if(i.isTransitionMetal()||i.number===30||i.number===48){const o=li(12);Ir(o,i),Rr(r,o)}else if(aot.includes(i.number)){const o=li(13);Ir(o,i),Rr(r,o)}})}(e,t),function(n,r){n.eachAtom(i=>{const o=li(8);let s=!1;i.number===6?(s=!0,i.eachBondedAtom(a=>{const l=a.number;l!==6&&l!==1&&(s=!1)})):i.number===9&&(s=!0),s&&(Ir(o,i),Rr(r,o))})}(e,t),function(n,r){n.eachAtom(i=>{if(uot.includes(i.number)){let o=!1;if(i.eachBondedAtom(s=>{dot.includes(s.number)&&(o=!0)}),o){const s=li(7);Ir(s,i),Rr(r,s)}}})}(e,t),function(n,r){n.eachAtom(i=>{if(cot.includes(i.number)&&i.bondToElementCount(6)===1){const o=li(6);Ir(o,i),Rr(r,o)}})}(e,t),Je&&Ve.timeEnd("calculateFeatures"),t}function mot(e,t=sr){const n=function(i){const{types:o,centers:s}=i;return{features:i,spatialHash:new Hb(s),contactStore:new zit,featureSet:new Jr(o.length,!1)}}(pot(e));Je&&Ve.time("calculateContacts"),function(i,o,s={}){const a=re(s.maxIonicDist,sr.maxIonicDist),l=re(s.maxPiStackingDist,sr.maxPiStackingDist),c=re(s.maxPiStackingOffset,sr.maxPiStackingOffset),u=re(s.maxPiStackingAngle,sr.maxPiStackingAngle),d=re(s.maxCationPiDist,sr.maxCationPiDist),f=re(s.maxCationPiOffset,sr.maxCationPiOffset),h=re(s.masterModelIndex,sr.masterModelIndex),p=Math.max(a+2,l,d),g=l*l,v=d*d,{features:m,spatialHash:y,contactStore:b,featureSet:_}=o,{types:x,centers:w,atomSets:S}=m,{x:C,y:A,z:T}=w,O=x.length,R=i.atomStore.x,L=i.atomStore.y,D=i.atomStore.z,$=i.getAtomProxy(),z=i.getAtomProxy(),H=function(Z,ae,oe){const te=Z.length,ve=ae.length;for(let ne=0;ne<te;++ne){$.index=Z[ne];for(let xe=0;xe<ve;++xe)if(z.index=ae[xe],$.distanceTo(z)<=oe)return!0}return!1},B=new W,V=new W,J=new W,K=new W,ie=new W,ce=new W,pe=new W,se=function(Z,ae){B.set(R[Z[0]],L[Z[0]],D[Z[0]]),V.set(R[Z[1]],L[Z[1]],D[Z[1]]),J.set(R[Z[2]],L[Z[2]],D[Z[2]]),K.subVectors(B,V),ie.subVectors(B,J),ae.crossVectors(K,ie)},G=function(Z,ae,oe){return B.set(C[Z],A[Z],T[Z]),V.set(C[ae],A[ae],T[ae]),B.sub(V).projectOnPlane(oe).add(V).distanceTo(V)},he=function(Z,ae,oe){_.setBits(Z,ae),b.addContact(Z,ae,oe)};for(let Z=0;Z<O;++Z)y.eachWithin(C[Z],A[Z],T[Z],p,(ae,oe)=>{if(ae<=Z||($.index=S[Z][0],z.index=S[ae][0],c0($,z,h)))return;const te=x[Z],ve=x[ae];if(not(te,ve))H(S[Z],S[ae],a)&&he(Z,ae,1);else if(rot(te,ve)){if(oe<=g){se(S[Z],ce),se(S[ae],pe);const ne=57.29578*ce.angleTo(pe);Math.min(G(Z,ae,pe),G(ae,Z,ce))<=c&&(ne<=u||ne>=180-u||ne<=u+90&&ne>=90-u)&&he(Z,ae,3)}}else if(iot(te,ve)&&oe<=v){const[ne,xe]=te===3?[Z,ae]:[ae,Z];se(S[ne],ce),G(xe,ne,ce)<=f&&he(ne,xe,2)}})}(e,n,t),function(i,o,s={}){const a=re(s.maxHbondDist,sr.maxHbondDist),l=re(s.maxHbondSulfurDist,sr.maxHbondSulfurDist),c=br(re(s.maxHbondAccAngle,sr.maxHbondAccAngle)),u=br(re(s.maxHbondDonAngle,sr.maxHbondDonAngle)),d=br(re(s.maxHbondAccPlaneAngle,sr.maxHbondAccPlaneAngle)),f=br(re(s.maxHbondDonPlaneAngle,sr.maxHbondDonPlaneAngle)),h=re(s.masterModelIndex,sr.masterModelIndex),p=Math.max(a,l),g=a*a,{features:v,spatialHash:m,contactStore:y,featureSet:b}=o,{types:_,centers:x,atomSets:w}=v,{x:S,y:C,z:A}=x,T=_.length,{idealGeometry:O}=Op(i.data),R=i.getAtomProxy(),L=i.getAtomProxy();for(let D=0;D<T;++D)m.eachWithin(S[D],C[D],A[D],p,($,z)=>{if($<=D)return;const H=_[D],B=_[$],V=sot(H,B);if(!V&&!oot(H,B))return;const[J,K]=B===5?[D,$]:[$,D];if(R.index=w[J][0],L.index=w[K][0],L.index===R.index||c0(R,L,h)||R.number!==16&&L.number!==16&&z>g||R.connectedTo(L))return;const ie=xw(R,L),ce=l7.get(O[R.index])||br(120);if(ie.some(ae=>Math.abs(ce-ae)>u))return;if(O[R.index]===3){const ae=c7(R,L);if(ae!==void 0&&ae>f)return}const pe=xw(L,R),se=l7.get(O[L.index])||br(120);if(pe.some(ae=>se-ae>c))return;if(O[L.index]===3){const ae=c7(L,R);if(ae!==void 0&&ae>d)return}b.setBits(J,K);const G=V?8:function(ae,oe){return ae.isWater()&&oe.isWater()}(he=R,Z=L)?9:function(ae,oe){return ae.isBackbone()&&oe.isBackbone()}(he,Z)?10:4;var he,Z;y.addContact(J,K,G)})}(e,n,t),function(i,o,s={}){const a=re(s.maxMetalDist,sr.maxMetalDist),l=re(s.masterModelIndex,sr.masterModelIndex),{features:c,spatialHash:u,contactStore:d,featureSet:f}=o,{types:h,centers:p,atomSets:g}=c,{x:v,y:m,z:y}=p,b=h.length,_=i.getAtomProxy(),x=i.getAtomProxy();for(let w=0;w<b;++w)u.eachWithin(v[w],m[w],y[w],a,(S,C)=>{if(S<=w||(_.index=g[w][0],x.index=g[S][0],c0(_,x,l)))return;const A=_.isMetal(),T=x.isMetal();if(!A&&!T)return;const[O,R]=A?[h[w],h[S]]:[h[S],h[w]];lot(O,R)&&(f.setBits(w,S),d.addContact(w,S,7))})}(e,n,t),function(i,o,s={}){const a=re(s.maxHydrophobicDist,sr.maxHydrophobicDist),l=re(s.masterModelIndex,sr.masterModelIndex),{features:c,spatialHash:u,contactStore:d,featureSet:f}=o,{types:h,centers:p,atomSets:g}=c,{x:v,y:m,z:y}=p,b=h.length,_=i.getAtomProxy(),x=i.getAtomProxy();for(let w=0;w<b;++w)u.eachWithin(v[w],m[w],y[w],a,(S,C)=>{var A,T;S<=w||(_.index=g[w][0],x.index=g[S][0],c0(_,x,l)||_.number===9&&x.number===9||_.connectedTo(x)||(A=h[w],T=h[S],A===8&&T===8&&(f.setBits(w,S),d.addContact(w,S,6))))})}(e,n,t),function(i,o,s={}){const a=re(s.maxHalogenBondDist,sr.maxHalogenBondDist),l=br(re(s.maxHalogenBondAngle,sr.maxHalogenBondAngle)),c=re(s.masterModelIndex,sr.masterModelIndex),{features:u,spatialHash:d,contactStore:f,featureSet:h}=o,{types:p,centers:g,atomSets:v}=u,{x:m,y,z:b}=g,_=p.length,x=i.getAtomProxy(),w=i.getAtomProxy();for(let S=0;S<_;++S)d.eachWithin(m[S],y[S],b[S],a,(C,A)=>{if(C<=S||(x.index=v[S][0],w.index=v[C][0],c0(x,w,c))||(T=p[S],O=p[C],!(T===7&&O===6||T===6&&O===7)))return;var T,O;const[R,L]=p[S]===6?[x,w]:[w,x],D=xw(R,L);if(D.length!==1||fot-D[0]>l)return;const $=xw(L,R);$.length!==0&&($.some(z=>hot-z>l)||(h.setBits(S,C),f.addContact(S,C,5)))})}(e,n,t);const r=function(i){const{index1:o,index2:s,count:a}=i.contactStore,l=Cre({nodeArray1:o,nodeArray2:s,edgeCount:a,nodeCount:i.featureSet.length}),c=new Jr(i.contactStore.count,!0);return Object.assign({adjacencyList:l,contactSet:c},i)}(n);return function(i,o,s={}){Je&&Ve.time("refineLineOfSight");const a=re(s.lineOfSightDistFactor,sr.lineOfSightDistFactor),l=re(s.masterModelIndex,sr.masterModelIndex),c=i.spatialHash,{contactSet:u,contactStore:d,features:f}=o,{index1:h,index2:p}=d,{centers:g,atomSets:v}=f,{x:m,y,z:b}=g,_=i.getAtomProxy(),x=i.getAtomProxy(),w=i.getAtomProxy(),S=new W,C=new W,A=3*a,T=a*a;u.forEach(O=>{S.set(m[h[O]],y[h[O]],b[h[O]]),C.set(m[p[O]],y[p[O]],b[p[O]]);const R=(S.x+C.x)/2,L=(S.y+C.y)/2,D=(S.z+C.z)/2,$=v[h[O]],z=v[p[O]];_.index=$[0],x.index=z[0],c.eachWithin(R,L,D,A,(H,B)=>{w.index=H,w.number!==1&&w.vdw*w.vdw*T>B&&!f7(_,w,l)&&!f7(x,w,l)&&!$.includes(H)&&!z.includes(H)&&S.distanceToSquared(w)>1&&C.distanceToSquared(w)>1&&(u.clear(O),Je&&Ve.log("removing",_.qualifiedName(),x.qualifiedName(),"because",w.qualifiedName()))})}),Je&&Ve.timeEnd("refineLineOfSight")}(e,r,t),function(i,o){const{contactSet:s,contactStore:a,features:l}=o,{type:c,index1:u,index2:d}=a,{atomSets:f}=l,h=i.getAtomProxy(),p=i.getAtomProxy(),g={},v=function(m,y,b){const[_,x]=g[b]||[1/0,-1];m<_?(x!==-1&&s.clear(x),g[b]=[m,y]):s.clear(y)};s.forEach(m=>{if(c[m]!==6)return;h.index=f[u[m]][0],p.index=f[d[m]][0];const y=h.distanceTo(p);v(y,m,`${h.index}|${p.residueIndex}`),v(y,m,`${p.index}|${h.residueIndex}`)})}(e,r),t.refineSaltBridges&&function(i,o){const{contactSet:s,contactStore:a,features:l}=o,{type:c,index1:u,index2:d}=a,{atomSets:f}=l,h={},p=function(g,v){h[g]||(h[g]=[]),h[g].push(v)};s.forEach(g=>{c[g]===1&&(f[u[g]].forEach(v=>p(v,g)),f[d[g]].forEach(v=>p(v,g)))}),s.forEach(g=>{if(!function(b){return b===4||b===9||b===10}(c[g]))return;const v=h[f[u[g]][0]],m=h[f[d[g]][0]];if(!v||!m)return;const y=v.length;for(let b=0;b<y;++b)if(m.includes(v[b]))return void s.clear(g)})}(0,r),function(i,o){const{contactSet:s,contactStore:a,features:l}=o,{type:c,index1:u,index2:d}=a,{atomSets:f}=l,h={},p=function(g,v){h[g]||(h[g]=[]),h[g].push(v)};s.forEach(g=>{c[g]===3&&(f[u[g]].forEach(v=>p(v,g)),f[d[g]].forEach(v=>p(v,g)))}),s.forEach(g=>{if(c[g]!==6&&c[g]!==2)return;const v=h[f[u[g]][0]],m=h[f[d[g]][0]];if(!v||!m)return;const y=v.length;for(let b=0;b<y;++b)if(m.includes(v[b]))return void s.clear(g)})}(0,r),function(i,o){const{contactSet:s,contactStore:a,features:l}=o,{type:c,index1:u,index2:d}=a,{atomSets:f}=l,h={},p=function(g,v){h[g]||(h[g]=[]),h[g].push(v)};s.forEach(g=>{c[g]===1&&(f[u[g]].forEach(v=>p(v,g)),f[d[g]].forEach(v=>p(v,g)))}),s.forEach(g=>{if(c[g]!==7)return;const v=h[f[u[g]][0]],m=h[f[d[g]][0]];if(!v||!m)return;const y=v.length;for(let b=0;b<y;++b)if(m.includes(v[b]))return void s.clear(v[b])})}(0,r),Je&&Ve.timeEnd("calculateContacts"),r}function got(e){switch(e){case 4:case 9:case 10:return"hydrogen bond";case 6:return"hydrophobic contact";case 5:return"halogen bond";case 1:return"ionic interaction";case 7:return"metal coordination";case 2:return"cation-pi interaction";case 3:return"pi-pi stacking";case 8:return"weak hydrogen bond";default:return"unknown contact"}}const vot={hydrogenBond:!0,hydrophobic:!0,halogenBond:!0,ionicInteraction:!0,metalCoordination:!0,cationPi:!0,piStacking:!0,weakHydrogenBond:!0,waterHydrogenBond:!0,backboneHydrogenBond:!0,radius:1,filterSele:""},Bl=new ht;function yot(e,t,n){const r=ns(n,vot),i=[];r.hydrogenBond&&i.push(4),r.hydrophobic&&i.push(6),r.halogenBond&&i.push(5),r.ionicInteraction&&i.push(1),r.metalCoordination&&i.push(7),r.cationPi&&i.push(2),r.piStacking&&i.push(3),r.weakHydrogenBond&&i.push(8),r.waterHydrogenBond&&i.push(9),r.backboneHydrogenBond&&i.push(10);const{features:o,contactSet:s,contactStore:a}=e,{centers:l,atomSets:c}=o,{x:u,y:d,z:f}=l,{index1:h,index2:p,type:g}=a,v=[],m=[],y=[],b=[],_=[];let x;return r.filterSele&&(x=Array.isArray(r.filterSele)?r.filterSele.map(w=>t.getAtomSet(new Xn(w))):t.getAtomSet(new Xn(r.filterSele))),s.forEach(w=>{const S=g[w];if(!i.includes(S))return;if(x){const T=c[h[w]][0],O=c[p[w]][0];if(Array.isArray(x)){if(!(x[0].isSet(T)&&x[1].isSet(O)||x[1].isSet(T)&&x[0].isSet(O)))return}else if(!x.isSet(T)&&!x.isSet(O))return}const C=h[w],A=p[w];v.push(u[C],d[C],f[C]),m.push(u[A],d[A],f[A]),y.push(...function(T){switch(T){case 4:case 9:case 10:return Bl.setHex(2851770).toArray();case 6:return Bl.setHex(8421504).toArray();case 5:return Bl.setHex(4259775).toArray();case 1:return Bl.setHex(15779860).toArray();case 7:return Bl.setHex(9191577).toArray();case 2:return Bl.setHex(16744448).toArray();case 3:return Bl.setHex(9220966).toArray();case 8:return Bl.setHex(12967404).toArray();default:return Bl.setHex(13421772).toArray()}}(S)),b.push(r.radius),_.push(w)}),{position1:new Float32Array(v),position2:new Float32Array(m),color:new Float32Array(y),color2:new Float32Array(y),radius:new Float32Array(b),picking:new xot(_,e,t)}}class Ml{constructor(t){this.array=t}get type(){return""}get data(){return{}}getIndex(t){return this.array?this.array[t]:t}getObject(t){return{}}_applyTransformations(t,n,r){return n&&t.applyMatrix4(n.matrix),r&&t.applyMatrix4(r.matrix),t}_getPosition(t){return new W}getPosition(t,n,r){return this._applyTransformations(this._getPosition(t),n,r)}}class ps extends Ml{constructor(t){super(),this.shape=t}get primitive(){}get data(){return this.shape}get type(){return this.primitive.type}getObject(t){return this.primitive.objectFromShape(this.shape,this.getIndex(t))}_getPosition(t){return this.primitive.positionFromShape(this.shape,this.getIndex(t))}}class Bh extends Ml{constructor(t,n){super(t),this.structure=n}get type(){return"atom"}get data(){return this.structure}getObject(t){return this.structure.getAtomProxy(this.getIndex(t))}_getPosition(t){return new W().copy(this.getObject(t))}}class bot extends Ml{constructor(t){super(),this.axes=t}get type(){return"axes"}get data(){return this.axes}getObject(){return{axes:this.axes}}_getPosition(){return this.axes.center.clone()}}class Lre extends Ml{constructor(t,n,r){super(t),this.structure=n,this.bondStore=r||n.bondStore}get type(){return"bond"}get data(){return this.structure}getObject(t){const n=this.structure.getBondProxy(this.getIndex(t));return n.bondStore=this.bondStore,n}_getPosition(t){const n=this.getObject(t);return new W().copy(n.atom1).add(n.atom2).multiplyScalar(.5)}}class xot extends Ml{constructor(t,n,r){super(t),this.contacts=n,this.structure=r}get type(){return"contact"}get data(){return this.contacts}getObject(t){const n=this.getIndex(t),{features:r,contactStore:i}=this.contacts,{centers:o,atomSets:s}=r,{x:a,y:l,z:c}=o,{index1:u,index2:d,type:f}=i,h=u[n],p=d[n];return{center1:new W(a[h],l[h],c[h]),center2:new W(a[p],l[p],c[p]),atom1:this.structure.getAtomProxy(s[h][0]),atom2:this.structure.getAtomProxy(s[p][0]),type:got(f[n])}}_getPosition(t){const{center1:n,center2:r}=this.getObject(t);return new W().addVectors(n,r).multiplyScalar(.5)}}class _ot extends Ml{constructor(t,n,r){super(t),this.validation=n,this.structure=r}get type(){return"clash"}get data(){return this.validation}getObject(t){const n=this.validation,r=this.getIndex(t);return{validation:n,index:r,clash:n.clashArray[r]}}_getAtomProxyFromSele(t){const n=new Xn(t),r=this.structure.getAtomIndices(n)[0];return this.structure.getAtomProxy(r)}_getPosition(t){const n=this.getObject(t).clash,r=this._getAtomProxyFromSele(n.sele1),i=this._getAtomProxyFromSele(n.sele2);return new W().copy(r).add(i).multiplyScalar(.5)}}class wot extends Lre{get type(){return"distance"}}class Sot extends Ml{get type(){return"ignore"}}class Cot extends ps{constructor(t,n){super(t),this.mesh=n}get type(){return"mesh"}getObject(){const t=this.mesh;return{shape:this.shape,name:t.name,serial:t.serial}}_getPosition(){return this.__position||(this.__position=zL(this.mesh.position)),this.__position}}class Aot extends Ml{constructor(t,n){super(t),this.surface=n}get type(){return"surface"}get data(){return this.surface}getObject(t){return{surface:this.surface,index:this.getIndex(t)}}_getPosition(){return this.surface.center.clone()}}class Pot extends Ml{constructor(t,n){super(),this.unitcell=t,this.structure=n}get type(){return"unitcell"}get data(){return this.unitcell}getObject(){return{unitcell:this.unitcell,structure:this.structure}}_getPosition(){return this.unitcell.getCenter(this.structure)}}class $re extends Ml{constructor(t,n){super(t),this.volume=n}get type(){return"volume"}get data(){return this.volume}getObject(t){const n=this.volume,r=this.getIndex(t);return{volume:n,index:r,value:n.data[r]}}_getPosition(t){const n=this.volume.position,r=this.getIndex(t);return new W(n[3*r],n[3*r+1],n[3*r+2])}}class Mot extends $re{get type(){return"slice"}}function Dre(){return new Uint32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0])}function Bre(){return new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1])}function aB(e,t,n,r,i){var o,s,a,l,c,u,d,f=[[0,4,4,4,2,0,0,0,2,2,0,0],[4,0,4,4,0,8,0,0,0,8,8,0],[4,4,0,4,0,0,8,0,0,0,8,8],[4,4,4,0,0,0,0,1,1,0,0,1],[2,0,0,0,0,8,8,8,2,2,0,0],[0,8,0,0,8,0,8,8,0,8,8,0],[0,0,8,0,8,8,0,8,0,0,8,8],[0,0,0,1,8,8,8,0,1,0,0,1],[2,0,0,1,2,0,0,1,0,2,0,1],[2,8,0,0,2,8,0,0,2,0,8,0],[0,8,8,0,0,8,8,0,0,8,0,8],[0,0,8,1,0,0,8,1,1,0,8,0]],h=0,p=!1,g=!1,v=!1,m=!1,y=-1,b=t*n*r,_=t,x=t*n,w=new Int32Array(12),S=[],C=[],A=[],T=[],O=Dre(),R=Bre();function L(K,ie,ce){return K+(ie-K)*ce}function D(K,ie,ce){return x*(ce=(ce+d)%r)+_*(ie=(ie+u)%n)+(K=(K+c)%t)}function $(K,ie,ce,pe,se,G,he){var Z=3*K;if(s[Z]<0){var ae=(h-G)/(he-G),oe=o,te=3*a;if(S[te]=ce+ae,S[te+1]=pe,S[te+2]=se,!p){var ve=3*K;C[te]=y*L(oe[ve],oe[ve+3],ae),C[te+1]=y*L(oe[ve+1],oe[ve+4],ae),C[te+2]=y*L(oe[ve+2],oe[ve+5],ae)}i&&(T[a]=i[K+Math.round(ae)]),s[Z]=a,w[ie]=a,a+=1}else w[ie]=s[Z]}function z(K,ie,ce,pe,se,G,he){var Z=3*K+1;if(s[Z]<0){var ae=(h-G)/(he-G),oe=o,te=3*a;if(S[te]=ce,S[te+1]=pe+ae,S[te+2]=se,!p){var ve=3*K,ne=ve+3*_;C[te]=y*L(oe[ve],oe[ne],ae),C[te+1]=y*L(oe[ve+1],oe[ne+1],ae),C[te+2]=y*L(oe[ve+2],oe[ne+2],ae)}i&&(T[a]=i[K+Math.round(ae)*_]),s[Z]=a,w[ie]=a,a+=1}else w[ie]=s[Z]}function H(K,ie,ce,pe,se,G,he){var Z=3*K+2;if(s[Z]<0){var ae=(h-G)/(he-G),oe=o,te=3*a;if(S[te]=ce,S[te+1]=pe,S[te+2]=se+ae,!p){var ve=3*K,ne=ve+3*x;C[te]=y*L(oe[ve],oe[ne],ae),C[te+1]=y*L(oe[ve+1],oe[ne+1],ae),C[te+2]=y*L(oe[ve+2],oe[ne+2],ae)}i&&(T[a]=i[K+Math.round(ae)*x]),s[Z]=a,w[ie]=a,a+=1}else w[ie]=s[Z]}function B(K){var ie=3*K;o[ie]===0&&(o[ie]=e[(K-1+b)%b]-e[(K+1)%b],o[ie+1]=e[(K-_+b)%b]-e[(K+_)%b],o[ie+2]=e[(K-x+b)%b]-e[(K+x)%b])}function V(K,ie,ce,pe,se){var G,he,Z,ae,oe,te,ve;v?(pe=D(K,ie,ce),G=D(K+1,ie,ce),he=D(K,ie+1,ce),Z=D(K,ie,ce+1),ae=D(K+1,ie+1,ce),oe=D(K+1,ie,ce+1),te=D(K,ie+1,ce+1),ve=D(K+1,ie+1,ce+1)):(G=pe+1,ae=(he=pe+_)+1,oe=(Z=pe+x)+1,ve=(te=he+x)+1);var ne=0,xe=e[pe],Ce=e[G],me=e[he],X=e[ae],Q=e[Z],Re=e[oe],Pe=e[te],le=e[ve];xe<h&&(ne|=1),Ce<h&&(ne|=2),me<h&&(ne|=8),X<h&&(ne|=4),Q<h&&(ne|=16),Re<h&&(ne|=32),Pe<h&&(ne|=128),le<h&&(ne|=64);var Oe=O[ne];if(Oe===0)return 0;var Be=K+1,De=ie+1,Ee=ce+1;1&Oe&&(p||(B(pe),B(G)),$(pe,0,K,ie,ce,xe,Ce)),2&Oe&&(p||(B(G),B(ae)),z(G,1,Be,ie,ce,Ce,X)),4&Oe&&(p||(B(he),B(ae)),$(he,2,K,De,ce,me,X)),8&Oe&&(p||(B(pe),B(he)),z(pe,3,K,ie,ce,xe,me)),16&Oe&&(p||(B(Z),B(oe)),$(Z,4,K,ie,Ee,Q,Re)),32&Oe&&(p||(B(oe),B(ve)),z(oe,5,Be,ie,Ee,Re,le)),64&Oe&&(p||(B(te),B(ve)),$(te,6,K,De,Ee,Pe,le)),128&Oe&&(p||(B(Z),B(te)),z(Z,7,K,ie,Ee,Q,Pe)),256&Oe&&(p||(B(pe),B(Z)),H(pe,8,K,ie,ce,xe,Q)),512&Oe&&(p||(B(G),B(oe)),H(G,9,Be,ie,ce,Ce,Re)),1024&Oe&&(p||(B(ae),B(ve)),H(ae,10,Be,De,ce,X,le)),2048&Oe&&(p||(B(he),B(te)),H(he,11,K,De,ce,me,Pe));for(var Ie,U,E,P=ne<<4,ee=0;R[P+ee]!==-1;)Ie=R[P+ee],U=R[P+ee+1],E=R[P+ee+2],g?(f[Ie][U]&se&&(A[l++]=w[Ie],A[l++]=w[U]),f[U][E]&se&&(A[l++]=w[U],A[l++]=w[E]),f[Ie][E]&se&&(A[l++]=w[Ie],A[l++]=w[E])):(A[l++]=w[m?Ie:U],A[l++]=w[m?U:Ie],A[l++]=w[E]),ee+=3}function J(K,ie,ce,pe,se,G){let he,Z,ae,oe,te,ve,ne,xe,Ce,me,X,Q,Re;if(K=K!==void 0?K:0,ie=ie!==void 0?ie:0,ce=ce!==void 0?ce:0,pe=pe!==void 0?pe:t-1,se=se!==void 0?se:n-1,G=G!==void 0?G:r-1,v||(p?(K=Math.max(0,K),ie=Math.max(0,ie),ce=Math.max(0,ce),pe=Math.min(t-1,pe),se=Math.min(n-1,se),G=Math.min(r-1,G)):(K=Math.max(1,K),ie=Math.max(1,ie),ce=Math.max(1,ce),pe=Math.min(t-2,pe),se=Math.min(n-2,se),G=Math.min(r-2,G))),v)for(xe=K-2,Ce=ie-2,me=ce-2,X=pe+2,Q=se+2,Re=G+2,te=me;te<Re;++te)for(oe=Ce;oe<Q;++oe)for(ae=xe;ae<X;++ae)Z=3*D(ae,oe,te),s[Z]=-1,s[Z+1]=-1,s[Z+2]=-1;else for(xe=Math.max(0,K-2),Ce=Math.max(0,ie-2),me=Math.max(0,ce-2),X=Math.min(t,pe+2),Q=Math.min(n,se+2),Re=Math.min(r,G+2),te=me;te<Re;++te)for(ne=x*te,oe=Ce;oe<Q;++oe)for(ve=ne+_*oe,ae=xe;ae<X;++ae)he=3*(ve+ae),s[he]=-1,s[he+1]=-1,s[he+2]=-1;if(!v){var Pe,le=K,Oe=ie,Be=ce,De=pe,Ee=se,Ie=G;for(Pe=!1,te=ce;te<G;++te){for(oe=ie;oe<se;++oe){for(ae=K;ae<pe;++ae)if(he=t*n*te+t*oe+ae,e[he]>=h){Be=te,Pe=!0;break}if(Pe)break}if(Pe)break}for(Pe=!1,oe=ie;oe<se;++oe){for(te=Be;te<G;++te){for(ae=K;ae<pe;++ae)if(he=t*n*te+t*oe+ae,e[he]>=h){Oe=oe,Pe=!0;break}if(Pe)break}if(Pe)break}for(Pe=!1,ae=K;ae<pe;++ae){for(oe=Oe;oe<se;++oe){for(te=Be;te<G;++te)if(he=t*n*te+t*oe+ae,e[he]>=h){le=ae,Pe=!0;break}if(Pe)break}if(Pe)break}for(Pe=!1,te=G;te>=ce;--te){for(oe=se;oe>=ie;--oe){for(ae=pe;ae>=K;--ae)if(he=t*n*te+t*oe+ae,e[he]>=h){Ie=te,Pe=!0;break}if(Pe)break}if(Pe)break}for(Pe=!1,oe=se;oe>=ie;--oe){for(te=Ie;te>=ce;--te){for(ae=pe;ae>=K;--ae)if(he=t*n*te+t*oe+ae,e[he]>=h){Ee=oe,Pe=!0;break}if(Pe)break}if(Pe)break}for(Pe=!1,ae=pe;ae>=K;--ae){for(oe=Ee;oe>=ie;--oe){for(te=Ie;te>=ce;--te)if(he=t*n*te+t*oe+ae,e[he]>=h){De=ae,Pe=!0;break}if(Pe)break}if(Pe)break}p?(K=Math.max(0,le-1),ie=Math.max(0,Oe-1),ce=Math.max(0,Be-1),pe=Math.min(t-1,De+1),se=Math.min(n-1,Ee+1),G=Math.min(r-1,Ie+1)):(K=Math.max(1,le-1),ie=Math.max(1,Oe-1),ce=Math.max(1,Be-1),pe=Math.min(t-2,De+1),se=Math.min(n-2,Ee+1),G=Math.min(r-2,Ie+1))}var U=15;for(te=ce;te<G;++te,U&=-5)for(ne=x*te,U|=2,oe=ie;oe<se;++oe,U&=-3)for(ve=ne+_*oe,U|=1,ae=K;ae<pe;++ae,U&=-2)he=ve+ae,V(ae,oe,te,he,U)}this.triangulate=function(K,ie,ce,pe,se){m=(h=K)<0,g=pe,v=se,(p=ie||g)||(y=h>0?-1:1,o||(o=new Float32Array(3*b)));var G=3*b;if(s&&s.length===G||(s=new Int32Array(G)),a=0,l=0,ce!==void 0){var he=ce[0].map(Math.round),Z=ce[1].map(Math.round);c=t*Math.ceil(Math.abs(he[0])/t),u=n*Math.ceil(Math.abs(he[1])/n),d=r*Math.ceil(Math.abs(he[2])/r),J(he[0],he[1],he[2],Z[0],Z[1],Z[2])}else c=u=d=0,J();return S.length=3*a,p||(C.length=3*a),A.length=l,i&&(T.length=a),{position:new Float32Array(S),normal:p?void 0:new Float32Array(C),index:bl(A,S.length/3),atomindex:i?new Int32Array(T):void 0,contour:g}}}hs.add("arrow",class extends ps{get primitive(){return NE}}),hs.add("box",class extends ps{get primitive(){return ch}}),hs.add("cone",class extends ps{get primitive(){return FE}}),hs.add("cylinder",class extends ps{get primitive(){return uh}}),hs.add("ellipsoid",class extends ps{get primitive(){return kg}}),hs.add("octahedron",class extends ps{get primitive(){return DE}}),hs.add("sphere",class extends ps{get primitive(){return Rg}}),hs.add("tetrahedron",class extends ps{get primitive(){return BE}}),hs.add("torus",class extends ps{get primitive(){return zE}}),hs.add("point",class extends ps{get primitive(){return Ub}}),hs.add("wideline",class extends ps{get primitive(){return Vb}}),Object.assign(aB,{__deps:[Dre,Bre,bl]});class bn{constructor(t,n){this.cols=t,this.rows=n,this.size=this.cols*this.rows,this.data=new Float32Array(this.size)}copyTo(t){t.data.set(this.data)}}function oa(e,t){let n=0,r=0;const i=t.rows,o=t.cols;let s=0,a=0,l=0;const c=t.data,u=e.data;for(;n<i;a+=1,s+=o,n++)for(l=a,r=0;r<o;l+=i,r++)u[l]=c[s+r]}function PS(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0,c=0;const u=t.cols,d=t.rows,f=n.rows,h=t.data,p=n.data,g=e.data;let v=0;for(;r<d;s+=u,r++)for(l=0,i=0;i<f;c++,i++){for(a=s,v=0,o=0;o<u;a++,l++,o++)v+=h[a]*p[l];g[c]=v}}function WO(e,t,n){const r=e.data,i=t.data,o=n.data,s=i[0],a=i[1],l=i[2],c=i[3],u=i[4],d=i[5],f=i[6],h=i[7],p=i[8],g=o[0],v=o[1],m=o[2],y=o[3],b=o[4],_=o[5],x=o[6],w=o[7],S=o[8];r[0]=s*g+a*y+l*x,r[1]=s*v+a*b+l*w,r[2]=s*m+a*_+l*S,r[3]=c*g+u*y+d*x,r[4]=c*v+u*b+d*w,r[5]=c*m+u*_+d*S,r[6]=f*g+h*y+p*x,r[7]=f*v+h*b+p*w,r[8]=f*m+h*_+p*S}function VL(e){const t=e.rows,n=e.cols,r=e.data,i=new Array(n);for(let o=0;o<n;++o)i[o]=0;for(let o=0,s=0;o<t;++o)for(let a=0;a<n;++a,++s)i[a]+=r[s];for(let o=0;o<n;++o)i[o]/=t;return i}function HL(e,t){const n=e.rows,r=e.cols,i=e.data;for(let o=0,s=0;o<n;++o)for(let a=0;a<r;++a,++s)i[s]-=t[a]}function qO(e,t,n,r){r=e[t],e[t]=e[n],e[n]=r}function Eot(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?(t/=e,e*Math.sqrt(1+t*t)):t>0?(e/=t,t*Math.sqrt(1+e*e)):0}const Tot=1192092896e-16,Oot=1e-37;function Nre(e,t,n,r){let i=0,o=0;const s=e.rows,a=e.cols;let l=s,c=a;l<c&&(i=1,o=l,l=c,c=o);const u=new bn(l,l),d=new bn(1,c),f=new bn(c,c);if(i===0)oa(u,e);else{for(o=0;o<a*s;o++)u.data[o]=e.data[o];for(;o<c*l;o++)u.data[o]=0}if(function(h,p,g,v,m,y,b,_){const x=2*Tot,w=Oot;let S=0,C=0,A=0,T=0;const O=Math.max(y,30);let R=0,L=0,D=0,$=0,z=0,H=0,B=0,V=0,J=0,K=0,ie=0,ce=0,pe=0,se=0,G=0,he=0,Z=0,ae=4660,oe=0,te=0,ve=0;const ne=new Float64Array(b<<3);for(;S<b;S++){for(A=0,ie=0;A<y;A++)V=h[S*p+A],ie+=V*V;if(ne[S]=ie,v){for(A=0;A<b;A++)v[S*m+A]=0;v[S*m+S]=1}}for(;T<O;T++){for(z=0,S=0;S<b-1;S++)for(C=S+1;C<b;C++){for(R=S*p|0,L=C*p|0,G=ne[S],he=0,Z=ne[C],A=2,he+=h[R]*h[L],he+=h[R+1]*h[L+1];A<y;A++)he+=h[R+A]*h[L+A];if(!(Math.abs(he)<=x*Math.sqrt(G*Z))){for(he*=2,ce=G-Z,pe=Eot(he,ce),ce<0?(se=.5*(pe-ce),B=Math.sqrt(se/pe),H=he/(pe*B*2)):(H=Math.sqrt((pe+ce)/(2*pe)),B=he/(pe*H*2)),G=0,Z=0,A=2,J=H*h[R]+B*h[L],K=-B*h[R]+H*h[L],h[R]=J,h[L]=K,G+=J*J,Z+=K*K,J=H*h[R+1]+B*h[L+1],K=-B*h[R+1]+H*h[L+1],h[R+1]=J,h[L+1]=K,G+=J*J,Z+=K*K;A<y;A++)J=H*h[R+A]+B*h[L+A],K=-B*h[R+A]+H*h[L+A],h[R+A]=J,h[L+A]=K,G+=J*J,Z+=K*K;if(ne[S]=G,ne[C]=Z,z=1,v)for(D=S*m|0,$=C*m|0,A=2,J=H*v[D]+B*v[$],K=-B*v[D]+H*v[$],v[D]=J,v[$]=K,J=H*v[D+1]+B*v[$+1],K=-B*v[D+1]+H*v[$+1],v[D+1]=J,v[$+1]=K;A<b;A++)J=H*v[D+A]+B*v[$+A],K=-B*v[D+A]+H*v[$+A],v[D+A]=J,v[$+A]=K}}if(z===0)break}for(S=0;S<b;S++){for(A=0,ie=0;A<y;A++)V=h[S*p+A],ie+=V*V;ne[S]=Math.sqrt(ie)}for(S=0;S<b-1;S++){for(C=S,A=S+1;A<b;A++)ne[C]<ne[A]&&(C=A);if(S!==C&&(qO(ne,S,C,ie),v)){for(A=0;A<y;A++)qO(h,S*p+A,C*p+A,V);for(A=0;A<b;A++)qO(v,S*m+A,C*m+A,V)}}for(S=0;S<b;S++)g[S]=ne[S];if(v)for(S=0;S<_;S++){for(ie=S<b?ne[S]:0;ie<=w;){for(te=1/y,A=0;A<y;A++)ae=214013*ae+2531011,oe=256&ae>>16?te:-te,h[S*p+A]=oe;for(T=0;T<2;T++)for(C=0;C<S;C++){for(ie=0,A=0;A<y;A++)ie+=h[S*p+A]*h[C*p+A];for(ve=0,A=0;A<y;A++)V=h[S*p+A]-ie*h[C*p+A],h[S*p+A]=V,ve+=Math.abs(V);for(ve=ve?1/ve:0,A=0;A<y;A++)h[S*p+A]*=ve}for(ie=0,A=0;A<y;A++)V=h[S*p+A],ie+=V*V;ie=Math.sqrt(ie)}for(B=1/ie,A=0;A<y;A++)h[S*p+A]*=B}}(u.data,l,d.data,f.data,c,l,c,l),t){for(o=0;o<c;o++)t.data[o]=d.data[o];for(;o<a;o++)t.data[o]=0}i===0?(n&&oa(n,u),r&&oa(r,f)):(n&&oa(n,f),r&&oa(r,u))}function H0(){return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function xm(e,t,n,r,i,o,s,a,l,c,u,d,f,h,p,g,v){e[0]=t,e[4]=n,e[8]=r,e[12]=i,e[1]=o,e[5]=s,e[9]=a,e[13]=l,e[2]=c,e[6]=u,e[10]=d,e[14]=f,e[3]=h,e[7]=p,e[11]=g,e[15]=v}function MS(e,t,n){const r=t[0],i=t[4],o=t[8],s=t[12],a=t[1],l=t[5],c=t[9],u=t[13],d=t[2],f=t[6],h=t[10],p=t[14],g=t[3],v=t[7],m=t[11],y=t[15],b=n[0],_=n[4],x=n[8],w=n[12],S=n[1],C=n[5],A=n[9],T=n[13],O=n[2],R=n[6],L=n[10],D=n[14],$=n[3],z=n[7],H=n[11],B=n[15];e[0]=r*b+i*S+o*O+s*$,e[4]=r*_+i*C+o*R+s*z,e[8]=r*x+i*A+o*L+s*H,e[12]=r*w+i*T+o*D+s*B,e[1]=a*b+l*S+c*O+u*$,e[5]=a*_+l*C+c*R+u*z,e[9]=a*x+l*A+c*L+u*H,e[13]=a*w+l*T+c*D+u*B,e[2]=d*b+f*S+h*O+p*$,e[6]=d*_+f*C+h*R+p*z,e[10]=d*x+f*A+h*L+p*H,e[14]=d*w+f*T+h*D+p*B,e[3]=g*b+v*S+m*O+y*$,e[7]=g*_+v*C+m*R+y*z,e[11]=g*x+v*A+m*L+y*H,e[15]=g*w+v*T+m*D+y*B}function GL(e,t,n,r){xm(e,t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1)}function WL(e,t,n,r){xm(e,1,0,0,t,0,1,0,n,0,0,1,r,0,0,0,1)}function qL(e,t){const n=Math.cos(t),r=Math.sin(t);xm(e,n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1)}function Fre(){return new Float32Array([1,0,0,0,1,0,0,0,1])}function lB(e,t){const n=Vt([t[0],t[1],t[2]]),r=Vt([t[4],t[5],t[6]]),i=Vt([t[8],t[9],t[10]]),o=Vt();Ao(o,r,i),e[0]=o[0],e[1]=o[1],e[2]=o[2],Ao(o,i,n),e[3]=o[0],e[4]=o[1],e[5]=o[2],Ao(o,n,r),e[6]=o[0],e[7]=o[1],e[8]=o[2]}function cB(e,t,n,r){n=n||1,r=r||!0;const i=e.length/3,o=t.length/3;let s;r&&(s=new Float32Array(3*i));const a=new Float32Array(3*i);let l;const c=new Array(20);for(l=0;l<20;++l)c[l]=new Uint32Array(i);for(l=0;l<i;++l)c[0][l]=0;let u,d,f;for(l=0;l<o;++l){var h=3*l,p=3*l+1,g=3*l+2;for(f=!0,u=0,d=c[0][t[h]];u<d;++u)if(t[p]===c[u+1][t[h]]){f=!1;break}for(f&&(c[0][t[h]]++,c[c[0][t[h]]][t[h]]=t[p]),f=!0,u=0,d=c[0][t[h]];u<d;++u)if(t[g]===c[u+1][t[h]]){f=!1;break}for(f&&(c[0][t[h]]++,c[c[0][t[h]]][t[h]]=t[g]),f=!0,u=0,d=c[0][t[p]];u<d;++u)if(t[h]===c[u+1][t[p]]){f=!1;break}for(f&&(c[0][t[p]]++,c[c[0][t[p]]][t[p]]=t[h]),f=!0,u=0,d=c[0][t[p]];u<d;++u)if(t[g]===c[u+1][t[p]]){f=!1;break}for(f&&(c[0][t[p]]++,c[c[0][t[p]]][t[p]]=t[g]),f=!0,u=0;u<c[0][t[g]];++u)if(t[h]===c[u+1][t[g]]){f=!1;break}for(f&&(c[0][t[g]]++,c[c[0][t[g]]][t[g]]=t[h]),f=!0,u=0,d=c[0][t[g]];u<d;++u)if(t[p]===c[u+1][t[g]]){f=!1;break}f&&(c[0][t[g]]++,c[c[0][t[g]]][t[g]]=t[p])}for(var v,m,y,b,_,x=.5,w=.75/4.5,S=0;S<n;++S){for(l=0;l<i;++l)if(v=3*l,(y=c[0][l])<3)a[v]=e[v],a[v+1]=e[v+1],a[v+2]=e[v+2];else if(y===3||y===4){for(a[v]=0,a[v+1]=0,a[v+2]=0,u=0;u<y;++u)m=3*c[u+1][l],a[v]+=e[m],a[v+1]+=e[m+1],a[v+2]+=e[m+2];a[v]+=x*e[v],a[v+1]+=x*e[v+1],a[v+2]+=x*e[v+2],_=x+y,a[v]/=_,a[v+1]/=_,a[v+2]/=_}else{for(a[v]=0,a[v+1]=0,a[v+2]=0,u=0;u<y;++u)m=3*c[u+1][l],a[v]+=e[m],a[v+1]+=e[m+1],a[v+2]+=e[m+2];a[v]+=1*e[v],a[v+1]+=1*e[v+1],a[v+2]+=1*e[v+2],b=1+y,a[v]/=b,a[v+1]/=b,a[v+2]/=b}if(e.set(a),r){Gb(e,t,s);var C=3*i;for(v=0;v<C;v+=3)e[v]+=-1*w*s[v],e[v+1]+=-1*w*s[v+1],e[v+2]+=-1*w*s[v+2]}}}function Gb(e,t,n){var r,i;if(n===void 0)n=new Float32Array(e.length);else for(r=0,i=n.length;r<i;r++)n[r]=0;var o=new Float32Array(3),s=new Float32Array(3),a=new Float32Array(3),l=new Float32Array(3),c=new Float32Array(3);if(t)for(r=0,i=t.length;r<i;r+=3){var u=3*t[r],d=3*t[r+1],f=3*t[r+2];Hi(o,e,u),Hi(s,e,d),Hi(a,e,f),ur(l,a,s),ur(c,o,s),Ao(l,l,c),n[u]+=l[0],n[u+1]+=l[1],n[u+2]+=l[2],n[d]+=l[0],n[d+1]+=l[1],n[d+2]+=l[2],n[f]+=l[0],n[f+1]+=l[1],n[f+2]+=l[2]}else for(r=0,i=e.length;r<i;r+=9)Hi(o,e,r),Hi(s,e,r+3),Hi(a,e,r+6),ur(l,a,s),ur(c,o,s),Ao(l,l,c),n[r]=l[0],n[r+1]=l[1],n[r+2]=l[2],n[r+3]=l[0],n[r+4]=l[1],n[r+5]=l[2],n[r+6]=l[0],n[r+7]=l[1],n[r+8]=l[2];return xre(n),n}function zre(e){for(var t={},n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function Wb(e,t,n,r,i){var o=1/r*3;wre(e,e,i+(o+=n)),AS(t,t,i+o),On(e,e,r),jL(e,e),Qp(e,e,r),On(t,t,r),U0(t,t),Qp(t,t,r);var s=new Float32Array(3);ur(s,t,e),On(s,s,r),U0(s,s),AS(s,s,1);var a=256*Math.pow(10,6),l=s[0]*s[1]*s[2]*3;a<=l&&(On(e,e,r*=Math.pow(a/l,1/3)),jL(e,e),Qp(e,e,r),On(t,t,r),U0(t,t),Qp(t,t,r),ur(s,t,e),On(s,s,r),U0(s,s),AS(s,s,1));var c=new Float32Array(e);$E(c,c);var u=H0(),d=H0();qL(d,br(90)),MS(u,u,d);var f=H0();GL(f,-1/r,1/r,1/r),MS(u,u,f);var h=H0();return WL(h,-r*c[2],-r*c[1],-r*c[0]),MS(u,u,h),{dim:s,tran:c,matrix:u,scaleFactor:r}}GL.__deps=[xm],WL.__deps=[xm],qL.__deps=[xm],lB.__deps=[Vt,Ao],Object.assign(cB,{__deps:[Gb]}),Object.assign(Gb,{__deps:[ur,Ao,Hi,xre]}),Object.assign(Wb,{__deps:[br,wre,AS,Qp,On,jL,U0,ur,$E,H0,MS,WL,GL,qL]});class jE{constructor(t,n,r){this.name=t||"",this.path=n||"",this.info={},this.center=new W,this.boundingBox=new zn,r instanceof Ft||r instanceof wt||r instanceof Tn?this.fromGeometry(r):r&&(this.set(r.position,r.index,r.normal,r.color,r.atomindex,r.contour),this.boundingBox.setFromArray(r.position),this.boundingBox.getCenter(this.center))}get type(){return"Surface"}set(t,n,r,i,o,s=!1){this.position=t,this.index=n,this.normal=r,this.color=i,this.atomindex=o,this.size=t.length/3,this.contour=s}fromGeometry(t){let n,r,i,o;if(Je&&Ve.time("GeometrySurface.fromGeometry"),t instanceof Ft?(t.computeVertexNormals(!0),n=new wt().fromGeometry(t)):n=t instanceof wt?t:t[0],n.boundingBox||n.computeBoundingBox(),this.boundingBox.copy(n.boundingBox),this.boundingBox.getCenter(this.center),n instanceof wt){const s=n.attributes,a=!!s.normal&&s.normal.array;(!a||a[0]===0&&a[1]===0&&a[2]===0)&&n.computeVertexNormals(),r=s.position.array,i=s.index?s.index.array:null,o=s.normal.array}this.set(r,i,o,void 0,void 0),Je&&Ve.timeEnd("GeometrySurface.setGeometry")}getPosition(){return this.position}getColor(t){const n=t||{};n.surface=this;const r=this.size,i=new Float32Array(3*r),o=Qt.getScheme(n);if(o.volumeColor||n.scheme==="random")for(let a=0;a<r;++a)o.volumeColorToArray(a,i,3*a);else if(o.positionColor){const a=new W,l=this.position;for(let c=0;c<r;++c){var s=3*c;a.set(l[s],l[s+1],l[s+2]),o.positionColorToArray(a,i,s)}}else if(o.atomColor&&this.atomindex){const a=n.structure.getAtomProxy(),l=this.atomindex;for(let c=0;c<r;++c)a.index=l[c],o.atomColorToArray(a,i,3*c)}else{const a=new ht(n.value);En(r,a.r,a.g,a.b,i)}return i}getPicking(t){return this.atomindex&&t?new Bh(this.atomindex,t):new Aot(gv(this.size),this)}getNormal(){return this.normal}getSize(t,n){return rs(this.size,t*n)}getIndex(){return this.index}getFilteredIndex(t,n){if(t&&this.atomindex){const r=new Xn(t),i=n.getAtomSet(r),o=[],s=this.atomindex,a=this.index,l=a.length,c=this.contour?2:3;let u=0;for(let d=0;d<l;d+=c){let f=!0;for(let h=0;h<c;h++){const p=s[a[d+h]];if(!i.get(p)){f=!1;break}}if(f)for(let h=0;h<c;h++,u++)o[u]=a[d+h]}return bl(o,this.position.length/3)}return this.index}getAtomindex(){return this.atomindex}dispose(){}}function $u(e,t,n,r,i){var o=new aB(e,t,n,r,i);this.getSurface=function(s,a,l,c,u,d=!1){const f=o.triangulate(s,a,l,u,d);if(a&&!u&&(cB(f.position,f.index,a,!0),f.normal=Gb(f.position,f.index)),c&&(LE(c,f.position),f.normal)){const h=Fre();lB(h,c),sB(h,f.normal)}return f}}Object.assign($u,{__deps:[cB,Gb,aB,LE,sB,Fre,lB]}),by.add("surf",function(e,t){const n=e.data.args,r=e.data.params;if(n&&(self.volsurf=new $u(n[0],n[1],n[2],n[3],n[4])),r){const i=self.volsurf.getSurface(r.isolevel,r.smooth,r.box,r.matrix,r.contour,r.wrap),o=[i.position.buffer,i.index.buffer];i.normal&&o.push(i.normal.buffer),i.atomindex&&o.push(i.atomindex.buffer),t({sd:i,p:r},o)}},[$u]);class ao{constructor(t,n,r,i,o,s,a){this.name=t,this.path=n,this.matrix=new lt,this.normalMatrix=new Si,this.inverseMatrix=new lt,this.center=new W,this.boundingBox=new zn,this.setData(r,i,o,s,a)}get type(){return"Volume"}setData(t,n,r,i,o){this.nx=n||1,this.ny=r||1,this.nz=i||1,this.data=t||new Float32Array(1),this.setAtomindex(o),this._position=new Float32Array,delete this._min,delete this._max,delete this._mean,delete this._rms,this.worker&&this.worker.terminate()}setStats(t,n,r,i){this._min=t,this._max=n,this._mean=r,this._rms=i}setMatrix(t){this.matrix.copy(t);const n=this.boundingBox,r=this.center,i=this.nx-1,o=this.ny-1,s=this.nz-1;n.makeEmpty(),n.expandByPoint(r.set(i,o,s)),n.expandByPoint(r.set(i,o,0)),n.expandByPoint(r.set(i,0,s)),n.expandByPoint(r.set(i,0,0)),n.expandByPoint(r.set(0,o,s)),n.expandByPoint(r.set(0,0,s)),n.expandByPoint(r.set(0,o,0)),n.expandByPoint(r.set(0,0,0)),n.applyMatrix4(this.matrix),n.getCenter(this.center);const a=this.matrix.elements,l=new W(a[0],a[1],a[2]),c=new W(a[4],a[5],a[6]),u=new W(a[8],a[9],a[10]),d=new W,f=this.normalMatrix.elements;d.crossVectors(c,u),f[0]=d.x,f[1]=d.y,f[2]=d.z,d.crossVectors(u,l),f[3]=d.x,f[4]=d.y,f[5]=d.z,d.crossVectors(l,c),f[6]=d.x,f[7]=d.y,f[8]=d.z,this.inverseMatrix.getInverse(this.matrix)}setAtomindex(t){this.atomindex=t}getBox(t,n,r){return r||(r=new zn),r.set(t,t),r.expandByScalar(n),r.applyMatrix4(this.inverseMatrix),r.min.round(),r.max.round(),r}_getBox(t,n){if(!t||!n)return;this.__box||(this.__box=new zn);const r=this.getBox(t,n,this.__box);return[r.min.toArray(),r.max.toArray()]}_makeSurface(t,n,r){const i=this.name+"@"+n.toPrecision(2),o=new jE(i,"",t);return o.info.isolevel=n,o.info.smooth=r,o.info.volume=this,o}getSurface(t,n,r,i,o,s=!1){t=isNaN(t)?this.getValueForSigma(2):t,n=re(n,0),this.volsurf===void 0&&(this.volsurf=new $u(this.data,this.nx,this.ny,this.nz,this.atomindex));const a=this._getBox(r,i),l=this.volsurf.getSurface(t,n,a,this.matrix.elements,o,s);return this._makeSurface(l,t,n)}getSurfaceWorker(t,n,r,i,o,s,a){if(t=isNaN(t)?this.getValueForSigma(2):t,n=n||0,window.hasOwnProperty("Worker")){this.workerPool===void 0&&(this.workerPool=new FL("surf",2));const l={},c=this.workerPool.getNextWorker();c.postCount===0&&Object.assign(l,{args:[this.data,this.nx,this.ny,this.nz,this.atomindex]}),Object.assign(l,{params:{isolevel:t,smooth:n,box:this._getBox(r,i),matrix:this.matrix.elements,contour:o,wrap:s}}),c.post(l,void 0,u=>{const d=u.data.sd,f=u.data.p;a(this._makeSurface(d,f.isolevel,f.smooth))},u=>{console.warn("Volume.getSurfaceWorker error - trying without worker",u);const d=this.getSurface(t,n,r,i,o,s);a(d)})}else{const l=this.getSurface(t,n,r,i,o,s);a(l)}}getValueForSigma(t){return this.mean+re(t,2)*this.rms}getSigmaForValue(t){return(re(t,0)-this.mean)/this.rms}get position(){if(!this._position){const t=this.nz,n=this.ny,r=this.nx,i=new Float32Array(r*n*t*3);let o=0;for(let s=0;s<t;++s)for(let a=0;a<n;++a)for(let l=0;l<r;++l)i[o+0]=l,i[o+1]=a,i[o+2]=s,o+=3;LE(this.matrix.elements,i),this._position=i}return this._position}getDataAtomindex(){return this.atomindex}getDataPosition(){return this.position}getDataColor(t){const n=t||{};n.volume=this,n.scale=n.scale||"Spectral",n.domain=n.domain||[this.min,this.max];const r=Qt.getScheme(n),i=this.position.length/3,o=new Float32Array(3*i);for(let s=0;s<i;++s)r.volumeColorToArray(s,o,3*s);return o}getDataPicking(){const t=gv(this.position.length/3);return new $re(t,this)}getDataSize(t,n){const r=this.data,i=this.position.length/3;let o;switch(t){case"value":case"deviation":o=new Float32Array(r);break;case"abs-value":o=new Float32Array(r);for(let s=0;s<i;++s)o[s]=Math.abs(o[s]);break;case"value-min":{o=new Float32Array(r);const s=this.min;for(let a=0;a<i;++a)o[a]-=s;break}default:o=rs(i,t)}if(n!==1)for(let s=0;s<i;++s)o[s]*=n;return o}get min(){return this._min===void 0&&(this._min=SS(this.data)),this._min}get max(){return this._max===void 0&&(this._max=wS(this.data)),this._max}get sum(){return this._sum===void 0&&(this._sum=oB(this.data)),this._sum}get mean(){return this._mean===void 0&&(this._mean=CS(this.data)),this._mean}get rms(){return this._rms===void 0&&(this._rms=function(t){const n=t.length;let r=0;for(let i=0;i<n;++i){const o=t[i];r+=o*o}return Math.sqrt(r/n)}(this.data)),this._rms}clone(){const t=new ao(this.name,this.path,this.data,this.nx,this.ny,this.nz,this.atomindex);return t.matrix.copy(this.matrix),t.header=Object.assign({},this.header),t}dispose(){this.workerPool&&this.workerPool.terminate()}}function h7(e){return e==="front"?dv:e==="back"?Zr:bx}dn.add("shader/Mesh.vert",`#define STANDARD
uniform float clipNear;
uniform vec3 clipCenter;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#elif defined( NOLIGHT )
varying vec3 vColor;
#else
#include color_pars_vertex
#ifndef FLAT_SHADED
varying vec3 vNormal;
#endif
#endif
#include common
void main(){
#if defined( PICKING )
vPickingColor = unpackColor( primitiveId );
#elif defined( NOLIGHT )
vColor = color;
#else
#include color_vertex
#include beginnormal_vertex
#include defaultnormal_vertex
#ifndef FLAT_SHADED
vNormal = normalize( transformedNormal );
#endif
#endif
#include begin_vertex
#include project_vertex
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )
vViewPosition = -mvPosition.xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
}`),dn.add("shader/Mesh.frag",`#define STANDARD
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 interiorColor;
uniform float interiorDarkening;
uniform float roughness;
uniform float metalness;
uniform float opacity;
uniform float clipNear;
uniform float clipRadius;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
uniform float objectId;
varying vec3 vPickingColor;
#elif defined( NOLIGHT )
varying vec3 vColor;
#else
#ifndef FLAT_SHADED
varying vec3 vNormal;
#endif
#include common
#include color_pars_fragment
#include fog_pars_fragment
#include bsdfs
#include lights_pars_begin
#include lights_physical_pars_fragment
#endif
void main(){
#include nearclip_fragment
#include radiusclip_fragment
#if defined( PICKING )
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#elif defined( NOLIGHT )
gl_FragColor = vec4( vColor, opacity );
#else
vec4 diffuseColor = vec4( diffuse, opacity );
ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
vec3 totalEmissiveLight = emissive;
#include color_fragment
#include roughnessmap_fragment
#include metalnessmap_fragment
#include normal_fragment_begin
#include lights_physical_fragment
#include lights_fragment_begin
#include lights_fragment_end
vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;
#include interior_fragment
gl_FragColor = vec4( outgoingLight, diffuseColor.a );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#include opaque_back_fragment
#endif
}`);const p7={f:1,v2:2,v3:3,c:3};function YO(e,t){e.matrix.copy(t),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0}const eo={opaqueBack:!1,side:"double",opacity:1,depthWrite:!0,clipNear:0,clipRadius:0,clipCenter:new W,flatShaded:!1,wireframe:!1,roughness:.4,metalness:0,diffuse:16777215,diffuseInterior:!1,useInteriorColor:!1,interiorColor:14540253,interiorDarkening:0,forceTransparent:!1,matrix:new lt,disablePicking:!1,sortParticles:!1,background:!1},Nh={opaqueBack:{updateShader:!0},side:{updateShader:!0,property:!0},opacity:{uniform:!0},depthWrite:{property:!0},clipNear:{updateShader:!0,property:!0},clipRadius:{updateShader:!0,uniform:!0},clipCenter:{uniform:!0},flatShaded:{updateShader:!0},background:{updateShader:!0},wireframe:{updateVisibility:!0},roughness:{uniform:!0},metalness:{uniform:!0},diffuse:{uniform:!0},diffuseInterior:{updateShader:!0},useInteriorColor:{updateShader:!0},interiorColor:{uniform:!0},interiorDarkening:{uniform:!0},matrix:{}};class xl{constructor(t,n={}){this.parameterTypes=Nh,this.geometry=new wt,this.indexVersion=0,this.wireframeIndexVersion=-1,this.group=new Tn,this.wireframeGroup=new Tn,this.pickingGroup=new Tn,this.vertexShader="",this.fragmentShader="",this.isImpostor=!1,this.isText=!1,this.isSurface=!1,this.isPoint=!1,this.isLine=!1,this.dynamic=!0,this.visible=!0,this.wireframeIndexCount=0,this.parameters=ns(n,this.defaultParameters),this.uniforms=xS.merge([xt.common,{fogColor:{value:new ht(0)},fogNear:{value:0},fogFar:{value:0},opacity:{value:this.parameters.opacity},clipNear:{value:0},clipRadius:{value:this.parameters.clipRadius},clipCenter:{value:this.parameters.clipCenter}},{emissive:{value:new ht(0)},roughness:{value:this.parameters.roughness},metalness:{value:this.parameters.metalness},interiorColor:{value:new ht(this.parameters.interiorColor)},interiorDarkening:{value:this.parameters.interiorDarkening}},xt.lights]),this.uniforms.diffuse.value.set(this.parameters.diffuse),this.pickingUniforms={clipNear:{value:0},objectId:{value:0},opacity:{value:this.parameters.opacity}};const r=t.position||t.position1;this._positionDataSize=r?r.length/3:0,t.primitiveId||(t.primitiveId=gv(this._positionDataSize)),this.addAttributes({position:{type:"v3",value:t.position},color:{type:"c",value:t.color},primitiveId:{type:"f",value:t.primitiveId}}),n.matrix&&(this.matrix=n.matrix),t.index&&this.initIndex(t.index),this.picking=t.picking,this.makeWireframeGeometry()}get defaultParameters(){return eo}set matrix(t){this.setMatrix(t)}get matrix(){return this.group.matrix.clone()}get transparent(){return this.parameters.opacity<1||this.parameters.forceTransparent}get size(){return this._positionDataSize}get attributeSize(){return this.size}get pickable(){return!!this.picking&&!this.parameters.disablePicking}setMatrix(t){YO(this.group,t),YO(this.wireframeGroup,t),YO(this.pickingGroup,t)}initIndex(t){this.geometry.setIndex(new Rt(t,1));const n=this.geometry.getIndex();n?n.setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0):Ve.error("Index is null")}makeMaterial(){const t=h7(this.parameters.side),n=new ri({uniforms:this.uniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:this.transparent,depthWrite:this.parameters.depthWrite,lights:!0,fog:!0,side:t});n.vertexColors=!0,n.extensions.derivatives=!0,n.extensions.fragDepth=this.isImpostor;const r=new ri({uniforms:this.uniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:this.transparent,depthWrite:this.parameters.depthWrite,lights:!1,fog:!0,side:t});r.vertexColors=!0;const i=new ri({uniforms:this.pickingUniforms,vertexShader:"",fragmentShader:"",depthTest:!0,transparent:!1,depthWrite:this.parameters.depthWrite,lights:!1,fog:!1,side:t,blending:ac});i.vertexColors=!0,i.extensions.fragDepth=this.isImpostor,n.clipNear=this.parameters.clipNear,r.clipNear=this.parameters.clipNear,i.clipNear=this.parameters.clipNear,this.material=n,this.wireframeMaterial=r,this.pickingMaterial=i,this.updateShader()}makeWireframeGeometry(){this.makeWireframeIndex();const t=this.geometry,n=this.wireframeIndex,r=new wt;r.attributes=t.attributes,n&&(r.setIndex(new Rt(n,1).setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0)),r.setDrawRange(0,this.wireframeIndexCount)),this.wireframeGeometry=r}makeWireframeIndex(){const t=[];function n(o,s){if(o>s){const l=o;o=s,s=l}const a=t[o];return a===void 0?(t[o]=[s],!0):!a.includes(s)&&(a.push(s),!0)}const r=this.geometry,i=r.index;if(this.parameters.wireframe)if(i){const o=i.array;let s,a=o.length;r.drawRange.count!==1/0&&(a=r.drawRange.count),this.wireframeIndex&&this.wireframeIndex.length>2*a?s=this.wireframeIndex:s=bl(2*a,r.attributes.position.count);let l=0;t.length=0;for(let c=0;c<a;c+=3){const u=o[c+0],d=o[c+1],f=o[c+2];n(u,d)&&(s[l+0]=u,s[l+1]=d,l+=2),n(d,f)&&(s[l+0]=d,s[l+1]=f,l+=2),n(f,u)&&(s[l+0]=f,s[l+1]=u,l+=2)}this.wireframeIndex=s,this.wireframeIndexCount=l,this.wireframeIndexVersion=this.indexVersion}else{const o=r.attributes.position.count;let s;s=this.wireframeIndex&&this.wireframeIndex.length>2*o?this.wireframeIndex:bl(2*o,o);for(let a=0,l=0;a<o;a+=3)s[l+0]=a,s[l+1]=a+1,s[l+2]=a+1,s[l+3]=a+2,s[l+4]=a+2,s[l+5]=a,l+=6;this.wireframeIndex=s,this.wireframeIndexCount=2*o,this.wireframeIndexVersion=this.indexVersion}else this.wireframeIndex=new Uint16Array(0),this.wireframeIndexCount=0}updateWireframeIndex(){if(this.wireframeGeometry&&this.wireframeIndex){if(this.wireframeGeometry.setDrawRange(0,1/0),this.wireframeIndexVersion<this.indexVersion&&this.makeWireframeIndex(),this.wireframeGeometry.index&&this.wireframeIndex.length>this.wireframeGeometry.index.array.length)this.wireframeGeometry.setIndex(new Rt(this.wireframeIndex,1).setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0));else{const t=this.wireframeGeometry.getIndex();if(!t)return void Ve.error("Index is null");t.set(this.wireframeIndex),t.needsUpdate=this.wireframeIndexCount>0,t.updateRange.count=this.wireframeIndexCount}this.wireframeGeometry.setDrawRange(0,this.wireframeIndexCount)}}getRenderOrder(){let t=0;return this.isText?t=1:this.transparent&&(t=this.isSurface?3:2),t}_getMesh(t){this.material||this.makeMaterial();const n=this.geometry,r=this[t];let i;return i=this.isLine?new Sr(n,r):this.isPoint?new vb(n,r):new Gn(n,r),i.frustumCulled=!1,i.renderOrder=this.getRenderOrder(),i}getMesh(){return this._getMesh("material")}getWireframeMesh(){let t;return this.material||this.makeMaterial(),this.wireframeGeometry||this.makeWireframeGeometry(),t=new Sr(this.wireframeGeometry,this.wireframeMaterial),t.frustumCulled=!1,t.renderOrder=this.getRenderOrder(),t}getPickingMesh(){return this._getMesh("pickingMaterial")}getShader(t,n){return j0(t,this.getDefines(n))}getVertexShader(t){return this.getShader(this.vertexShader,t)}getFragmentShader(t){return this.getShader(this.fragmentShader,t)}getDefines(t){const n={};return this.parameters.clipNear&&(n.NEAR_CLIP=1),this.parameters.clipRadius&&(n.RADIUS_CLIP=1),t==="picking"?n.PICKING=1:((t==="background"||this.parameters.background)&&(n.NOLIGHT=1),this.parameters.flatShaded&&(n.FLAT_SHADED=1),this.parameters.opaqueBack&&(n.OPAQUE_BACK=1),this.parameters.diffuseInterior&&(n.DIFFUSE_INTERIOR=1),this.parameters.useInteriorColor&&(n.USE_INTERIOR_COLOR=1)),n}getParameters(){return this.parameters}addUniforms(t){this.uniforms=xS.merge([this.uniforms,t]),this.pickingUniforms=xS.merge([this.pickingUniforms,t])}addAttributes(t){for(let n in t){let r;const i=t[n],o=this.attributeSize*p7[i.type];i.value?(o!==i.value.length&&Ve.error("attribute value has wrong length",n),r=i.value):r=are("float32",o),this.geometry.setAttribute(n,new Rt(r,p7[i.type]).setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0))}}updateRenderOrder(){const t=this.getRenderOrder();function n(r){r.renderOrder=t}this.group.children.forEach(n),this.pickingGroup&&this.pickingGroup.children.forEach(n)}updateShader(){const t=this.material,n=this.wireframeMaterial,r=this.pickingMaterial;t.vertexShader=this.getVertexShader(),t.fragmentShader=this.getFragmentShader(),t.needsUpdate=!0,n.vertexShader=this.getShader("Line.vert"),n.fragmentShader=this.getShader("Line.frag"),n.needsUpdate=!0,r.vertexShader=this.getVertexShader("picking"),r.fragmentShader=this.getFragmentShader("picking"),r.needsUpdate=!0}setParameters(t){const n=t,r=this.parameterTypes,i=this.parameters,o={},s={};let a=!1,l=!1;for(const c in n){const u=n[c];u!==void 0&&(i[c]=u,r[c]!==void 0&&(r[c].property&&(r[c].property!==!0?o[r[c].property]=u:o[c]=u),r[c].uniform&&(r[c].uniform!==!0?s[r[c].uniform]=u:s[c]=u),r[c].updateShader&&(a=!0),r[c].updateVisibility&&(l=!0),this.dynamic&&c==="wireframe"&&u===!0&&this.updateWireframeIndex(),c==="forceTransparent"&&(o.transparent=this.transparent),c==="matrix"&&(this.matrix=u)))}this.setProperties(o),this.setUniforms(s),a&&this.updateShader(),l&&this.setVisibility(this.visible)}setAttributes(t){const n=this.geometry,r=n.attributes;for(const i in t){if(i==="picking")continue;const o=t[i],s=o.length;if(i==="index"){const a=n.getIndex();if(!a){Ve.error("Index is null");continue}n.setDrawRange(0,1/0),s>a.array.length?n.setIndex(new Rt(o,1).setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0)):(a.set(o),a.count=s,a.needsUpdate=s>0,a.updateRange.count=s,n.setDrawRange(0,s)),this.indexVersion++,this.parameters.wireframe&&this.updateWireframeIndex()}else{const a=r[i];s>a.array.length?n.setAttribute(i,new Rt(o,a.itemSize).setUsage(this.dynamic?WebGLRenderingContext.DYNAMIC_DRAW:0)):(r[i].set(o),r[i].needsUpdate=s>0,r[i].updateRange.count=s)}}}setUniforms(t){if(!t)return;const n=this.material.uniforms,r=this.wireframeMaterial.uniforms,i=this.pickingMaterial.uniforms;for(let o in t)o==="opacity"&&this.setProperties({transparent:this.transparent}),n[o]!==void 0&&(n[o].value.isVector3?n[o].value.copy(t[o]):n[o].value.set?n[o].value.set(t[o]):n[o].value=t[o]),r[o]!==void 0&&(r[o].value.isVector3?r[o].value.copy(t[o]):r[o].value.set?r[o].value.set(t[o]):r[o].value=t[o]),i[o]!==void 0&&(i[o].value.isVector3?i[o].value.copy(t[o]):i[o].value.set?i[o].value.set(t[o]):i[o].value=t[o])}setProperties(t){if(!t)return;const n=this.material,r=this.wireframeMaterial,i=this.pickingMaterial;for(const o in t){const s=o;let a=t[s];s==="transparent"?this.updateRenderOrder():s==="side"&&(a=h7(a)),n[s]=a,r[s]=a,i[s]=a}n.needsUpdate=!0,r.needsUpdate=!0,i.needsUpdate=!0}setVisibility(t){this.visible=t,this.parameters.wireframe?(this.group.visible=!1,this.wireframeGroup.visible=t,this.pickable&&(this.pickingGroup.visible=!1)):(this.group.visible=t,this.wireframeGroup.visible=!1,this.pickable&&(this.pickingGroup.visible=t))}dispose(){this.material&&this.material.dispose(),this.wireframeMaterial&&this.wireframeMaterial.dispose(),this.pickingMaterial&&this.pickingMaterial.dispose(),this.geometry.dispose(),this.wireframeGeometry&&this.wireframeGeometry.dispose()}toJSON(){var t={};for(var n in this)n!=="group"&&n!=="wireframeGroup"&&n!="pickingGroup"&&n!=="picking"&&(t[n]=this[n]);return t}}class Ac extends xl{constructor(t,n={}){super(t,n),this.vertexShader="Mesh.vert",this.fragmentShader="Mesh.frag",this.addAttributes({normal:{type:"v3",value:t.normal}}),t.normal===void 0&&this.geometry.computeVertexNormals()}}class jre extends Ac{constructor(){super(...arguments),this.isSurface=!0}}function _w(e){e.visible=!0}function m7(e){e.visible=!1}class Ure{constructor(t){this.group=new Tn,this.wireframeGroup=new Tn,this.pickingGroup=new Tn,this.frontMeshes=[],this.backMeshes=[],this.size=t.size,this.side=t.parameters.side,this.visible=t.visible,this.geometry=t.geometry,this.picking=t.picking,this.group=new Tn,this.wireframeGroup=new Tn,this.pickingGroup=new Tn,this.matrix=t.matrix;const n=t,r=new t.constructor({position:new Float32Array(0)});n.makeMaterial(),r.makeMaterial(),r.picking=t.picking,r.geometry=t.geometry,r.wireframeGeometry=t.wireframeGeometry,r.setParameters(t.getParameters()),r.updateShader(),n.setParameters({side:"front"}),r.setParameters({side:"back",opacity:r.parameters.opacity}),this.buffer=t,this.frontBuffer=n,this.backBuffer=r}set matrix(t){xl.prototype.setMatrix.call(this,t)}get matrix(){return this.group.matrix.clone()}get pickable(){return!!this.picking&&!this.parameters.disablePicking}get parameters(){return this.buffer.parameters}getParameters(){const t=Object.assign({},this.buffer.parameters);return t.side=this.side,t}getMesh(t){let n,r;return t?(r=this.backBuffer.getPickingMesh(),n=this.frontBuffer.getPickingMesh()):(r=this.backBuffer.getMesh(),n=this.frontBuffer.getMesh()),this.frontMeshes.push(n),this.backMeshes.push(r),this.setParameters({side:this.side}),new Tn().add(r,n)}getWireframeMesh(){return this.buffer.getWireframeMesh()}getPickingMesh(){return this.getMesh(!0)}setAttributes(t){this.buffer.setAttributes(t)}setParameters(t){(t=Object.assign({},t)).side==="front"?(this.frontMeshes.forEach(_w),this.backMeshes.forEach(m7)):t.side==="back"?(this.frontMeshes.forEach(m7),this.backMeshes.forEach(_w)):t.side==="double"&&(this.frontMeshes.forEach(_w),this.backMeshes.forEach(_w)),t.side!==void 0&&(this.side=t.side),delete t.side,t.matrix!==void 0&&(this.matrix=t.matrix),delete t.matrix,this.frontBuffer.setParameters(t),t.wireframe!==void 0&&(this.wireframe=t.wireframe,this.setVisibility(this.visible)),delete t.wireframe,this.backBuffer.setParameters(t)}setVisibility(t){this.visible=t,this.parameters.wireframe?(this.group.visible=!1,this.wireframeGroup.visible=t,this.pickable&&(this.pickingGroup.visible=!1)):(this.group.visible=t,this.wireframeGroup.visible=!1,this.pickable&&(this.pickingGroup.visible=t))}dispose(){this.frontBuffer.dispose(),this.backBuffer.dispose()}toJSON(){var t={};for(var n in this)["side","size","visible","matrix","parameters"].includes(n)&&(t[n]=this[n]);return t}}dn.add("shader/Line.vert",`uniform float clipNear;
uniform vec3 clipCenter;
varying vec3 vViewPosition;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#include color_pars_vertex
void main(){
#include color_vertex
#include begin_vertex
#include project_vertex
vViewPosition = -mvPosition.xyz;
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
}`),dn.add("shader/Line.frag",`uniform float opacity;
uniform float clipNear;
uniform float clipRadius;
varying vec3 vViewPosition;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#include common
#include color_pars_fragment
#include fog_pars_fragment
void main(){
#include nearclip_fragment
#include radiusclip_fragment
gl_FragColor = vec4( vColor, opacity );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
}`);class Vre extends xl{constructor(){super(...arguments),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag"}}class YL extends Ex{constructor(t,n,r){super(t,n,r),this.type="surface",this.parameters=Object.assign({isolevelType:{type:"select",options:{value:"value",sigma:"sigma"}},isolevel:{type:"number",precision:2,max:1e3,min:-1e3},negateIsolevel:{type:"boolean"},isolevelScroll:{type:"boolean"},smooth:{type:"integer",precision:1,max:10,min:0},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",buffer:!0},boxSize:{type:"integer",precision:1,max:100,min:0},colorVolume:{type:"hidden"},contour:{type:"boolean",rebuild:!0},useWorker:{type:"boolean",rebuild:!0},wrap:{type:"boolean",rebuild:!0}},this.parameters),t instanceof ao?(this.surface=void 0,this.volume=t):(this.surface=t,this.volume=void 0),this.boxCenter=new W,this.__boxCenter=new W,this.box=new zn,this.__box=new zn,this._position=new W,this.inverseMatrix=new lt,this.setBox=function(){this._position.copy(n.translationGroup.position).negate(),this._position.applyMatrix4(this.inverseMatrix),this._position.equals(this.boxCenter)||this.setParameters({boxCenter:this._position})},this.toBePrepared=!0,this.viewer.signals.ticked.add(this.setBox,this),this.init(r)}init(t){const n=t||{};n.colorScheme=re(n.colorScheme,"uniform"),n.colorValue=re(n.colorValue,14540253),this.isolevelType=re(n.isolevelType,"sigma"),this.isolevel=re(n.isolevel,2),this.negateIsolevel=re(n.negateIsolevel,!1),this.isolevelScroll=re(n.isolevelScroll,!1),this.smooth=re(n.smooth,0),this.background=re(n.background,!1),this.opaqueBack=re(n.opaqueBack,!0),this.boxSize=re(n.boxSize,0),this.colorVolume=re(n.colorVolume,void 0),this.contour=re(n.contour,!1),this.useWorker=re(n.useWorker,!0),this.wrap=re(n.wrap,!1),super.init(n),this.inverseMatrix.getInverse(this.matrix),this.build()}attach(t){this.bufferList.forEach(n=>{this.viewer.add(n)}),this.setVisibility(this.visible),t()}prepare(t){if(this.volume){let n;if(n=this.isolevelType==="sigma"?this.volume.getValueForSigma(this.isolevel):this.isolevel,this.negateIsolevel&&(n*=-1),!this.surface||this.__isolevel!==n||this.__smooth!==this.smooth||this.__contour!==this.contour||this.__wrap!==this.wrap||this.__boxSize!==this.boxSize||this.boxSize>0&&!this.__boxCenter.equals(this.boxCenter)){this.__isolevel=n,this.__smooth=this.smooth,this.__contour=this.contour,this.__wrap=this.wrap,this.__boxSize=this.boxSize,this.__boxCenter.copy(this.boxCenter),this.__box.copy(this.box);const r=i=>{this.surface=i,t()};this.useWorker?this.volume.getSurfaceWorker(n,this.smooth,this.boxCenter,this.boxSize,this.contour,this.wrap,r):r(this.volume.getSurface(n,this.smooth,this.boxCenter,this.boxSize,this.contour,this.wrap))}else t()}else t()}create(){const t={position:this.surface.getPosition(),color:this.surface.getColor(this.getColorParams()),index:this.surface.getIndex()};let n;if(this.contour)n=new Vre(t,this.getBufferParams({wireframe:!1}));else{Object.assign(t,{normal:this.surface.getNormal(),picking:this.surface.getPicking()});const r=new jre(t,this.getBufferParams({background:this.background,opaqueBack:this.opaqueBack,dullInterior:!1}));n=new Ure(r)}this.bufferList.push(n)}update(t){if(this.bufferList.length===0)return;const n={};(t=t||{}).position&&(n.position=this.surface.getPosition()),t.color&&(n.color=this.surface.getColor(this.getColorParams())),t.index&&(n.index=this.surface.getIndex()),t.normal&&(n.normal=this.surface.getNormal()),this.bufferList.forEach(function(r){r.setAttributes(n)})}setParameters(t,n,r){return t&&t.isolevelType!==void 0&&this.volume&&(this.isolevelType==="value"&&t.isolevelType==="sigma"?this.isolevel=this.volume.getSigmaForValue(this.isolevel):this.isolevelType==="sigma"&&t.isolevelType==="value"&&(this.isolevel=this.volume.getValueForSigma(this.isolevel)),this.isolevelType=t.isolevelType),t&&t.boxCenter&&(this.boxCenter.copy(t.boxCenter),delete t.boxCenter),t&&t.wireframe&&(t.contour||t.contour===void 0&&this.contour)&&(t.wireframe=!1),super.setParameters(t,n,r),t.matrix&&this.inverseMatrix.getInverse(t.matrix),this.volume&&this.volume.getBox(this.boxCenter,this.boxSize,this.box),t&&t.colorVolume!==void 0&&n&&(n.color=!0),this.surface&&(t.isolevel!==void 0||t.negateIsolevel!==void 0||t.smooth!==void 0||t.wrap!==void 0||t.boxSize!==void 0||this.boxSize>0&&!this.__box.equals(this.box))&&this.build({position:!0,color:!0,index:!0,normal:!this.contour}),this}getColorParams(){const t=super.getColorParams();return t.volume=this.colorVolume,t}dispose(){this.viewer.signals.ticked.remove(this.setBox,this),super.dispose()}}class en{static zoomScroll(t,n){t.trackballControls.zoom(n)}static clipNearScroll(t,n){const r=t.getParameters();t.setParameters({clipNear:r.clipNear+n/10})}static focusScroll(t,n){const r=t.getFocus(),i=Math.sign(n)*function(o,s,a){if(o>s)return o;const l=o/s;return((2*a-s)*l+(2*s-3*a))*l*l+a}((100-r)/10,5,.2);t.setFocus(r+i)}static zoomFocusScroll(t,n){t.trackballControls.zoom(n);const r=t.viewer.camera.position.z;t.setFocus(100-Math.abs(r/8))}static isolevelScroll(t,n){const r=Math.sign(n)/10;t.eachRepresentation((i,o)=>{if(i.repr instanceof YL){const s=i.getParameters();s.isolevelScroll&&i.setParameters({isolevel:s.isolevel+r})}})}static panDrag(t,n,r){t.trackballControls.pan(n,r)}static rotateDrag(t,n,r){t.trackballControls.rotate(n,r)}static zRotateDrag(t,n,r){t.trackballControls.zRotate(n,r)}static zoomDrag(t,n,r){t.trackballControls.zoom((n+r)/-2)}static zoomFocusDrag(t,n,r){t.trackballControls.zoom((n+r)/-2);const i=t.viewer.camera.position.z;t.setFocus(100-Math.abs(i/8))}static panComponentDrag(t,n,r){t.trackballControls.panComponent(n,r)}static panAtomDrag(t,n,r){t.trackballControls.panAtom(n,r)}static rotateComponentDrag(t,n,r){t.trackballControls.rotateComponent(n,r)}static movePick(t,n){n&&t.animationControls.move(n.position.clone())}static tooltipPick(t,n){const r=t.tooltip;if(t.getParameters().tooltip&&n){const i=n.mouse.position;r.innerText=n.getLabel(),r.style.bottom=window.innerHeight-i.y+3+"px",r.style.left=i.x+3+"px",r.style.display="block"}else r.style.display="none"}static measurePick(t,n){if(n&&(n.atom||n.bond)){const r=n.atom||n.closestBondAtom;n.component.measurePick(r)}else t.measureClear()}}const Hre={default:[["scroll",en.zoomScroll],["scroll-shift",en.focusScroll],["scroll-ctrl",en.isolevelScroll],["scroll-shift-ctrl",en.zoomFocusScroll],["drag-left",en.rotateDrag],["drag-right",en.panDrag],["drag-ctrl-left",en.panDrag],["drag-ctrl-right",en.zRotateDrag],["drag-shift-left",en.zoomDrag],["drag-middle",en.zoomFocusDrag],["drag-ctrl-shift-right",en.panComponentDrag],["drag-ctrl-shift-left",en.rotateComponentDrag],["clickPick-right",en.measurePick],["clickPick-ctrl-left",en.measurePick],["clickPick-middle",en.movePick],["clickPick-left",en.movePick],["hoverPick",en.tooltipPick]],pymol:[["drag-left",en.rotateDrag],["drag-middle",en.panDrag],["drag-right",en.zoomDrag],["scroll",en.focusScroll],["drag-shift-right",en.focusScroll],["clickPick-ctrl+shift-middle",en.movePick],["hoverPick",en.tooltipPick]],coot:[["scroll",en.isolevelScroll],["drag-left",en.rotateDrag],["drag-middle",en.panDrag],["drag-ctrl-left",en.panDrag],["drag-right",en.zoomFocusDrag],["drag-ctrl-right",en.focusScroll],["clickPick-middle",en.movePick],["hoverPick",en.tooltipPick]],astexviewer:[["drag-left",en.rotateDrag],["drag-ctrl-left",en.panDrag],["drag-shift-left",en.zoomDrag],["scroll",en.focusScroll],["clickPick-middle",en.movePick],["hoverPick",en.tooltipPick]]};function g7(e){const t=e.split(/[-+]/);let n="";t.includes("scroll")&&(n="scroll"),t.includes("drag")&&(n="drag"),t.includes("click")&&(n="click"),t.includes("doubleClick")&&(n="doubleClick"),t.includes("hover")&&(n="hover"),t.includes("clickPick")&&(n="clickPick"),t.includes("hoverPick")&&(n="hoverPick");let r=0;t.includes("alt")&&(r+=1),t.includes("ctrl")&&(r+=2),t.includes("meta")&&(r+=4),t.includes("shift")&&(r+=8);let i=0;return t.includes("left")&&(i+=1),t.includes("right")&&(i+=2),t.includes("middle")&&(i+=4),[n,r,i]}class Iot{constructor(t,n={}){this.stage=t,this.actionList=[],this.mouse=t.mouseObserver,this.disabled=n.disabled||!1,this.preset(n.preset||"default")}run(t,...n){if(this.disabled)return;const r=this.mouse.key||0,i=this.mouse.buttons||0;this.actionList.forEach(o=>{o.type===t&&o.key===r&&o.button===i&&o.callback(this.stage,...n)})}add(t,n){const[r,i,o]=g7(t);this.actionList.push({type:r,key:i,button:o,callback:n})}remove(t,n){const r=t.includes("*"),[i,o,s]=g7(t),a=this.actionList.filter(function(l){return!((l.type===i||r&&i==="")&&(l.key===o||r&&o===0)&&(l.button===s||r&&s===0)&&(l.callback===n||n===void 0))});this.actionList=a}preset(t){this.clear(),(Hre[t]||[]).forEach(n=>this.add(n[0],n[1]))}clear(){this.actionList.length=0}}class u0{static autoView(t){t.autoView(1e3)}static toggleAnimations(t){t.animationControls.toggle()}static toggleRock(t){t.toggleRock()}static toggleSpin(t){t.toggleSpin()}static toggleAntialiasing(t){const n=t.getParameters();t.setParameters({sampleLevel:n.sampleLevel===-1?0:-1})}}const Rot={default:[["i",u0.toggleSpin],["k",u0.toggleRock],["p",u0.toggleAnimations],["a",u0.toggleAntialiasing],["r",u0.autoView]]};class kot{constructor(t,n={}){this.stage=t,this.actionList=[],this.disabled=n.disabled||!1,this.preset(n.preset||"default")}run(t){this.disabled||this.actionList.forEach(n=>{n.key===t&&n.callback(this.stage)})}add(t,n){this.actionList.push({key:t,callback:n})}remove(t,n){const r=this.actionList.filter(function(i){return!(i.key===t&&(i.callback===n||n===void 0))});this.actionList=r}preset(t){this.clear(),(Rot[t]||[]).forEach(n=>this.add(n[0],n[1]))}clear(){this.actionList.length=0}}class Lot{constructor(t){this.stage=t,this.stage=t,this.mouse=t.mouseObserver,this.controls=t.mouseControls,this.mouse.signals.clicked.add(this._onClick,this),this.mouse.signals.hovered.add(this._onHover,this)}_onClick(t,n){const r=this.stage.pickingControls.pick(t,n);this.stage.signals.clicked.dispatch(r),this.controls.run("clickPick",r)}_onHover(t,n){const r=this.stage.pickingControls.pick(t,n);r&&this.mouse.down.equals(this.mouse.position)&&(this.stage.transformComponent=r.component,this.stage.transformAtom=r.atom),this.stage.signals.hovered.dispatch(r),this.controls.run("hoverPick",r)}dispose(){this.mouse.signals.clicked.remove(this._onClick,this),this.mouse.signals.hovered.remove(this._onHover,this)}}class $ot{constructor(t){this.stage=t,this.stage=t,this.mouse=t.mouseObserver,this.controls=t.mouseControls,this.mouse.signals.moved.add(this._onMove,this),this.mouse.signals.scrolled.add(this._onScroll,this),this.mouse.signals.dragged.add(this._onDrag,this),this.mouse.signals.clicked.add(this._onClick,this),this.mouse.signals.hovered.add(this._onHover,this),this.mouse.signals.doubleClicked.add(this._onDblclick,this)}_onMove(){this.stage.tooltip.style.display="none"}_onScroll(t){this.controls.run("scroll",t)}_onDrag(t,n){this.controls.run("drag",t,n)}_onClick(t,n){this.controls.run("click",t,n)}_onDblclick(t,n){this.controls.run("doubleClick",t,n)}_onHover(t,n){this.controls.run("hover",t,n)}dispose(){this.mouse.signals.moved.remove(this._onMove,this),this.mouse.signals.scrolled.remove(this._onScroll,this),this.mouse.signals.dragged.remove(this._onDrag,this),this.mouse.signals.clicked.remove(this._onClick,this),this.mouse.signals.hovered.remove(this._onHover,this)}}class Dot{constructor(t){this.stage=t,this.viewer=t.viewer,this.animationControls=t.animationControls,this.viewer.signals.ticked.add(this._onTick,this)}_onTick(t){this.animationControls.run(t)}dispose(){this.viewer.signals.ticked.remove(this._onTick,this)}}const v7=!!fre&&{passive:!0};class Bot{constructor(t){this.stage=t,this.stage=t,this.controls=t.keyControls,this.domElement=t.viewer.renderer.domElement,this.domElement.setAttribute("tabIndex","-1"),this.domElement.style.outline="none",this._focusDomElement=this._focusDomElement.bind(this),this._onKeydown=this._onKeydown.bind(this),this._onKeyup=this._onKeyup.bind(this),this._onKeypress=this._onKeypress.bind(this),this.domElement.addEventListener("mousedown",this._focusDomElement),this.domElement.addEventListener("touchstart",this._focusDomElement,v7),this.domElement.addEventListener("keydown",this._onKeydown),this.domElement.addEventListener("keyup",this._onKeyup),this.domElement.addEventListener("keypress",this._onKeypress)}_onKeydown(){}_onKeyup(){}_onKeypress(t){let n;n="key"in KeyboardEvent.prototype?t.key:String.fromCharCode(t.which||t.keyCode),this.controls.run(n)}_focusDomElement(){this.domElement.focus()}dispose(){this.domElement.removeEventListener("mousedown",this._focusDomElement),this.domElement.removeEventListener("touchstart",this._focusDomElement,v7),this.domElement.removeEventListener("keydown",this._onKeypress),this.domElement.removeEventListener("keyup",this._onKeypress),this.domElement.removeEventListener("keypress",this._onKeypress)}}class Not{constructor(t,n,r,i={}){this.component=t,this.position=n,this.offsetX=re(i.offsetX,0),this.offsetY=re(i.offsetY,0),this.visible=re(i.visible,!0),this.stage=t.stage,this.viewer=t.stage.viewer,this._viewerPosition=new W,this._updateViewerPosition(),this._canvasPosition=new et,this._cameraPosition=new W,this.element=document.createElement("div"),Object.assign(this.element.style,{display:"block",position:"absolute",pointerEvents:"none",whiteSpace:"nowrap",left:"-10000px"}),this.viewer.wrapper.appendChild(this.element),this.setContent(r),this.updateVisibility(),this.viewer.signals.rendered.add(this._update,this),this.component.signals.matrixChanged.add(this._updateViewerPosition,this)}setContent(t){const n=this.element.style.display;if(n==="none"&&(this.element.style.left="-10000px",this.element.style.display="block"),t instanceof HTMLElement)this.element.appendChild(t);else{const r=document.createElement("div");r.innerText=t,Object.assign(r.style,{backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),this.element.appendChild(r)}this._clientRect=this.element.getBoundingClientRect(),n==="none"&&(this.element.style.display=n)}setVisibility(t){this.visible=t,this.updateVisibility()}getVisibility(){return this.visible&&this.component.parameters.visible}updateVisibility(){this.element.style.display=this.getVisibility()?"block":"none"}_updateViewerPosition(){this._viewerPosition.copy(this.position).applyMatrix4(this.component.matrix)}_update(){if(!this.getVisibility())return;const t=this.element.style,n=this._canvasPosition,r=this._viewerPosition,i=this._clientRect;if(this._cameraPosition.copy(r).add(this.viewer.translationGroup.position).applyMatrix4(this.viewer.rotationGroup.matrix).sub(this.viewer.camera.position),this._cameraPosition.z<0)return void(t.display="none");t.display="block";const o=this._cameraPosition.length(),s=this.viewer.scene.fog;t.opacity=(1-Ax(s.near,s.far,o)).toString(),t.zIndex=Math.round(100*(s.far-o)).toString(),this.stage.viewerControls.getPositionOnCanvas(r,n),t.bottom=this.offsetX+n.y+i.height/2+"px",t.left=this.offsetY+n.x-i.width/2+"px"}dispose(){this.viewer.wrapper.removeChild(this.element),this.viewer.signals.ticked.remove(this._update,this),this.component.signals.matrixChanged.remove(this._updateViewerPosition,this)}}const Nl=new lt,ww=new W,y7=new Fn;class Fot{constructor(t){this.component=t,this.signals={changed:new Ht.Signal},this.stage=t.stage,this.viewer=t.stage.viewer}get position(){return this.component.position}get rotation(){return this.component.quaternion}changed(){this.component.updateMatrix(),this.viewer.requestRender(),this.signals.changed.dispatch()}spin(t,n){Nl.getInverse(this.viewer.rotationGroup.matrix),ww.copy(Of(t)).applyMatrix4(Nl),Nl.extractRotation(this.component.transform),Nl.premultiply(this.viewer.rotationGroup.matrix),Nl.getInverse(Nl),ww.copy(Of(t)),ww.applyMatrix4(Nl),Nl.makeRotationAxis(ww,n),y7.setFromRotationMatrix(Nl),this.component.quaternion.premultiply(y7),this.changed()}}const Gre={"":"",vdw:"by vdW radius",covalent:"by covalent radius",sstruc:"by secondary structure",bfactor:"by bfactor",size:"size",data:"data",explicit:"explicit"};class Pc{constructor(t={}){this.max=10,this.type=re(t.type,"size"),this.scale=re(t.scale,1),this.size=re(t.size,1),this.data=re(t.data,{})}atomRadius(t){let n;switch(this.type){case"vdw":n=t.vdw;break;case"covalent":n=t.covalent;break;case"bfactor":n=t.bfactor||1;break;case"sstruc":const r=t.sstruc;n=r==="h"||r==="g"||r==="i"||r==="e"||r==="b"?.25:Rre.includes(t.atomname)?.4:.1;break;case"data":n=re(this.data[t.index],1);break;case"explicit":n=t.radius,n===null&&(n=this.size);break;default:n=this.size}return Math.min(n*this.scale,this.max)}}Pc.types=Gre;const zot=new W(-1,-1,-1),jot=new lt;class Wre{constructor(t){const n=t.rows,r=n/3,i=new bn(n,3),o=new bn(3,3),s=new bn(1,3),a=new bn(3,3),l=new bn(3,3),c=VL(t);HL(t,c),oa(i,t),PS(o,i,i),Nre(o,s,a,l);const u=new W(c[0],c[1],c[2]),d=new W(a.data[0],a.data[3],a.data[6]),f=new W(a.data[1],a.data[4],a.data[7]),h=new W(a.data[2],a.data[5],a.data[8]),p=d.clone().multiplyScalar(Math.sqrt(s.data[0]/r)),g=f.clone().multiplyScalar(Math.sqrt(s.data[1]/r)),v=h.clone().multiplyScalar(Math.sqrt(s.data[2]/r));this.begA=u.clone().sub(p),this.endA=u.clone().add(p),this.begB=u.clone().sub(g),this.endB=u.clone().add(g),this.begC=u.clone().sub(v),this.endC=u.clone().add(v),this.center=u,this.vecA=p,this.vecB=g,this.vecC=v,this.normVecA=d,this.normVecB=f,this.normVecC=h}getBasisMatrix(t=new lt){const n=t;return n.makeBasis(this.normVecB,this.normVecA,this.normVecC),n.determinant()<0&&n.scale(zot),n}getRotationQuaternion(t=new Fn){const n=t;return n.setFromRotationMatrix(this.getBasisMatrix(jot)),n.inverse()}getProjectedScaleForAtoms(t){let n=-1/0,r=-1/0,i=-1/0,o=-1/0,s=-1/0,a=-1/0;const l=new W,c=new W,u=this.center,d=this.normVecA,f=this.normVecB,h=this.normVecC;return t.eachAtom(function(p){If(l.copy(p),d,u);const g=c.subVectors(l,u).normalize().dot(d),v=l.distanceTo(u);g>0?v>n&&(n=v):v>r&&(r=v),If(l.copy(p),f,u);const m=c.subVectors(l,u).normalize().dot(f),y=l.distanceTo(u);m>0?y>i&&(i=y):y>o&&(o=y),If(l.copy(p),h,u);const b=c.subVectors(l,u).normalize().dot(h),_=l.distanceTo(u);b>0?_>s&&(s=_):_>a&&(a=_)}),{d1a:n,d2a:i,d3a:s,d1b:-r,d2b:-o,d3b:-a}}}class Hl{constructor(t,n,r,i){this.volume=t,this.setFilter(n,r,i)}get header(){return this.volume.header}get matrix(){return this.volume.matrix}get normalMatrix(){return this.volume.normalMatrix}get inverseMatrix(){return this.volume.inverseMatrix}get center(){return this.volume.center}get boundingBox(){return this.volume.boundingBox}get min(){return this.volume.min}get max(){return this.volume.max}get mean(){return this.volume.mean}get rms(){return this.volume.rms}_getFilterHash(t,n,r){return JSON.stringify([t,n,r])}setFilter(t,n,r){isNaN(t)&&this.header&&(t=this.header.DMEAN+2*this.header.ARMS),t=t===void 0||isNaN(t)?-1/0:t,n=re(n,1/0),r=re(r,!1);const i=this.volume.data,o=this.volume.position,s=this.volume.atomindex,a=this._getFilterHash(t,n,r);if(a!==this._filterHash){if(t===-1/0&&n===1/0)this.data=i,this.position=o,this.atomindex=s;else{const l=i.length;this._dataBuffer||(this._dataBuffer=new ArrayBuffer(4*l),this._positionBuffer=new ArrayBuffer(3*l*4),s&&(this._atomindexBuffer=new ArrayBuffer(4*l)));const c=new Float32Array(this._dataBuffer),u=new Float32Array(this._positionBuffer);let d;s&&(d=new Uint32Array(this._atomindexBuffer));let f=0;for(let h=0;h<l;++h){const p=3*h,g=i[h];if(!r&&g>=t&&g<=n||r&&(g<t||g>n)){const v=3*f;c[f]=g,u[v+0]=o[p+0],u[v+1]=o[p+1],u[v+2]=o[p+2],s&&d&&(d[f]=s[h]),f+=1}}this.data=new Float32Array(this._dataBuffer,0,f),this.position=new Float32Array(this._positionBuffer,0,3*f),s&&(this.atomindex=new Int32Array(this._atomindexBuffer,0,f))}this._filterHash=a}}}Hl.prototype.getValueForSigma=ao.prototype.getValueForSigma,Hl.prototype.getSigmaForValue=ao.prototype.getSigmaForValue,Hl.prototype.getDataAtomindex=ao.prototype.getDataAtomindex,Hl.prototype.getDataPosition=ao.prototype.getDataPosition,Hl.prototype.getDataColor=ao.prototype.getDataColor,Hl.prototype.getDataPicking=ao.prototype.getDataPicking,Hl.prototype.getDataSize=ao.prototype.getDataSize;class Uot{constructor(t,n){const r=Cre({nodeArray1:t.atomIndex1,nodeArray2:t.atomIndex2,edgeCount:t.count,nodeCount:n});this.countArray=r.countArray,this.offsetArray=r.offsetArray,this.indexArray=r.indexArray}}class ES extends vv{get _defaultFields(){return[["atomIndex1",1,"int32"],["atomIndex2",1,"int32"],["bondOrder",1,"int8"]]}addBond(t,n,r){this.growIfFull();const i=this.count,o=t.index,s=n.index;o<s?(this.atomIndex1[i]=o,this.atomIndex2[i]=s):(this.atomIndex2[i]=o,this.atomIndex1[i]=s),r&&(this.bondOrder[i]=r),this.count+=1}addBondIfConnected(t,n,r){return!!t.connectedTo(n)&&(this.addBond(t,n,r),!0)}}class Vot extends vv{get _defaultFields(){return[["residueIndex",1,"uint32"],["atomTypeId",1,"uint16"],["x",1,"float32"],["y",1,"float32"],["z",1,"float32"],["serial",1,"int32"],["bfactor",1,"float32"],["altloc",1,"uint8"],["occupancy",1,"float32"]]}setAltloc(t,n){this.altloc[t]=n.charCodeAt(0)}getAltloc(t){const n=this.altloc[t];return n?String.fromCharCode(n):""}}class Hot extends vv{get _defaultFields(){return[["chainIndex",1,"uint32"],["atomOffset",1,"uint32"],["atomCount",1,"uint32"],["residueTypeId",1,"uint16"],["resno",1,"int32"],["sstruc",1,"uint8"],["inscode",1,"uint8"]]}setSstruc(t,n){this.sstruc[t]=n.charCodeAt(0)}getSstruc(t){const n=this.sstruc[t];return n?String.fromCharCode(n):""}setInscode(t,n){this.inscode[t]=n.charCodeAt(0)}getInscode(t){const n=this.inscode[t];return n?String.fromCharCode(n):""}}class Got extends vv{get _defaultFields(){return[["entityIndex",1,"uint16"],["modelIndex",1,"uint16"],["residueOffset",1,"uint32"],["residueCount",1,"uint32"],["chainname",4,"uint8"],["chainid",4,"uint8"]]}setChainname(t,n){const r=4*t;this.chainname[r]=n.charCodeAt(0),this.chainname[r+1]=n.charCodeAt(1),this.chainname[r+2]=n.charCodeAt(2),this.chainname[r+3]=n.charCodeAt(3)}getChainname(t){let n="";for(let r=0;r<4;++r){const i=this.chainname[4*t+r];if(!i)break;n+=String.fromCharCode(i)}return n}setChainid(t,n){const r=4*t;this.chainid[r]=n.charCodeAt(0),this.chainid[r+1]=n.charCodeAt(1),this.chainid[r+2]=n.charCodeAt(2),this.chainid[r+3]=n.charCodeAt(3)}getChainid(t){let n="";for(let r=0;r<4;++r){const i=this.chainid[4*t+r];if(!i)break;n+=String.fromCharCode(i)}return n}}class Wot extends vv{get _defaultFields(){return[["chainOffset",1,"uint32"],["chainCount",1,"uint32"]]}}class CC{constructor(t){this.polymer=t,this.size=t.residueCount}getCenterIterator(t=0){const n=this.getPosition().center,r=n.length/3;let i=0,o=-1;const s=[new W,new W,new W,new W];return{size:r,next:function(){const a=this.get(o);return o+=1,a},get:function(a){a=Math.min(r-1,Math.max(0,a));const l=s[i%4],c=3*a;if(l.fromArray(n,c),t){const u=Math.min(t,a,r-a-1);for(let d=1;d<=u;++d){const f=3*d,h=(u+1-d)/(u+1);l.x+=h*n[c-f+0]+h*n[c+f+0],l.y+=h*n[c-f+1]+h*n[c+f+1],l.z+=h*n[c-f+2]+h*n[c+f+2]}l.x/=u+1,l.y/=u+1,l.z/=u+1}return i+=1,l},reset:function(){i=0,o=-1}}}getColor(t){const n=this.polymer,r=n.structure,i=n.residueCount,o=n.residueIndexStart,s=new Float32Array(3*i),a=t||{};a.structure=r;const l=Qt.getScheme(a),c=r.getResidueProxy(),u=r.getAtomProxy();for(let d=0;d<i;++d)c.index=o+d,u.index=c.traceAtomIndex,l.atomColorToArray(u,s,3*d);return{color:s}}getPicking(){const t=this.polymer,n=t.structure,r=t.residueCount,i=t.residueIndexStart,o=new Float32Array(r),s=n.getResidueProxy();for(let a=0;a<r;++a)s.index=i+a,o[a]=s.traceAtomIndex;return{picking:new Bh(o,n)}}getSize(t){const n=this.polymer,r=n.structure,i=n.residueCount,o=n.residueIndexStart,s=new Float32Array(i),a=new Pc(t),l=r.getResidueProxy(),c=r.getAtomProxy();for(let u=0;u<i;++u)l.index=o+u,c.index=l.traceAtomIndex,s[u]=a.atomRadius(c);return{size:s}}getPosition(){const t=this.polymer,n=t.structure,r=t.residueCount,i=r-3,o=new Float32Array(3*r),s=new Float32Array(3*r),a=new Float32Array(r),l=new Float32Array(r),c=new Float32Array(r),u=new Float32Array(r),d=new Float32Array(3*r),f=new W,h=new W,p=new W,g=new W,v=new W,m=new W,y=new W,b=new W,_=new W,x=new W,w=new W,S=new W(0,0,0),C="trace",A=n.getAtomProxy(),T=n.getAtomProxy(t.getAtomIndexByType(0,C)),O=n.getAtomProxy(t.getAtomIndexByType(1,C)),R=n.getAtomProxy(t.getAtomIndexByType(2,C));for(let B=0;B<i;++B){A.index=T.index,T.index=O.index,O.index=R.index,R.index=t.getAtomIndexByType(B+3,C);const V=3*B;f.subVectors(T,A),h.subVectors(O,T),p.subVectors(R,O),g.subVectors(f,h),v.subVectors(h,p),_.crossVectors(g,v).normalize(),_.toArray(s,V),B>0&&(a[B]=_.angleTo(x));const J=Math.cos(g.angleTo(v));u[B]=180/Math.PI*Math.acos(J);const K=g.length(),ie=v.length();l[B]=Math.sqrt(ie*K)/Math.max(2,2*(1-J)),c[B]=Math.abs(h.dot(_)),m.copy(g).multiplyScalar(l[B]/K),y.copy(v).multiplyScalar(l[B]/ie),m.subVectors(T,m),y.subVectors(O,y),m.toArray(o,V+3),y.toArray(o,V+6),w.subVectors(A,S),w.toArray(d,V),x.copy(_),S.copy(m)}m.fromArray(o,3),y.fromArray(o,6),_.subVectors(m,y).normalize(),A.index=t.getAtomIndexByType(0,C),S.copy(A),b.copy(A),If(b,_,m),b.toArray(o,0),w.subVectors(S,m),w.toArray(d,0),m.fromArray(o,3*r-6),y.fromArray(o,3*r-9),_.subVectors(m,y).normalize(),A.index=t.getAtomIndexByType(r-1,C),S.copy(A),b.copy(A),If(b,_,m),b.toArray(o,3*r-3);for(let B=r-3;B<r;++B)m.fromArray(o,3*B),A.index=t.getAtomIndexByType(B,C),S.copy(A),w.subVectors(S,m),w.toArray(d,3*B);const L=new Float32Array(r),D=new Float32Array(r),$=new Float32Array(r),z=new Float32Array(r);L[1]=l[0],D[1]=u[0],$[1]=l[0];for(let B=2;B<r-2;++B)L[B]=.5*(l[B-2]+l[B-1]),D[B]=.5*(u[B-2]+u[B-1]),$[B]=.5*(c[B-2]+c[B-1]),m.fromArray(s,3*(B-2)),y.fromArray(s,3*(B-1)),z[B]=180/Math.PI*Math.acos(Math.cos(m.angleTo(y)));L[r-2]=l[r-4],D[r-2]=u[r-4],$[r-2]=c[r-4];const H=new Float32Array(3*r);Vr(s,H,0,0,3),Vr(s,H,0,3,3);for(let B=2;B<r-2;++B)m.fromArray(s,3*(B-2)),y.fromArray(s,3*(B-1)),_.addVectors(y,m).multiplyScalar(.5).normalize(),_.toArray(H,3*B);return Vr(s,H,3*r-12,3*r-6,3),Vr(s,H,3*r-12,3*r-3,3),{center:o,axis:H,bending:z,radius:L,rise:$,twist:D,resdir:d}}}class qre{constructor(t){this.polymer=t,this.helixorient=new CC(t),this.position=this.helixorient.getPosition()}getAxis(t,n,r,i,o){t=t||30,n=n||2.5,r=r!==void 0&&r;const s=this.polymer,a=s.structure,l=s.residueCount,c=s.residueIndexStart,u=this.position,d=i||{};d.structure=a;const f=Qt.getScheme(d),h=new Pc(o);let p=0,g=0;const v=[],m=[],y=[],b=[],_=[],x=[],w=[],S=[],C=[];let A,T,O=new Float32Array(3*l),R=new Float32Array(3*l);const L=new W,D=new W,$=a.getResidueProxy(),z=a.getResidueProxy(),H=a.getAtomProxy(),B=new W,V=new W;let J=!1;for(let ie=0;ie<l;++ie)if($.index=c+ie,B.fromArray(u.center,3*ie),ie===l-1?J=!0:(z.index=c+ie+1,V.fromArray(u.center,3*ie+3),(r&&$.sstruc!==z.sstruc||B.distanceTo(V)>n||u.bending[ie]>t)&&(J=!0)),J){if(ie-p<4){p=ie,J=!1;continue}H.index=$.traceAtomIndex,O=u.axis.subarray(3*p+3,3*ie),R=u.center.subarray(3*p,3*ie+3),A=zL(O).normalize(),T=zL(R),L.fromArray(R),If(L,A,T),D.fromArray(R,R.length-3),If(D,A,T),A.subVectors(D,L),A.toArray(v,g),T.toArray(m,g),L.toArray(y,g),D.toArray(b,g),f.atomColorToArray(H,_,g),x.push(H.index),w.push(h.atomRadius(H)),S.push(c+p),C.push(c+ie+1-p),g+=3,p=ie,J=!1}const K=new Float32Array(x);return{axis:new Float32Array(v),center:new Float32Array(m),begin:new Float32Array(y),end:new Float32Array(b),color:new Float32Array(_),picking:new Bh(K,a),size:new Float32Array(w),residueOffset:S,residueCount:C}}}class qot{constructor(t){this.scoreFunction=t,this.content=[],this.scoreFunction=t}push(t){this.content.push(t),this.bubbleUp(this.content.length-1)}pop(){const t=this.content[0],n=this.content.pop();return n&&this.content.length>0&&(this.content[0]=n,this.sinkDown(0)),t}peek(){return this.content[0]}remove(t){const n=this.content.length;for(let r=0;r<n;r++)if(this.content[r]===t){const i=this.content.pop();return void(i&&r!==n-1&&(this.content[r]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.bubbleUp(r):this.sinkDown(r)))}throw new Error("Node not found.")}size(){return this.content.length}bubbleUp(t){const n=this.content[t];for(;t>0;){const r=Math.floor((t+1)/2)-1,i=this.content[r];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[r]=n,this.content[t]=i,t=r}}sinkDown(t){const n=this.content.length,r=this.content[t],i=this.scoreFunction(r);let o=0,s=0;for(;;){const a=2*(t+1),l=a-1;let c=null;if(l<n){const u=this.content[l];o=this.scoreFunction(u),o<i&&(c=l)}if(a<n){const u=this.content[a];s=this.scoreFunction(u),s<(c===null?i:o)&&(c=a)}if(c===null)break;this.content[t]=this.content[c],this.content[c]=r,t=c}}}/**
 * Kdtree
 * @class
 * @author Alexander Rose <alexander.rose@weirdbyte.de>, 2016
 * @author Roman Bolzern <roman.bolzern@fhnw.ch>, 2013
 * @author I4DS http://www.fhnw.ch/i4ds, 2013
 * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
 * @description
 * k-d Tree for typed arrays of 3d points (e.g. for Float32Array), in-place
 * provides fast nearest neighbour search
 *
 * Based on https://github.com/ubilabs/kd-tree-javascript by Ubilabs
 *
 * Further information (including mathematical properties)
 * http://en.wikipedia.org/wiki/Binary_tree
 * http://en.wikipedia.org/wiki/K-d_tree
 *
 * @example
 * points: [x, y, z, x, y, z, x, y, z, ...]
 * metric: function(a, b){
 *    return Math.pow(a[0]-b[0], 2) + Math.pow(a[1]-b[1], 2) + Math.pow(a[2]-b[2], 2);
 * }
 *
 * @param {Float32Array} points - points
 * @param {Function} metric - metric
 */class Yot{constructor(t,n){this.points=t,this.metric=n,this.maxDepth=0,this.currentNode=0;const r=t.length/3,i=new Uint32Array(r);for(let o=0;o<r;++o)i[o]=o;this.indices=i,this.nodes=new Int32Array(4*r),this.rootIndex=this.buildTree(0,-1,0,r)}buildTree(t,n,r,i){t>this.maxDepth&&(this.maxDepth=t);const o=i-r;if(o===0)return-1;const s=4*this.currentNode,a=this.nodes;if(this.currentNode+=1,o===1)return a[s]=r,a[s+1]=-1,a[s+2]=-1,a[s+3]=n,s;const l=this.indices,c=this.points,u=r+Math.floor(o/2),d=t%3;let f,h,p,g,v,m=r,y=i-1;for(;y>m;){for(p=m+y>>1,g=c[3*l[p]+d],h=l[p],l[p]=l[y],l[y]=h,v=m,f=m;f<y;++f)c[3*l[f]+d]<g&&(h=l[v],l[v]=l[f],l[f]=h,++v);if(h=l[y],l[y]=l[v],l[v]=h,p=v,u===p)break;u<p?y=p-1:m=p+1}return a[s]=u,a[s+1]=this.buildTree(t+1,s,r,u),a[s+2]=this.buildTree(t+1,s,u+1,i),a[s+3]=n,s}getNodeDepth(t){const n=this.nodes[t+3];return n===-1?0:this.getNodeDepth(n)+1}nearest(t,n,r){const i=new qot(u=>-u[1]),o=this.nodes,s=this.points,a=this.indices,l=u=>{let d,f;const h=this.getNodeDepth(u)%3,p=3*a[o[u]],g=[s[p+0],s[p+1],s[p+2]],v=this.metric(t,g);function m(w,S){i.push([w,S]),i.size()>n&&i.pop()}const y=o[u+1],b=o[u+2];if(b===-1&&y===-1)return void((i.size()<n||v<i.peek()[1])&&v<=r&&m(u,v));d=b===-1?y:y===-1?b:t[h]<=s[p+h]?y:b,l(d),(i.size()<n||v<i.peek()[1])&&v<=r&&m(u,v);const _=[];for(let w=0;w<3;w+=1)_[w]=w===h?t[w]:s[p+w];const x=this.metric(_,g);(i.size()<n||Math.abs(x)<i.peek()[1])&&Math.abs(x)<=r&&(f=d===y?b:y,f!==-1&&l(f))};l(this.rootIndex);const c=[];for(let u=0,d=Math.min(i.size(),n);u<d;u+=1)c.push(i.content[u]);return c}verify(t,n=0){let r=1;if(t===void 0&&(t=this.rootIndex),t===-1)throw new Error("node is null");const i=n%3,o=this.nodes,s=this.points,a=this.indices,l=o[t+1],c=o[t+2];if(l!==-1){if(s[3*a[o[l]]+i]>s[3*a[o[t]]+i])throw new Error("left child is > parent!");r+=this.verify(l,n+1)}if(c!==-1){if(s[3*a[o[c]]+i]<s[3*a[o[t]]+i])throw new Error("right child is < parent!");r+=this.verify(c,n+1)}return r}}class UE{constructor(t,n=0){this.structure=t,this.index=n,this.chainStore=t.chainStore,this.residueStore=t.residueStore,this.atomStore=t.atomStore,this.residueMap=t.residueMap,this.atomMap=t.atomMap}get bondHash(){return this.structure.bondHash}get entity(){return this.structure.entityList[this.entityIndex]}get entityIndex(){return this.chainStore.entityIndex[this.chainIndex]}get modelIndex(){return this.chainStore.modelIndex[this.chainIndex]}get chainIndex(){return this.residueStore.chainIndex[this.residueIndex]}get residue(){return console.warn("residue - might be expensive"),this.structure.getResidueProxy(this.residueIndex)}get residueIndex(){return this.atomStore.residueIndex[this.index]}set residueIndex(t){this.atomStore.residueIndex[this.index]=t}get sstruc(){return this.residueStore.getSstruc(this.residueIndex)}get inscode(){return this.residueStore.getInscode(this.residueIndex)}get resno(){return this.residueStore.resno[this.residueIndex]}get chainname(){return this.chainStore.getChainname(this.chainIndex)}get chainid(){return this.chainStore.getChainid(this.chainIndex)}get residueType(){return this.residueMap.get(this.residueStore.residueTypeId[this.residueIndex])}get atomType(){return this.atomMap.get(this.atomStore.atomTypeId[this.index])}get residueAtomOffset(){return this.residueStore.atomOffset[this.residueIndex]}get resname(){return this.residueType.resname}get hetero(){return this.residueType.hetero}get atomname(){return this.atomType.atomname}get number(){return this.atomType.number}get element(){return this.atomType.element}get vdw(){return this.atomType.vdw}get covalent(){return this.atomType.covalent}get x(){return this.atomStore.x[this.index]}set x(t){this.atomStore.x[this.index]=t}get y(){return this.atomStore.y[this.index]}set y(t){this.atomStore.y[this.index]=t}get z(){return this.atomStore.z[this.index]}set z(t){this.atomStore.z[this.index]=t}get serial(){return this.atomStore.serial[this.index]}set serial(t){this.atomStore.serial[this.index]=t}get bfactor(){return this.atomStore.bfactor[this.index]}set bfactor(t){this.atomStore.bfactor[this.index]=t}get occupancy(){return this.atomStore.occupancy[this.index]}set occupancy(t){this.atomStore.occupancy[this.index]=t}get altloc(){return this.atomStore.getAltloc(this.index)}set altloc(t){this.atomStore.setAltloc(this.index,t)}get partialCharge(){return this.atomStore.partialCharge?this.atomStore.partialCharge[this.index]:null}set partialCharge(t){this.atomStore.partialCharge&&(this.atomStore.partialCharge[this.index]=t)}get radius(){return this.atomStore.radius?this.atomStore.radius[this.index]:null}set radius(t){this.atomStore.radius&&(this.atomStore.radius[this.index]=t)}get formalCharge(){return this.atomStore.formalCharge?this.atomStore.formalCharge[this.index]:null}set formalCharge(t){this.atomStore.formalCharge&&(this.atomStore.formalCharge[this.index]=t)}get aromatic(){return this.atomStore.aromatic?this.atomStore.aromatic[this.index]:this.residueType.isAromatic(this)?1:0}set aromatic(t){this.atomStore.aromatic&&(this.atomStore.aromatic[this.index]=t)}get bondCount(){return this.bondHash.countArray[this.index]}eachBond(t,n){n=n||this.structure._bp;const r=this.index,i=this.bondHash,o=i.indexArray,s=i.countArray[r],a=i.offsetArray[r];for(let l=0;l<s;++l)n.index=o[a+l],t(n)}eachBondedAtom(t,n){const r=n||this.structure._ap,i=this.index;this.eachBond(function(o){r.index=i!==o.atomIndex1?o.atomIndex1:o.atomIndex2,t(r)}),this.index=i}hasBondTo(t){let n=!1;return this.eachBondedAtom(function(r){t.index===r.index&&(n=!0)}),n}bondToElementCount(t){let n=0;const r=this.index;return this.eachBondedAtom(function(i){i.number===t&&(n+=1)}),this.index=r,n}hasBondToElement(t){return this.bondToElementCount(t)>0}isBackbone(){const t=this.residueType.backboneIndexList;return t.length>0&&t.includes(this.index-this.residueAtomOffset)}isPolymer(){if(this.structure.entityList.length>0)return this.entity.isPolymer();{const t=this.residueType.moleculeType;return t===3||t===4||t===5}}isSidechain(){return this.isPolymer()&&!this.isBackbone()}isCg(){const t=this.residueType.backboneType;return t===4||t===5||t===6}isTrace(){return this.index===this.residueType.traceAtomIndex+this.residueAtomOffset}isHetero(){return this.residueType.hetero===1}isProtein(){return this.residueType.moleculeType===3}isNucleic(){const t=this.residueType.moleculeType;return t===4||t===5}isRna(){return this.residueType.moleculeType===4}isDna(){return this.residueType.moleculeType===5}isWater(){return this.residueType.moleculeType===1}isIon(){return this.residueType.moleculeType===2}isSaccharide(){return this.residueType.moleculeType===6}isHelix(){return Pre.includes(this.sstruc)}isSheet(){return Mre.includes(this.sstruc)}isTurn(){return Ere.includes(this.sstruc)&&this.isProtein()}isBonded(){return this.bondHash.countArray[this.index]!==0}isRing(){return this.residueType.getRings().atomRings[this.index-this.residueAtomOffset]!==void 0}isAromatic(){return this.aromatic===1}isPolarHydrogen(){let t=!1;return this.number!==1||(t=!this.hasBondToElement(6)),t}isMetal(){return this.atomType.isMetal()}isNonmetal(){return this.atomType.isNonmetal()}isMetalloid(){return this.atomType.isMetalloid()}isHalogen(){return this.atomType.isHalogen()}isDiatomicNonmetal(){return this.atomType.isDiatomicNonmetal()}isPolyatomicNonmetal(){return this.atomType.isPolyatomicNonmetal()}isAlkaliMetal(){return this.atomType.isAlkaliMetal()}isAlkalineEarthMetal(){return this.atomType.isAlkalineEarthMetal()}isNobleGas(){return this.atomType.isNobleGas()}isTransitionMetal(){return this.atomType.isTransitionMetal()}isPostTransitionMetal(){return this.atomType.isPostTransitionMetal()}isLanthanide(){return this.atomType.isLanthanide()}isActinide(){return this.atomType.isActinide()}getDefaultValence(){return this.atomType.getDefaultValence()}getValenceList(){return this.atomType.getValenceList()}getOuterShellElectronCount(){return this.atomType.getOuterShellElectronCount()}distanceTo(t){const n=this.atomStore,r=t.atomStore,i=this.index,o=t.index,s=n.x[i]-r.x[o],a=n.y[i]-r.y[o],l=n.z[i]-r.z[o],c=s*s+a*a+l*l;return Math.sqrt(c)}connectedTo(t){const n=this.atomStore,r=t.atomStore,i=this.index,o=t.index;if(n.altloc&&r.altloc){const h=n.altloc[i],p=r.altloc[o];if(h!==0&&p!==0&&h!==32&&p!==32&&h!==p)return!1}const s=n.x[i]-r.x[o],a=n.y[i]-r.y[o],l=n.z[i]-r.z[o],c=s*s+a*a+l*l;if(c<48&&this.isCg())return!0;if(isNaN(c))return!1;const u=this.covalent+t.covalent,d=u+.3,f=u-.5;return c<d*d&&c>f*f}positionFromArray(t,n=0){return this.x=t[n+0],this.y=t[n+1],this.z=t[n+2],this}positionToArray(t=[],n=0){const r=this.index,i=this.atomStore;return t[n+0]=i.x[r],t[n+1]=i.y[r],t[n+2]=i.z[r],t}positionToVector3(t){return t===void 0&&(t=new W),t.x=this.x,t.y=this.y,t.z=this.z,t}positionFromVector3(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}positionAdd(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}positionSub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}getResidueBonds(t=!1){const n=this.residueAtomOffset,r=this.index-this.residueAtomOffset,i=this.residueType.getBonds(),o=i.atomIndices1,s=i.atomIndices2;let a,l,c,u;for(t||(u=[]),a=o.indexOf(r);a!==-1;){if(c=s[a]+n,!u)return c;u.push(c),a=o.indexOf(r,a+1)}for(l=s.indexOf(r);l!==-1;){if(c=o[l]+n,!u)return c;u.push(c),l=s.indexOf(r,l+1)}return u}qualifiedName(t=!1){var n="";return this.resname&&!t&&(n+="["+this.resname+"]"),this.resno!==void 0&&(n+=this.resno),this.inscode&&(n+="^"+this.inscode),this.chainname&&(n+=":"+this.chainname),this.atomname&&(n+="."+this.atomname),this.altloc&&(n+="%"+this.altloc),this.structure.modelStore.count>1&&(n+="/"+this.modelIndex),n}clone(){return new UE(this.structure,this.index)}toObject(){return{index:this.index,residueIndex:this.residueIndex,resname:this.resname,x:this.x,y:this.y,z:this.z,element:this.element,chainname:this.chainname,resno:this.resno,serial:this.serial,vdw:this.vdw,covalent:this.covalent,hetero:this.hetero,bfactor:this.bfactor,altloc:this.altloc,atomname:this.atomname,modelIndex:this.modelIndex}}}function Yre(e,t){const n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function Xot(e,t){return Math.sqrt(Yre(e,t))}const XO=new Float32Array(3);class Kot{constructor(t,n=!1){Je&&Ve.time("Kdtree build");const r=n?Yre:Xot,i=new Float32Array(3*t.atomCount),o=new Uint32Array(t.atomCount);let s=0;t.eachAtom(function(a){i[s+0]=a.x,i[s+1]=a.y,i[s+2]=a.z,o[s/3]=a.index,s+=3}),this.atomIndices=o,this.points=i,this.kdtree=new Yot(i,r),Je&&Ve.timeEnd("Kdtree build")}nearest(t,n,r){t instanceof W?t.toArray(XO):t instanceof UE&&t.positionToArray(XO);const i=this.kdtree.nearest(XO,n,r),o=this.kdtree.indices,s=this.kdtree.nodes,a=this.atomIndices,l=[];for(let c=0,u=i.length;c<u;++c){const d=i[c],f=d[0],h=d[1];l.push({index:a[o[s[f]]],distance:h})}return l}}const Zot={" ":"X","!":"Y","#":"Z",$:"-X","%":"-Y","&":"-Z","'":"Y+1/2","(":"1/2+X",")":"1/2+Y","*":"1/2-X","+":"1/2+Z",",":"1/2-Y","-":"1/2-Z",".":"X+1/2","/":"Z+1/2",0:"-X+1/2",1:"-Y+1/2",2:"-Z+1/2",3:"1/4+X",4:"1/4-Y",5:"1/4+Z",6:"1/4-X",7:"1/4+Y",8:"3/4-Y",9:"3/4+Z",":":"3/4+Y",";":"3/4+X","<":"3/4-X","=":"1/4-Z",">":"3/4-Z","?":"X-Y","@":"Y-X",A:"Z+1/3",B:"Z+2/3",C:"X+2/3",D:"Y+1/3",E:"-Y+2/3",F:"X-Y+1/3",G:"Y-X+2/3",H:"-X+1/3",I:"X+1/3",J:"Y+2/3",K:"-Y+1/3",L:"X-Y+2/3",M:"Y-X+1/3",N:"-X+2/3",O:"2/3+X",P:"1/3+Y",Q:"1/3+Z",R:"2/3-Y",S:"1/3+X-Y",T:"2/3+Y-X",U:"1/3-X",V:"2/3-X",W:"1/3-Y",X:"1/3-Z",Y:"2/3+Y",Z:"1/3+Y-X","[":"2/3+X-Y","]":"1/3+X","^":"2/3+Z",_:"2/3-Z","`":"5/6+Z",a:"1/6+Z",b:"5/6-Z",c:"1/6-Z",d:"Z+5/6",e:"Z+1/6",f:"Z+1/4",g:"+Y"},Jot={"P 1":" !#","P -1":" !#$%&","P 1 2 1":" !#$!&","P 1 21 1":" !#$'&","C 1 2 1":" !#$!&()#*)&","P 1 m 1":" !# %#","P 1 c 1":" !# %+","C 1 m 1":" !# %#()#(,#","C 1 c 1":" !# %+()#(,+","P 1 2/m 1":" !# %#$!&$%&","P 1 21/m 1":" !#$)&$%& ,#","C 1 2/m 1":" !# %#$!&$%&()#(,#*)&*,&","P 1 2/c 1":" !#$!-$%& %+","P 1 21/c 1":" !#$%&$)- ,+","C 1 2/c 1":" !#$!-$%& %+()#*)-*,&(,+","P 2 2 2":" !#$%#$!& %&","P 2 2 21":" !#$%+$!- %&","P 21 21 2":" !#$%#*)&(,&","P 21 21 21":" !#*%+$)-(,&","C 2 2 21":" !#$%+$!- %&()#*,+*)-(,&","C 2 2 2":" !#$%#$!& %&()#*,#*)&(,&","F 2 2 2":" !#$%#$!& %& )+$,+$)- ,-(!+*%+*!-(%-()#*,#*)&(,&","I 2 2 2":" !#$%# %&$!&.'/01/.120'2","I 21 21 21":" !#*%+$)-(,&()+$,#*!& %-","P m m 2":" !#$%# %#$!#","P m c 21":" !#$%+ %+$!#","P c c 2":" !#$%# %+$!+","P m a 2":" !#$%#(%#*!#","P c a 21":" !#$%+(%#*!+","P n c 2":" !#$%# ,+$)+","P m n 21":" !#*%+(%+$!#","P b a 2":" !#$%#(,#*)#","P n a 21":" !#$%+(,#*)+","P n n 2":" !#$%#(,+*)+","C m m 2":" !#$%# %#$!#()#*,#(,#*)#","C m c 21":" !#$%+ %+$!#()#*,+(,+*)#","C c c 2":" !#$%# %+$!+()#*,#(,+*)+","A m m 2":" !#$%# %#$!# )+$,+ ,+$)+","A b m 2":" !#$%# ,#$)# )+$,+ %+$!+","A m a 2":" !#$%#(%#*!# )+$,+(,+*)+","A b a 2":" !#$%#(,#*)# )+$,+(%+*!+","F m m 2":" !#$%# %#$!# )+$,+ ,+$)+(!+*%+(%+*!+()#*,#(,#*)#","F d d 2":" !#$%#345675 )+$,+3896:9(!+*%+;49<79()#*,#;85<:5","I m m 2":" !#$%# %#$!#()+*,+(,+*)+","I b a 2":" !#$%#(,#*)#()+*,+ %+$!+","I m a 2":" !#$%#(%#*!#()+*,+ ,+$)+","P 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#","P 2/n 2/n 2/n":" !#$%#$!& %&*,-()-(,+*)+","P 2/c 2/c 2/m":" !#$%#$!- %-$%& !& %+$!+","P 2/b 2/a 2/n":" !#$%#$!& %&*,&()&(,#*)#","P 21/m 2/m 2/a":" !#*%#$!&(%&$%&(!& %#*!#","P 2/n 21/n 2/a":" !#*%#*)- ,-$%&(!&(,+$)+","P 2/m 2/n 21/a":" !#*%+*!- %&$%&(!-(%+$!#","P 21/c 2/c 2/a":" !#*%#$!-(%-$%&(!& %+*!+","P 21/b 21/a 2/m":" !#$%#*)&(,&$%& !&(,#*)#","P 21/c 21/c 2/n":" !#*,#$)-(%-$%&()& ,+*!+","P 2/b 21/c 21/m":" !#$%+$)- ,&$%& !- ,+$)#","P 21/n 21/n 2/m":" !#$%#*)-(,-$%& !&(,+*)+","P 21/m 21/m 2/n":" !#$%#*'&.,&*,&.'& %#$!#","P 21/b 2/c 21/n":" !#*,+$!-(,&$%&()- %+*)#","P 21/b 21/c 21/a":" !#*%+$)-(,&$%&(!- ,+*)#","P 21/n 21/m 21/a":" !#0%/$'&.12$%&.!2 1#0'/","C 2/m 2/c 21/m":" !#$%+$!- %&$%& !- %+$!#()#*,+*)-(,&*,&()-(,+*)#","C 2/m 2/c 21/a":" !#$,+$)- %&$%& )- ,+$!#()#*%+*!-(,&*,&(!-(%+*)#","C 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#()#*,#*)&(,&*,&()&(,#*)#","C 2/c 2/c 2/m":" !#$%#$!- %-$%& !& %+$!+()#*,#*)-(,-*,&()&(,+*)+","C 2/m 2/m 2/a":" !#$,#$)& %&$%& )& ,#$!#()#*%#*!&(,&*,&(!&(%#*)#","C 2/c 2/c 2/a":" !#*,#$!&(,&$,-(!- ,+*!+()#$%#*)& %&*%- )-(%+$)+","F 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!# )+$,+$)- ,-$,- )- ,+$)+(!+*%+*!-(%-*%-(!-(%+*!+()#*,#*)&(,&*,&()&(,#*)#","F 2/d 2/d 2/d":" !#$%#$!& %&64=37=345675 )+$,+$)- ,-68>3:>3896:9(!+*%+*!-(%-<4>;7>;49<79()#*,#*)&(,&<8=;:=;85<:5","I 2/m 2/m 2/m":" !#$%#$!& %&$%& !& %#$!#()+*,+*)-(,-*,-()-(,+*)+","I 2/b 2/a 2/m":" !#$%#*)&(,&$%& !&(,#*)#()+*,+$!- %-*,-()- %+$!+","I 21/b 21/c 21/a":" !#*%+$)-(,&$%&(!- ,+*)#()+$,#*!& %-*,- )&(%#$!+","I 21/m 21/m 21/a":" !#$,#$)& %&$%& )& ,#$!#()+*%+*!-(,-*,-(!-(%+*)+","P 4":" !#$%#% #!$#","P 41":" !#$%+% 5!$9","P 42":" !#$%#% +!$+","P 43":" !#$%+% 9!$5","I 4":" !#$%#% #!$#()+*,+,(+)*+","I 41":" !#*,+%(5)$9()+$%#, 9!*5","P -4":" !#$%#!$&% &","I -4":" !#$%#!$&% &()+*,+)*-,(-","P 4/m":" !#$%#% #!$#$%& !&!$&% &","P 42/m":" !#$%#% +!$+$%& !&!$-% -","P 4/n":" !#$%#,(#)*#*,&()&!$&% &","P 42/n":" !#$%#,(+)*+*,-()-!$&% &","I 4/m":" !#$%#% #!$#$%& !&!$&% &()+*,+,(+)*+*,-()-)*-,(-","I 41/a":" !#*,+%(5)$9$,=(!>!$&,(-()+$%#, 9!*5*%> )=)*-% &","P 4 2 2":" !#$%#% #!$#$!& %&! &%$&","P 4 21 2":" !#$%#,(#)*#*)&(,&! &%$&","P 41 2 2":" !#$%+% 5!$9$!& %-! >%$=","P 41 21 2":" !#$%+,(5)*9*)=(,>! &%$-","P 42 2 2":" !#$%#% +!$+$!& %&! -%$-","P 42 21 2":" !#$%#,(+)*+*)-(,-! &%$&","P 43 2 2":" !#$%+% 9!$5$!& %-! =%$>","P 43 21 2":" !#$%+,(9)*5*)>(,=! &%$-","I 4 2 2":" !#$%#% #!$#$!& %&! &%$&()+*,+,(+)*+*)-(,-)(-,*-","I 41 2 2":" !#*,+%(5)$9*!> ,=)(-%$&()+$%#, 9!*5$)=(%>! &,*-","P 4 m m":" !#$%#% #!$# %#$!#%$#! #","P 4 b m":" !#$%#% #!$#(,#*)#,*#)(#","P 42 c m":" !#$%#% +!$+ %+$!+%$#! #","P 42 n m":" !#$%#,(+)*+(,+*)+%$#! #","P 4 c c":" !#$%#% #!$# %+$!+%$+! +","P 4 n c":" !#$%#% #!$#(,+*)+,*+)(+","P 42 m c":" !#$%#% +!$+ %#$!#%$+! +","P 42 b c":" !#$%#% +!$+(,#*)#,*+)(+","I 4 m m":" !#$%#% #!$# %#$!#%$#! #()+*,+,(+)*+(,+*)+,*+)(+","I 4 c m":" !#$%#% #!$# %+$!+%$+! +()+*,+,(+)*+(,#*)#,*#)(#","I 41 m d":" !#*,+%(5)$9 %#*)+%*5) 9()+$%#, 9!*5(,+$!#,$9!(5","I 41 c d":" !#*,+%(5)$9 %+*)#%*9) 5()+$%#, 9!*5(,#$!+,$5!(9","P -4 2 m":" !#$%#% &!$&$!& %&%$#! #","P -4 2 c":" !#$%#% &!$&$!- %-%$+! +","P -4 21 m":" !#$%#% &!$&*)&(,&,*#)(#","P -4 21 c":" !#$%#% &!$&*)-(,-,*+)(+","P -4 m 2":" !#$%#!$&% & %#$!#! &%$&","P -4 c 2":" !#$%#% &!$& %+$!+! -%$-","P -4 b 2":" !#$%#% &!$&(,#*)#)(&,*&","P -4 n 2":" !#$%#% &!$&(,+*)+)(-,*-","I -4 m 2":" !#$%#% &!$& %#$!#! &%$&()+*,+,(-)*-(,+*)+)(-,*-","I -4 c 2":" !#$%#% &!$& %+$!+! -%$-()+*,+,(-)*-(,#*)#)(&,*&","I -4 2 m":" !#$%#% &!$&$!& %&%$#! #()+*,+,(-)*-*)-(,-,*+)(+","I -4 2 d":" !#$%#% &!$&*!>(%>,$9) 9()+*,+,(-)*-$)= ,=%*5!(5","P 4/m 2/m 2/m":" !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #","P 4/m 2/c 2/c":" !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +","P 4/n 2/b 2/m":" !#$%#% #!$#$!& %&! &%$&*,&()&)*&,(&(,#*)#,*#)(#","P 4/n 2/n 2/c":" !#$%#% #!$#$!& %&! &%$&*,-()-)*-,(-(,+*)+,*+)(+","P 4/m 21/b 2/m":" !#$%#% #!$#*)&(,&)(&,*&$%& !&!$&% &(,#*)#,*#)(#","P 4/m 21/n 2/c":" !#$%#% #!$#*)-(,-)(-,*-$%& !&!$&% &(,+*)+,*+)(+","P 4/n 21/m 2/m":" !#$%#,(#)*#*)&(,&! &%$&*,&()&!$&% & %#$!#,*#)(#","P 4/n 2/c 2/c":" !#$%#,(#)*#*)-(,-! -%$-*,&()&!$&% & %+$!+,*+)(+","P 42/m 2/m 2/c":" !#$%#% +!$+$!& %&! -%$-$%& !&!$-% - %#$!#%$+! +","P 42/m 2/c 2/m":" !#$%#% +!$+$!- %-! &%$&$%& !&!$-% - %+$!+%$#! #","P 42/n 2/b 2/c":" !#$%#,(+)*+$!- %-)(&,*&*,-()-!$&% &(,#*)#%$+! +","P 42/n 2/n 2/m":" !#$%#,(+)*+$!& %&)(-,*-*,-()-!$&% &(,+*)+%$#! #","P 42/m 21/b 2/c":" !#$%#% +!$+*)&(,&)(-,*-$%& !&!$-% -(,#*)#,*+)(+","P 42/m 21/n 2/m":" !#$%#,./'*/*'-.,-! &%$&$%& !&'*-,.-.,/*'/%$#! #","P 42/n 21/m 2/c":" !#$%#,(+)*+*)-(,-! &%$&*,-()-!$&% & %#$!#,*+)(+","P 42/n 21/c 2/m":" !#$%#,(+)*+*)&(,&! -%$-*,-()-!$&% & %+$!+,*#)(#","I 4/m 2/m 2/m":" !#$%#% #!$#$!& %&! &%$&$%& !&!$&% & %#$!#%$#! #()+*,+,(+)*+*)-(,-)(-,*-*,-()-)*-,(-(,+*)+,*+)(+","I 4/m 2/c 2/m":" !#$%#% #!$#$!- %-! -%$-$%& !&!$&% & %+$!+%$+! +()+*,+,(+)*+*)&(,&)(&,*&*,-()-)*-,(-(,#*)#,*#)(#","I 41/a 2/m 2/d":" !#*,+%(5)$9*!> ,=)(-%$&$,=(!>!$&,(-(,+$!#,$9!(5()+$%#, 9!*5$)=(%>! &,*-*%> )=)*-% & %#*)+%*5) 9","I 41/a 2/c 2/d":" !#*,+%(5)$9*!= ,>)(&%$-$,=(!>!$&,(-(,#$!+,$5!(9()+$%#, 9!*5$)>(%=! -,*&*%> )=)*-% & %+*)#%*9) 5","P 3":" !#%?#@$#","P 31":" !#%?A@$B","P 32":" !#%?B@$A","H 3":" !#%?#@$#CDAEFAGHAIJBKLBMNB","R 3":" !## !!# ","P -3":" !#%?#@$#$%&!@&? &","H -3":" !#%?#@$#$%&!@&? &OPQRSQTUQVWXYZX[]X]Y^W[^ZV^UR_PT_SO_","R -3":" !## !!# $%&&$%%&$","P 3 1 2":" !#%?#@$#%$&@!& ?&","P 3 2 1":" !#%?#@$#! &?%&$@&","P 31 1 2":" !#%?Q@$^%$_@!X ?&","P 31 2 1":" !#%?A@$B! &?%_$@X","P 32 1 2":" !#%?^@$Q%$X@!_ ?&","P 32 2 1":" !#%?B@$A! &?%X$@_","H 3 2":" !#%?#@$#! &?%&$@&OPQRSQTUQY]X[WXVZX]Y^W[^ZV^PO_SR_UT_","R 3 2":" !## !!# %$&$&%&%$","P 3 m 1":" !#%?#@$#%$#@!# ?#","P 3 1 m":" !#%?#@$#! #?%#$@#","P 3 c 1":" !#%?#@$#%$+@!+ ?+","P 3 1 c":" !#%?#@$#! +?%+$@+","H 3 m":" !#%?#@$#%$#@!# ?#OPQRSQTUQRUQTPQOSQ]Y^W[^ZV^WV^ZY^][^","R 3 m":" !## !!# ! # #!#! ","H 3 c":" !#%?#@$#%$+@!+ ?+OPQRSQTUQRU`TP`OS`]Y^W[^ZV^WVaZYa][a","R 3 c":" !## !!# '././'/'.","P -3 1 2/m":" !#%?#@$#%$&@!& ?&$%&!@&? &! #?%#$@#","P -3 1 2/c":" !#%?#@$#%$-@!- ?-$%&!@&? &! +?%+$@+","P -3 2/m 1":" !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#","P -3 2/c 1":" !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+","H -3 2/m":" !#%?#@$#! &?%&$@&$%&!@&? &%$#@!# ?#OPQRSQTUQY]X[WXVZXVWXYZX[]XRUQTPQOSQ]Y^W[^ZV^PO_SR_UT_UR_PT_SO_WV^ZY^][^","R -3 2/m":" !## !!# %$&$&%&%$$%&&$%%&$! # #!#! ","H -3 2/c":" !#%?#@$#! -?%-$@-$%&!@&? &%$+@!+ ?+OPQRSQTUQY]b[WbVZbVWXYZX[]XRU`TP`OS`]Y^W[^ZV^POcSRcUTcUR_PT_SO_WVaZYa][a","R -3 2/c":" !## !!# 102021210$%&&$%%&$'././'/'.","P 6":" !#%?#@$#$%#!@#? #","P 61":" !#%?A@$B$%/!@d? e","P 65":" !#%?B@$A$%/!@e? d","P 62":" !#%?^@$Q$%#!@^? Q","P 64":" !#%?Q@$^$%#!@Q? ^","P 63":" !#%?#@$#$%+!@+? +","P -6":" !#%?#@$# !&%?&@$&","P 6/m":" !#%?#@$#$%#!@#? #$%&!@&? & !&%?&@$&","P 63/m":" !#%?#@$#$%+!@+? +$%&!@&? & !-%?-@$-","P 6 2 2":" !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&","P 61 2 2":" !#%?Q@$^$%+!@`? a! X?%&$@_%$b@!- ?c","P 65 2 2":" !#%?^@$Q$%+!@a? `! _?%&$@X%$c@!- ?b","P 62 2 2":" !#%?^@$Q$%#!@^? Q! _?%&$@X%$_@!& ?X","P 64 2 2":" !#%?Q@$^$%#!@Q? ^! X?%&$@_%$X@!& ?_","P 63 2 2":" !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-","P 6 m m":" !#%?#@$#$%#!@#? #%$#@!# ?#! #?%#$@#","P 6 c c":" !#%?#@$#$%#!@#? #%$+@!+ ?+! +?%+$@+","P 63 c m":" !#%?#@$#$%+!@+? +%$+@!+ ?+! #?%#$@#","P 63 m c":" !#%?#@$#$%+!@+? +%$#@!# ?#! +?%+$@+","P -6 m 2":" !#%?#@$# !&%?&@$&%$#@!# ?#%$&@!& ?&","P -6 c 2":" !#%?#@$# !-%?-@$-%$+@!+ ?+%$&@!& ?&","P -6 2 m":" !#%?#@$# !&%?&@$&! &?%&$@&! #?%#$@#","P -6 2 c":" !#%?#@$# !-%?-@$-! &?%&$@&! +?%+$@+","P 6/m 2/m 2/m":" !#%?#@$#$%#!@#? #! &?%&$@&%$&@!& ?&$%&!@&? & !&@$&%?&%$#@!# ?#! #?%#$@#","P 6/m 2/c 2/c":" !#%?#@$#$%#!@#? #! -?%-$@-%$-@!- ?-$%&!@&? & !&@$&%?&%$+@!+ ?+! +?%+$@+","P 63/m 2/c 2/m":" !#%?#@$#$%+!@+? +! -?%-$@-%$&@!& ?&$%&!@&? & !-@$-%?-%$+@!+ ?+! #?%#$@#","P 63/m 2/m 2/c":" !#%?#@$#$%+!@+? +! &?%&$@&%$-@!- ?-$%&!@&? & !-@$-%?-%$#@!# ?#! +?%+$@+","P 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ","F 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%&  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ","I 2 3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(","P 21 3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(","I 21 3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- ","P 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$","P 2/n -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& *,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*","F 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-($,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- *,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$","F 2/d -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& 64=37=345675=64=375345674=67=3453756 )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(68>3:>3896:9=<8=;:5;85<:4><7>;49;79<(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(<4>;7>;49<79>68>3:93896:8=<:=;85;:5<()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- <8=;:=;8f<:f><4>;79;49<78>6:>3893:96","I 2/m -3":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& $%& !& %#$!#&$%& !# %#$!%&$!& %# !#$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-(*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*","P 21/a -3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*","I 21/a -3":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&($%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*()+$,#*g& %-+()#$,&*!- %)+(,#$!&*%- *,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$","P 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$","P 42 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*","F 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$ )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*(!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%*()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$","F 41 3 2":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46 )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<(!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86","I 4 3 2":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*","P 43 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7;>46=:<5839398<5:6=4;>75:<983>7;=46","P 41 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<","I 41 3 2":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46","P -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ","F -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&%  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(+%*+!*-%(- +)$+,$-) -,#)(#,*&)*&,((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() +,$+)$-, -(#)*#,*&)(&,+!(+%*-!*-%(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(#,*#)*&,(&(+!*+%*-!(-%+) +,$-)$-, ","I -4 3 m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! #%$#!$&% & #!$#%$&! &%#! #%$&!$&% ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(","P -4 3 n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,(","F -4 3 c":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(+,*+)*-,(-(+)*+,*-)(-,+)(+,*-)*-,( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() #,$#)$&, &(#!*#%*&!(&%+! +%$-!$-% (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(#%*#!*&%(& +!$+%$-! -%#) #,$&)$&, ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! +%$+!$-% - #)$#,$&) &,#!(#%*&!*&%(","I -4 3 d":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(7354<9:6>8;=357<946>:;=857394<>:6=8;()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- :;98657<=43>;9:658<=73>49:;586=7<>43","P 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ","P 4/n -3 2/n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$*,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","P 42/m -3 2/n":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","P 42/n -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ","F 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#!  )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-(!(-%*-!*+%(+ +,$+)$-, -)#)*#,(&)(&,*$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*%*+!(+%(-!*-$-) -, +)$+,&,(&)*#,*#)((!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&() -,$-)$+, +(#,*#)*&,(&)+!*+%(-!(-%**%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*,$+) +, -)$-*&)(&,(#)*#,-%(-!*+%*+!(()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- )(&,*&)*#,(#(+%*+!*-%(-!+)$+, -) -,$*,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$,*#)(#,(&)*&*-!(-%(+!*+%-, -)$+,$+) ","F 4/m -3 2/c":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& )(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,*$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)( )+$,+$)- ,-#()#*,&*)&(,!+(%+*!-*%-() &,$&)$#, #(#%*#!*&%(&!+!$+% -! -%$$,- )- ,+$)+&*,&()#(,#*)%-*!-(%+(!+*,$#) #, &)$&*&!(&%(#!*#%-% -!$+%$+! (!+*%+*!-(%-+ )+$,-$)- ,)#(,#*)&*,&(!(&%*&!*#%(# +%$+!$-% -!#)$#, &) &,$*%-(!-(%+*!+-$,- )+ ,+$),&*)&(,#()#*%*#!(#%(&!*&$-! -% +!$+%&, &)$#,$#) ()#*,#*)&(,&+(!+*%-*!-(%)+ ,+$)-$,- ! -%$-!$+% + #,$#)$&, &)#!*#%(&!(&%**,&()&(,#*)#-*%-(!+(%+*!,-$)- ,+ )+$%$+! +% -!$-$&) &, #)$#,&%(&!*#%*#!(","F 41/d -3 2/m":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=4664=3:>;85<79=64>3:5;89<74=6:>385;79<,$+! #%(-)*&*&)(-% #!$+,-%(&)*+,$#!  )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<68>37=;49<:5=<8>;753496:4><:=;893756,*#!(+% &)$-*-!(&, +)$#%-, &!$+%*#)((!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<<4>;:=389675>68=379;45<:8=<7>;453:96%$#) +,(&!*-$&! -,(#)*+%&% -)$#,*+!(()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>86<8=;7>3456:9><4=;:9385678>67=349;:5<%*+)(#, -!$&$-) &%(+!*#,&,(-!*#%$+) ","F 41/d -3 2/c":" !#$,+*)&(%-# !+$,&*)-(%!# ,+$)&*%-(:3>46=7<98;5;58<976=43>:97<58;>:3=46<8>;7=3496:5><8=;793456:8><7=;493:56%*#)(+, &!$-$-! &,(+)*#%&, -!$#%*+)( )+$%#*!-(,&#()+*%&$!- ,!+(,#*)-$%& :;=4<>765839;94<5:6>83=79:6543>7;=8<<4=;:>385679>64=3:9;85<78=67>345;:9<%$+) #,(-!*&$&) -%(#!*+,&%(-)*#,$+! (!+*,#$)- %&+ )#$%-*!&(,)#(%+*!&$,- 73=86>:<54;935469:<=8;>7576983=:;>4<68=37>;45<:9=<4>;:5389674>6:=389;75<,*+!(#% -)$&*-)(&% +!$#,-,(&!*+%$#) ()#*%+$!& ,-+(!#*,-$)& %)+ %#$!-*,&(7;>8<=:69435398657<>4;=:5:<94;=73>8664>3:=;89<75=68>375;49<:4=<:>;853796,$#! +%(&)*-*&!(-, #)$+%-% &)$+,*#!(","I 4/m -3 2/m":" !#$%#$!& %&# !#$%&$!& %!# %#$!&$%& ! &%$&!$#% # #%$#!$&% &!#!$#% &! &%$$%& !& %#$!#&$%& !# %#$!%&$!& %# !#$%$#! #% &!$&$&! &% #!$#%&% &!$#%$#! ()+*,+*)-(,-+()+*,-*)-(,)+(,+*)-*,-()(-,*-)*+,(+(+,*+)*-,(-)+)*+,(-)(-,**,-()-(,+*)+-*,-()+(,+*),-*)-(,+()+*,*+)(+,(-)*-*-)(-,(+)*+,-,(-)*+,*+)(","I 41/a -3 2/d":" !#*%+$)-(,&# !+*%-$)&(,!# %+*)-$,&(:3=8<>7694;5;54697<>83=:97654;=:3>8<$%&(!- ,+*)#&$%-(!+ ,#*)%&$!-(,+ )#*4<97358;=:6>6>:;=8357<94=8;>:694<573()+$,#*!& %-+()#$,&*!- %)+(,#$!&*%- 7;>46=:<5839398<5:6=4;>75:<983>7;=46*,- )&(%#$!+-*,& )#(%+$!,-*)& %#(!+$865:;943>7<=<=73>4;9:658>43=7<5869:;","P 1 1 2":" !#$%#","P 1 1 21":" !#$%+","B 1 1 2":" !#$%#(g+*%+","A 1 2 1":" !#$!& )+$)-","C 1 21 1":" !#$)&()#*!&","I 1 2 1":" !#$!&.'/0'2","I 1 21 1":" !#$)&.'/0!-","P 1 1 m":" !# !&","P 1 1 b":" !# )&","B 1 1 m":" !# !&(!+(!-","B 1 1 b":" !# )&(!+()-","P 1 1 2/m":" !# !&$%#$%&","P 1 1 21/m":" !#$%+$%& !-","B 1 1 2/m":" !# !&$%#$%&(!+(!-*%+*%-","P 1 1 2/b":" !#$,#$%& )&","P 1 1 21/b":" !#$%&$,+ )-","B 1 1 2/b":" !#$,#$%& )&(!+*,+*%-()-","P 21 2 2":" !#$!&(%&*%#","P 2 21 2":" !# ,&$)&$%#","P 21 21 2 (a)":" !#*,#.%&$'&","P 21 2 21":" !#$!&(%-*%+","P 2 21 21":" !# %&$)-$,+","C 2 2 21a)":" !#*%+(,&$)-()#$,+ %&*!-","C 2 2 2a":" !#*,#.%&$'&()#$%# ,&*!&","F 2 2 2a":" !#*,#.%&$'& '/*%/.12$!2.!/$,/ %20'2.'#$%# 1&0!&","I 2 2 2a":" !#*,#.%&$'&()+$%+*!- ,-","P 21/m 21/m 2/n a":" !#*,#$)&(%&$%&.'& ,#*!#","P 42 21 2a":" !#*,#%.+'$+$'&.%&! -,*-","I 2 3a":" !#*,#.%&$'&!# ,- '&$%/$# !-*!/$%&.%()+$%+ ,-*!-)+(%&(!-*,#*+()&$)#*,- ,"},Qot=/^[1-9]$/;function Xre(e){let t="";return e.length>0&&(t=":"+tB(e).join(" OR :")),new Xn(t)}class Qu{constructor(t=""){this.name=t,this.partList=[]}get type(){return"Assembly"}addPart(t,n){const r=new est(t,n);return this.partList.push(r),r}getAtomCount(t){return this.partList.reduce((n,r)=>n+r.getAtomCount(t),0)}getResidueCount(t){return this.partList.reduce((n,r)=>n+r.getResidueCount(t),0)}getInstanceCount(){let t=0;return this.partList.forEach(function(n){t+=n.matrixList.length}),t}isIdentity(t){if(this.partList.length!==1)return!1;const n=this.partList[0];if(n.matrixList.length!==1||!new lt().equals(n.matrixList[0]))return!1;let r=[];return t.eachChain(function(i){r.push(i.chainname)}),r=tB(r),n.chainList.length===r.length}getBoundingBox(t){const n=new zn;return this.partList.forEach(function(r){const i=r.getBoundingBox(t);n.expandByPoint(i.min),n.expandByPoint(i.max)}),n}getCenter(t){return this.getBoundingBox(t).getCenter(new W)}getSelection(){let t=[];return this.partList.forEach(function(n){t=t.concat(n.chainList)}),Xre(t)}}class est{constructor(t=[],n=[]){this.matrixList=t,this.chainList=n}get type(){return"AssemblyPart"}_getCount(t,n){let r=0;return t.eachChain(i=>{(this.chainList.length===0||this.chainList.includes(i.chainname))&&(r+=i[n])}),this.matrixList.length*r}getAtomCount(t){return this._getCount(t,"atomCount")}getResidueCount(t){return this._getCount(t,"residueCount")}getBoundingBox(t){const n=new zn,r=new zn,i=this.getSelection(),o=t.getBoundingBox(i);return this.matrixList.forEach(function(s){r.copy(o).applyMatrix4(s),n.expandByPoint(r.min),n.expandByPoint(r.max)}),n}getSelection(){return Xre(this.chainList)}getView(t){const n=this.getSelection();return n?t.getView(n):t}getInstanceList(){const t=[];for(let n=0,r=this.matrixList.length;n<r;++n)t.push({id:n+1,name:n,matrix:this.matrixList[n]});return t}}class tst{constructor(t){this.structure=t,this.currentModelindex=null,this.currentChainid=null,this.currentResname=null,this.currentResno=null,this.currentInscode=void 0,this.currentHetero=null,this.previousResname="",this.previousHetero=null,this.ai=-1,this.ri=-1,this.ci=-1,this.mi=-1}addResidueType(t){const n=this.structure.atomStore,r=this.structure.residueStore,i=this.structure.residueMap,o=r.atomCount[t],s=r.atomOffset[t],a=new Array(o);for(let l=0;l<o;++l)a[l]=n.atomTypeId[s+l];r.residueTypeId[t]=i.add(this.previousResname,a,this.previousHetero)}addAtom(t,n,r,i,o,s,a,l){const c=this.structure.atomStore,u=this.structure.residueStore,d=this.structure.chainStore,f=this.structure.modelStore;let h=!1,p=!1,g=!1;this.currentModelindex!==t?(h=!0,p=!0,g=!0,this.mi+=1,this.ci+=1,this.ri+=1):this.currentChainid!==r?(p=!0,g=!0,this.ci+=1,this.ri+=1):this.currentResno===o&&this.currentResname===i&&this.currentInscode===l||(g=!0,this.ri+=1),this.ai+=1,h&&(f.growIfFull(),f.chainOffset[this.mi]=this.ci,f.chainCount[this.mi]=0,f.count+=1,d.modelIndex[this.ci]=this.mi),p&&(d.growIfFull(),d.setChainname(this.ci,n),d.setChainid(this.ci,r),d.residueOffset[this.ci]=this.ri,d.residueCount[this.ci]=0,d.count+=1,d.modelIndex[this.ci]=this.mi,f.chainCount[this.mi]+=1,u.chainIndex[this.ri]=this.ci),g&&(this.previousResname=this.currentResname,this.previousHetero=this.currentHetero,this.ri>0&&this.addResidueType(this.ri-1),u.growIfFull(),u.resno[this.ri]=o,a!==void 0&&(u.sstruc[this.ri]=a.charCodeAt(0)),l!==void 0&&(u.inscode[this.ri]=l.charCodeAt(0)),u.atomOffset[this.ri]=this.ai,u.atomCount[this.ri]=0,u.count+=1,u.chainIndex[this.ri]=this.ci,d.residueCount[this.ci]+=1),c.count+=1,c.residueIndex[this.ai]=this.ri,u.atomCount[this.ri]+=1,this.currentModelindex=t,this.currentChainid=r,this.currentResname=i,this.currentResno=o,this.currentInscode=l,this.currentHetero=s}finalize(){this.previousResname=this.currentResname,this.previousHetero=this.currentHetero,this.ri>-1&&this.addResidueType(this.ri)}}function Kre(e,t){if(!t)return;Je&&Ve.time("assignSecondaryStructure");const n=[];e.eachModel(function(c){c.eachChain(function(u){n.push(u.chainname)})});const r=n.slice().sort(),i=[];r.forEach(function(c){i.push(n.indexOf(c))});const o=t.helices.filter(function(c){return rf(r,c[0])>=0});o.sort(function(c,u){const d=c[0],f=u[0],h=c[1],p=u[1];if(d===f)return h===p?0:h<p?-1:1;{const g=rf(r,d),v=rf(r,f);return i[g]<i[v]?-1:1}});const s=e.residueStore;e.eachModel(function(c){let u=0;const d=o.length;if(d===0)return;let f=o[u],h=!1,p=!1;c.eachChain(function(g){let v=!1;if(g.chainname===f[0]){const m=g.residueCount,y=g.residueOffset,b=y+m;for(let _=y;_<b;++_)if(s.resno[_]===f[1]&&s.getInscode(_)===f[2]&&(h=!0),h&&(s.sstruc[_]=f[6],s.resno[_]===f[4]&&s.getInscode(_)===f[5]&&(h=!1,u+=1,u<d?(_=y-1,f=o[u],v=g.chainname!==f[0]):p=!0)),v||p)return}})});const a=t.sheets.filter(function(c){return rf(r,c[0])>=0});a.sort(function(c,u){const d=c[0],f=u[0];if(d===f)return 0;const h=rf(r,d),p=rf(r,f);return i[h]<i[p]?-1:1});const l=101;e.eachModel(function(c){let u=0;const d=a.length;if(d===0)return;let f=a[u],h=!1,p=!1;c.eachChain(function(g){let v=!1;if(g.chainname===f[0]){const m=g.residueCount,y=g.residueOffset,b=y+m;for(let _=y;_<b;++_)if(s.resno[_]===f[1]&&s.getInscode(_)===f[2]&&(h=!0),h&&(s.sstruc[_]=l,s.resno[_]===f[4]&&s.getInscode(_)===f[5]&&(h=!1,u+=1,u<d?(_=y-1,f=a[u],v=g.chainname!==f[0]):p=!0)),v||p)return}})}),Je&&Ve.timeEnd("assignSecondaryStructure")}const VE=function(){const e=function(r,i,o,s){const a=r.structure,l=r.residueIndexStart,c=a.getResidueProxy(),u=a.getResidueProxy(),d=a.getAtomProxy(),f=a.getAtomProxy();for(let h=Math.max(0,i-2);h<=i;++h)for(let p=2;p<5;++p){if(h+p>=r.residueCount)continue;c.index=l+h,u.index=l+h+p,d.index=c.traceAtomIndex,f.index=u.traceAtomIndex;const g=d.distanceTo(f);if(Math.abs(g-o[p-2])>s)return!1}return!0},t=function(r,i){return e(r,i,[5.45,5.18,6.37],2.1)},n=function(r,i){return e(r,i,[6.1,10.4,13],1.42)};return function(r){Je&&Ve.time("calculateSecondaryStructure"),r.eachPolymer(function(i){if(i.residueCount<4)return;if(i.isCg())(function(a){const l=a.residueStore,c=a.residueIndexStart,u=new qre(a).position,d=new W,f=new W;for(let h=0,p=a.residueCount;h<p;++h){d.fromArray(u.center,3*h),f.fromArray(u.center,3*h+3);const g=d.distanceTo(f);g<2&&g>1&&u.bending[h]<20&&(l.sstruc[c+h]=104,l.sstruc[c+h+1]=104)}})(i);else{if(!i.isProtein())return;(function(a){const l=a.residueStore,c=a.residueIndexStart;for(let u=0,d=a.residueCount;u<d;++u){let f="c";t(a,u)?f="h":n(a,u)&&(f="e"),l.sstruc[c+u]=f.charCodeAt(0)}})(i)}let o,s=0;i.eachResidue(function(a){a.sstruc===o?s+=1:(s===1&&(a.index-=1,a.sstruc="c"),s=1,o=a.sstruc)})}),Je&&Ve.timeEnd("calculateSecondaryStructure")}}(),KO="ABCDEFGHIJKLMNOPQRSTUVWXYZ";function qb(e){const t=KO.length;let n=e,r=0,i=KO[n%t];for(;n>=t;)n=Math.floor(n/t),i+=KO[n%t],r+=1;return r>=5&&Ve.warn("chainname overflow"),i}function HE(e,t=!1){Je&&Ve.time("calculateChainnames");let n=!0;if(e.eachChain(function(r){r.chainname&&(n=!1)}),n){const r=e.modelStore,i=e.chainStore,o=e.residueStore,s=function(g,v,m,y){const b=i.count;for(let _=0;_<y;++_)o.chainIndex[m+_]=b;i.growIfFull(),i.modelIndex[b]=g,i.setChainname(b,v),i.setChainid(b,v),i.residueOffset[b]=m,i.residueCount[b]=y,i.count+=1,r.chainCount[g]+=1},a=e.getAtomProxy(),l=e.getAtomProxy();let c=0,u=0,d=0,f=0;const h=[];o.count===1?h.push({mIndex:0,chainname:"A",rStart:0,rCount:1}):e.eachResidueN(2,function(g,v){let m=!1;const y=g.backboneType,b=v.backboneType,_=dh;f=g.index,g.modelIndex!==v.modelIndex||g.moleculeType!==v.moleculeType?m=!0:y!==_&&y===b&&(a.index=g.backboneEndAtomIndex,l.index=v.backboneStartAtomIndex,m=t?!a.hasBondTo(l):!a.connectedTo(l)),m||v.index!==o.count-1||(m=!0,f=v.index),m&&(h.push({mIndex:u,chainname:qb(c),rStart:d,rCount:f-d+1}),c+=1,g.modelIndex!==v.modelIndex&&(c=0,u+=1),v.index===o.count-1&&f!==v.index&&h.push({mIndex:u,chainname:qb(c),rStart:o.count-1,rCount:1}),d=v.index,f=v.index)}),i.count=0,r.chainCount.fill(0,0,r.count),r.chainOffset.fill(0,0,r.count),h.forEach(function(g){s(g.mIndex,g.chainname,g.rStart,g.rCount)});let p=0;e.eachModel(function(g){r.chainOffset[g.index]=p,p+=r.chainCount[g.index]})}Je&&Ve.timeEnd("calculateChainnames")}function AC(e,t="all"){t!=="none"&&(Je&&Ve.time("calculateBonds"),yv(e,!1,t),bv(e),Je&&Ve.timeEnd("calculateBonds"))}const nst={"HIS|CD2|CG":2,"HIS|CE1|ND1":2,"ARG|CZ|NH2":2,"PHE|CE1|CZ":2,"PHE|CD2|CE2":2,"PHE|CD1|CG":2,"TRP|CD1|CG":2,"TRP|CD2|CE2":2,"TRP|CE3|CZ3":2,"TRP|CH2|CZ2":2,"ASN|CG|OD1":2,"GLN|CD|OE1":2,"TYR|CD1|CG":2,"TYR|CD2|CE2":2,"TYR|CE1|CZ":2,"ASP|CG|OD1":2,"GLU|CD|OE1":2,"G|C8|N7":2,"G|C4|C5":2,"G|C2|N3":2,"G|C6|O6":2,"C|C4|N3":2,"C|C5|C6":2,"C|C2|O2":2,"A|C2|N3":2,"A|C6|N1":2,"A|C4|C5":2,"A|C8|N7":2,"U|C5|C6":2,"U|C2|O2":2,"U|C4|O4":2,"DG|C8|N7":2,"DG|C4|C5":2,"DG|C2|N3":2,"DG|C6|O6":2,"DC|C4|N3":2,"DC|C5|C6":2,"DC|C2|O2":2,"DA|C2|N3":2,"DA|C6|N1":2,"DA|C4|C5":2,"DA|C8|N7":2,"DT|C5|C6":2,"DT|C2|O2":2,"DT|C4|O4":2};function b7(e,t,n){return[t,n]=t<n?[t,n]:[n,t],bm.includes(e)&&t==="C"&&n==="O"||xy.includes(e)&&t==="OP1"&&n==="P"?2:nst[`${e}|${t}|${n}`]||1}function yv(e,t=!1,n="all"){Je&&Ve.time("calculateBondsWithin");const r=e.bondStore,i=e.rungBondStore,o=e.getAtomSet(!1),s=e.getAtomProxy(),a=e.getAtomProxy(),l=e.getBondProxy(),c=t?null:function(d){Je&&Ve.time("calculateAtomBondMap");var f=[];return d.eachBond(function(h){var p=h.atomIndex1,g=h.atomIndex2;f[p]===void 0&&(f[p]=[]),f[p][g]=h.index}),Je&&Ve.timeEnd("calculateAtomBondMap"),f}(e);let u;t||n!=="auto"||(u=new Set,c.forEach((d,f)=>{u.add(f),d.forEach(h=>{u.add(h)})})),e.eachResidue(function(d){if(!t&&c){const p=d.atomCount,g=d.atomOffset;if(p>500)return void Ve.warn("more than 500 atoms, skip residue for auto-bonding",d.qualifiedName());if(n==="auto"&&d.hetero){for(let x=d.atomOffset;x<d.atomEnd;x++)if(u.has(x))return}const v=d.getBonds(),m=v.atomIndices1,y=v.atomIndices2,b=v.bondOrders,_=m.length;for(let x=0;x<_;++x){const w=m[x],S=y[x],C=w+g,A=S+g,T=c[C];T!==void 0&&T[A]!==void 0?(l.index=T[A],b[d.residueType.getBondIndex(w,S)]=l.bondOrder):(s.index=C,a.index=A,r.addBond(s,a,b[x]))}}const f=d.residueType.traceAtomIndex,h=d.residueType.rungEndAtomIndex;f!==-1&&h!==-1&&(s.index=d.traceAtomIndex,a.index=d.rungEndAtomIndex,i.addBond(s,a),o.set(s.index),o.set(a.index))}),e.atomSetDict.rung=o,Je&&Ve.timeEnd("calculateBondsWithin")}function bv(e,t=!1,n=!1){Je&&Ve.time("calculateBondsBetween");const r=e.bondStore,i=e.backboneBondStore,o=e.getAtomSet(!1),s=e.getAtomProxy(),a=e.getAtomProxy();function l(d,f){const h=d.backboneType,p=f.backboneType;if(h!==dh&&h===p){s.index=d.backboneEndAtomIndex,a.index=f.backboneStartAtomIndex;let g=!1,v=!1;n&&s.hasBondTo(a)?(g=!1,v=!0):s.connectedTo(a)&&(g=!t,v=!0),g&&r.addBond(s,a,1),v&&(s.index=d.traceAtomIndex,a.index=f.traceAtomIndex,i.addBond(s,a),o.set(s.index),o.set(a.index))}}i.count===0&&i.resize(e.residueStore.count),e.eachResidueN(2,l);const c=e.getResidueProxy(),u=e.getResidueProxy();if(e.eachChain(function(d){d.residueCount!==0&&(c.index=d.residueOffset,u.index=d.residueOffset+d.residueCount-1,l(u,c))}),e.atomSetDict.backbone=o,!t){Je&&Ve.time("calculateBondsBetween inter");const d=e.spatialHash;e.eachResidue(function(f){f.backboneType!==dh||f.isWater()||f.eachAtom(function(h){h.isMetal()||d.eachWithin(h.x,h.y,h.z,4,function(p){a.index=p,h.modelIndex!==a.modelIndex||h.residueIndex===a.residueIndex||a.isMetal()||r.addBondIfConnected(h,a,1)})})}),Je&&Ve.timeEnd("calculateBondsBetween inter")}Je&&Ve.timeEnd("calculateBondsBetween")}function PC(e){if(!e.unitcell)return;Je&&Ve.time("buildUnitcellAssembly");const t=e.unitcell,n=e.center.clone().applyMatrix4(t.cartToFrac),r=n.clone().floor(),i=function(p){const g=Jot[p],v={};if(g===void 0)return console.warn(`spacegroup '${p}' not found in symop library`),v;const m=[];for(let y=0,b=g.length;y<b;y+=3){const _=[];for(let x=0;x<3;++x)_.push(Zot[g[y+x]]);m.push(_)}return m.forEach(function(y){let b=0;const _=new lt().set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1),x=_.elements;v[y.toString()]=_,y.forEach(function(w){let S=!1,C=!1;for(let A=0,T=w.length;A<T;++A){const O=w[A];if(O==="-")S=!0;else if(O==="+")S=!1;else if(O==="/")C=!0;else if(O==="X")x[0+b]=S?-1:1;else if(O==="Y")x[4+b]=S?-1:1;else if(O==="Z")x[8+b]=S?-1:1;else if(Qot.test(O)){const R=parseInt(O);C?x[12+b]/=R:x[12+b]=R}else Ve.warn(`getSymmetryOperations: unknown token '${O}'`)}b+=1})}),v}(t.spacegroup),o=new W,s=new W;function a(p){const g=[];return Object.keys(i).forEach(function(v){const m=i[v].clone();o.copy(n).applyMatrix4(m).floor(),s.setFromMatrixPosition(m),s.sub(o),s.add(r),p&&s.add(p),m.setPosition(s),m.multiplyMatrices(t.fracToCart,m),m.multiply(t.cartToFrac),g.push(m)}),g}const l=new Qu("UNITCELL"),c=a(),u=[];if(e.biomolDict.NCS){u.push(new lt,...e.biomolDict.NCS.partList[0].matrixList);const p=[];c.forEach(g=>{u.forEach(v=>{p.push(g.clone().multiply(v))})}),l.addPart(p)}else l.addPart(c);const d=new W,f=new Qu("SUPERCELL"),h=Array.prototype.concat.call(a(d.set(1,0,0)),a(d.set(0,1,0)),a(d.set(0,0,1)),a(d.set(-1,0,0)),a(d.set(0,-1,0)),a(d.set(0,0,-1)),a(d.set(1,1,0)),a(d.set(1,0,1)),a(d.set(0,1,1)),a(d.set(-1,-1,0)),a(d.set(-1,0,-1)),a(d.set(0,-1,-1)),a(d.set(1,-1,-1)),a(d.set(1,1,-1)),a(d.set(1,-1,1)),a(d.set(-1,1,1)),a(d.set(-1,-1,1)),a(d.set(-1,1,-1)),a(d.set(0,1,-1)),a(d.set(0,-1,1)),a(d.set(1,0,-1)),a(d.set(-1,0,1)),a(d.set(1,-1,0)),a(d.set(-1,1,0)),a(),a(d.set(1,1,1)),a(d.set(-1,-1,-1)));if(e.biomolDict.NCS){const p=[];h.forEach(function(g){u.forEach(function(v){p.push(g.clone().multiply(v))})}),f.addPart(p)}else f.addPart(h);e.biomolDict.UNITCELL=l,e.biomolDict.SUPERCELL=f,Je&&Ve.timeEnd("buildUnitcellAssembly")}const x7=["H","C","O","N","S","P"],rst=["NA","CL","FE"];function uB(e){let t=e.toUpperCase(),n=0,r=0;for(let o=0;o<t.length;o++)if(t.charCodeAt(o)<65){if(r>0)break;++n}else r=o+1;(n>0||r<t.length)&&(t=t.substring(n,r));const i=t.length;if(i===0)return"";if(i===1)return t;if(i===2){if(rst.indexOf(t)!==-1)return t;if(x7.indexOf(t[0])!==-1)return t[0];if(t in Tre)return t}return i>=3&&x7.indexOf(t[0])!==-1?t[0]:""}function fh(e){const t=e.bondHash,n=t.countArray,r=t.offsetArray,i=t.indexArray,o=e.getBondProxy();e.eachResidue(function(s){const a=s.residueType;if(a.bonds!==void 0)return;var l=s.atomOffset,c=[],u=[],d=[],f={};const h=l+s.atomCount;s.eachAtom(function(p){const g=p.index,v=r[g];for(let m=0,y=n[g];m<y;++m){o.index=i[v+m];let b=o.atomIndex1;if(b<l||b>=h)continue;let _=o.atomIndex2;if(_<l||_>=h)continue;if(b>_){const w=_;_=b,b=w}const x=b+"|"+_;f[x]===void 0&&(f[x]=!0,c.push(b-l),u.push(_-l),d.push(o.bondOrder))}}),a.bonds={atomIndices1:c,atomIndices2:u,bondOrders:d}})}const ist=[3,11,19,37,55,87],ost=[4,12,20,38,56,88],sst=[6,15,16,34],ast=[1,7,8,9,17,35,53],lst=[2,10,18,36,54,86],cst=[13,30,31,48,49,50,80,81,82,83,84,85,112],ust=[5,14,32,33,51,52,85],dst=[9,17,35,53,85];class fst{constructor(t,n,r){this.structure=t,this.atomname=n,r=r||uB(n),this.element=r,this.number=Tre[r]||0,this.vdw=Git[this.number]||2,this.covalent=Wit[this.number]||1.6}getDefaultValence(){const t=o7[this.number];return t?t[0]:-1}getValenceList(){return o7[this.number]||[]}getOuterShellElectronCount(){return qit[this.number]||2}isMetal(){return this.isAlkaliMetal()||this.isAlkalineEarthMetal()||this.isLanthanide()||this.isActinide()||this.isTransitionMetal()||this.isPostTransitionMetal()}isNonmetal(){return this.isDiatomicNonmetal()||this.isPolyatomicNonmetal()||this.isNobleGas()}isMetalloid(){return ust.includes(this.number)}isHalogen(){return dst.includes(this.number)}isDiatomicNonmetal(){return ast.includes(this.number)}isPolyatomicNonmetal(){return sst.includes(this.number)}isAlkaliMetal(){return ist.includes(this.number)}isAlkalineEarthMetal(){return ost.includes(this.number)}isNobleGas(){return lst.includes(this.number)}isTransitionMetal(){const t=this.number;return t>=21&&t<=29||t>=39&&t<=47||t>=72&&t<=79||t>=104&&t<=108}isPostTransitionMetal(){return cst.includes(this.number)}isLanthanide(){return this.number>=57&&this.number<=71}isActinide(){return this.number>=89&&this.number<=103}}class hst{constructor(t){this.structure=t,this.dict={},this.list=[],this.structure=t}add(t,n){const r=function(o,s){return o+"|"+s}(t=t.toUpperCase(),n=n?n.toUpperCase():uB(t));let i=this.dict[r];if(i===void 0){const o=new fst(this.structure,t,n);i=this.list.length,this.dict[r]=i,this.list.push(o)}return i}get(t){return this.list[t]}}class pst{constructor(t,n,r,i,o,s){this.structure=t,this.bondReferenceAtomIndices=[],this.resname=n,this.atomTypeIdList=r,this.hetero=i?1:0,this.chemCompType=o,this.bonds=s,this.atomCount=r.length,this.moleculeType=this.getMoleculeType(),this.backboneType=this.getBackboneType(0),this.backboneEndType=this.getBackboneType(-1),this.backboneStartType=this.getBackboneType(1),this.backboneIndexList=this.getBackboneIndexList();const a=V0[this.backboneType],l=V0[this.backboneStartType],c=V0[this.backboneEndType],u=this.getAtomIndexByName(a.trace);this.traceAtomIndex=re(u,-1);const d=this.getAtomIndexByName(a.direction1);this.direction1AtomIndex=re(d,-1);const f=this.getAtomIndexByName(a.direction2);this.direction2AtomIndex=re(f,-1);const h=this.getAtomIndexByName(l.backboneStart);this.backboneStartAtomIndex=re(h,-1);const p=this.getAtomIndexByName(c.backboneEnd);let g;this.backboneEndAtomIndex=re(p,-1),g=Xit.includes(n)?this.getAtomIndexByName("N1"):this.getAtomIndexByName("N3"),this.rungEndAtomIndex=re(g,-1)}getBackboneIndexList(){const t=[];let n;switch(this.moleculeType){case 3:n=Jit;break;case 4:case 5:n=Rre;break;default:return t}const r=this.structure.atomMap,i=this.atomTypeIdList;for(let o=0,s=this.atomCount;o<s;++o){const a=r.get(i[o]);n.includes(a.atomname)&&t.push(o)}return t}getMoleculeType(){return this.isProtein()?3:this.isRna()?4:this.isDna()?5:this.isWater()?1:this.isIon()?2:this.isSaccharide()?6:0}getBackboneType(t){return this.hasProteinBackbone(t)?1:this.hasRnaBackbone(t)?2:this.hasDnaBackbone(t)?3:this.hasCgProteinBackbone(t)?4:this.hasCgRnaBackbone(t)?5:this.hasCgDnaBackbone(t)?6:dh}isProtein(){return this.chemCompType?jit.includes(this.chemCompType):this.hasAtomWithName("CA","C","N")||bm.includes(this.resname)}isCg(){const t=this.backboneType;return t===4||t===5||t===6}isNucleic(){return this.isRna()||this.isDna()}isRna(){return this.chemCompType?Uit.includes(this.chemCompType):this.hetero!==1&&(this.hasAtomWithName(["P","O3'","O3*"],["C4'","C4*"],["O2'","O2*","F2'","F2*"])||Ore.includes(this.resname)&&this.hasAtomWithName(["O2'","O2*","F2'","F2*"]))}isDna(){return this.chemCompType?Vit.includes(this.chemCompType):this.hetero!==1&&(this.hasAtomWithName(["P","O3'","O3*"],["C3'","C3*"])&&!this.hasAtomWithName(["O2'","O2*","F2'","F2*"])||Ire.includes(this.resname))}isHetero(){return this.hetero===1}isIon(){return Kit.includes(this.resname)}isWater(){return SC.includes(this.resname)}isSaccharide(){return this.chemCompType?Are.includes(this.chemCompType):Zit.includes(this.resname)}isStandardAminoacid(){return bm.includes(this.resname)}isStandardBase(){return xy.includes(this.resname)}hasBackboneAtoms(t,n){const r=V0[n];return t===-1?this.hasAtomWithName(r.trace,r.backboneEnd,r.direction1,r.direction2):t===0?this.hasAtomWithName(r.trace,r.direction1,r.direction2):t===1?this.hasAtomWithName(r.trace,r.backboneStart,r.direction1,r.direction2):this.hasAtomWithName(r.trace,r.backboneStart,r.backboneEnd,r.direction1,r.direction2)}hasProteinBackbone(t){return this.isProtein()&&this.hasBackboneAtoms(t,1)}hasRnaBackbone(t){return this.isRna()&&this.hasBackboneAtoms(t,2)}hasDnaBackbone(t){return this.isDna()&&this.hasBackboneAtoms(t,3)}hasCgProteinBackbone(t){return this.atomCount<7&&this.isProtein()&&this.hasBackboneAtoms(t,4)}hasCgRnaBackbone(t){return this.atomCount<11&&this.isRna()&&this.hasBackboneAtoms(t,5)}hasCgDnaBackbone(t){return this.atomCount<11&&this.isDna()&&this.hasBackboneAtoms(t,6)}hasBackbone(t){return this.hasProteinBackbone(t)||this.hasRnaBackbone(t)||this.hasDnaBackbone(t)||this.hasCgProteinBackbone(t)||this.hasCgRnaBackbone(t)||this.hasCgDnaBackbone(t)}getAtomIndexByName(t){const n=this.atomCount,r=this.structure.atomMap,i=this.atomTypeIdList;if(Array.isArray(t))for(let o=0;o<n;++o){const s=i[o];if(t.includes(r.get(s).atomname))return o}else for(let o=0;o<n;++o){const s=i[o];if(t===r.get(s).atomname)return o}}hasAtomWithName(...t){const n=t.length;for(let r=0;r<n;++r)if(t[r]!==void 0&&this.getAtomIndexByName(t[r])===void 0)return!1;return!0}getBonds(t){return this.bonds===void 0&&(this.bonds=function(n){const r=n.structure,i=r.getAtomProxy(),o=r.getAtomProxy(),s=n.atomCount,a=n.atomOffset,l=a+s-1,c=[],u=[],d=[];if(s>500)Je&&Ve.warn("more than 500 atoms, skip residue for auto-bonding",n.qualifiedName());else if(s>50){const f=new Kot(n,!0),h=n.isCg()?1.2:2.3;for(let p=a;p<l;++p){i.index=p;const g=i.covalent+h+.3,v=f.nearest(i,1/0,g*g),m=v.length;for(let y=0;y<m;++y)o.index=v[y].index,i.index<o.index&&i.connectedTo(o)&&(c.push(i.index-a),u.push(o.index-a),d.push(b7(i.resname,i.atomname,o.atomname)))}}else for(let f=a;f<l;++f){i.index=f;for(let h=f+1;h<=l;++h)o.index=h,i.connectedTo(o)&&(c.push(f-a),u.push(h-a),d.push(b7(i.resname,i.atomname,o.atomname)))}return{atomIndices1:c,atomIndices2:u,bondOrders:d}}(t)),this.bonds}getRings(){return this.rings===void 0&&this.calculateRings(),this.rings}getBondGraph(){return this.bondGraph===void 0&&this.calculateBondGraph(),this.bondGraph}getAromatic(t){return this.aromaticAtoms===void 0&&this.calculateAromatic(this.structure.getResidueProxy(t.residueIndex)),this.aromaticAtoms}getAromaticRings(t){return this.aromaticRings===void 0&&this.calculateAromatic(t),this.aromaticRings}calculateBondGraph(){const t=this.bondGraph={},n=this.getBonds(),r=n.atomIndices1.length,i=n.atomIndices1,o=n.atomIndices2;for(let s=0;s<r;++s){const a=i[s],l=o[s];(t[a]=t[a]||[]).push(l),(t[l]=t[l]||[]).push(a)}}calculateRings(){const t=function(n,r){const i={count:r,visited:new Int32Array(r),queue:new Int32Array(r),pred:new Int32Array(r),left:new Int32Array(_y),right:new Int32Array(_y),color:new Int32Array(r),currentColor:0,rings:[],atomRings:[],bonds:n};for(let o=0;o<r;o++)i.visited[o]=-1,i.pred[o]=-1;return i}(this.getBondGraph(),this.atomCount);for(let n=0;n<t.count;n++)t.visited[n]>=0||yst(t,n);this.rings={atomRings:t.atomRings,rings:t.rings}}isAromatic(t){return this.aromaticAtoms=this.getAromatic(t),this.aromaticAtoms[t.index-t.residueAtomOffset]===1}calculateAromatic(t){const n=this.aromaticAtoms=new Uint8Array(this.atomCount),r=this.getRings().rings,i=r.map(s=>function(a){if(a.some(d=>!mst.includes(d.number)))return!1;let l=0;const c=new bn(3,a.length),u=c.data;return a.forEach(d=>{u[l+0]=d.x,u[l+1]=d.y,u[l+2]=d.z,l+=3}),new Wre(c).vecC.length()<gst}(s.map(a=>this.structure.getAtomProxy(a+t.atomOffset)))),o=this.aromaticRings=[];r.forEach((s,a)=>{i[a]&&(o.push(s),s.forEach(l=>n[l]=1))})}assignBondReferenceAtomIndices(){const t=this.getBondGraph(),n=this.getRings(),r=n.atomRings,i=n.rings,o=this.bonds,s=o.atomIndices1,a=o.atomIndices2,l=o.bondOrders,c=this.bondReferenceAtomIndices,u=o.atomIndices1.length;c.length=0;for(let d=0;d<u;++d){if(l[d]<=1)continue;let f;const h=s[d],p=a[d],g=r[h],v=r[p];if(g&&v){for(let m=0;m<g.length;m++)if(v.indexOf(g[m])!==-1){f=i[g[m]];break}}if(t[h].length>1)for(let m=0;m<t[h].length;++m){const y=t[h][m];if(y!==p&&(f===void 0||f.indexOf(y)!==-1)){c[d]=y;break}}else if(t[p].length>1)for(let m=0;m<t[p].length;++m){const y=t[p][m];if(y!==h&&(f===void 0||f.indexOf(y)!==-1)){c[d]=y;break}}}}getBondIndex(t,n){const r=this.bonds,i=r.atomIndices1,o=r.atomIndices2;let s=i.indexOf(t),a=o.indexOf(n);const l=a;for(;s!==-1;){for(;a!==-1;){if(s===a)return s;a=o.indexOf(n,a+1)}s=i.indexOf(t,s+1),a=l}}getBondReferenceAtomIndex(t,n){const r=this.getBondIndex(t,n);if(r!==void 0)return this.bondReferenceAtomIndices.length===0&&this.assignBondReferenceAtomIndices(),this.bondReferenceAtomIndices[r]}}const mst=[5,6,7,8,14,15,16,32,33,50,51,83],gst=.05;function vst(e,t,n){if(n<t)return;const{pred:r,color:i,left:o,right:s}=e,a=++e.currentColor;let l=t;for(let m=0;m<_y&&(i[l]=a,l=r[l],!(l<0));m++);let c=0,u=0,d=!1,f=0;l=n;for(let m=0;m<_y;m++){if(i[l]===a){f=l,d=!0;break}if(s[u++]=l,l=r[l],l<0)break}if(!d)return;l=t;for(let m=0;m<_y&&(o[c++]=l,f!==l)&&(l=r[l],!(l<0));m++);const h=c+u,p=new Array(h);let g=0;for(let m=0;m<c;m++)p[g++]=o[m];for(let m=u-1;m>=0;m--)p[g++]=s[m];const v=e.rings.length;for(let m=0;m<h;++m){const y=p[m];e.atomRings[y]?e.atomRings[y].push(v):e.atomRings[y]=[v]}e.rings.push(p)}function yst(e,t){const{bonds:n,visited:r,queue:i,pred:o}=e;r[t]=1,i[0]=t;let s=0,a=1;for(;s<a;){const l=i[s++],c=0;if(n[l]===void 0)continue;const u=n[l].length;for(let d=c;d<u;d++){const f=n[l][d];r[f]>0?o[f]!==l&&o[l]!==f&&vst(e,l,f):(r[f]=1,i[a++]=f,o[f]=l)}}}const _y=4;class bst{constructor(t){this.structure=t,this.dict={},this.list=[]}add(t,n,r,i="",o){const s=function(l,c,u,d=""){return l+"|"+c.join(",")+"|"+(u?1:0)+"|"+d}(t=t.toUpperCase(),n,r,i);let a=this.dict[s];if(a===void 0){const l=new pst(this.structure,t,n,r,i,o);a=this.list.length,this.dict[s]=a,this.list.push(l)}return a}get(t){return this.list[t]}}class dB{constructor(t,n=0){this.structure=t,this.index=n,this.bondStore=t.bondStore,this._v12=new W,this._v13=new W,this._ap1=this.structure.getAtomProxy(),this._ap2=this.structure.getAtomProxy(),this._ap3=this.structure.getAtomProxy()}get atom1(){return this.structure.getAtomProxy(this.atomIndex1)}get atom2(){return this.structure.getAtomProxy(this.atomIndex2)}get atomIndex1(){return this.bondStore.atomIndex1[this.index]}set atomIndex1(t){this.bondStore.atomIndex1[this.index]=t}get atomIndex2(){return this.bondStore.atomIndex2[this.index]}set atomIndex2(t){this.bondStore.atomIndex2[this.index]=t}get bondOrder(){return this.bondStore.bondOrder[this.index]}set bondOrder(t){this.bondStore.bondOrder[this.index]=t}getOtherAtomIndex(t){return t===this.atomIndex1?this.atomIndex2:this.atomIndex1}getOtherAtom(t){return this.structure.getAtomProxy(this.getOtherAtomIndex(t.index))}getReferenceAtomIndex(){const t=this._ap1,n=this._ap2;if(t.index=this.atomIndex1,n.index=this.atomIndex2,t.residueIndex!==n.residueIndex)return;const r=t.index-t.residueAtomOffset,i=n.index-n.residueAtomOffset,o=t.residueType.getBondReferenceAtomIndex(r,i);if(o!==void 0)return o+t.residueAtomOffset;console.warn("No reference atom found",t.index,n.index)}calculateShiftDir(t=new W){const n=this._ap1,r=this._ap2,i=this._ap3,o=this._v12,s=this._v13;n.index=this.atomIndex1,r.index=this.atomIndex2;const a=this.getReferenceAtomIndex();o.subVectors(n,r).normalize(),a!==void 0?(i.index=a,s.subVectors(n,i)):s.copy(n),s.normalize();let l=o.dot(s);return 1-Math.abs(l)<1e-5&&(s.set(1,0,0),l=o.dot(s),1-Math.abs(l)<1e-5&&(s.set(0,1,0),l=o.dot(s))),t.copy(s.sub(o.multiplyScalar(l))).normalize()}qualifiedName(){return this.atomIndex1+"="+this.atomIndex2}clone(){return new dB(this.structure,this.index)}toObject(){return{atomIndex1:this.atomIndex1,atomIndex2:this.atomIndex2,bondOrder:this.bondOrder}}}class fB{constructor(t,n=0){this.structure=t,this.index=n,this.chainStore=t.chainStore,this.residueStore=t.residueStore,this.atomStore=t.atomStore,this.residueMap=t.residueMap,this.atomMap=t.atomMap}get entity(){return this.structure.entityList[this.entityIndex]}get entityIndex(){return this.chainStore.entityIndex[this.chainIndex]}get chain(){return this.structure.getChainProxy(this.chainIndex)}get chainIndex(){return this.residueStore.chainIndex[this.index]}set chainIndex(t){this.residueStore.chainIndex[this.index]=t}get atomOffset(){return this.residueStore.atomOffset[this.index]}set atomOffset(t){this.residueStore.atomOffset[this.index]=t}get atomCount(){return this.residueStore.atomCount[this.index]}set atomCount(t){this.residueStore.atomCount[this.index]=t}get atomEnd(){return this.atomOffset+this.atomCount-1}get modelIndex(){return this.chainStore.modelIndex[this.chainIndex]}get chainname(){return this.chainStore.getChainname(this.chainIndex)}get chainid(){return this.chainStore.getChainid(this.chainIndex)}get resno(){return this.residueStore.resno[this.index]}set resno(t){this.residueStore.resno[this.index]=t}get sstruc(){return this.residueStore.getSstruc(this.index)}set sstruc(t){this.residueStore.setSstruc(this.index,t)}get inscode(){return this.residueStore.getInscode(this.index)}set inscode(t){this.residueStore.setInscode(this.index,t)}get residueType(){return this.residueMap.get(this.residueStore.residueTypeId[this.index])}get resname(){return this.residueType.resname}get hetero(){return this.residueType.hetero}get moleculeType(){return this.residueType.moleculeType}get backboneType(){return this.residueType.backboneType}get backboneStartType(){return this.residueType.backboneStartType}get backboneEndType(){return this.residueType.backboneEndType}get traceAtomIndex(){return this.residueType.traceAtomIndex+this.atomOffset}get direction1AtomIndex(){return this.residueType.direction1AtomIndex+this.atomOffset}get direction2AtomIndex(){return this.residueType.direction2AtomIndex+this.atomOffset}get backboneStartAtomIndex(){return this.residueType.backboneStartAtomIndex+this.atomOffset}get backboneEndAtomIndex(){return this.residueType.backboneEndAtomIndex+this.atomOffset}get rungEndAtomIndex(){return this.residueType.rungEndAtomIndex+this.atomOffset}get x(){let t=0;for(let n=this.atomOffset;n<=this.atomEnd;++n)t+=this.atomStore.x[n];return t/this.atomCount}get y(){let t=0;for(let n=this.atomOffset;n<=this.atomEnd;++n)t+=this.atomStore.y[n];return t/this.atomCount}get z(){let t=0;for(let n=this.atomOffset;n<=this.atomEnd;++n)t+=this.atomStore.z[n];return t/this.atomCount}eachAtom(t,n){const r=this.atomCount,i=this.atomOffset,o=this.structure._ap,s=i+r;if(n&&n.atomOnlyTest){const a=n.atomOnlyTest;for(let l=i;l<s;++l)o.index=l,a(o)&&t(o)}else for(let a=i;a<s;++a)o.index=a,t(o)}positionToArray(t=[],n=0){return t[n+0]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}isProtein(){return this.residueType.moleculeType===3}isNucleic(){const t=this.residueType.moleculeType;return t===4||t===5}isRna(){return this.residueType.moleculeType===4}isDna(){return this.residueType.moleculeType===5}isCg(){const t=this.residueType.backboneType;return t===4||t===5||t===6}isPolymer(){if(this.structure.entityList.length>0)return this.entity.isPolymer();{const t=this.residueType.moleculeType;return t===3||t===4||t===5}}isHetero(){return this.residueType.hetero===1}isWater(){return this.residueType.moleculeType===1}isIon(){return this.residueType.moleculeType===2}isSaccharide(){return this.residueType.moleculeType===6}isStandardAminoacid(){return this.residueType.isStandardAminoacid()}isStandardBase(){return this.residueType.isStandardBase()}isHelix(){return Pre.includes(this.sstruc)}isSheet(){return Mre.includes(this.sstruc)}isTurn(){return Ere.includes(this.sstruc)&&this.isProtein()}getAtomType(t){return this.atomMap.get(this.atomStore.atomTypeId[t])}getResname1(){return wC[this.resname.toUpperCase()]||"X"}getBackboneType(t){switch(t){case-1:return this.residueType.backboneStartType;case 1:return this.residueType.backboneEndType;default:return this.residueType.backboneType}}getAtomIndexByName(t){let n=this.residueType.getAtomIndexByName(t);return n!==void 0&&(n+=this.atomOffset),n}hasAtomWithName(t){return this.residueType.hasAtomWithName(t)}getAtomnameList(){console.warn("getAtomnameList - might be expensive");const t=this.atomCount,n=this.atomOffset,r=new Array(t);for(let i=0;i<t;++i)r[i]=this.getAtomType(n+i).atomname;return r}connectedTo(t){const n=this.structure.getAtomProxy(this.backboneEndAtomIndex),r=this.structure.getAtomProxy(t.backboneStartAtomIndex);return!(!n||!r)&&n.connectedTo(r)}getNextConnectedResidue(){const t=this.chainStore.residueOffset[this.chainIndex],n=this.chainStore.residueCount[this.chainIndex],r=this.index+1;if(r<t+n){const i=this.structure.getResidueProxy(r);if(this.connectedTo(i))return i}else if(r===t+n){const i=this.structure.getResidueProxy(t);if(this.connectedTo(i))return i}}getPreviousConnectedResidue(t){const n=this.chainStore.residueOffset[this.chainIndex],r=this.index-1;if(r>=n){const i=re(t,this.structure.getResidueProxy());if(i.index=r,i.connectedTo(this))return i}else if(r===n-1){const i=this.chainStore.residueCount[this.chainIndex],o=re(t,this.structure.getResidueProxy());if(o.index=n+i-1,o.connectedTo(this))return o}}getBonds(){return this.residueType.getBonds(this)}getRings(){return this.residueType.getRings()}getAromaticRings(){return this.residueType.getAromaticRings(this)}qualifiedName(t=!1){let n="";return this.resname&&!t&&(n+="["+this.resname+"]"),this.resno!==void 0&&(n+=this.resno),this.inscode&&(n+="^"+this.inscode),this.chain&&(n+=":"+this.chainname),n+="/"+this.modelIndex,n}clone(){return new fB(this.structure,this.index)}toObject(){return{index:this.index,chainIndex:this.chainIndex,atomOffset:this.atomOffset,atomCount:this.atomCount,resno:this.resno,resname:this.resname,sstruc:this.sstruc}}}class ZO{constructor(t,n,r){this.structure=t,this.residueIndexStart=n,this.residueIndexEnd=r,this.chainStore=t.chainStore,this.residueStore=t.residueStore,this.atomStore=t.atomStore,this.residueCount=r-n+1;const i=this.structure.getResidueProxy(this.residueIndexStart),o=this.structure.getResidueProxy(this.residueIndexEnd);this.isPrevConnected=i.getPreviousConnectedResidue()!==void 0;const s=o.getNextConnectedResidue();this.isNextConnected=s!==void 0,this.isNextNextConnected=s!==void 0&&s.getNextConnectedResidue()!==void 0,this.isCyclic=o.connectedTo(i),this.__residueProxy=this.structure.getResidueProxy()}get chainIndex(){return this.residueStore.chainIndex[this.residueIndexStart]}get modelIndex(){return this.chainStore.modelIndex[this.chainIndex]}get chainname(){return this.chainStore.getChainname(this.chainIndex)}isProtein(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isProtein()}isCg(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isCg()}isNucleic(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.isNucleic()}getMoleculeType(){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.moleculeType}getBackboneType(t){return this.__residueProxy.index=this.residueIndexStart,this.__residueProxy.getBackboneType(t)}getAtomIndexByType(t,n){this.isCyclic?t===-1?t=this.residueCount-1:t===this.residueCount&&(t=0):(t!==-1||this.isPrevConnected||(t+=1),t!==this.residueCount||this.isNextNextConnected||(t-=1));const r=this.__residueProxy;let i;switch(r.index=this.residueIndexStart+t,n){case"trace":i=r.traceAtomIndex;break;case"direction1":i=r.direction1AtomIndex;break;case"direction2":i=r.direction2AtomIndex;break;default:i=r.getAtomIndexByName(n)}return i}eachAtom(t,n){this.eachResidue(function(r){r.eachAtom(t,n)})}eachAtomN(t,n,r){const i=this.residueCount,o=new Array(t);for(let a=0;a<t;++a)o[a]=this.structure.getAtomProxy(this.getAtomIndexByType(a,r));n.apply(this,o);for(var s=t;s<i;++s){for(let a=1;a<t;++a)o[a-1].index=o[a].index;o[t-1].index=this.getAtomIndexByType(s,r),n.apply(this,o)}}eachResidue(t){const n=this.structure.getResidueProxy(),r=this.residueCount,i=this.residueIndexStart;for(let o=0;o<r;++o)n.index=i+o,t(n)}qualifiedName(){const t=this.structure.getResidueProxy(this.residueIndexStart),n=this.structure.getResidueProxy(this.residueIndexEnd);return t.qualifiedName()+" - "+n.qualifiedName()}}class hB{constructor(t,n=0){this.structure=t,this.index=n,this.chainStore=t.chainStore,this.residueStore=t.residueStore}get entity(){return this.structure.entityList[this.entityIndex]}get model(){return this.structure.getModelProxy(this.modelIndex)}get entityIndex(){return this.chainStore.entityIndex[this.index]}set entityIndex(t){this.chainStore.entityIndex[this.index]=t}get modelIndex(){return this.chainStore.modelIndex[this.index]}set modelIndex(t){this.chainStore.modelIndex[this.index]=t}get residueOffset(){return this.chainStore.residueOffset[this.index]}set residueOffset(t){this.chainStore.residueOffset[this.index]=t}get residueCount(){return this.chainStore.residueCount[this.index]}set residueCount(t){this.chainStore.residueCount[this.index]=t}get residueEnd(){return this.residueOffset+this.residueCount-1}get atomOffset(){return this.residueStore.atomOffset[this.residueOffset]}get atomEnd(){return this.residueStore.atomOffset[this.residueEnd]+this.residueStore.atomCount[this.residueEnd]-1}get atomCount(){return this.residueCount===0?0:this.atomEnd-this.atomOffset+1}get chainname(){return this.chainStore.getChainname(this.index)}set chainname(t){this.chainStore.setChainname(this.index,t)}get chainid(){return this.chainStore.getChainid(this.index)}set chainid(t){this.chainStore.setChainid(this.index,t)}eachAtom(t,n){this.eachResidue(function(r){r.eachAtom(t,n)},n)}eachResidue(t,n){const r=this.residueCount,i=this.residueOffset,o=this.structure._rp,s=i+r;if(n&&n.test){const a=n.residueOnlyTest;if(a)for(let l=i;l<s;++l)o.index=l,a(o)&&t(o);else for(let l=i;l<s;++l)o.index=l,t(o)}else for(let a=i;a<s;++a)o.index=a,t(o)}eachResidueN(t,n){const r=this.residueCount,i=this.residueOffset,o=i+r;if(r<t)return;const s=new Array(t);for(let a=0;a<t;++a)s[a]=this.structure.getResidueProxy(i+a);n.apply(this,s);for(let a=i+t;a<o;++a){for(let l=0;l<t;++l)s[l].index+=1;n.apply(this,s)}}eachPolymer(t,n){let r=0,i=0;const o=n?n.residueOnlyTest:void 0,s=this.model.structure,a=this.residueCount,l=this.residueOffset,c=l+a,u=this.structure.getResidueProxy(),d=this.structure.getResidueProxy(l),f=this.structure.getAtomProxy(),h=this.structure.getAtomProxy();let p=!0;for(let g=l+1;g<c;++g){u.index=d.index,d.index=g;const v=p?u.backboneEndType:u.backboneType,m=d.backboneType;p&&(r=u.index,p=!1),i=d.index,v!==dh&&v===m?(f.index=u.backboneEndAtomIndex,h.index=d.backboneStartAtomIndex,f&&h&&f.connectedTo(h)&&(!o||o(u)&&o(d))||(u.index-r>1&&t(new ZO(s,r,u.index)),r=i)):(v!==dh&&u.index-r>1&&t(new ZO(s,r,u.index)),r=i)}i-r>1&&this.structure.getResidueProxy(r).backboneEndType&&t(new ZO(s,r,i))}qualifiedName(){return":"+this.chainname+"/"+this.modelIndex}clone(){return new hB(this.structure,this.index)}toObject(){return{index:this.index,residueOffset:this.residueOffset,residueCount:this.residueCount,chainname:this.chainname}}}class pB{constructor(t,n=0){this.structure=t,this.index=n,this.modelStore=t.modelStore,this.chainStore=t.chainStore,this.residueStore=t.residueStore}get chainOffset(){return this.modelStore.chainOffset[this.index]}set chainOffset(t){this.modelStore.chainOffset[this.index]=t}get chainCount(){return this.modelStore.chainCount[this.index]}set chainCount(t){this.modelStore.chainCount[this.index]=t}get residueOffset(){return this.chainStore.residueOffset[this.chainOffset]}get atomOffset(){return this.residueStore.atomOffset[this.residueOffset]}get chainEnd(){return this.chainOffset+this.chainCount-1}get residueEnd(){return this.chainStore.residueOffset[this.chainEnd]+this.chainStore.residueCount[this.chainEnd]-1}get atomEnd(){return this.residueStore.atomOffset[this.residueEnd]+this.residueStore.atomCount[this.residueEnd]-1}get residueCount(){return this.chainCount===0?0:this.residueEnd-this.residueOffset+1}get atomCount(){return this.residueCount===0?0:this.atomEnd-this.atomOffset+1}eachAtom(t,n){this.eachChain(function(r){r.eachAtom(t,n)},n)}eachResidue(t,n){this.eachChain(function(r){r.eachResidue(t,n)},n)}eachPolymer(t,n){if(n&&n.chainOnlyTest){const r=n.chainOnlyTest;this.eachChain(function(i){r(i)&&i.eachPolymer(t,n)})}else this.eachChain(function(r){r.eachPolymer(t,n)})}eachChain(t,n){const r=this.chainCount,i=this.chainOffset,o=this.structure._cp,s=i+r;if(n&&n.test){const a=n.chainOnlyTest;if(a)for(let l=i;l<s;++l)o.index=l,a(o)&&t(o);else for(let l=i;l<s;++l)o.index=l,t(o)}else for(let a=i;a<s;++a)o.index=a,t(o)}qualifiedName(){return"/"+this.index}clone(){return new pB(this.structure,this.index)}toObject(){return{index:this.index,chainOffset:this.chainOffset,chainCount:this.chainCount}}}class Xa{constructor(t="",n=""){this.signals={refreshed:new Ht.Signal},this.init(t,n)}init(t,n){this.name=t,this.path=n,this.title="",this.id="",this.data={structure:this,"@spatialLookup":void 0,"@valenceModel":void 0},this.header={},this.extraData={},this.atomSetCache={},this.atomSetDict={},this.biomolDict={},this.entityList=[],this.unitcell=void 0,this.frames=[],this.boxes=[],this.validation=void 0,this.bondStore=new ES(0),this.backboneBondStore=new ES(0),this.rungBondStore=new ES(0),this.atomStore=new Vot(0),this.residueStore=new Hot(0),this.chainStore=new Got(0),this.modelStore=new Wot(0),this.atomMap=new hst(this),this.residueMap=new bst(this),this.bondHash=void 0,this.spatialHash=void 0,this.atomSet=void 0,this.bondSet=void 0,this.center=new W,this.boundingBox=new zn,this._bp=this.getBondProxy(),this._ap=this.getAtomProxy(),this._rp=this.getResidueProxy(),this._cp=this.getChainProxy()}get type(){return"Structure"}finalizeAtoms(){this.atomSet=this.getAtomSet(),this.atomCount=this.atomStore.count,this.boundingBox=this.getBoundingBox(void 0,this.boundingBox),this.center=this.boundingBox.getCenter(new W),this.spatialHash=new Hb(this.atomStore,this.boundingBox)}finalizeBonds(){this.bondSet=this.getBondSet(),this.bondCount=this.bondStore.count,this.bondHash=new Uot(this.bondStore,this.atomStore.count),this.atomSetCache={},this.atomSetDict.rung||(this.atomSetDict.rung=this.getAtomSet(!1));for(let t in this.atomSetDict)this.atomSetCache["__"+t]=this.atomSetDict[t].clone()}getBondProxy(t){return new dB(this,t)}getAtomProxy(t){return new UE(this,t)}getResidueProxy(t){return new fB(this,t)}getChainProxy(t){return new hB(this,t)}getModelProxy(t){return new pB(this,t)}getBondSet(){const t=this.bondStore.count,n=new Jr(t),r=this.atomSet;if(r)if(r.isAllSet())n.setAll();else if(r.isAllClear())n.clearAll();else{const i=this.getBondProxy();for(let o=0;o<t;++o)i.index=o,r.isSet(i.atomIndex1,i.atomIndex2)&&n.set(i.index)}else n.setAll();return n}getBackboneBondSet(){const t=this.backboneBondStore.count,n=new Jr(t),r=this.atomSetCache.__backbone;if(r){const i=this.getBondProxy();i.bondStore=this.backboneBondStore;for(let o=0;o<t;++o)i.index=o,r.isSet(i.atomIndex1,i.atomIndex2)&&n.set(i.index)}else n.setAll();return n}getRungBondSet(){const t=this.rungBondStore.count,n=new Jr(t),r=this.atomSetCache.__rung;if(r){const i=this.getBondProxy();i.bondStore=this.rungBondStore;for(let o=0;o<t;++o)i.index=o,r.isSet(i.atomIndex1,i.atomIndex2)&&n.set(i.index)}else n.setAll();return n}getAtomSet(t){const n=this.atomStore.count;if(t===void 0)return new Jr(n,!0);if(t instanceof Jr)return t;if(t===!0)return new Jr(n,!0);if(t&&t.test){const r=t.string;if(r in this.atomSetCache)return this.atomSetCache[r];if(r==="")return new Jr(n,!0);{const i=new Jr(n);return this.eachAtom(function(o){i.set(o.index)},t),this.atomSetCache[r]=i,i}}return t===!1?new Jr(n):new Jr(n,!0)}getAtomSetWithinSelection(t,n){const r=this.spatialHash,i=this.getAtomSet(!1),o=this.getAtomProxy();return r&&this.getAtomSet(t).forEach(function(s){o.index=s,r.within(o.x,o.y,o.z,n).forEach(function(a){i.set(a)})}),i}getAtomSetWithinPoint(t,n){const r=t,i=this.getAtomSet(!1);return this.spatialHash&&this.spatialHash.within(r.x,r.y,r.z,n).forEach(function(o){i.set(o)}),i}getAtomSetWithinVolume(t,n,r,i,o){const s=new Hl(t,r,i,o),a=s.getDataPosition(),l=a.length,c=s.matrix.getMaxScaleOnAxis(),u=this.getAtomSet(!1);if(!this.spatialHash)return u;for(let d=0;d<l;d+=3)this.spatialHash.within(a[d],a[d+1],a[d+2],c).forEach(function(f){u.set(f)});return u}getAtomSetWithinGroup(t){const n=this.atomStore.residueIndex,r=this.getAtomSet(!1),i=this.getResidueProxy();return this.getAtomSet(t).forEach(function(o){i.index=n[o];for(let s=i.atomOffset;s<=i.atomEnd;++s)r.set(s)}),r}getSelection(){}getStructure(){return this}eachEntity(t,n){this.entityList.forEach(function(r){n!==void 0&&r.getEntityType()!==n||t(r)})}eachBond(t,n){const r=this.getBondProxy();let i;if(n&&n.test&&(i=this.getBondSet(),this.bondSet&&i.intersection(this.bondSet)),i)i.forEach(function(o){r.index=o,t(r)});else{const o=this.bondStore.count;for(let s=0;s<o;++s)r.index=s,t(r)}}eachAtom(t,n){if(n&&n.test)this.eachModel(function(r){r.eachAtom(t,n)},n);else{const r=this.atomStore.count,i=this.getAtomProxy();for(let o=0;o<r;++o)i.index=o,t(i)}}eachResidue(t,n){if(n&&n.test){const r=this.modelStore.count,i=this.getModelProxy(),o=n.modelOnlyTest;if(o)for(let s=0;s<r;++s)i.index=s,o(i)&&i.eachResidue(t,n);else for(let s=0;s<r;++s)i.index=s,i.eachResidue(t,n)}else{const r=this.residueStore.count,i=this.getResidueProxy();for(let o=0;o<r;++o)i.index=o,t(i)}}eachResidueN(t,n){const r=this.residueStore.count;if(r<t)return;const i=new Array(t);for(let o=0;o<t;++o)i[o]=this.getResidueProxy(o);n.apply(this,i);for(let o=t;o<r;++o){for(let s=0;s<t;++s)i[s].index+=1;n.apply(this,i)}}eachPolymer(t,n){if(n&&n.modelOnlyTest){const r=n.modelOnlyTest;this.eachModel(function(i){r(i)&&i.eachPolymer(t,n)})}else this.eachModel(function(r){r.eachPolymer(t,n)})}eachChain(t,n){if(n&&n.test)this.eachModel(function(r){r.eachChain(t,n)});else{const r=this.chainStore.count,i=this.getChainProxy();for(let o=0;o<r;++o)i.index=o,t(i)}}eachModel(t,n){const r=this.modelStore.count,i=this.getModelProxy();if(n&&n.test){const o=n.modelOnlyTest;if(o)for(let s=0;s<r;++s)i.index=s,o(i)&&t(i);else for(let s=0;s<r;++s)i.index=s,t(i)}else for(let o=0;o<r;++o)i.index=o,t(i)}getAtomData(t){const n=Object.assign({},t);n.colorParams&&(n.colorParams.structure=this.getStructure());const r=n.what,i=re(n.atomSet,this.atomSet);let o,s;const a={},l=this.getAtomProxy(),c=i.getSize();r&&!r.position||(a.position=new Float32Array(3*c)),r&&!r.color||!n.colorParams||(a.color=new Float32Array(3*c),s=Qt.getScheme(n.colorParams)),r&&!r.picking||(a.picking=new Bh(new Float32Array(c),this.getStructure())),r&&!r.radius||(a.radius=new Float32Array(c),o=new Pc(n.radiusParams)),r&&!r.index||(a.index=new Uint32Array(c));const{position:u,color:d,picking:f,radius:h,index:p}=a;return i.forEach((g,v)=>{const m=3*v;l.index=g,u&&l.positionToArray(u,m),d&&s.atomColorToArray(l,d,m),f&&(f.array[v]=g),h&&(h[v]=o.atomRadius(l)),p&&(p[v]=g)}),a}getBondData(t){const n=Object.assign({},t);n.colorParams&&(n.colorParams.structure=this.getStructure());const r=n.what,i=re(n.bondSet,this.bondSet),o=re(n.multipleBond,"off"),s=o!=="off",a=o==="offset",l=re(n.bondScale,.4),c=re(n.bondSpacing,1);let u,d;const f={},h=this.getBondProxy();n.bondStore&&(h.bondStore=n.bondStore);const p=this.getAtomProxy(),g=this.getAtomProxy();let v;if(s){const B=h.bondStore.bondOrder;v=0,i.forEach(function(V){v+=B[V]})}else v=i.getSize();r&&!r.position||(f.position1=new Float32Array(3*v),f.position2=new Float32Array(3*v)),r&&!r.color||!n.colorParams||(f.color=new Float32Array(3*v),f.color2=new Float32Array(3*v),d=Qt.getScheme(n.colorParams)),r&&!r.picking||(f.picking=new Lre(new Float32Array(v),this.getStructure(),n.bondStore)),(!r||r.radius||s&&r.position)&&(u=new Pc(n.radiusParams)),r&&!r.radius||(f.radius=new Float32Array(v),n.radius2&&(f.radius2=new Float32Array(v)));const{position1:m,position2:y,color:b,color2:_,picking:x,radius:w,radius2:S}=f;let C,A,T,O,R,L,D=0;const $=new W,z=new W,H=new W;return i.forEach(B=>{if(A=3*D,h.index=B,p.index=h.atomIndex1,g.index=h.atomIndex2,O=h.bondOrder,m)if(s&&O>1){const V=u.atomRadius(p);L=V*l/(.5*O),h.calculateShiftDir(H),a?(R=2*c*V,H.multiplyScalar(R),H.negate(),z.subVectors(g,p).multiplyScalar(Math.max(.1,R/1.88)),p.positionToArray(m,A),g.positionToArray(y,A),O>=2&&($.addVectors(p,H).add(z).toArray(m,A+3),$.addVectors(g,H).sub(z).toArray(y,A+3),O>=3&&($.subVectors(p,H).add(z).toArray(m,A+6),$.subVectors(g,H).sub(z).toArray(y,A+6)))):(R=(c-l)*V,H.multiplyScalar(R),O===2?($.addVectors(p,H).toArray(m,A),$.subVectors(p,H).toArray(m,A+3),$.addVectors(g,H).toArray(y,A),$.subVectors(g,H).toArray(y,A+3)):O===3?(p.positionToArray(m,A),$.addVectors(p,H).toArray(m,A+3),$.subVectors(p,H).toArray(m,A+6),g.positionToArray(y,A),$.addVectors(g,H).toArray(y,A+3),$.subVectors(g,H).toArray(y,A+6)):(p.positionToArray(m,A),g.positionToArray(y,A)))}else p.positionToArray(m,A),g.positionToArray(y,A);if(b&&_&&(d.bondColorToArray(h,1,b,A),d.bondColorToArray(h,0,_,A),s&&O>1))for(C=1;C<O;++C)T=3*C+A,F9(b,A,T,3),F9(_,A,T,3);if(x&&x.array&&(x.array[D]=B,s&&O>1))for(C=1;C<O;++C)x.array[D+C]=B;if(w&&(w[D]=u.atomRadius(p),s&&O>1))for(L=w[D]*l/(a?1:.5*O),C=a?1:0;C<O;++C)w[D+C]=L;if(S&&(S[D]=u.atomRadius(g),s&&O>1))for(L=S[D]*l/(a?1:.5*O),C=a?1:0;C<O;++C)S[D+C]=L;D+=s?O:1}),f}getBackboneAtomData(t){return t=Object.assign({atomSet:this.atomSetCache.__backbone},t),this.getAtomData(t)}getBackboneBondData(t){return t=Object.assign({bondSet:this.getBackboneBondSet(),bondStore:this.backboneBondStore},t),this.getBondData(t)}getRungAtomData(t){return t=Object.assign({atomSet:this.atomSetCache.__rung},t),this.getAtomData(t)}getRungBondData(t){return t=Object.assign({bondSet:this.getRungBondSet(),bondStore:this.rungBondStore},t),this.getBondData(t)}getBoundingBox(t,n){Je&&Ve.time("getBoundingBox"),n=n||new zn;let r=1/0,i=1/0,o=1/0,s=-1/0,a=-1/0,l=-1/0;return this.eachAtom(c=>{const u=c.x,d=c.y,f=c.z;u<r&&(r=u),d<i&&(i=d),f<o&&(o=f),u>s&&(s=u),d>a&&(a=d),f>l&&(l=f)},t),n.min.set(r,i,o),n.max.set(s,a,l),Je&&Ve.timeEnd("getBoundingBox"),n}getPrincipalAxes(t){Je&&Ve.time("getPrincipalAxes");let n=0;const r=new bn(3,this.atomCount),i=r.data;return this.eachAtom(o=>{i[n+0]=o.x,i[n+1]=o.y,i[n+2]=o.z,n+=3},t),Je&&Ve.timeEnd("getPrincipalAxes"),new Wre(r)}atomCenter(t){return t?this.getBoundingBox(t).getCenter(new W):this.center.clone()}hasCoords(){if(this._hasCoords===void 0){const t=this.atomStore;this._hasCoords=SS(t.x)!==0||wS(t.x)!==0||SS(t.y)!==0||wS(t.y)!==0||SS(t.z)!==0||wS(t.z)!==0||t.count/this.modelStore.count==1}return this._hasCoords}getSequence(t){const n=[],r=this.getResidueProxy();return this.eachAtom(function(i){r.index=i.residueIndex,i.index===r.traceAtomIndex&&n.push(r.getResname1())},t),n}getAtomIndices(t){if(t&&t.string){const n=[];return this.eachAtom(function(r){n.push(r.index)},t),new Uint32Array(n)}{const n={what:{index:!0}};return this.getAtomData(n).index}}getChainnameCount(t){const n=new Set;return this.eachChain(function(r){r.residueCount&&n.add(r.chainname)},t),n.size}updatePosition(t,n=!0){let r=0;this.eachAtom(function(i){i.positionFromArray(t,r),r+=3},void 0),this._hasCoords=void 0,n&&this.refreshPosition()}refreshPosition(){this.getBoundingBox(void 0,this.boundingBox),this.boundingBox.getCenter(this.center),this.spatialHash=new Hb(this.atomStore,this.boundingBox),this.signals.refreshed.dispatch(this)}dispose(){this.frames&&(this.frames.length=0),this.boxes&&(this.boxes.length=0),this.bondStore.dispose(),this.backboneBondStore.dispose(),this.rungBondStore.dispose(),this.atomStore.dispose(),this.residueStore.dispose(),this.chainStore.dispose(),this.modelStore.dispose(),delete this.bondSet,delete this.atomSet}}const _7=new zn,JO=[NE,ch,FE,uh,kg,DE,Rg,BE,_C,zE,Ub,Vb],xst={aspectRatio:1.5,sphereDetail:2,radialSegments:50,disableImpostor:!1,openEnded:!1,dashedCylinder:!1,labelParams:{},pointSize:2,sizeAttenuation:!1,useTexture:!0,linewidth:2};class _st{constructor(t="shape",n={}){this.boundingBox=new zn,this.bufferList=[],this.meshCount=0,this._primitiveData={},this.name=t,this.parameters=ns(n,xst),JO.forEach(r=>{Object.keys(r.fields).forEach(i=>{this._primitiveData[r.getShapeKey(i)]=[]}),this._primitiveData[r.getShapeKey("name")]=[]})}addBuffer(t){this.bufferList.push(t);const n=t.geometry;return n.boundingBox||n.computeBoundingBox(),this.boundingBox.union(n.boundingBox),this}addMesh(t,n,r,i,o){let s;t=RO(t),n=RO(n),Array.isArray(r)&&(r=bl(r,t.length)),i&&(i=RO(i)),s=i===void 0||i.length==0?{position:t,color:n,index:r}:{position:t,color:n,index:r,normal:i};const a=new Cot(this,Object.assign({serial:this.meshCount,name:o},s)),l=new Ac(Object.assign({picking:a},s));return this.bufferList.push(l),_7.setFromArray(t),this.boundingBox.union(_7),this.meshCount+=1,this}addSphere(t,n,r,i){return Rg.objectToShape(this,{position:t,color:n,radius:r,name:i}),this}addEllipsoid(t,n,r,i,o,s){return kg.objectToShape(this,{position:t,color:n,radius:r,majorAxis:i,minorAxis:o,name:s}),this}addTorus(t,n,r,i,o,s){return zE.objectToShape(this,{position:t,color:n,radius:r,majorAxis:i,minorAxis:o,name:s}),this}addCylinder(t,n,r,i,o){return uh.objectToShape(this,{position1:t,position2:n,color:r,radius:i,name:o}),this}addCone(t,n,r,i,o){return FE.objectToShape(this,{position1:t,position2:n,color:r,radius:i,name:o}),this}addArrow(t,n,r,i,o){return NE.objectToShape(this,{position1:t,position2:n,color:r,radius:i,name:o}),this}addBox(t,n,r,i,o,s){return ch.objectToShape(this,{position:t,color:n,size:r,heightAxis:i,depthAxis:o,name:s}),this}addOctahedron(t,n,r,i,o,s){return DE.objectToShape(this,{position:t,color:n,size:r,heightAxis:i,depthAxis:o,name:s}),this}addTetrahedron(t,n,r,i,o,s){return BE.objectToShape(this,{position:t,color:n,size:r,heightAxis:i,depthAxis:o,name:s}),this}addText(t,n,r,i){return _C.objectToShape(this,{position:t,color:n,size:r,text:i}),this}addPoint(t,n,r){return Ub.objectToShape(this,{position:t,color:n,name:r}),this}addWideline(t,n,r,i,o){return this.parameters.linewidth=i,Vb.objectToShape(this,{position1:t,position2:n,color:r,name:o}),this}addLabel(t,n,r,i){return console.warn("Shape.addLabel is deprecated, use .addText instead"),this.addText(t,n,r,i)}getBufferList(){const t=[];return JO.forEach(n=>{this._primitiveData[n.getShapeKey("color")].length&&t.push(n.bufferFromShape(this,this.parameters))}),this.bufferList.concat(t)}dispose(){this.bufferList.forEach(function(t){t.dispose()}),this.bufferList.length=0,JO.forEach(t=>{Object.keys(t.fields).forEach(n=>{this._primitiveData[t.getShapeKey(n)].length=0}),this._primitiveData[t.getShapeKey("name")].length=0})}get center(){return this._center||(this._center=this.boundingBox.getCenter(new W)),this._center}get type(){return"Shape"}}class w7 extends Ex{constructor(t,n,r){Array.isArray(t)||(t=[t]),super(t,n,r),this.type="buffer",this.parameters=Object.assign({},this.parameters,{colorScheme:null,colorScale:null,colorValue:null,colorDomain:null,colorMode:null}),this.buffer=t,this.init(r)}init(t){super.init(t),this.build()}create(){this.bufferList.push.apply(this.bufferList,this.buffer)}attach(t){this.bufferList.forEach(n=>{this.viewer.add(n),n.setParameters(this.getBufferParams())}),this.setVisibility(this.visible),t()}}const Sw=new lt,S7=new Si;class md extends Ac{constructor(t,n={},r){super(function(l,c){const u=c.attributes.position.array,d=c.index?c.index.array:void 0,f=l.position.length/3,h=u.length/3,p=f*h,g=new Float32Array(3*p),v=new Float32Array(3*p),m=new Float32Array(3*p);let y;return d&&(y=bl(f*d.length,p)),{position:g,color:m,index:y,normal:v,primitiveId:l.primitiveId||NL(f,h),picking:l.picking}}(t,r),n),this.updateNormals=!1;const i=r.attributes.position.array,o=r.attributes.normal.array,s=r.index?r.index.array:void 0;this.geoPosition=i,this.geoNormal=o,this.geoIndex=s,this.positionCount=t.position.length/3,this.geoPositionCount=i.length/3,this.transformedGeoPosition=new Float32Array(3*this.geoPositionCount),this.transformedGeoNormal=new Float32Array(3*this.geoPositionCount);const a=this.geometry.attributes;if(this.meshPosition=a.position.array,this.meshColor=a.color.array,this.meshNormal=a.normal.array,this.setAttributes(t),s){const l=this.geometry.getIndex();if(!l)return void Ve.error("Index is null");this.meshIndex=l.array,this.makeIndex()}}setAttributes(t={},n=!1){const r=this.geometry.attributes;let i,o,s,a,l,c,u,d,f;const h=this.updateNormals;t.position&&(i=t.position,s=this.geoPosition,u=this.meshPosition,l=this.transformedGeoPosition,r.position.needsUpdate=!0,(h||n)&&(a=this.geoNormal,f=this.meshNormal,c=this.transformedGeoNormal,r.normal.needsUpdate=!0)),t.color&&(o=t.color,d=this.meshColor,r.color.needsUpdate=!0);const p=this.positionCount,g=this.geoPositionCount;for(let v=0;v<p;++v){let m,y;const b=v*g*3,_=3*v;if(i&&l&&u&&f&&s&&a&&(l.set(s),Sw.makeTranslation(i[_],i[_+1],i[_+2]),this.applyPositionTransform(Sw,v,_),LE(Sw.elements,l),u.set(l,b),h&&c?(c.set(a),S7.getNormalMatrix(Sw),sB(S7.elements,c),f.set(c,b)):n&&f.set(a,b)),o&&d)for(m=0;m<g;++m)y=b+3*m,d[y]=o[_],d[y+1]=o[_+1],d[y+2]=o[_+2]}}makeIndex(){const t=this.geoIndex,n=this.meshIndex;if(!t)return;const r=this.positionCount,i=this.geoPositionCount,o=3*(t.length/3);for(let s=0;s<r;++s){const a=s*o,l=a+o;n.set(t,a);for(let c=a;c<l;++c)n[c]+=s*i}}}const C7=new W,Zre=Object.assign({sphereDetail:1},eo);class wst extends md{constructor(t,n={}){super(t,n,new sh(1,re(n.sphereDetail,1))),this.setAttributes(t,!0)}get defaultParameters(){return Zre}applyPositionTransform(t,n){const r=this._radius[n];C7.set(r,r,r),t.scale(C7)}setAttributes(t={},n){t.radius&&(this._radius=t.radius),super.setAttributes(t,n)}}dn.add("shader/SphereImpostor.vert",`uniform mat4 projectionMatrixInverse;
uniform float clipNear;
varying float vRadius;
varying float vRadiusSq;
varying vec3 vPoint;
varying vec3 vPointViewPosition;
attribute vec2 mapping;
attribute float radius;
#ifdef PICKING
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
#include color_pars_vertex
#endif
#include matrix_scale
const mat4 D = mat4(
1.0, 0.0, 0.0, 0.0,
0.0, 1.0, 0.0, 0.0,
0.0, 0.0, 1.0, 0.0,
0.0, 0.0, 0.0, -1.0
);
mat4 transposeM( in mat4 inMatrix ) {
vec4 i0 = inMatrix[0];
vec4 i1 = inMatrix[1];
vec4 i2 = inMatrix[2];
vec4 i3 = inMatrix[3];
mat4 outMatrix = mat4(
vec4(i0.x, i1.x, i2.x, i3.x),
vec4(i0.y, i1.y, i2.y, i3.y),
vec4(i0.z, i1.z, i2.z, i3.z),
vec4(i0.w, i1.w, i2.w, i3.w)
);
return outMatrix;
}
void ComputePointSizeAndPositionInClipCoordSphere(){
vec2 xbc;
vec2 ybc;
mat4 T = mat4(
radius, 0.0, 0.0, 0.0,
0.0, radius, 0.0, 0.0,
0.0, 0.0, radius, 0.0,
position.x, position.y, position.z, 1.0
);
mat4 R = transposeM( projectionMatrix * modelViewMatrix * T );
float A = dot( R[ 3 ], D * R[ 3 ] );
float B = -2.0 * dot( R[ 0 ], D * R[ 3 ] );
float C = dot( R[ 0 ], D * R[ 0 ] );
xbc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );
xbc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );
float sx = abs( xbc[ 0 ] - xbc[ 1 ] ) * 0.5;
A = dot( R[ 3 ], D * R[ 3 ] );
B = -2.0 * dot( R[ 1 ], D * R[ 3 ] );
C = dot( R[ 1 ], D * R[ 1 ] );
ybc[ 0 ] = ( -B - sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );
ybc[ 1 ] = ( -B + sqrt( B * B - 4.0 * A * C ) ) / ( 2.0 * A );
float sy = abs( ybc[ 0 ] - ybc[ 1 ] ) * 0.5;
gl_Position.xy = vec2( 0.5 * ( xbc.x + xbc.y ), 0.5 * ( ybc.x + ybc.y ) );
gl_Position.xy -= mapping * vec2( sx, sy );
gl_Position.xy *= gl_Position.w;
}
void main(void){
#ifdef PICKING
vPickingColor = unpackColor( primitiveId );
#else
#include color_vertex
#endif
vRadius = radius * matrixScale( modelViewMatrix );
vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
mvPosition.z -= vRadius;
gl_Position = projectionMatrix * vec4( mvPosition.xyz, 1.0 );
ComputePointSizeAndPositionInClipCoordSphere();
vRadiusSq = vRadius * vRadius;
vec4 vPoint4 = projectionMatrixInverse * gl_Position;
vPoint = vPoint4.xyz / vPoint4.w;
vPointViewPosition = -mvPosition.xyz / mvPosition.w;
}`),dn.add("shader/SphereImpostor.frag",`#define STANDARD
#define IMPOSTOR
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 interiorColor;
uniform float interiorDarkening;
uniform float roughness;
uniform float metalness;
uniform float opacity;
uniform float clipNear;
uniform mat4 projectionMatrix;
uniform float ortho;
varying float vRadius;
varying float vRadiusSq;
varying vec3 vPoint;
varying vec3 vPointViewPosition;
#ifdef PICKING
uniform float objectId;
varying vec3 vPickingColor;
#else
#include common
#include color_pars_fragment
#include fog_pars_fragment
#include bsdfs
#include lights_pars_begin
#include lights_physical_pars_fragment
#endif
bool flag2 = false;
bool interior = false;
vec3 cameraPos;
vec3 cameraNormal;
float calcDepth( in vec3 cameraPos ){
vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;
return 0.5 + 0.5 * clipZW.x / clipZW.y;
}
float calcClip( vec3 cameraPos ){
return dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );
}
bool Impostor( out vec3 cameraPos, out vec3 cameraNormal ){
vec3 cameraSpherePos = -vPointViewPosition;
cameraSpherePos.z += vRadius;
vec3 rayOrigin = mix( vec3( 0.0, 0.0, 0.0 ), vPoint, ortho );
vec3 rayDirection = mix( normalize( vPoint ), vec3( 0.0, 0.0, 1.0 ), ortho );
vec3 cameraSphereDir = mix( cameraSpherePos, rayOrigin - cameraSpherePos, ortho );
float B = dot( rayDirection, cameraSphereDir );
float det = B * B + vRadiusSq - dot( cameraSphereDir, cameraSphereDir );
if( det < 0.0 ){
discard;
return false;
}
float sqrtDet = sqrt( det );
float posT = mix( B + sqrtDet, B + sqrtDet, ortho );
float negT = mix( B - sqrtDet, sqrtDet - B, ortho );
cameraPos = rayDirection * negT + rayOrigin;
#ifdef NEAR_CLIP
if( calcDepth( cameraPos ) <= 0.0 ){
cameraPos = rayDirection * posT + rayOrigin;
interior = true;
}else if( calcClip( cameraPos ) > 0.0 ){
cameraPos = rayDirection * posT + rayOrigin;
interior = true;
flag2 = true;
}
#else
if( calcDepth( cameraPos ) <= 0.0 ){
cameraPos = rayDirection * posT + rayOrigin;
interior = true;
}
#endif
cameraNormal = normalize( cameraPos - cameraSpherePos );
cameraNormal *= float(!interior) * 2.0 - 1.0;
return !interior;
}
void main(void){
bool flag = Impostor( cameraPos, cameraNormal );
#ifdef NEAR_CLIP
if( calcClip( cameraPos ) > 0.0 )
discard;
#endif
gl_FragDepthEXT = calcDepth( cameraPos );
if( !flag ){
#ifdef NEAR_CLIP
if( flag2 ){
gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );
}else if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );
}
#else
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );
}
#endif
}
if (gl_FragDepthEXT < 0.0)
discard;
if (gl_FragDepthEXT > 1.0)
discard;
#ifdef PICKING
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
vec3 vNormal = cameraNormal;
vec3 vViewPosition = -cameraPos;
vec4 diffuseColor = vec4( diffuse, opacity );
ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
vec3 totalEmissiveLight = emissive;
#include color_fragment
#include roughnessmap_fragment
#include metalnessmap_fragment
#include normal_fragment_begin
#include lights_physical_fragment
#include lights_fragment_begin
#include lights_fragment_end
vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;
if( interior ){
#ifdef USE_INTERIOR_COLOR
outgoingLight.xyz = interiorColor;
#else
#ifdef DIFFUSE_INTERIOR
outgoingLight.xyz = vColor;
#endif
#endif
outgoingLight.xyz *= 1.0 - interiorDarkening;
}
gl_FragColor = vec4( outgoingLight, diffuseColor.a );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);class mB extends xl{constructor(t,n,r={}){super(n,r),this.index=bl(this.indexSize,this.attributeSize),this.makeIndex(),this.initIndex(this.index),this.addAttributes({mapping:{type:t,value:null}}),this.setAttributes({primitiveId:gv(this.size)})}get attributeSize(){return this.size*this.mappingSize}get indexSize(){return this.size*this.mappingIndicesSize}addAttributes(t){const n={};for(const r in t){const i=t[r];n[r]={type:i.type,value:null}}super.addAttributes(n)}getAttributeIndex(t){return 3*t*this.mappingSize}setAttributes(t){t&&!t.position&&t.position1&&t.position2&&(t.position=cl(t.position1,t.position2));const n=this.size,r=this.mappingSize,i=this.geometry.attributes;let o,s,a,l,c,u,d;for(const f in t)if(f!=="index"&&f!=="picking"){s=t[f],o=i[f],a=o.itemSize,l=o.array;for(let h=0;h<n;++h){c=h*a,u=c*r;for(let p=0;p<r;++p){d=u+a*p;for(let g=0;g<a;++g)l[d+g]=s[c+g]}}o.needsUpdate=!0}}makeMapping(){const t=this.size,n=this.mapping,r=this.mappingSize,i=this.mappingItemSize,o=this.geometry.attributes.mapping.array;for(let s=0;s<t;s++)o.set(n,s*i*r)}makeIndex(){const t=this.size,n=this.mappingSize,r=this.mappingIndices,i=this.mappingIndicesSize,o=this.index;for(let s=0;s<t;s++){const a=s*i,l=s*n;o.set(r,a);for(let c=0;c<i;++c)o[a+c]+=l}}}const Sst=new Float32Array([-1,1,-1,-1,1,1,1,-1]),Cst=new Uint16Array([0,1,2,1,3,2]);class gB extends mB{constructor(t,n={}){super("v2",t,n)}get mapping(){return Sst}get mappingIndices(){return Cst}get mappingIndicesSize(){return 6}get mappingSize(){return 4}get mappingItemSize(){return 2}}class Ast extends gB{constructor(t,n={}){super(t,n),this.isImpostor=!0,this.vertexShader="SphereImpostor.vert",this.fragmentShader="SphereImpostor.frag",this.addUniforms({projectionMatrixInverse:{value:new lt},ortho:{value:0}}),this.addAttributes({radius:{type:"f",value:null}}),this.setAttributes(t),this.makeMapping()}}Object.assign({disableImpostor:!1},Zre);const gd=class{constructor(e,t){return!ll||t&&t.disableImpostor?new wst(e,t):new Ast(e,t)}};function Pst(e,t,n,r){const i=n-e,o=r-t;return Math.sqrt(i*i+o*o)}us.add("sphere",gd),dn.add("shader/Point.vert",`uniform float clipNear;
uniform float clipRadius;
uniform vec3 clipCenter;
uniform float size;
uniform float canvasHeight;
uniform float pixelRatio;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
#include color_pars_vertex
varying vec3 vViewPosition;
#endif
#include common
void main(){
#if defined( PICKING )
vPickingColor = unpackColor( primitiveId );
#else
#include color_vertex
#endif
#include begin_vertex
#include project_vertex
#ifdef USE_SIZEATTENUATION
gl_PointSize = size * pixelRatio * ( ( canvasHeight / 2.0 ) / -mvPosition.z );
#else
gl_PointSize = size * pixelRatio;
#endif
#ifndef PICKING
vViewPosition = -mvPosition.xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
#include radiusclip_vertex
}`),dn.add("shader/Point.frag",`uniform vec3 diffuse;
uniform float opacity;
uniform float clipNear;
uniform float clipRadius;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#ifdef USE_MAP
uniform sampler2D map;
#endif
#if defined( PICKING )
uniform float objectId;
varying vec3 vPickingColor;
#else
#include common
#include color_pars_fragment
#include fog_pars_fragment
varying vec3 vViewPosition;
#endif
void main(){
#include nearclip_fragment
#include radiusclip_fragment
#if defined( PICKING )
#ifdef USE_MAP
if( texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) ).a < 0.5 )
discard;
#endif
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
vec3 outgoingLight = vec3( 0.0 );
vec4 diffuseColor = vec4( diffuse, 1.0 );
#ifdef USE_MAP
diffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );
#endif
#include color_fragment
#include alphatest_fragment
outgoingLight = diffuseColor.rgb;
gl_FragColor = vec4( outgoingLight, diffuseColor.a * opacity );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);const Mst=Object.assign({pointSize:1,sizeAttenuation:!0,sortParticles:!1,alphaTest:.5,useTexture:!1,forceTransparent:!1,edgeBleach:0},eo),Est=Object.assign({pointSize:{uniform:"size"},sizeAttenuation:{updateShader:!0},sortParticles:{},alphaTest:{updateShader:!0},useTexture:{updateShader:!0},forceTransparent:{},edgeBleach:{uniform:!0}},Nh);class vB extends xl{constructor(t,n={}){super(t,n),this.parameterTypes=Est,this.vertexShader="Point.vert",this.fragmentShader="Point.frag",this.isPoint=!0,this.addUniforms({size:{value:this.parameters.pointSize},canvasHeight:{value:1},pixelRatio:{value:1},map:{value:null}})}get defaultParameters(){return Mst}makeMaterial(){super.makeMaterial(),this.makeTexture();const t=this.material,n=this.wireframeMaterial,r=this.pickingMaterial;t.uniforms.map.value=this.tex,t.needsUpdate=!0,n.uniforms.map.value=this.tex,n.needsUpdate=!0,r.uniforms.map.value=this.tex,r.needsUpdate=!0}makeTexture(){this.tex&&this.tex.dispose(),this.tex=function(t){const n=t||{},r=re(n.width,256),i=re(n.height,256),o=[r/2,i/2],s=Math.min(r/2,i/2),a=re(n.delta,1/(s+1))*s;let l=0,c=0;const u=new Uint8Array(r*i*4);for(let f=0,h=u.length;f<h;f+=4){const p=1-Ax(s-a,s,Pst(l,c,o[0],o[1]));u[f]=255*p,u[f+1]=255*p,u[f+2]=255*p,u[f+3]=255*p,++l===r&&(l=0,c++)}const d=new yc(u,r,i);return d.needsUpdate=!0,d}({delta:this.parameters.edgeBleach})}getDefines(t){const n=super.getDefines(t);return this.parameters.sizeAttenuation&&(n.USE_SIZEATTENUATION=1),this.parameters.useTexture&&(n.USE_MAP=1),this.parameters.alphaTest>0&&this.parameters.alphaTest<=1&&(n.ALPHATEST=this.parameters.alphaTest.toPrecision(2)),n}setUniforms(t){t&&t.edgeBleach!==void 0&&(this.makeTexture(),t.map=this.tex),super.setUniforms(t)}dispose(){super.dispose(),this.tex&&this.tex.dispose()}}us.add("point",vB);class A7 extends Ex{constructor(t,n,r){super(t,n,r),this.type="dot",this.parameters=Object.assign({thresholdType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},thresholdMin:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdMax:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdOut:{type:"boolean",rebuild:!0},dotType:{type:"select",rebuild:!0,options:{"":"",sphere:"sphere",point:"point"}},radiusType:{type:"select",options:{"":"",value:"value","abs-value":"abs-value","value-min":"value-min",deviation:"deviation",size:"size"}},radius:{type:"number",precision:3,max:10,min:.001,property:"size"},scale:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,disableImpostor:!0,pointSize:{type:"number",precision:1,max:100,min:0,buffer:!0},sizeAttenuation:{type:"boolean",buffer:!0},sortParticles:{type:"boolean",rebuild:!0},useTexture:{type:"boolean",buffer:!0},alphaTest:{type:"range",step:.001,max:1,min:0,buffer:!0},forceTransparent:{type:"boolean",buffer:!0},edgeBleach:{type:"range",step:.001,max:1,min:0,buffer:!0}},this.parameters,{colorScheme:{type:"select",update:"color",options:{"":"",value:"value",uniform:"uniform",random:"random"}}}),t instanceof ao?(this.surface=void 0,this.volume=new Hl(t)):(this.surface=t,this.volume=void 0),this.init(r)}init(t){var n=t||{};n.colorScheme=re(n.colorScheme,"uniform"),n.colorValue=re(n.colorValue,14540253),this.thresholdType=re(n.thresholdType,"sigma"),this.thresholdMin=re(n.thresholdMin,2),this.thresholdMax=re(n.thresholdMax,1/0),this.thresholdOut=re(n.thresholdOut,!1),this.dotType=re(n.dotType,"point"),this.radius=re(n.radius,.1),this.scale=re(n.scale,1),this.pointSize=re(n.pointSize,1),this.sizeAttenuation=re(n.sizeAttenuation,!0),this.sortParticles=re(n.sortParticles,!1),this.useTexture=re(n.useTexture,!1),this.alphaTest=re(n.alphaTest,.5),this.forceTransparent=re(n.forceTransparent,!1),this.edgeBleach=re(n.edgeBleach,0),super.init(n),this.build()}attach(t){this.bufferList.forEach(n=>{this.viewer.add(n)}),this.setVisibility(this.visible),t()}create(){var t={};if(this.volume){var n,r,i=this.volume;this.thresholdType==="sigma"?(n=i.getValueForSigma(this.thresholdMin),r=i.getValueForSigma(this.thresholdMax)):(n=this.thresholdMin,r=this.thresholdMax),i.setFilter(n,r,this.thresholdOut),Object.assign(t,{position:i.getDataPosition(),color:i.getDataColor(this.getColorParams())}),this.dotType==="sphere"&&Object.assign(t,{radius:i.getDataSize(this.radius,this.scale),picking:i.getDataPicking()})}else{var o=this.surface;Object.assign(t,{position:o.getPosition(),color:o.getColor(this.getColorParams())}),this.dotType==="sphere"&&Object.assign(t,{radius:o.getSize(this.radius,this.scale),picking:o.getPicking()})}this.dotType==="sphere"?this.dotBuffer=new gd(t,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!1})):this.dotBuffer=new vB(t,this.getBufferParams({pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,sortParticles:this.sortParticles,useTexture:this.useTexture,alphaTest:this.alphaTest,forceTransparent:this.forceTransparent,edgeBleach:this.edgeBleach})),this.bufferList.push(this.dotBuffer)}update(t={}){if(this.bufferList.length===0)return;const n={};t.color&&(this.volume?Object.assign(n,{color:this.volume.getDataColor(this.getColorParams())}):Object.assign(n,{color:this.surface.getColor(this.getColorParams())})),this.dotType==="sphere"&&(t.radius||t.scale)&&(this.volume?Object.assign(n,{radius:this.volume.getDataSize(this.radius,this.scale)}):Object.assign(n,{radius:this.surface.getSize(this.radius,this.scale)})),this.dotBuffer.setAttributes(n)}setParameters(t,n={},r){return t&&t.thresholdType!==void 0&&this.volume instanceof ao&&(this.thresholdType==="value"&&t.thresholdType==="sigma"?(this.thresholdMin=this.volume.getSigmaForValue(this.thresholdMin),this.thresholdMax=this.volume.getSigmaForValue(this.thresholdMax)):this.thresholdType==="sigma"&&t.thresholdType==="value"&&(this.thresholdMin=this.volume.getValueForSigma(this.thresholdMin),this.thresholdMax=this.volume.getValueForSigma(this.thresholdMax)),this.thresholdType=t.thresholdType),t&&t.radiusType!==void 0&&(t.radiusType==="radius"?this.radius=.1:this.radius=parseFloat(t.radiusType),n.radius=!0,this.dotType!=="sphere"||ll&&!this.disableImpostor||(r=!0)),t&&t.radius!==void 0&&(n.radius=!0,this.dotType!=="sphere"||ll&&!this.disableImpostor||(r=!0)),t&&t.scale!==void 0&&(n.scale=!0,this.dotType!=="sphere"||ll&&!this.disableImpostor||(r=!0)),super.setParameters(t,n,r),this}}dn.add("shader/Image.vert",`uniform float clipRadius;
uniform vec3 clipCenter;
varying vec2 vUv;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
void main() {
#include begin_vertex
#include project_vertex
vUv = uv;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )
vViewPosition = -mvPosition.xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
}`),dn.add("shader/Image.frag",`uniform sampler2D map;
uniform float opacity;
uniform vec2 mapSize;
uniform float clipNear;
uniform float clipRadius;
varying vec2 vUv;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
uniform sampler2D pickingMap;
uniform float objectId;
#else
#include fog_pars_fragment
#endif
#if defined( CUBIC_INTERPOLATION )
#if defined( CATMULROM_FILTER ) || defined( MITCHELL_FILTER )
#if defined( CATMULROM_FILTER )
const float B = 0.0;
const float C = 0.5;
#elif defined( MITCHELL_FILTER )
const float B = 0.333;
const float C = 0.333;
#endif
float filter( float x ){
float f = x;
if( f < 0.0 ){
f = -f;
}
if( f < 1.0 ){
return ( ( 12.0 - 9.0 * B - 6.0 * C ) * ( f * f * f ) +
( -18.0 + 12.0 * B + 6.0 *C ) * ( f * f ) +
( 6.0 - 2.0 * B ) ) / 6.0;
}else if( f >= 1.0 && f < 2.0 ){
return ( ( -B - 6.0 * C ) * ( f * f * f )
+ ( 6.0 * B + 30.0 * C ) * ( f *f ) +
( - ( 12.0 * B ) - 48.0 * C ) * f +
8.0 * B + 24.0 * C ) / 6.0;
}else{
return 0.0;
}
}
#elif defined( BSPLINE_FILTER )
float filter( float x ){
float f = x;
if( f < 0.0 ){
f = -f;
}
if( f >= 0.0 && f <= 1.0 ){
return ( 2.0 / 3.0 ) + ( 0.5 ) * ( f * f * f ) - ( f * f );
}else if( f > 1.0 && f <= 2.0 ){
return 1.0 / 6.0 * pow( ( 2.0 - f ), 3.0 );
}
return 1.0;
}
#else
float filter( float x ){
return 1.0;
}
#endif
vec4 biCubic( sampler2D tex, vec2 texCoord ){
vec2 texelSize = 1.0 / mapSize;
texCoord -= texelSize / 2.0;
vec4 nSum = vec4( 0.0 );
float nDenom = 0.0;
vec2 cell = fract( texCoord * mapSize );
for( float m = -1.0; m <= 2.0; ++m ){
for( float n = -1.0; n <= 2.0; ++n ){
vec4 vecData = texture2D(
tex, texCoord + texelSize * vec2( m, n )
);
float c = filter( m - cell.x ) * filter( -n + cell.y );
nSum += vecData * c;
nDenom += c;
}
}
return nSum / nDenom;
}
#endif
void main(){
#include nearclip_fragment
#include radiusclip_fragment
#if defined( CUBIC_INTERPOLATION )
gl_FragColor = biCubic( map, vUv );
#else
gl_FragColor = texture2D( map, vUv );
#endif
#if defined( PICKING )
if( gl_FragColor.a < 0.3 )
discard;
gl_FragColor = vec4( texture2D( pickingMap, vUv ).xyz, objectId );
#else
if( gl_FragColor.a < 0.01 )
discard;
gl_FragColor.a *= opacity;
#include fog_fragment
#endif
}`);const Tst=new Uint16Array([0,1,2,1,3,2]),Ost=new Float32Array([0,1,0,0,1,1,1,0]),Ist=Object.assign({filter:"nearest",forceTransparent:!0},eo),Rst=Object.assign({filter:{updateShader:!0,uniform:!0}},Nh);class kst extends xl{constructor(t,n){super({position:t.position,index:Tst,picking:t.picking},n),this.parameterTypes=Rst,this.alwaysTransparent=!0,this.hasWireframe=!1,this.vertexShader="Image.vert",this.fragmentShader="Image.frag";const{imageData:r,width:i,height:o}=t,s=new yc(r,i,o);s.flipY=!0,this.tex=s;const a=r.length,l=new Uint8Array(a);for(let u=0;u<a;u+=4){const d=u/4;l[u]=d>>16&255,l[u+1]=d>>8&255,l[u+2]=255&d}const c=new yc(l,i,o);c.flipY=!0,c.minFilter=Nn,c.magFilter=Nn,this.pickingTex=c,this.addUniforms({map:{value:s},pickingMap:{value:c},mapSize:{value:new et(i,o)}}),this.geometry.setAttribute("uv",new Rt(Ost,2))}get defaultParameters(){return Ist}getDefines(t){const n=super.getDefines(t),r=this.parameters.filter;return r.startsWith("cubic")&&(n.CUBIC_INTERPOLATION=1,r.endsWith("bspline")?n.BSPLINE_FILTER=1:r.endsWith("catmulrom")?n.CATMULROM_FILTER=1:r.endsWith("mitchell")&&(n.MITCHELL_FILTER=1)),n}updateTexture(){const t=this.tex,n=this.parameters.filter;n.startsWith("cubic")?(t.minFilter=Nn,t.magFilter=Nn):n==="linear"?(t.minFilter=Wr,t.magFilter=Wr):(t.minFilter=Nn,t.magFilter=Nn),t.needsUpdate=!0,this.pickingTex.needsUpdate=!0}makeMaterial(){super.makeMaterial(),this.updateTexture();const t=this.material;t.uniforms.map.value=this.tex,t.blending=Tu,t.needsUpdate=!0;const n=this.wireframeMaterial;n.uniforms.map.value=this.tex,n.blending=Tu,n.needsUpdate=!0;const r=this.pickingMaterial;r.uniforms.map.value=this.tex,r.uniforms.pickingMap.value=this.pickingTex,r.blending=Tu,r.needsUpdate=!0}setUniforms(t){t&&t.filter!==void 0&&(this.updateTexture(),t.map=this.tex),super.setUniforms(t)}}class Lst{constructor(t,n){const r=n||{};this.dimension=re(r.dimension,"x"),this.positionType=re(r.positionType,"percent"),this.position=re(r.position,30),this.thresholdType=re(r.thresholdType,"sigma"),this.thresholdMin=re(r.thresholdMin,-1/0),this.thresholdMax=re(r.thresholdMax,1/0),this.normalize=re(r.normalize,!1),this.volume=t}getPositionFromCoordinate(t){const n=this.dimension,r=this.volume,i=r.matrix,o=new W().setFromMatrixPosition(i)[n],s=new W().setFromMatrixScale(i)[n];let a;return a=n==="x"?r.nx:n==="y"?r.ny:r.nz,Math.round(((t-o)/(a/100)+1)/s)}getData(t){t=t||{};const n=this.volume,r=n.data,i=n.matrix;let o;function s(J){return Math.round(J/100*(o-1))}function a(J,K,ie,ce){return 3*(ie*n.ny*n.nx+K*n.nx+J)+ce}o=this.positionType==="coordinate"?this.getPositionFromCoordinate(this.position):this.position;const l=new Float32Array(12),c=new W;let u,d,f,h,p,g=0,v=0,m=0,y=n.nx,b=n.ny,_=n.nz;function x(J,K,ie,ce){c.set(J,K,ie).applyMatrix4(i).toArray(l,ce)}this.dimension==="x"?(f=s(n.nx),h=n.ny-1,p=n.nz-1,u=n.nz,d=n.ny,g=f,y=g+1,x(f,0,0,0),x(f,h,0,3),x(f,0,p,6),x(f,h,p,9)):this.dimension==="y"?(f=n.nx-1,h=s(n.ny),p=n.nz-1,u=n.nz,d=n.nx,v=h,b=v+1,x(0,h,0,0),x(f,h,0,3),x(0,h,p,6),x(f,h,p,9)):this.dimension==="z"&&(f=n.nx-1,h=n.ny-1,p=s(n.nz),u=n.nx,d=n.ny,m=p,_=m+1,x(0,0,p,0),x(0,h,p,3),x(f,0,p,6),x(f,h,p,9));let w=0,S=0;const C=new Uint8Array(u*d*4),A=new Float32Array(u*d);let T,O;this.thresholdType==="sigma"?(T=n.getValueForSigma(this.thresholdMin),O=n.getValueForSigma(this.thresholdMax)):(T=this.thresholdMin,O=this.thresholdMax);const R=Object.assign({},t.colorParams,{volume:n});this.normalize&&(R.domain=[0,1]);const L=Qt.getScheme(R),D=new Float32Array(3),$=L.getScale();let z,H=0,B=0;if(this.normalize){H=1/0,z=-1/0;for(let J=v;J<b;++J)for(let K=g;K<y;++K)for(let ie=m;ie<_;++ie){const ce=r[a(K,J,ie,0)/3];ce<H&&(H=ce),ce>z&&(z=ce)}B=z-H}for(let J=v;J<b;++J)for(let K=g;K<y;++K)for(let ie=m;ie<_;++ie){const ce=a(K,J,ie,0)/3;let pe=r[ce];this.normalize&&(pe=(pe-H)/B),L.colorToArray($(pe),D),C[w]=Math.round(255*D[0]),C[w+1]=Math.round(255*D[1]),C[w+2]=Math.round(255*D[2]),C[w+3]=pe>T&&pe<O?255:0,A[S]=ce,++S,w+=4}const V=new Mot(A,n);return{position:l,imageData:C,width:u,height:d,picking:V}}}class $st extends Ex{constructor(t,n,r){super(t,n,r),this.type="slice",this.parameters=Object.assign({filter:{type:"select",buffer:!0,options:{nearest:"nearest",linear:"linear","cubic-bspline":"cubic-bspline","cubic-catmulrom":"cubic-catmulrom","cubic-mitchell":"cubic-mitchell"}},positionType:{type:"select",rebuild:!0,options:{percent:"percent",coordinate:"coordinate"}},position:{type:"range",step:.1,max:100,min:1,rebuild:!0},dimension:{type:"select",rebuild:!0,options:{x:"x",y:"y",z:"z"}},thresholdType:{type:"select",rebuild:!0,options:{value:"value",sigma:"sigma"}},thresholdMin:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},thresholdMax:{type:"number",precision:3,max:1/0,min:-1/0,rebuild:!0},normalize:{type:"boolean",rebuild:!0}},this.parameters,{flatShaded:null,side:null,wireframe:null,linewidth:null,colorScheme:null,roughness:null,metalness:null,diffuse:null}),this.volume=t,this.init(r)}init(t){const n=this.volume,r=t||{};r.colorDomain=re(r.colorDomain,[n.min,n.max]),r.colorScheme=re(r.colorScheme,"value"),r.colorScale=re(r.colorScale,"Spectral"),this.colorScheme="value",this.dimension=re(r.dimension,"x"),this.filter=re(r.filter,"cubic-bspline"),this.positionType=re(r.positionType,"percent"),this.position=re(r.position,30),this.thresholdType=re(r.thresholdType,"sigma"),this.thresholdMin=re(r.thresholdMin,-1/0),this.thresholdMax=re(r.thresholdMax,1/0),this.normalize=re(r.normalize,!1),super.init(r),this.build()}attach(t){this.bufferList.forEach(n=>{this.viewer.add(n)}),this.setVisibility(this.visible),t()}create(){const t=new Lst(this.volume,{positionType:this.positionType,position:this.position,dimension:this.dimension,thresholdType:this.thresholdType,thresholdMin:this.thresholdMin,thresholdMax:this.thresholdMax,normalize:this.normalize}),n=new kst(t.getData({colorParams:this.getColorParams()}),this.getBufferParams({filter:this.filter}));this.bufferList.push(n)}}function QO(e){Ve.error(`makeRepresentation: representation type ${e} unknown`)}const yB={name:"some element",status:""};class Jre{constructor(t,n={}){this.stage=t,this.signals={statusChanged:new Ht.Signal,nameChanged:new Ht.Signal,disposed:new Ht.Signal},this.parameters=ns(n,this.defaultParameters),this.uuid=nB()}get defaultParameters(){return yB}get name(){return this.parameters.name}setStatus(t){return this.parameters.status=t,this.signals.statusChanged.dispatch(t),this}setName(t){return this.parameters.name=t,this.signals.nameChanged.dispatch(t),this}dispose(){this.signals.disposed.dispatch()}}const Dst=Object.assign({visible:!0},yB);class Bst extends Jre{constructor(t,n,r={},i){super(t,Object.assign({name:n.type},r)),this.parent=i,this.signals=Object.assign({visibilityChanged:new Ht.Signal,parametersChanged:new Ht.Signal},this.signals),this.setRepresentation(n)}get defaultParameters(){return Dst}get visible(){return this.parameters.visible}get type(){return"representation"}getType(){return this.repr.type}setRepresentation(t){this._disposeRepresentation(),this.repr=t,this.stage.tasks.listen(this.repr.tasks),this.updateVisibility()}_disposeRepresentation(){this.repr&&(this.stage.tasks.unlisten(this.repr.tasks),this.repr.dispose())}dispose(){this.parent&&this.parent.hasRepresentation(this)?this.parent.removeRepresentation(this):(this._disposeRepresentation(),this.signals.disposed.dispatch())}setVisibility(t){return this.parameters.visible=t,this.updateVisibility(),this.signals.visibilityChanged.dispatch(this.parameters.visible),this}getVisibility(){return this.parent?this.parent.parameters.visible&&this.parameters.visible:this.parameters.visible}toggleVisibility(){return this.setVisibility(!this.parameters.visible)}updateVisibility(){this.repr.setVisibility(this.getVisibility())}update(t){return this.repr.update(t),this}build(t){return this.repr.build(t),this}setSelection(t){const n=this.repr;return n.setSelection&&n.setSelection(t),this}setParameters(t){return this.repr.setParameters(t),this.signals.parametersChanged.dispatch(this.repr.getParameters()),this}getParameters(){return this.repr.getParameters()}setColor(t){return this.repr.setColor(t),this}}const mp=new lt,Nst=new W,Qre={name:"",status:"",visible:!0};class GE{constructor(t,n,r={}){this.stage=t,this.object=n,this.signals={representationAdded:new Ht.Signal,representationRemoved:new Ht.Signal,visibilityChanged:new Ht.Signal,matrixChanged:new Ht.Signal,statusChanged:new Ht.Signal,nameChanged:new Ht.Signal,disposed:new Ht.Signal},this.reprList=[],this.annotationList=[],this.matrix=new lt,this.position=new W,this.quaternion=new Fn,this.scale=new W(1,1,1),this.transform=new lt,this.parameters=ns(r,this.defaultParameters),this.uuid=nB(),this.viewer=t.viewer,this.controls=new Fot(this)}get defaultParameters(){return Qre}get name(){return this.parameters.name}get status(){return this.parameters.status}get visible(){return this.parameters.visible}setPosition(t){return Array.isArray(t)?this.position.fromArray(t):this.position.copy(t),this.updateMatrix(),this}setRotation(t){if(Array.isArray(t))if(t.length===3){const n=new Gu().fromArray(t);this.quaternion.setFromEuler(n)}else this.quaternion.fromArray(t);else t instanceof Gu?this.quaternion.setFromEuler(t):this.quaternion.copy(t);return this.updateMatrix(),this}setScale(t){return this.scale.set(t,t,t),this.updateMatrix(),this}setTransform(t){return this.transform.copy(t),this.updateMatrix(),this}updateMatrix(){const t=this.getCenterUntransformed(Nst);this.matrix.makeTranslation(-t.x,-t.y,-t.z),mp.makeRotationFromQuaternion(this.quaternion),this.matrix.premultiply(mp),mp.makeScale(this.scale.x,this.scale.y,this.scale.z),this.matrix.premultiply(mp);const n=this.position;mp.makeTranslation(n.x+t.x,n.y+t.y,n.z+t.z),this.matrix.premultiply(mp),this.matrix.premultiply(this.transform),this.updateRepresentationMatrices(),this.stage.viewer.updateBoundingBox(),this.signals.matrixChanged.dispatch(this.matrix)}updateRepresentationMatrices(){this.reprList.forEach(t=>{t.setParameters({matrix:this.matrix})})}addAnnotation(t,n,r){const i=new Not(this,t,n,r);return this.annotationList.push(i),i}eachAnnotation(t){this.annotationList.slice().forEach(t)}removeAnnotation(t){const n=this.annotationList.indexOf(t);n!==-1&&(this.annotationList.splice(n,1),t.dispose())}removeAllAnnotations(){this.eachAnnotation(t=>t.dispose()),this.annotationList.length=0}_addRepresentation(t,n,r,i=!1){const o=r||{},s=this.stage.getParameters();o.matrix=this.matrix.clone(),o.quality=o.quality||s.quality,o.disableImpostor=re(o.disableImpostor,!s.impostor),o.useWorker=re(o.useWorker,s.workerDefault),o.visible=re(o.visible,!0);const a=Object.assign({},o,{visible:this.parameters.visible&&o.visible}),l=function(u,d,f,h){var p;if(Je&&Ve.time("makeRepresentation "+u),d instanceof Xa){if(!(p=Zn.get(u)))return void QO(u)}else if(d instanceof jE)if(u==="surface")p=YL;else{if(u!=="dot")return void QO(u);p=A7}else if(d instanceof ao)if(u==="surface")p=YL;else if(u==="dot")p=A7;else{if(u!=="slice")return void QO(u);p=$st}else if(d instanceof _st)p=w7,d=d.getBufferList();else{if(u!=="buffer")return void Ve.error("makeRepresentation: object "+d+" unknown");p=w7}const g=new p(d,f,h);return Je&&Ve.timeEnd("makeRepresentation "+u),g}(t,n,this.viewer,a),c=new Bst(this.stage,l,o,this);return i||(this.reprList.push(c),this.signals.representationAdded.dispatch(c)),c}addBufferRepresentation(t,n){return this._addRepresentation.call(this,"buffer",t,n)}hasRepresentation(t){return this.reprList.indexOf(t)!==-1}eachRepresentation(t){this.reprList.slice().forEach(t)}removeRepresentation(t){const n=this.reprList.indexOf(t);n!==-1&&(this.reprList.splice(n,1),t.dispose(),this.signals.representationRemoved.dispatch(t))}updateRepresentations(t){this.reprList.forEach(n=>n.update(t)),this.stage.viewer.requestRender()}removeAllRepresentations(){this.eachRepresentation(t=>t.dispose())}dispose(){this.removeAllAnnotations(),this.removeAllRepresentations(),this.reprList.length=0,this.signals.disposed.dispatch()}setVisibility(t){return this.parameters.visible=t,this.eachRepresentation(n=>n.updateVisibility()),this.eachAnnotation(n=>n.updateVisibility()),this.signals.visibilityChanged.dispatch(t),this}setStatus(t){return this.parameters.status=t,this.signals.statusChanged.dispatch(t),this}setName(t){return this.parameters.name=t,this.signals.nameChanged.dispatch(t),this}getBox(...t){return this.getBoxUntransformed(...t).clone().applyMatrix4(this.matrix)}getCenter(...t){return this.getCenterUntransformed(...t).clone().applyMatrix4(this.matrix)}getZoom(...t){return this.stage.getZoomForBox(this.getBox(...t))}getBoxUntransformed(...t){return new zn}getCenterUntransformed(...t){return this.getBoxUntransformed().getCenter(new W)}autoView(t){this.stage.animationControls.zoomMove(this.getCenter(),this.getZoom(),re(t,0))}}class eie{constructor(t=[]){this.list=t;const n=t.length;for(let r=0;r<n;++r)t[r].signals.disposed.add(this._remove,this)}_remove(t){const n=this.list.indexOf(t);n!==-1&&this.list.splice(n,1)}get first(){return this.list.length>0?this.list[0]:void 0}forEach(t){return this.list.forEach(t),this}dispose(){return this.forEach(t=>t.dispose())}}class tie extends eie{setParameters(t){return this.forEach(n=>n.setParameters(t))}setVisibility(t){return this.forEach(n=>n.setVisibility(t))}setSelection(t){return this.forEach(n=>n.setSelection(t))}setColor(t){return this.forEach(n=>n.setColor(t))}update(t){return this.forEach(n=>n.update(t))}build(t){return this.forEach(n=>n.build(t))}dispose(t){return this.forEach(n=>n.dispose())}}const Fst=Object.assign({defaultStep:1,defaultTimeout:50,defaultInterpolateType:"",defaultInterpolateStep:5,defaultMode:"loop",defaultDirection:"forward",initialFrame:0},yB);class zst extends Jre{constructor(t,n,r={}){super(t,Object.assign({name:n.name},r)),this.trajectory=n,this.signals=Object.assign(this.signals,{frameChanged:new Ht.Signal,playerChanged:new Ht.Signal,countChanged:new Ht.Signal,parametersChanged:new Ht.Signal}),n.signals.frameChanged.add(i=>{this.signals.frameChanged.dispatch(i)}),n.signals.playerChanged.add(i=>{this.signals.playerChanged.dispatch(i)}),n.signals.countChanged.add(i=>{this.signals.countChanged.dispatch(i)}),r.initialFrame!==void 0&&this.setFrame(r.initialFrame)}get defaultParameters(){return Fst}get type(){return"trajectory"}setFrame(t){this.trajectory.setFrame(t)}setParameters(t={}){this.trajectory.setParameters(t),this.signals.parametersChanged.dispatch(t)}dispose(){this.trajectory.dispose(),super.dispose()}}class nie{constructor(t,n){this.name=t,this.path=n,this.coordinates=[],this.boxes=[],this.times=[],this.timeOffset=0,this.deltaTime=1}get type(){return"Frames"}}class rie{constructor(t,n){let r,i;if(this.A=new bn(3,3),this.W=new bn(1,3),this.U=new bn(3,3),this.V=new bn(3,3),this.VH=new bn(3,3),this.R=new bn(3,3),this.tmp=new bn(3,3),this.c=new bn(3,3),t instanceof Xa)r=t.atomCount;else{if(!(t instanceof Float32Array))return;r=t.length/3}if(n instanceof Xa)i=n.atomCount;else{if(!(n instanceof Float32Array))return;i=n.length/3}const o=Math.min(r,i),s=new bn(3,o),a=new bn(3,o);this.coords1t=new bn(o,3),this.coords2t=new bn(o,3),this.transformationMatrix=new lt,this.c.data.set([1,0,0,0,1,0,0,0,-1]),this.prepCoords(t,s,o,!1),this.prepCoords(n,a,o,!1),this._superpose(s,a)}_superpose(t,n){this.mean1=VL(t),this.mean2=VL(n),HL(t,this.mean1),HL(n,this.mean2),oa(this.coords1t,t),oa(this.coords2t,n),PS(this.A,this.coords2t,this.coords1t),Nre(this.A,this.W,this.U,this.V),function(f,h){const p=f.data,g=h.data,v=p[4],m=p[8],y=p[5],b=p[7],_=p[0],x=_*v,w=_*y,S=p[3],C=p[1],A=S*C,T=p[2],O=S*T,R=p[6],L=R*C,D=R*T,$=1/(x*m-w*b-A*m+O*b+L*y-D*v);g[0]=(v*m-y*b)*$,g[1]=-(C*m-T*b)*$,g[2]=-(-C*y+T*v)*$,g[3]=-(S*m-y*R)*$,g[4]=(_*m-D)*$,g[5]=-(w-O)*$,g[6]=-(-S*b+v*R)*$,g[7]=-(_*b-L)*$,g[8]=(x-A)*$}(this.V,this.VH),WO(this.R,this.U,this.VH),function(f){const h=f.data;return h[0]*h[4]*h[8]-h[0]*h[5]*h[7]-h[3]*h[1]*h[8]+h[3]*h[2]*h[7]+h[6]*h[1]*h[5]-h[6]*h[2]*h[4]}(this.R)<0&&(Je&&Ve.log("R not a right handed system"),WO(this.tmp,this.c,this.VH),WO(this.R,this.U,this.tmp));const r=new bn(4,4),i=new bn(4,4),o=new bn(4,4),s=new bn(4,4),a=new bn(4,4),l=new bn(4,4),c=this.R.data,u=this.mean1,d=this.mean2;s.data.set([1,0,0,-u[0],0,1,0,-u[1],0,0,1,-u[2],0,0,0,1]),a.data.set([c[0],c[1],c[2],0,c[3],c[4],c[5],0,c[6],c[7],c[8],0,0,0,0,1]),l.data.set([1,0,0,d[0],0,1,0,d[1],0,0,1,d[2],0,0,0,1]),oa(i,s),PS(r,a,i),oa(o,r),PS(i,l,o),oa(r,i),this.transformationMatrix.elements=r.data}prepCoords(t,n,r,i){let o=0;const s=n.data;let a=3,l=3*r;if(i&&(l=4*r,a=4),t instanceof Xa)t.eachAtom(function(c){o<l&&(s[o+0]=c.x,s[o+1]=c.y,s[o+2]=c.z,i&&(s[o+3]=1),o+=a)});else if(t instanceof Float32Array)for(;o<l;o+=a)o<l&&(s[o]=t[o],s[o+1]=t[o+1],s[o+2]=t[o+2],i&&(s[o+3]=1));else Ve.warn("prepCoords: input type unknown")}transform(t){let n;if(t instanceof Xa)n=t.atomCount;else{if(!(t instanceof Float32Array))return;n=t.length/3}const r=new bn(4,n),i=new bn(n,4);this.prepCoords(t,r,n,!0);const o=this.transformationMatrix,s=o.determinant();if(!s)return s;const a=new bn(4,4);a.data=o.elements,function(u,d,f){let h=0,p=0,g=0,v=0,m=0,y=0,b=0,_=0;const x=d.cols,w=d.rows,S=f.cols,C=d.data,A=f.data,T=u.data;let O=0;for(;h<w;v+=x,h++)for(b=0,p=0;p<S;_++,b++,p++){for(y=b,m=v,O=0,g=0;g<x;m++,y+=S,g++)O+=C[m]*A[y];T[_]=O}}(i,r,a);let l=0;const c=i.data;if(t instanceof Xa){t.eachAtom(function(f){f.x=c[l],f.y=c[l+1],f.z=c[l+2],l+=4});const u=new lt;u.getInverse(o);const d=t.biomolDict;for(let f in d)d.hasOwnProperty(f)&&d[f].partList.forEach(function(h){h.matrixList.forEach(function(p){p.premultiply(o),p.multiply(u)})})}else if(t instanceof Float32Array){const u=4*n;for(;l<u;l+=4)t[l]=c[l],t[l+1]=c[l+1],t[l+2]=c[l+2]}else Ve.warn("transform: input type unknown");return this.transformationMatrix}}const jst={step:1,timeout:50,start:0,end:0,interpolateType:"",interpolateStep:5,mode:"loop",direction:"forward"};class Ust{constructor(t,n={}){this.signals={startedRunning:new Ht.Signal,haltedRunning:new Ht.Signal},this._run=!1,this._previousTime=0,this._currentTime=0,this._currentStep=1,t.signals.playerChanged.add(i=>{i!==this&&this.pause()},this);const r=re(t.frameCount,1);this.traj=t,this.parameters=ns(n,jst),this.parameters.end=Math.min(re(n.end,r-1),r-1),this.parameters.step=re(n.step,Math.ceil((r+1)/100)),this._currentFrame=this.parameters.start,this._direction=this.parameters.direction==="bounce"?"forward":this.parameters.direction,t.signals.countChanged.add(i=>{this.parameters.end=Math.min(re(this.parameters.end,i-1),i-1)},this),this._animate=this._animate.bind(this)}get isRunning(){return this._run}setParameters(t={}){sre(this.parameters,t),t.direction!==void 0&&this.parameters.direction!=="bounce"&&(this._direction=this.parameters.direction)}_animate(){if(!this._run)return;this._currentTime=window.performance.now();const t=this._currentTime-this._previousTime,n=this.parameters.interpolateType?this.parameters.interpolateStep:1,r=this.parameters.timeout/n,i=this.traj;if(i&&i.frameCount&&!i.inProgress&&t>=r)if(this.parameters.interpolateType)if(this._currentStep>this.parameters.interpolateStep&&(this._currentStep=1),this._currentStep===1&&(this._currentFrame=this._nextInterpolated()),i.hasFrame(this._currentFrame)){this._currentStep+=1;const o=this._currentStep/(this.parameters.interpolateStep+1),[s,a,l,c]=this._currentFrame;i.setFrameInterpolated(s,a,l,c,o,this.parameters.interpolateType),this._previousTime=this._currentTime}else i.loadFrame(this._currentFrame);else{const o=this._next();i.hasFrame(o)?(i.setFrame(o),this._previousTime=this._currentTime):i.loadFrame(o)}window.requestAnimationFrame(this._animate)}_next(){const t=this.parameters;let n;return n=this._direction==="forward"?this.traj.currentFrame+t.step:this.traj.currentFrame-t.step,(n>t.end||n<t.start)&&(t.direction==="bounce"&&(this._direction==="forward"?this._direction="backward":this._direction="forward"),t.mode==="once"?(this.pause(),n=t.direction==="forward"?t.end:t.direction==="backward"||this._direction==="forward"?t.start:t.end):this._direction==="forward"?(n=t.start,t.interpolateType&&(n=Math.min(t.end,n+t.step))):(n=t.end,t.interpolateType&&(n=Math.max(t.start,n-t.step)))),n}_nextInterpolated(){const t=this.parameters,n=this._next();let r,i,o;return this._direction==="forward"?(r=Math.max(t.start,n-t.step),i=Math.max(t.start,n-2*t.step),o=Math.max(t.start,n-3*t.step)):(r=Math.min(t.end,n+t.step),i=Math.min(t.end,n+2*t.step),o=Math.min(t.end,n+3*t.step)),[n,r,i,o]}toggle(){this._run?this.pause():this.play()}play(){if(!this._run){this.traj.player!==this&&this.traj.setPlayer(this),this._currentStep=1;const t=this.parameters,n=this.traj.currentFrame;let r=Math.ceil(n/t.step)*t.step;t.direction==="forward"&&n>=t.end?r=t.start:t.direction==="backward"&&n<=t.start&&(r=t.end),this.traj.setFrame(r),this._run=!0,this._animate(),this.signals.startedRunning.dispatch()}}pause(){this._run=!1,this.signals.haltedRunning.dispatch()}stop(){this.pause(),this.traj.setFrame(this.parameters.start)}}class WE{constructor(t,n,r={}){this.signals={countChanged:new Ht.Signal,frameChanged:new Ht.Signal,playerChanged:new Ht.Signal},this.frameCache={},this.loadQueue={},this.boxCache={},this.pathCache={},this.frameCacheSize=0,this._frameCount=0,this._currentFrame=-1,this._disposed=!1,this.deltaTime=re(r.deltaTime,0),this.timeOffset=re(r.timeOffset,0),this.centerPbc=re(r.centerPbc,!1),this.removePbc=re(r.removePbc,!1),this.removePeriodicity=re(r.removePeriodicity,!1),this.superpose=re(r.superpose,!1),this.name=t.replace(/^.*[\\/]/,""),this.trajPath=t,this.selection=new Xn(re(r.sele,"backbone and not hydrogen")),this.selection.signals.stringChanged.add(()=>{this.selectionIndices=this.structure.getAtomIndices(this.selection),this._resetCache(),this._saveInitialCoords(),this.setFrame(this._currentFrame)})}get frameCount(){return this._frameCount}get currentFrame(){return this._currentFrame}_init(t){this.setStructure(t),this._loadFrameCount(),this.setPlayer(new Ust(this))}_loadFrameCount(){}setStructure(t){this.structure=t,this.atomCount=t.atomCount,this.backboneIndices=this._getIndices(new Xn("backbone and not hydrogen")),this._makeAtomIndices(),this._saveStructureCoords(),this.selectionIndices=this._getIndices(this.selection),this._resetCache(),this._saveInitialCoords(),this.setFrame(this._currentFrame)}_saveInitialCoords(){this.structure.hasCoords()?(this.initialCoords=new Float32Array(this.structureCoords),this._makeSuperposeCoords()):this.frameCache[0]?(this.initialCoords=new Float32Array(this.frameCache[0]),this._makeSuperposeCoords()):this.loadFrame(0,()=>this._saveInitialCoords())}_saveStructureCoords(){this.structureCoords=this.structure.getAtomData({what:{position:!0}}).position}setSelection(t){return this.selection.setString(t),this}_getIndices(t){let n=0;const r=t.test,i=[];return r&&this.structure.eachAtom(o=>{r(o)&&i.push(n),n+=1}),i}_makeSuperposeCoords(){const t=3*this.selectionIndices.length;this.coords1=new Float32Array(t),this.coords2=new Float32Array(t);const n=this.initialCoords,r=this.coords2;for(let i=0;i<t;i+=3){const o=3*this.selectionIndices[i/3];r[i+0]=n[o+0],r[i+1]=n[o+1],r[i+2]=n[o+2]}}_makeAtomIndices(){Ve.error("Trajectory._makeAtomIndices not implemented")}_resetCache(){this.frameCache={},this.loadQueue={},this.boxCache={},this.pathCache={},this.frameCacheSize=0,this.initialCoords=new Float32Array(0)}setParameters(t={}){let n=!1;t.centerPbc!==void 0&&t.centerPbc!==this.centerPbc&&(this.centerPbc=t.centerPbc,n=!0),t.removePeriodicity!==void 0&&t.removePeriodicity!==this.removePeriodicity&&(this.removePeriodicity=t.removePeriodicity,n=!0),t.removePbc!==void 0&&t.removePbc!==this.removePbc&&(this.removePbc=t.removePbc,n=!0),t.superpose!==void 0&&t.superpose!==this.superpose&&(this.superpose=t.superpose,n=!0),this.deltaTime=re(t.deltaTime,this.deltaTime),this.timeOffset=re(t.timeOffset,this.timeOffset),n&&(this._resetCache(),this.setFrame(this._currentFrame))}hasFrame(t){return Array.isArray(t)?t.every(n=>!!this.frameCache[n]):!!this.frameCache[t]}setFrame(t,n){return t===void 0||(this.inProgress=!0,t===-1||this.frameCache[t]?(this._updateStructure(t),n&&n()):this.loadFrame(t,()=>{this._updateStructure(t),n&&n()})),this}_interpolate(t,n,r,i,o,s){const a=this.frameCache;let l;l=s==="spline"?function(c,u,d,f,h){const p=c.length,g=new Float32Array(p);for(let v=0;v<p;v+=3){const m=v+1,y=v+2;g[v]=ql(f[v],d[v],u[v],c[v],h,1),g[m]=ql(f[m],d[m],u[m],c[m],h,1),g[y]=ql(f[y],d[y],u[y],c[y],h,1)}return g}(a[t],a[n],a[r],a[i],o):function(c,u,d){const f=c.length,h=new Float32Array(f);for(let p=0;p<f;p+=3){const g=p+1,v=p+2;h[p]=ys(u[p],c[p],d),h[g]=ys(u[g],c[g],d),h[v]=ys(u[v],c[v],d)}return h}(a[t],a[n],o),this.structure.updatePosition(l),this._currentFrame=t,this.signals.frameChanged.dispatch(t)}setFrameInterpolated(t,n,r,i,o,s,a){if(t===void 0)return this;const l=this.frameCache,c=[];return l[i]||c.push(i),l[r]||c.push(r),l[n]||c.push(n),l[t]||c.push(t),c.length?this.loadFrame(c,()=>{this._interpolate(t,n,r,i,o,s),a&&a()}):(this._interpolate(t,n,r,i,o,s),a&&a()),this}loadFrame(t,n){Array.isArray(t)?t.forEach(r=>{this.loadQueue[r]||this.frameCache[r]||(this.loadQueue[r]=!0,this._loadFrame(r,()=>{delete this.loadQueue[r]}))}):this.loadQueue[t]||this.frameCache[t]||(this.loadQueue[t]=!0,this._loadFrame(t,()=>{delete this.loadQueue[t],n&&n()}))}_loadFrame(t,n){Ve.error("Trajectory._loadFrame not implemented",t,n)}_updateStructure(t){this._disposed?console.error("updateStructure: traj disposed"):(t===-1?this.structureCoords&&this.structure.updatePosition(this.structureCoords):this.structure.updatePosition(this.frameCache[t]),this.structure.trajectory={name:this.trajPath,frame:t},this._currentFrame=t,this.inProgress=!1,this.signals.frameChanged.dispatch(t))}_doSuperpose(t){const n=3*this.selectionIndices.length,r=this.coords1,i=this.coords2;for(let o=0;o<n;o+=3){const s=3*this.selectionIndices[o/3];r[o+0]=t[s+0],r[o+1]=t[s+1],r[o+2]=t[s+2]}new rie(r,i).transform(t)}_process(t,n,r,i){if(this._setFrameCount(i),n){if(this.backboneIndices.length>0&&this.centerPbc){const o=[n[0],n[4],n[8]],s=function(a,l,c){return[NO(l,c[0],3,0,a),NO(l,c[1],3,1,a),NO(l,c[2],3,2,a)]}(this.backboneIndices,r,o);(function(a,l,c){if(c[0]===0||c[8]===0||c[4]===0)return;const u=a.length,d=c[0],f=c[1],h=c[2],p=-l[0]+d+d/2,g=-l[1]+f+f/2,v=-l[2]+h+h/2;for(let m=0;m<u;m+=3)a[m+0]=(a[m+0]+p)%d,a[m+1]=(a[m+1]+g)%f,a[m+2]=(a[m+2]+v)%h})(r,s,o)}if(this.removePeriodicity){const o=function(s){return[CS(s,3,0),CS(s,3,1),CS(s,3,2)]}(r);(function(s,a,l){if(a[0]===0||a[8]===0||a[4]===0)return;const c=s.length;for(let u=3;u<c;u+=3)for(let d=0;d<3;++d){const f=(s[u+d]-l[d])/a[3*d+d];Math.abs(f)>.5&&(s[u+d]-=a[3*d+d]*Math.round(f))}})(r,n,o)}this.removePbc&&function(o,s){if(s[0]===0||s[8]===0||s[4]===0)return;const a=o.length;for(let l=3;l<a;l+=3)for(let c=0;c<3;++c){const u=o[l+c]-o[l-3+c];if(Math.abs(u)>.9*s[3*c+c])if(u>0)for(let d=0;d<3;++d)o[l+d]-=s[3*c+d];else for(let d=0;d<3;++d)o[l+d]+=s[3*c+d]}}(r,n)}this.selectionIndices.length>0&&this.coords1&&this.superpose&&this._doSuperpose(r),this.frameCache[t]=r,this.boxCache[t]=n,this.frameCacheSize+=1}_setFrameCount(t){t!==this._frameCount&&(this._frameCount=t,this.signals.countChanged.dispatch(t))}dispose(){this._resetCache(),this._disposed=!0,this.player&&this.player.stop()}setPlayer(t){this.player=t,this.signals.playerChanged.dispatch(t)}getFrameTime(t){return this.timeOffset+t*this.deltaTime}}class Vst extends WE{constructor(t,n,r){const i=r||{};i.timeOffset=re(i.timeOffset,t.timeOffset),i.deltaTime=re(i.deltaTime,t.deltaTime),super("",n,i),this.name=t.name,this.path=t.path,this.frames=t.coordinates,this.boxes=t.boxes,this._init(n)}get type(){return"frames"}_makeAtomIndices(){this.structure.type==="StructureView"?this.atomIndices=this.structure.getAtomIndices():this.atomIndices=void 0}_loadFrame(t,n){let r;const i=this.frames[t];if(this.atomIndices){const a=this.atomIndices,l=a.length;r=new Float32Array(3*l);for(let c=0;c<l;++c){const u=3*c,d=3*a[c];r[u+0]=i[d+0],r[u+1]=i[d+1],r[u+2]=i[d+2]}}else r=new Float32Array(i);const o=this.boxes[t],s=this.frames.length;this._process(t,o,r,s),typeof n=="function"&&n()}_loadFrameCount(){this.frames&&this._setFrameCount(this.frames.length)}}class Hst extends WE{constructor(t,n,r){super("",n,r),this._init(n)}get type(){return"structure"}_makeAtomIndices(){this.structure.atomSet&&this.structure.atomSet.getSize()<this.structure.atomStore.count?this.atomIndices=this.structure.getAtomIndices():this.atomIndices=void 0}_loadFrame(t,n){let r;const i=this.structure,o=i.frames[t];if(this.atomIndices){const l=this.atomIndices,c=l.length;r=new Float32Array(3*c);for(let u=0;u<c;++u){const d=3*u,f=3*l[u];r[d+0]=o[f+0],r[d+1]=o[f+1],r[d+2]=o[f+2]}}else r=new Float32Array(o);const s=i.boxes[t],a=i.frames.length;this._process(t,s,r,a),typeof n=="function"&&n()}_loadFrameCount(){this._setFrameCount(this.structure.frames.length)}}class Gst extends WE{constructor(t,n,r){super(t,n,r),this._init(n)}get type(){return"remote"}_makeAtomIndices(){const t=[];if(this.structure.type==="StructureView"){const n=this.structure.getAtomIndices(),r=n.length;let i=n[0],o=n[0];for(let s=1;s<r;++s){const a=n[s];o+1<a&&(t.push([i,o+1]),i=a),o=a}t.push([i,o+1])}else t.push([0,this.atomCount]);this.atomIndices=t}_loadFrame(t,n){const r=new XMLHttpRequest,i=LO.getFrameUrl(this.trajPath,t),o=LO.getFrameParams(this.trajPath,this.atomIndices);r.open("POST",i,!0),r.responseType="arraybuffer",r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.addEventListener("load",()=>{const s=r.response;if(!s)return void Ve.error(`empty arrayBuffer for '${i}'`);const a=new Int32Array(s,0,1)[0],l=new Float32Array(s,8,9),c=new Float32Array(s,44);this._process(t,l,c,a),typeof n=="function"&&n()},!1),r.send(o)}_loadFrameCount(){const t=new XMLHttpRequest,n=LO.getCountUrl(this.trajPath);t.open("GET",n,!0),t.addEventListener("load",()=>{this._setFrameCount(parseInt(t.response))},!1),t.send()}}class Wst extends WE{constructor(t,n,r){super("",n,r),this.requestCallback=t,this._init(n)}get type(){return"callback"}_makeAtomIndices(){const t=[];if(this.structure.type==="StructureView"){const n=this.structure.getAtomIndices(),r=n.length;let i=n[0],o=n[0];for(let s=1;s<r;++s){const a=n[s];o+1<a&&(t.push([i,o+1]),i=a),o=a}t.push([i,o+1])}else t.push([0,this.atomCount]);this.atomIndices=t}_loadFrame(t,n){this.requestCallback((r,i,o,s)=>{this._process(r,i,o,s),typeof n=="function"&&n()},t,this.atomIndices)}_loadFrameCount(){this.requestCallback(t=>this._setFrameCount(t))}}Xa.prototype.getView=function(e){return new iie(this,e)};class iie extends Xa{constructor(t,n){super(),this.structure=t,this.selection=n,this.center=new W,this.boundingBox=new zn,this._bp=this.getBondProxy(),this._ap=this.getAtomProxy(),this._rp=this.getResidueProxy(),this._cp=this.getChainProxy(),this.selection&&this.selection.signals.stringChanged.add(this.refresh,this),this.structure.signals.refreshed.add(this.refresh,this),this.refresh()}init(){}get type(){return"StructureView"}get name(){return this.structure.name}get path(){return this.structure.path}get title(){return this.structure.title}get id(){return this.structure.id}get data(){return this.structure.data}get atomSetDict(){return this.structure.atomSetDict}get biomolDict(){return this.structure.biomolDict}get entityList(){return this.structure.entityList}get unitcell(){return this.structure.unitcell}get frames(){return this.structure.frames}get boxes(){return this.structure.boxes}get validation(){return this.structure.validation}get bondStore(){return this.structure.bondStore}get backboneBondStore(){return this.structure.backboneBondStore}get rungBondStore(){return this.structure.rungBondStore}get atomStore(){return this.structure.atomStore}get residueStore(){return this.structure.residueStore}get chainStore(){return this.structure.chainStore}get modelStore(){return this.structure.modelStore}get atomMap(){return this.structure.atomMap}get residueMap(){return this.structure.residueMap}get bondHash(){return this.structure.bondHash}get spatialHash(){return this.structure.spatialHash}get _hasCoords(){return this.structure._hasCoords}set _hasCoords(t){this.structure._hasCoords=t}refresh(){Je&&Ve.time("StructureView.refresh"),this.atomSetCache={};const t=this.structure;if(this.selection.isAllSelection()&&t!==this&&t.atomSet&&t.bondSet){this.atomSet=t.atomSet.clone(),this.bondSet=t.bondSet.clone();for(let n in this.atomSetDict){const r=this.atomSetDict[n];this.atomSetCache["__"+n]=r.clone()}this.atomCount=t.atomCount,this.bondCount=t.bondCount,this.boundingBox.copy(t.boundingBox),this.center.copy(t.center)}else if(this.selection.isNoneSelection()&&t!==this&&t.atomSet&&t.bondSet){this.atomSet=new Jr(t.atomCount),this.bondSet=new Jr(t.bondCount);for(let n in this.atomSetDict)this.atomSetCache["__"+n]=new Jr(t.atomCount);this.atomCount=0,this.bondCount=0,this.boundingBox.makeEmpty(),this.center.set(0,0,0)}else{this.atomSet=this.getAtomSet(this.selection,!0),t.atomSet&&(this.atomSet=this.atomSet.intersection(t.atomSet)),this.bondSet=this.getBondSet();for(let n in this.atomSetDict){const r=this.atomSetDict[n];this.atomSetCache["__"+n]=r.makeIntersection(this.atomSet)}this.atomCount=this.atomSet.getSize(),this.bondCount=this.bondSet.getSize(),this.boundingBox=this.getBoundingBox(),this.center=this.boundingBox.getCenter(new W)}Je&&Ve.timeEnd("StructureView.refresh"),this.signals.refreshed.dispatch()}setSelection(t){this.selection=t,this.refresh()}getSelection(t){const n=[];t&&t.string&&n.push(t.string);const r=this.structure.getSelection();r&&r.string&&n.push(r.string),this.selection&&this.selection.string&&n.push(this.selection.string);let i="";return n.length>0&&(i=`( ${n.join(" ) AND ( ")} )`),new Xn(i)}getStructure(){return this.structure.getStructure()}eachBond(t,n){this.structure.eachBond(t,this.getSelection(n))}eachAtom(t,n){const r=this.getAtomProxy(),i=this.getAtomSet(n),o=this.atomStore.count;if(i.getSize()<o)i.forEach(function(s){r.index=s,t(r)});else for(let s=0;s<o;++s)r.index=s,t(r)}eachResidue(t,n){this.structure.eachResidue(t,this.getSelection(n))}eachResidueN(t,n){console.error("StructureView.eachResidueN() not implemented")}eachChain(t,n){this.structure.eachChain(t,this.getSelection(n))}eachModel(t,n){this.structure.eachModel(t,this.getSelection(n))}getAtomSet(t,n=!1){let r=this.structure.getAtomSet(t);return!n&&this.atomSet&&(r=r.makeIntersection(this.atomSet)),r}getAtomIndices(t){return this.structure.getAtomIndices(this.getSelection(t))}refreshPosition(){return this.structure.refreshPosition()}dispose(){this.selection&&this.selection.signals.stringChanged.remove(this.refresh,this),this.structure.signals.refreshed.remove(this.refresh,this),this.structure=new Xa,delete this.atomSet,delete this.bondSet}}const qst=[[4,0,-2,-1,-2,0,-2,-1,-1,-1,-1,-2,-1,-1,-1,1,0,0,-3,-2],[0,9,-3,-4,-2,-3,-3,-1,-3,-1,-1,-3,-3,-3,-3,-1,-1,-1,-2,-2],[-2,-3,6,2,-3,-1,-1,-3,-1,-4,-3,1,-1,0,-2,0,-1,-3,-4,-3],[-1,-4,2,5,-3,-2,0,-3,1,-3,-2,0,-1,2,0,0,-1,-2,-3,-2],[-2,-2,-3,-3,6,-3,-1,0,-3,0,0,-3,-4,-3,-3,-2,-2,-1,1,3],[0,-3,-1,-2,-3,6,-2,-4,-2,-4,-3,0,-2,-2,-2,0,-2,-3,-2,-3],[-2,-3,-1,0,-1,-2,8,-3,-1,-3,-2,1,-2,0,0,-1,-2,-3,-2,2],[-1,-1,-3,-3,0,-4,-3,4,-3,2,1,-3,-3,-3,-3,-2,-1,3,-3,-1],[-1,-3,-1,1,-3,-2,-1,-3,5,-2,-1,0,-1,1,2,0,-1,-2,-3,-2],[-1,-1,-4,-3,0,-4,-3,2,-2,4,2,-3,-3,-2,-2,-2,-1,1,-2,-1],[-1,-1,-3,-2,0,-3,-2,1,-1,2,5,-2,-2,0,-1,-1,-1,1,-1,-1],[-2,-3,1,0,-3,0,1,-3,0,-3,-2,6,-2,0,0,1,0,-3,-4,-2],[-1,-3,-1,-1,-4,-2,-2,-3,-1,-3,-2,-2,7,-1,-2,-1,-1,-2,-4,-3],[-1,-3,0,2,-3,-2,0,-3,1,-2,0,0,-1,5,1,0,-1,-2,-2,-1],[-1,-3,-2,0,-3,-2,0,-3,2,-2,-1,0,-2,1,5,-1,-1,-3,-3,-2],[1,-1,0,0,-2,0,-1,-2,0,-2,-1,1,-1,0,-1,4,1,-2,-3,-2],[0,-1,-1,-1,-2,-2,-2,-1,-1,-1,-1,0,-1,-1,-1,1,5,0,-2,-2],[0,-1,-3,-2,-1,-3,-3,3,-2,1,1,-3,-2,-2,-3,-2,0,4,-3,-1],[-3,-2,-4,-3,1,-2,-2,-3,-3,-2,-1,-4,-4,-2,-3,-3,-2,-3,11,2],[-2,-2,-3,-2,3,-3,2,-1,-2,-1,-1,-2,-3,-1,-2,-2,-2,-1,2,7]];function P7(e,t){let n,r=0;const i={};return t.forEach(function(o){n=0;const s={};o.forEach(function(a){s[e[n++]]=a}),i[e[r++]]=s}),i}const Yst={blosum62:P7("ARNDCQEGHILKMFPSTWYVBZ?",[[4,-1,-2,-2,0,-1,-1,0,-2,-1,-1,-1,-1,-2,-1,1,0,-3,-2,0,-2,-1,0],[-1,5,0,-2,-3,1,0,-2,0,-3,-2,2,-1,-3,-2,-1,-1,-3,-2,-3,-1,0,-1],[-2,0,6,1,-3,0,0,0,1,-3,-3,0,-2,-3,-2,1,0,-4,-2,-3,3,0,-1],[-2,-2,1,6,-3,0,2,-1,-1,-3,-4,-1,-3,-3,-1,0,-1,-4,-3,-3,4,1,-1],[0,-3,-3,-3,9,-3,-4,-3,-3,-1,-1,-3,-1,-2,-3,-1,-1,-2,-2,-1,-3,-3,-2],[-1,1,0,0,-3,5,2,-2,0,-3,-2,1,0,-3,-1,0,-1,-2,-1,-2,0,3,-1],[-1,0,0,2,-4,2,5,-2,0,-3,-3,1,-2,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-2,0,-1,-3,-2,-2,6,-2,-4,-4,-2,-3,-3,-2,0,-2,-2,-3,-3,-1,-2,-1],[-2,0,1,-1,-3,0,0,-2,8,-3,-3,-1,-2,-1,-2,-1,-2,-2,2,-3,0,0,-1],[-1,-3,-3,-3,-1,-3,-3,-4,-3,4,2,-3,1,0,-3,-2,-1,-3,-1,3,-3,-3,-1],[-1,-2,-3,-4,-1,-2,-3,-4,-3,2,4,-2,2,0,-3,-2,-1,-2,-1,1,-4,-3,-1],[-1,2,0,-1,-3,1,1,-2,-1,-3,-2,5,-1,-3,-1,0,-1,-3,-2,-2,0,1,-1],[-1,-1,-2,-3,-1,0,-2,-3,-2,1,2,-1,5,0,-2,-1,-1,-1,-1,1,-3,-1,-1],[-2,-3,-3,-3,-2,-3,-3,-3,-1,0,0,-3,0,6,-4,-2,-2,1,3,-1,-3,-3,-1],[-1,-2,-2,-1,-3,-1,-1,-2,-2,-3,-3,-1,-2,-4,7,-1,-1,-4,-3,-2,-2,-1,-2],[1,-1,1,0,-1,0,0,0,-1,-2,-2,0,-1,-2,-1,4,1,-3,-2,-2,0,0,0],[0,-1,0,-1,-1,-1,-1,-2,-2,-1,-1,-1,-1,-2,-1,1,5,-2,-2,0,-1,-1,0],[-3,-3,-4,-4,-2,-2,-3,-2,-2,-3,-2,-3,-1,1,-4,-3,-2,11,2,-3,-4,-3,-2],[-2,-2,-2,-3,-2,-1,-2,-3,2,-1,-1,-2,-1,3,-3,-2,-2,2,7,-1,-3,-2,-1],[0,-3,-3,-3,-1,-2,-2,-3,-3,3,1,-2,1,-1,-2,-2,0,-3,-1,4,-3,-2,-1],[-2,-1,3,4,-3,0,1,-1,0,-3,-4,0,-3,-3,-2,0,-1,-4,-3,-3,4,1,-1],[-1,0,0,1,-3,3,4,-2,0,-3,-3,1,-1,-3,-1,0,-1,-3,-2,-2,1,4,-1],[0,-1,-1,-1,-2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-2,0,0,-2,-1,-1,-1,-1,-1]]),blosum62x:P7("ACDEFGHIKLMNPQRSTVWY",qst)};class Xst{constructor(t,n,r=-10,i=-1,o="blosum62"){this.seq1=t,this.seq2=n,this.gapPenalty=r,this.gapExtensionPenalty=i,o&&(this.substMatrix=Yst[o])}initMatrices(){this.n=this.seq1.length,this.m=this.seq2.length,this.score=void 0,this.ali="",this.S=[],this.V=[],this.H=[];for(let t=0;t<=this.n;++t){this.S[t]=[],this.V[t]=[],this.H[t]=[];for(let n=0;n<=this.m;++n)this.S[t][n]=0,this.V[t][n]=0,this.H[t][n]=0}for(let t=0;t<=this.n;++t)this.S[t][0]=this.gap(0),this.H[t][0]=-1/0;for(let t=0;t<=this.m;++t)this.S[0][t]=this.gap(0),this.V[0][t]=-1/0;this.S[0][0]=0}gap(t){return this.gapPenalty+t*this.gapExtensionPenalty}makeScoreFn(){const t=this.seq1,n=this.seq2,r=this.substMatrix;return r?function(i,o){const s=t[i],a=n[o];try{return r[s][a]}catch{return-4}}:(Ve.warn("Alignment: no subst matrix"),function(i,o){return t[i]===n[o]?5:-3})}calc(){Je&&Ve.time("Alignment.calc"),this.initMatrices();const t=this.gap(0),n=this.makeScoreFn(),r=this.gapExtensionPenalty,i=this.V,o=this.H,s=this.S,a=this.n,l=this.m;let c,u,d,f,h;for(let p=1;p<=a;++p){u=s[p-1],c=i[p-1],d=i[p],f=o[p],h=s[p];for(let g=1;g<=l;++g)d[g]=Math.max(u[g]+t,c[g]+r),f[g]=Math.max(h[g-1]+t,f[g-1]+r),h[g]=Math.max(u[g-1]+n(p-1,g-1),d[g],f[g])}Je&&Ve.timeEnd("Alignment.calc"),Je&&Ve.log(this.S,this.V,this.H)}trace(){Je&&Ve.time("Alignment.trace"),this.ali1="",this.ali2="";const t=this.makeScoreFn();let n,r=this.n,i=this.m;for(this.S[r][i]>=this.V[r][i]?(n="S",this.score=this.S[r][i]):this.V[r][i]>=this.H[r][i]?(n="V",this.score=this.V[r][i]):(n="H",this.score=this.H[r][i]),Je&&Ve.log("Alignment: SCORE",this.score),Je&&Ve.log("Alignment: S, V, H",this.S[r][i],this.V[r][i],this.H[r][i]);r>0&&i>0;)n==="S"?this.S[r][i]===this.S[r-1][i-1]+t(r-1,i-1)?(this.ali1=this.seq1[r-1]+this.ali1,this.ali2=this.seq2[i-1]+this.ali2,--r,--i,n="S"):this.S[r][i]===this.V[r][i]?n="V":this.S[r][i]===this.H[r][i]?n="H":(--r,--i):n==="V"?this.V[r][i]===this.V[r-1][i]+this.gapExtensionPenalty?(this.ali1=this.seq1[r-1]+this.ali1,this.ali2="-"+this.ali2,--r,n="V"):this.V[r][i]===this.S[r-1][i]+this.gap(0)?(this.ali1=this.seq1[r-1]+this.ali1,this.ali2="-"+this.ali2,--r,n="S"):--r:n==="H"?this.H[r][i]===this.H[r][i-1]+this.gapExtensionPenalty?(this.ali1="-"+this.ali1,this.ali2=this.seq2[i-1]+this.ali2,--i,n="H"):this.H[r][i]===this.S[r][i-1]+this.gap(0)?(this.ali1="-"+this.ali1,this.ali2=this.seq2[i-1]+this.ali2,--i,n="S"):--i:Ve.error("Alignment: no matrix");for(;r>0;)this.ali1=this.seq1[r-1]+this.ali1,this.ali2="-"+this.ali2,--r;for(;i>0;)this.ali1="-"+this.ali1,this.ali2=this.seq2[i-1]+this.ali2,--i;Je&&Ve.timeEnd("Alignment.trace"),Je&&Ve.log([this.ali1,this.ali2])}}function Kst(e,t,n=!1,r="",i=""){let o,s,a,l,c;if(n){let d=e,f=t;r&&i&&(d=e.getView(new Xn(r)),f=t.getView(new Xn(i)));const h=d.getSequence(),p=f.getSequence(),g=new Xst(h.join(""),p.join(""));let v,m;g.calc(),g.trace(),o=0,s=0,a=g.ali1.length;const y=[],b=[];for(let C=0;C<a;++C){const A=g.ali1[C],T=g.ali2[C];v=0,m=0,A==="-"?b[s]=!1:(b[s]=!0,v=1),T==="-"?y[o]=!1:(y[o]=!0,m=1),o+=v,s+=m}const _=[],x=[],w=d.getAtomProxy(),S=f.getAtomProxy();o=0,d.eachResidue(function(C){C.traceAtomIndex!==void 0&&C.traceAtomIndex===C.getAtomIndexByName("CA")&&(y[o]&&(w.index=C.getAtomIndexByName("CA"),_.push(w.x,w.y,w.z)),o+=1)}),o=0,f.eachResidue(function(C){C.traceAtomIndex!==void 0&&C.traceAtomIndex===C.getAtomIndexByName("CA")&&(b[o]&&(S.index=C.getAtomIndexByName("CA"),x.push(S.x,S.y,S.z)),o+=1)}),l=new Float32Array(_),c=new Float32Array(x)}else l=e.getView(new Xn(`${r} and .CA`)),c=t.getView(new Xn(`${i} and .CA`));const u=new rie(l,c).transform(e);return e.refreshPosition(),u}const Zst=Object.assign({sele:"",defaultAssembly:""},Qre);class XL extends GE{constructor(t,n,r={}){super(t,n,Object.assign({name:n.name},r)),this.structure=n,this.trajList=[],this.signals=Object.assign(this.signals,{trajectoryAdded:new Ht.Signal,trajectoryRemoved:new Ht.Signal,defaultAssemblyChanged:new Ht.Signal}),this.initSelection(this.parameters.sele),this.pickBuffer=function(i){let o=0,s=0;const a=[];return{has:function(l){return a.indexOf(l)!==-1},get:function(l){return a[l]},push:function(l){a[o]=l,o=(i+o+1)%i,++s},get count(){return s},get data(){return a.slice(0,Math.min(s,i))},clear:function(){s=0,o=0,a.length=0}}}(4),this.pickDict=function(){const i={};return{has:function(o){return i[JSON.stringify(o)]!==void 0},add:function(o,s){i[JSON.stringify(o)]=s},del:function(o){delete i[JSON.stringify(o)]},get values(){return Object.keys(i).map(o=>i[o])}}}(),this.spacefillRepresentation=this.addRepresentation("spacefill",{sele:"none",opacity:a0.opacity,color:a0.color,disablePicking:!0,radiusType:"data"},!0),this.distanceRepresentation=this.addRepresentation("distance",a0,!0),this.angleRepresentation=this.addRepresentation("angle",a0,!0),this.dihedralRepresentation=this.addRepresentation("dihedral",a0,!0),this.measureRepresentations=new tie([this.spacefillRepresentation,this.distanceRepresentation,this.angleRepresentation,this.dihedralRepresentation]),this.setDefaultAssembly(this.parameters.defaultAssembly),this.structure.signals.refreshed.add(()=>{this.updateRepresentations({position:!0})})}get defaultParameters(){return Zst}get type(){return"structure"}initSelection(t){this.selection=new Xn(t),this.structureView=new iie(this.structure,this.selection),this.selection.signals.stringChanged.add(()=>{this.structureView.setSelection(this.selection),this.rebuildRepresentations(),this.rebuildTrajectories()})}setSelection(t){return this.parameters.sele=t,this.selection.setString(t),this}setDefaultAssembly(t){if(this.structure.biomolDict[t]===void 0&&(t=""),this.parameters.defaultAssembly!==t){const n={defaultAssembly:t};this.reprList.forEach(r=>r.setParameters(n)),this.measureRepresentations.setParameters(n),this.parameters.defaultAssembly=t,this.signals.defaultAssemblyChanged.dispatch(t)}return this}rebuildRepresentations(){this.reprList.forEach(t=>{t.build()}),this.measureRepresentations.build()}rebuildTrajectories(){this.trajList.forEach(t=>{t.trajectory.setStructure(this.structureView)})}updateRepresentations(t){super.updateRepresentations(t),this.measureRepresentations.update(t)}updateRepresentationMatrices(){super.updateRepresentationMatrices(),this.measureRepresentations.setParameters({matrix:this.matrix})}addRepresentation(t,n={},r=!1){n.defaultAssembly=this.parameters.defaultAssembly;const i=this._addRepresentation(t,this.structureView,n,r);return r||i.signals.parametersChanged.add(()=>this.measureUpdate()),i}addTrajectory(t="",n={}){const r=function(o,s,a){let l;return l=o&&o instanceof nie?new Vst(o,s,a):!o&&s.frames?new Hst(o,s,a):o&&typeof o=="function"?new Wst(o,s,a):new Gst(o,s,a),l}(t,this.structureView,n),i=new zst(this.stage,r,n);return this.trajList.push(i),this.signals.trajectoryAdded.dispatch(i),i}removeTrajectory(t){const n=this.trajList.indexOf(t);n!==-1&&this.trajList.splice(n,1),t.dispose(),this.signals.trajectoryRemoved.dispatch(t)}dispose(){this.trajList.slice().forEach(t=>t.dispose()),this.trajList.length=0,this.structure.dispose(),this.measureRepresentations.dispose(),super.dispose()}autoView(t,n){typeof t=="number"&&(n=t,t=""),this.stage.animationControls.zoomMove(this.getCenter(t),this.getZoom(t),re(n,0))}getBoxUntransformed(t){let n;return n=t?this.structureView.getBoundingBox(new Xn(t)):this.structureView.boundingBox,n}getCenterUntransformed(t){return t&&typeof t=="string"?this.structure.atomCenter(new Xn(t)):this.structure.center}superpose(t,n,r,i){return Kst(this.structureView,t.structureView,n,r,i),this.updateRepresentations({position:!0}),this}getMaxRepresentationRadius(t){let n=0;const r=this.structure.getAtomProxy(t);return this.eachRepresentation(i=>{if(i.getVisibility()){const o=i.repr;n=Math.max(o.getAtomRadius(r),n)}}),n}measurePick(t){const n=this.pickBuffer.count;if(this.lastPick===t.index&&n>=1){if(n>1){const r=this.pickBuffer.data,i=this.pickBuffer.data.sort();this.pickDict.has(i)?this.pickDict.del(i):this.pickDict.add(i,r),n===2?this.distanceRepresentation.setParameters({atomPair:this.pickDict.values.filter(o=>o.length===2)}):n===3?this.angleRepresentation.setParameters({atomTriple:this.pickDict.values.filter(o=>o.length===3)}):n===4&&this.dihedralRepresentation.setParameters({atomQuad:this.pickDict.values.filter(o=>o.length===4)})}this.pickBuffer.clear(),this.lastPick=void 0}else this.pickBuffer.has(t.index)||this.pickBuffer.push(t.index),this.lastPick=t.index;this.measureUpdate()}measureClear(){this.pickBuffer.clear(),this.lastPick=void 0,this.spacefillRepresentation.setSelection("none")}measureBuild(){const t=this.measureData();this.distanceRepresentation.setParameters({atomPair:t.distance}),this.angleRepresentation.setParameters({atomTriple:t.angle}),this.dihedralRepresentation.setParameters({atomQuad:t.dihedral})}measureUpdate(){const t=this.pickBuffer.data,n={};t.forEach(r=>{const i=Math.max(.1,this.getMaxRepresentationRadius(r));n[r]=i*(2.3-Ax(.1,2,i))}),this.spacefillRepresentation.setSelection(t.length?"@"+t.join(","):"none"),t.length&&this.spacefillRepresentation.setParameters({radiusData:n})}measureData(){const t=this.pickDict.values;return{distance:t.filter(n=>n.length===2),angle:t.filter(n=>n.length===3),dihedral:t.filter(n=>n.length===4)}}removeAllMeasurements(t){const n=this.pickDict,r=n.values,i=function(o){r.filter(s=>s.length===o).forEach(s=>n.del(s.slice().sort()))};(!t||1&t)&&i(2),(!t||2&t)&&i(3),(!t||4&t)&&i(4),this.measureBuild()}removeMeasurement(t){this.pickDict.del(t.slice().sort()),this.measureBuild()}addMeasurement(t){if(t.length<2||t.length>4)return;const n=t.slice().sort();this.pickDict.has(n)||this.pickDict.add(n,t),this.measureBuild()}}Ig.add("structure",XL),Ig.add("structureview",XL);class oie extends GE{constructor(t,n,r={}){super(t,n,Object.assign({name:n.name},r)),this.surface=n}get type(){return"surface"}addRepresentation(t,n={}){return this._addRepresentation(t,this.surface,n)}getBoxUntransformed(){return this.surface.boundingBox}getCenterUntransformed(){return this.surface.center}dispose(){this.surface.dispose(),super.dispose()}}Ig.add("surface",oie);class sie extends GE{constructor(t,n,r={}){super(t,n,Object.assign({name:n.name},r)),this.volume=n}get type(){return"volume"}addRepresentation(t,n={}){return this._addRepresentation(t,this.volume,n)}getBoxUntransformed(){return this.volume.boundingBox}getCenterUntransformed(){return this.volume.center}dispose(){this.volume.dispose(),super.dispose()}}Ig.add("volume",sie);class M7 extends eie{addRepresentation(t,n){return this.forEach(r=>r.addRepresentation(t,n))}autoView(t){return this.forEach(n=>n.autoView(t))}}function E7(e,t){return e instanceof RegExp?t.name.match(e)!==null:t.name===e}const Jst=new W,Qst={impostor:!0,quality:"medium",workerDefault:!0,sampleLevel:0,backgroundColor:"black",rotateSpeed:2,zoomSpeed:1.2,panSpeed:1,clipNear:0,clipFar:100,clipDist:10,clipMode:"scene",clipScale:"relative",fogNear:50,fogFar:100,cameraFov:40,cameraEyeSep:.3,cameraType:"perspective",lightColor:14540253,lightIntensity:1,ambientColor:14540253,ambientIntensity:.2,hoverTimeout:0,tooltip:!0,mousePreset:"default"};class eat{constructor(t,n={}){this.signals={parametersChanged:new Ht.Signal,fullscreenChanged:new Ht.Signal,componentAdded:new Ht.Signal,componentRemoved:new Ht.Signal,clicked:new Ht.Signal,hovered:new Ht.Signal},this.tasks=new gre,this.compList=[],this.defaultFileParams={},this.logList=[],this.viewer=new Ait(t),this.viewer.renderer&&(this.tooltip=document.createElement("div"),Object.assign(this.tooltip.style,{display:"none",position:"fixed",zIndex:"1000000",pointerEvents:"none",backgroundColor:"rgba( 0, 0, 0, 0.6 )",color:"lightgrey",padding:"8px",fontFamily:"sans-serif"}),this.viewer.container.appendChild(this.tooltip),this.mouseObserver=new Pit(this.viewer.renderer.domElement),this.viewerControls=new Iit(this),this.trackballControls=new Mit(this),this.pickingControls=new Tit(this),this.animationControls=new Dit(this),this.mouseControls=new Iot(this),this.keyControls=new kot(this),this.pickingBehavior=new Lot(this),this.mouseBehavior=new $ot(this),this.animationBehavior=new Dot(this),this.keyBehavior=new Bot(this),this.spinAnimation=this.animationControls.spin([0,1,0],.005),this.spinAnimation.pause(!0),this.rockAnimation=this.animationControls.rock([0,1,0],.005),this.rockAnimation.pause(!0),this.parameters=ns(n,Qst),this.setParameters(this.parameters),this.viewer.animate())}setParameters(t={}){sre(this.parameters,t);const n=t,r=this.parameters,i=this.viewer,o=this.trackballControls;return n.quality!==void 0&&this.setQuality(r.quality),n.impostor!==void 0&&this.setImpostor(r.impostor),n.rotateSpeed!==void 0&&(o.rotateSpeed=r.rotateSpeed),n.zoomSpeed!==void 0&&(o.zoomSpeed=r.zoomSpeed),n.panSpeed!==void 0&&(o.panSpeed=r.panSpeed),n.mousePreset!==void 0&&this.mouseControls.preset(r.mousePreset),this.mouseObserver.setParameters({hoverTimeout:r.hoverTimeout}),i.setClip(r.clipNear,r.clipFar,r.clipDist,r.clipMode,r.clipScale),i.setFog(void 0,r.fogNear,r.fogFar),i.setCamera(r.cameraType,r.cameraFov,r.cameraEyeSep),i.setSampling(r.sampleLevel),i.setBackground(r.backgroundColor),i.setLight(r.lightColor,r.lightIntensity,r.ambientColor,r.ambientIntensity),this.signals.parametersChanged.dispatch(this.getParameters()),this}log(t){console.log("STAGE LOG",t),this.logList.push(t)}getParameters(){return Object.assign({},this.parameters)}defaultFileRepresentation(t){if(t instanceof XL){let n,r,i;t.setSelection("/0");const o=t.structure;if(o.biomolDict.BU1){const d=o.biomolDict.BU1;n=d.getAtomCount(o),r=d.getResidueCount(o),i=d.getInstanceCount(),t.setDefaultAssembly("BU1")}else n=o.getModelProxy(0).atomCount,r=o.getModelProxy(0).residueCount,i=1;let s=n;hre&&(s*=4);const a=o.atomStore.count/o.residueStore.count<2;a&&(s*=10);let l="chainname",c="RdYlBu",u=!1;if(o.getChainnameCount(new Xn("polymer and /0"))===1&&(l="residueindex",c="Spectral",u=!0),Je&&console.log(s,n,i,a),r/i<4)t.addRepresentation("ball+stick",{colorScheme:"element",radiusScale:2,aspectRatio:1.5,bondScale:.3,bondSpacing:.75,quality:"auto"});else if(i>5&&s>15e3||s>7e5){let d=Math.min(2,Math.max(.1,6e3/(s/i)));a&&(d=Math.min(d,.5)),t.addRepresentation("surface",{colorScheme:l,colorScale:c,colorReverse:u,sele:"polymer",surfaceType:"av",probeRadius:1.4,scaleFactor:d,useWorker:!1})}else s>25e4?t.addRepresentation("backbone",{colorScheme:l,colorScale:c,colorReverse:u,lineOnly:!0}):s>1e5?t.addRepresentation("backbone",{colorScheme:l,colorScale:c,colorReverse:u,quality:"low",disableImpostor:!0,radiusScale:2}):s>8e4?t.addRepresentation("backbone",{colorScheme:l,colorScale:c,colorReverse:u,radiusScale:2}):(t.addRepresentation("cartoon",{colorScheme:l,colorScale:c,colorReverse:u,radiusScale:.7,aspectRatio:5,quality:"auto"}),s<5e4&&t.addRepresentation("base",{colorScheme:l,colorScale:c,colorReverse:u,quality:"auto"}),t.addRepresentation("ball+stick",{sele:"ligand",colorScheme:"element",radiusScale:2,aspectRatio:1.5,bondScale:.3,bondSpacing:.75,quality:"auto"}));t.structure.frames.length&&t.addTrajectory()}else(t instanceof oie||t instanceof sie)&&t.addRepresentation("surface");this.tasks.onZeroOnce(this.autoView,this)}loadFile(t,n={}){const r=Object.assign({},this.defaultFileParams,n),i=Co(t).name;this.tasks.increment(),this.log(`loading file '${i}'`);const o=re(r.ext,Co(t).ext);let s;return s=Nt.isTrajectory(o)?Promise.reject(new Error(`loadFile: ext '${o}' is a trajectory and must be loaded into a structure component`)):N9(t,r),s.then(a=>{this.log(`loaded '${i}'`);const l=this.addComponentFromObject(a,r);return r.defaultRepresentation&&this.defaultFileRepresentation(l),this.tasks.decrement(),l},a=>{this.tasks.decrement();const l=`error loading file: '${a}'`;throw this.log(l),l})}loadScript(t){const n=Co(t).name;return this.log(`loading script '${n}'`),N9(t).then(r=>{this.tasks.increment(),this.log(`running script '${n}'`),r.run(this).then(()=>{this.tasks.decrement(),this.log(`finished script '${n}'`)}),this.log(`called script '${n}'`)},r=>{this.tasks.decrement();const i=`errored script '${n}' "${r}"`;throw this.log(i),i})}addComponent(t){t?(this.compList.push(t),this.signals.componentAdded.dispatch(t)):Ve.warn("Stage.addComponent: no component given")}addComponentFromObject(t,n={}){const r=Ig.get(t.type);if(r){const i=new r(this,t,n);return this.addComponent(i),i}Ve.warn("no component for object type",t.type)}removeComponent(t){const n=this.compList.indexOf(t);n!==-1&&(this.compList.splice(n,1),t.dispose(),this.signals.componentRemoved.dispatch(t))}removeAllComponents(){this.compList.slice().forEach(t=>this.removeComponent(t))}handleResize(){this.viewer.handleResize()}setSize(t,n){const r=this.viewer.container;r!==document.body&&(t!==void 0&&(r.style.width=t),n!==void 0&&(r.style.height=n),this.handleResize())}toggleFullscreen(t){if(!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled))return void Ve.log("fullscreen mode (currently) not possible");const n=this;function r(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement}function i(){if(!r()&&n.lastFullscreenElement){const o=n.lastFullscreenElement;o.style.width=o.dataset.normalWidth||"",o.style.height=o.dataset.normalHeight||"",document.removeEventListener("fullscreenchange",i),document.removeEventListener("mozfullscreenchange",i),document.removeEventListener("webkitfullscreenchange",i),document.removeEventListener("MSFullscreenChange",i),n.handleResize(),n.signals.fullscreenChanged.dispatch(!1)}}t=t||this.viewer.container,this.lastFullscreenElement=t,r()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(t.dataset.normalWidth=t.style.width||"",t.dataset.normalHeight=t.style.height||"",t.style.width=window.screen.width+"px",t.style.height=window.screen.height+"px",t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen(),document.addEventListener("fullscreenchange",i),document.addEventListener("mozfullscreenchange",i),document.addEventListener("webkitfullscreenchange",i),document.addEventListener("MSFullscreenChange",i),this.handleResize(),this.signals.fullscreenChanged.dispatch(!0),setTimeout(function(){n.handleResize()},100))}setSpin(t){t?(this.spinAnimation.resume(!0),this.rockAnimation.pause(!0)):this.spinAnimation.pause(!0)}setRock(t){t?(this.rockAnimation.resume(!0),this.spinAnimation.pause(!0)):this.rockAnimation.pause(!0)}toggleSpin(){this.setSpin(this.spinAnimation.paused)}toggleRock(){this.setRock(this.rockAnimation.paused)}getFocus(){const t=this.parameters;if(t.clipMode!=="scene")return 0;let n=t.clipNear;return t.clipScale==="absolute"&&(n=this.viewer.absoluteToRelative(n)),2*n}setFocus(t){if(this.parameters.clipMode!=="scene")return;let n,r,i,o;this.parameters.clipScale==="relative"?(n=BL(t/2,0,49.9),r=100-n,i=50,o=function(s){return BL(s,0,100)}(2*r-50)):(n=this.viewer.relativeToAbsolute(t/2),r=n,i=0,o=2*r),this.setParameters({clipNear:n,clipFar:r,fogNear:i,fogFar:o})}getZoomForBox(t){const n=t.getSize(Jst),r=Math.max(n.x,n.y,n.z),i=Math.min(n.x,n.y,n.z);let o=r+Math.sqrt(i);const s=br(this.viewer.perspectiveCamera.fov),a=this.viewer.width,l=this.viewer.height,c=l<a?1:a/l;return o=Math.abs(.5*o/c/Math.sin(s/2)),o+=this.parameters.clipDist,-o}getBox(){return this.viewer.boundingBox}getZoom(){return this.getZoomForBox(this.getBox())}getCenter(t){return this.getBox().getCenter(t||new W)}autoView(t){this.animationControls.zoomMove(this.getCenter(),this.getZoom(),re(t,0))}makeImage(t={}){return new Promise((n,r)=>{this.tasks.onZeroOnce(()=>{this.tasks.increment(),this.viewer.makeImage(t).then(i=>{this.tasks.decrement(),n(i)}).catch(i=>{this.tasks.decrement(),r(i)})})})}setImpostor(t){this.parameters.impostor=t;const n=["spacefill","ball+stick","licorice","hyperball","backbone","rocket","helixorient","contact","distance","dot"];this.eachRepresentation(function(r){if(!n.includes(r.getType()))return;const i=r.getParameters();i.disableImpostor=!t,r.build(i)})}setQuality(t){this.parameters.quality=t;const n=["tube","cartoon","ribbon","trace","rope"],r=["spacefill","ball+stick","licorice","hyperball","backbone","rocket","helixorient","contact","distance","dot"];this.eachRepresentation(function(i){const o=i.getParameters();if(!n.includes(i.getType())){if(!r.includes(i.getType()))return;if(!o.disableImpostor)return void(i.repr.quality=t)}o.quality=t,i.build(o)})}eachComponent(t,n){this.compList.slice().forEach(r=>{n!==void 0&&n!==r.type||t(r)})}eachRepresentation(t,n){this.eachComponent(r=>{r.reprList.slice().forEach(i=>{n!==void 0&&n!==i.getType()||t(i,r)})})}getComponentsByName(t){const n=[];return this.eachComponent(r=>{(t===void 0||E7(t,r))&&n.push(r)}),new M7(n)}getComponentsByObject(t){const n=[];return this.eachComponent(r=>{r.object===t&&n.push(r)}),new M7(n)}getRepresentationsByName(t){const n=[];return this.eachRepresentation((r,i)=>{(t===void 0||E7(t,r))&&n.push(r)}),new tie(n)}measureClear(){this.eachComponent(t=>t.measureClear(),"structure")}measureUpdate(){this.eachComponent(t=>t.measureUpdate(),"structure")}dispose(){this.tasks.dispose(),this.viewer.dispose(),this.mouseObserver.dispose()}}class tat extends GE{constructor(t,n,r={}){super(t,n,Object.assign({name:n.name},r)),this.shape=n}get type(){return"shape"}addRepresentation(t,n={}){return this._addRepresentation(t,this.shape,n)}getBoxUntransformed(){return this.shape.boundingBox}getCenterUntransformed(){return this.shape.center}dispose(){this.shape.dispose(),super.dispose()}}function Sn(e,t,n,r){var i,o=arguments.length,s=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}Ig.add("shape",tat);class T7 extends _n{constructor(t){super(t),t.scale||(this.parameters.scale="rainbow",this.parameters.reverse=re(t.reverse,!0)),this.scalePerModel={},t.structure.eachModel(n=>{this.parameters.domain=[n.atomOffset,n.atomEnd],this.scalePerModel[n.index]=this.getScale()})}atomColor(t){return this.scalePerModel[t.modelIndex](t.index)}}Sn([wn],T7.prototype,"atomColor",null),Qt.add("atomindex",T7);class O7 extends _n{constructor(t){if(super(t),t.scale||(this.parameters.scale="OrRd"),!t.domain){let n,r=1/0,i=-1/0;t.sele&&(n=new Xn(t.sele)),t.structure.eachAtom(function(o){const s=o.bfactor;r=Math.min(r,s),i=Math.max(i,s)},n),this.parameters.domain=[r,i]}this.bfactorScale=this.getScale()}atomColor(t){return this.bfactorScale(t.bfactor)}}Sn([wn],O7.prototype,"atomColor",null),Qt.add("bfactor",O7);class I7 extends _n{constructor(t){super(t),this.chainidDictPerModel={},this.scalePerModel={},t.scale||(this.parameters.scale="Spectral"),t.structure.eachModel(n=>{let r=0;const i={};n.eachChain(function(o){i[o.chainid]===void 0&&(i[o.chainid]=r,r+=1)}),this.parameters.domain=[0,r-1],this.chainidDictPerModel[n.index]=i,this.scalePerModel[n.index]=this.getScale()})}atomColor(t){const n=this.chainidDictPerModel[t.modelIndex];return this.scalePerModel[t.modelIndex](n[t.chainid])}}Sn([wn],I7.prototype,"atomColor",null),Qt.add("chainid",I7);class R7 extends _n{constructor(t){super(t),this.scalePerModel={},t.scale||(this.parameters.scale="Spectral"),t.structure.eachModel(n=>{this.parameters.domain=[n.chainOffset,n.chainEnd],this.scalePerModel[n.index]=this.getScale()})}atomColor(t){return this.scalePerModel[t.modelIndex](t.chainIndex)}}Sn([wn],R7.prototype,"atomColor",null),Qt.add("chainindex",R7);class k7 extends _n{constructor(t){super(t),this.chainnameDictPerModel={},this.scalePerModel={},t.scale||(this.parameters.scale="Spectral"),t.structure.eachModel(n=>{let r=0;const i={};n.eachChain(function(o){i[o.chainname]===void 0&&(i[o.chainname]=r,r+=1)}),this.parameters.domain=[0,r-1],this.chainnameDictPerModel[n.index]=i,this.scalePerModel[n.index]=this.getScale()})}atomColor(t){const n=this.chainnameDictPerModel[t.modelIndex];return this.scalePerModel[t.modelIndex](n[t.chainname])}}Sn([wn],k7.prototype,"atomColor",null),Qt.add("chainname",k7);class L7 extends _n{constructor(t){super(t),this.rsrzDict={},this.rsccDict={},t.scale||(this.parameters.scale="RdYlBu"),this.rsrzScale=this.getScale({domain:[2,0]}),this.rsccScale=this.getScale({domain:[.678,1]});const n=t.structure.validation;n&&(this.rsrzDict=n.rsrzDict,this.rsccDict=n.rsccDict)}atomColor(t){let n=t.resno+"";t.inscode&&(n+="^"+t.inscode),t.chainname&&(n+=":"+t.chainname),n+="/"+t.modelIndex;const r=this.rsrzDict[n];if(r!==void 0)return this.rsrzScale(r);const i=this.rsccDict[n];return i!==void 0?this.rsccScale(i):9474192}}Sn([wn],L7.prototype,"atomColor",null),Qt.add("densityfit",L7);const eI={ARG:{CD:.1,CZ:.5,NE:-.1},ASN:{CG:.55,OD1:-.55},ASP:{CB:-.16,CG:.36,OD1:-.6,OD2:-.6},CYS:{CB:.19,SG:-.19},GLN:{CD:.55,OE1:-.55},GLU:{CD:.36,CG:-.16,OE1:-.6,OE2:-.6},HIS:{CB:.1,CD2:.2,CE1:.45,CG:.15,ND1:.05,NE2:.05},LYS:{CE:.25,NZ:.75},MET:{CE:.06,CG:.06,SD:-.12},PTR:{C:.55,CA:.1,CZ:.25,N:-.35,O:-.55,O1P:-.85,O2P:-.85,O3P:-.85,OG1:-1.1,P:1.4},SEP:{C:.55,CA:.1,CB:.25,N:-.35,O:-.55,O1P:-.85,O2P:-.85,O3P:-.85,OG1:-1.1,P:1.4},SER:{CB:.25,OG:-.25},THR:{CB:.25,OG1:-.25},TPO:{C:.55,CA:.1,CB:.25,N:-.35,O:-.55,OG1:-1.1,O1P:-.85,O2P:-.85,O3P:-.85,P:1.4},TRP:{CD1:.06,CD2:.1,CE2:-.04,CE3:-.03,CG:-.03,NE1:-.06},TYR:{CZ:.25,OH:-.25},backbone:{C:.55,O:-.55,N:-.35,CA:.1}};class $7 extends _n{constructor(t){super(t),this.delta=new W,this.hCharges=[],t.scale||(this.parameters.scale="rwb"),t.domain||(this.parameters.domain=[-50,50]),this.scale=this.getScale(),this.charges=new Float32Array(t.structure.atomCount);const n=[];t.structure.eachAtom(i=>{var o;if(this.charges[i.index]=((o=i).partialCharge!==null?o.partialCharge:o.isProtein()&&(eI[o.resname]&&eI[o.resname][o.atomname]||eI.backbone[o.atomname])||0)*i.occupancy,i.atomname==="N"){if(i.bondCount>=3||i.bondToElementCount(1))return;const s=function(a,l=new W){let c=!1,u=!1,d=!1;return l.set(2*a.x,2*a.y,2*a.z),a.eachBondedAtom(function(f){if(!c)return f.atomname==="H"?(l.set(f.x,f.y,f.z),void(c=!0)):void(u||f.atomname!=="CA"?d||f.atomname!=="C"||(d=!0,l.sub(f)):(l.sub(f),u=!0))}),c?l:u&&d?(l.normalize(),l.multiplyScalar(1.04),l.add(a),l):void 0}(i);s!==void 0&&(n.push(s),this.hCharges.push(.25*i.occupancy))}});const r=t.structure.getBoundingBox();r.expandByScalar(1.04),this.hStore=function(i){const o=i.length,s=new Float32Array(o),a=new Float32Array(o),l=new Float32Array(o);for(let c=0;c<i.length;c++){const u=i[c];s[c]=u.x,a[c]=u.y,l[c]=u.z}return{x:s,y:a,z:l,count:o}}(n),this.hHash=new Hb(this.hStore,r),this.hash=new Hb(t.structure.atomStore,r)}positionColor(t){const n=this.charges,r=this.hCharges;let i=0;return this.hash.eachWithin(t.x,t.y,t.z,12,(o,s)=>{const a=n[o];a!==0&&(i+=a/s)}),this.hHash.eachWithin(t.x,t.y,t.z,12,(o,s)=>{const a=r[o];a!==0&&(i+=a/s)}),this.scale(332*i)}}Sn([wn],$7.prototype,"positionColor",null),Qt.add("electrostatic",$7);const D7={H:16777215,HE:14286847,LI:13402367,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,NE:11789301,NA:11230450,MG:9109248,AL:12560038,SI:1578e4,P:16744448,S:16777008,CL:2093087,AR:8442339,K:9388244,CA:4062976,SC:15132390,TI:12567239,V:10921643,CR:9083335,MN:10255047,FE:14706227,CO:15765664,NI:5296208,CU:13140019,ZN:8224944,GA:12750735,GE:6721423,AS:12419299,SE:16752896,BR:10889513,KR:6076625,RB:7351984,SR:65280,Y:9764863,ZR:9756896,NB:7586505,MO:5551541,TC:3907230,RU:2396047,RH:687500,PD:27013,AG:12632256,CD:16767375,IN:10909043,SN:6717568,SB:10380213,TE:13924864,I:9699476,XE:9699476,CS:5707663,BA:51456,LA:7394559,CE:16777159,PR:14286791,ND:13107143,PM:10747847,SM:9437127,EU:6422471,GD:4587463,TB:3211207,DY:2097095,HO:65436,ER:58997,TM:54354,YB:48952,LU:43812,HF:5096191,TA:5089023,W:2200790,RE:2522539,OS:2516630,IR:1528967,PT:13684960,AU:16765219,HG:12105936,TL:10900557,PB:5724513,BI:10375093,PO:11230208,AT:7688005,RN:4358806,FR:4325478,RA:32e3,AC:7384058,TH:47871,PA:41471,U:36863,NP:33023,PU:27647,AM:5528818,CM:7888099,BK:9064419,CF:10565332,ES:11739092,FM:11739066,MD:11734438,NO:12389767,LR:13041766,RF:13369433,DB:13697103,SG:14221381,BH:14680120,HS:15073326,MT:15400998,DS:16777215,RG:16777215,CN:16777215,UUT:16777215,FL:16777215,UUP:16777215,LV:16777215,UUH:16777215,D:16777152,T:16777120};class B7 extends _n{constructor(t){t.value=re(t.value,D7.C),super(t)}atomColor(t){const n=t.element;return n==="C"?this.parameters.value:D7[n]||16777215}}Sn([wn],B7.prototype,"atomColor",null),Qt.add("element",B7);class N7 extends _n{constructor(t){super(t),t.scale||(this.parameters.scale="Spectral"),t.domain||(this.parameters.domain=[0,t.structure.entityList.length-1]),this.entityindexScale=this.getScale()}atomColor(t){return this.entityindexScale(t.entityIndex)}}Sn([wn],N7.prototype,"atomColor",null),Qt.add("entityindex",N7);class F7 extends _n{atomColor(t){const n=t.entity;switch(n?n.entityType:void 0){case 1:return 8374655;case 2:return 16629894;case 3:return 12496596;case 4:return 3697840;default:return 16777113}}}Sn([wn],F7.prototype,"atomColor",null),Qt.add("entitytype",F7);class z7 extends _n{constructor(t){super(t),this.geoAtomDict={},this.geoDict={};const n=t.structure.validation;n&&(this.geoAtomDict=n.geoAtomDict,this.geoDict=n.geoDict)}atomColor(t){let n,r=t.resno+"";t.inscode&&(r+="^"+t.inscode),t.chainname&&(r+=":"+t.chainname),r+="/"+t.modelIndex;const i=this.geoAtomDict[r];i!==void 0?(o=i[t.atomname]||0,n=16843009*((o=(858993459&(o-=o>>1&1431655765))+(o>>2&858993459))+(o>>4)&252645135)>>24):n=this.geoDict[r]||0;var o;return n===0?2188972:n===1?16703627:n===2?16018755:n>=3?10813478:9474192}}Sn([wn],z7.prototype,"atomColor",null),Qt.add("geoquality",z7);class j7 extends _n{constructor(t){super(t),this.resHF={},t.scale||(this.parameters.scale="RdYlGn");for(const n in s7)this.resHF[n]=s7[n][0];if(this.defaultResidueHydrophobicity=Yit[0],!t.domain){let n=1/0,r=-1/0;for(const i in this.resHF){const o=this.resHF[i];n=Math.min(n,o),r=Math.max(r,o)}this.parameters.domain=[n,0,r]}this.hfScale=this.getScale()}atomColor(t){return this.hfScale(this.resHF[t.resname]||this.defaultResidueHydrophobicity)}}Sn([wn],j7.prototype,"atomColor",null),Qt.add("hydrophobicity",j7);class U7 extends _n{constructor(t){super(t),t.scale||(this.parameters.scale="rainbow"),t.domain||(this.parameters.domain=[0,t.structure.modelStore.count]),this.modelindexScale=this.getScale()}atomColor(t){return this.modelindexScale(t.modelIndex)}}Sn([wn],U7.prototype,"atomColor",null),Qt.add("modelindex",U7);class V7 extends _n{atomColor(t){switch(t.residueType.moleculeType){case 1:return 3697840;case 2:return 15729279;case 3:return 12496596;case 4:return 16629894;case 5:return 12540695;case 6:return 8374655;default:return 16777113}}}Sn([wn],V7.prototype,"atomColor",null),Qt.add("moleculetype",V7);class H7 extends _n{constructor(t){super(t),t.scale||(this.parameters.scale="PuBu"),t.domain||(this.parameters.domain=[0,1]),this.occupancyScale=this.getScale()}atomColor(t){return this.occupancyScale(t.occupancy)}}Sn([wn],H7.prototype,"atomColor",null),Qt.add("occupancy",H7);class G7 extends _n{constructor(t){super(t),t.scale||(this.parameters.scale="rwb"),t.domain||(this.parameters.domain=[-1,1]),this.partialchargeScale=this.getScale()}atomColor(t){return this.partialchargeScale(t.partialCharge||0)}}function tI(){return 16777215*Math.random()}Sn([wn],G7.prototype,"atomColor",null),Qt.add("partialcharge",G7);class Cw extends _n{atomColor(){return tI()}volumeColor(){return tI()}positionColor(){return tI()}}Sn([wn],Cw.prototype,"atomColor",null),Sn([wn],Cw.prototype,"volumeColor",null),Sn([wn],Cw.prototype,"positionColor",null),Qt.add("random",Cw);class W7 extends _n{constructor(t){super(t),this.rciDict={},t.scale||(this.parameters.scale="RdYlBu"),this.rciScale=this.getScale({domain:[.6,0]});const n=t.structure.validation;n&&(this.rciDict=n.rciDict)}atomColor(t){let n=`[${t.resname}]${t.resno}`;t.chainname&&(n+=":"+t.chainname);const r=this.rciDict[n];return r!==void 0?this.rciScale(r):9474192}}Sn([wn],W7.prototype,"atomColor",null),Qt.add("randomcoilindex",W7);class q7 extends _n{constructor(t){super(t),this.scalePerChain={},t.scale||(this.parameters.scale="rainbow",this.parameters.reverse=re(t.reverse,!0)),t.structure.eachChain(n=>{this.parameters.domain=[n.residueOffset,n.residueEnd],this.scalePerChain[n.index]=this.getScale()})}atomColor(t){return this.scalePerChain[t.chainIndex](t.residueIndex)}}Sn([wn],q7.prototype,"atomColor",null),Qt.add("residueindex",q7);const nat={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935,ASH:16711935,GLH:16711935,A:14423100,G:3329330,I:10145074,X:8190976,C:16766720,T:4286945,U:4251856,D:35723,DA:14423100,DG:3329330,DI:10145074,DX:8190976,DC:16766720,DT:4286945,DU:4251856,DD:35723};class Y7 extends _n{atomColor(t){return nat[t.resname]||16711935}}Sn([wn],Y7.prototype,"atomColor",null),Qt.add("resname",Y7);const rat=16711808,iat=10485888,oat=6291584,sat=16762880,aat=6324479,lat=16777215,cat=11403518,uat=16580962,dat=10921722;class X7 extends _n{constructor(t){super(t),this.residueProxy=t.structure.getResidueProxy()}atomColor(t){const n=t.sstruc,r=this.residueProxy;return n==="h"?rat:n==="g"?iat:n==="i"?oat:n==="e"||n==="b"?sat:n==="t"?aat:(r.index=t.residueIndex,r.isDna()?cat:r.isRna()?uat:r.isSaccharide()?dat:r.isProtein()||n==="s"||n==="l"?lat:8421504)}}Sn([wn],X7.prototype,"atomColor",null),Qt.add("sstruc",X7);class nI extends _n{constructor(t){var n,r;super(t),t.scale||(this.parameters.scale="rwb"),this.atomData=(n=this.parameters.data)===null||n===void 0?void 0:n.atomData,this.bondData=(r=this.parameters.data)===null||r===void 0?void 0:r.bondData,this.scale=this.getScale(this.parameters)}atomColor(t){var n;const r=(n=this.atomData)===null||n===void 0?void 0:n[t.index];return r!==void 0?this.scale(r):this.parameters.value}bondColor(t,n){var r;const i=(r=this.bondData)===null||r===void 0?void 0:r[t.index];return i!==void 0?this.scale(i):this.atomProxy?(this.atomProxy.index=n?t.atomIndex1:t.atomIndex2,this.atomColor(this.atomProxy)):this.parameters.value}}Sn([wn],nI.prototype,"atomColor",null),Sn([wn],nI.prototype,"bondColor",null),Qt.add("structuredata",nI);class d0 extends _n{atomColor(){return this.parameters.value}bondColor(){return this.parameters.value}valueColor(){return this.parameters.value}volumeColor(){return this.parameters.value}}Sn([wn],d0.prototype,"atomColor",null),Sn([wn],d0.prototype,"bondColor",null),Sn([wn],d0.prototype,"valueColor",null),Sn([wn],d0.prototype,"volumeColor",null),Qt.add("uniform",d0);class K7 extends _n{constructor(t){super(t),this.valueScale=this.getScale()}volumeColor(t){return this.valueScale(this.parameters.volume.data[t])}}Sn([wn],K7.prototype,"volumeColor",null),Qt.add("value",K7);class Z7 extends _n{constructor(t){super(t),this.vec=new W,this.valueScale=this.getScale()}positionColor(t){const n=this.parameters.volume;if(!n||!n.inverseMatrix)return this.parameters.value;const r=this.vec,i=n.data,o=n.nx,s=n.ny,a=o*s;r.copy(t),r.applyMatrix4(n.inverseMatrix);const l=Math.floor(r.x),c=Math.floor(r.y),u=Math.floor(r.z),d=(u*s+c)*o+l,f=d+1,h=d+o,p=d+a,g=h+1,v=p+1,m=h+a,y=m+1,b=i[d],_=i[f],x=i[h],w=i[p],S=i[g],C=i[v],A=i[m],T=i[y],O=r.x-l,R=r.y-c,L=r.z-u,D=ys(b,_,O),$=ys(w,C,O),z=ys(x,S,O),H=ys(A,T,O),B=ys(D,z,R),V=ys($,H,R),J=ys(B,V,L);return this.valueScale(J)}}Sn([wn],Z7.prototype,"positionColor",null),Qt.add("volume",Z7);class Ei extends Ex{constructor(t,n,r){const i=r||{};if(super(t,n,i),this.type="structure",this.parameters=Object.assign({radiusType:{type:"select",options:Pc.types},radiusData:{type:"hidden"},radiusSize:{type:"number",precision:3,max:10,min:.001},radiusScale:{type:"number",precision:3,max:10,min:.001},assembly:null,defaultAssembly:{type:"hidden"}},this.parameters),this.selection=new Xn(i.sele),this.dataList=[],this.structure=t,this.structureView=this.structure.getView(this.selection),t.biomolDict){const o={default:"default","":t.unitcell?"AU":"FULL"};Object.keys(t.biomolDict).forEach(function(s){o[s]=s}),this.parameters.assembly={type:"select",options:o,rebuild:!0}}else this.parameters.assembly=null}get defaultScale(){return{vdw:1,covalent:1,bfactor:.01,sstruc:1}}init(t){const n=t||{};n.colorScheme=re(n.colorScheme,"element"),this.setRadius(n.radius,n),this.radiusType=re(n.radiusType,"vdw"),this.radiusData=re(n.radiusData,{}),this.radiusSize=re(n.radiusSize,1),this.radiusScale=re(n.radiusScale,1),this.assembly=re(n.assembly,"default"),this.defaultAssembly=re(n.defaultAssembly,""),n.quality==="auto"&&(n.quality=this.getQuality()),super.init(n),this.selection.signals.stringChanged.add(()=>{this.build()}),this.build()}setRadius(t,n){const r=Object.keys(Gre);return typeof t=="string"&&r.includes(t.toLowerCase())?n.radiusType=t:t!==void 0&&(n.radiusType="size",n.radiusSize=t),this}getAssembly(){const t=this.assembly==="default"?this.defaultAssembly:this.assembly;return this.structure.biomolDict[t]}getQuality(){let t;const n=this.structureView,r=this.getAssembly();return t=r?r.getAtomCount(n):n.atomCount,hre&&(t*=4),n.atomStore.count/n.residueStore.count<2&&(t*=10),t<15e3?"high":t<8e4?"medium":"low"}create(){if(this.structureView.atomCount===0)return;if(!this.structureView.hasCoords())return void(this.needsBuild=!0);this.needsBuild=!1;const t=this.getAssembly();if(t)t.partList.forEach((n,r)=>{const i=n.getView(this.structureView);if(i.atomCount===0)return;const o=this.createData(i,r);o&&(o.sview=i,o.instanceList=n.getInstanceList(),this.dataList.push(o))});else{const n=this.createData(this.structureView,0);n&&(n.sview=this.structureView,this.dataList.push(n))}}update(t){!this.lazy||this.visible?this.needsBuild?this.build():this.dataList.forEach(n=>{n.bufferList.length>0&&this.updateData(t,n)},this):Object.assign(this.lazyProps.what,t)}updateData(t,n){this.build()}getColorParams(){return Object.assign(Object.assign({},super.getColorParams()),{structure:this.structure})}getRadiusParams(t){return{type:this.radiusType,scale:this.radiusScale,size:this.radiusSize,data:this.radiusData}}getAtomParams(t,n){return Object.assign({what:t,colorParams:this.getColorParams(),radiusParams:this.getRadiusParams()},n)}getBondParams(t,n){return Object.assign({what:t,colorParams:this.getColorParams(),radiusParams:this.getRadiusParams()},n)}getAtomRadius(t){return this.structureView.atomSet.isSet(t.index)?new Pc(this.getRadiusParams()).atomRadius(t):0}setSelection(t,n){return this.selection.setString(t,n),this}setParameters(t,n={},r=!1){const i=t||{};return this.setRadius(i.radius,i),i.radiusType===void 0&&i.radiusData===void 0&&i.radiusSize===void 0&&i.radiusScale===void 0||(n.radius=!0,ll&&!this.disableImpostor||(r=!0)),i.defaultAssembly!==void 0&&i.defaultAssembly!==this.defaultAssembly&&(this.assembly==="default"&&i.assembly===void 0||i.assembly==="default")&&(r=!0),super.setParameters(i,n,r),this}getParameters(){return Object.assign(super.getParameters(),{sele:this.selection?this.selection.string:void 0,defaultAssembly:this.defaultAssembly})}attach(t){const n=this.viewer,r=this.bufferList;this.dataList.forEach(function(i){i.bufferList.forEach(function(o){r.push(o),n.add(o,i.instanceList)})}),this.setVisibility(this.visible),t()}clear(){this.dataList.length=0,super.clear()}dispose(){this.structureView.dispose(),super.dispose()}}class bB extends Ei{constructor(t,n,r){super(t,n,r),this.n=0,this.parameters=Object.assign({labelVisible:{type:"boolean"},labelSize:{type:"number",precision:3,max:10,min:.001},labelColor:{type:"color"},labelFontFamily:{type:"select",options:{"sans-serif":"sans-serif",monospace:"monospace",serif:"serif"},buffer:"fontFamily"},labelFontStyle:{type:"select",options:{normal:"normal",italic:"italic"},buffer:"fontStyle"},labelFontWeight:{type:"select",options:{normal:"normal",bold:"bold"},buffer:"fontWeight"},labelsdf:{type:"boolean",buffer:"sdf"},labelXOffset:{type:"number",precision:1,max:20,min:-20,buffer:"xOffset"},labelYOffset:{type:"number",precision:1,max:20,min:-20,buffer:"yOffset"},labelZOffset:{type:"number",precision:1,max:20,min:-20,buffer:"zOffset"},labelAttachment:{type:"select",options:{"bottom-left":"bottom-left","bottom-center":"bottom-center","bottom-right":"bottom-right","middle-left":"middle-left","middle-center":"middle-center","middle-right":"middle-right","top-left":"top-left","top-center":"top-center","top-right":"top-right"},rebuild:!0},labelBorder:{type:"boolean",buffer:"showBorder"},labelBorderColor:{type:"color",buffer:"borderColor"},labelBorderWidth:{type:"number",precision:2,max:.3,min:0,buffer:"borderWidth"},labelBackground:{type:"boolean",rebuild:!0},labelBackgroundColor:{type:"color",buffer:"backgroundColor"},labelBackgroundMargin:{type:"number",precision:2,max:2,min:0,rebuild:!0},labelBackgroundOpacity:{type:"range",step:.01,max:1,min:0,buffer:"backgroundOpacity"},labelFixedSize:{type:"boolean",buffer:"fixedSize"},lineOpacity:{type:"range",min:0,max:1,step:.01},linewidth:{type:"integer",max:50,min:1,buffer:!0}},this.parameters,{flatShaded:null})}init(t){const n=t||{};this.labelVisible=re(n.labelVisible,!0),this.labelSize=re(n.labelSize,2),this.labelColor=re(n.labelColor,16777215),this.labelFontFamily=re(n.labelFontFamily,"sans-serif"),this.labelFontStyle=re(n.labelFontstyle,"normal"),this.labelFontWeight=re(n.labelFontWeight,"bold"),this.labelsdf=re(n.labelsdf,dre==="Chrome"),this.labelXOffset=re(n.labelXOffset,0),this.labelYOffset=re(n.labelYOffset,0),this.labelZOffset=re(n.labelZOffset,.5),this.labelAttachment=re(n.labelAttachment,"bottom-left"),this.labelBorder=re(n.labelBorder,!1),this.labelBorderColor=re(n.labelBorderColor,"lightgrey"),this.labelBorderWidth=re(n.labelBorderWidth,.15),this.labelBackground=re(n.labelBackground,!1),this.labelBackgroundColor=re(n.labelBackgroundColor,"lightgrey"),this.labelBackgroundMargin=re(n.labelBackgroundMargin,.5),this.labelBackgroundOpacity=re(n.labelBackgroundOpacity,1),this.labelFixedSize=re(n.labelFixedSize,!1),this.lineOpacity=re(n.lineOpacity,1),this.linewidth=re(n.linewidth,2),super.init(n)}update(t){t.position?this.build():super.update(t)}updateData(t,n){const r={};if(t&&!t.labelSize||Object.assign(r,{size:rs(this.n,this.labelSize)}),!t||t.labelColor){const i=new ht(this.labelColor);Object.assign(r,{color:En(this.n,i.r,i.g,i.b)})}this.textBuffer.setAttributes(r)}setParameters(t,n={},r=!1){return t&&t.labelSize&&(n.labelSize=!0),t&&(t.labelColor||t.labelColor===0)&&(n.labelColor=!0,r=!0),super.setParameters(t,n,r),t&&t.opacity!==void 0&&this.textBuffer.setParameters({opacity:1}),t&&t.labelVisible!==void 0&&this.setVisibility(this.visible),this}setVisibility(t,n){return super.setVisibility(t,!0),this.textBuffer&&this.textBuffer.setVisibility(this.labelVisible&&this.visible),n||this.viewer.requestRender(),this}getLabelBufferParams(t={}){return super.getBufferParams(Object.assign({fontFamily:this.labelFontFamily,fontStyle:this.labelFontStyle,fontWeight:this.labelFontWeight,sdf:this.labelsdf,xOffset:this.labelXOffset,yOffset:this.labelYOffset,zOffset:this.labelZOffset,attachment:this.labelAttachment,showBorder:this.labelBorder,borderColor:this.labelBorderColor,borderWidth:this.labelBorderWidth,showBackground:this.labelBackground,backgroundColor:this.labelBackgroundColor,backgroundMargin:this.labelBackgroundMargin,backgroundOpacity:this.labelBackgroundOpacity,fixedSize:this.labelFixedSize,disablePicking:!0,visible:this.labelVisible},t,{opacity:1}))}getAtomRadius(){return 0}}function xB(e,t){const n=e.getAtomProxy(),r=new Xn,i=t.length;if(i===0)return new Float32Array(0);const o=t[0].length,s=e.getAtomSet(),a=new Float32Array(i*o*3);let l=0;return t.forEach(function(c){let u=!1;for(let d=0;d<o;d++){const f=c[d];if(typeof f=="number"&&Number.isInteger(f)){if(!s.get(f)){u=!0;break}n.index=f}else{r.setString(f);const p=e.getAtomIndices(r);if(!p.length){u=!0;break}n.index=p[0]}let h=l+3*d;a[h++]=n.x,a[h++]=n.y,a[h++]=n.z}u||(l+=3*o)}),a.subarray(0,l)}function ta(e,t,n,r,i){const o=Math.cos(i),s=Math.sin(i);e[0]=t[0]+n[0]*o+r[0]*s,e[1]=t[1]+n[1]*o+r[1]*s,e[2]=t[2]+n[2]*o+r[2]*s}function J7(e,t,n,r,i,o,s){for(let a=0;a<t;a++){for(let l=0;l<n;l++)r[l]=e[l*t+a];Q7(r,i,o,s,n);for(let l=0;l<n;l++)e[l*t+a]=i[l]}for(let a=0;a<n;a++){for(let l=0;l<t;l++)r[l]=e[a*t+l];Q7(r,i,o,s,t);for(let l=0;l<t;l++)e[a*t+l]=Math.sqrt(i[l])}}function Q7(e,t,n,r,i){n[0]=0,r[0]=Number.MIN_SAFE_INTEGER,r[1]=Number.MAX_SAFE_INTEGER;for(let o=1,s=0;o<i;o++){let a=(e[o]+o*o-(e[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);for(;a<=r[s];)s--,a=(e[o]+o*o-(e[n[s]]+n[s]*n[s]))/(2*o-2*n[s]);s++,n[s]=o,r[s]=a,r[s+1]=Number.MAX_SAFE_INTEGER}for(let o=0,s=0;o<i;o++){for(;r[s+1]<o;)s++;t[o]=(o-n[s])*(o-n[s])+e[n[s]]}}dn.add("shader/SDFFont.vert",`uniform float clipNear;
uniform float clipRadius;
uniform vec3 clipCenter;
uniform float xOffset;
uniform float yOffset;
uniform float zOffset;
uniform bool ortho;
uniform float canvasHeight;
uniform float pixelRatio;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )
varying vec3 vViewPosition;
#endif
varying vec2 texCoord;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
#include color_pars_vertex
#endif
attribute vec2 mapping;
attribute vec2 inputTexCoord;
attribute float inputSize;
#include matrix_scale
#include common
void main(void){
#if defined( PICKING )
vPickingColor = unpackColor( primitiveId );
#else
#include color_vertex
#endif
texCoord = inputTexCoord;
float scale = matrixScale( modelViewMatrix );
float _xOffset = xOffset * scale;
float _yOffset = yOffset * scale;
float _zOffset = zOffset * scale;
if( texCoord.x == 10.0 ){
_zOffset -= 0.001;
}
vec4 cameraPos = modelViewMatrix * vec4( position, 1.0 );
#ifdef FIXED_SIZE
if ( ortho ) {
scale /= pixelRatio * (( canvasHeight / 2.0 ) / -cameraPosition.z) * 0.1;
} else {
scale /= pixelRatio * (( canvasHeight / 2.0 ) / -cameraPos.z) * 0.1;
}
#endif
vec4 cameraCornerPos = vec4( cameraPos.xyz, 1.0 );
cameraCornerPos.xy += mapping * inputSize * 0.01 * scale;
cameraCornerPos.x += _xOffset;
cameraCornerPos.y += _yOffset;
if( ortho ){
cameraCornerPos.xyz += normalize( -cameraPosition ) * _zOffset;
} else {
cameraCornerPos.xyz += normalize( -cameraCornerPos.xyz ) * _zOffset;
}
gl_Position = projectionMatrix * cameraCornerPos;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || ( !defined( PICKING ) && !defined( NOLIGHT ) )
vViewPosition = -cameraCornerPos.xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
#include radiusclip_vertex
}`),dn.add("shader/SDFFont.frag",`uniform sampler2D fontTexture;
uniform float opacity;
uniform bool showBorder;
uniform vec3 borderColor;
uniform float borderWidth;
uniform vec3 backgroundColor;
uniform float backgroundOpacity;
uniform float clipNear;
uniform float clipRadius;
varying vec3 vViewPosition;
varying vec2 texCoord;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#if defined( PICKING )
uniform float objectId;
varying vec3 vPickingColor;
const vec3 vColor = vec3( 0.0 );
#else
#include common
#include color_pars_fragment
#include fog_pars_fragment
#endif
const float gamma = 2.2 * 1.4142 / 128.0;
const float padding = 0.75;
void main(){
#include nearclip_fragment
#include radiusclip_fragment
if( texCoord.x > 1.0 ){
gl_FragColor = vec4( backgroundColor, backgroundOpacity );
}else{
float sdf = texture2D( fontTexture, texCoord ).a;
if( showBorder ) sdf += borderWidth;
float a = smoothstep(padding - gamma, padding + gamma, sdf);
if( a < 0.2 ) discard;
a *= opacity;
vec3 outgoingLight = vColor;
if( showBorder && sdf < ( padding + borderWidth ) ){
outgoingLight = borderColor;
}
gl_FragColor = vec4( outgoingLight, a );
}
#if defined( PICKING )
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);const rI={},fat={font:"sans-serif",size:36,style:"normal",variant:"normal",weight:"normal",outline:3,width:1024,height:1024};class hat{constructor(t={}){this.gamma=1,this.mapped={},this.scratchW=0,this.scratchH=0,this.currentX=0,this.currentY=0,this.cutoff=.25,this.parameters=ns(t,fat);const n=this.parameters;this.radius=n.size/8,this.padding=n.size/3;const r=this.lineHeight=n.size+2*n.outline+Math.round(n.size/4),i=this.maxWidth=n.width/4,o=this.canvas=document.createElement("canvas");o.width=i,o.height=r;const s=this.context=this.canvas.getContext("2d");s.font=`${n.style} ${n.variant} ${n.weight} ${n.size}px ${n.font}`,s.fillStyle="black",s.textAlign="left",s.textBaseline="bottom",s.lineJoin="round",this.gridOuter=new Float64Array(r*i),this.gridInner=new Float64Array(r*i),this.f=new Float64Array(Math.max(r,i)),this.d=new Float64Array(Math.max(r,i)),this.z=new Float64Array(Math.max(r,i)+1),this.v=new Int16Array(Math.max(r,i)),this.data=new Uint8Array(n.width*n.height*4),this.canvas2=document.createElement("canvas"),this.canvas2.width=n.width,this.canvas2.height=n.height,this.context2=this.canvas2.getContext("2d"),this.placeholder=this.map("�");for(let a=32;a<=126;++a)this.map(String.fromCharCode(a));this.map("°"),this.map("Å"),this.texture=new bb(this.canvas2),this.texture.flipY=!1,this.texture.needsUpdate=!0}map(t){const n=this.parameters;return this.mapped[t]===void 0&&(this.draw(t),this.currentX+this.scratchW>n.width&&(this.currentX=0,this.currentY+=this.scratchH),this.currentY+this.scratchH>n.height&&console.warn("canvas to small"),this.mapped[t]={x:this.currentX,y:this.currentY,w:this.scratchW,h:this.scratchH},this.context2.drawImage(this.canvas,0,0,this.scratchW,this.scratchH,this.currentX,this.currentY,this.scratchW,this.scratchH),this.currentX+=this.scratchW),this.mapped[t]}get(t){return this.mapped[t]||this.placeholder}draw(t){const n=this.parameters,r=this.lineHeight,i=n.outline,o=this.context,s=this.maxWidth,a=i,l=r-n.outline,c=o.measureText(t),u=Math.min(s,Math.ceil(c.width+2*a+1)),d=u*r;o.clearRect(0,0,u,r),o.fillText(t,a,l);const f=o.getImageData(0,0,u,r),h=f.data;for(let p=0;p<d;p++){const g=f.data[4*p+3]/255;this.gridOuter[p]=g===1?0:g===0?Number.MAX_SAFE_INTEGER:Math.pow(Math.max(0,.5-g),2),this.gridInner[p]=g===1?Number.MAX_SAFE_INTEGER:g===0?0:Math.pow(Math.max(0,g-.5),2)}J7(this.gridOuter,u,r,this.f,this.d,this.v,this.z),J7(this.gridInner,u,r,this.f,this.d,this.v,this.z);for(let p=0;p<d;p++){const g=this.gridOuter[p]-this.gridInner[p];h[4*p+3]=Math.max(0,Math.min(255,Math.round(255-255*(g/this.radius+this.cutoff))))}o.putImageData(f,0,0),this.scratchW=u,this.scratchH=r}}const pat=Object.assign({fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"bold",fontSize:36,xOffset:0,yOffset:0,zOffset:.5,attachment:"bottom-left",showBorder:!1,borderColor:"lightgrey",borderWidth:.15,showBackground:!1,backgroundColor:"lightgrey",backgroundMargin:.5,backgroundOpacity:1,forceTransparent:!0,fixedSize:!1},eo),mat=Object.assign({fontFamily:{uniform:!0},fontStyle:{uniform:!0},fontWeight:{uniform:!0},fontSize:{uniform:!0},xOffset:{uniform:!0},yOffset:{uniform:!0},zOffset:{uniform:!0},showBorder:{uniform:!0},borderColor:{uniform:!0},borderWidth:{uniform:!0},backgroundColor:{uniform:!0},backgroundOpacity:{uniform:!0},fixedSize:{updateShader:!0}},Nh);function eV(e,t){const n=e.position.length/3;let r=0;for(let i=0;i<n;++i)r+=e.text[i].length;return t.showBackground&&(r+=n),r}class xv extends gB{constructor(t,n={}){super({position:new Float32Array(3*eV(t,n)),color:new Float32Array(3*eV(t,n)),picking:new Sot},n),this.parameterTypes=mat,this.alwaysTransparent=!0,this.hasWireframe=!1,this.isText=!0,this.vertexShader="SDFFont.vert",this.fragmentShader="SDFFont.frag",this.text=t.text,this.positionCount=t.position.length/3,this.addUniforms({fontTexture:{value:null},xOffset:{value:this.parameters.xOffset},yOffset:{value:this.parameters.yOffset},zOffset:{value:this.parameters.zOffset},ortho:{value:!1},showBorder:{value:this.parameters.showBorder},borderColor:{value:new ht(this.parameters.borderColor)},borderWidth:{value:this.parameters.borderWidth},backgroundColor:{value:new ht(this.parameters.backgroundColor)},backgroundOpacity:{value:this.parameters.backgroundOpacity},canvasHeight:{value:1},pixelRatio:{value:1}}),this.addAttributes({inputTexCoord:{type:"v2",value:null},inputSize:{type:"f",value:null}}),this.setAttributes(t),this.makeTexture(),this.makeMapping()}get defaultParameters(){return pat}makeMaterial(){super.makeMaterial();const t=this.texture,n=this.material;n.transparent=!0,n.extensions.derivatives=!0,n.lights=!1,n.uniforms.fontTexture.value=t,n.needsUpdate=!0;const r=this.wireframeMaterial;r.transparent=!0,r.extensions.derivatives=!0,r.lights=!1,r.uniforms.fontTexture.value=t,r.needsUpdate=!0;const i=this.pickingMaterial;i.extensions.derivatives=!0,i.lights=!1,i.uniforms.fontTexture.value=t,i.needsUpdate=!0}setAttributes(t={}){let n,r,i,o,s,a;const l=this.text,c=this.geometry.attributes;t.position&&(n=t.position,o=c.position.array,c.position.needsUpdate=!0),t.size&&(r=t.size,s=c.inputSize.array,c.inputSize.needsUpdate=!0),t.color&&(i=t.color,a=c.color.array,c.color.needsUpdate=!0);const u=this.positionCount;let d,f,h,p,g,v=0;for(let m=0;m<u;++m)for(f=3*m,h=l[m],g=h.length,this.parameters.showBackground&&(g+=1),p=0;p<g;++p,++v)for(let y=0;y<4;y++)d=4*v*3+3*y,n&&(o[d]=n[f],o[d+1]=n[f+1],o[d+2]=n[f+2]),r&&(s[4*v+y]=r[m]),i&&(a[d]=i[f],a[d+1]=i[f+1],a[d+2]=i[f+2])}makeTexture(){this.textAtlas=function(t){const n=JSON.stringify(t);return rI[n]===void 0&&(rI[n]=new hat(t)),rI[n]}({font:this.parameters.fontFamily,style:this.parameters.fontStyle,weight:this.parameters.fontWeight,size:this.parameters.fontSize}),this.texture=this.textAtlas.texture}makeMapping(){const t=this.textAtlas,n=this.text,r=this.parameters.attachment,i=t.lineHeight*this.parameters.backgroundMargin*.1-10,o=this.geometry.attributes,s=o.inputTexCoord.array,a=o.mapping.array,l=this.positionCount;let c,u,d,f,h,p,g,v,m=0;for(let y=0;y<l;++y){for(d=n[y],f=0,p=d.length,h=0;h<p;++h)c=t.get(d[h]),f+=c.w-2*t.parameters.outline;for(v=r.startsWith("top")?t.lineHeight/1.25:r.startsWith("middle")?t.lineHeight/2.5:0,g=r.endsWith("right")?f:r.endsWith("center")?f/2:0,g+=t.parameters.outline,v+=t.parameters.outline,this.parameters.showBackground&&(u=2*m*4,a[u+0]=-t.lineHeight/6-g-i,a[u+1]=t.lineHeight-v+i,a[u+2]=-t.lineHeight/6-g-i,a[u+3]=0-v-i,a[u+4]=f+t.lineHeight/6-g+2*t.parameters.outline+i,a[u+5]=t.lineHeight-v+i,a[u+6]=f+t.lineHeight/6-g+2*t.parameters.outline+i,a[u+7]=0-v-i,s[u+0]=10,s[u+2]=10,s[u+4]=10,s[u+6]=10,m+=1),f=0,h=0;h<p;++h,++m){c=t.get(d[h]),u=2*m*4,a[u+0]=f-g,a[u+1]=c.h-v,a[u+2]=f-g,a[u+3]=0-v,a[u+4]=f+c.w-g,a[u+5]=c.h-v,a[u+6]=f+c.w-g,a[u+7]=0-v;const b=t.parameters.width,_=t.parameters.height,x=[c.x/b,c.y/_,c.x/b,(c.y+c.h)/_,(c.x+c.w)/b,c.y/_,(c.x+c.w)/b,(c.y+c.h)/_];s.set(x,u),f+=c.w-2*t.parameters.outline}}o.inputTexCoord.needsUpdate=!0,o.mapping.needsUpdate=!0}getDefines(t){const n=super.getDefines(t);return this.parameters.fixedSize&&(n.FIXED_SIZE=1),n}setUniforms(t){!t||t.fontFamily===void 0&&t.fontStyle===void 0&&t.fontWeight===void 0&&t.fontSize===void 0||(this.makeTexture(),this.makeMapping(),this.texture.needsUpdate=!0,t.fontTexture=this.texture),super.setUniforms(t)}}us.add("text",xv),dn.add("shader/WideLine.vert",`
uniform float clipNear;
uniform vec3 clipCenter;
uniform float linewidth;
uniform vec2 resolution;
uniform mat4 projectionMatrixInverse;
attribute vec2 mapping;
attribute vec3 position1;
attribute vec3 position2;
#ifdef PICKING
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
attribute vec3 color2;
varying vec3 vColor;
varying vec3 vColor2;
varying float flag;
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
void trimSegment( const in vec4 start, inout vec4 end ) {
float a = projectionMatrix[ 2 ][ 2 ]; float b = projectionMatrix[ 3 ][ 2 ]; float nearEstimate = - 0.5 * b / a;
float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );
end.xyz = mix( start.xyz, end.xyz, alpha );
}
void main() {
float aspect = resolution.x / resolution.y;
#ifdef PICKING
vPickingColor = unpackColor( primitiveId );
#else
flag = mapping.y;
vColor = color;
vColor2 = color2;
#endif
vec4 start = modelViewMatrix * vec4( position1, 1.0 );
vec4 end = modelViewMatrix * vec4( position2, 1.0 );
bool perspective = ( projectionMatrix[ 2 ][ 3 ] == -1.0 ); if ( perspective ) {
if ( start.z < 0.0 && end.z >= 0.0 ) {
trimSegment( start, end );
} else if ( end.z < 0.0 && start.z >= 0.0 ) {
trimSegment( end, start );
}
}
vec4 clipStart = projectionMatrix * start;
vec4 clipEnd = projectionMatrix * end;
vec2 ndcStart = clipStart.xy / clipStart.w;
vec2 ndcEnd = clipEnd.xy / clipEnd.w;
vec2 dir = ndcEnd - ndcStart;
dir.x *= aspect;
dir = normalize( dir );
vec2 offset = vec2( dir.y, - dir.x );
dir.x /= aspect;
offset.x /= aspect;
if ( mapping.x < 0.0 ) offset *= - 1.0;
offset *= linewidth;
offset /= resolution.y;
vec4 clip = ( mapping.y < 0.5 ) ? clipStart : clipEnd;
offset *= clip.w;
clip.xy += offset;
gl_Position = clip;
#ifndef PICKING
vViewPosition = ( projectionMatrixInverse * clip ).xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
}`),dn.add("shader/WideLine.frag",`uniform vec3 diffuse;
uniform float opacity;
uniform float clipNear;
uniform float clipRadius;
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
#ifdef PICKING
uniform float objectId;
varying vec3 vPickingColor;
#else
#include common
#include fog_pars_fragment
varying vec3 vViewPosition;
varying vec3 vColor;
varying vec3 vColor2;
varying float flag;
#endif
void main() {
#include nearclip_fragment
#include radiusclip_fragment
#if defined( PICKING )
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
vec3 outgoingLight = vec3( 0.0 );
vec4 diffuseColor = vec4( diffuse, 1.0 );
if ( flag < 0.0 ) {
diffuseColor.rgb *= vColor;
} else {
diffuseColor.rgb *= vColor2;
}
#include alphatest_fragment
outgoingLight = diffuseColor.rgb;
gl_FragColor = vec4( outgoingLight, diffuseColor.a * opacity );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);const gat=Object.assign({linewidth:2},eo),vat=Object.assign({linewidth:{uniform:!0}},Nh);class Mc extends gB{constructor(t,n={}){super(t,n),this.parameterTypes=vat,this.vertexShader="WideLine.vert",this.fragmentShader="WideLine.frag",!t.color2&&t.color&&(t.color2=t.color),this.addUniforms({linewidth:{value:this.parameters.linewidth},resolution:{value:new et},projectionMatrixInverse:{value:new lt}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null}}),this.setAttributes(t),this.makeMapping()}get defaultParameters(){return gat}setParameters(t){super.setParameters(t)}}us.add("wideline",Mc);class yat extends bB{constructor(t,n,r){super(t,n,r),this.type="angle",this.parameters=Object.assign({atomTriple:{type:"hidden",rebuild:!0},vectorVisible:{type:"boolean",default:!0},arcVisible:{type:"boolean",default:!0},sectorVisible:{type:"boolean",default:!0}},this.parameters),this.init(r)}init(t){const n=t||{};n.side=re(n.side,"double"),n.opacity=re(n.opacity,.5),this.atomTriple=re(n.atomTriple,[]),this.arcVisible=re(n.arcVisible,!0),this.sectorVisible=re(n.sectorVisible,!0),this.vectorVisible=re(n.vectorVisible,!0),super.init(n)}createData(t){if(!t.atomCount||!this.atomTriple.length)return;const n=function(a,l){return function(c){const u=[],d=c.length/9;for(let p=0;p<d;p++){let g=!0;for(let v=p;v<p+3;v+=3)c[v]===c[v+3]&&c[v+1]===c[v+4]&&c[v+2]===c[v+5]&&(g=!1);g&&u.push(p)}const f=new Float32Array(9*u.length);let h=0;return u.forEach(function(p){Vr(c,f,9*p,9*h,9),h++}),f}(xB(a,l))}(t,this.atomTriple),r=function(a,l={}){const c=re(l.angleStep,Math.PI/90),u=a.length/9,d=new Float32Array(u),f=new Float32Array(3*u),h=new Array(u),p=new Float32Array(6*u),g=new Float32Array(6*u),v=new Array(u),m=new Array(u),y=new Array(u);let b=0;const _=Vt(),x=Vt(),w=Vt(),S=Vt(),C=Vt(),A=Vt(),T=Vt(),O=Vt(),R=Vt();for(var L=0;L<u;L++){let K=9*L;Hi(_,a,K),Hi(x,a,K+3),Hi(w,a,K+6);let ie=6*L;qt(_,p,ie),qt(x,g,ie),qt(x,p,ie+3),qt(w,g,ie+3),ur(S,_,x),ur(C,w,x),yr(S,S),yr(C,C),Ao(A,S,C);const ce=Lu(A),pe=io(S,C),se=d[L]=Math.atan2(ce,pe);h[L]=(yre*se).toFixed(1)+"°",Lu(A)===0&&(A[0]=1,A[1]=0,A[2]=0),Ao(T,A,S),yr(T,T),ta(O,x,S,T,se/2),qt(O,f,3*L);const G=Math.ceil(se/c),he=new Float32Array(9*G);y[L]=he;const Z=new Float32Array(3*G),ae=new Float32Array(3*G);v[L]=Z,m[L]=ae,ra(R,x,S);const oe=function(ve,ne){const xe=9*ne,Ce=3*ne;qt(x,he,xe),qt(R,he,xe+3),qt(R,Z,Ce),ta(R,x,S,T,ve),qt(R,he,xe+6),qt(R,ae,Ce)};let te=0;for(let ve=c;ve<se;ve+=c)oe(ve,te),te++;oe(se,te),b+=G}const D=3*b,$=9*b,z=new Float32Array(D),H=new Float32Array(D),B=new Float32Array($);let V=0,J=0;for(let K=0;K<u;K++){const ie=v[K],ce=m[K];Vr(ie,z,0,J,ie.length),Vr(ce,H,0,J,ce.length),J+=ie.length;const pe=y[K];Vr(pe,B,0,V,pe.length),V+=pe.length}return{labelPosition:f,labelText:h,vectorPosition1:p,vectorPosition2:g,arcPosition1:z,arcPosition2:H,sectorPosition:B}}(n),i=this.n=r.labelPosition.length/3,o=new ht(this.labelColor);this.textBuffer=new xv({position:r.labelPosition,size:rs(i,this.labelSize),color:En(i,o.r,o.g,o.b),text:r.labelText},this.getLabelBufferParams());const s=new ht(this.colorValue);return this.vectorBuffer=new Mc(UL({position1:r.vectorPosition1,position2:r.vectorPosition2,color:En(2*i,s.r,s.g,s.b),color2:En(2*i,s.r,s.g,s.b)}),this.getBufferParams({linewidth:this.linewidth,visible:this.vectorVisible,opacity:this.lineOpacity})),this.arcLength=r.arcPosition1.length/3,this.arcBuffer=new Mc(UL({position1:r.arcPosition1,position2:r.arcPosition2,color:En(this.arcLength,s.r,s.g,s.b),color2:En(this.arcLength,s.r,s.g,s.b)}),this.getBufferParams({linewidth:this.linewidth,visible:this.arcVisible,opacity:this.lineOpacity})),this.sectorLength=r.sectorPosition.length/3,this.sectorBuffer=new Ac({position:r.sectorPosition,color:En(this.sectorLength,s.r,s.g,s.b)},this.getBufferParams({visible:this.sectorVisible})),{bufferList:[this.textBuffer,this.vectorBuffer,this.arcBuffer,this.sectorBuffer]}}updateData(t,n){super.updateData(t,n);const r={},i={},o={};if(t.color){const s=new ht(this.colorValue);Object.assign(r,{color:En(2*this.n,s.r,s.g,s.b),color2:En(2*this.n,s.r,s.g,s.b)}),Object.assign(i,{color:En(this.arcLength,s.r,s.g,s.b),color2:En(this.arcLength,s.r,s.g,s.b)}),Object.assign(o,{color:En(this.sectorLength,s.r,s.g,s.b)})}this.vectorBuffer.setAttributes(r),this.arcBuffer.setAttributes(i),this.sectorBuffer.setAttributes(o)}setParameters(t){return super.setParameters(t,{},!1),!t||t.vectorVisible===void 0&&t.arcVisible===void 0&&t.sectorVisible===void 0||this.setVisibility(this.visible),t&&t.lineOpacity&&(this.vectorBuffer.setParameters({opacity:t.lineOpacity}),this.arcBuffer.setParameters({opacity:t.lineOpacity})),t&&t.opacity!==void 0&&(this.vectorBuffer.setParameters({opacity:this.lineOpacity}),this.arcBuffer.setParameters({opacity:this.lineOpacity})),t&&t.linewidth&&(this.vectorBuffer.setParameters({linewidth:t.linewidth}),this.arcBuffer.setParameters({linewidth:t.linewidth})),this}setVisibility(t,n){return super.setVisibility(t,!0),this.vectorBuffer&&this.vectorBuffer.setVisibility(this.vectorVisible&&this.visible),this.arcBuffer&&this.arcBuffer.setVisibility(this.arcVisible&&this.visible),this.sectorBuffer&&this.sectorBuffer.setVisibility(this.sectorVisible&&this.visible),n||this.viewer.requestRender(),this}}Zn.add("angle",yat);const tV=new W,iI=new W,oI=new W,bat=new W(0,1,0),_B=Object.assign({radialSegments:1,openEnded:!0},eo);function nV(e={}){const t=re(e.radialSegments,10),n=re(e.openEnded,!0),r=new lt().makeRotationX(Math.PI/2),i=new xc(1,1,1,t,1,n);return i.applyMatrix4(r),i}class aie extends md{constructor(t,n={}){super(function(o,s={}){const a=nV(s),l=o.position1.length,c=a.attributes.position.array.length/3,u=l/3,d=new Float32Array(2*u*c);return NL(u,c,0,d),NL(u,c,u*c,d),{position:new Float32Array(2*l),color:new Float32Array(2*l),primitiveId:d,picking:o.picking}}(t,n),n,nV(n)),this.updateNormals=!0;const r=t.position1.length,i=t.radius.length;this.__center=new Float32Array(r),this._position=new Float32Array(2*r),this._color=new Float32Array(2*r),this._from=new Float32Array(2*r),this._to=new Float32Array(2*r),this._radius=new Float32Array(2*i),this.setAttributes(t,!0)}get defaultParameters(){return _B}applyPositionTransform(t,n,r){iI.fromArray(this._from,r),oI.fromArray(this._to,r),t.lookAt(iI,oI,bat);const i=this._radius[n];tV.set(i,i,iI.distanceTo(oI)),t.scale(tV)}setAttributes(t={},n){const r={};t.position1&&t.position2&&(cl(t.position1,t.position2,this.__center),cl(t.position1,this.__center,this._position),cl(this.__center,t.position2,this._position,t.position1.length),this._from.set(t.position1),this._from.set(this.__center,t.position1.length),this._to.set(this.__center),this._to.set(t.position2,this.__center.length),r.position=this._position),t.color&&t.color2&&(this._color.set(t.color),this._color.set(t.color2,t.color.length),r.color=this._color),t.radius&&(this._radius.set(t.radius),this._radius.set(t.radius,t.radius.length),r.radius=this._radius),super.setAttributes(r,n)}}dn.add("shader/CylinderImpostor.vert",`
attribute vec3 mapping;
attribute vec3 position1;
attribute vec3 position2;
attribute float radius;
varying vec3 axis;varying vec4 base_radius;varying vec4 end_b;varying vec3 U;varying vec3 V;
varying vec4 w;
#ifdef PICKING
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
attribute vec3 color2;
varying vec3 vColor1;
varying vec3 vColor2;
#endif
uniform mat4 modelViewMatrixInverse;
uniform float ortho;
#include matrix_scale
void main(){
#ifdef PICKING
vPickingColor = unpackColor( primitiveId );
#else
vColor1 = color;
vColor2 = color2;
#endif
base_radius.w = radius * matrixScale( modelViewMatrix );
vec3 center = position;
vec3 dir = normalize( position2 - position1 );
float ext = length( position2 - position1 ) / 2.0;
vec3 cam_dir;
if( ortho == 0.0 ){
cam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 0, 1 ) ).xyz - center;
}else{
cam_dir = ( modelViewMatrixInverse * vec4( 0, 0, 1, 0 ) ).xyz;
}
cam_dir = normalize( cam_dir );
vec3 ldir;
float b = dot( cam_dir, dir );
end_b.w = b;
if( b < 0.0 )
ldir = -ext * dir;
else
ldir = ext * dir;
vec3 left = radius * normalize( cross( cam_dir, ldir ) );
vec3 up = radius * normalize( cross( left, ldir ) );
axis = normalize( normalMatrix * ldir );
U = normalize( normalMatrix * up );
V = normalize( normalMatrix * left );
vec4 base4 = modelViewMatrix * vec4( center - ldir, 1.0 );
base_radius.xyz = base4.xyz / base4.w;
vec4 end4 = modelViewMatrix * vec4( center + ldir, 1.0 );
end_b.xyz = end4.xyz / end4.w;
w = modelViewMatrix * vec4(
center + mapping.x*ldir + mapping.y*left + mapping.z*up, 1.0
);
gl_Position = projectionMatrix * w;
gl_Position.z = 0.99;
}`),dn.add("shader/CylinderImpostor.frag",`#define STANDARD
#define IMPOSTOR
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 interiorColor;
uniform float interiorDarkening;
uniform float roughness;
uniform float metalness;
uniform float opacity;
uniform float clipNear;
uniform mat4 projectionMatrix;
uniform float ortho;
varying vec3 axis;
varying vec4 base_radius;
varying vec4 end_b;
varying vec3 U;
varying vec3 V;
varying vec4 w;
#ifdef PICKING
uniform float objectId;
varying vec3 vPickingColor;
#else
varying vec3 vColor1;
varying vec3 vColor2;
#include common
#include fog_pars_fragment
#include bsdfs
#include lights_pars_begin
#include lights_physical_pars_fragment
#endif
bool interior = false;
float distSq3( vec3 v3a, vec3 v3b ){
return (
( v3a.x - v3b.x ) * ( v3a.x - v3b.x ) +
( v3a.y - v3b.y ) * ( v3a.y - v3b.y ) +
( v3a.z - v3b.z ) * ( v3a.z - v3b.z )
);
}
float calcDepth( in vec3 cameraPos ){
vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;
return 0.5 + 0.5 * clipZW.x / clipZW.y;
}
float calcClip( vec3 cameraPos ){
return dot( vec4( cameraPos, 1.0 ), vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );
}
void main(){
vec3 ray_target = w.xyz / w.w;
vec3 base = base_radius.xyz; float vRadius = base_radius.w; vec3 end = end_b.xyz; float b = end_b.w;
vec3 ray_origin = vec3(0.0); vec3 ortho_ray_direction = vec3(0.0, 0.0, 1.0); vec3 persp_ray_direction = normalize(ray_origin - ray_target);
vec3 ray_direction = mix(persp_ray_direction, ortho_ray_direction, ortho);

mat3 basis = mat3( U, V, axis );
vec3 diff = ray_target - 0.5 * (base + end);

vec3 P = diff * basis;
float dz = dot( axis, ray_direction );
float radius2 = vRadius*vRadius;
vec3 D = vec3(dot(U, ray_direction),
dot(V, ray_direction),
dz);
float a0 = P.x*P.x + P.y*P.y - radius2;
float a1 = P.x*D.x + P.y*D.y;
float a2 = D.x*D.x + D.y*D.y;
float d = a1*a1 - a0*a2;
if (d < 0.0) {
discard;
}
float dist = (-a1 + sqrt(d)) / a2;
vec3 surface_point = ray_target + dist * ray_direction;
vec3 base_to_surface = surface_point - base;
vec3 _normal = normalize( base_to_surface - axis * dot(base_to_surface, axis) );
float base_cap_test = dot( base_to_surface, axis );
float end_cap_test = dot((surface_point - end), axis);
#ifndef CAP
vec3 new_point2 = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;
vec3 tmp_point2 = new_point2 - base;
#endif
if (base_cap_test < 0.0) {
float dNV;
float near;
vec3 front_point;
if ( ortho == 1.0 ) {
front_point = ray_target;
} else {
dNV = dot(-axis, ray_direction);
near = dot(-axis, (base)) / dNV;
front_point = ray_direction * near + ray_origin;
}
if (dot(front_point - base, front_point-base) > radius2) {
discard;
}
#ifdef CAP
surface_point = front_point;
_normal = axis;
#else
surface_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;
dNV = dot(-axis, ray_direction);
near = dot(axis, end) / dNV;
new_point2 = ray_direction * near + ray_origin;
if (dot(new_point2 - end, new_point2-base) < radius2) {
discard;
}
interior = true;
#endif
}
if( end_cap_test > 0.0 )
{
float dNV;
float near;
vec3 end_point;
if ( ortho == 1.0 ) {
end_point = ray_target;
} else {
dNV = dot(axis, ray_direction);
if (dNV < 0.0) {
discard;
}
near = dot(axis, end) / dNV;
end_point = ray_direction * near + ray_origin;
}

if( dot(end_point - end, end_point-base) > radius2 ) {
discard;
}
#ifdef CAP
surface_point = end_point;
_normal = axis;
#else
surface_point = ray_target + ( (-a1 - sqrt(d)) / a2 ) * ray_direction;
dNV = dot(-axis, ray_direction);
near = dot(-axis, (base)) / dNV;
new_point2 = ray_direction * near + ray_origin;
if (dot(new_point2 - base, new_point2-base) < radius2) {
discard;
}
interior = true;
#endif
}
gl_FragDepthEXT = calcDepth( surface_point );

#ifdef NEAR_CLIP
if( calcClip( surface_point ) > 0.0 ){
dist = (-a1 - sqrt(d)) / a2;
surface_point = ray_target + dist * ray_direction;
if( calcClip( surface_point ) > 0.0 ) {
discard;
}
interior = true;
gl_FragDepthEXT = calcDepth( surface_point );
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / vRadius ) );
}
}else if( gl_FragDepthEXT <= 0.0 ){
dist = (-a1 - sqrt(d)) / a2;
surface_point = ray_target + dist * ray_direction;
interior = true;
gl_FragDepthEXT = calcDepth( surface_point );
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );
}
}
#else
if( gl_FragDepthEXT <= 0.0 ){
dist = (-a1 - sqrt(d)) / a2;
surface_point = ray_target + dist * ray_direction;
interior = true;
gl_FragDepthEXT = calcDepth( surface_point );
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / vRadius );
}
}
#endif
if (gl_FragDepthEXT < 0.0) {
discard;
}
if (gl_FragDepthEXT > 1.0) {
discard;
}
#ifdef PICKING
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
vec3 vViewPosition = -surface_point;
vec3 vNormal = _normal;
vec3 vColor;
if( distSq3( surface_point, end ) < distSq3( surface_point, base ) ){
if( b < 0.0 ){
vColor = vColor1;
}else{
vColor = vColor2;
}
}else{
if( b > 0.0 ){
vColor = vColor1;
}else{
vColor = vColor2;
}
}
vec4 diffuseColor = vec4( diffuse, opacity );
ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
vec3 totalEmissiveLight = emissive;
#include color_fragment
#include roughnessmap_fragment
#include metalnessmap_fragment
vec3 normal = normalize( vNormal );
vec3 geometryNormal = normal;
#include lights_physical_fragment
#include lights_fragment_begin
#include lights_fragment_end
vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;
if( interior ){
#ifdef USE_INTERIOR_COLOR
outgoingLight.xyz = interiorColor;
#else
#ifdef DIFFUSE_INTERIOR
outgoingLight.xyz = vColor;
#endif
#endif
outgoingLight.xyz *= 1.0 - interiorDarkening;
}
gl_FragColor = vec4( outgoingLight, diffuseColor.a );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);const xat=new Float32Array([-1,1,-1,-1,-1,-1,1,1,-1,1,1,1,1,-1,-1,1,-1,1]),_at=new Uint16Array([0,1,2,1,4,2,2,4,3,4,5,3]);class rV extends mB{constructor(t,n={}){super("v3",t,n)}get mapping(){return xat}get mappingIndices(){return _at}get mappingIndicesSize(){return 12}get mappingSize(){return 6}get mappingItemSize(){return 3}}const lie=Object.assign({openEnded:!1},eo),wat=Object.assign({openEnded:{updateShader:!0}},Nh);class Sat extends rV{constructor(t,n={}){super(t,n),this.parameterTypes=wat,this.isImpostor=!0,this.vertexShader="CylinderImpostor.vert",this.fragmentShader="CylinderImpostor.frag",this.addUniforms({modelViewMatrixInverse:{value:new lt},ortho:{value:0}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},radius:{type:"f",value:null}}),this.setAttributes(t),this.makeMapping()}get defaultParameters(){return lie}getDefines(t){const n=rV.prototype.getDefines.call(this,t);return this.parameters.openEnded||(n.CAP=1),n}}Object.assign({disableImpostor:!1},_B,lie);const Bc=class{constructor(e,t={}){return!e.color2&&e.color&&(e.color2=e.color),!ll||t&&t.disableImpostor?new aie(e,t):new Sat(e,t)}};us.add("cylinder",Bc);class Cat extends Ei{constructor(t,n,r){super(t,n,r),this.type="axes",this.parameters=Object.assign({radiusSize:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,radialSegments:!0,disableImpostor:!0,showAxes:{type:"boolean",rebuild:!0},showBox:{type:"boolean",rebuild:!0}},this.parameters,{assembly:null}),this.init(r)}init(t){const n=t||{};n.radiusSize=re(n.radiusSize,.5),n.colorValue=re(n.colorValue,"lightgreen"),n.useInteriorColor=re(n.useInteriorColor,!0),this.showAxes=re(n.showAxes,!0),this.showBox=re(n.showBox,!1),super.init(n)}getPrincipalAxes(){let t;const n=this.getAssembly();return n&&(t=n.partList[0].getSelection()),this.structureView.getPrincipalAxes(t)}getAxesData(t){const n=this.getPrincipalAxes(),r=new ht(this.colorValue);let i=0,o=0;this.showAxes&&(i+=6,o+=3),this.showBox&&(i+=8,o+=12);const s=new Float32Array(3*i),a=En(i,r.r,r.g,r.b),l=rs(i,this.radiusSize),c=new Float32Array(3*o),u=new Float32Array(3*o),d=En(o,r.r,r.g,r.b),f=rs(o,this.radiusSize);let h=0;if(this.showAxes){const g=function(v,m){v.toArray(s,2*h),m.toArray(s,2*h+3),v.toArray(c,h),m.toArray(u,h),h+=3};g(n.begA,n.endA),g(n.begB,n.endB),g(n.begC,n.endC)}if(this.showBox){const g=new W,{d1a:v,d2a:m,d3a:y,d1b:b,d2b:_,d3b:x}=n.getProjectedScaleForAtoms(t);let w=2*h;const S=function(T,O,R){g.copy(n.center).addScaledVector(n.normVecA,T).addScaledVector(n.normVecB,O).addScaledVector(n.normVecC,R),g.toArray(s,w),w+=3};S(v,m,y),S(v,m,x),S(v,_,x),S(v,_,y),S(b,_,x),S(b,_,y),S(b,m,y),S(b,m,x);let C=h;const A=function(T,O){g.fromArray(s,2*h+3*T).toArray(c,C),g.fromArray(s,2*h+3*O).toArray(u,C),C+=3};A(0,1),A(0,3),A(0,6),A(1,2),A(1,7),A(2,3),A(2,4),A(3,5),A(4,5),A(4,7),A(5,6),A(6,7)}const p=new bot(n);return{vertex:{position:s,color:a,radius:l,picking:p},edge:{position1:c,position2:u,color:d,color2:d,radius:f,picking:p}}}create(){const t=this.getAxesData(this.structureView);this.sphereBuffer=new gd(t.vertex,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),this.cylinderBuffer=new Bc(t.edge,this.getBufferParams({openEnded:!0,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bufferList:[this.sphereBuffer,this.cylinderBuffer]})}createData(t){}updateData(t,n){const r=this.getAxesData(n.sview),i={},o={};t&&!t.position||(Object.assign(i,{position:r.vertex.position}),Object.assign(o,{position1:r.edge.position1,position2:r.edge.position2})),t&&!t.color||(Object.assign(i,{color:r.vertex.color}),Object.assign(o,{color:r.edge.color,color2:r.edge.color})),t&&!t.radius||(Object.assign(i,{radius:r.vertex.radius}),Object.assign(o,{radius:r.edge.radius})),this.sphereBuffer.setAttributes(i),this.cylinderBuffer.setAttributes(o)}}Zn.add("axes",Cat);class qE extends Ei{constructor(t,n,r){super(t,n,r),this.type="ball+stick",this.parameters=Object.assign({sphereDetail:!0,radialSegments:!0,openEnded:!0,disableImpostor:!0,aspectRatio:{type:"number",precision:1,max:10,min:1},lineOnly:{type:"boolean",rebuild:!0},cylinderOnly:{type:"boolean",rebuild:!0},multipleBond:{type:"select",rebuild:!0,options:{off:"off",symmetric:"symmetric",offset:"offset"}},bondScale:{type:"number",precision:2,max:1,min:.01},bondSpacing:{type:"number",precision:2,max:2,min:.5},linewidth:{type:"integer",max:50,min:1,buffer:!0}},this.parameters),this.init(r)}init(t){var n=t||{};n.radiusType=re(n.radiusType,"size"),n.radiusSize=re(n.radiusSize,.15),n.useInteriorColor=re(n.useInteriorColor,!0),this.aspectRatio=re(n.aspectRatio,2),this.lineOnly=re(n.lineOnly,!1),this.cylinderOnly=re(n.cylinderOnly,!1),this.multipleBond=re(n.multipleBond,"off"),this.bondSpacing=re(n.bondSpacing,1),this.bondScale=re(n.bondScale,.4),this.linewidth=re(n.linewidth,2),super.init(n)}getAtomRadius(t){return this.aspectRatio*super.getAtomRadius(t)}getAtomParams(t,n){var r=super.getAtomParams(t,n);return r.radiusParams.scale*=this.aspectRatio,r}getAtomData(t,n,r){return t.getAtomData(this.getAtomParams(n,r))}getBondParams(t,n){return n=Object.assign({multipleBond:this.multipleBond,bondSpacing:this.bondSpacing,bondScale:this.bondScale},n),super.getBondParams(t,n)}getBondData(t,n,r){return t.getBondData(this.getBondParams(n,r))}createData(t){const n=[];if(this.lineOnly)this.lineBuffer=new Mc(this.getBondData(t,{position:!0,color:!0,picking:!0}),this.getBufferParams({linewidth:this.linewidth})),n.push(this.lineBuffer);else{const r=new Bc(this.getBondData(t),this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}));if(n.push(r),!this.cylinderOnly){const i=new gd(this.getAtomData(t),this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0}));n.push(i)}}return{bufferList:n}}updateData(t,n){this.multipleBond!=="off"&&t&&t.radius&&(t.position=!0);const r=this.getBondData(n.sview,t);if(this.lineOnly){const a={};t&&!t.position||Object.assign(a,{position1:r.position1,position2:r.position2}),t&&!t.color||Object.assign(a,{color:r.color,color2:r.color2}),n.bufferList[0].setAttributes(a)}else{var i={};if(t&&!t.position||Object.assign(i,{position1:r.position1,position2:r.position2}),t&&!t.color||Object.assign(i,{color:r.color,color2:r.color2}),t&&!t.radius||Object.assign(i,{radius:r.radius}),n.bufferList[0].setAttributes(i),!this.cylinderOnly){var o=this.getAtomData(n.sview,t),s={};t&&!t.position||Object.assign(s,{position:o.position}),t&&!t.color||Object.assign(s,{color:o.color}),t&&!t.radius||Object.assign(s,{radius:o.radius}),n.bufferList[1].setAttributes(s)}}}setParameters(t={}){let n=!1;const r={};return(t.aspectRatio||t.bondSpacing||t.bondScale)&&(Object.assign(r,{radius:!0}),ll&&!this.disableImpostor||(n=!0)),super.setParameters(t,r,n),this}}Zn.add("ball+stick",qE);class Aat extends qE{constructor(t,n,r){super(t,n,r),this.type="backbone",this.parameters=Object.assign({},this.parameters,{multipleBond:null,bondSpacing:null}),this.init(r)}init(t){var n=t||{};n.aspectRatio=re(n.aspectRatio,1),n.radiusSize=re(n.radiusSize,.25),super.init(n)}getAtomRadius(t){return t.isTrace()?super.getAtomRadius(t):0}getAtomData(t,n,r){return t.getBackboneAtomData(this.getAtomParams(n,r))}getBondData(t,n,r){return t.getBackboneBondData(this.getBondParams(n,r))}}Zn.add("backbone",Aat);class Pat extends qE{constructor(t,n,r){super(t,n,r),this.type="base",this.parameters=Object.assign({},this.parameters,{multipleBond:null,bondSpacing:null})}init(t){let n=t||{};n.aspectRatio=re(n.aspectRatio,1),n.radiusSize=re(n.radiusSize,.3),super.init(n)}getAtomData(t,n,r){return t.getRungAtomData(this.getAtomParams(n,r))}getBondData(t,n,r){let i=this.getBondParams(n,r);return Object.assign(i.colorParams,{rung:!0}),t.getRungBondData(i)}}Zn.add("base",Pat);class Mat{constructor(t,n){this.m=t,this.tension=n,this.dt=1/this.m,this.delta=1e-4,this.vec1=new W,this.vec2=new W,this.vDir=new W,this.vTan=new W,this.vNorm=new W,this.vBin=new W,this.m2=Math.ceil(this.m/2)}interpolateToArr(t,n,r,i,o,s,a){s[a+0]=ql(t.x,n.x,r.x,i.x,o,this.tension),s[a+1]=ql(t.y,n.y,r.y,i.y,o,this.tension),s[a+2]=ql(t.z,n.z,r.z,i.z,o,this.tension)}interpolateToVec(t,n,r,i,o,s){s.x=ql(t.x,n.x,r.x,i.x,o,this.tension),s.y=ql(t.y,n.y,r.y,i.y,o,this.tension),s.z=ql(t.z,n.z,r.z,i.z,o,this.tension)}interpolatePosition(t,n,r,i,o,s){for(var a=0;a<this.m;++a){var l=s+3*a,c=this.dt*a;this.interpolateToArr(t,n,r,i,c,o,l)}}interpolateTangent(t,n,r,i,o,s){for(var a=0;a<this.m;++a){var l=this.dt*a,c=l-this.delta,u=l+this.delta,d=s+3*a;c<0&&(c=0),u>1&&(u=1),this.interpolateToVec(t,n,r,i,c,this.vec1),this.interpolateToVec(t,n,r,i,u,this.vec2),this.vec2.sub(this.vec1).normalize(),this.vec2.toArray(o,d)}}vectorSubdivide(t,n,r,i,o){let s,a=n.next(),l=n.next(),c=n.next();const u=n.size,d=u-1;let f=i||0;for(let h=0;h<d;++h)s=a,a=l,l=c,c=n.next(),t.apply(this,[s,a,l,c,r,f]),f+=3*this.m;o&&(s=n.get(u-2),a=n.get(u-1),l=n.get(0),c=n.get(1),t.apply(this,[s,a,l,c,r,f]),f+=3*this.m)}getPosition(t,n,r,i){t.reset(),this.vectorSubdivide(this.interpolatePosition,t,n,r,i);var o=t.size-1,s=o*this.m*3;i&&(s+=3*this.m);var a=t.get(i?0:o);n[s]=a.x,n[s+1]=a.y,n[s+2]=a.z}getTangent(t,n,r,i){t.reset(),this.vectorSubdivide(this.interpolateTangent,t,n,r,i);let o=(t.size-1)*this.m*3;i&&(o+=3*this.m),Vr(n,n,o-3,o,3)}interpolateNormalDir(t,n,r,i,o,s,a,l,c,u,d,f,h){for(let p=0;p<this.m;++p){let g=f+3*p;h&&(g+=3*this.m2);const v=this.dt*p;this.interpolateToVec(t,n,r,i,v,this.vec1),this.interpolateToVec(o,s,a,l,v,this.vec2),this.vDir.subVectors(this.vec2,this.vec1).normalize(),this.vTan.fromArray(c,g),this.vBin.crossVectors(this.vDir,this.vTan).normalize(),this.vBin.toArray(d,g),this.vNorm.crossVectors(this.vTan,this.vBin).normalize(),this.vNorm.toArray(u,g)}}interpolateNormal(t,n,r,i,o){for(var s=0;s<this.m;++s){var a=o+3*s;t.copy(this.vNorm),this.vTan.fromArray(n,a),this.vBin.crossVectors(t,this.vTan).normalize(),this.vBin.toArray(i,a),this.vNorm.crossVectors(this.vTan,this.vBin).normalize(),this.vNorm.toArray(r,a)}}getNormal(t,n,r,i,o,s){this.vNorm.set(0,0,1);const a=t-1;let l=o||0;for(var c=0;c<a;++c)this.interpolateNormal(this.vDir,n,r,i,l),l+=3*this.m;s&&(this.interpolateNormal(this.vDir,n,r,i,l),l+=3*this.m),this.vBin.toArray(i,l),this.vNorm.toArray(r,l)}getNormalDir(t,n,r,i,o,s,a,l){t.reset(),n.reset();const c=new W,u=new W,d=new W,f=new W,h=new W,p=new W().copy(t.next()),g=new W().copy(t.next()),v=new W().copy(t.next()),m=new W,y=new W().copy(n.next()),b=new W().copy(n.next()),_=new W().copy(n.next());this.vNorm.set(0,0,1);let x=t.size,w=x-1,S=s||0;for(var C=0;C<w;++C)h.copy(p),p.copy(g),g.copy(v),v.copy(t.next()),m.copy(y),y.copy(b),b.copy(_),_.copy(n.next()),C===0?(c.subVectors(m,h),u.subVectors(y,p),c.dot(u)<0&&(u.multiplyScalar(-1),y.addVectors(p,u)),d.subVectors(b,g),u.dot(d)<0&&(d.multiplyScalar(-1),b.addVectors(g,d))):d.copy(f),f.subVectors(_,v),d.dot(f)<0&&(f.multiplyScalar(-1),_.addVectors(v,f)),this.interpolateNormalDir(h,p,g,v,m,y,b,_,r,i,o,S,l),S+=3*this.m;if(a&&(h.copy(t.get(x-2)),p.copy(t.get(x-1)),g.copy(t.get(0)),v.copy(t.get(1)),m.copy(n.get(x-2)),y.copy(n.get(x-1)),b.copy(n.get(0)),_.copy(n.get(1)),d.copy(f),f.subVectors(_,v),d.dot(f)<0&&(f.multiplyScalar(-1),_.addVectors(v,f)),this.interpolateNormalDir(h,p,g,v,m,y,b,_,r,i,o,S,l),S+=3*this.m),l){this.vBin.fromArray(o,3*this.m2),this.vNorm.fromArray(i,3*this.m2);for(var A=0;A<this.m2;++A)this.vBin.toArray(o,3*A),this.vNorm.toArray(i,3*A)}else this.vBin.toArray(o,S),this.vNorm.toArray(i,S)}interpolateColor(t,n,r,i,o){var s,a;for(s=0;s<this.m2;++s)a=o+3*s,r.apply(this,[t,i,a]);for(s=this.m2;s<this.m;++s)a=o+3*s,r.apply(this,[n,i,a])}getColor(t,n,r,i,o){let s;t.reset(),t.next();let a=t.next();for(var l=t.size,c=l-1,u=i||0,d=0;d<c;++d)s=a,a=t.next(),this.interpolateColor(s,a,n,r,u),u+=3*this.m;o&&(s=t.get(l-1),a=t.get(0),this.interpolateColor(s,a,n,r,u),u+=3*this.m),r[u]=r[u-3],r[u+1]=r[u-2],r[u+2]=r[u-1]}interpolatePicking(t,n,r,i,o){var s;for(s=0;s<this.m2;++s)i[o+s]=r.apply(this,[t]);for(s=this.m2;s<this.m;++s)i[o+s]=r.apply(this,[n])}getPicking(t,n,r,i,o){let s;t.reset(),t.next();let a=t.next();const l=t.size,c=l-1;let u=i||0;for(var d=0;d<c;++d)s=a,a=t.next(),this.interpolatePicking(s,a,n,r,u),u+=this.m;o&&(s=t.get(l-1),a=t.get(0),this.interpolatePicking(s,a,n,r,u),u+=this.m),r[u]=r[u-1]}interpolateSize(t,n,r,i,o){const s=r.apply(this,[t]),a=r.apply(this,[n]);for(let l=0;l<this.m;++l){let c=l/this.m;i[o+l]=(1-c)*s+c*a}}getSize(t,n,r,i,o){let s;t.reset(),t.next();let a=t.next();const l=t.size,c=l-1;let u=i||0;for(var d=0;d<c;++d)s=a,a=t.next(),this.interpolateSize(s,a,n,r,u),u+=this.m;o&&(s=t.get(l-1),a=t.get(0),this.interpolateSize(s,a,n,r,u),u+=this.m),r[u]=r[u-1]}}class Lg{constructor(t,n){this.polymer=t,this.size=t.residueCount;var r=n||{};this.directional=r.directional||!1,this.positionIterator=r.positionIterator||!1,this.subdiv=r.subdiv||1,this.smoothSheet=r.smoothSheet||!1,r.tension?this.tension=r.tension:this.tension=this.polymer.isNucleic()?.5:.9,this.interpolator=new Mat(this.subdiv,this.tension)}getAtomIterator(t,n){const r=this.polymer,i=r.structure,o=r.residueCount;let s=0,a=-1;const l=[i.getAtomProxy(),i.getAtomProxy(),i.getAtomProxy(),i.getAtomProxy()],c=[new W,new W,new W,new W];var u=i.getAtomProxy(),d=i.getAtomProxy();function f(h){var p=l[s%4];if(p.index=r.getAtomIndexByType(h,t),n&&h>0&&h<o&&p.sstruc==="e"){var g=c[s%4];return u.index=r.getAtomIndexByType(h+1,t),d.index=r.getAtomIndexByType(h-1,t),g.addVectors(u,d).add(p).add(p).multiplyScalar(.25),s+=1,g}return s+=1,p}return{size:o,next:function(){var h=f(a);return a+=1,h},get:f,reset:function(){s=0,a=-1}}}getSubdividedColor(t){var n=this.subdiv,r=this.polymer,i=(r.residueCount-1)*n*3+3;r.isCyclic&&(i+=3*n);var o=new Float32Array(i),s=this.getAtomIterator("trace"),a=t||{};a.structure=r.structure;var l=Qt.getScheme(a);return this.interpolator.getColor(s,function(c,u,d){l.atomColorToArray(c,u,d)},o,0,r.isCyclic),{color:o}}getSubdividedPicking(){var t=this.subdiv,n=this.polymer,r=(n.residueCount-1)*t+1;n.isCyclic&&(r+=t);var i=n.structure,o=this.getAtomIterator("trace"),s=new Float32Array(r);return this.interpolator.getPicking(o,function(a){return a.index},s,0,n.isCyclic),{picking:new Bh(s,i)}}getSubdividedPosition(){return{position:this.getPosition()}}getSubdividedOrientation(){const t=this.getTangent(),n=this.getNormals(t);return{tangent:t,normal:n.normal,binormal:n.binormal}}getSubdividedSize(t){var n=this.subdiv,r=this.polymer,i=(r.residueCount-1)*n+1;r.isCyclic&&(i+=n);var o=new Float32Array(i),s=this.getAtomIterator("trace"),a=new Pc(t);return this.interpolator.getSize(s,function(l){return a.atomRadius(l)},o,0,r.isCyclic),{size:o}}getPosition(){const t=this.subdiv,n=this.polymer;let r=(n.residueCount-1)*t*3+3;n.isCyclic&&(r+=3*t);const i=new Float32Array(r),o=this.positionIterator||this.getAtomIterator("trace",this.smoothSheet);return this.interpolator.getPosition(o,i,0,n.isCyclic),i}getTangent(){const t=this.subdiv,n=this.polymer;let r=(this.size-1)*t*3+3;n.isCyclic&&(r+=3*t);const i=new Float32Array(r),o=this.positionIterator||this.getAtomIterator("trace",this.smoothSheet);return this.interpolator.getTangent(o,i,0,n.isCyclic),i}getNormals(t){const n=this.subdiv,r=this.polymer,i=r.isProtein(),o=this.size;let s=(o-1)*n*3+3;r.isCyclic&&(s+=3*n);const a=new Float32Array(s),l=new Float32Array(s);if(this.directional&&!this.polymer.isCg()){const c=this.getAtomIterator("direction1"),u=this.getAtomIterator("direction2");this.interpolator.getNormalDir(c,u,t,a,l,0,r.isCyclic,i)}else this.interpolator.getNormal(o,t,a,l,0,r.isCyclic);return{normal:a,binormal:l}}}const iV=new W,Aw=new W,Eat=Object.assign({radialSegments:4,capped:!1,aspectRatio:1},eo);class Tat extends Ac{constructor(t,n={}){super(function(r,i={}){const o=re(i.radialSegments,4),s=re(i.capped,!1),a=s?o:0,l=s?o-2:0,c=r.position.length/3,u=c*o*3+2*a*3,d=2*(c-1)*o*3+2*l*3;return{position:new Float32Array(u),color:new Float32Array(u),index:bl(d,u/3),normal:new Float32Array(u),picking:r.picking}}(t,n),n),this.capVertices=this.parameters.capped?this.parameters.radialSegments:0,this.capTriangles=this.parameters.capped?this.parameters.radialSegments-2:0,this.size2=t.position.length/3,t.primitiveId=gv(this.size2),this.setAttributes(t),this.makeIndex()}get defaultParameters(){return Eat}setAttributes(t={}){const n=this.parameters.aspectRatio,r=this.size2,i=r-1,o=this.parameters.radialSegments,s=this.geometry.attributes;let a,l,c,u,d,f,h,p,g,v,m,y,b;t.position&&(a=t.position,l=t.normal,c=t.binormal,u=t.tangent,f=t.size,p=s.position.array,v=s.normal.array,s.position.needsUpdate=!0,s.normal.needsUpdate=!0),t.color&&(d=t.color,g=s.color.array,s.color.needsUpdate=!0),t.primitiveId&&(h=t.primitiveId,m=s.primitiveId.array,s.primitiveId.needsUpdate=!0);let _=0,x=0,w=0,S=0,C=0,A=0,T=0,O=0,R=0,L=0;const D=[],$=[],z=[],H=[],B=[],V=[];if(a)for(let J=0;J<o;++J){const K=J/o*2*Math.PI;D[J]=n*Math.cos(K),$[J]=Math.sin(K),z[J]=n*Math.cos(K-.01),H[J]=Math.sin(K-.01),B[J]=n*Math.cos(K+.01),V[J]=Math.sin(K+.01)}for(let J=0;J<r;++J){y=3*J,b=y*o,a&&u&&l&&c&&f&&(iV.set(u[y],u[y+1],u[y+2]),x=l[y],w=l[y+1],S=l[y+2],C=c[y],A=c[y+1],T=c[y+2],O=a[y],R=a[y+1],L=a[y+2],_=f[J]);for(let K=0;K<o;++K){const ie=b+3*K;if(a){const ce=-_*D[K],pe=_*$[K],se=-_*z[K],G=_*H[K],he=-_*B[K],Z=_*V[K];p[ie]=O+ce*x+pe*C,p[ie+1]=R+ce*w+pe*A,p[ie+2]=L+ce*S+pe*T,Aw.set(he*x+Z*C-(se*x+G*C),he*w+Z*A-(se*w+G*A),he*S+Z*T-(se*S+G*T)).cross(iV),v[ie]=Aw.x,v[ie+1]=Aw.y,v[ie+2]=Aw.z}d&&(g[ie]=d[y],g[ie+1]=d[y+1],g[ie+2]=d[y+2]),h&&(m[J*o+K]=h[J])}}y=0,b=3*r*o;for(let J=0;J<o;++J){const K=y+3*J,ie=b+3*J;a&&u&&(p[ie]=p[K],p[ie+1]=p[K+1],p[ie+2]=p[K+2],v[ie]=u[y],v[ie+1]=u[y+1],v[ie+2]=u[y+2]),d&&(g[ie]=g[K],g[ie+1]=g[K+1],g[ie+2]=g[K+2]),h&&(m[r*o+J]=m[0+J])}y=3*(r-1)*o,b=3*(r+1)*o;for(let J=0;J<o;++J){const K=y+3*J,ie=b+3*J;a&&u&&(p[ie]=p[K],p[ie+1]=p[K+1],p[ie+2]=p[K+2],v[ie]=u[3*i],v[ie+1]=u[3*i+1],v[ie+2]=u[3*i+2]),d&&(g[ie]=g[K],g[ie+1]=g[K+1],g[ie+2]=g[K+2]),h&&(m[(r+1)*o+J]=m[(r-1)*o+J])}}makeIndex(){const t=this.geometry.getIndex();if(!t)return void Ve.error("Index is null");const n=t.array,r=this.size2,i=r-1,o=this.capTriangles,s=this.parameters.radialSegments,a=this.parameters.radialSegments+1;let l,c;for(let d=0;d<i;++d){const f=d*s*3*2,h=d*s,p=(d+1)*s;for(let g=0;g<s;++g)c=f+3*g*2,n[c]=h+g,n[c+1]=h+(g+1)%s,n[c+2]=p+g,n[c+3]=p+g,n[c+4]=h+(g+1)%s,n[c+5]=p+(g+1)%s}const u=[0];for(let d=1;d<a/2;++d)u.push(d),s-d!==d&&u.push(s-d);c=i*s*3*2,l=r*s;for(let d=0;d<u.length-2;++d)d%2==0?(n[c+3*d+0]=l+u[d+0],n[c+3*d+1]=l+u[d+1],n[c+3*d+2]=l+u[d+2]):(n[c+3*d+0]=l+u[d+2],n[c+3*d+1]=l+u[d+1],n[c+3*d+2]=l+u[d+0]);c=i*s*3*2+3*o,l=r*s+s;for(let d=0;d<u.length-2;++d)d%2==0?(n[c+3*d+0]=l+u[d+0],n[c+3*d+1]=l+u[d+1],n[c+3*d+2]=l+u[d+2]):(n[c+3*d+0]=l+u[d+2],n[c+3*d+1]=l+u[d+1],n[c+3*d+2]=l+u[d+0])}}class wB extends Ei{constructor(t,n,r){super(t,n,r),this.type="cartoon",this.parameters=Object.assign({aspectRatio:{type:"number",precision:1,max:10,min:1,rebuild:!0},subdiv:{type:"integer",max:50,min:1,rebuild:!0},radialSegments:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},capped:{type:"boolean",rebuild:!0},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters),this.init(r)}init(t){var n=t||{};n.colorScheme=re(n.colorScheme,"chainname"),n.colorScale=re(n.colorScale,"RdYlBu"),n.radiusType=re(n.radiusType,"sstruc"),n.radiusScale=re(n.radiusScale,.7),n.useInteriorColor=re(n.useInteriorColor,!0),this.aspectRatio=re(n.aspectRatio,5),this.tension=re(n.tension,NaN),this.capped=re(n.capped,!0),this.smoothSheet=re(n.smoothSheet,!1),n.quality==="low"?(this.subdiv=3,this.radialSegments=6):n.quality==="medium"?this.subdiv=6:n.quality==="high"?this.subdiv=12:this.subdiv=re(n.subdiv,6),super.init(n)}getSplineParams(t){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:this.aspectRatio!==1,smoothSheet:this.smoothSheet},t)}getSpline(t){return new Lg(t,this.getSplineParams())}getAspectRatio(t){return t.isCg()?1:this.aspectRatio}getAtomRadius(t){return t.isTrace()?super.getAtomRadius(t):0}createData(t){let n=[],r=[];return this.structure.eachPolymer(i=>{if(i.residueCount<4)return;r.push(i);const o=this.getSpline(i),s=this.getAspectRatio(i),a=o.getSubdividedPosition(),l=o.getSubdividedOrientation(),c=o.getSubdividedColor(this.getColorParams()),u=o.getSubdividedPicking(),d=o.getSubdividedSize(this.getRadiusParams());n.push(new Tat(Object.assign({},a,l,c,u,d),this.getBufferParams({radialSegments:this.radialSegments,aspectRatio:s,capped:this.capped})))},t.getSelection()),{bufferList:n,polymerList:r}}updateData(t,n){Je&&Ve.time(this.type+" repr update"),t=t||{};for(var r=0,i=n.polymerList.length;r<i;++r){var o={},s=n.polymerList[r],a=this.getSpline(s),l=this.getAspectRatio(s);if(Object.assign(n.bufferList[r],{aspectRatio:l}),t.position||t.radius){var c=a.getSubdividedPosition(),u=a.getSubdividedOrientation(),d=a.getSubdividedSize(this.getRadiusParams(l));o.position=c.position,o.normal=u.normal,o.binormal=u.binormal,o.tangent=u.tangent,o.size=d.size}if(t.color){var f=a.getSubdividedColor(this.getColorParams());o.color=f.color}if(t.picking){var h=a.getSubdividedPicking();o.picking=h.picking}n.bufferList[r].setAttributes(o)}Je&&Ve.timeEnd(this.type+" repr update")}setParameters(t){var n={};return t&&t.aspectRatio&&(n.radius=!0),t&&t.tension&&(n.position=!0),super.setParameters(t,n,!1),this}}Zn.add("cartoon",wB);class Oat extends Ei{constructor(t,n,r){super(t,n,r),this.type="contact",this.parameters=Object.assign({hydrogenBond:{type:"boolean",rebuild:!0},weakHydrogenBond:{type:"boolean",rebuild:!0},waterHydrogenBond:{type:"boolean",rebuild:!0},backboneHydrogenBond:{type:"boolean",rebuild:!0},hydrophobic:{type:"boolean",rebuild:!0},halogenBond:{type:"boolean",rebuild:!0},ionicInteraction:{type:"boolean",rebuild:!0},metalCoordination:{type:"boolean",rebuild:!0},cationPi:{type:"boolean",rebuild:!0},piStacking:{type:"boolean",rebuild:!0},filterSele:{type:"text",rebuild:!0},labelVisible:{type:"boolean",rebuild:!0},labelFixedSize:{type:"boolean",buffer:"fixedSize"},labelSize:{type:"number",precision:3,max:10,min:.001,rebuild:!0},labelUnit:{type:"select",rebuild:!0,options:{"":"",angstrom:"angstrom",nm:"nm"}},maxHydrophobicDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondSulfurDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHbondAccAngle:{type:"integer",max:180,min:0,rebuild:!0},maxHbondDonAngle:{type:"integer",max:180,min:0,rebuild:!0},maxHbondAccPlaneAngle:{type:"integer",max:90,min:0,rebuild:!0},maxHbondDonPlaneAngle:{type:"integer",max:90,min:0,rebuild:!0},maxPiStackingDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxPiStackingOffset:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxPiStackingAngle:{type:"integer",max:180,min:0,rebuild:!0},maxCationPiDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxCationPiOffset:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxIonicDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHalogenBondDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},maxHalogenBondAngle:{type:"integer",max:180,min:0,rebuild:!0},maxMetalDist:{type:"number",precision:1,max:10,min:.1,rebuild:!0},refineSaltBridges:{type:"boolean",rebuild:!0},masterModelIndex:{type:"integer",max:1e3,min:-1,rebuild:!0},lineOfSightDistFactor:{type:"number",precision:1,max:10,min:0,rebuild:!0},radialSegments:!0,disableImpostor:!0},this.parameters),this.init(r)}init(t){var n=t||{};n.radiusSize=re(n.radiusSize,.05),n.useInteriorColor=re(n.useInteriorColor,!0),this.hydrogenBond=re(n.hydrogenBond,!0),this.weakHydrogenBond=re(n.weakHydrogenBond,!1),this.waterHydrogenBond=re(n.waterHydrogenBond,!1),this.backboneHydrogenBond=re(n.backboneHydrogenBond,!1),this.hydrophobic=re(n.hydrophobic,!1),this.halogenBond=re(n.halogenBond,!0),this.ionicInteraction=re(n.ionicInteraction,!0),this.metalCoordination=re(n.metalCoordination,!0),this.cationPi=re(n.cationPi,!0),this.piStacking=re(n.piStacking,!0),this.filterSele=re(n.filterSele,""),this.labelVisible=re(n.labelVisible,!1),this.labelFixedSize=re(n.labelFixedSize,!1),this.labelSize=re(n.labelSize,2),this.labelUnit=re(n.labelUnit,""),this.maxHydrophobicDist=re(n.maxHydrophobicDist,4),this.maxHbondDist=re(n.maxHbondDist,3.5),this.maxHbondSulfurDist=re(n.maxHbondSulfurDist,4.1),this.maxHbondAccAngle=re(n.maxHbondAccAngle,45),this.maxHbondDonAngle=re(n.maxHbondDonAngle,45),this.maxHbondAccPlaneAngle=re(n.maxHbondAccPlaneAngle,90),this.maxHbondDonPlaneAngle=re(n.maxHbondDonPlaneAngle,30),this.maxPiStackingDist=re(n.maxPiStackingDist,5.5),this.maxPiStackingOffset=re(n.maxPiStackingOffset,2),this.maxPiStackingAngle=re(n.maxPiStackingAngle,30),this.maxCationPiDist=re(n.maxCationPiDist,6),this.maxCationPiOffset=re(n.maxCationPiOffset,2),this.maxIonicDist=re(n.maxIonicDist,5),this.maxHalogenBondDist=re(n.maxHalogenBondDist,3.5),this.maxHalogenBondAngle=re(n.maxHalogenBondAngle,30),this.maxMetalDist=re(n.maxMetalDist,3),this.refineSaltBridges=re(n.refineSaltBridges,!0),this.masterModelIndex=re(n.masterModelIndex,-1),this.lineOfSightDistFactor=re(n.lineOfSightDistFactor,1),super.init(n)}getAtomRadius(){return 0}getContactData(t){const n={maxHydrophobicDist:this.maxHydrophobicDist,maxHbondDist:this.maxHbondDist,maxHbondSulfurDist:this.maxHbondSulfurDist,maxHbondAccAngle:this.maxHbondAccAngle,maxHbondDonAngle:this.maxHbondDonAngle,maxHbondAccPlaneAngle:this.maxHbondAccPlaneAngle,maxHbondDonPlaneAngle:this.maxHbondDonPlaneAngle,maxPiStackingDist:this.maxPiStackingDist,maxPiStackingOffset:this.maxPiStackingOffset,maxPiStackingAngle:this.maxPiStackingAngle,maxCationPiDist:this.maxCationPiDist,maxCationPiOffset:this.maxCationPiOffset,maxIonicDist:this.maxIonicDist,maxHalogenBondDist:this.maxHalogenBondDist,maxHalogenBondAngle:this.maxHalogenBondAngle,maxMetalDist:this.maxMetalDist,refineSaltBridges:this.refineSaltBridges,masterModelIndex:this.masterModelIndex,lineOfSightDistFactor:this.lineOfSightDistFactor},r={hydrogenBond:this.hydrogenBond,weakHydrogenBond:this.weakHydrogenBond,waterHydrogenBond:this.waterHydrogenBond,backboneHydrogenBond:this.backboneHydrogenBond,hydrophobic:this.hydrophobic,halogenBond:this.halogenBond,ionicInteraction:this.ionicInteraction,metalCoordination:this.metalCoordination,cationPi:this.cationPi,piStacking:this.piStacking,radius:this.radiusSize*this.radiusScale,filterSele:this.filterSele};return yot(mot(t,n),t,r)}createData(t){const n=this.getContactData(t),r=[new Bc(Fit(n),this.getBufferParams({sphereDetail:1,dullInterior:!0,disableImpostor:this.disableImpostor}))];if(this.labelVisible){const i={size:this.labelSize,unit:this.labelUnit};r.push(new xv(function(o,s){const a=cl(o.position1,o.position2),l=[],c=kE(o.position1,o.position2),u=c.length/3;for(let d=0;d<u;d++){const f=3*d,h=Math.sqrt(Math.pow(c[f],2)+Math.pow(c[f+1],2)+Math.pow(c[f+2],2));switch(s.unit){case"angstrom":l[d]=h.toFixed(2)+" Å";break;case"nm":l[d]=(h/10).toFixed(2)+" nm";break;default:l[d]=h.toFixed(2)}}return{position:a,size:rs(a.length/3,s.size),color:o.color,text:l}}(n,i),this.getBufferParams({fixedSize:this.labelFixedSize})))}return{bufferList:r}}}Zn.add("contact",Oat);class Iat extends bB{constructor(t,n,r){super(t,n,r),this.type="dihedral",this.parameters=Object.assign({atomQuad:{type:"hidden",rebuild:!0},extendLine:{type:"boolean",rebuild:!0,default:!0},lineVisible:{type:"boolean",default:!0},planeVisible:{type:"boolean",default:!0},sectorVisible:{type:"boolean",default:!0}},this.parameters),this.init(r)}init(t){const n=t||{};n.side=re(n.side,"double"),n.opacity=re(n.opacity,.5),this.atomQuad=re(n.atomQuad,[]),this.extendLine=re(n.extendLine,!0),this.lineVisible=re(n.lineVisible,!0),this.planeVisible=re(n.planeVisible,!0),this.sectorVisible=re(n.sectorVisible,!0),super.init(n)}createData(t){if(!t.atomCount||!this.atomQuad.length)return;const n=function(a,l={}){const c=re(l.angleStep,Math.PI/90),u=a.length,d=a.length/12,f=new Float32Array(d),h=new Float32Array(3*d),p=new Array(d),g=new Array(d),v=new Array(d),m=new Array(d),y=new Array(d);let b=0,_=0,x=0;const w=Vt(),S=Vt(),C=Vt(),A=Vt(),T=Vt(),O=Vt(),R=Vt(),L=Vt(),D=Vt(),$=Vt(),z=Vt(),H=Vt(),B=Vt(),V=Vt(),J=Vt();let K=0;for(var ie=0;ie<u;ie+=12){if(Hi(w,a,ie),Hi(S,a,ie+3),Hi(C,a,ie+6),Hi(A,a,ie+9),ur(T,w,S),ur(O,C,S),Lu(O)===0)continue;ur(R,A,C),On(L,O,.5),ra(D,S,L),yr(T,T),yr(O,O),yr(R,R),ur(L,w,D);const te=io(L,O)>0;ur(L,A,D);const ve=io(L,O)<0;if(On(L,O,io(O,T)),ur($,T,L),On(L,O,io(O,R)),ur(z,R,L),Lu($)===0||Lu(z)===0)continue;yr($,$),yr(z,z);const ne=f[K]=Nit($,z);p[K]=(yre*ne).toFixed(1)+"°",Ao(V,$,O),yr(V,V),io(V,z)<0&&$E(V,V),ta(L,D,$,V,ne/2),qt(L,h,3*K);const xe=Math.ceil(ne/c),Ce=xe+(l.extendLine?4:2),me=l.extendLine?36:0,X=new Float32Array(3*Ce),Q=new Float32Array(3*Ce),Re=new Float32Array(9*xe),Pe=new Float32Array(me);g[K]=X,v[K]=Q,m[K]=Re,y[K]=Pe,l.extendLine&&(te?(ur(L,w,C),yr(L,L),On(H,L,1/io($,L)),ra(H,H,C)):(On(H,T,1/io($,T)),ra(H,H,S)),ve?(ur(L,A,S),yr(L,L),On(B,L,1/io(z,L)),ra(B,B,S)):(On(B,R,1/io(z,R)),ra(B,B,C))),ra(J,D,$);let le=0;l.extendLine?(qt(w,X,le),qt(H,Q,le),le+=3,qt(H,X,le),qt(J,Q,le),le+=3,qt(H,Pe,0),qt(J,Pe,3),qt(te?C:S,Pe,6),qt(te?C:S,Pe,9),qt(J,Pe,12),qt(D,Pe,15)):(qt(D,X,le),qt(J,Q,le),le+=3);const Oe=function(De,Ee){const Ie=9*Ee;qt(D,Re,Ie),qt(J,Re,Ie+3),qt(J,X,le),ta(J,D,$,V,De),qt(J,Re,Ie+6),qt(J,Q,le),le+=3};let Be=0;for(let De=c;De<ne;De+=c)Oe(De,Be++);Oe(ne,Be++),l.extendLine?(qt(J,X,3*(Ce-2)),qt(B,Q,3*(Ce-2)),qt(B,X,3*(Ce-1)),qt(A,Q,3*(Ce-1)),qt(B,Pe,18),qt(J,Pe,21),qt(ve?S:C,Pe,24),qt(ve?S:C,Pe,27),qt(J,Pe,30),qt(D,Pe,33)):(qt(J,X,le),qt(D,Q,le),le+=3),b+=3*Ce,_+=9*xe,x+=me,K+=1}const ce=K,pe=new Float32Array(b),se=new Float32Array(b),G=new Float32Array(_),he=new Float32Array(x);let Z=0,ae=0,oe=0;for(let te=0;te<ce;te++){const ve=g[te],ne=v[te],xe=m[te],Ce=y[te];Vr(ve,pe,0,Z,ve.length),Vr(ne,se,0,Z,ne.length),Vr(xe,G,0,ae,xe.length),Vr(Ce,he,0,oe,Ce.length),Z+=ve.length,ae+=xe.length,oe+=Ce.length}return{labelPosition:h.subarray(0,3*ce),labelText:p.slice(0,ce),linePosition1:pe,linePosition2:se,planePosition:he,sectorPosition:G}}(xB(t,this.atomQuad),{extendLine:this.extendLine}),r=this.n=n.labelText.length,i=new ht(this.labelColor);this.textBuffer=new xv({position:n.labelPosition,size:rs(r,this.labelSize),color:En(r,i.r,i.g,i.b),text:n.labelText},this.getLabelBufferParams());const o=new ht(this.colorValue);this.lineLength=n.linePosition1.length/3;const s=En(this.lineLength,o.r,o.g,o.b);return this.lineBuffer=new Mc(UL({position1:n.linePosition1,position2:n.linePosition2,color:s,color2:s}),this.getBufferParams({linewidth:this.linewidth,visible:this.lineVisible,opacity:this.lineOpacity})),this.planeLength=n.planePosition.length/3,this.planeBuffer=new Ac({position:n.planePosition,color:En(this.planeLength,o.r,o.g,o.b)},this.getBufferParams({visible:this.planeVisible})),this.sectorLength=n.sectorPosition.length/3,this.sectorBuffer=new Ac({position:n.sectorPosition,color:En(this.sectorLength,o.r,o.g,o.b)},this.getBufferParams({visible:this.sectorVisible})),{bufferList:[this.textBuffer,this.lineBuffer,this.planeBuffer,this.sectorBuffer]}}updateData(t,n){super.updateData(t,n);const r={},i={},o={};if(t.color){const s=new ht(this.colorValue);Object.assign(r,{color:En(this.lineLength,s.r,s.g,s.b),color2:En(this.lineLength,s.r,s.g,s.b)}),Object.assign(i,{color:En(this.planeLength,s.r,s.g,s.b)}),Object.assign(o,{color:En(this.sectorLength,s.r,s.g,s.b)})}this.lineBuffer.setAttributes(r),this.planeBuffer.setAttributes(i),this.sectorBuffer.setAttributes(o)}setParameters(t){return super.setParameters(t,{},!1),!t||t.lineVisible===void 0&&t.sectorVisible===void 0&&t.planeVisible===void 0||this.setVisibility(this.visible),t&&t.lineOpacity&&this.lineBuffer.setParameters({opacity:t.lineOpacity}),t&&t.opacity!==void 0&&this.lineBuffer.setParameters({opacity:this.lineOpacity}),t&&t.linewidth&&this.lineBuffer.setParameters({linewidth:t.linewidth}),this}setVisibility(t,n){return super.setVisibility(t,!0),this.lineBuffer&&this.lineBuffer.setVisibility(this.lineVisible&&this.visible),this.planeBuffer&&this.planeBuffer.setVisibility(this.planeVisible&&this.visible),this.sectorBuffer&&this.sectorBuffer.setVisibility(this.sectorVisible&&this.visible),n||this.viewer.requestRender(),this}}Zn.add("dihedral",Iat);function sI(e,t){function n(i,o){return o in i}const r=Object.assign({},e);for(const i in r)n(r,i)&&n(t,i)&&(r[i]=re(t[i],r[i]));return r}function Xs(e,t){const n=new ht(e),r=new Float32Array(3*t);return En(t,n.r,n.g,n.b,r),r}class Rat extends Ei{constructor(t,n,r){super(t,n,r),this.type="dihedral-histogram",this.parameters=Object.assign({histogramsData:{type:"hidden",rebuild:!0},histogramBinBorderVisible:{type:"boolean",default:!0},scaleBinToSectorArea:{type:"boolean",rebuild:!0,default:!1}},this.parameters),this.init(r)}init(t){const n=t||{},r=sI({histogramBinBorderColor:"grey",adjacentBondArrowColor:"black",distantBondArrowColor:"magenta",frontHistogramColor:"green",backHistogramColor:"blue",opaqueMiddleDiscColor:"white"},n);Object.assign(this,r);const i=sI({histogramsData:[],histogramOpacity:1,opaqueMiddleDiscVisible:!0,opaqueMiddleDiscOpacity:1,histogramBinBorderVisible:!0,histogramBinBorderWidth:1,histogramBinBorderOpacity:.5,bondArrowVisible:!0,bondArrowWidth:2,bondArrowOpacity:1,scaleBinToSectorArea:!1},n);Object.assign(this,i),this.histogramsData.forEach(o=>{const s=sI(r,o);Object.assign(o,s)}),n.side=re(n.side,"double"),n.opacity=re(n.opacity,.5),n.radiusType=re(n.radiusType,"size"),n.radiusSize=re(n.radiusSize,.15),super.init(n)}getHistogramBinBorderBufferParameters(){return this.getBufferParams({linewidth:this.histogramBinBorderWidth,visible:this.histogramBinBorderVisible,opacity:this.histogramBinBorderOpacity})}getBondArrowsBufferParameters(){return this.getBufferParams({linewidth:this.bondArrowWidth,visible:this.bondArrowVisible,opacity:this.bondArrowOpacity})}getOpaqueMiddleDiscBufferParameters(){return this.getBufferParams({visible:this.opaqueMiddleDiscVisible,opacity:this.opaqueMiddleDiscOpacity})}getHistogramBufferParameters(){return this.getBufferParams({visible:!0,opacity:this.histogramOpacity,side:"double"})}createData(t){if(!t.atomCount||!this.histogramsData.length)return;this.histogramsData.forEach(a=>a.atomPositions=xB(t,[a.atomQuad]));const n=this.scaleBinToSectorArea?function(a){return Math.sqrt(a)}:function(a){return a};function r(a){const l=a.map(d=>d.length),c=new Float32Array(oB(l));let u=0;for(let d=0;d<a.length;d++)c.set(a[d],u),u+=a[d].length;return c}function i(a,l){return new Mc({position1:r(a.map(c=>c.startPoints)),position2:r(a.map(c=>c.endPoints)),color:r(a.map(c=>c.startColors)),color2:r(a.map(c=>c.endColors))},l)}function o(a,l){return new Ac({position:r(a.map(c=>c.triangles)),color:r(a.map(c=>c.triangleColors))},l)}this.histogramsData.forEach(a=>a.histogram360Scaled=a.histogram360.map(n));const s=[];for(let a=0;a<this.histogramsData.length;a++){let l,c=this.histogramsData[a];c.histogram360.length>=3&&(l=kat(c)),l!==void 0&&s.push(l)}return this.frontHistogramBinBordersBuffer=i(s.map(a=>a.frontHistogramBinBorders),this.getHistogramBinBorderBufferParameters()),this.backHistogramBinBordersBuffer=i(s.map(a=>a.backHistogramBinBorders),this.getHistogramBinBorderBufferParameters()),this.adjacentBondArrowsBuffer=i(s.map(a=>a.adjacentBondArrows),this.getBondArrowsBufferParameters()),this.distantBondArrowsBuffer=i(s.map(a=>a.distantBondArrows),this.getBondArrowsBufferParameters()),this.opaqueMiddleDiscBuffer=o(s.map(a=>a.opaqueMiddleDisc),this.getOpaqueMiddleDiscBufferParameters()),this.frontHistogramBuffer=o(s.map(a=>a.frontHistogram),this.getHistogramBufferParameters()),this.backHistogramBuffer=o(s.map(a=>a.backHistogram),this.getHistogramBufferParameters()),{bufferList:[].concat(this.frontHistogramBinBordersBuffer,this.backHistogramBinBordersBuffer,this.adjacentBondArrowsBuffer,this.distantBondArrowsBuffer,this.opaqueMiddleDiscBuffer,this.frontHistogramBuffer,this.backHistogramBuffer)}}setParameters(t){return super.setParameters(t,{},!1),t&&t.histogramBinBorderVisible!==void 0&&this.setVisibility(this.visible),this}setVisibility(t,n){return super.setVisibility(t,!0),this.frontHistogramBinBordersBuffer&&this.frontHistogramBinBordersBuffer.setVisibility(this.histogramBinBorderVisible),this.backHistogramBinBordersBuffer&&this.backHistogramBinBordersBuffer.setVisibility(this.histogramBinBorderVisible),n||this.viewer.requestRender(),this}}function kat(e){const t=e.atomPositions,n=e.histogram360Scaled,r=n.length<=180?360:2*n.length,i={triangles:new Float32Array(3*r*3),triangleColors:Xs(e.opaqueMiddleDiscColor,3*r)},o={triangles:new Float32Array(3*n.length*3),triangleColors:Xs(e.frontHistogramColor,3*n.length)},s={triangles:new Float32Array(3*n.length*3),triangleColors:Xs(e.backHistogramColor,3*n.length)},a={startPoints:new Float32Array(3*n.length),endPoints:new Float32Array(3*n.length),startColors:Xs(e.histogramBinBorderColor,n.length),endColors:Xs(e.histogramBinBorderColor,n.length)},l={startPoints:new Float32Array(3*n.length),endPoints:new Float32Array(3*n.length),startColors:Xs(e.histogramBinBorderColor,n.length),endColors:Xs(e.histogramBinBorderColor,n.length)},c={startPoints:new Float32Array(6),endPoints:new Float32Array(6),startColors:Xs(e.adjacentBondArrowColor,n.length),endColors:Xs(e.adjacentBondArrowColor,n.length)},u={startPoints:new Float32Array(6),endPoints:new Float32Array(6),startColors:Xs(e.distantBondArrowColor,n.length),endColors:Xs(e.distantBondArrowColor,n.length)},d=Vt(),f=Vt(),h=Vt(),p=Vt(),g=Vt(),v=Vt(),m=Vt(),y=Vt(),b=Vt(),_=Vt(),x=Vt(),w=Vt(),S=Vt(),C=Vt(),A=Vt(),T=Vt(),O=[d,f,h,p];for(let V=0;V<O.length;V++)Hi(O[V],t,3*V);if(ur(g,d,f),ur(v,h,f),ur(y,p,h),Lu(v)===0||(On(A,v,.5),ra(b,f,A),yr(g,g),yr(v,v),yr(y,y),$E(m,v),On(A,m,io(m,g)),ur(_,g,A),On(A,v,io(v,y)),ur(x,y,A),Lu(_)===0||Lu(x)===0))return;yr(_,_),yr(x,x);const R=Math.acos(io(_,x));Ao(w,m,_),Ao(S,v,x),yr(w,w),yr(S,S);let L=R;io(w,x)<0&&(L=-R),ra(C,b,_);const D=Math.max.apply(null,n),$=2*Math.PI/n.length;function z(V,J,K,ie,ce){const pe=3*J*3;qt(b,V,pe);const se=Number(n[J])/D;On(A,K,se),On(T,ie,se),ta(C,b,A,T,J*ce),qt(C,V,pe+3),ta(C,b,A,T,(J+1)*ce),qt(C,V,pe+6)}function H(V,J,K,ie,ce){Vr(b,c.startPoints,0,3*K,b.length),ta(A,b,ie,ce,0+0*$),Vr(A,c.endPoints,0,3*K,b.length),Vr(b,u.startPoints,0,3*K,b.length),ta(A,b,ie,ce,L),Vr(A,u.endPoints,0,3*K,b.length);for(let pe=0;pe<n.length;pe++)Vr(b,J.startPoints,0,3*pe,b.length),ta(A,b,ie,ce,0+$*pe),Vr(A,J.endPoints,0,3*pe,A.length);for(let pe=0;pe<n.length;pe++)z(V.triangles,pe,ie,ce,$)}const B=2*Math.PI/r;for(let V=0;V<r;V++){const J=3*V*3;qt(b,i.triangles,J),ta(C,b,_,w,V*B),qt(C,i.triangles,J+3),ta(C,b,_,w,(V+1)*B),qt(C,i.triangles,J+6)}return On(A,v,-.01),ra(b,b,A),H(o,a,0,_,w),On(A,v,.02),ra(b,b,A),H(s,l,1,x,S),{opaqueMiddleDisc:i,frontHistogram:o,backHistogram:s,frontHistogramBinBorders:a,backHistogramBinBorders:l,adjacentBondArrows:c,distantBondArrows:u}}Zn.add("dihedral-histogram",Rat);class Lat extends bB{constructor(t,n,r){super(t,n,r),this.type="distance",this.parameters=Object.assign({radialSegments:!0,openEnded:!0,disableImpostor:!0,labelUnit:{type:"select",rebuild:!0,options:{"":"",angstrom:"angstrom",nm:"nm"}},useCylinder:{type:"boolean",rebuild:!0},atomPair:{type:"hidden",rebuild:!0}},this.parameters),this.init(r)}init(t){const n=t||{};n.linewidth=re(n.linewidth,5),n.radiusType=re(n.radiusType,"size"),n.radiusSize=re(n.radiusSize,.2),this.labelUnit=re(n.labelUnit,""),this.useCylinder=re(n.useCylinder,!1),this.atomPair=re(n.atomPair,[]),super.init(n)}getDistanceData(t,n){let r=n.length;const i=new Array(r);let o=new Float32Array(3*r);const s=new Xn,a=new Xn,l=new ES,c=t.getAtomProxy(),u=t.getAtomProxy();let d=0;const f=t.getAtomSet();n.forEach((p,g)=>{let v=p[0],m=p[1];if(typeof v=="number"&&Number.isInteger(v)&&typeof m=="number"&&Number.isInteger(m)){if(!f.get(v)||!f.get(m))return void(d+=1);c.index=v,u.index=m}else{s.setString(v),a.setString(m);var y=t.getAtomIndices(s),b=t.getAtomIndices(a);if(!y.length||!b.length)return void(d+=1);c.index=y[0],u.index=b[0]}l.addBond(c,u,1),g-=d;var _=c.distanceTo(u);switch(this.labelUnit){case"angstrom":i[g]=_.toFixed(2)+" Å";break;case"nm":i[g]=(_/10).toFixed(2)+" nm";break;default:i[g]=_.toFixed(2)}var x=3*g;o[x+0]=(c.x+u.x)/2,o[x+1]=(c.y+u.y)/2,o[x+2]=(c.z+u.z)/2}),d>0&&(r-=d,o=o.subarray(0,3*r));var h=new Jr(l.count,!0);return{text:i,position:o,bondSet:h,bondStore:l}}getBondData(t,n,r){const i=t.getBondData(this.getBondParams(n,r));return i.picking&&(i.picking=new wot(i.picking.array,i.picking.structure,r.bondStore)),i}createData(t){if(!t.atomCount||!this.atomPair.length)return;const n=this.atomPair.length,r=new ht(this.labelColor),i=this.getDistanceData(t,this.atomPair);this.textBuffer=new xv({position:i.position,size:rs(n,this.labelSize),color:En(n,r.r,r.g,r.b),text:i.text},this.getLabelBufferParams());const o={bondSet:i.bondSet,bondStore:i.bondStore},s=this.getBondData(t,{position:!0,color:!0,picking:!0,radius:this.useCylinder},o);return this.useCylinder?this.distanceBuffer=new Bc(s,this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})):this.distanceBuffer=new Mc(Sre(s),this.getBufferParams({linewidth:this.linewidth,visible:this.lineVisible,opacity:this.lineOpacity})),{bondSet:i.bondSet,bondStore:i.bondStore,position:i.position,bufferList:[this.textBuffer,this.distanceBuffer]}}updateData(t,n){super.updateData(t,n);const r={bondSet:n.bondSet,bondStore:n.bondStore},i=this.getBondData(n.sview,t,r),o={};t&&!t.color||Object.assign(o,{color:i.color,color2:i.color2}),t&&!t.radius||Object.assign(o,{radius:i.radius}),this.distanceBuffer.setAttributes(o)}setParameters(t){return super.setParameters(t,{},!1),this.useCylinder||(t&&t.lineOpacity&&this.distanceBuffer.setParameters({opacity:t.lineOpacity}),t&&t.opacity!==void 0&&this.distanceBuffer.setParameters({opacity:this.lineOpacity}),t&&t.linewidth&&this.distanceBuffer.setParameters({linewidth:t.linewidth})),this}}function aI(e){return 2*(e.position.length/3)*3}Zn.add("distance",Lat);const $at=Object.assign({scale:1,color:"grey"},eo);class oV extends xl{constructor(t,n={}){super({position:new Float32Array(aI(t)),color:new Float32Array(aI(t))},n),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag";const r=new ht(this.parameters.color),i=this.geometry.attributes;En(aI(t)/3,r.r,r.g,r.b,i.color.array),this.setAttributes(t)}get defaultParameters(){return $at}setAttributes(t={}){const n=this.geometry.attributes;let r,i,o;t.position&&t.vector&&(r=t.position,i=t.vector,o=n.position.array,n.position.needsUpdate=!0);const s=this.size/2,a=this.parameters.scale;if(r&&i)for(let l=0;l<s;l++){const c=2*l*3,u=3*l;o[c+0]=r[u+0],o[c+1]=r[u+1],o[c+2]=r[u+2],o[c+3]=r[u+0]+i[u+0]*a,o[c+4]=r[u+1]+i[u+1]*a,o[c+5]=r[u+2]+i[u+2]*a}}}class Dat extends Ei{constructor(t,n,r){super(t,n,r),this.type="helixorient",this.parameters=Object.assign({sphereDetail:!0,disableImpostor:!0},this.parameters),this.init(r)}init(t){const n=t||{};n.colorScheme=re(n.colorScheme,"sstruc"),n.radiusType=re(n.radiusType,"size"),n.radiusSize=re(n.radiusSize,.15),n.radiusScale=re(n.radiusScale,1),n.useInteriorColor=re(n.useInteriorColor,!0),super.init(n)}createData(t){const n=[],r=[];return this.structure.eachPolymer(i=>{if(i.residueCount<4)return;r.push(i);const o=new CC(i),s=o.getPosition(),a=o.getColor(this.getColorParams()),l=o.getSize(this.getRadiusParams()),c=o.getPicking();n.push(new gd({position:s.center,color:a.color,radius:l.size,picking:c.picking},this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),new oV({position:s.center,vector:s.axis},this.getBufferParams({color:"skyblue",scale:1})),new oV({position:s.center,vector:s.resdir},this.getBufferParams({color:"lightgreen",scale:1})))},t.getSelection()),{bufferList:n,polymerList:r}}updateData(t,n){Je&&Ve.time(this.type+" repr update"),t=t||{};for(let r=0,i=n.polymerList.length;r<i;++r){const o=3*r,s={},a=n.polymerList[r],l=new CC(a);if(t.position){const c=l.getPosition();Object.assign(s,{position:c.center}),n.bufferList[o+1].setAttributes({position:c.center,vector:c.axis}),n.bufferList[o+2].setAttributes({position:c.center,vector:c.resdir})}n.bufferList[o].setAttributes(s)}Je&&Ve.timeEnd(this.type+" repr update")}}Zn.add("helixorient",Dat);class cie extends qE{constructor(t,n,r){super(t,n,r),this.type="licorice",this.parameters=Object.assign({},this.parameters,{aspectRatio:null})}init(t){var n=t||{};n.aspectRatio=1,super.init(n)}}Zn.add("licorice",cie),dn.add("shader/HyperballStickImpostor.vert",`
attribute vec3 mapping;
attribute float radius;
attribute float radius2;
attribute vec3 position1;
attribute vec3 position2;
varying mat4 matrix_near;
varying vec4 prime1;
varying vec4 prime2;
varying float vRadius;
varying float vRadius2;
#ifdef PICKING
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
attribute vec3 color2;
varying vec3 vColor1;
varying vec3 vColor2;
#endif
uniform float shrink;
uniform mat4 modelViewProjectionMatrix;
uniform mat4 modelViewProjectionMatrixInverse;
void main(){
vRadius = radius;
vRadius2 = radius2;
vec4 spaceposition;
vec3 position_atom1;
vec3 position_atom2;
vec4 vertex_position;
#ifdef PICKING
vPickingColor = unpackColor( primitiveId );
#else
vColor1 = color;
vColor2 = color2;
#endif
float radius1 = radius;
position_atom1 = position1;
position_atom2 = position2;
float distance = distance( position_atom1, position_atom2 );
spaceposition.z = mapping.z * distance;
if (radius1 > radius2) {
spaceposition.y = mapping.y * 1.5 * radius1;
spaceposition.x = mapping.x * 1.5 * radius1;
} else {
spaceposition.y = mapping.y * 1.5 * radius2;
spaceposition.x = mapping.x * 1.5 * radius2;
}
spaceposition.w = 1.0;
vec4 e3 = vec4( 1.0 );
vec3 e1, e1_temp, e2, e2_temp;
e3.xyz = normalize(position_atom1-position_atom2);
if (e3.z == 0.0) { e3.z = 0.0000000000001;}
if ( (position_atom1.x - position_atom2.x) == 0.0) { position_atom1.x += 0.001;}
if ( (position_atom1.y - position_atom2.y) == 0.0) { position_atom1.y += 0.001;}
if ( (position_atom1.z - position_atom2.z) == 0.0) { position_atom1.z += 0.001;}
vec4 focus = vec4( 1.0 );
focus.x = ( position_atom1.x*position_atom1.x - position_atom2.x*position_atom2.x +
( radius2*radius2 - radius1*radius1 )*e3.x*e3.x/shrink )/(2.0*(position_atom1.x - position_atom2.x));
focus.y = ( position_atom1.y*position_atom1.y - position_atom2.y*position_atom2.y +
( radius2*radius2 - radius1*radius1 )*e3.y*e3.y/shrink )/(2.0*(position_atom1.y - position_atom2.y));
focus.z = ( position_atom1.z*position_atom1.z - position_atom2.z*position_atom2.z +
( radius2*radius2 - radius1*radius1 )*e3.z*e3.z/shrink )/(2.0*(position_atom1.z - position_atom2.z));
e1.x = 1.0;
e1.y = 1.0;
e1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;
e1_temp = e1 - focus.xyz;
e1 = normalize(e1_temp);
e2_temp = e1.yzx * e3.zxy - e1.zxy * e3.yzx;
e2 = normalize(e2_temp);
mat3 R= mat3( e1.xyz, e2.xyz, e3.xyz );
vertex_position.xyz = R * spaceposition.xyz;
vertex_position.w = 1.0;
vertex_position.x += (position_atom1.x+position_atom2.x) / 2.0;
vertex_position.y += (position_atom1.y+position_atom2.y) / 2.0;
vertex_position.z += (position_atom1.z+position_atom2.z) / 2.0;
gl_Position = modelViewProjectionMatrix * vertex_position;
vec4 i_near, i_far;
vec4 near = gl_Position;
near.z = 0.0 ;
near = modelViewProjectionMatrixInverse * near;
i_near = near;
vec4 far = gl_Position;
far.z = far.w ;
i_far = modelViewProjectionMatrixInverse * far;
prime1 = vec4( position_atom1 - (position_atom1 - focus.xyz)*shrink, 1.0 );
prime2 = vec4( position_atom2 - (position_atom2 - focus.xyz)*shrink, 1.0 );
float Rsquare = (radius1*radius1/shrink) - (
(position_atom1.x - focus.x)*(position_atom1.x - focus.x) +
(position_atom1.y - focus.y)*(position_atom1.y - focus.y) +
(position_atom1.z - focus.z)*(position_atom1.z - focus.z)
);
focus.w = Rsquare;
matrix_near = mat4( i_near, i_far, focus, e3 );
gl_Position.z = 1.0;
}`),dn.add("shader/HyperballStickImpostor.frag",`#define STANDARD
#define IMPOSTOR
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 interiorColor;
uniform float interiorDarkening;
uniform float roughness;
uniform float metalness;
uniform float opacity;
uniform float clipNear;
uniform float shrink;
uniform mat4 modelViewMatrix;
uniform mat4 modelViewProjectionMatrix;
uniform mat4 modelViewMatrixInverseTranspose;
uniform mat4 projectionMatrix;
varying mat4 matrix_near;
varying vec4 prime1;
varying vec4 prime2;
varying float vRadius;
varying float vRadius2;
#ifdef PICKING
uniform float objectId;
varying vec3 vPickingColor;
#else
varying vec3 vColor1;
varying vec3 vColor2;
#include common
#include fog_pars_fragment
#include bsdfs
#include lights_pars_begin
#include lights_physical_pars_fragment
#endif
bool interior = false;
float calcClip( vec4 cameraPos ){
return dot( cameraPos, vec4( 0.0, 0.0, 1.0, clipNear - 0.5 ) );
}
float calcClip( vec3 cameraPos ){
return calcClip( vec4( cameraPos, 1.0 ) );
}
float calcDepth( in vec3 cameraPos ){
vec2 clipZW = cameraPos.z * projectionMatrix[2].zw + projectionMatrix[3].zw;
return 0.5 + 0.5 * clipZW.x / clipZW.y;
}
struct Ray {
vec3 origin ;
vec3 direction ;
};
bool cutoff_plane (vec3 M, vec3 cutoff, vec3 x3){
float a = x3.x;
float b = x3.y;
float c = x3.z;
float d = -x3.x*cutoff.x-x3.y*cutoff.y-x3.z*cutoff.z;
float l = a*M.x+b*M.y+c*M.z+d;
if (l<0.0) {return true;}
else{return false;}
}
vec3 isect_surf(Ray r, mat4 matrix_coef){
vec4 direction = vec4(r.direction, 0.0);
vec4 origin = vec4(r.origin, 1.0);
float a = dot(direction,(matrix_coef*direction));
float b = dot(origin,(matrix_coef*direction));
float c = dot(origin,(matrix_coef*origin));
float delta =b*b-a*c;
gl_FragColor.a = 1.0;
if (delta<0.0){
discard;
}
float t1 =(-b-sqrt(delta))/a;
return r.origin+t1*r.direction;
}
vec3 isect_surf2(Ray r, mat4 matrix_coef){
vec4 direction = vec4(r.direction, 0.0);
vec4 origin = vec4(r.origin, 1.0);
float a = dot(direction,(matrix_coef*direction));
float b = dot(origin,(matrix_coef*direction));
float c = dot(origin,(matrix_coef*origin));
float delta =b*b-a*c;
gl_FragColor.a = 1.0;
if (delta<0.0){
discard;
}
float t2 =(-b+sqrt(delta))/a;
return r.origin+t2*r.direction;
}
Ray primary_ray(vec4 near1, vec4 far1){
vec3 near=near1.xyz/near1.w;
vec3 far=far1.xyz/far1.w;
return Ray(near,far-near);
}
float update_z_buffer(vec3 M, mat4 ModelViewP){
float depth1;
vec4 Ms=(ModelViewP*vec4(M,1.0));
return depth1=(1.0+Ms.z/Ms.w)/2.0;
}
void main(){
float radius = max( vRadius, vRadius2 );
vec4 i_near, i_far, focus;
vec3 e3, e1, e1_temp, e2;
i_near = vec4(matrix_near[0][0],matrix_near[0][1],matrix_near[0][2],matrix_near[0][3]);
i_far = vec4(matrix_near[1][0],matrix_near[1][1],matrix_near[1][2],matrix_near[1][3]);
focus = vec4(matrix_near[2][0],matrix_near[2][1],matrix_near[2][2],matrix_near[2][3]);
e3 = vec3(matrix_near[3][0],matrix_near[3][1],matrix_near[3][2]);
e1.x = 1.0;
e1.y = 1.0;
e1.z = ( (e3.x*focus.x + e3.y*focus.y + e3.z*focus.z) - e1.x*e3.x - e1.y*e3.y)/e3.z;
e1_temp = e1 - focus.xyz;
e1 = normalize(e1_temp);
e2 = normalize(cross(e1,e3));
vec4 equation = focus;
float shrinkfactor = shrink;
float t1 = -1.0/(1.0-shrinkfactor);
float t2 = 1.0/(shrinkfactor);
vec4 colonne1, colonne2, colonne3, colonne4;
mat4 mat;
vec3 equation1 = vec3(t2,t2,t1);
float A1 = - e1.x*equation.x - e1.y*equation.y - e1.z*equation.z;
float A2 = - e2.x*equation.x - e2.y*equation.y - e2.z*equation.z;
float A3 = - e3.x*equation.x - e3.y*equation.y - e3.z*equation.z;
float A11 = equation1.x*e1.x*e1.x + equation1.y*e2.x*e2.x + equation1.z*e3.x*e3.x;
float A21 = equation1.x*e1.x*e1.y + equation1.y*e2.x*e2.y + equation1.z*e3.x*e3.y;
float A31 = equation1.x*e1.x*e1.z + equation1.y*e2.x*e2.z + equation1.z*e3.x*e3.z;
float A41 = equation1.x*e1.x*A1 + equation1.y*e2.x*A2 + equation1.z*e3.x*A3;
float A22 = equation1.x*e1.y*e1.y + equation1.y*e2.y*e2.y + equation1.z*e3.y*e3.y;
float A32 = equation1.x*e1.y*e1.z + equation1.y*e2.y*e2.z + equation1.z*e3.y*e3.z;
float A42 = equation1.x*e1.y*A1 + equation1.y*e2.y*A2 + equation1.z*e3.y*A3;
float A33 = equation1.x*e1.z*e1.z + equation1.y*e2.z*e2.z + equation1.z*e3.z*e3.z;
float A43 = equation1.x*e1.z*A1 + equation1.y*e2.z*A2 + equation1.z*e3.z*A3;
float A44 = equation1.x*A1*A1 + equation1.y*A2*A2 + equation1.z*A3*A3 - equation.w;
colonne1 = vec4(A11,A21,A31,A41);
colonne2 = vec4(A21,A22,A32,A42);
colonne3 = vec4(A31,A32,A33,A43);
colonne4 = vec4(A41,A42,A43,A44);
mat = mat4(colonne1,colonne2,colonne3,colonne4);
Ray ray = primary_ray(i_near,i_far) ;
vec3 M;
M = isect_surf(ray, mat);
if (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }
vec4 M1 = vec4(M,1.0);
vec4 M2 = mat*M1;
vec3 _normal = ( modelViewMatrixInverseTranspose * M2 ).xyz;
gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;
#ifdef NEAR_CLIP
if( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 ){
M = isect_surf2(ray, mat);
if( calcClip( modelViewMatrix * vec4( M, 1.0 ) ) > 0.0 )
discard;
interior = true;
gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = max( 0.0, calcDepth( vec3( - ( clipNear - 0.5 ) ) ) + ( 0.0000001 / radius ) );
}
}else if( gl_FragDepthEXT <= 0.0 ){
M = isect_surf2(ray, mat);
interior = true;
gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix);
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );
}
}
#else
if( gl_FragDepthEXT <= 0.0 ){
M = isect_surf2(ray, mat);
interior = true;
gl_FragDepthEXT = update_z_buffer(M, modelViewProjectionMatrix) ;
if( gl_FragDepthEXT >= 0.0 ){
gl_FragDepthEXT = 0.0 + ( 0.0000001 / radius );
}
}
#endif
if (cutoff_plane(M, prime1.xyz, -e3) || cutoff_plane(M, prime2.xyz, e3)){ discard; }
if (gl_FragDepthEXT < 0.0)
discard;
if (gl_FragDepthEXT > 1.0)
discard;
float distance_ratio = ((M.x-prime2.x)*e3.x + (M.y-prime2.y)*e3.y +(M.z-prime2.z)*e3.z) /
distance(prime2.xyz,prime1.xyz);
#ifdef PICKING
if( opacity < 0.3 )
discard;
gl_FragColor = vec4( vPickingColor, objectId );
#else
vec3 vViewPosition = -( modelViewMatrix * vec4( M, 1.0 ) ).xyz;
vec3 vNormal = _normal;
vec3 vColor;
if( distance_ratio>0.5 ){
vColor = vColor1;
}else{
vColor = vColor2;
}
vec4 diffuseColor = vec4( diffuse, opacity );
ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
vec3 totalEmissiveLight = emissive;
#include color_fragment
#include roughnessmap_fragment
#include metalnessmap_fragment
vec3 normal = normalize( vNormal );
vec3 geometryNormal = normal;
#include lights_physical_fragment
#include lights_fragment_begin
#include lights_fragment_end
vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveLight;
if( interior ){
#ifdef USE_INTERIOR_COLOR
outgoingLight.xyz = interiorColor;
#else
#ifdef DIFFUSE_INTERIOR
outgoingLight.xyz = vColor;
#endif
#endif
outgoingLight.xyz *= 1.0 - interiorDarkening;
}
gl_FragColor = vec4( outgoingLight, diffuseColor.a );
#include premultiplied_alpha_fragment
#include tonemapping_fragment
#include encodings_fragment
#include fog_fragment
#endif
}`);const Bat=new Float32Array([-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,-1,1,1,-1,1,1,1,-1,1,1]),Nat=new Uint16Array([0,1,2,0,2,3,1,5,6,1,6,2,4,6,5,4,7,6,0,7,4,0,3,7,0,5,1,0,4,5,3,2,6,3,6,7]);class Fat extends mB{constructor(t,n={}){super("v3",t,n)}get mapping(){return Bat}get mappingIndices(){return Nat}get mappingIndicesSize(){return 36}get mappingSize(){return 8}get mappingItemSize(){return 3}}const uie=Object.assign({shrink:.14},eo),zat=Object.assign({shrink:{uniform:!0}},Nh);class jat extends Fat{constructor(t,n={}){super(t,n),this.parameterTypes=zat,this.isImpostor=!0,this.vertexShader="HyperballStickImpostor.vert",this.fragmentShader="HyperballStickImpostor.frag",this.addUniforms({modelViewProjectionMatrix:{value:new lt},modelViewProjectionMatrixInverse:{value:new lt},modelViewMatrixInverseTranspose:{value:new lt},shrink:{value:this.parameters.shrink}}),this.addAttributes({position1:{type:"v3",value:null},position2:{type:"v3",value:null},color2:{type:"c",value:null},radius:{type:"f",value:null},radius2:{type:"f",value:null}}),this.setAttributes(t),this.makeMapping()}get defaultParameters(){return uie}}Object.assign({disableImpostor:!1},_B,uie);const Uat=class{constructor(e,t={}){return!ll||t&&t.disableImpostor?(e.radius=function(n,r){const i=n.length,o=new Float32Array(i);for(let s=0;s<i;s++)o[s]=Math.min(n[s],r[s]);return o}(e.radius,e.radius2),new aie(e,t)):new jat(e,t)}};class Vat extends cie{constructor(t,n,r){super(t,n,r),this.type="hyperball",this.parameters=Object.assign({shrink:{type:"number",precision:3,max:1,min:.001,buffer:!0}},this.parameters,{multipleBond:null,bondSpacing:null})}init(t){var n=t||{};n.radiusScale=re(n.radiusScale,.2),n.radiusType=re(n.radiusType,"vdw"),n.useInteriorColor=re(n.useInteriorColor,!0),this.shrink=re(n.shrink,.12),super.init(n)}getBondParams(t,n){return t&&!t.radius||(n=Object.assign({radius2:!0},n)),super.getBondParams(t,n)}createData(t){var n=new gd(t.getAtomData(this.getAtomParams()),this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0}));return this.__center=new Float32Array(3*t.bondCount),{bufferList:[n,new Uat(t.getBondData(this.getBondParams()),this.getBufferParams({shrink:this.shrink,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}))]}}updateData(t,n){var r=n.sview.getAtomData(this.getAtomParams()),i=n.sview.getBondData(this.getBondParams()),o={},s={};if(!t||t.position){Object.assign(o,{position:r.position});var a=i.position1,l=i.position2;Object.assign(s,{position:cl(a,l,this.__center),position1:a,position2:l})}t&&!t.color||(Object.assign(o,{color:r.color}),Object.assign(s,{color:i.color,color2:i.color2})),t&&!t.radius||(Object.assign(o,{radius:r.radius}),Object.assign(s,{radius:i.radius,radius2:i.radius2})),n.bufferList[0].setAttributes(o),n.bufferList[1].setAttributes(s)}}Zn.add("hyperball",Vat);class KL{constructor(t,n={},r=""){this.type=t,this.text=n,this.format=r,this.errorLogged=!1}atomLabel(t){let n;switch(this.type){case"atomname":n=t.atomname;break;case"atomindex":n=`${t.index}`;break;case"occupancy":n=t.occupancy.toFixed(2);break;case"bfactor":n=t.bfactor.toFixed(2);break;case"serial":n=`${t.serial}`;break;case"element":n=t.element;break;case"atom":n=`${t.atomname}|${t.index}`;break;case"resname":n=t.resname;break;case"resno":n=`${t.resno}`;break;case"res":n=`${wC[t.resname.toUpperCase()]||t.resname}${t.resno}`;break;case"residue":const r=wC[t.resname.toUpperCase()];n=r&&!t.inscode?`${r}${t.resno}`:`[${t.resname}]${t.resno}${t.inscode}`;break;case"text":n=this.text[t.index];break;case"format":try{n=ore.sprintf(this.format,t)}catch(i){this.errorLogged||(this.errorLogged=!0,console.log(i.message))}break;default:n=t.qualifiedName()}return n===void 0?"":n}}KL.types={"":"",atomname:"atom name",atomindex:"atom index",occupancy:"occupancy",bfactor:"b-factor",serial:"serial",element:"element",atom:"atom name + index",resname:"residue name",resno:"residue no",res:"one letter code + no",residue:"[residue name] + no + inscode",text:"text",format:"format",qualified:"qualified name"};class Hat extends Ei{constructor(t,n,r){super(t,n,r),this.type="label",this.parameters=Object.assign({labelType:{type:"select",options:KL.types,rebuild:!0},labelText:{type:"hidden",rebuild:!0},labelFormat:{type:"text",rebuild:!0},labelGrouping:{type:"select",options:{atom:"atom",residue:"residue"},rebuild:!0},fontFamily:{type:"select",options:{"sans-serif":"sans-serif",monospace:"monospace",serif:"serif"},buffer:!0},fontStyle:{type:"select",options:{normal:"normal",italic:"italic"},buffer:!0},fontWeight:{type:"select",options:{normal:"normal",bold:"bold"},buffer:!0},xOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},yOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},zOffset:{type:"number",precision:1,max:20,min:-20,buffer:!0},attachment:{type:"select",options:{"bottom-left":"bottom-left","bottom-center":"bottom-center","bottom-right":"bottom-right","middle-left":"middle-left","middle-center":"middle-center","middle-right":"middle-right","top-left":"top-left","top-center":"top-center","top-right":"top-right"},rebuild:!0},showBorder:{type:"boolean",buffer:!0},borderColor:{type:"color",buffer:!0},borderWidth:{type:"number",precision:2,max:.3,min:0,buffer:!0},showBackground:{type:"boolean",rebuild:!0},backgroundColor:{type:"color",buffer:!0},backgroundMargin:{type:"number",precision:2,max:2,min:0,rebuild:!0},backgroundOpacity:{type:"range",step:.01,max:1,min:0,buffer:!0},fixedSize:{type:"boolean",buffer:!0}},this.parameters,{side:null,flatShaded:null,wireframe:null,linewidth:null,roughness:null,metalness:null,diffuse:null}),this.init(r)}init(t){const n=t||{};this.labelType=re(n.labelType,"res"),this.labelText=re(n.labelText,{}),this.labelFormat=re(n.labelFormat,""),this.labelGrouping=re(n.labelGrouping,"atom"),this.fontFamily=re(n.fontFamily,"sans-serif"),this.fontStyle=re(n.fontStyle,"normal"),this.fontWeight=re(n.fontWeight,"bold"),this.xOffset=re(n.xOffset,0),this.yOffset=re(n.yOffset,0),this.zOffset=re(n.zOffset,.5),this.attachment=re(n.attachment,"bottom-left"),this.showBorder=re(n.showBorder,!1),this.borderColor=re(n.borderColor,"lightgrey"),this.borderWidth=re(n.borderWidth,.15),this.showBackground=re(n.showBackground,!1),this.backgroundColor=re(n.backgroundColor,"lightgrey"),this.backgroundMargin=re(n.backgroundMargin,.5),this.backgroundOpacity=re(n.backgroundOpacity,1),this.fixedSize=re(n.fixedSize,!1),super.init(n)}getTextData(t,n){const r=this.getAtomParams(n),i=new KL(this.labelType,this.labelText,this.labelFormat);let o,s,a,l,c,u,d;if(this.labelGrouping==="atom"){const f=t.getAtomData(r);o=f.position,s=f.radius,a=f.color,n&&!n.text||(l=[],t.eachAtom(h=>l.push(i.atomLabel(h))))}else if(this.labelGrouping==="residue"){n&&!n.position||(c=[]),n&&!n.color||(d=[]),n&&!n.radius||(u=[]),n&&!n.text||(l=[]),r.colorParams&&(r.colorParams.structure=t.getStructure());const f=Qt.getScheme(r.colorParams),h=new Pc(r.radiusParams),p=t.getAtomProxy();let g=0;t.eachResidue(v=>{const m=3*g;v.isProtein()||v.isNucleic()?(p.index=v.traceAtomIndex,n&&!n.position||p.positionToArray(c,m)):(p.index=v.atomOffset,n&&!n.position||v.positionToArray(c,m)),n&&!n.color||f.atomColorToArray(p,d,m),n&&!n.radius||(u[g]=h.atomRadius(p)),n&&!n.text||l.push(i.atomLabel(p)),++g}),n&&!n.position||(o=new Float32Array(c)),n&&!n.color||(a=new Float32Array(d)),n&&!n.radius||(s=new Float32Array(u))}return{position:o,size:s,color:a,text:l}}createData(t){return{bufferList:[new xv(this.getTextData(t,{position:!0,color:!0,radius:!0,text:!0}),this.getBufferParams({fontFamily:this.fontFamily,fontStyle:this.fontStyle,fontWeight:this.fontWeight,xOffset:this.xOffset,yOffset:this.yOffset,zOffset:this.zOffset,attachment:this.attachment,showBorder:this.showBorder,borderColor:this.borderColor,borderWidth:this.borderWidth,showBackground:this.showBackground,backgroundColor:this.backgroundColor,backgroundMargin:this.backgroundMargin,backgroundOpacity:this.backgroundOpacity,fixedSize:this.fixedSize}))]}}updateData(t,n){n.bufferList[0].setAttributes(this.getTextData(n.sview,t))}getAtomRadius(){return 0}}function Gat(e){const t=e.getAtomSet(),n=e.getBondSet(),r=e.getBondProxy();return n.forEach(function(i){r.index=i,t.clear(r.atomIndex1),t.clear(r.atomIndex2)}),t}Zn.add("label",Hat);class Wat extends Ei{constructor(t,n,r){super(t,n,r),this.type="line",this.parameters=Object.assign({multipleBond:{type:"select",rebuild:!0,options:{off:"off",symmetric:"symmetric",offset:"offset"}},bondSpacing:{type:"number",precision:2,max:2,min:.5},linewidth:{type:"integer",max:50,min:1,buffer:!0},lines:{type:"boolean",rebuild:!0},crosses:{type:"select",rebuild:!0,options:{off:"off",lone:"lone",all:"all"}},crossSize:{type:"number",precision:2,max:2,min:.1}},this.parameters,{flatShaded:null,side:null,wireframe:null,roughness:null,metalness:null}),this.init(r)}init(t){var n=t||{};this.multipleBond=re(n.multipleBond,"off"),this.bondSpacing=re(n.bondSpacing,1),this.linewidth=re(n.linewidth,2),this.lines=re(n.lines,!0),this.crosses=re(n.crosses,"lone"),this.crossSize=re(n.crossSize,.4),super.init(n)}getAtomRadius(t){return .1}getBondParams(t,n){return n=Object.assign({multipleBond:this.multipleBond,bondSpacing:this.bondSpacing,radiusParams:{type:"size",size:.1,scale:1}},n),super.getBondParams(t,n)}_crossData(t,n){if(t&&!t.position&&!t.color)return;const r={};this.crosses==="lone"&&Object.assign(r,{atomSet:Gat(n)});const i=n.getAtomData(this.getAtomParams(t,r)),o={},s=i.position,a=i.color,l=i.picking,c=(s||a).length,u=3*c;let d=new Float32Array(0),f=new Float32Array(0),h=new Float32Array(0),p=new Float32Array(0),g=0,v=new Float32Array(0);t&&!t.position||(d=o.position1=new Float32Array(u),f=o.position2=new Float32Array(u),g=this.crossSize/2),t&&!t.color||(h=o.color=new Float32Array(u),p=o.color2=new Float32Array(u)),t&&!t.picking||(v=new Float32Array(3*i.picking.array.length));for(let m=0;m<c;m++){const y=3*m,b=3*y;if(!t||t.position){const _=s[y],x=s[y+1],w=s[y+2];d[b]=_-g,d[b+1]=x,d[b+2]=w,f[b]=_+g,f[b+1]=x,f[b+2]=w,d[b+3]=_,d[b+4]=x-g,d[b+5]=w,f[b+3]=_,f[b+4]=x+g,f[b+5]=w,d[b+6]=_,d[b+7]=x,d[b+8]=w-g,f[b+6]=_,f[b+7]=x,f[b+8]=w+g}if(!t||t.color){const _=b+9;for(let x=b;x<_;x+=3)h[x]=p[x]=a[y],h[x+1]=p[x+1]=a[y+1],h[x+2]=p[x+2]=a[y+2]}t&&!t.picking||(v[y]=v[y+1]=v[y+2]=l.array[m])}return t&&!t.picking||(o.picking=new Bh(v,l.structure)),o}createData(t){const n={position:!0,color:!0,picking:!0},r=[];if(this.lines){const i=t.getBondData(this.getBondParams(n)),o=new Mc(i,this.getBufferParams({linewidth:this.linewidth}));r.push(o)}if(this.crosses!=="off"){const i=new Mc(this._crossData(n,t),this.getBufferParams({linewidth:this.linewidth}));r.push(i)}return{bufferList:r}}updateData(t,n){let r=0;if(this.lines){const i=n.sview.getBondData(this.getBondParams(t)),o={};t&&!t.position||Object.assign(o,{position1:i.position1,position2:i.position2}),t&&!t.color||Object.assign(o,{color:i.color,color2:i.color2}),n.bufferList[r++].setAttributes(o)}if(this.crosses!=="off"){const i=this._crossData(t,n.sview),o={};t&&!t.position||Object.assign(o,{position1:i.position1,position2:i.position2}),t&&!t.color||Object.assign(o,{color:i.color,color2:i.color2}),n.bufferList[r++].setAttributes(o)}}setParameters(t){var n={};return t&&(t.bondSpacing||t.crossSize)&&Object.assign(n,{position:!0}),super.setParameters(t,n,!1),this}}function die(e,t,n,r,i){const o=new(r=r||Int32Array)(e*t*n*(i=i||1));function s(a,l,c){return((a*t+l)*n+c)*i}return{data:o,index:s,set:function(a,l,c,...u){const d=s(a,l,c);for(let f=0;f<i;++f)o[d+f]=u[f]},toArray:function(a,l,c,u=[],d=0){const f=s(a,l,c);for(let h=0;h<i;++h)u[d+h]=o[f+h]},fromArray:function(a,l,c,u,d=0){const f=s(a,l,c);for(let h=0;h<i;++h)o[f+h]=u[d+h]},copy:function(a){o.set(a.data)}}}function TS(e,t,n){var r=zre(t),i=jb(e);e.length===0&&(i[0].set([0,0,0]),i[1].set([0,0,0]));var o,s,a,l,c,u,d,f,h,p,g,v,m,y,b,_=i[0],x=i[1];function w(H,B,V,J,K){o=B||1.4,s=V||2,v=K||!0;var ie=0;for(var ce in r)ie=Math.max(ie,ce);var pe=Wb(_,x,ie,s,H?o:0);l=pe.dim[0],c=pe.dim[1],u=pe.dim[2],d=pe.matrix,f=pe.tran,s=pe.scaleFactor,h={},p={},O(H),g=o*s,a=J||o/s,m=new Uint8Array(l*c*u),H&&(y=new Float64Array(l*c*u)),v&&(b=new Int32Array(l*c*u))}var S=1,C=2,A=4,T=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];function O(H){var B,V,J,K,ie,ce,pe,se,G,he;for(var Z in r)if(B=parseFloat(Z),!h[Z]){for(ce=(pe=H?(B+o)*s+.5:B*s+.5)*pe,se=Math.floor(pe)+1,G=new Int32Array(se*se),he=0,V=0;V<se;++V)for(J=0;J<se;++J)(K=V*V+J*J)>ce?G[he]=-1:(ie=Math.sqrt(ce-K),G[he]=Math.floor(ie)),++he;p[Z]=se,h[Z]=G}}function R(H){var B,V,J,K,ie,ce,pe,se,G,he,Z,ae,oe,te,ve,ne,xe,Ce,me=3*H,X=H;B=Math.floor(.5+s*(e[me]+f[0])),V=Math.floor(.5+s*(e[me+1]+f[1])),J=Math.floor(.5+s*(e[me+2]+f[2]));var Q,Re=t[X],Pe=h[Re],le=0,Oe=c*u,Be=p[Re];for(he=0;he<Be;++he)for(Z=0;Z<Be;++Z){if((Q=Pe[le])!==-1){for(ne=-1;ne<2;++ne)for(xe=-1;xe<2;++xe)for(Ce=-1;Ce<2;++Ce)if(ne!==0&&xe!==0&&Ce!==0){for(pe=ne*he,G=Ce*Z,ae=0;ae<=Q;++ae)if(te=V+(se=ae*xe),ve=J+G,!((oe=B+pe)<0||te<0||ve<0||oe>=l||te>=c||ve>=u)){var De=oe*Oe+te*u+ve;if(v)if(m[De]&S){if(m[De]&S){var Ee=b[De];Ee!==me&&pe*pe+se*se+G*G<(K=B+pe-Math.floor(.5+s*(e[Ee]+f[0])))*K+(ie=V+se-Math.floor(.5+s*(e[Ee+1]+f[1])))*ie+(ce=J+G-Math.floor(.5+s*(e[Ee+2]+f[2])))*ce&&(b[De]=H)}}else m[De]|=S,b[De]=H;else m[De]|=S}}}le++}}function L(H){var B,V;for(console.time("EDTSurface fillvoxels"),B=0,V=m.length;B<V;++B)m[B]=0,H&&(y[B]=-1),v&&(b[B]=-1);for(B=0,V=e.length/3;B<V;++B)R(B);for(B=0,V=m.length;B<V;++B)m[B]&S&&(m[B]|=C);console.timeEnd("EDTSurface fillvoxels")}function D(H){var B,V,J,K,ie,ce,pe,se,G,he,Z,ae,oe,te,ve,ne,xe,Ce,me,X=3*H,Q=H,Re=0;B=Math.floor(.5+s*(e[X]+f[0])),V=Math.floor(.5+s*(e[X+1]+f[1])),J=Math.floor(.5+s*(e[X+2]+f[2]));var Pe=t[Q],le=c*u;for(oe=0,me=p[Pe];oe<me;++oe)for(te=0;te<me;++te){if(h[Pe][Re]!==-1){for(ne=-1;ne<2;++ne)for(xe=-1;xe<2;++xe)for(Ce=-1;Ce<2;++Ce)if(ne!==0&&xe!==0&&Ce!==0){for(pe=ne*oe,G=Ce*te,ve=0;ve<=h[Pe][Re];++ve)if(Z=V+(se=ve*xe),ae=J+G,!((he=B+pe)<0||Z<0||ae<0||he>=l||Z>=c||ae>=u)){var Oe=he*le+Z*u+ae;if(m[Oe]&C){if(v){var Be=b[Oe];pe*pe+se*se+G*G<(K=Math.floor(.5+s*(e[Be]+f[0])))*K+(ie=Math.floor(.5+s*(e[Be+1]+f[1])))*ie+(ce=Math.floor(.5+s*(e[Be+2]+f[2])))*ce&&(b[Oe]=H)}}else m[Oe]|=C,v&&(b[Oe]=H)}}}Re++}}function $(){var H,B,V,J;console.time("EDTSurface fastdistancemap");var K,ie=die(l,c,u,Uint16Array,3),ce=c*u,pe=g*g,se=0;for(H=0;H<l;++H)for(B=0;B<c;++B)for(V=0;V<u;++V)m[K=H*ce+B*u+V]&=~C,m[K]&S&&m[K]&A&&(ie.set(H,B,V,H,B,V),y[K]=0,m[K]|=C,se+=1);var G=new Int32Array(3*se),he=0,Z=new Int32Array(3*se),ae=0;for(H=0;H<l;++H)for(B=0;B<c;++B)for(V=0;V<u;++V)m[K=H*ce+B*u+V]&A&&(G[he]=H,G[he+1]=B,G[he+2]=V,he+=3,m[K]&=~A);do for(ae=z(G,ie,he,Z),he=0,H=0,J=ae;H<J;H+=3)K=ce*Z[H]+u*Z[H+1]+Z[H+2],m[K]&=~A,y[K]<=1.0404*pe&&(G[he]=Z[H],G[he+1]=Z[H+1],G[he+2]=Z[H+2],he+=3);while(he>0);var oe,te=a*a,ve=new Uint16Array(3);for(H=0;H<l;++H)for(B=0;B<c;++B)for(V=0;V<u;++V)m[K=H*ce+B*u+V]&=~A,m[K]&S&&(m[K]&C&&!(m[K]&C&&y[K]>=te)||(m[K]|=A,v&&m[K]&C&&(ie.toArray(H,B,V,ve),oe=ve[0]*ce+ve[1]*u+ve[2],b[K]=b[oe])));console.timeEnd("EDTSurface fastdistancemap")}function z(H,B,V,J){var K,ie,ce,pe,se,G,he,Z,ae,oe,te,ve,ne=new Uint16Array(3),xe=0;if(V===0)return xe;var Ce=-1,me=-1,X=-1,Q=c*u;for(he=0,ae=V;he<ae;he+=3)for(K=H[he],ie=H[he+1],ce=H[he+2],B.toArray(K,ie,ce,ne),Z=0;Z<6;++Z)Ce=K+(ve=T[Z])[0],me=ie+ve[1],X=ce+ve[2],Ce<l&&Ce>-1&&me<c&&me>-1&&X<u&&X>-1&&(m[te=Ce*Q+u*me+X]&S&&!(m[te]&C)?(B.fromArray(Ce,me,X,ne),oe=(pe=Ce-ne[0])*pe+(se=me-ne[1])*se+(G=X-ne[2])*G,y[te]=oe,m[te]|=C,m[te]|=A,J[xe]=Ce,J[xe+1]=me,J[xe+2]=X,xe+=3):m[te]&S&&m[te]&C&&(oe=(pe=Ce-ne[0])*pe+(se=me-ne[1])*se+(G=X-ne[2])*G)<y[te]&&(B.fromArray(Ce,me,X,ne),y[te]=oe,m[te]&A||(m[te]|=A,J[xe]=Ce,J[xe+1]=me,J[xe+2]=X,xe+=3)));for(he=0,ae=V;he<ae;he+=3)for(K=H[he],ie=H[he+1],ce=H[he+2],B.toArray(K,ie,ce,ne),Z=6;Z<18;Z++)Ce=K+(ve=T[Z])[0],me=ie+ve[1],X=ce+ve[2],Ce<l&&Ce>-1&&me<c&&me>-1&&X<u&&X>-1&&(m[te=Ce*Q+u*me+X]&S&&!(m[te]&C)?(B.fromArray(Ce,me,X,ne),oe=(pe=Ce-ne[0])*pe+(se=me-ne[1])*se+(G=X-ne[2])*G,y[te]=oe,m[te]|=C,m[te]|=A,J[xe]=Ce,J[xe+1]=me,J[xe+2]=X,xe+=3):m[te]&S&&m[te]&C&&(oe=(pe=Ce-ne[0])*pe+(se=me-ne[1])*se+(G=X-ne[2])*G)<y[te]&&(B.fromArray(Ce,me,X,ne),y[te]=oe,m[te]&A||(m[te]|=A,J[xe]=Ce,J[xe+1]=me,J[xe+2]=X,xe+=3)));for(he=0,ae=V;he<ae;he+=3)for(K=H[he],ie=H[he+1],ce=H[he+2],B.toArray(K,ie,ce,ne),Z=18;Z<26;Z++)Ce=K+(ve=T[Z])[0],me=ie+ve[1],X=ce+ve[2],Ce<l&&Ce>-1&&me<c&&me>-1&&X<u&&X>-1&&(m[te=Ce*Q+u*me+X]&S&&!(m[te]&C)?(B.fromArray(Ce,me,X,ne),oe=(pe=Ce-ne[0])*pe+(se=me-ne[1])*se+(G=X-ne[2])*G,y[te]=oe,m[te]|=C,m[te]|=A,J[xe]=Ce,J[xe+1]=me,J[xe+2]=X,xe+=3):m[te]&S&&m[te]&C&&(oe=(pe=Ce-ne[0])*pe+(se=me-ne[1])*se+(G=X-ne[2])*G)<y[te]&&(B.fromArray(Ce,me,X,ne),y[te]=oe,m[te]&A||(m[te]|=A,J[xe]=Ce,J[xe+1]=me,J[xe+2]=X,xe+=3)));return xe}this.getVolume=function(H,B,V,J,K){console.time("EDTSurface.getVolume");var ie=H!=="vws";w(ie,B,V,J,K),L(ie),function(){var se,G,he,Z=c*u;for(se=0;se<l;++se)for(G=0;G<u;++G)for(he=0;he<c;++he){var ae=se*Z+he*u+G;if(m[ae]&S)for(var oe=0;oe<26;){var te=se+T[oe][0],ve=G+T[oe][2],ne=he+T[oe][1];if(te>-1&&te<l&&ne>-1&&ne<c&&ve>-1&&ve<u&&!(m[te*Z+ne*u+ve]&S)){m[ae]|=A;break}oe++}}}(),H!=="ms"&&H!=="ses"||$(),H==="ses"&&(O(!1),function(){var se,G;for(se=0,G=m.length;se<G;++se)m[se]&=~C;for(se=0,G=e.length/3;se<G;++se)D(se)}()),function(se){var G,he=m.length;if(se==="vws")for(G=0;G<he;++G)m[G]&=~A,m[G]=m[G]&C?1:0;else if(se==="ms")for(G=0;G<he;++G)m[G]&=~C,m[G]&A&&(m[G]|=C),m[G]&=~A,m[G]=m[G]&C?1:0;else if(se==="ses")for(G=0;G<he;++G)m[G]&A&&m[G]&C?m[G]&=~A:m[G]&A&&!(m[G]&C)&&(m[G]|=C),m[G]=m[G]&C?1:0;else if(se==="sas")for(G=0;G<he;++G)m[G]&=~A,m[G]=m[G]&C?1:0}(H);for(var ce=0,pe=b.length;ce<pe;++ce)b[ce]=n[b[ce]];return console.timeEnd("EDTSurface.getVolume"),{data:m,nx:u,ny:c,nz:l,atomindex:b}},this.getSurface=function(H,B,V,J,K,ie,ce){var pe=this.getVolume(H,B,V,J,K);return new $u(pe.data,pe.nx,pe.ny,pe.nz,pe.atomindex).getSurface(1,ie,void 0,d,ce)}}function fie(e,t,n,r,i,o,s){s=Math.max(.1,s);var a=e.length,l=i[0],c=i[1],u=i[2],d=o[0],f=o[1],h=o[2];function p(V,J){return Math.floor((V-J)/s)}for(var g,v,m,y=p(d,l)+1,b=p(f,c)+1,_=p(h,u)+1,x=y*b*_,w=b*_,S=[],C=0;C<a;C++){var A=(g=e[C],v=t[C],m=n[C],(p(g,l)*b+p(v,c))*_+p(m,u));S[A]===void 0?S[A]=[C]:S[A].push(C)}var T=new Uint32Array(x),O=new Uint16Array(x),R=new Uint32Array(a),L=0,D=0;for(C=0;C<x;C++){var $=T[C]=L,z=S[C];if(z!==void 0)for(var H=0;H<z.length;H++)R[L]=z[H],L++;var B=L-$;O[C]=B,B>D&&(D=B)}return{neighbourListLength:27*D+1,withinRadii:function(V,J,K,ie,ce){for(var pe=0,se=p(V,l),G=p(J,c),he=p(K,u),Z=Math.max(0,se-1),ae=Math.max(0,G-1),oe=Math.max(0,he-1),te=Math.min(y,se+2),ve=Math.min(b,G+2),ne=Math.min(_,he+2),xe=Z;xe<te;++xe)for(var Ce=xe*w,me=ae;me<ve;++me)for(var X=me*_,Q=oe;Q<ne;++Q)for(var Re=Ce+X+Q,Pe=T[Re],le=Pe+O[Re],Oe=Pe;Oe<le;Oe++){var Be=R[Oe],De=e[Be]-V,Ee=t[Be]-J,Ie=n[Be]-K,U=r[Be]+ie;De*De+Ee*Ee+Ie*Ie<=U*U&&(ce[pe++]=R[Oe])}ce[pe]=-1}}}function OS(e,t,n){const r=t.length,i=new Float32Array(r),o=new Float32Array(r),s=new Float32Array(r);for(let se=0;se<r;se++){const G=3*se;i[se]=e[G],o[se]=e[G+1],s[se]=e[G+2]}let a=jb(e);e.length===0&&(a[0].set([0,0,0]),a[1].set([0,0,0]));const l=a[0],c=a[1];let u,d,f,h,p,g,v,m,y,b,_,x,w,S,C,A,T,O,R=-1;const L=new Float32Array([0,0,0]),D=new Float32Array([0,0,0]),$=new Float32Array([0,0,0]),z=new Float32Array([0,0,0]);let H;function B(se,G,he,Z){h=re(se,1.4),p=re(G,2),g=re(he,!0),v=re(Z,30),u=new Float32Array(r),d=new Float32Array(r);for(let oe=0;oe<u.length;++oe){var ae=t[oe]+h;u[oe]=ae,d[oe]=ae*ae}f=0;for(let oe=0;oe<u.length;++oe)u[oe]>f&&(f=u[oe]);(function(){const oe=Wb(l,c,f,p,0);p=oe.scaleFactor,m=oe.dim,y=oe.matrix,H=Math.max(5,2+Math.floor(h*p)),b=rs(m[0]*m[1]*m[2],-1001),_=new Int32Array(b.length),x=new Float32Array(m[0]),w=new Float32Array(m[1]),S=new Float32Array(m[2]),V(x,l[0],1/p),V(w,l[1],1/p),V(S,l[2],1/p)})(),function(){var oe=0,te=2*Math.PI/v;A=new Float32Array(v),C=new Float32Array(v);for(var ve=0;ve<v;ve++)A[ve]=Math.cos(oe),C[ve]=Math.sin(oe),oe+=te}(),T=fie(i,o,s,u,l,c,2.01*f),O=new Int32Array(T.neighbourListLength),R=-1}function V(se,G,he){for(let Z=0;Z<se.length;Z++)se[Z]=G+he*Z}function J(se,G,he,Z,ae){let oe;if(R!==-1){if(oe=R,oe!==Z&&oe!==ae&&K(oe,se,G,he))return oe;R=-1}var te=0;for(oe=O[te];oe>=0;){if(oe!==Z&&oe!==ae&&K(oe,se,G,he))return R=oe,oe;oe=O[++te]}return R=-1,-1}function K(se,G,he,Z){var ae=3*se,oe=d[se],te=e[ae]-G,ve=e[ae+1]-he,ne=e[ae+2]-Z;return te*te+ve*ve+ne*ne<oe}function ie(){for(var se=0;se<r;se++){var G=i[se],he=o[se],Z=s[se],ae=u[se],oe=d[se];T.withinRadii(G,he,Z,ae,O);for(var te=Math.ceil(ae*p),ve=Math.floor(p*(G-l[0])),ne=Math.floor(p*(he-l[1])),xe=Math.floor(p*(Z-l[2])),Ce=Math.max(0,ve-te),me=Math.max(0,ne-te),X=Math.max(0,xe-te),Q=Math.min(m[0],ve+te+2),Re=Math.min(m[1],ne+te+2),Pe=Math.min(m[2],xe+te+2),le=Ce;le<Q;le++)for(var Oe=x[le]-G,Be=m[1]*m[2]*le,De=me;De<Re;De++)for(var Ee=w[De]-he,Ie=Oe*Oe+Ee*Ee,U=Be+m[2]*De,E=X;E<Pe;E++){var P=S[E]-Z,ee=Ie+P*P;if(ee<oe){var ye=E+U;b[ye]<0&&(b[ye]=-b[ye]);var be=Math.sqrt(ee),Me=ae/be,ze=Oe*Me,Ge=Ee*Me,Xe=P*Me;if(J(ze+=G,Ge+=he,Xe+=Z,se,-1)===-1){var ut=ae-be;ut<b[ye]&&(b[ye]=ut,g&&(_[ye]=se))}}}}}function ce(se,G){var he=u[se],Z=u[G],ae=L[0]=i[G]-i[se],oe=L[1]=o[G]-o[se],te=L[2]=s[G]-s[se],ve=ae*ae+oe*oe+te*te,ne=Math.sqrt(ve),xe=he*((he*he+ne*ne-Z*Z)/(2*he*ne));yr(L,L),function(yt,Ke){yt[0]=yt[1]=yt[2]=1,Ke[0]!==0?yt[0]=(Ke[1]+Ke[2])/-Ke[0]:Ke[1]!==0?yt[1]=(Ke[0]+Ke[2])/-Ke[1]:Ke[2]!==0&&(yt[2]=(Ke[0]+Ke[1])/-Ke[2])}($,L),yr($,$),Ao(z,L,$),yr(z,z);var Ce=Math.sqrt(he*he-xe*xe);On($,$,Ce),On(z,z,Ce),On(L,L,xe),D[0]=L[0]+i[se],D[1]=L[1]+o[se],D[2]=L[2]+s[se],R=-1;for(var me=H,X=0;X<v;X++){var Q=A[X],Re=C[X],Pe=D[0]+Q*$[0]+Re*z[0],le=D[1]+Q*$[1]+Re*z[1],Oe=D[2]+Q*$[2]+Re*z[2];if(J(Pe,le,Oe,se,G)===-1)for(var Be=Math.floor(p*(Pe-l[0])),De=Math.floor(p*(le-l[1])),Ee=Math.floor(p*(Oe-l[2])),Ie=Math.max(0,Be-me),U=Math.max(0,De-me),E=Math.max(0,Ee-me),P=Math.min(m[0],Be+me+2),ee=Math.min(m[1],De+me+2),ye=Math.min(m[2],Ee+me+2),be=Ie;be<P;be++){ae=Pe-x[be];for(var Me=m[1]*m[2]*be,ze=U;ze<ee;ze++)for(var Ge=ae*ae+(oe=le-w[ze])*oe,Xe=Me+m[2]*ze,ut=E;ut<ye;ut++){ve=Ge+(te=Oe-S[ut])*te;var rt=ut+Xe,dt=b[rt];if(dt>0&&ve<dt*dt&&(b[rt]=Math.sqrt(ve),g)){const yt=ae*L[0]+oe*L[1]+te*L[2];_[rt]=yt<0?G:se}}}}}function pe(se,G,he){console.time("AVSurface.getVolume"),console.time("AVSurface.init"),B(se,G,he),console.timeEnd("AVSurface.init"),console.time("AVSurface.projectPoints"),ie(),console.timeEnd("AVSurface.projectPoints"),console.time("AVSurface.projectTorii"),function(){for(var Z=0;Z<r;Z++){T.withinRadii(i[Z],o[Z],s[Z],u[Z],O);for(var ae=0,oe=O[ae];oe>=0;)Z<oe&&ce(Z,oe),oe=O[++ae]}}(),console.timeEnd("AVSurface.projectTorii"),function(){for(var Z=0;Z<b.length;Z++)b[Z]<0&&(b[Z]=0)}(),function(){for(var Z=0;Z<_.length;Z++)_[Z]=n[_[Z]]}(),console.timeEnd("AVSurface.getVolume")}this.getSurface=function(se,G,he,Z,ae,oe,te){return pe(G,he,ae),new $u(b,m[2],m[1],m[0],_).getSurface(G,!1,void 0,y,te)}}Zn.add("line",Wat),Object.assign(TS,{__deps:[Wb,zre,$u,jb,die]}),Object.assign(OS,{__deps:[Wb,$u,rs,jb,On,Ao,yr,fie,re]}),by.add("molsurf",function(e,t){const n=e.data.args,r=e.data.params;if(n&&r){const i=new(r.type==="av"?OS:TS)(n.coordList,n.radiusList,n.indexList).getSurface(r.type,r.probeRadius,r.scaleFactor,r.cutoff,!0,r.smooth,r.contour),o=[i.position.buffer,i.index.buffer];i.normal&&o.push(i.normal.buffer),i.atomindex&&o.push(i.atomindex.buffer),t({sd:i,p:r},o)}},[TS,OS]);class qat{constructor(t){this.structure=t}_getAtomData(t){return this.structure.getAtomData({what:{position:!0,radius:!0,index:!0},radiusParams:re(t.radiusParams,{type:"vdw",scale:1})})}_makeSurface(t,n){var r=new jE(n.name,"",t);return r.info.type=n.type,r.info.probeRadius=n.probeRadius,r.info.scaleFactor=n.scaleFactor,r.info.smooth=n.smooth,r.info.cutoff=n.cutoff,r}getSurface(t){const n=t||{},r=this._getAtomData(t),i=r.position,o=r.radius,s=r.index,a=new(n.type==="av"?OS:TS)(i,o,s).getSurface(n.type,n.probeRadius,n.scaleFactor,n.cutoff,!0,n.smooth,n.contour);return this._makeSurface(a,n)}getSurfaceWorker(t,n){const r=Object.assign({},t);if(window.hasOwnProperty("Worker")){this.worker===void 0&&(this.worker=new bre("molsurf"));const i=this._getAtomData(t),o=i.position,s=i.radius,a=i.index,l={args:{coordList:o,radiusList:s,indexList:a},params:r},c=[o.buffer,s.buffer,a.buffer];this.worker.post(l,c,u=>{n(this._makeSurface(u.data.sd,r))},u=>{console.warn("MolecularSurface.getSurfaceWorker error - trying without worker",u),this.worker.terminate(),this.worker=void 0;const d=this.getSurface(r);n(d)})}else{const i=this.getSurface(r);n(i)}}dispose(){this.worker&&this.worker.terminate()}}class Yat extends Ei{constructor(t,n,r){super(t,n,r),this.type="surface",this.parameters=Object.assign({surfaceType:{type:"select",rebuild:!0,options:{vws:"vws",sas:"sas",ms:"ms",ses:"ses",av:"av"}},probeRadius:{type:"number",precision:1,max:20,min:0,rebuild:!0},smooth:{type:"integer",precision:1,max:10,min:0,rebuild:!0},scaleFactor:{type:"number",precision:1,max:5,min:0,rebuild:!0},cutoff:{type:"number",precision:2,max:50,min:0,rebuild:!0},contour:{type:"boolean",rebuild:!0},background:{type:"boolean",rebuild:!0},opaqueBack:{type:"boolean",buffer:!0},filterSele:{type:"text",rebuild:!0},colorVolume:{type:"hidden"},useWorker:{type:"boolean",rebuild:!0}},this.parameters,{radius:null,scale:null}),this.__infoList=[],this.structure.signals.refreshed.add(()=>{this.__forceNewMolsurf=!0}),this.toBePrepared=!0,this.init(r)}init(t){const n=t||{};n.colorScheme=re(n.colorScheme,"uniform"),n.colorValue=re(n.colorValue,14540253),n.disablePicking=re(n.disablePicking,!0),this.surfaceType=re(n.surfaceType,"ms"),this.probeRadius=re(n.probeRadius,1.4),this.smooth=re(n.smooth,2),this.scaleFactor=re(n.scaleFactor,2),this.cutoff=re(n.cutoff,0),this.contour=re(n.contour,!1),this.background=re(n.background,!1),this.opaqueBack=re(n.opaqueBack,!0),this.filterSele=re(n.filterSele,""),this.colorVolume=re(n.colorVolume,void 0),this.useWorker=re(n.useWorker,!0),super.init(t)}prepareData(t,n,r){let i=this.__infoList[n];if(i||(i={},this.__infoList[n]=i),i.molsurf&&i.sele===t.selection.string)r(n);else{if(this.filterSele){const a=t.structure.getView(new Xn(this.filterSele)),l=a.boundingBox.getSize(new W),c=Math.max(l.x,l.y,l.z),u=t.getAtomSetWithinPoint(a.center,c/2+6);if((t=t.getView(new Xn(t.getAtomSetWithinSelection(u,3).toSeleString()))).atomCount===0)return void r(n)}i.sele=t.selection.string,i.molsurf=new qat(t);const o=this.getSurfaceParams(),s=a=>{i.surface=a,r(n)};this.useWorker?i.molsurf.getSurfaceWorker(o,s):s(i.molsurf.getSurface(o))}}prepare(t){if((this.__forceNewMolsurf||this.__sele!==this.selection.string||this.__surfaceParams!==JSON.stringify(this.getSurfaceParams()))&&(this.__infoList.forEach(o=>{o&&o.molsurf&&o.molsurf.dispose()}),this.__infoList.length=0),this.structureView.atomCount===0)return void t();const n=()=>{this.__sele=this.selection.string,this.__surfaceParams=JSON.stringify(this.getSurfaceParams()),this.__forceNewMolsurf=!1,t()},r=this.assembly==="default"?this.defaultAssembly:this.assembly,i=this.structure.biomolDict[r];i?i.partList.forEach((o,s)=>{const a=o.getView(this.structureView);this.prepareData(a,s,l=>{l===i.partList.length-1&&n()})}):this.prepareData(this.structureView,0,n)}createData(t,n){const r=this.__infoList[n],i=r.surface;if(!i)return;const o={position:i.getPosition(),color:i.getColor(this.getColorParams()),index:i.getFilteredIndex(this.filterSele,t)},s=[];if(i.contour){const a=new Vre(o,this.getBufferParams({wireframe:!1}));s.push(a)}else{Object.assign(o,{normal:i.getNormal(),picking:i.getPicking(t.getStructure())});const a=new jre(o,this.getBufferParams({background:this.background,opaqueBack:this.opaqueBack,dullInterior:!1}));if(this.getBufferParams().side=="double"){const l=new Ure(a);s.push(l)}else s.push(a)}return{bufferList:s,info:r}}updateData(t,n){const r={};if(t.position||t.radius)return this.__forceNewMolsurf=!0,void this.build();t.color&&(r.color=n.info.surface.getColor(this.getColorParams())),t.index&&(r.index=n.info.surface.getFilteredIndex(this.filterSele,n.sview)),n.bufferList[0].setAttributes(r)}setParameters(t,n={},r){return t&&t.filterSele&&(n.index=!0),t&&t.colorVolume!==void 0&&(n.color=!0),t&&t.wireframe&&(t.contour||t.contour===void 0&&this.contour)&&(t.wireframe=!1),super.setParameters(t,n,r),this}getSurfaceParams(t={}){return Object.assign({type:this.surfaceType,probeRadius:this.probeRadius,scaleFactor:this.scaleFactor,smooth:this.smooth&&!this.contour,cutoff:this.cutoff,contour:this.contour,useWorker:this.useWorker,radiusParams:this.getRadiusParams()},t)}getColorParams(){const t=super.getColorParams();return t.volume=this.colorVolume,t}getAtomRadius(){return 0}clear(){super.clear()}dispose(){this.__infoList.forEach(t=>{t&&t.molsurf&&t.molsurf.dispose()}),this.__infoList.length=0,super.dispose()}}Zn.add("surface",Yat);class Xat extends Ei{constructor(t,n,r){super(t,n,r),this.type="point",this.parameters=Object.assign({pointSize:{type:"number",precision:1,max:100,min:0,buffer:!0},sizeAttenuation:{type:"boolean",buffer:!0},sortParticles:{type:"boolean",rebuild:!0},useTexture:{type:"boolean",buffer:!0},alphaTest:{type:"range",step:.001,max:1,min:0,buffer:!0},forceTransparent:{type:"boolean",buffer:!0},edgeBleach:{type:"range",step:.001,max:1,min:0,buffer:!0}},this.parameters,{flatShaded:null,wireframe:null,linewidth:null,side:null,roughness:null,metalness:null}),this.init(r)}init(t){var n=t||{};this.pointSize=re(n.pointSize,1),this.sizeAttenuation=re(n.sizeAttenuation,!0),this.sortParticles=re(n.sortParticles,!1),this.useTexture=re(n.useTexture,!1),this.alphaTest=re(n.alphaTest,.5),this.forceTransparent=re(n.forceTransparent,!1),this.edgeBleach=re(n.edgeBleach,0),super.init(n)}createData(t){var n=t.getAtomData(this.getAtomParams({position:!0,color:!0,picking:!0}));return{bufferList:[new vB(n,this.getBufferParams({pointSize:this.pointSize,sizeAttenuation:this.sizeAttenuation,sortParticles:this.sortParticles,useTexture:this.useTexture,alphaTest:this.alphaTest,forceTransparent:this.forceTransparent,edgeBleach:this.edgeBleach}))]}}updateData(t,n){var r=n.sview.getAtomData(this.getAtomParams(t)),i={};t&&!t.position||Object.assign(i,{position:r.position}),t&&!t.color||Object.assign(i,{color:r.color}),n.bufferList[0].setAttributes(i)}getAtomRadius(){return .1}}Zn.add("point",Xat),dn.add("shader/Ribbon.vert",`#define STANDARD
uniform float clipNear;
uniform vec3 clipCenter;
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )
varying vec3 vViewPosition;
#endif
#if defined( RADIUS_CLIP )
varying vec3 vClipCenter;
#endif
attribute vec3 dir;
attribute float size;
#ifdef PICKING
#include unpack_color
attribute float primitiveId;
varying vec3 vPickingColor;
#else
#include color_pars_vertex
#ifndef FLAT_SHADED
varying vec3 vNormal;
#endif
#endif
#include common
void main(void){
#ifdef PICKING
vPickingColor = unpackColor( primitiveId );
#else
#include color_vertex
#include beginnormal_vertex
#include defaultnormal_vertex
#ifndef FLAT_SHADED
vNormal = normalize( transformedNormal );
#endif
#endif
#include begin_vertex
transformed += normalize( dir ) * size;
#include project_vertex
#if defined( NEAR_CLIP ) || defined( RADIUS_CLIP ) || !defined( PICKING )
vViewPosition = -mvPosition.xyz;
#endif
#if defined( RADIUS_CLIP )
vClipCenter = -( modelViewMatrix * vec4( clipCenter, 1.0 ) ).xyz;
#endif
#include nearclip_vertex
}`);const Kat=new Uint16Array([0,1,2,1,3,2]);function f0(e){return 3*(4*(e.position.length/3-1))}class Zat extends Ac{constructor(t,n={}){super({position:new Float32Array(f0(t)),color:new Float32Array(f0(t)),index:bl(f0(t),f0(t)/3),normal:new Float32Array(f0(t)),picking:t.picking},n),this.vertexShader="Ribbon.vert";const r=t.position.length/3-1,i=4*r,o=3*i;this.addAttributes({dir:{type:"v3",value:new Float32Array(o)}}),this.addAttributes({size:{type:"f",value:new Float32Array(i)}}),t.primitiveId=gv(r),this.setAttributes(t),this.makeIndex()}setAttributes(t={}){const n=this.size/4,r=this.geometry.attributes;let i,o,s,a,l,c,u,d,f,h,p,g,v,m,y,b,_,x,w;t.position&&(i=t.position,u=r.position.array,r.position.needsUpdate=!0),t.normal&&(o=t.normal,d=r.normal.array,r.normal.needsUpdate=!0),t.size&&(s=t.size,f=r.size.array,r.size.needsUpdate=!0),t.dir&&(a=t.dir,h=r.dir.array,r.dir.needsUpdate=!0),t.color&&(l=t.color,p=r.color.array,r.color.needsUpdate=!0),t.primitiveId&&(c=t.primitiveId,g=r.primitiveId.array,r.primitiveId.needsUpdate=!0);let S=s?s[0]:null;for(v=0;v<n;++v){for(x=3*v,y=3*v*4,_=4*v,i&&(u[y]=u[y+3]=i[x],u[y+1]=u[y+4]=i[x+1],u[y+2]=u[y+5]=i[x+2],u[y+6]=u[y+9]=i[x+3],u[y+7]=u[y+10]=i[x+4],u[y+8]=u[y+11]=i[x+5]),o&&(d[y]=d[y+3]=-o[x],d[y+1]=d[y+4]=-o[x+1],d[y+2]=d[y+5]=-o[x+2],d[y+6]=d[y+9]=-o[x+3],d[y+7]=d[y+10]=-o[x+4],d[y+8]=d[y+11]=-o[x+5]),m=0;m<4;++m)b=y+3*m,l&&(p[b]=l[x],p[b+1]=l[x+1],p[b+2]=l[x+2]),c&&(g[_+m]=c[v]);s&&(w=s[v],S!==s[v]?(f[_]=S,f[_+1]=S,f[_+2]=w,f[_+3]=w):(f[_]=w,f[_+1]=w,f[_+2]=w,f[_+3]=w),S=w),a&&(h[y]=a[x],h[y+1]=a[x+1],h[y+2]=a[x+2],h[y+3]=-a[x],h[y+4]=-a[x+1],h[y+5]=-a[x+2],h[y+6]=a[x+3],h[y+7]=a[x+4],h[y+8]=a[x+5],h[y+9]=-a[x+3],h[y+10]=-a[x+4],h[y+11]=-a[x+5])}}makeIndex(){const t=this.geometry.getIndex();if(!t)return void Ve.error("Index is null");const n=t.array,r=n.length/4/3;for(let i=0;i<r;++i){const o=6*i,s=4*i;n.set(Kat,o);for(let a=0;a<6;++a)n[o+a]+=s}}}class Jat extends Ei{constructor(t,n,r){super(t,n,r),this.type="ribbon",this.parameters=Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters,{side:null,wireframe:null,linewidth:null}),this.init(r)}init(t){var n=t||{};n.colorScheme=re(n.colorScheme,"chainname"),n.colorScale=re(n.colorScale,"RdYlBu"),n.radiusType=re(n.radiusType,"sstruc"),n.radiusScale=re(n.radiusScale,4),n.quality==="low"?this.subdiv=3:n.quality==="medium"?this.subdiv=6:n.quality==="high"?this.subdiv=12:this.subdiv=re(n.subdiv,6),this.tension=re(n.tension,NaN),this.smoothSheet=re(n.smoothSheet,!1),super.init(n)}getSplineParams(t){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:!0,smoothSheet:this.smoothSheet},t)}getAtomRadius(t){return t.isTrace()?super.getAtomRadius(t):0}createData(t){var n=[],r=[];return this.structure.eachPolymer(i=>{if(!(i.residueCount<4)){r.push(i);var o=new Lg(i,this.getSplineParams()),s=o.getSubdividedPosition(),a=o.getSubdividedOrientation(),l=o.getSubdividedColor(this.getColorParams()),c=o.getSubdividedPicking(),u=o.getSubdividedSize(this.getRadiusParams());n.push(new Zat({position:s.position,normal:a.binormal,dir:a.normal,color:l.color,size:u.size,picking:c.picking},this.getBufferParams()))}},t.getSelection()),{bufferList:n,polymerList:r}}updateData(t,n){t=t||{};var r=0,i=n.polymerList.length;for(r=0;r<i;++r){var o={},s=new Lg(n.polymerList[r],this.getSplineParams());if(t.position){var a=s.getSubdividedPosition(),l=s.getSubdividedOrientation();Object.assign(o,{position:a.position,normal:l.binormal,dir:l.normal})}if(t.radius||t.scale){var c=s.getSubdividedSize(this.getRadiusParams());Object.assign(o,{size:c.size})}if(t.color){var u=s.getSubdividedColor(this.getColorParams());Object.assign(o,{color:u.color})}n.bufferList[r].setAttributes(o)}}setParameters(t){var n={};return t&&t.tension&&Object.assign(n,{position:!0}),super.setParameters(t,n,!1),this}}Zn.add("ribbon",Jat);class Qat extends Ei{constructor(t,n,r){super(t,n,r),this.type="rocket",this.parameters=Object.assign({localAngle:{type:"integer",max:180,min:0,rebuild:!0},centerDist:{type:"number",precision:1,max:10,min:0,rebuild:!0},ssBorder:{type:"boolean",rebuild:!0},radialSegments:!0,openEnded:!0,disableImpostor:!0},this.parameters),this.init(r)}init(t){let n=t||{};n.colorScheme=re(n.colorScheme,"sstruc"),n.radiusSize=re(n.radiusSize,1.5),n.radiusScale=re(n.radiusScale,1),n.openEnded=re(n.openEnded,!1),n.useInteriorColor=re(n.useInteriorColor,!0),this.localAngle=re(n.localAngle,30),this.centerDist=re(n.centerDist,2.5),this.ssBorder=re(n.ssBorder,!1),super.init(n)}createData(t){let n=0;const r=[],i=[];this.structure.eachPolymer(l=>{if(l.residueCount<4||l.isNucleic())return;const c=new qre(l),u=c.getAxis(this.localAngle,this.centerDist,this.ssBorder,this.getColorParams(),this.getRadiusParams());n+=u.size.length,r.push(u),i.push(c)},t.getSelection());const o={begin:new Float32Array(3*n),end:new Float32Array(3*n),size:new Float32Array(n),color:new Float32Array(3*n),picking:{}};let s=new Float32Array(n),a=0;return r.forEach(function(l){o.begin.set(l.begin,3*a),o.end.set(l.end,3*a),o.size.set(l.size,a),o.color.set(l.color,3*a),s.set(l.picking.array,a),a+=l.size.length}),n&&(o.picking=new Bh(s,t.getStructure())),{bufferList:[new Bc({position1:o.begin,position2:o.end,color:o.color,color2:o.color,radius:o.size,picking:o.picking},this.getBufferParams({openEnded:this.openEnded,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0}))],axisList:r,helixbundleList:i,axisData:o}}updateData(t,n){if((t=t||{}).position)this.build();else{var r={};if(t.color||t.radius){var i=0;n.helixbundleList.forEach(o=>{var s=o.getAxis(this.localAngle,this.centerDist,this.ssBorder,this.getColorParams(),this.getRadiusParams());t.color&&n.axisData.color.set(s.color,3*i),(t.radius||t.scale)&&n.axisData.size.set(s.size,i),i+=s.size.length}),t.color&&Object.assign(r,{color:n.axisData.color,color2:n.axisData.color}),(t.radius||t.scale)&&Object.assign(r,{radius:n.axisData.size})}n.bufferList[0].setAttributes(r)}}}Zn.add("rocket",Qat);class elt extends wB{constructor(t,n,r){super(t,n,r),this.type="rope",this.parameters=Object.assign({smooth:{type:"integer",max:15,min:0,rebuild:!0}},this.parameters,{aspectRatio:null,smoothSheet:null})}init(t){var n=t||{};n.aspectRatio=1,n.tension=re(n.tension,.5),n.radiusScale=re(n.radiusScale,5),n.smoothSheet=!1,this.smooth=re(n.smooth,2),super.init(n)}getSpline(t){var n=new CC(t);return new Lg(t,this.getSplineParams({directional:!1,positionIterator:n.getCenterIterator(this.smooth)}))}}Zn.add("rope",elt);class tlt extends Ei{constructor(t,n,r){super(t,n,r),this.type="spacefill",this.parameters=Object.assign({sphereDetail:!0,disableImpostor:!0},this.parameters),this.init(r)}init(t){var n=t||{};n.useInteriorColor=re(n.useInteriorColor,!0),super.init(n)}createData(t){return{bufferList:[new gd(t.getAtomData(this.getAtomParams()),this.getBufferParams({sphereDetail:this.sphereDetail,dullInterior:!0,disableImpostor:this.disableImpostor}))]}}updateData(t,n){var r=n.sview.getAtomData(this.getAtomParams(t)),i={};t&&!t.position||Object.assign(i,{position:r.position}),t&&!t.color||Object.assign(i,{color:r.color}),t&&!t.radius||Object.assign(i,{radius:r.radius}),n.bufferList[0].setAttributes(i)}}function sV(e){return 3*(e.position.length/3-1)*2}Zn.add("spacefill",tlt);class nlt extends xl{constructor(t,n={}){super({position:new Float32Array(sV(t)),color:new Float32Array(sV(t))},n),this.isLine=!0,this.vertexShader="Line.vert",this.fragmentShader="Line.frag",this.setAttributes(t)}setAttributes(t){let n,r,i,o;const s=this.geometry.attributes;if(t.position&&(n=t.position,i=s.position.array,s.position.needsUpdate=!0),t.color&&(r=t.color,o=s.color.array,s.color.needsUpdate=!0),!n&&!r)return void Ve.warn("TraceBuffer.prototype.setAttributes no data");let a,l;const c=this.size-1;for(let u=0;u<c;++u)a=3*u,l=3*u*2,n&&(i[l]=n[a],i[l+1]=n[a+1],i[l+2]=n[a+2],i[l+3]=n[a+3],i[l+4]=n[a+4],i[l+5]=n[a+5]),r&&(o[l]=r[a],o[l+1]=r[a+1],o[l+2]=r[a+2],o[l+3]=r[a+3],o[l+4]=r[a+4],o[l+5]=r[a+5])}}class rlt extends Ei{constructor(t,n,r){super(t,n,r),this.type="trace",this.parameters=Object.assign({subdiv:{type:"integer",max:50,min:1,rebuild:!0},tension:{type:"number",precision:1,max:1,min:.1},smoothSheet:{type:"boolean",rebuild:!0}},this.parameters,{flatShaded:null,side:null,wireframe:null}),this.init(r)}init(t){var n=t||{};n.colorScheme=re(n.colorScheme,"chainname"),n.colorScale=re(n.colorScale,"RdYlBu"),n.quality==="low"?this.subdiv=3:n.quality==="medium"?this.subdiv=6:n.quality==="high"?this.subdiv=12:this.subdiv=re(n.subdiv,6),this.tension=re(n.tension,NaN),this.smoothSheet=re(n.smoothSheet,!1),super.init(n)}getSplineParams(t){return Object.assign({subdiv:this.subdiv,tension:this.tension,directional:!1,smoothSheet:this.smoothSheet},t)}getAtomRadius(t){return t.isTrace()?.1:0}createData(t){var n=[],r=[];return this.structure.eachPolymer(i=>{if(!(i.residueCount<4)){r.push(i);var o=new Lg(i,this.getSplineParams()),s=o.getSubdividedPosition(),a=o.getSubdividedColor(this.getColorParams());n.push(new nlt(Object.assign({},s,a),this.getBufferParams()))}},t.getSelection()),{bufferList:n,polymerList:r}}updateData(t,n){t=t||{};var r=0,i=n.polymerList.length;for(r=0;r<i;++r){var o={},s=new Lg(n.polymerList[r],this.getSplineParams());if(t.position){var a=s.getSubdividedPosition();Object.assign(o,{position:a.position})}if(t.color){var l=s.getSubdividedColor(this.getColorParams());Object.assign(o,{color:l.color})}n.bufferList[r].setAttributes(o)}}setParameters(t){var n={};return t&&t.tension&&Object.assign(n,{position:!0}),super.setParameters(t,n,!1),this}}Zn.add("trace",rlt);class ilt extends wB{constructor(t,n,r){super(t,n,r),this.type="tube",this.parameters=Object.assign({},this.parameters,{aspectRatio:null})}init(t){var n=t||{};n.aspectRatio=1,n.radiusScale=re(n.radiusScale,2),n.quality==="low"&&(this.radialSegments=5),super.init(n)}getSplineParams(){return super.getSplineParams({directional:!1})}}Zn.add("tube",ilt);class olt extends Ei{constructor(t,n,r){super(t,n,r),this.type="unitcell",this.parameters=Object.assign({radiusSize:{type:"number",precision:3,max:10,min:.001},sphereDetail:!0,radialSegments:!0,disableImpostor:!0},this.parameters,{assembly:null}),this.init(r)}init(t){const n=t||{};let r=.5;this.structure.unitcell&&(r=Math.cbrt(this.structure.unitcell.volume)/200),n.radiusSize=re(n.radiusSize,r),n.colorValue=re(n.colorValue,"orange"),n.useInteriorColor=re(n.useInteriorColor,!0),super.init(n)}getUnitcellData(t){return t.unitcell.getData(t)}create(){const t=this.structureView.getStructure();if(!t.unitcell)return;const n=this.getUnitcellData(t);this.sphereBuffer=new gd(n.vertex,this.getBufferParams({sphereDetail:this.sphereDetail,disableImpostor:this.disableImpostor,dullInterior:!0})),this.cylinderBuffer=new Bc(n.edge,this.getBufferParams({openEnded:!0,radialSegments:this.radialSegments,disableImpostor:this.disableImpostor,dullInterior:!0})),this.dataList.push({sview:this.structureView,bufferList:[this.sphereBuffer,this.cylinderBuffer]})}createData(t){}updateData(t,n){const r=n.sview.getStructure();if(!r.unitcell)return;const i=this.getUnitcellData(r),o={},s={};t&&!t.position||(Object.assign(o,{position:i.vertex.position}),Object.assign(s,{position1:i.edge.position1,position2:i.edge.position2})),t&&!t.color||(Object.assign(o,{color:i.vertex.color}),Object.assign(s,{color:i.edge.color,color2:i.edge.color2})),t&&!t.radius||(Object.assign(o,{radius:i.vertex.radius}),Object.assign(s,{radius:i.edge.radius})),this.sphereBuffer.setAttributes(o),this.cylinderBuffer.setAttributes(s)}}Zn.add("unitcell",olt);class slt extends Ei{constructor(t,n,r){super(t,n,r),this.type="validation",this.parameters=Object.assign({},this.parameters,{radiusType:null,radiusSize:null,radiusScale:null}),this.init(r)}init(t){const n=t||{};n.colorValue=re(n.colorValue,"#f0027f"),n.useInteriorColor=re(n.useInteriorColor,!0),super.init(n)}createData(t){if(!t.validation)return;const n=t.validation.getClashData({structure:t,color:this.colorValue});return{bufferList:[new Bc(n,this.getBufferParams({openEnded:!1}))]}}}Zn.add("validation",slt);const aV=new W,lI=new W,cI=new W,alt=new W(0,1,0),llt=Object.assign({radialSegments:60,openEnded:!1},eo);class hie extends md{constructor(t,n={}){super({position:new Float32Array(t.position1.length),color:t.color,picking:t.picking},n,function(r={}){const i=new Tb(1,1,re(r.radialSegments,60),1,re(r.openEnded,!1));return i.applyMatrix4(new lt().makeRotationX(-Math.PI/2)),i}(n)),this.updateNormals=!0,this._position=new Float32Array(t.position1.length),this.setAttributes(t,!0)}get defaultParameters(){return llt}applyPositionTransform(t,n,r){lI.fromArray(this._position1,r),cI.fromArray(this._position2,r),t.lookAt(lI,cI,alt);const i=this._radius[n];aV.set(i,i,lI.distanceTo(cI)),t.scale(aV)}setAttributes(t={},n){t.position1&&t.position2&&(cl(t.position1,t.position2,this._position),this._position1=t.position1,this._position2=t.position2,t.position=this._position),t.radius&&(this._radius=t.radius),super.setAttributes(t,n)}}us.add("cone",hie);class clt{constructor(t=[]){this.geometryList=t}computeBoundingBox(){this.boundingBox?this.boundingBox.empty():this.boundingBox=new zn,this.geometryList.forEach(t=>{t.boundingBox||t.computeBoundingBox(),this.boundingBox.union(t.boundingBox)})}}const ult=Object.assign({aspectRatio:1.5,radialSegments:50,openEnded:!1,disableImpostor:!1},eo);class dlt{constructor(t,n={}){this.group=new Tn,this.wireframeGroup=new Tn,this.pickingGroup=new Tn,this.visible=!0,this.parameters=ns(n,this.defaultParameters),this.splitPosition=new Float32Array(t.position1.length),this.cylinderRadius=new Float32Array(t.radius.length);const r=this.makeAttributes(t),i={radialSegments:this.parameters.radialSegments,openEnded:this.parameters.openEnded,disableImpostor:this.parameters.disableImpostor};this.cylinderBuffer=new Bc(r.cylinder,i),this.coneBuffer=new hie(r.cone,i),this.geometry=new clt([this.cylinderBuffer.geometry,this.coneBuffer.geometry]),this.matrix=re(n.matrix,new lt),this.picking=t.picking}get defaultParameters(){return ult}set matrix(t){xl.prototype.setMatrix.call(this,t)}get matrix(){return this.group.matrix.clone()}get pickable(){return!!this.picking}makeAttributes(t={}){const n=this.splitPosition,r=this.cylinderRadius,i=this.parameters.aspectRatio;let o,s;const a={},l={};if(t.radius){for(o=0,s=r.length;o<s;++o)r[o]=t.radius[o]/i;a.radius=r,l.radius=t.radius}if(t.position1&&t.position2){const c=new W,u=new W,d=new W,f=new W;for(o=0,s=n.length;o<s;o+=3){c.fromArray(t.position1,o),u.fromArray(t.position2,o),d.subVectors(c,u);const h=d.length(),p=r[o/3]*i*2,g=Math.min(h,p);d.setLength(g),f.copy(u).add(d),f.toArray(n,o)}a.position1=t.position1,a.position2=n,l.position1=n,l.position2=t.position2}return t.color&&(a.color=t.color,a.color2=t.color,l.color=t.color),{cylinder:a,cone:l}}getMesh(){return new Tn().add(this.cylinderBuffer.getMesh(),this.coneBuffer.getMesh())}getWireframeMesh(){return new Tn().add(this.cylinderBuffer.getWireframeMesh(),this.coneBuffer.getWireframeMesh())}getPickingMesh(){return new Tn().add(this.cylinderBuffer.getPickingMesh(),this.coneBuffer.getPickingMesh())}setAttributes(t={}){const n=this.makeAttributes(t);this.cylinderBuffer.setAttributes(n.cylinder),this.coneBuffer.setAttributes(n.cone)}setParameters(t={}){(t=Object.assign({},t))&&t.matrix!==void 0&&(this.matrix=t.matrix),delete t.matrix,t&&t.wireframe!==void 0&&(this.parameters.wireframe=t.wireframe,this.setVisibility(this.visible)),this.cylinderBuffer.setParameters(t),this.coneBuffer.setParameters(t)}setVisibility(t){xl.prototype.setVisibility.call(this,t)}dispose(){this.cylinderBuffer.dispose(),this.coneBuffer.dispose()}}us.add("arrow",dlt);const lV=new W,uI=new W,dI=new W,flt=new W(0,0,0);class hlt extends md{constructor(t,n={}){super(t,n,new wx(1,1,1)),this.updateNormals=!0,this.setAttributes(t,!0)}applyPositionTransform(t,n,r){uI.fromArray(this._heightAxis,r),dI.fromArray(this._depthAxis,r),t.lookAt(flt,uI,dI),lV.set(this._size[n],dI.length(),uI.length()),t.scale(lV)}setAttributes(t={},n){t.size&&(this._size=t.size),t.heightAxis&&(this._heightAxis=t.heightAxis),t.depthAxis&&(this._depthAxis=t.depthAxis),super.setAttributes(t,n)}}us.add("box",hlt);const cV=new W,fI=new W,hI=new W,plt=new W(0,0,0),mlt=Object.assign({sphereDetail:2},eo);class glt extends md{constructor(t,n={}){super(t,n,new sh(1,re(n.sphereDetail,2))),this.updateNormals=!0,this.setAttributes(t,!0)}get defaultParameters(){return mlt}applyPositionTransform(t,n,r){fI.fromArray(this._majorAxis,r),hI.fromArray(this._minorAxis,r),t.lookAt(plt,fI,hI),cV.set(this._radius[n],hI.length(),fI.length()),t.scale(cV)}setAttributes(t={},n){t.radius&&(this._radius=t.radius),t.majorAxis&&(this._majorAxis=t.majorAxis),t.minorAxis&&(this._minorAxis=t.minorAxis),super.setAttributes(t,n)}}us.add("ellipsoid",glt);const uV=new W,pI=new W,mI=new W,vlt=new W(0,0,0);class ylt extends md{constructor(t,n={}){super(t,n,new oh(1,0)),this.updateNormals=!0,this.setAttributes(t,!0)}applyPositionTransform(t,n,r){pI.fromArray(this._heightAxis,r),mI.fromArray(this._depthAxis,r),t.lookAt(vlt,pI,mI),uV.set(this._size[n],mI.length(),pI.length()),t.scale(uV)}setAttributes(t={},n){t.size&&(this._size=t.size),t.heightAxis&&(this._heightAxis=t.heightAxis),t.depthAxis&&(this._depthAxis=t.depthAxis),super.setAttributes(t,n)}}us.add("octahedron",ylt);const dV=new W,gI=new W,vI=new W,blt=new W(0,0,0);class xlt extends md{constructor(t,n={}){super(t,n,new pg(1,0)),this.updateNormals=!0,this.setAttributes(t,!0)}applyPositionTransform(t,n,r){gI.fromArray(this._heightAxis,r),vI.fromArray(this._depthAxis,r),t.lookAt(blt,gI,vI),dV.set(this._size[n],vI.length(),gI.length()),t.scale(dV)}setAttributes(t={},n){t.size&&(this._size=t.size),t.heightAxis&&(this._heightAxis=t.heightAxis),t.depthAxis&&(this._depthAxis=t.depthAxis),super.setAttributes(t,n)}}us.add("tetrahedron",xlt);const fV=new W,hV=new W,pV=new W,_lt=new W(0,0,0),wlt=Object.assign({radiusRatio:.2,radialSegments:16,tubularSegments:32},eo);class Slt extends md{constructor(t,n={}){super(t,n,new gg(1,re(n.radiusRatio,.2),re(n.radialSegments,16),re(n.tubularSegments,32))),this.updateNormals=!0,this.setAttributes(t,!0)}get defaultParameters(){return wlt}applyPositionTransform(t,n,r){hV.fromArray(this._majorAxis,r),pV.fromArray(this._minorAxis,r),t.lookAt(_lt,hV,pV);const i=this._radius[n];fV.set(i,i,i),t.scale(fV)}setAttributes(t={},n){t.radius&&(this._radius=t.radius),t.majorAxis&&(this._majorAxis=t.majorAxis),t.minorAxis&&(this._minorAxis=t.minorAxis),super.setAttributes(t,n)}}us.add("torus",Slt);class Ea{constructor(t,n){var r=n||{};this.streamer=t,this.name=re(r.name,""),this.path=re(r.path,"")}get type(){return""}get __objName(){return""}get isBinary(){return!1}get isJson(){return!1}get isXml(){return!1}parse(){return this.streamer.read().then(()=>(this._beforeParse(),this._parse(),this._afterParse(),this[this.__objName]))}_parse(){}_beforeParse(){}_afterParse(){Je&&Ve.log(this[this.__objName])}}class Nc extends Ea{constructor(t,n){var r=n||{};super(t,r),this.firstModelOnly=re(r.firstModelOnly,!1),this.asTrajectory=re(r.asTrajectory,!1),this.cAlphaOnly=re(r.cAlphaOnly,!1),this.structure=new Xa(this.name,this.path),this.structureBuilder=new tst(this.structure)}get type(){return"structure"}get __objName(){return"structure"}}class MC{constructor(t,n,r="",i,o=[]){this.structure=t,this.index=n,this.description=r,this.entityType=function(s){switch(s=s.toLowerCase()){case"polymer":return 1;case"non-polymer":return 2;case"macrolide":return 3;case"water":return 4;default:return 0}}(i||""),this.chainIndexList=o,o.forEach(function(s){t.chainStore.entityIndex[s]=n})}get type(){return function(t){switch(t){case 1:return"polymer";case 2:return"non-polymer";case 3:return"macrolide";case 4:return"water";default:return}}(this.entityType)}getEntityType(){return this.entityType}isPolymer(){return this.entityType===1}isNonPolymer(){return this.entityType===2}isMacrolide(){return this.entityType===3}isWater(){return this.entityType===4}eachChain(t){const n=this.structure.getChainProxy();this.chainIndexList.forEach(function(r){n.index=r,t(n)})}}const Clt={a:1,b:1,c:1,alpha:90,beta:90,gamma:90,spacegroup:"P 1"};class EC{constructor(t=Clt){this.cartToFrac=new lt,this.fracToCart=new lt,this.a=t.a,this.b=t.b,this.c=t.c,this.alpha=t.alpha,this.beta=t.beta,this.gamma=t.gamma,this.spacegroup=t.spacegroup;const n=br(this.alpha),r=br(this.beta),i=br(this.gamma),o=Math.cos(n),s=Math.cos(r),a=Math.cos(i),l=Math.sin(r),c=Math.sin(i);if(this.volume=this.a*this.b*this.c*Math.sqrt(1-o*o-s*s-a*a+2*o*s*a),t.cartToFrac===void 0){const u=this.a*this.b*c/this.volume,d=(s*a-o)/(l*c);this.fracToCart.set(this.a,0,0,0,this.b*a,this.b*c,0,0,this.c*s,-this.c*l*d,1/u,0,0,0,0,1).transpose(),this.cartToFrac.getInverse(this.fracToCart)}else this.cartToFrac.copy(t.cartToFrac),this.fracToCart.getInverse(this.cartToFrac)}getPosition(t){const n=new Float32Array(24);if(t.unitcell){const r=t.unitcell,i=t.center.clone().applyMatrix4(r.cartToFrac).floor(),o=new W;let s=0;const a=function(l,c,u){o.set(l,c,u).add(i).applyMatrix4(r.fracToCart).toArray(n,s),s+=3};a(0,0,0),a(1,0,0),a(0,1,0),a(0,0,1),a(1,1,0),a(1,0,1),a(0,1,1),a(1,1,1)}return n}getCenter(t){return function(n,r=new W){const i=n.length;for(let o=0;o<i;o+=3)r.x+=n[o],r.y+=n[o+1],r.z+=n[o+2];return r.divideScalar(i/3),r}(this.getPosition(t))}getData(t,n={}){const r=re(n.colorValue,"orange"),i=re(n.radius,Math.cbrt(this.volume)/200),o=new ht(r),s=new W,a=this.getPosition(t),l=En(8,o.r,o.g,o.b),c=rs(8,i),u=new Float32Array(36),d=new Float32Array(36),f=En(12,o.r,o.g,o.b),h=rs(12,i);let p=0;function g(m,y){s.fromArray(a,3*m).toArray(u,p),s.fromArray(a,3*y).toArray(d,p),p+=3}g(0,1),g(0,2),g(0,3),g(1,4),g(1,5),g(2,6),g(3,5),g(4,7),g(5,7),g(2,4),g(7,6),g(3,6);const v=new Pot(this,t);return{vertex:{position:a,color:l,radius:c,picking:v},edge:{position1:u,position2:d,color:f,color2:f,radius:h,picking:v}}}}const TC={1:"h",2:"h",3:"i",4:"h",5:"g",6:"h",7:"h",8:"h",9:"h",10:"h",0:"h"},Alt=["DAL","DAR","DSG","DAS","DCY","DGL","DGN","DHI","DIL","DLE","DLY","MED","DPN","DPR","DSN","DTH","DTR","DTY","DVA","DNE"],Plt=["MOL_ID","MOLECULE","CHAIN","FRAGMENT","SYNONYM","EC","ENGINEERED","MUTATION","OTHER_DETAILS"],mV=/\s+/;function gV(e,t,n){let r=`${e}`;return t&&(r+=`:${t}`),n&&(r+=`^${n}`),r}class wy extends Nc{constructor(t,n){const r=n||{};super(t,r),this.hex=re(r.hex,!1),this.inferBonds=re(r.inferBonds,"all")}get type(){return"pdb"}_parse(){Je&&Ve.time("PdbParser._parse "+this.name);let t=!1;const n=this.streamer.peekLines(1)[0],r=n.substr(62,4),i=n.substr(72,4);r===i&&i.trim()&&(t=!0);const o=this.type==="pqr",s=this.type==="pdbqt",a=this.structure,l=this.structureBuilder,c=this.hex;let u=10,d=10;const f=this.firstModelOnly,h=this.asTrajectory,p=this.cAlphaOnly,g=a.frames,v=a.boxes;let m,y,b=!1;const _=a.biomolDict;let x,w,S,C,A,T,O,R,L,D,$,z,H,B,V,J,K,ie,ce,pe,se,G,he={};const Z={},ae={},oe=[];let te,ve;const ne={},xe={},Ce={};let me,X,Q,Re,Pe,le,Oe;const Be={};let De;const Ee={helices:[],sheets:[]},Ie=Ee.helices,U=Ee.sheets,E=a.atomMap,P=a.atomStore;P.resize(Math.round(this.streamer.data.length/80)),(o||s)&&P.addField("partialCharge",1,"float32"),o&&P.addField("radius",1,"float32");const ee=a.getAtomProxy(),ye=a.getAtomProxy();let be=0,Me=0,ze=!0;this.streamer.eachChunkOfLines(function(Xe){(function(ut,rt,dt){for(let yt=ut;yt<rt;++yt)if(C=dt[yt],A=C.substr(0,6),A==="ATOM  "||A==="HETATM"){if(ze&&(h?(b?(m=new Float32Array(3*P.count),g.push(m)):m=[],y=0):f||(he={}),me=1,X=me.toString(),Q=!0,ze=!1),f&&Me>0)continue;let Ke,gt,ct,mt,Dt,_e=0;if(o){if(mt=C.split(mV),_e=mt.length===10?1:0,z=mt[2],p&&z!=="CA")continue;Ke=parseFloat(mt[6-_e]),gt=parseFloat(mt[7-_e]),ct=parseFloat(mt[8-_e])}else{if(z=C.substr(12,4).trim(),p&&z!=="CA")continue;Ke=parseFloat(C.substr(30,8)),gt=parseFloat(C.substr(38,8)),ct=parseFloat(C.substr(46,8))}if(h){const Ue=3*y;if(m[Ue+0]=Ke,m[Ue+1]=gt,m[Ue+2]=ct,y+=1,b)continue}o?(T=parseInt(mt[1]),Dt="",H=C[0]==="H",O=_e?"":mt[4],R=parseInt(mt[5-_e]),$="",L=mt[3],V="",D=1):(T=parseInt(C.substr(6,5),u),c&&T===99999&&(u=16),H=C[0]==="H",O=C[21].trim(),R=parseInt(C.substr(22,4),d),c&&R===9999&&(d=16),$=C[26].trim(),L=C.substr(17,4).trim()||"MOL",B=parseFloat(C.substr(60,6)),V=C[16].trim(),D=parseFloat(C.substr(54,6)),t||(s?(Dt=C.substr(76,3).trim(),Dt in a7&&(Dt=a7[Dt])):(Dt=C.substr(76,2).trim(),O||(O=C.substr(72,4).trim())),J=parseInt((C.substr(79,1)+C.substr(78,1)).trim()))),P.growIfFull(),P.atomTypeId[be]=E.add(z,Dt),P.x[be]=Ke,P.y[be]=gt,P.z[be]=ct,P.serial[be]=T,P.altloc[be]=V.charCodeAt(0),P.occupancy[be]=isNaN(D)?0:D,o?(P.partialCharge[be]=parseFloat(mt[9-_e]),P.radius[be]=parseFloat(mt[10-_e])):(P.bfactor[be]=isNaN(B)?0:B,s&&(P.partialCharge[be]=parseFloat(C.substr(70,6))),isFinite(J)&&(P.formalCharge||P.addField("formalCharge",1,"int8"),P.formalCharge[be]=J));const We=gV(R,O,$);!H||xe[We]||Alt.includes(L)?Q||Re===O||(me+=1,X=me.toString()):Re===O&&le===L&&(SC.includes(L)||Pe===R&&Oe===$)||(me+=1,X=me.toString(),Pe=R,le=L,Oe=$),l.addAtom(Me,O,X,L,R,H,void 0,$),he[T]=be,be+=1,Q=!1,Re=O}else if(A==="CONECT"){const Ke=he[parseInt(C.substr(6,5))],gt=[11,16,21,26],ct={};if(Ke===void 0)continue;for(let mt=0;mt<4;++mt){let Dt=parseInt(C.substr(gt[mt],5));if(!Number.isNaN(Dt)&&(Dt=he[Dt],Dt!==void 0))if(Ke<Dt?(ee.index=Ke,ye.index=Dt):(ee.index=Dt,ye.index=Ke),ct[Dt]!==void 0)a.bondStore.bondOrder[ct[Dt]]+=1;else{const _e=ee.index+"|"+ye.index;ae[_e]===void 0&&(ae[_e]=!0,ct[Dt]=a.bondStore.count,a.bondStore.addBond(ee,ye,1))}}}else if(A==="HELIX "){K=C[19].trim(),ie=parseInt(C.substr(21,4)),ce=C[25].trim(),pe=C[31].trim(),se=parseInt(C.substr(33,4)),G=C[37].trim();let Ke=parseInt(C.substr(39,1));Ke=(TC[Ke]||TC[0]).charCodeAt(0),Ie.push([K,ie,ce,pe,se,G,Ke])}else if(A==="SHEET ")K=C[21].trim(),ie=parseInt(C.substr(22,4)),ce=C[26].trim(),pe=C[32].trim(),se=parseInt(C.substr(33,4)),G=C[37].trim(),U.push([K,ie,ce,pe,se,G]);else if(A==="HETNAM")ne[C.substr(11,3)]=C.substr(15).trim();else if(A==="SEQRES"){const Ke=C[11].trim();Ke!==De&&(Be[Ke]=[],De=Ke),Be[Ke].push(...C.substr(19).trim().split(mV))}else if(A==="MODRES"){const Ke=C.substr(12,3).trim(),gt=C[16].trim(),ct=C[22].trim(),mt=parseInt(C.substr(18,4).trim()),Dt=gV(mt,gt,ct);xe[Dt]={resname:Ke,chainname:gt,inscode:ct,resno:mt}}else if(A==="COMPND"){const Ke=C.substr(10,70).trim(),gt=Ke.indexOf(":"),ct=Ke.substring(0,gt);let mt;Plt.includes(ct)?(ve=ct,mt=Ke.substring(gt+2)):mt=Ke,mt=mt.replace(/;$/,""),ve==="MOL_ID"?(te={chainList:[],name:""},oe.push(te)):ve==="MOLECULE"?(te.name&&(te.name+=" "),te.name+=mt):ve==="CHAIN"&&Array.prototype.push.apply(te.chainList,mt.split(/\s*,\s*/))}else if(C.startsWith("TER")){const Ke=a.getChainProxy(a.chainStore.count-1);Ce[Ke.chainname]=Ke.index,me+=1,X=me.toString(),Q=!0}else if(A==="REMARK"&&C.substr(7,3)==="350"){if(C.substr(11,12)==="BIOMOLECULE:"){let Ke=C.substr(23).trim();/^(0|[1-9][0-9]*)$/.test(Ke)&&(Ke="BU"+Ke),x=new Qu(Ke),_[Ke]=x}else if(C.substr(13,5)==="BIOMT"){const Ke=C.split(/\s+/),gt=parseInt(C[18])-1;gt===0&&(S=new lt,w.matrixList.push(S));const ct=S.elements;ct[0+gt]=parseFloat(Ke[4]),ct[4+gt]=parseFloat(Ke[5]),ct[8+gt]=parseFloat(Ke[6]),ct[12+gt]=parseFloat(Ke[7])}else if(C.substr(11,30)==="APPLY THE FOLLOWING TO CHAINS:"||C.substr(11,30)==="                   AND CHAINS:"){C.substr(11,5)==="APPLY"&&(w=x.addPart());const Ke=C.substr(41,30).split(",");for(let gt=0,ct=Ke.length;gt<ct;++gt){const mt=Ke[gt].trim();mt&&w.chainList.push(mt)}}}else if(A==="HEADER")a.id=C.substr(62,4);else if(A==="TITLE ")a.title+=(a.title?" ":"")+C.substr(10,70).trim();else if(A==="MODEL ")ze=!0;else if(A==="ENDMDL"||C.trim()==="END"){if(ze)continue;h&&!b&&(g.push(new Float32Array(m)),b=!0),Me+=1,ze=!0}else if(C.substr(0,5)==="MTRIX"){if(C[59]==="1")continue;if(!x||x.name!=="NCS"){const mt="NCS";x=new Qu(mt),_[mt]=x,w=x.addPart()}const Ke=C.split(/\s+/),gt=parseInt(C[5])-1;gt===0&&(S=new lt,w.matrixList.push(S));const ct=S.elements;ct[0+gt]=parseFloat(Ke[2]),ct[4+gt]=parseFloat(Ke[3]),ct[8+gt]=parseFloat(Ke[4]),ct[12+gt]=parseFloat(Ke[5])}else if(C.substr(0,5)==="ORIGX"){Z.origx||(Z.origx=new lt);const Ke=C.split(/\s+/),gt=parseInt(C[5])-1,ct=Z.origx.elements;ct[0+gt]=parseFloat(Ke[1]),ct[4+gt]=parseFloat(Ke[2]),ct[8+gt]=parseFloat(Ke[3]),ct[12+gt]=parseFloat(Ke[4])}else if(C.substr(0,5)==="SCALE"){Z.scale||(Z.scale=new lt);const Ke=C.split(/\s+/),gt=parseInt(C[5])-1,ct=Z.scale.elements;ct[0+gt]=parseFloat(Ke[1]),ct[4+gt]=parseFloat(Ke[2]),ct[8+gt]=parseFloat(Ke[3]),ct[12+gt]=parseFloat(Ke[4])}else if(A==="CRYST1"){const Ke=parseFloat(C.substr(6,9)),gt=parseFloat(C.substr(15,9)),ct=parseFloat(C.substr(24,9)),mt=parseFloat(C.substr(33,7)),Dt=parseFloat(C.substr(40,7)),_e=parseFloat(C.substr(47,7)),We=C.substr(55,11).trim(),Ue=new Float32Array(9);Ue[0]=Ke,Ue[4]=gt,Ue[8]=ct,v.push(Ue),Me===0&&(Z.a=Ke,Z.b=gt,Z.c=ct,Z.alpha=mt,Z.beta=Dt,Z.gamma=_e,Z.spacegroup=We)}})(0,Xe.length,Xe)}),l.finalize();const Ge=oe.length;if(Ge){a.eachChain(function(dt){dt.entityIndex=Ge}),oe.forEach(function(dt,yt){const Ke=dt.chainList.map(function(gt){return Ce[gt]});a.entityList.push(new MC(a,yt,dt.name,"polymer",Ke))});let Xe=oe.length;const ut=a.getResidueProxy(),rt={};a.eachChain(function(dt){dt.entityIndex===Ge&&(ut.index=dt.residueOffset,rt[ut.resname]||(rt[ut.resname]=[]),rt[ut.resname].push(dt.index))}),Object.keys(rt).forEach(function(dt){const yt=rt[dt];let Ke="non-polymer",gt=ne[dt]||dt;SC.includes(dt)&&(gt="water",Ke="water"),a.entityList.push(new MC(a,Xe,gt,Ke,yt)),Xe+=1})}Z.a!==void 0?a.unitcell=new EC(Z):a.unitcell=void 0,(Ie.length||U.length)&&Kre(a,Ee),a.finalizeAtoms(),t||HE(a),AC(a,this.inferBonds),a.finalizeBonds(),Ie.length||U.length||VE(a),PC(a),Je&&Ve.timeEnd("PdbParser._parse "+this.name)}}Nt.add("pdb",wy),Nt.add("pdb1",wy),Nt.add("ent",wy);const Mlt=/\s+/,vV=/'((?:(?!'\s).)*)'|"((?:(?!"\s).)*)"|(\S+)/g,h0=/"/g,p0=/^['"]+|['"]+$/g,Elt=/^\D{1,2}/;function yV(e){return!e||e[0]!==e[e.length-1]||e[0]!=="'"&&e[0]!=='"'?e:e.substring(1,e.length-1)}function ro(e,t){Array.isArray(e[t])||Object.keys(e).forEach(function(n){e[n]=[e[n]]})}function Bo(e){return e!=="?"}function Pw(e,t){return Bo(e)?e:t}function bV(e){switch(e.toLowerCase()){case"?":case"sing":return 1;case"doub":return 2;case"trip":return 3;case"quad":return 4}return 0}class yI extends Nc{get type(){return"cif"}_parse(){Ve.time("CifParser._parse "+this.name);var t,n,r,i,o,s,a,l,c,u,d,f,h,p,g,v,m,y,b,_,x,w,S=this.structure,C=this.structureBuilder,A=this.firstModelOnly,T=this.asTrajectory,O=this.cAlphaOnly,R=S.frames,L={},D={},$={},z=!1,H=null,B=!1,V=!1,J=!1,K=[],ie=null,ce=null,pe=null,se=null,G=[],he=S.atomMap,Z=S.atomStore;Z.resize(this.streamer.data.length/100);var ae,oe=0,te=0;if(this.streamer.eachChunkOfLines(function(ne){(function(xe,Ce,me){for(var X=xe;X<Ce;++X)if(r=me[X],((i=r.trim())||z||V)&&i[0]!=="#")if(i.substring(0,5)==="data_")L.data=i.substring(5).trim();else if(i[0]===";")z?(V?(ie===K.length&&(ie=0),K[ie].push(H),ie+=1):pe===!1?L[ce]=H:L[ce][pe]=H,z=!1,H=null):(z=!0,H=i.substring(1));else if(i==="loop_")V=!0,J=!0,K.length=0,G.length=0,ie=0;else if(i[0]==="_"){var Q,Re,Pe;if(V&&!J&&(V=!1),V)Re=(Q=i.split("."))[0].substring(1),Pe=Q[1],Q.length===1?(Pe=!1,L[Re]||(L[Re]=[]),K.push(L[Re])):(L[Re]||(L[Re]={}),L[Re][Pe]?Je&&Ve.warn(Re,Pe,"already exists"):(L[Re][Pe]=[],K.push(L[Re][Pe]),G.push(Pe))),ce=Re,pe=Pe,se=!0;else{var le=i.match(vV),Oe=le[0],Be=le[1];Re=(Q=Oe.split("."))[0].substring(1),Pe=Q[1],Q.length===1?(Pe=!1,L[Re]=Be):(L[Re]||(L[Re]={}),L[Re][Pe]?Je&&Ve.warn(Re,Pe,"already exists"):L[Re][Pe]=Be),Be||(B=!0),ce=Re,pe=Pe}}else if(z)H+=r;else if(V){if(!i)continue;if(ce==="atom_site"){const De=i.split(Mlt);se&&(o=G.indexOf("auth_asym_id"),s=G.indexOf("auth_seq_id"),a=G.indexOf("label_seq_id"),l=G.indexOf("label_atom_id"),c=G.indexOf("label_comp_id"),u=G.indexOf("label_asym_id"),d=G.indexOf("label_entity_id"),f=G.indexOf("label_alt_id"),y=G.indexOf("Cartn_x"),b=G.indexOf("Cartn_y"),_=G.indexOf("Cartn_z"),p=G.indexOf("id"),g=G.indexOf("type_symbol"),h=G.indexOf("group_PDB"),x=G.indexOf("B_iso_or_equiv"),v=G.indexOf("pdbx_PDB_model_num"),m=G.indexOf("pdbx_PDB_ins_code"),w=G.indexOf("occupancy"),se=!1,ae=parseInt(De[v]),T&&(t=[],n=0));const Ee=parseInt(De[v]);if(ae!==Ee&&(T&&(te===0&&R.push(new Float32Array(t)),t=new Float32Array(3*Z.count),R.push(t),n=0),te+=1),ae=Ee,A&&te>0)continue;const Ie=De[l].replace(h0,"");if(O&&Ie!=="CA")continue;const U=parseFloat(De[y]),E=parseFloat(De[b]),P=parseFloat(De[_]);if(T){const Ke=3*n;if(t[Ke+0]=U,t[Ke+1]=E,t[Ke+2]=P,n+=1,te>0)continue}const ee=De[c],ye=parseInt(De[s!==-1?s:a]);let be=De[m];be=be==="?"?"":be;const Me=De[o],ze=De[u],Ge=De[h][0]==="H",Xe=De[g],ut=parseFloat(De[x]),rt=parseFloat(De[w]);let dt=De[f];if(dt=dt==="."?"":dt,Z.growIfFull(),Z.atomTypeId[oe]=he.add(Ie,Xe),Z.x[oe]=U,Z.y[oe]=E,Z.z[oe]=P,Z.serial[oe]=parseInt(De[p]),Z.bfactor[oe]=isNaN(ut)?0:ut,Z.occupancy[oe]=isNaN(rt)?0:rt,Z.altloc[oe]=dt.charCodeAt(0),C.addAtom(te,Me,ze,ee,ye,Ge,void 0,be),Je){const Ke=D[ze];Ke!==void 0&&Ke!==Me&&Je&&Ve.warn(Ke,Me)}D[ze]=Me;const yt=De[d];$[yt]||($[yt]=new Set),$[yt].add(S.chainStore.count-1),oe+=1}else{const De=i.match(vV),Ee=De.length;ie===K.length&&(ie=0);for(let Ie=0;Ie<Ee;++Ie)K[ie+Ie].push(De[Ie]);ie+=Ee}J=!1}else if(i[0]==="'"&&i[i.length-1]==="'"){const De=i.substring(1,i.length-1);pe===!1?L[ce]=De:L[ce][pe]=De}else B?pe===!1?L[ce]=i:L[ce][pe]=i:Je&&Ve.log("CifParser._parse: unknown state",i);else z=!1,V=!1,B=!1,K.length=0,ie=null,ce=null,pe=null,se=null,G.length=0})(0,ne.length,ne)}),L.chem_comp&&L.chem_comp_atom&&!L.struct)(function(ne,xe,Ce){const me=xe.atomStore,X=xe.atomMap;let Q,Re;const Pe=ne.chem_comp,le=ne.chem_comp_atom,Oe=ne.chem_comp_bond;Pe&&(Pe.name&&(xe.title=Pe.name.trim().replace(p0,"")),Pe.id&&(xe.id=Pe.id.trim().replace(p0,"")));var Be={};if(le){var De,Ee,Ie,U;for(ro(le,"comp_id"),Re=le.comp_id.length,Q=0;Q<Re;++Q)me.growIfFull(),De=le.atom_id[Q].replace(h0,""),Ee=le.type_symbol[Q],Be[De]=Q,me.atomTypeId[Q]=X.add(De,Ee),me.x[Q]=le.model_Cartn_x[Q],me.y[Q]=le.model_Cartn_y[Q],me.z[Q]=le.model_Cartn_z[Q],me.serial[Q]=Q,Ie=le.pdbx_component_comp_id[Q],U=le.pdbx_residue_numbering?le.pdbx_residue_numbering[Q]:1,Ce.addAtom(0,"","",Ie,U,!0);for(Q=0;Q<Re;++Q){var E=Q+Re;me.growIfFull(),De=le.atom_id[Q].replace(h0,""),Ee=le.type_symbol[Q],me.atomTypeId[E]=X.add(De,Ee),me.x[E]=le.pdbx_model_Cartn_x_ideal[Q],me.y[E]=le.pdbx_model_Cartn_y_ideal[Q],me.z[E]=le.pdbx_model_Cartn_z_ideal[Q],me.serial[E]=E,Ie=le.pdbx_component_comp_id[Q],U=le.pdbx_residue_numbering?le.pdbx_residue_numbering[Q]:1,Ce.addAtom(1,"","",Ie,U,!0)}}if(le&&Oe){var P,ee,ye;ro(Oe,"comp_id"),Re=Oe.comp_id.length;var be=le.comp_id.length,Me=xe.getAtomProxy(),ze=xe.getAtomProxy();for(Q=0;Q<Re;++Q)P=Oe.atom_id_1[Q].replace(h0,""),ee=Oe.atom_id_2[Q].replace(h0,""),ye=bV(Oe.value_order[Q]),Me.index=Be[P],ze.index=Be[ee],xe.bondStore.growIfFull(),xe.bondStore.addBond(Me,ze,ye),Me.index+=be,ze.index+=be,xe.bondStore.growIfFull(),xe.bondStore.addBond(Me,ze,ye)}})(L,S,C),C.finalize(),S.finalizeAtoms(),S.finalizeBonds(),fh(S);else if(L.atom_site_type_symbol&&L.atom_site_label&&L.atom_site_fract_x)(function(ne,xe,Ce){var me,X=xe.atomStore,Q=xe.atomMap;ne.data&&(xe.id=ne.data,xe.name=ne.data),xe.unitcell=new EC({a:parseFloat(ne.cell_length_a),b:parseFloat(ne.cell_length_b),c:parseFloat(ne.cell_length_c),alpha:parseFloat(ne.cell_angle_alpha),beta:parseFloat(ne.cell_angle_beta),gamma:parseFloat(ne.cell_angle_gamma),spacegroup:yV(ne["symmetry_space_group_name_H-M"])});const Re=new W,Pe=new W,le=ne.atom_site_type_symbol.length,Oe={};for(let P=0;P<le;++P){X.growIfFull();const ee=ne.atom_site_label[P],ye=ne.atom_site_type_symbol[P];let be=Oe[ye];if(!be){const Me=ye.match(Elt);Oe[ye]=be=(me=Me==null?void 0:Me[0])!==null&&me!==void 0?me:ye}X.atomTypeId[P]=Q.add(ee,be),Re.set(ne.atom_site_fract_x[P],ne.atom_site_fract_y[P],ne.atom_site_fract_z[P]),Re.applyMatrix4(xe.unitcell.fracToCart),Pe.add(Re),X.x[P]=Re.x,X.y[P]=Re.y,X.z[P]=Re.z,ne.atom_site_occupancy&&(X.occupancy[P]=parseFloat(ne.atom_site_occupancy[P])),X.serial[P]=P,Ce.addAtom(0,"","","HET",1,!0)}Pe.divideScalar(le),xe.center=Pe,PC(xe);const Be=new W,De=new W,Ee=xe.biomolDict.SUPERCELL.partList[0].matrixList;let Ie=le;function U(P){return Q.get(X.atomTypeId[P]).covalent}const E=new lt;for(let P=0;P<le;++P){const ee=U(P);Re.set(X.x[P],X.y[P],X.z[P]),Ee.forEach(function(ye){if(!E.equals(ye)){Be.copy(Re),Be.applyMatrix4(ye);for(let be=0;be<le;++be){De.set(X.x[be],X.y[be],X.z[be]);const Me=Be.distanceToSquared(De),ze=U(be)+ee,Ge=ze+.3,Xe=ze-.5;if(Me<Ge*Ge&&Me>Xe*Xe)return X.growIfFull(),X.atomTypeId[Ie]=X.atomTypeId[P],X.x[Ie]=Be.x,X.y[Ie]=Be.y,X.z[Ie]=Be.z,X.occupancy[Ie]=X.occupancy[P],X.serial[Ie]=Ie,X.altloc[Ie]=65,Ce.addAtom(0,"","","HET",1,!0),void(Ie+=1)}}})}})(L,S,C),C.finalize(),S.finalizeAtoms(),AC(S),S.finalizeBonds();else{var ve=function(ne,xe,Ce){var me,X,Q,Re,Pe=[],le=[],Oe=ne.struct_conf;if(Oe!=null&&Oe.pdbx_PDB_helix_class)for(ro(Oe,"id"),me=0,X=Oe.beg_auth_seq_id.length;me<X;++me){var Be=parseInt(Oe.pdbx_PDB_helix_class[me]);Number.isNaN(Be)||(Q=Oe.pdbx_beg_PDB_ins_code[me],Re=Oe.pdbx_end_PDB_ins_code[me],Pe.push([Ce[Oe.beg_label_asym_id[me]],parseInt(Oe.beg_auth_seq_id[me]),Pw(Q,""),Ce[Oe.end_label_asym_id[me]],parseInt(Oe.end_auth_seq_id[me]),Pw(Re,""),(TC[Be]||TC[0]).charCodeAt(0)]))}var De=ne.struct_sheet_range;if(De)for(ro(De,"id"),me=0,X=De.beg_auth_seq_id.length;me<X;++me)Q=De.pdbx_beg_PDB_ins_code[me],Re=De.pdbx_end_PDB_ins_code[me],le.push([Ce[De.beg_label_asym_id[me]],parseInt(De.beg_auth_seq_id[me]),Pw(Q,""),Ce[De.end_label_asym_id[me]],parseInt(De.end_auth_seq_id[me]),Pw(Re,"")]);return!(!Oe&&!De)&&{helices:Pe,sheets:le}}(L,0,D);if(function(ne,xe,Ce){var me={},X=xe.biomolDict;if(ne.pdbx_struct_oper_list){var Q=ne.pdbx_struct_oper_list;ro(Q,"id"),Q.id.forEach(function(ye,be){var Me=new lt,ze=Me.elements;ze[0]=parseFloat(Q["matrix[1][1]"][be]),ze[1]=parseFloat(Q["matrix[1][2]"][be]),ze[2]=parseFloat(Q["matrix[1][3]"][be]),ze[4]=parseFloat(Q["matrix[2][1]"][be]),ze[5]=parseFloat(Q["matrix[2][2]"][be]),ze[6]=parseFloat(Q["matrix[2][3]"][be]),ze[8]=parseFloat(Q["matrix[3][1]"][be]),ze[9]=parseFloat(Q["matrix[3][2]"][be]),ze[10]=parseFloat(Q["matrix[3][3]"][be]),ze[3]=parseFloat(Q["vector[1]"][be]),ze[7]=parseFloat(Q["vector[2]"][be]),ze[11]=parseFloat(Q["vector[3]"][be]),Me.transpose(),me[ye]=Me})}if(ne.pdbx_struct_assembly_gen){var Re=ne.pdbx_struct_assembly_gen;ro(Re,"assembly_id");var Pe=function(ye){var be={};return ye.replace(/[()']/g,"").split(",").forEach(function(Me){if(Me.includes("-"))for(var ze=Me.split("-"),Ge=parseInt(ze[0]),Xe=parseInt(ze[1]);Ge<=Xe;++Ge)be[Ge]=me[Ge];else be[Me]=me[Me]}),be};Re.assembly_id.forEach(function(ye,be){var Me={},ze=Re.oper_expression[be].replace(/['"]\(|['"]/g,"");if(ze.includes(")(")||ze.indexOf("(")>0){ze=ze.split("(");var Ge=Pe(ze[0]),Xe=Pe(ze[1]);Object.keys(Ge).forEach(function(ct){Object.keys(Xe).forEach(function(mt){var Dt=new lt;Dt.multiplyMatrices(Ge[ct],Xe[mt]),Me[ct+"x"+mt]=Dt})})}else Me=Pe(ze);var ut=[];for(var rt in Me)ut.push(Me[rt]);var dt=ye;/^(0|[1-9][0-9]*)$/.test(dt)&&(dt="BU"+dt);for(var yt=Re.asym_id_list[be].split(","),Ke=0,gt=yt.length;Ke<gt;++Ke)yt[Ke]=Ce[yt[Ke]];X[dt]===void 0&&(X[dt]=new Qu(dt)),X[dt].addPart(ut,yt)})}if(ne.struct_ncs_oper){var le=ne.struct_ncs_oper;ro(le,"id");var Oe="NCS";X[Oe]=new Qu(Oe);var Be=X[Oe].addPart();le.id.forEach(function(ye,be){if(le.code[be]!=="given"){var Me=new lt,ze=Me.elements;ze[0]=parseFloat(le["matrix[1][1]"][be]),ze[1]=parseFloat(le["matrix[1][2]"][be]),ze[2]=parseFloat(le["matrix[1][3]"][be]),ze[4]=parseFloat(le["matrix[2][1]"][be]),ze[5]=parseFloat(le["matrix[2][2]"][be]),ze[6]=parseFloat(le["matrix[2][3]"][be]),ze[8]=parseFloat(le["matrix[3][1]"][be]),ze[9]=parseFloat(le["matrix[3][2]"][be]),ze[10]=parseFloat(le["matrix[3][3]"][be]),ze[3]=parseFloat(le["vector[1]"][be]),ze[7]=parseFloat(le["vector[2]"][be]),ze[11]=parseFloat(le["vector[3]"][be]),Me.transpose(),Be.matrixList.push(Me)}}),Be.matrixList.length===0&&delete X[Oe]}const De={};if(ne.cell){const ye=ne.cell,be=parseFloat(ye.length_a),Me=parseFloat(ye.length_b),ze=parseFloat(ye.length_c),Ge=new Float32Array(9);Ge[0]=be,Ge[4]=Me,Ge[8]=ze,xe.boxes.push(Ge),De.a=be,De.b=Me,De.c=ze,De.alpha=parseFloat(ye.angle_alpha),De.beta=parseFloat(ye.angle_beta),De.gamma=parseFloat(ye.angle_gamma)}ne.symmetry&&(De.spacegroup=yV(ne.symmetry["space_group_name_H-M"]));var Ee=new lt;if(ne.database_PDB_matrix){var Ie=ne.database_PDB_matrix,U=Ee.elements;U[0]=parseFloat(Ie["origx[1][1]"]),U[1]=parseFloat(Ie["origx[1][2]"]),U[2]=parseFloat(Ie["origx[1][3]"]),U[4]=parseFloat(Ie["origx[2][1]"]),U[5]=parseFloat(Ie["origx[2][2]"]),U[6]=parseFloat(Ie["origx[2][3]"]),U[8]=parseFloat(Ie["origx[3][1]"]),U[9]=parseFloat(Ie["origx[3][2]"]),U[10]=parseFloat(Ie["origx[3][3]"]),U[3]=parseFloat(Ie["origx_vector[1]"]),U[7]=parseFloat(Ie["origx_vector[2]"]),U[11]=parseFloat(Ie["origx_vector[3]"]),Ee.transpose(),De.origx=Ee}var E=new lt;if(ne.atom_sites){var P=ne.atom_sites,ee=E.elements;ee[0]=parseFloat(P["fract_transf_matrix[1][1]"]),ee[1]=parseFloat(P["fract_transf_matrix[1][2]"]),ee[2]=parseFloat(P["fract_transf_matrix[1][3]"]),ee[4]=parseFloat(P["fract_transf_matrix[2][1]"]),ee[5]=parseFloat(P["fract_transf_matrix[2][2]"]),ee[6]=parseFloat(P["fract_transf_matrix[2][3]"]),ee[8]=parseFloat(P["fract_transf_matrix[3][1]"]),ee[9]=parseFloat(P["fract_transf_matrix[3][2]"]),ee[10]=parseFloat(P["fract_transf_matrix[3][3]"]),ee[3]=parseFloat(P["fract_transf_vector[1]"]),ee[7]=parseFloat(P["fract_transf_vector[2]"]),ee[11]=parseFloat(P["fract_transf_vector[3]"]),E.transpose(),De.scale=E}De.a!==void 0?xe.unitcell=new EC(De):xe.unitcell=void 0}(L,S,D),function(ne,xe,Ce){var me=ne.struct_conn;if(me){ro(me,"id");for(var X=/"/g,Q=xe.getAtomProxy(),Re=xe.getAtomProxy(),Pe={},le=0,Oe=me.id.length;le<Oe;++le){var Be=me.conn_type_id[le];if(Be!=="hydrog"&&Be!=="mismat"&&Be!=="saltbr"&&me.ptnr1_symmetry[le]==="1_555"&&me.ptnr2_symmetry[le]==="1_555"){var De=me.pdbx_ptnr1_PDB_ins_code[le],Ee=me.pdbx_ptnr1_label_alt_id[le],Ie=me.ptnr1_auth_seq_id[le]+(Bo(De)?"^"+De:"")+":"+Ce[me.ptnr1_label_asym_id[le]]+"."+me.ptnr1_label_atom_id[le].replace(X,"")+(Bo(Ee)?"%"+Ee:""),U=Pe[Ie];if(!U){var E=new Xn(Ie);if(E.selection.error){Je&&Ve.warn("invalid selection for connection",Ie);continue}U=xe.getAtomIndices(E),Pe[Ie]=U}var P=me.pdbx_ptnr2_PDB_ins_code[le],ee=me.pdbx_ptnr2_label_alt_id[le],ye=me.ptnr2_auth_seq_id[le]+(Bo(P)?"^"+P:"")+":"+Ce[me.ptnr2_label_asym_id[le]]+"."+me.ptnr2_label_atom_id[le].replace(X,"")+(Bo(ee)?"%"+ee:""),be=Pe[ye];if(!be){var Me=new Xn(ye);if(Me.selection.error){Je&&Ve.warn("invalid selection for connection",ye);continue}be=xe.getAtomIndices(Me),Pe[ye]=be}var ze=U.length,Ge=be.length;if(ze>Ge){var Xe=ze;ze=Ge,Ge=Xe;var ut=U;U=be,be=ut}if(ze!==0&&Ge!==0)for(var rt=0;rt<Ge;++rt)Q.index=U[rt%ze],Re.index=be[rt],Q&&Re?xe.bondStore.addBond(Q,Re,bV(me.pdbx_value_order[le])):Ve.log("atoms for connection not found");else Je&&Ve.warn("no atoms found for",Ie,ye)}}}}(L,S,D),function(ne,xe,Ce){if(ne.entity){ro(ne.entity,"id");for(var me=ne.entity,X=me.id.length,Q=0;Q<X;++Q){var Re=me.pdbx_description[Q],Pe=me.type[Q],le=Array.from(Ce[me.id[Q]]);xe.entityList[Q]=new MC(xe,Q,Re,Pe,le)}}}(L,S,$),L.struct&&L.struct.title&&(S.title=L.struct.title.trim().replace(p0,"")),L.entry&&L.entry.id&&(S.id=L.entry.id.trim().replace(p0,"")),L.pdbx_audit_revision_history){if(L.pdbx_audit_revision_history.revision_date){ro(L.pdbx_audit_revision_history,"revision_date");const ne=L.pdbx_audit_revision_history.revision_date.filter(Bo);ne.length&&(S.header.releaseDate=ne[0])}if(L.pdbx_database_status.recvd_initial_deposition_date){ro(L.pdbx_database_status,"recvd_initial_deposition_date");const ne=L.pdbx_database_status.recvd_initial_deposition_date.filter(Bo);ne.length&&(S.header.depositionDate=ne[0])}}else if(L.database_PDB_rev){if(L.database_PDB_rev.date){ro(L.database_PDB_rev,"date");const ne=L.database_PDB_rev.date.filter(Bo);ne.length&&(S.header.releaseDate=ne[0])}if(L.database_PDB_rev.date_original){ro(L.database_PDB_rev,"date_original");const ne=L.database_PDB_rev.date_original.filter(Bo);ne.length&&(S.header.depositionDate=ne[0])}}L.reflns&&L.reflns.d_resolution_high?Bo(L.reflns.d_resolution_high)&&(S.header.resolution=parseFloat(L.reflns.d_resolution_high)):L.refine&&L.refine.ls_d_res_high&&Bo(L.refine.ls_d_res_high)&&(S.header.resolution=parseFloat(L.refine.ls_d_res_high)),L.refine&&L.refine.ls_R_factor_R_free&&Bo(L.refine.ls_R_factor_R_free)&&(S.header.rFree=parseFloat(L.refine.ls_R_factor_R_free)),L.refine&&L.refine.ls_R_factor_R_work&&Bo(L.refine.ls_R_factor_R_work)&&(S.header.rWork=parseFloat(L.refine.ls_R_factor_R_work)),L.exptl&&L.exptl.method&&(ro(L.exptl,"method"),S.header.experimentalMethods=L.exptl.method.map(function(ne){return ne.replace(p0,"")})),C.finalize(),S.finalizeAtoms(),AC(S),S.finalizeBonds(),ve?Kre(S,ve):VE(S),PC(S),S.extraData.cif=L}Je&&Ve.timeEnd("CifParser._parse "+this.name)}}Nt.add("cif",yI),Nt.add("mcif",yI),Nt.add("mmcif",yI);Nt.add("gro",class extends Nc{get type(){return"gro"}_parse(){Je&&Ve.time("GroParser._parse "+this.name);var e,t,n=this.structure,r=this.structureBuilder,i=this.firstModelOnly,o=this.asTrajectory,s=this.cAlphaOnly,a=n.frames,l=n.boxes,c=this.streamer.peekLines(3);n.title=c[0].trim();var u,d,f,h,p=5+(c[2].length-c[2].lastIndexOf(".")-1),g=20+p,v=20+2*p,m=parseInt(c[1]),y=m+3,b=n.atomMap,_=n.atomStore;_.resize(m);var x=0,w=0,S=0;this.streamer.eachChunkOfLines(function(C){(function(A,T,O){for(var R=A;R<T;++R){var L=++S-1,D=O[R];if(D){if(L%y==0)o&&(e=new Float32Array(3*m),a.push(e),t=0);else if(L%y!=1)if(L%y==y-1){var $=D.trim().split(/\s+/),z=new Float32Array(9);if(z[0]=10*parseFloat($[0]),z[4]=10*parseFloat($[1]),z[8]=10*parseFloat($[2]),l.push(z),i)return!0;w+=1}else{if(u=D.substr(10,5).trim(),s&&u!=="CA")continue;var H=10*parseFloat(D.substr(20,p)),B=10*parseFloat(D.substr(g,p)),V=10*parseFloat(D.substr(v,p));if(o){var J=3*t;if(e[J+0]=H,e[J+1]=B,e[J+2]=V,t+=1,L>y)continue}d=D.substr(5,5).trim(),f=parseInt(D.substr(0,5)),h=parseInt(D.substr(15,5)),_.growIfFull(),_.atomTypeId[x]=b.add(u),_.x[x]=H,_.y[x]=B,_.z[x]=V,_.serial[x]=h,r.addAtom(w,"","",d,f,!1,"l"),x+=1}}}})(0,C.length,C)}),r.finalize(),n.finalizeAtoms(),HE(n),AC(n),n.finalizeBonds(),VE(n),Je&&Ve.timeEnd("GroParser._parse "+this.name)}});var Tlt=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"].concat(["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"]);function Tx(e,t,n){return t?new e(t.buffer,t.byteOffset,t.byteLength/(n||1)):void 0}function ZL(e){return Tx(DataView,e)}function bI(e){return Tx(Int8Array,e)}function OC(e){return Tx(Int32Array,e,4)}function m0(e,t){var n=e.length/2;t||(t=new Int16Array(n));for(var r=0,i=0;r<n;++r,i+=2)t[r]=e[i]<<8^e[i+1]<<0;return t}function $a(e,t){var n=e.length/4;t||(t=new Int32Array(n));for(var r=0,i=0;r<n;++r,i+=4)t[r]=e[i]<<24^e[i+1]<<16^e[i+2]<<8^e[i+3]<<0;return t}function IC(e,t,n){var r=e.length,i=1/t;n||(n=new Float32Array(r));for(var o=0;o<r;++o)n[o]=e[o]*i;return n}function Mw(e,t){var n,r;if(!t){var i=0;for(n=0,r=e.length;n<r;n+=2)i+=e[n+1];t=new e.constructor(i)}var o=0;for(n=0,r=e.length;n<r;n+=2)for(var s=e[n],a=e[n+1],l=0;l<a;++l)t[o]=s,++o;return t}function pie(e,t){var n=e.length;t||(t=new e.constructor(n)),n&&(t[0]=e[0]);for(var r=1;r<n;++r)t[r]=e[r]+t[r-1];return t}function RC(e,t){var n,r,i=e instanceof Int8Array?127:32767,o=-i-1,s=e.length;if(!t){var a=0;for(n=0;n<s;++n)e[n]<i&&e[n]>o&&++a;t=new Int32Array(a)}for(n=0,r=0;n<s;){for(var l=0;e[n]===i||e[n]===o;)l+=e[n],++n;l+=e[n],++n,t[r]=l,++r}return t}function xV(e,t,n){return IC(RC(e,OC(n)),t,n)}function Olt(e,t,n){var r=RC(e,OC(n));return function(i,o,s){return IC(pie(i,OC(s)),o,s)}(r,t,Tx(Float32Array,r,4))}function mie(e){var t=0,n=new DataView(e.buffer);function r(l){for(var c={},u=0;u<l;u++)c[a()]=a();return c}function i(l){var c=e.subarray(t,t+l);return t+=l,c}function o(l){var c=e.subarray(t,t+l);t+=l;var u=65535;if(l>u){for(var d=[],f=0;f<c.length;f+=u)d.push(String.fromCharCode.apply(null,c.subarray(f,f+u)));return d.join("")}return String.fromCharCode.apply(null,c)}function s(l){for(var c=new Array(l),u=0;u<l;u++)c[u]=a();return c}function a(){var l,c,u=e[t];if(!(128&u))return t++,u;if((240&u)==128)return t++,r(c=15&u);if((240&u)==144)return t++,s(c=15&u);if((224&u)==160)return t++,o(c=31&u);if((224&u)==224)return l=n.getInt8(t),t++,l;switch(u){case 192:return t++,null;case 194:return t++,!1;case 195:return t++,!0;case 196:return c=n.getUint8(t+1),t+=2,i(c);case 197:return c=n.getUint16(t+1),t+=3,i(c);case 198:return c=n.getUint32(t+1),t+=5,i(c);case 202:return l=n.getFloat32(t+1),t+=5,l;case 203:return l=n.getFloat64(t+1),t+=9,l;case 204:return l=e[t+1],t+=2,l;case 205:return l=n.getUint16(t+1),t+=3,l;case 206:return l=n.getUint32(t+1),t+=5,l;case 208:return l=n.getInt8(t+1),t+=2,l;case 209:return l=n.getInt16(t+1),t+=3,l;case 210:return l=n.getInt32(t+1),t+=5,l;case 217:return c=n.getUint8(t+1),t+=2,o(c);case 218:return c=n.getUint16(t+1),t+=3,o(c);case 219:return c=n.getUint32(t+1),t+=5,o(c);case 220:return c=n.getUint16(t+1),t+=3,s(c);case 221:return c=n.getUint32(t+1),t+=5,s(c);case 222:return c=n.getUint16(t+1),t+=3,r(c);case 223:return c=n.getUint32(t+1),t+=5,r(c)}throw new Error("Unknown type 0x"+u.toString(16))}return a()}function Ilt(e,t,n,r){switch(e){case 1:return function(o,s){var a=o.length;s||(s=new Float32Array(a/4));for(var l=ZL(s),c=ZL(o),u=0,d=0,f=a/4;u<f;++u,d+=4)l.setFloat32(d,c.getFloat32(d),!0);return s}(t);case 2:return bI(t);case 3:return m0(t);case 4:return $a(t);case 5:return Tx(Uint8Array,t);case 6:return Mw($a(t),new Uint8Array(n));case 7:return Mw($a(t));case 8:return pie(Mw($a(t)),i);case 9:return function(o,s,a){return IC(Mw(o,OC(a)),s,a)}($a(t),$a(r)[0]);case 10:return Olt(m0(t),$a(r)[0]);case 11:return IC(m0(t),$a(r)[0]);case 12:return xV(m0(t),$a(r)[0]);case 13:return xV(bI(t),$a(r)[0]);case 14:return RC(m0(t));case 15:return RC(bI(t))}var i}function Rlt(e,t){var n=(t=t||{}).ignoreFields,r={};return Tlt.forEach(function(i){var o,s,a,l,c,u=!!n&&n.indexOf(i)!==-1,d=e[i];u||d===void 0||(d instanceof Uint8Array?r[i]=Ilt.apply(null,(s=ZL(o=d),a=s.getInt32(0),l=s.getInt32(4),c=o.subarray(8,12),[a,o=o.subarray(12),l,c])):r[i]=d)}),r}const klt={0:105,1:115,2:104,3:101,4:103,5:98,6:116,7:108,"-1":NaN};Nt.add("mmtf",class extends Nc{get type(){return"mmtf"}get isBinary(){return!0}_parse(){let e,t,n,r,i;Je&&Ve.time("MmtfParser._parse "+this.name);const o=this.structure,s=Rlt(mie(this.streamer.data));let a,l,c,u,d,f;if(["depositionDate","releaseDate","resolution","rFree","rWork","experimentalMethods"].forEach(function(B){s[B]!==void 0&&(o.header[B]=s[B])}),o.id=s.structureId,o.title=s.title,o.atomStore.addField("formalCharge",1,"int8"),this.firstModelOnly||this.asTrajectory){for(d=1,u=s.chainsPerModel[0],c=0,e=0,t=u;e<t;++e)c+=s.groupsPerChain[e];for(l=0,e=0,t=c;e<t;++e)i=s.groupList[s.groupTypeList[e]],l+=i.atomNameList.length;a=s.numBonds,f=[u]}else a=s.numBonds,l=s.numAtoms,c=s.numGroups,u=s.numChains,d=s.numModels,f=s.chainsPerModel;if(a+=c,this.asTrajectory)for(e=0,t=s.numModels;e<t;++e){const B=new Float32Array(3*l),V=l*e;for(n=0;n<l;++n){const J=3*n,K=n+V;B[J]=s.xCoordList[K],B[J+1]=s.yCoordList[K],B[J+2]=s.zCoordList[K]}o.frames.push(B)}const h=new Uint32Array(a),p=new Uint32Array(a),g=new Uint8Array(a),v=new Uint32Array(l),m=new Int8Array(l),y=new Uint32Array(c),b=new Uint32Array(c),_=new Uint16Array(c),x=new Uint16Array(u),w=new Uint32Array(u),S=new Uint32Array(u),C=new Uint32Array(d),A=new Uint32Array(d);let T=0;for(e=0,t=d;e<t;++e){const B=f[e];for(C[e]=T,A[e]=B,n=0;n<B;++n)x[n+T]=e;T+=B}const O=s.groupsPerChain;let R=0;for(e=0,t=u;e<t;++e){const B=O[e];for(w[e]=R,S[e]=B,n=0;n<B;++n)y[n+R]=e;R+=B}let L=0,D=0;for(e=0,t=c;e<t;++e){i=s.groupList[s.groupTypeList[e]];const B=i.atomNameList.length,V=i.formalChargeList,J=i.bondAtomList,K=i.bondOrderList;for(n=0,r=K.length;n<r;++n)h[D]=L+J[2*n],p[D]=L+J[2*n+1],g[D]=K[n],D+=1;for(b[e]=L,_[e]=B,n=0;n<B;++n)v[L]=e,m[L]=V[n],L+=1}const $=s.bondAtomList;if($)for(s.bondOrderList&&g.set(s.bondOrderList,D),e=0,t=$.length;e<t;e+=2){const B=$[e],V=$[e+1];B<l&&V<l&&(h[D]=B,p[D]=V,D+=1)}o.bondStore.length=g.length,o.bondStore.count=D,o.bondStore.atomIndex1=h,o.bondStore.atomIndex2=p,o.bondStore.bondOrder=g,o.atomStore.length=l,o.atomStore.count=l,o.atomStore.residueIndex=v,o.atomStore.atomTypeId=new Uint16Array(l),o.atomStore.x=s.xCoordList.subarray(0,l),o.atomStore.y=s.yCoordList.subarray(0,l),o.atomStore.z=s.zCoordList.subarray(0,l),o.atomStore.serial=s.atomIdList.subarray(0,l),o.atomStore.bfactor=s.bFactorList.subarray(0,l),o.atomStore.altloc=s.altLocList.subarray(0,l),o.atomStore.occupancy=s.occupancyList.subarray(0,l),o.atomStore.formalCharge=m,o.residueStore.length=c,o.residueStore.count=c,o.residueStore.chainIndex=y,o.residueStore.residueTypeId=s.groupTypeList,o.residueStore.atomOffset=b,o.residueStore.atomCount=_,o.residueStore.resno=s.groupIdList.subarray(0,c),o.residueStore.sstruc=s.secStructList.subarray(0,c),o.residueStore.inscode=s.insCodeList.subarray(0,c),o.chainStore.length=u,o.chainStore.count=u,o.chainStore.entityIndex=new Uint16Array(u),o.chainStore.modelIndex=x,o.chainStore.residueOffset=w,o.chainStore.residueCount=S,o.chainStore.chainname=s.chainNameList.subarray(0,4*u),o.chainStore.chainid=s.chainIdList.subarray(0,4*u),o.modelStore.length=d,o.modelStore.count=d,o.modelStore.chainOffset=C,o.modelStore.chainCount=A;let z={};for(e=0,t=s.groupList.length;e<t;++e){const B=s.groupList[e],V=[];for(n=0,r=B.atomNameList.length;n<r;++n){const G=B.elementList[n].toUpperCase(),he=B.atomNameList[n];V.push(o.atomMap.add(he,G))}const J=B.chemCompType.toUpperCase(),K=Hit.includes(J),ie=B.bondOrderList.length,ce=new Array(ie),pe=new Array(ie);for(n=0;n<ie;++n)ce[n]=B.bondAtomList[2*n],pe[n]=B.bondAtomList[2*n+1];const se={atomIndices1:ce,atomIndices2:pe,bondOrders:B.bondOrderList};z[e]=o.residueMap.add(B.groupName,V,K,J,se)}for(e=0,t=c;e<t;++e)o.residueStore.residueTypeId[e]=z[o.residueStore.residueTypeId[e]];for(e=0,t=o.atomStore.count;e<t;++e){const B=o.atomStore.residueIndex[e],V=o.residueMap.list[o.residueStore.residueTypeId[B]],J=o.residueStore.atomOffset[B];o.atomStore.atomTypeId[e]=V.atomTypeIdList[e-J]}if(s.secStructList){const B=s.secStructList.length;for(e=0,t=o.residueStore.count;e<t;++e){const V=klt[o.residueStore.sstruc[e%B]];V!==void 0&&(o.residueStore.sstruc[e]=V)}}if(s.entityList&&s.entityList.forEach(function(B,V){o.entityList[V]=new MC(o,V,B.description,B.type,B.chainIndexList)}),s.bioAssemblyList&&s.bioAssemblyList.forEach(function(B,V){const J=V+1,K=new Qu(""+J);o.biomolDict["BU"+J]=K;let ie={};B.transformList.forEach(function(ce){const pe=new lt().fromArray(ce.matrix).transpose(),se=ce.chainIndexList.map(function(he){let Z="";for(let ae=0;ae<4;++ae){const oe=s.chainNameList[4*he+ae];if(!oe)break;Z+=String.fromCharCode(oe)}return Z}),G=ie[se.toString()];G?G.matrixList.push(pe):ie[se.toString()]=K.addPart([pe],se)})}),s.ncsOperatorList){const B="NCS",V=new Qu(B),J=V.addPart();s.ncsOperatorList.forEach(function(K){const ie=new lt().fromArray(K).transpose();J.matrixList.push(ie)}),J.matrixList.length>0&&(o.biomolDict[B]=V)}const H=s.unitCell;H&&Array.isArray(H)&&H[0]?o.unitcell=new EC({a:H[0],b:H[1],c:H[2],alpha:H[3],beta:H[4],gamma:H[5],spacegroup:s.spaceGroup}):o.unitcell=void 0,bv(o,!0),yv(o,!0),o.finalizeAtoms(),o.finalizeBonds(),PC(o),Je&&Ve.timeEnd("MmtfParser._parse "+this.name)}});const xI=/\s+/,Llt={1:1,2:2,3:3,am:1,ar:1,du:1,un:1,nc:0};Nt.add("mol2",class extends Nc{get type(){return"mol2"}_parse(){Je&&Ve.time("Mol2Parser._parse "+this.name);const e=this.structure,t=this.structureBuilder,n=this.firstModelOnly,r=this.asTrajectory,i=e.frames;let o,s,a=!1;const l=e.atomMap,c=e.atomStore;c.resize(Math.round(this.streamer.data.length/60)),c.addField("partialCharge",1,"float32");let u=0,d=0,f=0,h=-1,p=0,g=0;const v=e.getAtomProxy(),m=e.getAtomProxy();this.streamer.eachChunkOfLines(function(y){(function(b,_,x){for(let w=b;w<_;++w){const S=x[w].trim();if(S!==""&&S[0]!=="#"){if(S[0]==="@")S==="@<TRIPOS>MOLECULE"?(g=1,d=0,++h):S==="@<TRIPOS>ATOM"?(g=2,f=c.count,r&&(s=0,o=new Float32Array(3*p),i.push(o),h>0&&(a=!0))):g=S==="@<TRIPOS>BOND"?3:0;else if(g===1){if(d===0)e.title=S,e.id=S;else if(d===1){const C=S.split(xI);p=parseInt(C[0])}++d}else if(g===2){const C=S.split(xI);if(n&&h>0)continue;const A=parseFloat(C[2]),T=parseFloat(C[3]),O=parseFloat(C[4]);if(r){const B=3*s;if(o[B+0]=A,o[B+1]=T,o[B+2]=O,s+=1,a)continue}const R=C[0],L=C[1],D=C[5].split(".")[0],$=C[6]?parseInt(C[6]):1,z=C[7]?C[7]:"",H=C[8]?parseFloat(C[8]):0;c.growIfFull(),c.atomTypeId[u]=l.add(L,D),c.x[u]=A,c.y[u]=T,c.z[u]=O,c.serial[u]=R,c.partialCharge[u]=H,t.addAtom(h,"","",z,$,!0),u+=1}else if(g===3){if(n&&h>0||r&&h>0)continue;const C=S.split(xI);v.index=parseInt(C[1])-1+f,m.index=parseInt(C[2])-1+f;const A=Llt[C[3]];e.bondStore.addBond(v,m,A)}}}})(0,y.length,y)}),t.finalize(),e.finalizeAtoms(),HE(e),yv(e,!0),bv(e,!0),e.finalizeBonds(),fh(e),VE(e),Je&&Ve.timeEnd("Mol2Parser._parse "+this.name)}});Nt.add("pdbqt",class extends wy{get type(){return"pdbqt"}});Nt.add("pqr",class extends wy{get type(){return"pqr"}});const $lt=/> +<(.+)>/;class _I extends Nc{get type(){return"sdf"}_parse(){Je&&Ve.time("SdfParser._parse "+this.name);const t=this.structure,n=this.structureBuilder,r=this.firstModelOnly,i=this.asTrajectory,o=this.streamer.peekLines(2);t.id=o[0].trim(),t.title=o[1].trim();const s=t.frames;let a,l,c=!1;const u=t.atomMap,d=t.atomStore;d.resize(Math.round(this.streamer.data.length/50)),d.addField("formalCharge",1,"int8");const f=t.getAtomProxy(),h=t.getAtomProxy();let p=0,g=0,v=0,m=0;const y=[];let b,_,x,w,S,C,A,T,O,R,L,D,$,z,H=!1,B={};t.extraData.sdf=y;let V=!1,J=!1,K=!1,ie=[],ce=[];const pe=new Map;this.streamer.eachChunkOfLines(function(se){(function(G,he,Z){for(let ae=G;ae<he;++ae){const oe=Z[ae];if(V&&oe&&(ie=oe.substring(7).split(" "),ce.length&&(ie=[...ce,...ie],ce=[]),ie[ie.length-1]==="-"))ie.pop(),ce=ie;else{if(oe.substr(0,4)==="$$$$")g=-1,++v,m=d.count,y.push(B),B={},H=!1,V=!1;else if(g===3)V=oe.indexOf(" V3000")>-1,V?pe.clear():(_=parseInt(oe.substr(0,3)),x=parseInt(oe.substr(3,3)),w=4,S=w+_,C=S,A=C+x,i&&(l=0,a=new Float32Array(3*_),s.push(a),v>0&&(c=!0)));else if(V&&ie[0]==="COUNTS")_=parseInt(ie[1]),i&&(l=0,a=new Float32Array(3*_),s.push(a),v>0&&(c=!0));else if(V&&ie.length==2)ie[1]==="ATOM"?ie[0]==="BEGIN"?J=!0:ie[0]==="END"&&(J=!1):ie[1]==="BOND"&&(ie[0]==="BEGIN"?K=!0:ie[0]==="END"&&(K=!1));else if(J||!V&&g>=w&&g<S){if(r&&v>0)continue;let te=0;if(V){if(T=parseFloat(ie[2]),O=parseFloat(ie[3]),R=parseFloat(ie[4]),D=ie[1],$=parseInt(ie[0]),pe.set($,p),L=D+$,ie.length>6){let ve=ie.slice(6).find(ne=>ne.indexOf("CHG=")===0);ve&&(te=parseInt(ve.substring(4)))}}else T=parseFloat(oe.substr(0,10)),O=parseFloat(oe.substr(10,10)),R=parseFloat(oe.substr(20,10)),D=oe.substr(31,3).trim(),L=D+(p-m+1);if(i){const ve=3*l;if(a[ve+0]=T,a[ve+1]=O,a[ve+2]=R,l+=1,c)continue}d.growIfFull(),d.atomTypeId[p]=u.add(L,D),d.x[p]=T,d.y[p]=O,d.z[p]=R,d.serial[p]=V?$:p,d.formalCharge[p]=te,n.addAtom(v,"","","HET",1,!0),p+=1}else if(K||!V&&g>=C&&g<A){if(r&&v>0||i&&v>0)continue;V?(f.index=pe.get(parseInt(ie[2])),h.index=pe.get(parseInt(ie[3])),z=parseInt(ie[1])):(f.index=parseInt(oe.substr(0,3))-1+m,h.index=parseInt(oe.substr(3,3))-1+m,z=parseInt(oe.substr(6,3))),t.bondStore.addBond(f,h,z)}else if(oe.substr(0,6)==="M  CHG"){const te=parseInt(oe.substr(6,3));for(let ve=0,ne=10;ve<te;++ve,ne+=8){const xe=parseInt(oe.substr(ne,3))-1+m,Ce=parseInt(oe.substr(ne+4,3));d.formalCharge[xe]=Ce}}else oe.charAt(0)===">"&&(b=oe.match($lt))?(H=b[1],B[H]=[]):H!==!1&&oe&&B[H].push(oe);++g}}})(0,se.length,se)}),n.finalize(),t.finalizeAtoms(),t.finalizeBonds(),fh(t),Je&&Ve.timeEnd("SdfParser._parse "+this.name)}_postProcess(){fh(this.structure)}}Nt.add("sdf",_I),Nt.add("sd",_I),Nt.add("mol",_I);function g0(e,t,n){return parseInt(e.substr(t,n).trim())}class _V extends Nc{get type(){return"prmtop"}_parse(){Je&&Ve.time("PrmtopParser._parse "+this.name);const t=this.structure,n=this.structureBuilder,r=t.atomMap,i=t.atomStore;i.addField("partialCharge",1,"float32"),i.addField("radius",1,"float32");const o=[],s={},a=["NATOM","NTYPES","NBONH","MBONA","NTHETH","MTHETA","NPHIH","MPHIA","NHPARM","NPARM","NNB","NRES","NBONA","NTHETA","NPHIA","NUMBND","NUMANG","NPTRA","NATYP","NPHB","IFPERT","NBPER","NGPER","NDPER","MBPER","MGPER","MDPER","IFBOX","NMXRS","IFCAP","NUMEXTRA","NCOPY"];let l,c,u,d,f;a.forEach(S=>{s[S]=0});let h,p,g,v,m,y=new Uint8Array(0);this.streamer.eachChunkOfLines(function(S){(function(C,A,T){for(let O=C;O<A;++O){const R=T[O],L=R.trim();if(L&&!R.startsWith("%FORMAT")){if(R.startsWith("%FLAG")){const D=R.substr(5).trim();v=0,D==="TITLE"?g=0:D==="POINTERS"?g=1:D==="ATOM_NAME"?g=2:D==="CHARGE"?g=3:D==="MASS"?g=4:D==="RESIDUE_LABEL"?g=5:D==="RESIDUE_POINTER"?g=6:D==="BONDS_INC_HYDROGEN"?(m=0,g=7):D==="BONDS_WITHOUT_HYDROGEN"?(m=s.NBONH,g=8):g=D==="RADII"?9:void 0}else if(g===0)o.push(L);else if(g===1){const D=Math.min(v+10,32);for(let z=0;v<D;++z,++v)s[a[v]]=parseInt(R.substr(8*z,8).trim());l=new Array(s.NATOM),c=new Float32Array(s.NATOM),u=new Float32Array(s.NATOM),i.resize(s.NATOM);const $=s.NBONH+s.MBONA;d=new Uint32Array($),f=new Uint32Array($),y=new Uint8Array($),h=new Array(s.NRES),p=new Uint32Array(s.NRES)}else if(g===2){const D=Math.min(v+20,s.NATOM);for(let $=0;v<D;++$,++v)l[v]=R.substr(4*$,4).trim()}else if(g===3){const D=Math.min(v+5,s.NATOM);for(let $=0;v<D;++$,++v)c[v]=parseFloat(R.substr(16*$,16))/18.2223}else if(g!==4){if(g===5){const D=Math.min(v+20,s.NRES);for(let $=0;v<D;++$,++v)h[v]=R.substr(4*$,4).trim()}else if(g===6){const D=Math.min(v+10,s.NRES);for(let $=0;v<D;++$,++v)p[v]=g0(R,8*$,8)}else if(g===7){const D=Math.min(v+10,3*s.NBONH);for(let $=0;v<D;++$,++v){const z=v%3;z===0&&(d[m]=g0(R,8*$,8)/3),z===1&&(f[m]=g0(R,8*$,8)/3,y[m]=1,++m)}}else if(g===8){const D=Math.min(v+10,3*s.MBONA);for(let $=0;v<D;++$,++v){const z=v%3;z===0&&(d[m]=g0(R,8*$,8)/3),z===1&&(f[m]=g0(R,8*$,8)/3,y[m]=1,++m)}}else if(g===9){const D=Math.min(v+5,s.NATOM);for(let $=0;v<D;++$,++v)u[v]=parseFloat(R.substr(16*$,16))}}}}})(0,S.length,S)}),t.title=o.join(" ");const b=s.NATOM;let _=0,x=h[0],w=1;for(let S=0;S<b;++S)S+1===p[_+1]&&(++_,x=h[_],w=_+1),i.atomTypeId[S]=r.add(l[S]),i.serial[S]=S+1,n.addAtom(0,"","",x,w,!1);i.partialCharge.set(c),i.radius.set(u),t.bondStore.length=y.length,t.bondStore.count=y.length,t.bondStore.atomIndex1=d,t.bondStore.atomIndex2=f,t.bondStore.bondOrder=y,n.finalize(),t.finalizeAtoms(),t.finalizeBonds(),yv(t,!0),bv(t,!0,!0),HE(t,!0),fh(t),Je&&Ve.timeEnd("PrmtopParser._parse "+this.name)}}Nt.add("prmtop",_V),Nt.add("parm7",_V);const Ew=/\s+/,Dlt=/(^\*|REMARK)*/;Nt.add("psf",class extends Nc{get type(){return"psf"}_parse(){Je&&Ve.time("PsfParser._parse "+this.name);const e=this.structure,t=this.structureBuilder,n=e.atomMap,r=e.atomStore;r.addField("partialCharge",1,"float32");const i=[];let o,s,a,l,c,u,d=0,f=0,h=0;this.streamer.eachChunkOfLines(function(p){(function(g,v,m){for(let y=g;y<v;++y){const b=m[y].trim();if(b){if(o===2){const _=b.split(Ew),x=parseInt(_[0]),w=_[1],S=parseInt(_[2]),C=_[3],A=_[4],T=parseFloat(_[6]);w!==a&&(s=qb(f),++f),r.growIfFull(),r.atomTypeId[d]=n.add(A),r.serial[d]=x,r.partialCharge[d]=T,t.addAtom(0,s,s,C,S,!1),d+=1,a=w}else if(o===3){const _=b.split(Ew);for(let x=0,w=_.length;x<w;x+=2)l[h]=parseInt(_[x])-1,c[h]=parseInt(_[x+1])-1,u[h]=1,h+=1}else if(o===1)i.push(b.replace(Dlt,"").trim());else if(o!==4){if(o!==5){if(o!==6)if(b.includes("!NATOM")){o=2;const _=parseInt(b.split(Ew)[0]);r.resize(_)}else if(b.includes("!NBOND")){o=3;const _=parseInt(b.split(Ew)[0]);l=new Uint32Array(_),c=new Uint32Array(_),u=new Uint8Array(_)}else b.includes("!NTITLE")?o=1:b.includes("!NTHETA")?o=4:b.includes("!NPHI")?o=5:b.includes("!NIMPHI")&&(o=6)}}}else o=void 0}})(0,p.length,p)}),e.title=i.join(" "),e.bondStore.length=u.length,e.bondStore.count=h,e.bondStore.atomIndex1=l,e.bondStore.atomIndex2=c,e.bondStore.bondOrder=u,t.finalize(),e.finalizeAtoms(),e.finalizeBonds(),yv(e,!0),bv(e,!0,!0),fh(e),Je&&Ve.timeEnd("PsfParser._parse "+this.name)}});const Blt=/\[ (.+) \]/,Tw=/\s+/;Nt.add("top",class extends Nc{get type(){return"top"}_parse(){Je&&Ve.time("TopParser._parse "+this.name);const e=this.structure,t=this.structureBuilder,n=e.atomMap,r=e.bondStore,i=e.atomStore;i.addField("partialCharge",1,"float32");const o=[],s={};let a,l;this.streamer.eachChunkOfLines(function(y){(function(b,_,x){for(let w=b;w<_;++w){const S=x[w];let C=S.trim();if(!C||C[0]==="*"||C[0]===";")continue;if(C.startsWith("#include"))throw new Error("TopParser: #include statements not allowed");const A=S.match(Blt);if(A!==null){const O=A[1];O==="moleculetype"?(l=2,a={atoms:[],bonds:[]}):l=O==="atoms"?3:O==="bonds"?4:O==="system"?0:O==="molecules"?1:void 0;continue}const T=C.indexOf(";");if(T!==-1&&(C=C.substring(0,T).trim()),l===2){const O=C.split(Tw)[0];s[O]=a}else if(l===3){const O=C.split(Tw);a.atoms.push([parseInt(O[2]),O[3],O[4],parseFloat(O[6])])}else if(l===4){const O=C.split(Tw);a.bonds.push([parseInt(O[0]),parseInt(O[1])])}else if(l===0)e.title=C;else if(l===1){const O=C.split(Tw);o.push([O[0],parseInt(O[1])])}}})(0,y.length,y)});let c=0,u=0;o.forEach(function(y){const[b,_]=y,x=s[b];c+=_*x.atoms.length,u+=_*x.bonds.length}),i.resize(c),r.resize(u);let d,f=0,h=0,p=0,g=0,v=0,m=0;o.forEach(function(y){const[b,_]=y,x=s[b],w=qb(g);for(let S=0;S<_;++S){d=-1;const C=SC.includes(b)?w:qb(p);x.atoms.forEach(function(A){const[T,O,R,L]=A;T!==d&&++h,i.atomTypeId[f]=n.add(R),i.serial[f]=f+1,i.partialCharge[f]=L,t.addAtom(0,w,C,O,h+1,!1),++f,d=T}),x.bonds.forEach(function(A){r.atomIndex1[v]=m+A[0]-1,r.atomIndex2[v]=m+A[1]-1,++v}),++p,m+=x.atoms.length}++g}),r.count=u,t.finalize(),e.finalizeAtoms(),e.finalizeBonds(),yv(e,!0),bv(e,!0,!0),fh(e),Je&&Ve.timeEnd("TopParser._parse "+this.name)}});class YE extends Ea{constructor(t,n){super(t,n),this.frames=new nie(this.name,this.path)}get type(){return"trajectory"}get __objName(){return"frames"}}function Ho(e,t){if(e)throw new TypeError("Not a valid NetCDF v3.x file: "+t)}function gie(e){e.offset%4!=0&&e.skip(4-e.offset%4)}function JL(e){const t=e.readUint32(),n=e.readChars(t);return gie(e),n}Nt.add("dcd",class extends YE{get type(){return"dcd"}get isBinary(){return!0}_parse(){Je&&Ve.time("DcdParser._parse "+this.name);const e=mv(this.streamer.data),t=new DataView(e),n=this.frames,r=n.coordinates,i=n.boxes,o={};let s=0;const a=new Int32Array(e,0,23),l=a[0]!==t.getInt32(0);if(a[0]!==84){const v=e.byteLength;for(let m=0;m<v;m+=4)t.setFloat32(m,t.getFloat32(m),!0)}a[0]!==84&&Ve.error("dcd bad format, header block start"),String.fromCharCode(t.getUint8(4),t.getUint8(5),t.getUint8(6),t.getUint8(7))!=="CORD"&&Ve.error("dcd bad format, format string");let c=!1,u=!1,d=!1;a[22]!==0&&(c=!0,a[12]!==0&&(u=!0),a[13]===1&&(d=!0)),o.NSET=a[2],o.ISTART=a[3],o.NSAVC=a[4],o.NAMNF=a[10],o.DELTA=c?t.getFloat32(44,l):t.getFloat64(44,l),a[22]!==84&&Ve.error("dcd bad format, header block end"),s=s+84+8;const f=t.getInt32(s,l),h=s+1;if((f-4)%80!=0&&Ve.error("dcd bad format, title block start"),o.TITLE=yC(new Uint8Array(e,h,f)),t.getInt32(h+f+4-1,l)!==f&&Ve.error("dcd bad format, title block end"),s=s+f+8,t.getInt32(s,l)!==4&&Ve.error("dcd bad format, natom block start"),o.NATOM=t.getInt32(s+4,l),t.getInt32(s+8,l)!==4&&Ve.error("dcd bad format, natom block end"),s=s+4+8,o.NAMNF>0)return void Ve.error("dcd format with fixed atoms unsupported, aborting");const p=o.NATOM,g=4*p;for(let v=0,m=o.NSET;v<m;++v){if(u){s+=4;const b=new Float32Array(9);b[0]=t.getFloat64(s,l),b[4]=t.getFloat64(s+16,l),b[8]=t.getFloat64(s+40,l),i.push(b),s+=48,s+=4}const y=new Float32Array(3*p);for(let b=0;b<3;++b){t.getInt32(s,l)!==g&&Ve.error("dcd bad format, coord block start",v,b),s+=4;const _=new Float32Array(e,s,p);for(let x=0;x<p;++x)y[3*x+b]=_[x];s+=g,t.getInt32(s,l)!==g&&Ve.error("dcd bad format, coord block end",v,b),s+=4}r.push(y),d&&(s+=4+t.getInt32(s,l)+4)}o.DELTA&&(n.deltaTime=20.45482949774598*o.DELTA),o.ISTART>=1&&(n.timeOffset=(o.ISTART-1)*n.deltaTime),Je&&Ve.timeEnd("DcdParser._parse "+this.name)}});const fr={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function vie(e){switch(Number(e)){case fr.BYTE:return"byte";case fr.CHAR:return"char";case fr.SHORT:return"short";case fr.INT:return"int";case fr.FLOAT:return"float";case fr.DOUBLE:return"double";default:return"undefined"}}function wV(e){switch(Number(e)){case fr.BYTE:case fr.CHAR:return 1;case fr.SHORT:return 2;case fr.INT:case fr.FLOAT:return 4;case fr.DOUBLE:return 8;default:return-1}}function SV(e){switch(String(e)){case"byte":return fr.BYTE;case"char":return fr.CHAR;case"short":return fr.SHORT;case"int":return fr.INT;case"float":return fr.FLOAT;case"double":return fr.DOUBLE;default:return-1}}function Ow(e,t){if(e!==1){const n=new Array(e);for(let r=0;r<e;r++)n[r]=t();return n}return t()}function QL(e,t,n){switch(t){case fr.BYTE:return e.readBytes(n);case fr.CHAR:return function(r){return r.charCodeAt(r.length-1)===0?r.substring(0,r.length-1):r}(e.readChars(n));case fr.SHORT:return Ow(n,e.readInt16.bind(e));case fr.INT:return Ow(n,e.readInt32.bind(e));case fr.FLOAT:return Ow(n,e.readFloat32.bind(e));case fr.DOUBLE:return Ow(n,e.readFloat64.bind(e));default:return void Ho(!0,"non valid type "+t)}}const em=0,Nlt=10,Flt=11,zlt=12;function jlt(e,t){const n={recordDimension:{length:e.readUint32()}};n.version=t;const r=function(o){let s,a,l;const c=o.readUint32();if(c===em)return Ho(o.readUint32()!==em,"wrong empty tag for list of dimensions"),[];{Ho(c!==Nlt,"wrong tag for list of dimensions");const u=o.readUint32();s=new Array(u);for(let d=0;d<u;d++){const f=JL(o),h=o.readUint32();h===0&&(a=d,l=f),s[d]={name:f,size:h}}return{dimensions:s,recordId:a,recordName:l}}}(e);n.recordDimension.id=r.recordId,n.recordDimension.name=r.recordName,n.dimensions=r.dimensions,n.globalAttributes=CV(e);const i=function(o,s,a){const l=o.readUint32();let c,u=0;if(l===em)return Ho(o.readUint32()!==em,"wrong empty tag for list of variables"),[];{Ho(l!==Flt,"wrong tag for list of variables");const d=o.readUint32();c=new Array(d);for(let f=0;f<d;f++){const h=JL(o),p=o.readUint32(),g=new Array(p);for(let _=0;_<p;_++)g[_]=o.readUint32();const v=CV(o),m=o.readUint32();Ho(m<1&&m>6,"non valid type "+m);const y=o.readUint32();let b=o.readUint32();a===2&&(Ho(b>0,"offsets larger than 4GB not supported"),b=o.readUint32()),g[0]===s&&(u+=y),c[f]={name:h,dimensions:g,attributes:v,type:vie(m),size:y,offset:b,record:g[0]===s}}}return{variables:c,recordStep:u}}(e,r.recordId,t);return n.variables=i.variables,n.recordDimension.recordStep=i.recordStep,n}function CV(e){let t;const n=e.readUint32();if(n===em)return Ho(e.readUint32()!==em,"wrong empty tag for list of attributes"),[];{Ho(n!==zlt,"wrong tag for list of attributes");const r=e.readUint32();t=new Array(r);for(let i=0;i<r;i++){const o=JL(e),s=e.readUint32();Ho(s<1||s>6,"non valid type "+s);const a=e.readUint32(),l=QL(e,s,a);gie(e),t[i]={name:o,type:vie(s),value:l}}}return t}class yie{constructor(t){const n=new mit(t);n.setBigEndian(),Ho(n.readChars(3)!=="CDF","should start with CDF");const r=n.readByte();Ho(r>2,"unknown version"),this.header=jlt(n,r),this.buffer=n}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}get variables(){return this.header.variables}hasDataVariable(t){return this.header.variables.findIndex(function(n){return n.name===t})!==-1}getDataVariable(t){let n;return n=typeof t=="string"?this.header.variables.find(function(r){return r.name===t}):t,Ho(n===void 0,"variable not found"),this.buffer.seek(n.offset),n.record?function(r,i,o){const s=SV(i.type),a=i.size?i.size/wV(s):1,l=o.length,c=new Array(l),u=o.recordStep;for(let d=0;d<l;d++){const f=r.offset;c[d]=QL(r,s,a),r.seek(f+u)}return c}(this.buffer,n,this.header.recordDimension):function(r,i){const o=SV(i.type),s=i.size/wV(o),a=new Array(s);for(let l=0;l<s;l++)a[l]=QL(r,o,1);return a}(this.buffer,n)}}class wI extends YE{get type(){return"nctraj"}get isBinary(){return!0}_parse(){Je&&Ve.time("NctrajParser._parse "+this.name);const t=new yie(this.streamer.data),n=this.frames,r=n.coordinates,i=n.boxes,o=n.times;t.getDataVariable("coordinates").forEach(function(s){r.push(new Float32Array(s))}),t.hasDataVariable("cell_lengths")&&t.getDataVariable("cell_lengths").forEach(function(s){i.push(new Float32Array(s))}),t.hasDataVariable("time")&&t.getDataVariable("time").forEach(function(s){o.push(s)}),o.length>=1&&(n.timeOffset=o[0]),o.length>=2&&(n.deltaTime=o[1]-o[0]),Je&&Ve.timeEnd("NctrajParser._parse "+this.name)}}Nt.add("nctraj",wI),Nt.add("ncdf",wI),Nt.add("nc",wI);Nt.add("trr",class extends YE{get type(){return"trr"}get isBinary(){return!0}_parse(){Je&&Ve.time("TrrParser._parse "+this.name);const e=mv(this.streamer.data),t=new DataView(e),n=this.frames,r=n.coordinates,i=n.boxes,o=n.times;let s=0;for(;;){s+=8;const a=t.getInt32(s);s+=4,s+=a;const l=t.getInt32(s+8),c=t.getInt32(s+12),u=t.getInt32(s+16),d=t.getInt32(s+28),f=t.getInt32(s+32),h=t.getInt32(s+36),p=t.getInt32(s+40);s+=52;const g=l/9,v=3*p;if(g===8?o.push(t.getFloat64(s)):o.push(t.getFloat32(s)),s+=2*g,l){const m=new Float32Array(9);if(g===8)for(let y=0;y<9;++y)m[y]=10*t.getFloat64(s),s+=8;else for(let y=0;y<9;++y)m[y]=10*t.getFloat32(s),s+=4;i.push(m)}if(s+=c,s+=u,d){let m;if(g===8){m=new Float32Array(v);for(let y=0;y<v;++y)m[y]=10*t.getFloat64(s),s+=8}else{const y=new Uint32Array(e,s,v);for(let b=0;b<v;++b){const _=y[b];y[b]=(255&_)<<24|(65280&_)<<8|_>>8&65280|_>>24&255}m=new Float32Array(e,s,v);for(let b=0;b<v;++b)m[b]*=10,s+=4}r.push(m)}if(s+=f,s+=h,s>=e.byteLength)break}o.length>=1&&(n.timeOffset=o[0]),o.length>=2&&(n.deltaTime=o[1]-o[0]),Je&&Ve.timeEnd("TrrParser._parse "+this.name)}});const gp=new Uint32Array([0,0,0,0,0,0,0,0,0,8,10,12,16,20,25,32,40,50,64,80,101,128,161,203,256,322,406,512,645,812,1024,1290,1625,2048,2580,3250,4096,5060,6501,8192,10321,13003,16384,20642,26007,32768,41285,52015,65536,82570,104031,131072,165140,208063,262144,330280,416127,524287,660561,832255,1048576,1321122,1664510,2097152,2642245,3329021,4194304,5284491,6658042,8388607,10568983,13316085,16777216]);function SI(e){let t=1,n=0;for(;e>=t&&n<32;)n++,t<<=1;return n}const v0=new Uint8Array(32);function Ult(e,t){let n=1,r=0;v0[0]=1;for(let o=0;o<e;o++){let s,a=0;for(s=0;s<n;s++)a+=v0[s]*t[o],v0[s]=255&a,a>>=8;for(;a!==0;)v0[s++]=255&a,a>>=8;n=s}let i=1;for(n--;v0[n]>=i;)r++,i*=2;return r+8*n}function df(e,t,n,r){const i=(1<<n)-1;let o=r[1],s=r[2],a=e[0],l=0;for(;n>=8;)s=s<<8|t[a++],l|=s>>o<<n-8,n-=8;return n>0&&(o<n&&(o+=8,s=s<<8|t[a++]),o-=n,l|=s>>o&(1<<n)-1),l&=i,e[0]=a,e[1]=o,e[2]=s,l}const Ks=new Int32Array(32);function AV(e,t,n,r,i,o,s){let a=0;for(Ks[1]=0,Ks[2]=0,Ks[3]=0;r>8;)Ks[a++]=df(e,t,8,s),r-=8;r>0&&(Ks[a++]=df(e,t,r,s));for(let l=n-1;l>0;l--){let c=0;for(let u=a-1;u>=0;u--){c=c<<8|Ks[u];const d=c/i[l]|0;Ks[u]=d,c-=d*i[l]}o[l]=c}o[0]=Ks[0]|Ks[1]<<8|Ks[2]<<16|Ks[3]<<24}Nt.add("xtc",class extends YE{get type(){return"xtc"}get isBinary(){return!0}_parse(){Je&&Ve.time("XtcParser._parse "+this.name);const e=mv(this.streamer.data),t=new DataView(e),n=this.frames,r=n.coordinates,i=n.boxes,o=n.times,s=new Int32Array(6),a=new Int32Array(3),l=new Int32Array(3),c=new Uint32Array(3),u=new Float32Array(3),d=new Float32Array(3);let f=0;const h=new Int32Array(3),p=new Uint32Array(h.buffer);for(;;){let g;const v=t.getInt32(f+4);f+=12;const m=3*v;o.push(t.getFloat32(f)),f+=4;const y=new Float32Array(9);for(let b=0;b<9;++b)y[b]=10*t.getFloat32(f),f+=4;if(i.push(y),v<=9){g=new Float32Array(v);for(let b=0;b<v;++b)g[b]=t.getFloat32(f),f+=4}else{h[0]=h[1]=h[2]=0,a[0]=a[1]=a[2]=0,c[0]=c[1]=c[2]=0,l[0]=l[1]=l[2]=0,u[0]=u[1]=u[2]=0,d[0]=d[1]=d[2]=0,g=new Float32Array(m);let b=0;const _=t.getInt32(f);f+=4;const x=t.getFloat32(f);let w;f+=4,s[0]=t.getInt32(f),s[1]=t.getInt32(f+4),s[2]=t.getInt32(f+8),s[3]=t.getInt32(f+12),s[4]=t.getInt32(f+16),s[5]=t.getInt32(f+20),a[0]=s[3]-s[0]+1,a[1]=s[4]-s[1]+1,a[2]=s[5]-s[2]+1,f+=24,(a[0]|a[1]|a[2])>16777215?(l[0]=SI(a[0]),l[1]=SI(a[1]),l[2]=SI(a[2]),w=0):w=Ult(3,a);let S=t.getInt32(f);f+=4;let C=S-1;C=9>C?9:C;let A=gp[C]/2|0,T=gp[S]/2|0;c[0]=c[1]=c[2]=gp[S];let O=4*Math.ceil(t.getInt32(f)/4);f+=4;const R=1/x;let L=0,D=0;const $=new Uint8Array(e,f);for(u[0]=u[1]=u[2]=0;D<_;){w===0?(u[0]=df(h,$,l[0],p),u[1]=df(h,$,l[1],p),u[2]=df(h,$,l[2],p)):AV(h,$,3,w,a,u,p),D++,u[0]+=s[0],u[1]+=s[1],u[2]+=s[2],d[0]=u[0],d[1]=u[1],d[2]=u[2];let z=0;if(df(h,$,1,p)===1&&(L=df(h,$,5,p),z=L%3,L-=z,z--),L>0){u[0]=u[1]=u[2]=0;for(let H=0;H<L;H+=3){if(AV(h,$,3,S,c,u,p),D++,u[0]+=d[0]-T,u[1]+=d[1]-T,u[2]+=d[2]-T,H===0){let B=u[0];u[0]=d[0],d[0]=B,B=u[1],u[1]=d[1],d[1]=B,B=u[2],u[2]=d[2],d[2]=B,g[b++]=d[0]*R,g[b++]=d[1]*R,g[b++]=d[2]*R}else d[0]=u[0],d[1]=u[1],d[2]=u[2];g[b++]=u[0]*R,g[b++]=u[1]*R,g[b++]=u[2]*R}}else g[b++]=u[0]*R,g[b++]=u[1]*R,g[b++]=u[2]*R;if(S+=z,z<0?(T=A,A=S>9?gp[S-1]/2|0:0):z>0&&(A=T,T=gp[S]/2|0),c[0]=c[1]=c[2]=gp[S],c[0]===0||c[1]===0||c[2]===0)return void console.error("(xdrfile error) Undefined error.")}f+=O}for(let b=0;b<m;b++)g[b]*=10;if(r.push(g),f>=e.byteLength)break}o.length>=1&&(n.timeOffset=o[0]),o.length>=2&&(n.deltaTime=o[1]-o[0]),Je&&Ve.timeEnd("XtcParser._parse "+this.name)}});class Ox extends Ea{constructor(t,n){const r=n||{};super(t,r),this.volume=new ao(this.name,this.path),this.voxelSize=re(r.voxelSize,1)}get type(){return"volume"}get __objName(){return"volume"}_afterParse(){this.volume.setMatrix(this.getMatrix()),super._afterParse()}getMatrix(){return new lt}}const Vlt=/\s+/,Hlt=/-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?/g,Iw=.529177210859;class PV extends Ox{get type(){return"cube"}_parse(){Je&&Ve.time("CubeParser._parse "+this.name);const t=this.volume,n=this.streamer.peekLines(6),r={},i=Iw*this.voxelSize;function o(u,d){var f=n[u].trim().split(Vlt)[d];return parseFloat(f)}r.atomCount=Math.abs(o(2,0)),r.originX=o(2,1)*Iw,r.originY=o(2,2)*Iw,r.originZ=o(2,3)*Iw,r.NVX=o(3,0),r.NVY=o(4,0),r.NVZ=o(5,0),r.basisX=new W(o(3,1),o(3,2),o(3,3)).multiplyScalar(i),r.basisY=new W(o(4,1),o(4,2),o(4,3)).multiplyScalar(i),r.basisZ=new W(o(5,1),o(5,2),o(5,3)).multiplyScalar(i);const s=new Float32Array(r.NVX*r.NVY*r.NVZ);let a=0,l=0;const c=o(2,0)>0?0:1;this.streamer.eachChunkOfLines(function(u){(function(d,f,h){for(let p=d;p<f;++p){const g=h[p].trim();if(g!==""&&l>=r.atomCount+6+c){const v=g.match(Hlt);for(let m=0,y=v.length;m<y;++m)s[a]=parseFloat(v[m]),++a}++l}})(0,u.length,u)}),t.header=r,t.setData(s,r.NVZ,r.NVY,r.NVX),Je&&Ve.timeEnd("CubeParser._parse "+this.name)}getMatrix(){const t=this.volume.header,n=new lt;return n.multiply(new lt().makeTranslation(t.originX,t.originY,t.originZ)),n.multiply(new lt().makeBasis(t.basisZ,t.basisY,t.basisX)),n}}Nt.add("cub",PV),Nt.add("cube",PV);class MV extends Ox{get type(){return"dsn6"}get isBinary(){return!0}_parse(){Je&&Ve.time("Dsn6Parser._parse "+this.name);const t=this.volume,n={};let r,i;const o=mv(this.streamer.data),s=new Int16Array(o),a=new Uint8Array(o),l=String.fromCharCode.apply(null,a.subarray(0,512));if(l.startsWith(":-)"))n.xStart=parseInt(l.substr(10,5)),n.yStart=parseInt(l.substr(15,5)),n.zStart=parseInt(l.substr(20,5)),n.xExtent=parseInt(l.substr(32,5)),n.yExtent=parseInt(l.substr(38,5)),n.zExtent=parseInt(l.substr(42,5)),n.xRate=parseInt(l.substr(52,5)),n.yRate=parseInt(l.substr(58,5)),n.zRate=parseInt(l.substr(62,5)),n.xlen=parseFloat(l.substr(73,10))*this.voxelSize,n.ylen=parseFloat(l.substr(83,10))*this.voxelSize,n.zlen=parseFloat(l.substr(93,10))*this.voxelSize,n.alpha=parseFloat(l.substr(103,10)),n.beta=parseFloat(l.substr(113,10)),n.gamma=parseFloat(l.substr(123,10)),r=parseFloat(l.substr(138,12))/100,i=parseInt(l.substr(155,8)),n.sigma=100*parseFloat(l.substr(170,12));else{if(s[18]!==100)for(let A=0,T=s.length;A<T;++A){const O=s[A];s[A]=(255&O)<<8|O>>8&255}n.xStart=s[0],n.yStart=s[1],n.zStart=s[2],n.xExtent=s[3],n.yExtent=s[4],n.zExtent=s[5],n.xRate=s[6],n.yRate=s[7],n.zRate=s[8];const S=1/s[17],C=S*this.voxelSize;n.xlen=s[9]*C,n.ylen=s[10]*C,n.zlen=s[11]*C,n.alpha=s[12]*S,n.beta=s[13]*S,n.gamma=s[14]*S,r=s[15]/100,i=s[16],n.gamma=s[14]*S}t.header=n,Je&&Ve.log(n,r,i);const c=new Float32Array(n.xExtent*n.yExtent*n.zExtent);let u=512;const d=Math.ceil(n.xExtent/8),f=Math.ceil(n.yExtent/8),h=Math.ceil(n.zExtent/8);for(var p=0;p<h;++p)for(var g=0;g<f;++g)for(var v=0;v<d;++v)for(var m=0;m<8;++m)for(var y=8*p+m,b=0;b<8;++b)for(var _=8*g+b,x=0;x<8;++x){var w=8*v+x;if(!(w<n.xExtent&&_<n.yExtent&&y<n.zExtent)){u+=8-x;break}c[(w*n.yExtent+_)*n.zExtent+y]=(a[u]-i)/r,++u}t.setData(c,n.zExtent,n.yExtent,n.xExtent),n.sigma&&t.setStats(void 0,void 0,void 0,n.sigma),Je&&Ve.timeEnd("Dsn6Parser._parse "+this.name)}getMatrix(){const t=this.volume.header,n=[t.xlen,0,0],r=[t.ylen*Math.cos(Math.PI/180*t.gamma),t.ylen*Math.sin(Math.PI/180*t.gamma),0],i=[t.zlen*Math.cos(Math.PI/180*t.beta),t.zlen*(Math.cos(Math.PI/180*t.alpha)-Math.cos(Math.PI/180*t.gamma)*Math.cos(Math.PI/180*t.beta))/Math.sin(Math.PI/180*t.gamma),0];i[2]=Math.sqrt(t.zlen*t.zlen*Math.sin(Math.PI/180*t.beta)*Math.sin(Math.PI/180*t.beta)-i[1]*i[1]);const o=[[],n,r,i],s=[0,t.xRate,t.yRate,t.zRate],a=[0,1,2,3],l=new lt;return l.set(o[a[1]][0]/s[a[1]],o[a[2]][0]/s[a[2]],o[a[3]][0]/s[a[3]],0,o[a[1]][1]/s[a[1]],o[a[2]][1]/s[a[2]],o[a[3]][1]/s[a[3]],0,o[a[1]][2]/s[a[1]],o[a[2]][2]/s[a[2]],o[a[3]][2]/s[a[3]],0,0,0,0,1),l.multiply(new lt().makeRotationY(br(90))),l.multiply(new lt().makeTranslation(-t.zStart,t.yStart,t.xStart)),l.multiply(new lt().makeScale(-1,1,1)),l}}Nt.add("dsn6",MV),Nt.add("brix",MV);const Rw=/\s+/;class bie extends Ox{get type(){return"dx"}_parse(){Je&&Ve.time("DxParser._parse "+this.name);const t=this.volume,n=this.streamer.peekLines(30),r=this.parseHeaderLines(n),i=this.volume.header,o=r.dataLineStart,s=i.nx*i.ny*i.nz,a=new Float32Array(s);let l=0,c=0;this.streamer.eachChunkOfLines(function(u){(function(d,f,h){for(let p=d;p<f;++p){if(l<s&&c>o){const g=h[p].trim();if(g!==""){const v=g.split(Rw);for(let m=0,y=v.length;m<y;++m)a[l]=parseFloat(v[m]),++l}}++c}})(0,u.length,u)}),t.setData(a,i.nz,i.ny,i.nx),Je&&Ve.timeEnd("DxParser._parse "+this.name)}parseHeaderLines(t){const n={},r=t.length;let i=0,o=0,s=0;for(let a=0;a<r;++a){let l;const c=t[a];if(c.startsWith("object 1"))l=c.split(Rw),n.nx=parseInt(l[5]),n.ny=parseInt(l[6]),n.nz=parseInt(l[7]);else if(c.startsWith("origin"))l=c.split(Rw),n.xmin=parseFloat(l[1]),n.ymin=parseFloat(l[2]),n.zmin=parseFloat(l[3]);else if(c.startsWith("delta"))l=c.split(Rw),s===0?n.hx=parseFloat(l[1])*this.voxelSize:s===1?n.hy=parseFloat(l[2])*this.voxelSize:s===2&&(n.hz=parseFloat(l[3])*this.voxelSize),s+=1;else if(c.startsWith("object 3")){i=a,o+=c.length+1;break}o+=c.length+1}return this.volume.header=n,{dataLineStart:i,headerByteCount:o}}getMatrix(){const t=this.volume.header,n=new lt;return n.multiply(new lt().makeRotationY(br(90))),n.multiply(new lt().makeTranslation(-t.zmin,t.ymin,t.xmin)),n.multiply(new lt().makeScale(-t.hz,t.hy,t.hx)),n}}Nt.add("dx",bie);Nt.add("dxbin",class extends bie{get type(){return"dxbin"}get isBinary(){return!0}_parse(){Je&&Ve.time("DxbinParser._parse "+this.name);const e=mv(this.streamer.data),t=function(l,c=10485760,u=`
`){let d="",f=[];for(let h=0;h<l.length;h+=c){const p=yC(l.subarray(h,h+c)),g=p.lastIndexOf(u);if(g===-1)d+=p;else{const v=d+p.substr(0,g);f=f.concat(v.split(u)),d=g===p.length-u.length?"":p.substr(g+u.length)}}return d!==""&&f.push(d),f}(new Uint8Array(e,0,1e3)),n=this.parseHeaderLines(t),r=this.volume.header,i=n.headerByteCount,o=r.nx*r.ny*r.nz,s=new DataView(e),a=new Float32Array(o);for(let l=0;l<o;++l)a[l]=s.getFloat64(8*l+i,!0);this.volume.setData(a,r.nz,r.ny,r.nx),Je&&Ve.timeEnd("DxbinParser._parse "+this.name)}});class CI extends Ox{get type(){return"mrc"}get isBinary(){return!0}_parse(){Je&&Ve.time("MrcParser._parse "+this.name);const t=this.volume,n={},r=mv(this.streamer.data),i=new Int32Array(r,0,56),o=new Float32Array(r,0,56),s=new DataView(r);if(n.MAP=String.fromCharCode(s.getUint8(208),s.getUint8(209),s.getUint8(210),s.getUint8(211)),n.MACHST=[s.getUint8(212),s.getUint8(213)],n.MACHST[0]===17&&n.MACHST[1]===17){const l=r.byteLength;for(let c=0;c<l;c+=4)s.setFloat32(c,s.getFloat32(c),!0)}let a;if(n.NX=i[0],n.NY=i[1],n.NZ=i[2],n.MODE=i[3],n.NXSTART=i[4],n.NYSTART=i[5],n.NZSTART=i[6],n.MX=i[7],n.MY=i[8],n.MZ=i[9],n.xlen=o[10]*this.voxelSize,n.ylen=o[11]*this.voxelSize,n.zlen=o[12]*this.voxelSize,n.alpha=o[13],n.beta=o[14],n.gamma=o[15],n.MAPC=i[16],n.MAPR=i[17],n.MAPS=i[18],n.DMIN=o[19],n.DMAX=o[20],n.DMEAN=o[21],n.ISPG=i[22],n.NSYMBT=i[23],n.LSKFLG=i[24],n.originX=o[49],n.originY=o[50],n.originZ=o[51],n.ARMS=o[54],t.header=n,n.MODE===2)a=new Float32Array(r,1024+n.NSYMBT,n.NX*n.NY*n.NZ);else if(n.MODE===0){if(a=new Float32Array(new Int8Array(r,1024+n.NSYMBT,n.NX*n.NY*n.NZ)),i[39]===-128&&i[40]===127){const l=(n.DMAX-n.DMIN)/255,c=.5*(n.DMIN+n.DMAX+l);for(let u=0,d=a.length;u<d;++u)a[u]=l*a[u]+c}}else Ve.error("MrcParser unknown mode",n.MODE);t.setData(a,n.NX,n.NY,n.NZ),n.ARMS!==0&&t.setStats(n.DMIN,n.DMAX,n.DMEAN,n.ARMS),Je&&Ve.timeEnd("MrcParser._parse "+this.name)}getMatrix(){const t=this.volume.header,n=[t.xlen,0,0],r=[t.ylen*Math.cos(Math.PI/180*t.gamma),t.ylen*Math.sin(Math.PI/180*t.gamma),0],i=[t.zlen*Math.cos(Math.PI/180*t.beta),t.zlen*(Math.cos(Math.PI/180*t.alpha)-Math.cos(Math.PI/180*t.gamma)*Math.cos(Math.PI/180*t.beta))/Math.sin(Math.PI/180*t.gamma),0];i[2]=Math.sqrt(t.zlen*t.zlen*Math.sin(Math.PI/180*t.beta)*Math.sin(Math.PI/180*t.beta)-i[1]*i[1]);const o=[[],n,r,i],s=[0,t.MX,t.MY,t.MZ],a=[0,t.MAPC,t.MAPR,t.MAPS],l=new lt;return l.set(o[a[1]][0]/s[a[1]],o[a[2]][0]/s[a[2]],o[a[3]][0]/s[a[3]],0,o[a[1]][1]/s[a[1]],o[a[2]][1]/s[a[2]],o[a[3]][1]/s[a[3]],0,o[a[1]][2]/s[a[1]],o[a[2]][2]/s[a[2]],o[a[3]][2]/s[a[3]],0,0,0,0,1),l.setPosition(new W(t.originX,t.originY,t.originZ)),l.multiply(new lt().makeTranslation(t.NXSTART,t.NYSTART,t.NZSTART)),l}}Nt.add("mrc",CI),Nt.add("ccp4",CI),Nt.add("map",CI);const Glt=/\s+/;function AI(e){return e.trim().split(Glt).map(parseFloat)}class EV extends Ox{get type(){return"xplor"}_parse(){Je&&Ve.time("XplorParser._parse "+this.name);const t=this.volume,n=this.streamer.peekLines(8),r={};let i;i=n[2].startsWith("REMARKS")?parseInt(n[1].substring(0,8))+2:5;const o=i+3,s=AI(n[i]);r.NA=s[0],r.AMIN=s[1],r.AMAX=s[2],r.NB=s[3],r.BMIN=s[4],r.BMAX=s[5],r.NC=s[6],r.CMIN=s[7],r.CMAX=s[8];const a=AI(n[i+1]);r.a=a[0]*this.voxelSize,r.b=a[1]*this.voxelSize,r.c=a[2]*this.voxelSize,r.alpha=a[3],r.beta=a[4],r.gamma=a[5];const l=r.AMAX-r.AMIN+1,c=r.BMAX-r.BMIN+1,u=r.CMAX-r.CMIN+1,d=l*c*u,f=new Float32Array(d),h=Math.ceil(1+l*c/6);let p=0,g=0;this.streamer.eachChunkOfLines(function(v){(function(m,y,b){for(let _=m;_<y;++_){const x=b[_];if(g>=o&&(g-o)%h!=0&&p<d)for(let w=0,S=6;w<S;++w){const C=parseFloat(x.substr(12*w,12));if(isNaN(C))break;f[p++]=C}else if(p===d){const w=x.trim();if(w&&w!=="-9999"){const S=AI(x);r.RAVE=S[0],r.RSIGMA=S[1]}}++g}})(0,v.length,v)}),t.header=r,t.setData(f,l,c,u),r.RAVE!==0&&r.RSIGMA!==1&&t.setStats(void 0,void 0,r.RAVE,r.RSIGMA),Je&&Ve.timeEnd("XplorParser._parse "+this.name)}getMatrix(){const t=this.volume.header,n=[t.a,0,0],r=[t.b*Math.cos(Math.PI/180*t.gamma),t.b*Math.sin(Math.PI/180*t.gamma),0],i=[t.c*Math.cos(Math.PI/180*t.beta),t.c*(Math.cos(Math.PI/180*t.alpha)-Math.cos(Math.PI/180*t.gamma)*Math.cos(Math.PI/180*t.beta))/Math.sin(Math.PI/180*t.gamma),0];i[2]=Math.sqrt(t.c*t.c*Math.sin(Math.PI/180*t.beta)*Math.sin(Math.PI/180*t.beta)-i[1]*i[1]);const o=[[],n,r,i],s=[0,t.NA,t.NB,t.NC],a=[0,1,2,3],l=new lt;return l.set(o[a[1]][0]/s[a[1]],o[a[2]][0]/s[a[2]],o[a[3]][0]/s[a[3]],0,o[a[1]][1]/s[a[1]],o[a[2]][1]/s[a[2]],o[a[3]][1]/s[a[3]],0,o[a[1]][2]/s[a[1]],o[a[2]][2]/s[a[2]],o[a[3]][2]/s[a[3]],0,0,0,0,1),l.multiply(new lt().makeTranslation(t.AMIN,t.BMIN,t.CMIN)),l}}function Jn(e,t,n){let r,i,o;e/=360,t/=100,n/=100;const s=Math.floor(6*e),a=6*e-s,l=n*(1-t),c=n*(1-a*t),u=n*(1-(1-a)*t);switch(s%6){case 0:r=n,i=u,o=l;break;case 1:r=c,i=n,o=l;break;case 2:r=l,i=n,o=u;break;case 3:r=l,i=c,o=n;break;case 4:r=u,i=l,o=n;break;case 5:r=n,i=l,o=c}return[r,i,o]}Nt.add("xplor",EV),Nt.add("cns",EV);const e$={red:Jn(0,100,100),orange:Jn(20,100,100),gold:Jn(40,100,100),yellow:Jn(60,100,100),lime:Jn(80,100,100),green:Jn(120,80,100),sea:Jn(150,100,100),cyan:Jn(180,100,85),sky:Jn(210,75,95),blue:Jn(240,70,100),purple:Jn(275,75,100),magenta:Jn(300,95,100),hotpink:Jn(335,100,100),pink:Jn(350,55,100),peach:Jn(25,75,100),lilac:Jn(275,55,100),pinktint:Jn(340,30,100),peachtint:Jn(25,50,100),yellowtint:Jn(60,50,100),greentint:Jn(135,40,100),bluetint:Jn(220,40,100),lilactint:Jn(275,35,100),white:Jn(0,0,100),gray:Jn(0,0,50),brown:Jn(20,45,75),deadwhite:[1,1,1],deadblack:[0,0,0],invisible:[0,0,0]},Wlt=/[\s,]+/,xie=/[^{}\s]*{[^{}]+}|[^{}\s]+/g,t$=/^{+|}+$/g,qlt=/^['"]+|['"]+$/g,_ie=/\s*=\s*/g;function kw(e){let t,n,r,i=[];const o=(e=e.replace(_ie,"=")).match(xie);for(let s=1;s<o.length;++s){const a=o[s];if(a[0]==="{")t=a.substring(1,a.length-1);else{const l=a.split("=");l.length===2&&(l[0]==="color"?n=e$[l[1]]:l[0]==="width"?r=parseInt(l[1]):l[0]==="master"&&i.push(l[1].replace(t$,"")))}}return{listName:t,listColor:n,listMasters:i,listWidth:r}}function Lw(e){const t=(e=e.trim()).indexOf("{"),n=e.indexOf("}"),r=e.substr(n+1).split(Wlt),i=e.substr(t+1,n-1),o=[parseFloat(r[r.length-3]),parseFloat(r[r.length-2]),parseFloat(r[r.length-1])];let s,a,l,c=!1,u=!1;for(let d=4;d<=r.length;d++){const f=r[r.length-d];f in e$&&(s=e$[r[r.length-d]]),f.startsWith("width")&&(a=parseInt(f.substring(5))),f.startsWith("r=")&&(l=parseFloat(f.split("=")[1])),f.startsWith("P")&&(c=!0),f.startsWith("X")&&(u=!0)}return{label:i,position:o,color:s,radius:l,width:a,isLineBreak:c,isTriangleBreak:u}}function PI(e){const t=e.indexOf("{"),n=e.indexOf("}");return e.substring(t!==-1?t+1:0,n!==-1?n:void 0).trim()}function Ylt(e){const t=e.indexOf("}");return t===-1?void 0:e.substr(t+1).trim()}function MI(e){let t="",n=[],r={};const i=(e=e.replace(_ie,"=")).match(xie);for(let o=1;o<i.length;++o){const s=i[o];if(s[0]==="{")t=s.substring(1,s.length-1);else{const a=s.split("=");a.length===2?a[0]==="master"?n.push(a[1].replace(t$,"")):r[a[0]]=a[1].replace(t$,""):r[a[0]]=!0}}return{groupName:t,groupFlags:r,groupMasters:n}}Nt.add("kin",class extends Ea{get type(){return"kin"}get __objName(){return"kinemage"}_parse(){Je&&Ve.time(`KinParser._parse ${this.name}`);const e={kinemage:void 0,onewidth:void 0,"1viewid":void 0,pdbfile:void 0,texts:[],text:"",captions:[],caption:"",groupDict:{},subgroupDict:{},masterDict:{},pointmasterDict:{},dotLists:[],vectorLists:[],ballLists:[],ribbonLists:[]};let t,n;this.kinemage=e;let r,i,o,s,a,l,c,u,d,f,h,p,g,v,m,y,b,_,x,w,S,C,A=!1,T="",O=!1,R="",L=null,D=null,$=!1,z="",H=!1,B="",V=!1,J=!1;if(this.streamer.eachChunkOfLines(function(K){(function(ie,ce,pe){for(let G=ie;G<ce;++G){const he=pe[G];if(he[0]==="@"&&(A=!1,O=!1,$=!1,H=!1,V=!1,J=!1),he)if(he.startsWith("@dotlist")){let{listColor:Z,listName:ae,listMasters:oe}=kw(he);A=!0,T="",i=[],o=[],s=[],r=Z,t&&(oe=oe.concat(t)),n&&(oe=oe.concat(n)),e.dotLists.push({name:ae,masterArray:oe,labelArray:i,positionArray:o,colorArray:s})}else if(he.startsWith("@vectorlist")){let{listMasters:Z,listName:ae,listWidth:oe,listColor:te}=kw(he);Z&&Z.forEach(function(ve){e.masterDict[ve]||(e.masterDict[ve]={indent:!1,visible:!1})}),O=!0,R="",L=null,D=null,c=[],u=[],d=[],f=[],h=[],p=[],a=te,l=[],oe&&l.push(oe),t&&(Z=Z.concat(t)),n&&(Z=Z.concat(n)),e.vectorLists.push({name:ae,masterArray:Z,label1Array:c,label2Array:u,position1Array:d,position2Array:f,color1Array:h,color2Array:p,width:l})}else if(he.startsWith("@balllist")){let{listName:Z,listColor:ae,listMasters:oe}=kw(he);oe&&oe.forEach(function(te){e.masterDict[te]||(e.masterDict[te]={indent:!1,visible:!1})}),$=!0,z="",m=[],g=[],y=[],b=[],v=ae,t&&(oe=oe.concat(t)),n&&(oe=oe.concat(n)),e.ballLists.push({name:Z,masterArray:oe,labelArray:m,radiusArray:g,positionArray:y,colorArray:b})}else if(he.startsWith("@ribbonlist")||he.startsWith("@trianglelist")){let{listMasters:Z,listName:ae,listColor:oe}=kw(he);Z&&Z.forEach(function(te){e.masterDict[te]||(e.masterDict[te]={indent:!1,visible:!1})}),H=!0,B="",x=[],w=[],S=[],C=[],_=oe,t&&(Z=Z.concat(t)),n&&(Z=Z.concat(n)),e.ribbonLists.push({name:ae,masterArray:Z,labelArray:x,positionArray:w,breakArray:S,colorArray:C})}else if(he.startsWith("@text"))V=!0,e.texts.push(he.substr(5));else if(he.startsWith("@caption"))J=!0,e.captions.push(he.substr(8));else if(A){let{label:Z,color:ae,position:oe}=Lw(he);Z==='"'?Z=T:T=Z,ae===void 0&&(ae=r),i.push(Z),o.push(...oe),s.push(...ae)}else if(O){let Z=he.replace(/(?!^){/g,`
{`).split(/\n/);for(var se=0;se<Z.length;se++){let ae=Z[se],{label:oe,color:te,width:ve,position:ne,isLineBreak:xe}=Lw(ae);oe==='"'?oe=R:R=oe,te===void 0&&(te=a),xe||L!==null&&(ve&&l.push(ve),c.push(R),d.push(...L),h.push(...D),u.push(oe),f.push(...ne),p.push(...te)),R=oe,L=ne,D=te}}else if($){let{label:Z,radius:ae,color:oe,position:te}=Lw(he);Z==='"'?Z=z:z=Z,ae===void 0&&(ae=1),oe===void 0&&(oe=v),m.push(Z),g.push(ae),y.push(...te),b.push(...oe)}else if(H){let{label:Z,color:ae,position:oe,isTriangleBreak:te}=Lw(he);Z==='"'?Z=B:B=Z,ae===void 0&&(ae=_),x.push(Z),w.push(...oe),S.push(te),C.push(...ae)}else if(V)e.texts.push(he);else if(J)e.captions.push(he);else if(he.startsWith("@kinemage"))e.kinemage=parseInt(he.substr(9).trim());else if(he.startsWith("@onewidth"))e.onewidth=!0;else if(he.startsWith("@1viewid"))e["1viewid"]=PI(he);else if(he.startsWith("@pdbfile"))e.pdbfile=PI(he);else if(he.startsWith("@group")){let{groupName:Z,groupFlags:ae,groupMasters:oe}=MI(he);e.groupDict[Z]||(e.groupDict[Z]={dominant:!1,animate:!1},t=oe),t&&t.forEach(function(te){e.masterDict[te]||(e.masterDict[te]={indent:!1,visible:!1})});for(let te in ae)e.groupDict[Z][te]=ae[te]}else if(he.startsWith("@subgroup")){const{groupName:Z,groupFlags:ae,groupMasters:oe}=MI(he);e.subgroupDict[Z]||(e.subgroupDict[Z]={dominant:!1,animate:!1},n=oe),n&&n.forEach(function(te){e.masterDict[te]||(e.masterDict[te]={indent:!1,visible:!1})});for(let te in ae)e.subgroupDict[Z][te]=ae[te]}else if(he.startsWith("@master")){const Z=PI(he),ae=Ylt(he);e.masterDict[Z]||(e.masterDict[Z]={indent:!1,visible:!1}),ae==="on"?e.masterDict[Z].visible=!0:ae==="off"?e.masterDict[Z].visible=!1:ae==="indent"&&(e.masterDict[Z].indent=!0)}else if(he.startsWith("@pointmaster")){const{groupName:Z,groupFlags:ae}=MI(he);e.pointmasterDict[Z]={id:Object.keys(ae)[0].replace(qlt,"")}}else console.log(he);else A=!1,O=!1,$=!1,H=!1}})(0,K.length,K)}),e.text=e.texts.join(`
`).trim(),e.caption=e.captions.join(`
`).trim(),e.ribbonLists){let K=[];e.ribbonLists.forEach(function(ie){K.push(function(ce){let{labelArray:pe,positionArray:se,colorArray:G,breakArray:he}=ce,Z=[],ae=[],oe=[],te=[];for(let ve=0;ve<he.length/3;ve++){let ne=3*ve,xe=9*ve;he[ne+1]||he[ne+2]||(Z.push(pe[ne]),Z.push(pe[ne+1]),Z.push(pe[ne+2]),te.push(he[ne]),te.push(he[ne+1]),te.push(he[ne+2]),ae.push(se[xe]),ae.push(se[xe+1]),ae.push(se[xe+2]),ae.push(se[xe+3]),ae.push(se[xe+4]),ae.push(se[xe+5]),ae.push(se[xe+6]),ae.push(se[xe+7]),ae.push(se[xe+8]),oe.push(G[xe]),oe.push(G[xe+1]),oe.push(G[xe+2]),oe.push(G[xe+3]),oe.push(G[xe+4]),oe.push(G[xe+5]),oe.push(G[xe+6]),oe.push(G[xe+7]),oe.push(G[xe+8]))}return{name:ce.name,masterArray:ce.masterArray,labelArray:Z,positionArray:ae,breakArray:te,colorArray:oe}}(function(ce){let{labelArray:pe,positionArray:se,colorArray:G,breakArray:he}=ce,Z=[];for(let ne=0;ne<3*(pe.length-2);++ne)Z[ne]=pe[ne-2*Math.floor(ne/3)];let ae=[];for(let ne=0;ne<3*(he.length-2);++ne)ae[ne]=he[ne-2*Math.floor(ne/3)];let oe=[];for(let ne=0;ne<9*(se.length/3-2);++ne)oe[ne]=se[ne-6*Math.floor(ne/9)];let te=[];for(let ne=0;ne<9*(G.length/3-2);++ne)te[ne]=G[ne-6*Math.floor(ne/9)];let ve=[];for(let ne=0;ne<oe.length/3;++ne)ve.push(new W(oe[3*ne],oe[3*ne]+1,oe[3*ne]+2));return{name:ce.name,masterArray:ce.masterArray,labelArray:Z,positionArray:oe,breakArray:ae,colorArray:te}}(ie)))}),e.ribbonLists=K}Je&&Ve.timeEnd(`KinParser._parse ${this.name}`)}});class wie extends Ea{constructor(t,n){super(t,n),this.loader=this.getLoader(),this.surface=new jE(this.name,this.path)}get type(){return"surface"}get __objName(){return"surface"}_parse(){var t=this.loader.parse(this.streamer.asText());this.surface.fromGeometry(t)}}const n$=function(){this.regexp={vertex_pattern:/^v\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,normal_pattern:/^vn\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,uv_pattern:/^vt\s+([\d.+\-eE]+)\s+([\d.+\-eE]+)/,face_vertex:/^f\s+(-?\d+)\s+(-?\d+)\s+(-?\d+)(?:\s+(-?\d+))?/,face_vertex_uv:/^f\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+))?/,face_vertex_uv_normal:/^f\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)\s+(-?\d+)\/(-?\d+)\/(-?\d+)(?:\s+(-?\d+)\/(-?\d+)\/(-?\d+))?/,face_vertex_normal:/^f\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)\s+(-?\d+)\/\/(-?\d+)(?:\s+(-?\d+)\/\/(-?\d+))?/,object_pattern:/^[og]\s*(.+)?/,smoothing_pattern:/^s\s+(\d+|on|off)/,material_library_pattern:/^mtllib /,material_use_pattern:/^usemtl /}};n$.prototype={constructor:n$,setPath:function(e){this.path=e},_createParserState:function(){var e={objects:[],object:{},vertices:[],normals:[],startObject:function(t,n){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=t,void(this.object.fromDeclaration=n!==!1);this.object={name:t||"",geometry:{vertices:[],normals:[]},fromDeclaration:n!==!1},this.objects.push(this.object)},parseVertexIndex:function(t,n){var r=parseInt(t,10);return 3*(r>=0?r-1:r+n/3)},parseNormalIndex:function(t,n){var r=parseInt(t,10);return 3*(r>=0?r-1:r+n/3)},addVertex:function(t,n,r){var i=this.vertices,o=this.object.geometry.vertices;o.push(i[t+0]),o.push(i[t+1]),o.push(i[t+2]),o.push(i[n+0]),o.push(i[n+1]),o.push(i[n+2]),o.push(i[r+0]),o.push(i[r+1]),o.push(i[r+2])},addVertexLine:function(t){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[t+0]),r.push(n[t+1]),r.push(n[t+2])},addNormal:function(t,n,r){var i=this.normals,o=this.object.geometry.normals;o.push(i[t+0]),o.push(i[t+1]),o.push(i[t+2]),o.push(i[n+0]),o.push(i[n+1]),o.push(i[n+2]),o.push(i[r+0]),o.push(i[r+1]),o.push(i[r+2])},addFace:function(t,n,r,i,o,s,a,l){var c,u=this.vertices.length,d=this.parseVertexIndex(t,u),f=this.parseVertexIndex(n,u),h=this.parseVertexIndex(r,u);if(i===void 0?this.addVertex(d,f,h):(c=this.parseVertexIndex(i,u),this.addVertex(d,f,c),this.addVertex(f,h,c)),o!==void 0){var p=this.normals.length;d=this.parseNormalIndex(o,p),f=o===s?d:this.parseNormalIndex(s,p),h=o===a?d:this.parseNormalIndex(a,p),i===void 0?this.addNormal(d,f,h):(c=this.parseNormalIndex(l,p),this.addNormal(d,f,c),this.addNormal(f,h,c))}},addLineGeometry:function(t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=0,i=t.length;r<i;r++)this.addVertexLine(this.parseVertexIndex(t[r],n))}};return e.startObject("",!1),e},parse:function(e){var t,n,r=this._createParserState();e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));var i=e.split(`
`),o="",s="",a="",l=[],c=typeof"".trimLeft=="function";for(t=0,n=i.length;t<n;t++)if(o=i[t],(o=c?o.trimLeft():o.trim()).length!==0&&(s=o.charAt(0))!=="#"){if(s==="v"){if((a=o.charAt(1))===" "&&(l=this.regexp.vertex_pattern.exec(o))!==null)r.vertices.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));else if(a==="n"&&(l=this.regexp.normal_pattern.exec(o))!==null)r.normals.push(parseFloat(l[1]),parseFloat(l[2]),parseFloat(l[3]));else if(a!=="t"||this.regexp.uv_pattern.exec(o)===null)throw new Error("Unexpected vertex/normal/uv line: '"+o+"'")}else if(s==="f"){if((l=this.regexp.face_vertex_uv_normal.exec(o))!==null)r.addFace(l[1],l[4],l[7],l[10],l[3],l[6],l[9],l[12]);else if(this.regexp.face_vertex_uv.exec(o)===null)if((l=this.regexp.face_vertex_normal.exec(o))!==null)r.addFace(l[1],l[3],l[5],l[7],l[2],l[4],l[6],l[8]);else{if((l=this.regexp.face_vertex.exec(o))===null)throw new Error("Unexpected face line: '"+o+"'");r.addFace(l[1],l[2],l[3],l[4])}}else if(s==="l"){var u=o.substring(1).trim().split(" "),d=[],f=[];if(o.indexOf("/")===-1)d=u;else for(var h=0,p=u.length;h<p;h++){var g=u[h].split("/");g[0]!==""&&d.push(g[0]),g[1]!==""&&f.push(g[1])}r.addLineGeometry(d,f)}else if((l=this.regexp.object_pattern.exec(o))!==null){var v=l[0].substr(1).trim();r.startObject(v)}else if(!this.regexp.material_use_pattern.test(o)){if(!this.regexp.material_library_pattern.test(o)){if(this.regexp.smoothing_pattern.exec(o)===null){if(o==="\0")continue;throw new Error("Unexpected line: '"+o+"'")}}}}var m=[];for(t=0,n=r.objects.length;t<n;t++){var y=r.objects[t].geometry;if(y.vertices.length!==0){var b=new wt;b.setAttribute("position",new Rt(new Float32Array(y.vertices),3)),y.normals.length>0?b.setAttribute("normal",new Rt(new Float32Array(y.normals),3)):b.computeVertexNormals(),m.push(b)}}return m}};Nt.add("obj",class extends wie{get type(){return"obj"}getLoader(){return new n$}});const r$=function(){this.propertyNameMapping={}};r$.prototype={constructor:r$,setPropertyNameMapping:function(e){this.propertyNameMapping=e},bin2str:function(e){for(var t=new Uint8Array(e),n="",r=0;r<e.byteLength;r++)n+=String.fromCharCode(t[r]);return n},isASCII:function(e){return this.parseHeader(this.bin2str(e)).format==="ascii"},parse:function(e){return e instanceof ArrayBuffer?this.isASCII(e)?this.parseASCII(this.bin2str(e)):this.parseBinary(e):this.parseASCII(e)},parseHeader:function(e){var t="",n=0,r=/ply([\s\S]*)end_header\s/.exec(e);r!==null&&(t=r[1],n=r[0].length);for(var i,o,s,a,l,c,u={comments:[],elements:[],headerLength:n},d=t.split(`
`),f=0;f<d.length;f++){var h=d[f];if((h=h.trim())!=="")switch(o=(s=h.split(/\s+/)).shift(),h=s.join(" "),o){case"format":u.format=s[0],u.version=s[1];break;case"comment":u.comments.push(h);break;case"element":i!==void 0&&u.elements.push(i),(i={}).name=s[0],i.count=parseInt(s[1]),i.properties=[];break;case"property":i.properties.push((a=s,l=this.propertyNameMapping,c=void 0,(c={type:a[0]}).type==="list"?(c.name=a[3],c.countType=a[1],c.itemType=a[2]):c.name=a[1],c.name in l&&(c.name=l[c.name]),c));break;default:console.log("unhandled",o,s)}}return i!==void 0&&u.elements.push(i),u},parseASCIINumber:function(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}},parseASCIIElement:function(e,t){for(var n=t.split(/\s+/),r={},i=0;i<e.length;i++)if(e[i].type==="list"){for(var o=[],s=this.parseASCIINumber(n.shift(),e[i].countType),a=0;a<s;a++)o.push(this.parseASCIINumber(n.shift(),e[i].itemType));r[e[i].name]=o}else r[e[i].name]=this.parseASCIINumber(n.shift(),e[i].type);return r},parseASCII:function(e){var t,n=new Ft,r=this.parseHeader(e),i="";(t=/end_header\s([\s\S]*)$/.exec(e))!==null&&(i=t[1]);var o=i.split(`
`),s=0,a=0;n.useColor=!1;for(var l=0;l<o.length;l++){var c=o[l];if((c=c.trim())!==""){a>=r.elements[s].count&&(s++,a=0);var u=this.parseASCIIElement(r.elements[s].properties,c);this.handleElement(n,r.elements[s].name,u),a++}}return this.postProcess(n)},postProcess:function(e){if(e.useColor){for(var t=0;t<e.faces.length;t++)e.faces[t].vertexColors=[e.colors[e.faces[t].a],e.colors[e.faces[t].b],e.colors[e.faces[t].c]];e.elementsNeedUpdate=!0}return e.computeBoundingSphere(),e},handleElement:function(e,t,n){if(t==="vertex"){if(e.vertices.push(new W(n.x,n.y,n.z)),"red"in n&&"green"in n&&"blue"in n){e.useColor=!0;var r=new ht;r.setRGB(n.red/255,n.green/255,n.blue/255),e.colors.push(r)}}else if(t==="face"){var i=n.vertex_indices;i.length===3?e.faces.push(new Ef(i[0],i[1],i[2])):i.length===4&&e.faces.push(new Ef(i[0],i[1],i[3]),new Ef(i[1],i[2],i[3]))}},binaryRead:function(e,t,n,r){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,r),2];case"uint16":case"ushort":return[e.getUint16(t,r),2];case"int32":case"int":return[e.getInt32(t,r),4];case"uint32":case"uint":return[e.getUint32(t,r),4];case"float32":case"float":return[e.getFloat32(t,r),4];case"float64":case"double":return[e.getFloat64(t,r),8]}},binaryReadElement:function(e,t,n,r){for(var i,o={},s=0,a=0;a<n.length;a++)if(n[a].type==="list"){var l=[],c=(i=this.binaryRead(e,t+s,n[a].countType,r))[0];s+=i[1];for(var u=0;u<c;u++)i=this.binaryRead(e,t+s,n[a].itemType,r),l.push(i[0]),s+=i[1];o[n[a].name]=l}else i=this.binaryRead(e,t+s,n[a].type,r),o[n[a].name]=i[0],s+=i[1];return[o,s]},parseBinary:function(e){for(var t,n=new Ft,r=this.parseHeader(this.bin2str(e)),i=r.format==="binary_little_endian",o=new DataView(e,r.headerLength),s=0,a=0;a<r.elements.length;a++)for(var l=0;l<r.elements[a].count;l++){s+=(t=this.binaryReadElement(o,s,r.elements[a].properties,i))[1];var c=t[0];this.handleElement(n,r.elements[a].name,c)}return this.postProcess(n)}};Nt.add("ply",class extends wie{get type(){return"ply"}getLoader(){return new r$}});Nt.add("csv",class extends Ea{constructor(e,t){const n=t||{};super(e,n),this.delimiter=re(n.delimiter,","),this.comment=re(n.comment,"#"),this.columnNames=re(n.columnNames,!1),this.table={name:this.name,path:this.path,columnNames:[],data:[]}}get type(){return"csv"}get __objName(){return"table"}_parse(){const e=this.table.data,t=new RegExp("\\s*"+this.delimiter+"\\s*");let n=0;this.streamer.eachChunkOfLines(r=>{const i=r.length;for(let o=0;o<i;++o){const s=r[o].trim();if(s.startsWith(this.comment))continue;const a=s.split(t);n===0?this.table.columnNames=a:s&&e.push(a),++n}})}});Nt.add("json",class extends Ea{constructor(e,t){const n=t||{};super(e,n),this.string=re(n.string,!1),this.json={name:this.name,path:this.path,data:{}}}get type(){return"json"}get __objName(){return"json"}get isJson(){return!0}_parse(){this.streamer.isBinary()||this.string?this.json.data=JSON.parse(this.streamer.asText()):this.json.data=this.streamer.data}});Nt.add("msgpack",class extends Ea{constructor(e,t){super(e,t||{}),this.msgpack={name:this.name,path:this.path,data:void 0}}get type(){return"msgpack"}get __objName(){return"msgpack"}get isBinary(){return!0}_parse(){Je&&Ve.time("MsgpackParser._parse "+this.name),this.msgpack.data=mie(this.streamer.data),Je&&Ve.timeEnd("MsgpackParser._parse "+this.name)}});Nt.add("netcdf",class extends Ea{constructor(e,t){super(e,t||{}),this.netcdf={name:this.name,path:this.path,data:void 0}}get type(){return"netcdf"}get __objName(){return"netcdf"}get isBinary(){return!0}_parse(){Je&&Ve.time("NetcdfParser._parse "+this.name),this.netcdf.data=new yie(this.streamer.data),Je&&Ve.timeEnd("NetcdfParser._parse "+this.name)}});class TV extends Ea{constructor(t,n){super(t,n),this.text={name:this.name,path:this.path,data:""}}get type(){return"text"}get __objName(){return"text"}_parse(){this.text.data=this.streamer.asText()}}Nt.add("txt",TV),Nt.add("text",TV);const Xlt=/^['"]|['"]$/g,Klt=/^<([\w-:.]+)\s*/,Zlt=/^([^<]*)/,Jlt=/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/;function Qlt(e){return e=e.trim().replace(/<!--[\s\S]*?-->/g,""),{declaration:t(),root:n()};function t(){if(!i(/^<\?xml\s*/))return;const a={attributes:{}};for(;!o()&&!s("?>");){const l=r();if(!l)return a;a.attributes[l.name]=l.value}return i(/\?>\s*/),a}function n(){const a=i(Klt);if(!a)return;const l={name:a[1],attributes:{},children:[]};for(;!(o()||s(">")||s("?>")||s("/>"));){const u=r();if(!u)return l;l.attributes[u.name]=u.value}if(i(/^\s*\/>\s*/))return l;let c;for(i(/\??>\s*/),l.content=function(){const u=i(Zlt);return u?u[1]:""}();c=n();)l.children.push(c);return i(/^<\/[\w-:.]+>\s*/),l}function r(){const a=i(Jlt);var l;if(a)return{name:a[1],value:(l=a[2],l.replace(Xlt,""))}}function i(a){const l=e.match(a);if(l)return e=e.slice(l[0].length),l}function o(){return e.length===0}function s(a){return e.indexOf(a)===0}}class Sie extends Ea{constructor(t,n){const r=n||{};super(t,r),this.useDomParser=re(r.useDomParser,!1),this.xml={name:this.name,path:this.path,data:{}}}get type(){return"xml"}get __objName(){return"xml"}get isXml(){return!0}__xmlParser(t){return Qlt(t)}__domParser(t){return new window.DOMParser().parseFromString(t,"text/xml")}_parse(){Je&&Ve.time("XmlParser._parse "+this.name),this.useDomParser?this.streamer.data instanceof Document?this.xml.data=this.streamer.data:this.xml.data=this.__domParser(this.streamer.asText()):this.xml.data=this.__xmlParser(this.streamer.asText()),Je&&Ve.timeEnd("XmlParser._parse "+this.name)}}function Fr(e,t){const n=e.getNamedItem(t);return n!==null?n.value:""}function OV(e,t,n=!1){const r=Fr(e,"icode").trim(),i=Fr(e,"chain").trim(),o=Fr(e,"altcode");let s=Fr(e,"resnum");return r&&(s+="^"+r),i&&(s+=":"+i),t&&(s+="."+t),n&&o.trim()&&(s+="%"+o),s+="/"+(parseInt(Fr(e,"model"))-1),s}function ect(e){const t=Fr(e,"chain").trim();let n=`[${Fr(e,"rescode")}]${Fr(e,"resnum")}`;return t&&(n+=`:${t}`),n}function EI(e,t,n){e[t]===void 0?e[t]=n:e[t]|=n}function TI(e,t){return e!==null&&e.value===t}function tct(e,t,n){let r=0;const i=t.getElementsByTagName("clash");for(let o=0,s=i.length;o<s;++o)if(e[Fr(i[o].attributes,"cid")]){r+=1;break}return t.getElementsByTagName("angle-outlier").length>0&&(r+=1),t.getElementsByTagName("bond-outlier").length>0&&(r+=1),t.getElementsByTagName("plane-outlier").length>0&&(r+=1),TI(n.getNamedItem("rota"),"OUTLIER")&&(r+=1),TI(n.getNamedItem("rama"),"OUTLIER")&&(r+=1),TI(n.getNamedItem("RNApucker"),"outlier")&&(r+=1),r}Nt.add("xml",Sie);class nct{constructor(t,n){this.name=t,this.path=n,this.rsrzDict={},this.rsccDict={},this.rciDict={},this.clashDict={},this.clashArray=[],this.geoDict={},this.geoAtomDict={},this.atomDict={},this.clashSele="NONE"}get type(){return"validation"}fromXml(t){Je&&Ve.time("Validation.fromXml");const n=this.rsrzDict,r=this.rsccDict,i=this.rciDict,o=this.clashDict,s=this.clashArray,a=this.geoDict,l=this.geoAtomDict,c=this.atomDict,u=t.getElementsByTagName("Entry");if(u.length===1){const p=u[0].getElementsByTagName("chemical_shift_list");if(p.length===1){const g=p[0].getElementsByTagName("random_coil_index");for(let v=0,m=g.length;v<m;++v){const y=g[v].attributes;i[ect(y)]=parseFloat(Fr(y,"value"))}}}const d=t.getElementsByTagName("ModelledSubgroup"),f={},h=[];Je&&Ve.time("Validation.fromXml#clashDict");for(let p=0,g=d.length;p<g;++p){const v=d[p],m=v.attributes,y=OV(m);m.getNamedItem("rsrz")!==null&&(n[y]=parseFloat(Fr(m,"rsrz"))),m.getNamedItem("rscc")!==null&&(r[y]=parseFloat(Fr(m,"rscc")));const b=t.createAttribute("sele");b.value=y,m.setNamedItem(b);const _=v.getElementsByTagName("clash");for(let x=0,w=_.length;x<w;++x){const S=_[x].attributes,C=Fr(S,"atom");if(uB(C)!=="H"){const A=Fr(S,"cid"),T=OV(m,C,!0);if(c[T]=!0,f[A]===void 0)f[A]={sele1:T,res1:y};else{const O=f[A];O.res1!==y&&(O.sele2=T,O.res2=y,h.push(O.res1,y),o[A]=O,s.push(O))}}}}Je&&Ve.timeEnd("Validation.fromXml#clashDict");for(let p=0,g=d.length;p<g;++p){const v=d[p],m=v.attributes,y=Fr(m,"sele");if(Fr(m,"seq")!=="."){const b=tct(o,v,m);b>0&&(a[y]=b)}else{const b=v.getElementsByTagName("clash"),_=v.getElementsByTagName("mog-bond-outlier"),x=v.getElementsByTagName("mog-angle-outlier");if(_.length>0||x.length>0||b.length>0){const w={};l[y]=w;for(let S=0,C=b.length;S<C;++S){const A=b[S].attributes;o[Fr(A,"cid")]&&EI(w,Fr(A,"atom"),1)}for(let S=0,C=_.length;S<C;++S)Fr(_[S].attributes,"atoms").split(",").forEach(function(A){EI(w,A,2)});for(let S=0,C=x.length;S<C;++S)Fr(x[S].attributes,"atoms").split(",").forEach(function(A){EI(w,A,4)})}}}this.clashSele=h.length?h.join(" OR "):"NONE",Je&&Ve.timeEnd("Validation.fromXml")}getClashData(t){Je&&Ve.time("Validation.getClashData");const n=t||{},r=n.structure,i=r.atomSet,o=new ht(re(n.color,"#f0027f")),s=r.getAtomProxy(),a=r.getAtomProxy(),l=new W,c=new W,u=new W,d=this.clashArray,f=d.length,h=new Float32Array(3*f),p=new Float32Array(3*f),g=En(f,o.r,o.g,o.b),v=new Float32Array(f),m=new Float32Array(f);Je&&Ve.time("Validation.getClashData#atomDict");const y=this.atomDict;r.eachAtom(function(_){const x=function(w){const S=w.inscode,C=w.chainname,A=w.atomname,T=w.altloc;let O=w.resno+"";return S&&(O+="^"+S),C&&(O+=":"+C),A&&(O+="."+A),T&&(O+="%"+T),O+="/"+w.modelIndex,O}(_);y[x]===!0&&(y[x]=_.index)}),Je&&Ve.timeEnd("Validation.getClashData#atomDict");let b=0;return d.forEach(function(_,x){if(s.index=y[_.sele1],a.index=y[_.sele2],s.index===void 0||a.index===void 0||!i.isSet(s.index,a.index))return;l.subVectors(a,s).setLength(s.vdw),c.copy(s).add(l),l.subVectors(s,a).setLength(a.vdw),u.copy(a).add(l);const w=s.distanceTo(a)/2,S=Math.sqrt(s.vdw*s.vdw-w*w),C=Math.sqrt(a.vdw*a.vdw-w*w);c.toArray(h,3*b),u.toArray(p,3*b),v[b]=(S+C)/2,m[b]=x,++b}),Je&&Ve.timeEnd("Validation.getClashData"),{position1:h.subarray(0,3*b),position2:p.subarray(0,3*b),color:g.subarray(0,3*b),color2:g.subarray(0,3*b),radius:v.subarray(0,b),picking:new _ot(m.subarray(0,b),this,r)}}}function Cie(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)}function _m(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]}function i$(e,t,n,r){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;n!==0;){n-=s=n>2e3?2e3:n;do o=o+(i=i+t[r++]|0)|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}Nt.add("validation",class extends Sie{constructor(e,t){super(e,t||{}),this.useDomParser=!0,this.validation=new nct(this.name,this.path)}get __objName(){return"validation"}get isXml(){return!0}_parse(){super._parse(),Je&&Ve.time("ValidationParser._parse "+this.name),this.validation.fromXml(this.xml.data),Je&&Ve.timeEnd("ValidationParser._parse "+this.name)}});var rct=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();function Da(e,t,n,r){var i=rct,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}var $w=30,ict=12;function oct(e,t){var n,r,i,o,s,a,l,c,u,d,f,h,p,g,v,m,y,b,_,x,w,S,C,A,T;n=e.state,r=e.next_in,A=e.input,i=r+(e.avail_in-5),o=e.next_out,T=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,f=n.window,h=n.hold,p=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(h+=A[r++]<<p,p+=8,h+=A[r++]<<p,p+=8),b=g[h&m];t:for(;;){if(h>>>=_=b>>>24,p-=_,(_=b>>>16&255)===0)T[o++]=65535&b;else{if(!(16&_)){if(!(64&_)){b=g[(65535&b)+(h&(1<<_)-1)];continue t}if(32&_){n.mode=ict;break e}e.msg="invalid literal/length code",n.mode=$w;break e}x=65535&b,(_&=15)&&(p<_&&(h+=A[r++]<<p,p+=8),x+=h&(1<<_)-1,h>>>=_,p-=_),p<15&&(h+=A[r++]<<p,p+=8,h+=A[r++]<<p,p+=8),b=v[h&y];n:for(;;){if(h>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(!(64&_)){b=v[(65535&b)+(h&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=$w;break e}if(w=65535&b,p<(_&=15)&&(h+=A[r++]<<p,(p+=8)<_&&(h+=A[r++]<<p,p+=8)),(w+=h&(1<<_)-1)>l){e.msg="invalid distance too far back",n.mode=$w;break e}if(h>>>=_,p-=_,w>(_=o-s)){if((_=w-_)>u&&n.sane){e.msg="invalid distance too far back",n.mode=$w;break e}if(S=0,C=f,d===0){if(S+=c-_,_<x){x-=_;do T[o++]=f[S++];while(--_);S=o-w,C=T}}else if(d<_){if(S+=c+d-_,(_-=d)<x){x-=_;do T[o++]=f[S++];while(--_);if(S=0,d<x){x-=_=d;do T[o++]=f[S++];while(--_);S=o-w,C=T}}}else if(S+=d-_,_<x){x-=_;do T[o++]=f[S++];while(--_);S=o-w,C=T}for(;x>2;)T[o++]=C[S++],T[o++]=C[S++],T[o++]=C[S++],x-=3;x&&(T[o++]=C[S++],x>1&&(T[o++]=C[S++]))}else{S=o-w;do T[o++]=T[S++],T[o++]=T[S++],T[o++]=T[S++],x-=3;while(x>2);x&&(T[o++]=T[S++],x>1&&(T[o++]=T[S++]))}break}}break}}while(r<i&&o<a);r-=x=p>>3,h&=(1<<(p-=x<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<a?a-o+257:257-(o-a),n.hold=h,n.bits=p}var vp=15,IV=852,RV=592,kV=0,OI=1,LV=2,sct=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],act=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],lct=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],cct=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function Sy(e,t,n,r,i,o,s,a){var l,c,u,d,f,h,p,g,v,m=a.bits,y=0,b=0,_=0,x=0,w=0,S=0,C=0,A=0,T=0,O=0,R=null,L=0,D=new Uint16Array(vp+1),$=new Uint16Array(vp+1),z=null,H=0;for(y=0;y<=vp;y++)D[y]=0;for(b=0;b<r;b++)D[t[n+b]]++;for(w=m,x=vp;x>=1&&D[x]===0;x--);if(w>x&&(w=x),x===0)return i[o++]=20971520,i[o++]=20971520,a.bits=1,0;for(_=1;_<x&&D[_]===0;_++);for(w<_&&(w=_),A=1,y=1;y<=vp;y++)if(A<<=1,(A-=D[y])<0)return-1;if(A>0&&(e===kV||x!==1))return-1;for($[1]=0,y=1;y<vp;y++)$[y+1]=$[y]+D[y];for(b=0;b<r;b++)t[n+b]!==0&&(s[$[t[n+b]]++]=b);if(e===kV?(R=z=s,h=19):e===OI?(R=sct,L-=257,z=act,H-=257,h=256):(R=lct,z=cct,h=-1),O=0,b=0,y=_,f=o,S=w,C=0,u=-1,d=(T=1<<w)-1,e===OI&&T>IV||e===LV&&T>RV)return 1;for(;;){p=y-C,s[b]<h?(g=0,v=s[b]):s[b]>h?(g=z[H+s[b]],v=R[L+s[b]]):(g=96,v=0),l=1<<y-C,_=c=1<<S;do i[f+(O>>C)+(c-=l)]=p<<24|g<<16|v|0;while(c!==0);for(l=1<<y-1;O&l;)l>>=1;if(l!==0?(O&=l-1,O+=l):O=0,b++,--D[y]==0){if(y===x)break;y=t[n+s[b]]}if(y>w&&(O&d)!==u){for(C===0&&(C=w),f+=_,A=1<<(S=y-C);S+C<x&&!((A-=D[S+C])<=0);)S++,A<<=1;if(T+=1<<S,e===OI&&T>IV||e===LV&&T>RV)return 1;i[u=O&d]=w<<24|S<<16|f-o|0}}return O!==0&&(i[f+O]=y-C<<24|64<<16|0),a.bits=w,0}var Aie=1,Pie=2,$g=0,ul=-2,Mie=1,Fl=12,ar=30,uct=852,dct=592;function $V(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function fct(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function hct(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,function(n){var r;return n&&n.state?(r=n.state,n.total_in=n.total_out=r.total=0,n.msg="",r.wrap&&(n.adler=1&r.wrap),r.mode=Mie,r.last=0,r.havedict=0,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(uct),r.distcode=r.distdyn=new Int32Array(dct),r.sane=1,r.back=-1,$g):ul}(e)):ul}function pct(e,t){var n,r;return e?(r=new fct,e.state=r,r.window=null,n=function(i,o){var s,a;return i&&i.state?(a=i.state,o<0?(s=0,o=-o):(s=1+(o>>4),o<48&&(o&=15)),o&&(o<8||o>15)?ul:(a.window!==null&&a.wbits!==o&&(a.window=null),a.wrap=s,a.wbits=o,hct(i))):ul}(e,t),n!==$g&&(e.state=null),n):ul}var II,RI,DV=!0;function mct(e){if(DV){var t;for(II=new Int32Array(512),RI=new Int32Array(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Sy(Aie,e.lens,0,288,II,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Sy(Pie,e.lens,0,32,RI,0,e.work,{bits:5}),DV=!1}e.lencode=II,e.lenbits=9,e.distcode=RI,e.distbits=5}function Eie(e,t,n,r){var i,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),r>=o.wsize?(_m(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>r&&(i=r),_m(o.window,t,n-r,i,o.wnext),(r-=i)?(_m(o.window,t,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function gct(e,t){var n,r,i,o,s,a,l,c,u,d,f,h,p,g,v,m,y,b,_,x,w,S,C,A,T=0,O=new Uint8Array(4),R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return ul;(n=e.state).mode===Fl&&(n.mode=13),s=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,f=l,S=$g;e:for(;;)switch(n.mode){case Mie:if(n.wrap===0){n.mode=13;break}for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(2&n.wrap&&c===35615){n.check=0,O[0]=255&c,O[1]=c>>>8&255,n.check=Da(n.check,O,2,0),c=0,u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=ar;break}if((15&c)!=8){e.msg="unknown compression method",n.mode=ar;break}if(u-=4,w=8+(15&(c>>>=4)),n.wbits===0)n.wbits=w;else if(w>n.wbits){e.msg="invalid window size",n.mode=ar;break}n.dmax=1<<w,e.adler=n.check=1,n.mode=512&c?10:Fl,c=0,u=0;break;case 2:for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(n.flags=c,(255&n.flags)!=8){e.msg="unknown compression method",n.mode=ar;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=ar;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(O[0]=255&c,O[1]=c>>>8&255,n.check=Da(n.check,O,2,0)),c=0,u=0,n.mode=3;case 3:for(;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&(O[0]=255&c,O[1]=c>>>8&255,O[2]=c>>>16&255,O[3]=c>>>24&255,n.check=Da(n.check,O,4,0)),c=0,u=0,n.mode=4;case 4:for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(O[0]=255&c,O[1]=c>>>8&255,n.check=Da(n.check,O,2,0)),c=0,u=0,n.mode=5;case 5:if(1024&n.flags){for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(O[0]=255&c,O[1]=c>>>8&255,n.check=Da(n.check,O,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((h=n.length)>a&&(h=a),h&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),_m(n.head.extra,r,o,h,w)),512&n.flags&&(n.check=Da(n.check,r,h,o)),a-=h,o+=h,n.length-=h),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(a===0)break e;h=0;do w=r[o+h++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w));while(w&&h<a);if(512&n.flags&&(n.check=Da(n.check,r,h,o)),a-=h,o+=h,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(a===0)break e;h=0;do w=r[o+h++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w));while(w&&h<a);if(512&n.flags&&(n.check=Da(n.check,r,h,o)),a-=h,o+=h,w)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;u<16;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=ar;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Fl;break;case 10:for(;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}e.adler=n.check=$V(c),c=0,u=0,n.mode=11;case 11:if(n.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=u,2;e.adler=n.check=1,n.mode=Fl;case Fl:if(t===5||t===6)break e;case 13:if(n.last){c>>>=7&u,u-=7&u,n.mode=27;break}for(;u<3;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}switch(n.last=1&c,u-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(mct(n),n.mode=20,t===6){c>>>=2,u-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=ar}c>>>=2,u-=2;break;case 14:for(c>>>=7&u,u-=7&u;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=ar;break}if(n.length=65535&c,c=0,u=0,n.mode=15,t===6)break e;case 15:n.mode=16;case 16:if(h=n.length){if(h>a&&(h=a),h>l&&(h=l),h===0)break e;_m(i,r,o,h,s),a-=h,o+=h,l-=h,s+=h,n.length-=h;break}n.mode=Fl;break;case 17:for(;u<14;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=ar;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.lens[R[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[R[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},S=Sy(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,S){e.msg="invalid code lengths set",n.mode=ar;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(T=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&T,!((v=T>>>24)<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(y<16)c>>>=v,u-=v,n.lens[n.have++]=y;else{if(y===16){for(A=v+2;u<A;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(c>>>=v,u-=v,n.have===0){e.msg="invalid bit length repeat",n.mode=ar;break}w=n.lens[n.have-1],h=3+(3&c),c>>>=2,u-=2}else if(y===17){for(A=v+3;u<A;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}u-=v,w=0,h=3+(7&(c>>>=v)),c>>>=3,u-=3}else{for(A=v+7;u<A;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}u-=v,w=0,h=11+(127&(c>>>=v)),c>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=ar;break}for(;h--;)n.lens[n.have++]=w}}if(n.mode===ar)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=ar;break}if(n.lenbits=9,C={bits:n.lenbits},S=Sy(Aie,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,S){e.msg="invalid literal/lengths set",n.mode=ar;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},S=Sy(Pie,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,S){e.msg="invalid distances set",n.mode=ar;break}if(n.mode=20,t===6)break e;case 20:n.mode=21;case 21:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=u,oct(e,f),s=e.next_out,i=e.output,l=e.avail_out,o=e.next_in,r=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===Fl&&(n.back=-1);break}for(n.back=0;m=(T=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,y=65535&T,!((v=T>>>24)<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(m&&!(240&m)){for(b=v,_=m,x=y;m=(T=n.lencode[x+((c&(1<<b+_)-1)>>b)])>>>16&255,y=65535&T,!(b+(v=T>>>24)<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=v,u-=v,n.back+=v,n.length=y,m===0){n.mode=26;break}if(32&m){n.back=-1,n.mode=Fl;break}if(64&m){e.msg="invalid literal/length code",n.mode=ar;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(A=n.extra;u<A;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(T=n.distcode[c&(1<<n.distbits)-1])>>>16&255,y=65535&T,!((v=T>>>24)<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(!(240&m)){for(b=v,_=m,x=y;m=(T=n.distcode[x+((c&(1<<b+_)-1)>>b)])>>>16&255,y=65535&T,!(b+(v=T>>>24)<=u);){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=v,u-=v,n.back+=v,64&m){e.msg="invalid distance code",n.mode=ar;break}n.offset=y,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(A=n.extra;u<A;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=ar;break}n.mode=25;case 25:if(l===0)break e;if(h=f-l,n.offset>h){if((h=n.offset-h)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=ar;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),g=n.window}else g=i,p=s-n.offset,h=n.length;h>l&&(h=l),l-=h,n.length-=h;do i[s++]=g[p++];while(--h);n.length===0&&(n.mode=21);break;case 26:if(l===0)break e;i[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=r[o++]<<u,u+=8}if(f-=l,e.total_out+=f,n.total+=f,f&&(e.adler=n.check=n.flags?Da(n.check,i,f,s-f):i$(n.check,i,f,s-f)),f=l,(n.flags?c:$V(c))!==n.check){e.msg="incorrect data check",n.mode=ar;break}c=0,u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=r[o++]<<u,u+=8}if(c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=ar;break}c=0,u=0}n.mode=29;case 29:S=1;break e;case ar:S=-3;break e;case 31:return-4;default:return ul}return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<ar&&(n.mode<27||t!==4))&&Eie(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&&f&&(e.adler=n.check=n.flags?Da(n.check,i,f,e.next_out-f):i$(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Fl?128:0)+(n.mode===20||n.mode===15?256:0),(d===0&&f===0||t===4)&&S===$g&&(S=-5),S}function vct(e,t){var n,r=t.length;return e&&e.state?(n=e.state).wrap!==0&&n.mode!==11?ul:n.mode===11&&i$(1,t,r,0)!==n.check?-3:Eie(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,$g):ul}var Tie=!0,Oie=!0;try{String.fromCharCode.apply(null,[0])}catch{Tie=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Oie=!1}for(var Yb=new Uint8Array(256),tu=0;tu<256;tu++)Yb[tu]=tu>=252?6:tu>=248?5:tu>=240?4:tu>=224?3:tu>=192?2:1;function yct(e){var t,n,r,i,o,s=e.length,a=0;for(i=0;i<s;i++)(64512&(n=e.charCodeAt(i)))==55296&&i+1<s&&(64512&(r=e.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),i++),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),o=0,i=0;o<a;i++)(64512&(n=e.charCodeAt(i)))==55296&&i+1<s&&(64512&(r=e.charCodeAt(i+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),i++),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t}function bct(e,t){var n,r,i,o,s=t||e.length,a=new Array(2*s);for(r=0,n=0;n<s;)if((i=e[n++])<128)a[r++]=i;else if((o=Yb[i])>4)a[r++]=65533,n+=o-1;else{for(i&=o===2?31:o===3?15:7;o>1&&n<s;)i=i<<6|63&e[n++],o--;o>1?a[r++]=65533:i<65536?a[r++]=i:(i-=65536,a[r++]=55296|i>>10&1023,a[r++]=56320|1023&i)}return function(l,c){if(c<65537&&(l.subarray&&Oie||!l.subarray&&Tie))return String.fromCharCode.apply(null,Cie(l,c));for(var u="",d=0;d<c;d++)u+=String.fromCharCode(l[d]);return u}(a,r)}function xct(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&(192&e[n])==128;)n--;return n<0||n===0?t:n+Yb[e[n]]>t?n:t}Yb[254]=Yb[254]=1;var Ip=0,_ct={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function wct(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function Sct(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var BV=Object.prototype.toString;function tm(e){if(!(this instanceof tm))return new tm(e);this.options=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])}}return s}({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new wct,this.strm.avail_out=0;var n,r,i,o=pct(this.strm,t.windowBits);if(o!==Ip)throw new Error(_ct[o]);this.header=new Sct,n=this.strm,r=this.header,n&&n.state&&(!(2&(i=n.state).wrap)||(i.head=r,r.done=!1))}tm.prototype.push=function(e,t){var n,r,i,o,s,a,l=this.strm,c=this.options.chunkSize,u=this.options.dictionary,d=!1;if(this.ended)return!1;r=t===~~t?t:t===!0?4:0,typeof e=="string"?l.input=function(f){for(var h=new Uint8Array(f.length),p=0,g=h.length;p<g;p++)h[p]=f.charCodeAt(p);return h}(e):BV.call(e)==="[object ArrayBuffer]"?l.input=new Uint8Array(e):l.input=e,l.next_in=0,l.avail_in=l.input.length;do{if(l.avail_out===0&&(l.output=new Uint8Array(c),l.next_out=0,l.avail_out=c),(n=gct(l,0))===2&&u&&(a=typeof u=="string"?yct(u):BV.call(u)==="[object ArrayBuffer]"?new Uint8Array(u):u,n=vct(this.strm,a)),n===-5&&d===!0&&(n=Ip,d=!1),n!==1&&n!==Ip)return this.onEnd(n),this.ended=!0,!1;l.next_out&&(l.avail_out!==0&&n!==1&&(l.avail_in!==0||r!==4&&r!==2)||(this.options.to==="string"?(i=xct(l.output,l.next_out),o=l.next_out-i,s=bct(l.output,i),l.next_out=o,l.avail_out=c-o,o&&_m(l.output,l.output,i,o,0),this.onData(s)):this.onData(Cie(l.output,l.next_out)))),l.avail_in===0&&l.avail_out===0&&(d=!0)}while((l.avail_in>0||l.avail_out===0)&&n!==1);return n===1&&(r=4),r===4?(n=function(f){if(!f||!f.state)return ul;var h=f.state;return h.window&&(h.window=null),f.state=null,$g}(this.strm),this.onEnd(n),this.ended=!0,n===Ip):r!==2||(this.onEnd(Ip),l.avail_out=0,!0)},tm.prototype.onData=function(e){this.chunks.push(e)},tm.prototype.onEnd=function(e){e===Ip&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=function(t){var n,r,i,o,s,a;for(i=0,n=0,r=t.length;n<r;n++)i+=t[n].length;for(a=new Uint8Array(i),o=0,n=0,r=t.length;n<r;n++)s=t[n],a.set(s,o),o+=s.length;return a}(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},iB.add("gz",function(e){let t;e instanceof ArrayBuffer&&(e=new Uint8Array(e));try{t=function(n,r){var i=new tm(r);if(i.push(n,!0),i.err)throw i.msg;return i.result}(e)}catch{t=e}return t});class Ix{}const Iie="//mmtf.rcsb.org/v1.0/",kI=Iie+"full/",Cct=Iie+"reduced/";ku.add("rcsb",new class extends Ix{getUrl(e){const t=Co(e),n=t.name.substr(0,4);let r;return!["pdb","cif"].includes(t.ext)||t.compressed!==!1&&t.compressed!=="gz"?t.ext==="mmtf"?r=t.base.endsWith(".bb")?Cct+n:kI+n:(t.ext&&Ve.warn("unsupported ext",t.ext),r=kI+n):r="//files.rcsb.org/download/"+t.path,QD()+r}getExt(e){return Co(e).ext||"mmtf"}});const NV="//pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/",FV="/SDF?record_type=3d";ku.add("pubchem",new class extends Ix{getUrl(e){const t=Co(e),n=t.name;let r;return t.ext&&t.ext!=="sdf"&&Ve.warn("unsupported ext",t.ext),r=NV+n+FV,QD()+r}getExt(e){return Co(e).ext||"sdf"}});class LI extends Ix{getUrl(t){return t}getExt(t){return Co(t).ext}}ku.add("ftp",new LI),ku.add("http",new LI),ku.add("https",new LI);const zV="//alphafold.ebi.ac.uk/files/AF-",jV="-F1-model_v2.pdb";ku.add("alphafold",new class extends Ix{getUrl(e){const t=Co(e),n=t.name;let r;return t.ext&&t.ext!=="pdb"&&Ve.warn("unsupported AF ext",t.ext),r=zV+n+jV,QD()+r}getExt(e){return Co(e).ext||"pdb"}});const Act=/^((http|https|ftp):)*\/\//;class Pct extends Ix{constructor(t=""){super(),this.baseUrl=t}getUrl(t){const n=Co(t);let r=this.baseUrl+n.path;return Act.test(this.baseUrl)||(r=function(i){const o=window.location,s=o.pathname,a=s.substring(0,s.lastIndexOf("/")+1);return o.origin+a+i}(r)),r}getExt(t){return Co(t).ext}}function UV(e,t){return{type:"integer",max:e,min:t}}function yp(e,t,n){return{type:"number",precision:e,max:t,min:n}}function bp(e,t,n){return{type:"range",step:e,max:t,min:n}}function y0(...e){return{type:"select",options:e.reduce((t,n)=>Object.assign(Object.assign({},t),{[n]:n}),{})}}y0("auto","low","medium","high"),bp(1,5,-1),yp(1,10,0),yp(1,10,0),yp(1,10,0),bp(1,100,0),bp(1,100,0),UV(200,0),y0("scene","camera"),y0("relative","absolute"),bp(1,100,0),bp(1,100,0),y0("perspective","orthographic","stereo"),yp(3,1,.01),bp(1,120,15),yp(2,10,0),yp(2,10,0),UV(1e4,-1),y0(...Object.keys(Hre));function Mct(e,t,n,r,i){const o=n.residueStore.count,s=n.getResidueProxy(),a=e.msaview.relativePxToBp(t,r);for(let l=0;l<o;++l)if(s.index=l,s.resno===a+i-1)return s}ku.add("data",new Pct("https://files.rcsb.org/download/"));const Ect=Cn(function({model:e}){const t=I.useRef([]),[n,r]=I.useState("cartoon"),[i,o]=I.useState([]),[s,a]=I.useState(),[l,c]=I.useState(!1),{msaview:u,nglSelection:d}=e,{selectedStructures:f,mouseCol:h}=u,p=u1(f),g=I.useCallback(v=>{if(v){const m=new eat(v);a(m)}},[]);return I.useEffect(()=>()=>s==null?void 0:s.dispose(),[s]),I.useEffect(()=>{!p.length||!s||(async()=>{window.addEventListener("resize",()=>{s.handleResize()});const v=await Promise.all(p.map(m=>s.loadFile(`data://${m.structure.pdb}.pdb`)));o(v),s.signals.hovered.add(m=>{var y;if(m&&(m.atom||m.bond)){const b=m.atom||m.closestBondAtom;u.setMouseoveredColumn(b.resno-((y=p[0])==null?void 0:y.structure.startPos),b.chainname,m.picker.structure.name)}})})()},[u,p,s]),I.useEffect(()=>{if(s){for(const v of i)v.removeAllRepresentations(),v.addRepresentation(n,{sele:d});s.autoView()}},[n,i,s,d]),I.useEffect(()=>{p.length&&!l&&i.forEach((v,m)=>{if(t.current.length&&v.removeAnnotation(t.current[m]),t.current=[],h!==void 0){const y=v.structure,b=Mct(e,p[m].id,y,h,p[0].structure.startPos);if(b){const _=y.getAtomProxy();_.index=b.atomOffset,t.current.push(v.addAnnotation(_.positionToVector3(),b.qualifiedName()))}}s==null||s.viewer.requestRender()})},[e,h,p,s==null?void 0:s.viewer,i,l]),f.length?q.jsxs("div",{style:{padding:20},children:[q.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[q.jsx(C4,{onClick:()=>u.clearSelectedStructures(),variant:"contained",children:"Clear"}),q.jsx("div",{style:{width:20}}),q.jsxs(A1,{value:n,onChange:v=>r(v.target.value),children:[q.jsx(fo,{value:"cartoon",children:"cartoon"}),q.jsx(fo,{value:"ball+stick",children:"ball+stick"})]}),q.jsx("div",{style:{width:20}}),q.jsx(OQ,{variant:"outlined",label:"Selection",value:d,onChange:v=>e.setNGLSelection(v.target.value)})]}),q.jsx("div",{ref:g,style:{width:600,height:400},onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)})]}):null}),Tct=new URLSearchParams(window.location.search),VV=Tct.get("data"),XE=WKe.create(VV?JSON.parse(VV):{msaview:{type:"MsaView"}});XE.msaview.setWidth(window.innerWidth);let HV=0;Rq(XE,e=>{const t=Date.now();if(t-HV>=1e3){HV=t;const n=new URL(window.document.URL);n.searchParams.set("data",JSON.stringify(e)),window.history.replaceState(null,"",n.toString())}});window.addEventListener("resize",()=>{XE.msaview.setWidth(window.innerWidth)});const Oct=Cn(({model:e})=>{const{msaview:t}=e;return q.jsxs("div",{children:[q.jsx("div",{style:{border:"1px solid black",margin:20},children:q.jsx(hXe,{model:t})}),q.jsx(Ect,{model:e})]})}),Ict=()=>{const e=L4.createJBrowseTheme();return q.jsx(r4,{theme:e,children:q.jsx(Oct,{model:XE})})};DI.createRoot(document.getElementById("root")).render(q.jsx($e.StrictMode,{children:q.jsx(Ict,{})}));export{Jxe as $,Le as A,C4 as B,nSe as C,JSe as D,Ls as E,Q2e as F,Te as G,PD as H,$i as I,S1 as J,w1 as K,qZ as L,fo as M,QX as N,nb as O,cs as P,Dn as Q,$e as R,AD as S,OQ as T,oJ as U,eMe as V,$Te as W,Et as X,ya as Y,va as Z,M as _,I as a,tr as a0,Un as a1,g2e as a2,sMe as a3,eK as a4,ki as a5,xxe as a6,pK as a7,xh as a8,g_e as a9,XK as aa,ARe as ab,hm as ac,Ai as ad,Nu as ae,vZ as af,A1 as ag,oIe as ah,UAe as ai,k4 as aj,jZ as ak,xK as al,ot as am,Rct as an,Zi as ao,yD as ap,ld as aq,tGe as ar,Dg as as,xn as b,HSe as c,zYe as d,_Z as e,we as f,Ro as g,_l as h,ir as i,q as j,sP as k,cd as l,M1 as m,NLe as n,Cn as o,tt as p,nt as q,ji as r,G5 as s,it as t,P2 as u,Yr as v,je as w,He as x,cn as y,kn as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./MetadataDlg-SPhhzz2l.js","./index-Cmm1_PZk.js","./index-SCwaNniL.js","./TrackInfoDlg-gPujlICd.js","./TreeNodeInfoDlg-mpBjqmzZ.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-SEQt8VF-.js.map
