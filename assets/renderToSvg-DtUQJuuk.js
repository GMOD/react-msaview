import{o as f,R as t,w,_ as x,u as v,c as S,a as _,r as k,b as y,d as W}from"./index-BOiVkYwg.js";const H=f(({model:e})=>{const{scrollX:n,msaAreaWidth:r,minimapHeight:a,colWidth:s,numColumns:i}=e,c=12,o=a-12,l=r/i/s,m=-n,u=m+r,p=m*l,g=u*l,h="rgba(66, 119, 127, 0.3)";return t.createElement(t.Fragment,null,t.createElement("rect",{x:0,y:0,width:r,height:c,stroke:"#555",fill:"none"}),t.createElement("rect",{x:Math.max(0,p),y:0,width:g-p,height:c,fill:h,stroke:"#555"}),t.createElement("g",{transform:`translate(0 ${c})`},t.createElement("polygon",{fill:h,points:[[g,0],[p,0],[0,o],[r,o]].toString()})))});async function b(e,n){await w(()=>!!e.dataInitialized);const{width:r,height:a,scrollX:s,scrollY:i}=e,{exportType:c,theme:o,includeMinimap:l}=n;if(c==="entire")return E({width:e.totalWidth+e.treeAreaWidth,height:e.totalHeight,theme:o,model:e,offsetY:0,offsetX:0,includeMinimap:l});if(c==="viewport")return E({width:r,height:a,theme:o,model:e,offsetY:i,offsetX:-s,includeMinimap:l});throw new Error("unknown export type")}async function E({width:e,height:n,offsetX:r,offsetY:a,theme:s,model:i,includeMinimap:c}){const{Context:o}=await x(async()=>{const{Context:m}=await import("./svgcanvas-DvSjDB9A.js").then(u=>u.s);return{Context:m}},[],import.meta.url),l=c?T:A;return v.renderToStaticMarkup(t.createElement(R,{width:e,height:n},t.createElement(l,{model:i},t.createElement(M,{Context:o,model:i,theme:s,offsetX:r,offsetY:a,width:e,height:n}))),S)}function M({model:e,theme:n,width:r,height:a,offsetX:s,offsetY:i,Context:c}){const o="tree",l="msa",{treeAreaWidth:m,colorScheme:u}=e,p=_(u,n),g=c(r,a),h=c(r,a);k({ctx:h,offsetX:s,offsetY:i,model:e,blockSizeYOverride:a,highResScaleFactorOverride:1});const d=r-m;return y({model:e,offsetY:i,ctx:g,theme:n,blockSizeYOverride:a,highResScaleFactorOverride:1}),W({model:e,theme:n,offsetY:i,offsetX:s,contrastScheme:p,ctx:h,blockSizeXOverride:d,blockSizeYOverride:a,highResScaleFactorOverride:1}),t.createElement(t.Fragment,null,t.createElement("defs",null,t.createElement("clipPath",{id:o},t.createElement("rect",{x:0,y:0,width:m,height:a}))),t.createElement("defs",null,t.createElement("clipPath",{id:l},t.createElement("rect",{x:0,y:0,width:d,height:a}))),t.createElement("g",{clipPath:`url(#${o})`,dangerouslySetInnerHTML:{__html:g.getSvg().innerHTML}}),t.createElement("g",{clipPath:`url(#${l})`,transform:`translate(${m} 0)`,dangerouslySetInnerHTML:{__html:h.getSvg().innerHTML}}))}function T({model:e,children:n}){const{minimapHeight:r,treeAreaWidth:a}=e;return t.createElement(t.Fragment,null,t.createElement("g",{transform:`translate(${a} 0)`},t.createElement(H,{model:e})),t.createElement("g",{transform:`translate(0 ${r})`},n))}function R({width:e,height:n,children:r}){return t.createElement("svg",{width:e,height:n,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,e,n].toString()},r)}function A({children:e}){return e}export{b as renderToSvg};
//# sourceMappingURL=renderToSvg-DtUQJuuk.js.map
